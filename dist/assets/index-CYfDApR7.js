(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Yy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Em={exports:{}},yl={};var kw;function aM(){if(kw)return yl;kw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:a}}return yl.Fragment=e,yl.jsx=n,yl.jsxs=n,yl}var Rw;function oM(){return Rw||(Rw=1,Em.exports=aM()),Em.exports}var w=oM(),km={exports:{}},He={};var Aw;function lM(){if(Aw)return He;Aw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(D){return D===null||typeof D!="object"?null:(D=g&&D[g]||D["@@iterator"],typeof D=="function"?D:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function C(D,B,T){this.props=D,this.context=B,this.refs=E,this.updater=T||x}C.prototype.isReactComponent={},C.prototype.setState=function(D,B){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,B,"setState")},C.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function k(){}k.prototype=C.prototype;function R(D,B,T){this.props=D,this.context=B,this.refs=E,this.updater=T||x}var I=R.prototype=new k;I.constructor=R,S(I,C.prototype),I.isPureReactComponent=!0;var j=Array.isArray;function A(){}var z={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function P(D,B,T){var se=T.ref;return{$$typeof:t,type:D,key:B,ref:se!==void 0?se:null,props:T}}function M(D,B){return P(D.type,B,D.props)}function $(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function G(D){var B={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(T){return B[T]})}var ee=/\/+/g;function te(D,B){return typeof D=="object"&&D!==null&&D.key!=null?G(""+D.key):B.toString(36)}function V(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(A,A):(D.status="pending",D.then(function(B){D.status==="pending"&&(D.status="fulfilled",D.value=B)},function(B){D.status==="pending"&&(D.status="rejected",D.reason=B)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function F(D,B,T,se,ce){var he=typeof D;(he==="undefined"||he==="boolean")&&(D=null);var ve=!1;if(D===null)ve=!0;else switch(he){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(D.$$typeof){case t:case e:ve=!0;break;case m:return ve=D._init,F(ve(D._payload),B,T,se,ce)}}if(ve)return ce=ce(D),ve=se===""?"."+te(D,0):se,j(ce)?(T="",ve!=null&&(T=ve.replace(ee,"$&/")+"/"),F(ce,B,T,"",function(me){return me})):ce!=null&&($(ce)&&(ce=M(ce,T+(ce.key==null||D&&D.key===ce.key?"":(""+ce.key).replace(ee,"$&/")+"/")+ve)),B.push(ce)),1;ve=0;var Ae=se===""?".":se+":";if(j(D))for(var _e=0;_e<D.length;_e++)se=D[_e],he=Ae+te(se,_e),ve+=F(se,B,T,he,ce);else if(_e=y(D),typeof _e=="function")for(D=_e.call(D),_e=0;!(se=D.next()).done;)se=se.value,he=Ae+te(se,_e++),ve+=F(se,B,T,he,ce);else if(he==="object"){if(typeof D.then=="function")return F(V(D),B,T,se,ce);throw B=String(D),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return ve}function J(D,B,T){if(D==null)return D;var se=[],ce=0;return F(D,se,"","",function(he){return B.call(T,he,ce++)}),se}function ae(D){if(D._status===-1){var B=D._result;B=B(),B.then(function(T){(D._status===0||D._status===-1)&&(D._status=1,D._result=T)},function(T){(D._status===0||D._status===-1)&&(D._status=2,D._result=T)}),D._status===-1&&(D._status=0,D._result=B)}if(D._status===1)return D._result.default;throw D._result}var Q=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},N={map:J,forEach:function(D,B,T){J(D,function(){B.apply(this,arguments)},T)},count:function(D){var B=0;return J(D,function(){B++}),B},toArray:function(D){return J(D,function(B){return B})||[]},only:function(D){if(!$(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return He.Activity=p,He.Children=N,He.Component=C,He.Fragment=n,He.Profiler=s,He.PureComponent=R,He.StrictMode=r,He.Suspense=f,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,He.__COMPILER_RUNTIME={__proto__:null,c:function(D){return z.H.useMemoCache(D)}},He.cache=function(D){return function(){return D.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(D,B,T){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var se=S({},D.props),ce=D.key;if(B!=null)for(he in B.key!==void 0&&(ce=""+B.key),B)!L.call(B,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&B.ref===void 0||(se[he]=B[he]);var he=arguments.length-2;if(he===1)se.children=T;else if(1<he){for(var ve=Array(he),Ae=0;Ae<he;Ae++)ve[Ae]=arguments[Ae+2];se.children=ve}return P(D.type,ce,se)},He.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:a,_context:D},D},He.createElement=function(D,B,T){var se,ce={},he=null;if(B!=null)for(se in B.key!==void 0&&(he=""+B.key),B)L.call(B,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ce[se]=B[se]);var ve=arguments.length-2;if(ve===1)ce.children=T;else if(1<ve){for(var Ae=Array(ve),_e=0;_e<ve;_e++)Ae[_e]=arguments[_e+2];ce.children=Ae}if(D&&D.defaultProps)for(se in ve=D.defaultProps,ve)ce[se]===void 0&&(ce[se]=ve[se]);return P(D,he,ce)},He.createRef=function(){return{current:null}},He.forwardRef=function(D){return{$$typeof:c,render:D}},He.isValidElement=$,He.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:ae}},He.memo=function(D,B){return{$$typeof:d,type:D,compare:B===void 0?null:B}},He.startTransition=function(D){var B=z.T,T={};z.T=T;try{var se=D(),ce=z.S;ce!==null&&ce(T,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(A,Q)}catch(he){Q(he)}finally{B!==null&&T.types!==null&&(B.types=T.types),z.T=B}},He.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},He.use=function(D){return z.H.use(D)},He.useActionState=function(D,B,T){return z.H.useActionState(D,B,T)},He.useCallback=function(D,B){return z.H.useCallback(D,B)},He.useContext=function(D){return z.H.useContext(D)},He.useDebugValue=function(){},He.useDeferredValue=function(D,B){return z.H.useDeferredValue(D,B)},He.useEffect=function(D,B){return z.H.useEffect(D,B)},He.useEffectEvent=function(D){return z.H.useEffectEvent(D)},He.useId=function(){return z.H.useId()},He.useImperativeHandle=function(D,B,T){return z.H.useImperativeHandle(D,B,T)},He.useInsertionEffect=function(D,B){return z.H.useInsertionEffect(D,B)},He.useLayoutEffect=function(D,B){return z.H.useLayoutEffect(D,B)},He.useMemo=function(D,B){return z.H.useMemo(D,B)},He.useOptimistic=function(D,B){return z.H.useOptimistic(D,B)},He.useReducer=function(D,B,T){return z.H.useReducer(D,B,T)},He.useRef=function(D){return z.H.useRef(D)},He.useState=function(D){return z.H.useState(D)},He.useSyncExternalStore=function(D,B,T){return z.H.useSyncExternalStore(D,B,T)},He.useTransition=function(){return z.H.useTransition()},He.version="19.2.3",He}var Tw;function fo(){return Tw||(Tw=1,km.exports=lM()),km.exports}var q=fo();const Or=Yy(q);var Rm={exports:{}},vl={},Am={exports:{}},Tm={};var Ow;function uM(){return Ow||(Ow=1,(function(t){function e(F,J){var ae=F.length;F.push(J);e:for(;0<ae;){var Q=ae-1>>>1,N=F[Q];if(0<s(N,J))F[Q]=J,F[ae]=N,ae=Q;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var J=F[0],ae=F.pop();if(ae!==J){F[0]=ae;e:for(var Q=0,N=F.length,D=N>>>1;Q<D;){var B=2*(Q+1)-1,T=F[B],se=B+1,ce=F[se];if(0>s(T,ae))se<N&&0>s(ce,T)?(F[Q]=ce,F[se]=ae,Q=se):(F[Q]=T,F[B]=ae,Q=B);else if(se<N&&0>s(ce,ae))F[Q]=ce,F[se]=ae,Q=se;else break e}}return J}function s(F,J){var ae=F.sortIndex-J.sortIndex;return ae!==0?ae:F.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],d=[],m=1,p=null,g=3,y=!1,x=!1,S=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function I(F){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=F)r(d),J.sortIndex=J.expirationTime,e(f,J);else break;J=n(d)}}function j(F){if(S=!1,I(F),!x)if(n(f)!==null)x=!0,A||(A=!0,G());else{var J=n(d);J!==null&&V(j,J.startTime-F)}}var A=!1,z=-1,L=5,P=-1;function M(){return E?!0:!(t.unstable_now()-P<L)}function $(){if(E=!1,A){var F=t.unstable_now();P=F;var J=!0;try{e:{x=!1,S&&(S=!1,k(z),z=-1),y=!0;var ae=g;try{t:{for(I(F),p=n(f);p!==null&&!(p.expirationTime>F&&M());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,g=p.priorityLevel;var N=Q(p.expirationTime<=F);if(F=t.unstable_now(),typeof N=="function"){p.callback=N,I(F),J=!0;break t}p===n(f)&&r(f),I(F)}else r(f);p=n(f)}if(p!==null)J=!0;else{var D=n(d);D!==null&&V(j,D.startTime-F),J=!1}}break e}finally{p=null,g=ae,y=!1}J=void 0}}finally{J?G():A=!1}}}var G;if(typeof R=="function")G=function(){R($)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=$,G=function(){te.postMessage(null)}}else G=function(){C($,0)};function V(F,J){z=C(function(){F(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(F){switch(g){case 1:case 2:case 3:var J=3;break;default:J=g}var ae=g;g=J;try{return F()}finally{g=ae}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(F,J){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ae=g;g=F;try{return J()}finally{g=ae}},t.unstable_scheduleCallback=function(F,J,ae){var Q=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Q+ae:Q):ae=Q,F){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ae+N,F={id:m++,callback:J,priorityLevel:F,startTime:ae,expirationTime:N,sortIndex:-1},ae>Q?(F.sortIndex=ae,e(d,F),n(f)===null&&F===n(d)&&(S?(k(z),z=-1):S=!0,V(j,ae-Q))):(F.sortIndex=N,e(f,F),x||y||(x=!0,A||(A=!0,G()))),F},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(F){var J=g;return function(){var ae=g;g=J;try{return F.apply(this,arguments)}finally{g=ae}}}})(Tm)),Tm}var Mw;function cM(){return Mw||(Mw=1,Am.exports=uM()),Am.exports}var Om={exports:{}},hn={};var Nw;function fM(){if(Nw)return hn;Nw=1;var t=fo();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,d,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:f,containerInfo:d,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hn.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,m)},hn.flushSync=function(f){var d=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=d,r.p=m,r.d.f()}},hn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},hn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},hn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,p=c(m,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):m==="script"&&r.d.X(f,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},hn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},hn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,p=c(m,d.crossOrigin);r.d.L(f,m,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},hn.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=c(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},hn.requestFormReset=function(f){r.d.r(f)},hn.unstable_batchedUpdates=function(f,d){return f(d)},hn.useFormState=function(f,d,m){return l.H.useFormState(f,d,m)},hn.useFormStatus=function(){return l.H.useHostTransitionStatus()},hn.version="19.2.3",hn}var Iw;function ZC(){if(Iw)return Om.exports;Iw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Om.exports=fM(),Om.exports}var Dw;function dM(){if(Dw)return vl;Dw=1;var t=cM(),e=fo(),n=ZC();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function c(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(a(i)!==i)throw Error(r(188))}function d(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var u=i,h=o;;){var v=u.return;if(v===null)break;var b=v.alternate;if(b===null){if(h=v.return,h!==null){u=h;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===u)return f(v),i;if(b===h)return f(v),o;b=b.sibling}throw Error(r(188))}if(u.return!==h.return)u=v,h=b;else{for(var _=!1,O=v.child;O;){if(O===u){_=!0,u=v,h=b;break}if(O===h){_=!0,h=v,u=b;break}O=O.sibling}if(!_){for(O=b.child;O;){if(O===u){_=!0,u=b,h=v;break}if(O===h){_=!0,h=b,u=v;break}O=O.sibling}if(!_)throw Error(r(189))}}if(u.alternate!==h)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),R=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=$&&i[$]||i["@@iterator"],typeof i=="function"?i:null)}var ee=Symbol.for("react.client.reference");function te(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ee?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case j:return"Suspense";case A:return"SuspenseList";case P:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case x:return"Portal";case R:return i.displayName||"Context";case k:return(i._context.displayName||"Context")+".Consumer";case I:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case z:return o=i.displayName||null,o!==null?o:te(i.type)||"Memo";case L:o=i._payload,i=i._init;try{return te(i(o))}catch{}}return null}var V=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},Q=[],N=-1;function D(i){return{current:i}}function B(i){0>N||(i.current=Q[N],Q[N]=null,N--)}function T(i,o){N++,Q[N]=i.current,i.current=o}var se=D(null),ce=D(null),he=D(null),ve=D(null);function Ae(i,o){switch(T(he,o),T(ce,i),T(se,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?ZS(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=ZS(o),i=YS(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}B(se),T(se,i)}function _e(){B(se),B(ce),B(he)}function me(i){i.memoizedState!==null&&T(ve,i);var o=se.current,u=YS(o,i.type);o!==u&&(T(ce,i),T(se,u))}function Ee(i){ce.current===i&&(B(se),B(ce)),ve.current===i&&(B(ve),hl._currentValue=ae)}var Oe,Ze;function Le(i){if(Oe===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Oe=o&&o[1]||"",Ze=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oe+i+Ze}var Ye=!1;function it(i,o){if(!i||Ye)return"";Ye=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(re){var W=re}Reflect.construct(i,[],le)}else{try{le.call()}catch(re){W=re}i.call(le.prototype)}}else{try{throw Error()}catch(re){W=re}(le=i())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(re){if(re&&W&&typeof re.stack=="string")return[re.stack,W.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),_=b[0],O=b[1];if(_&&O){var U=_.split(`
`),Y=O.split(`
`);for(v=h=0;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;for(;v<Y.length&&!Y[v].includes("DetermineComponentFrameRoot");)v++;if(h===U.length||v===Y.length)for(h=U.length-1,v=Y.length-1;1<=h&&0<=v&&U[h]!==Y[v];)v--;for(;1<=h&&0<=v;h--,v--)if(U[h]!==Y[v]){if(h!==1||v!==1)do if(h--,v--,0>v||U[h]!==Y[v]){var ie=`
`+U[h].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=h&&0<=v);break}}}finally{Ye=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?Le(u):""}function Je(i,o){switch(i.tag){case 26:case 27:case 5:return Le(i.type);case 16:return Le("Lazy");case 13:return i.child!==o&&o!==null?Le("Suspense Fallback"):Le("Suspense");case 19:return Le("SuspenseList");case 0:case 15:return it(i.type,!1);case 11:return it(i.type.render,!1);case 1:return it(i.type,!0);case 31:return Le("Activity");default:return""}}function ot(i){try{var o="",u=null;do o+=Je(i,u),u=i,i=i.return;while(i);return o}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var ht=Object.prototype.hasOwnProperty,Me=t.unstable_scheduleCallback,ge=t.unstable_cancelCallback,je=t.unstable_shouldYield,be=t.unstable_requestPaint,ye=t.unstable_now,qe=t.unstable_getCurrentPriorityLevel,ne=t.unstable_ImmediatePriority,fe=t.unstable_UserBlockingPriority,Ce=t.unstable_NormalPriority,ke=t.unstable_LowPriority,xe=t.unstable_IdlePriority,Ue=t.log,vt=t.unstable_setDisableYieldValue,ut=null,ct=null;function kn(i){if(typeof Ue=="function"&&vt(i),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(ut,i)}catch{}}var wt=Math.clz32?Math.clz32:KT,xs=Math.log,_r=Math.LN2;function KT(i){return i>>>=0,i===0?32:31-(xs(i)/_r|0)|0}var Fu=256,$u=262144,Bu=4194304;function fi(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Uu(i,o,u){var h=i.pendingLanes;if(h===0)return 0;var v=0,b=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var O=h&134217727;return O!==0?(h=O&~b,h!==0?v=fi(h):(_&=O,_!==0?v=fi(_):u||(u=O&~i,u!==0&&(v=fi(u))))):(O=h&~b,O!==0?v=fi(O):_!==0?v=fi(_):u||(u=h&~i,u!==0&&(v=fi(u)))),v===0?0:o!==0&&o!==v&&(o&b)===0&&(b=v&-v,u=o&-o,b>=u||b===32&&(u&4194048)!==0)?o:v}function ko(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function GT(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ov(){var i=Bu;return Bu<<=1,(Bu&62914560)===0&&(Bu=4194304),i}function hh(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Ro(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function QT(i,o,u,h,v,b){var _=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var O=i.entanglements,U=i.expirationTimes,Y=i.hiddenUpdates;for(u=_&~u;0<u;){var ie=31-wt(u),le=1<<ie;O[ie]=0,U[ie]=-1;var W=Y[ie];if(W!==null)for(Y[ie]=null,ie=0;ie<W.length;ie++){var re=W[ie];re!==null&&(re.lane&=-536870913)}u&=~le}h!==0&&Mv(i,h,0),b!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=b&~(_&~o))}function Mv(i,o,u){i.pendingLanes|=o,i.suspendedLanes&=~o;var h=31-wt(o);i.entangledLanes|=o,i.entanglements[h]=i.entanglements[h]|1073741824|u&261930}function Nv(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var h=31-wt(u),v=1<<h;v&o|i[h]&o&&(i[h]|=o),u&=~v}}function Iv(i,o){var u=o&-o;return u=(u&42)!==0?1:ph(u),(u&(i.suspendedLanes|o))!==0?0:u}function ph(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function mh(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Dv(){var i=J.p;return i!==0?i:(i=window.event,i===void 0?32:bw(i.type))}function zv(i,o){var u=J.p;try{return J.p=i,o()}finally{J.p=u}}var Ss=Math.random().toString(36).slice(2),nn="__reactFiber$"+Ss,Rn="__reactProps$"+Ss,ta="__reactContainer$"+Ss,gh="__reactEvents$"+Ss,ZT="__reactListeners$"+Ss,YT="__reactHandles$"+Ss,jv="__reactResources$"+Ss,Ao="__reactMarker$"+Ss;function yh(i){delete i[nn],delete i[Rn],delete i[gh],delete i[ZT],delete i[YT]}function na(i){var o=i[nn];if(o)return o;for(var u=i.parentNode;u;){if(o=u[ta]||u[nn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=rw(i);i!==null;){if(u=i[nn])return u;i=rw(i)}return o}i=u,u=i.parentNode}return null}function ra(i){if(i=i[nn]||i[ta]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function To(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function sa(i){var o=i[jv];return o||(o=i[jv]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Yt(i){i[Ao]=!0}var Lv=new Set,Pv={};function di(i,o){ia(i,o),ia(i+"Capture",o)}function ia(i,o){for(Pv[i]=o,i=0;i<o.length;i++)Lv.add(o[i])}var JT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fv={},$v={};function XT(i){return ht.call($v,i)?!0:ht.call(Fv,i)?!1:JT.test(i)?$v[i]=!0:(Fv[i]=!0,!1)}function qu(i,o,u){if(XT(o))if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+u)}}function Hu(i,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+u)}}function Gr(i,o,u,h){if(h===null)i.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(o,u,""+h)}}function ir(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Bv(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function WT(i,o,u){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,b=h.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return v.call(this)},set:function(_){u=""+_,b.call(this,_)}}),Object.defineProperty(i,o,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function vh(i){if(!i._valueTracker){var o=Bv(i)?"checked":"value";i._valueTracker=WT(i,o,""+i[o])}}function Uv(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return i&&(h=Bv(i)?i.checked?"true":"false":i.value),i=h,i!==u?(o.setValue(i),!0):!1}function Vu(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var eO=/[\n"\\]/g;function ar(i){return i.replace(eO,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function bh(i,o,u,h,v,b,_,O){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),o!=null?_==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+ir(o)):i.value!==""+ir(o)&&(i.value=""+ir(o)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),o!=null?xh(i,_,ir(o)):u!=null?xh(i,_,ir(u)):h!=null&&i.removeAttribute("value"),v==null&&b!=null&&(i.defaultChecked=!!b),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?i.name=""+ir(O):i.removeAttribute("name")}function qv(i,o,u,h,v,b,_,O){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),o!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){vh(i);return}u=u!=null?""+ir(u):"",o=o!=null?""+ir(o):u,O||o===i.value||(i.value=o),i.defaultValue=o}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=O?i.checked:!!h,i.defaultChecked=!!h,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_),vh(i)}function xh(i,o,u){o==="number"&&Vu(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function aa(i,o,u,h){if(i=i.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<i.length;u++)v=o.hasOwnProperty("$"+i[u].value),i[u].selected!==v&&(i[u].selected=v),v&&h&&(i[u].defaultSelected=!0)}else{for(u=""+ir(u),o=null,v=0;v<i.length;v++){if(i[v].value===u){i[v].selected=!0,h&&(i[v].defaultSelected=!0);return}o!==null||i[v].disabled||(o=i[v])}o!==null&&(o.selected=!0)}}function Hv(i,o,u){if(o!=null&&(o=""+ir(o),o!==i.value&&(i.value=o),u==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=u!=null?""+ir(u):""}function Vv(i,o,u,h){if(o==null){if(h!=null){if(u!=null)throw Error(r(92));if(V(h)){if(1<h.length)throw Error(r(93));h=h[0]}u=h}u==null&&(u=""),o=u}u=ir(o),i.defaultValue=u,h=i.textContent,h===u&&h!==""&&h!==null&&(i.value=h),vh(i)}function oa(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var tO=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kv(i,o,u){var h=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":h?i.setProperty(o,u):typeof u!="number"||u===0||tO.has(o)?o==="float"?i.cssFloat=u:i[o]=(""+u).trim():i[o]=u+"px"}function Gv(i,o,u){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var v in o)h=o[v],o.hasOwnProperty(v)&&u[v]!==h&&Kv(i,v,h)}else for(var b in o)o.hasOwnProperty(b)&&Kv(i,b,o[b])}function Sh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ku(i){return rO.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Qr(){}var wh=null;function _h(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var la=null,ua=null;function Qv(i){var o=ra(i);if(o&&(i=o.stateNode)){var u=i[Rn]||null;e:switch(i=o.stateNode,o.type){case"input":if(bh(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ar(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==i&&h.form===i.form){var v=h[Rn]||null;if(!v)throw Error(r(90));bh(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)h=u[o],h.form===i.form&&Uv(h)}break e;case"textarea":Hv(i,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&aa(i,!!u.multiple,o,!1)}}}var Ch=!1;function Zv(i,o,u){if(Ch)return i(o,u);Ch=!0;try{var h=i(o);return h}finally{if(Ch=!1,(la!==null||ua!==null)&&(Ic(),la&&(o=la,i=ua,ua=la=null,Qv(o),i)))for(o=0;o<i.length;o++)Qv(i[o])}}function Oo(i,o){var u=i.stateNode;if(u===null)return null;var h=u[Rn]||null;if(h===null)return null;u=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,o,typeof u));return u}var Zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eh=!1;if(Zr)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){Eh=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{Eh=!1}var ws=null,kh=null,Gu=null;function Yv(){if(Gu)return Gu;var i,o=kh,u=o.length,h,v="value"in ws?ws.value:ws.textContent,b=v.length;for(i=0;i<u&&o[i]===v[i];i++);var _=u-i;for(h=1;h<=_&&o[u-h]===v[b-h];h++);return Gu=v.slice(i,1<h?1-h:void 0)}function Qu(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Zu(){return!0}function Jv(){return!1}function An(i){function o(u,h,v,b,_){this._reactName=u,this._targetInst=v,this.type=h,this.nativeEvent=b,this.target=_,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(u=i[O],this[O]=u?u(b):b[O]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Zu:Jv,this.isPropagationStopped=Jv,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Zu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Zu)},persist:function(){},isPersistent:Zu}),o}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yu=An(hi),No=p({},hi,{view:0,detail:0}),sO=An(No),Rh,Ah,Io,Ju=p({},No,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Io&&(Io&&i.type==="mousemove"?(Rh=i.screenX-Io.screenX,Ah=i.screenY-Io.screenY):Ah=Rh=0,Io=i),Rh)},movementY:function(i){return"movementY"in i?i.movementY:Ah}}),Xv=An(Ju),iO=p({},Ju,{dataTransfer:0}),aO=An(iO),oO=p({},No,{relatedTarget:0}),Th=An(oO),lO=p({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),uO=An(lO),cO=p({},hi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),fO=An(cO),dO=p({},hi,{data:0}),Wv=An(dO),hO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gO(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=mO[i])?!!o[i]:!1}function Oh(){return gO}var yO=p({},No,{key:function(i){if(i.key){var o=hO[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Qu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?pO[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oh,charCode:function(i){return i.type==="keypress"?Qu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Qu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),vO=An(yO),bO=p({},Ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eb=An(bO),xO=p({},No,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oh}),SO=An(xO),wO=p({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),_O=An(wO),CO=p({},Ju,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),EO=An(CO),kO=p({},hi,{newState:0,oldState:0}),RO=An(kO),AO=[9,13,27,32],Mh=Zr&&"CompositionEvent"in window,Do=null;Zr&&"documentMode"in document&&(Do=document.documentMode);var TO=Zr&&"TextEvent"in window&&!Do,tb=Zr&&(!Mh||Do&&8<Do&&11>=Do),nb=" ",rb=!1;function sb(i,o){switch(i){case"keyup":return AO.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ib(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ca=!1;function OO(i,o){switch(i){case"compositionend":return ib(o);case"keypress":return o.which!==32?null:(rb=!0,nb);case"textInput":return i=o.data,i===nb&&rb?null:i;default:return null}}function MO(i,o){if(ca)return i==="compositionend"||!Mh&&sb(i,o)?(i=Yv(),Gu=kh=ws=null,ca=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return tb&&o.locale!=="ko"?null:o.data;default:return null}}var NO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ab(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!NO[i.type]:o==="textarea"}function ob(i,o,u,h){la?ua?ua.push(h):ua=[h]:la=h,o=$c(o,"onChange"),0<o.length&&(u=new Yu("onChange","change",null,u,h),i.push({event:u,listeners:o}))}var zo=null,jo=null;function IO(i){qS(i,0)}function Xu(i){var o=To(i);if(Uv(o))return i}function lb(i,o){if(i==="change")return o}var ub=!1;if(Zr){var Nh;if(Zr){var Ih="oninput"in document;if(!Ih){var cb=document.createElement("div");cb.setAttribute("oninput","return;"),Ih=typeof cb.oninput=="function"}Nh=Ih}else Nh=!1;ub=Nh&&(!document.documentMode||9<document.documentMode)}function fb(){zo&&(zo.detachEvent("onpropertychange",db),jo=zo=null)}function db(i){if(i.propertyName==="value"&&Xu(jo)){var o=[];ob(o,jo,i,_h(i)),Zv(IO,o)}}function DO(i,o,u){i==="focusin"?(fb(),zo=o,jo=u,zo.attachEvent("onpropertychange",db)):i==="focusout"&&fb()}function zO(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Xu(jo)}function jO(i,o){if(i==="click")return Xu(o)}function LO(i,o){if(i==="input"||i==="change")return Xu(o)}function PO(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var $n=typeof Object.is=="function"?Object.is:PO;function Lo(i,o){if($n(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var v=u[h];if(!ht.call(o,v)||!$n(i[v],o[v]))return!1}return!0}function hb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function pb(i,o){var u=hb(i);i=0;for(var h;u;){if(u.nodeType===3){if(h=i+u.textContent.length,i<=o&&h>=o)return{node:u,offset:o-i};i=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=hb(u)}}function mb(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?mb(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function gb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Vu(i.document);o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Vu(i.document)}return o}function Dh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var FO=Zr&&"documentMode"in document&&11>=document.documentMode,fa=null,zh=null,Po=null,jh=!1;function yb(i,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;jh||fa==null||fa!==Vu(h)||(h=fa,"selectionStart"in h&&Dh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Po&&Lo(Po,h)||(Po=h,h=$c(zh,"onSelect"),0<h.length&&(o=new Yu("onSelect","select",null,o,u),i.push({event:o,listeners:h}),o.target=fa)))}function pi(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var da={animationend:pi("Animation","AnimationEnd"),animationiteration:pi("Animation","AnimationIteration"),animationstart:pi("Animation","AnimationStart"),transitionrun:pi("Transition","TransitionRun"),transitionstart:pi("Transition","TransitionStart"),transitioncancel:pi("Transition","TransitionCancel"),transitionend:pi("Transition","TransitionEnd")},Lh={},vb={};Zr&&(vb=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function mi(i){if(Lh[i])return Lh[i];if(!da[i])return i;var o=da[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in vb)return Lh[i]=o[u];return i}var bb=mi("animationend"),xb=mi("animationiteration"),Sb=mi("animationstart"),$O=mi("transitionrun"),BO=mi("transitionstart"),UO=mi("transitioncancel"),wb=mi("transitionend"),_b=new Map,Ph="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ph.push("scrollEnd");function Cr(i,o){_b.set(i,o),di(o,[i])}var Wu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},or=[],ha=0,Fh=0;function ec(){for(var i=ha,o=Fh=ha=0;o<i;){var u=or[o];or[o++]=null;var h=or[o];or[o++]=null;var v=or[o];or[o++]=null;var b=or[o];if(or[o++]=null,h!==null&&v!==null){var _=h.pending;_===null?v.next=v:(v.next=_.next,_.next=v),h.pending=v}b!==0&&Cb(u,v,b)}}function tc(i,o,u,h){or[ha++]=i,or[ha++]=o,or[ha++]=u,or[ha++]=h,Fh|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function $h(i,o,u,h){return tc(i,o,u,h),nc(i)}function gi(i,o){return tc(i,null,null,o),nc(i)}function Cb(i,o,u){i.lanes|=u;var h=i.alternate;h!==null&&(h.lanes|=u);for(var v=!1,b=i.return;b!==null;)b.childLanes|=u,h=b.alternate,h!==null&&(h.childLanes|=u),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(v=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,v&&o!==null&&(v=31-wt(u),i=b.hiddenUpdates,h=i[v],h===null?i[v]=[o]:h.push(o),o.lane=u|536870912),b):null}function nc(i){if(50<al)throw al=0,Zp=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var pa={};function qO(i,o,u,h){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(i,o,u,h){return new qO(i,o,u,h)}function Bh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Yr(i,o){var u=i.alternate;return u===null?(u=Bn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function Eb(i,o){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,o=u.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function rc(i,o,u,h,v,b){var _=0;if(h=i,typeof i=="function")Bh(i)&&(_=1);else if(typeof i=="string")_=Q2(i,u,se.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case P:return i=Bn(31,u,o,v),i.elementType=P,i.lanes=b,i;case S:return yi(u.children,v,b,o);case E:_=8,v|=24;break;case C:return i=Bn(12,u,o,v|2),i.elementType=C,i.lanes=b,i;case j:return i=Bn(13,u,o,v),i.elementType=j,i.lanes=b,i;case A:return i=Bn(19,u,o,v),i.elementType=A,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:_=10;break e;case k:_=9;break e;case I:_=11;break e;case z:_=14;break e;case L:_=16,h=null;break e}_=29,u=Error(r(130,i===null?"null":typeof i,"")),h=null}return o=Bn(_,u,o,v),o.elementType=i,o.type=h,o.lanes=b,o}function yi(i,o,u,h){return i=Bn(7,i,h,o),i.lanes=u,i}function Uh(i,o,u){return i=Bn(6,i,null,o),i.lanes=u,i}function kb(i){var o=Bn(18,null,null,0);return o.stateNode=i,o}function qh(i,o,u){return o=Bn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Rb=new WeakMap;function lr(i,o){if(typeof i=="object"&&i!==null){var u=Rb.get(i);return u!==void 0?u:(o={value:i,source:o,stack:ot(o)},Rb.set(i,o),o)}return{value:i,source:o,stack:ot(o)}}var ma=[],ga=0,sc=null,Fo=0,ur=[],cr=0,_s=null,Ir=1,Dr="";function Jr(i,o){ma[ga++]=Fo,ma[ga++]=sc,sc=i,Fo=o}function Ab(i,o,u){ur[cr++]=Ir,ur[cr++]=Dr,ur[cr++]=_s,_s=i;var h=Ir;i=Dr;var v=32-wt(h)-1;h&=~(1<<v),u+=1;var b=32-wt(o)+v;if(30<b){var _=v-v%5;b=(h&(1<<_)-1).toString(32),h>>=_,v-=_,Ir=1<<32-wt(o)+v|u<<v|h,Dr=b+i}else Ir=1<<b|u<<v|h,Dr=i}function Hh(i){i.return!==null&&(Jr(i,1),Ab(i,1,0))}function Vh(i){for(;i===sc;)sc=ma[--ga],ma[ga]=null,Fo=ma[--ga],ma[ga]=null;for(;i===_s;)_s=ur[--cr],ur[cr]=null,Dr=ur[--cr],ur[cr]=null,Ir=ur[--cr],ur[cr]=null}function Tb(i,o){ur[cr++]=Ir,ur[cr++]=Dr,ur[cr++]=_s,Ir=o.id,Dr=o.overflow,_s=i}var rn=null,kt=null,at=!1,Cs=null,fr=!1,Kh=Error(r(519));function Es(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $o(lr(o,i)),Kh}function Ob(i){var o=i.stateNode,u=i.type,h=i.memoizedProps;switch(o[nn]=i,o[Rn]=h,u){case"dialog":We("cancel",o),We("close",o);break;case"iframe":case"object":case"embed":We("load",o);break;case"video":case"audio":for(u=0;u<ll.length;u++)We(ll[u],o);break;case"source":We("error",o);break;case"img":case"image":case"link":We("error",o),We("load",o);break;case"details":We("toggle",o);break;case"input":We("invalid",o),qv(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":We("invalid",o);break;case"textarea":We("invalid",o),Vv(o,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||h.suppressHydrationWarning===!0||GS(o.textContent,u)?(h.popover!=null&&(We("beforetoggle",o),We("toggle",o)),h.onScroll!=null&&We("scroll",o),h.onScrollEnd!=null&&We("scrollend",o),h.onClick!=null&&(o.onclick=Qr),o=!0):o=!1,o||Es(i,!0)}function Mb(i){for(rn=i.return;rn;)switch(rn.tag){case 5:case 31:case 13:fr=!1;return;case 27:case 3:fr=!0;return;default:rn=rn.return}}function ya(i){if(i!==rn)return!1;if(!at)return Mb(i),at=!0,!1;var o=i.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||cm(i.type,i.memoizedProps)),u=!u),u&&kt&&Es(i),Mb(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));kt=nw(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));kt=nw(i)}else o===27?(o=kt,Fs(i.type)?(i=mm,mm=null,kt=i):kt=o):kt=rn?hr(i.stateNode.nextSibling):null;return!0}function vi(){kt=rn=null,at=!1}function Gh(){var i=Cs;return i!==null&&(Nn===null?Nn=i:Nn.push.apply(Nn,i),Cs=null),i}function $o(i){Cs===null?Cs=[i]:Cs.push(i)}var Qh=D(null),bi=null,Xr=null;function ks(i,o,u){T(Qh,o._currentValue),o._currentValue=u}function Wr(i){i._currentValue=Qh.current,B(Qh)}function Zh(i,o,u){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===u)break;i=i.return}}function Yh(i,o,u,h){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var b=v.dependencies;if(b!==null){var _=v.child;b=b.firstContext;e:for(;b!==null;){var O=b;b=v;for(var U=0;U<o.length;U++)if(O.context===o[U]){b.lanes|=u,O=b.alternate,O!==null&&(O.lanes|=u),Zh(b.return,u,i),h||(_=null);break e}b=O.next}}else if(v.tag===18){if(_=v.return,_===null)throw Error(r(341));_.lanes|=u,b=_.alternate,b!==null&&(b.lanes|=u),Zh(_,u,i),_=null}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===i){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}}function va(i,o,u,h){i=null;for(var v=o,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var _=v.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var O=v.type;$n(v.pendingProps.value,_.value)||(i!==null?i.push(O):i=[O])}}else if(v===ve.current){if(_=v.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(hl):i=[hl])}v=v.return}i!==null&&Yh(o,i,u,h),o.flags|=262144}function ic(i){for(i=i.firstContext;i!==null;){if(!$n(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function xi(i){bi=i,Xr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function sn(i){return Nb(bi,i)}function ac(i,o){return bi===null&&xi(i),Nb(i,o)}function Nb(i,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Xr===null){if(i===null)throw Error(r(308));Xr=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Xr=Xr.next=o;return u}var HO=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(u,h){i.push(h)}};this.abort=function(){o.aborted=!0,i.forEach(function(u){return u()})}},VO=t.unstable_scheduleCallback,KO=t.unstable_NormalPriority,zt={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jh(){return{controller:new HO,data:new Map,refCount:0}}function Bo(i){i.refCount--,i.refCount===0&&VO(KO,function(){i.controller.abort()})}var Uo=null,Xh=0,ba=0,xa=null;function GO(i,o){if(Uo===null){var u=Uo=[];Xh=0,ba=tm(),xa={status:"pending",value:void 0,then:function(h){u.push(h)}}}return Xh++,o.then(Ib,Ib),o}function Ib(){if(--Xh===0&&Uo!==null){xa!==null&&(xa.status="fulfilled");var i=Uo;Uo=null,ba=0,xa=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function QO(i,o){var u=[],h={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return i.then(function(){h.status="fulfilled",h.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(h.status="rejected",h.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),h}var Db=F.S;F.S=function(i,o){yS=ye(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&GO(i,o),Db!==null&&Db(i,o)};var Si=D(null);function Wh(){var i=Si.current;return i!==null?i:_t.pooledCache}function oc(i,o){o===null?T(Si,Si.current):T(Si,o.pool)}function zb(){var i=Wh();return i===null?null:{parent:zt._currentValue,pool:i}}var Sa=Error(r(460)),ep=Error(r(474)),lc=Error(r(542)),uc={then:function(){}};function jb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Lb(i,o,u){switch(u=i[u],u===void 0?i.push(o):u!==o&&(o.then(Qr,Qr),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Fb(i),i;default:if(typeof o.status=="string")o.then(Qr,Qr);else{if(i=_t,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(h){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=h}},function(h){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Fb(i),i}throw _i=o,Sa}}function wi(i){try{var o=i._init;return o(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(_i=u,Sa):u}}var _i=null;function Pb(){if(_i===null)throw Error(r(459));var i=_i;return _i=null,i}function Fb(i){if(i===Sa||i===lc)throw Error(r(483))}var wa=null,qo=0;function cc(i){var o=qo;return qo+=1,wa===null&&(wa=[]),Lb(wa,i,o)}function Ho(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function fc(i,o){throw o.$$typeof===g?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function $b(i){function o(K,H){if(i){var Z=K.deletions;Z===null?(K.deletions=[H],K.flags|=16):Z.push(H)}}function u(K,H){if(!i)return null;for(;H!==null;)o(K,H),H=H.sibling;return null}function h(K){for(var H=new Map;K!==null;)K.key!==null?H.set(K.key,K):H.set(K.index,K),K=K.sibling;return H}function v(K,H){return K=Yr(K,H),K.index=0,K.sibling=null,K}function b(K,H,Z){return K.index=Z,i?(Z=K.alternate,Z!==null?(Z=Z.index,Z<H?(K.flags|=67108866,H):Z):(K.flags|=67108866,H)):(K.flags|=1048576,H)}function _(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function O(K,H,Z,oe){return H===null||H.tag!==6?(H=Uh(Z,K.mode,oe),H.return=K,H):(H=v(H,Z),H.return=K,H)}function U(K,H,Z,oe){var Ne=Z.type;return Ne===S?ie(K,H,Z.props.children,oe,Z.key):H!==null&&(H.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===L&&wi(Ne)===H.type)?(H=v(H,Z.props),Ho(H,Z),H.return=K,H):(H=rc(Z.type,Z.key,Z.props,null,K.mode,oe),Ho(H,Z),H.return=K,H)}function Y(K,H,Z,oe){return H===null||H.tag!==4||H.stateNode.containerInfo!==Z.containerInfo||H.stateNode.implementation!==Z.implementation?(H=qh(Z,K.mode,oe),H.return=K,H):(H=v(H,Z.children||[]),H.return=K,H)}function ie(K,H,Z,oe,Ne){return H===null||H.tag!==7?(H=yi(Z,K.mode,oe,Ne),H.return=K,H):(H=v(H,Z),H.return=K,H)}function le(K,H,Z){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Uh(""+H,K.mode,Z),H.return=K,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case y:return Z=rc(H.type,H.key,H.props,null,K.mode,Z),Ho(Z,H),Z.return=K,Z;case x:return H=qh(H,K.mode,Z),H.return=K,H;case L:return H=wi(H),le(K,H,Z)}if(V(H)||G(H))return H=yi(H,K.mode,Z,null),H.return=K,H;if(typeof H.then=="function")return le(K,cc(H),Z);if(H.$$typeof===R)return le(K,ac(K,H),Z);fc(K,H)}return null}function W(K,H,Z,oe){var Ne=H!==null?H.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ne!==null?null:O(K,H,""+Z,oe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return Z.key===Ne?U(K,H,Z,oe):null;case x:return Z.key===Ne?Y(K,H,Z,oe):null;case L:return Z=wi(Z),W(K,H,Z,oe)}if(V(Z)||G(Z))return Ne!==null?null:ie(K,H,Z,oe,null);if(typeof Z.then=="function")return W(K,H,cc(Z),oe);if(Z.$$typeof===R)return W(K,H,ac(K,Z),oe);fc(K,Z)}return null}function re(K,H,Z,oe,Ne){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return K=K.get(Z)||null,O(H,K,""+oe,Ne);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return K=K.get(oe.key===null?Z:oe.key)||null,U(H,K,oe,Ne);case x:return K=K.get(oe.key===null?Z:oe.key)||null,Y(H,K,oe,Ne);case L:return oe=wi(oe),re(K,H,Z,oe,Ne)}if(V(oe)||G(oe))return K=K.get(Z)||null,ie(H,K,oe,Ne,null);if(typeof oe.then=="function")return re(K,H,Z,cc(oe),Ne);if(oe.$$typeof===R)return re(K,H,Z,ac(H,oe),Ne);fc(H,oe)}return null}function Se(K,H,Z,oe){for(var Ne=null,ft=null,Re=H,Ke=H=0,rt=null;Re!==null&&Ke<Z.length;Ke++){Re.index>Ke?(rt=Re,Re=null):rt=Re.sibling;var dt=W(K,Re,Z[Ke],oe);if(dt===null){Re===null&&(Re=rt);break}i&&Re&&dt.alternate===null&&o(K,Re),H=b(dt,H,Ke),ft===null?Ne=dt:ft.sibling=dt,ft=dt,Re=rt}if(Ke===Z.length)return u(K,Re),at&&Jr(K,Ke),Ne;if(Re===null){for(;Ke<Z.length;Ke++)Re=le(K,Z[Ke],oe),Re!==null&&(H=b(Re,H,Ke),ft===null?Ne=Re:ft.sibling=Re,ft=Re);return at&&Jr(K,Ke),Ne}for(Re=h(Re);Ke<Z.length;Ke++)rt=re(Re,K,Ke,Z[Ke],oe),rt!==null&&(i&&rt.alternate!==null&&Re.delete(rt.key===null?Ke:rt.key),H=b(rt,H,Ke),ft===null?Ne=rt:ft.sibling=rt,ft=rt);return i&&Re.forEach(function(Hs){return o(K,Hs)}),at&&Jr(K,Ke),Ne}function ze(K,H,Z,oe){if(Z==null)throw Error(r(151));for(var Ne=null,ft=null,Re=H,Ke=H=0,rt=null,dt=Z.next();Re!==null&&!dt.done;Ke++,dt=Z.next()){Re.index>Ke?(rt=Re,Re=null):rt=Re.sibling;var Hs=W(K,Re,dt.value,oe);if(Hs===null){Re===null&&(Re=rt);break}i&&Re&&Hs.alternate===null&&o(K,Re),H=b(Hs,H,Ke),ft===null?Ne=Hs:ft.sibling=Hs,ft=Hs,Re=rt}if(dt.done)return u(K,Re),at&&Jr(K,Ke),Ne;if(Re===null){for(;!dt.done;Ke++,dt=Z.next())dt=le(K,dt.value,oe),dt!==null&&(H=b(dt,H,Ke),ft===null?Ne=dt:ft.sibling=dt,ft=dt);return at&&Jr(K,Ke),Ne}for(Re=h(Re);!dt.done;Ke++,dt=Z.next())dt=re(Re,K,Ke,dt.value,oe),dt!==null&&(i&&dt.alternate!==null&&Re.delete(dt.key===null?Ke:dt.key),H=b(dt,H,Ke),ft===null?Ne=dt:ft.sibling=dt,ft=dt);return i&&Re.forEach(function(iM){return o(K,iM)}),at&&Jr(K,Ke),Ne}function St(K,H,Z,oe){if(typeof Z=="object"&&Z!==null&&Z.type===S&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:e:{for(var Ne=Z.key;H!==null;){if(H.key===Ne){if(Ne=Z.type,Ne===S){if(H.tag===7){u(K,H.sibling),oe=v(H,Z.props.children),oe.return=K,K=oe;break e}}else if(H.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===L&&wi(Ne)===H.type){u(K,H.sibling),oe=v(H,Z.props),Ho(oe,Z),oe.return=K,K=oe;break e}u(K,H);break}else o(K,H);H=H.sibling}Z.type===S?(oe=yi(Z.props.children,K.mode,oe,Z.key),oe.return=K,K=oe):(oe=rc(Z.type,Z.key,Z.props,null,K.mode,oe),Ho(oe,Z),oe.return=K,K=oe)}return _(K);case x:e:{for(Ne=Z.key;H!==null;){if(H.key===Ne)if(H.tag===4&&H.stateNode.containerInfo===Z.containerInfo&&H.stateNode.implementation===Z.implementation){u(K,H.sibling),oe=v(H,Z.children||[]),oe.return=K,K=oe;break e}else{u(K,H);break}else o(K,H);H=H.sibling}oe=qh(Z,K.mode,oe),oe.return=K,K=oe}return _(K);case L:return Z=wi(Z),St(K,H,Z,oe)}if(V(Z))return Se(K,H,Z,oe);if(G(Z)){if(Ne=G(Z),typeof Ne!="function")throw Error(r(150));return Z=Ne.call(Z),ze(K,H,Z,oe)}if(typeof Z.then=="function")return St(K,H,cc(Z),oe);if(Z.$$typeof===R)return St(K,H,ac(K,Z),oe);fc(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,H!==null&&H.tag===6?(u(K,H.sibling),oe=v(H,Z),oe.return=K,K=oe):(u(K,H),oe=Uh(Z,K.mode,oe),oe.return=K,K=oe),_(K)):u(K,H)}return function(K,H,Z,oe){try{qo=0;var Ne=St(K,H,Z,oe);return wa=null,Ne}catch(Re){if(Re===Sa||Re===lc)throw Re;var ft=Bn(29,Re,null,K.mode);return ft.lanes=oe,ft.return=K,ft}}}var Ci=$b(!0),Bb=$b(!1),Rs=!1;function tp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function np(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function As(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ts(i,o,u){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(pt&2)!==0){var v=h.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),h.pending=o,o=nc(i),Cb(i,null,u),o}return tc(i,h,o,u),nc(i)}function Vo(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,Nv(i,u)}}function rp(i,o){var u=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var v=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var _={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?v=b=_:b=b.next=_,u=u.next}while(u!==null);b===null?v=b=o:b=b.next=o}else v=b=o;u={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}var sp=!1;function Ko(){if(sp){var i=xa;if(i!==null)throw i}}function Go(i,o,u,h){sp=!1;var v=i.updateQueue;Rs=!1;var b=v.firstBaseUpdate,_=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var U=O,Y=U.next;U.next=null,_===null?b=Y:_.next=Y,_=U;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,O=ie.lastBaseUpdate,O!==_&&(O===null?ie.firstBaseUpdate=Y:O.next=Y,ie.lastBaseUpdate=U))}if(b!==null){var le=v.baseState;_=0,ie=Y=U=null,O=b;do{var W=O.lane&-536870913,re=W!==O.lane;if(re?(nt&W)===W:(h&W)===W){W!==0&&W===ba&&(sp=!0),ie!==null&&(ie=ie.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Se=i,ze=O;W=o;var St=u;switch(ze.tag){case 1:if(Se=ze.payload,typeof Se=="function"){le=Se.call(St,le,W);break e}le=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=ze.payload,W=typeof Se=="function"?Se.call(St,le,W):Se,W==null)break e;le=p({},le,W);break e;case 2:Rs=!0}}W=O.callback,W!==null&&(i.flags|=64,re&&(i.flags|=8192),re=v.callbacks,re===null?v.callbacks=[W]:re.push(W))}else re={lane:W,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ie===null?(Y=ie=re,U=le):ie=ie.next=re,_|=W;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;re=O,O=re.next,re.next=null,v.lastBaseUpdate=re,v.shared.pending=null}}while(!0);ie===null&&(U=le),v.baseState=U,v.firstBaseUpdate=Y,v.lastBaseUpdate=ie,b===null&&(v.shared.lanes=0),Ds|=_,i.lanes=_,i.memoizedState=le}}function Ub(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function qb(i,o){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)Ub(u[i],o)}var _a=D(null),dc=D(0);function Hb(i,o){i=ls,T(dc,i),T(_a,o),ls=i|o.baseLanes}function ip(){T(dc,ls),T(_a,_a.current)}function ap(){ls=dc.current,B(_a),B(dc)}var Un=D(null),dr=null;function Os(i){var o=i.alternate;T(It,It.current&1),T(Un,i),dr===null&&(o===null||_a.current!==null||o.memoizedState!==null)&&(dr=i)}function op(i){T(It,It.current),T(Un,i),dr===null&&(dr=i)}function Vb(i){i.tag===22?(T(It,It.current),T(Un,i),dr===null&&(dr=i)):Ms()}function Ms(){T(It,It.current),T(Un,Un.current)}function qn(i){B(Un),dr===i&&(dr=null),B(It)}var It=D(0);function hc(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||hm(u)||pm(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var es=0,Ve=null,bt=null,jt=null,pc=!1,Ca=!1,Ei=!1,mc=0,Qo=0,Ea=null,ZO=0;function Mt(){throw Error(r(321))}function lp(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!$n(i[u],o[u]))return!1;return!0}function up(i,o,u,h,v,b){return es=b,Ve=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,F.H=i===null||i.memoizedState===null?Ax:Cp,Ei=!1,b=u(h,v),Ei=!1,Ca&&(b=Gb(o,u,h,v)),Kb(i),b}function Kb(i){F.H=Jo;var o=bt!==null&&bt.next!==null;if(es=0,jt=bt=Ve=null,pc=!1,Qo=0,Ea=null,o)throw Error(r(300));i===null||Lt||(i=i.dependencies,i!==null&&ic(i)&&(Lt=!0))}function Gb(i,o,u,h){Ve=i;var v=0;do{if(Ca&&(Ea=null),Qo=0,Ca=!1,25<=v)throw Error(r(301));if(v+=1,jt=bt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}F.H=Tx,b=o(u,h)}while(Ca);return b}function YO(){var i=F.H,o=i.useState()[0];return o=typeof o.then=="function"?Zo(o):o,i=i.useState()[0],(bt!==null?bt.memoizedState:null)!==i&&(Ve.flags|=1024),o}function cp(){var i=mc!==0;return mc=0,i}function fp(i,o,u){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~u}function dp(i){if(pc){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}pc=!1}es=0,jt=bt=Ve=null,Ca=!1,Qo=mc=0,Ea=null}function vn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Ve.memoizedState=jt=i:jt=jt.next=i,jt}function Dt(){if(bt===null){var i=Ve.alternate;i=i!==null?i.memoizedState:null}else i=bt.next;var o=jt===null?Ve.memoizedState:jt.next;if(o!==null)jt=o,bt=i;else{if(i===null)throw Ve.alternate===null?Error(r(467)):Error(r(310));bt=i,i={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},jt===null?Ve.memoizedState=jt=i:jt=jt.next=i}return jt}function gc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zo(i){var o=Qo;return Qo+=1,Ea===null&&(Ea=[]),i=Lb(Ea,i,o),o=Ve,(jt===null?o.memoizedState:jt.next)===null&&(o=o.alternate,F.H=o===null||o.memoizedState===null?Ax:Cp),i}function yc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Zo(i);if(i.$$typeof===R)return sn(i)}throw Error(r(438,String(i)))}function hp(i){var o=null,u=Ve.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var h=Ve.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=gc(),Ve.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(i),h=0;h<i;h++)u[h]=M;return o.index++,u}function ts(i,o){return typeof o=="function"?o(i):o}function vc(i){var o=Dt();return pp(o,bt,i)}function pp(i,o,u){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=u;var v=i.baseQueue,b=h.pending;if(b!==null){if(v!==null){var _=v.next;v.next=b.next,b.next=_}o.baseQueue=v=b,h.pending=null}if(b=i.baseState,v===null)i.memoizedState=b;else{o=v.next;var O=_=null,U=null,Y=o,ie=!1;do{var le=Y.lane&-536870913;if(le!==Y.lane?(nt&le)===le:(es&le)===le){var W=Y.revertLane;if(W===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),le===ba&&(ie=!0);else if((es&W)===W){Y=Y.next,W===ba&&(ie=!0);continue}else le={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(O=U=le,_=b):U=U.next=le,Ve.lanes|=W,Ds|=W;le=Y.action,Ei&&u(b,le),b=Y.hasEagerState?Y.eagerState:u(b,le)}else W={lane:le,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(O=U=W,_=b):U=U.next=W,Ve.lanes|=le,Ds|=le;Y=Y.next}while(Y!==null&&Y!==o);if(U===null?_=b:U.next=O,!$n(b,i.memoizedState)&&(Lt=!0,ie&&(u=xa,u!==null)))throw u;i.memoizedState=b,i.baseState=_,i.baseQueue=U,h.lastRenderedState=b}return v===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function mp(i){var o=Dt(),u=o.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var h=u.dispatch,v=u.pending,b=o.memoizedState;if(v!==null){u.pending=null;var _=v=v.next;do b=i(b,_.action),_=_.next;while(_!==v);$n(b,o.memoizedState)||(Lt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),u.lastRenderedState=b}return[b,h]}function Qb(i,o,u){var h=Ve,v=Dt(),b=at;if(b){if(u===void 0)throw Error(r(407));u=u()}else u=o();var _=!$n((bt||v).memoizedState,u);if(_&&(v.memoizedState=u,Lt=!0),v=v.queue,vp(Jb.bind(null,h,v,i),[i]),v.getSnapshot!==o||_||jt!==null&&jt.memoizedState.tag&1){if(h.flags|=2048,ka(9,{destroy:void 0},Yb.bind(null,h,v,u,o),null),_t===null)throw Error(r(349));b||(es&127)!==0||Zb(h,o,u)}return u}function Zb(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Ve.updateQueue,o===null?(o=gc(),Ve.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function Yb(i,o,u,h){o.value=u,o.getSnapshot=h,Xb(o)&&Wb(i)}function Jb(i,o,u){return u(function(){Xb(o)&&Wb(i)})}function Xb(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!$n(i,u)}catch{return!0}}function Wb(i){var o=gi(i,2);o!==null&&In(o,i,2)}function gp(i){var o=vn();if(typeof i=="function"){var u=i;if(i=u(),Ei){kn(!0);try{u()}finally{kn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:i},o}function ex(i,o,u,h){return i.baseState=u,pp(i,bt,typeof h=="function"?h:ts)}function JO(i,o,u,h,v){if(Sc(i))throw Error(r(485));if(i=o.action,i!==null){var b={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){b.listeners.push(_)}};F.T!==null?u(!0):b.isTransition=!1,h(b),u=o.pending,u===null?(b.next=o.pending=b,tx(o,b)):(b.next=u.next,o.pending=u.next=b)}}function tx(i,o){var u=o.action,h=o.payload,v=i.state;if(o.isTransition){var b=F.T,_={};F.T=_;try{var O=u(v,h),U=F.S;U!==null&&U(_,O),nx(i,o,O)}catch(Y){yp(i,o,Y)}finally{b!==null&&_.types!==null&&(b.types=_.types),F.T=b}}else try{b=u(v,h),nx(i,o,b)}catch(Y){yp(i,o,Y)}}function nx(i,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){rx(i,o,h)},function(h){return yp(i,o,h)}):rx(i,o,u)}function rx(i,o,u){o.status="fulfilled",o.value=u,sx(o),i.state=u,o=i.pending,o!==null&&(u=o.next,u===o?i.pending=null:(u=u.next,o.next=u,tx(i,u)))}function yp(i,o,u){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=u,sx(o),o=o.next;while(o!==h)}i.action=null}function sx(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function ix(i,o){return o}function ax(i,o){if(at){var u=_t.formState;if(u!==null){e:{var h=Ve;if(at){if(kt){t:{for(var v=kt,b=fr;v.nodeType!==8;){if(!b){v=null;break t}if(v=hr(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){kt=hr(v.nextSibling),h=v.data==="F!";break e}}Es(h)}h=!1}h&&(o=u[0])}}return u=vn(),u.memoizedState=u.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ix,lastRenderedState:o},u.queue=h,u=Ex.bind(null,Ve,h),h.dispatch=u,h=gp(!1),b=_p.bind(null,Ve,!1,h.queue),h=vn(),v={state:o,dispatch:null,action:i,pending:null},h.queue=v,u=JO.bind(null,Ve,v,b,u),v.dispatch=u,h.memoizedState=i,[o,u,!1]}function ox(i){var o=Dt();return lx(o,bt,i)}function lx(i,o,u){if(o=pp(i,o,ix)[0],i=vc(ts)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=Zo(o)}catch(_){throw _===Sa?lc:_}else h=o;o=Dt();var v=o.queue,b=v.dispatch;return u!==o.memoizedState&&(Ve.flags|=2048,ka(9,{destroy:void 0},XO.bind(null,v,u),null)),[h,b,i]}function XO(i,o){i.action=o}function ux(i){var o=Dt(),u=bt;if(u!==null)return lx(o,u,i);Dt(),o=o.memoizedState,u=Dt();var h=u.queue.dispatch;return u.memoizedState=i,[o,h,!1]}function ka(i,o,u,h){return i={tag:i,create:u,deps:h,inst:o,next:null},o=Ve.updateQueue,o===null&&(o=gc(),Ve.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=i.next=i:(h=u.next,u.next=i,i.next=h,o.lastEffect=i),i}function cx(){return Dt().memoizedState}function bc(i,o,u,h){var v=vn();Ve.flags|=i,v.memoizedState=ka(1|o,{destroy:void 0},u,h===void 0?null:h)}function xc(i,o,u,h){var v=Dt();h=h===void 0?null:h;var b=v.memoizedState.inst;bt!==null&&h!==null&&lp(h,bt.memoizedState.deps)?v.memoizedState=ka(o,b,u,h):(Ve.flags|=i,v.memoizedState=ka(1|o,b,u,h))}function fx(i,o){bc(8390656,8,i,o)}function vp(i,o){xc(2048,8,i,o)}function WO(i){Ve.flags|=4;var o=Ve.updateQueue;if(o===null)o=gc(),Ve.updateQueue=o,o.events=[i];else{var u=o.events;u===null?o.events=[i]:u.push(i)}}function dx(i){var o=Dt().memoizedState;return WO({ref:o,nextImpl:i}),function(){if((pt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function hx(i,o){return xc(4,2,i,o)}function px(i,o){return xc(4,4,i,o)}function mx(i,o){if(typeof o=="function"){i=i();var u=o(i);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function gx(i,o,u){u=u!=null?u.concat([i]):null,xc(4,4,mx.bind(null,o,i),u)}function bp(){}function yx(i,o){var u=Dt();o=o===void 0?null:o;var h=u.memoizedState;return o!==null&&lp(o,h[1])?h[0]:(u.memoizedState=[i,o],i)}function vx(i,o){var u=Dt();o=o===void 0?null:o;var h=u.memoizedState;if(o!==null&&lp(o,h[1]))return h[0];if(h=i(),Ei){kn(!0);try{i()}finally{kn(!1)}}return u.memoizedState=[h,o],h}function xp(i,o,u){return u===void 0||(es&1073741824)!==0&&(nt&261930)===0?i.memoizedState=o:(i.memoizedState=u,i=bS(),Ve.lanes|=i,Ds|=i,u)}function bx(i,o,u,h){return $n(u,o)?u:_a.current!==null?(i=xp(i,u,h),$n(i,o)||(Lt=!0),i):(es&42)===0||(es&1073741824)!==0&&(nt&261930)===0?(Lt=!0,i.memoizedState=u):(i=bS(),Ve.lanes|=i,Ds|=i,o)}function xx(i,o,u,h,v){var b=J.p;J.p=b!==0&&8>b?b:8;var _=F.T,O={};F.T=O,_p(i,!1,o,u);try{var U=v(),Y=F.S;if(Y!==null&&Y(O,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ie=QO(U,h);Yo(i,o,ie,Kn(i))}else Yo(i,o,h,Kn(i))}catch(le){Yo(i,o,{then:function(){},status:"rejected",reason:le},Kn())}finally{J.p=b,_!==null&&O.types!==null&&(_.types=O.types),F.T=_}}function e2(){}function Sp(i,o,u,h){if(i.tag!==5)throw Error(r(476));var v=Sx(i).queue;xx(i,v,o,ae,u===null?e2:function(){return wx(i),u(h)})}function Sx(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:ae},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:u},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function wx(i){var o=Sx(i);o.next===null&&(o=i.alternate.memoizedState),Yo(i,o.next.queue,{},Kn())}function wp(){return sn(hl)}function _x(){return Dt().memoizedState}function Cx(){return Dt().memoizedState}function t2(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var u=Kn();i=As(u);var h=Ts(o,i,u);h!==null&&(In(h,o,u),Vo(h,o,u)),o={cache:Jh()},i.payload=o;return}o=o.return}}function n2(i,o,u){var h=Kn();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Sc(i)?kx(o,u):(u=$h(i,o,u,h),u!==null&&(In(u,i,h),Rx(u,o,h)))}function Ex(i,o,u){var h=Kn();Yo(i,o,u,h)}function Yo(i,o,u,h){var v={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Sc(i))kx(o,v);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var _=o.lastRenderedState,O=b(_,u);if(v.hasEagerState=!0,v.eagerState=O,$n(O,_))return tc(i,o,v,0),_t===null&&ec(),!1}catch{}if(u=$h(i,o,v,h),u!==null)return In(u,i,h),Rx(u,o,h),!0}return!1}function _p(i,o,u,h){if(h={lane:2,revertLane:tm(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Sc(i)){if(o)throw Error(r(479))}else o=$h(i,u,h,2),o!==null&&In(o,i,2)}function Sc(i){var o=i.alternate;return i===Ve||o!==null&&o===Ve}function kx(i,o){Ca=pc=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Rx(i,o,u){if((u&4194048)!==0){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,Nv(i,u)}}var Jo={readContext:sn,use:yc,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};Jo.useEffectEvent=Mt;var Ax={readContext:sn,use:yc,useCallback:function(i,o){return vn().memoizedState=[i,o===void 0?null:o],i},useContext:sn,useEffect:fx,useImperativeHandle:function(i,o,u){u=u!=null?u.concat([i]):null,bc(4194308,4,mx.bind(null,o,i),u)},useLayoutEffect:function(i,o){return bc(4194308,4,i,o)},useInsertionEffect:function(i,o){bc(4,2,i,o)},useMemo:function(i,o){var u=vn();o=o===void 0?null:o;var h=i();if(Ei){kn(!0);try{i()}finally{kn(!1)}}return u.memoizedState=[h,o],h},useReducer:function(i,o,u){var h=vn();if(u!==void 0){var v=u(o);if(Ei){kn(!0);try{u(o)}finally{kn(!1)}}}else v=o;return h.memoizedState=h.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},h.queue=i,i=i.dispatch=n2.bind(null,Ve,i),[h.memoizedState,i]},useRef:function(i){var o=vn();return i={current:i},o.memoizedState=i},useState:function(i){i=gp(i);var o=i.queue,u=Ex.bind(null,Ve,o);return o.dispatch=u,[i.memoizedState,u]},useDebugValue:bp,useDeferredValue:function(i,o){var u=vn();return xp(u,i,o)},useTransition:function(){var i=gp(!1);return i=xx.bind(null,Ve,i.queue,!0,!1),vn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,u){var h=Ve,v=vn();if(at){if(u===void 0)throw Error(r(407));u=u()}else{if(u=o(),_t===null)throw Error(r(349));(nt&127)!==0||Zb(h,o,u)}v.memoizedState=u;var b={value:u,getSnapshot:o};return v.queue=b,fx(Jb.bind(null,h,b,i),[i]),h.flags|=2048,ka(9,{destroy:void 0},Yb.bind(null,h,b,u,o),null),u},useId:function(){var i=vn(),o=_t.identifierPrefix;if(at){var u=Dr,h=Ir;u=(h&~(1<<32-wt(h)-1)).toString(32)+u,o="_"+o+"R_"+u,u=mc++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=ZO++,o="_"+o+"r_"+u.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:wp,useFormState:ax,useActionState:ax,useOptimistic:function(i){var o=vn();o.memoizedState=o.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=_p.bind(null,Ve,!0,u),u.dispatch=o,[i,o]},useMemoCache:hp,useCacheRefresh:function(){return vn().memoizedState=t2.bind(null,Ve)},useEffectEvent:function(i){var o=vn(),u={impl:i};return o.memoizedState=u,function(){if((pt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},Cp={readContext:sn,use:yc,useCallback:yx,useContext:sn,useEffect:vp,useImperativeHandle:gx,useInsertionEffect:hx,useLayoutEffect:px,useMemo:vx,useReducer:vc,useRef:cx,useState:function(){return vc(ts)},useDebugValue:bp,useDeferredValue:function(i,o){var u=Dt();return bx(u,bt.memoizedState,i,o)},useTransition:function(){var i=vc(ts)[0],o=Dt().memoizedState;return[typeof i=="boolean"?i:Zo(i),o]},useSyncExternalStore:Qb,useId:_x,useHostTransitionStatus:wp,useFormState:ox,useActionState:ox,useOptimistic:function(i,o){var u=Dt();return ex(u,bt,i,o)},useMemoCache:hp,useCacheRefresh:Cx};Cp.useEffectEvent=dx;var Tx={readContext:sn,use:yc,useCallback:yx,useContext:sn,useEffect:vp,useImperativeHandle:gx,useInsertionEffect:hx,useLayoutEffect:px,useMemo:vx,useReducer:mp,useRef:cx,useState:function(){return mp(ts)},useDebugValue:bp,useDeferredValue:function(i,o){var u=Dt();return bt===null?xp(u,i,o):bx(u,bt.memoizedState,i,o)},useTransition:function(){var i=mp(ts)[0],o=Dt().memoizedState;return[typeof i=="boolean"?i:Zo(i),o]},useSyncExternalStore:Qb,useId:_x,useHostTransitionStatus:wp,useFormState:ux,useActionState:ux,useOptimistic:function(i,o){var u=Dt();return bt!==null?ex(u,bt,i,o):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:hp,useCacheRefresh:Cx};Tx.useEffectEvent=dx;function Ep(i,o,u,h){o=i.memoizedState,u=u(h,o),u=u==null?o:p({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var kp={enqueueSetState:function(i,o,u){i=i._reactInternals;var h=Kn(),v=As(h);v.payload=o,u!=null&&(v.callback=u),o=Ts(i,v,h),o!==null&&(In(o,i,h),Vo(o,i,h))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var h=Kn(),v=As(h);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=Ts(i,v,h),o!==null&&(In(o,i,h),Vo(o,i,h))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Kn(),h=As(u);h.tag=2,o!=null&&(h.callback=o),o=Ts(i,h,u),o!==null&&(In(o,i,u),Vo(o,i,u))}};function Ox(i,o,u,h,v,b,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,b,_):o.prototype&&o.prototype.isPureReactComponent?!Lo(u,h)||!Lo(v,b):!0}function Mx(i,o,u,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==i&&kp.enqueueReplaceState(o,o.state,null)}function ki(i,o){var u=o;if("ref"in o){u={};for(var h in o)h!=="ref"&&(u[h]=o[h])}if(i=i.defaultProps){u===o&&(u=p({},u));for(var v in i)u[v]===void 0&&(u[v]=i[v])}return u}function Nx(i){Wu(i)}function Ix(i){console.error(i)}function Dx(i){Wu(i)}function wc(i,o){try{var u=i.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function zx(i,o,u){try{var h=i.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Rp(i,o,u){return u=As(u),u.tag=3,u.payload={element:null},u.callback=function(){wc(i,o)},u}function jx(i){return i=As(i),i.tag=3,i}function Lx(i,o,u,h){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var b=h.value;i.payload=function(){return v(b)},i.callback=function(){zx(o,u,h)}}var _=u.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){zx(o,u,h),typeof v!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var O=h.stack;this.componentDidCatch(h.value,{componentStack:O!==null?O:""})})}function r2(i,o,u,h,v){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=u.alternate,o!==null&&va(o,u,v,!0),u=Un.current,u!==null){switch(u.tag){case 31:case 13:return dr===null?Dc():u.alternate===null&&Nt===0&&(Nt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,h===uc?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([h]):o.add(h),Xp(i,h,v)),!1;case 22:return u.flags|=65536,h===uc?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([h]):u.add(h)),Xp(i,h,v)),!1}throw Error(r(435,u.tag))}return Xp(i,h,v),Dc(),!1}if(at)return o=Un.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,h!==Kh&&(i=Error(r(422),{cause:h}),$o(lr(i,u)))):(h!==Kh&&(o=Error(r(423),{cause:h}),$o(lr(o,u))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,h=lr(h,u),v=Rp(i.stateNode,h,v),rp(i,v),Nt!==4&&(Nt=2)),!1;var b=Error(r(520),{cause:h});if(b=lr(b,u),il===null?il=[b]:il.push(b),Nt!==4&&(Nt=2),o===null)return!0;h=lr(h,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,i=v&-v,u.lanes|=i,i=Rp(u.stateNode,h,i),rp(u,i),!1;case 1:if(o=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(zs===null||!zs.has(b))))return u.flags|=65536,v&=-v,u.lanes|=v,v=jx(v),Lx(v,i,u,h),rp(u,v),!1}u=u.return}while(u!==null);return!1}var Ap=Error(r(461)),Lt=!1;function an(i,o,u,h){o.child=i===null?Bb(o,null,u,h):Ci(o,i.child,u,h)}function Px(i,o,u,h,v){u=u.render;var b=o.ref;if("ref"in h){var _={};for(var O in h)O!=="ref"&&(_[O]=h[O])}else _=h;return xi(o),h=up(i,o,u,_,b,v),O=cp(),i!==null&&!Lt?(fp(i,o,v),ns(i,o,v)):(at&&O&&Hh(o),o.flags|=1,an(i,o,h,v),o.child)}function Fx(i,o,u,h,v){if(i===null){var b=u.type;return typeof b=="function"&&!Bh(b)&&b.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=b,$x(i,o,b,h,v)):(i=rc(u.type,null,h,o,o.mode,v),i.ref=o.ref,i.return=o,o.child=i)}if(b=i.child,!jp(i,v)){var _=b.memoizedProps;if(u=u.compare,u=u!==null?u:Lo,u(_,h)&&i.ref===o.ref)return ns(i,o,v)}return o.flags|=1,i=Yr(b,h),i.ref=o.ref,i.return=o,o.child=i}function $x(i,o,u,h,v){if(i!==null){var b=i.memoizedProps;if(Lo(b,h)&&i.ref===o.ref)if(Lt=!1,o.pendingProps=h=b,jp(i,v))(i.flags&131072)!==0&&(Lt=!0);else return o.lanes=i.lanes,ns(i,o,v)}return Tp(i,o,u,h,v)}function Bx(i,o,u,h){var v=h.children,b=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,i!==null){for(h=o.child=i.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~b}else h=0,o.child=null;return Ux(i,o,b,u,h)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&oc(o,b!==null?b.cachePool:null),b!==null?Hb(o,b):ip(),Vb(o);else return h=o.lanes=536870912,Ux(i,o,b!==null?b.baseLanes|u:u,u,h)}else b!==null?(oc(o,b.cachePool),Hb(o,b),Ms(),o.memoizedState=null):(i!==null&&oc(o,null),ip(),Ms());return an(i,o,v,u),o.child}function Xo(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Ux(i,o,u,h,v){var b=Wh();return b=b===null?null:{parent:zt._currentValue,pool:b},o.memoizedState={baseLanes:u,cachePool:b},i!==null&&oc(o,null),ip(),Vb(o),i!==null&&va(i,o,h,!0),o.childLanes=v,null}function _c(i,o){return o=Ec({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function qx(i,o,u){return Ci(o,i.child,null,u),i=_c(o,o.pendingProps),i.flags|=2,qn(o),o.memoizedState=null,i}function s2(i,o,u){var h=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(at){if(h.mode==="hidden")return i=_c(o,h),o.lanes=536870912,Xo(null,i);if(op(o),(i=kt)?(i=tw(i,fr),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:_s!==null?{id:Ir,overflow:Dr}:null,retryLane:536870912,hydrationErrors:null},u=kb(i),u.return=o,o.child=u,rn=o,kt=null)):i=null,i===null)throw Es(o);return o.lanes=536870912,null}return _c(o,h)}var b=i.memoizedState;if(b!==null){var _=b.dehydrated;if(op(o),v)if(o.flags&256)o.flags&=-257,o=qx(i,o,u);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(Lt||va(i,o,u,!1),v=(u&i.childLanes)!==0,Lt||v){if(h=_t,h!==null&&(_=Iv(h,u),_!==0&&_!==b.retryLane))throw b.retryLane=_,gi(i,_),In(h,i,_),Ap;Dc(),o=qx(i,o,u)}else i=b.treeContext,kt=hr(_.nextSibling),rn=o,at=!0,Cs=null,fr=!1,i!==null&&Tb(o,i),o=_c(o,h),o.flags|=4096;return o}return i=Yr(i.child,{mode:h.mode,children:h.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Cc(i,o){var u=o.ref;if(u===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(o.flags|=4194816)}}function Tp(i,o,u,h,v){return xi(o),u=up(i,o,u,h,void 0,v),h=cp(),i!==null&&!Lt?(fp(i,o,v),ns(i,o,v)):(at&&h&&Hh(o),o.flags|=1,an(i,o,u,v),o.child)}function Hx(i,o,u,h,v,b){return xi(o),o.updateQueue=null,u=Gb(o,h,u,v),Kb(i),h=cp(),i!==null&&!Lt?(fp(i,o,b),ns(i,o,b)):(at&&h&&Hh(o),o.flags|=1,an(i,o,u,b),o.child)}function Vx(i,o,u,h,v){if(xi(o),o.stateNode===null){var b=pa,_=u.contextType;typeof _=="object"&&_!==null&&(b=sn(_)),b=new u(h,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=kp,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=h,b.state=o.memoizedState,b.refs={},tp(o),_=u.contextType,b.context=typeof _=="object"&&_!==null?sn(_):pa,b.state=o.memoizedState,_=u.getDerivedStateFromProps,typeof _=="function"&&(Ep(o,u,_,h),b.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(_=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),_!==b.state&&kp.enqueueReplaceState(b,b.state,null),Go(o,h,b,v),Ko(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(i===null){b=o.stateNode;var O=o.memoizedProps,U=ki(u,O);b.props=U;var Y=b.context,ie=u.contextType;_=pa,typeof ie=="object"&&ie!==null&&(_=sn(ie));var le=u.getDerivedStateFromProps;ie=typeof le=="function"||typeof b.getSnapshotBeforeUpdate=="function",O=o.pendingProps!==O,ie||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(O||Y!==_)&&Mx(o,b,h,_),Rs=!1;var W=o.memoizedState;b.state=W,Go(o,h,b,v),Ko(),Y=o.memoizedState,O||W!==Y||Rs?(typeof le=="function"&&(Ep(o,u,le,h),Y=o.memoizedState),(U=Rs||Ox(o,u,U,h,W,Y,_))?(ie||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=Y),b.props=h,b.state=Y,b.context=_,h=U):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{b=o.stateNode,np(i,o),_=o.memoizedProps,ie=ki(u,_),b.props=ie,le=o.pendingProps,W=b.context,Y=u.contextType,U=pa,typeof Y=="object"&&Y!==null&&(U=sn(Y)),O=u.getDerivedStateFromProps,(Y=typeof O=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_!==le||W!==U)&&Mx(o,b,h,U),Rs=!1,W=o.memoizedState,b.state=W,Go(o,h,b,v),Ko();var re=o.memoizedState;_!==le||W!==re||Rs||i!==null&&i.dependencies!==null&&ic(i.dependencies)?(typeof O=="function"&&(Ep(o,u,O,h),re=o.memoizedState),(ie=Rs||Ox(o,u,ie,h,W,re,U)||i!==null&&i.dependencies!==null&&ic(i.dependencies))?(Y||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,re,U),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,re,U)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||_===i.memoizedProps&&W===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&W===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=re),b.props=h,b.state=re,b.context=U,h=ie):(typeof b.componentDidUpdate!="function"||_===i.memoizedProps&&W===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&W===i.memoizedState||(o.flags|=1024),h=!1)}return b=h,Cc(i,o),h=(o.flags&128)!==0,b||h?(b=o.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,i!==null&&h?(o.child=Ci(o,i.child,null,v),o.child=Ci(o,null,u,v)):an(i,o,u,v),o.memoizedState=b.state,i=o.child):i=ns(i,o,v),i}function Kx(i,o,u,h){return vi(),o.flags|=256,an(i,o,u,h),o.child}var Op={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mp(i){return{baseLanes:i,cachePool:zb()}}function Np(i,o,u){return i=i!==null?i.childLanes&~u:0,o&&(i|=Vn),i}function Gx(i,o,u){var h=o.pendingProps,v=!1,b=(o.flags&128)!==0,_;if((_=b)||(_=i!==null&&i.memoizedState===null?!1:(It.current&2)!==0),_&&(v=!0,o.flags&=-129),_=(o.flags&32)!==0,o.flags&=-33,i===null){if(at){if(v?Os(o):Ms(),(i=kt)?(i=tw(i,fr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:_s!==null?{id:Ir,overflow:Dr}:null,retryLane:536870912,hydrationErrors:null},u=kb(i),u.return=o,o.child=u,rn=o,kt=null)):i=null,i===null)throw Es(o);return pm(i)?o.lanes=32:o.lanes=536870912,null}var O=h.children;return h=h.fallback,v?(Ms(),v=o.mode,O=Ec({mode:"hidden",children:O},v),h=yi(h,v,u,null),O.return=o,h.return=o,O.sibling=h,o.child=O,h=o.child,h.memoizedState=Mp(u),h.childLanes=Np(i,_,u),o.memoizedState=Op,Xo(null,h)):(Os(o),Ip(o,O))}var U=i.memoizedState;if(U!==null&&(O=U.dehydrated,O!==null)){if(b)o.flags&256?(Os(o),o.flags&=-257,o=Dp(i,o,u)):o.memoizedState!==null?(Ms(),o.child=i.child,o.flags|=128,o=null):(Ms(),O=h.fallback,v=o.mode,h=Ec({mode:"visible",children:h.children},v),O=yi(O,v,u,null),O.flags|=2,h.return=o,O.return=o,h.sibling=O,o.child=h,Ci(o,i.child,null,u),h=o.child,h.memoizedState=Mp(u),h.childLanes=Np(i,_,u),o.memoizedState=Op,o=Xo(null,h));else if(Os(o),pm(O)){if(_=O.nextSibling&&O.nextSibling.dataset,_)var Y=_.dgst;_=Y,h=Error(r(419)),h.stack="",h.digest=_,$o({value:h,source:null,stack:null}),o=Dp(i,o,u)}else if(Lt||va(i,o,u,!1),_=(u&i.childLanes)!==0,Lt||_){if(_=_t,_!==null&&(h=Iv(_,u),h!==0&&h!==U.retryLane))throw U.retryLane=h,gi(i,h),In(_,i,h),Ap;hm(O)||Dc(),o=Dp(i,o,u)}else hm(O)?(o.flags|=192,o.child=i.child,o=null):(i=U.treeContext,kt=hr(O.nextSibling),rn=o,at=!0,Cs=null,fr=!1,i!==null&&Tb(o,i),o=Ip(o,h.children),o.flags|=4096);return o}return v?(Ms(),O=h.fallback,v=o.mode,U=i.child,Y=U.sibling,h=Yr(U,{mode:"hidden",children:h.children}),h.subtreeFlags=U.subtreeFlags&65011712,Y!==null?O=Yr(Y,O):(O=yi(O,v,u,null),O.flags|=2),O.return=o,h.return=o,h.sibling=O,o.child=h,Xo(null,h),h=o.child,O=i.child.memoizedState,O===null?O=Mp(u):(v=O.cachePool,v!==null?(U=zt._currentValue,v=v.parent!==U?{parent:U,pool:U}:v):v=zb(),O={baseLanes:O.baseLanes|u,cachePool:v}),h.memoizedState=O,h.childLanes=Np(i,_,u),o.memoizedState=Op,Xo(i.child,h)):(Os(o),u=i.child,i=u.sibling,u=Yr(u,{mode:"visible",children:h.children}),u.return=o,u.sibling=null,i!==null&&(_=o.deletions,_===null?(o.deletions=[i],o.flags|=16):_.push(i)),o.child=u,o.memoizedState=null,u)}function Ip(i,o){return o=Ec({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Ec(i,o){return i=Bn(22,i,null,o),i.lanes=0,i}function Dp(i,o,u){return Ci(o,i.child,null,u),i=Ip(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Qx(i,o,u){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),Zh(i.return,o,u)}function zp(i,o,u,h,v,b){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:v,treeForkCount:b}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=u,_.tailMode=v,_.treeForkCount=b)}function Zx(i,o,u){var h=o.pendingProps,v=h.revealOrder,b=h.tail;h=h.children;var _=It.current,O=(_&2)!==0;if(O?(_=_&1|2,o.flags|=128):_&=1,T(It,_),an(i,o,h,u),h=at?Fo:0,!O&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Qx(i,u,o);else if(i.tag===19)Qx(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(u=o.child,v=null;u!==null;)i=u.alternate,i!==null&&hc(i)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),zp(o,!1,v,u,b,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(i=v.alternate,i!==null&&hc(i)===null){o.child=v;break}i=v.sibling,v.sibling=u,u=v,v=i}zp(o,!0,u,null,b,h);break;case"together":zp(o,!1,null,null,void 0,h);break;default:o.memoizedState=null}return o.child}function ns(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Ds|=o.lanes,(u&o.childLanes)===0)if(i!==null){if(va(i,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,u=Yr(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Yr(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function jp(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&ic(i)))}function i2(i,o,u){switch(o.tag){case 3:Ae(o,o.stateNode.containerInfo),ks(o,zt,i.memoizedState.cache),vi();break;case 27:case 5:me(o);break;case 4:Ae(o,o.stateNode.containerInfo);break;case 10:ks(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,op(o),null;break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(Os(o),o.flags|=128,null):(u&o.child.childLanes)!==0?Gx(i,o,u):(Os(o),i=ns(i,o,u),i!==null?i.sibling:null);Os(o);break;case 19:var v=(i.flags&128)!==0;if(h=(u&o.childLanes)!==0,h||(va(i,o,u,!1),h=(u&o.childLanes)!==0),v){if(h)return Zx(i,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),T(It,It.current),h)break;return null;case 22:return o.lanes=0,Bx(i,o,u,o.pendingProps);case 24:ks(o,zt,i.memoizedState.cache)}return ns(i,o,u)}function Yx(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps)Lt=!0;else{if(!jp(i,u)&&(o.flags&128)===0)return Lt=!1,i2(i,o,u);Lt=(i.flags&131072)!==0}else Lt=!1,at&&(o.flags&1048576)!==0&&Ab(o,Fo,o.index);switch(o.lanes=0,o.tag){case 16:e:{var h=o.pendingProps;if(i=wi(o.elementType),o.type=i,typeof i=="function")Bh(i)?(h=ki(i,h),o.tag=1,o=Vx(null,o,i,h,u)):(o.tag=0,o=Tp(null,o,i,h,u));else{if(i!=null){var v=i.$$typeof;if(v===I){o.tag=11,o=Px(null,o,i,h,u);break e}else if(v===z){o.tag=14,o=Fx(null,o,i,h,u);break e}}throw o=te(i)||i,Error(r(306,o,""))}}return o;case 0:return Tp(i,o,o.type,o.pendingProps,u);case 1:return h=o.type,v=ki(h,o.pendingProps),Vx(i,o,h,v,u);case 3:e:{if(Ae(o,o.stateNode.containerInfo),i===null)throw Error(r(387));h=o.pendingProps;var b=o.memoizedState;v=b.element,np(i,o),Go(o,h,null,u);var _=o.memoizedState;if(h=_.cache,ks(o,zt,h),h!==b.cache&&Yh(o,[zt],u,!0),Ko(),h=_.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:_.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Kx(i,o,h,u);break e}else if(h!==v){v=lr(Error(r(424)),o),$o(v),o=Kx(i,o,h,u);break e}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,kt=hr(i.firstChild),rn=o,at=!0,Cs=null,fr=!0,u=Bb(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(vi(),h===v){o=ns(i,o,u);break e}an(i,o,h,u)}o=o.child}return o;case 26:return Cc(i,o),i===null?(u=ow(o.type,null,o.pendingProps,null))?o.memoizedState=u:at||(u=o.type,i=o.pendingProps,h=Bc(he.current).createElement(u),h[nn]=o,h[Rn]=i,on(h,u,i),Yt(h),o.stateNode=h):o.memoizedState=ow(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return me(o),i===null&&at&&(h=o.stateNode=sw(o.type,o.pendingProps,he.current),rn=o,fr=!0,v=kt,Fs(o.type)?(mm=v,kt=hr(h.firstChild)):kt=v),an(i,o,o.pendingProps.children,u),Cc(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&at&&((v=h=kt)&&(h=z2(h,o.type,o.pendingProps,fr),h!==null?(o.stateNode=h,rn=o,kt=hr(h.firstChild),fr=!1,v=!0):v=!1),v||Es(o)),me(o),v=o.type,b=o.pendingProps,_=i!==null?i.memoizedProps:null,h=b.children,cm(v,b)?h=null:_!==null&&cm(v,_)&&(o.flags|=32),o.memoizedState!==null&&(v=up(i,o,YO,null,null,u),hl._currentValue=v),Cc(i,o),an(i,o,h,u),o.child;case 6:return i===null&&at&&((i=u=kt)&&(u=j2(u,o.pendingProps,fr),u!==null?(o.stateNode=u,rn=o,kt=null,i=!0):i=!1),i||Es(o)),null;case 13:return Gx(i,o,u);case 4:return Ae(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=Ci(o,null,h,u):an(i,o,h,u),o.child;case 11:return Px(i,o,o.type,o.pendingProps,u);case 7:return an(i,o,o.pendingProps,u),o.child;case 8:return an(i,o,o.pendingProps.children,u),o.child;case 12:return an(i,o,o.pendingProps.children,u),o.child;case 10:return h=o.pendingProps,ks(o,o.type,h.value),an(i,o,h.children,u),o.child;case 9:return v=o.type._context,h=o.pendingProps.children,xi(o),v=sn(v),h=h(v),o.flags|=1,an(i,o,h,u),o.child;case 14:return Fx(i,o,o.type,o.pendingProps,u);case 15:return $x(i,o,o.type,o.pendingProps,u);case 19:return Zx(i,o,u);case 31:return s2(i,o,u);case 22:return Bx(i,o,u,o.pendingProps);case 24:return xi(o),h=sn(zt),i===null?(v=Wh(),v===null&&(v=_t,b=Jh(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=u),v=b),o.memoizedState={parent:h,cache:v},tp(o),ks(o,zt,v)):((i.lanes&u)!==0&&(np(i,o),Go(o,null,null,u),Ko()),v=i.memoizedState,b=o.memoizedState,v.parent!==h?(v={parent:h,cache:h},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),ks(o,zt,h)):(h=b.cache,ks(o,zt,h),h!==v.cache&&Yh(o,[zt],u,!0))),an(i,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function rs(i){i.flags|=4}function Lp(i,o,u,h,v){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(_S())i.flags|=8192;else throw _i=uc,ep}else i.flags&=-16777217}function Jx(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!dw(o))if(_S())i.flags|=8192;else throw _i=uc,ep}function kc(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Ov():536870912,i.lanes|=o,Oa|=o)}function Wo(i,o){if(!at)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Rt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,h=0;if(o)for(var v=i.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=h,i.childLanes=u,o}function a2(i,o,u){var h=o.pendingProps;switch(Vh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(o),null;case 1:return Rt(o),null;case 3:return u=o.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Wr(zt),_e(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(ya(o)?rs(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Gh())),Rt(o),null;case 26:var v=o.type,b=o.memoizedState;return i===null?(rs(o),b!==null?(Rt(o),Jx(o,b)):(Rt(o),Lp(o,v,null,h,u))):b?b!==i.memoizedState?(rs(o),Rt(o),Jx(o,b)):(Rt(o),o.flags&=-16777217):(i=i.memoizedProps,i!==h&&rs(o),Rt(o),Lp(o,v,i,h,u)),null;case 27:if(Ee(o),u=he.current,v=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&rs(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return Rt(o),null}i=se.current,ya(o)?Ob(o):(i=sw(v,h,u),o.stateNode=i,rs(o))}return Rt(o),null;case 5:if(Ee(o),v=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&rs(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return Rt(o),null}if(b=se.current,ya(o))Ob(o);else{var _=Bc(he.current);switch(b){case 1:b=_.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=_.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=_.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof h.is=="string"?_.createElement("select",{is:h.is}):_.createElement("select"),h.multiple?b.multiple=!0:h.size&&(b.size=h.size);break;default:b=typeof h.is=="string"?_.createElement(v,{is:h.is}):_.createElement(v)}}b[nn]=o,b[Rn]=h;e:for(_=o.child;_!==null;){if(_.tag===5||_.tag===6)b.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===o)break e;for(;_.sibling===null;){if(_.return===null||_.return===o)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}o.stateNode=b;e:switch(on(b,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&rs(o)}}return Rt(o),Lp(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,u),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==h&&rs(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(i=he.current,ya(o)){if(i=o.stateNode,u=o.memoizedProps,h=null,v=rn,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}i[nn]=o,i=!!(i.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||GS(i.nodeValue,u)),i||Es(o,!0)}else i=Bc(i).createTextNode(h),i[nn]=o,o.stateNode=i}return Rt(o),null;case 31:if(u=o.memoizedState,i===null||i.memoizedState!==null){if(h=ya(o),u!==null){if(i===null){if(!h)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[nn]=o}else vi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),i=!1}else u=Gh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return o.flags&256?(qn(o),o):(qn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Rt(o),null;case 13:if(h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=ya(o),h!==null&&h.dehydrated!==null){if(i===null){if(!v)throw Error(r(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[nn]=o}else vi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),v=!1}else v=Gh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(qn(o),o):(qn(o),null)}return qn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=h!==null,i=i!==null&&i.memoizedState!==null,u&&(h=o.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==v&&(h.flags|=2048)),u!==i&&u&&(o.child.flags|=8192),kc(o,o.updateQueue),Rt(o),null);case 4:return _e(),i===null&&im(o.stateNode.containerInfo),Rt(o),null;case 10:return Wr(o.type),Rt(o),null;case 19:if(B(It),h=o.memoizedState,h===null)return Rt(o),null;if(v=(o.flags&128)!==0,b=h.rendering,b===null)if(v)Wo(h,!1);else{if(Nt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(b=hc(i),b!==null){for(o.flags|=128,Wo(h,!1),i=b.updateQueue,o.updateQueue=i,kc(o,i),o.subtreeFlags=0,i=u,u=o.child;u!==null;)Eb(u,i),u=u.sibling;return T(It,It.current&1|2),at&&Jr(o,h.treeForkCount),o.child}i=i.sibling}h.tail!==null&&ye()>Mc&&(o.flags|=128,v=!0,Wo(h,!1),o.lanes=4194304)}else{if(!v)if(i=hc(b),i!==null){if(o.flags|=128,v=!0,i=i.updateQueue,o.updateQueue=i,kc(o,i),Wo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!b.alternate&&!at)return Rt(o),null}else 2*ye()-h.renderingStartTime>Mc&&u!==536870912&&(o.flags|=128,v=!0,Wo(h,!1),o.lanes=4194304);h.isBackwards?(b.sibling=o.child,o.child=b):(i=h.last,i!==null?i.sibling=b:o.child=b,h.last=b)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=ye(),i.sibling=null,u=It.current,T(It,v?u&1|2:u&1),at&&Jr(o,h.treeForkCount),i):(Rt(o),null);case 22:case 23:return qn(o),ap(),h=o.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(u&536870912)!==0&&(o.flags&128)===0&&(Rt(o),o.subtreeFlags&6&&(o.flags|=8192)):Rt(o),u=o.updateQueue,u!==null&&kc(o,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==u&&(o.flags|=2048),i!==null&&B(Si),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Wr(zt),Rt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function o2(i,o){switch(Vh(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Wr(zt),_e(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Ee(o),null;case 31:if(o.memoizedState!==null){if(qn(o),o.alternate===null)throw Error(r(340));vi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(qn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));vi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return B(It),null;case 4:return _e(),null;case 10:return Wr(o.type),null;case 22:case 23:return qn(o),ap(),i!==null&&B(Si),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Wr(zt),null;case 25:return null;default:return null}}function Xx(i,o){switch(Vh(o),o.tag){case 3:Wr(zt),_e();break;case 26:case 27:case 5:Ee(o);break;case 4:_e();break;case 31:o.memoizedState!==null&&qn(o);break;case 13:qn(o);break;case 19:B(It);break;case 10:Wr(o.type);break;case 22:case 23:qn(o),ap(),i!==null&&B(Si);break;case 24:Wr(zt)}}function el(i,o){try{var u=o.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var v=h.next;u=v;do{if((u.tag&i)===i){h=void 0;var b=u.create,_=u.inst;h=b(),_.destroy=h}u=u.next}while(u!==v)}}catch(O){gt(o,o.return,O)}}function Ns(i,o,u){try{var h=o.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var b=v.next;h=b;do{if((h.tag&i)===i){var _=h.inst,O=_.destroy;if(O!==void 0){_.destroy=void 0,v=o;var U=u,Y=O;try{Y()}catch(ie){gt(v,U,ie)}}}h=h.next}while(h!==b)}}catch(ie){gt(o,o.return,ie)}}function Wx(i){var o=i.updateQueue;if(o!==null){var u=i.stateNode;try{qb(o,u)}catch(h){gt(i,i.return,h)}}}function eS(i,o,u){u.props=ki(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(h){gt(i,o,h)}}function tl(i,o){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof u=="function"?i.refCleanup=u(h):u.current=h}}catch(v){gt(i,o,v)}}function zr(i,o){var u=i.ref,h=i.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(v){gt(i,o,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){gt(i,o,v)}else u.current=null}function tS(i){var o=i.type,u=i.memoizedProps,h=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(v){gt(i,i.return,v)}}function Pp(i,o,u){try{var h=i.stateNode;T2(h,i.type,u,o),h[Rn]=o}catch(v){gt(i,i.return,v)}}function nS(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Fs(i.type)||i.tag===4}function Fp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||nS(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Fs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function $p(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(i),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Qr));else if(h!==4&&(h===27&&Fs(i.type)&&(u=i.stateNode,o=null),i=i.child,i!==null))for($p(i,o,u),i=i.sibling;i!==null;)$p(i,o,u),i=i.sibling}function Rc(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(h!==4&&(h===27&&Fs(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Rc(i,o,u),i=i.sibling;i!==null;)Rc(i,o,u),i=i.sibling}function rS(i){var o=i.stateNode,u=i.memoizedProps;try{for(var h=i.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);on(o,h,u),o[nn]=i,o[Rn]=u}catch(b){gt(i,i.return,b)}}var ss=!1,Pt=!1,Bp=!1,sS=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function l2(i,o){if(i=i.containerInfo,lm=Qc,i=gb(i),Dh(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var v=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var _=0,O=-1,U=-1,Y=0,ie=0,le=i,W=null;t:for(;;){for(var re;le!==u||v!==0&&le.nodeType!==3||(O=_+v),le!==b||h!==0&&le.nodeType!==3||(U=_+h),le.nodeType===3&&(_+=le.nodeValue.length),(re=le.firstChild)!==null;)W=le,le=re;for(;;){if(le===i)break t;if(W===u&&++Y===v&&(O=_),W===b&&++ie===h&&(U=_),(re=le.nextSibling)!==null)break;le=W,W=le.parentNode}le=re}u=O===-1||U===-1?null:{start:O,end:U}}else u=null}u=u||{start:0,end:0}}else u=null;for(um={focusedElem:i,selectionRange:u},Qc=!1,Jt=o;Jt!==null;)if(o=Jt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Jt=i;else for(;Jt!==null;){switch(o=Jt,b=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)v=i[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,u=o,v=b.memoizedProps,b=b.memoizedState,h=u.stateNode;try{var Se=ki(u.type,v);i=h.getSnapshotBeforeUpdate(Se,b),h.__reactInternalSnapshotBeforeUpdate=i}catch(ze){gt(u,u.return,ze)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,u=i.nodeType,u===9)dm(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":dm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,Jt=i;break}Jt=o.return}}function iS(i,o,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:as(i,u),h&4&&el(5,u);break;case 1:if(as(i,u),h&4)if(i=u.stateNode,o===null)try{i.componentDidMount()}catch(_){gt(u,u.return,_)}else{var v=ki(u.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(v,o,i.__reactInternalSnapshotBeforeUpdate)}catch(_){gt(u,u.return,_)}}h&64&&Wx(u),h&512&&tl(u,u.return);break;case 3:if(as(i,u),h&64&&(i=u.updateQueue,i!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{qb(i,o)}catch(_){gt(u,u.return,_)}}break;case 27:o===null&&h&4&&rS(u);case 26:case 5:as(i,u),o===null&&h&4&&tS(u),h&512&&tl(u,u.return);break;case 12:as(i,u);break;case 31:as(i,u),h&4&&lS(i,u);break;case 13:as(i,u),h&4&&uS(i,u),h&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=y2.bind(null,u),L2(i,u))));break;case 22:if(h=u.memoizedState!==null||ss,!h){o=o!==null&&o.memoizedState!==null||Pt,v=ss;var b=Pt;ss=h,(Pt=o)&&!b?os(i,u,(u.subtreeFlags&8772)!==0):as(i,u),ss=v,Pt=b}break;case 30:break;default:as(i,u)}}function aS(i){var o=i.alternate;o!==null&&(i.alternate=null,aS(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&yh(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var At=null,Tn=!1;function is(i,o,u){for(u=u.child;u!==null;)oS(i,o,u),u=u.sibling}function oS(i,o,u){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(ut,u)}catch{}switch(u.tag){case 26:Pt||zr(u,o),is(i,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Pt||zr(u,o);var h=At,v=Tn;Fs(u.type)&&(At=u.stateNode,Tn=!1),is(i,o,u),cl(u.stateNode),At=h,Tn=v;break;case 5:Pt||zr(u,o);case 6:if(h=At,v=Tn,At=null,is(i,o,u),At=h,Tn=v,At!==null)if(Tn)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(u.stateNode)}catch(b){gt(u,o,b)}else try{At.removeChild(u.stateNode)}catch(b){gt(u,o,b)}break;case 18:At!==null&&(Tn?(i=At,WS(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Pa(i)):WS(At,u.stateNode));break;case 4:h=At,v=Tn,At=u.stateNode.containerInfo,Tn=!0,is(i,o,u),At=h,Tn=v;break;case 0:case 11:case 14:case 15:Ns(2,u,o),Pt||Ns(4,u,o),is(i,o,u);break;case 1:Pt||(zr(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"&&eS(u,o,h)),is(i,o,u);break;case 21:is(i,o,u);break;case 22:Pt=(h=Pt)||u.memoizedState!==null,is(i,o,u),Pt=h;break;default:is(i,o,u)}}function lS(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Pa(i)}catch(u){gt(o,o.return,u)}}}function uS(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Pa(i)}catch(u){gt(o,o.return,u)}}function u2(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new sS),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new sS),o;default:throw Error(r(435,i.tag))}}function Ac(i,o){var u=u2(i);o.forEach(function(h){if(!u.has(h)){u.add(h);var v=v2.bind(null,i,h);h.then(v,v)}})}function On(i,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var v=u[h],b=i,_=o,O=_;e:for(;O!==null;){switch(O.tag){case 27:if(Fs(O.type)){At=O.stateNode,Tn=!1;break e}break;case 5:At=O.stateNode,Tn=!1;break e;case 3:case 4:At=O.stateNode.containerInfo,Tn=!0;break e}O=O.return}if(At===null)throw Error(r(160));oS(b,_,v),At=null,Tn=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)cS(o,i),o=o.sibling}var Er=null;function cS(i,o){var u=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:On(o,i),Mn(i),h&4&&(Ns(3,i,i.return),el(3,i),Ns(5,i,i.return));break;case 1:On(o,i),Mn(i),h&512&&(Pt||u===null||zr(u,u.return)),h&64&&ss&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var v=Er;if(On(o,i),Mn(i),h&512&&(Pt||u===null||zr(u,u.return)),h&4){var b=u!==null?u.memoizedState:null;if(h=i.memoizedState,u===null)if(h===null)if(i.stateNode===null){e:{h=i.type,u=i.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Ao]||b[nn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(h),v.head.insertBefore(b,v.querySelector("head > title"))),on(b,h,u),b[nn]=i,Yt(b),h=b;break e;case"link":var _=cw("link","href",v).get(h+(u.href||""));if(_){for(var O=0;O<_.length;O++)if(b=_[O],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){_.splice(O,1);break t}}b=v.createElement(h),on(b,h,u),v.head.appendChild(b);break;case"meta":if(_=cw("meta","content",v).get(h+(u.content||""))){for(O=0;O<_.length;O++)if(b=_[O],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){_.splice(O,1);break t}}b=v.createElement(h),on(b,h,u),v.head.appendChild(b);break;default:throw Error(r(468,h))}b[nn]=i,Yt(b),h=b}i.stateNode=h}else fw(v,i.type,i.stateNode);else i.stateNode=uw(v,h,i.memoizedProps);else b!==h?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,h===null?fw(v,i.type,i.stateNode):uw(v,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Pp(i,i.memoizedProps,u.memoizedProps)}break;case 27:On(o,i),Mn(i),h&512&&(Pt||u===null||zr(u,u.return)),u!==null&&h&4&&Pp(i,i.memoizedProps,u.memoizedProps);break;case 5:if(On(o,i),Mn(i),h&512&&(Pt||u===null||zr(u,u.return)),i.flags&32){v=i.stateNode;try{oa(v,"")}catch(Se){gt(i,i.return,Se)}}h&4&&i.stateNode!=null&&(v=i.memoizedProps,Pp(i,v,u!==null?u.memoizedProps:v)),h&1024&&(Bp=!0);break;case 6:if(On(o,i),Mn(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,u=i.stateNode;try{u.nodeValue=h}catch(Se){gt(i,i.return,Se)}}break;case 3:if(Hc=null,v=Er,Er=Uc(o.containerInfo),On(o,i),Er=v,Mn(i),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Pa(o.containerInfo)}catch(Se){gt(i,i.return,Se)}Bp&&(Bp=!1,fS(i));break;case 4:h=Er,Er=Uc(i.stateNode.containerInfo),On(o,i),Mn(i),Er=h;break;case 12:On(o,i),Mn(i);break;case 31:On(o,i),Mn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Ac(i,h)));break;case 13:On(o,i),Mn(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Oc=ye()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Ac(i,h)));break;case 22:v=i.memoizedState!==null;var U=u!==null&&u.memoizedState!==null,Y=ss,ie=Pt;if(ss=Y||v,Pt=ie||U,On(o,i),Pt=ie,ss=Y,Mn(i),h&8192)e:for(o=i.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||U||ss||Pt||Ri(i)),u=null,o=i;;){if(o.tag===5||o.tag===26){if(u===null){U=u=o;try{if(b=U.stateNode,v)_=b.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{O=U.stateNode;var le=U.memoizedProps.style,W=le!=null&&le.hasOwnProperty("display")?le.display:null;O.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Se){gt(U,U.return,Se)}}}else if(o.tag===6){if(u===null){U=o;try{U.stateNode.nodeValue=v?"":U.memoizedProps}catch(Se){gt(U,U.return,Se)}}}else if(o.tag===18){if(u===null){U=o;try{var re=U.stateNode;v?ew(re,!0):ew(U.stateNode,!1)}catch(Se){gt(U,U.return,Se)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=i.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,Ac(i,u))));break;case 19:On(o,i),Mn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Ac(i,h)));break;case 30:break;case 21:break;default:On(o,i),Mn(i)}}function Mn(i){var o=i.flags;if(o&2){try{for(var u,h=i.return;h!==null;){if(nS(h)){u=h;break}h=h.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var v=u.stateNode,b=Fp(i);Rc(i,b,v);break;case 5:var _=u.stateNode;u.flags&32&&(oa(_,""),u.flags&=-33);var O=Fp(i);Rc(i,O,_);break;case 3:case 4:var U=u.stateNode.containerInfo,Y=Fp(i);$p(i,Y,U);break;default:throw Error(r(161))}}catch(ie){gt(i,i.return,ie)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function fS(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;fS(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function as(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)iS(i,o.alternate,o),o=o.sibling}function Ri(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Ns(4,o,o.return),Ri(o);break;case 1:zr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&eS(o,o.return,u),Ri(o);break;case 27:cl(o.stateNode);case 26:case 5:zr(o,o.return),Ri(o);break;case 22:o.memoizedState===null&&Ri(o);break;case 30:Ri(o);break;default:Ri(o)}i=i.sibling}}function os(i,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,v=i,b=o,_=b.flags;switch(b.tag){case 0:case 11:case 15:os(v,b,u),el(4,b);break;case 1:if(os(v,b,u),h=b,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Y){gt(h,h.return,Y)}if(h=b,v=h.updateQueue,v!==null){var O=h.stateNode;try{var U=v.shared.hiddenCallbacks;if(U!==null)for(v.shared.hiddenCallbacks=null,v=0;v<U.length;v++)Ub(U[v],O)}catch(Y){gt(h,h.return,Y)}}u&&_&64&&Wx(b),tl(b,b.return);break;case 27:rS(b);case 26:case 5:os(v,b,u),u&&h===null&&_&4&&tS(b),tl(b,b.return);break;case 12:os(v,b,u);break;case 31:os(v,b,u),u&&_&4&&lS(v,b);break;case 13:os(v,b,u),u&&_&4&&uS(v,b);break;case 22:b.memoizedState===null&&os(v,b,u),tl(b,b.return);break;case 30:break;default:os(v,b,u)}o=o.sibling}}function Up(i,o){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&Bo(u))}function qp(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Bo(i))}function kr(i,o,u,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)dS(i,o,u,h),o=o.sibling}function dS(i,o,u,h){var v=o.flags;switch(o.tag){case 0:case 11:case 15:kr(i,o,u,h),v&2048&&el(9,o);break;case 1:kr(i,o,u,h);break;case 3:kr(i,o,u,h),v&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Bo(i)));break;case 12:if(v&2048){kr(i,o,u,h),i=o.stateNode;try{var b=o.memoizedProps,_=b.id,O=b.onPostCommit;typeof O=="function"&&O(_,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){gt(o,o.return,U)}}else kr(i,o,u,h);break;case 31:kr(i,o,u,h);break;case 13:kr(i,o,u,h);break;case 23:break;case 22:b=o.stateNode,_=o.alternate,o.memoizedState!==null?b._visibility&2?kr(i,o,u,h):nl(i,o):b._visibility&2?kr(i,o,u,h):(b._visibility|=2,Ra(i,o,u,h,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Up(_,o);break;case 24:kr(i,o,u,h),v&2048&&qp(o.alternate,o);break;default:kr(i,o,u,h)}}function Ra(i,o,u,h,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=i,_=o,O=u,U=h,Y=_.flags;switch(_.tag){case 0:case 11:case 15:Ra(b,_,O,U,v),el(8,_);break;case 23:break;case 22:var ie=_.stateNode;_.memoizedState!==null?ie._visibility&2?Ra(b,_,O,U,v):nl(b,_):(ie._visibility|=2,Ra(b,_,O,U,v)),v&&Y&2048&&Up(_.alternate,_);break;case 24:Ra(b,_,O,U,v),v&&Y&2048&&qp(_.alternate,_);break;default:Ra(b,_,O,U,v)}o=o.sibling}}function nl(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=i,h=o,v=h.flags;switch(h.tag){case 22:nl(u,h),v&2048&&Up(h.alternate,h);break;case 24:nl(u,h),v&2048&&qp(h.alternate,h);break;default:nl(u,h)}o=o.sibling}}var rl=8192;function Aa(i,o,u){if(i.subtreeFlags&rl)for(i=i.child;i!==null;)hS(i,o,u),i=i.sibling}function hS(i,o,u){switch(i.tag){case 26:Aa(i,o,u),i.flags&rl&&i.memoizedState!==null&&Z2(u,Er,i.memoizedState,i.memoizedProps);break;case 5:Aa(i,o,u);break;case 3:case 4:var h=Er;Er=Uc(i.stateNode.containerInfo),Aa(i,o,u),Er=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=rl,rl=16777216,Aa(i,o,u),rl=h):Aa(i,o,u));break;default:Aa(i,o,u)}}function pS(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function sl(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];Jt=h,gS(h,i)}pS(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)mS(i),i=i.sibling}function mS(i){switch(i.tag){case 0:case 11:case 15:sl(i),i.flags&2048&&Ns(9,i,i.return);break;case 3:sl(i);break;case 12:sl(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Tc(i)):sl(i);break;default:sl(i)}}function Tc(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];Jt=h,gS(h,i)}pS(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Ns(8,o,o.return),Tc(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Tc(o));break;default:Tc(o)}i=i.sibling}}function gS(i,o){for(;Jt!==null;){var u=Jt;switch(u.tag){case 0:case 11:case 15:Ns(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Bo(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Jt=h;else e:for(u=i;Jt!==null;){h=Jt;var v=h.sibling,b=h.return;if(aS(h),h===u){Jt=null;break e}if(v!==null){v.return=b,Jt=v;break e}Jt=b}}}var c2={getCacheForType:function(i){var o=sn(zt),u=o.data.get(i);return u===void 0&&(u=i(),o.data.set(i,u)),u},cacheSignal:function(){return sn(zt).controller.signal}},f2=typeof WeakMap=="function"?WeakMap:Map,pt=0,_t=null,Xe=null,nt=0,mt=0,Hn=null,Is=!1,Ta=!1,Hp=!1,ls=0,Nt=0,Ds=0,Ai=0,Vp=0,Vn=0,Oa=0,il=null,Nn=null,Kp=!1,Oc=0,yS=0,Mc=1/0,Nc=null,zs=null,Ut=0,js=null,Ma=null,us=0,Gp=0,Qp=null,vS=null,al=0,Zp=null;function Kn(){return(pt&2)!==0&&nt!==0?nt&-nt:F.T!==null?tm():Dv()}function bS(){if(Vn===0)if((nt&536870912)===0||at){var i=$u;$u<<=1,($u&3932160)===0&&($u=262144),Vn=i}else Vn=536870912;return i=Un.current,i!==null&&(i.flags|=32),Vn}function In(i,o,u){(i===_t&&(mt===2||mt===9)||i.cancelPendingCommit!==null)&&(Na(i,0),Ls(i,nt,Vn,!1)),Ro(i,u),((pt&2)===0||i!==_t)&&(i===_t&&((pt&2)===0&&(Ai|=u),Nt===4&&Ls(i,nt,Vn,!1)),jr(i))}function xS(i,o,u){if((pt&6)!==0)throw Error(r(327));var h=!u&&(o&127)===0&&(o&i.expiredLanes)===0||ko(i,o),v=h?p2(i,o):Jp(i,o,!0),b=h;do{if(v===0){Ta&&!h&&Ls(i,o,0,!1);break}else{if(u=i.current.alternate,b&&!d2(u)){v=Jp(i,o,!1),b=!1;continue}if(v===2){if(b=o,i.errorRecoveryDisabledLanes&b)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){o=_;e:{var O=i;v=il;var U=O.current.memoizedState.isDehydrated;if(U&&(Na(O,_).flags|=256),_=Jp(O,_,!1),_!==2){if(Hp&&!U){O.errorRecoveryDisabledLanes|=b,Ai|=b,v=4;break e}b=Nn,Nn=v,b!==null&&(Nn===null?Nn=b:Nn.push.apply(Nn,b))}v=_}if(b=!1,v!==2)continue}}if(v===1){Na(i,0),Ls(i,o,0,!0);break}e:{switch(h=i,b=v,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ls(h,o,Vn,!Is);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(v=Oc+300-ye(),10<v)){if(Ls(h,o,Vn,!Is),Uu(h,0,!0)!==0)break e;us=o,h.timeoutHandle=JS(SS.bind(null,h,u,Nn,Nc,Kp,o,Vn,Ai,Oa,Is,b,"Throttled",-0,0),v);break e}SS(h,u,Nn,Nc,Kp,o,Vn,Ai,Oa,Is,b,null,-0,0)}}break}while(!0);jr(i)}function SS(i,o,u,h,v,b,_,O,U,Y,ie,le,W,re){if(i.timeoutHandle=-1,le=o.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qr},hS(o,b,le);var Se=(b&62914560)===b?Oc-ye():(b&4194048)===b?yS-ye():0;if(Se=Y2(le,Se),Se!==null){us=b,i.cancelPendingCommit=Se(TS.bind(null,i,o,b,u,h,v,_,O,U,ie,le,null,W,re)),Ls(i,b,_,!Y);return}}TS(i,o,b,u,h,v,_,O,U)}function d2(i){for(var o=i;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var v=u[h],b=v.getSnapshot;v=v.value;try{if(!$n(b(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ls(i,o,u,h){o&=~Vp,o&=~Ai,i.suspendedLanes|=o,i.pingedLanes&=~o,h&&(i.warmLanes|=o),h=i.expirationTimes;for(var v=o;0<v;){var b=31-wt(v),_=1<<b;h[b]=-1,v&=~_}u!==0&&Mv(i,u,o)}function Ic(){return(pt&6)===0?(ol(0),!1):!0}function Yp(){if(Xe!==null){if(mt===0)var i=Xe.return;else i=Xe,Xr=bi=null,dp(i),wa=null,qo=0,i=Xe;for(;i!==null;)Xx(i.alternate,i),i=i.return;Xe=null}}function Na(i,o){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,N2(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),us=0,Yp(),_t=i,Xe=u=Yr(i.current,null),nt=o,mt=0,Hn=null,Is=!1,Ta=ko(i,o),Hp=!1,Oa=Vn=Vp=Ai=Ds=Nt=0,Nn=il=null,Kp=!1,(o&8)!==0&&(o|=o&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=o;0<h;){var v=31-wt(h),b=1<<v;o|=i[v],h&=~b}return ls=o,ec(),u}function wS(i,o){Ve=null,F.H=Jo,o===Sa||o===lc?(o=Pb(),mt=3):o===ep?(o=Pb(),mt=4):mt=o===Ap?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Hn=o,Xe===null&&(Nt=1,wc(i,lr(o,i.current)))}function _S(){var i=Un.current;return i===null?!0:(nt&4194048)===nt?dr===null:(nt&62914560)===nt||(nt&536870912)!==0?i===dr:!1}function CS(){var i=F.H;return F.H=Jo,i===null?Jo:i}function ES(){var i=F.A;return F.A=c2,i}function Dc(){Nt=4,Is||(nt&4194048)!==nt&&Un.current!==null||(Ta=!0),(Ds&134217727)===0&&(Ai&134217727)===0||_t===null||Ls(_t,nt,Vn,!1)}function Jp(i,o,u){var h=pt;pt|=2;var v=CS(),b=ES();(_t!==i||nt!==o)&&(Nc=null,Na(i,o)),o=!1;var _=Nt;e:do try{if(mt!==0&&Xe!==null){var O=Xe,U=Hn;switch(mt){case 8:Yp(),_=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(o=!0);var Y=mt;if(mt=0,Hn=null,Ia(i,O,U,Y),u&&Ta){_=0;break e}break;default:Y=mt,mt=0,Hn=null,Ia(i,O,U,Y)}}h2(),_=Nt;break}catch(ie){wS(i,ie)}while(!0);return o&&i.shellSuspendCounter++,Xr=bi=null,pt=h,F.H=v,F.A=b,Xe===null&&(_t=null,nt=0,ec()),_}function h2(){for(;Xe!==null;)kS(Xe)}function p2(i,o){var u=pt;pt|=2;var h=CS(),v=ES();_t!==i||nt!==o?(Nc=null,Mc=ye()+500,Na(i,o)):Ta=ko(i,o);e:do try{if(mt!==0&&Xe!==null){o=Xe;var b=Hn;t:switch(mt){case 1:mt=0,Hn=null,Ia(i,o,b,1);break;case 2:case 9:if(jb(b)){mt=0,Hn=null,RS(o);break}o=function(){mt!==2&&mt!==9||_t!==i||(mt=7),jr(i)},b.then(o,o);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:jb(b)?(mt=0,Hn=null,RS(o)):(mt=0,Hn=null,Ia(i,o,b,7));break;case 5:var _=null;switch(Xe.tag){case 26:_=Xe.memoizedState;case 5:case 27:var O=Xe;if(_?dw(_):O.stateNode.complete){mt=0,Hn=null;var U=O.sibling;if(U!==null)Xe=U;else{var Y=O.return;Y!==null?(Xe=Y,zc(Y)):Xe=null}break t}}mt=0,Hn=null,Ia(i,o,b,5);break;case 6:mt=0,Hn=null,Ia(i,o,b,6);break;case 8:Yp(),Nt=6;break e;default:throw Error(r(462))}}m2();break}catch(ie){wS(i,ie)}while(!0);return Xr=bi=null,F.H=h,F.A=v,pt=u,Xe!==null?0:(_t=null,nt=0,ec(),Nt)}function m2(){for(;Xe!==null&&!je();)kS(Xe)}function kS(i){var o=Yx(i.alternate,i,ls);i.memoizedProps=i.pendingProps,o===null?zc(i):Xe=o}function RS(i){var o=i,u=o.alternate;switch(o.tag){case 15:case 0:o=Hx(u,o,o.pendingProps,o.type,void 0,nt);break;case 11:o=Hx(u,o,o.pendingProps,o.type.render,o.ref,nt);break;case 5:dp(o);default:Xx(u,o),o=Xe=Eb(o,ls),o=Yx(u,o,ls)}i.memoizedProps=i.pendingProps,o===null?zc(i):Xe=o}function Ia(i,o,u,h){Xr=bi=null,dp(o),wa=null,qo=0;var v=o.return;try{if(r2(i,v,o,u,nt)){Nt=1,wc(i,lr(u,i.current)),Xe=null;return}}catch(b){if(v!==null)throw Xe=v,b;Nt=1,wc(i,lr(u,i.current)),Xe=null;return}o.flags&32768?(at||h===1?i=!0:Ta||(nt&536870912)!==0?i=!1:(Is=i=!0,(h===2||h===9||h===3||h===6)&&(h=Un.current,h!==null&&h.tag===13&&(h.flags|=16384))),AS(o,i)):zc(o)}function zc(i){var o=i;do{if((o.flags&32768)!==0){AS(o,Is);return}i=o.return;var u=a2(o.alternate,o,ls);if(u!==null){Xe=u;return}if(o=o.sibling,o!==null){Xe=o;return}Xe=o=i}while(o!==null);Nt===0&&(Nt=5)}function AS(i,o){do{var u=o2(i.alternate,i);if(u!==null){u.flags&=32767,Xe=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(i=i.sibling,i!==null)){Xe=i;return}Xe=i=u}while(i!==null);Nt=6,Xe=null}function TS(i,o,u,h,v,b,_,O,U){i.cancelPendingCommit=null;do jc();while(Ut!==0);if((pt&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=Fh,QT(i,u,b,_,O,U),i===_t&&(Xe=_t=null,nt=0),Ma=o,js=i,us=u,Gp=b,Qp=v,vS=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,b2(Ce,function(){return DS(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=F.T,F.T=null,v=J.p,J.p=2,_=pt,pt|=4;try{l2(i,o,u)}finally{pt=_,J.p=v,F.T=h}}Ut=1,OS(),MS(),NS()}}function OS(){if(Ut===1){Ut=0;var i=js,o=Ma,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=F.T,F.T=null;var h=J.p;J.p=2;var v=pt;pt|=4;try{cS(o,i);var b=um,_=gb(i.containerInfo),O=b.focusedElem,U=b.selectionRange;if(_!==O&&O&&O.ownerDocument&&mb(O.ownerDocument.documentElement,O)){if(U!==null&&Dh(O)){var Y=U.start,ie=U.end;if(ie===void 0&&(ie=Y),"selectionStart"in O)O.selectionStart=Y,O.selectionEnd=Math.min(ie,O.value.length);else{var le=O.ownerDocument||document,W=le&&le.defaultView||window;if(W.getSelection){var re=W.getSelection(),Se=O.textContent.length,ze=Math.min(U.start,Se),St=U.end===void 0?ze:Math.min(U.end,Se);!re.extend&&ze>St&&(_=St,St=ze,ze=_);var K=pb(O,ze),H=pb(O,St);if(K&&H&&(re.rangeCount!==1||re.anchorNode!==K.node||re.anchorOffset!==K.offset||re.focusNode!==H.node||re.focusOffset!==H.offset)){var Z=le.createRange();Z.setStart(K.node,K.offset),re.removeAllRanges(),ze>St?(re.addRange(Z),re.extend(H.node,H.offset)):(Z.setEnd(H.node,H.offset),re.addRange(Z))}}}}for(le=[],re=O;re=re.parentNode;)re.nodeType===1&&le.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<le.length;O++){var oe=le[O];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Qc=!!lm,um=lm=null}finally{pt=v,J.p=h,F.T=u}}i.current=o,Ut=2}}function MS(){if(Ut===2){Ut=0;var i=js,o=Ma,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=F.T,F.T=null;var h=J.p;J.p=2;var v=pt;pt|=4;try{iS(i,o.alternate,o)}finally{pt=v,J.p=h,F.T=u}}Ut=3}}function NS(){if(Ut===4||Ut===3){Ut=0,be();var i=js,o=Ma,u=us,h=vS;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ut=5:(Ut=0,Ma=js=null,IS(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(zs=null),mh(u),o=o.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(ut,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=F.T,v=J.p,J.p=2,F.T=null;try{for(var b=i.onRecoverableError,_=0;_<h.length;_++){var O=h[_];b(O.value,{componentStack:O.stack})}}finally{F.T=o,J.p=v}}(us&3)!==0&&jc(),jr(i),v=i.pendingLanes,(u&261930)!==0&&(v&42)!==0?i===Zp?al++:(al=0,Zp=i):al=0,ol(0)}}function IS(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Bo(o)))}function jc(){return OS(),MS(),NS(),DS()}function DS(){if(Ut!==5)return!1;var i=js,o=Gp;Gp=0;var u=mh(us),h=F.T,v=J.p;try{J.p=32>u?32:u,F.T=null,u=Qp,Qp=null;var b=js,_=us;if(Ut=0,Ma=js=null,us=0,(pt&6)!==0)throw Error(r(331));var O=pt;if(pt|=4,mS(b.current),dS(b,b.current,_,u),pt=O,ol(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(ut,b)}catch{}return!0}finally{J.p=v,F.T=h,IS(i,o)}}function zS(i,o,u){o=lr(u,o),o=Rp(i.stateNode,o,2),i=Ts(i,o,2),i!==null&&(Ro(i,2),jr(i))}function gt(i,o,u){if(i.tag===3)zS(i,i,u);else for(;o!==null;){if(o.tag===3){zS(o,i,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(zs===null||!zs.has(h))){i=lr(u,i),u=jx(2),h=Ts(o,u,2),h!==null&&(Lx(u,h,o,i),Ro(h,2),jr(h));break}}o=o.return}}function Xp(i,o,u){var h=i.pingCache;if(h===null){h=i.pingCache=new f2;var v=new Set;h.set(o,v)}else v=h.get(o),v===void 0&&(v=new Set,h.set(o,v));v.has(u)||(Hp=!0,v.add(u),i=g2.bind(null,i,o,u),o.then(i,i))}function g2(i,o,u){var h=i.pingCache;h!==null&&h.delete(o),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,_t===i&&(nt&u)===u&&(Nt===4||Nt===3&&(nt&62914560)===nt&&300>ye()-Oc?(pt&2)===0&&Na(i,0):Vp|=u,Oa===nt&&(Oa=0)),jr(i)}function jS(i,o){o===0&&(o=Ov()),i=gi(i,o),i!==null&&(Ro(i,o),jr(i))}function y2(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),jS(i,u)}function v2(i,o){var u=0;switch(i.tag){case 31:case 13:var h=i.stateNode,v=i.memoizedState;v!==null&&(u=v.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),jS(i,u)}function b2(i,o){return Me(i,o)}var Lc=null,Da=null,Wp=!1,Pc=!1,em=!1,Ps=0;function jr(i){i!==Da&&i.next===null&&(Da===null?Lc=Da=i:Da=Da.next=i),Pc=!0,Wp||(Wp=!0,S2())}function ol(i,o){if(!em&&Pc){em=!0;do for(var u=!1,h=Lc;h!==null;){if(i!==0){var v=h.pendingLanes;if(v===0)var b=0;else{var _=h.suspendedLanes,O=h.pingedLanes;b=(1<<31-wt(42|i)+1)-1,b&=v&~(_&~O),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,$S(h,b))}else b=nt,b=Uu(h,h===_t?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||ko(h,b)||(u=!0,$S(h,b));h=h.next}while(u);em=!1}}function x2(){LS()}function LS(){Pc=Wp=!1;var i=0;Ps!==0&&M2()&&(i=Ps);for(var o=ye(),u=null,h=Lc;h!==null;){var v=h.next,b=PS(h,o);b===0?(h.next=null,u===null?Lc=v:u.next=v,v===null&&(Da=u)):(u=h,(i!==0||(b&3)!==0)&&(Pc=!0)),h=v}Ut!==0&&Ut!==5||ol(i),Ps!==0&&(Ps=0)}function PS(i,o){for(var u=i.suspendedLanes,h=i.pingedLanes,v=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var _=31-wt(b),O=1<<_,U=v[_];U===-1?((O&u)===0||(O&h)!==0)&&(v[_]=GT(O,o)):U<=o&&(i.expiredLanes|=O),b&=~O}if(o=_t,u=nt,u=Uu(i,i===o?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,u===0||i===o&&(mt===2||mt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&ge(h),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||ko(i,u)){if(o=u&-u,o===i.callbackPriority)return o;switch(h!==null&&ge(h),mh(u)){case 2:case 8:u=fe;break;case 32:u=Ce;break;case 268435456:u=xe;break;default:u=Ce}return h=FS.bind(null,i),u=Me(u,h),i.callbackPriority=o,i.callbackNode=u,o}return h!==null&&h!==null&&ge(h),i.callbackPriority=2,i.callbackNode=null,2}function FS(i,o){if(Ut!==0&&Ut!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(jc()&&i.callbackNode!==u)return null;var h=nt;return h=Uu(i,i===_t?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(xS(i,h,o),PS(i,ye()),i.callbackNode!=null&&i.callbackNode===u?FS.bind(null,i):null)}function $S(i,o){if(jc())return null;xS(i,o,!0)}function S2(){I2(function(){(pt&6)!==0?Me(ne,x2):LS()})}function tm(){if(Ps===0){var i=ba;i===0&&(i=Fu,Fu<<=1,(Fu&261888)===0&&(Fu=256)),Ps=i}return Ps}function BS(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ku(""+i)}function US(i,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,i.id&&u.setAttribute("form",i.id),o.parentNode.insertBefore(u,o),i=new FormData(i),u.parentNode.removeChild(u),i}function w2(i,o,u,h,v){if(o==="submit"&&u&&u.stateNode===v){var b=BS((v[Rn]||null).action),_=h.submitter;_&&(o=(o=_[Rn]||null)?BS(o.formAction):_.getAttribute("formAction"),o!==null&&(b=o,_=null));var O=new Yu("action","action",null,h,v);i.push({event:O,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ps!==0){var U=_?US(v,_):new FormData(v);Sp(u,{pending:!0,data:U,method:v.method,action:b},null,U)}}else typeof b=="function"&&(O.preventDefault(),U=_?US(v,_):new FormData(v),Sp(u,{pending:!0,data:U,method:v.method,action:b},b,U))},currentTarget:v}]})}}for(var nm=0;nm<Ph.length;nm++){var rm=Ph[nm],_2=rm.toLowerCase(),C2=rm[0].toUpperCase()+rm.slice(1);Cr(_2,"on"+C2)}Cr(bb,"onAnimationEnd"),Cr(xb,"onAnimationIteration"),Cr(Sb,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr($O,"onTransitionRun"),Cr(BO,"onTransitionStart"),Cr(UO,"onTransitionCancel"),Cr(wb,"onTransitionEnd"),ia("onMouseEnter",["mouseout","mouseover"]),ia("onMouseLeave",["mouseout","mouseover"]),ia("onPointerEnter",["pointerout","pointerover"]),ia("onPointerLeave",["pointerout","pointerover"]),di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),di("onBeforeInput",["compositionend","keypress","textInput","paste"]),di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ll));function qS(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var h=i[u],v=h.event;h=h.listeners;e:{var b=void 0;if(o)for(var _=h.length-1;0<=_;_--){var O=h[_],U=O.instance,Y=O.currentTarget;if(O=O.listener,U!==b&&v.isPropagationStopped())break e;b=O,v.currentTarget=Y;try{b(v)}catch(ie){Wu(ie)}v.currentTarget=null,b=U}else for(_=0;_<h.length;_++){if(O=h[_],U=O.instance,Y=O.currentTarget,O=O.listener,U!==b&&v.isPropagationStopped())break e;b=O,v.currentTarget=Y;try{b(v)}catch(ie){Wu(ie)}v.currentTarget=null,b=U}}}}function We(i,o){var u=o[gh];u===void 0&&(u=o[gh]=new Set);var h=i+"__bubble";u.has(h)||(HS(o,i,2,!1),u.add(h))}function sm(i,o,u){var h=0;o&&(h|=4),HS(u,i,h,o)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function im(i){if(!i[Fc]){i[Fc]=!0,Lv.forEach(function(u){u!=="selectionchange"&&(E2.has(u)||sm(u,!1,i),sm(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Fc]||(o[Fc]=!0,sm("selectionchange",!1,o))}}function HS(i,o,u,h){switch(bw(o)){case 2:var v=W2;break;case 8:v=eM;break;default:v=xm}u=v.bind(null,o,u,i),v=void 0,!Eh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),h?v!==void 0?i.addEventListener(o,u,{capture:!0,passive:v}):i.addEventListener(o,u,!0):v!==void 0?i.addEventListener(o,u,{passive:v}):i.addEventListener(o,u,!1)}function am(i,o,u,h,v){var b=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var O=h.stateNode.containerInfo;if(O===v)break;if(_===4)for(_=h.return;_!==null;){var U=_.tag;if((U===3||U===4)&&_.stateNode.containerInfo===v)return;_=_.return}for(;O!==null;){if(_=na(O),_===null)return;if(U=_.tag,U===5||U===6||U===26||U===27){h=b=_;continue e}O=O.parentNode}}h=h.return}Zv(function(){var Y=b,ie=_h(u),le=[];e:{var W=_b.get(i);if(W!==void 0){var re=Yu,Se=i;switch(i){case"keypress":if(Qu(u)===0)break e;case"keydown":case"keyup":re=vO;break;case"focusin":Se="focus",re=Th;break;case"focusout":Se="blur",re=Th;break;case"beforeblur":case"afterblur":re=Th;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Xv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=aO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=SO;break;case bb:case xb:case Sb:re=uO;break;case wb:re=_O;break;case"scroll":case"scrollend":re=sO;break;case"wheel":re=EO;break;case"copy":case"cut":case"paste":re=fO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=eb;break;case"toggle":case"beforetoggle":re=RO}var ze=(o&4)!==0,St=!ze&&(i==="scroll"||i==="scrollend"),K=ze?W!==null?W+"Capture":null:W;ze=[];for(var H=Y,Z;H!==null;){var oe=H;if(Z=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Z===null||K===null||(oe=Oo(H,K),oe!=null&&ze.push(ul(H,oe,Z))),St)break;H=H.return}0<ze.length&&(W=new re(W,Se,null,u,ie),le.push({event:W,listeners:ze}))}}if((o&7)===0){e:{if(W=i==="mouseover"||i==="pointerover",re=i==="mouseout"||i==="pointerout",W&&u!==wh&&(Se=u.relatedTarget||u.fromElement)&&(na(Se)||Se[ta]))break e;if((re||W)&&(W=ie.window===ie?ie:(W=ie.ownerDocument)?W.defaultView||W.parentWindow:window,re?(Se=u.relatedTarget||u.toElement,re=Y,Se=Se?na(Se):null,Se!==null&&(St=a(Se),ze=Se.tag,Se!==St||ze!==5&&ze!==27&&ze!==6)&&(Se=null)):(re=null,Se=Y),re!==Se)){if(ze=Xv,oe="onMouseLeave",K="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(ze=eb,oe="onPointerLeave",K="onPointerEnter",H="pointer"),St=re==null?W:To(re),Z=Se==null?W:To(Se),W=new ze(oe,H+"leave",re,u,ie),W.target=St,W.relatedTarget=Z,oe=null,na(ie)===Y&&(ze=new ze(K,H+"enter",Se,u,ie),ze.target=Z,ze.relatedTarget=St,oe=ze),St=oe,re&&Se)t:{for(ze=k2,K=re,H=Se,Z=0,oe=K;oe;oe=ze(oe))Z++;oe=0;for(var Ne=H;Ne;Ne=ze(Ne))oe++;for(;0<Z-oe;)K=ze(K),Z--;for(;0<oe-Z;)H=ze(H),oe--;for(;Z--;){if(K===H||H!==null&&K===H.alternate){ze=K;break t}K=ze(K),H=ze(H)}ze=null}else ze=null;re!==null&&VS(le,W,re,ze,!1),Se!==null&&St!==null&&VS(le,St,Se,ze,!0)}}e:{if(W=Y?To(Y):window,re=W.nodeName&&W.nodeName.toLowerCase(),re==="select"||re==="input"&&W.type==="file")var ft=lb;else if(ab(W))if(ub)ft=LO;else{ft=zO;var Re=DO}else re=W.nodeName,!re||re.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Y&&Sh(Y.elementType)&&(ft=lb):ft=jO;if(ft&&(ft=ft(i,Y))){ob(le,ft,u,ie);break e}Re&&Re(i,W,Y),i==="focusout"&&Y&&W.type==="number"&&Y.memoizedProps.value!=null&&xh(W,"number",W.value)}switch(Re=Y?To(Y):window,i){case"focusin":(ab(Re)||Re.contentEditable==="true")&&(fa=Re,zh=Y,Po=null);break;case"focusout":Po=zh=fa=null;break;case"mousedown":jh=!0;break;case"contextmenu":case"mouseup":case"dragend":jh=!1,yb(le,u,ie);break;case"selectionchange":if(FO)break;case"keydown":case"keyup":yb(le,u,ie)}var Ke;if(Mh)e:{switch(i){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else ca?sb(i,u)&&(rt="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(rt="onCompositionStart");rt&&(tb&&u.locale!=="ko"&&(ca||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&ca&&(Ke=Yv()):(ws=ie,kh="value"in ws?ws.value:ws.textContent,ca=!0)),Re=$c(Y,rt),0<Re.length&&(rt=new Wv(rt,i,null,u,ie),le.push({event:rt,listeners:Re}),Ke?rt.data=Ke:(Ke=ib(u),Ke!==null&&(rt.data=Ke)))),(Ke=TO?OO(i,u):MO(i,u))&&(rt=$c(Y,"onBeforeInput"),0<rt.length&&(Re=new Wv("onBeforeInput","beforeinput",null,u,ie),le.push({event:Re,listeners:rt}),Re.data=Ke)),w2(le,i,Y,u,ie)}qS(le,o)})}function ul(i,o,u){return{instance:i,listener:o,currentTarget:u}}function $c(i,o){for(var u=o+"Capture",h=[];i!==null;){var v=i,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=Oo(i,u),v!=null&&h.unshift(ul(i,v,b)),v=Oo(i,o),v!=null&&h.push(ul(i,v,b))),i.tag===3)return h;i=i.return}return[]}function k2(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function VS(i,o,u,h,v){for(var b=o._reactName,_=[];u!==null&&u!==h;){var O=u,U=O.alternate,Y=O.stateNode;if(O=O.tag,U!==null&&U===h)break;O!==5&&O!==26&&O!==27||Y===null||(U=Y,v?(Y=Oo(u,b),Y!=null&&_.unshift(ul(u,Y,U))):v||(Y=Oo(u,b),Y!=null&&_.push(ul(u,Y,U)))),u=u.return}_.length!==0&&i.push({event:o,listeners:_})}var R2=/\r\n?/g,A2=/\u0000|\uFFFD/g;function KS(i){return(typeof i=="string"?i:""+i).replace(R2,`
`).replace(A2,"")}function GS(i,o){return o=KS(o),KS(i)===o}function xt(i,o,u,h,v,b){switch(u){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||oa(i,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&oa(i,""+h);break;case"className":Hu(i,"class",h);break;case"tabIndex":Hu(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Hu(i,u,h);break;case"style":Gv(i,h,b);break;case"data":if(o!=="object"){Hu(i,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||u!=="href")){i.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(u);break}h=Ku(""+h),i.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(o!=="input"&&xt(i,o,"name",v.name,v,null),xt(i,o,"formEncType",v.formEncType,v,null),xt(i,o,"formMethod",v.formMethod,v,null),xt(i,o,"formTarget",v.formTarget,v,null)):(xt(i,o,"encType",v.encType,v,null),xt(i,o,"method",v.method,v,null),xt(i,o,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(u);break}h=Ku(""+h),i.setAttribute(u,h);break;case"onClick":h!=null&&(i.onclick=Qr);break;case"onScroll":h!=null&&We("scroll",i);break;case"onScrollEnd":h!=null&&We("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}u=Ku(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(u,""+h):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":h===!0?i.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(u,h):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(u,h):i.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(u):i.setAttribute(u,h);break;case"popover":We("beforetoggle",i),We("toggle",i),qu(i,"popover",h);break;case"xlinkActuate":Gr(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Gr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Gr(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Gr(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Gr(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Gr(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Gr(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Gr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Gr(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":qu(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=nO.get(u)||u,qu(i,u,h))}}function om(i,o,u,h,v,b){switch(u){case"style":Gv(i,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof h=="string"?oa(i,h):(typeof h=="number"||typeof h=="bigint")&&oa(i,""+h);break;case"onScroll":h!=null&&We("scroll",i);break;case"onScrollEnd":h!=null&&We("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pv.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),b=i[Rn]||null,b=b!=null?b[u]:null,typeof b=="function"&&i.removeEventListener(o,b,v),typeof h=="function")){typeof b!="function"&&b!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(o,h,v);break e}u in i?i[u]=h:h===!0?i.setAttribute(u,""):qu(i,u,h)}}}function on(i,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",i),We("load",i);var h=!1,v=!1,b;for(b in u)if(u.hasOwnProperty(b)){var _=u[b];if(_!=null)switch(b){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:xt(i,o,b,_,u,null)}}v&&xt(i,o,"srcSet",u.srcSet,u,null),h&&xt(i,o,"src",u.src,u,null);return;case"input":We("invalid",i);var O=b=_=v=null,U=null,Y=null;for(h in u)if(u.hasOwnProperty(h)){var ie=u[h];if(ie!=null)switch(h){case"name":v=ie;break;case"type":_=ie;break;case"checked":U=ie;break;case"defaultChecked":Y=ie;break;case"value":b=ie;break;case"defaultValue":O=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,o));break;default:xt(i,o,h,ie,u,null)}}qv(i,b,O,U,Y,_,v,!1);return;case"select":We("invalid",i),h=_=b=null;for(v in u)if(u.hasOwnProperty(v)&&(O=u[v],O!=null))switch(v){case"value":b=O;break;case"defaultValue":_=O;break;case"multiple":h=O;default:xt(i,o,v,O,u,null)}o=b,u=_,i.multiple=!!h,o!=null?aa(i,!!h,o,!1):u!=null&&aa(i,!!h,u,!0);return;case"textarea":We("invalid",i),b=v=h=null;for(_ in u)if(u.hasOwnProperty(_)&&(O=u[_],O!=null))switch(_){case"value":h=O;break;case"defaultValue":v=O;break;case"children":b=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:xt(i,o,_,O,u,null)}Vv(i,h,v,b);return;case"option":for(U in u)u.hasOwnProperty(U)&&(h=u[U],h!=null)&&(U==="selected"?i.selected=h&&typeof h!="function"&&typeof h!="symbol":xt(i,o,U,h,u,null));return;case"dialog":We("beforetoggle",i),We("toggle",i),We("cancel",i),We("close",i);break;case"iframe":case"object":We("load",i);break;case"video":case"audio":for(h=0;h<ll.length;h++)We(ll[h],i);break;case"image":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"embed":case"source":case"link":We("error",i),We("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in u)if(u.hasOwnProperty(Y)&&(h=u[Y],h!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:xt(i,o,Y,h,u,null)}return;default:if(Sh(o)){for(ie in u)u.hasOwnProperty(ie)&&(h=u[ie],h!==void 0&&om(i,o,ie,h,u,void 0));return}}for(O in u)u.hasOwnProperty(O)&&(h=u[O],h!=null&&xt(i,o,O,h,u,null))}function T2(i,o,u,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,_=null,O=null,U=null,Y=null,ie=null;for(re in u){var le=u[re];if(u.hasOwnProperty(re)&&le!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":U=le;default:h.hasOwnProperty(re)||xt(i,o,re,null,h,le)}}for(var W in h){var re=h[W];if(le=u[W],h.hasOwnProperty(W)&&(re!=null||le!=null))switch(W){case"type":b=re;break;case"name":v=re;break;case"checked":Y=re;break;case"defaultChecked":ie=re;break;case"value":_=re;break;case"defaultValue":O=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,o));break;default:re!==le&&xt(i,o,W,re,h,le)}}bh(i,_,O,U,Y,ie,b,v);return;case"select":re=_=O=W=null;for(b in u)if(U=u[b],u.hasOwnProperty(b)&&U!=null)switch(b){case"value":break;case"multiple":re=U;default:h.hasOwnProperty(b)||xt(i,o,b,null,h,U)}for(v in h)if(b=h[v],U=u[v],h.hasOwnProperty(v)&&(b!=null||U!=null))switch(v){case"value":W=b;break;case"defaultValue":O=b;break;case"multiple":_=b;default:b!==U&&xt(i,o,v,b,h,U)}o=O,u=_,h=re,W!=null?aa(i,!!u,W,!1):!!h!=!!u&&(o!=null?aa(i,!!u,o,!0):aa(i,!!u,u?[]:"",!1));return;case"textarea":re=W=null;for(O in u)if(v=u[O],u.hasOwnProperty(O)&&v!=null&&!h.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:xt(i,o,O,null,h,v)}for(_ in h)if(v=h[_],b=u[_],h.hasOwnProperty(_)&&(v!=null||b!=null))switch(_){case"value":W=v;break;case"defaultValue":re=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==b&&xt(i,o,_,v,h,b)}Hv(i,W,re);return;case"option":for(var Se in u)W=u[Se],u.hasOwnProperty(Se)&&W!=null&&!h.hasOwnProperty(Se)&&(Se==="selected"?i.selected=!1:xt(i,o,Se,null,h,W));for(U in h)W=h[U],re=u[U],h.hasOwnProperty(U)&&W!==re&&(W!=null||re!=null)&&(U==="selected"?i.selected=W&&typeof W!="function"&&typeof W!="symbol":xt(i,o,U,W,h,re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in u)W=u[ze],u.hasOwnProperty(ze)&&W!=null&&!h.hasOwnProperty(ze)&&xt(i,o,ze,null,h,W);for(Y in h)if(W=h[Y],re=u[Y],h.hasOwnProperty(Y)&&W!==re&&(W!=null||re!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,o));break;default:xt(i,o,Y,W,h,re)}return;default:if(Sh(o)){for(var St in u)W=u[St],u.hasOwnProperty(St)&&W!==void 0&&!h.hasOwnProperty(St)&&om(i,o,St,void 0,h,W);for(ie in h)W=h[ie],re=u[ie],!h.hasOwnProperty(ie)||W===re||W===void 0&&re===void 0||om(i,o,ie,W,h,re);return}}for(var K in u)W=u[K],u.hasOwnProperty(K)&&W!=null&&!h.hasOwnProperty(K)&&xt(i,o,K,null,h,W);for(le in h)W=h[le],re=u[le],!h.hasOwnProperty(le)||W===re||W==null&&re==null||xt(i,o,le,W,h,re)}function QS(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function O2(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var v=u[h],b=v.transferSize,_=v.initiatorType,O=v.duration;if(b&&O&&QS(_)){for(_=0,O=v.responseEnd,h+=1;h<u.length;h++){var U=u[h],Y=U.startTime;if(Y>O)break;var ie=U.transferSize,le=U.initiatorType;ie&&QS(le)&&(U=U.responseEnd,_+=ie*(U<O?1:(O-Y)/(U-Y)))}if(--h,o+=8*(b+_)/(v.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var lm=null,um=null;function Bc(i){return i.nodeType===9?i:i.ownerDocument}function ZS(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function YS(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function cm(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var fm=null;function M2(){var i=window.event;return i&&i.type==="popstate"?i===fm?!1:(fm=i,!0):(fm=null,!1)}var JS=typeof setTimeout=="function"?setTimeout:void 0,N2=typeof clearTimeout=="function"?clearTimeout:void 0,XS=typeof Promise=="function"?Promise:void 0,I2=typeof queueMicrotask=="function"?queueMicrotask:typeof XS<"u"?function(i){return XS.resolve(null).then(i).catch(D2)}:JS;function D2(i){setTimeout(function(){throw i})}function Fs(i){return i==="head"}function WS(i,o){var u=o,h=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(h===0){i.removeChild(v),Pa(o);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")cl(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,cl(u);for(var b=u.firstChild;b;){var _=b.nextSibling,O=b.nodeName;b[Ao]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=_}}else u==="body"&&cl(i.ownerDocument.body);u=v}while(u);Pa(o)}function ew(i,o){var u=i;i=0;do{var h=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=h}while(u)}function dm(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":dm(u),yh(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function z2(i,o,u,h){for(;i.nodeType===1;){var v=u;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Ao])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=hr(i.nextSibling),i===null)break}return null}function j2(i,o,u){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=hr(i.nextSibling),i===null))return null;return i}function tw(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=hr(i.nextSibling),i===null))return null;return i}function hm(i){return i.data==="$?"||i.data==="$~"}function pm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function L2(i,o){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||u.readyState!=="loading")o();else{var h=function(){o(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function hr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var mm=null;function nw(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(o===0)return hr(i.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}i=i.nextSibling}return null}function rw(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return i;o--}else u!=="/$"&&u!=="/&"||o++}i=i.previousSibling}return null}function sw(i,o,u){switch(o=Bc(u),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function cl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);yh(i)}var pr=new Map,iw=new Set;function Uc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var cs=J.d;J.d={f:P2,r:F2,D:$2,C:B2,L:U2,m:q2,X:V2,S:H2,M:K2};function P2(){var i=cs.f(),o=Ic();return i||o}function F2(i){var o=ra(i);o!==null&&o.tag===5&&o.type==="form"?wx(o):cs.r(i)}var za=typeof document>"u"?null:document;function aw(i,o,u){var h=za;if(h&&typeof o=="string"&&o){var v=ar(o);v='link[rel="'+i+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),iw.has(v)||(iw.add(v),i={rel:i,crossOrigin:u,href:o},h.querySelector(v)===null&&(o=h.createElement("link"),on(o,"link",i),Yt(o),h.head.appendChild(o)))}}function $2(i){cs.D(i),aw("dns-prefetch",i,null)}function B2(i,o){cs.C(i,o),aw("preconnect",i,o)}function U2(i,o,u){cs.L(i,o,u);var h=za;if(h&&i&&o){var v='link[rel="preload"][as="'+ar(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+ar(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+ar(u.imageSizes)+'"]')):v+='[href="'+ar(i)+'"]';var b=v;switch(o){case"style":b=ja(i);break;case"script":b=La(i)}pr.has(b)||(i=p({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:i,as:o},u),pr.set(b,i),h.querySelector(v)!==null||o==="style"&&h.querySelector(fl(b))||o==="script"&&h.querySelector(dl(b))||(o=h.createElement("link"),on(o,"link",i),Yt(o),h.head.appendChild(o)))}}function q2(i,o){cs.m(i,o);var u=za;if(u&&i){var h=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+ar(h)+'"][href="'+ar(i)+'"]',b=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=La(i)}if(!pr.has(b)&&(i=p({rel:"modulepreload",href:i},o),pr.set(b,i),u.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(dl(b)))return}h=u.createElement("link"),on(h,"link",i),Yt(h),u.head.appendChild(h)}}}function H2(i,o,u){cs.S(i,o,u);var h=za;if(h&&i){var v=sa(h).hoistableStyles,b=ja(i);o=o||"default";var _=v.get(b);if(!_){var O={loading:0,preload:null};if(_=h.querySelector(fl(b)))O.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},u),(u=pr.get(b))&&gm(i,u);var U=_=h.createElement("link");Yt(U),on(U,"link",i),U._p=new Promise(function(Y,ie){U.onload=Y,U.onerror=ie}),U.addEventListener("load",function(){O.loading|=1}),U.addEventListener("error",function(){O.loading|=2}),O.loading|=4,qc(_,o,h)}_={type:"stylesheet",instance:_,count:1,state:O},v.set(b,_)}}}function V2(i,o){cs.X(i,o);var u=za;if(u&&i){var h=sa(u).hoistableScripts,v=La(i),b=h.get(v);b||(b=u.querySelector(dl(v)),b||(i=p({src:i,async:!0},o),(o=pr.get(v))&&ym(i,o),b=u.createElement("script"),Yt(b),on(b,"link",i),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(v,b))}}function K2(i,o){cs.M(i,o);var u=za;if(u&&i){var h=sa(u).hoistableScripts,v=La(i),b=h.get(v);b||(b=u.querySelector(dl(v)),b||(i=p({src:i,async:!0,type:"module"},o),(o=pr.get(v))&&ym(i,o),b=u.createElement("script"),Yt(b),on(b,"link",i),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(v,b))}}function ow(i,o,u,h){var v=(v=he.current)?Uc(v):null;if(!v)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=ja(u.href),u=sa(v).hoistableStyles,h=u.get(o),h||(h={type:"style",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=ja(u.href);var b=sa(v).hoistableStyles,_=b.get(i);if(_||(v=v.ownerDocument||v,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,_),(b=v.querySelector(fl(i)))&&!b._p&&(_.instance=b,_.state.loading=5),pr.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},pr.set(i,u),b||G2(v,i,u,_.state))),o&&h===null)throw Error(r(528,""));return _}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=La(u),u=sa(v).hoistableScripts,h=u.get(o),h||(h={type:"script",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function ja(i){return'href="'+ar(i)+'"'}function fl(i){return'link[rel="stylesheet"]['+i+"]"}function lw(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function G2(i,o,u,h){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=i.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),on(o,"link",u),Yt(o),i.head.appendChild(o))}function La(i){return'[src="'+ar(i)+'"]'}function dl(i){return"script[async]"+i}function uw(i,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var h=i.querySelector('style[data-href~="'+ar(u.href)+'"]');if(h)return o.instance=h,Yt(h),h;var v=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Yt(h),on(h,"style",v),qc(h,u.precedence,i),o.instance=h;case"stylesheet":v=ja(u.href);var b=i.querySelector(fl(v));if(b)return o.state.loading|=4,o.instance=b,Yt(b),b;h=lw(u),(v=pr.get(v))&&gm(h,v),b=(i.ownerDocument||i).createElement("link"),Yt(b);var _=b;return _._p=new Promise(function(O,U){_.onload=O,_.onerror=U}),on(b,"link",h),o.state.loading|=4,qc(b,u.precedence,i),o.instance=b;case"script":return b=La(u.src),(v=i.querySelector(dl(b)))?(o.instance=v,Yt(v),v):(h=u,(v=pr.get(b))&&(h=p({},u),ym(h,v)),i=i.ownerDocument||i,v=i.createElement("script"),Yt(v),on(v,"link",h),i.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,qc(h,u.precedence,i));return o.instance}function qc(i,o,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,b=v,_=0;_<h.length;_++){var O=h[_];if(O.dataset.precedence===o)b=O;else if(b!==v)break}b?b.parentNode.insertBefore(i,b.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(i,o.firstChild))}function gm(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function ym(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Hc=null;function cw(i,o,u){if(Hc===null){var h=new Map,v=Hc=new Map;v.set(u,h)}else v=Hc,h=v.get(u),h||(h=new Map,v.set(u,h));if(h.has(i))return h;for(h.set(i,null),u=u.getElementsByTagName(i),v=0;v<u.length;v++){var b=u[v];if(!(b[Ao]||b[nn]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var _=b.getAttribute(o)||"";_=i+_;var O=h.get(_);O?O.push(b):h.set(_,[b])}}return h}function fw(i,o,u){i=i.ownerDocument||i,i.head.insertBefore(u,o==="title"?i.querySelector("head > title"):null)}function Q2(i,o,u){if(u===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function dw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Z2(i,o,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=ja(h.href),b=o.querySelector(fl(v));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Vc.bind(i),o.then(i,i)),u.state.loading|=4,u.instance=b,Yt(b);return}b=o.ownerDocument||o,h=lw(h),(v=pr.get(v))&&gm(h,v),b=b.createElement("link"),Yt(b);var _=b;_._p=new Promise(function(O,U){_.onload=O,_.onerror=U}),on(b,"link",h),u.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=Vc.bind(i),o.addEventListener("load",u),o.addEventListener("error",u))}}var vm=0;function Y2(i,o){return i.stylesheets&&i.count===0&&Gc(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var h=setTimeout(function(){if(i.stylesheets&&Gc(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+o);0<i.imgBytes&&vm===0&&(vm=62500*O2());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Gc(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>vm?50:800)+o);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function Vc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Kc=null;function Gc(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Kc=new Map,o.forEach(J2,i),Kc=null,Vc.call(i))}function J2(i,o){if(!(o.state.loading&4)){var u=Kc.get(i);if(u)var h=u.get(null);else{u=new Map,Kc.set(i,u);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var _=v[b];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(u.set(_.dataset.precedence,_),h=_)}h&&u.set(null,h)}v=o.instance,_=v.getAttribute("data-precedence"),b=u.get(_)||h,b===h&&u.set(null,v),u.set(_,v),this.count++,h=Vc.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),b?b.parentNode.insertBefore(v,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),o.state.loading|=4}}var hl={$$typeof:R,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function X2(i,o,u,h,v,b,_,O,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hh(0),this.hiddenUpdates=hh(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function hw(i,o,u,h,v,b,_,O,U,Y,ie,le){return i=new X2(i,o,u,_,U,Y,ie,le,O),o=1,b===!0&&(o|=24),b=Bn(3,null,null,o),i.current=b,b.stateNode=i,o=Jh(),o.refCount++,i.pooledCache=o,o.refCount++,b.memoizedState={element:h,isDehydrated:u,cache:o},tp(b),i}function pw(i){return i?(i=pa,i):pa}function mw(i,o,u,h,v,b){v=pw(v),h.context===null?h.context=v:h.pendingContext=v,h=As(o),h.payload={element:u},b=b===void 0?null:b,b!==null&&(h.callback=b),u=Ts(i,h,o),u!==null&&(In(u,i,o),Vo(u,i,o))}function gw(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function bm(i,o){gw(i,o),(i=i.alternate)&&gw(i,o)}function yw(i){if(i.tag===13||i.tag===31){var o=gi(i,67108864);o!==null&&In(o,i,67108864),bm(i,67108864)}}function vw(i){if(i.tag===13||i.tag===31){var o=Kn();o=ph(o);var u=gi(i,o);u!==null&&In(u,i,o),bm(i,o)}}var Qc=!0;function W2(i,o,u,h){var v=F.T;F.T=null;var b=J.p;try{J.p=2,xm(i,o,u,h)}finally{J.p=b,F.T=v}}function eM(i,o,u,h){var v=F.T;F.T=null;var b=J.p;try{J.p=8,xm(i,o,u,h)}finally{J.p=b,F.T=v}}function xm(i,o,u,h){if(Qc){var v=Sm(h);if(v===null)am(i,o,h,Zc,u),xw(i,h);else if(nM(v,i,o,u,h))h.stopPropagation();else if(xw(i,h),o&4&&-1<tM.indexOf(i)){for(;v!==null;){var b=ra(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var _=fi(b.pendingLanes);if(_!==0){var O=b;for(O.pendingLanes|=2,O.entangledLanes|=2;_;){var U=1<<31-wt(_);O.entanglements[1]|=U,_&=~U}jr(b),(pt&6)===0&&(Mc=ye()+500,ol(0))}}break;case 31:case 13:O=gi(b,2),O!==null&&In(O,b,2),Ic(),bm(b,2)}if(b=Sm(h),b===null&&am(i,o,h,Zc,u),b===v)break;v=b}v!==null&&h.stopPropagation()}else am(i,o,h,null,u)}}function Sm(i){return i=_h(i),wm(i)}var Zc=null;function wm(i){if(Zc=null,i=na(i),i!==null){var o=a(i);if(o===null)i=null;else{var u=o.tag;if(u===13){if(i=l(o),i!==null)return i;i=null}else if(u===31){if(i=c(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Zc=i,null}function bw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case ne:return 2;case fe:return 8;case Ce:case ke:return 32;case xe:return 268435456;default:return 32}default:return 32}}var _m=!1,$s=null,Bs=null,Us=null,pl=new Map,ml=new Map,qs=[],tM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xw(i,o){switch(i){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":pl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ml.delete(o.pointerId)}}function gl(i,o,u,h,v,b){return i===null||i.nativeEvent!==b?(i={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:b,targetContainers:[v]},o!==null&&(o=ra(o),o!==null&&yw(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),i)}function nM(i,o,u,h,v){switch(o){case"focusin":return $s=gl($s,i,o,u,h,v),!0;case"dragenter":return Bs=gl(Bs,i,o,u,h,v),!0;case"mouseover":return Us=gl(Us,i,o,u,h,v),!0;case"pointerover":var b=v.pointerId;return pl.set(b,gl(pl.get(b)||null,i,o,u,h,v)),!0;case"gotpointercapture":return b=v.pointerId,ml.set(b,gl(ml.get(b)||null,i,o,u,h,v)),!0}return!1}function Sw(i){var o=na(i.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){i.blockedOn=o,zv(i.priority,function(){vw(u)});return}}else if(o===31){if(o=c(u),o!==null){i.blockedOn=o,zv(i.priority,function(){vw(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Yc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Sm(i.nativeEvent);if(u===null){u=i.nativeEvent;var h=new u.constructor(u.type,u);wh=h,u.target.dispatchEvent(h),wh=null}else return o=ra(u),o!==null&&yw(o),i.blockedOn=u,!1;o.shift()}return!0}function ww(i,o,u){Yc(i)&&u.delete(o)}function rM(){_m=!1,$s!==null&&Yc($s)&&($s=null),Bs!==null&&Yc(Bs)&&(Bs=null),Us!==null&&Yc(Us)&&(Us=null),pl.forEach(ww),ml.forEach(ww)}function Jc(i,o){i.blockedOn===o&&(i.blockedOn=null,_m||(_m=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,rM)))}var Xc=null;function _w(i){Xc!==i&&(Xc=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Xc===i&&(Xc=null);for(var o=0;o<i.length;o+=3){var u=i[o],h=i[o+1],v=i[o+2];if(typeof h!="function"){if(wm(h||u)===null)continue;break}var b=ra(u);b!==null&&(i.splice(o,3),o-=3,Sp(b,{pending:!0,data:v,method:u.method,action:h},h,v))}}))}function Pa(i){function o(U){return Jc(U,i)}$s!==null&&Jc($s,i),Bs!==null&&Jc(Bs,i),Us!==null&&Jc(Us,i),pl.forEach(o),ml.forEach(o);for(var u=0;u<qs.length;u++){var h=qs[u];h.blockedOn===i&&(h.blockedOn=null)}for(;0<qs.length&&(u=qs[0],u.blockedOn===null);)Sw(u),u.blockedOn===null&&qs.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var v=u[h],b=u[h+1],_=v[Rn]||null;if(typeof b=="function")_||_w(u);else if(_){var O=null;if(b&&b.hasAttribute("formAction")){if(v=b,_=b[Rn]||null)O=_.formAction;else if(wm(v)!==null)continue}else O=_.action;typeof O=="function"?u[h+1]=O:(u.splice(h,3),h-=3),_w(u)}}}function Cw(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(_){return v=_})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function Cm(i){this._internalRoot=i}Wc.prototype.render=Cm.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var u=o.current,h=Kn();mw(u,h,i,o,null,null)},Wc.prototype.unmount=Cm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;mw(i.current,2,null,i,null,null),Ic(),o[ta]=null}};function Wc(i){this._internalRoot=i}Wc.prototype.unstable_scheduleHydration=function(i){if(i){var o=Dv();i={blockedOn:null,target:i,priority:o};for(var u=0;u<qs.length&&o!==0&&o<qs[u].priority;u++);qs.splice(u,0,i),u===0&&Sw(i)}};var Ew=e.version;if(Ew!=="19.2.3")throw Error(r(527,Ew,"19.2.3"));J.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var sM={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{ut=ef.inject(sM),ct=ef}catch{}}return vl.createRoot=function(i,o){if(!s(i))throw Error(r(299));var u=!1,h="",v=Nx,b=Ix,_=Dx;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),o=hw(i,1,!1,null,null,u,h,null,v,b,_,Cw),i[ta]=o.current,im(i),new Cm(o)},vl.hydrateRoot=function(i,o,u){if(!s(i))throw Error(r(299));var h=!1,v="",b=Nx,_=Ix,O=Dx,U=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(O=u.onRecoverableError),u.formState!==void 0&&(U=u.formState)),o=hw(i,1,!0,o,u??null,h,v,U,b,_,O,Cw),o.context=pw(null),u=o.current,h=Kn(),h=ph(h),v=As(h),v.callback=null,Ts(u,v,h),u=h,o.current.lanes=u,Ro(o,u),jr(o),i[ta]=o.current,im(i),new Wc(o)},vl.version="19.2.3",vl}var zw;function hM(){if(zw)return Rm.exports;zw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rm.exports=dM(),Rm.exports}var pM=hM(),Mm={exports:{}},Nm={};var jw;function mM(){if(jw)return Nm;jw=1;var t=fo().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Nm.c=function(e){return t.H.useMemoCache(e)},Nm}var Lw;function gM(){return Lw||(Lw=1,Mm.exports=mM()),Mm.exports}var tn=gM(),ho=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},yM={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},vM=class{#e=yM;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},zi=new vM;function bM(t){setTimeout(t,0)}var qi=typeof window>"u"||"Deno"in globalThis;function Sn(){}function xM(t,e){return typeof t=="function"?t(e):t}function Pg(t){return typeof t=="number"&&t>=0&&t!==1/0}function YC(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ei(t,e){return typeof t=="function"?t(e):t}function gr(t,e){return typeof t=="function"?t(e):t}function Pw(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:c}=t;if(l){if(r){if(e.queryHash!==Jy(l,e.options))return!1}else if(!lu(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||s&&s!==e.state.fetchStatus||a&&!a(e))}function Fw(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Ar(e.options.mutationKey)!==Ar(a))return!1}else if(!lu(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Jy(t,e){return(e?.queryKeyHashFn||Ar)(t)}function Ar(t){return JSON.stringify(t,(e,n)=>Fg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function lu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>lu(t[n],e[n])):!1}var SM=Object.prototype.hasOwnProperty;function JC(t,e){if(t===e)return t;const n=$w(t)&&$w(e);if(!n&&!(Fg(t)&&Fg(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,c=n?new Array(l):{};let f=0;for(let d=0;d<l;d++){const m=n?d:a[d],p=t[m],g=e[m];if(p===g){c[m]=p,(n?d<s:SM.call(t,m))&&f++;continue}if(p===null||g===null||typeof p!="object"||typeof g!="object"){c[m]=g;continue}const y=JC(p,g);c[m]=y,y===p&&f++}return s===l&&f===s?t:c}function Qf(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function $w(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Fg(t){if(!Bw(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Bw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Bw(t){return Object.prototype.toString.call(t)==="[object Object]"}function wM(t){return new Promise(e=>{zi.setTimeout(e,t)})}function $g(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?JC(t,e):e}function _M(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function CM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Xy=Symbol();function XC(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Xy?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Wy(t,e){return typeof t=="function"?t(...e):!!t}function EM(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var kM=class extends ho{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!qi&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},e0=new kM;function Bg(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var RM=bM;function AM(){let t=[],e=0,n=c=>{c()},r=c=>{c()},s=RM;const a=c=>{e?t.push(c):s(()=>{n(c)})},l=()=>{const c=t;t=[],c.length&&s(()=>{r(()=>{c.forEach(f=>{n(f)})})})};return{batch:c=>{let f;e++;try{f=c()}finally{e--,e||l()}return f},batchCalls:c=>(...f)=>{a(()=>{c(...f)})},schedule:a,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{s=c}}}var Gt=AM(),TM=class extends ho{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!qi&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Zf=new TM;function OM(t){return Math.min(1e3*2**t,3e4)}function WC(t){return(t??"online")==="online"?Zf.isOnline():!0}var Ug=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function eE(t){let e=!1,n=0,r;const s=Bg(),a=()=>s.status!=="pending",l=S=>{if(!a()){const E=new Ug(S);g(E),t.onCancel?.(E)}},c=()=>{e=!0},f=()=>{e=!1},d=()=>e0.isFocused()&&(t.networkMode==="always"||Zf.isOnline())&&t.canRun(),m=()=>WC(t.networkMode)&&t.canRun(),p=S=>{a()||(r?.(),s.resolve(S))},g=S=>{a()||(r?.(),s.reject(S))},y=()=>new Promise(S=>{r=E=>{(a()||d())&&S(E)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),x=()=>{if(a())return;let S;const E=n===0?t.initialPromise:void 0;try{S=E??t.fn()}catch(C){S=Promise.reject(C)}Promise.resolve(S).then(p).catch(C=>{if(a())return;const k=t.retry??(qi?0:3),R=t.retryDelay??OM,I=typeof R=="function"?R(n,C):R,j=k===!0||typeof k=="number"&&n<k||typeof k=="function"&&k(n,C);if(e||!j){g(C);return}n++,t.onFail?.(n,C),wM(I).then(()=>d()?void 0:y()).then(()=>{e?g(C):x()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r?.(),s),cancelRetry:c,continueRetry:f,canStart:m,start:()=>(m()?x():y().then(x),s)}}var tE=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Pg(this.gcTime)&&(this.#e=zi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(qi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(zi.clearTimeout(this.#e),this.#e=void 0)}},MM=class extends tE{#e;#t;#n;#r;#s;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=qw(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=qw(this.options);e.data!==void 0&&(this.setState(Uw(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=$g(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(Sn).catch(Sn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>gr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Xy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ei(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!YC(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(f=>f.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},s=()=>{const c=XC(this.options,e),d=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#i=!1,this.options.persister?this.options.persister(c,d,this):c(d)},l=(()=>{const c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:s};return r(c),c})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#s=eE({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof Ug&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(c,f)=>{this.#a({type:"failed",failureCount:c,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const c=await this.#s.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof Ug){if(c.silent)return this.#s.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#a({type:"error",error:c}),this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...nE(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...Uw(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Gt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function nE(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:WC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Uw(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function qw(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var rE=class extends ho{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#i=Bg(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#i;#a;#p;#m;#u;#c;#l;#f;#d=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Hw(this.#t,this.options)?this.#h():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return qg(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return qg(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#S(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!Qf(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Vw(this.#t,n,this.options,e)&&this.#h(),this.updateResult(),r&&(this.#t!==n||gr(this.options.enabled,this.#t)!==gr(e.enabled,this.#t)||ei(this.options.staleTime,this.#t)!==ei(e.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==n||gr(this.options.enabled,this.#t)!==gr(e.enabled,this.#t)||s!==this.#f)&&this.#v(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return IM(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#d.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Sn)),e}#g(){this.#x();const t=ei(this.options.staleTime,this.#t);if(qi||this.#r.isStale||!Pg(t))return;const n=YC(this.#r.dataUpdatedAt,t)+1;this.#c=zi.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#S(),this.#f=t,!(qi||gr(this.options.enabled,this.#t)===!1||!Pg(this.#f)||this.#f===0)&&(this.#l=zi.setInterval(()=>{(this.options.refetchIntervalInBackground||e0.isFocused())&&this.#h()},this.#f))}#b(){this.#g(),this.#v(this.#y())}#x(){this.#c&&(zi.clearTimeout(this.#c),this.#c=void 0)}#S(){this.#l&&(zi.clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const n=this.#t,r=this.options,s=this.#r,a=this.#s,l=this.#o,f=t!==n?t.state:this.#n,{state:d}=t;let m={...d},p=!1,g;if(e._optimisticResults){const L=this.hasListeners(),P=!L&&Hw(t,e),M=L&&Vw(t,n,e,r);(P||M)&&(m={...m,...nE(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:y,errorUpdatedAt:x,status:S}=m;g=m.data;let E=!1;if(e.placeholderData!==void 0&&g===void 0&&S==="pending"){let L;s?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(L=s.data,E=!0):L=typeof e.placeholderData=="function"?e.placeholderData(this.#u?.state.data,this.#u):e.placeholderData,L!==void 0&&(S="success",g=$g(s?.data,L,e),p=!0)}if(e.select&&g!==void 0&&!E)if(s&&g===a?.data&&e.select===this.#p)g=this.#m;else try{this.#p=e.select,g=e.select(g),g=$g(s?.data,g,e),this.#m=g,this.#a=null}catch(L){this.#a=L}this.#a&&(y=this.#a,g=this.#m,x=Date.now(),S="error");const C=m.fetchStatus==="fetching",k=S==="pending",R=S==="error",I=k&&C,j=g!==void 0,z={status:S,fetchStatus:m.fetchStatus,isPending:k,isSuccess:S==="success",isError:R,isInitialLoading:I,isLoading:I,data:g,dataUpdatedAt:m.dataUpdatedAt,error:y,errorUpdatedAt:x,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:C,isRefetching:C&&!k,isLoadingError:R&&!j,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:R&&j,isStale:t0(t,e),refetch:this.refetch,promise:this.#i,isEnabled:gr(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const L=$=>{z.status==="error"?$.reject(z.error):z.data!==void 0&&$.resolve(z.data)},P=()=>{const $=this.#i=z.promise=Bg();L($)},M=this.#i;switch(M.status){case"pending":t.queryHash===n.queryHash&&L(M);break;case"fulfilled":(z.status==="error"||z.data!==M.value)&&P();break;case"rejected":(z.status!=="error"||z.error!==M.reason)&&P();break}}return z}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#u=this.#t),Qf(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#d.size)return!0;const a=new Set(s??this.#d);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const c=l;return this.#r[c]!==t[c]&&a.has(c)})};this.#_({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#_(t){Gt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function NM(t,e){return gr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Hw(t,e){return NM(t,e)||t.state.data!==void 0&&qg(t,e,e.refetchOnMount)}function qg(t,e,n){if(gr(e.enabled,t)!==!1&&ei(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&t0(t,e)}return!1}function Vw(t,e,n,r){return(t!==e||gr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&t0(t,n)}function t0(t,e){return gr(e.enabled,t)!==!1&&t.isStaleByTime(ei(e.staleTime,t))}function IM(t,e){return!Qf(t.getCurrentResult(),e)}function Kw(t){return{onFetch:(e,n)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},f=0;const d=async()=>{let m=!1;const p=x=>{EM(x,()=>e.signal,()=>m=!0)},g=XC(e.options,e.fetchOptions),y=async(x,S,E)=>{if(m)return Promise.reject();if(S==null&&x.pages.length)return Promise.resolve(x);const k=(()=>{const A={client:e.client,queryKey:e.queryKey,pageParam:S,direction:E?"backward":"forward",meta:e.options.meta};return p(A),A})(),R=await g(k),{maxPages:I}=e.options,j=E?CM:_M;return{pages:j(x.pages,R,I),pageParams:j(x.pageParams,S,I)}};if(s&&a.length){const x=s==="backward",S=x?DM:Gw,E={pages:a,pageParams:l},C=S(r,E);c=await y(E,C,x)}else{const x=t??a.length;do{const S=f===0?l[0]??r.initialPageParam:Gw(r,c);if(f>0&&S==null)break;c=await y(c,S),f++}while(f<x)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function Gw(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function DM(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var zM=class extends tE{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||sE(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=eE({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#s({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#r.canStart();try{if(r)e();else{this.#s({type:"pending",variables:t,isPaused:s}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#s({type:"pending",context:l,variables:t,isPaused:s})}const a=await this.#r.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#s({type:"success",data:a}),a}catch(a){try{await this.#n.config.onError?.(a,t,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(a,t,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,a,t,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#s({type:"error",error:a}),a}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Gt.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function sE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var jM=class extends ho{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new zM({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=tf(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=tf(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=tf(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=tf(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Gt.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Fw(e,n))}findAll(t={}){return this.getAll().filter(e=>Fw(t,e))}notify(t){Gt.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Gt.batch(()=>Promise.all(t.map(e=>e.continue().catch(Sn))))}};function tf(t){return t.options.scope?.id}var LM=class extends ho{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),Qf(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Ar(n.mutationKey)!==Ar(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#s(),this.#o(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#o()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#s(){const e=this.#n?.state??sE();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#o(e){Gt.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#r.onSuccess?.(e.data,n,r,s)}catch(a){Promise.reject(a)}try{this.#r.onSettled?.(e.data,null,n,r,s)}catch(a){Promise.reject(a)}}else if(e?.type==="error"){try{this.#r.onError?.(e.error,n,r,s)}catch(a){Promise.reject(a)}try{this.#r.onSettled?.(void 0,e.error,n,r,s)}catch(a){Promise.reject(a)}}}this.listeners.forEach(n=>{n(this.#t)})})}},PM=class extends ho{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,s=e.queryHash??Jy(r,e);let a=this.get(s);return a||(a=new MM({client:t,queryKey:r,queryHash:s,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Gt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Pw(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Pw(t,n)):e}notify(t){Gt.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Gt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Gt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},iE=class{#e;#t;#n;#r;#s;#o;#i;#a;constructor(t={}){this.#e=t.queryCache||new PM,this.#t=t.mutationCache||new jM,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=e0.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Zf.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ei(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,l=xM(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return Gt.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Gt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return Gt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Gt.batch(()=>this.#e.findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Sn).catch(Sn)}invalidateQueries(t,e={}){return Gt.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Gt.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Sn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Sn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(ei(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Sn).catch(Sn)}fetchInfiniteQuery(t){return t.behavior=Kw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Sn).catch(Sn)}ensureInfiniteQueryData(t){return t.behavior=Kw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Zf.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Ar(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{lu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(Ar(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{lu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Jy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Xy&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},aE=q.createContext(void 0),po=t=>{const e=q.useContext(aE);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},FM=({client:t,children:e})=>(q.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),w.jsx(aE.Provider,{value:t,children:e})),oE=q.createContext(!1),$M=()=>q.useContext(oE);oE.Provider;function BM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var UM=q.createContext(BM()),qM=()=>q.useContext(UM),HM=(t,e,n)=>{const r=n?.state.error&&typeof t.throwOnError=="function"?Wy(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||r)&&(e.isReset()||(t.retryOnMount=!1))},VM=t=>{q.useEffect(()=>{t.clearReset()},[t])},KM=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||Wy(n,[t.error,r])),GM=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},QM=(t,e)=>t.isLoading&&t.isFetching&&!e,ZM=(t,e)=>t?.suspense&&e.isPending,Qw=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function YM(t,e,n){const r=$M(),s=qM(),a=po(),l=a.defaultQueryOptions(t);a.getDefaultOptions().queries?._experimental_beforeQuery?.(l);const c=a.getQueryCache().get(l.queryHash);l._optimisticResults=r?"isRestoring":"optimistic",GM(l),HM(l,s,c),VM(s);const f=!a.getQueryCache().get(l.queryHash),[d]=q.useState(()=>new e(a,l)),m=d.getOptimisticResult(l),p=!r&&t.subscribed!==!1;if(q.useSyncExternalStore(q.useCallback(g=>{const y=p?d.subscribe(Gt.batchCalls(g)):Sn;return d.updateResult(),y},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),q.useEffect(()=>{d.setOptions(l)},[l,d]),ZM(l,m))throw Qw(l,d,s);if(KM({result:m,errorResetBoundary:s,throwOnError:l.throwOnError,query:c,suspense:l.suspense}))throw m.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(l,m),l.experimental_prefetchInRender&&!qi&&QM(m,r)&&(f?Qw(l,d,s):c?.promise)?.catch(Sn).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?m:d.trackResult(m)}function ys(t,e){return YM(t,rE)}function uu(t,e){const n=po(),[r]=q.useState(()=>new LM(n,t));q.useEffect(()=>{r.setOptions(t)},[r,t]);const s=q.useSyncExternalStore(q.useCallback(l=>r.subscribe(Gt.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=q.useCallback((l,c)=>{r.mutate(l,c).catch(Sn)},[r]);if(s.error&&Wy(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}const Hg=new WeakMap,JM=new WeakMap,Yf={current:[]};let Im=!1,Vl=0;const Ol=new Set,nf=new Map;function lE(t){for(const e of t){if(Yf.current.includes(e))continue;Yf.current.push(e),e.recompute();const n=JM.get(e);if(n)for(const r of n){const s=Hg.get(r);s?.length&&lE(s)}}}function XM(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function WM(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function uE(t){if(Vl>0&&!nf.has(t)&&nf.set(t,t.prevState),Ol.add(t),!(Vl>0)&&!Im)try{for(Im=!0;Ol.size>0;){const e=Array.from(Ol);Ol.clear();for(const n of e){const r=nf.get(n)??n.prevState;n.prevState=r,XM(n)}for(const n of e){const r=Hg.get(n);r&&(Yf.current.push(n),lE(r))}for(const n of e){const r=Hg.get(n);if(r)for(const s of r)WM(s)}}}finally{Im=!1,Yf.current=[],nf.clear()}}function Kl(t){Vl++;try{t()}finally{if(Vl--,Vl===0){const e=Ol.values().next().value;e&&uE(e)}}}function eN(t){return typeof t=="function"}class tN{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var s,a;this.listeners.add(r);const l=(a=(s=this.options)==null?void 0:s.onSubscribe)==null?void 0:a.call(s,r,this);return()=>{this.listeners.delete(r),l?.()}},this.prevState=e,this.state=e,this.options=n}setState(e){var n,r,s;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(e):eN(e)?this.state=e(this.prevState):this.state=e,(s=(r=this.options)==null?void 0:r.onUpdate)==null||s.call(r),uE(this)}}const ti="__TSR_index",Zw="popstate",Yw="beforeunload";function nN(t){let e=t.getLocation();const n=new Set,r=l=>{e=t.getLocation(),n.forEach(c=>c({location:e,action:l}))},s=l=>{t.notifyOnIndexChange??!0?r(l):e=t.getLocation()},a=async({task:l,navigateOpts:c,...f})=>{if(c?.ignoreBlocker??!1){l();return}const m=t.getBlockers?.()??[],p=f.type==="PUSH"||f.type==="REPLACE";if(typeof document<"u"&&m.length&&p)for(const g of m){const y=Jf(f.path,f.state);if(await g.blockerFn({currentLocation:e,nextLocation:y,action:f.type})){t.onBlocked?.();return}}l()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:l=>(n.add(l),()=>{n.delete(l)}),push:(l,c,f)=>{const d=e.state[ti];c=Jw(d+1,c),a({task:()=>{t.pushState(l,c),r({type:"PUSH"})},navigateOpts:f,type:"PUSH",path:l,state:c})},replace:(l,c,f)=>{const d=e.state[ti];c=Jw(d,c),a({task:()=>{t.replaceState(l,c),r({type:"REPLACE"})},navigateOpts:f,type:"REPLACE",path:l,state:c})},go:(l,c)=>{a({task:()=>{t.go(l),s({type:"GO",index:l})},navigateOpts:c,type:"GO"})},back:l=>{a({task:()=>{t.back(l?.ignoreBlocker??!1),s({type:"BACK"})},navigateOpts:l,type:"BACK"})},forward:l=>{a({task:()=>{t.forward(l?.ignoreBlocker??!1),s({type:"FORWARD"})},navigateOpts:l,type:"FORWARD"})},canGoBack:()=>e.state[ti]!==0,createHref:l=>t.createHref(l),block:l=>{if(!t.setBlockers)return()=>{};const c=t.getBlockers?.()??[];return t.setBlockers([...c,l]),()=>{const f=t.getBlockers?.()??[];t.setBlockers?.(f.filter(d=>d!==l))}},flush:()=>t.flush?.(),destroy:()=>t.destroy?.(),notify:r}}function Jw(t,e){e||(e={});const n=n0();return{...e,key:n,__TSR_key:n,[ti]:t}}function rN(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,r=e.history.replaceState;let s=[];const a=()=>s,l=L=>s=L,c=(L=>L),f=(()=>Jf(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state));if(!e.history.state?.__TSR_key&&!e.history.state?.key){const L=n0();e.history.replaceState({[ti]:0,key:L,__TSR_key:L},"")}let d=f(),m,p=!1,g=!1,y=!1,x=!1;const S=()=>d;let E,C;const k=()=>{E&&(z._ignoreSubscribers=!0,(E.isPush?e.history.pushState:e.history.replaceState)(E.state,"",E.href),z._ignoreSubscribers=!1,E=void 0,C=void 0,m=void 0)},R=(L,P,M)=>{const $=c(P);C||(m=d),d=Jf(P,M),E={href:$,state:M,isPush:E?.isPush||L==="push"},C||(C=Promise.resolve().then(()=>k()))},I=L=>{d=f(),z.notify({type:L})},j=async()=>{if(g){g=!1;return}const L=f(),P=L.state[ti]-d.state[ti],M=P===1,$=P===-1,G=!M&&!$||p;p=!1;const ee=G?"GO":$?"BACK":"FORWARD",te=G?{type:"GO",index:P}:{type:$?"BACK":"FORWARD"};if(y)y=!1;else{const V=a();if(typeof document<"u"&&V.length){for(const F of V)if(await F.blockerFn({currentLocation:d,nextLocation:L,action:ee})){g=!0,e.history.go(1),z.notify(te);return}}}d=f(),z.notify(te)},A=L=>{if(x){x=!1;return}let P=!1;const M=a();if(typeof document<"u"&&M.length)for(const $ of M){const G=$.enableBeforeUnload??!0;if(G===!0){P=!0;break}if(typeof G=="function"&&G()===!0){P=!0;break}}if(P)return L.preventDefault(),L.returnValue=""},z=nN({getLocation:S,getLength:()=>e.history.length,pushState:(L,P)=>R("push",L,P),replaceState:(L,P)=>R("replace",L,P),back:L=>(L&&(y=!0),x=!0,e.history.back()),forward:L=>{L&&(y=!0),x=!0,e.history.forward()},go:L=>{p=!0,e.history.go(L)},createHref:L=>c(L),flush:k,destroy:()=>{e.history.pushState=n,e.history.replaceState=r,e.removeEventListener(Yw,A,{capture:!0}),e.removeEventListener(Zw,j)},onBlocked:()=>{m&&d!==m&&(d=m)},getBlockers:a,setBlockers:l,notifyOnIndexChange:!1});return e.addEventListener(Yw,A,{capture:!0}),e.addEventListener(Zw,j),e.history.pushState=function(...L){const P=n.apply(e.history,L);return z._ignoreSubscribers||I("PUSH"),P},e.history.replaceState=function(...L){const P=r.apply(e.history,L);return z._ignoreSubscribers||I("REPLACE"),P},z}function Jf(t,e){const n=t.indexOf("#"),r=t.indexOf("?"),s=n0();return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{[ti]:0,key:s,__TSR_key:s}}}function n0(){return(Math.random()+1).toString(36).substring(7)}function Xf(t){return t[t.length-1]}function sN(t){return typeof t=="function"}function Zs(t,e){return sN(t)?t(e):t}const iN=Object.prototype.hasOwnProperty;function mr(t,e){if(t===e)return t;const n=e,r=e_(t)&&e_(n);if(!r&&!(Wf(t)&&Wf(n)))return n;const s=r?t:Xw(t);if(!s)return n;const a=r?n:Xw(n);if(!a)return n;const l=s.length,c=a.length,f=r?new Array(c):{};let d=0;for(let m=0;m<c;m++){const p=r?m:a[m],g=t[p],y=n[p];if(g===y){f[p]=g,(r?m<l:iN.call(t,p))&&d++;continue}if(g===null||y===null||typeof g!="object"||typeof y!="object"){f[p]=y;continue}const x=mr(g,y);f[p]=x,x===g&&d++}return l===c&&d===l?t:f}function Xw(t){const e=[],n=Object.getOwnPropertyNames(t);for(const s of n){if(!Object.prototype.propertyIsEnumerable.call(t,s))return!1;e.push(s)}const r=Object.getOwnPropertySymbols(t);for(const s of r){if(!Object.prototype.propertyIsEnumerable.call(t,s))return!1;e.push(s)}return e}function Wf(t){if(!Ww(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!Ww(n)||!n.hasOwnProperty("isPrototypeOf"))}function Ww(t){return Object.prototype.toString.call(t)==="[object Object]"}function e_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Pi(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let r=0,s=t.length;r<s;r++)if(!Pi(t[r],e[r],n))return!1;return!0}if(Wf(t)&&Wf(e)){const r=n?.ignoreUndefined??!0;if(n?.partial){for(const l in e)if((!r||e[l]!==void 0)&&!Pi(t[l],e[l],n))return!1;return!0}let s=0;if(!r)s=Object.keys(t).length;else for(const l in t)t[l]!==void 0&&s++;let a=0;for(const l in e)if((!r||e[l]!==void 0)&&(a++,a>s||!Pi(t[l],e[l],n)))return!1;return s===a}return!1}function oo(t){let e,n;const r=new Promise((s,a)=>{e=s,n=a});return r.status="pending",r.resolve=s=>{r.status="resolved",r.value=s,e(s),t?.(s)},r.reject=s=>{r.status="rejected",n(s)},r}function ni(t){return!!(t&&typeof t=="object"&&typeof t.then=="function")}function t_(t){try{return decodeURI(t)}catch{return t.replaceAll(/%[0-9A-F]{2}/gi,e=>{try{return decodeURI(e)}catch{return e}})}}function n_(t,e){if(!t)return t;const n=/%25|%5C/gi;let r=0,s="",a;for(;(a=n.exec(t))!==null;)s+=t_(t.slice(r,a.index))+a[0],r=n.lastIndex;return s+t_(r?t.slice(r):t)}var aN="Invariant failed";function vs(t,e){if(!t)throw new Error(aN)}function ed(t){const e=new Map;let n,r;const s=a=>{a.next&&(a.prev?(a.prev.next=a.next,a.next.prev=a.prev,a.next=void 0,r&&(r.next=a,a.prev=r)):(a.next.prev=void 0,n=a.next,a.next=void 0,r&&(a.prev=r,r.next=a)),r=a)};return{get(a){const l=e.get(a);if(l)return s(l),l.value},set(a,l){if(e.size>=t&&n){const f=n;e.delete(f.key),f.next&&(n=f.next,f.next.prev=void 0),f===r&&(r=void 0)}const c=e.get(a);if(c)c.value=l,s(c);else{const f={key:a,value:l,prev:r};r&&(r.next=f),r=f,n||(n=f),e.set(a,f)}},clear(){e.clear(),n=void 0,r=void 0}}}const lo=0,Hi=1,Vi=2,cu=3,Ya=4,oN=/^([^{]*)\{\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,lN=/^([^{]*)\{-\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,uN=/^([^{]*)\{\$\}([^}]*)$/;function r0(t,e,n=new Uint16Array(6)){const r=t.indexOf("/",e),s=r===-1?t.length:r,a=t.substring(e,s);if(!a||!a.includes("$"))return n[0]=lo,n[1]=e,n[2]=e,n[3]=s,n[4]=s,n[5]=s,n;if(a==="$"){const d=t.length;return n[0]=Vi,n[1]=e,n[2]=e,n[3]=d,n[4]=d,n[5]=d,n}if(a.charCodeAt(0)===36)return n[0]=Hi,n[1]=e,n[2]=e+1,n[3]=s,n[4]=s,n[5]=s,n;const l=a.match(uN);if(l){const m=l[1].length;return n[0]=Vi,n[1]=e+m,n[2]=e+m+1,n[3]=e+m+2,n[4]=e+m+3,n[5]=t.length,n}const c=a.match(lN);if(c){const d=c[1],m=c[2],p=c[3],g=d.length;return n[0]=cu,n[1]=e+g,n[2]=e+g+3,n[3]=e+g+3+m.length,n[4]=s-p.length,n[5]=s,n}const f=a.match(oN);if(f){const d=f[1],m=f[2],p=f[3],g=d.length;return n[0]=Hi,n[1]=e+g,n[2]=e+g+2,n[3]=e+g+2+m.length,n[4]=s-p.length,n[5]=s,n}return n[0]=lo,n[1]=e,n[2]=e,n[3]=s,n[4]=s,n[5]=s,n}function zd(t,e,n,r,s,a,l){l?.(n);let c=r;{const f=n.fullPath??n.from,d=f.length,m=n.options?.caseSensitive??t;for(;c<d;){const g=r0(f,c,e);let y;const x=c,S=g[5];switch(c=S+1,a++,g[0]){case lo:{const C=f.substring(g[2],g[3]);if(m){const k=s.static?.get(C);if(k)y=k;else{s.static??=new Map;const R=no(n.fullPath??n.from);R.parent=s,R.depth=a,y=R,s.static.set(C,R)}}else{const k=C.toLowerCase(),R=s.staticInsensitive?.get(k);if(R)y=R;else{s.staticInsensitive??=new Map;const I=no(n.fullPath??n.from);I.parent=s,I.depth=a,y=I,s.staticInsensitive.set(k,I)}}break}case Hi:{const C=f.substring(x,g[1]),k=f.substring(g[4],S),R=m&&!!(C||k),I=C?R?C:C.toLowerCase():void 0,j=k?R?k:k.toLowerCase():void 0,A=s.dynamic?.find(z=>z.caseSensitive===R&&z.prefix===I&&z.suffix===j);if(A)y=A;else{const z=zm(Hi,n.fullPath??n.from,R,I,j);y=z,z.depth=a,z.parent=s,s.dynamic??=[],s.dynamic.push(z)}break}case cu:{const C=f.substring(x,g[1]),k=f.substring(g[4],S),R=m&&!!(C||k),I=C?R?C:C.toLowerCase():void 0,j=k?R?k:k.toLowerCase():void 0,A=s.optional?.find(z=>z.caseSensitive===R&&z.prefix===I&&z.suffix===j);if(A)y=A;else{const z=zm(cu,n.fullPath??n.from,R,I,j);y=z,z.parent=s,z.depth=a,s.optional??=[],s.optional.push(z)}break}case Vi:{const C=f.substring(x,g[1]),k=f.substring(g[4],S),R=m&&!!(C||k),I=C?R?C:C.toLowerCase():void 0,j=k?R?k:k.toLowerCase():void 0,A=zm(Vi,n.fullPath??n.from,R,I,j);y=A,A.parent=s,A.depth=a,s.wildcard??=[],s.wildcard.push(A)}}s=y}const p=(n.path||!n.children)&&!n.isRoot;if(p&&f.endsWith("/")){const g=no(n.fullPath??n.from);g.kind=Ya,g.parent=s,a++,g.depth=a,s.index=g,s=g}p&&!s.route&&(s.route=n,s.fullPath=n.fullPath??n.from)}if(n.children)for(const f of n.children)zd(t,e,f,c,s,a,l)}function Dm(t,e){if(t.prefix&&e.prefix&&t.prefix!==e.prefix){if(t.prefix.startsWith(e.prefix))return-1;if(e.prefix.startsWith(t.prefix))return 1}if(t.suffix&&e.suffix&&t.suffix!==e.suffix){if(t.suffix.endsWith(e.suffix))return-1;if(e.suffix.endsWith(t.suffix))return 1}return t.prefix&&!e.prefix?-1:!t.prefix&&e.prefix?1:t.suffix&&!e.suffix?-1:!t.suffix&&e.suffix?1:t.caseSensitive&&!e.caseSensitive?-1:!t.caseSensitive&&e.caseSensitive?1:0}function Ii(t){if(t.static)for(const e of t.static.values())Ii(e);if(t.staticInsensitive)for(const e of t.staticInsensitive.values())Ii(e);if(t.dynamic?.length){t.dynamic.sort(Dm);for(const e of t.dynamic)Ii(e)}if(t.optional?.length){t.optional.sort(Dm);for(const e of t.optional)Ii(e)}if(t.wildcard?.length){t.wildcard.sort(Dm);for(const e of t.wildcard)Ii(e)}}function no(t){return{kind:lo,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null}}function zm(t,e,n,r,s){return{kind:t,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null,caseSensitive:n,prefix:r,suffix:s}}function cN(t,e){const n=no("/"),r=new Uint16Array(6);for(const s of t)zd(!1,r,s,1,n,0);Ii(n),e.masksTree=n,e.flatCache=ed(1e3)}function fN(t,e){t||="/";const n=e.flatCache.get(t);if(n)return n;const r=s0(t,e.masksTree);return e.flatCache.set(t,r),r}function dN(t,e,n,r,s){t||="/",r||="/";const a=e?`case\0${t}`:t;let l=s.singleCache.get(a);if(!l){l=no("/");const c=new Uint16Array(6);zd(e,c,{from:t},1,l,0),s.singleCache.set(a,l)}return s0(r,l,n)}function hN(t,e,n=!1){const r=n?t:`nofuzz\0${t}`,s=e.matchCache.get(r);if(s!==void 0)return s;t||="/";const a=s0(t,e.segmentTree,n);return a&&(a.branch=yN(a.route)),e.matchCache.set(r,a),a}function pN(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function mN(t,e=!1,n){const r=no(t.fullPath),s=new Uint16Array(6),a={},l={};let c=0;return zd(e,s,t,1,r,0,d=>{if(n?.(d,c),vs(!(d.id in a),`Duplicate routes found with id: ${String(d.id)}`),a[d.id]=d,c!==0&&d.path){const m=pN(d.fullPath);(!l[m]||d.fullPath.endsWith("/"))&&(l[m]=d)}c++}),Ii(r),{processedTree:{segmentTree:r,singleCache:ed(1e3),matchCache:ed(1e3),flatCache:null,masksTree:null},routesById:a,routesByPath:l}}function s0(t,e,n=!1){const r=t.split("/"),s=bN(t,r,e,n);if(!s)return null;const a=gN(t,r,s);return"**"in s&&(a["**"]=s["**"]),{route:s.node.route,params:a}}function gN(t,e,n){const r=vN(n.node);let s=null;const a={};for(let l=0,c=0,f=0;c<r.length;l++,c++,f++){const d=r[c],m=e[l],p=f;if(m&&(f+=m.length),d.kind===Hi){s??=n.node.fullPath.split("/");const g=s[c],y=d.prefix?.length??0;if(g.charCodeAt(y)===123){const S=d.suffix?.length??0,E=g.substring(y+2,g.length-S-1),C=m.substring(y,m.length-S);a[E]=decodeURIComponent(C)}else{const S=g.substring(1);a[S]=decodeURIComponent(m)}}else if(d.kind===cu){if(n.skipped&1<<c){l--;continue}s??=n.node.fullPath.split("/");const g=s[c],y=d.prefix?.length??0,x=d.suffix?.length??0,S=g.substring(y+3,g.length-x-1),E=d.suffix||d.prefix?m.substring(y,m.length-x):m;E&&(a[S]=decodeURIComponent(E))}else if(d.kind===Vi){const g=d,y=t.substring(p+(g.prefix?.length??0),t.length-(g.suffix?.length??0)),x=decodeURIComponent(y);a["*"]=x,a._splat=x;break}}return a}function yN(t){const e=[t];for(;t.parentRoute;)t=t.parentRoute,e.push(t);return e.reverse(),e}function vN(t){const e=Array(t.depth+1);do e[t.depth]=t,t=t.parent;while(t);return e}function bN(t,e,n,r){if(t==="/"&&n.index)return{node:n.index,skipped:0};const s=!Xf(e),a=s&&t!=="/",l=e.length-(s?1:0),c=[{node:n,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let f=null,d=null,m=null;for(;c.length;){const p=c.pop();let{node:g,index:y,skipped:x,depth:S,statics:E,dynamics:C,optionals:k}=p;r&&g.route&&g.kind!==Ya&&bl(d,p)&&(d=p);const R=y===l;if(R&&(g.route&&!a&&bl(m,p)&&(m=p),!g.optional&&!g.wildcard&&!g.index))continue;const I=R?void 0:e[y];let j;if(R&&g.index){const A={node:g.index,index:y,skipped:x,depth:S+1,statics:E,dynamics:C,optionals:k};if(E===l&&!C&&!k&&!x)return A;bl(m,A)&&(m=A)}if(g.wildcard&&bl(f,p))for(const A of g.wildcard){const{prefix:z,suffix:L}=A;if(!(z&&(R||!(A.caseSensitive?I:j??=I.toLowerCase()).startsWith(z)))){if(L){if(R)continue;const P=e.slice(y).join("/").slice(-L.length);if((A.caseSensitive?P:P.toLowerCase())!==L)continue}f={node:A,index:l,skipped:x,depth:S,statics:E,dynamics:C,optionals:k};break}}if(g.optional){const A=x|1<<S,z=S+1;for(let L=g.optional.length-1;L>=0;L--){const P=g.optional[L];c.push({node:P,index:y,skipped:A,depth:z,statics:E,dynamics:C,optionals:k})}if(!R)for(let L=g.optional.length-1;L>=0;L--){const P=g.optional[L],{prefix:M,suffix:$}=P;if(M||$){const G=P.caseSensitive?I:j??=I.toLowerCase();if(M&&!G.startsWith(M)||$&&!G.endsWith($))continue}c.push({node:P,index:y+1,skipped:x,depth:z,statics:E,dynamics:C,optionals:k+1})}}if(!R&&g.dynamic&&I)for(let A=g.dynamic.length-1;A>=0;A--){const z=g.dynamic[A],{prefix:L,suffix:P}=z;if(L||P){const M=z.caseSensitive?I:j??=I.toLowerCase();if(L&&!M.startsWith(L)||P&&!M.endsWith(P))continue}c.push({node:z,index:y+1,skipped:x,depth:S+1,statics:E,dynamics:C+1,optionals:k})}if(!R&&g.staticInsensitive){const A=g.staticInsensitive.get(j??=I.toLowerCase());A&&c.push({node:A,index:y+1,skipped:x,depth:S+1,statics:E+1,dynamics:C,optionals:k})}if(!R&&g.static){const A=g.static.get(I);A&&c.push({node:A,index:y+1,skipped:x,depth:S+1,statics:E+1,dynamics:C,optionals:k})}}if(m&&f)return bl(f,m)?m:f;if(m)return m;if(f)return f;if(r&&d){let p=d.index;for(let y=0;y<d.index;y++)p+=e[y].length;const g=p===t.length?"/":t.slice(p);return{node:d.node,skipped:d.skipped,"**":decodeURIComponent(g)}}return null}function bl(t,e){return t?e.statics>t.statics||e.statics===t.statics&&(e.dynamics>t.dynamics||e.dynamics===t.dynamics&&(e.optionals>t.optionals||e.optionals===t.optionals&&((e.node.kind===Ya)>(t.node.kind===Ya)||e.node.kind===Ya==(t.node.kind===Ya)&&e.depth>t.depth))):!0}function Nf(t){return i0(t.filter(e=>e!==void 0).join("/"))}function i0(t){return t.replace(/\/{2,}/g,"/")}function cE(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function Fi(t){const e=t.length;return e>1&&t[e-1]==="/"?t.replace(/\/{1,}$/,""):t}function fE(t){return Fi(cE(t))}function td(t,e){return t?.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function xN(t,e,n){return td(t,n)===td(e,n)}function SN({base:t,to:e,trailingSlash:n="never",cache:r}){const s=e.startsWith("/"),a=!s&&e===".";let l;if(r){l=s?e:a?t:t+"\0"+e;const p=r.get(l);if(p)return p}let c;if(a)c=t.split("/");else if(s)c=e.split("/");else{for(c=t.split("/");c.length>1&&Xf(c)==="";)c.pop();const p=e.split("/");for(let g=0,y=p.length;g<y;g++){const x=p[g];x===""?g?g===y-1&&c.push(x):c=[x]:x===".."?c.pop():x==="."||c.push(x)}}c.length>1&&(Xf(c)===""?n==="never"&&c.pop():n==="always"&&c.push(""));let f,d="";for(let p=0;p<c.length;p++){p>0&&(d+="/");const g=c[p];if(!g)continue;f=r0(g,0,f);const y=f[0];if(y===lo){d+=g;continue}const x=f[5],S=g.substring(0,f[1]),E=g.substring(f[4],x),C=g.substring(f[2],f[3]);y===Hi?d+=S||E?`${S}{$${C}}${E}`:`$${C}`:y===Vi?d+=S||E?`${S}{$}${E}`:"$":d+=`${S}{-$${C}}${E}`}d=i0(d);const m=d||"/";return l&&r&&r.set(l,m),m}function jm(t,e,n){const r=e[t];return typeof r!="string"?r:t==="_splat"?encodeURI(r):wN(r,n)}function Lm({path:t,params:e,decodeCharMap:n}){let r=!1;const s={};if(!t||t==="/")return{interpolatedPath:"/",usedParams:s,isMissingParams:r};if(!t.includes("$"))return{interpolatedPath:t,usedParams:s,isMissingParams:r};const a=t.length;let l=0,c,f="";for(;l<a;){const m=l;c=r0(t,m,c);const p=c[5];if(l=p+1,m===p)continue;const g=c[0];if(g===lo){f+="/"+t.substring(m,p);continue}if(g===Vi){const y=e._splat;s._splat=y,s["*"]=y;const x=t.substring(m,c[1]),S=t.substring(c[4],p);if(!y){r=!0,(x||S)&&(f+="/"+x+S);continue}const E=jm("_splat",e,n);f+="/"+x+E+S;continue}if(g===Hi){const y=t.substring(c[2],c[3]);!r&&!(y in e)&&(r=!0),s[y]=e[y];const x=t.substring(m,c[1]),S=t.substring(c[4],p),E=jm(y,e,n)??"undefined";f+="/"+x+E+S;continue}if(g===cu){const y=t.substring(c[2],c[3]),x=e[y];if(x==null)continue;s[y]=x;const S=t.substring(m,c[1]),E=t.substring(c[4],p),C=jm(y,e,n)??"";f+="/"+S+C+E;continue}}return t.endsWith("/")&&(f+="/"),{usedParams:s,interpolatedPath:f||"/",isMissingParams:r}}function wN(t,e){let n=encodeURIComponent(t);if(e)for(const[r,s]of e)n=n.replaceAll(r,s);return n}function Wn(t){return!!t?.isNotFound}function _N(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const nd="tsr-scroll-restoration-v1_3",CN=(t,e)=>{let n;return(...r)=>{n||(n=setTimeout(()=>{t(...r),n=null},e))}};function EN(){const t=_N();if(!t)return null;const e=t.getItem(nd);let n=e?JSON.parse(e):{};return{state:n,set:r=>(n=Zs(r,n)||n,t.setItem(nd,JSON.stringify(n)))}}const rf=EN(),Vg=t=>t.state.__TSR_key||t.href;function kN(t){const e=[];let n;for(;n=t.parentNode;)e.push(`${t.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,t)+1})`),t=n;return`${e.reverse().join(" > ")}`.toLowerCase()}let rd=!1;function dE({storageKey:t,key:e,behavior:n,shouldScrollRestoration:r,scrollToTopSelectors:s,location:a}){let l;try{l=JSON.parse(sessionStorage.getItem(t)||"{}")}catch(d){console.error(d);return}const c=e||window.history.state?.__TSR_key,f=l[c];rd=!0;e:{if(r&&f&&Object.keys(f).length>0){for(const p in f){const g=f[p];if(p==="window")window.scrollTo({top:g.scrollY,left:g.scrollX,behavior:n});else if(p){const y=document.querySelector(p);y&&(y.scrollLeft=g.scrollX,y.scrollTop=g.scrollY)}}break e}const d=(a??window.location).hash.split("#",2)[1];if(d){const p=window.history.state?.__hashScrollIntoViewOptions??!0;if(p){const g=document.getElementById(d);g&&g.scrollIntoView(p)}break e}const m={top:0,left:0,behavior:n};if(window.scrollTo(m),s)for(const p of s){if(p==="window")continue;const g=typeof p=="function"?p():document.querySelector(p);g&&g.scrollTo(m)}}rd=!1}function RN(t,e){if(!rf&&!t.isServer||((t.options.scrollRestoration??!1)&&(t.isScrollRestoring=!0),t.isServer||t.isScrollRestorationSetup||!rf))return;t.isScrollRestorationSetup=!0,rd=!1;const r=t.options.getScrollRestorationKey||Vg;window.history.scrollRestoration="manual";const s=a=>{if(rd||!t.isScrollRestoring)return;let l="";if(a.target===document||a.target===window)l="window";else{const f=a.target.getAttribute("data-scroll-restoration-id");f?l=`[data-scroll-restoration-id="${f}"]`:l=kN(a.target)}const c=r(t.state.location);rf.set(f=>{const d=f[c]||={},m=d[l]||={};if(l==="window")m.scrollX=window.scrollX||0,m.scrollY=window.scrollY||0;else if(l){const p=document.querySelector(l);p&&(m.scrollX=p.scrollLeft||0,m.scrollY=p.scrollTop||0)}return f})};typeof document<"u"&&document.addEventListener("scroll",CN(s,100),!0),t.subscribe("onRendered",a=>{const l=r(a.toLocation);if(!t.resetNextScroll){t.resetNextScroll=!0;return}typeof t.options.scrollRestoration=="function"&&!t.options.scrollRestoration({location:t.latestLocation})||(dE({storageKey:nd,key:l,behavior:t.options.scrollRestorationBehavior,shouldScrollRestoration:t.isScrollRestoring,scrollToTopSelectors:t.options.scrollToTopSelectors,location:t.history.location}),t.isScrollRestoring&&rf.set(c=>(c[l]||={},c)))})}function AN(t){if(typeof document<"u"&&document.querySelector){const e=t.state.location.state.__hashScrollIntoViewOptions??!0;if(e&&t.state.location.hash!==""){const n=document.getElementById(t.state.location.hash);n&&n.scrollIntoView(e)}}}function TN(t,e=String){const n=new URLSearchParams;for(const r in t){const s=t[r];s!==void 0&&n.set(r,e(s))}return n.toString()}function Pm(t){return t?t==="false"?!1:t==="true"?!0:+t*0===0&&+t+""===t?+t:t:""}function ON(t){const e=new URLSearchParams(t),n={};for(const[r,s]of e.entries()){const a=n[r];a==null?n[r]=Pm(s):Array.isArray(a)?a.push(Pm(s)):n[r]=[a,Pm(s)]}return n}const MN=IN(JSON.parse),NN=DN(JSON.stringify,JSON.parse);function IN(t){return e=>{e[0]==="?"&&(e=e.substring(1));const n=ON(e);for(const r in n){const s=n[r];if(typeof s=="string")try{n[r]=t(s)}catch{}}return n}}function DN(t,e){const n=typeof e=="function";function r(s){if(typeof s=="object"&&s!==null)try{return t(s)}catch{}else if(n&&typeof s=="string")try{return e(s),t(s)}catch{}return s}return s=>{const a=TN(s,r);return a?`?${a}`:""}}const Jn="__root__";function zN(t){if(t.statusCode=t.statusCode||t.code||307,!t.reloadDocument&&typeof t.href=="string")try{new URL(t.href),t.reloadDocument=!0}catch{}const e=new Headers(t.headers);t.href&&e.get("Location")===null&&e.set("Location",t.href);const n=new Response(null,{status:t.statusCode,headers:e});if(n.options=t,t.throw)throw n;return n}function br(t){return t instanceof Response&&!!t.options}const If=t=>{if(!t.rendered)return t.rendered=!0,t.onReady?.()},jd=(t,e)=>!!(t.preload&&!t.router.state.matches.some(n=>n.id===e)),a0=(t,e,n=!0)=>{const r={...t.router.options.context??{}},s=n?e:e-1;for(let a=0;a<=s;a++){const l=t.matches[a];if(!l)continue;const c=t.router.getMatch(l.id);c&&Object.assign(r,c.__routeContext,c.__beforeLoadContext)}return r},hE=(t,e)=>{const n=t.router.routesById[e.routeId??""]??t.router.routeTree;!n.options.notFoundComponent&&t.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=t.router.options.defaultNotFoundComponent),vs(n.options.notFoundComponent);const r=t.matches.find(s=>s.routeId===n.id);vs(r,"Could not find match for route: "+n.id),t.updateMatch(r.id,s=>({...s,status:"notFound",error:e,isFetching:!1})),e.routerCode==="BEFORE_LOAD"&&n.parentRoute&&(e.routeId=n.parentRoute.id,hE(t,e))},Ys=(t,e,n)=>{if(!(!br(n)&&!Wn(n))){if(br(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(e){e._nonReactive.beforeLoadPromise?.resolve(),e._nonReactive.loaderPromise?.resolve(),e._nonReactive.beforeLoadPromise=void 0,e._nonReactive.loaderPromise=void 0;const r=br(n)?"redirected":"notFound";e._nonReactive.error=n,t.updateMatch(e.id,s=>({...s,status:r,isFetching:!1,error:n})),Wn(n)&&!n.routeId&&(n.routeId=e.routeId),e._nonReactive.loadPromise?.resolve()}throw br(n)?(t.rendered=!0,n.options._fromLocation=t.location,n.redirectHandled=!0,n=t.router.resolveRedirect(n),n):(hE(t,n),n)}},pE=(t,e)=>{const n=t.router.getMatch(e);return!!(!t.router.isServer&&n._nonReactive.dehydrated||t.router.isServer&&n.ssr===!1)},xl=(t,e,n,r)=>{const{id:s,routeId:a}=t.matches[e],l=t.router.looseRoutesById[a];if(n instanceof Promise)throw n;n.routerCode=r,t.firstBadMatchIndex??=e,Ys(t,t.router.getMatch(s),n);try{l.options.onError?.(n)}catch(c){n=c,Ys(t,t.router.getMatch(s),n)}t.updateMatch(s,c=>(c._nonReactive.beforeLoadPromise?.resolve(),c._nonReactive.beforeLoadPromise=void 0,c._nonReactive.loadPromise?.resolve(),{...c,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},jN=(t,e,n,r)=>{const s=t.router.getMatch(e),a=t.matches[n-1]?.id,l=a?t.router.getMatch(a):void 0;if(t.router.isShell()){s.ssr=r.id===Jn;return}if(l?.ssr===!1){s.ssr=!1;return}const c=y=>y===!0&&l?.ssr==="data-only"?"data-only":y,f=t.router.options.defaultSsr??!0;if(r.options.ssr===void 0){s.ssr=c(f);return}if(typeof r.options.ssr!="function"){s.ssr=c(r.options.ssr);return}const{search:d,params:m}=s,p={search:sf(d,s.searchError),params:sf(m,s.paramsError),location:t.location,matches:t.matches.map(y=>({index:y.index,pathname:y.pathname,fullPath:y.fullPath,staticData:y.staticData,id:y.id,routeId:y.routeId,search:sf(y.search,y.searchError),params:sf(y.params,y.paramsError),ssr:y.ssr}))},g=r.options.ssr(p);if(ni(g))return g.then(y=>{s.ssr=c(y??f)});s.ssr=c(g??f)},mE=(t,e,n,r)=>{if(r._nonReactive.pendingTimeout!==void 0)return;const s=n.options.pendingMs??t.router.options.defaultPendingMs;if(!!(t.onReady&&!t.router.isServer&&!jd(t,e)&&(n.options.loader||n.options.beforeLoad||vE(n))&&typeof s=="number"&&s!==1/0&&(n.options.pendingComponent??t.router.options?.defaultPendingComponent))){const l=setTimeout(()=>{If(t)},s);r._nonReactive.pendingTimeout=l}},LN=(t,e,n)=>{const r=t.router.getMatch(e);if(!r._nonReactive.beforeLoadPromise&&!r._nonReactive.loaderPromise)return;mE(t,e,n,r);const s=()=>{const a=t.router.getMatch(e);a.preload&&(a.status==="redirected"||a.status==="notFound")&&Ys(t,a,a.error)};return r._nonReactive.beforeLoadPromise?r._nonReactive.beforeLoadPromise.then(s):s()},PN=(t,e,n,r)=>{const s=t.router.getMatch(e),a=s._nonReactive.loadPromise;s._nonReactive.loadPromise=oo(()=>{a?.resolve()});const{paramsError:l,searchError:c}=s;l&&xl(t,n,l,"PARSE_PARAMS"),c&&xl(t,n,c,"VALIDATE_SEARCH"),mE(t,e,r,s);const f=new AbortController,d=t.matches[n-1]?.id;(d?t.router.getMatch(d):void 0)?.context??t.router.options.context;let p=!1;const g=()=>{p||(p=!0,t.updateMatch(e,A=>({...A,isFetching:"beforeLoad",fetchCount:A.fetchCount+1,abortController:f})))},y=()=>{s._nonReactive.beforeLoadPromise?.resolve(),s._nonReactive.beforeLoadPromise=void 0,t.updateMatch(e,A=>({...A,isFetching:!1}))};if(!r.options.beforeLoad){Kl(()=>{g(),y()});return}s._nonReactive.beforeLoadPromise=oo();const x={...a0(t,n,!1),...s.__routeContext},{search:S,params:E,cause:C}=s,k=jd(t,e),R={search:S,abortController:f,params:E,preload:k,context:x,location:t.location,navigate:A=>t.router.navigate({...A,_fromLocation:t.location}),buildLocation:t.router.buildLocation,cause:k?"preload":C,matches:t.matches,...t.router.options.additionalContext},I=A=>{if(A===void 0){Kl(()=>{g(),y()});return}(br(A)||Wn(A))&&(g(),xl(t,n,A,"BEFORE_LOAD")),Kl(()=>{g(),t.updateMatch(e,z=>({...z,__beforeLoadContext:A})),y()})};let j;try{if(j=r.options.beforeLoad(R),ni(j))return g(),j.catch(A=>{xl(t,n,A,"BEFORE_LOAD")}).then(I)}catch(A){g(),xl(t,n,A,"BEFORE_LOAD")}I(j)},FN=(t,e)=>{const{id:n,routeId:r}=t.matches[e],s=t.router.looseRoutesById[r],a=()=>{if(t.router.isServer){const f=jN(t,n,e,s);if(ni(f))return f.then(c)}return c()},l=()=>PN(t,n,e,s),c=()=>{if(pE(t,n))return;const f=LN(t,n,s);return ni(f)?f.then(l):l()};return a()},$N=(t,e,n)=>{const r=t.router.getMatch(e);if(!r||!n.options.head&&!n.options.scripts&&!n.options.headers)return;const s={matches:t.matches,match:r,params:r.params,loaderData:r.loaderData};return Promise.all([n.options.head?.(s),n.options.scripts?.(s),n.options.headers?.(s)]).then(([a,l,c])=>{const f=a?.meta,d=a?.links,m=a?.scripts,p=a?.styles;return{meta:f,links:d,headScripts:m,headers:c,scripts:l,styles:p}})},gE=(t,e,n,r)=>{const s=t.matchPromises[n-1],{params:a,loaderDeps:l,abortController:c,cause:f}=t.router.getMatch(e),d=a0(t,n),m=jd(t,e);return{params:a,deps:l,preload:!!m,parentMatchPromise:s,abortController:c,context:d,location:t.location,navigate:p=>t.router.navigate({...p,_fromLocation:t.location}),cause:m?"preload":f,route:r,...t.router.options.additionalContext}},r_=async(t,e,n,r)=>{try{const s=t.router.getMatch(e);try{(!t.router.isServer||s.ssr===!0)&&yE(r);const a=r.options.loader?.(gE(t,e,n,r)),l=r.options.loader&&ni(a);if((l||r._lazyPromise||r._componentsPromise||r.options.head||r.options.scripts||r.options.headers||s._nonReactive.minPendingPromise)&&t.updateMatch(e,d=>({...d,isFetching:"loader"})),r.options.loader){const d=l?await a:a;Ys(t,t.router.getMatch(e),d),d!==void 0&&t.updateMatch(e,m=>({...m,loaderData:d}))}r._lazyPromise&&await r._lazyPromise;const f=s._nonReactive.minPendingPromise;f&&await f,r._componentsPromise&&await r._componentsPromise,t.updateMatch(e,d=>({...d,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(a){let l=a;const c=s._nonReactive.minPendingPromise;c&&await c,Wn(a)&&await r.options.notFoundComponent?.preload?.(),Ys(t,t.router.getMatch(e),a);try{r.options.onError?.(a)}catch(f){l=f,Ys(t,t.router.getMatch(e),f)}t.updateMatch(e,f=>({...f,error:l,status:"error",isFetching:!1}))}}catch(s){const a=t.router.getMatch(e);a&&(a._nonReactive.loaderPromise=void 0),Ys(t,a,s)}},BN=async(t,e)=>{const{id:n,routeId:r}=t.matches[e];let s=!1,a=!1;const l=t.router.looseRoutesById[r],c=()=>{t.updateMatch(n,m=>({...m,context:a0(t,e)}))};if(pE(t,n)){if(t.router.isServer)return t.router.getMatch(n)}else{const m=t.router.getMatch(n);if(m._nonReactive.loaderPromise){if(m.status==="success"&&!t.sync&&!m.preload)return m;await m._nonReactive.loaderPromise;const p=t.router.getMatch(n),g=p._nonReactive.error||p.error;g&&Ys(t,p,g)}else{const p=Date.now()-m.updatedAt,g=jd(t,n),y=g?l.options.preloadStaleTime??t.router.options.defaultPreloadStaleTime??3e4:l.options.staleTime??t.router.options.defaultStaleTime??0,x=l.options.shouldReload,S=typeof x=="function"?x(gE(t,n,e,l)):x,E=!!g&&!t.router.state.matches.some(I=>I.id===n),C=t.router.getMatch(n);C._nonReactive.loaderPromise=oo(),E!==C.preload&&t.updateMatch(n,I=>({...I,preload:E}));const{status:k,invalid:R}=C;s=k==="success"&&(R||(S??p>y)),g&&l.options.preload===!1||(s&&!t.sync?(a=!0,(async()=>{try{await r_(t,n,e,l),c();const I=t.router.getMatch(n);I._nonReactive.loaderPromise?.resolve(),I._nonReactive.loadPromise?.resolve(),I._nonReactive.loaderPromise=void 0}catch(I){br(I)&&await t.router.navigate(I.options)}})()):(k!=="success"||s&&t.sync)&&await r_(t,n,e,l))}}const f=t.router.getMatch(n);a||(f._nonReactive.loaderPromise?.resolve(),f._nonReactive.loadPromise?.resolve()),clearTimeout(f._nonReactive.pendingTimeout),f._nonReactive.pendingTimeout=void 0,a||(f._nonReactive.loaderPromise=void 0),f._nonReactive.dehydrated=void 0,a||c();const d=a?f.isFetching:!1;return d!==f.isFetching||f.invalid!==!1?(t.updateMatch(n,m=>({...m,isFetching:d,invalid:!1})),t.router.getMatch(n)):f};async function s_(t){const e=Object.assign(t,{matchPromises:[]});!e.router.isServer&&e.router.state.matches.some(n=>n._forcePending)&&If(e);try{for(let c=0;c<e.matches.length;c++){const f=FN(e,c);ni(f)&&await f}const n=e.firstBadMatchIndex??e.matches.length;for(let c=0;c<n;c++)e.matchPromises.push(BN(e,c));const s=(await Promise.allSettled(e.matchPromises)).filter(c=>c.status==="rejected").map(c=>c.reason);let a;for(const c of s){if(br(c))throw c;!a&&Wn(c)&&(a=c)}for(const c of e.matches){const{id:f,routeId:d}=c,m=e.router.looseRoutesById[d];try{const p=$N(e,f,m);if(p){const g=await p;e.updateMatch(f,y=>({...y,...g}))}}catch(p){console.error(`Error executing head for route ${d}:`,p)}}if(a)throw a;const l=If(e);ni(l)&&await l}catch(n){if(Wn(n)&&!e.preload){const r=If(e);throw ni(r)&&await r,n}if(br(n))throw n}return e.matches}async function yE(t){if(!t._lazyLoaded&&t._lazyPromise===void 0&&(t.lazyFn?t._lazyPromise=t.lazyFn().then(e=>{const{id:n,...r}=e.options;Object.assign(t.options,r),t._lazyLoaded=!0,t._lazyPromise=void 0}):t._lazyLoaded=!0),!t._componentsLoaded&&t._componentsPromise===void 0){const e=()=>{const n=[];for(const r of bE){const s=t.options[r]?.preload;s&&n.push(s())}if(n.length)return Promise.all(n).then(()=>{t._componentsLoaded=!0,t._componentsPromise=void 0});t._componentsLoaded=!0,t._componentsPromise=void 0};t._componentsPromise=t._lazyPromise?t._lazyPromise.then(e):e()}return t._componentsPromise}function sf(t,e){return e?{status:"error",error:e}:{status:"success",value:t}}function vE(t){for(const e of bE)if(t.options[e]?.preload)return!0;return!1}const bE=["component","errorComponent","pendingComponent","notFoundComponent"];function UN(t){return{input:({url:e})=>{for(const n of t)e=xE(n,e);return e},output:({url:e})=>{for(let n=t.length-1;n>=0;n--)e=SE(t[n],e);return e}}}function qN(t){const e=fE(t.basepath),n=`/${e}`,r=`${n}/`,s=t.caseSensitive?n:n.toLowerCase(),a=t.caseSensitive?r:r.toLowerCase();return{input:({url:l})=>{const c=t.caseSensitive?l.pathname:l.pathname.toLowerCase();return c===s?l.pathname="/":c.startsWith(a)&&(l.pathname=l.pathname.slice(n.length)),l},output:({url:l})=>(l.pathname=Nf(["/",e,l.pathname]),l)}}function xE(t,e){const n=t?.input?.({url:e});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return e}function SE(t,e){const n=t?.output?.({url:e});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return e}function $i(t){const e=t.resolvedLocation,n=t.location,r=e?.pathname!==n.pathname,s=e?.href!==n.href,a=e?.hash!==n.hash;return{fromLocation:e,toLocation:n,pathChanged:r,hrefChanged:s,hashChanged:a}}class HN{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=n=>n(),this.update=n=>{n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const r=this.options,s=this.basepath??r?.basepath??"/",a=this.basepath===void 0,l=r?.rewrite;this.options={...r,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(g=>[encodeURIComponent(g),g])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=rN())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new tN(KN(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(g=>!["redirected"].includes(g.status))}}}),RN(this));let c=!1;const f=this.options.basepath??"/",d=this.options.rewrite;if(a||s!==f||l!==d){this.basepath=f;const g=[];fE(f)!==""&&g.push(qN({basepath:f})),d&&g.push(d),this.rewrite=g.length===0?void 0:g.length===1?g[0]:UN(g),this.history&&this.updateLatestLocation(),c=!0}c&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:n,routesByPath:r,processedTree:s}=mN(this.routeTree,this.options.caseSensitive,(l,c)=>{l.init({originalIndex:c})});this.options.routeMasks&&cN(this.options.routeMasks,s),this.routesById=n,this.routesByPath=r,this.processedTree=s;const a=this.options.notFoundRoute;a&&(a.init({originalIndex:99999999999}),this.routesById[a.id]=a)},this.subscribe=(n,r)=>{const s={eventType:n,fn:r};return this.subscribers.add(s),()=>{this.subscribers.delete(s)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const s=({href:f,state:d})=>{const m=new URL(f,this.origin),p=xE(this.rewrite,m),g=this.options.parseSearch(p.search),y=this.options.stringifySearch(g);return p.search=y,{href:p.href.replace(p.origin,""),publicHref:f,url:p,pathname:n_(p.pathname),searchStr:y,search:mr(r?.search,g),hash:p.hash.split("#").reverse()[0]??"",state:mr(r?.state,d)}},a=s(n),{__tempLocation:l,__tempKey:c}=a.state;if(l&&(!c||c===this.tempLocationKey)){const f=s(l);return f.state.key=a.state.key,f.state.__TSR_key=a.state.__TSR_key,delete f.state.__tempLocation,{...f,maskedLocation:a}}return a},this.resolvePathCache=ed(1e3),this.resolvePathWithBase=(n,r)=>SN({base:n,to:i0(r),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(n,r,s)=>typeof n=="string"?this.matchRoutesInternal({pathname:n,search:r},s):this.matchRoutesInternal(n,r),this.getMatchedRoutes=n=>GN({pathname:n,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r._nonReactive.pendingTimeout),r._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const n=this.state.matches.filter(a=>a.status==="pending"),r=this.state.matches.filter(a=>a.isFetching==="loader");new Set([...this.state.pendingMatches??[],...n,...r]).forEach(a=>{this.cancelMatch(a.id)})},this.buildLocation=n=>{const r=(a={})=>{const l=a._fromLocation||this.pendingBuiltLocation||this.latestLocation,c=this.matchRoutes(l,{_buildLocation:!0}),f=Xf(c);a.from;const d=a.unsafeRelative==="path"?l.pathname:a.from??f.fullPath,m=this.resolvePathWithBase(d,"."),p=f.search,g={...f.params},y=a.to?this.resolvePathWithBase(m,`${a.to}`):this.resolvePathWithBase(m,"."),x=a.params===!1||a.params===null?{}:(a.params??!0)===!0?g:Object.assign(g,Zs(a.params,g)),S=Lm({path:y,params:x}).interpolatedPath,E=this.matchRoutes(S,void 0,{_buildLocation:!0}).map(M=>this.looseRoutesById[M.routeId]);if(Object.keys(x).length>0)for(const M of E){const $=M.options.params?.stringify??M.options.stringifyParams;$&&Object.assign(x,$(x))}const C=n.leaveParams?y:n_(Lm({path:y,params:x,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath);let k=p;if(n._includeValidateSearch&&this.options.search?.strict){const M={};E.forEach($=>{if($.options.validateSearch)try{Object.assign(M,Kg($.options.validateSearch,{...M,...k}))}catch{}}),k=M}k=QN({search:k,dest:a,destRoutes:E,_includeValidateSearch:n._includeValidateSearch}),k=mr(p,k);const R=this.options.stringifySearch(k),I=a.hash===!0?l.hash:a.hash?Zs(a.hash,l.hash):void 0,j=I?`#${I}`:"";let A=a.state===!0?l.state:a.state?Zs(a.state,l.state):{};A=mr(l.state,A);const z=`${C}${R}${j}`,L=new URL(z,this.origin),P=SE(this.rewrite,L);return{publicHref:P.pathname+P.search+P.hash,href:z,url:P,pathname:C,search:k,searchStr:R,state:A,hash:I??"",unmaskOnReload:a.unmaskOnReload}},s=(a={},l)=>{const c=r(a);let f=l?r(l):void 0;if(!f){const d={};if(this.options.routeMasks){const m=fN(c.pathname,this.processedTree);if(m){Object.assign(d,m.params);const{from:p,params:g,...y}=m.route,x=g===!1||g===null?{}:(g??!0)===!0?d:Object.assign(d,Zs(g,d));l={from:n.from,...y,params:x},f=r(l)}}}return f&&(c.maskedLocation=f),c};return n.mask?s(n,{from:n.from,...n.mask}):s(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...s})=>{const a=()=>{const f=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];f.forEach(m=>{s.state[m]=this.latestLocation.state[m]});const d=Pi(s.state,this.latestLocation.state);return f.forEach(m=>{delete s.state[m]}),d},l=Fi(this.latestLocation.href)===Fi(s.href),c=this.commitLocationPromise;if(this.commitLocationPromise=oo(()=>{c?.resolve()}),l&&a())this.load();else{let{maskedLocation:f,hashScrollIntoView:d,url:m,...p}=s;f&&(p={...f,state:{...f.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=d??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[s.replace?"replace":"push"](p.publicHref,p.state,{ignoreBlocker:r})}return this.resetNextScroll=s.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:s,viewTransition:a,ignoreBlocker:l,href:c,...f}={})=>{if(c){const p=this.history.location.state.__TSR_index,g=Jf(c,{__TSR_index:n?p:p+1});f.to=g.pathname,f.search=this.options.parseSearch(g.search),f.hash=g.hash.slice(1)}const d=this.buildLocation({...f,_includeValidateSearch:!0});this.pendingBuiltLocation=d;const m=this.commitLocation({...d,viewTransition:a,replace:n,resetScroll:r,hashScrollIntoView:s,ignoreBlocker:l});return Promise.resolve().then(()=>{this.pendingBuiltLocation===d&&(this.pendingBuiltLocation=void 0)}),m},this.navigate=async({to:n,reloadDocument:r,href:s,publicHref:a,...l})=>{let c=!1;if(s)try{new URL(`${s}`),c=!0}catch{}if(c&&!r&&(r=!0),r){if(!s||!a&&!c){const d=this.buildLocation({to:n,...l});s=s??d.url.href,a=a??d.url.href}const f=!c&&a?a:s;if(!l.ignoreBlocker){const m=this.history.getBlockers?.()??[];for(const p of m)if(p?.blockerFn&&await p.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}return l.replace?window.location.replace(f):window.location.href=f,Promise.resolve()}return this.buildAndCommitLocation({...l,href:s,to:n,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const r=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});if(this.latestLocation.publicHref!==r.publicHref||r.url.origin!==this.origin){const s=this.getParsedLocationHref(r);throw zN({href:s})}}const n=this.matchRoutes(this.latestLocation);this.__store.setState(r=>({...r,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:n,cachedMatches:r.cachedMatches.filter(s=>!n.some(a=>a.id===s.id))}))},this.load=async n=>{let r,s,a;for(a=new Promise(c=>{this.startTransition(async()=>{try{this.beforeLoad();const f=this.latestLocation,d=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...$i({resolvedLocation:d,location:f})}),this.emit({type:"onBeforeLoad",...$i({resolvedLocation:d,location:f})}),await s_({router:this,sync:n?.sync,matches:this.state.pendingMatches,location:f,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let m=[],p=[],g=[];Kl(()=>{this.__store.setState(y=>{const x=y.matches,S=y.pendingMatches||y.matches;return m=x.filter(E=>!S.some(C=>C.id===E.id)),p=S.filter(E=>!x.some(C=>C.id===E.id)),g=S.filter(E=>x.some(C=>C.id===E.id)),{...y,isLoading:!1,loadedAt:Date.now(),matches:S,pendingMatches:void 0,cachedMatches:[...y.cachedMatches,...m.filter(E=>E.status!=="error"&&E.status!=="notFound")]}}),this.clearExpiredCache()}),[[m,"onLeave"],[p,"onEnter"],[g,"onStay"]].forEach(([y,x])=>{y.forEach(S=>{this.looseRoutesById[S.routeId].options[x]?.(S)})})})})}})}catch(f){br(f)?(r=f,this.isServer||this.navigate({...r.options,replace:!0,ignoreBlocker:!0})):Wn(f)&&(s=f),this.__store.setState(d=>({...d,statusCode:r?r.status:s?404:d.matches.some(m=>m.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===a&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),c()})}),this.latestLoadPromise=a,await a;this.latestLoadPromise&&a!==this.latestLoadPromise;)await this.latestLoadPromise;let l;this.hasNotFoundMatch()?l=404:this.__store.state.matches.some(c=>c.status==="error")&&(l=500),l!==void 0&&this.__store.setState(c=>({...c,statusCode:l}))},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let s;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const a=this.latestLocation,l=this.state.resolvedLocation,c=typeof r.types=="function"?r.types($i({resolvedLocation:l,location:a})):r.types;if(c===!1){n();return}s={update:n,types:c}}else s=n;document.startViewTransition(s)}else n()},this.updateMatch=(n,r)=>{this.startTransition(()=>{const s=this.state.pendingMatches?.some(a=>a.id===n)?"pendingMatches":this.state.matches.some(a=>a.id===n)?"matches":this.state.cachedMatches.some(a=>a.id===n)?"cachedMatches":"";s&&this.__store.setState(a=>({...a,[s]:a[s]?.map(l=>l.id===n?r(l):l)}))})},this.getMatch=n=>{const r=s=>s.id===n;return this.state.cachedMatches.find(r)??this.state.pendingMatches?.find(r)??this.state.matches.find(r)},this.invalidate=n=>{const r=s=>n?.filter?.(s)??!0?{...s,invalid:!0,...n?.forcePending||s.status==="error"||s.status==="notFound"?{status:"pending",error:void 0}:void 0}:s;return this.__store.setState(s=>({...s,matches:s.matches.map(r),cachedMatches:s.cachedMatches.map(r),pendingMatches:s.pendingMatches?.map(r)})),this.shouldViewTransition=!1,this.load({sync:n?.sync})},this.getParsedLocationHref=n=>{let r=n.url.href;return this.origin&&n.url.origin===this.origin&&(r=r.replace(this.origin,"")||"/"),r},this.resolveRedirect=n=>{if(!n.options.href){const r=this.buildLocation(n.options),s=this.getParsedLocationHref(r);n.options.href=r.href,n.headers.set("Location",s)}return n.headers.get("Location")||n.headers.set("Location",n.options.href),n},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(s=>({...s,cachedMatches:s.cachedMatches.filter(a=>!r(a))})):this.__store.setState(s=>({...s,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const s=this.looseRoutesById[r.routeId];if(!s.options.loader)return!0;const a=(r.preload?s.options.preloadGcTime??this.options.defaultPreloadGcTime:s.options.gcTime??this.options.defaultGcTime)??300*1e3;return r.status==="error"?!0:Date.now()-r.updatedAt>=a};this.clearCache({filter:n})},this.loadRouteChunk=yE,this.preloadRoute=async n=>{const r=this.buildLocation(n);let s=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const a=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(c=>c.id)),l=new Set([...a,...this.state.cachedMatches.map(c=>c.id)]);Kl(()=>{s.forEach(c=>{l.has(c.id)||this.__store.setState(f=>({...f,cachedMatches:[...f.cachedMatches,c]}))})});try{return s=await s_({router:this,matches:s,location:r,preload:!0,updateMatch:(c,f)=>{a.has(c)?s=s.map(d=>d.id===c?f(d):d):this.updateMatch(c,f)}}),s}catch(c){if(br(c))return c.options.reloadDocument?void 0:await this.preloadRoute({...c.options,_fromLocation:r});Wn(c)||console.error(c);return}},this.matchRoute=(n,r)=>{const s={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},a=this.buildLocation(s);if(r?.pending&&this.state.status!=="pending")return!1;const c=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,f=dN(a.pathname,r?.caseSensitive??!1,r?.fuzzy??!1,c.pathname,this.processedTree);return!f||n.params&&!Pi(f.params,n.params,{partial:!0})?!1:r?.includeSearch??!0?Pi(c.search,a.search,{partial:!0})?f.params:!1:f.params},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??NN,parseSearch:e.parseSearch??MN}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,n){const r=this.getMatchedRoutes(e.pathname),{foundRoute:s,routeParams:a}=r;let{matchedRoutes:l}=r,c=!1;(s?s.path!=="/"&&a["**"]:Fi(e.pathname))&&(this.options.notFoundRoute?l=[...l,this.options.notFoundRoute]:c=!0);const f=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let p=l.length-1;p>=0;p--){const g=l[p];if(g.children)return g.id}return Jn}})(),d=[],m=p=>p?.id?p.context??this.options.context??void 0:this.options.context??void 0;return l.forEach((p,g)=>{const y=d[g-1],[x,S,E]=(()=>{const ee=y?.search??e.search,te=y?._strictSearch??void 0;try{const V=Kg(p.options.validateSearch,{...ee})??void 0;return[{...ee,...V},{...te,...V},void 0]}catch(V){let F=V;if(V instanceof sd||(F=new sd(V.message,{cause:V})),n?.throwOnError)throw F;return[ee,{},F]}})(),C=p.options.loaderDeps?.({search:x})??"",k=C?JSON.stringify(C):"",{interpolatedPath:R,usedParams:I}=Lm({path:p.fullPath,params:a,decodeCharMap:this.pathParamsDecodeCharMap}),j=p.id+R+k,A=this.getMatch(j),z=this.state.matches.find(ee=>ee.routeId===p.id),L=A?._strictParams??I;let P;if(!A){const ee=p.options.params?.parse??p.options.parseParams;if(ee)try{Object.assign(L,ee(L))}catch(te){if(Wn(te)||br(te)?P=te:P=new VN(te.message,{cause:te}),n?.throwOnError)throw P}}Object.assign(a,L);const M=z?"stay":"enter";let $;if(A)$={...A,cause:M,params:z?mr(z.params,a):a,_strictParams:L,search:mr(z?z.search:A.search,x),_strictSearch:S};else{const ee=p.options.loader||p.options.beforeLoad||p.lazyFn||vE(p)?"pending":"success";$={id:j,ssr:this.isServer?void 0:p.options.ssr,index:g,routeId:p.id,params:z?mr(z.params,a):a,_strictParams:L,pathname:R,updatedAt:Date.now(),search:z?mr(z.search,x):x,_strictSearch:S,searchError:void 0,status:ee,isFetching:!1,error:void 0,paramsError:P,__routeContext:void 0,_nonReactive:{loadPromise:oo()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:M,loaderDeps:z?mr(z.loaderDeps,C):C,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:p.options.staticData||{},fullPath:p.fullPath}}n?.preload||($.globalNotFound=f===p.id),$.searchError=E;const G=m(y);$.context={...G,...$.__routeContext,...$.__beforeLoadContext},d.push($)}),d.forEach((p,g)=>{const y=this.looseRoutesById[p.routeId];if(!this.getMatch(p.id)&&n?._buildLocation!==!0){const S=d[g-1],E=m(S);if(y.options.context){const C={deps:p.loaderDeps,params:p.params,context:E??{},location:e,navigate:k=>this.navigate({...k,_fromLocation:e}),buildLocation:this.buildLocation,cause:p.cause,abortController:p.abortController,preload:!!p.preload,matches:d};p.__routeContext=y.options.context(C)??void 0}p.context={...E,...p.__routeContext,...p.__beforeLoadContext}}}),d}}class sd extends Error{}class VN extends Error{}function KN(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Kg(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new sd("Async validation not supported");if(n.issues)throw new sd(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function GN({pathname:t,routesById:e,processedTree:n}){const r={},s=Fi(t);let a;const l=hN(s,n,!0);return l&&(a=l.route,Object.assign(r,l.params)),{matchedRoutes:l?.branch||[e[Jn]],routeParams:r,foundRoute:a}}function QN({search:t,dest:e,destRoutes:n,_includeValidateSearch:r}){const s=n.reduce((c,f)=>{const d=[];if("search"in f.options)f.options.search?.middlewares&&d.push(...f.options.search.middlewares);else if(f.options.preSearchFilters||f.options.postSearchFilters){const m=({search:p,next:g})=>{let y=p;"preSearchFilters"in f.options&&f.options.preSearchFilters&&(y=f.options.preSearchFilters.reduce((S,E)=>E(S),p));const x=g(y);return"postSearchFilters"in f.options&&f.options.postSearchFilters?f.options.postSearchFilters.reduce((S,E)=>E(S),x):x};d.push(m)}if(r&&f.options.validateSearch){const m=({search:p,next:g})=>{const y=g(p);try{return{...y,...Kg(f.options.validateSearch,y)??void 0}}catch{return y}};d.push(m)}return c.concat(d)},[])??[],a=({search:c})=>e.search?e.search===!0?c:Zs(e.search,c):{};s.push(a);const l=(c,f)=>{if(c>=s.length)return f;const d=s[c];return d({search:f,next:p=>l(c+1,p)})};return l(0,t)}const ZN="Error preloading route! ";class wE{constructor(e){if(this.init=n=>{this.originalIndex=n.originalIndex;const r=this.options,s=!r?.path&&!r?.id;this.parentRoute=this.options.getParentRoute?.(),s?this._path=Jn:this.parentRoute||vs(!1);let a=s?Jn:r?.path;a&&a!=="/"&&(a=cE(a));const l=r?.id||a;let c=s?Jn:Nf([this.parentRoute.id===Jn?"":this.parentRoute.id,l]);a===Jn&&(a="/"),c!==Jn&&(c=Nf(["/",c]));const f=c===Jn?"/":Nf([this.parentRoute.fullPath,a]);this._path=a,this._id=c,this._fullPath=f,this._to=f},this.addChildren=n=>this._addFileChildren(n),this._addFileChildren=n=>(Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this),this._addFileTypes=()=>this,this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.options=e||{},this.isRoot=!e?.getParentRoute,e?.id&&e?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class YN extends wE{constructor(e){super(e)}}function o0(t){const e=t.errorComponent??Ld;return w.jsx(JN,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?q.createElement(e,{error:n,reset:r}):t.children})}class JN extends q.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Ld({error:t}){const[e,n]=q.useState(!1);return w.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[w.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),w.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),w.jsx("div",{style:{height:".25rem"}}),e?w.jsx("div",{children:w.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?w.jsx("code",{children:t.message}):null})}):null]})}function XN({children:t,fallback:e=null}){return WN()?w.jsx(Or.Fragment,{children:t}):w.jsx(Or.Fragment,{children:e})}function WN(){return Or.useSyncExternalStore(eI,()=>!0,()=>!1)}function eI(){return()=>{}}var Fm={exports:{}},$m={},Bm={exports:{}},Um={};var i_;function tI(){if(i_)return Um;i_=1;var t=fo();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function c(p,g){var y=g(),x=r({inst:{value:y,getSnapshot:g}}),S=x[0].inst,E=x[1];return a(function(){S.value=y,S.getSnapshot=g,f(S)&&E({inst:S})},[p,y,g]),s(function(){return f(S)&&E({inst:S}),p(function(){f(S)&&E({inst:S})})},[p]),l(y),y}function f(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function d(p,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return Um.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,Um}var a_;function nI(){return a_||(a_=1,Bm.exports=tI()),Bm.exports}var o_;function rI(){if(o_)return $m;o_=1;var t=fo(),e=nI();function n(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=t.useRef,l=t.useEffect,c=t.useMemo,f=t.useDebugValue;return $m.useSyncExternalStoreWithSelector=function(d,m,p,g,y){var x=a(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=c(function(){function C(A){if(!k){if(k=!0,R=A,A=g(A),y!==void 0&&S.hasValue){var z=S.value;if(y(z,A))return I=z}return I=A}if(z=I,r(R,A))return z;var L=g(A);return y!==void 0&&y(z,L)?(R=A,z):(R=A,I=L)}var k=!1,R,I,j=p===void 0?null:p;return[function(){return C(m())},j===null?void 0:function(){return C(j())}]},[m,p,g,y]);var E=s(d,x[0],x[1]);return l(function(){S.hasValue=!0,S.value=E},[E]),f(E),E},$m}var l_;function sI(){return l_||(l_=1,Fm.exports=rI()),Fm.exports}var iI=sI();function aI(t,e=r=>r,n={}){const r=n.equal??oI;return iI.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,r)}function oI(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!e.has(r)||!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();const n=u_(t);if(n.length!==u_(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}function u_(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}const qm=q.createContext(null);function _E(){return typeof document>"u"?qm:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=qm,qm)}function nr(t){const e=q.useContext(_E());return t?.warn,e}function Pn(t){const e=nr({warn:t?.router===void 0}),n=t?.router||e,r=q.useRef(void 0);return aI(n.__store,s=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const a=mr(r.current,t.select(s));return r.current=a,a}return t.select(s)}return s})}const Pd=q.createContext(void 0),lI=q.createContext(void 0);function Br(t){const e=q.useContext(t.from?lI:Pd);return Pn({select:r=>{const s=r.matches.find(a=>t.from?t.from===a.routeId:a.id===e);if(vs(!((t.shouldThrow??!0)&&!s),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),s!==void 0)return t.select?t.select(s):s},structuralSharing:t.structuralSharing})}function l0(t){return Br({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function u0(t){const{select:e,...n}=t;return Br({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function Ji(t){return Br({from:t.from,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,strict:t.strict,select:e=>{const n=t.strict===!1?e.params:e._strictParams;return t.select?t.select(n):n}})}function c0(t){return Br({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}const af=typeof window<"u"?q.useLayoutEffect:q.useEffect;function Hm(t){const e=q.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function uI(t,e,n={},r={}){q.useEffect(()=>{if(!t.current||r.disabled||typeof IntersectionObserver!="function")return;const s=new IntersectionObserver(([a])=>{e(a)},n);return s.observe(t.current),()=>{s.disconnect()}},[e,n,r.disabled,t])}function cI(t){const e=q.useRef(null);return q.useImperativeHandle(t,()=>e.current,[]),e}function Cu(t){const e=nr();return q.useCallback(n=>e.navigate({...n,from:n.from??t?.from}),[t?.from,e])}var fI=ZC();function dI(t,e){const n=nr(),[r,s]=q.useState(!1),a=q.useRef(!1),l=cI(e),{activeProps:c,inactiveProps:f,activeOptions:d,to:m,preload:p,preloadDelay:g,hashScrollIntoView:y,replace:x,startTransition:S,resetScroll:E,viewTransition:C,children:k,target:R,disabled:I,style:j,className:A,onClick:z,onFocus:L,onMouseEnter:P,onMouseLeave:M,onTouchStart:$,ignoreBlocker:G,params:ee,search:te,hash:V,state:F,mask:J,reloadDocument:ae,unsafeRelative:Q,from:N,_fromLocation:D,...B}=t,T=Pn({select:be=>be.location.search,structuralSharing:!0}),se=t.from,ce=q.useMemo(()=>({...t,from:se}),[n,T,se,t._fromLocation,t.hash,t.to,t.search,t.params,t.state,t.mask,t.unsafeRelative]),he=q.useMemo(()=>n.buildLocation({...ce}),[n,ce]),ve=q.useMemo(()=>{if(I)return;let be=he.maskedLocation?he.maskedLocation.url.href:he.url.href,ye=!1;return n.origin&&(be.startsWith(n.origin)?be=n.history.createHref(be.replace(n.origin,""))||"/":ye=!0),{href:be,external:ye}},[I,he.maskedLocation,he.url,n.origin,n.history]),Ae=q.useMemo(()=>{if(ve?.external)return ve.href;try{return new URL(m),m}catch{}},[m,ve]),_e=t.reloadDocument||Ae?!1:p??n.options.defaultPreload,me=g??n.options.defaultPreloadDelay??0,Ee=Pn({select:be=>{if(Ae)return!1;if(d?.exact){if(!xN(be.location.pathname,he.pathname,n.basepath))return!1}else{const ye=td(be.location.pathname,n.basepath),qe=td(he.pathname,n.basepath);if(!(ye.startsWith(qe)&&(ye.length===qe.length||ye[qe.length]==="/")))return!1}return(d?.includeSearch??!0)&&!Pi(be.location.search,he.search,{partial:!d?.exact,ignoreUndefined:!d?.explicitUndefined})?!1:d?.includeHash?be.location.hash===he.hash:!0}}),Oe=q.useCallback(()=>{n.preloadRoute({...ce}).catch(be=>{console.warn(be),console.warn(ZN)})},[n,ce]),Ze=q.useCallback(be=>{be?.isIntersecting&&Oe()},[Oe]);uI(l,Ze,yI,{disabled:!!I||_e!=="viewport"}),q.useEffect(()=>{a.current||!I&&_e==="render"&&(Oe(),a.current=!0)},[I,Oe,_e]);const Le=be=>{const ye=be.currentTarget.getAttribute("target"),qe=R!==void 0?R:ye;if(!I&&!vI(be)&&!be.defaultPrevented&&(!qe||qe==="_self")&&be.button===0){be.preventDefault(),fI.flushSync(()=>{s(!0)});const ne=n.subscribe("onResolved",()=>{ne(),s(!1)});n.navigate({...ce,replace:x,resetScroll:E,hashScrollIntoView:y,startTransition:S,viewTransition:C,ignoreBlocker:G})}};if(Ae)return{...B,ref:l,href:Ae,...k&&{children:k},...R&&{target:R},...I&&{disabled:I},...j&&{style:j},...A&&{className:A},...z&&{onClick:z},...L&&{onFocus:L},...P&&{onMouseEnter:P},...M&&{onMouseLeave:M},...$&&{onTouchStart:$}};const Ye=be=>{I||_e&&Oe()},it=Ye,Je=be=>{if(!(I||!_e))if(!me)Oe();else{const ye=be.target;if(Sl.has(ye))return;const qe=setTimeout(()=>{Sl.delete(ye),Oe()},me);Sl.set(ye,qe)}},ot=be=>{if(I||!_e||!me)return;const ye=be.target,qe=Sl.get(ye);qe&&(clearTimeout(qe),Sl.delete(ye))},ht=Ee?Zs(c,{})??hI:Vm,Me=Ee?Vm:Zs(f,{})??Vm,ge=[A,ht.className,Me.className].filter(Boolean).join(" "),je=(j||ht.style||Me.style)&&{...j,...ht.style,...Me.style};return{...B,...ht,...Me,href:ve?.href,ref:l,onClick:wl([z,Le]),onFocus:wl([L,Ye]),onMouseEnter:wl([P,Je]),onMouseLeave:wl([M,ot]),onTouchStart:wl([$,it]),disabled:!!I,target:R,...je&&{style:je},...ge&&{className:ge},...I&&pI,...Ee&&mI,...r&&gI}}const Vm={},hI={className:"active"},pI={role:"link","aria-disabled":!0},mI={"data-status":"active","aria-current":"page"},gI={"data-transitioning":"transitioning"},Sl=new WeakMap,yI={rootMargin:"100px"},wl=t=>e=>{for(const n of t)if(n){if(e.defaultPrevented)return;n(e)}},CE=q.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:s,ref:a,...l}=dI(r,e),c=typeof r.children=="function"?r.children({isActive:l["data-status"]==="active"}):r.children;return n===void 0&&delete l.disabled,q.createElement(n||"a",{...l,ref:a},c)});function vI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}class bI extends wE{constructor(e){super(e),this.useMatch=n=>Br({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Br({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>c0({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>Ji({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>u0({...n,from:this.id}),this.useLoaderData=n=>l0({...n,from:this.id}),this.useNavigate=()=>Cu({from:this.fullPath}),this.Link=Or.forwardRef((n,r)=>w.jsx(CE,{ref:r,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function mo(t){return new bI(t)}class xI extends YN{constructor(e){super(e),this.useMatch=n=>Br({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Br({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>c0({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>Ji({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>u0({...n,from:this.id}),this.useLoaderData=n=>l0({...n,from:this.id}),this.useNavigate=()=>Cu({from:this.fullPath}),this.Link=Or.forwardRef((n,r)=>w.jsx(CE,{ref:r,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function SI(t){return new xI(t)}function c_(t){return typeof t=="object"?new f_(t,{silent:!0}).createRoute(t):new f_(t,{silent:!0}).createRoute}class f_{constructor(e,n){this.path=e,this.createRoute=r=>{this.silent;const s=mo(r);return s.isRoot=!1,s},this.silent=n?.silent}}class d_{constructor(e){this.useMatch=n=>Br({select:n?.select,from:this.options.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Br({from:this.options.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>c0({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useParams=n=>Ji({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useLoaderDeps=n=>u0({...n,from:this.options.id}),this.useLoaderData=n=>l0({...n,from:this.options.id}),this.useNavigate=()=>{const n=nr();return Cu({from:n.routesById[this.options.id].fullPath})},this.options=e,this.$$typeof=Symbol.for("react.memo")}}function h_(t){return typeof t=="object"?new d_(t):e=>new d_({id:t,...e})}function wI(){const t=nr(),e=q.useRef({router:t,mounted:!1}),[n,r]=q.useState(!1),{hasPendingMatches:s,isLoading:a}=Pn({select:p=>({isLoading:p.isLoading,hasPendingMatches:p.matches.some(g=>g.status==="pending")}),structuralSharing:!0}),l=Hm(a),c=a||n||s,f=Hm(c),d=a||s,m=Hm(d);return t.startTransition=p=>{r(!0),q.startTransition(()=>{p(),r(!1)})},q.useEffect(()=>{const p=t.history.subscribe(t.load),g=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Fi(t.latestLocation.publicHref)!==Fi(g.publicHref)&&t.commitLocation({...g,replace:!0}),()=>{p()}},[t,t.history]),af(()=>{if(typeof window<"u"&&t.ssr||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(g){console.error(g)}})()},[t]),af(()=>{l&&!a&&t.emit({type:"onLoad",...$i(t.state)})},[l,t,a]),af(()=>{m&&!d&&t.emit({type:"onBeforeRouteMount",...$i(t.state)})},[d,m,t]),af(()=>{if(f&&!c){const p=$i(t.state);t.emit({type:"onResolved",...p}),t.__store.setState(g=>({...g,status:"idle",resolvedLocation:g.location})),p.hrefChanged&&AN(t)}},[c,f,t]),null}function _I(t){const e=Pn({select:n=>`not-found-${n.location.pathname}-${n.status}`});return w.jsx(o0,{getResetKey:()=>e,onCatch:(n,r)=>{if(Wn(n))t.onCatch?.(n,r);else throw n},errorComponent:({error:n})=>{if(Wn(n))return t.fallback?.(n);throw n},children:t.children})}function CI(){return w.jsx("p",{children:"Not Found"})}function Va(t){return w.jsx(w.Fragment,{children:t.children})}function EE(t,e,n){return e.options.notFoundComponent?w.jsx(e.options.notFoundComponent,{...n}):t.options.defaultNotFoundComponent?w.jsx(t.options.defaultNotFoundComponent,{...n}):w.jsx(CI,{})}function EI({children:t}){const e=nr();return e.isServer?w.jsx("script",{nonce:e.options.ssr?.nonce,dangerouslySetInnerHTML:{__html:t+";document.currentScript.remove()"}}):null}function kI(){const t=nr();if(!t.isScrollRestoring||!t.isServer||typeof t.options.scrollRestoration=="function"&&!t.options.scrollRestoration({location:t.latestLocation}))return null;const n=(t.options.getScrollRestorationKey||Vg)(t.latestLocation),r=n!==Vg(t.latestLocation)?n:void 0,s={storageKey:nd,shouldScrollRestoration:!0};return r&&(s.key=r),w.jsx(EI,{children:`(${dE.toString()})(${JSON.stringify(s)})`})}const kE=q.memo(function({matchId:e}){const n=nr(),r=Pn({select:C=>{const k=C.matches.find(R=>R.id===e);return vs(k),{routeId:k.routeId,ssr:k.ssr,_displayPending:k._displayPending}},structuralSharing:!0}),s=n.routesById[r.routeId],a=s.options.pendingComponent??n.options.defaultPendingComponent,l=a?w.jsx(a,{}):null,c=s.options.errorComponent??n.options.defaultErrorComponent,f=s.options.onCatch??n.options.defaultOnCatch,d=s.isRoot?s.options.notFoundComponent??n.options.notFoundRoute?.options.component:s.options.notFoundComponent,m=r.ssr===!1||r.ssr==="data-only",p=(!s.isRoot||s.options.wrapInSuspense||m)&&(s.options.wrapInSuspense??a??(s.options.errorComponent?.preload||m))?q.Suspense:Va,g=c?o0:Va,y=d?_I:Va,x=Pn({select:C=>C.loadedAt}),S=Pn({select:C=>{const k=C.matches.findIndex(R=>R.id===e);return C.matches[k-1]?.routeId}}),E=s.isRoot?s.options.shellComponent??Va:Va;return w.jsxs(E,{children:[w.jsx(Pd.Provider,{value:e,children:w.jsx(p,{fallback:l,children:w.jsx(g,{getResetKey:()=>x,errorComponent:c||Ld,onCatch:(C,k)=>{if(Wn(C))throw C;f?.(C,k)},children:w.jsx(y,{fallback:C=>{if(!d||C.routeId&&C.routeId!==r.routeId||!C.routeId&&!s.isRoot)throw C;return q.createElement(d,C)},children:m||r._displayPending?w.jsx(XN,{fallback:l,children:w.jsx(p_,{matchId:e})}):w.jsx(p_,{matchId:e})})})})}),S===Jn&&n.options.scrollRestoration?w.jsxs(w.Fragment,{children:[w.jsx(RI,{}),w.jsx(kI,{})]}):null]})});function RI(){const t=nr(),e=q.useRef(void 0);return w.jsx("script",{suppressHydrationWarning:!0,ref:n=>{n&&(e.current===void 0||e.current.href!==t.latestLocation.href)&&(t.emit({type:"onRendered",...$i(t.state)}),e.current=t.latestLocation)}},t.latestLocation.state.__TSR_key)}const p_=q.memo(function({matchId:e}){const n=nr(),{match:r,key:s,routeId:a}=Pn({select:f=>{const d=f.matches.find(x=>x.id===e),m=d.routeId,g=(n.routesById[m].options.remountDeps??n.options.defaultRemountDeps)?.({routeId:m,loaderDeps:d.loaderDeps,params:d._strictParams,search:d._strictSearch});return{key:g?JSON.stringify(g):void 0,routeId:m,match:{id:d.id,status:d.status,error:d.error,invalid:d.invalid,_forcePending:d._forcePending,_displayPending:d._displayPending}}},structuralSharing:!0}),l=n.routesById[a],c=q.useMemo(()=>{const f=l.options.component??n.options.defaultComponent;return f?w.jsx(f,{},s):w.jsx(AI,{})},[s,l.options.component,n.options.defaultComponent]);if(r._displayPending)throw n.getMatch(r.id)?._nonReactive.displayPendingPromise;if(r._forcePending)throw n.getMatch(r.id)?._nonReactive.minPendingPromise;if(r.status==="pending"){const f=l.options.pendingMinMs??n.options.defaultPendingMinMs;if(f){const d=n.getMatch(r.id);if(d&&!d._nonReactive.minPendingPromise&&!n.isServer){const m=oo();d._nonReactive.minPendingPromise=m,setTimeout(()=>{m.resolve(),d._nonReactive.minPendingPromise=void 0},f)}}throw n.getMatch(r.id)?._nonReactive.loadPromise}if(r.status==="notFound")return vs(Wn(r.error)),EE(n,l,r.error);if(r.status==="redirected")throw vs(br(r.error)),n.getMatch(r.id)?._nonReactive.loadPromise;if(r.status==="error"){if(n.isServer){const f=(l.options.errorComponent??n.options.defaultErrorComponent)||Ld;return w.jsx(f,{error:r.error,reset:void 0,info:{componentStack:""}})}throw r.error}return c}),AI=q.memo(function(){const e=nr(),n=q.useContext(Pd),r=Pn({select:d=>d.matches.find(m=>m.id===n)?.routeId}),s=e.routesById[r],a=Pn({select:d=>{const p=d.matches.find(g=>g.id===n);return vs(p),p.globalNotFound}}),l=Pn({select:d=>{const m=d.matches,p=m.findIndex(g=>g.id===n);return m[p+1]?.id}}),c=e.options.defaultPendingComponent?w.jsx(e.options.defaultPendingComponent,{}):null;if(a)return EE(e,s,void 0);if(!l)return null;const f=w.jsx(kE,{matchId:l});return r===Jn?w.jsx(q.Suspense,{fallback:c,children:f}):f});function TI(){const t=nr(),n=t.routesById[Jn].options.pendingComponent??t.options.defaultPendingComponent,r=n?w.jsx(n,{}):null,s=t.isServer||typeof document<"u"&&t.ssr?Va:q.Suspense,a=w.jsxs(s,{fallback:r,children:[!t.isServer&&w.jsx(wI,{}),w.jsx(OI,{})]});return t.options.InnerWrap?w.jsx(t.options.InnerWrap,{children:a}):a}function OI(){const t=nr(),e=Pn({select:s=>s.matches[0]?.id}),n=Pn({select:s=>s.loadedAt}),r=e?w.jsx(kE,{matchId:e}):null;return w.jsx(Pd.Provider,{value:e,children:t.options.disableGlobalCatchBoundary?r:w.jsx(o0,{getResetKey:()=>n,errorComponent:Ld,onCatch:s=>{s.message||s.toString()},children:r})})}const MI=t=>new NI(t);class NI extends HN{constructor(e){super(e)}}typeof globalThis<"u"?(globalThis.createFileRoute=c_,globalThis.createLazyFileRoute=h_):typeof window<"u"&&(window.createFileRoute=c_,window.createLazyFileRoute=h_);function II({router:t,children:e,...n}){Object.keys(n).length>0&&t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=_E(),s=w.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?w.jsx(t.options.Wrap,{children:s}):s}function DI({router:t,...e}){return w.jsx(II,{router:t,...e,children:w.jsx(TI,{})})}const go=SI(),zI=mo({getParentRoute:()=>go,path:"/"}),jI=mo({getParentRoute:()=>go,path:"$connectionId"}),LI=mo({getParentRoute:()=>go,path:"$connectionId/container/$container/$"}),PI=mo({getParentRoute:()=>go,path:"$connectionId/$database"}),FI=mo({getParentRoute:()=>go,path:"$connectionId/$database/$table"}),$I=go.addChildren([zI,LI,FI,PI,jI]),RE=MI({routeTree:$I});const BI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UI=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),m_=t=>{const e=UI(t);return e.charAt(0).toUpperCase()+e.slice(1)},AE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),qI=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var HI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const VI=q.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...c},f)=>q.createElement("svg",{ref:f,...HI,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:AE("lucide",s),...!a&&!qI(c)&&{"aria-hidden":"true"},...c},[...l.map(([d,m])=>q.createElement(d,m)),...Array.isArray(a)?a:[a]]));const tt=(t,e)=>{const n=q.forwardRef(({className:r,...s},a)=>q.createElement(VI,{ref:a,iconNode:e,className:AE(`lucide-${BI(m_(t))}`,`lucide-${t}`,r),...s}));return n.displayName=m_(t),n};const KI=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],TE=tt("archive",KI);const GI=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],QI=tt("arrow-up",GI);const ZI=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],OE=tt("box",ZI);const YI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Bi=tt("chevron-down",YI);const JI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],f0=tt("chevron-right",JI);const XI=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Gl=tt("chevron-up",XI);const WI=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Df=tt("chevrons-up-down",WI);const eD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],tD=tt("circle-check",eD);const nD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],rD=tt("circle-x",nD);const sD=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],iD=tt("cloud",sD);const aD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],oD=tt("columns-3",aD);const lD=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],fu=tt("database",lD);const uD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],cD=tt("download",uD);const fD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],ME=tt("file-code",fD);const dD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],NE=tt("file-text",dD);const hD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],pD=tt("file-up",hD);const mD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],id=tt("file",mD);const gD=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],IE=tt("folder",gD);const yD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],DE=tt("image",yD);const vD=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],bD=tt("link",vD);const xD=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],SD=tt("list-ordered",xD);const wD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ki=tt("loader-circle",wD);const _D=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],zE=tt("package",_D);const CD=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ED=tt("pencil",CD);const kD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],RD=tt("play",kD);const AD=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],TD=tt("plug",AD);const OD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fd=tt("plus",OD);const MD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ND=tt("send",MD);const ID=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],DD=tt("shield-check",ID);const zD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Gg=tt("sparkles",zD);const jD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],LD=tt("square",jD);const PD=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],FD=tt("table-2",PD);const $D=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],BD=tt("table",$D);const UD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],du=tt("trash-2",UD);const qD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],HD=tt("triangle-alert",qD);const VD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],jE=tt("upload",VD);const KD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Eu=tt("x",KD);class yo{}class uo extends yo{constructor(e,n){super(),this.collection=e,this.alias=n,this.type="collectionRef"}}class vr extends yo{constructor(e,n){super(),this.query=e,this.alias=n,this.type="queryRef"}}class En extends yo{constructor(e){super(),this.path=e,this.type="ref"}}class jn extends yo{constructor(e){super(),this.value=e,this.type="val"}}class Sr extends yo{constructor(e,n){super(),this.name=e,this.args=n,this.type="func"}}class LE extends yo{constructor(e,n){super(),this.name=e,this.args=n,this.type="agg"}}function d0(t){return t instanceof LE||t instanceof Sr||t instanceof En||t instanceof jn}function h0(t){return typeof t=="object"&&"expression"in t?t.expression:t}function g_(t){return typeof t=="object"&&"expression"in t?t.expression:t}function y_(t){return typeof t=="object"&&"expression"in t&&t.residual===!0}function GD(t){return{expression:t,residual:!0}}function QD(t,e){if(t.from.alias===e)return t.from;for(const n of t.join||[])if(n.from.alias===e)return n.from}function hu(t,e,n){if(e.path.length!==0){if(e.path.length===1){const r=e.path[0];if(t.select){const s=t.select[r];if(s&&s.type==="ref")return hu(t,s,n)}return{collection:n,path:[r]}}if(e.path.length>1){const[r,...s]=e.path,a=QD(t,r);return a?a.type==="queryRef"?hu(a.query,new En(s),n):{collection:a.collection,path:s}:void 0}}}class rr extends Error{constructor(e){super(e),this.name="TanStackDBError"}}class v_ extends rr{constructor(e,n,r){const s=`${e==="insert"?"Insert":"Update"} validation failed: ${n.map(a=>`
- ${a.message} - path: ${a.path}`).join("")}`;super(r||s),this.name="SchemaValidationError",this.type=e,this.issues=n}}class ku extends rr{constructor(e){super(e),this.name="CollectionConfigurationError"}}class ZD extends ku{constructor(){super("Collection requires a config")}}class YD extends ku{constructor(){super("Collection requires a sync config")}}class JD extends ku{constructor(){super("Schema must implement the standard-schema interface")}}class b_ extends ku{constructor(){super("Schema validation must be synchronous")}}class Ru extends rr{constructor(e){super(e),this.name="CollectionStateError"}}class XD extends Ru{constructor(e,n){super(`Cannot perform ${e} on collection "${n}" - collection is in error state. Try calling cleanup() and restarting the collection.`)}}class WD extends Ru{constructor(e,n,r){super(`Invalid collection status transition from "${e}" to "${n}" for collection "${r}"`)}}class e4 extends Ru{constructor(){super("Collection is in error state")}}class t4 extends Ru{constructor(){super("Active subscribers count is negative - this should never happen")}}class Ur extends rr{constructor(e){super(e),this.name="CollectionOperationError"}}class n4 extends Ur{constructor(e){super(`An object was created without a defined key: ${JSON.stringify(e)}`)}}class r4 extends Ur{constructor(e,n){const r=e===null?"null":typeof e;super(`getKey returned an invalid key type. Expected string or number, but got ${r}: ${JSON.stringify(e)}. Item: ${JSON.stringify(n)}`)}}class s4 extends Ur{constructor(e){super(`Cannot insert document with ID "${e}" because it already exists in the collection`)}}class i4 extends Ur{constructor(e,n,r){const s=`Cannot insert document with key "${e}" from sync because it already exists in the collection "${n}"`;r?.hasCustomGetKey&&r.hasJoins?super(`${s}. This collection uses a custom getKey with joined queries. Joined queries can produce multiple rows with the same key when relationships are not 1:1. Consider: (1) using a composite key in your getKey function (e.g., \`\${item.key1}-\${item.key2}\`), (2) ensuring your join produces unique rows per key, or (3) removing the custom getKey to use the default composite key behavior.`):super(s)}}class a4 extends Ur{constructor(){super("The first argument to update is missing")}}class o4 extends Ur{constructor(){super("No keys were passed to update")}}class l4 extends Ur{constructor(e){super(`The key "${e}" was passed to update but an object for this key was not found in the collection`)}}class u4 extends Ur{constructor(e,n){super(`Updating the key of an item is not allowed. Original key: "${e}", Attempted new key: "${n}". Please delete the old item and create a new one if a key change is necessary.`)}}class c4 extends Ur{constructor(){super("No keys were passed to delete")}}class f4 extends Ur{constructor(e){super(`Collection.delete was called with key '${e}' but there is no item in the collection with this key`)}}class p0 extends rr{constructor(e){super(e),this.name="MissingHandlerError"}}class d4 extends p0{constructor(){super("Collection.insert called directly (not within an explicit transaction) but no 'onInsert' handler is configured.")}}class h4 extends p0{constructor(){super("Collection.update called directly (not within an explicit transaction) but no 'onUpdate' handler is configured.")}}class p4 extends p0{constructor(){super("Collection.delete called directly (not within an explicit transaction) but no 'onDelete' handler is configured.")}}class ii extends rr{constructor(e){super(e),this.name="TransactionError"}}class m4 extends ii{constructor(){super("mutationFn is required when creating a transaction")}}class g4 extends ii{constructor(){super("You can no longer call .mutate() as the transaction is no longer pending")}}class y4 extends ii{constructor(){super("You can no longer call .rollback() as the transaction is already completed")}}class v4 extends ii{constructor(){super("You can no longer call .commit() as the transaction is no longer pending")}}class x_ extends ii{constructor(){super("No pending sync transaction to write to")}}class S_ extends ii{constructor(){super("The pending sync transaction is already committed, you can't still write to it.")}}class b4 extends ii{constructor(){super("No pending sync transaction to commit")}}class x4 extends ii{constructor(){super("The pending sync transaction is already committed, you can't commit it again.")}}class vo extends rr{constructor(e){super(e),this.name="QueryBuilderError"}}class S4 extends vo{constructor(e){super(`Only one source is allowed in the ${e}`)}}class w4 extends vo{constructor(e){super(`A sub query passed to a ${e} must have a from clause itself`)}}class _4 extends vo{constructor(e){super(`Invalid source for live query: The value provided for alias "${e}" is not a Collection or subquery. Live queries only accept Collection instances or subqueries. Please ensure you're passing a valid Collection or QueryBuilder, not a plain array or other data type.`)}}class of extends vo{constructor(e,n){super(`Invalid source for ${e}: Expected an object with a single key-value pair like { alias: collection }. For example: .from({ todos: todosCollection }). Got: ${n}`)}}class C4 extends vo{constructor(){super("Join condition must be an equality expression")}}class E4 extends vo{constructor(){super("Query must have a from clause")}}class sr extends rr{constructor(e){super(e),this.name="QueryCompilationError"}}class k4 extends sr{constructor(){super("DISTINCT requires a SELECT clause.")}}class R4 extends sr{constructor(){super("HAVING clause requires GROUP BY clause")}}class A4 extends sr{constructor(){super("LIMIT and OFFSET require an ORDER BY clause to ensure deterministic results")}}class PE extends sr{constructor(e,n,r){const s=n?`alias "${e}" (collection "${n}")`:`collection "${e}"`,a=r?.length?`. Available keys: ${r.join(", ")}`:"";super(`Input for ${s} not found in inputs map${a}`)}}class T4 extends sr{constructor(e,n){super(`Subquery uses alias "${e}" which is already used in the parent query. Each alias must be unique across parent and subquery contexts. Parent query aliases: ${n.join(", ")}. Please rename "${e}" in either the parent query or subquery to avoid conflicts.`)}}class O4 extends sr{constructor(e){super(`Unsupported FROM type: ${e}`)}}class M4 extends sr{constructor(e){super(`Unknown expression type: ${e}`)}}class N4 extends sr{constructor(){super("Reference path cannot be empty")}}class I4 extends sr{constructor(e){super(`Unknown function: ${e}`)}}class w_ extends sr{constructor(e){super(`Collection "${e}" not found during compilation of join`)}}class Xi extends rr{constructor(e){super(e),this.name="JoinError"}}class D4 extends Xi{constructor(e){super(`Unsupported join type: ${e}`)}}class z4 extends Xi{constructor(e){super(`Invalid join condition: both expressions refer to the same source "${e}"`)}}class j4 extends Xi{constructor(){super("Invalid join condition: expressions must reference source aliases")}}class L4 extends Xi{constructor(e){super(`Invalid join condition: left expression refers to an unavailable source "${e}"`)}}class P4 extends Xi{constructor(e){super(`Invalid join condition: right expression does not refer to the joined source "${e}"`)}}class F4 extends Xi{constructor(){super("Invalid join condition")}}class $4 extends Xi{constructor(e){super(`Unsupported join source type: ${e}`)}}class $d extends rr{constructor(e){super(e),this.name="GroupByError"}}class B4 extends $d{constructor(e){super(`Non-aggregate expression '${e}' in SELECT must also appear in GROUP BY clause`)}}class U4 extends $d{constructor(e){super(`Unsupported aggregate function: ${e}`)}}class q4 extends $d{constructor(e){super(`Aggregate function in HAVING clause must also be in SELECT clause: ${e}`)}}class H4 extends $d{constructor(e){super(`Unknown expression type in HAVING clause: ${e}`)}}class __ extends rr{constructor(e,n){const r=n instanceof Error?n.message:String(n);super(`Collection "${e}" sync cleanup function threw an error: ${r}`),this.name="SyncCleanupError"}}class V4 extends rr{constructor(e){super(e),this.name="QueryOptimizerError"}}class K4 extends V4{constructor(){super("Cannot combine empty expression list")}}class G4 extends sr{constructor(e,n,r,s){super(`Internal error: subscription for alias '${e}' (remapped from '${n}', collection '${r}') is missing in join pipeline. Available aliases: ${s.join(", ")}. This indicates a bug in alias tracking.`)}}class Q4 extends sr{constructor(e){super(`Internal error: compiler returned aliases without inputs: ${e.join(", ")}. This indicates a bug in query compilation. Please report this issue.`)}}class Z4 extends sr{constructor(){super("setWindow() can only be called on collections with an ORDER BY clause. Add .orderBy() to your query to enable window movement.")}}const Km=new WeakMap;let Y4=1;function C_(t){if(Km.has(t))return Km.get(t);const e=Y4++;return Km.set(t,e),e}const m0=(t,e,n)=>{const{nulls:r}=n;if(t==null&&e==null)return 0;if(t==null)return r==="first"?-1:1;if(e==null)return r==="first"?1:-1;if(typeof t=="string"&&typeof e=="string"&&n.stringSort==="locale")return t.localeCompare(e,n.locale,n.localeOptions);if(Array.isArray(t)&&Array.isArray(e)){for(let l=0;l<Math.min(t.length,e.length);l++){const c=m0(t[l],e[l],n);if(c!==0)return c}return t.length-e.length}if(t instanceof Date&&e instanceof Date)return t.getTime()-e.getTime();const s=typeof t=="object",a=typeof e=="object";if(s||a){if(s&&a){const l=C_(t),c=C_(e);return l-c}if(s)return 1;if(a)return-1}return t<e?-1:t>e?1:0},J4=(t,e,n)=>m0(e,t,{...n,nulls:n.nulls==="first"?"last":"first"});function ad(t){return(e,n)=>t.direction==="asc"?m0(e,n,t):J4(e,n,t)}const Qg=ad({direction:"asc",nulls:"first",stringSort:"locale"});function X4(t,e){if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const W4=128;function ps(t){return t instanceof Date?t.getTime():(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)&&t.byteLength<=W4?`__u8__${Array.from(t).join(",")}`:t}function ez(t,e){if(t===e)return!0;const n=typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array,r=typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array;return n&&r?X4(t,e):!1}function Xt(t){return t==null}function ro(t){return t===!0}function Ln(t,e=!1){return y0(t,e)}function g0(t){return y0(t,!0)}function y0(t,e){switch(t.type){case"val":{const n=t.value;return()=>n}case"ref":return e?nz(t):tz(t);case"func":return rz(t,e);default:throw new M4(t.type)}}function tz(t){const[e,...n]=t.path;if(!e)throw new N4;if(n.length===0)return r=>r[e];if(n.length===1){const r=n[0];return s=>s[e]?.[r]}else return r=>{const s=r[e];if(s===void 0)return;let a=s;for(const l of n){if(a==null)return a;a=a[l]}return a}}function nz(t){const e=t.path;return n=>{let r=n;for(const s of e){if(r==null)return r;r=r[s]}return r}}function rz(t,e){const n=t.args.map(r=>y0(r,e));switch(t.name){case"eq":{const r=n[0],s=n[1];return a=>{const l=ps(r(a)),c=ps(s(a));return Xt(l)||Xt(c)?null:ez(l,c)}}case"gt":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:l>c}}case"gte":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:l>=c}}case"lt":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:l<c}}case"lte":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:l<=c}}case"and":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!1)return!1;Xt(l)&&(s=!0)}return s?null:!0};case"or":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!0)return!0;Xt(l)&&(s=!0)}return s?null:!1};case"not":{const r=n[0];return s=>{const a=r(s);return Xt(a)?null:!a}}case"in":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)?null:Array.isArray(c)?c.includes(l):!1}}case"like":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:E_(l,c,!1)}}case"ilike":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:E_(l,c,!0)}}case"upper":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toUpperCase():a}}case"lower":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toLowerCase():a}}case"length":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"||Array.isArray(a)?a.length:0}}case"concat":return r=>n.map(s=>{const a=s(r);try{return String(a??"")}catch{try{return JSON.stringify(a)||""}catch{return"[object]"}}}).join("");case"coalesce":return r=>{for(const s of n){const a=s(r);if(a!=null)return a}return null};case"add":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return(l??0)+(c??0)}}case"subtract":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return(l??0)-(c??0)}}case"multiply":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return(l??0)*(c??0)}}case"divide":{const r=n[0],s=n[1];return a=>{const l=r(a),f=s(a)??0;return f!==0?(l??0)/f:null}}case"isUndefined":{const r=n[0];return s=>r(s)===void 0}case"isNull":{const r=n[0];return s=>r(s)===null}default:throw new I4(t.name)}}function E_(t,e,n){if(typeof t!="string"||typeof e!="string")return!1;const r=n?t.toLowerCase():t;let a=(n?e.toLowerCase():e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return a=a.replace(/%/g,".*"),a=a.replace(/_/g,"."),new RegExp(`^${a}$`).test(r)}function Tr(t,e){return zf(t,e,new Map)}function zf(t,e,n){if(t===e)return!0;if(t==null||e==null||typeof t!=typeof e)return!1;if(t instanceof Date)return e instanceof Date?t.getTime()===e.getTime():!1;if(t instanceof RegExp)return e instanceof RegExp?t.source===e.source&&t.flags===e.flags:!1;if(t instanceof Map){if(!(e instanceof Map)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const s=Array.from(t.entries()).every(([a,l])=>e.has(a)&&zf(l,e.get(a),n));return n.delete(t),s}if(t instanceof Set){if(!(e instanceof Set)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Array.from(t),s=Array.from(e);if(r.every(l=>typeof l!="object"))return n.delete(t),r.every(l=>e.has(l));const a=r.length===s.length;return n.delete(t),a}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)&&!(t instanceof DataView)&&!(e instanceof DataView)){const r=t,s=e;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}if(od(t)&&od(e)){const r=Zg(t),s=Zg(e);return r!==s?!1:typeof t.equals=="function"?t.equals(e):t.toString()===e.toString()}if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=t.every((s,a)=>zf(s,e[a],n));return n.delete(t),r}if(typeof t=="object"){if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return n.delete(t),!1;const a=r.every(l=>l in e&&zf(t[l],e[l],n));return n.delete(t),a}return!1}const sz=["Temporal.Duration","Temporal.Instant","Temporal.PlainDate","Temporal.PlainDateTime","Temporal.PlainMonthDay","Temporal.PlainTime","Temporal.PlainYearMonth","Temporal.ZonedDateTime"];function Zg(t){return t[Symbol.toStringTag]}function od(t){const e=Zg(t);return typeof e=="string"&&sz.includes(e)}const v0={direction:"asc",nulls:"first",stringSort:"locale"};class iz{constructor(e){this.originalIndex=e}lookup(e,n){const r=e==="gt"?"lt":e==="gte"?"lte":e==="lt"?"gt":e==="lte"?"gte":e;return this.originalIndex.lookup(r,n)}rangeQuery(e={}){return this.originalIndex.rangeQueryReversed(e)}rangeQueryReversed(e={}){return this.originalIndex.rangeQuery(e)}take(e,n,r){return this.originalIndex.takeReversed(e,n,r)}takeReversed(e,n,r){return this.originalIndex.take(e,n,r)}get orderedEntriesArray(){return this.originalIndex.orderedEntriesArrayReversed}get orderedEntriesArrayReversed(){return this.originalIndex.orderedEntriesArray}supports(e){return this.originalIndex.supports(e)}matchesField(e){return this.originalIndex.matchesField(e)}matchesCompareOptions(e){return this.originalIndex.matchesCompareOptions(e)}matchesDirection(e){return this.originalIndex.matchesDirection(e)}getStats(){return this.originalIndex.getStats()}add(e,n){this.originalIndex.add(e,n)}remove(e,n){this.originalIndex.remove(e,n)}update(e,n,r){this.originalIndex.update(e,n,r)}build(e){this.originalIndex.build(e)}clear(){this.originalIndex.clear()}get keyCount(){return this.originalIndex.keyCount}equalityLookup(e){return this.originalIndex.equalityLookup(e)}inArrayLookup(e){return this.originalIndex.inArrayLookup(e)}get indexedKeysSet(){return this.originalIndex.indexedKeysSet}get valueMapData(){return this.originalIndex.valueMapData}}function Au(t,e,n){const r=n??{...v0,...t.compareOptions};for(const s of t.indexes.values())if(s.matchesField(e)&&s.matchesCompareOptions(r))return s.matchesDirection(r.direction)?s:new iz(s)}function az(t){if(t.length===0)return new Set;if(t.length===1)return new Set(t[0]);let e=new Set(t[0]);for(let n=1;n<t.length;n++){const r=new Set;for(const s of e)t[n].has(s)&&r.add(s);e=r}return e}function oz(t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}function lz(t,e){return b0(t,e)}function b0(t,e){if(t.type==="func")switch(t.name){case"eq":case"gt":case"gte":case"lt":case"lte":return cz(t,e);case"and":return fz(t,e);case"or":return dz(t,e);case"in":return hz(t,e)}return{canOptimize:!1,matchingKeys:new Set}}function uz(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=new Map;for(const r of t.args)if(r.type==="func"&&["gt","gte","lt","lte"].includes(r.name)){const s=r;if(s.args.length===2){const a=s.args[0],l=s.args[1];let c=null,f=null,d=s.name;if(a.type==="ref"&&l.type==="val")c=a,f=l;else if(a.type==="val"&&l.type==="ref")switch(c=l,f=a,d){case"gt":d="lt";break;case"gte":d="lte";break;case"lt":d="gt";break;case"lte":d="gte";break}if(c&&f){const p=c.path.join("."),g=f.value;n.has(p)||n.set(p,[]),n.get(p).push({operation:d,value:g})}}}for(const[r,s]of n)if(s.length>=2){const a=r.split("."),l=Au(e,a);if(l&&l.supports("gt")&&l.supports("lt")){let c,f,d=!0,m=!0;for(const{operation:g,value:y}of s)switch(g){case"gt":(c===void 0||y>c)&&(c=y,d=!1);break;case"gte":(c===void 0||y>c)&&(c=y,d=!0);break;case"lt":(f===void 0||y<f)&&(f=y,m=!1);break;case"lte":(f===void 0||y<f)&&(f=y,m=!0);break}return{canOptimize:!0,matchingKeys:l.rangeQuery({from:c,to:f,fromInclusive:d,toInclusive:m})}}}return{canOptimize:!1,matchingKeys:new Set}}function cz(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];let s=null,a=null,l=t.name;if(n.type==="ref"&&r.type==="val")s=n,a=r;else if(n.type==="val"&&r.type==="ref")switch(s=r,a=n,l){case"gt":l="lt";break;case"gte":l="lte";break;case"lt":l="gt";break;case"lte":l="gte";break}if(s&&a){const c=s.path,f=Au(e,c);if(f){const d=a.value,m=l;return f.supports(m)?{canOptimize:!0,matchingKeys:f.lookup(m,d)}:{canOptimize:!1,matchingKeys:new Set}}}return{canOptimize:!1,matchingKeys:new Set}}function fz(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=uz(t,e);if(n.canOptimize)return n;const r=[];for(const s of t.args){const a=b0(s,e);a.canOptimize&&r.push(a)}if(r.length>0){const s=r.map(l=>l.matchingKeys);return{canOptimize:!0,matchingKeys:az(s)}}return{canOptimize:!1,matchingKeys:new Set}}function dz(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=[];for(const r of t.args){const s=b0(r,e);s.canOptimize&&n.push(s)}if(n.length>0){const r=n.map(a=>a.matchingKeys);return{canOptimize:!0,matchingKeys:oz(r)}}return{canOptimize:!1,matchingKeys:new Set}}function hz(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];if(n.type==="ref"&&r.type==="val"&&Array.isArray(r.value)){const s=n.path,a=r.value,l=Au(e,s);if(l){if(l.supports("in"))return{canOptimize:!0,matchingKeys:l.lookup("in",a)};if(l.supports("eq")){const c=new Set;for(const f of a){const d=l.lookup("eq",f);for(const m of d)c.add(m)}return{canOptimize:!0,matchingKeys:c}}}}return{canOptimize:!1,matchingKeys:new Set}}class pz extends Map{constructor(e,n){super(n),this.defaultValue=e}get(e){return this.has(e)?super.get(e):this.defaultValue()}update(e,n){const r=this.get(e),s=n(r);return this.set(e,s),s}}const Gm=3e4;function Qm(t,e){if(e.length<=Gm)t.push(...e);else for(let n=0;n<e.length;n+=Gm){const r=e.slice(n,n+Gm);t.push(...r)}}function mz(t,e,n){let r=0,s=t.length;for(;r<s;){const a=Math.floor((r+s)/2),l=n(t[a],e);if(l<0)r=a+1;else if(l>0)s=a;else return a}return r}class gz{constructor(){this.objectIds=new WeakMap,this.nextId=0}getId(e){if(typeof e!="object"||e===null){const n=String(e);let r=0;for(let s=0;s<n.length;s++){const a=n.charCodeAt(s);r=(r<<5)-r+a,r=r&r}return r}return this.objectIds.has(e)||this.objectIds.set(e,this.nextId++),this.objectIds.get(e)}getStringId(e){return e===null?"null":e===void 0?"undefined":typeof e!="object"?`str_${String(e)}`:`obj_${this.getId(e)}`}}const Zm=new gz;function yz(t,e){const[n,r]=t,[s,a]=e,l=[...lf(n,Math.min(r,s)),...lf(Math.max(n,a),r)],c=[...lf(s,Math.min(a,n)),...lf(Math.max(s,r),a)];return{onlyInA:l,onlyInB:c}}function lf(t,e){const n=[];for(let r=t;r<e;r++)n.push(r);return n}function ld(t,e){return typeof t==typeof e?t<e?-1:t>e?1:0:typeof t=="string"?-1:1}const vz=dn(),bz=dn(),xz=dn(),Sz=dn(),wz=dn();function dn(){return Math.random()*(2**31-1)>>>0}const FE=new ArrayBuffer(8),_z=new DataView(FE),Vs=new Uint8Array(FE);class Bd{constructor(){this.hash=vz,this.length=0,this.carry=0,this.carryBytes=0}_mix(e){e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e,this.hash=this.hash<<13|this.hash>>>19,this.hash=Math.imul(this.hash,5)+3864292196}writeByte(e){this.carry|=(e&255)<<8*this.carryBytes,this.carryBytes++,this.length++,this.carryBytes===4&&(this._mix(this.carry>>>0),this.carry=0,this.carryBytes=0)}update(e){switch(typeof e){case"symbol":{this.update(wz);const n=e.description;if(!n)return;for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);this.writeByte(s&255),this.writeByte(s>>>8&255)}return}case"string":this.update(bz);for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);this.writeByte(r&255),this.writeByte(r>>>8&255)}return;case"number":_z.setFloat64(0,e,!0),this.writeByte(Vs[0]),this.writeByte(Vs[1]),this.writeByte(Vs[2]),this.writeByte(Vs[3]),this.writeByte(Vs[4]),this.writeByte(Vs[5]),this.writeByte(Vs[6]),this.writeByte(Vs[7]);return;case"bigint":{let n=e;for(n<0n?(n=-n,this.update(Sz)):this.update(xz);n>0n;)this.writeByte(Number(n&0xffn)),n>>=8n;e===0n&&this.writeByte(0);return}default:throw new TypeError(`Unsupported input type: ${typeof e}`)}}digest(){if(this.carryBytes>0){let e=this.carry>>>0;e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e}return this.hash^=this.length,this.hash^=this.hash>>>16,this.hash=Math.imul(this.hash,2246822507),this.hash^=this.hash>>>13,this.hash=Math.imul(this.hash,3266489909),this.hash^=this.hash>>>16,this.hash>>>0}}const Cz=dn(),Ez=dn(),kz=dn(),Rz=dn(),Az=dn(),Tz=dn(),Oz=dn(),Mz=dn(),Nz=dn(),Iz=dn(),Dz=dn(),zz=dn(),jz=128,pu=new WeakMap;function wn(t){const e=new Bd;return $E(e,t),e.digest()}function Lz(t){const e=pu.get(t);if(e!==void 0)return e;let n;if(t instanceof Date)n=Pz(t);else if(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)if(t.byteLength<=jz)n=Fz(t);else return Yg(t);else{if(t instanceof File)return Yg(t);{let r=t,s=Mz;t instanceof Array&&(s=Nz),t instanceof Map&&(s=Iz,r=[...t.entries()]),t instanceof Set&&(s=Dz,r=[...t.entries()]),n=$z(r,s)}}return pu.set(t,n),n}function Pz(t){const e=new Bd;return e.update(Oz),e.update(t.getTime()),e.digest()}function Fz(t){const e=new Bd;e.update(zz),e.update(t.byteLength);for(let n=0;n<t.byteLength;n++)e.writeByte(t[n]);return e.digest()}function $z(t,e){const n=new Bd;n.update(e);const r=Object.keys(t);r.sort(Uz);for(const s of r)n.update(Az),n.update(s),$E(n,t[s]);return n.digest()}function $E(t,e){if(e===null){t.update(kz);return}switch(typeof e){case"undefined":t.update(Rz);return;case"boolean":t.update(e?Cz:Ez);return;case"number":t.update(isNaN(e)?NaN:e===0?0:e);return;case"bigint":case"string":case"symbol":t.update(e);return;case"object":t.update(Bz(e));return;case"function":t.update(Yg(e));return;default:console.warn(`Ignored input during hashing because it is of type ${typeof e} which is not supported`)}}function Bz(t){let e=pu.get(t);return e===void 0&&(e=Lz(t)),e}let k_=1;function Yg(t){let e=pu.get(t);return e===void 0&&(e=k_^Tz,k_++,pu.set(t,e)),e}function Uz(t,e){return t.localeCompare(e)}class Kt{#e;constructor(e=[]){this.#e=e}toString(e=!1){return`MultiSet(${JSON.stringify(this.#e,null,e?2:void 0)})`}toJSON(){return JSON.stringify(Array.from(this.getInner()))}static fromJSON(e){return new Kt(JSON.parse(e))}map(e){return new Kt(this.#e.map(([n,r])=>[e(n),r]))}filter(e){return new Kt(this.#e.filter(([n,r])=>e(n)))}negate(){return new Kt(this.#e.map(([e,n])=>[e,-n]))}concat(e){const n=[];return Qm(n,this.#e),Qm(n,e.getInner()),new Kt(n)}consolidate(){if(this.#e.length>0){const e=this.#e[0]?.[0];if(Array.isArray(e)&&e.length===2)return this.#t()}return this.#n()}#t(){const e=new Map,n=new Map,r=a=>{if(a.length!==2)throw new Error("Expected tuple of length 2");const[l,c]=a;return`${Zm.getStringId(l)}|${Zm.getStringId(c)}`};for(const[a,l]of this.#e){if(!Array.isArray(a)||a.length!==2)return this.#n();const[c,f]=a;if(typeof c!="string"&&typeof c!="number")return this.#n();let d;Array.isArray(f)&&f.length===2?d=r(f):d=Zm.getStringId(f);const m=c+"|"+d;e.set(m,(e.get(m)||0)+l),n.has(m)||n.set(m,a)}const s=[];for(const[a,l]of e)l!==0&&s.push([n.get(a),l]);return new Kt(s)}#n(){const e=new pz(()=>0),n=new Map;let r=!1,s=!1,a=!1;for(const[f,d]of this.#e)if(typeof f=="string")r=!0;else if(typeof f=="number")s=!0;else{a=!0;break}const l=a||r&&s;for(const[f,d]of this.#e){const m=l?wn(f):f;l&&!n.has(m)&&n.set(m,f),e.update(m,p=>p+d)}const c=[];for(const[f,d]of e.entries())if(d!==0){const m=l?n.get(f):f;c.push([m,d])}return new Kt(c)}extend(e){const n=e instanceof Kt?e.getInner():e;Qm(this.#e,n)}add(e,n){n!==0&&this.#e.push([e,n])}getInner(){return this.#e}}class qz{#e;constructor(e){this.#e=e}drain(){const e=[...this.#e].reverse();return this.#e.length=0,e}isEmpty(){return this.#e.length===0}}class qr{#e=[];sendData(e){e instanceof Kt||(e=new Kt(e));for(const n of this.#e)n.unshift(e)}newReader(){const e=[];return this.#e.push(e),new qz(e)}}class BE{constructor(e,n,r){this.id=e,this.inputs=n,this.output=r}hasPendingWork(){return this.inputs.some(e=>!e.isEmpty())}}class bo extends BE{constructor(e,n,r){super(e,[n],r),this.id=e}inputMessages(){return this.inputs[0].drain()}}class Hz extends BE{constructor(e,n,r,s){super(e,[n,r],s),this.id=e}inputAMessages(){return this.inputs[0].drain()}inputBMessages(){return this.inputs[1].drain()}}class x0 extends bo{run(){for(const e of this.inputMessages())this.output.sendData(this.inner(e))}}class Vz{#e=[];#t=0;#n=!1;constructor(){}#r(){if(this.#n)throw new Error("Graph already finalized")}getNextOperatorId(){return this.#r(),this.#t++}newInput(){this.#r();const e=new qr;return new Kz(this,e)}addOperator(e){this.#r(),this.#e.push(e)}finalize(){this.#r(),this.#n=!0}step(){if(!this.#n)throw new Error("Graph not finalized");for(const e of this.#e)e.run()}pendingWork(){return this.#e.some(e=>e.hasPendingWork())}run(){for(;this.pendingWork();)this.step()}}class Hr{#e;#t;constructor(e,n){this.#e=e,this.#t=n}connectReader(){return this.#t.newReader()}get writer(){return this.#t}get graph(){return this.#e}pipe(...e){return e.reduce((n,r)=>r(n),this)}}class Kz extends Hr{sendData(e){this.writer.sendData(e)}}class Gz extends x0{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.map(this.#e)}}function _n(t){return e=>{const n=new Hr(e.graph,new qr),r=new Gz(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const Ml=Symbol("NO_PREFIX");class R_ extends Map{addValue(e,n){if(n===0)return this.size===0;const r=Ql(e),s=this.get(r);if(jf(s)){const[a,l]=s;if(Ql(a)!==r)throw new Error("Mismatching prefixes, this should never happen");if(a===e||wn(a)===wn(e)){const f=l+n;f===0?this.delete(r):this.set(r,[e,f])}else{const f=new Nl;f.set(wn(a),s),f.set(wn(e),[e,n]),this.set(r,f)}}else s===void 0?this.set(r,[e,n]):s.addValue(e,n)&&this.delete(r);return this.size===0}}class Nl extends Map{addValue(e,n){if(n===0)return this.size===0;const r=wn(e),s=this.get(r);if(s){const[,a]=s,l=a+n;l===0?this.delete(r):this.set(r,[e,l])}else this.set(r,[e,n]);return this.size===0}}class Js{#e;#t=new Map;constructor(){this.#e=new Map}static fromMultiSets(e){const n=new Js;for(const r of e)for(const[s,a]of r.getInner()){const[l,c]=s;n.addValue(l,[c,a])}return n}toString(e=!1){return`Index(${JSON.stringify([...this.entries()],void 0,e?2:void 0)})`}get size(){return this.#e.size}has(e){return this.#e.has(e)}hasPresence(e){return(this.#t.get(e)||0)!==0}getConsolidatedMultiplicity(e){return this.#t.get(e)||0}getPresenceKeys(){return this.#t.keys()}get(e){return[...this.getIterator(e)]}*getIterator(e){const n=this.#e.get(e);if(jf(n))yield n;else{if(n===void 0)return;if(n instanceof Nl)for(const r of n.values())yield r;else for(const r of n.values())if(jf(r))yield r;else for(const s of r.values())yield s}}*entries(){for(const e of this.#e.keys())for(const n of this.getIterator(e))yield[e,n]}*entriesIterators(){for(const e of this.#e.keys())yield[e,this.getIterator(e)]}addValue(e,n){const[r,s]=n;if(s===0)return;const a=(this.#t.get(e)||0)+s;a===0?this.#t.delete(e):this.#t.set(e,a);const l=this.#e.get(e);if(l===void 0){this.#e.set(e,n);return}if(jf(l)){this.#n(e,l,r,s);return}if(l instanceof Nl){const c=Ql(r);if(c!==Ml){const f=new R_;f.set(Ml,l),f.set(c,n),this.#e.set(e,f)}else l.addValue(r,s)&&this.#e.delete(e)}else l.addValue(r,s)&&this.#e.delete(e)}#n(e,n,r,s){const[a,l]=n;if(a===r){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}const c=Ql(r),f=Ql(a);if(f===c&&(a===r||wn(a)===wn(r))){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}if(f===Ml&&c===Ml){const d=new Nl;d.set(wn(a),n),d.set(wn(r),[r,s]),this.#e.set(e,d)}else{const d=new R_;if(f===c){const m=new Nl;m.set(wn(a),n),m.set(wn(r),[r,s]),d.set(f,m)}else d.set(f,n),d.set(c,[r,s]);this.#e.set(e,d)}}append(e){for(const[n,r]of e.entries())this.addValue(n,r)}join(e){const n=[];if(this.size<=e.size)for(const[r,s]of this.entriesIterators()){if(!e.has(r))continue;const a=e.get(r);for(const[l,c]of s)for(const[f,d]of a)c!==0&&d!==0&&n.push([[r,[l,f]],c*d])}else for(const[r,s]of e.entriesIterators()){if(!this.has(r))continue;const a=this.get(r);for(const[l,c]of s)for(const[f,d]of a)d!==0&&c!==0&&n.push([[r,[f,l]],d*c])}return new Kt(n)}}function Ql(t){return Array.isArray(t)&&(typeof t[0]=="string"||typeof t[0]=="number"||typeof t[0]=="bigint")?t[0]:Ml}function jf(t){return Array.isArray(t)}class Qz extends bo{#e=new Js;#t=new Js;#n;constructor(e,n,r,s){super(e,n,r),this.#n=s}run(){const e=new Set;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const[l,c]=s;this.#e.addValue(l,[c,a]),e.add(l)}const n=[];for(const r of e){const s=this.#e.get(r),a=this.#t.get(r),l=this.#n(s),c=new Map,f=new Map;for(const[d,m]of l){const p=c.get(d)??0;c.set(d,p+m)}for(const[d,m]of a){const p=f.get(d)??0;f.set(d,p+m)}for(const[d,m]of f)c.has(d)||(n.push([[r,d],-m]),this.#t.addValue(r,[d,-m]));for(const[d,m]of c)f.has(d)||m!==0&&(n.push([[r,d],m]),this.#t.addValue(r,[d,m]));for(const[d,m]of c){const p=f.get(d);if(p!==void 0){const g=m-p;g!==0&&(n.push([[r,d],g]),this.#t.addValue(r,[d,g]))}}}n.length>0&&this.output.sendData(new Kt(n))}}function Zz(t){return e=>{const n=new Hr(e.graph,new qr),r=new Qz(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}function A_(t){return"pipe"in t}function T_(t,e={}){const n=Object.fromEntries(Object.entries(e).filter(([r,s])=>!A_(s)));return Object.fromEntries(Object.entries(e).filter(([r,s])=>A_(s))),r=>{const s="__original_key__";return r.pipe(_n(c=>{const f=t(c),d=JSON.stringify(f),m={};m[s]=f;for(const[p,g]of Object.entries(n))m[p]=g.preMap(c);return[d,m]})).pipe(Zz(c=>{let f=0;for(const[p,g]of c)f+=g;if(f<=0)return[];const d={},m=c[0]?.[0]?.[s];d[s]=m;for(const[p,g]of Object.entries(n)){const y=c.map(([x,S])=>[x[p],S]);d[p]=g.reduce(y)}return[[d,1]]})).pipe(_n(([c,f])=>{const d=f[s],m={};Object.assign(m,d);for(const[p,g]of Object.entries(n))g.postMap?m[p]=g.postMap(f[p]):m[p]=f[p];return[c,m]}))}}function Yz(t=e=>e){return{preMap:e=>t(e),reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function Jz(t=e=>e){return{preMap:e=>t(e)==null?0:1,reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function Xz(t=e=>e){return{preMap:e=>({sum:t(e),count:0}),reduce:e=>{let n=0,r=0;for(const[s,a]of e)n+=s.sum*a,r+=a;return{sum:n,count:r}},postMap:e=>e.sum/e.count}}function Wz(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s<r)&&(r=s);return r}}}function ej(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s>r)&&(r=s);return r}}}const tj={sum:Yz,count:Jz,avg:Xz,min:Wz,max:ej};class nj extends x0{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return this.#e(e),e}}function rj(t){return e=>{const n=new Hr(e.graph,new qr),r=new nj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class sj extends x0{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.filter(this.#e)}}function Xs(t){return e=>{const n=new Hr(e.graph,new qr),r=new sj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class ij extends bo{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}run(){for(const e of this.inputMessages())this.#e(e),this.output.sendData(e)}}function aj(t){return e=>{const n=new Hr(e.graph,new qr),r=new ij(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class oj extends bo{run(){const e=this.inputMessages();if(e.length===0)return;const n=new Kt;for(const s of e)n.extend(s);const r=n.consolidate();r.getInner().length>0&&this.output.sendData(r)}}function lj(){return t=>{const e=new Hr(t.graph,new qr),n=new oj(t.graph.getNextOperatorId(),t.connectReader(),e.writer);return t.graph.addOperator(n),e}}class uj extends Hz{#e=new Js;#t=new Js;#n;constructor(e,n,r,s,a="inner"){super(e,n,r,s),this.#n=a}run(){const e=Js.fromMultiSets(this.inputAMessages()),n=Js.fromMultiSets(this.inputBMessages());if(e.size===0&&n.size===0)return;const r=new Kt;this.#n!=="anti"&&this.emitInnerResults(e,n,r),(this.#n==="left"||this.#n==="full"||this.#n==="anti")&&this.emitLeftOuterResults(e,n,r),(this.#n==="right"||this.#n==="full")&&this.emitRightOuterResults(e,n,r),this.#e.append(e),this.#t.append(n),r.getInner().length>0&&this.output.sendData(r)}emitInnerResults(e,n,r){e.size>0&&r.extend(e.join(this.#t)),n.size>0&&r.extend(this.#e.join(n)),e.size>0&&n.size>0&&r.extend(e.join(n))}emitLeftOuterResults(e,n,r){if(e.size>0)for(const[s,a]of e.entriesIterators()){const l=this.#t.getConsolidatedMultiplicity(s),c=n.getConsolidatedMultiplicity(s);if(l+c===0)for(const[d,m]of a)m!==0&&r.add([s,[d,null]],m)}if(n.size>0)for(const s of n.getPresenceKeys()){const a=this.#t.getConsolidatedMultiplicity(s),l=n.getConsolidatedMultiplicity(s);if(l===0)continue;const c=a+l;if(a===0==(c===0))continue;const f=a===0;for(const[d,m]of this.#e.getIterator(s))m!==0&&r.add([s,[d,null]],f?-m:+m)}}emitRightOuterResults(e,n,r){if(n.size>0)for(const[s,a]of n.entriesIterators()){const l=this.#e.getConsolidatedMultiplicity(s),c=e.getConsolidatedMultiplicity(s);if(l+c===0)for(const[d,m]of a)m!==0&&r.add([s,[null,d]],m)}if(e.size>0)for(const s of e.getPresenceKeys()){const a=this.#e.getConsolidatedMultiplicity(s),l=e.getConsolidatedMultiplicity(s);if(l===0)continue;const c=a+l;if(a===0==(c===0))continue;const f=a===0;for(const[d,m]of this.#t.getIterator(s))m!==0&&r.add([s,[null,d]],f?-m:+m)}}}function cj(t,e="inner"){return n=>{if(n.graph!==t.graph)throw new Error("Cannot join streams from different graphs");const r=new Hr(n.graph,new qr),s=new uj(n.graph.getNextOperatorId(),n.connectReader(),t.connectReader(),r.writer,e);return n.graph.addOperator(s),r}}class fj extends bo{#e;#t;constructor(e,n,r,s=a=>a){super(e,n,r),this.#e=s,this.#t=new Map}run(){const e=new Map;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const l=wn(this.#e(s)),f=(e.get(l)?.[0]??this.#t.get(l)??0)+a;e.set(l,[f,s])}const n=[];for(const[r,[s,a]]of e.entries()){const l=this.#t.get(r)??0;s===0?this.#t.delete(r):this.#t.set(r,s),l<=0&&s>0?n.push([[wn(this.#e(a)),a[1]],1]):l>0&&s<=0&&n.push([[wn(this.#e(a)),a[1]],-1])}n.length>0&&this.output.sendData(new Kt(n))}}function dj(t=e=>e){return e=>{const n=new Hr(e.graph,new qr),r=new fj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const hj="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Ja(t,e,n){const r=n[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let l=0;for(;(t[l]||r)===e[l];)l++;if(l>0)return e.slice(0,l)+Ja(t.slice(l),e.slice(l),n)}const s=t?n.indexOf(t[0]):0,a=e!=null?n.indexOf(e[0]):n.length;if(a-s>1){const l=Math.round(.5*(s+a));return n[l]}else return e&&e.length>1?e.slice(0,1):n[s]+Ja(t.slice(1),null,n)}function UE(t){if(t.length!==qE(t[0]))throw new Error("invalid integer part of order key: "+t)}function qE(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function Il(t){const e=qE(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function O_(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const n=Il(t);if(t.slice(n.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function M_(t,e){UE(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])+1;l===e.length?r[a]=e[0]:(r[a]=e[l],s=!1)}if(s){if(n==="Z")return"a"+e[0];if(n==="z")return null;const a=String.fromCharCode(n.charCodeAt(0)+1);return a>"a"?r.push(e[0]):r.pop(),a+r.join("")}else return n+r.join("")}function pj(t,e){UE(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])-1;l===-1?r[a]=e.slice(-1):(r[a]=e[l],s=!1)}if(s){if(n==="a")return"Z"+e.slice(-1);if(n==="A")return null;const a=String.fromCharCode(n.charCodeAt(0)-1);return a<"Z"?r.push(e.slice(-1)):r.pop(),a+r.join("")}else return n+r.join("")}function mj(t,e,n=hj){if(t!=null&&O_(t,n),e!=null&&O_(e,n),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+n[0];const f=Il(e),d=e.slice(f.length);if(f==="A"+n[0].repeat(26))return f+Ja("",d,n);if(f<e)return f;const m=pj(f,n);if(m==null)throw new Error("cannot decrement any more");return m}if(e==null){const f=Il(t),d=t.slice(f.length),m=M_(f,n);return m??f+Ja(d,null,n)}const r=Il(t),s=t.slice(r.length),a=Il(e),l=e.slice(a.length);if(r===a)return r+Ja(s,l,n);const c=M_(r,n);if(c==null)throw new Error("cannot increment any more");return c<e?c:r+Ja(s,null,n)}class N_{#e=[];#t;#n;#r;constructor(e,n,r){this.#n=e,this.#r=e+n,this.#t=r}get size(){const e=this.#n,n=this.#r-this.#n,r=this.#e.length-e;return Math.max(0,Math.min(n,r))}move({offset:e,limit:n}){const r=this.#n,s=this.#r-this.#n,a=[this.#n,this.#r===1/0?this.#n+this.size:this.#r];this.#n=e??r,this.#r=this.#n+(n??s);const l=[this.#n,this.#r===1/0?Math.max(this.#n+this.size,a[1]):this.#r],{onlyInA:c,onlyInB:f}=yz(a,l),d=[];f.forEach(p=>{const g=this.#e[p];g&&d.push(g)});const m=[];return c.forEach(p=>{const g=this.#e[p];g&&m.push(g)}),{moveIns:d,moveOuts:m,changes:c.length+f.length>0}}insert(e){const n={moveIn:null,moveOut:null},r=this.#s(e),s=r===0?null:z_(this.#e[r-1]),a=r===this.#e.length?null:z_(this.#e[r]),l=mj(s,a),c=I_(e,l);if(this.#e.splice(r,0,c),r<this.#r){const f=Math.max(r,this.#n);f<this.#e.length&&(n.moveIn=this.#e[f],this.#r<this.#e.length&&(n.moveOut=this.#e[this.#r]))}return n}delete(e){const n={moveIn:null,moveOut:null},r=this.#s(e),[s]=this.#e.splice(r,1);if(r<this.#r){if(n.moveOut=s,r<this.#n){const l=this.#n-1;l<this.#e.length?n.moveOut=this.#e[l]:n.moveOut=null}const a=this.#r-1;a<this.#e.length&&(n.moveIn=this.#e[a])}return n}#s(e){return mz(this.#e,I_(e,""),(n,r)=>this.#t(D_(n),D_(r)))}}class gj extends bo{#e=new Map;#t;constructor(e,n,r,s,a){super(e,n,r);const l=a.limit??1/0,c=a.offset??0;this.#t=this.createTopK(c,l,vj(s)),a.setSizeCallback?.(()=>this.#t.size),a.setWindowFn?.(this.moveTopK.bind(this))}createTopK(e,n,r){return new N_(e,n,r)}moveTopK({offset:e,limit:n}){if(!(this.#t instanceof N_))throw new Error("Cannot move B+-tree implementation of TopK with fractional index");const r=[],s=this.#t.move({offset:e,limit:n});s.moveIns.forEach(a=>this.handleMoveIn(a,r)),s.moveOuts.forEach(a=>this.handleMoveOut(a,r)),s.changes&&this.output.sendData(new Kt(r))}run(){const e=[];for(const n of this.inputMessages())for(const[r,s]of n.getInner()){const[a,l]=r;this.processElement(a,l,s,e)}e.length>0&&this.output.sendData(new Kt(e))}processElement(e,n,r,s){const{oldMultiplicity:a,newMultiplicity:l}=this.addKey(e,r);let c={moveIn:null,moveOut:null};a<=0&&l>0?c=this.#t.insert([e,n]):a>0&&l<=0&&(c=this.#t.delete([e,n])),this.handleMoveIn(c.moveIn,s),this.handleMoveOut(c.moveOut,s)}handleMoveIn(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],1])}}handleMoveOut(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],-1])}}getMultiplicity(e){return this.#e.get(e)??0}addKey(e,n){const r=this.getMultiplicity(e),s=r+n;return s===0?this.#e.delete(e):this.#e.set(e,s),{oldMultiplicity:r,newMultiplicity:s}}}function yj(t,e){const n=e||{};return r=>{const s=new Hr(r.graph,new qr),a=new gj(r.graph.getNextOperatorId(),r.connectReader(),s.writer,t,n);return r.graph.addOperator(a),s}}function I_(t,e){return[t,e]}function D_(t){return t[0]}function z_(t){return t[1]}function vj(t){return([e,n],[r,s])=>{const a=t(n,s);return a!==0?a:ld(e,r)}}function bj(t,e,n){const r=n?.limit??1/0,s=n?.offset??0,a=n?.setSizeCallback,l=n?.setWindowFn,c=n?.comparator??((f,d)=>f===d?0:f<d?-1:1);return f=>f.pipe(t((d,m)=>c(e(d),e(m)),{limit:r,offset:s,setSizeCallback:a,setWindowFn:l}),lj())}function xj(t,e){return bj(yj,t,e)}class Sj{constructor(e,n,r){this._root=Ym,this._size=0,this._maxNodeSize=r>=4?Math.min(r,256):32,this._compare=e,n&&this.setPairs(n)}get size(){return this._size}get length(){return this._size}get isEmpty(){return this._size===0}clear(){this._root=Ym,this._size=0}get(e,n){return this._root.get(e,n,this)}set(e,n,r){this._root.isShared&&(this._root=this._root.clone());const s=this._root.set(e,n,r,this);return s===!0||s===!1?s:(this._root=new S0([this._root,s]),!0)}has(e){return this.forRange(e,e,!0,void 0)!==0}delete(e){return this.editRange(e,e,!0,_j)!==0}get maxNodeSize(){return this._maxNodeSize}minKey(){return this._root.minKey()}maxKey(){return this._root.maxKey()}keysArray(){const e=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,(n,r)=>{e.push(n)}),e}nextHigherPair(e,n){return n=n||[],e===void 0?this._root.minPair(n):this._root.getPairOrNextHigher(e,this._compare,!1,n)}nextHigherKey(e){const n=this.nextHigherPair(e,j_);return n&&n[0]}nextLowerPair(e,n){return n=n||[],e===void 0?this._root.maxPair(n):this._root.getPairOrNextLower(e,this._compare,!1,n)}nextLowerKey(e){const n=this.nextLowerPair(e,j_);return n&&n[0]}setPairs(e,n){let r=0;for(const s of e)this.set(s[0],s[1],n)&&r++;return r}forRange(e,n,r,s,a){const l=this._root.forRange(e,n,r,!1,this,a||0,s);return typeof l=="number"?l:l.break}editRange(e,n,r,s,a){let l=this._root;l.isShared&&(this._root=l=l.clone());try{const c=l.forRange(e,n,r,!0,this,a||0,s);return typeof c=="number"?c:c.break}finally{let c;for(;l.keys.length<=1&&!l.isLeaf;)c||=l.isShared,this._root=l=l.keys.length===0?Ym:l.children[0];c&&(l.isShared=!0)}}}class mu{get isLeaf(){return this.children===void 0}constructor(e=[],n){this.keys=e,this.values=n||pn,this.isShared=void 0}maxKey(){return this.keys[this.keys.length-1]}indexOf(e,n,r){const s=this.keys;let a=0,l=s.length,c=l>>1;for(;a<l;){const f=r(s[c],e);if(f<0)a=c+1;else if(f>0)l=c;else{if(f===0)return c;if(e===e)return s.length;throw new Error("BTree: NaN was used as a key")}c=a+l>>1}return c^n}minKey(){return this.keys[0]}minPair(e){if(this.keys.length!==0)return e[0]=this.keys[0],e[1]=this.values[0],e}maxPair(e){if(this.keys.length===0)return;const n=this.keys.length-1;return e[0]=this.keys[n],e[1]=this.values[n],e}clone(){const e=this.values;return new mu(this.keys.slice(0),e===pn?e:e.slice(0))}get(e,n,r){const s=this.indexOf(e,-1,r._compare);return s<0?n:this.values[s]}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a-1:r?a:a-1;if(l>=0)return s[0]=this.keys[l],s[1]=this.values[l],s}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a:r?a:a+1,c=this.keys;if(l<c.length)return s[0]=c[l],s[1]=this.values[l],s}set(e,n,r,s){let a=this.indexOf(e,-1,s._compare);if(a<0){if(a=~a,s._size++,this.keys.length<s._maxNodeSize)return this.insertInLeaf(a,e,n,s);{const l=this.splitOffRightSide();let c=this;return a>this.keys.length&&(a-=this.keys.length,c=l),c.insertInLeaf(a,e,n,s),l}}else return r!==!1&&(n!==void 0&&this.reifyValues(),this.keys[a]=e,this.values[a]=n),!1}reifyValues(){return this.values===pn?this.values=this.values.slice(0,this.keys.length):this.values}insertInLeaf(e,n,r,s){if(this.keys.splice(e,0,n),this.values===pn){for(;pn.length<s._maxNodeSize;)pn.push(void 0);if(r===void 0)return!0;this.values=pn.slice(0,this.keys.length-1)}return this.values.splice(e,0,r),!0}takeFromRight(e){let n=this.values;e.values===pn?n!==pn&&n.push(void 0):(n=this.reifyValues(),n.push(e.values.shift())),this.keys.push(e.keys.shift())}takeFromLeft(e){let n=this.values;e.values===pn?n!==pn&&n.unshift(void 0):(n=this.reifyValues(),n.unshift(e.values.pop())),this.keys.unshift(e.keys.pop())}splitOffRightSide(){const e=this.keys.length>>1,n=this.keys.splice(e),r=this.values===pn?pn:this.values.splice(e);return new mu(n,r)}forRange(e,n,r,s,a,l,c){const f=a._compare;let d,m;if(n===e){if(!r||(m=(d=this.indexOf(e,-1,f))+1,d<0))return l}else d=this.indexOf(e,0,f),m=this.indexOf(n,-1,f),m<0?m=~m:r===!0&&m++;const p=this.keys,g=this.values;if(c!==void 0)for(let y=d;y<m;y++){const x=p[y],S=c(x,g[y],l++);if(S!==void 0){if(s===!0){if(x!==p[y]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");S.delete?(this.keys.splice(y,1),this.values!==pn&&this.values.splice(y,1),a._size--,y--,m--):S.hasOwnProperty("value")&&(g[y]=S.value)}if(S.break!==void 0)return S}}else l+=m-d;return l}mergeSibling(e,n){if(this.keys.push.apply(this.keys,e.keys),this.values===pn){if(e.values===pn)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,e.reifyValues())}}class S0 extends mu{constructor(e,n){if(!n){n=[];for(let r=0;r<e.length;r++)n[r]=e[r].maxKey()}super(n),this.children=e}minKey(){return this.children[0].minKey()}minPair(e){return this.children[0].minPair(e)}maxPair(e){return this.children[this.children.length-1].maxPair(e)}get(e,n,r){const s=this.indexOf(e,0,r._compare),a=this.children;return s<a.length?a[s].get(e,n,r):void 0}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children;if(a>=l.length)return this.maxPair(s);const c=l[a].getPairOrNextLower(e,n,r,s);return c===void 0&&a>0?l[a-1].maxPair(s):c}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children,c=l.length;if(a>=c)return;const f=l[a].getPairOrNextHigher(e,n,r,s);return f===void 0&&a<c-1?l[a+1].minPair(s):f}set(e,n,r,s){const a=this.children,l=s._maxNodeSize,c=s._compare;let f=Math.min(this.indexOf(e,0,c),a.length-1),d=a[f];if(d.isShared&&(a[f]=d=d.clone()),d.keys.length>=l){let p;f>0&&(p=a[f-1]).keys.length<l&&c(d.keys[0],e)<0?(p.isShared&&(a[f-1]=p=p.clone()),p.takeFromRight(d),this.keys[f-1]=p.maxKey()):(p=a[f+1])!==void 0&&p.keys.length<l&&c(d.maxKey(),e)<0&&(p.isShared&&(a[f+1]=p=p.clone()),p.takeFromLeft(d),this.keys[f]=a[f].maxKey())}const m=d.set(e,n,r,s);if(m===!1)return!1;if(this.keys[f]=d.maxKey(),m===!0)return!0;if(this.keys.length<l)return this.insert(f+1,m),!0;{const p=this.splitOffRightSide();let g=this;return c(m.maxKey(),this.maxKey())>0&&(g=p,f-=this.keys.length),g.insert(f+1,m),p}}insert(e,n){this.children.splice(e,0,n),this.keys.splice(e,0,n.maxKey())}splitOffRightSide(){const e=this.children.length>>1;return new S0(this.children.splice(e),this.keys.splice(e))}takeFromRight(e){this.keys.push(e.keys.shift()),this.children.push(e.children.shift())}takeFromLeft(e){this.keys.unshift(e.keys.pop()),this.children.unshift(e.children.pop())}forRange(e,n,r,s,a,l,c){const f=a._compare,d=this.keys,m=this.children;let p=this.indexOf(e,0,f),g=p;const y=Math.min(n===e?p:this.indexOf(n,0,f),d.length-1);if(s){if(g<=y)try{for(;g<=y;g++){m[g].isShared&&(m[g]=m[g].clone());const x=m[g].forRange(e,n,r,s,a,l,c);if(d[g]=m[g].maxKey(),typeof x!="number")return x;l=x}}finally{const x=a._maxNodeSize>>1;for(p>0&&p--,g=y;g>=p;g--)m[g].keys.length<=x&&(m[g].keys.length!==0?this.tryMerge(g,a._maxNodeSize):(d.splice(g,1),m.splice(g,1)));m.length!==0&&m[0].keys.length===0&&Cj(!1,"emptiness bug")}}else for(;g<=y;g++){const x=m[g].forRange(e,n,r,s,a,l,c);if(typeof x!="number")return x;l=x}return l}tryMerge(e,n){const r=this.children;return e>=0&&e+1<r.length&&r[e].keys.length+r[e+1].keys.length<=n?(r[e].isShared&&(r[e]=r[e].clone()),r[e].mergeSibling(r[e+1],n),r.splice(e+1,1),this.keys.splice(e+1,1),this.keys[e]=r[e].maxKey(),!0):!1}mergeSibling(e,n){const r=this.keys.length;this.keys.push.apply(this.keys,e.keys);const s=e.children;if(this.children.push.apply(this.children,s),e.isShared&&!this.isShared)for(const a of s)a.isShared=!0;this.tryMerge(r-1,n)}}const pn=[],wj={delete:!0},_j=()=>wj,Ym=(function(){const t=new mu;return t.isShared=!0,t})(),j_=[];function Cj(t,...e){throw e.unshift("B+ tree"),new Error(e.join(" "))}function Ej(){const t=new Map;function e(n){const r=n.join(".");if(t.has(r))return t.get(r);const s=new Proxy({},{get(a,l,c){if(l==="__refProxy")return!0;if(l==="__path")return n;if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,c);const f=[...n,String(l)];return e(f)},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?!0:Reflect.has(a,l)},ownKeys(a){return Reflect.ownKeys(a)},getOwnPropertyDescriptor(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(a,l)}});return t.set(r,s),s}return e([])}function Fa(t){const e=new Map;let n=0;function r(a){const l=a.join(".");if(e.has(l))return e.get(l);const c=new Proxy({},{get(f,d,m){if(d==="__refProxy")return!0;if(d==="__path")return a;if(d==="__type")return;if(typeof d=="symbol")return Reflect.get(f,d,m);const p=[...a,String(d)];return r(p)},has(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?!0:Reflect.has(f,d)},ownKeys(f){const d=++n,m=`__SPREAD_SENTINEL__${a.join(".")}__${d}`;return Object.prototype.hasOwnProperty.call(f,m)||Object.defineProperty(f,m,{enumerable:!0,configurable:!0,value:!0}),Reflect.ownKeys(f)},getOwnPropertyDescriptor(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(f,d)}});return e.set(l,c),c}return new Proxy({},{get(a,l,c){if(l==="__refProxy")return!0;if(l==="__path")return[];if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,c);const f=String(l);if(t.includes(f))return r([f])},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"||typeof l=="string"&&t.includes(l)?!0:Reflect.has(a,l)},ownKeys(a){return[...t,"__refProxy","__path","__type"]},getOwnPropertyDescriptor(a,l){if(l==="__refProxy"||l==="__path"||l==="__type")return{enumerable:!1,configurable:!0};if(typeof l=="string"&&t.includes(l))return{enumerable:!0,configurable:!0}}})}function en(t){return kj(t)?new En(t.__path):t&&typeof t=="object"&&"type"in t&&(t.type==="func"||t.type==="ref"||t.type==="val"||t.type==="agg")?t:new jn(t)}function kj(t){return t&&typeof t=="object"&&t.__refProxy===!0}function Jg(t,e){return new Sr("eq",[en(t),en(e)])}function L_(t,e){return new Sr("gt",[en(t),en(e)])}function Rj(t,e){return new Sr("gte",[en(t),en(e)])}function Xg(t,e){return new Sr("lt",[en(t),en(e)])}function Wg(t,e,...n){const r=[t,e,...n];return new Sr("and",r.map(s=>en(s)))}function Aj(t,e,...n){const r=[t,e,...n];return new Sr("or",r.map(s=>en(s)))}function Tj(t,e){return new Sr("in",[en(t),en(e)])}class Oj{constructor(e,n,r,s){this.lookupCount=0,this.totalLookupTime=0,this.lastUpdated=new Date,this.id=e,this.expression=n,this.compareOptions=v0,this.name=r,this.initialize(s)}supports(e){return this.supportedOperations.has(e)}matchesField(e){return this.expression.type==="ref"&&this.expression.path.length===e.length&&this.expression.path.every((n,r)=>n===e[r])}matchesCompareOptions(e){const n={...this.compareOptions,direction:void 0},r={...e,direction:void 0};return Tr(n,r)}matchesDirection(e){return this.compareOptions.direction===e}getStats(){return{entryCount:this.keyCount,lookupCount:this.lookupCount,averageLookupTime:this.lookupCount>0?this.totalLookupTime/this.lookupCount:0,lastUpdated:this.lastUpdated}}evaluateIndexExpression(e){return g0(this.expression)(e)}trackLookup(e){const n=performance.now()-e;this.lookupCount++,this.totalLookupTime+=n}updateTimestamp(){this.lastUpdated=new Date}}class ey extends Oj{constructor(e,n,r,s){super(e,n,r,s),this.supportedOperations=new Set(["eq","gt","gte","lt","lte","in"]),this.valueMap=new Map,this.indexedKeys=new Set,this.compareFn=Qg,this.compareFn=s?.compareFn??Qg,s?.compareOptions&&(this.compareOptions=s.compareOptions),this.orderedEntries=new Sj(this.compareFn)}initialize(e){}add(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){throw new Error(`Failed to evaluate index expression for key ${e}: ${a}`)}const s=ps(r);if(this.valueMap.has(s))this.valueMap.get(s).add(e);else{const a=new Set([e]);this.valueMap.set(s,a),this.orderedEntries.set(s,void 0)}this.indexedKeys.add(e),this.updateTimestamp()}remove(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){console.warn(`Failed to evaluate index expression for key ${e} during removal:`,a);return}const s=ps(r);if(this.valueMap.has(s)){const a=this.valueMap.get(s);a.delete(e),a.size===0&&(this.valueMap.delete(s),this.orderedEntries.delete(s))}this.indexedKeys.delete(e),this.updateTimestamp()}update(e,n,r){this.remove(e,n),this.add(e,r)}build(e){this.clear();for(const[n,r]of e)this.add(n,r)}clear(){this.orderedEntries.clear(),this.valueMap.clear(),this.indexedKeys.clear(),this.updateTimestamp()}lookup(e,n){const r=performance.now();let s;switch(e){case"eq":s=this.equalityLookup(n);break;case"gt":s=this.rangeQuery({from:n,fromInclusive:!1});break;case"gte":s=this.rangeQuery({from:n,fromInclusive:!0});break;case"lt":s=this.rangeQuery({to:n,toInclusive:!1});break;case"lte":s=this.rangeQuery({to:n,toInclusive:!0});break;case"in":s=this.inArrayLookup(n);break;default:throw new Error(`Operation ${e} not supported by BTreeIndex`)}return this.trackLookup(r),s}get keyCount(){return this.indexedKeys.size}equalityLookup(e){const n=ps(e);return new Set(this.valueMap.get(n)??[])}rangeQuery(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e,l=new Set,c=ps(n),f=ps(r),d=c??this.orderedEntries.minKey(),m=f??this.orderedEntries.maxKey();return this.orderedEntries.forRange(d,m,a,(p,g)=>{if(!s&&this.compareFn(p,n)===0)return;const y=this.valueMap.get(p);y&&y.forEach(x=>l.add(x))}),l}rangeQueryReversed(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e;return this.rangeQuery({from:r??this.orderedEntries.maxKey(),to:n??this.orderedEntries.minKey(),fromInclusive:a,toInclusive:s})}takeInternal(e,n,r,s,a=!1){const l=new Set,c=[];let f,d=ps(r);for(;(f=n(d))!==void 0&&c.length<e;){d=f[0];const m=this.valueMap.get(d);if(m&&m.size>0){const p=Array.from(m).sort(ld);a&&p.reverse();for(const g of p){if(c.length>=e)break;!l.has(g)&&(s?.(g)??!0)&&(c.push(g),l.add(g))}}}return c}take(e,n,r){const s=a=>this.orderedEntries.nextHigherPair(a);return this.takeInternal(e,s,n,r)}takeReversed(e,n,r){const s=a=>this.orderedEntries.nextLowerPair(a);return this.takeInternal(e,s,n,r,!0)}inArrayLookup(e){const n=new Set;for(const r of e){const s=ps(r),a=this.valueMap.get(s);a&&a.forEach(l=>n.add(l))}return n}get indexedKeysSet(){return this.indexedKeys}get orderedEntriesArray(){return this.orderedEntries.keysArray().map(e=>[e,this.valueMap.get(e)??new Set])}get orderedEntriesArrayReversed(){return this.takeReversed(this.orderedEntries.size).map(e=>[e,this.valueMap.get(e)??new Set])}get valueMapData(){return this.valueMap}}function HE(t){return t.config.autoIndex==="eager"}function Ud(t,e,n,r,s){if(!HE(n))return;const a=r??{...v0,...n.compareOptions};if(!Array.from(n.indexes.values()).find(c=>c.matchesField(e)&&c.matchesCompareOptions(a)))try{n.createIndex(c=>{let f=c;for(const d of e)f=f[d];return f},{name:`auto:${e.join(".")}`,indexType:ey,options:s?{compareFn:s,compareOptions:a}:{}})}catch(c){console.warn(`${n.id?`[${n.id}] `:""}Failed to create auto-index for field path "${e.join(".")}":`,c)}}function Mj(t,e){if(!HE(e))return;const n=Nj(t);for(const{fieldName:r,fieldPath:s}of n)Ud(r,s,e)}function Nj(t){const e=[];function n(r){if(r.type!=="func")return;const s=r;if(s.name==="and"){for(const d of s.args)n(d);return}if(!["eq","gt","gte","lt","lte","in"].includes(s.name)||s.args.length<1||s.args[0].type!=="ref")return;const c=s.args[0].path;if(c.length===0)return;const f=c.join("_");e.push({fieldName:f,fieldPath:c})}return n(t),e}const{sum:Ij,count:Dj,avg:zj,min:jj,max:Lj}=tj;function Pj(t,e){const n=new Map,r=[...t];if(!e)return{selectToGroupByIndex:n,groupByExpressions:r};for(const[s,a]of Object.entries(e)){if(a.type==="agg")continue;const l=r.findIndex(c=>ud(a,c));if(l===-1)throw new B4(s);n.set(s,l)}return{selectToGroupByIndex:n,groupByExpressions:r}}function P_(t,e,n,r,s){if(e.length===0){const d={};if(r){for(const[p,g]of Object.entries(r))if(g.type==="agg"){const y=g;d[p]=F_(y)}}const m=()=>({__singleGroup:!0});if(t=t.pipe(T_(m,d)),t=t.pipe(_n(([,p])=>{const y={...p.__select_results||{}};if(r)for(const[x,S]of Object.entries(r))S.type==="agg"&&(y[x]=p[x]);return["single_group",{...p,__select_results:y}]})),n&&n.length>0)for(const p of n){const g=g_(p),y=cd(g,r||{}),x=Ln(y);t=t.pipe(Xs(([,S])=>{const E={result:S.__select_results};return ro(x(E))}))}if(s&&s.length>0)for(const p of s)t=t.pipe(Xs(([,g])=>{const y={result:g.__select_results};return ro(p(y))}));return t}const a=Pj(e,r),l=e.map(d=>Ln(d)),c=([,d])=>{const m={...d};delete m.__select_results;const p={};for(let g=0;g<e.length;g++){const y=l[g],x=y(m);p[`__key_${g}`]=x}return p},f={};if(r){for(const[d,m]of Object.entries(r))if(m.type==="agg"){const p=m;f[d]=F_(p)}}if(t=t.pipe(T_(c,f)),t=t.pipe(_n(([,d])=>{const m=d.__select_results||{},p={};if(r)for(const[y,x]of Object.entries(r))if(x.type!=="agg"){const S=a.selectToGroupByIndex.get(y);S!==void 0?p[y]=d[`__key_${S}`]:p[y]=m[y]}else p[y]=d[y];else for(let y=0;y<e.length;y++)p[`__key_${y}`]=d[`__key_${y}`];let g;if(e.length===1)g=d.__key_0;else{const y=[];for(let x=0;x<e.length;x++)y.push(d[`__key_${x}`]);g=JSON.stringify(y)}return[g,{...d,__select_results:p}]})),n&&n.length>0)for(const d of n){const m=g_(d),p=cd(m,r||{}),g=Ln(p);t=t.pipe(Xs(([,y])=>{const x={result:y.__select_results};return g(x)}))}if(s&&s.length>0)for(const d of s)t=t.pipe(Xs(([,m])=>{const p={result:m.__select_results};return ro(d(p))}));return t}function ud(t,e){if(!t||!e||t.type!==e.type)return!1;switch(t.type){case"ref":return!t.path||!e.path||t.path.length!==e.path.length?!1:t.path.every((n,r)=>n===e.path[r]);case"val":return t.value===e.value;case"func":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>ud(n,e.args[r]));case"agg":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>ud(n,e.args[r]));default:return!1}}function F_(t){const e=Ln(t.args[0]),n=([,a])=>{const l=e(a);return typeof l=="number"?l:l!=null?Number(l):0},r=([,a])=>{const l=e(a);return typeof l=="number"||l instanceof Date?l:l!=null?Number(l):0},s=([,a])=>e(a);switch(t.name.toLowerCase()){case"sum":return Ij(n);case"count":return Dj(s);case"avg":return zj(n);case"min":return jj(r);case"max":return Lj(r);default:throw new U4(t.name)}}function cd(t,e,n="result"){switch(t.type){case"agg":{const r=t;for(const[s,a]of Object.entries(e))if(a.type==="agg"&&Fj(r,a))return new En([n,s]);throw new q4(r.name)}case"func":{const r=t,s=r.args.map(a=>cd(a,e));return new Sr(r.name,s)}case"ref":return t;case"val":return t;default:throw new H4(t.type)}}function Fj(t,e){return t.name===e.name&&t.args.length===e.args.length&&t.args.every((n,r)=>ud(n,e.args[r]))}function $j(t,e,n,r,s,a,l,c,f){const d=n.map(x=>{const S=cd(x.expression,r,"__select_results");return{compiledExpression:Ln(S),compareOptions:ty(x,s)}}),m=x=>{const S=x;return n.length>1?d.map(E=>E.compiledExpression(S)):n.length===1?d[0].compiledExpression(S):null},p=(x,S)=>{if(n.length>1){const E=x,C=S;for(let k=0;k<n.length;k++){const R=d[k],j=ad(R.compareOptions)(E[k],C[k]);if(j!==0)return j}return E.length-C.length}if(n.length===1){const E=d[0];return ad(E.compareOptions)(x,S)}return Qg(x,S)};let g,y;if(c){let x,S,E,C=t.from.alias;const k=n[0],R=k.expression;if(R.type==="ref"){const I=hu(t,R,s);if(I){S=I.collection;const j=I.path[0],A=ty(k,S);j&&Ud(j,I.path,S,A,p),E=Ln(new En(I.path),!0),x=Au(S,I.path,A),x?.supports("gt")||(x=void 0),C=R.path.length>1?String(R.path[0]):t.from.alias}}if(E){const j=n.every(P=>P.expression.type==="ref")?n.map(P=>{const M=P.expression,$=hu(t,M,s);return Ln($?new En($.path):P.expression,!0)}):void 0;y={alias:C,offset:f??0,limit:c,comparator:(P,M)=>{if(n.length===1){const $=P&&E(P),G=M&&E(M);return p($,G)}if(j){const $=G=>G&&j.map(ee=>ee(G));return p($(P),$(M))}return 0},valueExtractorForRawRow:P=>{if(n.length===1)return E(P);if(j)return j.map(M=>M(P))},firstColumnValueExtractor:E,index:x,orderBy:n};const L=S?.id??s.id;a[L]=y,x&&(g=P=>{a[L].dataNeeded=()=>{const M=P();return Math.max(0,y.limit-M)}})}}return e.pipe(xj(m,{limit:c,offset:f,comparator:p,setSizeCallback:g,setWindowFn:x=>{l(S=>{x(S),y&&(y.offset=S.offset??y.offset,y.limit=S.limit??y.limit)})}}))}function ty(t,e){return t.compareOptions.stringSort!==void 0?t.compareOptions:{...e.compareOptions,direction:t.compareOptions.direction,nulls:t.compareOptions.nulls}}function Bj(t,e={}){const n=r=>{const s=[];for(const[a,l]of t.entries())(r?.(l)??!0)&&s.push({type:"insert",key:a,value:l});return s};if(e.limit!==void 0&&!e.orderBy)throw new Error("limit cannot be used without orderBy");if(e.orderBy){const r=e.where?Zl(e.where):void 0,s=qj(t,e.orderBy,e.limit,r,e.optimizedOnly);if(s===void 0)return;const a=[];for(const l of s){const c=t.get(l);c!==void 0&&a.push({type:"insert",key:l,value:c})}return a}if(!e.where)return n();try{const r=e.where,s=lz(r,t);if(s.canOptimize){const a=[];for(const l of s.matchingKeys){const c=t.get(l);c!==void 0&&a.push({type:"insert",key:l,value:c})}return a}else{if(e.optimizedOnly)return;const a=Zl(r);return n(a)}}catch(r){console.warn(`${t.id?`[${t.id}] `:""}Error processing where clause, falling back to full scan:`,r);const s=Zl(e.where);return e.optimizedOnly?void 0:n(s)}}function Zl(t){const e=g0(t);return n=>{try{const r=e(n);return ro(r)}catch{return!1}}}function Uj(t,e){const n=Zl(e.whereExpression);return r=>{const s=[];for(const a of r)if(a.type==="insert")n(a.value)&&s.push(a);else if(a.type==="update"){const l=n(a.value),c=a.previousValue?n(a.previousValue):!1;l&&c?s.push(a):l&&!c?s.push({...a,type:"insert"}):!l&&c&&s.push({...a,type:"delete",value:a.previousValue})}else n(a.value)&&s.push(a);(s.length>0||r.length===0)&&t(s)}}function qj(t,e,n,r,s){if(e.length===1){const f=e[0],d=f.expression;if(d.type==="ref"){const p=d.path,g=ty(f,t);Ud(p[0],p,t,g);const y=Au(t,p,g);if(y&&y.supports("gt")){const x=S=>{const E=t.get(S);return E===void 0?!1:r?.(E)??!0};return y.take(n??y.keyCount,void 0,x)}}}if(s)return;const a=[];for(const[f,d]of t.entries())(r?.(d)??!0)&&a.push({key:f,value:d});const l=(f,d)=>{for(const m of e){const p=ad(m.compareOptions),g=$_(f.value,m.expression),y=$_(d.value,m.expression),x=p(g,y);if(x!==0)return x}return 0};a.sort(l);const c=a.map(f=>f.key);return n!==void 0?c.slice(0,n):c}function $_(t,e){if(e.type==="ref"){const n=e;let r=t;for(const s of n.path)r=r?.[s];return r}else return e.type==="val"?e.value:g0(e)(t)}class B_{constructor(e){this.map=new Map,this.sortedKeys=[],this.comparator=e}indexOf(e,n){let r=0,s=this.sortedKeys.length;if(!this.comparator){for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],c=ld(e,l);if(c<0)s=a;else if(c>0)r=a+1;else return a}return r}for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],c=this.map.get(l),f=this.comparator(n,c);if(f<0)s=a;else if(f>0)r=a+1;else{const d=ld(e,l);if(d<0)s=a;else if(d>0)r=a+1;else return a}}return r}set(e,n){if(this.map.has(e)){const s=this.map.get(e),a=this.indexOf(e,s);this.sortedKeys.splice(a,1)}const r=this.indexOf(e,n);return this.sortedKeys.splice(r,0,e),this.map.set(e,n),this}get(e){return this.map.get(e)}delete(e){if(this.map.has(e)){const n=this.map.get(e),r=this.indexOf(e,n);return this.sortedKeys.splice(r,1),this.map.delete(e)}return!1}has(e){return this.map.has(e)}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}*[Symbol.iterator](){for(const e of this.sortedKeys)yield[e,this.map.get(e)]}entries(){return this[Symbol.iterator]()}keys(){return this.sortedKeys[Symbol.iterator]()}values(){return(function*(){for(const e of this.sortedKeys)yield this.map.get(e)}).call(this)}forEach(e){for(const n of this.sortedKeys)e(this.map.get(n),n,this.map)}}class Hj{constructor(e){this.pendingSyncedTransactions=[],this.syncedMetadata=new Map,this.optimisticUpserts=new Map,this.optimisticDeletes=new Set,this.size=0,this.syncedKeys=new Set,this.preSyncVisibleState=new Map,this.recentlySyncedKeys=new Set,this.hasReceivedFirstCommit=!1,this.isCommittingSyncTransactions=!1,this.commitPendingTransactions=()=>{let n=!1;for(const l of this.transactions.values())if(l.state==="persisting"){n=!0;break}const{committedSyncedTransactions:r,uncommittedSyncedTransactions:s,hasTruncateSync:a}=this.pendingSyncedTransactions.reduce((l,c)=>(c.committed?(l.committedSyncedTransactions.push(c),c.truncate===!0&&(l.hasTruncateSync=!0)):l.uncommittedSyncedTransactions.push(c),l),{committedSyncedTransactions:[],uncommittedSyncedTransactions:[],hasTruncateSync:!1});if(!n||a){this.isCommittingSyncTransactions=!0;const l=a?r.find(g=>g.truncate)?.optimisticSnapshot:null,c=new Set;for(const g of r)for(const y of g.operations)c.add(y.key);let f=this.preSyncVisibleState;if(f.size===0){f=new Map;for(const g of c){const y=this.get(g);y!==void 0&&f.set(g,y)}}const d=[],m=this.config.sync.rowUpdateMode||"partial";for(const g of r){if(g.truncate){const y=new Set([...this.syncedData.keys(),...l?.upserts.keys()||[]]);for(const x of y){if(l?.deletes.has(x))continue;const S=l?.upserts.get(x)||this.syncedData.get(x);S!==void 0&&d.push({type:"delete",key:x,value:S})}this.syncedData.clear(),this.syncedMetadata.clear(),this.syncedKeys.clear();for(const x of c)f.delete(x);this._events.emit("truncate",{type:"truncate",collection:this.collection})}for(const y of g.operations){const x=y.key;switch(this.syncedKeys.add(x),y.type){case"insert":this.syncedMetadata.set(x,y.metadata);break;case"update":this.syncedMetadata.set(x,Object.assign({},this.syncedMetadata.get(x),y.metadata));break;case"delete":this.syncedMetadata.delete(x);break}switch(y.type){case"insert":this.syncedData.set(x,y.value);break;case"update":{if(m==="partial"){const S=Object.assign({},this.syncedData.get(x),y.value);this.syncedData.set(x,S)}else this.syncedData.set(x,y.value);break}case"delete":this.syncedData.delete(x);break}}}if(a){const g=new Set;for(const S of r)for(const E of S.operations)(E.type==="insert"||E.type==="update")&&g.add(E.key);const y=new Map(l.upserts),x=new Set(l.deletes);for(const[S,E]of y)if(!x.has(S))if(g.has(S)){let C=!1;for(let k=d.length-1;k>=0;k--){const R=d[k];if(R.key===S&&R.type==="insert"){R.value=E,C=!0;break}}C||d.push({type:"insert",key:S,value:E})}else d.push({type:"insert",key:S,value:E});if(d.length>0&&x.size>0){const S=[];for(const E of d)E.type==="insert"&&x.has(E.key)||S.push(E);d.length=0,d.push(...S)}this.lifecycle.status!=="ready"&&this.lifecycle.markReady()}if(this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.isCommittingSyncTransactions=!1,a&&l){for(const[g,y]of l.upserts)this.optimisticUpserts.set(g,y);for(const g of l.deletes)this.optimisticDeletes.add(g)}for(const g of this.transactions.values())if(!["completed","failed"].includes(g.state)){for(const y of g.mutations)if(this.isThisCollection(y.collection)&&y.optimistic)switch(y.type){case"insert":case"update":this.optimisticUpserts.set(y.key,y.modified),this.optimisticDeletes.delete(y.key);break;case"delete":this.optimisticUpserts.delete(y.key),this.optimisticDeletes.add(y.key);break}}const p=new Map;for(const g of this.transactions.values())if(g.state==="completed")for(const y of g.mutations)y.optimistic&&this.isThisCollection(y.collection)&&c.has(y.key)&&p.set(y.key,{type:y.type,value:y.modified});for(const g of c){const y=f.get(g),x=this.get(g),S=p.get(g);let E=!1;S&&(S.type==="delete"&&y!==void 0&&x===void 0&&Tr(S.value,y)||x!==void 0&&Tr(S.value,x))&&(E=!0),E||(y===void 0&&x!==void 0?d.push({type:"insert",key:g,value:x}):y!==void 0&&x===void 0?d.push({type:"delete",key:g,value:y}):y!==void 0&&x!==void 0&&!Tr(y,x)&&d.push({type:"update",key:g,value:x,previousValue:y}))}this.size=this.calculateSize(),d.length>0&&this.indexes.updateIndexes(d),this.changes.emitEvents(d,!0),this.pendingSyncedTransactions=s,this.preSyncVisibleState.clear(),Promise.resolve().then(()=>{this.recentlySyncedKeys.clear()}),this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0)}},this.config=e,this.transactions=new B_((n,r)=>n.compareCreatedAt(r)),this.syncedData=new B_(e.compare)}setDeps(e){this.collection=e.collection,this.lifecycle=e.lifecycle,this.changes=e.changes,this.indexes=e.indexes,this._events=e.events}get(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;if(!n.has(e))return r.has(e)?r.get(e):s.get(e)}has(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;return n.has(e)?!1:r.has(e)?!0:s.has(e)}*keys(){const{syncedData:e,optimisticDeletes:n,optimisticUpserts:r}=this;for(const s of e.keys())n.has(s)||(yield s);for(const s of r.keys())!e.has(s)&&!n.has(s)&&(yield s)}*values(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield n)}}*entries(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield[e,n])}}*[Symbol.iterator](){for(const[e,n]of this.entries())yield[e,n]}forEach(e){let n=0;for(const[r,s]of this.entries())e(s,r,n++)}map(e){const n=[];let r=0;for(const[s,a]of this.entries())n.push(e(a,s,r++));return n}isThisCollection(e){return e===this.collection}recomputeOptimisticState(e=!1){if(this.isCommittingSyncTransactions&&!e)return;const n=new Map(this.optimisticUpserts),r=new Set(this.optimisticDeletes);this.optimisticUpserts.clear(),this.optimisticDeletes.clear();const s=[];for(const c of this.transactions.values())["completed","failed"].includes(c.state)||s.push(c);for(const c of s)for(const f of c.mutations)if(this.isThisCollection(f.collection)&&f.optimistic)switch(f.type){case"insert":case"update":this.optimisticUpserts.set(f.key,f.modified),this.optimisticDeletes.delete(f.key);break;case"delete":this.optimisticUpserts.delete(f.key),this.optimisticDeletes.add(f.key);break}this.size=this.calculateSize();const a=[];this.collectOptimisticChanges(n,r,a);const l=a.filter(c=>!!(!this.recentlySyncedKeys.has(c.key)||e));if(this.pendingSyncedTransactions.length>0&&!e){const c=new Set;for(const d of this.pendingSyncedTransactions)for(const m of d.operations)c.add(m.key);const f=l.filter(d=>!(d.type==="delete"&&c.has(d.key)&&!s.some(p=>p.mutations.some(g=>this.isThisCollection(g.collection)&&g.key===d.key))));f.length>0&&this.indexes.updateIndexes(f),this.changes.emitEvents(f,e)}else l.length>0&&this.indexes.updateIndexes(l),this.changes.emitEvents(l,e)}calculateSize(){const e=this.syncedData.size,n=Array.from(this.optimisticDeletes).filter(s=>this.syncedData.has(s)&&!this.optimisticUpserts.has(s)).length,r=Array.from(this.optimisticUpserts.keys()).filter(s=>!this.syncedData.has(s)).length;return e-n+r}collectOptimisticChanges(e,n,r){const s=new Set([...e.keys(),...this.optimisticUpserts.keys(),...n,...this.optimisticDeletes]);for(const a of s){const l=this.get(a),c=this.getPreviousValue(a,e,n);c!==void 0&&l===void 0?r.push({type:"delete",key:a,value:c}):c===void 0&&l!==void 0?r.push({type:"insert",key:a,value:l}):c!==void 0&&l!==void 0&&c!==l&&r.push({type:"update",key:a,value:l,previousValue:c})}}getPreviousValue(e,n,r){if(!r.has(e))return n.has(e)?n.get(e):this.syncedData.get(e)}scheduleTransactionCleanup(e){if(e.state==="completed"){this.transactions.delete(e.id);return}e.isPersisted.promise.then(()=>{this.transactions.delete(e.id)}).catch(()=>{})}capturePreSyncVisibleState(){if(this.pendingSyncedTransactions.length===0)return;const e=new Set;for(const n of this.pendingSyncedTransactions)for(const r of n.operations)e.add(r.key);for(const n of e)this.recentlySyncedKeys.add(n);for(const n of e)if(!this.preSyncVisibleState.has(n)){const r=this.get(n);r!==void 0&&this.preSyncVisibleState.set(n,r)}}onTransactionStateChange(){this.changes.shouldBatchEvents=this.pendingSyncedTransactions.length>0,this.capturePreSyncVisibleState(),this.recomputeOptimisticState(!1)}cleanup(){this.syncedData.clear(),this.syncedMetadata.clear(),this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.size=0,this.pendingSyncedTransactions=[],this.syncedKeys.clear(),this.hasReceivedFirstCommit=!1}}class VE{constructor(){this.listeners=new Map}on(e,n){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n),()=>{this.listeners.get(e)?.delete(n)}}once(e,n){const r=this.on(e,s=>{n(s),r()});return r}off(e,n){this.listeners.get(e)?.delete(n)}waitFor(e,n){return new Promise((r,s)=>{let a;const l=this.on(e,c=>{a&&(clearTimeout(a),a=void 0),r(c),l()});n&&(a=setTimeout(()=>{a=void 0,l(),s(new Error(`Timeout waiting for event ${String(e)}`))},n))})}emitInner(e,n){this.listeners.get(e)?.forEach(r=>{try{r(n)}catch(s){queueMicrotask(()=>{throw s})}})}clearListeners(){this.listeners.clear()}}function Vj(t,e){if(e.length===0||t.length===0)return;if(t.length===1){const{expression:r,compareOptions:s}=t[0];return(s.direction==="asc"?L_:Xg)(r,new jn(e[0]))}const n=[];for(let r=0;r<t.length&&r<e.length;r++){const s=t[r],a=e[r],l=[];for(let d=0;d<r;d++){const m=t[d],p=e[d];l.push(Jg(m.expression,new jn(p)))}const f=(s.compareOptions.direction==="asc"?L_:Xg)(s.expression,new jn(a));if(l.length===0)n.push(f);else{const d=[...l,f];n.push(d.reduce((m,p)=>Wg(m,p)))}}return n.length===1?n[0]:n.reduce((r,s)=>Aj(r,s))}class Kj extends VE{constructor(e,n,r){super(),this.collection=e,this.callback=n,this.options=r,this.loadedInitialState=!1,this.skipFiltering=!1,this.snapshotSent=!1,this.loadedSubsets=[],this.sentKeys=new Set,this.limitedSnapshotRowCount=0,this._status="ready",this.pendingLoadSubsetPromises=new Set,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches=new Set,r.onUnsubscribe&&this.on("unsubscribed",a=>r.onUnsubscribe(a)),r.whereExpression&&Mj(r.whereExpression,this.collection);const s=a=>{n(a),this.trackSentKeys(a)};this.callback=s,this.filteredCallback=r.whereExpression?Uj(this.callback,r):this.callback,this.truncateCleanup=this.collection.on("truncate",()=>{this.handleTruncate()})}get status(){return this._status}handleTruncate(){const e=[...this.loadedSubsets],n=this.collection._sync.syncLoadSubsetFn!==null;if(e.length===0||!n){this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[];return}this.isBufferingForTruncate=!0,this.truncateBuffer=[],this.pendingTruncateRefetches.clear(),this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[],queueMicrotask(()=>{if(this.isBufferingForTruncate){for(const r of e){const s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),this.trackLoadSubsetPromise(s),s instanceof Promise&&(this.pendingTruncateRefetches.add(s),s.catch(()=>{}).finally(()=>{this.pendingTruncateRefetches.delete(s),this.checkTruncateRefetchComplete()}))}this.pendingTruncateRefetches.size===0&&this.flushTruncateBuffer()}})}checkTruncateRefetchComplete(){this.pendingTruncateRefetches.size===0&&this.isBufferingForTruncate&&this.flushTruncateBuffer()}flushTruncateBuffer(){this.isBufferingForTruncate=!1;const e=this.truncateBuffer.flat();e.length>0&&this.filteredCallback(e),this.truncateBuffer=[]}setOrderByIndex(e){this.orderByIndex=e}setStatus(e){if(this._status===e)return;const n=this._status;this._status=e,this.emitInner("status:change",{type:"status:change",subscription:this,previousStatus:n,status:e});const r=`status:${e}`;this.emitInner(r,{type:r,subscription:this,previousStatus:n,status:e})}trackLoadSubsetPromise(e){e instanceof Promise&&(this.pendingLoadSubsetPromises.add(e),this.setStatus("loadingSubset"),e.finally(()=>{this.pendingLoadSubsetPromises.delete(e),this.pendingLoadSubsetPromises.size===0&&this.setStatus("ready")}))}hasLoadedInitialState(){return this.loadedInitialState}hasSentAtLeastOneSnapshot(){return this.snapshotSent}emitEvents(e){const n=this.filterAndFlipChanges(e);this.isBufferingForTruncate?n.length>0&&this.truncateBuffer.push(n):this.filteredCallback(n)}requestSnapshot(e){if(this.loadedInitialState)return!1;const n={where:this.options.whereExpression,optimizedOnly:e?.optimizedOnly??!1};if(e){if("where"in e){const f=e.where;if(n.where){const d=n.where,m=Wg(d,f);n.where=m}else n.where=f}}else this.loadedInitialState=!0;const r={where:n.where,subscription:this,orderBy:e?.orderBy,limit:e?.limit},s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),(e?.trackLoadSubsetPromise??!0)&&this.trackLoadSubsetPromise(s);const l=this.collection.currentStateAsChanges(n);if(l===void 0)return!1;const c=l.filter(f=>!this.sentKeys.has(f.key));for(const f of c)this.sentKeys.add(f.key);return this.snapshotSent=!0,this.callback(c),!0}requestLimitedSnapshot({orderBy:e,limit:n,minValues:r,offset:s}){if(!n)throw new Error("limit is required");if(!this.orderByIndex)throw new Error("Ordered snapshot was requested but no index was found. You have to call setOrderByIndex before requesting an ordered snapshot.");const l=r?.[0],c=this.orderByIndex,f=this.options.whereExpression,d=f?Zl(f):void 0,m=A=>{if(this.sentKeys.has(A))return!1;const z=this.collection.get(A);return z===void 0?!1:d?.(z)??!0};let p=l;const g=[];let y=[];if(l!==void 0){const{expression:A}=e[0],z=this.collection.currentStateAsChanges({where:Jg(A,new jn(l))});if(z){const L=z.map(M=>M.key).filter(M=>!this.sentKeys.has(M)&&m(M));y.push(...L);const P=c.take(n-y.length,l,m);y.push(...P)}else y=c.take(n,l,m)}else y=c.take(n,l,m);const x=()=>Math.max(n-g.length,0),S=()=>y.length===0,E=e[0].expression,C=E.type==="ref"?Ln(new En(E.path),!0):null;for(;x()>0&&!S();){const A=new Set;for(const z of y){const L=this.collection.get(z);g.push({type:"insert",key:z,value:L}),p=C?C(L):L,A.add(z)}y=c.take(x(),p,m)}const k=this.limitedSnapshotRowCount;for(const A of g)this.sentKeys.add(A.key);this.callback(g),this.limitedSnapshotRowCount+=g.length,g.length>0&&(this.lastSentKey=g[g.length-1].key);let R;if(r!==void 0&&r.length>0){const A=Vj(e,r);if(A){const{expression:z}=e[0],L=r[0];let P;if(L instanceof Date){const M=new Date(L.getTime()+1);P=Wg(Rj(z,new jn(L)),Xg(z,new jn(M)))}else P=Jg(z,new jn(L));R={whereFrom:A,whereCurrent:P,lastKey:this.lastSentKey}}}const I={where:f,limit:n,orderBy:e,cursor:R,offset:s??k,subscription:this},j=this.collection._sync.loadSubset(I);this.loadedSubsets.push(I),this.trackLoadSubsetPromise(j)}filterAndFlipChanges(e){if(this.loadedInitialState||this.skipFiltering)return e;const n=this.isBufferingForTruncate,r=[];for(const s of e){let a=s;if(this.sentKeys.has(s.key)){if(s.type==="insert")continue;s.type==="delete"&&this.sentKeys.delete(s.key)}else{if(s.type==="update")a={...s,type:"insert",previousValue:void 0};else if(s.type==="delete"&&!n)continue;this.sentKeys.add(s.key)}r.push(a)}return r}trackSentKeys(e){if(!(this.loadedInitialState||this.skipFiltering))for(const n of e)n.type==="delete"?this.sentKeys.delete(n.key):this.sentKeys.add(n.key)}markAllStateAsSeen(){this.skipFiltering=!0}unsubscribe(){this.truncateCleanup?.(),this.truncateCleanup=void 0,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches.clear();for(const e of this.loadedSubsets)this.collection._sync.unloadSubset(e);this.loadedSubsets=[],this.emitInner("unsubscribed",{type:"unsubscribed",subscription:this}),this.clearListeners()}}class Gj{constructor(){this.activeSubscribersCount=0,this.changeSubscriptions=new Set,this.batchedEvents=[],this.shouldBatchEvents=!1}setDeps(e){this.lifecycle=e.lifecycle,this.sync=e.sync,this.events=e.events,this.collection=e.collection}emitEmptyReadyEvent(){for(const e of this.changeSubscriptions)e.emitEvents([])}emitEvents(e,n=!1){if(this.shouldBatchEvents&&!n){this.batchedEvents.push(...e);return}let r=e;if(n&&(this.batchedEvents.length>0&&(r=[...this.batchedEvents,...e]),this.batchedEvents=[],this.shouldBatchEvents=!1),r.length!==0)for(const s of this.changeSubscriptions)s.emitEvents(r)}subscribeChanges(e,n={}){this.addSubscriber();const r=new Kj(this.collection,e,{...n,onUnsubscribe:()=>{this.removeSubscriber(),this.changeSubscriptions.delete(r)}});return n.includeInitialState?r.requestSnapshot({trackLoadSubsetPromise:!1}):n.includeInitialState===!1&&r.markAllStateAsSeen(),this.changeSubscriptions.add(r),r}addSubscriber(){const e=this.activeSubscribersCount;this.activeSubscribersCount++,this.lifecycle.cancelGCTimer(),(this.lifecycle.status==="cleaned-up"||this.lifecycle.status==="idle")&&this.sync.startSync(),this.events.emitSubscribersChange(this.activeSubscribersCount,e)}removeSubscriber(){const e=this.activeSubscribersCount;if(this.activeSubscribersCount--,this.activeSubscribersCount===0)this.lifecycle.startGCTimer();else if(this.activeSubscribersCount<0)throw new t4;this.events.emitSubscribersChange(this.activeSubscribersCount,e)}cleanup(){this.batchedEvents=[],this.shouldBatchEvents=!1}}const Qj=t=>setTimeout(()=>{t({didTimeout:!0,timeRemaining:()=>50})},0),Zj=t=>{clearTimeout(t)},Yj=typeof window<"u"&&"requestIdleCallback"in window?(t,e)=>window.requestIdleCallback(t,e):(t,e)=>Qj(t),Jm=typeof window<"u"&&"cancelIdleCallback"in window?t=>window.cancelIdleCallback(t):Zj;class Jj{constructor(e,n){this.status="idle",this.hasBeenReady=!1,this.hasReceivedFirstCommit=!1,this.onFirstReadyCallbacks=[],this.gcTimeoutId=null,this.idleCallbackId=null,this.config=e,this.id=n}setDeps(e){this.indexes=e.indexes,this.events=e.events,this.changes=e.changes,this.sync=e.sync,this.state=e.state}validateStatusTransition(e,n){if(e===n)return;if(!{idle:["loading","error","cleaned-up"],loading:["ready","error","cleaned-up"],ready:["cleaned-up","error"],error:["cleaned-up","idle"],"cleaned-up":["loading","error"]}[e].includes(n))throw new WD(e,n,this.id)}setStatus(e,n=!1){if(e==="ready"&&!n)throw new Ru(`You can't directly call "setStatus('ready'). You must use markReady instead.`);this.validateStatusTransition(this.status,e);const r=this.status;this.status=e,e==="ready"&&!this.indexes.isIndexesResolved&&this.indexes.resolveAllIndexes().catch(s=>{console.warn(`${this.config.id?`[${this.config.id}] `:""}Failed to resolve indexes:`,s)}),this.events.emitStatusChange(e,r)}validateCollectionUsable(e){switch(this.status){case"error":throw new XD(e,this.id);case"cleaned-up":this.sync.startSync();break}}markReady(){if(this.validateStatusTransition(this.status,"ready"),this.status==="loading"){if(this.setStatus("ready",!0),!this.hasBeenReady){this.hasBeenReady=!0,this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0);const e=[...this.onFirstReadyCallbacks];this.onFirstReadyCallbacks=[],e.forEach(n=>n())}this.changes.changeSubscriptions.size>0&&this.changes.emitEmptyReadyEvent()}}startGCTimer(){this.gcTimeoutId&&clearTimeout(this.gcTimeoutId);const e=this.config.gcTime??3e5;e!==0&&(this.gcTimeoutId=setTimeout(()=>{this.changes.activeSubscribersCount===0&&this.scheduleIdleCleanup()},e))}cancelGCTimer(){this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.idleCallbackId!==null&&(Jm(this.idleCallbackId),this.idleCallbackId=null)}scheduleIdleCleanup(){this.idleCallbackId!==null&&Jm(this.idleCallbackId),this.idleCallbackId=Yj(e=>{this.changes.activeSubscribersCount===0?this.performCleanup(e)&&(this.idleCallbackId=null):this.idleCallbackId=null},{timeout:1e3})}performCleanup(e){return!e||e.timeRemaining()>0||e.didTimeout?(this.sync.cleanup(),this.state.cleanup(),this.changes.cleanup(),this.indexes.cleanup(),this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.hasBeenReady=!1,this.onFirstReadyCallbacks=[],this.setStatus("cleaned-up"),this.events.cleanup(),!0):(this.scheduleIdleCleanup(),!1)}onFirstReady(e){if(this.hasBeenReady){e();return}this.onFirstReadyCallbacks.push(e)}cleanup(){this.idleCallbackId!==null&&(Jm(this.idleCallbackId),this.idleCallbackId=null),this.performCleanup()}}const w0=Symbol("liveQueryInternal");class Xj{constructor(e,n){this.preloadPromise=null,this.syncCleanupFn=null,this.syncLoadSubsetFn=null,this.syncUnloadSubsetFn=null,this.pendingLoadSubsetPromises=new Set,this.config=e,this.id=n,this.syncMode=e.syncMode??"eager"}setDeps(e){this.collection=e.collection,this.state=e.state,this.lifecycle=e.lifecycle,this._events=e.events}startSync(){if(!(this.lifecycle.status!=="idle"&&this.lifecycle.status!=="cleaned-up")){this.lifecycle.setStatus("loading");try{const e=Wj(this.config.sync.sync({collection:this.collection,begin:()=>{this.state.pendingSyncedTransactions.push({committed:!1,operations:[],deletedKeys:new Set})},write:n=>{const r=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!r)throw new x_;if(r.committed)throw new S_;let s;"key"in n?s=n.key:s=this.config.getKey(n.value);let a=n.type;if(n.type==="insert"){const c=this.state.syncedData.has(s),f=r.deletedKeys.has(s),d=r.truncate===!0;if(c&&!f&&!d){const m=this.state.syncedData.get(s);if(m!==void 0&&Tr(m,n.value))a="update";else{const g=this.config.utils[w0];throw new i4(s,this.id,{hasCustomGetKey:g?.hasCustomGetKey??!1,hasJoins:g?.hasJoins??!1})}}}const l={...n,type:a,key:s};r.operations.push(l),a==="delete"&&r.deletedKeys.add(s)},commit:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new b4;if(n.committed)throw new x4;n.committed=!0,this.state.commitPendingTransactions()},markReady:()=>{this.lifecycle.markReady()},truncate:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new x_;if(n.committed)throw new S_;n.operations=[],n.deletedKeys.clear(),n.truncate=!0,n.optimisticSnapshot={upserts:new Map(this.state.optimisticUpserts),deletes:new Set(this.state.optimisticDeletes)}}}));if(this.syncCleanupFn=e?.cleanup??null,this.syncLoadSubsetFn=e?.loadSubset??null,this.syncUnloadSubsetFn=e?.unloadSubset??null,this.syncMode==="on-demand"&&!this.syncLoadSubsetFn)throw new ku(`Collection "${this.id}" is configured with syncMode "on-demand" but the sync function did not return a loadSubset handler. Either provide a loadSubset handler or use syncMode "eager".`)}catch(e){throw this.lifecycle.setStatus("error"),e}}}preload(){return this.preloadPromise?this.preloadPromise:(this.syncMode==="on-demand"&&console.warn(`${this.id?`[${this.id}] `:""}Calling .preload() on a collection with syncMode "on-demand" is a no-op. In on-demand mode, data is only loaded when queries request it. Instead, create a live query and call .preload() on that to load the specific data you need. See https://tanstack.com/blog/tanstack-db-0.5-query-driven-sync for more details.`),this.preloadPromise=new Promise((e,n)=>{if(this.lifecycle.status==="ready"){e();return}if(this.lifecycle.status==="error"){n(new e4);return}if(this.lifecycle.onFirstReady(()=>{e()}),this.lifecycle.status==="idle"||this.lifecycle.status==="cleaned-up")try{this.startSync()}catch(r){n(r);return}}),this.preloadPromise)}get isLoadingSubset(){return this.pendingLoadSubsetPromises.size>0}trackLoadPromise(e){const n=!this.isLoadingSubset;this.pendingLoadSubsetPromises.add(e),n&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!0,previousIsLoadingSubset:!1,loadingSubsetTransition:"start"}),e.finally(()=>{const r=this.pendingLoadSubsetPromises.size===1&&this.pendingLoadSubsetPromises.has(e);this.pendingLoadSubsetPromises.delete(e),r&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!1,previousIsLoadingSubset:!0,loadingSubsetTransition:"end"})})}loadSubset(e){if(this.syncMode==="eager")return!0;if(this.syncLoadSubsetFn){const n=this.syncLoadSubsetFn(e);if(n instanceof Promise)return this.trackLoadPromise(n),n}return!0}unloadSubset(e){this.syncUnloadSubsetFn&&this.syncUnloadSubsetFn(e)}cleanup(){try{this.syncCleanupFn&&(this.syncCleanupFn(),this.syncCleanupFn=null)}catch(e){queueMicrotask(()=>{if(e instanceof Error){const n=new __(this.id,e);throw n.cause=e,n.stack=e.stack,n}else throw new __(this.id,e)})}this.preloadPromise=null}}function Wj(t){if(typeof t=="function")return{cleanup:t};if(typeof t=="object")return t}function KE(t){return typeof t=="function"&&t.prototype!==void 0&&t.prototype.constructor===t}async function e3(t){return KE(t)?t:await t()}class t3{constructor(e,n,r,s,a,l){this.id=e,this.expression=n,this.name=r,this.resolver=s,this.options=a,this.collectionEntries=l,this.indexPromise=null,this.resolvedIndex=null,KE(this.resolver)&&(this.resolvedIndex=new this.resolver(this.id,this.expression,this.name,this.options),this.collectionEntries&&this.resolvedIndex.build(this.collectionEntries))}async resolve(){return this.resolvedIndex?this.resolvedIndex:(this.indexPromise||(this.indexPromise=this.createIndex()),this.resolvedIndex=await this.indexPromise,this.resolvedIndex)}isResolved(){return this.resolvedIndex!==null}getResolved(){if(!this.resolvedIndex)throw new Error(`Index ${this.id} has not been resolved yet. Ensure collection is synced.`);return this.resolvedIndex}getId(){return this.id}getName(){return this.name}getExpression(){return this.expression}async createIndex(){const e=await e3(this.resolver);return new e(this.id,this.expression,this.name,this.options)}}class n3{constructor(e,n){this.indexId=e,this.lazyIndex=n}get index(){return this.lazyIndex.getResolved()}get isReady(){return this.lazyIndex.isResolved()}async whenReady(){return await this.lazyIndex.resolve()}get id(){return this.indexId}get name(){return this.isReady?this.index.name:this.lazyIndex.getName()}get expression(){return this.lazyIndex.getExpression()}supports(e){return this.index.supports(e)}getStats(){return this.index.getStats()}matchesField(e){const n=this.expression;return n.type==="ref"&&n.path.length===e.length&&n.path.every((r,s)=>r===e[s])}get keyCount(){return this.index.keyCount}get indexedKeysSet(){return this.index.indexedKeysSet}get orderedEntriesArray(){return this.index.orderedEntriesArray}get valueMapData(){return this.index.valueMapData}equalityLookup(e){return this.index.equalityLookup?.(e)??new Set}rangeQuery(e){return this.index.rangeQuery?.(e)??new Set}inArrayLookup(e){return this.index.inArrayLookup?.(e)??new Set}_getLazyWrapper(){return this.lazyIndex}}class r3{constructor(){this.lazyIndexes=new Map,this.resolvedIndexes=new Map,this.isIndexesResolved=!1,this.indexCounter=0}setDeps(e){this.state=e.state,this.lifecycle=e.lifecycle}createIndex(e,n={}){this.lifecycle.validateCollectionUsable("createIndex");const r=++this.indexCounter,s=Ej(),a=e(s),l=en(a),c=n.indexType??ey,f=new t3(r,l,n.name,c,n.options,this.state.entries());if(this.lazyIndexes.set(r,f),c===ey)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch(d){console.warn("Failed to resolve BTreeIndex:",d)}else if(typeof c=="function"&&c.prototype)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch{this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)})}else this.isIndexesResolved&&this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)});return new n3(r,f)}async resolveAllIndexes(){if(this.isIndexesResolved)return;const e=Array.from(this.lazyIndexes.entries()).map(async([n,r])=>{const s=await r.resolve();return s.build(this.state.entries()),this.resolvedIndexes.set(n,s),{indexId:n,resolvedIndex:s}});await Promise.all(e),this.isIndexesResolved=!0}async resolveSingleIndex(e,n){const r=await n.resolve();return r.build(this.state.entries()),this.resolvedIndexes.set(e,r),r}get indexes(){return this.resolvedIndexes}updateIndexes(e){for(const n of this.resolvedIndexes.values())for(const r of e)switch(r.type){case"insert":n.add(r.key,r.value);break;case"update":r.previousValue?n.update(r.key,r.previousValue,r.value):n.add(r.key,r.value);break;case"delete":n.remove(r.key,r.value);break}}cleanup(){this.lazyIndexes.clear(),this.resolvedIndexes.clear()}}var s3={};const i3=new Set(["find","findLast","findIndex","findLastIndex","filter","map","flatMap","forEach","some","every","reduce","reduceRight"]),a3=new Set(["pop","push","shift","unshift","splice","sort","reverse","fill","copyWithin"]),o3=new Set(["set","delete","clear","add"]),l3=new Set(["entries","keys","values","forEach"]);function _0(t){return t!==null&&typeof t=="object"&&!(t instanceof Date)&&!(t instanceof RegExp)&&!od(t)}function u3(t,e,n,r){if(i3.has(t))return function(...s){const a=s[0];if(typeof a!="function")return e.apply(n.copy_,s);const l=(d,m)=>{if(_0(d)){const p={tracker:n,prop:String(m)},{proxy:g}=r(d,p);return g}return d},c=function(d,m,p){const g=l(d,m);return a.call(this,g,m,p)};if(t==="reduce"||t==="reduceRight"){const d=function(m,p,g,y){const x=l(p,g);return a.call(this,m,x,g,y)};return e.apply(n.copy_,[d,...s.slice(1)])}const f=e.apply(n.copy_,[c,...s.slice(1)]);if((t==="find"||t==="findLast")&&f&&typeof f=="object"){const d=n.copy_.indexOf(f);if(d!==-1)return l(f,d)}return t==="filter"&&Array.isArray(f)?f.map(d=>{const m=n.copy_.indexOf(d);return m!==-1?l(d,m):d}):f}}function c3(t,e){return function(){const n=t.copy_;let r=0;return{next(){if(r>=n.length)return{done:!0,value:void 0};const s=n[r];let a=s;if(_0(s)){const l={tracker:t,prop:String(r)},{proxy:c}=e(s,l);a=c}return r++,{done:!1,value:a}},[Symbol.iterator](){return this}}}}function U_(t,e,n){return function(...r){const s=t.apply(e.copy_,r);return n(e),s}}function f3(t,e,n,r,s,a,l){if(l3.has(t)||e===Symbol.iterator)return function(...f){const d=n.apply(s.copy_,f);if(t==="forEach"){const p=f[0];if(typeof p=="function"){const g=function(y,x,S){const E=p.call(this,y,x,S);return l(s),E};return n.apply(r,[g,...f.slice(1)])}}if(t==="entries"||t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator){const p=d,g=new Map;if(t==="values"&&r instanceof Map)for(const[x,S]of s.copy_.entries())g.set(S,x);const y=new Map;if(r instanceof Set)for(const x of s.copy_.values())y.set(x,x);return{next(){const x=p.next();if(!x.done&&x.value&&typeof x.value=="object"){if(t==="entries"&&Array.isArray(x.value)&&x.value.length===2){if(x.value[1]&&typeof x.value[1]=="object"){const S=x.value[0],E={tracker:s,prop:S,updateMap:k=>{s.copy_ instanceof Map&&s.copy_.set(S,k)}},{proxy:C}=a(x.value[1],E);x.value[1]=C}}else if(t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator)if(t==="values"&&r instanceof Map){const S=g.get(x.value);if(S!==void 0){const E={tracker:s,prop:S,updateMap:k=>{s.copy_ instanceof Map&&s.copy_.set(S,k)}},{proxy:C}=a(x.value,E);x.value=C}}else if(r instanceof Set){const S=x.value,E={tracker:s,prop:S,updateSet:k=>{s.copy_ instanceof Set&&(s.copy_.delete(S),s.copy_.add(k),y.set(S,k))}},{proxy:C}=a(x.value,E);x.value=C}else{const S=Symbol("iterator-value"),{proxy:E}=a(x.value,{tracker:s,prop:S});x.value=E}}return x},[Symbol.iterator](){return this}}}return d}}function st(...t){const e=typeof window<"u"&&typeof localStorage<"u";e&&localStorage.getItem("DEBUG")==="true"?console.log("[proxy]",...t):!e&&typeof process<"u"&&s3.DEBUG==="true"&&console.log("[proxy]",...t)}function gs(t,e=new WeakMap){if(t==null||typeof t!="object")return t;if(e.has(t))return e.get(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t.source,t.flags);if(Array.isArray(t)){const s=[];return e.set(t,s),t.forEach((a,l)=>{s[l]=gs(a,e)}),s}if(ArrayBuffer.isView(t)&&!(t instanceof DataView)){const s=Object.getPrototypeOf(t).constructor,a=new s(t.length);e.set(t,a);for(let l=0;l<t.length;l++)a[l]=t[l];return a}if(t instanceof Map){const s=new Map;return e.set(t,s),t.forEach((a,l)=>{s.set(l,gs(a,e))}),s}if(t instanceof Set){const s=new Set;return e.set(t,s),t.forEach(a=>{s.add(gs(a,e))}),s}if(od(t))return t;const n={};e.set(t,n);for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=gs(t[s],e));const r=Object.getOwnPropertySymbols(t);for(const s of r)n[s]=gs(t[s],e);return n}let q_=0;function d3(){return q_+=1,q_}function C0(t,e){const n=new Map;function r(p,g){if(st("Object ID:",p.constructor.name),n.has(p))return n.get(p);{const y=C0(p,g);return n.set(p,y),y}}const s=new Map,a={copy_:gs(t),originalObject:gs(t),proxyCount:d3(),modified:!1,assigned_:{},parent:e,target:t};st("createChangeProxy called for target",t,a.proxyCount);function l(p){p.modified||(p.modified=!0),p.parent&&(st("propagating change to parent"),"updateMap"in p.parent?p.parent.updateMap(p.copy_):"updateSet"in p.parent?p.parent.updateSet(p.copy_):(p.parent.tracker.copy_[p.parent.prop]=p.copy_,p.parent.tracker.assigned_[p.parent.prop]=!0),l(p.parent.tracker))}function c(p){if(st("checkIfReverted called with assigned keys:",Object.keys(p.assigned_)),Object.keys(p.assigned_).length===0&&Object.getOwnPropertySymbols(p.assigned_).length===0)return st("No assigned properties, returning true"),!0;for(const y in p.assigned_)if(p.assigned_[y]===!0){const x=p.copy_[y],S=p.originalObject[y];if(st(`Checking property ${String(y)}, current:`,x,"original:",S),!Tr(x,S))return st(`Property ${String(y)} is different, returning false`),!1}else if(p.assigned_[y]===!1)return st(`Property ${String(y)} was deleted, returning false`),!1;const g=Object.getOwnPropertySymbols(p.assigned_);for(const y of g)if(p.assigned_[y]===!0){const x=p.copy_[y],S=p.originalObject[y];if(!Tr(x,S))return st("Symbol property is different, returning false"),!1}else if(p.assigned_[y]===!1)return st("Symbol property was deleted, returning false"),!1;return st("All properties match original values, returning true"),!0}function f(p,g){st("checkParentStatus called for child prop:",g);const y=c(p);st("Parent checkIfReverted returned:",y),y&&(st("Parent is fully reverted, clearing tracking"),p.modified=!1,p.assigned_={},p.parent&&(st("Continuing up the parent chain"),f(p.parent.tracker,p.parent.prop)))}function d(p){if(st("createObjectProxy",p),s.has(p))return st("proxyCache found match"),s.get(p);const g=new Proxy(p,{get(y,x){st("get",y,x);const S=a.copy_[x]??a.originalObject[x],E=a.originalObject[x];if(st("value (at top of proxy get)",S),Object.getOwnPropertyDescriptor(y,x)?.get)return S;if(typeof S=="function"){if(Array.isArray(y)){const k=x.toString();if(a3.has(k))return U_(S,a,l);const R=u3(k,S,a,r);if(R)return R;if(x===Symbol.iterator)return c3(a,r)}if(y instanceof Map||y instanceof Set){const k=x.toString();if(o3.has(k))return U_(S,a,l);const R=f3(k,x,S,y,a,r,l);if(R)return R}return S.bind(y)}if(_0(S)){const k={tracker:a,prop:String(x)},{proxy:R}=r(E,k);return s.set(S,R),R}return S},set(y,x,S){const E=a.copy_[x];if(st(`set called for property ${String(x)}, current:`,E,"new:",S),Tr(E,S))st("Value unchanged, not tracking");else{const C=a.originalObject[x],k=Tr(S,C);if(st("value:",S,"original:",C,"isRevertToOriginal:",k),k){st(`Reverting property ${String(x)} to original value`),delete a.assigned_[x.toString()],st(`Updating copy with original value for ${String(x)}`),a.copy_[x]=gs(C),st("Checking if all properties reverted");const R=c(a);st("All reverted:",R),R?(st("All properties reverted, clearing tracking"),a.modified=!1,a.assigned_={},e&&(st("Updating parent for property:",e.prop),f(e.tracker,e.prop))):(st("Some properties still changed, keeping modified flag"),a.modified=!0)}else st(`Setting new value for property ${String(x)}`),a.copy_[x]=S,a.assigned_[x.toString()]=!0,st("Marking object and ancestors as modified",a),l(a)}return!0},defineProperty(y,x,S){const E=Reflect.defineProperty(y,x,S);return E&&"value"in S&&(a.copy_[x]=gs(S.value),a.assigned_[x.toString()]=!0,l(a)),E},getOwnPropertyDescriptor(y,x){return Reflect.getOwnPropertyDescriptor(y,x)},preventExtensions(y){return Reflect.preventExtensions(y)},isExtensible(y){return Reflect.isExtensible(y)},deleteProperty(y,x){st("deleteProperty",y,x);const S=typeof x=="symbol"?x.toString():x;if(S in y){const E=S in a.originalObject,C=Reflect.deleteProperty(y,x);return C&&(E?(a.assigned_[S]=!1,l(a)):(delete a.assigned_[S],Object.keys(a.assigned_).length===0&&Object.getOwnPropertySymbols(a.assigned_).length===0?a.modified=!1:a.modified=!0)),C}return!0}});return s.set(p,g),g}return{proxy:d(a.copy_),getChanges:()=>{if(st("getChanges called, modified:",a.modified),st(a),!a.modified)return st("Object not modified, returning empty object"),{};if(typeof a.copy_!="object"||Array.isArray(a.copy_)||Object.keys(a.assigned_).length===0)return a.copy_;const p={};for(const g in a.copy_)a.assigned_[g]===!0&&g in a.copy_&&(p[g]=a.copy_[g]);return st("Returning copy:",p),p}}}function h3(t){const e=t.map(n=>C0(n));return{proxies:e.map(n=>n.proxy),getChanges:()=>e.map(n=>n.getChanges())}}function p3(t,e){const{proxy:n,getChanges:r}=C0(t);return e(n),r()}function m3(t,e){const{proxies:n,getChanges:r}=h3(t);return e(n),r()}function g3(){let t,e,n=!0;return{promise:new Promise((s,a)=>{t=l=>{n=!1,s(l)},e=l=>{n=!1,a(l)}}),resolve:t,reject:e,isPending:()=>n}}function y3(t){return typeof t=="object"&&t!==null&&typeof t.hasPendingGraphRun=="function"}class v3{constructor(){this.contexts=new Map,this.clearListeners=new Set}getOrCreateContext(e){let n=this.contexts.get(e);return n||(n={queue:[],jobs:new Map,dependencies:new Map,completed:new Set},this.contexts.set(e,n)),n}schedule({contextId:e,jobId:n,dependencies:r,run:s}){if(typeof e>"u"){s();return}const a=this.getOrCreateContext(e);if(a.jobs.has(n)||a.queue.push(n),a.jobs.set(n,s),r){const l=new Set(r);l.delete(n),a.dependencies.set(n,l)}else a.dependencies.has(n)||a.dependencies.set(n,new Set);a.completed.delete(n)}flush(e){const n=this.contexts.get(e);if(!n)return;const{queue:r,jobs:s,dependencies:a,completed:l}=n;for(;r.length>0;){let c=!1;const f=r.length;for(let d=0;d<f;d++){const m=r.shift(),p=s.get(m);if(!p){a.delete(m),l.delete(m);continue}const g=a.get(m);let y=!g;if(g){y=!0;for(const x of g){if(x===m)continue;const S=y3(x)&&x.hasPendingGraphRun(e);if(s.has(x)&&!l.has(x)||!s.has(x)&&S){y=!1;break}}}y?(s.delete(m),a.delete(m),p(),l.add(m),c=!0):r.push(m)}if(!c)throw new Error(`Scheduler detected unresolved dependencies for context ${String(e)}.`)}this.contexts.delete(e)}flushAll(){for(const e of Array.from(this.contexts.keys()))this.flush(e)}clear(e){this.contexts.delete(e),this.clearListeners.forEach(n=>n(e))}onClear(e){return this.clearListeners.add(e),()=>this.clearListeners.delete(e)}hasPendingJobs(e){const n=this.contexts.get(e);return!!n&&n.jobs.size>0}clearJob(e,n){const r=this.contexts.get(e);r&&(r.jobs.delete(n),r.dependencies.delete(n),r.completed.delete(n),r.queue=r.queue.filter(s=>s!==n),r.jobs.size===0&&this.contexts.delete(e))}}const fd=new v3,dd=[];let gu=[],b3=0;function x3(t,e){switch(`${t.type}-${e.type}`){case"insert-update":return{...t,type:"insert",original:{},modified:e.modified,changes:{...t.changes,...e.changes},key:t.key,globalKey:t.globalKey,metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata},mutationId:e.mutationId,updatedAt:e.updatedAt};case"insert-delete":return null;case"update-delete":return e;case"update-update":return{...e,original:t.original,changes:{...t.changes,...e.changes},metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata}};case"delete-delete":case"insert-insert":return e;default:{const n=`${t.type}-${e.type}`;throw new Error(`Unhandled mutation combination: ${n}`)}}}function uf(t){const e=new C3(t);return dd.push(e),e}function Lf(){if(gu.length>0)return gu.slice(-1)[0]}function S3(t){fd.clear(t.id),gu.push(t)}function w3(t){try{fd.flush(t.id)}finally{gu=gu.filter(e=>e.id!==t.id)}}function _3(t){const e=dd.findIndex(n=>n.id===t.id);e!==-1&&dd.splice(e,1)}class C3{constructor(e){if(typeof e.mutationFn>"u")throw new m4;this.id=e.id??crypto.randomUUID(),this.mutationFn=e.mutationFn,this.state="pending",this.mutations=[],this.isPersisted=g3(),this.autoCommit=e.autoCommit??!0,this.createdAt=new Date,this.sequenceNumber=b3++,this.metadata=e.metadata??{}}setState(e){this.state=e,(e==="completed"||e==="failed")&&_3(this)}mutate(e){if(this.state!=="pending")throw new g4;S3(this);try{e()}finally{w3(this)}return this.autoCommit&&this.commit().catch(()=>{}),this}applyMutations(e){for(const n of e){const r=this.mutations.findIndex(s=>s.globalKey===n.globalKey);if(r>=0){const s=this.mutations[r],a=x3(s,n);a===null?this.mutations.splice(r,1):this.mutations[r]=a}else this.mutations.push(n)}}rollback(e){const n=e?.isSecondaryRollback??!1;if(this.state==="completed")throw new y4;if(this.setState("failed"),!n){const r=new Set;this.mutations.forEach(s=>r.add(s.globalKey));for(const s of dd)s.state==="pending"&&s.mutations.some(a=>r.has(a.globalKey))&&s.rollback({isSecondaryRollback:!0})}return this.isPersisted.reject(this.error?.error),this.touchCollection(),this}touchCollection(){const e=new Set;for(const n of this.mutations)e.has(n.collection.id)||(n.collection._state.onTransactionStateChange(),n.collection._state.pendingSyncedTransactions.length>0&&n.collection._state.commitPendingTransactions(),e.add(n.collection.id))}async commit(){if(this.state!=="pending")throw new v4;if(this.setState("persisting"),this.mutations.length===0)return this.setState("completed"),this.isPersisted.resolve(this),this;try{await this.mutationFn({transaction:this}),this.setState("completed"),this.touchCollection(),this.isPersisted.resolve(this)}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.error={message:n.message,error:n},this.rollback(),n}return this}compareCreatedAt(e){const n=this.createdAt.getTime()-e.createdAt.getTime();return n!==0?n:this.sequenceNumber-e.sequenceNumber}}class E3{constructor(e,n){this.insert=(r,s)=>{this.lifecycle.validateCollectionUsable("insert");const a=this.state,l=Lf();if(!l&&!this.config.onInsert)throw new d4;const c=Array.isArray(r)?r:[r],f=[],d=new Set;if(c.forEach(m=>{const p=this.validateData(m,"insert"),g=this.config.getKey(p);if(this.state.has(g)||d.has(g))throw new s4(g);d.add(g);const y=this.generateGlobalKey(g,m),x={mutationId:crypto.randomUUID(),original:{},modified:p,changes:Object.fromEntries(Object.keys(m).map(S=>[S,p[S]])),globalKey:y,key:g,metadata:s?.metadata,syncMetadata:this.config.sync.getSyncMetadata?.()||{},optimistic:s?.optimistic??!0,type:"insert",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(x)}),l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;{const m=uf({mutationFn:async p=>await this.config.onInsert({transaction:p.transaction,collection:this.collection})});return m.applyMutations(f),m.commit().catch(()=>{}),a.transactions.set(m.id,m),a.scheduleTransactionCleanup(m),a.recomputeOptimisticState(!0),m}},this.delete=(r,s)=>{const a=this.state;this.lifecycle.validateCollectionUsable("delete");const l=Lf();if(!l&&!this.config.onDelete)throw new p4;if(Array.isArray(r)&&r.length===0)throw new c4;const c=Array.isArray(r)?r:[r],f=[];for(const m of c){if(!this.state.has(m))throw new f4(m);const p=this.generateGlobalKey(m,this.state.get(m)),g={mutationId:crypto.randomUUID(),original:this.state.get(m),modified:this.state.get(m),changes:this.state.get(m),globalKey:p,key:m,metadata:s?.metadata,syncMetadata:a.syncedMetadata.get(m)||{},optimistic:s?.optimistic??!0,type:"delete",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(g)}if(l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;const d=uf({autoCommit:!0,mutationFn:async m=>this.config.onDelete({transaction:m.transaction,collection:this.collection})});return d.applyMutations(f),d.commit().catch(()=>{}),a.transactions.set(d.id,d),a.scheduleTransactionCleanup(d),a.recomputeOptimisticState(!0),d},this.id=n,this.config=e}setDeps(e){this.lifecycle=e.lifecycle,this.state=e.state,this.collection=e.collection}ensureStandardSchema(e){if(e&&"~standard"in e)return e;throw new JD}validateData(e,n,r){if(!this.config.schema)return e;const s=this.ensureStandardSchema(this.config.schema);if(n==="update"&&r){const l=this.state.get(r);if(l&&e&&typeof e=="object"&&typeof l=="object"){const c=Object.assign({},l,e),f=s["~standard"].validate(c);if(f instanceof Promise)throw new b_;if("issues"in f&&f.issues){const g=f.issues.map(y=>({message:y.message,path:y.path?.map(x=>String(x))}));throw new v_(n,g)}const d=f.value,m=Object.keys(e);return Object.fromEntries(m.map(g=>[g,d[g]]))}}const a=s["~standard"].validate(e);if(a instanceof Promise)throw new b_;if("issues"in a&&a.issues){const l=a.issues.map(c=>({message:c.message,path:c.path?.map(f=>String(f))}));throw new v_(n,l)}return a.value}generateGlobalKey(e,n){if(typeof e!="string"&&typeof e!="number")throw typeof e>"u"?new n4(n):new r4(e,n);return`KEY::${this.id}/${e}`}update(e,n,r){if(typeof e>"u")throw new a4;const s=this.state;this.lifecycle.validateCollectionUsable("update");const a=Lf();if(!a&&!this.config.onUpdate)throw new h4;const l=Array.isArray(e),c=l?e:[e];if(l&&c.length===0)throw new o4;const f=typeof n=="function"?n:r,d=typeof n=="function"?{}:n,m=c.map(x=>{const S=this.state.get(x);if(!S)throw new l4(x);return S});let p;l?p=m3(m,f):p=[p3(m[0],f)];const g=c.map((x,S)=>{const E=p[S];if(!E||Object.keys(E).length===0)return null;const C=m[S],k=this.validateData(E,"update",x),R=Object.assign({},C,k),I=this.config.getKey(C),j=this.config.getKey(R);if(I!==j)throw new u4(I,j);const A=this.generateGlobalKey(j,R);return{mutationId:crypto.randomUUID(),original:C,modified:R,changes:Object.fromEntries(Object.keys(E).map(z=>[z,R[z]])),globalKey:A,key:x,metadata:d.metadata,syncMetadata:s.syncedMetadata.get(x)||{},optimistic:d.optimistic??!0,type:"update",createdAt:new Date,updatedAt:new Date,collection:this.collection}}).filter(Boolean);if(g.length===0){const x=uf({mutationFn:async()=>{}});return x.commit().catch(()=>{}),s.scheduleTransactionCleanup(x),x}if(a)return a.applyMutations(g),s.transactions.set(a.id,a),s.scheduleTransactionCleanup(a),s.recomputeOptimisticState(!0),a;const y=uf({mutationFn:async x=>this.config.onUpdate({transaction:x.transaction,collection:this.collection})});return y.applyMutations(g),y.commit().catch(()=>{}),s.transactions.set(y.id,y),s.scheduleTransactionCleanup(y),s.recomputeOptimisticState(!0),y}}class k3 extends VE{constructor(){super()}setDeps(e){this.collection=e.collection}emit(e,n){this.emitInner(e,n)}emitStatusChange(e,n){this.emit("status:change",{type:"status:change",collection:this.collection,previousStatus:n,status:e});const r=`status:${e}`;this.emit(r,{type:r,collection:this.collection,previousStatus:n,status:e})}emitSubscribersChange(e,n){this.emit("subscribers:change",{type:"subscribers:change",collection:this.collection,previousSubscriberCount:n,subscriberCount:e})}cleanup(){this.clearListeners()}}function E0(t){const e=new k0(t);return t.utils?e.utils=t.utils:e.utils={},e}class k0{constructor(e){if(this.utils={},this.insert=(n,r)=>this._mutations.insert(n,r),this.delete=(n,r)=>this._mutations.delete(n,r),!e)throw new ZD;if(!e.sync)throw new YD;e.id?this.id=e.id:this.id=crypto.randomUUID(),this.config={...e,autoIndex:e.autoIndex??"eager"},this._changes=new Gj,this._events=new k3,this._indexes=new r3,this._lifecycle=new Jj(e,this.id),this._mutations=new E3(e,this.id),this._state=new Hj(e),this._sync=new Xj(e,this.id),this.comparisonOpts=R3(e),this._changes.setDeps({collection:this,lifecycle:this._lifecycle,sync:this._sync,events:this._events}),this._events.setDeps({collection:this}),this._indexes.setDeps({state:this._state,lifecycle:this._lifecycle}),this._lifecycle.setDeps({changes:this._changes,events:this._events,indexes:this._indexes,state:this._state,sync:this._sync}),this._mutations.setDeps({collection:this,lifecycle:this._lifecycle,state:this._state}),this._state.setDeps({collection:this,lifecycle:this._lifecycle,changes:this._changes,indexes:this._indexes,events:this._events}),this._sync.setDeps({collection:this,state:this._state,lifecycle:this._lifecycle,events:this._events}),e.startSync===!0&&this._sync.startSync()}get status(){return this._lifecycle.status}get subscriberCount(){return this._changes.activeSubscribersCount}onFirstReady(e){return this._lifecycle.onFirstReady(e)}isReady(){return this._lifecycle.status==="ready"}get isLoadingSubset(){return this._sync.isLoadingSubset}startSyncImmediate(){this._sync.startSync()}preload(){return this._sync.preload()}get(e){return this._state.get(e)}has(e){return this._state.has(e)}get size(){return this._state.size}*keys(){yield*this._state.keys()}*values(){yield*this._state.values()}*entries(){yield*this._state.entries()}*[Symbol.iterator](){yield*this._state[Symbol.iterator]()}forEach(e){return this._state.forEach(e)}map(e){return this._state.map(e)}getKeyFromItem(e){return this.config.getKey(e)}createIndex(e,n={}){return this._indexes.createIndex(e,n)}get indexes(){return this._indexes.indexes}validateData(e,n,r){return this._mutations.validateData(e,n,r)}get compareOptions(){return{...this.comparisonOpts}}update(e,n,r){return this._mutations.update(e,n,r)}get state(){const e=new Map;for(const[n,r]of this.entries())e.set(n,r);return e}stateWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.state):this.preload().then(()=>this.state)}get toArray(){return Array.from(this.values())}toArrayWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.toArray):this.preload().then(()=>this.toArray)}currentStateAsChanges(e={}){return Bj(this,e)}subscribeChanges(e,n={}){return this._changes.subscribeChanges(e,n)}on(e,n){return this._events.on(e,n)}once(e,n){return this._events.once(e,n)}off(e,n){this._events.off(e,n)}waitFor(e,n){return this._events.waitFor(e,n)}async cleanup(){return this._lifecycle.cleanup(),Promise.resolve()}}function R3(t){if(t.defaultStringCollation){const e=t.defaultStringCollation;return{stringSort:e.stringSort??"locale",locale:e.stringSort==="locale"?e.locale:void 0,localeOptions:e.stringSort==="locale"?e.localeOptions:void 0}}else return{stringSort:"locale"}}class Vt{constructor(e={}){this.query={},this.query={...e}}_createRefForSource(e,n){let r;try{r=Object.keys(e)}catch{const c=e===null?"null":"undefined";throw new of(n,c)}if(Array.isArray(e))throw new of(n,"array");if(r.length!==1)throw r.length===0?new of(n,"empty object"):r.every(c=>!isNaN(Number(c)))?new of(n,"string"):new S4(n);const s=r[0],a=e[s];let l;if(a instanceof k0)l=new uo(a,s);else if(a instanceof Vt){const c=a._getQuery();if(!c.from)throw new w4(n);l=new vr(c,s)}else throw new _4(s);return[s,l]}from(e){const[,n]=this._createRefForSource(e,"from clause");return new Vt({...this.query,from:n})}join(e,n,r="left"){const[s,a]=this._createRefForSource(e,"join clause"),c=[...this._getCurrentAliases(),s],f=Fa(c),d=n(f);let m,p;if(d.type==="func"&&d.name==="eq"&&d.args.length===2)m=d.args[0],p=d.args[1];else throw new C4;const g={from:a,type:r,left:m,right:p},y=this.query.join||[];return new Vt({...this.query,join:[...y,g]})}leftJoin(e,n){return this.join(e,n,"left")}rightJoin(e,n){return this.join(e,n,"right")}innerJoin(e,n){return this.join(e,n,"inner")}fullJoin(e,n){return this.join(e,n,"full")}where(e){const n=this._getCurrentAliases(),r=Fa(n),s=e(r),a=this.query.where||[];return new Vt({...this.query,where:[...a,s]})}having(e){const n=this._getCurrentAliases(),r=Fa(n),s=e(r),a=this.query.having||[];return new Vt({...this.query,having:[...a,s]})}select(e){const n=this._getCurrentAliases(),r=Fa(n),s=e(r),a=GE(s);return new Vt({...this.query,select:a,fnSelect:void 0})}orderBy(e,n="asc"){const r=this._getCurrentAliases(),s=Fa(r),a=e(s),l=typeof n=="string"?{direction:n,nulls:"first"}:{direction:n.direction??"asc",nulls:n.nulls??"first",stringSort:n.stringSort,locale:n.stringSort==="locale"?n.locale:void 0,localeOptions:n.stringSort==="locale"?n.localeOptions:void 0},c=m=>({expression:en(m),compareOptions:l}),f=Array.isArray(a)?a.map(m=>c(m)):[c(a)],d=this.query.orderBy||[];return new Vt({...this.query,orderBy:[...d,...f]})}groupBy(e){const n=this._getCurrentAliases(),r=Fa(n),s=e(r),a=Array.isArray(s)?s.map(c=>en(c)):[en(s)],l=this.query.groupBy||[];return new Vt({...this.query,groupBy:[...l,...a]})}limit(e){return new Vt({...this.query,limit:e})}offset(e){return new Vt({...this.query,offset:e})}distinct(){return new Vt({...this.query,distinct:!0})}findOne(){return new Vt({...this.query,singleResult:!0})}_getCurrentAliases(){const e=[];if(this.query.from&&e.push(this.query.from.alias),this.query.join)for(const n of this.query.join)e.push(n.from.alias);return e}get fn(){const e=this;return{select(n){return new Vt({...e.query,select:void 0,fnSelect:n})},where(n){return new Vt({...e.query,fnWhere:[...e.query.fnWhere||[],n]})},having(n){return new Vt({...e.query,fnHaving:[...e.query.fnHaving||[],n]})}}}_getQuery(){if(!this.query.from)throw new E4;return this.query}}function A3(t){return t===void 0?en(null):t instanceof LE||t instanceof Sr||t instanceof En||t instanceof jn?t:en(t)}function T3(t){return t!==null&&typeof t=="object"&&!d0(t)&&!t.__refProxy}function GE(t){if(!T3(t))return A3(t);const e={};for(const[n,r]of Object.entries(t)){if(typeof n=="string"&&n.startsWith("__SPREAD_SENTINEL__")){e[n]=r;continue}e[n]=GE(r)}return e}function O3(t){const e=t(new Vt);return QE(e)}function QE(t){return t._getQuery()}function M3(t){const e=N3(t);let n=t,r,s=0;const a=10;for(;s<a&&!Tr(n,r);)r=n,n=ny(n),s++;return{optimizedQuery:ZE(n),sourceWhereClauses:e}}function N3(t){const e=new Map;if(!t.where||t.where.length===0)return e;const r=sy(t.where).map(a=>YE(a)),s=JE(r);for(const[a,l]of s.singleSource)I3(t,a)&&e.set(a,l);return e}function I3(t,e){if(t.from.alias===e)return t.from.type==="collectionRef";if(t.join){for(const n of t.join)if(n.from.alias===e)return n.from.type==="collectionRef"}return!1}function ny(t){const e={...t,from:t.from.type==="queryRef"?new vr(ny(t.from.query),t.from.alias):t.from,join:t.join?.map(n=>({...n,from:n.from.type==="queryRef"?new vr(ny(n.from.query),n.from.alias):n.from}))};return D3(e)}function D3(t){if(!t.where||t.where.length===0)return t;if(!t.join||t.join.length===0){if(t.where.length>1){const c=sy(t.where),f=hd(c);return{...t,where:[f]}}return t}const e=t.where.filter(c=>!y_(c)),r=sy(e).map(c=>YE(c)),s=JE(r),a=j3(t,s),l=t.where.filter(c=>y_(c));return l.length>0&&(a.where=[...a.where||[],...l]),a}function ZE(t){return{...t,from:ry(t.from),join:t.join?.map(e=>({...e,from:ry(e.from)}))}}function ry(t){if(t.type==="collectionRef")return t;const e=ZE(t.query);if(z3(e)){const n=ry(e.from);return n.type==="collectionRef"?new uo(n.collection,t.alias):new vr(n.query,t.alias)}return new vr(e,t.alias)}function z3(t){return(!t.where||t.where.length===0)&&!t.select&&(!t.groupBy||t.groupBy.length===0)&&(!t.having||t.having.length===0)&&(!t.orderBy||t.orderBy.length===0)&&(!t.join||t.join.length===0)&&t.limit===void 0&&t.offset===void 0&&!t.fnSelect&&(!t.fnWhere||t.fnWhere.length===0)&&(!t.fnHaving||t.fnHaving.length===0)}function sy(t){const e=[];for(const n of t){const r=h0(n);e.push(...R0(r))}return e}function R0(t){if(t.type==="func"&&t.name==="and"){const e=[];for(const n of t.args)e.push(...R0(n));return e}else return[t]}function YE(t){const e=new Set;let n=!1;function r(s){switch(s.type){case"ref":if(s.path&&s.path.length>0){const a=s.path[0];a&&(e.add(a),s.path.length===1&&(n=!0))}break;case"func":s.args&&s.args.forEach(r);break;case"val":break;case"agg":s.args&&s.args.forEach(r);break}}return r(t),{expression:t,touchedSources:e,hasNamespaceOnlyRef:n}}function JE(t){const e=new Map,n=[];for(const a of t)if(a.touchedSources.size===1&&!a.hasNamespaceOnlyRef){const l=Array.from(a.touchedSources)[0];e.has(l)||e.set(l,[]),e.get(l).push(a.expression)}else(a.touchedSources.size>1||a.hasNamespaceOnlyRef)&&n.push(a.expression);const r=new Map;for(const[a,l]of e)r.set(a,hd(l));const s=n.length>0?hd(n):void 0;return{singleSource:r,multiSource:s}}function j3(t,e){const n=new Set,r=H_(t.from,e.singleSource,n),s=t.join?t.join.map(d=>({...d,from:H_(d.from,e.singleSource,n)})):void 0,a=[];e.multiSource&&a.push(e.multiSource);const l=t.join&&t.join.some(d=>d.type==="left"||d.type==="right"||d.type==="full");for(const[d,m]of e.singleSource)n.has(d)?l&&a.push(GD(m)):a.push(m);const c=a.length>1?[hd(a.flatMap(d=>R0(h0(d))))]:a;return{select:t.select,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,distinct:t.distinct,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0,from:r,join:s,where:c.length>0?c:[]}}function Xa(t){return{from:t.from.type==="collectionRef"?new uo(t.from.collection,t.from.alias):new vr(Xa(t.from.query),t.from.alias),select:t.select,join:t.join?t.join.map(e=>({type:e.type,left:e.left,right:e.right,from:e.from.type==="collectionRef"?new uo(e.from.collection,e.from.alias):new vr(Xa(e.from.query),e.from.alias)})):void 0,where:t.where?[...t.where]:void 0,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0}}function H_(t,e,n){const r=e.get(t.alias);if(!r)return t.type==="collectionRef"?new uo(t.collection,t.alias):new vr(Xa(t.query),t.alias);if(t.type==="collectionRef"){const l={from:new uo(t.collection,t.alias),where:[r]};return n.add(t.alias),new vr(l,t.alias)}if(!U3(t.query,r,t.alias))return new vr(Xa(t.query),t.alias);if(H3(t.query,r,t.alias))return new vr(Xa(t.query),t.alias);const s=t.query.where||[],a={...Xa(t.query),where:[...s,r]};return n.add(t.alias),new vr(a,t.alias)}function L3(t,e,n){return t.select?XE(t.select)||q3(t.select,e,n):!1}function P3(t){return t.groupBy&&t.groupBy.length>0}function F3(t){return t.having&&t.having.length>0}function $3(t){return t.orderBy&&t.orderBy.length>0&&(t.limit!==void 0||t.offset!==void 0)}function B3(t){return t.fnSelect||t.fnWhere&&t.fnWhere.length>0||t.fnHaving&&t.fnHaving.length>0}function U3(t,e,n){return!(L3(t,e,n)||P3(t)||F3(t)||$3(t)||B3(t))}function XE(t){for(const e of Object.values(t))if(typeof e=="object"){const n=e;if(n.type==="agg"||!("type"in n)&&XE(n))return!0}return!1}function A0(t){const e=[];if(t==null||typeof t!="object")return e;switch(t.type){case"ref":e.push(t);break;case"func":case"agg":for(const n of t.args??[])e.push(...A0(n));break}return e}function q3(t,e,n){const r=new Set;for(const[a,l]of Object.entries(t))a.startsWith("__SPREAD_SENTINEL__")||l instanceof En||r.add(a);const s=A0(e);for(const a of s){const l=a.path;if(!Array.isArray(l)||l.length<2)continue;const c=l[0],f=l[1];if(c===n&&r.has(f))return!0}return!1}function H3(t,e,n){const r=A0(e);if(r.every(a=>a.path[0]!==n))return!1;if(t.fnSelect)return!0;const s=t.select;if(!s)return!1;for(const a of r){const l=a.path;if(l.length<2||l[0]!==n)continue;const c=s[l[1]];if(!c)continue;if(!(c instanceof En)||c.path.length<2)return!0;const[f,d]=c.path;if(f!==n&&f!==t.from.alias||d!==l[1])return!0}return!1}function hd(t){if(t.length===0)throw new K4;return t.length===1?t[0]:new Sr("and",t)}function V3(t,e,n,r,s,a,l,c,f,d,m,p,g,y,x,S,E,C){let k=t;for(const R of e)k=K3(k,R,n,r,s,a,l,c,f,d,m,p,g,y,x,S,E,C);return k}function K3(t,e,n,r,s,a,l,c,f,d,m,p,g,y,x,S,E,C){const k=e.from.type==="collectionRef",{alias:R,input:I,collectionId:j}=Q3(e.from,a,f,d,m,p,g,y,l,c,S,E,C);n[R]=I,k&&(E[R]=j);const A=f[r],z=f[j];if(!A)throw new w_(r);if(!z)throw new w_(j);const{activeSource:L,lazySource:P}=Y3(e.type,A,z),M=Object.keys(n),{mainExpr:$,joinedExpr:G}=G3(e.left,e.right,M,R),ee=Ln($),te=Ln(G);let V=t.pipe(_n(([J,ae])=>[ee(ae),[J,ae]])),F=I.pipe(_n(([J,ae])=>{const Q={[R]:ae};return[te(Q),[J,Q]]}));if(!["inner","left","right","full"].includes(e.type))throw new D4(e.type);if(L){const J=L==="main"?e.from:x.from,ae=J.type==="queryRef"&&(J.query.limit||J.query.offset),Q=$.type==="func"||G.type==="func";if(!ae&&!Q){const N=L==="main"?R:s;p.add(N);const D=L==="main"?V:F,T=hu(x,L==="main"?G:$,P),se=T.collection,ce=T.path[0];ce&&Ud(ce,T.path,se);const he=D.pipe(rj(ve=>{const Ae=C[N]||N,_e=d[Ae];if(!_e)throw new G4(Ae,N,P.id,Object.keys(d));if(_e.hasLoadedInitialState())return;const me=ve.getInner().map(([[Ze]])=>Ze),Ee=new En(T.path);_e.requestSnapshot({where:Tj(Ee,me),optimizedOnly:!0})||_e.requestSnapshot()}));L==="main"?V=he:F=he}}return V.pipe(cj(F,e.type),Z3(e.type))}function G3(t,e,n,r){const s=n.filter(c=>c!==r),a=iy(t),l=iy(e);if(a&&s.includes(a)&&l===r)return{mainExpr:t,joinedExpr:e};if(a===r&&l&&s.includes(l))return{mainExpr:e,joinedExpr:t};throw!a||!l?new j4:a===l?new z4(a):s.includes(a)?l!==r?new P4(r):new F4:new L4(a)}function iy(t){switch(t.type){case"ref":return t.path[0]||null;case"func":{const e=new Set;for(const n of t.args){const r=iy(n);r&&e.add(r)}return e.size===1?Array.from(e)[0]:null}default:return null}}function Q3(t,e,n,r,s,a,l,c,f,d,m,p,g){switch(t.type){case"collectionRef":{const y=e[t.alias];if(!y)throw new PE(t.alias,t.collection.id,Object.keys(e));return p[t.alias]=t.collection.id,{alias:t.alias,input:y,collectionId:t.collection.id}}case"queryRef":{const y=d.get(t.query)||t.query,x=m(y,e,n,r,s,a,l,c,f,d);Object.assign(p,x.aliasToCollectionId),Object.assign(g,x.aliasRemapping);const S=Object.keys(x.aliasToCollectionId).find(k=>x.aliasToCollectionId[k]===x.collectionId);S&&S!==t.alias&&(g[t.alias]=S);const C=x.pipeline.pipe(_n(k=>{const[R,[I,j]]=k;return[R,I]}));return{alias:t.alias,input:C,collectionId:x.collectionId}}default:throw new $4(t.type)}}function Z3(t){return function(e){return e.pipe(Xs(n=>{const[r,[s,a]]=n,l=s?.[1],c=a?.[1];return t==="inner"?!!(l&&c):t==="left"?!!l:t==="right"?!!c:!0}),_n(n=>{const[r,[s,a]]=n,l=s?.[0],c=s?.[1],f=a?.[0],d=a?.[1],m={};return c&&Object.assign(m,c),d&&Object.assign(m,d),[`[${l},${f}]`,m]}))}}function Y3(t,e,n){switch(t){case"left":return{activeSource:"main",lazySource:n};case"right":return{activeSource:"joined",lazySource:e};case"inner":return e.size<n.size?{activeSource:"main",lazySource:n}:{activeSource:"joined",lazySource:e};default:return{activeSource:void 0,lazySource:void 0}}}function ay(t){return t instanceof jn?t.value:t}function J3(t,e,n){const r=t.source(e);if(r&&typeof r=="object"){let s=n;const a=t.targetPath;if(a.length===0)for(const[l,c]of Object.entries(r))n[l]=ay(c);else for(let l=0;l<a.length;l++){const c=a[l];if(l===a.length-1){const f=s[c]??={};if(typeof f=="object")for(const[d,m]of Object.entries(r))f[d]=ay(m)}else{const f=s[c];(f==null||typeof f!="object")&&(s[c]={}),s=s[c]}}}}function X3(t,e,n){const r=t.alias.split(".");if(r.length===1)n[t.alias]=t.compiled(e);else{let s=n;for(let a=0;a<r.length-1;a++){const l=r[a],c=s[l];(c==null||typeof c!="object")&&(s[l]={}),s=s[l]}s[r[r.length-1]]=ay(t.compiled(e))}}function W3([t,e],n){const r={};for(const s of n)s.kind==="merge"?J3(s,e,r):X3(s,e,r);return[t,{...e,__select_results:r}]}function e5(t,e,n){const r=[];return WE([],e,r),t.pipe(_n(s=>W3(s,r)))}function t5(t){return t.type==="agg"}function n5(t){return t&&typeof t=="object"&&!d0(t)}function WE(t,e,n){for(const[r,s]of Object.entries(e)){if(r.startsWith("__SPREAD_SENTINEL__")){const l=r.slice(19),c=l.lastIndexOf("__"),f=c>=0?l.slice(0,c):l,d=s&&typeof s=="object"&&"type"in s&&s.type==="ref";if(f.includes(".")||d){const m=[...t],p=d?s:new En(f.split(".")),g=Ln(p);n.push({kind:"merge",targetPath:m,source:g})}else{const m=f,p=[...t];n.push({kind:"merge",targetPath:p,source:g=>g[m]})}continue}const a=s;if(n5(a)){WE([...t,r],a,n);continue}if(t5(a))n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>null});else{if(a===void 0||!d0(a)){n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>a});continue}if(a instanceof jn){const l=a.value;n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>l})}else n.push({kind:"field",alias:[...t,r].join("."),compiled:Ln(a)})}}}function T0(t,e,n,r,s,a,l,c,f=new WeakMap,d=new WeakMap){const m=f.get(t);if(m)return m;oy(t);const{optimizedQuery:p,sourceWhereClauses:g}=M3(t);d.set(p,t),uy(p,t,d);const y={...e},x={},S={},E={},{alias:C,input:k,collectionId:R}=s5(p.from,y,n,r,s,a,l,c,f,d,x,S);E[C]=k;let I=k.pipe(_n(([L,P])=>[L,{[C]:P}]));if(p.join&&p.join.length>0&&(I=V3(I,p.join,E,R,C,y,f,d,n,r,s,a,l,c,t,T0,x,S)),p.where&&p.where.length>0)for(const L of p.where){const P=h0(L),M=Ln(P);I=I.pipe(Xs(([$,G])=>ro(M(G))))}if(p.fnWhere&&p.fnWhere.length>0)for(const L of p.fnWhere)I=I.pipe(Xs(([P,M])=>ro(L(M))));if(p.distinct&&!p.fnSelect&&!p.select)throw new k4;if(p.fnSelect?I=I.pipe(_n(([L,P])=>{const M=p.fnSelect(P);return[L,{...P,__select_results:M}]})):p.select?I=e5(I,p.select):I=I.pipe(_n(([L,P])=>{const M=!p.join&&!p.groupBy?P[C]:P;return[L,{...P,__select_results:M}]})),p.groupBy&&p.groupBy.length>0?I=P_(I,p.groupBy,p.having,p.select,p.fnHaving):p.select&&Object.values(p.select).some(P=>P.type==="agg")&&(I=P_(I,[],p.having,p.select,p.fnHaving)),p.having&&(!p.groupBy||p.groupBy.length===0)&&!(p.select?Object.values(p.select).some(P=>P.type==="agg"):!1))throw new R4;if(p.fnHaving&&p.fnHaving.length>0&&(!p.groupBy||p.groupBy.length===0))for(const L of p.fnHaving)I=I.pipe(Xs(([P,M])=>L(M)));if(p.distinct&&(I=I.pipe(dj(([L,P])=>P.__select_results))),p.orderBy&&p.orderBy.length>0){const M=$j(t,I,p.orderBy,p.select||{},n[R],l,c,p.limit,p.offset).pipe(_n(([G,[ee,te]])=>{const V=ee.__select_results,F=ly(V);return[G,[F,te]]})),$={collectionId:R,pipeline:M,sourceWhereClauses:g,aliasToCollectionId:x,aliasRemapping:S};return f.set(t,$),$}else if(p.limit!==void 0||p.offset!==void 0)throw new A4;const A=I.pipe(_n(([L,P])=>{const M=P.__select_results,$=ly(M);return[L,[$,void 0]]})),z={collectionId:R,pipeline:A,sourceWhereClauses:g,aliasToCollectionId:x,aliasRemapping:S};return f.set(t,z),z}function r5(t){const e=new Set;if(t.from.type==="collectionRef"&&e.add(t.from.alias),t.join)for(const n of t.join)n.from.type==="collectionRef"&&e.add(n.from.alias);return e}function oy(t,e=new Set){const n=r5(t);for(const s of n)if(e.has(s))throw new T4(s,Array.from(e));const r=new Set([...e,...n]);if(t.from.type==="queryRef"&&oy(t.from.query,r),t.join)for(const s of t.join)s.from.type==="queryRef"&&oy(s.from.query,r)}function s5(t,e,n,r,s,a,l,c,f,d,m,p){switch(t.type){case"collectionRef":{const g=e[t.alias];if(!g)throw new PE(t.alias,t.collection.id,Object.keys(e));return m[t.alias]=t.collection.id,{alias:t.alias,input:g,collectionId:t.collection.id}}case"queryRef":{const g=d.get(t.query)||t.query,y=T0(g,e,n,r,s,a,l,c,f,d);Object.assign(m,y.aliasToCollectionId),Object.assign(p,y.aliasRemapping);const x=Object.keys(y.aliasToCollectionId).find(C=>y.aliasToCollectionId[C]===y.collectionId);x&&x!==t.alias&&(p[t.alias]=x);const E=y.pipeline.pipe(_n(C=>{const[k,[R,I]]=C,j=ly(R);return[k,j]}));return{alias:t.alias,input:E,collectionId:y.collectionId}}default:throw new O4(t.type)}}function i5(t){return t instanceof jn||t&&typeof t=="object"&&"type"in t&&t.type==="val"}function ly(t){return i5(t)?t.value:t}function uy(t,e,n){if(t.from.type==="queryRef"&&e.from.type==="queryRef"&&(n.set(t.from.query,e.from.query),uy(t.from.query,e.from.query,n)),t.join&&e.join)for(let r=0;r<t.join.length&&r<e.join.length;r++){const s=t.join[r],a=e.join[r];s.from.type==="queryRef"&&a.from.type==="queryRef"&&(n.set(s.from.query,a.from.query),uy(s.from.query,a.from.query,n))}}function O0(t,e){const n=t.type;if(n==="val")return new jn(t.value);if(n==="ref"){const r=t.path;if(Array.isArray(r)){if(r[0]===e&&r.length>1)return new En(r.slice(1));if(r.length===1&&r[0]!==void 0)return new En([r[0]])}return new En(Array.isArray(r)?r:[String(r)])}else{const r=[];for(const s of t.args){const a=O0(s,e);r.push(a)}return new Sr(t.name,r)}}function V_(t,e){return t.map(r=>{const s=O0(r.expression,e);return{...r,expression:s}})}const K_=Symbol.for("@tanstack/db.collection-config-builder");class a5{constructor(e,n,r,s){this.alias=e,this.collectionId=n,this.collection=r,this.collectionConfigBuilder=s,this.biggest=void 0,this.subscriptionLoadingPromises=new Map,this.sentToD2Keys=new Set}subscribe(){const e=this.getWhereClauseForAlias();if(e){const n=O0(e,this.alias);return this.subscribeToChanges(n)}return this.subscribeToChanges()}subscribeToChanges(e){let n;const r=this.getOrderByInfo();if(r)n=this.subscribeToOrderedChanges(e,r);else{const c=!this.collectionConfigBuilder.isLazyAlias(this.alias);n=this.subscribeToMatchingChanges(e,c)}const s=()=>{if(!this.subscriptionLoadingPromises.has(n)){let c;const f=new Promise(d=>{c=d});this.subscriptionLoadingPromises.set(n,{resolve:c}),this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(f)}};n.status==="loadingSubset"&&s();const a=n.on("status:change",c=>{if(c.status==="loadingSubset")s();else{const f=this.subscriptionLoadingPromises.get(n);f&&(this.subscriptionLoadingPromises.delete(n),f.resolve())}}),l=()=>{const c=this.subscriptionLoadingPromises.get(n);c&&(this.subscriptionLoadingPromises.delete(n),c.resolve()),a(),n.unsubscribe()};return this.collectionConfigBuilder.currentSyncState.unsubscribeCallbacks.add(l),n}sendChangesToPipeline(e,n){const r=Array.isArray(e)?e:[...e],s=[];for(const f of r){if(f.type==="insert"){if(this.sentToD2Keys.has(f.key))continue;this.sentToD2Keys.add(f.key)}else f.type==="delete"&&this.sentToD2Keys.delete(f.key);s.push(f)}const a=this.collectionConfigBuilder.currentSyncState.inputs[this.alias],c=o5(a,s,this.collection.config.getKey)>0?n:void 0;this.collectionConfigBuilder.scheduleGraphRun(c,{alias:this.alias})}subscribeToMatchingChanges(e,n=!1){const r=a=>{this.sendChangesToPipeline(a)};return this.collection.subscribeChanges(r,{...n&&{includeInitialState:n},whereExpression:e})}subscribeToOrderedChanges(e,n){const{orderBy:r,offset:s,limit:a,index:l}=n,c=p=>{const g=l5(p);this.sendChangesToPipelineWithTracking(g,f)},f=this.collection.subscribeChanges(c,{whereExpression:e}),d=this.collection.on("truncate",()=>{this.biggest=void 0,this.sentToD2Keys.clear()});f.on("unsubscribed",()=>{d()});const m=V_(r,this.alias);return l?(f.setOrderByIndex(l),f.requestLimitedSnapshot({limit:s+a,orderBy:m})):f.requestSnapshot({orderBy:m,limit:s+a}),f}loadMoreIfNeeded(e){const n=this.getOrderByInfo();if(!n)return!0;const{dataNeeded:r}=n;if(!r)return!0;const s=r();return s>0&&this.loadNextItems(s,e),!0}sendChangesToPipelineWithTracking(e,n){const r=this.getOrderByInfo();if(!r){this.sendChangesToPipeline(e);return}const s=this.trackSentValues(e,r.comparator),a=n;a[K_]??=this.loadMoreIfNeeded.bind(this,n),this.sendChangesToPipeline(s,a[K_])}loadNextItems(e,n){const r=this.getOrderByInfo();if(!r)return;const{orderBy:s,valueExtractorForRawRow:a,offset:l}=r,c=this.biggest,f=c?a(c):void 0,d=f!==void 0?Array.isArray(f)?f:[f]:void 0,m=V_(s,this.alias);n.requestLimitedSnapshot({orderBy:m,limit:e,minValues:d,offset:l})}getWhereClauseForAlias(){const e=this.collectionConfigBuilder.sourceWhereClausesCache;if(e)return e.get(this.alias)}getOrderByInfo(){const e=this.collectionConfigBuilder.optimizableOrderByCollections[this.collectionId];if(e&&e.alias===this.alias)return e}*trackSentValues(e,n){for(const r of e)r.type!=="delete"&&(this.biggest?n(this.biggest,r.value)<0&&(this.biggest=r.value):this.biggest=r.value),yield r}}function o5(t,e,n){const r=[];for(const s of e){const a=n(s.value);s.type==="insert"?r.push([[a,s.value],1]):s.type==="update"?(r.push([[a,s.previousValue],-1]),r.push([[a,s.value],1])):r.push([[a,s.value],-1])}return r.length!==0&&t.sendData(new Kt(r)),r.length}function*l5(t){for(const e of t)e.type==="update"?(yield{type:"delete",key:e.key,value:e.previousValue},yield{type:"insert",key:e.key,value:e.value}):yield e}const ek=new WeakMap;function u5(t){return t.utils?.[w0]?.getBuilder?.()}function c5(t,e){ek.set(t,e)}function f5(t){return ek.get(t)}let d5=0;class h5{constructor(e){this.config=e,this.compiledAliasToCollectionId={},this.resultKeys=new WeakMap,this.orderByIndices=new WeakMap,this.isGraphRunning=!1,this.runCount=0,this.isInErrorState=!1,this.aliasDependencies={},this.builderDependencies=new Set,this.pendingGraphRuns=new Map,this.subscriptions={},this.lazySourcesCallbacks={},this.lazySources=new Set,this.optimizableOrderByCollections={},this.id=e.id||`live-query-${++d5}`,this.query=p5(e),this.collections=g5(this.query);const n=y5(this.query);this.collectionByAlias={};for(const[r,s]of n.entries()){const a=this.collections[r];if(a)for(const l of s)this.collectionByAlias[l]=a}this.query.orderBy&&this.query.orderBy.length>0&&(this.compare=m5(this.orderByIndices)),this.compareOptions=this.config.defaultStringCollation??tk(this.query).compareOptions,this.compileBasePipeline()}hasJoins(e){return!!(e.join&&e.join.length>0||e.from.type==="queryRef"&&this.hasJoins(e.from.query))}getConfig(){return{id:this.id,getKey:this.config.getKey||(e=>this.resultKeys.get(e)),sync:this.getSyncConfig(),compare:this.compare,defaultStringCollation:this.compareOptions,gcTime:this.config.gcTime||5e3,schema:this.config.schema,onInsert:this.config.onInsert,onUpdate:this.config.onUpdate,onDelete:this.config.onDelete,startSync:this.config.startSync,singleResult:this.query.singleResult,utils:{getRunCount:this.getRunCount.bind(this),setWindow:this.setWindow.bind(this),getWindow:this.getWindow.bind(this),[w0]:{getBuilder:()=>this,hasCustomGetKey:!!this.config.getKey,hasJoins:this.hasJoins(this.query)}}}}setWindow(e){if(!this.windowFn)throw new Z4;return this.currentWindow=e,this.windowFn(e),this.maybeRunGraphFn?.(),this.liveQueryCollection?.isLoadingSubset?new Promise(n=>{const r=this.liveQueryCollection.on("loadingSubset:change",s=>{s.isLoadingSubset||(r(),n())})}):!0}getWindow(){if(!(!this.windowFn||!this.currentWindow))return{offset:this.currentWindow.offset??0,limit:this.currentWindow.limit??0}}getCollectionIdForAlias(e){const n=this.compiledAliasToCollectionId[e];if(n)return n;const r=this.collectionByAlias[e];if(r)return r.id;throw new Error(`Unknown source alias "${e}"`)}isLazyAlias(e){return this.lazySources.has(e)}maybeRunGraph(e){if(!this.isGraphRunning){if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("maybeRunGraph called without active sync session. This should not happen.");this.isGraphRunning=!0;try{const{begin:n,commit:r}=this.currentSyncConfig,s=this.currentSyncState;if(this.isInErrorState)return;if(s.subscribedToAllCollections){for(;s.graph.pendingWork();)s.graph.run(),e?.();s.messagesCount===0&&(n(),r(),this.updateLiveQueryStatus(this.currentSyncConfig))}}finally{this.isGraphRunning=!1}}}scheduleGraphRun(e,n){const r=n?.contextId??Lf()?.id,s=n?.jobId??this,a=(()=>{if(n?.dependencies)return n.dependencies;const f=new Set(this.builderDependencies);if(n?.alias){const d=this.aliasDependencies[n.alias];if(d)for(const m of d)f.add(m)}return f.delete(this),Array.from(f)})();if(r)for(const f of a)typeof f.scheduleGraphRun=="function"&&f.scheduleGraphRun(void 0,{contextId:r});if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("scheduleGraphRun called without active sync session. This should not happen.");let l=r?this.pendingGraphRuns.get(r):void 0;l||(l={loadCallbacks:new Set},r&&this.pendingGraphRuns.set(r,l)),e&&l.loadCallbacks.add(e);const c=r?void 0:l;fd.schedule({contextId:r,jobId:s,dependencies:a,run:()=>this.executeGraphRun(r,c)})}clearPendingGraphRun(e){this.pendingGraphRuns.delete(e)}hasPendingGraphRun(e){return this.pendingGraphRuns.has(e)}executeGraphRun(e,n){const r=n??(e?this.pendingGraphRuns.get(e):void 0);if(e&&this.pendingGraphRuns.delete(e),!r||!this.currentSyncConfig||!this.currentSyncState)return;this.incrementRunCount();const s=()=>{let a=!0,l;if(r.loadCallbacks.forEach(c=>{try{a=c()&&a}catch(f){a=!1,l??=f}}),l)throw l;return a};this.maybeRunGraph(s)}getSyncConfig(){return{rowUpdateMode:"full",sync:this.syncFn.bind(this)}}incrementRunCount(){this.runCount++}getRunCount(){return this.runCount}syncFn(e){this.liveQueryCollection=e.collection,this.currentSyncConfig=e;const n={messagesCount:0,subscribedToAllCollections:!1,unsubscribeCallbacks:new Set},r=this.extendPipelineWithChangeProcessing(e,n);this.currentSyncState=r,this.unsubscribeFromSchedulerClears=fd.onClear(a=>{this.clearPendingGraphRun(a)});const s=this.subscribeToAllCollections(e,r);return this.maybeRunGraphFn=()=>this.scheduleGraphRun(s),this.scheduleGraphRun(s),()=>{n.unsubscribeCallbacks.forEach(a=>a()),this.currentSyncConfig=void 0,this.currentSyncState=void 0,this.pendingGraphRuns.clear(),this.graphCache=void 0,this.inputsCache=void 0,this.pipelineCache=void 0,this.sourceWhereClausesCache=void 0,this.lazySources.clear(),this.optimizableOrderByCollections={},this.lazySourcesCallbacks={},Object.keys(this.subscriptions).forEach(a=>delete this.subscriptions[a]),this.compiledAliasToCollectionId={},this.unsubscribeFromSchedulerClears?.(),this.unsubscribeFromSchedulerClears=void 0}}compileBasePipeline(){this.graphCache=new Vz,this.inputsCache=Object.fromEntries(Object.keys(this.collectionByAlias).map(r=>[r,this.graphCache.newInput()]));const e=T0(this.query,this.inputsCache,this.collections,this.subscriptions,this.lazySourcesCallbacks,this.lazySources,this.optimizableOrderByCollections,r=>{this.windowFn=r});this.pipelineCache=e.pipeline,this.sourceWhereClausesCache=e.sourceWhereClauses,this.compiledAliasToCollectionId=e.aliasToCollectionId;const n=Object.keys(this.compiledAliasToCollectionId).filter(r=>!Object.hasOwn(this.inputsCache,r));if(n.length>0)throw new Q4(n)}maybeCompileBasePipeline(){return(!this.graphCache||!this.inputsCache||!this.pipelineCache)&&this.compileBasePipeline(),{graph:this.graphCache,inputs:this.inputsCache,pipeline:this.pipelineCache}}extendPipelineWithChangeProcessing(e,n){const{begin:r,commit:s}=e,{graph:a,inputs:l,pipeline:c}=this.maybeCompileBasePipeline();return c.pipe(aj(f=>{const d=f.getInner();n.messagesCount+=d.length,r(),d.reduce(v5,new Map).forEach(this.applyChanges.bind(this,e)),s()})),a.finalize(),n.graph=a,n.inputs=l,n.pipeline=c,n}applyChanges(e,n,r){const{write:s,collection:a}=e,{deletes:l,inserts:c,value:f,orderByIndex:d}=n;if(this.resultKeys.set(f,r),d!==void 0&&this.orderByIndices.set(f,d),c&&l===0)s({value:f,type:"insert"});else if(c>l||c===l&&a.has(a.getKeyFromItem(f)))s({value:f,type:"update"});else if(l>0)s({value:f,type:"delete"});else throw new Error(`Could not apply changes: ${JSON.stringify(n)}. This should never happen.`)}handleSourceStatusChange(e,n,r){const{status:s}=r;if(s==="error"){this.transitionToError(`Source collection '${n}' entered error state`);return}if(s==="cleaned-up"){this.transitionToError(`Source collection '${n}' was manually cleaned up while live query '${this.id}' depends on it. Live queries prevent automatic GC, so this was likely a manual cleanup() call.`);return}this.updateLiveQueryStatus(e)}updateLiveQueryStatus(e){const{markReady:n}=e;this.isInErrorState||this.allCollectionsReady()&&n()}transitionToError(e){this.isInErrorState=!0,console.error(`[Live Query Error] ${e}`),this.liveQueryCollection?._lifecycle.setStatus("error")}allCollectionsReady(){return Object.values(this.collections).every(e=>e.isReady())}subscribeToAllCollections(e,n){const r=Object.entries(this.compiledAliasToCollectionId);if(r.length===0)throw new Error(`Compiler returned no alias metadata for query '${this.id}'. This should not happen; please report.`);const s=r.map(([l,c])=>{const f=this.collectionByAlias[l]??this.collections[c],d=f5(f);d&&d!==this?(this.aliasDependencies[l]=[d],this.builderDependencies.add(d)):this.aliasDependencies[l]=[];const m=new a5(l,c,f,this),p=f.on("status:change",x=>{this.handleSourceStatusChange(e,c,x)});n.unsubscribeCallbacks.add(p);const g=m.subscribe();return this.subscriptions[l]=g,m.loadMoreIfNeeded.bind(m,g)}),a=()=>(s.map(l=>l()),!0);return n.subscribedToAllCollections=!0,this.updateLiveQueryStatus(e),a}}function p5(t){return typeof t.query=="function"?O3(t.query):QE(t.query)}function m5(t){return(e,n)=>{const r=t.get(e),s=t.get(n);return r&&s?r<s?-1:r>s?1:0:0}}function g5(t){const e={};function n(s){s.type==="collectionRef"?e[s.collection.id]=s.collection:s.type==="queryRef"&&r(s.query)}function r(s){if(s.from&&n(s.from),s.join&&Array.isArray(s.join))for(const a of s.join)a.from&&n(a.from)}return r(t),e}function tk(t){const e=t.from;if(e.type==="collectionRef")return e.collection;if(e.type==="queryRef")return tk(e.query);throw new Error(`Failed to extract collection. Invalid FROM clause: ${JSON.stringify(t)}`)}function y5(t){const e=new Map;function n(s){if(s)if(s.type==="collectionRef"){const{id:a}=s.collection,l=e.get(a);l?l.add(s.alias):e.set(a,new Set([s.alias]))}else s.type==="queryRef"&&r(s.query)}function r(s){if(s&&(n(s.from),s.join))for(const a of s.join)n(a.from)}return r(t),e}function v5(t,[[e,n],r]){const[s,a]=n,l=t.get(e)||{deletes:0,inserts:0,value:s,orderByIndex:a};return r<0?l.deletes+=Math.abs(r):r>0&&(l.inserts+=r,l.value=s,l.orderByIndex=a),t.set(e,l),t}function G_(t){return new h5(t).getConfig()}function Xm(t){if(typeof t=="function"){const n=G_({query:t});return Q_(n)}else{const e=t,n=G_(e);return e.utils&&(n.utils={...n.utils,...e.utils}),Q_(n)}}function Q_(t){const e=E0(t),n=u5(t);return n&&c5(e,n),e}const Wm=1;function nk(t,e=[]){const n=t&&typeof t=="object"&&typeof t.subscribeChanges=="function"&&typeof t.startSyncImmediate=="function"&&typeof t.id=="string",r=q.useRef(null),s=q.useRef(null),a=q.useRef(null),l=q.useRef(0),c=q.useRef(null),f=!r.current||n&&a.current!==t||!n&&(s.current===null||s.current.length!==e.length||s.current.some((x,S)=>x!==e[S]));if(f)if(n)t.startSyncImmediate(),r.current=t,a.current=t;else if(typeof t=="function"){const x=new Vt,S=t(x);if(S==null)r.current=null;else if(S instanceof k0)S.startSyncImmediate(),r.current=S;else if(S instanceof Vt)r.current=Xm({query:t,startSync:!0,gcTime:Wm});else if(S&&typeof S=="object")r.current=Xm({startSync:!0,gcTime:Wm,...S});else throw new Error(`useLiveQuery callback must return a QueryBuilder, LiveQueryCollectionConfig, Collection, undefined, or null. Got: ${typeof S}`);s.current=[...e]}else r.current=Xm({startSync:!0,gcTime:Wm,...t}),s.current=[...e];f&&(l.current=0,c.current=null);const d=q.useRef(null);(!d.current||f)&&(d.current=x=>{if(!r.current)return()=>{};const S=r.current.subscribeChanges(()=>{l.current+=1,x()});return r.current.status==="ready"&&(l.current+=1,x()),()=>{S.unsubscribe()}});const m=q.useRef(null);(!m.current||f)&&(m.current=()=>{const x=l.current,S=r.current;return(!c.current||c.current.version!==x||c.current.collection!==S)&&(c.current={collection:S,version:x}),c.current});const p=q.useSyncExternalStore(d.current,m.current),g=q.useRef(null),y=q.useRef(null);if(!g.current||g.current.version!==p.version||g.current.collection!==p.collection){if(!p.collection)y.current={state:void 0,data:void 0,collection:void 0,status:"disabled",isLoading:!1,isReady:!0,isIdle:!1,isError:!1,isCleanedUp:!1,isEnabled:!1};else{const x=Array.from(p.collection.entries()),E=p.collection.config.singleResult;let C=null,k=null;y.current={get state(){return C||(C=new Map(x)),C},get data(){return k||(k=x.map(([,R])=>R)),E?k[0]:k},collection:p.collection,status:p.collection.status,isLoading:p.collection.status==="loading",isReady:p.collection.status==="ready",isIdle:p.collection.status==="idle",isError:p.collection.status==="error",isCleanedUp:p.collection.status==="cleaned-up",isEnabled:!0}}g.current=p}return y.current}class ai extends rr{constructor(e){super(e),this.name="QueryCollectionError"}}class b5 extends ai{constructor(){super("[QueryCollection] queryKey must be provided."),this.name="QueryKeyRequiredError"}}class x5 extends ai{constructor(){super("[QueryCollection] queryFn must be provided."),this.name="QueryFnRequiredError"}}class S5 extends ai{constructor(){super("[QueryCollection] queryClient must be provided."),this.name="QueryClientRequiredError"}}class w5 extends ai{constructor(){super("[QueryCollection] getKey must be provided."),this.name="GetKeyRequiredError"}}class _5 extends ai{constructor(){super("Collection must be in 'ready' state for manual sync operations. Sync not initialized yet."),this.name="SyncNotInitializedError"}}class C5 extends ai{constructor(e){super(`Duplicate key '${e}' found within batch operations`),this.name="DuplicateKeyInBatchError"}}class E5 extends ai{constructor(e){super(`Update operation: Item with key '${e}' does not exist`),this.name="UpdateOperationItemNotFoundError"}}class k5 extends ai{constructor(e){super(`Delete operation: Item with key '${e}' does not exist`),this.name="DeleteOperationItemNotFoundError"}}const Ti=new WeakMap;function R5(t,e){const n=Array.isArray(t)?t:[t],r=[];for(const s of n)if(s.type==="delete"){const a=Array.isArray(s.key)?s.key:[s.key];for(const l of a)r.push({type:"delete",key:l})}else{const a=Array.isArray(s.data)?s.data:[s.data];for(const l of a){let c;if(s.type==="update")c=e.getKey(l);else{const f=e.collection.validateData(l,s.type==="upsert"?"insert":s.type);c=e.getKey(f)}r.push({type:s.type,key:c,data:l})}}return r}function A5(t,e){const n=new Set;for(const r of t){if(n.has(r.key))throw new C5(r.key);if(n.add(r.key),r.type==="update"){if(!e.collection._state.syncedData.has(r.key))throw new E5(r.key)}else if(r.type==="delete"&&!e.collection._state.syncedData.has(r.key))throw new k5(r.key)}}function _l(t,e){const n=R5(t,e);A5(n,e),e.begin();for(const s of n)switch(s.type){case"insert":{const a=e.collection.validateData(s.data,"insert");e.write({type:"insert",value:a});break}case"update":{const l={...e.collection._state.syncedData.get(s.key),...s.data},c=e.collection.validateData(l,"update",s.key);e.write({type:"update",value:c});break}case"delete":{const a=e.collection._state.syncedData.get(s.key);e.write({type:"delete",value:a});break}case"upsert":{const a=e.collection._state.syncedData.has(s.key),l=e.collection.validateData(s.data,a?"update":"insert",s.key);a?e.write({type:"update",value:l}):e.write({type:"insert",value:l});break}}e.commit();const r=Array.from(e.collection._state.syncedData.values());e.updateCacheData?e.updateCacheData(r):e.queryClient.setQueryData(e.queryKey,r)}function T5(t){function e(){const n=t();if(!n)throw new _5;return n}return{writeInsert(n){const r={type:"insert",data:n},s=e(),a=Ti.get(s);if(a?.isActive){a.operations.push(r);return}_l(r,s)},writeUpdate(n){const r={type:"update",data:n},s=e(),a=Ti.get(s);if(a?.isActive){a.operations.push(r);return}_l(r,s)},writeDelete(n){const r={type:"delete",key:n},s=e(),a=Ti.get(s);if(a?.isActive){a.operations.push(r);return}_l(r,s)},writeUpsert(n){const r={type:"upsert",data:n},s=e(),a=Ti.get(s);if(a?.isActive){a.operations.push(r);return}_l(r,s)},writeBatch(n){const r=e();if(Ti.get(r)?.isActive)throw new Error("Cannot nest writeBatch calls. Complete the current batch before starting a new one.");const a={operations:[],isActive:!0};Ti.set(r,a);try{const l=n();if(l&&typeof l=="object"&&"then"in l&&typeof l.then=="function")throw new Error("writeBatch does not support async callbacks. The callback must be synchronous.");a.operations.length>0&&_l(a.operations,r)}finally{a.isActive=!1,Ti.delete(r)}}}}function O5(t){if(!t)return;const e={};return t.where&&(e.where=cy(t.where)),t.orderBy?.length&&(e.orderBy=t.orderBy.map(n=>{const r={expression:cy(n.expression),direction:n.compareOptions.direction,nulls:n.compareOptions.nulls,stringSort:n.compareOptions.stringSort};return n.compareOptions.stringSort==="locale"?{...r,locale:n.compareOptions.locale,localeOptions:n.compareOptions.localeOptions}:r})),t.limit!==void 0&&(e.limit=t.limit),t.offset!==void 0&&(e.offset=t.offset),Object.keys(e).length===0?void 0:JSON.stringify(e)}function cy(t){if(!t)return null;switch(t.type){case"val":return{type:"val",value:fy(t.value)};case"ref":return{type:"ref",path:[...t.path]};case"func":return{type:"func",name:t.name,args:t.args.map(e=>cy(e))};default:return null}}function fy(t){if(t===void 0)return{__type:"undefined"};if(typeof t=="number"){if(Number.isNaN(t))return{__type:"nan"};if(t===Number.POSITIVE_INFINITY)return{__type:"infinity",sign:1};if(t===Number.NEGATIVE_INFINITY)return{__type:"infinity",sign:-1}}return t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"?t:t instanceof Date?{__type:"date",value:t.toJSON()}:Array.isArray(t)?t.map(e=>fy(e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,fy(n)])):t}class M5{constructor(e,n,r){this.state=e,this.refetchFn=n,this.refetch=n,this.writeInsert=r.writeInsert,this.writeUpdate=r.writeUpdate,this.writeDelete=r.writeDelete,this.writeUpsert=r.writeUpsert,this.writeBatch=r.writeBatch}async clearError(){this.state.lastError=void 0,this.state.errorCount=0,this.state.lastErrorUpdatedAt=0,await this.refetchFn({throwOnError:!0})}get lastError(){return this.state.lastError}get isError(){return!!this.state.lastError}get errorCount(){return this.state.errorCount}get isFetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isFetching)}get isRefetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isRefetching)}get isLoading(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isLoading)}get dataUpdatedAt(){return Math.max(0,...Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().dataUpdatedAt))}get fetchStatus(){return Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().fetchStatus)}}function rk(t){const{queryKey:e,queryFn:n,select:r,queryClient:s,enabled:a,refetchInterval:l,retry:c,retryDelay:f,staleTime:d,getKey:m,onInsert:p,onUpdate:g,onDelete:y,meta:x,...S}=t,E=S.syncMode??"eager";if(!e)throw new b5;if(!n)throw new x5;if(!s)throw new S5;if(!m)throw new w5;const C={lastError:void 0,errorCount:0,lastErrorUpdatedAt:0,observers:new Map},k=new Map,R=new Map,I=new Map,j=new Map,A=new Map,z=(Q,N)=>{const D=I.get(Q)||new Set;D.add(N),I.set(Q,D);const B=R.get(N)||new Set;B.add(Q),R.set(N,B)},L=(Q,N)=>{const D=I.get(Q)||new Set;D.delete(N),I.set(Q,D);const B=R.get(N)||new Set;return B.delete(Q),R.set(N,B),D.size===0},P=Q=>{const{begin:N,write:D,commit:B,markReady:T,collection:se}=Q;let ce=!1;const he=ge=>{if(typeof e=="function")return e(ge);if(E==="on-demand"){const je=O5(ge);return je!==void 0?[...e,je]:e}else return e},ve=(ge={},je=n)=>{const be=he(ge),ye=Ar(be),qe={...x,loadSubsetOptions:ge};if(C.observers.has(ye)){A.set(ye,(A.get(ye)||0)+1);const ke=C.observers.get(ye),xe=ke.getCurrentResult();return xe.isSuccess?!0:xe.isError?Promise.reject(xe.error):new Promise((Ue,vt)=>{const ut=ke.subscribe(ct=>{ct.isSuccess?(ut(),Ue()):ct.isError&&(ut(),vt(ct.error))})})}const ne={queryKey:be,queryFn:je,meta:qe,structuralSharing:!0,notifyOnChangeProps:"all",...a!==void 0&&{enabled:a},...l!==void 0&&{refetchInterval:l},...c!==void 0&&{retry:c},...f!==void 0&&{retryDelay:f},...d!==void 0&&{staleTime:d}},fe=new rE(s,ne);k.set(ye,be),C.observers.set(ye,fe),A.set(ye,(A.get(ye)||0)+1);const Ce=new Promise((ke,xe)=>{const Ue=fe.subscribe(vt=>{vt.isSuccess?(Ue(),ke()):vt.isError&&(Ue(),xe(vt.error))})});return(ce||se.subscriberCount>0)&&me(fe,ye),Ce},Ae=ge=>{const je=Ar(ge);return ye=>{if(ye.isSuccess){C.lastError=void 0,C.errorCount=0;const qe=ye.data,ne=r?r(qe):qe;if(!Array.isArray(ne)||ne.some(ke=>typeof ke!="object")){const ke=r?`@tanstack/query-db-collection: select() must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(ge)}`:`@tanstack/query-db-collection: queryFn must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(ge)}`;console.error(ke);return}const fe=new Map(se._state.syncedData.entries()),Ce=new Map;ne.forEach(ke=>{const xe=m(ke);Ce.set(xe,ke)}),N(),fe.forEach((ke,xe)=>{const Ue=Ce.get(xe);Ue?Tr(ke,Ue)||D({type:"update",value:Ue}):L(xe,je)&&D({type:"delete",value:ke})}),Ce.forEach((ke,xe)=>{z(xe,je),fe.has(xe)||D({type:"insert",value:ke})}),B(),T()}else ye.isError&&(ye.errorUpdatedAt!==C.lastErrorUpdatedAt&&(C.lastError=ye.error,C.errorCount++,C.lastErrorUpdatedAt=ye.errorUpdatedAt),console.error(`[QueryCollection] Error observing query ${String(ge)}:`,ye.error),T())}},_e=ge=>j.has(ge),me=(ge,je)=>{if(!_e(je)){const be=k.get(je),ye=Ae(be),qe=ge.subscribe(ye);j.set(je,qe);const ne=ge.getCurrentResult();(ne.isSuccess||ne.isError)&&ye(ne)}},Ee=()=>{C.observers.forEach(me)},Oe=()=>{j.forEach(ge=>{ge()}),j.clear()};ce=!0;const Ze=se.on("subscribers:change",({subscriberCount:ge})=>{ge>0?Ee():ge===0&&Oe()});if(E==="eager"){const ge=ve({});ge instanceof Promise&&ge.catch(()=>{})}else T();Ee(),C.observers.forEach((ge,je)=>{const be=k.get(je);Ae(be)(ge.getCurrentResult())});const Le=ge=>{j.get(ge)?.(),j.delete(ge);const je=R.get(ge)??new Set,be=[];je.forEach(ye=>{const qe=I.get(ye);qe&&(qe.delete(ge),qe.size===0&&(I.delete(ye),se.has(ye)&&be.push(se.get(ye))))}),be.length>0&&(N(),be.forEach(ye=>{D({type:"delete",value:ye})}),B()),C.observers.delete(ge),R.delete(ge),k.delete(ge),A.delete(ge)},Ye=ge=>{const je=A.get(ge)||0,be=C.observers.get(ge);if(je<=0&&(j.get(ge)?.(),j.delete(ge)),be?.hasListeners()??!1){A.set(ge,0);return}je>0&&console.warn(`[cleanupQueryIfIdle] Invariant violation: refcount=${je} but no listeners. Cleaning up to prevent leak.`,{hashedQueryKey:ge}),Le(ge)},it=ge=>{Le(ge)},Je=s.getQueryCache().subscribe(ge=>{const je=ge.query.queryHash;ge.type==="removed"&&k.has(je)&&Ye(je)});return{loadSubset:E==="eager"?void 0:ve,unloadSubset:E==="eager"?void 0:ge=>{const je=he(ge),be=Ar(je),qe=(A.get(be)||0)-1;qe<=0?(A.set(be,0),Ye(be)):A.set(be,qe)},cleanup:async()=>{Ze(),Oe();const ge=[...k.values()],je=[...C.observers.keys()];for(const be of je)it(be);Je(),await Promise.all(ge.map(async be=>{await s.cancelQueries({queryKey:be,exact:!0}),s.removeQueries({queryKey:be,exact:!0})}))}}},M=async Q=>{const D=[...k.values()].map(B=>C.observers.get(Ar(B)).refetch({throwOnError:Q?.throwOnError}));await Promise.all(D)},$=Q=>{const N=typeof e=="function"?e({}):e;r?s.setQueryData(N,D=>{if(!D||typeof D!="object")return D;if(Array.isArray(D))return Q;const B=r(D);if(Array.isArray(B)){for(const T of Object.keys(D))if(D[T]===B)return{...D,[T]:Q}}if(Array.isArray(D.data))return{...D,data:Q};if(Array.isArray(D.items))return{...D,items:Q};if(Array.isArray(D.results))return{...D,results:Q};for(const T of Object.keys(D))if(Array.isArray(D[T]))return{...D,[T]:Q};return D}):s.setQueryData(N,Q)};let G=null;const ee=Q=>{const{begin:N,write:D,commit:B,collection:T}=Q,se=typeof e=="function"?e({}):e;return G={collection:T,queryClient:s,queryKey:se,getKey:m,begin:N,write:D,commit:B,updateCacheData:$},P(Q)},te=T5(()=>G),V=p?async Q=>{const N=await p(Q)??{};return N.refetch!==!1&&await M(),N}:void 0,F=g?async Q=>{const N=await g(Q)??{};return N.refetch!==!1&&await M(),N}:void 0,J=y?async Q=>{const N=await y(Q)??{};return N.refetch!==!1&&await M(),N}:void 0,ae=new M5(C,M,te);return{...S,getKey:m,syncMode:E,sync:{sync:ee},onInsert:V,onUpdate:F,onDelete:J,utils:ae}}const sk=new iE({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}});async function ik(t){const e=await fetch(`/data/${t}`);if(!e.ok)throw new Error(`Failed to list entries: ${e.statusText}`);const n=await e.json(),r=[];for(const s of n){const a=await fetch(`/data/${t}/${encodeURIComponent(s.id)}`);if(a.ok){const l=await a.json();r.push(l)}}return r}async function pd(t,e){const n=await fetch(`/data/${t}/${encodeURIComponent(e.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error(`Failed to save item: ${n.statusText}`)}async function ak(t,e){const n=await fetch(`/data/${t}/${encodeURIComponent(e)}`,{method:"DELETE"});if(!n.ok&&n.status!==404)throw new Error(`Failed to delete item: ${n.statusText}`)}const cf="connections",Yl=E0(rk({queryKey:["connections"],queryFn:async()=>ik(cf),getKey:t=>t.id,queryClient:sk,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await pd(cf,n)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await pd(cf,n)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await ak(cf,n.id)}))}})),ff="queries";E0(rk({queryKey:["saved-queries"],queryFn:async()=>ik(ff),getKey:t=>t.id,queryClient:sk,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await pd(ff,n)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await pd(ff,n)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await ak(ff,n.id)}))}}));const N5={driver:"postgres",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT datname FROM pg_database WHERE datistemplate = false ORDER BY datname"},listTablesQuery(){return"SELECT tablename FROM pg_tables WHERE schemaname = 'public' ORDER BY tablename"},listColumnsQuery(t){return`
      SELECT 
        column_name as name,
        data_type as type,
        is_nullable = 'YES' as nullable,
        COALESCE(
          (SELECT true FROM information_schema.table_constraints tc
           JOIN information_schema.key_column_usage kcu ON tc.constraint_name = kcu.constraint_name
           WHERE tc.table_name = c.table_name AND kcu.column_name = c.column_name AND tc.constraint_type = 'PRIMARY KEY'),
          false
        ) as primary_key
      FROM information_schema.columns c
      WHERE table_name = '${t}' AND table_schema = 'public'
      ORDER BY ordinal_position
    `},selectAllQuery(t,e=100){return`SELECT * FROM ${t} LIMIT ${e}`},createDatabaseQuery(t){return`CREATE DATABASE "${t}"`},listConstraintsQuery(t){return`
      SELECT 
        tc.constraint_name,
        tc.constraint_type,
        kcu.column_name
      FROM information_schema.table_constraints tc
      LEFT JOIN information_schema.key_column_usage kcu 
        ON tc.constraint_name = kcu.constraint_name 
        AND tc.table_schema = kcu.table_schema
      WHERE tc.table_name = '${t}' 
        AND tc.table_schema = 'public'
      ORDER BY tc.constraint_name, kcu.ordinal_position
    `},listForeignKeysQuery(t){return`
      SELECT 
        tc.constraint_name,
        kcu.column_name,
        ccu.table_name AS foreign_table,
        ccu.column_name AS foreign_column
      FROM information_schema.table_constraints tc
      JOIN information_schema.key_column_usage kcu 
        ON tc.constraint_name = kcu.constraint_name
      JOIN information_schema.constraint_column_usage ccu 
        ON tc.constraint_name = ccu.constraint_name
      WHERE tc.table_name = '${t}' 
        AND tc.constraint_type = 'FOREIGN KEY'
        AND tc.table_schema = 'public'
      ORDER BY tc.constraint_name
    `},listIndexesQuery(t){return`
      SELECT 
        indexname AS index_name,
        indexdef AS definition
      FROM pg_indexes 
      WHERE tablename = '${t}'
        AND schemaname = 'public'
      ORDER BY indexname
    `},modifyDsnForDatabase(t,e){const n=new URL(t);return n.pathname=`/${e}`,n.toString()},parseDatabaseNames(t){return t.map(e=>String(e.datname))},parseTableNames(t){return t.map(e=>String(e.tablename))},parseColumns(t){return t.map(e=>({name:String(e.name),type:String(e.type),nullable:!!e.nullable,primaryKey:!!e.primary_key}))}},I5={driver:"mysql",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SHOW DATABASES"},listTablesQuery(){return"SHOW TABLES"},listColumnsQuery(t){return`DESCRIBE ${t}`},selectAllQuery(t,e=100){return`SELECT * FROM ${t} LIMIT ${e}`},createDatabaseQuery(t){return`CREATE DATABASE \`${t}\``},listConstraintsQuery(t){return`
      SELECT 
        tc.CONSTRAINT_NAME AS constraint_name,
        tc.CONSTRAINT_TYPE AS constraint_type,
        kcu.COLUMN_NAME AS column_name
      FROM information_schema.TABLE_CONSTRAINTS tc
      LEFT JOIN information_schema.KEY_COLUMN_USAGE kcu 
        ON tc.CONSTRAINT_NAME = kcu.CONSTRAINT_NAME 
        AND tc.TABLE_SCHEMA = kcu.TABLE_SCHEMA
        AND tc.TABLE_NAME = kcu.TABLE_NAME
      WHERE tc.TABLE_NAME = '${t}'
        AND tc.TABLE_SCHEMA = DATABASE()
      ORDER BY tc.CONSTRAINT_NAME, kcu.ORDINAL_POSITION
    `},listForeignKeysQuery(t){return`
      SELECT 
        kcu.CONSTRAINT_NAME AS constraint_name,
        kcu.COLUMN_NAME AS column_name,
        kcu.REFERENCED_TABLE_NAME AS foreign_table,
        kcu.REFERENCED_COLUMN_NAME AS foreign_column
      FROM information_schema.KEY_COLUMN_USAGE kcu
      WHERE kcu.TABLE_NAME = '${t}'
        AND kcu.TABLE_SCHEMA = DATABASE()
        AND kcu.REFERENCED_TABLE_NAME IS NOT NULL
      ORDER BY kcu.CONSTRAINT_NAME
    `},listIndexesQuery(t){return`SHOW INDEX FROM ${t}`},modifyDsnForDatabase(t,e){const n=t.split("/");return n.length>1?(n[n.length-1]=e,n.join("/")):`${t}/${e}`},parseDatabaseNames(t){return t.map(e=>String(e.Database||Object.values(e)[0]))},parseTableNames(t,e){return t.map(n=>{const r=n[`Tables_in_${e}`]||Object.values(n)[0];return String(r)})},parseColumns(t){return t.map(e=>({name:String(e.Field),type:String(e.Type),nullable:e.Null==="YES",primaryKey:e.Key==="PRI"}))}},D5={driver:"sqlite",supportedTableViews(){return["records","columns","indexes"]},listDatabasesQuery(){return"SELECT 'main' as name"},listTablesQuery(){return"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%' ORDER BY name"},listColumnsQuery(t){return`PRAGMA table_info(${t})`},selectAllQuery(t,e=100){return`SELECT * FROM ${t} LIMIT ${e}`},createDatabaseQuery(){return null},listIndexesQuery(t){return`PRAGMA index_list(${t})`},modifyDsnForDatabase(t){return t},parseDatabaseNames(t){return t.map(e=>String(e.name))},parseTableNames(t){return t.map(e=>String(e.name))},parseColumns(t){return t.map(e=>({name:String(e.name),type:String(e.type||"TEXT"),nullable:e.notnull===0,primaryKey:e.pk===1}))}},z5={driver:"sqlserver",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT name FROM sys.databases WHERE name NOT IN ('tempdb', 'model') ORDER BY name"},listTablesQuery(){return"SELECT TABLE_NAME as name FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' ORDER BY TABLE_NAME"},listColumnsQuery(t){return`
      SELECT 
        c.COLUMN_NAME as name,
        c.DATA_TYPE as type,
        CASE WHEN c.IS_NULLABLE = 'YES' THEN 1 ELSE 0 END as nullable,
        CASE WHEN pk.COLUMN_NAME IS NOT NULL THEN 1 ELSE 0 END as primary_key
      FROM INFORMATION_SCHEMA.COLUMNS c
      LEFT JOIN (
        SELECT ku.COLUMN_NAME
        FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc
        JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE ku ON tc.CONSTRAINT_NAME = ku.CONSTRAINT_NAME
        WHERE tc.TABLE_NAME = '${t}' AND tc.CONSTRAINT_TYPE = 'PRIMARY KEY'
      ) pk ON c.COLUMN_NAME = pk.COLUMN_NAME
      WHERE c.TABLE_NAME = '${t}'
      ORDER BY c.ORDINAL_POSITION
    `},selectAllQuery(t,e=100){return`SELECT TOP ${e} * FROM ${t}`},createDatabaseQuery(t){return`CREATE DATABASE [${t}]`},listConstraintsQuery(t){return`
      SELECT 
        tc.CONSTRAINT_NAME AS constraint_name,
        tc.CONSTRAINT_TYPE AS constraint_type,
        kcu.COLUMN_NAME AS column_name
      FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc
      LEFT JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE kcu 
        ON tc.CONSTRAINT_NAME = kcu.CONSTRAINT_NAME
      WHERE tc.TABLE_NAME = '${t}'
      ORDER BY tc.CONSTRAINT_NAME, kcu.ORDINAL_POSITION
    `},listForeignKeysQuery(t){return`
      SELECT 
        fk.name AS constraint_name,
        COL_NAME(fkc.parent_object_id, fkc.parent_column_id) AS column_name,
        OBJECT_NAME(fkc.referenced_object_id) AS foreign_table,
        COL_NAME(fkc.referenced_object_id, fkc.referenced_column_id) AS foreign_column
      FROM sys.foreign_keys fk
      JOIN sys.foreign_key_columns fkc ON fk.object_id = fkc.constraint_object_id
      WHERE OBJECT_NAME(fk.parent_object_id) = '${t}'
      ORDER BY fk.name
    `},listIndexesQuery(t){return`
      SELECT 
        i.name AS index_name,
        i.type_desc AS index_type,
        i.is_unique,
        i.is_primary_key,
        STRING_AGG(c.name, ', ') AS columns
      FROM sys.indexes i
      JOIN sys.index_columns ic ON i.object_id = ic.object_id AND i.index_id = ic.index_id
      JOIN sys.columns c ON ic.object_id = c.object_id AND ic.column_id = c.column_id
      WHERE OBJECT_NAME(i.object_id) = '${t}' AND i.name IS NOT NULL
      GROUP BY i.name, i.type_desc, i.is_unique, i.is_primary_key
      ORDER BY i.name
    `},modifyDsnForDatabase(t,e){const n=new URL(t);return n.searchParams.set("database",e),n.toString()},parseDatabaseNames(t){return t.map(e=>String(e.name))},parseTableNames(t){return t.map(e=>String(e.name))},parseColumns(t){return t.map(e=>({name:String(e.name),type:String(e.type),nullable:!!e.nullable,primaryKey:!!e.primary_key}))}},j5={driver:"oracle",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT SYS_CONTEXT('USERENV', 'CON_NAME') as name FROM DUAL"},listTablesQuery(){return`
      SELECT table_name as name 
      FROM user_tables 
      WHERE table_name NOT LIKE 'LOGMNR%' 
        AND table_name NOT LIKE 'AQ$%'
        AND table_name NOT LIKE 'MVIEW$%'
        AND table_name NOT LIKE 'LOGSTDBY$%'
        AND table_name NOT LIKE 'ROLLING$%'
        AND table_name NOT LIKE 'SCHEDULER_%'
        AND table_name NOT IN ('OL$', 'OL$HINTS', 'OL$NODES', 'REDO_DB', 'REDO_LOG', 'HELP', 
                                'REPL_SUPPORT_MATRIX', 'REPL_VALID_COMPAT', 'SQLPLUS_PRODUCT_PROFILE')
      ORDER BY table_name
    `},listColumnsQuery(t){return`
      SELECT 
        c.column_name as name,
        c.data_type as type,
        CASE WHEN c.nullable = 'Y' THEN 1 ELSE 0 END as nullable,
        CASE WHEN cc.column_name IS NOT NULL THEN 1 ELSE 0 END as primary_key
      FROM user_tab_columns c
      LEFT JOIN (
        SELECT cc.column_name
        FROM user_constraints con
        JOIN user_cons_columns cc ON con.constraint_name = cc.constraint_name
        WHERE con.table_name = UPPER('${t}') AND con.constraint_type = 'P'
      ) cc ON c.column_name = cc.column_name
      WHERE c.table_name = UPPER('${t}')
      ORDER BY c.column_id
    `},selectAllQuery(t,e=100){return`SELECT * FROM ${t} FETCH FIRST ${e} ROWS ONLY`},createDatabaseQuery(){return null},listConstraintsQuery(t){return`
      SELECT 
        con.constraint_name,
        con.constraint_type,
        col.column_name
      FROM user_constraints con
      LEFT JOIN user_cons_columns col 
        ON con.constraint_name = col.constraint_name
      WHERE con.table_name = UPPER('${t}')
      ORDER BY con.constraint_name, col.position
    `},listForeignKeysQuery(t){return`
      SELECT 
        a.constraint_name,
        a.column_name,
        c_pk.table_name AS foreign_table,
        b.column_name AS foreign_column
      FROM user_cons_columns a
      JOIN user_constraints c ON a.constraint_name = c.constraint_name
      JOIN user_constraints c_pk ON c.r_constraint_name = c_pk.constraint_name
      JOIN user_cons_columns b ON c_pk.constraint_name = b.constraint_name AND a.position = b.position
      WHERE c.constraint_type = 'R'
        AND c.table_name = UPPER('${t}')
      ORDER BY a.constraint_name
    `},listIndexesQuery(t){return`
      SELECT 
        index_name,
        uniqueness,
        index_type
      FROM user_indexes
      WHERE table_name = UPPER('${t}')
      ORDER BY index_name
    `},modifyDsnForDatabase(t){return t},parseDatabaseNames(t){return t.map(e=>{const n=e.name??e.NAME;return String(n??Object.values(e)[0])})},parseTableNames(t){return t.map(e=>{const n=e.name??e.NAME??e.TABLE_NAME;return String(n??Object.values(e)[0])})},parseColumns(t){return t.map(e=>({name:String(e.name??e.NAME),type:String(e.type??e.TYPE??e.DATA_TYPE),nullable:!!(e.nullable??e.NULLABLE),primaryKey:!!(e.primary_key??e.PRIMARY_KEY)}))}},L5={driver:"redis",supportedTableViews(){return["records"]},listDatabasesQuery(){return"KEYS *"},listTablesQuery(){return"KEYS *"},listColumnsQuery(){return"KEYS *"},selectAllQuery(t){return t==="*"||!t?"KEYS *":`GET ${t}`},createDatabaseQuery(){return null},modifyDsnForDatabase(t,e){const n=new URL(t);return n.pathname=`/${e}`,n.toString()},parseDatabaseNames(){return Array.from({length:16},(t,e)=>String(e))},parseTableNames(t){return t.map(e=>String(e.key||"")).filter(Boolean)},parseColumns(){return[{name:"key",type:"string",nullable:!1,primaryKey:!0},{name:"value",type:"string",nullable:!0,primaryKey:!1}]}};function xo(t){return{provider:t.provider,config:t.config}}async function P5(t){const e=await fetch("/storage/containers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xo(t))});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to list containers")}return e.json()}async function F5(t,e){const n=await fetch("/storage/containers/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...xo(t),name:e})});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to create container")}}async function qd(t,e,n={}){const r=await fetch("/storage/objects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...xo(t),container:e,prefix:n.prefix||"",delimiter:n.delimiter??"/",maxKeys:n.maxKeys||1e3,continuationToken:n.continuationToken})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to list objects")}return r.json()}async function $5(t,e,n){const r=await fetch("/storage/object/details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...xo(t),container:e,key:n})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to get object details")}return r.json()}async function B5(t,e,n,r=3600){const s=await fetch("/storage/object/presign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...xo(t),container:e,key:n,expiresIn:r})});if(!s.ok){const l=await s.json();throw new Error(l.message||"Failed to generate presigned URL")}return(await s.json()).url}async function U5(t,e,n,r){const s=new FormData;s.append("file",r),s.append("provider",t.provider),s.append("config",JSON.stringify(t.config)),s.append("container",e),s.append("key",n);const a=await fetch("/storage/upload",{method:"POST",body:s});if(!a.ok){const l=await a.json();throw new Error(l.message||"Failed to upload file")}}async function ok(t,e,n){const r=await fetch("/storage/object/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...xo(t),container:e,keys:n})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to delete objects")}}async function lk(t,e,n){const r=await qd(t,e,{prefix:n,delimiter:"",maxKeys:1e3});if(r.objects.length===0)return;const s=r.objects.map(a=>a.key);await ok(t,e,s),r.isTruncated&&await lk(t,e,n)}function q5(t){const e=t.split("/").filter(Boolean);return e.length<=1?"":e.slice(0,-1).join("/")}function yu(t){const e=t.split("/").filter(Boolean);return e[e.length-1]||t}function uk(t){if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB","TB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(2))} ${n[r]}`}function H5(t){const e=yu(t),n=e.lastIndexOf(".");return n>0?e.slice(n+1).toLowerCase():""}function ck(t){if(t.endsWith("/"))return"folder";const e=H5(t),n=["jpg","jpeg","png","gif","webp","svg","ico","bmp"],r=["pdf","doc","docx","xls","xlsx","ppt","pptx","txt","csv"],s=["js","ts","jsx","tsx","html","css","json","xml","yaml","yml","md","py","go","rs","java"],a=["zip","tar","gz","rar","7z","bz2"];return n.includes(e)?"image":r.includes(e)?"document":s.includes(e)?"code":a.includes(e)?"archive":"file"}function V5(t){return t?{"application/json":"JSON","application/xml":"XML","application/pdf":"PDF","application/zip":"ZIP Archive","application/gzip":"GZIP Archive","text/plain":"Plain Text","text/html":"HTML","text/css":"CSS","text/javascript":"JavaScript","image/jpeg":"JPEG Image","image/png":"PNG Image","image/gif":"GIF Image","image/webp":"WebP Image","image/svg+xml":"SVG Image"}[t]||t:"Unknown"}const K5={postgres:N5,mysql:I5,sqlite:D5,sqlserver:z5,oracle:j5,redis:L5};function oi(t){const e=K5[t];if(!e)throw new Error(`Unsupported driver: ${t}`);return e}function M0(t,e){if(t==="redis"){const n=new URL(e);return{host:n.hostname||"localhost",port:n.port?parseInt(n.port,10):6379,password:n.password||void 0,db:n.pathname&&parseInt(n.pathname.slice(1),10)||0}}return{dsn:e}}async function Tu(t,e,n){const r=await fetch("/db/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:t,config:M0(t,e),query:n,params:[]})});if(!r.ok){const s=await r.json().catch(()=>({}));throw new Error(s.message||`HTTP error: ${r.status}`)}return r.json()}async function Jl(t,e,n){const r=await fetch("/db/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:t,config:M0(t,e),query:n,params:[]})});if(!r.ok){const s=await r.json().catch(()=>({}));throw new Error(s.message||`HTTP error: ${r.status}`)}return r.json()}function G5(t){const e=t.trim().toUpperCase(),n=["SELECT","WITH","SHOW","DESCRIBE","EXPLAIN","PRAGMA"];for(const r of n)if(e.startsWith(r))return!0;return e.includes("RETURNING")}async function Q5(t,e,n){return G5(n)?Tu(t,e,n):Jl(t,e,n)}async function Z5(t,e){const n=oi(t),r=n.listDatabasesQuery(),s=await Tu(t,e,r);return n.parseDatabaseNames(s.rows||[])}async function fk(t,e,n){const r=oi(t),s=n?r.modifyDsnForDatabase(e,n):e,a=r.listTablesQuery(),l=await Tu(t,s,a);return r.parseTableNames(l.rows||[],n)}async function Y5(t,e,n){const r=oi(t),s=r.listColumnsQuery(n),a=await Tu(t,e,s);return r.parseColumns(a.rows||[])}function dy(t,e,n=100){return oi(e).selectAllQuery(t,n)}async function J5(t,e,n){const s=oi(t).createDatabaseQuery(n);if(!s)throw new Error(`Creating databases is not supported for ${t}`);await Jl(t,e,s)}function X5(t){return oi(t).createDatabaseQuery("test")!==null}function W5(t){return oi(t).supportedTableViews()}function eL(t,e,n){const r=oi(t);switch(n){case"records":return r.selectAllQuery(e);case"columns":return r.listColumnsQuery(e);case"constraints":return r.listConstraintsQuery?.(e)??null;case"foreignKeys":return r.listForeignKeysQuery?.(e)??null;case"indexes":return r.listIndexesQuery?.(e)??null;default:return null}}const Z_={postgres:{label:"PostgreSQL",placeholder:"postgres://user:password@localhost:5432/database"},mysql:{label:"MySQL",placeholder:"user:password@tcp(localhost:3306)/database"},sqlite:{label:"SQLite",placeholder:"/path/to/database.db"},sqlserver:{label:"SQL Server",placeholder:"sqlserver://user:password@localhost:1433?database=mydb"},oracle:{label:"Oracle",placeholder:"oracle://user:password@localhost:1521/service_name"},redis:{label:"Redis",placeholder:"redis://localhost:6379/0"}},tL={postgres:{active:"bg-blue-500/10 border-blue-500/50 text-blue-600 dark:text-blue-400",label:"PG"},mysql:{active:"bg-yellow-500/10 border-yellow-500/50 text-yellow-600 dark:text-yellow-400",label:"MySQL"},sqlite:{active:"bg-purple-500/10 border-purple-500/50 text-purple-600 dark:text-purple-400",label:"SQLite"},sqlserver:{active:"bg-red-500/10 border-red-500/50 text-red-600 dark:text-red-400",label:"MSSQL"},oracle:{active:"bg-orange-500/10 border-orange-500/50 text-orange-600 dark:text-orange-400",label:"Oracle"},redis:{active:"bg-red-500/10 border-red-500/50 text-red-600 dark:text-red-400",label:"Redis"}},Y_={s3:{label:"Amazon S3",color:"bg-orange-500/10 border-orange-500/50 text-orange-600 dark:text-orange-400"},"azure-blob":{label:"Azure Blob",color:"bg-blue-500/10 border-blue-500/50 text-blue-600 dark:text-blue-400"}};function nL({connection:t,onSave:e,onClose:n}){const r=t?.type==="storage"?"storage":"database",[s,a]=q.useState(r),[l,c]=q.useState(t?.name??""),[f,d]=q.useState(t?.type==="database"?t.driver:"postgres"),[m,p]=q.useState(t?.type==="database"?t.dsn:""),[g,y]=q.useState(t?.type==="storage"?t.provider:"s3"),[x,S]=q.useState(t?.type==="storage"&&t.provider==="s3"?t.config.region:"us-east-1"),[E,C]=q.useState(t?.type==="storage"&&t.provider==="s3"?t.config.accessKeyId:""),[k,R]=q.useState(t?.type==="storage"&&t.provider==="s3"?t.config.secretAccessKey:""),[I,j]=q.useState(t?.type==="storage"&&t.provider==="s3"?t.config.endpoint??"":""),[A,z]=q.useState(t?.type==="storage"&&t.provider==="azure-blob"?t.config.accountName:""),[L,P]=q.useState(t?.type==="storage"&&t.provider==="azure-blob"?t.config.accountKey??"":""),[M,$]=q.useState(t?.type==="storage"&&t.provider==="azure-blob"?t.config.connectionString??"":""),[G,ee]=q.useState("idle"),[te,V]=q.useState(null),F=!!t,J=async()=>{ee("testing"),V(null);try{if(s==="database"){if(!m)return;const B=f==="redis"?"KEYS *":"SELECT 1",T=await fetch("/db/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:f,config:M0(f,m),query:B,params:[]})}),se=await T.json();se.error?(ee("error"),V(se.error)):T.ok?ee("success"):(ee("error"),V(se.message||"Connection failed"))}else{const B=ae(),T=await fetch("/storage/containers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:g,config:B})});if(T.ok)ee("success");else{const se=await T.json();ee("error"),V(se.message||"Connection failed")}}}catch(B){ee("error"),V(B instanceof Error?B.message:"Connection failed")}},ae=()=>g==="s3"?{region:x,accessKeyId:E,secretAccessKey:k,...I&&{endpoint:I}}:{accountName:A,...L&&{accountKey:L},...M&&{connectionString:M}},Q=B=>{if(B.preventDefault(),!!l)if(s==="database"){if(!m)return;e({type:"database",name:l,driver:f,dsn:m})}else{const T=ae();e({type:"storage",name:l,provider:g,config:T})}},N=()=>l?s==="database"?!!m:g==="s3"?!!x&&!!E&&!!k:!!A&&(!!L||!!M):!1,D=Z_[f];return w.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[w.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:n}),w.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-[#1a1a1a] rounded-2xl shadow-2xl border border-neutral-200 dark:border-white/10 overflow-hidden",children:[w.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-neutral-200 dark:border-white/10",children:[w.jsx("h2",{className:"text-base font-semibold text-neutral-800 dark:text-neutral-100",children:F?"Edit Connection":"New Connection"}),w.jsx("button",{onClick:n,className:"p-1.5 -mr-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:w.jsx(Eu,{className:"w-4 h-4 text-neutral-500"})})]}),w.jsxs("form",{onSubmit:Q,className:"p-5 space-y-4",children:[!F&&w.jsxs("div",{className:"flex gap-2 p-1 bg-neutral-100 dark:bg-white/5 rounded-xl",children:[w.jsxs("button",{type:"button",onClick:()=>{a("database"),ee("idle"),V(null)},className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${s==="database"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:[w.jsx(fu,{className:"w-4 h-4"}),"Database"]}),w.jsxs("button",{type:"button",onClick:()=>{a("storage"),ee("idle"),V(null)},className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${s==="storage"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:[w.jsx(iD,{className:"w-4 h-4"}),"Storage"]})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Connection Name"}),w.jsx("input",{type:"text",placeholder:s==="database"?"My Database":"My Storage",value:l,onChange:B=>c(B.target.value),className:"w-full px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-colors",autoFocus:!0})]}),s==="database"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Database Type"}),w.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:Object.keys(Z_).map(B=>{const T=tL[B];return w.jsx("button",{type:"button",onClick:()=>{d(B),ee("idle"),V(null)},className:`px-2 py-2 text-[10px] font-semibold rounded-lg border transition-all ${f===B?T.active:"bg-neutral-50 dark:bg-white/5 border-neutral-200 dark:border-white/10 text-neutral-500 hover:bg-neutral-100 dark:hover:bg-white/10"}`,children:T.label},B)})})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Connection String"}),w.jsx("input",{type:"text",placeholder:D.placeholder,value:m,onChange:B=>{p(B.target.value),ee("idle"),V(null)},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-colors"}),w.jsxs("p",{className:"text-[10px] text-neutral-400 dark:text-neutral-600",children:[D.label," connection string format"]})]})]}),s==="storage"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Storage Provider"}),w.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:Object.keys(Y_).map(B=>{const T=Y_[B];return w.jsx("button",{type:"button",onClick:()=>{y(B),ee("idle"),V(null)},className:`px-3 py-2 text-xs font-semibold rounded-lg border transition-all ${g===B?T.color:"bg-neutral-50 dark:bg-white/5 border-neutral-200 dark:border-white/10 text-neutral-500 hover:bg-neutral-100 dark:hover:bg-white/10"}`,children:T.label},B)})})]}),g==="s3"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Region"}),w.jsx("input",{type:"text",placeholder:"us-east-1",value:x,onChange:B=>{S(B.target.value),ee("idle")},className:"w-full px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Access Key ID"}),w.jsx("input",{type:"text",placeholder:"AKIAIOSFODNN7EXAMPLE",value:E,onChange:B=>{C(B.target.value),ee("idle")},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Secret Access Key"}),w.jsx("input",{type:"password",placeholder:"",value:k,onChange:B=>{R(B.target.value),ee("idle")},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsxs("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:["Custom Endpoint ",w.jsx("span",{className:"text-neutral-400",children:"(optional)"})]}),w.jsx("input",{type:"text",placeholder:"https://s3.example.com",value:I,onChange:B=>{j(B.target.value),ee("idle")},className:"w-full px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"}),w.jsx("p",{className:"text-[10px] text-neutral-400 dark:text-neutral-600",children:"For S3-compatible services like MinIO, Wasabi, etc."})]})]}),g==="azure-blob"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Storage Account Name"}),w.jsx("input",{type:"text",placeholder:"mystorageaccount",value:A,onChange:B=>{z(B.target.value),ee("idle")},className:"w-full px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsxs("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:["Account Key ",w.jsx("span",{className:"text-neutral-400",children:"(or use connection string)"})]}),w.jsx("input",{type:"password",placeholder:"",value:L,onChange:B=>{P(B.target.value),ee("idle")},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsxs("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:["Connection String ",w.jsx("span",{className:"text-neutral-400",children:"(alternative)"})]}),w.jsx("input",{type:"password",placeholder:"DefaultEndpointsProtocol=https;AccountName=...",value:M,onChange:B=>{$(B.target.value),ee("idle")},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]})]})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsxs("button",{type:"button",onClick:J,disabled:!N()||G==="testing",className:"flex items-center gap-2 px-3 py-2 text-xs font-medium text-neutral-700 dark:text-neutral-200 bg-neutral-100 dark:bg-white/5 hover:bg-neutral-200 dark:hover:bg-white/10 disabled:opacity-50 rounded-lg transition-colors",children:[G==="testing"?w.jsx(Ki,{className:"w-3.5 h-3.5 animate-spin text-neutral-500 dark:text-neutral-400"}):G==="success"?w.jsx(tD,{className:"w-3.5 h-3.5 text-blue-500"}):G==="error"?w.jsx(rD,{className:"w-3.5 h-3.5 text-red-500"}):w.jsx(TD,{className:"w-3.5 h-3.5 text-neutral-500 dark:text-neutral-400"}),G==="testing"?"Testing...":"Test Connection"]}),G==="success"&&w.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:" Connection successful"}),G==="error"&&te&&w.jsx("p",{className:"text-xs text-red-500 dark:text-red-400 break-all",children:te})]}),w.jsxs("div",{className:"flex gap-2 pt-2",children:[w.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2.5 text-sm font-medium text-neutral-600 dark:text-neutral-400 bg-neutral-100 dark:bg-white/5 hover:bg-neutral-200 dark:hover:bg-white/10 rounded-xl transition-colors",children:"Cancel"}),w.jsx("button",{type:"submit",disabled:!N(),className:"flex-1 px-4 py-2.5 text-sm font-medium bg-blue-500 text-white rounded-xl hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:F?"Save Changes":"Add Connection"})]})]})]})]})}function rL(t){const e=tn.c(69),{connection:n,onClose:r}=t,s=po(),[a,l]=q.useState(""),c=n.provider==="s3"?"Bucket":"Container";let f;e[0]!==n?(f=B=>F5(n,B),e[0]=n,e[1]=f):f=e[1];let d;e[2]!==n.id||e[3]!==r||e[4]!==s?(d=()=>{s.invalidateQueries({queryKey:["storage-containers",n.id]}),r()},e[2]=n.id,e[3]=r,e[4]=s,e[5]=d):d=e[5];let m;e[6]!==f||e[7]!==d?(m={mutationFn:f,onSuccess:d},e[6]=f,e[7]=d,e[8]=m):m=e[8];const p=uu(m);let g;e[9]!==p||e[10]!==a?(g=B=>{B.preventDefault(),a.trim()&&p.mutate(a.trim())},e[9]=p,e[10]=a,e[11]=g):g=e[11];const y=g;let x;e[12]!==r?(x=w.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:r}),e[12]=r,e[13]=x):x=e[13];let S;e[14]===Symbol.for("react.memo_cache_sentinel")?(S=w.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:w.jsx(OE,{className:"w-4 h-4 text-blue-500"})}),e[14]=S):S=e[14];let E;e[15]!==c?(E=w.jsxs("div",{className:"flex items-center gap-3",children:[S,w.jsxs("h2",{className:"text-base font-semibold text-neutral-900 dark:text-neutral-100",children:["Create ",c]})]}),e[15]=c,e[16]=E):E=e[16];let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C=w.jsx(Eu,{className:"w-4 h-4 text-neutral-500"}),e[17]=C):C=e[17];let k;e[18]!==r?(k=w.jsx("button",{onClick:r,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:C}),e[18]=r,e[19]=k):k=e[19];let R;e[20]!==E||e[21]!==k?(R=w.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-neutral-200 dark:border-neutral-800",children:[E,k]}),e[20]=E,e[21]=k,e[22]=R):R=e[22];let I;e[23]!==n.name?(I=w.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Creating in ",w.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:n.name})]}),e[23]=n.name,e[24]=I):I=e[24];let j;e[25]!==c?(j=w.jsxs("label",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:[c," Name"]}),e[25]=c,e[26]=j):j=e[26];let A;e[27]===Symbol.for("react.memo_cache_sentinel")?(A=B=>l(B.target.value),e[27]=A):A=e[27];let z;e[28]!==c?(z=c.toLowerCase(),e[28]=c,e[29]=z):z=e[29];const L=`my-${z}`;let P;e[30]!==p.isPending||e[31]!==a||e[32]!==L?(P=w.jsx("input",{type:"text",value:a,onChange:A,placeholder:L,className:"w-full px-3 py-2 text-sm border border-neutral-200 dark:border-neutral-700 rounded-lg bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500",autoFocus:!0,disabled:p.isPending}),e[30]=p.isPending,e[31]=a,e[32]=L,e[33]=P):P=e[33];const M=n.provider==="s3"?"Bucket names must be globally unique and follow S3 naming rules":"Container names must be lowercase and can contain letters, numbers, and hyphens";let $;e[34]!==M?($=w.jsx("p",{className:"text-[11px] text-neutral-400 dark:text-neutral-500",children:M}),e[34]=M,e[35]=$):$=e[35];let G;e[36]!==j||e[37]!==P||e[38]!==$?(G=w.jsxs("div",{className:"space-y-1.5",children:[j,P,$]}),e[36]=j,e[37]=P,e[38]=$,e[39]=G):G=e[39];let ee;e[40]!==p.error?(ee=p.error&&w.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:w.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:p.error instanceof Error?p.error.message:"Failed to create container"})}),e[40]=p.error,e[41]=ee):ee=e[41];let te;e[42]!==p.isPending||e[43]!==r?(te=w.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-lg transition-colors",disabled:p.isPending,children:"Cancel"}),e[42]=p.isPending,e[43]=r,e[44]=te):te=e[44];let V;e[45]!==p.isPending||e[46]!==a?(V=!a.trim()||p.isPending,e[45]=p.isPending,e[46]=a,e[47]=V):V=e[47];let F;e[48]!==p.isPending?(F=p.isPending&&w.jsx(Ki,{className:"w-3.5 h-3.5 animate-spin"}),e[48]=p.isPending,e[49]=F):F=e[49];let J;e[50]!==c||e[51]!==V||e[52]!==F?(J=w.jsxs("button",{type:"submit",disabled:V,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors flex items-center gap-2",children:[F,"Create ",c]}),e[50]=c,e[51]=V,e[52]=F,e[53]=J):J=e[53];let ae;e[54]!==te||e[55]!==J?(ae=w.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[te,J]}),e[54]=te,e[55]=J,e[56]=ae):ae=e[56];let Q;e[57]!==y||e[58]!==I||e[59]!==G||e[60]!==ee||e[61]!==ae?(Q=w.jsxs("form",{onSubmit:y,className:"p-5 space-y-4",children:[I,G,ee,ae]}),e[57]=y,e[58]=I,e[59]=G,e[60]=ee,e[61]=ae,e[62]=Q):Q=e[62];let N;e[63]!==R||e[64]!==Q?(N=w.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-neutral-900 rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[R,Q]}),e[63]=R,e[64]=Q,e[65]=N):N=e[65];let D;return e[66]!==N||e[67]!==x?(D=w.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[x,N]}),e[66]=N,e[67]=x,e[68]=D):D=e[68],D}function sL({connection:t,expanded:e,onToggle:n,onSelectDatabase:r,onSelectTable:s}){const a=Ji({strict:!1}),l=a.connectionId===t.id,c=l?a.database??null:null,f=l?a.table??null:null,d=po(),[m,p]=q.useState({open:!1}),[g,y]=q.useState(""),[x,S]=q.useState(null),[E,C]=q.useState(!1),{data:k}=ys({queryKey:["databases",t.id],queryFn:()=>Z5(t.driver,t.dsn),enabled:!!t}),{data:R}=ys({queryKey:["tables",t.id,c],queryFn:()=>c?fk(t.driver,t.dsn,c):[],enabled:!!t&&!!c}),I=async()=>{if(g.trim()){C(!0),S(null);try{await J5(t.driver,t.dsn,g.trim()),await d.invalidateQueries({queryKey:["databases",t.id]}),p({open:!1}),y("")}catch(j){S(j instanceof Error?j.message:"Failed to create database")}finally{C(!1)}}};return w.jsxs(w.Fragment,{children:[m.open&&w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:w.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] rounded-xl border border-neutral-200 dark:border-white/10 p-4 w-80 shadow-xl",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx(fu,{className:"w-5 h-5 text-blue-500"}),w.jsx("h2",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"Create Database"})]}),w.jsx("input",{type:"text",value:g,onChange:j=>y(j.target.value),placeholder:"Database name",className:"w-full px-3 py-2 text-sm rounded-lg border border-neutral-200 dark:border-white/10 bg-neutral-50 dark:bg-white/5 text-neutral-700 dark:text-neutral-200 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50",autoFocus:!0,onKeyDown:j=>{j.key==="Enter"&&g.trim()?I():j.key==="Escape"&&(p({open:!1}),y(""),S(null))}}),x&&w.jsx("p",{className:"mt-2 text-xs text-red-500",children:x}),w.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4",children:[w.jsx("button",{onClick:()=>{p({open:!1}),y(""),S(null)},className:"px-3 py-1.5 text-xs rounded-lg text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:"Cancel"}),w.jsx("button",{onClick:I,disabled:E||!g.trim(),className:"px-3 py-1.5 text-xs rounded-lg bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:E?"Creating...":"Create"})]})]})}),w.jsxs("div",{className:"space-y-0.5",children:[k?.map(j=>{const A=c===j,z=e.has(`${t.id}:${j}`);return w.jsxs("div",{children:[w.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>{n(`${t.id}:${j}`),r(j)},children:[w.jsx(fu,{className:`w-3.5 h-3.5 shrink-0 ${A?"text-blue-500":"text-neutral-400 dark:text-neutral-500"}`}),w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",children:j})]}),z&&A&&R&&w.jsxs("div",{className:"ml-4 space-y-0.5",children:[R.map(L=>w.jsxs("div",{className:`group flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-colors ${f===L?"bg-blue-500/10 dark:bg-blue-500/20":"hover:bg-neutral-100 dark:hover:bg-white/5"}`,onClick:()=>s(j,L),children:[w.jsx(BD,{className:`w-3.5 h-3.5 shrink-0 ${f===L?"text-blue-500":"text-neutral-400 dark:text-neutral-500"}`}),w.jsx("span",{className:`text-xs truncate flex-1 ${f===L?"text-blue-600 dark:text-blue-400":"text-neutral-500 dark:text-neutral-400"}`,children:L})]},L)),R.length===0&&w.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"No tables"})]})]},j)}),(!k||k.length===0)&&w.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"No databases"}),X5(t.driver)&&w.jsxs("button",{onClick:j=>{j.stopPropagation(),p({open:!0})},className:"flex items-center gap-2 px-3 py-1.5 w-full rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors text-left",children:[w.jsx(Fd,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500"}),w.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"New database"})]})]})]})}function iL(t){const e=tn.c(44),{connection:n,expanded:r,onToggle:s,onSelectContainer:a,onSelectPath:l,onCreateContainer:c}=t;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={strict:!1},e[0]=f):f=e[0];const d=Ji(f),m=d.connectionId===n.id,p=d.container??null,g=d._splat||"";let y;e[1]!==n.id?(y=["storage-containers",n.id],e[1]=n.id,e[2]=y):y=e[2];let x;e[3]!==n?(x=()=>P5(n),e[3]=n,e[4]=x):x=e[4];const S=!!n;let E;e[5]!==y||e[6]!==x||e[7]!==S?(E={queryKey:y,queryFn:x,enabled:S},e[5]=y,e[6]=x,e[7]=S,e[8]=E):E=e[8];const{data:C,isLoading:k}=ys(E);let R;e[9]!==p||e[10]!==n.id||e[11]!==r?(R=p?r.has(`container:${n.id}:${p}`):!1,e[9]=p,e[10]=n.id,e[11]=r,e[12]=R):R=e[12];const I=R;let j;e[13]!==p||e[14]!==n.id?(j=["storage-objects",n.id,p,""],e[13]=p,e[14]=n.id,e[15]=j):j=e[15];let A;e[16]!==p||e[17]!==n?(A=()=>qd(n,p,{prefix:"",delimiter:"/"}),e[16]=p,e[17]=n,e[18]=A):A=e[18];const z=!!n&&!!p&&I;let L;e[19]!==j||e[20]!==A||e[21]!==z?(L={queryKey:j,queryFn:A,enabled:z},e[19]=j,e[20]=A,e[21]=z,e[22]=L):L=e[22];const{data:P}=ys(L);let M;e[23]!==p||e[24]!==g||e[25]!==n||e[26]!==C||e[27]!==k||e[28]!==r||e[29]!==m||e[30]!==a||e[31]!==l||e[32]!==s||e[33]!==P?(M=k?w.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"Loading containers..."}):C&&C.length>0?C.map(F=>{const J=m&&p===F.name,ae=r.has(`container:${n.id}:${F.name}`);return w.jsxs("div",{children:[w.jsxs("div",{className:`group flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-colors ${J?"bg-blue-500/10 dark:bg-blue-500/20":"hover:bg-neutral-100 dark:hover:bg-white/5"}`,onClick:()=>{s(`container:${n.id}:${F.name}`),a(F.name)},children:[ae?w.jsx(Bi,{className:"w-3 h-3 text-neutral-400 shrink-0"}):w.jsx(f0,{className:"w-3 h-3 text-neutral-400 shrink-0"}),w.jsx(OE,{className:`w-3.5 h-3.5 shrink-0 ${J?"text-blue-500":"text-neutral-400"}`}),w.jsx("span",{className:`text-xs truncate flex-1 ${J?"text-blue-600 dark:text-blue-400":"text-neutral-500 dark:text-neutral-400"}`,children:F.name})]}),ae&&J&&P&&w.jsx("div",{className:"ml-4",children:w.jsx(dk,{connection:n,container:F.name,prefixes:P.prefixes,activePath:g,expanded:r,onToggle:s,onSelectPath:l})})]},F.name)}):w.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"No containers found"}),e[23]=p,e[24]=g,e[25]=n,e[26]=C,e[27]=k,e[28]=r,e[29]=m,e[30]=a,e[31]=l,e[32]=s,e[33]=P,e[34]=M):M=e[34];let $;e[35]!==c?($=F=>{F.stopPropagation(),c()},e[35]=c,e[36]=$):$=e[36];let G,ee;e[37]===Symbol.for("react.memo_cache_sentinel")?(G=w.jsx(Fd,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500"}),ee=w.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"New container"}),e[37]=G,e[38]=ee):(G=e[37],ee=e[38]);let te;e[39]!==$?(te=w.jsxs("button",{onClick:$,className:"flex items-center gap-2 px-3 py-1.5 w-full rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors text-left",children:[G,ee]}),e[39]=$,e[40]=te):te=e[40];let V;return e[41]!==M||e[42]!==te?(V=w.jsxs("div",{className:"space-y-0.5",children:[M,te]}),e[41]=M,e[42]=te,e[43]=V):V=e[43],V}function dk(t){const e=tn.c(17),{connection:n,container:r,prefixes:s,activePath:a,expanded:l,onToggle:c,onSelectPath:f}=t;if(s.length===0)return null;let d;if(e[0]!==a||e[1]!==n||e[2]!==r||e[3]!==l||e[4]!==f||e[5]!==c||e[6]!==s){let p;e[8]!==a||e[9]!==n||e[10]!==r||e[11]!==l||e[12]!==f||e[13]!==c?(p=g=>w.jsx(aL,{connection:n,container:r,prefix:g,activePath:a,expanded:l,onToggle:c,onSelectPath:f},g),e[8]=a,e[9]=n,e[10]=r,e[11]=l,e[12]=f,e[13]=c,e[14]=p):p=e[14],d=s.map(p),e[0]=a,e[1]=n,e[2]=r,e[3]=l,e[4]=f,e[5]=c,e[6]=s,e[7]=d}else d=e[7];let m;return e[15]!==d?(m=w.jsx("div",{className:"space-y-0.5",children:d}),e[15]=d,e[16]=m):m=e[16],m}function aL(t){const e=tn.c(48),{connection:n,container:r,prefix:s,activePath:a,expanded:l,onToggle:c,onSelectPath:f}=t,d=`folder:${n.id}:${r}:${s}`;let m;e[0]!==l||e[1]!==d?(m=l.has(d),e[0]=l,e[1]=d,e[2]=m):m=e[2];const p=m,g=s.replace(/^\/+/,""),x=a.replace(/^\/+/,"")===g;let S;e[3]!==n.id||e[4]!==r||e[5]!==s?(S=["storage-objects",n.id,r,s],e[3]=n.id,e[4]=r,e[5]=s,e[6]=S):S=e[6];let E;e[7]!==n||e[8]!==r||e[9]!==s?(E=()=>qd(n,r,{prefix:s,delimiter:"/"}),e[7]=n,e[8]=r,e[9]=s,e[10]=E):E=e[10];let C;e[11]!==p||e[12]!==S||e[13]!==E?(C={queryKey:S,queryFn:E,enabled:p},e[11]=p,e[12]=S,e[13]=E,e[14]=C):C=e[14];const{data:k}=ys(C);let R;e[15]!==s?(R=yu(s),e[15]=s,e[16]=R):R=e[16];const I=R,j=`group flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-colors ${x?"bg-blue-500/10 dark:bg-blue-500/20":"hover:bg-neutral-100 dark:hover:bg-white/5"}`;let A;e[17]!==r||e[18]!==d||e[19]!==f||e[20]!==c||e[21]!==s?(A=()=>{c(d),f(r,s)},e[17]=r,e[18]=d,e[19]=f,e[20]=c,e[21]=s,e[22]=A):A=e[22];let z;e[23]!==p?(z=p?w.jsx(Bi,{className:"w-3 h-3 text-neutral-400 shrink-0"}):w.jsx(f0,{className:"w-3 h-3 text-neutral-400 shrink-0"}),e[23]=p,e[24]=z):z=e[24];const L=`w-3.5 h-3.5 shrink-0 ${x?"text-blue-500":"text-neutral-400"}`;let P;e[25]!==L?(P=w.jsx(IE,{className:L}),e[25]=L,e[26]=P):P=e[26];const M=`text-xs truncate flex-1 ${x?"text-blue-600 dark:text-blue-400":"text-neutral-500 dark:text-neutral-400"}`;let $;e[27]!==I||e[28]!==M?($=w.jsx("span",{className:M,children:I}),e[27]=I,e[28]=M,e[29]=$):$=e[29];let G;e[30]!==P||e[31]!==$||e[32]!==j||e[33]!==A||e[34]!==z?(G=w.jsxs("div",{className:j,onClick:A,children:[z,P,$]}),e[30]=P,e[31]=$,e[32]=j,e[33]=A,e[34]=z,e[35]=G):G=e[35];let ee;e[36]!==a||e[37]!==n||e[38]!==r||e[39]!==l||e[40]!==p||e[41]!==f||e[42]!==c||e[43]!==k?(ee=p&&k&&k.prefixes.length>0&&w.jsx("div",{className:"ml-4",children:w.jsx(dk,{connection:n,container:r,prefixes:k.prefixes,activePath:a,expanded:l,onToggle:c,onSelectPath:f})}),e[36]=a,e[37]=n,e[38]=r,e[39]=l,e[40]=p,e[41]=f,e[42]=c,e[43]=k,e[44]=ee):ee=e[44];let te;return e[45]!==G||e[46]!==ee?(te=w.jsxs("div",{children:[G,ee]}),e[45]=G,e[46]=ee,e[47]=te):te=e[47],te}function Hd(t){return t.type==="database"}function hk(t){return t.type==="storage"}const J_={postgres:"text-blue-600 dark:text-blue-400",mysql:"text-yellow-600 dark:text-yellow-400",sqlite:"text-purple-600 dark:text-purple-400",sqlserver:"text-red-600 dark:text-red-400",oracle:"text-orange-600 dark:text-orange-400",s3:"text-orange-600 dark:text-orange-400","azure-blob":"text-blue-600 dark:text-blue-400"};function oL(t){const e=tn.c(54),{showAddModal:n,onAddModalClose:r}=t,s=n===void 0?!1:n;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={strict:!1},e[0]=a):a=e[0];const l=Ji(a),c=Cu();let f;e[1]!==c?(f=me=>{c(me?{to:`/${me}`}:{to:"/"})},e[1]=c,e[2]=f):f=e[2];const d=f;let m;e[3]!==c?(m=(me,Ee)=>{c({to:`/${me}/${Ee}`})},e[3]=c,e[4]=m):m=e[4];const p=m;let g;e[5]!==c?(g=(me,Ee,Oe)=>{c({to:`/${me}/${Ee}/${Oe}`})},e[5]=c,e[6]=g):g=e[6];const y=g;let x;e[7]!==c?(x=(me,Ee)=>{c({to:`/${me}/container/${Ee}`})},e[7]=c,e[8]=x):x=e[8];const S=x;let E;e[9]!==c?(E=(me,Ee,Oe)=>{const Ze=Oe.replace(/^\/+/,"");c({to:`/${me}/container/${Ee}/${Ze}`})},e[9]=c,e[10]=E):E=e[10];const C=E,k=nk(cL);let R;e[11]===Symbol.for("react.memo_cache_sentinel")?(R={open:!1},e[11]=R):R=e[11];const[I,j]=q.useState(R),[A,z]=q.useState(null);let L;e[12]===Symbol.for("react.memo_cache_sentinel")?(L=new Set,e[12]=L):L=e[12];const[P,M]=q.useState(L);let $;if(e[13]!==l._splat||e[14]!==l.connectionId||e[15]!==l.container||e[16]!==l.database){e:{const me=new Set,Ee=l.connectionId,Oe=l.database,Ze=l.container,Le=l._splat||"";if(!Ee){$=me;break e}if(me.add(Ee),Oe&&me.add(`${Ee}:${Oe}`),Ze&&me.add(`container:${Ee}:${Ze}`),Ze&&Le){const Ye=Le.split("/").filter(Boolean);let it="";for(const Je of Ye)it=it?`${it}/${Je}`:Je,it!==Le.replace(/\/$/,"")&&me.add(`folder:${Ee}:${Ze}:${it}/`)}$=me}e[13]=l._splat,e[14]=l.connectionId,e[15]=l.container,e[16]=l.database,e[17]=$}else $=e[17];const G=$;let ee;e[18]!==P||e[19]!==G?(ee=new Set([...G,...P]),e[18]=P,e[19]=G,e[20]=ee):ee=e[20];const te=ee;let V;e[21]!==G?(V=me=>{M(Ee=>{const Oe=new Set(Ee);if(Oe.has(me))Oe.delete(me);else{if(G.has(me))return Ee;Oe.add(me)}return Oe})},e[21]=G,e[22]=V):V=e[22];const F=V;let J;e[23]!==I.connection||e[24]!==d?(J=me=>{if(I.connection)Yl.update(I.connection.id,Ee=>{Object.assign(Ee,me)});else{const Ee=crypto.randomUUID(),Oe={...me,id:Ee,createdAt:new Date().toISOString()};Yl.insert(Oe),d(Ee),M(Ze=>new Set(Ze).add(Ee))}j({open:!1})},e[23]=I.connection,e[24]=d,e[25]=J):J=e[25];const ae=J;let Q;e[26]!==d||e[27]!==l?(Q=me=>{Yl.delete(me),l.connectionId===me&&d(null)},e[26]=d,e[27]=l,e[28]=Q):Q=e[28];const N=Q,D=uL,B=lL;let T;e[29]!==I.connection||e[30]!==I.open||e[31]!==r||e[32]!==ae||e[33]!==s?(T=(I.open||s)&&w.jsx(nL,{connection:I.connection,onSave:ae,onClose:()=>{j({open:!1}),r?.()}}),e[29]=I.connection,e[30]=I.open,e[31]=r,e[32]=ae,e[33]=s,e[34]=T):T=e[34];let se;e[35]!==A?(se=A&&w.jsx(rL,{connection:A,onClose:()=>z(null)}),e[35]=A,e[36]=se):se=e[36];let ce;e[37]===Symbol.for("react.memo_cache_sentinel")?(ce=w.jsx("h1",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 pl-0.5",children:"Granite"}),e[37]=ce):ce=e[37];let he;e[38]===Symbol.for("react.memo_cache_sentinel")?(he=()=>j({open:!0,connection:null}),e[38]=he):he=e[38];let ve;e[39]===Symbol.for("react.memo_cache_sentinel")?(ve=w.jsxs("div",{className:"px-3 py-2.5 flex items-center justify-between gap-2",children:[ce,w.jsx("div",{className:"flex items-center gap-1",children:w.jsx("button",{onClick:he,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Add connection",children:w.jsx(Fd,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"})})})]}),e[39]=ve):ve=e[39];let Ae;e[40]!==k?.data||e[41]!==N||e[42]!==te||e[43]!==d||e[44]!==S||e[45]!==p||e[46]!==C||e[47]!==y||e[48]!==F?(Ae=w.jsxs("aside",{className:"w-64 bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl flex flex-col overflow-hidden dark:shadow-2xl",children:[ve,w.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:(k?.data??[]).length===0?w.jsx("div",{className:"px-2 py-8 text-center text-neutral-400 dark:text-neutral-600 text-xs",children:"No connections yet"}):w.jsx("div",{className:"space-y-0.5 pb-2",children:(k?.data??[]).map(me=>{const Ee=te.has(me.id),Oe=Hd(me),Ze=hk(me);return w.jsxs("div",{children:[w.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>{d(me.id),F(me.id)},children:[Oe?w.jsx(fu,{className:`w-3 h-3 shrink-0 ${B(me)}`}):w.jsx(zE,{className:`w-3 h-3 shrink-0 ${B(me)}`}),w.jsx("span",{className:`text-[10px] font-semibold shrink-0 uppercase ${B(me)}`,children:D(me)}),w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",children:me.name}),w.jsxs("div",{className:"flex items-center gap-0.5",children:[w.jsx("button",{onClick:Le=>{Le.stopPropagation(),j({open:!0,connection:me})},className:"inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-colors",title:"Edit",children:w.jsx(ED,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-blue-500 dark:hover:text-blue-400"})}),w.jsx("button",{onClick:Le=>{Le.stopPropagation(),N(me.id)},className:"inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-colors",title:"Delete",children:w.jsx(du,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400"})})]})]}),Ee&&Oe&&w.jsx("div",{className:"ml-4",children:w.jsx(sL,{connection:me,expanded:te,onToggle:F,onSelectDatabase:Le=>p(me.id,Le),onSelectTable:(Le,Ye)=>y(me.id,Le,Ye)})}),Ee&&Ze&&w.jsx("div",{className:"ml-4",children:w.jsx(iL,{connection:me,expanded:te,onToggle:F,onSelectContainer:Le=>S(me.id,Le),onSelectPath:(Le,Ye)=>C(me.id,Le,Ye),onCreateContainer:()=>z(me)})})]},me.id)})})})]}),e[40]=k?.data,e[41]=N,e[42]=te,e[43]=d,e[44]=S,e[45]=p,e[46]=C,e[47]=y,e[48]=F,e[49]=Ae):Ae=e[49];let _e;return e[50]!==T||e[51]!==se||e[52]!==Ae?(_e=w.jsxs(w.Fragment,{children:[T,se,Ae]}),e[50]=T,e[51]=se,e[52]=Ae,e[53]=_e):_e=e[53],_e}function lL(t){return Hd(t)?J_[t.driver]||"text-neutral-500":J_[t.provider]||"text-neutral-500"}function uL(t){if(Hd(t))switch(t.driver){case"postgres":return"PG";case"mysql":return"MY";case"sqlserver":return"MS";case"oracle":return"OR";case"sqlite":return"SQ";default:return"DB"}else return t.provider==="s3"?"S3":"AZ"}function cL(t){return t.from({conn:Yl}).orderBy(fL,"desc")}function fL(t){const{conn:e}=t;return e.createdAt}function X_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function dL(t){if(Array.isArray(t))return t}function hL(t,e,n){return(e=xL(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pL(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,l,c=[],f=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(f=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);f=!0);}catch(m){d=!0,s=m}finally{try{if(!f&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}}function mL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function e1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W_(Object(n),!0).forEach(function(r){hL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gL(t,e){if(t==null)return{};var n,r,s=yL(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function yL(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function vL(t,e){return dL(t)||pL(t,e)||SL(t,e)||mL()}function bL(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xL(t){var e=bL(t,"string");return typeof e=="symbol"?e:e+""}function SL(t,e){if(t){if(typeof t=="string")return X_(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X_(t,e):void 0}}function wL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function n1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t1(Object(n),!0).forEach(function(r){wL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _L(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(s,a){return a(s)},r)}}function Dl(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return s.length>=t.length?t.apply(this,s):function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return e.apply(n,[].concat(s,c))}}}function md(t){return{}.toString.call(t).includes("Object")}function CL(t){return!Object.keys(t).length}function vu(t){return typeof t=="function"}function EL(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function kL(t,e){return md(e)||ri("changeType"),Object.keys(e).some(function(n){return!EL(t,n)})&&ri("changeField"),e}function RL(t){vu(t)||ri("selectorType")}function AL(t){vu(t)||md(t)||ri("handlerType"),md(t)&&Object.values(t).some(function(e){return!vu(e)})&&ri("handlersType")}function TL(t){t||ri("initialIsRequired"),md(t)||ri("initialType"),CL(t)&&ri("initialContent")}function OL(t,e){throw new Error(t[e]||t.default)}var ML={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},ri=Dl(OL)(ML),df={changes:kL,selector:RL,handler:AL,initial:TL};function NL(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};df.initial(t),df.handler(e);var n={current:t},r=Dl(zL)(n,e),s=Dl(DL)(n),a=Dl(df.changes)(t),l=Dl(IL)(n);function c(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(m){return m};return df.selector(d),d(n.current)}function f(d){_L(r,s,a,l)(d)}return[c,f]}function IL(t,e){return vu(e)?e(t.current):e}function DL(t,e){return t.current=n1(n1({},t.current),e),e}function zL(t,e,n){return vu(e)?e(t.current):Object.keys(n).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,t.current[r])}),n}var jL={create:NL},LL={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function PL(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return s.length>=t.length?t.apply(this,s):function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return e.apply(n,[].concat(s,c))}}}function FL(t){return{}.toString.call(t).includes("Object")}function $L(t){return t||r1("configIsRequired"),FL(t)||r1("configType"),t.urls?(BL(),{paths:{vs:t.urls.monacoBase}}):t}function BL(){console.warn(pk.deprecation)}function UL(t,e){throw new Error(t[e]||t.default)}var pk={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},r1=PL(UL)(pk),qL={config:$L},HL=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(s){return n.reduceRight(function(a,l){return l(a)},s)}};function mk(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],mk(t[n],e[n]))}),e1(e1({},t),e)}var VL={type:"cancelation",msg:"operation is manually canceled"};function eg(t){var e=!1,n=new Promise(function(r,s){t.then(function(a){return e?s(VL):r(a)}),t.catch(s)});return n.cancel=function(){return e=!0},n}var KL=["monaco"],GL=jL.create({config:LL,isInitialized:!1,resolve:null,reject:null,monaco:null}),gk=vL(GL,2),Ou=gk[0],Vd=gk[1];function QL(t){var e=qL.config(t),n=e.monaco,r=gL(e,KL);Vd(function(s){return{config:mk(s.config,r),monaco:n}})}function ZL(){var t=Ou(function(e){var n=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:n,isInitialized:r,resolve:s}});if(!t.isInitialized){if(Vd({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),eg(tg);if(window.monaco&&window.monaco.editor)return yk(window.monaco),t.resolve(window.monaco),eg(tg);HL(YL,XL)(WL)}return eg(tg)}function YL(t){return document.body.appendChild(t)}function JL(t){var e=document.createElement("script");return t&&(e.src=t),e}function XL(t){var e=Ou(function(r){var s=r.config,a=r.reject;return{config:s,reject:a}}),n=JL("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function WL(){var t=Ou(function(n){var r=n.config,s=n.resolve,a=n.reject;return{config:r,resolve:s,reject:a}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var r=n.m||n;yk(r),t.resolve(r)},function(n){t.reject(n)})}function yk(t){Ou().monaco||Vd({monaco:t})}function eP(){return Ou(function(t){var e=t.monaco;return e})}var tg=new Promise(function(t,e){return Vd({resolve:t,reject:e})}),vk={config:QL,init:ZL,__getMonacoInstance:eP},tP={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ng=tP,nP={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},rP=nP;function sP({children:t}){return Or.createElement("div",{style:rP.container},t)}var iP=sP,aP=iP;function oP({width:t,height:e,isEditorReady:n,loading:r,_ref:s,className:a,wrapperProps:l}){return Or.createElement("section",{style:{...ng.wrapper,width:t,height:e},...l},!n&&Or.createElement(aP,null,r),Or.createElement("div",{ref:s,style:{...ng.fullWidth,...!n&&ng.hide},className:a}))}var lP=oP,bk=q.memo(lP);function uP(t){q.useEffect(t,[])}var xk=uP;function cP(t,e,n=!0){let r=q.useRef(!0);q.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var Xn=cP;function Xl(){}function Wa(t,e,n,r){return fP(t,r)||dP(t,e,n,r)}function fP(t,e){return t.editor.getModel(Sk(t,e))}function dP(t,e,n,r){return t.editor.createModel(e,n,r?Sk(t,r):void 0)}function Sk(t,e){return t.Uri.parse(e)}function hP({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:s,originalModelPath:a,modifiedModelPath:l,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:f=!1,theme:d="light",loading:m="Loading...",options:p={},height:g="100%",width:y="100%",className:x,wrapperProps:S={},beforeMount:E=Xl,onMount:C=Xl}){let[k,R]=q.useState(!1),[I,j]=q.useState(!0),A=q.useRef(null),z=q.useRef(null),L=q.useRef(null),P=q.useRef(C),M=q.useRef(E),$=q.useRef(!1);xk(()=>{let V=vk.init();return V.then(F=>(z.current=F)&&j(!1)).catch(F=>F?.type!=="cancelation"&&console.error("Monaco initialization: error:",F)),()=>A.current?te():V.cancel()}),Xn(()=>{if(A.current&&z.current){let V=A.current.getOriginalEditor(),F=Wa(z.current,t||"",r||n||"text",a||"");F!==V.getModel()&&V.setModel(F)}},[a],k),Xn(()=>{if(A.current&&z.current){let V=A.current.getModifiedEditor(),F=Wa(z.current,e||"",s||n||"text",l||"");F!==V.getModel()&&V.setModel(F)}},[l],k),Xn(()=>{let V=A.current.getModifiedEditor();V.getOption(z.current.editor.EditorOption.readOnly)?V.setValue(e||""):e!==V.getValue()&&(V.executeEdits("",[{range:V.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),V.pushUndoStop())},[e],k),Xn(()=>{A.current?.getModel()?.original.setValue(t||"")},[t],k),Xn(()=>{let{original:V,modified:F}=A.current.getModel();z.current.editor.setModelLanguage(V,r||n||"text"),z.current.editor.setModelLanguage(F,s||n||"text")},[n,r,s],k),Xn(()=>{z.current?.editor.setTheme(d)},[d],k),Xn(()=>{A.current?.updateOptions(p)},[p],k);let G=q.useCallback(()=>{if(!z.current)return;M.current(z.current);let V=Wa(z.current,t||"",r||n||"text",a||""),F=Wa(z.current,e||"",s||n||"text",l||"");A.current?.setModel({original:V,modified:F})},[n,e,s,t,r,a,l]),ee=q.useCallback(()=>{!$.current&&L.current&&(A.current=z.current.editor.createDiffEditor(L.current,{automaticLayout:!0,...p}),G(),z.current?.editor.setTheme(d),R(!0),$.current=!0)},[p,d,G]);q.useEffect(()=>{k&&P.current(A.current,z.current)},[k]),q.useEffect(()=>{!I&&!k&&ee()},[I,k,ee]);function te(){let V=A.current?.getModel();c||V?.original?.dispose(),f||V?.modified?.dispose(),A.current?.dispose()}return Or.createElement(bk,{width:y,height:g,isEditorReady:k,loading:m,_ref:L,className:x,wrapperProps:S})}var pP=hP;q.memo(pP);function mP(t){let e=q.useRef();return q.useEffect(()=>{e.current=t},[t]),e.current}var gP=mP,hf=new Map;function yP({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:s,path:a,theme:l="light",line:c,loading:f="Loading...",options:d={},overrideServices:m={},saveViewState:p=!0,keepCurrentModel:g=!1,width:y="100%",height:x="100%",className:S,wrapperProps:E={},beforeMount:C=Xl,onMount:k=Xl,onChange:R,onValidate:I=Xl}){let[j,A]=q.useState(!1),[z,L]=q.useState(!0),P=q.useRef(null),M=q.useRef(null),$=q.useRef(null),G=q.useRef(k),ee=q.useRef(C),te=q.useRef(),V=q.useRef(r),F=gP(a),J=q.useRef(!1),ae=q.useRef(!1);xk(()=>{let D=vk.init();return D.then(B=>(P.current=B)&&L(!1)).catch(B=>B?.type!=="cancelation"&&console.error("Monaco initialization: error:",B)),()=>M.current?N():D.cancel()}),Xn(()=>{let D=Wa(P.current,t||r||"",e||s||"",a||n||"");D!==M.current?.getModel()&&(p&&hf.set(F,M.current?.saveViewState()),M.current?.setModel(D),p&&M.current?.restoreViewState(hf.get(a)))},[a],j),Xn(()=>{M.current?.updateOptions(d)},[d],j),Xn(()=>{!M.current||r===void 0||(M.current.getOption(P.current.editor.EditorOption.readOnly)?M.current.setValue(r):r!==M.current.getValue()&&(ae.current=!0,M.current.executeEdits("",[{range:M.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),M.current.pushUndoStop(),ae.current=!1))},[r],j),Xn(()=>{let D=M.current?.getModel();D&&s&&P.current?.editor.setModelLanguage(D,s)},[s],j),Xn(()=>{c!==void 0&&M.current?.revealLine(c)},[c],j),Xn(()=>{P.current?.editor.setTheme(l)},[l],j);let Q=q.useCallback(()=>{if(!(!$.current||!P.current)&&!J.current){ee.current(P.current);let D=a||n,B=Wa(P.current,r||t||"",e||s||"",D||"");M.current=P.current?.editor.create($.current,{model:B,automaticLayout:!0,...d},m),p&&M.current.restoreViewState(hf.get(D)),P.current.editor.setTheme(l),c!==void 0&&M.current.revealLine(c),A(!0),J.current=!0}},[t,e,n,r,s,a,d,m,p,l,c]);q.useEffect(()=>{j&&G.current(M.current,P.current)},[j]),q.useEffect(()=>{!z&&!j&&Q()},[z,j,Q]),V.current=r,q.useEffect(()=>{j&&R&&(te.current?.dispose(),te.current=M.current?.onDidChangeModelContent(D=>{ae.current||R(M.current.getValue(),D)}))},[j,R]),q.useEffect(()=>{if(j){let D=P.current.editor.onDidChangeMarkers(B=>{let T=M.current.getModel()?.uri;if(T&&B.find(se=>se.path===T.path)){let se=P.current.editor.getModelMarkers({resource:T});I?.(se)}});return()=>{D?.dispose()}}return()=>{}},[j,I]);function N(){te.current?.dispose(),g?p&&hf.set(a,M.current.saveViewState()):M.current.getModel()?.dispose(),M.current.dispose()}return Or.createElement(bk,{width:y,height:x,isEditorReady:j,loading:f,_ref:$,className:S,wrapperProps:E})}var vP=yP,bP=q.memo(vP),xP=bP;const SP={records:{icon:FD,label:"Records"},columns:{icon:oD,label:"Columns"},constraints:{icon:DD,label:"Constraints"},foreignKeys:{icon:bD,label:"Foreign Keys"},indexes:{icon:SD,label:"Indexes"}},wP=["SELECT","FROM","WHERE","AND","OR","NOT","IN","IS","NULL","LIKE","BETWEEN","ORDER BY","GROUP BY","HAVING","LIMIT","OFFSET","JOIN","LEFT JOIN","RIGHT JOIN","INNER JOIN","OUTER JOIN","ON","AS","DISTINCT","COUNT","SUM","AVG","MIN","MAX","INSERT INTO","VALUES","UPDATE","SET","DELETE FROM","CREATE TABLE","DROP TABLE","ALTER TABLE","ADD COLUMN","DROP COLUMN","INDEX","UNIQUE","PRIMARY KEY","FOREIGN KEY","REFERENCES","CASCADE","ASC","DESC","UNION","ALL","EXISTS","CASE","WHEN","THEN","ELSE","END","COALESCE","NULLIF","CAST","TRUE","FALSE"];function _P(t){const e=tn.c(59),{connection:n,selectedTable:r,onExecute:s,isLoading:a,schema:l,value:c,onChange:f,onToggleAI:d,aiPanelOpen:m,supportedViews:p,onSelectView:g,activeView:y,onExpandEditor:x}=t,[S,E]=q.useState(""),[C,k]=q.useState(!0),R=c!==void 0?c:S,I=f!==void 0?f:E,j=q.useRef(null),A=q.useRef(null),z=q.useRef(l),[L,P]=q.useState(CP);let M,$;e[0]===Symbol.for("react.memo_cache_sentinel")?(M=()=>{const Je=window.matchMedia("(prefers-color-scheme: dark)"),ot=ht=>P(ht.matches);return Je.addEventListener("change",ot),()=>Je.removeEventListener("change",ot)},$=[],e[0]=M,e[1]=$):(M=e[0],$=e[1]),q.useEffect(M,$);let G,ee;e[2]!==l?(G=()=>{z.current=l},ee=[l],e[2]=l,e[3]=G,e[4]=ee):(G=e[3],ee=e[4]),q.useEffect(G,ee);let te,V;e[5]!==n||e[6]!==r||e[7]!==I?(te=()=>{r&&n&&queueMicrotask(()=>I(dy(r,n.driver)))},V=[r,n,I],e[5]=n,e[6]=r,e[7]=I,e[8]=te,e[9]=V):(te=e[8],V=e[9]),q.useEffect(te,V);let F;e[10]===Symbol.for("react.memo_cache_sentinel")?(F=(Je,ot)=>{j.current=ot,A.current?.dispose(),A.current=ot.languages.registerCompletionItemProvider("sql",{triggerCharacters:[" ",".",",","("],provideCompletionItems:(ht,Me)=>{const ge=z.current,je=ht.getWordUntilPosition(Me),be={startLineNumber:Me.lineNumber,endLineNumber:Me.lineNumber,startColumn:je.startColumn,endColumn:je.endColumn},ye=ht.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:Me.lineNumber,endColumn:Me.column}).toUpperCase(),qe=[],Ce=ht.getLineContent(Me.lineNumber).substring(0,Me.column-1).match(/(\w+)\.$/);if(Ce&&ge?.columns){const Ue=Ce[1].toLowerCase(),vt=Object.entries(ge.columns).find(ut=>{const[ct]=ut;return ct.toLowerCase()===Ue})?.[1];return vt&&vt.forEach(ut=>{qe.push({label:ut.name,kind:ot.languages.CompletionItemKind.Field,detail:`${ut.type}${ut.primaryKey?" (PK)":""}${ut.nullable?"":" NOT NULL"}`,insertText:ut.name,range:be})}),{suggestions:qe}}const ke=/\b(FROM|JOIN|INTO|UPDATE|TABLE)\s+$/i.test(ye)||/\b(FROM|JOIN|INTO|UPDATE|TABLE)\s+\w*$/i.test(ye),xe=/\bSELECT\s+(\w+\s*,\s*)*\w*$/i.test(ye)||/\bWHERE\s+.*$/i.test(ye)||/\bSET\s+.*$/i.test(ye)||/\bAND\s+\w*$/i.test(ye)||/\bOR\s+\w*$/i.test(ye)||/\bORDER BY\s+.*$/i.test(ye)||/\bGROUP BY\s+.*$/i.test(ye);return wP.forEach(Ue=>{Ue.toUpperCase().startsWith(je.word.toUpperCase())&&qe.push({label:Ue,kind:ot.languages.CompletionItemKind.Keyword,detail:"SQL keyword",insertText:Ue,range:be})}),ge?.tables&&(ke||!xe)&&ge.tables.forEach(Ue=>{qe.push({label:Ue,kind:ot.languages.CompletionItemKind.Class,detail:"Table",insertText:Ue,range:be})}),ge?.columns&&xe&&Object.entries(ge.columns).forEach(Ue=>{const[vt,ut]=Ue;ut.forEach(ct=>{qe.push({label:ct.name,kind:ot.languages.CompletionItemKind.Field,detail:`${vt}.${ct.name} (${ct.type})`,insertText:ct.name,range:be}),qe.push({label:`${vt}.${ct.name}`,kind:ot.languages.CompletionItemKind.Field,detail:ct.type,insertText:`${vt}.${ct.name}`,range:be})})}),{suggestions:qe}}})},e[10]=F):F=e[10];const J=F;let ae,Q;e[11]===Symbol.for("react.memo_cache_sentinel")?(ae=()=>()=>{A.current?.dispose()},Q=[],e[11]=ae,e[12]=Q):(ae=e[11],Q=e[12]),q.useEffect(ae,Q);let N;e[13]!==n||e[14]!==s||e[15]!==R?(N=()=>{!n||!R.trim()||s(R)},e[13]=n,e[14]=s,e[15]=R,e[16]=N):N=e[16];const D=N;let B;e[17]!==D?(B=Je=>{(Je.metaKey||Je.ctrlKey)&&Je.key==="Enter"&&(Je.preventDefault(),D())},e[17]=D,e[18]=B):B=e[18];const T=B,se=`flex flex-col bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden dark:shadow-2xl transition-all ${C?"":"h-80"}`;let ce;e[19]!==C||e[20]!==x?(ce=()=>{C&&x&&x(),k(!C)},e[19]=C,e[20]=x,e[21]=ce):ce=e[21];const he=C?"Expand editor":"Collapse editor";let ve;e[22]!==C?(ve=C?w.jsx(Bi,{className:"w-4 h-4"}):w.jsx(Gl,{className:"w-4 h-4"}),e[22]=C,e[23]=ve):ve=e[23];let Ae;e[24]!==ce||e[25]!==he||e[26]!==ve?(Ae=w.jsx("button",{onClick:ce,className:"p-1.5 rounded-lg transition-colors text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/5",title:he,children:ve}),e[24]=ce,e[25]=he,e[26]=ve,e[27]=Ae):Ae=e[27];let _e;e[28]!==y||e[29]!==g||e[30]!==r||e[31]!==p?(_e=r&&p&&g&&w.jsx("div",{className:"flex gap-0.5 p-1 bg-neutral-100 dark:bg-white/5 rounded-lg",children:p.map(Je=>{const{icon:ot,label:ht}=SP[Je],Me=y===Je;return w.jsxs("button",{type:"button",onClick:()=>{g(Je),k(!0)},title:ht,className:`flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded-md transition-all whitespace-nowrap ${Me?"bg-white dark:bg-neutral-700 text-neutral-900 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 hover:bg-white dark:hover:bg-neutral-700 hover:shadow-sm"}`,children:[w.jsx(ot,{className:"w-3.5 h-3.5"}),w.jsx("span",{className:"hidden lg:inline",children:ht})]},Je)})}),e[28]=y,e[29]=g,e[30]=r,e[31]=p,e[32]=_e):_e=e[32];let me;e[33]===Symbol.for("react.memo_cache_sentinel")?(me=w.jsx("div",{className:"flex-1"}),e[33]=me):me=e[33];let Ee;e[34]!==n?(Ee=n?w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"font-medium text-neutral-600 dark:text-neutral-300",children:n.name}),w.jsx("span",{className:"mx-1.5",children:""}),w.jsx("span",{className:"uppercase",children:n.driver})]}):"No connection",e[34]=n,e[35]=Ee):Ee=e[35];let Oe;e[36]!==Ee?(Oe=w.jsx("span",{className:"text-[10px] text-neutral-400 dark:text-neutral-500",children:Ee}),e[36]=Ee,e[37]=Oe):Oe=e[37];let Ze;e[38]!==m||e[39]!==d?(Ze=d&&w.jsx("button",{onClick:d,className:`p-1.5 rounded-lg transition-colors ${m?"bg-amber-500/10 text-amber-500":"text-neutral-400 hover:text-amber-500 hover:bg-amber-500/10"}`,title:"Toggle AI Assistant",children:w.jsx(Gg,{className:"w-4 h-4"})}),e[38]=m,e[39]=d,e[40]=Ze):Ze=e[40];let Le;e[41]!==Ae||e[42]!==_e||e[43]!==Oe||e[44]!==Ze?(Le=w.jsxs("div",{className:"h-12 px-3 flex items-center gap-3 border-b border-neutral-200 dark:border-white/8",children:[Ae,_e,me,Oe,Ze]}),e[41]=Ae,e[42]=_e,e[43]=Oe,e[44]=Ze,e[45]=Le):Le=e[45];let Ye;e[46]!==n||e[47]!==D||e[48]!==C||e[49]!==L||e[50]!==a||e[51]!==I||e[52]!==R?(Ye=!C&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"flex-1 min-h-0",children:w.jsx(xP,{height:"100%",defaultLanguage:"sql",value:R,onChange:Je=>I(Je||""),onMount:J,theme:L?"vs-dark":"vs",options:{quickSuggestions:!0,suggestOnTriggerCharacters:!0,minimap:{enabled:!1},fontSize:13,fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",padding:{top:12,bottom:12},renderLineHighlight:"none",overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,scrollbar:{vertical:"auto",horizontal:"auto",verticalScrollbarSize:8,horizontalScrollbarSize:8},lineNumbersMinChars:3,folding:!1}})}),w.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 border-t border-neutral-200 dark:border-white/8",children:[w.jsxs("button",{onClick:D,disabled:!n||!R.trim()||a,className:"flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-md disabled:opacity-50 transition-colors",children:[w.jsx(RD,{className:"w-3 h-3"}),a?"Running...":"Run"]}),w.jsx("span",{className:"text-[10px] text-neutral-400 dark:text-neutral-600",children:""})]})]}),e[46]=n,e[47]=D,e[48]=C,e[49]=L,e[50]=a,e[51]=I,e[52]=R,e[53]=Ye):Ye=e[53];let it;return e[54]!==T||e[55]!==se||e[56]!==Le||e[57]!==Ye?(it=w.jsxs("div",{className:se,onKeyDown:T,children:[Le,Ye]}),e[54]=T,e[55]=se,e[56]=Le,e[57]=Ye,e[58]=it):it=e[58],it}function CP(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function Ws(t,e){return typeof t=="function"?t(e):t}function tr(t,e){return n=>{e.setState(r=>({...r,[t]:Ws(n,r[t])}))}}function Kd(t){return t instanceof Function}function EP(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function kP(t,e){const n=[],r=s=>{s.forEach(a=>{n.push(a);const l=e(a);l!=null&&l.length&&r(l)})};return r(t),n}function Pe(t,e,n){let r=[],s;return a=>{let l;n.key&&n.debug&&(l=Date.now());const c=t(a);if(!(c.length!==r.length||c.some((m,p)=>r[p]!==m)))return s;r=c;let d;if(n.key&&n.debug&&(d=Date.now()),s=e(...c),n==null||n.onChange==null||n.onChange(s),n.key&&n.debug&&n!=null&&n.debug()){const m=Math.round((Date.now()-l)*100)/100,p=Math.round((Date.now()-d)*100)/100,g=p/16,y=(x,S)=>{for(x=String(x);x.length<S;)x=" "+x;return x};console.info(`%c ${y(p,5)} /${y(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,n?.key)}return s}}function Fe(t,e,n,r){return{debug:()=>{var s;return(s=t?.debugAll)!=null?s:t[e]},key:!1,onChange:r}}function RP(t,e,n,r){const s=()=>{var l;return(l=a.getValue())!=null?l:t.options.renderFallbackValue},a={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:s,getContext:Pe(()=>[t,n,e,a],(l,c,f,d)=>({table:l,column:c,row:f,cell:d,getValue:d.getValue,renderValue:d.renderValue}),Fe(t.options,"debugCells"))};return t._features.forEach(l=>{l.createCell==null||l.createCell(a,n,e,t)},{}),a}function AP(t,e,n,r){var s,a;const c={...t._getDefaultColumnDef(),...e},f=c.accessorKey;let d=(s=(a=c.id)!=null?a:f?typeof String.prototype.replaceAll=="function"?f.replaceAll(".","_"):f.replace(/\./g,"_"):void 0)!=null?s:typeof c.header=="string"?c.header:void 0,m;if(c.accessorFn?m=c.accessorFn:f&&(f.includes(".")?m=g=>{let y=g;for(const S of f.split(".")){var x;y=(x=y)==null?void 0:x[S]}return y}:m=g=>g[c.accessorKey]),!d)throw new Error;let p={id:`${String(d)}`,accessorFn:m,parent:r,depth:n,columnDef:c,columns:[],getFlatColumns:Pe(()=>[!0],()=>{var g;return[p,...(g=p.columns)==null?void 0:g.flatMap(y=>y.getFlatColumns())]},Fe(t.options,"debugColumns")),getLeafColumns:Pe(()=>[t._getOrderColumnsFn()],g=>{var y;if((y=p.columns)!=null&&y.length){let x=p.columns.flatMap(S=>S.getLeafColumns());return g(x)}return[p]},Fe(t.options,"debugColumns"))};for(const g of t._features)g.createColumn==null||g.createColumn(p,t);return p}const mn="debugHeaders";function s1(t,e,n){var r;let a={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const l=[],c=f=>{f.subHeaders&&f.subHeaders.length&&f.subHeaders.map(c),l.push(f)};return c(a),l},getContext:()=>({table:t,header:a,column:e})};return t._features.forEach(l=>{l.createHeader==null||l.createHeader(a,t)}),a}const TP={createTable:t=>{t.getHeaderGroups=Pe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>{var a,l;const c=(a=r?.map(p=>n.find(g=>g.id===p)).filter(Boolean))!=null?a:[],f=(l=s?.map(p=>n.find(g=>g.id===p)).filter(Boolean))!=null?l:[],d=n.filter(p=>!(r!=null&&r.includes(p.id))&&!(s!=null&&s.includes(p.id)));return pf(e,[...c,...d,...f],t)},Fe(t.options,mn)),t.getCenterHeaderGroups=Pe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>(n=n.filter(a=>!(r!=null&&r.includes(a.id))&&!(s!=null&&s.includes(a.id))),pf(e,n,t,"center")),Fe(t.options,mn)),t.getLeftHeaderGroups=Pe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var s;const a=(s=r?.map(l=>n.find(c=>c.id===l)).filter(Boolean))!=null?s:[];return pf(e,a,t,"left")},Fe(t.options,mn)),t.getRightHeaderGroups=Pe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var s;const a=(s=r?.map(l=>n.find(c=>c.id===l)).filter(Boolean))!=null?s:[];return pf(e,a,t,"right")},Fe(t.options,mn)),t.getFooterGroups=Pe(()=>[t.getHeaderGroups()],e=>[...e].reverse(),Fe(t.options,mn)),t.getLeftFooterGroups=Pe(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),Fe(t.options,mn)),t.getCenterFooterGroups=Pe(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),Fe(t.options,mn)),t.getRightFooterGroups=Pe(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),Fe(t.options,mn)),t.getFlatHeaders=Pe(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),Fe(t.options,mn)),t.getLeftFlatHeaders=Pe(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),Fe(t.options,mn)),t.getCenterFlatHeaders=Pe(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),Fe(t.options,mn)),t.getRightFlatHeaders=Pe(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),Fe(t.options,mn)),t.getCenterLeafHeaders=Pe(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Fe(t.options,mn)),t.getLeftLeafHeaders=Pe(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Fe(t.options,mn)),t.getRightLeafHeaders=Pe(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Fe(t.options,mn)),t.getLeafHeaders=Pe(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var s,a,l,c,f,d;return[...(s=(a=e[0])==null?void 0:a.headers)!=null?s:[],...(l=(c=n[0])==null?void 0:c.headers)!=null?l:[],...(f=(d=r[0])==null?void 0:d.headers)!=null?f:[]].map(m=>m.getLeafHeaders()).flat()},Fe(t.options,mn))}};function pf(t,e,n,r){var s,a;let l=0;const c=function(g,y){y===void 0&&(y=1),l=Math.max(l,y),g.filter(x=>x.getIsVisible()).forEach(x=>{var S;(S=x.columns)!=null&&S.length&&c(x.columns,y+1)},0)};c(t);let f=[];const d=(g,y)=>{const x={depth:y,id:[r,`${y}`].filter(Boolean).join("_"),headers:[]},S=[];g.forEach(E=>{const C=[...S].reverse()[0],k=E.column.depth===x.depth;let R,I=!1;if(k&&E.column.parent?R=E.column.parent:(R=E.column,I=!0),C&&C?.column===R)C.subHeaders.push(E);else{const j=s1(n,R,{id:[r,y,R.id,E?.id].filter(Boolean).join("_"),isPlaceholder:I,placeholderId:I?`${S.filter(A=>A.column===R).length}`:void 0,depth:y,index:S.length});j.subHeaders.push(E),S.push(j)}x.headers.push(E),E.headerGroup=x}),f.push(x),y>0&&d(S,y-1)},m=e.map((g,y)=>s1(n,g,{depth:l,index:y}));d(m,l-1),f.reverse();const p=g=>g.filter(x=>x.column.getIsVisible()).map(x=>{let S=0,E=0,C=[0];x.subHeaders&&x.subHeaders.length?(C=[],p(x.subHeaders).forEach(R=>{let{colSpan:I,rowSpan:j}=R;S+=I,C.push(j)})):S=1;const k=Math.min(...C);return E=E+k,x.colSpan=S,x.rowSpan=E,{colSpan:S,rowSpan:E}});return p((s=(a=f[0])==null?void 0:a.headers)!=null?s:[]),f}const OP=(t,e,n,r,s,a,l)=>{let c={id:e,index:r,original:n,depth:s,parentId:l,_valuesCache:{},_uniqueValuesCache:{},getValue:f=>{if(c._valuesCache.hasOwnProperty(f))return c._valuesCache[f];const d=t.getColumn(f);if(d!=null&&d.accessorFn)return c._valuesCache[f]=d.accessorFn(c.original,r),c._valuesCache[f]},getUniqueValues:f=>{if(c._uniqueValuesCache.hasOwnProperty(f))return c._uniqueValuesCache[f];const d=t.getColumn(f);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(c._uniqueValuesCache[f]=d.columnDef.getUniqueValues(c.original,r),c._uniqueValuesCache[f]):(c._uniqueValuesCache[f]=[c.getValue(f)],c._uniqueValuesCache[f])},renderValue:f=>{var d;return(d=c.getValue(f))!=null?d:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>kP(c.subRows,f=>f.subRows),getParentRow:()=>c.parentId?t.getRow(c.parentId,!0):void 0,getParentRows:()=>{let f=[],d=c;for(;;){const m=d.getParentRow();if(!m)break;f.push(m),d=m}return f.reverse()},getAllCells:Pe(()=>[t.getAllLeafColumns()],f=>f.map(d=>RP(t,c,d,d.id)),Fe(t.options,"debugRows")),_getAllCellsByColumnId:Pe(()=>[c.getAllCells()],f=>f.reduce((d,m)=>(d[m.column.id]=m,d),{}),Fe(t.options,"debugRows"))};for(let f=0;f<t._features.length;f++){const d=t._features[f];d==null||d.createRow==null||d.createRow(c,t)}return c},MP={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},wk=(t,e,n)=>{var r,s;const a=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((s=t.getValue(e))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(a))};wk.autoRemove=t=>Mr(t);const _k=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};_k.autoRemove=t=>Mr(t);const Ck=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===n?.toLowerCase()};Ck.autoRemove=t=>Mr(t);const Ek=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};Ek.autoRemove=t=>Mr(t);const kk=(t,e,n)=>!n.some(r=>{var s;return!((s=t.getValue(e))!=null&&s.includes(r))});kk.autoRemove=t=>Mr(t)||!(t!=null&&t.length);const Rk=(t,e,n)=>n.some(r=>{var s;return(s=t.getValue(e))==null?void 0:s.includes(r)});Rk.autoRemove=t=>Mr(t)||!(t!=null&&t.length);const Ak=(t,e,n)=>t.getValue(e)===n;Ak.autoRemove=t=>Mr(t);const Tk=(t,e,n)=>t.getValue(e)==n;Tk.autoRemove=t=>Mr(t);const N0=(t,e,n)=>{let[r,s]=n;const a=t.getValue(e);return a>=r&&a<=s};N0.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,s=typeof n!="number"?parseFloat(n):n,a=e===null||Number.isNaN(r)?-1/0:r,l=n===null||Number.isNaN(s)?1/0:s;if(a>l){const c=a;a=l,l=c}return[a,l]};N0.autoRemove=t=>Mr(t)||Mr(t[0])&&Mr(t[1]);const ms={includesString:wk,includesStringSensitive:_k,equalsString:Ck,arrIncludes:Ek,arrIncludesAll:kk,arrIncludesSome:Rk,equals:Ak,weakEquals:Tk,inNumberRange:N0};function Mr(t){return t==null||t===""}const NP={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:tr("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);return typeof r=="string"?ms.includesString:typeof r=="number"?ms.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?ms.equals:Array.isArray(r)?ms.arrIncludes:ms.weakEquals},t.getFilterFn=()=>{var n,r;return Kd(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:ms[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,s;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const s=t.getFilterFn(),a=r?.find(m=>m.id===t.id),l=Ws(n,a?a.value:void 0);if(i1(s,l,t)){var c;return(c=r?.filter(m=>m.id!==t.id))!=null?c:[]}const f={id:t.id,value:l};if(a){var d;return(d=r?.map(m=>m.id===t.id?f:m))!=null?d:[]}return r!=null&&r.length?[...r,f]:[f]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=s=>{var a;return(a=Ws(e,s))==null?void 0:a.filter(l=>{const c=n.find(f=>f.id===l.id);if(c){const f=c.getFilterFn();if(i1(f,l.value,c))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function i1(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const IP=(t,e,n)=>n.reduce((r,s)=>{const a=s.getValue(t);return r+(typeof a=="number"?a:0)},0),DP=(t,e,n)=>{let r;return n.forEach(s=>{const a=s.getValue(t);a!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}),r},zP=(t,e,n)=>{let r;return n.forEach(s=>{const a=s.getValue(t);a!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}),r},jP=(t,e,n)=>{let r,s;return n.forEach(a=>{const l=a.getValue(t);l!=null&&(r===void 0?l>=l&&(r=s=l):(r>l&&(r=l),s<l&&(s=l)))}),[r,s]},LP=(t,e)=>{let n=0,r=0;if(e.forEach(s=>{let a=s.getValue(t);a!=null&&(a=+a)>=a&&(++n,r+=a)}),n)return r/n},PP=(t,e)=>{if(!e.length)return;const n=e.map(a=>a.getValue(t));if(!EP(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),s=n.sort((a,l)=>a-l);return n.length%2!==0?s[r]:(s[r-1]+s[r])/2},FP=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),$P=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,BP=(t,e)=>e.length,rg={sum:IP,min:DP,max:zP,extent:jP,mean:LP,median:PP,unique:FP,uniqueCount:$P,count:BP},UP={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:tr("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);if(typeof r=="number")return rg.sum;if(Object.prototype.toString.call(r)==="[object Date]")return rg.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return Kd(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:rg[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var s;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((s=n.subRows)!=null&&s.length)}}};function qP(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(a=>!e.includes(a.id));return n==="remove"?r:[...e.map(a=>t.find(l=>l.id===a)).filter(Boolean),...r]}const HP={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:tr("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=Pe(n=>[Wl(e,n)],n=>n.findIndex(r=>r.id===t.id),Fe(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=Wl(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const s=Wl(e,n);return((r=s[s.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=Pe(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>s=>{let a=[];if(!(e!=null&&e.length))a=s;else{const l=[...e],c=[...s];for(;c.length&&l.length;){const f=l.shift(),d=c.findIndex(m=>m.id===f);d>-1&&a.push(c.splice(d,1)[0])}a=[...a,...c]}return qP(a,n,r)},Fe(t.options,"debugTable"))}},sg=()=>({left:[],right:[]}),VP={getInitialState:t=>({columnPinning:sg(),...t}),getDefaultOptions:t=>({onColumnPinningChange:tr("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(s=>s.id).filter(Boolean);e.setColumnPinning(s=>{var a,l;if(n==="right"){var c,f;return{left:((c=s?.left)!=null?c:[]).filter(p=>!(r!=null&&r.includes(p))),right:[...((f=s?.right)!=null?f:[]).filter(p=>!(r!=null&&r.includes(p))),...r]}}if(n==="left"){var d,m;return{left:[...((d=s?.left)!=null?d:[]).filter(p=>!(r!=null&&r.includes(p))),...r],right:((m=s?.right)!=null?m:[]).filter(p=>!(r!=null&&r.includes(p)))}}return{left:((a=s?.left)!=null?a:[]).filter(p=>!(r!=null&&r.includes(p))),right:((l=s?.right)!=null?l:[]).filter(p=>!(r!=null&&r.includes(p)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var s,a,l;return((s=r.columnDef.enablePinning)!=null?s:!0)&&((a=(l=e.options.enableColumnPinning)!=null?l:e.options.enablePinning)!=null?a:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(c=>c.id),{left:r,right:s}=e.getState().columnPinning,a=n.some(c=>r?.includes(c)),l=n.some(c=>s?.includes(c));return a?"left":l?"right":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();return s?(n=(r=e.getState().columnPinning)==null||(r=r[s])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=Pe(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,s)=>{const a=[...r??[],...s??[]];return n.filter(l=>!a.includes(l.column.id))},Fe(e.options,"debugRows")),t.getLeftVisibleCells=Pe(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(a=>n.find(l=>l.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),Fe(e.options,"debugRows")),t.getRightVisibleCells=Pe(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(a=>n.find(l=>l.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),Fe(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?sg():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:sg())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var s,a;return!!((s=r.left)!=null&&s.length||(a=r.right)!=null&&a.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=Pe(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),Fe(t.options,"debugColumns")),t.getRightLeafColumns=Pe(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),Fe(t.options,"debugColumns")),t.getCenterLeafColumns=Pe(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const s=[...n??[],...r??[]];return e.filter(a=>!s.includes(a.id))},Fe(t.options,"debugColumns"))}};function KP(t){return t||(typeof document<"u"?document:null)}const mf={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},ig=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),GP={getDefaultColumnDef:()=>mf,getInitialState:t=>({columnSizing:{},columnSizingInfo:ig(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:tr("columnSizing",t),onColumnSizingInfoChange:tr("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,s;const a=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:mf.minSize,(r=a??t.columnDef.size)!=null?r:mf.size),(s=t.columnDef.maxSize)!=null?s:mf.maxSize)},t.getStart=Pe(n=>[n,Wl(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((s,a)=>s+a.getSize(),0),Fe(e.options,"debugColumns")),t.getAfter=Pe(n=>[n,Wl(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((s,a)=>s+a.getSize(),0),Fe(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...s}=n;return s})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=s=>{if(s.subHeaders.length)s.subHeaders.forEach(r);else{var a;n+=(a=s.column.getSize())!=null?a:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),s=r?.getCanResize();return a=>{if(!r||!s||(a.persist==null||a.persist(),ag(a)&&a.touches&&a.touches.length>1))return;const l=t.getSize(),c=t?t.getLeafHeaders().map(C=>[C.column.id,C.column.getSize()]):[[r.id,r.getSize()]],f=ag(a)?Math.round(a.touches[0].clientX):a.clientX,d={},m=(C,k)=>{typeof k=="number"&&(e.setColumnSizingInfo(R=>{var I,j;const A=e.options.columnResizeDirection==="rtl"?-1:1,z=(k-((I=R?.startOffset)!=null?I:0))*A,L=Math.max(z/((j=R?.startSize)!=null?j:0),-.999999);return R.columnSizingStart.forEach(P=>{let[M,$]=P;d[M]=Math.round(Math.max($+$*L,0)*100)/100}),{...R,deltaOffset:z,deltaPercentage:L}}),(e.options.columnResizeMode==="onChange"||C==="end")&&e.setColumnSizing(R=>({...R,...d})))},p=C=>m("move",C),g=C=>{m("end",C),e.setColumnSizingInfo(k=>({...k,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},y=KP(n),x={moveHandler:C=>p(C.clientX),upHandler:C=>{y?.removeEventListener("mousemove",x.moveHandler),y?.removeEventListener("mouseup",x.upHandler),g(C.clientX)}},S={moveHandler:C=>(C.cancelable&&(C.preventDefault(),C.stopPropagation()),p(C.touches[0].clientX),!1),upHandler:C=>{var k;y?.removeEventListener("touchmove",S.moveHandler),y?.removeEventListener("touchend",S.upHandler),C.cancelable&&(C.preventDefault(),C.stopPropagation()),g((k=C.touches[0])==null?void 0:k.clientX)}},E=QP()?{passive:!1}:!1;ag(a)?(y?.addEventListener("touchmove",S.moveHandler,E),y?.addEventListener("touchend",S.upHandler,E)):(y?.addEventListener("mousemove",x.moveHandler,E),y?.addEventListener("mouseup",x.upHandler,E)),e.setColumnSizingInfo(C=>({...C,startOffset:f,startSize:l,deltaOffset:0,deltaPercentage:0,columnSizingStart:c,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?ig():(n=t.initialState.columnSizingInfo)!=null?n:ig())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0}}};let gf=null;function QP(){if(typeof gf=="boolean")return gf;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return gf=t,gf}function ag(t){return t.type==="touchstart"}const ZP={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:tr("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const s=t.columns;return(n=s.length?s.some(a=>a.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=Pe(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),Fe(e.options,"debugRows")),t.getVisibleCells=Pe(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,s)=>[...n,...r,...s],Fe(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>Pe(()=>[r(),r().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),Fe(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((s,a)=>({...s,[a.id]:n||!(a.getCanHide!=null&&a.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function Wl(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const YP={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},JP={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:tr("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,s,a;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&((a=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?a:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>ms.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return Kd(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:ms[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},XP={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:tr("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var s,a;t.setExpanded(r?{}:(s=(a=t.initialState)==null?void 0:a.expanded)!=null?s:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(a=>{const l=a.split(".");r=Math.max(r,l.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var s;const a=r===!0?!0:!!(r!=null&&r[t.id]);let l={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(c=>{l[c]=!0}):l=r,n=(s=n)!=null?s:!a,!a&&n)return{...l,[t.id]:!0};if(a&&!n){const{[t.id]:c,...f}=l;return f}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r?.[t.id])},t.getCanExpand=()=>{var n,r,s;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((s=t.subRows)!=null&&s.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},hy=0,py=10,og=()=>({pageIndex:hy,pageSize:py}),WP={getInitialState:t=>({...t,pagination:{...og(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:tr("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const s=a=>Ws(r,a);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(s)},t.resetPagination=r=>{var s;t.setPagination(r?og():(s=t.initialState.pagination)!=null?s:og())},t.setPageIndex=r=>{t.setPagination(s=>{let a=Ws(r,s.pageIndex);const l=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return a=Math.max(0,Math.min(a,l)),{...s,pageIndex:a}})},t.resetPageIndex=r=>{var s,a;t.setPageIndex(r?hy:(s=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?s:hy)},t.resetPageSize=r=>{var s,a;t.setPageSize(r?py:(s=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?s:py)},t.setPageSize=r=>{t.setPagination(s=>{const a=Math.max(1,Ws(r,s.pageSize)),l=s.pageSize*s.pageIndex,c=Math.floor(l/a);return{...s,pageIndex:c,pageSize:a}})},t.setPageCount=r=>t.setPagination(s=>{var a;let l=Ws(r,(a=t.options.pageCount)!=null?a:-1);return typeof l=="number"&&(l=Math.max(-1,l)),{...s,pageCount:l}}),t.getPageOptions=Pe(()=>[t.getPageCount()],r=>{let s=[];return r&&r>0&&(s=[...new Array(r)].fill(null).map((a,l)=>l)),s},Fe(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,s=t.getPageCount();return s===-1?!0:s===0?!1:r<s-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},lg=()=>({top:[],bottom:[]}),e6={getInitialState:t=>({rowPinning:lg(),...t}),getDefaultOptions:t=>({onRowPinningChange:tr("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,s)=>{const a=r?t.getLeafRows().map(f=>{let{id:d}=f;return d}):[],l=s?t.getParentRows().map(f=>{let{id:d}=f;return d}):[],c=new Set([...l,t.id,...a]);e.setRowPinning(f=>{var d,m;if(n==="bottom"){var p,g;return{top:((p=f?.top)!=null?p:[]).filter(S=>!(c!=null&&c.has(S))),bottom:[...((g=f?.bottom)!=null?g:[]).filter(S=>!(c!=null&&c.has(S))),...Array.from(c)]}}if(n==="top"){var y,x;return{top:[...((y=f?.top)!=null?y:[]).filter(S=>!(c!=null&&c.has(S))),...Array.from(c)],bottom:((x=f?.bottom)!=null?x:[]).filter(S=>!(c!=null&&c.has(S)))}}return{top:((d=f?.top)!=null?d:[]).filter(S=>!(c!=null&&c.has(S))),bottom:((m=f?.bottom)!=null?m:[]).filter(S=>!(c!=null&&c.has(S)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:s}=e.options;return typeof r=="function"?r(t):(n=r??s)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:s}=e.getState().rowPinning,a=n.some(c=>r?.includes(c)),l=n.some(c=>s?.includes(c));return a?"top":l?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();if(!s)return-1;const a=(n=s==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(l=>{let{id:c}=l;return c});return(r=a?.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?lg():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:lg())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var s,a;return!!((s=r.top)!=null&&s.length||(a=r.bottom)!=null&&a.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var s;return((s=t.options.keepPinnedRows)==null||s?(n??[]).map(l=>{const c=t.getRow(l,!0);return c.getIsAllParentsExpanded()?c:null}):(n??[]).map(l=>e.find(c=>c.id===l))).filter(Boolean).map(l=>({...l,position:r}))},t.getTopRows=Pe(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),Fe(t.options,"debugRows")),t.getBottomRows=Pe(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),Fe(t.options,"debugRows")),t.getCenterRows=Pe(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const s=new Set([...n??[],...r??[]]);return e.filter(a=>!s.has(a.id))},Fe(t.options,"debugRows"))}},t6={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:tr("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},s=t.getPreGroupedRowModel().flatRows;return e?s.forEach(a=>{a.getCanSelect()&&(r[a.id]=!0)}):s.forEach(a=>{delete r[a.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),s={...n};return t.getRowModel().rows.forEach(a=>{my(s,a.id,r,!0,t)}),s}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=Pe(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?ug(t,n):{rows:[],flatRows:[],rowsById:{}},Fe(t.options,"debugTable")),t.getFilteredSelectedRowModel=Pe(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?ug(t,n):{rows:[],flatRows:[],rowsById:{}},Fe(t.options,"debugTable")),t.getGroupedSelectedRowModel=Pe(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?ug(t,n):{rows:[],flatRows:[],rowsById:{}},Fe(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(s=>s.getCanSelect()&&!n[s.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(s=>!n[s.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const s=t.getIsSelected();e.setRowSelection(a=>{var l;if(n=typeof n<"u"?n:!s,t.getCanSelect()&&s===n)return a;const c={...a};return my(c,t.id,n,(l=r?.selectChildren)!=null?l:!0,e),c})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return I0(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return gy(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return gy(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var s;n&&t.toggleSelected((s=r.target)==null?void 0:s.checked)}}}},my=(t,e,n,r,s)=>{var a;const l=s.getRow(e,!0);n?(l.getCanMultiSelect()||Object.keys(t).forEach(c=>delete t[c]),l.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(a=l.subRows)!=null&&a.length&&l.getCanSelectSubRows()&&l.subRows.forEach(c=>my(t,c.id,n,r,s))};function ug(t,e){const n=t.getState().rowSelection,r=[],s={},a=function(l,c){return l.map(f=>{var d;const m=I0(f,n);if(m&&(r.push(f),s[f.id]=f),(d=f.subRows)!=null&&d.length&&(f={...f,subRows:a(f.subRows)}),m)return f}).filter(Boolean)};return{rows:a(e.rows),flatRows:r,rowsById:s}}function I0(t,e){var n;return(n=e[t.id])!=null?n:!1}function gy(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let s=!0,a=!1;return t.subRows.forEach(l=>{if(!(a&&!s)&&(l.getCanSelect()&&(I0(l,e)?a=!0:s=!1),l.subRows&&l.subRows.length)){const c=gy(l,e);c==="all"?a=!0:(c==="some"&&(a=!0),s=!1)}}),s?"all":a?"some":!1}const yy=/([0-9]+)/gm,n6=(t,e,n)=>Ok(si(t.getValue(n)).toLowerCase(),si(e.getValue(n)).toLowerCase()),r6=(t,e,n)=>Ok(si(t.getValue(n)),si(e.getValue(n))),s6=(t,e,n)=>D0(si(t.getValue(n)).toLowerCase(),si(e.getValue(n)).toLowerCase()),i6=(t,e,n)=>D0(si(t.getValue(n)),si(e.getValue(n))),a6=(t,e,n)=>{const r=t.getValue(n),s=e.getValue(n);return r>s?1:r<s?-1:0},o6=(t,e,n)=>D0(t.getValue(n),e.getValue(n));function D0(t,e){return t===e?0:t>e?1:-1}function si(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function Ok(t,e){const n=t.split(yy).filter(Boolean),r=e.split(yy).filter(Boolean);for(;n.length&&r.length;){const s=n.shift(),a=r.shift(),l=parseInt(s,10),c=parseInt(a,10),f=[l,c].sort();if(isNaN(f[0])){if(s>a)return 1;if(a>s)return-1;continue}if(isNaN(f[1]))return isNaN(l)?-1:1;if(l>c)return 1;if(c>l)return-1}return n.length-r.length}const Cl={alphanumeric:n6,alphanumericCaseSensitive:r6,text:s6,textCaseSensitive:i6,datetime:a6,basic:o6},l6={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:tr("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const s of n){const a=s?.getValue(t.id);if(Object.prototype.toString.call(a)==="[object Date]")return Cl.datetime;if(typeof a=="string"&&(r=!0,a.split(yy).length>1))return Cl.alphanumeric}return r?Cl.text:Cl.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return Kd(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:Cl[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const s=t.getNextSortingOrder(),a=typeof n<"u"&&n!==null;e.setSorting(l=>{const c=l?.find(y=>y.id===t.id),f=l?.findIndex(y=>y.id===t.id);let d=[],m,p=a?n:s==="desc";if(l!=null&&l.length&&t.getCanMultiSort()&&r?c?m="toggle":m="add":l!=null&&l.length&&f!==l.length-1?m="replace":c?m="toggle":m="replace",m==="toggle"&&(a||s||(m="remove")),m==="add"){var g;d=[...l,{id:t.id,desc:p}],d.splice(0,d.length-((g=e.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else m==="toggle"?d=l.map(y=>y.id===t.id?{...y,desc:p}:y):m==="remove"?d=l.filter(y=>y.id!==t.id):d=[{id:t.id,desc:p}];return d})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,s;const a=t.getFirstSortDir(),l=t.getIsSorted();return l?l!==a&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(s=e.options.enableMultiRemove)!=null)||s)?!1:l==="desc"?"asc":"desc":a},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(s=>s.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},u6=[TP,ZP,HP,VP,MP,NP,YP,JP,l6,UP,XP,WP,e6,t6,GP];function c6(t){var e,n;const r=[...u6,...(e=t._features)!=null?e:[]];let s={_features:r};const a=s._features.reduce((g,y)=>Object.assign(g,y.getDefaultOptions==null?void 0:y.getDefaultOptions(s)),{}),l=g=>s.options.mergeOptions?s.options.mergeOptions(a,g):{...a,...g};let f={...{},...(n=t.initialState)!=null?n:{}};s._features.forEach(g=>{var y;f=(y=g.getInitialState==null?void 0:g.getInitialState(f))!=null?y:f});const d=[];let m=!1;const p={_features:r,options:{...a,...t},initialState:f,_queue:g=>{d.push(g),m||(m=!0,Promise.resolve().then(()=>{for(;d.length;)d.shift()();m=!1}).catch(y=>setTimeout(()=>{throw y})))},reset:()=>{s.setState(s.initialState)},setOptions:g=>{const y=Ws(g,s.options);s.options=l(y)},getState:()=>s.options.state,setState:g=>{s.options.onStateChange==null||s.options.onStateChange(g)},_getRowId:(g,y,x)=>{var S;return(S=s.options.getRowId==null?void 0:s.options.getRowId(g,y,x))!=null?S:`${x?[x.id,y].join("."):y}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(g,y)=>{let x=(y?s.getPrePaginationRowModel():s.getRowModel()).rowsById[g];if(!x&&(x=s.getCoreRowModel().rowsById[g],!x))throw new Error;return x},_getDefaultColumnDef:Pe(()=>[s.options.defaultColumn],g=>{var y;return g=(y=g)!=null?y:{},{header:x=>{const S=x.header.column.columnDef;return S.accessorKey?S.accessorKey:S.accessorFn?S.id:null},cell:x=>{var S,E;return(S=(E=x.renderValue())==null||E.toString==null?void 0:E.toString())!=null?S:null},...s._features.reduce((x,S)=>Object.assign(x,S.getDefaultColumnDef==null?void 0:S.getDefaultColumnDef()),{}),...g}},Fe(t,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:Pe(()=>[s._getColumnDefs()],g=>{const y=function(x,S,E){return E===void 0&&(E=0),x.map(C=>{const k=AP(s,C,E,S),R=C;return k.columns=R.columns?y(R.columns,k,E+1):[],k})};return y(g)},Fe(t,"debugColumns")),getAllFlatColumns:Pe(()=>[s.getAllColumns()],g=>g.flatMap(y=>y.getFlatColumns()),Fe(t,"debugColumns")),_getAllFlatColumnsById:Pe(()=>[s.getAllFlatColumns()],g=>g.reduce((y,x)=>(y[x.id]=x,y),{}),Fe(t,"debugColumns")),getAllLeafColumns:Pe(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(g,y)=>{let x=g.flatMap(S=>S.getLeafColumns());return y(x)},Fe(t,"debugColumns")),getColumn:g=>s._getAllFlatColumnsById()[g]};Object.assign(s,p);for(let g=0;g<s._features.length;g++){const y=s._features[g];y==null||y.createTable==null||y.createTable(s)}return s}function Mk(){return t=>Pe(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(s,a,l){a===void 0&&(a=0);const c=[];for(let d=0;d<s.length;d++){const m=OP(t,t._getRowId(s[d],d,l),s[d],d,a,void 0,l?.id);if(n.flatRows.push(m),n.rowsById[m.id]=m,c.push(m),t.options.getSubRows){var f;m.originalSubRows=t.options.getSubRows(s[d],d),(f=m.originalSubRows)!=null&&f.length&&(m.subRows=r(m.originalSubRows,a+1,m))}}return c};return n.rows=r(e),n},Fe(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function Nk(){return t=>Pe(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const r=t.getState().sorting,s=[],a=r.filter(f=>{var d;return(d=t.getColumn(f.id))==null?void 0:d.getCanSort()}),l={};a.forEach(f=>{const d=t.getColumn(f.id);d&&(l[f.id]={sortUndefined:d.columnDef.sortUndefined,invertSorting:d.columnDef.invertSorting,sortingFn:d.getSortingFn()})});const c=f=>{const d=f.map(m=>({...m}));return d.sort((m,p)=>{for(let y=0;y<a.length;y+=1){var g;const x=a[y],S=l[x.id],E=S.sortUndefined,C=(g=x?.desc)!=null?g:!1;let k=0;if(E){const R=m.getValue(x.id),I=p.getValue(x.id),j=R===void 0,A=I===void 0;if(j||A){if(E==="first")return j?-1:1;if(E==="last")return j?1:-1;k=j&&A?0:j?E:-E}}if(k===0&&(k=S.sortingFn(m,p,x.id)),k!==0)return C&&(k*=-1),S.invertSorting&&(k*=-1),k}return m.index-p.index}),d.forEach(m=>{var p;s.push(m),(p=m.subRows)!=null&&p.length&&(m.subRows=c(m.subRows))}),d};return{rows:c(n.rows),flatRows:s,rowsById:n.rowsById}},Fe(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}function gd(t,e){return t?f6(t)?q.createElement(t,e):t:null}function f6(t){return d6(t)||typeof t=="function"||h6(t)}function d6(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function h6(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function Ik(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=q.useState(()=>({current:c6(e)})),[r,s]=q.useState(()=>n.current.initialState);return n.current.setOptions(a=>({...a,...t,state:{...r,...t.state},onStateChange:l=>{s(l),t.onStateChange==null||t.onStateChange(l)}})),n.current}function p6(t){const e=tn.c(29),{getValue:n,row:r,column:s,table:a}=t,{index:l}=r,{id:c}=s;let f;e[0]!==n?(f=n(),e[0]=n,e[1]=f):f=e[1];const d=f,[m,p]=q.useState(d),[g,y]=q.useState(!1);let x,S;e[2]!==d?(x=()=>{p(d)},S=[d],e[2]=d,e[3]=x,e[4]=S):(x=e[3],S=e[4]),q.useEffect(x,S);let E;e[5]!==c||e[6]!==l||e[7]!==d||e[8]!==a||e[9]!==m?(E=()=>{y(!1),m!==d&&a.options.meta?.updateData(l,c,m)},e[5]=c,e[6]=l,e[7]=d,e[8]=a,e[9]=m,e[10]=E):E=e[10];const C=E;let k;e[11]!==d?(k=z=>{z.key==="Enter"&&z.target.blur(),z.key==="Escape"&&(p(d),y(!1))},e[11]=d,e[12]=k):k=e[12];const R=k;if(d===null&&!g){let z;return e[13]===Symbol.for("react.memo_cache_sentinel")?(z=w.jsx("span",{className:"text-neutral-400 dark:text-neutral-600 italic cursor-pointer",onClick:()=>y(!0),children:"NULL"}),e[13]=z):z=e[13],z}if(typeof d=="boolean"&&!g){let z;e[14]===Symbol.for("react.memo_cache_sentinel")?(z=()=>y(!0),e[14]=z):z=e[14];const L=d?"true":"false";let P;return e[15]!==L?(P=w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400 cursor-pointer",onClick:z,children:L}),e[15]=L,e[16]=P):P=e[16],P}if(typeof d=="object"&&d!==null){let z;e[17]!==d?(z=JSON.stringify(d),e[17]=d,e[18]=z):z=e[18];let L;return e[19]!==z?(L=w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:z}),e[19]=z,e[20]=L):L=e[20],L}if(g){const z=m===null?"":String(m);let L;e[21]===Symbol.for("react.memo_cache_sentinel")?(L=M=>p(M.target.value),e[21]=L):L=e[21];let P;return e[22]!==R||e[23]!==C||e[24]!==z?(P=w.jsx("input",{value:z,onChange:L,onBlur:C,onKeyDown:R,autoFocus:!0,className:"w-full bg-white dark:bg-neutral-800 border border-blue-500 dark:border-blue-400 rounded px-1 py-0.5 text-[12px] font-mono text-neutral-700 dark:text-neutral-200 outline-none"}),e[22]=R,e[23]=C,e[24]=z,e[25]=P):P=e[25],P}let I;e[26]===Symbol.for("react.memo_cache_sentinel")?(I=()=>y(!0),e[26]=I):I=e[26];const j=String(m);let A;return e[27]!==j?(A=w.jsx("span",{className:"text-neutral-600 dark:text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-200",onClick:I,children:j}),e[27]=j,e[28]=A):A=e[28],A}function m6(t){const e=tn.c(8),{getValue:n}=t;let r,s;if(e[0]!==n){r=Symbol.for("react.early_return_sentinel");e:{if(s=n(),s===null){let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=w.jsx("span",{className:"text-neutral-400 dark:text-neutral-600 italic",children:"NULL"}),e[3]=c):c=e[3],r=c;break e}if(typeof s=="boolean"){const c=s?"true":"false";let f;e[4]!==c?(f=w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:c}),e[4]=c,e[5]=f):f=e[5],r=f;break e}if(typeof s=="object"){r=w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:JSON.stringify(s)});break e}}e[0]=n,e[1]=r,e[2]=s}else r=e[1],s=e[2];if(r!==Symbol.for("react.early_return_sentinel"))return r;const a=String(s);let l;return e[6]!==a?(l=w.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:a}),e[6]=a,e[7]=l):l=e[7],l}function g6({response:t,duration:e,isLoading:n,tableName:r,onUpdateCell:s,onDeleteRow:a}){const[l,c]=q.useState([]),[f,d]=q.useState([]),[m,p]=q.useState(null),g=!!r&&!!s,y=!!r&&!!a;q.useEffect(()=>{d(t?.rows??[])},[t?.rows]);const x=q.useMemo(()=>{if(!t?.columns)return[];const E=t.columns.map(C=>({accessorKey:C,header:C,cell:g?p6:m6}));return y&&E.push({id:"actions",header:"",size:50,cell:({row:C})=>{const k=m===C.index;return w.jsx("div",{className:"flex items-center gap-1",children:k?w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>{a?.(C.original),p(null)},className:"p-1 text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300",title:"Confirm delete",children:w.jsx(du,{size:14})}),w.jsx("button",{onClick:()=>p(null),className:"p-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 text-xs",title:"Cancel",children:""})]}):w.jsx("button",{onClick:()=>p(C.index),className:"p-1 text-neutral-400 hover:text-red-500 dark:hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete row",children:w.jsx(du,{size:14})})})}}),E},[t?.columns,g,y,m,a]),S=Ik({data:f,columns:x,state:{sorting:l},onSortingChange:c,getCoreRowModel:Mk(),getSortedRowModel:Nk(),meta:{updateData:(E,C,k)=>{const R=f[E];d(I=>I.map((j,A)=>A===E?{...j,[C]:k}:j)),s?.(R,C,k)}}});return n?w.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:w.jsxs("div",{className:"flex flex-col items-center gap-3 text-neutral-400 dark:text-neutral-500",children:[w.jsx("div",{className:"w-6 h-6 border-2 border-neutral-200 border-t-neutral-400 dark:border-neutral-700 dark:border-t-neutral-500 rounded-full animate-spin"}),w.jsx("span",{className:"text-sm",children:"Running query..."})]})}):t?t.error?w.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:w.jsxs("div",{className:"flex items-center gap-3 text-red-500 dark:text-red-400",children:[w.jsx(HD,{size:18}),w.jsx("span",{className:"text-sm",children:t.error})]})}):t.rows_affected!==void 0&&!t.rows?w.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:w.jsxs("div",{className:"flex flex-col items-center gap-2",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-500/30",children:"OK"}),w.jsxs("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[w.jsx("span",{className:"font-medium",children:t.rows_affected})," row(s) affected"]})]}),w.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-600",children:[e.toFixed(0),"ms"]})]})}):w.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden dark:shadow-2xl",children:[w.jsx("div",{className:"flex-1 overflow-auto",children:w.jsxs("table",{className:"w-full text-[13px]",children:[w.jsx("thead",{className:"sticky top-0 z-10 bg-neutral-100 dark:bg-neutral-950",children:S.getHeaderGroups().map(E=>w.jsx("tr",{children:E.headers.map(C=>{const k=C.column.getIsSorted(),R=C.id==="actions";return w.jsx("th",{onClick:R?void 0:C.column.getToggleSortingHandler(),className:`text-left px-4 py-2 text-[11px] font-medium whitespace-nowrap transition-colors select-none group bg-neutral-100 dark:bg-neutral-950 ${R?"w-12":"cursor-pointer"} ${k?"text-neutral-900 dark:text-neutral-200":"text-neutral-500 dark:text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-400"}`,children:!R&&w.jsxs("div",{className:"flex items-center gap-1",children:[gd(C.column.columnDef.header,C.getContext()),w.jsx("span",{className:`transition-opacity ${k?"opacity-100":"opacity-0 group-hover:opacity-40"}`,children:k==="asc"?w.jsx(Gl,{size:12}):k==="desc"?w.jsx(Bi,{size:12}):w.jsx(Df,{size:12})})]})},C.id)})},E.id))}),w.jsx("tbody",{children:S.getRowModel().rows.map((E,C)=>{const k=C%2===1,R=E.getVisibleCells();return w.jsx("tr",{className:`group transition-colors ${k?"bg-neutral-200/40 dark:bg-neutral-800/30 hover:bg-neutral-200/70 dark:hover:bg-neutral-800/50":"hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30"}`,children:R.map((I,j)=>w.jsx("td",{className:`px-4 py-2 whitespace-nowrap font-mono text-[12px] ${j===0?"rounded-l-lg":""} ${j===R.length-1?"rounded-r-lg":""}`,children:gd(I.column.columnDef.cell,I.getContext())},I.id))},E.id)})})]})}),w.jsxs("div",{className:"px-3 py-2 flex items-center gap-4 text-xs border-t border-neutral-200 dark:border-white/8 shrink-0",children:[w.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-500/30",children:"OK"}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Time:"}),w.jsxs("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:[e.toFixed(0),"ms"]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Rows:"}),w.jsx("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:f.length})]}),g&&w.jsx("div",{className:"ml-auto text-neutral-400 dark:text-neutral-600 text-[10px]",children:"Click a cell to edit"})]})]}):w.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:w.jsxs("div",{className:"flex flex-col items-center text-neutral-400 dark:text-neutral-500",children:[w.jsx("svg",{className:"w-8 h-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),w.jsx("span",{className:"text-sm",children:"Run a query to see results"})]})})}class y6{#e=!0;#t;#n;#r;#s;#o;#i;#a;#p=0;#m=5;#u=!1;#c=!1;#l=null;#f=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#u=!1,this.debugLog("Emitting queued events",this.#s),this.#s.forEach(e=>this.emitEventToBus(e)),this.#s=[],this.stopConnectLoop(),this.#n().removeEventListener("tanstack-connect-success",this.#f)};#d=()=>{if(this.#p<this.#m){this.#p++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#n().removeEventListener("tanstack-connect",this.#d),this.#c=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#h=()=>{this.#u||(this.#u=!0,this.#n().addEventListener("tanstack-connect-success",this.#f),this.#d())};constructor({pluginId:e,debug:n=!1,enabled:r=!0,reconnectEveryMs:s=300}){this.#t=e,this.#e=r,this.#n=this.getGlobalTarget,this.#r=n,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#s=[],this.#o=!1,this.#c=!1,this.#i=null,this.#a=s}startConnectLoop(){this.#i!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#a}ms)`),this.#i=setInterval(this.#d,this.#a))}stopConnectLoop(){this.#u=!1,this.#i!==null&&(clearInterval(this.#i),this.#i=null,this.#s=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#r&&console.log(` [tanstack-devtools:${this.#t}-plugin]`,...e)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const e=typeof EventTarget<"u"?new EventTarget:void 0;return typeof e>"u"||typeof e.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#t}dispatchCustomEventShim(e,n){try{const r=new Event(e,{detail:n});this.#n().dispatchEvent(r)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,n){try{this.#n().dispatchEvent(new CustomEvent(e,{detail:n}))}catch{this.dispatchCustomEventShim(e,n)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,n){return{type:`${this.#t}:${e}`,payload:n,pluginId:this.#t}}emit(e,n){if(!this.#e){this.debugLog("Event bus client is disabled, not emitting event",e,n);return}if(this.#l&&(this.debugLog("Emitting event to internal event target",e,n),this.#l.dispatchEvent(new CustomEvent(`${this.#t}:${e}`,{detail:this.createEventPayload(e,n)}))),this.#c){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#s.push(this.createEventPayload(e,n)),typeof CustomEvent<"u"&&!this.#u&&(this.#h(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,n))}on(e,n,r){const s=r?.withEventTarget??!1,a=`${this.#t}:${e}`;if(s&&(this.#l||(this.#l=new EventTarget),this.#l.addEventListener(a,c=>{n(c.detail)})),!this.#e)return this.debugLog("Event bus client is disabled, not registering event",a),()=>{};const l=c=>{this.debugLog("Received event from bus",c.detail),n(c.detail)};return this.#n().addEventListener(a,l),this.debugLog("Registered event to bus",a),()=>{s&&this.#l?.removeEventListener(a,l),this.#n().removeEventListener(a,l)}}onAll(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;this.#t&&s.pluginId!==this.#t||e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}}class v6 extends y6{constructor(){super({pluginId:"tanstack-ai-devtools"})}}const Ft=new v6;async function b6(t){let e="";for await(const n of t)n.type==="content"&&n.delta&&(e+=n.delta);return e}function x6(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"].version===1&&typeof t["~standard"].jsonSchema=="object"&&typeof t["~standard"].jsonSchema.input=="function"}function Ui(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t!==null&&t["~standard"]!==null&&"version"in t["~standard"]&&t["~standard"].version===1&&"validate"in t["~standard"]&&typeof t["~standard"].validate=="function"}function eu(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],c=!e.includes(a);l.type==="object"&&l.properties?r[a]=eu(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:eu(l.items,l.items.required||[])}:c&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=eu(n.items,n.items.required||[])),n}function vy(t,e={}){if(!t)return;const{forStructuredOutput:n=!1}=e;if(x6(t)){let s=t["~standard"].jsonSchema.input({target:"draft-07"});if(typeof s=="object"&&"$schema"in s){const{$schema:a,...l}=s;s=l}return typeof s=="object"&&("properties"in s&&!s.type&&(s.type="object"),s.type==="object"&&!("properties"in s)&&(s.properties={}),s.type==="object"&&!("required"in s)&&(s.required=[]),n&&(s=eu(s,s.required||[]))),s}return n&&typeof t=="object"?eu(t,t.required||[]):t}function so(t,e){if(!Ui(t))return e;const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Error("Schema validation returned a Promise. Use validateWithStandardSchema for async validation.");if(!n.issues)return n.value;const r=n.issues.map(s=>s.message||"Validation failed").join(", ");throw new Error(`Validation failed: ${r}`)}class S6{constructor(e){this.toolCallsMap=new Map,this.tools=e}addToolCallChunk(e){const n=e.index,r=this.toolCallsMap.get(n);r?(e.toolCall.function.name&&!r.function.name&&(r.function.name=e.toolCall.function.name),e.toolCall.function.arguments&&(r.function.arguments+=e.toolCall.function.arguments)):e.toolCall.id&&e.toolCall.function.name&&this.toolCallsMap.set(n,{id:e.toolCall.id,type:"function",function:{name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||""}})}hasToolCalls(){return this.getToolCalls().length>0}getToolCalls(){return Array.from(this.toolCallsMap.values()).filter(e=>e.id&&e.function.name&&e.function.name.trim().length>0)}async*executeTools(e){const n=this.getToolCalls(),r=[];for(const s of n){const a=this.tools.find(c=>c.name===s.function.name);let l;if(a?.execute)try{let c;try{c=JSON.parse(s.function.arguments)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${s.function.arguments}`)}if(a.inputSchema&&Ui(a.inputSchema))try{c=so(a.inputSchema,c)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Input validation failed for tool ${a.name}: ${m}`)}let f=await a.execute(c);if(a.outputSchema&&Ui(a.outputSchema)&&f!==void 0&&f!==null)try{f=so(a.outputSchema,f)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Output validation failed for tool ${a.name}: ${m}`)}l=typeof f=="string"?f:JSON.stringify(f)}catch(c){l=`Error executing tool: ${c instanceof Error?c.message:"Unknown error"}`}else l=`Tool ${s.function.name} does not have an execute function`;yield{type:"tool_result",id:e.id,model:e.model,timestamp:Date.now(),toolCallId:s.id,content:l},r.push({role:"tool",content:l,toolCallId:s.id})}return r}clear(){this.toolCallsMap.clear()}}async function a1(t,e,n=new Map,r=new Map){const s=[],a=[],l=[],c=new Map;for(const f of e)c.set(f.name,f);for(const f of t){const d=c.get(f.function.name),m=f.function.name;if(!d){s.push({toolCallId:f.id,toolName:m,result:{error:`Unknown tool: ${m}`},state:"output-error"});continue}let p={};const g=f.function.arguments.trim()||"{}";try{p=JSON.parse(g)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${g}`)}if(d.inputSchema&&Ui(d.inputSchema))try{p=so(d.inputSchema,p)}catch(x){const S=x instanceof Error?x.message:"Validation failed";s.push({toolCallId:f.id,toolName:m,result:{error:`Input validation failed for tool ${d.name}: ${S}`},state:"output-error"});continue}if(!d.execute){if(d.needsApproval){const x=`approval_${f.id}`;n.has(x)?n.get(x)?r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p}):s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"}):a.push({toolCallId:f.id,toolName:f.function.name,input:p,approvalId:x})}else r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p});continue}if(d.needsApproval){const x=`approval_${f.id}`;if(n.has(x))if(n.get(x)){const E=Date.now();try{let C=await d.execute(p);const k=Date.now()-E;d.outputSchema&&Ui(d.outputSchema)&&C!==void 0&&C!==null&&(C=so(d.outputSchema,C)),s.push({toolCallId:f.id,toolName:m,result:typeof C=="string"?JSON.parse(C):C||null,duration:k})}catch(C){const k=Date.now()-E,R=C instanceof Error?C.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:R},state:"output-error",duration:k})}}else s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"});else a.push({toolCallId:f.id,toolName:m,input:p,approvalId:x});continue}const y=Date.now();try{let x=await d.execute(p);const S=Date.now()-y;d.outputSchema&&Ui(d.outputSchema)&&x!==void 0&&x!==null&&(x=so(d.outputSchema,x)),s.push({toolCallId:f.id,toolName:m,result:typeof x=="string"?JSON.parse(x):x||null,duration:S})}catch(x){const S=Date.now()-y,E=x instanceof Error?x.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:E},state:"output-error",duration:S})}}return{results:s,needsApproval:a,needsClientExecution:l}}function Dk(t){return({iterationCount:e})=>e<t}class zk{constructor(e){this.iterationCount=0,this.lastFinishReason=null,this.streamStartTime=0,this.totalChunkCount=0,this.currentMessageId=null,this.accumulatedContent="",this.doneChunk=null,this.shouldEmitStreamEnd=!0,this.earlyTermination=!1,this.toolPhase="continue",this.cyclePhase="processText",this.adapter=e.adapter,this.params=e.params,this.systemPrompts=e.params.systemPrompts||[],this.tools=e.params.tools||[],this.loopStrategy=e.params.agentLoopStrategy||Dk(5),this.toolCallManager=new S6(this.tools),this.initialMessageCount=e.params.messages.length,this.messages=e.params.messages,this.requestId=this.createId("chat"),this.streamId=this.createId("stream"),this.effectiveRequest=e.params.abortController?{signal:e.params.abortController.signal}:void 0,this.effectiveSignal=e.params.abortController?.signal}getAccumulatedContent(){return this.accumulatedContent}getMessages(){return this.messages}async*run(){this.beforeRun();try{if((yield*this.checkForPendingToolCalls())==="wait")return;do{if(this.earlyTermination||this.isAborted())return;this.beginCycle(),this.cyclePhase==="processText"?yield*this.streamModelResponse():yield*this.processToolCalls(),this.endCycle()}while(this.shouldContinue())}finally{this.afterRun()}}beforeRun(){this.streamStartTime=Date.now();const{model:e,tools:n,temperature:r,topP:s,maxTokens:a,metadata:l,modelOptions:c,conversationId:f}=this.params,d={};r!==void 0&&(d.temperature=r),s!==void 0&&(d.topP=s),a!==void 0&&(d.maxTokens=a),l!==void 0&&(d.metadata=l),Ft.emit("text:started",{requestId:this.requestId,streamId:this.streamId,model:e,provider:this.adapter.name,messageCount:this.initialMessageCount,hasTools:!!n&&n.length>0,streaming:!0,timestamp:Date.now(),clientId:f,toolNames:n?.map(m=>m.name),options:Object.keys(d).length>0?d:void 0,modelOptions:c}),Ft.emit("stream:started",{streamId:this.streamId,model:e,provider:this.adapter.name,timestamp:Date.now()})}afterRun(){if(!this.shouldEmitStreamEnd)return;const e=Date.now();Ft.emit("text:completed",{requestId:this.requestId,streamId:this.streamId,model:this.params.model,content:this.accumulatedContent,messageId:this.currentMessageId||void 0,finishReason:this.lastFinishReason||void 0,usage:this.doneChunk?.usage,timestamp:e}),Ft.emit("stream:ended",{requestId:this.requestId,streamId:this.streamId,totalChunks:this.totalChunkCount,duration:e-this.streamStartTime,timestamp:e})}beginCycle(){this.cyclePhase==="processText"&&this.beginIteration()}endCycle(){if(this.cyclePhase==="processText"){this.cyclePhase="executeToolCalls";return}this.cyclePhase="processText",this.iterationCount++}beginIteration(){this.currentMessageId=this.createId("msg"),this.accumulatedContent="",this.doneChunk=null}async*streamModelResponse(){const{temperature:e,topP:n,maxTokens:r,metadata:s,modelOptions:a}=this.params,c=this.params.tools?.map(f=>({...f,inputSchema:f.inputSchema?vy(f.inputSchema):void 0,outputSchema:f.outputSchema?vy(f.outputSchema):void 0}));for await(const f of this.adapter.chatStream({model:this.params.model,messages:this.messages,tools:c,temperature:e,topP:n,maxTokens:r,metadata:s,request:this.effectiveRequest,modelOptions:a,systemPrompts:this.systemPrompts}))if(this.isAborted()||(this.totalChunkCount++,yield f,this.handleStreamChunk(f),this.earlyTermination))break}handleStreamChunk(e){switch(e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break}}handleContentChunk(e){this.accumulatedContent=e.content,Ft.emit("stream:chunk:content",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}handleToolCallChunk(e){this.toolCallManager.addToolCallChunk(e),Ft.emit("stream:chunk:tool-call",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCall.id,toolName:e.toolCall.function.name,index:e.index,arguments:e.toolCall.function.arguments,timestamp:Date.now()})}handleToolResultChunk(e){Ft.emit("stream:chunk:tool-result",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCallId,result:e.content,timestamp:Date.now()})}handleDoneChunk(e){if(this.doneChunk?.finishReason==="tool_calls"&&e.finishReason==="stop"){this.lastFinishReason=e.finishReason,Ft.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Ft.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()});return}this.doneChunk=e,this.lastFinishReason=e.finishReason,Ft.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Ft.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()})}handleErrorChunk(e){Ft.emit("stream:chunk:error",{streamId:this.streamId,messageId:this.currentMessageId||void 0,error:e.error.message,timestamp:Date.now()}),this.earlyTermination=!0,this.shouldEmitStreamEnd=!1}handleThinkingChunk(e){Ft.emit("stream:chunk:thinking",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}async*checkForPendingToolCalls(){const e=this.getPendingToolCallsFromMessages();if(e.length===0)return"continue";const n=this.createSyntheticDoneChunk();Ft.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()});const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await a1(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const c of this.emitApprovalRequests(a.needsApproval,n))yield c;for(const c of this.emitClientToolInputs(a.needsClientExecution,n))yield c;return this.shouldEmitStreamEnd=!1,"wait"}const l=this.emitToolResults(a.results,n);for(const c of l)yield c;return"continue"}async*processToolCalls(){if(!this.shouldExecuteToolPhase()){this.setToolPhase("stop");return}const e=this.toolCallManager.getToolCalls(),n=this.doneChunk;if(!n||e.length===0){this.setToolPhase("stop");return}Ft.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()}),this.addAssistantToolCallMessage(e);const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await a1(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const c of this.emitApprovalRequests(a.needsApproval,n))yield c;for(const c of this.emitClientToolInputs(a.needsClientExecution,n))yield c;this.setToolPhase("wait");return}const l=this.emitToolResults(a.results,n);for(const c of l)yield c;this.toolCallManager.clear(),this.setToolPhase("continue")}shouldExecuteToolPhase(){return this.doneChunk?.finishReason==="tool_calls"&&this.tools.length>0&&this.toolCallManager.hasToolCalls()}addAssistantToolCallMessage(e){this.messages=[...this.messages,{role:"assistant",content:this.accumulatedContent||null,toolCalls:e}]}collectClientState(){const e=new Map,n=new Map;for(const r of this.messages)if(r.role==="assistant"&&r.parts){const s=r.parts;for(const a of s)a.type==="tool-call"&&a.state==="approval-responded"&&a.approval&&e.set(a.approval.id,a.approval.approved),a.type==="tool-call"&&a.output!==void 0&&!a.approval&&n.set(a.id,a.output)}return{approvals:e,clientToolResults:n}}emitApprovalRequests(e,n){const r=[];for(const s of e)Ft.emit("stream:approval-requested",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approvalId:s.approvalId,timestamp:Date.now()}),r.push({type:"approval-requested",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approval:{id:s.approvalId,needsApproval:!0}});return r}emitClientToolInputs(e,n){const r=[];for(const s of e)Ft.emit("stream:tool-input-available",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,timestamp:Date.now()}),r.push({type:"tool-input-available",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input});return r}emitToolResults(e,n){const r=[];for(const s of e){Ft.emit("tool:call-completed",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,result:s.result,duration:s.duration??0,timestamp:Date.now()});const a=JSON.stringify(s.result),l={type:"tool_result",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,content:a};r.push(l),this.messages=[...this.messages,{role:"tool",content:a,toolCallId:s.toolCallId}]}return r}getPendingToolCallsFromMessages(){const e=new Set(this.messages.filter(r=>r.role==="tool"&&r.toolCallId).map(r=>r.toolCallId)),n=[];for(const r of this.messages)if(r.role==="assistant"&&r.toolCalls)for(const s of r.toolCalls)e.has(s.id)||n.push(s);return n}createSyntheticDoneChunk(){return{type:"done",id:this.createId("pending"),model:this.params.model,timestamp:Date.now(),finishReason:"tool_calls"}}shouldContinue(){return this.cyclePhase==="executeToolCalls"?!0:this.loopStrategy({iterationCount:this.iterationCount,messages:this.messages,finishReason:this.lastFinishReason})&&this.toolPhase==="continue"}isAborted(){return!!this.effectiveSignal?.aborted}setToolPhase(e){this.toolPhase=e,e==="wait"&&(this.shouldEmitStreamEnd=!1)}createId(e){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}}function w6(t){const{outputSchema:e,stream:n}=t;return e?C6(t):n===!1?_6(t):jk(t)}async function*jk(t){const{adapter:e,...n}=t,r=e.model,s=new zk({adapter:e,params:{...n,model:r}});for await(const a of s.run())yield a}function _6(t){const e=jk(t);return b6(e)}async function C6(t){const{adapter:e,outputSchema:n,...r}=t,s=e.model;if(!n)throw new Error("outputSchema is required for structured output");const a=new zk({adapter:e,params:{...r,model:s}});for await(const g of a.run());const l=a.getMessages(),{tools:c,agentLoopStrategy:f,...d}=r,m=vy(n);if(!m)throw new Error("Failed to convert output schema to JSON Schema");const p=await e.structuredOutput({chatOptions:{...d,model:s,messages:l},outputSchema:m});return Ui(n)?so(n,p.data):p.data}function Mu(t){return{__toolSide:"definition",...t,server(n){return{__toolSide:"server",...t,execute:n}},client(n){return{__toolSide:"client",...t,execute:n}}}}function o1(t){return t===null?"":typeof t=="string"?t:t.filter(e=>e.type==="text").map(e=>e.content).join("")}function E6(t){const e=[];for(const n of t)"parts"in n?e.push(...Lk(n)):e.push(n);return e}function Lk(t){const e=[];if(t.role==="system")return e;const n=[],r=[],s=[];for(const c of t.parts)c.type==="text"?n.push(c):c.type==="tool-call"?r.push(c):c.type==="tool-result"&&s.push(c);const a=n.map(c=>c.content).join("")||null,l=r.length>0?r.filter(c=>c.state==="input-complete"||c.state==="approval-responded"||c.output!==void 0).map(c=>({id:c.id,type:"function",function:{name:c.name,arguments:c.arguments}})):void 0;t.role!=="assistant"||a||!l?e.push({role:t.role,content:a,...l&&l.length>0&&{toolCalls:l}}):l.length>0&&e.push({role:"assistant",content:a,toolCalls:l});for(const c of s)(c.state==="complete"||c.state==="error")&&e.push({role:"tool",content:c.content,toolCallId:c.toolCallId});return e}function k6(t,e){const n=[],r=o1(t.content);if(r&&n.push({type:"text",content:r}),t.toolCalls&&t.toolCalls.length>0)for(const s of t.toolCalls)n.push({type:"tool-call",id:s.id,name:s.function.name,arguments:s.function.arguments,state:"input-complete"});return t.role==="tool"&&t.toolCallId&&n.push({type:"tool-result",toolCallId:t.toolCallId,content:o1(t.content),state:"complete"}),{id:e||yd(),role:t.role==="tool"?"assistant":t.role,parts:n}}function R6(t,e){return"parts"in t?{...t,id:t.id||e(),createdAt:t.createdAt||new Date}:{...k6(t,e()),createdAt:new Date}}function yd(){return`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`}var Oi={},cg={},l1;function u1(){return l1||(l1=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(cg)),cg}var c1;function A6(){return c1||(c1=1,(function(t){var e=Oi&&Oi.__createBinding||(Object.create?(function(d,m,p,g){g===void 0&&(g=p);var y=Object.getOwnPropertyDescriptor(m,p);(!y||("get"in y?!m.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(d,g,y)}):(function(d,m,p,g){g===void 0&&(g=p),d[g]=m[p]})),n=Oi&&Oi.__exportStar||function(d,m){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&e(m,d,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=u1();Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(u1(),t);class s extends Error{}t.PartialJSON=s;class a extends Error{}t.MalformedJSON=a;function l(d,m=r.Allow.ALL){if(typeof d!="string")throw new TypeError(`expecting str, got ${typeof d}`);if(!d.trim())throw new Error(`${d} is empty`);return c(d.trim(),m)}t.parseJSON=l;const c=(d,m)=>{const p=d.length;let g=0;const y=j=>{throw new s(`${j} at position ${g}`)},x=j=>{throw new a(`${j} at position ${g}`)},S=()=>(I(),g>=p&&y("Unexpected end of input"),d[g]==='"'?E():d[g]==="{"?C():d[g]==="["?k():d.substring(g,g+4)==="null"||r.Allow.NULL&m&&p-g<4&&"null".startsWith(d.substring(g))?(g+=4,null):d.substring(g,g+4)==="true"||r.Allow.BOOL&m&&p-g<4&&"true".startsWith(d.substring(g))?(g+=4,!0):d.substring(g,g+5)==="false"||r.Allow.BOOL&m&&p-g<5&&"false".startsWith(d.substring(g))?(g+=5,!1):d.substring(g,g+8)==="Infinity"||r.Allow.INFINITY&m&&p-g<8&&"Infinity".startsWith(d.substring(g))?(g+=8,1/0):d.substring(g,g+9)==="-Infinity"||r.Allow._INFINITY&m&&1<p-g&&p-g<9&&"-Infinity".startsWith(d.substring(g))?(g+=9,-1/0):d.substring(g,g+3)==="NaN"||r.Allow.NAN&m&&p-g<3&&"NaN".startsWith(d.substring(g))?(g+=3,NaN):R()),E=()=>{const j=g;let A=!1;for(g++;g<p&&(d[g]!=='"'||A&&d[g-1]==="\\");)A=d[g]==="\\"?!A:!1,g++;if(d.charAt(g)=='"')try{return JSON.parse(d.substring(j,++g-Number(A)))}catch(z){x(String(z))}else if(r.Allow.STR&m)try{return JSON.parse(d.substring(j,g-Number(A))+'"')}catch{return JSON.parse(d.substring(j,d.lastIndexOf("\\"))+'"')}y("Unterminated string literal")},C=()=>{g++,I();const j={};try{for(;d[g]!=="}";){if(I(),g>=p&&r.Allow.OBJ&m)return j;const A=E();I(),g++;try{const z=S();j[A]=z}catch(z){if(r.Allow.OBJ&m)return j;throw z}I(),d[g]===","&&g++}}catch{if(r.Allow.OBJ&m)return j;y("Expected '}' at end of object")}return g++,j},k=()=>{g++;const j=[];try{for(;d[g]!=="]";)j.push(S()),I(),d[g]===","&&g++}catch{if(r.Allow.ARR&m)return j;y("Expected ']' at end of array")}return g++,j},R=()=>{if(g===0){d==="-"&&x("Not sure what '-' is");try{return JSON.parse(d)}catch(A){if(r.Allow.NUM&m)try{return JSON.parse(d.substring(0,d.lastIndexOf("e")))}catch{}x(String(A))}}const j=g;for(d[g]==="-"&&g++;d[g]&&",]}".indexOf(d[g])===-1;)g++;g==p&&!(r.Allow.NUM&m)&&y("Unterminated number literal");try{return JSON.parse(d.substring(j,g))}catch{d.substring(j,g)==="-"&&y("Not sure what '-' is");try{return JSON.parse(d.substring(j,d.lastIndexOf("e")))}catch(z){x(String(z))}}},I=()=>{for(;g<p&&` 
\r	`.includes(d[g]);)g++};return S()},f=l;t.parse=f})(Oi)),Oi}var T6=A6();class O6{parse(e){if(!(!e||e.trim()===""))try{return T6.parse(e)}catch{return}}}const M6=new O6;function N6(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.length>0?s[s.length-1]:null;return a&&a.type==="text"?s[s.length-1]={type:"text",content:n}:s.push({type:"text",content:n}),{...r,parts:s}})}function fg(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(c=>c.type==="tool-call"&&c.id===n.id),l={type:"tool-call",id:n.id,name:n.name,arguments:n.arguments,state:n.state};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}function f1(t,e,n,r,s,a){return t.map(l=>{if(l.id!==e)return l;const c=[...l.parts],f=c.findIndex(m=>m.type==="tool-result"&&m.toolCallId===n),d={type:"tool-result",toolCallId:n,content:r,state:s,...a&&{error:a}};return f>=0?c[f]=d:c.push(d),{...l,parts:c}})}function I6(t,e,n,r){return t.map(s=>{if(s.id!==e)return s;const a=[...s.parts],l=a.find(c=>c.type==="tool-call"&&c.id===n);return l&&(l.state="approval-requested",l.approval={id:r,needsApproval:!0}),{...s,parts:a}})}function D6(t,e,n,r,s){return t.map(a=>{const l=[...a.parts],c=l.find(f=>f.type==="tool-call"&&f.id===e);return c&&(c.output=s?{error:s}:n,r?c.state=r:c.state="input-complete"),{...a,parts:l}})}function z6(t,e,n){return t.map(r=>{const s=[...r.parts],a=s.find(l=>l.type==="tool-call"&&l.approval?.id===e);return a&&a.approval&&(a.approval.approved=n,a.state="approval-responded"),{...r,parts:s}})}function j6(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(c=>c.type==="thinking"),l={type:"thinking",content:n};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}class L6{shouldEmit(e,n){return!0}}class z0{constructor(e={}){this.messages=[],this.currentAssistantMessageId=null,this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls=new Map,this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.recording=null,this.recordingStartTime=0,this.chunkStrategy=e.chunkStrategy||new L6,this.events=e.events||{},this.handlers=e.handlers||{},this.jsonParser=e.jsonParser||M6,this.recordingEnabled=e.recording??!1,e.initialMessages&&(this.messages=[...e.initialMessages])}setMessages(e){this.messages=[...e],this.emitMessagesChange()}addUserMessage(e){const n={id:yd(),role:"user",parts:[{type:"text",content:e}],createdAt:new Date};return this.messages=[...this.messages,n],this.emitMessagesChange(),n}startAssistantMessage(){this.resetStreamState();const e={id:yd(),role:"assistant",parts:[],createdAt:new Date};return this.currentAssistantMessageId=e.id,this.messages=[...this.messages,e],this.events.onStreamStart?.(),this.emitMessagesChange(),e.id}addToolResult(e,n,r){const s=this.messages.find(f=>f.parts.some(d=>d.type==="tool-call"&&d.id===e));if(!s){console.warn(`[StreamProcessor] Could not find message with tool call ${e}`);return}let a=D6(this.messages,e,n,r?"input-complete":void 0,r);const l=typeof n=="string"?n:JSON.stringify(n),c=r?"error":"complete";a=f1(a,s.id,e,l,c,r),this.messages=a,this.emitMessagesChange()}addToolApprovalResponse(e,n){this.messages=z6(this.messages,e,n),this.emitMessagesChange()}toModelMessages(){const e=[];for(const n of this.messages)e.push(...Lk(n));return e}getMessages(){return this.messages}areAllToolsComplete(){const e=this.messages.findLast(r=>r.role==="assistant");if(!e)return!0;const n=e.parts.filter(r=>r.type==="tool-call");return n.length===0?!0:n.every(r=>r.state==="approval-responded"||r.output!==void 0&&!r.approval)}removeMessagesAfter(e){this.messages=this.messages.slice(0,e+1),this.emitMessagesChange()}clearMessages(){this.messages=[],this.currentAssistantMessageId=null,this.emitMessagesChange()}async process(e){this.resetStreamState(),this.recordingEnabled&&this.startRecording();for await(const n of e)this.processChunk(n);return this.finalizeStream(),this.recording&&(this.recording.result=this.getResult()),this.getResult()}processChunk(e){switch(this.recording&&this.recording.chunks.push({chunk:e,timestamp:Date.now(),index:this.recording.chunks.length}),e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break;case"approval-requested":this.handleApprovalRequestedChunk(e);break;case"tool-input-available":this.handleToolInputAvailableChunk(e);break}}handleContentChunk(e){this.completeAllToolCalls();const n=this.currentSegmentText;this.hasToolCallsSinceTextStart&&n.length>0&&this.isNewTextSegment(e,n)&&(n!==this.lastEmittedText&&this.emitTextUpdate(),this.currentSegmentText="",this.lastEmittedText="",this.hasToolCallsSinceTextStart=!1);const s=this.currentSegmentText;let a=s;e.delta!==""?a=s+e.delta:e.content!==""&&(e.content.startsWith(s)?a=e.content:s.startsWith(e.content)?a=s:a=s+e.content);const l=a.slice(s.length);this.currentSegmentText=a,this.totalTextContent+=l;const c=e.delta??e.content??"";this.chunkStrategy.shouldEmit(c,this.currentSegmentText)&&this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate()}handleToolCallChunk(e){this.hasToolCallsSinceTextStart=!0;const n=e.toolCall.id,r=this.toolCalls.get(n);if(r){const s=r.state==="awaiting-input";r.arguments+=e.toolCall.function.arguments||"",s&&e.toolCall.function.arguments&&(r.state="input-streaming"),r.parsedArguments=this.jsonParser.parse(r.arguments);const a=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStateChange?.(a,r.id,r.name,r.state,r.arguments,r.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(a,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=fg(this.messages,this.currentAssistantMessageId,{id:r.id,name:r.name,arguments:r.arguments,state:r.state}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,r.id,r.state,r.arguments))}else{const s=e.toolCall.function.arguments?"input-streaming":"awaiting-input",a={id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s,parsedArguments:void 0,index:e.index};e.toolCall.function.arguments&&(a.parsedArguments=this.jsonParser.parse(e.toolCall.function.arguments)),this.toolCalls.set(n,a),this.toolCallOrder.push(n);const l=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStart?.(l,e.toolCall.id,e.toolCall.function.name),this.handlers.onToolCallStateChange?.(l,e.toolCall.id,e.toolCall.function.name,s,e.toolCall.function.arguments||"",a.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(l,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=fg(this.messages,this.currentAssistantMessageId,{id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,e.toolCall.id,s,e.toolCall.function.arguments||""))}}handleToolResultChunk(e){const n="complete";this.handlers.onToolResultStateChange?.(e.toolCallId,e.content,n),this.currentAssistantMessageId&&(this.messages=f1(this.messages,this.currentAssistantMessageId,e.toolCallId,e.content,n),this.emitMessagesChange())}handleDoneChunk(e){this.finishReason=e.finishReason,this.isDone=!0,this.completeAllToolCalls()}handleErrorChunk(e){this.handlers.onError?.(e.error),this.events.onError?.(new Error(e.error.message))}handleThinkingChunk(e){const n=this.thinkingContent;let r=n;e.delta!==""?r=n+e.delta:e.content!==""&&(e.content.startsWith(n)?r=e.content:n.startsWith(e.content)?r=n:r=n+e.content),this.thinkingContent=r,this.handlers.onThinkingUpdate?.(this.thinkingContent),this.currentAssistantMessageId&&(this.messages=j6(this.messages,this.currentAssistantMessageId,this.thinkingContent),this.emitMessagesChange(),this.events.onThinkingUpdate?.(this.currentAssistantMessageId,this.thinkingContent))}handleApprovalRequestedChunk(e){this.handlers.onApprovalRequested?.(e.toolCallId,e.toolName,e.input,e.approval.id),this.currentAssistantMessageId&&(this.messages=I6(this.messages,this.currentAssistantMessageId,e.toolCallId,e.approval.id),this.emitMessagesChange()),this.events.onApprovalRequest?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,approvalId:e.approval.id})}handleToolInputAvailableChunk(e){this.handlers.onToolInputAvailable?.(e.toolCallId,e.toolName,e.input),this.events.onToolCall?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input})}isNewTextSegment(e,n){return e.delta!==void 0&&e.content!==void 0&&(e.content.length<n.length||!e.content.startsWith(n)&&!n.startsWith(e.content))}completeAllToolCalls(){this.toolCalls.forEach((e,n)=>{if(e.state!=="input-complete"){const r=this.toolCallOrder.indexOf(n);this.completeToolCall(r,e)}})}completeToolCall(e,n){n.state="input-complete",n.parsedArguments=this.jsonParser.parse(n.arguments),this.handlers.onToolCallStateChange?.(e,n.id,n.name,"input-complete",n.arguments,n.parsedArguments),this.handlers.onToolCallComplete?.(e,n.id,n.name,n.arguments),this.currentAssistantMessageId&&(this.messages=fg(this.messages,this.currentAssistantMessageId,{id:n.id,name:n.name,arguments:n.arguments,state:"input-complete"}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,n.id,"input-complete",n.arguments))}emitTextUpdate(){this.lastEmittedText=this.currentSegmentText,this.handlers.onTextUpdate?.(this.currentSegmentText),this.currentAssistantMessageId&&(this.messages=N6(this.messages,this.currentAssistantMessageId,this.currentSegmentText),this.emitMessagesChange(),this.events.onTextUpdate?.(this.currentAssistantMessageId,this.currentSegmentText))}emitMessagesChange(){this.events.onMessagesChange?.([...this.messages])}finalizeStream(){this.completeAllToolCalls(),this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate();const e=this.getCompletedToolCalls();if(this.handlers.onStreamEnd?.(this.totalTextContent,e.length>0?e:void 0),this.currentAssistantMessageId){const n=this.messages.find(r=>r.id===this.currentAssistantMessageId);n&&this.events.onStreamEnd?.(n)}}getCompletedToolCalls(){return Array.from(this.toolCalls.values()).filter(e=>e.state==="input-complete").map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:e.arguments}}))}getResult(){const e=this.getCompletedToolCalls();return{content:this.totalTextContent,thinking:this.thinkingContent||void 0,toolCalls:e.length>0?e:void 0,finishReason:this.finishReason}}getState(){return{content:this.totalTextContent,thinking:this.thinkingContent,toolCalls:new Map(this.toolCalls),toolCallOrder:[...this.toolCallOrder],finishReason:this.finishReason,done:this.isDone}}startRecording(){this.recordingEnabled=!0,this.recordingStartTime=Date.now(),this.recording={version:"1.0",timestamp:this.recordingStartTime,chunks:[]}}getRecording(){return this.recording}resetStreamState(){this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls.clear(),this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.chunkStrategy.reset?.()}reset(){this.resetStreamState(),this.messages=[],this.currentAssistantMessageId=null}static async replay(e,n){return new z0(n).process(P6(e))}}function P6(t){return{async*[Symbol.asyncIterator](){for(const{chunk:e}of t.chunks)yield e}}}class F6{constructor(e){this.clientId=e}clientCreated(e){this.emitEvent("client:created",{initialMessageCount:e})}loadingChanged(e){this.emitEvent("client:loading-changed",{isLoading:e})}errorChanged(e){this.emitEvent("client:error-changed",{error:e})}textUpdated(e,n,r){this.emitEvent("processor:text-updated",{streamId:e,content:r}),this.emitEvent("client:assistant-message-updated",{messageId:n,content:r})}toolCallStateChanged(e,n,r,s,a,l){this.emitEvent("processor:tool-call-state-changed",{streamId:e,toolCallId:r,toolName:s,state:a,arguments:l}),this.emitEvent("client:tool-call-updated",{messageId:n,toolCallId:r,toolName:s,state:a,arguments:l})}toolResultStateChanged(e,n,r,s,a){this.emitEvent("processor:tool-result-state-changed",{streamId:e,toolCallId:n,content:r,state:s,error:a})}thinkingUpdated(e,n,r,s){this.emitEvent("stream:chunk:thinking",{streamId:e,messageId:n,content:r,delta:s})}approvalRequested(e,n,r,s,a){this.emitEvent("client:approval-requested",{messageId:e,toolCallId:n,toolName:r,input:s,approvalId:a})}messageAppended(e){const n=e.parts.filter(r=>r.type==="text").map(r=>r.content).join(" ").substring(0,100);this.emitEvent("client:message-appended",{messageId:e.id,role:e.role,contentPreview:n})}messageSent(e,n){this.emitEvent("client:message-sent",{messageId:e,content:n})}reloaded(e){this.emitEvent("client:reloaded",{fromMessageIndex:e})}stopped(){this.emitEvent("client:stopped")}messagesCleared(){this.emitEvent("client:messages-cleared")}toolResultAdded(e,n,r,s){this.emitEvent("tool:result-added",{toolCallId:e,toolName:n,output:r,state:s})}toolApprovalResponded(e,n,r){this.emitEvent("tool:approval-responded",{approvalId:e,toolCallId:n,approved:r})}}class $6 extends F6{emitEvent(e,n){e.startsWith("client:")||e.startsWith("tool:")?Ft.emit(e,{...n,clientId:this.clientId,timestamp:Date.now()}):Ft.emit(e,{...n,timestamp:Date.now()})}}class B6{constructor(e){if(this.body={},this.isLoading=!1,this.error=void 0,this.abortController=null,this.currentStreamId=null,this.currentMessageId=null,this.postStreamActions=[],this.uniqueId=e.id||this.generateUniqueId("chat"),this.body=e.body||{},this.connection=e.connection,this.events=new $6(this.uniqueId),this.clientToolsRef={current:new Map},e.tools)for(const n of e.tools)this.clientToolsRef.current.set(n.name,n);this.callbacksRef={current:{onResponse:e.onResponse||(()=>{}),onChunk:e.onChunk||(()=>{}),onFinish:e.onFinish||(()=>{}),onError:e.onError||(()=>{}),onMessagesChange:e.onMessagesChange||(()=>{}),onLoadingChange:e.onLoadingChange||(()=>{}),onErrorChange:e.onErrorChange||(()=>{})}},this.processor=new z0({chunkStrategy:e.streamProcessor?.chunkStrategy,initialMessages:e.initialMessages,events:{onMessagesChange:n=>{this.callbacksRef.current.onMessagesChange(n)},onStreamStart:()=>{},onStreamEnd:n=>{this.callbacksRef.current.onFinish(n)},onError:n=>{this.setError(n),this.callbacksRef.current.onError(n)},onTextUpdate:(n,r)=>{this.currentStreamId&&this.events.textUpdated(this.currentStreamId,n,r)},onThinkingUpdate:(n,r)=>{this.currentStreamId&&this.events.thinkingUpdated(this.currentStreamId,n,r)},onToolCallStateChange:(n,r,s,a)=>{const d=this.processor.getMessages().find(m=>m.id===n)?.parts.find(m=>m.type==="tool-call"&&m.id===r)?.name||"unknown";this.currentStreamId&&this.events.toolCallStateChanged(this.currentStreamId,n,r,d,s,a)},onToolCall:async n=>{const r=this.clientToolsRef.current.get(n.toolName);if(r?.execute)try{const s=await r.execute(n.input);await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:s,state:"output-available"})}catch(s){await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:null,state:"output-error",errorText:s.message})}},onApprovalRequest:n=>{this.events.approvalRequested(this.currentMessageId||"",n.toolCallId,n.toolName,n.input,n.approvalId)}}}),this.events.clientCreated(this.processor.getMessages().length)}generateUniqueId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substring(7)}`}setIsLoading(e){this.isLoading=e,this.callbacksRef.current.onLoadingChange(e),this.events.loadingChanged(e)}setError(e){this.error=e,this.callbacksRef.current.onErrorChange(e),this.events.errorChanged(e?.message||null)}async processStream(e){this.currentStreamId=this.generateUniqueId("stream");const n=this.processor.startAssistantMessage();this.currentMessageId=n;const r={id:n,role:"assistant",parts:[],createdAt:new Date};this.events.messageAppended(r);for await(const l of e)this.callbacksRef.current.onChunk(l),this.processor.processChunk(l),await new Promise(c=>setTimeout(c,0));return this.processor.finalizeStream(),this.currentStreamId=null,this.currentMessageId=null,this.processor.getMessages().find(l=>l.id===n)||{id:n,role:"assistant",parts:[],createdAt:new Date}}async sendMessage(e){if(!e.trim()||this.isLoading)return;const n=this.processor.addUserMessage(e.trim());this.events.messageSent(n.id,e.trim()),await this.streamResponse()}async append(e){const n=R6(e,yd);if(n.role==="system")return;const r=n;this.events.messageAppended(r);const s=this.processor.getMessages();this.processor.setMessages([...s,r]),await this.streamResponse()}async streamResponse(){this.setIsLoading(!0),this.setError(void 0),this.abortController=new AbortController;try{const e=this.processor.toModelMessages();await this.callbacksRef.current.onResponse();const n={...this.body,conversationId:this.uniqueId},r=this.connection.connect(e,n,this.abortController.signal);await this.processStream(r)}catch(e){if(e instanceof Error){if(e.name==="AbortError")return;this.setError(e),this.callbacksRef.current.onError(e)}}finally{this.abortController=null,this.setIsLoading(!1),await this.drainPostStreamActions()}}async reload(){const e=this.processor.getMessages();if(e.length===0)return;const n=e.findLastIndex(r=>r.role==="user");n!==-1&&(this.events.reloaded(n),this.processor.removeMessagesAfter(n),await this.streamResponse())}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.setIsLoading(!1),this.events.stopped()}clear(){this.processor.clearMessages(),this.setError(void 0),this.events.messagesCleared()}async addToolResult(e){if(this.events.toolResultAdded(e.toolCallId,e.tool,e.output,e.state||"output-available"),this.processor.addToolResult(e.toolCallId,e.output,e.errorText),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}async addToolApprovalResponse(e){const n=this.processor.getMessages();let r;for(const s of n){const a=s.parts.find(l=>l.type==="tool-call"&&l.approval?.id===e.id);if(a){r=a.id;break}}if(r&&this.events.toolApprovalResponded(e.id,r,e.approved),this.processor.addToolApprovalResponse(e.id,e.approved),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}queuePostStreamAction(e){this.postStreamActions.push(e)}async drainPostStreamActions(){for(;this.postStreamActions.length>0;)await this.postStreamActions.shift()()}async checkForContinuation(){this.shouldAutoSend()&&await this.streamResponse()}shouldAutoSend(){return this.processor.areAllToolsComplete()}getMessages(){return this.processor.getMessages()}getIsLoading(){return this.isLoading}getError(){return this.error}setMessagesManually(e){this.processor.setMessages(e)}updateOptions(e){if(e.connection!==void 0&&(this.connection=e.connection),e.body!==void 0&&(this.body=e.body),e.tools!==void 0){this.clientToolsRef.current=new Map;for(const n of e.tools)this.clientToolsRef.current.set(n.name,n)}e.onResponse!==void 0&&(this.callbacksRef.current.onResponse=e.onResponse),e.onChunk!==void 0&&(this.callbacksRef.current.onChunk=e.onChunk),e.onFinish!==void 0&&(this.callbacksRef.current.onFinish=e.onFinish),e.onError!==void 0&&(this.callbacksRef.current.onError=e.onError)}}function U6(...t){return t}function q6(t){return{async*connect(e,n){const r=E6(e);yield*t(r,n)}}}function H6(t){const e=q.useId(),n=t.id||e,[r,s]=q.useState(t.initialMessages||[]),[a,l]=q.useState(!1),[c,f]=q.useState(void 0),d=q.useRef(t.initialMessages||[]),m=q.useRef(!0);q.useEffect(()=>{d.current=r},[r]);const p=q.useRef(t);p.current=t;const g=q.useMemo(()=>{const j=m.current?t.initialMessages||[]:d.current;return m.current=!1,new B6({connection:p.current.connection,id:n,initialMessages:j,body:p.current.body,onResponse:p.current.onResponse,onChunk:p.current.onChunk,onFinish:p.current.onFinish,onError:p.current.onError,tools:p.current.tools,streamProcessor:t.streamProcessor,onMessagesChange:A=>{s(A)},onLoadingChange:A=>{l(A)},onErrorChange:A=>{f(A)}})},[n]);q.useEffect(()=>{t.initialMessages&&t.initialMessages.length>0&&r.length===0&&g.setMessagesManually(t.initialMessages)},[]),q.useEffect(()=>()=>{g.stop()},[g]);const y=q.useCallback(async j=>{await g.sendMessage(j)},[g]),x=q.useCallback(async j=>{await g.append(j)},[g]),S=q.useCallback(async()=>{await g.reload()},[g]),E=q.useCallback(()=>{g.stop()},[g]),C=q.useCallback(()=>{g.clear()},[g]),k=q.useCallback(j=>{g.setMessagesManually(j)},[g]),R=q.useCallback(async j=>{await g.addToolResult(j)},[g]),I=q.useCallback(async j=>{await g.addToolApprovalResponse(j)},[g]);return{messages:r,sendMessage:y,append:x,reload:S,stop:E,isLoading:a,error:c,setMessages:k,clear:C,addToolResult:R,addToolApprovalResponse:I}}class V6{constructor(e={},n){this.kind="text",this.config=e,this.model=n}generateId(){return`${this.name}-${Date.now()}-${Math.random().toString(36).substring(7)}`}}const K6=t=>{if(t.conversation&&t.previous_response_id)throw new Error("Cannot use both 'conversation' and 'previous_response_id' in the same request.")},G6=t=>{Q6(t),K6(t)},Q6=t=>{const e=t.metadata;if(e&&Object.keys(e).length>16)throw new Error("Metadata cannot have more than 16 key-value pairs.");if(e&&Object.keys(e).some(a=>a.length>64))throw new Error("Metadata keys cannot be longer than 64 characters.");if(e&&Object.values(e).some(a=>a.length>512))throw new Error("Metadata values cannot be longer than 512 characters.")};function by(t){if(t!==null){if(Array.isArray(t))return t.map(e=>by(e));if(typeof t=="object"){const e={};for(const[n,r]of Object.entries(t)){const s=by(r);s!==void 0&&(e[n]=s)}return e}return t}}function tu(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],c=!e.includes(a);l.type==="object"&&l.properties?r[a]=tu(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:tu(l.items,l.items.required||[])}:c&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=tu(n.items,n.items.required||[])),n}function Z6(t){return{type:"apply_patch"}}function Y6(t){return{type:"code_interpreter",container:t.metadata.container}}function J6(t){const e=t.metadata;return{type:"computer_use_preview",display_height:e.display_height,display_width:e.display_width,environment:e.environment}}function X6(t){const e=t.metadata;return{type:"custom",name:e.name,description:e.description,format:e.format}}function W6(t){const e=t.metadata;return{type:"file_search",vector_store_ids:e.vector_store_ids,max_num_results:e.max_num_results,ranking_options:e.ranking_options,filters:e.filters}}function eF(t){const e=t.inputSchema??{type:"object",properties:{},required:[]},n=tu(e,e.required||[]);return n.additionalProperties=!1,{type:"function",name:t.name,description:t.description,parameters:n,strict:!0}}function tF(t){return{type:"image_generation",...t.metadata}}function nF(t){return{type:"local_shell"}}function rF(t){if(!t.server_url&&!t.connector_id)throw new Error("Either server_url or connector_id must be provided.");if(t.connector_id&&t.server_url)throw new Error("Only one of server_url or connector_id can be provided.")}function sF(t){const n={type:"mcp",...t.metadata};return rF(n),n}function iF(t){return{type:"shell"}}function aF(t){const e=t.metadata;return{type:e.type,search_context_size:e.search_context_size,user_location:e.user_location}}function oF(t){return t.metadata}function lF(t){return t.map(e=>{const n=new Set(["apply_patch","code_interpreter","computer_use_preview","file_search","image_generation","local_shell","mcp","shell","web_search_preview","web_search","custom"]),r=e.name;if(n.has(r))switch(r){case"apply_patch":return Z6();case"code_interpreter":return Y6(e);case"computer_use_preview":return J6(e);case"file_search":return W6(e);case"image_generation":return tF(e);case"local_shell":return nF();case"mcp":return sF(e);case"shell":return iF();case"web_search_preview":return aF(e);case"web_search":return oF(e);case"custom":return X6(e)}return eF(e)})}function $e(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function X(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let Pk=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return Pk=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function xy(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Sy=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Ie extends Error{}class cn extends Ie{constructor(e,n,r,s){super(`${cn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new Gd({message:r,cause:Sy(n)});const a=n?.error;return e===400?new Fk(e,a,r,s):e===401?new $k(e,a,r,s):e===403?new Bk(e,a,r,s):e===404?new Uk(e,a,r,s):e===409?new qk(e,a,r,s):e===422?new Hk(e,a,r,s):e===429?new Vk(e,a,r,s):e>=500?new Kk(e,a,r,s):new cn(e,a,r,s)}}class xr extends cn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Gd extends cn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class j0 extends Gd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Fk extends cn{}class $k extends cn{}class Bk extends cn{}class Uk extends cn{}class qk extends cn{}class Hk extends cn{}class Vk extends cn{}class Kk extends cn{}class Gk extends Ie{constructor(){super("Could not parse response content as the length limit was reached")}}class Qk extends Ie{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class zl extends Error{constructor(e){super(e)}}const uF=/^[a-z][a-z0-9+.-]*:/i,cF=t=>uF.test(t);let zn=t=>(zn=Array.isArray,zn(t)),d1=zn;function Zk(t){return typeof t!="object"?{}:t??{}}function fF(t){if(!t)return!0;for(const e in t)return!1;return!0}function dF(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function dg(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const hF=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ie(`${t} must be an integer`);if(e<0)throw new Ie(`${t} must be a positive integer`);return e},pF=t=>{try{return JSON.parse(t)}catch{return}},Nu=t=>new Promise(e=>setTimeout(e,t)),Ka="6.15.0",mF=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function gF(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const yF=()=>{const t=gF();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ka,"X-Stainless-OS":p1(Deno.build.os),"X-Stainless-Arch":h1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ka,"X-Stainless-OS":p1(globalThis.process.platform??"unknown"),"X-Stainless-Arch":h1(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=vF();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function vF(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${s}.${a}.${l}`}}}return null}const h1=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",p1=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let m1;const bF=()=>m1??(m1=yF());function xF(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Yk(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Jk(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Yk({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){await e.return?.()}})}function Xk(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function SF(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const wF=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),Wk="RFC3986",eR=t=>String(t),g1={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:eR},_F="RFC1738";let wy=(t,e)=>(wy=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),wy(t,e));const Lr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),hg=1024,CF=(t,e,n,r,s)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let l="";for(let c=0;c<a.length;c+=hg){const f=a.length>=hg?a.slice(c,c+hg):a,d=[];for(let m=0;m<f.length;++m){let p=f.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===_F&&(p===40||p===41)){d[d.length]=f.charAt(m);continue}if(p<128){d[d.length]=Lr[p];continue}if(p<2048){d[d.length]=Lr[192|p>>6]+Lr[128|p&63];continue}if(p<55296||p>=57344){d[d.length]=Lr[224|p>>12]+Lr[128|p>>6&63]+Lr[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|f.charCodeAt(m)&1023),d[d.length]=Lr[240|p>>18]+Lr[128|p>>12&63]+Lr[128|p>>6&63]+Lr[128|p&63]}l+=d.join("")}return l};function EF(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function y1(t,e){if(zn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const tR={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},nR=function(t,e){Array.prototype.push.apply(t,zn(e)?e:[e])};let v1;const Ht={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:CF,encodeValuesOnly:!1,format:Wk,formatter:eR,indices:!1,serializeDate(t){return(v1??(v1=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function kF(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const pg={};function rR(t,e,n,r,s,a,l,c,f,d,m,p,g,y,x,S,E,C){let k=t,R=C,I=0,j=!1;for(;(R=R.get(pg))!==void 0&&!j;){const M=R.get(t);if(I+=1,typeof M<"u"){if(M===I)throw new RangeError("Cyclic object value");j=!0}typeof R.get(pg)>"u"&&(I=0)}if(typeof d=="function"?k=d(e,k):k instanceof Date?k=g?.(k):n==="comma"&&zn(k)&&(k=y1(k,function(M){return M instanceof Date?g?.(M):M})),k===null){if(a)return f&&!S?f(e,Ht.encoder,E,"key",y):e;k=""}if(kF(k)||EF(k)){if(f){const M=S?e:f(e,Ht.encoder,E,"key",y);return[x?.(M)+"="+x?.(f(k,Ht.encoder,E,"value",y))]}return[x?.(e)+"="+x?.(String(k))]}const A=[];if(typeof k>"u")return A;let z;if(n==="comma"&&zn(k))S&&f&&(k=y1(k,f)),z=[{value:k.length>0?k.join(",")||null:void 0}];else if(zn(d))z=d;else{const M=Object.keys(k);z=m?M.sort(m):M}const L=c?String(e).replace(/\./g,"%2E"):String(e),P=r&&zn(k)&&k.length===1?L+"[]":L;if(s&&zn(k)&&k.length===0)return P+"[]";for(let M=0;M<z.length;++M){const $=z[M],G=typeof $=="object"&&typeof $.value<"u"?$.value:k[$];if(l&&G===null)continue;const ee=p&&c?$.replace(/\./g,"%2E"):$,te=zn(k)?typeof n=="function"?n(P,ee):P:P+(p?"."+ee:"["+ee+"]");C.set(t,I);const V=new WeakMap;V.set(pg,C),nR(A,rR(G,te,n,r,s,a,l,c,n==="comma"&&S&&zn(k)?null:f,d,m,p,g,y,x,S,E,V))}return A}function RF(t=Ht){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ht.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Wk;if(typeof t.format<"u"){if(!wy(g1,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=g1[n];let s=Ht.filter;(typeof t.filter=="function"||zn(t.filter))&&(s=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in tR?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Ht.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ht.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ht.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ht.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ht.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ht.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ht.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ht.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ht.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ht.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ht.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ht.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ht.strictNullHandling}}function AF(t,e={}){let n=t;const r=RF(e);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):zn(r.filter)&&(a=r.filter,s=a);const l=[];if(typeof n!="object"||n===null)return"";const c=tR[r.arrayFormat],f=c==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const d=new WeakMap;for(let g=0;g<s.length;++g){const y=s[g];r.skipNulls&&n[y]===null||nR(l,rR(n[y],y,c,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}const m=l.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function TF(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let b1;function L0(t){let e;return(b1??(e=new globalThis.TextEncoder,b1=e.encode.bind(e)))(t)}let x1;function S1(t){let e;return(x1??(e=new globalThis.TextDecoder,x1=e.decode.bind(e)))(t)}var Gn,Qn;class Qd{constructor(){Gn.set(this,void 0),Qn.set(this,void 0),$e(this,Gn,new Uint8Array),$e(this,Qn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?L0(e):e;$e(this,Gn,TF([X(this,Gn,"f"),n]));const r=[];let s;for(;(s=OF(X(this,Gn,"f"),X(this,Qn,"f")))!=null;){if(s.carriage&&X(this,Qn,"f")==null){$e(this,Qn,s.index);continue}if(X(this,Qn,"f")!=null&&(s.index!==X(this,Qn,"f")+1||s.carriage)){r.push(S1(X(this,Gn,"f").subarray(0,X(this,Qn,"f")-1))),$e(this,Gn,X(this,Gn,"f").subarray(X(this,Qn,"f"))),$e(this,Qn,null);continue}const a=X(this,Qn,"f")!==null?s.preceding-1:s.preceding,l=S1(X(this,Gn,"f").subarray(0,a));r.push(l),$e(this,Gn,X(this,Gn,"f").subarray(s.index)),$e(this,Qn,null)}return r}flush(){return X(this,Gn,"f").length?this.decode(`
`):[]}}Gn=new WeakMap,Qn=new WeakMap;Qd.NEWLINE_CHARS=new Set([`
`,"\r"]);Qd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function OF(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function MF(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const vd={off:0,error:200,warn:300,info:400,debug:500},w1=(t,e,n)=>{if(t){if(dF(vd,t))return t;ln(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(vd))}`)}};function jl(){}function yf(t,e,n){return!e||vd[t]>vd[n]?jl:e[t].bind(e)}const NF={error:jl,warn:jl,info:jl,debug:jl};let _1=new WeakMap;function ln(t){const e=t.logger,n=t.logLevel??"off";if(!e)return NF;const r=_1.get(e);if(r&&r[0]===n)return r[1];const s={error:yf("error",e,n),warn:yf("warn",e,n),info:yf("info",e,n),debug:yf("debug",e,n)};return _1.set(e,[n,s]),s}const Ni=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var El;class $r{constructor(e,n,r){this.iterator=e,El.set(this,void 0),this.controller=n,$e(this,El,r)}static fromSSEResponse(e,n,r){let s=!1;const a=r?ln(r):console;async function*l(){if(s)throw new Ie("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let c=!1;try{for await(const f of IF(e,n))if(!c){if(f.data.startsWith("[DONE]")){c=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let d;try{d=JSON.parse(f.data)}catch(m){throw a.error("Could not parse message into JSON:",f.data),a.error("From chunk:",f.raw),m}if(d&&d.error)throw new cn(void 0,d.error,void 0,e.headers);yield d}else{let d;try{d=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new cn(void 0,d.error,d.message,void 0);yield{event:f.event,data:d}}}c=!0}catch(f){if(xy(f))return;throw f}finally{c||n.abort()}}return new $r(l,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*a(){const c=new Qd,f=Xk(e);for await(const d of f)for(const m of c.decode(d))yield m;for(const d of c.flush())yield d}async function*l(){if(s)throw new Ie("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let c=!1;try{for await(const f of a())c||f&&(yield JSON.parse(f));c=!0}catch(f){if(xy(f))return;throw f}finally{c||n.abort()}}return new $r(l,n,r)}[(El=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),n.push(l)}return a.shift()}});return[new $r(()=>s(e),this.controller,X(this,El,"f")),new $r(()=>s(n),this.controller,X(this,El,"f"))]}toReadableStream(){const e=this;let n;return Yk({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const l=L0(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}}async function*IF(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ie("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ie("Attempted to iterate over a response with no body");const n=new zF,r=new Qd,s=Xk(t.body);for await(const a of DF(s))for(const l of r.decode(a)){const c=n.decode(l);c&&(yield c)}for(const a of r.flush()){const l=n.decode(a);l&&(yield l)}}async function*DF(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?L0(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let a;for(;(a=MF(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class zF{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=jF(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function jF(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function sR(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=e,l=await(async()=>{if(e.options.stream)return ln(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):$r.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return iR(p,n)}return await n.text()})();return ln(t).debug(`[${r}] response parsed`,Ni({retryOfRequestLogID:s,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}function iR(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Ll;class Zd extends Promise{constructor(e,n,r=sR){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,Ll.set(this,void 0),$e(this,Ll,e)}_thenUnwrap(e){return new Zd(X(this,Ll,"f"),this.responsePromise,async(n,r)=>iR(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(X(this,Ll,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Ll=new WeakMap;var vf;class P0{constructor(e,n,r,s){vf.set(this,void 0),$e(this,vf,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Ie("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await X(this,vf,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(vf=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class LF extends Zd{constructor(e,n,r){super(e,n,async(s,a)=>new r(s,a.response,await sR(s,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Yd extends P0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Bt extends P0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...Zk(this.options.query),after:n}}:null}}class bd extends P0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...Zk(this.options.query),after:e}}:null}}const aR=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function nu(t,e,n){return aR(),new File(t,e??"unknown_file",n)}function Pf(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const F0=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",C1=async(t,e)=>_y(t.body)?{...t,body:await oR(t.body,e)}:t,Gi=async(t,e)=>({...t,body:await oR(t.body,e)}),E1=new WeakMap;function PF(t){const e=typeof t=="function"?t:t.fetch,n=E1.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return E1.set(e,r),r}const oR=async(t,e)=>{if(!await PF(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>Cy(n,r,s))),n},lR=t=>t instanceof Blob&&"name"in t,FF=t=>typeof t=="object"&&t!==null&&(t instanceof Response||F0(t)||lR(t)),_y=t=>{if(FF(t))return!0;if(Array.isArray(t))return t.some(_y);if(t&&typeof t=="object"){for(const e in t)if(_y(t[e]))return!0}return!1},Cy=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,nu([await n.blob()],Pf(n)));else if(F0(n))t.append(e,nu([await new Response(Jk(n)).blob()],Pf(n)));else if(lR(n))t.append(e,n,Pf(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Cy(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Cy(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},uR=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",$F=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&uR(t),BF=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function UF(t,e,n){if(aR(),t=await t,$F(t))return t instanceof File?t:nu([await t.arrayBuffer()],t.name);if(BF(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),nu(await Ey(s),e,n)}const r=await Ey(t);if(e||(e=Pf(t)),!n?.type){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n={...n,type:s})}return nu(r,e,n)}async function Ey(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(uR(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(F0(t))for await(const n of t)e.push(...await Ey(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${qF(t)}`)}return e}function qF(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Te{constructor(e){this._client=e}}function cR(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const k1=Object.freeze(Object.create(null)),HF=(t=cR)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],l=n.reduce((m,p,g)=>{/[?#]/.test(p)&&(s=!0);const y=r[g];let x=(s?encodeURIComponent:t)(""+y);return g!==r.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??k1)??k1)?.toString)&&(x=y+"",a.push({start:m.length+p.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),m+p+(g===r.length?"":x)},""),c=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=f.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,p)=>m.start-p.start),a.length>0){let m=0;const p=a.reduce((g,y)=>{const x=" ".repeat(y.start-m),S="^".repeat(y.length);return m=y.start+y.length,g+x+S},"");throw new Ie(`Path parameters result in path with invalid segments:
${a.map(g=>g.error).join(`
`)}
${l}
${p}`)}return l},de=HF(cR);let fR=class extends Te{list(e,n={},r){return this._client.getAPIList(de`/chat/completions/${e}/messages`,Bt,{query:n,...r})}};function xd(t){return t!==void 0&&"function"in t&&t.function!==void 0}function $0(t){return t?.$brand==="auto-parseable-response-format"}function Iu(t){return t?.$brand==="auto-parseable-tool"}function VF(t,e){return!e||!dR(e)?{...t,choices:t.choices.map(n=>(hR(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:B0(t,e)}function B0(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new Gk;if(r.finish_reason==="content_filter")throw new Qk;return hR(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(s=>GF(e,s))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?KF(e,r.message.content):null}}});return{...t,choices:n}}function KF(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function GF(t,e){const n=t.tools?.find(r=>xd(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Iu(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function QF(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>xd(r)&&r.function?.name===e.function.name);return xd(n)&&(Iu(n)||n?.function.strict||!1)}function dR(t){return $0(t.response_format)?!0:t.tools?.some(e=>Iu(e)||e.type==="function"&&e.function.strict===!0)??!1}function hR(t){for(const e of t||[])if(e.type!=="function")throw new Ie(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function ZF(t){for(const e of t??[]){if(e.type!=="function")throw new Ie(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ie(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Sd=t=>t?.role==="assistant",pR=t=>t?.role==="tool";var ky,Ff,$f,Pl,Fl,Bf,$l,ds,Bl,wd,_d,Ga,mR;class U0{constructor(){ky.add(this),this.controller=new AbortController,Ff.set(this,void 0),$f.set(this,()=>{}),Pl.set(this,()=>{}),Fl.set(this,void 0),Bf.set(this,()=>{}),$l.set(this,()=>{}),ds.set(this,{}),Bl.set(this,!1),wd.set(this,!1),_d.set(this,!1),Ga.set(this,!1),$e(this,Ff,new Promise((e,n)=>{$e(this,$f,e,"f"),$e(this,Pl,n,"f")})),$e(this,Fl,new Promise((e,n)=>{$e(this,Bf,e,"f"),$e(this,$l,n,"f")})),X(this,Ff,"f").catch(()=>{}),X(this,Fl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},X(this,ky,"m",mR).bind(this))},0)}_connected(){this.ended||(X(this,$f,"f").call(this),this._emit("connect"))}get ended(){return X(this,Bl,"f")}get errored(){return X(this,wd,"f")}get aborted(){return X(this,_d,"f")}abort(){this.controller.abort()}on(e,n){return(X(this,ds,"f")[e]||(X(this,ds,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=X(this,ds,"f")[e];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(X(this,ds,"f")[e]||(X(this,ds,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{$e(this,Ga,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){$e(this,Ga,!0),await X(this,Fl,"f")}_emit(e,...n){if(X(this,Bl,"f"))return;e==="end"&&($e(this,Bl,!0),X(this,Bf,"f").call(this));const r=X(this,ds,"f")[e];if(r&&(X(this,ds,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!X(this,Ga,"f")&&!r?.length&&Promise.reject(s),X(this,Pl,"f").call(this,s),X(this,$l,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!X(this,Ga,"f")&&!r?.length&&Promise.reject(s),X(this,Pl,"f").call(this,s),X(this,$l,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Ff=new WeakMap,$f=new WeakMap,Pl=new WeakMap,Fl=new WeakMap,Bf=new WeakMap,$l=new WeakMap,ds=new WeakMap,Bl=new WeakMap,wd=new WeakMap,_d=new WeakMap,Ga=new WeakMap,ky=new WeakSet,mR=function(e){if($e(this,wd,!0),e instanceof Error&&e.name==="AbortError"&&(e=new xr),e instanceof xr)return $e(this,_d,!0),this._emit("abort",e);if(e instanceof Ie)return this._emit("error",e);if(e instanceof Error){const n=new Ie(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Ie(String(e)))};function YF(t){return typeof t.parse=="function"}var xn,Ry,Cd,Ay,Ty,Oy,gR,yR;const JF=10;class vR extends U0{constructor(){super(...arguments),xn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),pR(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Sd(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ie("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),X(this,xn,"m",Ry).call(this)}async finalMessage(){return await this.done(),X(this,xn,"m",Cd).call(this)}async finalFunctionToolCall(){return await this.done(),X(this,xn,"m",Ay).call(this)}async finalFunctionToolCallResult(){return await this.done(),X(this,xn,"m",Ty).call(this)}async totalUsage(){return await this.done(),X(this,xn,"m",Oy).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=X(this,xn,"m",Cd).call(this);n&&this._emit("finalMessage",n);const r=X(this,xn,"m",Ry).call(this);r&&this._emit("finalContent",r);const s=X(this,xn,"m",Ay).call(this);s&&this._emit("finalFunctionToolCall",s);const a=X(this,xn,"m",Ty).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",X(this,xn,"m",Oy).call(this))}async _createChatCompletion(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),X(this,xn,"m",gR).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(B0(a,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const s="tool",{tool_choice:a="auto",stream:l,...c}=n,f=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=JF}=r||{},m=n.tools.map(y=>{if(Iu(y)){if(!y.$callback)throw new Ie("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),p={};for(const y of m)y.type==="function"&&(p[y.function.name||y.function.function.name]=y.function);const g="tools"in n?m.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<d;++y){const S=(await this._createChatCompletion(e,{...c,tool_choice:a,tools:g,messages:[...this.messages]},r)).choices[0]?.message;if(!S)throw new Ie("missing message in ChatCompletion response");if(!S.tool_calls?.length)return;for(const E of S.tool_calls){if(E.type!=="function")continue;const C=E.id,{name:k,arguments:R}=E.function,I=p[k];if(I){if(f&&f!==k){const L=`Invalid tool_call: ${JSON.stringify(k)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:s,tool_call_id:C,content:L});continue}}else{const L=`Invalid tool_call: ${JSON.stringify(k)}. Available options are: ${Object.keys(p).map(P=>JSON.stringify(P)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:C,content:L});continue}let j;try{j=YF(I)?await I.parse(R):R}catch(L){const P=L instanceof Error?L.message:String(L);this._addMessage({role:s,tool_call_id:C,content:P});continue}const A=await I.function(j,this),z=X(this,xn,"m",yR).call(this,A);if(this._addMessage({role:s,tool_call_id:C,content:z}),f)return}}}}xn=new WeakSet,Ry=function(){return X(this,xn,"m",Cd).call(this).content??null},Cd=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Sd(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Ie("stream ended without producing a ChatCompletionMessage with role=assistant")},Ay=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Sd(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},Ty=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(pR(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},Oy=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},gR=function(e){if(e.n!=null&&e.n>1)throw new Ie("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},yR=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class q0 extends vR{static runTools(e,n,r){const s=new q0,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}_addMessage(e,n=!0){super._addMessage(e,n),Sd(e)&&e.content&&this._emit("content",e.content)}}const bR=1,xR=2,SR=4,wR=8,_R=16,CR=32,ER=64,kR=128,RR=256,AR=kR|RR,TR=_R|CR|AR|ER,OR=bR|xR|TR,MR=SR|wR,XF=OR|MR,Wt={STR:bR,NUM:xR,ARR:SR,OBJ:wR,NULL:_R,BOOL:CR,NAN:ER,INFINITY:kR,MINUS_INFINITY:RR,INF:AR,SPECIAL:TR,ATOM:OR,COLLECTION:MR,ALL:XF};class WF extends Error{}class e$ extends Error{}function t$(t,e=Wt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return n$(t.trim(),e)}const n$=(t,e)=>{const n=t.length;let r=0;const s=g=>{throw new WF(`${g} at position ${r}`)},a=g=>{throw new e$(`${g} at position ${r}`)},l=()=>(p(),r>=n&&s("Unexpected end of input"),t[r]==='"'?c():t[r]==="{"?f():t[r]==="["?d():t.substring(r,r+4)==="null"||Wt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Wt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Wt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Wt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Wt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Wt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):m()),c=()=>{const g=r;let y=!1;for(r++;r<n&&(t[r]!=='"'||y&&t[r-1]==="\\");)y=t[r]==="\\"?!y:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(g,++r-Number(y)))}catch(x){a(String(x))}else if(Wt.STR&e)try{return JSON.parse(t.substring(g,r-Number(y))+'"')}catch{return JSON.parse(t.substring(g,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},f=()=>{r++,p();const g={};try{for(;t[r]!=="}";){if(p(),r>=n&&Wt.OBJ&e)return g;const y=c();p(),r++;try{const x=l();Object.defineProperty(g,y,{value:x,writable:!0,enumerable:!0,configurable:!0})}catch(x){if(Wt.OBJ&e)return g;throw x}p(),t[r]===","&&r++}}catch{if(Wt.OBJ&e)return g;s("Expected '}' at end of object")}return r++,g},d=()=>{r++;const g=[];try{for(;t[r]!=="]";)g.push(l()),p(),t[r]===","&&r++}catch{if(Wt.ARR&e)return g;s("Expected ']' at end of array")}return r++,g},m=()=>{if(r===0){t==="-"&&Wt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(y){if(Wt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(y))}}const g=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Wt.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(g,r))}catch{t.substring(g,r)==="-"&&Wt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(g,t.lastIndexOf("e")))}catch(x){a(String(x))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return l()},R1=t=>t$(t,Wt.ALL^Wt.NUM);var qt,fs,$a,Ks,mg,bf,gg,yg,vg,xf,bg,A1;class bu extends vR{constructor(e){super(),qt.add(this),fs.set(this,void 0),$a.set(this,void 0),Ks.set(this,void 0),$e(this,fs,e),$e(this,$a,[])}get currentChatCompletionSnapshot(){return X(this,Ks,"f")}static fromReadableStream(e){const n=new bu(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new bu(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){super._createChatCompletion;const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),X(this,qt,"m",mg).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of a)X(this,qt,"m",gg).call(this,l);if(a.controller.signal?.aborted)throw new xr;return this._addChatCompletion(X(this,qt,"m",xf).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),X(this,qt,"m",mg).call(this),this._connected();const s=$r.fromReadableStream(e,this.controller);let a;for await(const l of s)a&&a!==l.id&&this._addChatCompletion(X(this,qt,"m",xf).call(this)),X(this,qt,"m",gg).call(this,l),a=l.id;if(s.controller.signal?.aborted)throw new xr;return this._addChatCompletion(X(this,qt,"m",xf).call(this))}[(fs=new WeakMap,$a=new WeakMap,Ks=new WeakMap,qt=new WeakSet,mg=function(){this.ended||$e(this,Ks,void 0)},bf=function(n){let r=X(this,$a,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},X(this,$a,"f")[n.index]=r,r)},gg=function(n){if(this.ended)return;const r=X(this,qt,"m",A1).call(this,n);this._emit("chunk",n,r);for(const s of n.choices){const a=r.choices[s.index];s.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",s.delta.content,a.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),s.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:a.message.refusal}),s.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:a.logprobs?.content??[]}),s.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const l=X(this,qt,"m",bf).call(this,a);a.finish_reason&&(X(this,qt,"m",vg).call(this,a),l.current_tool_call_index!=null&&X(this,qt,"m",yg).call(this,a,l.current_tool_call_index));for(const c of s.delta.tool_calls??[])l.current_tool_call_index!==c.index&&(X(this,qt,"m",vg).call(this,a),l.current_tool_call_index!=null&&X(this,qt,"m",yg).call(this,a,l.current_tool_call_index)),l.current_tool_call_index=c.index;for(const c of s.delta.tool_calls??[]){const f=a.message.tool_calls?.[c.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:c.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(f?.type,void 0))}}},yg=function(n,r){if(X(this,qt,"m",bf).call(this,n).done_tool_calls.has(r))return;const a=n.message.tool_calls?.[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=X(this,fs,"f")?.tools?.find(c=>xd(c)&&c.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:Iu(l)?l.$parseRaw(a.function.arguments):l?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},vg=function(n){const r=X(this,qt,"m",bf).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=X(this,qt,"m",bg).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},xf=function(){if(this.ended)throw new Ie("stream has ended, this shouldn't happen");const n=X(this,Ks,"f");if(!n)throw new Ie("request ended without sending any chunks");return $e(this,Ks,void 0),$e(this,$a,[]),r$(n,X(this,fs,"f"))},bg=function(){const n=X(this,fs,"f")?.response_format;return $0(n)?n:null},A1=function(n){var r,s,a,l;let c=X(this,Ks,"f");const{choices:f,...d}=n;c?Object.assign(c,d):c=$e(this,Ks,{...d,choices:[]});for(const{delta:m,finish_reason:p,index:g,logprobs:y=null,...x}of n.choices){let S=c.choices[g];if(S||(S=c.choices[g]={finish_reason:p,index:g,message:{},logprobs:y,...x}),y)if(!S.logprobs)S.logprobs=Object.assign({},y);else{const{content:A,refusal:z,...L}=y;Object.assign(S.logprobs,L),A&&((r=S.logprobs).content??(r.content=[]),S.logprobs.content.push(...A)),z&&((s=S.logprobs).refusal??(s.refusal=[]),S.logprobs.refusal.push(...z))}if(p&&(S.finish_reason=p,X(this,fs,"f")&&dR(X(this,fs,"f")))){if(p==="length")throw new Gk;if(p==="content_filter")throw new Qk}if(Object.assign(S,x),!m)continue;const{content:E,refusal:C,function_call:k,role:R,tool_calls:I,...j}=m;if(Object.assign(S.message,j),C&&(S.message.refusal=(S.message.refusal||"")+C),R&&(S.message.role=R),k&&(S.message.function_call?(k.name&&(S.message.function_call.name=k.name),k.arguments&&((a=S.message.function_call).arguments??(a.arguments=""),S.message.function_call.arguments+=k.arguments)):S.message.function_call=k),E&&(S.message.content=(S.message.content||"")+E,!S.message.refusal&&X(this,qt,"m",bg).call(this)&&(S.message.parsed=R1(S.message.content))),I){S.message.tool_calls||(S.message.tool_calls=[]);for(const{index:A,id:z,type:L,function:P,...M}of I){const $=(l=S.message.tool_calls)[A]??(l[A]={});Object.assign($,M),z&&($.id=z),L&&($.type=L),P&&($.function??($.function={name:P.name??"",arguments:""})),P?.name&&($.function.name=P.name),P?.arguments&&($.function.arguments+=P.arguments,QF(X(this,fs,"f"),$)&&($.function.parsed_arguments=R1($.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new $r(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function r$(t,e){const{id:n,choices:r,created:s,model:a,system_fingerprint:l,...c}=t,f={...c,id:n,choices:r.map(({message:d,finish_reason:m,index:p,logprobs:g,...y})=>{if(!m)throw new Ie(`missing finish_reason for choice ${p}`);const{content:x=null,function_call:S,tool_calls:E,...C}=d,k=d.role;if(!k)throw new Ie(`missing role for choice ${p}`);if(S){const{arguments:R,name:I}=S;if(R==null)throw new Ie(`missing function_call.arguments for choice ${p}`);if(!I)throw new Ie(`missing function_call.name for choice ${p}`);return{...y,message:{content:x,function_call:{arguments:R,name:I},role:k,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:g}}return E?{...y,index:p,finish_reason:m,logprobs:g,message:{...C,role:k,content:x,refusal:d.refusal??null,tool_calls:E.map((R,I)=>{const{function:j,type:A,id:z,...L}=R,{arguments:P,name:M,...$}=j||{};if(z==null)throw new Ie(`missing choices[${p}].tool_calls[${I}].id
${Sf(t)}`);if(A==null)throw new Ie(`missing choices[${p}].tool_calls[${I}].type
${Sf(t)}`);if(M==null)throw new Ie(`missing choices[${p}].tool_calls[${I}].function.name
${Sf(t)}`);if(P==null)throw new Ie(`missing choices[${p}].tool_calls[${I}].function.arguments
${Sf(t)}`);return{...L,id:z,type:A,function:{...$,name:M,arguments:P}}})}}:{...y,message:{...C,content:x,role:k,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:g}}),created:s,model:a,object:"chat.completion",...l?{system_fingerprint:l}:{}};return VF(f,e)}function Sf(t){return JSON.stringify(t)}class Ed extends bu{static fromReadableStream(e){const n=new Ed(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new Ed(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}}let H0=class extends Te{constructor(){super(...arguments),this.messages=new fR(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(de`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(de`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Bt,{query:e,...n})}delete(e,n){return this._client.delete(de`/chat/completions/${e}`,n)}parse(e,n){return ZF(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>B0(r,e))}runTools(e,n){return e.stream?Ed.runTools(this._client,e,n):q0.runTools(this._client,e,n)}stream(e,n){return bu.createChatCompletion(this._client,e,n)}};H0.Messages=fR;class V0 extends Te{constructor(){super(...arguments),this.completions=new H0(this._client)}}V0.Completions=H0;const NR=Symbol("brand.privateNullableHeaders");function*s$(t){if(!t)return;if(NR in t){const{values:r,nulls:s}=t;yield*r.entries();for(const a of s)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():d1(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=d1(r[1])?r[1]:[r[1]];let l=!1;for(const c of a)c!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,c])}}const we=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[a,l]of s$(r)){const c=a.toLowerCase();s.has(c)||(e.delete(a),s.add(c)),l===null?(e.delete(a),n.add(c)):(e.append(a,l),n.delete(c))}}return{[NR]:!0,values:e,nulls:n}};class IR extends Te{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:we([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class DR extends Te{create(e,n){return this._client.post("/audio/transcriptions",Gi({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class zR extends Te{create(e,n){return this._client.post("/audio/translations",Gi({body:e,...n,__metadata:{model:e.model}},this._client))}}class Du extends Te{constructor(){super(...arguments),this.transcriptions=new DR(this._client),this.translations=new zR(this._client),this.speech=new IR(this._client)}}Du.Transcriptions=DR;Du.Translations=zR;Du.Speech=IR;class jR extends Te{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(de`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Bt,{query:e,...n})}cancel(e,n){return this._client.post(de`/batches/${e}/cancel`,n)}}class LR extends Te{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(de`/assistants/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(de`/assistants/${e}`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Bt,{query:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(de`/assistants/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let PR=class extends Te{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class FR extends Te{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Jd=class extends Te{constructor(){super(...arguments),this.sessions=new PR(this._client),this.transcriptionSessions=new FR(this._client)}};Jd.Sessions=PR;Jd.TranscriptionSessions=FR;class $R extends Te{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(de`/chatkit/sessions/${e}/cancel`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let BR=class extends Te{retrieve(e,n){return this._client.get(de`/chatkit/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",bd,{query:e,...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(de`/chatkit/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},r){return this._client.getAPIList(de`/chatkit/threads/${e}/items`,bd,{query:n,...r,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class Xd extends Te{constructor(){super(...arguments),this.sessions=new $R(this._client),this.threads=new BR(this._client)}}Xd.Sessions=$R;Xd.Threads=BR;class UR extends Te{create(e,n,r){return this._client.post(de`/threads/${e}/messages`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(de`/threads/${s}/messages/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(de`/threads/${s}/messages/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(de`/threads/${e}/messages`,Bt,{query:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(de`/threads/${s}/messages/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class qR extends Te{retrieve(e,n,r){const{thread_id:s,run_id:a,...l}=n;return this._client.get(de`/threads/${s}/runs/${a}/steps/${e}`,{query:l,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:s,...a}=n;return this._client.getAPIList(de`/threads/${s}/runs/${e}/steps`,Bt,{query:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const i$=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var a$={};const Ba=t=>{if(typeof globalThis.process<"u")return a$?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var un,ji,My,Fr,Uf,Rr,Li,eo,Di,kd,Yn,qf,Hf,ru,Ul,ql,T1,O1,M1,N1,I1,D1,z1;class su extends U0{constructor(){super(...arguments),un.add(this),My.set(this,[]),Fr.set(this,{}),Uf.set(this,{}),Rr.set(this,void 0),Li.set(this,void 0),eo.set(this,void 0),Di.set(this,void 0),kd.set(this,void 0),Yn.set(this,void 0),qf.set(this,void 0),Hf.set(this,void 0),ru.set(this,void 0)}[(My=new WeakMap,Fr=new WeakMap,Uf=new WeakMap,Rr=new WeakMap,Li=new WeakMap,eo=new WeakMap,Di=new WeakMap,kd=new WeakMap,Yn=new WeakMap,qf=new WeakMap,Hf=new WeakMap,ru=new WeakMap,un=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new ji;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=$r.fromReadableStream(e,this.controller);for await(const a of s)X(this,un,"m",Ul).call(this,a);if(s.controller.signal?.aborted)throw new xr;return this._addRun(X(this,un,"m",ql).call(this))}toReadableStream(){return new $r(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const a=new ji;return a._run(()=>a._runToolAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},c=await e.submitToolOutputs(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of c)X(this,un,"m",Ul).call(this,f);if(c.controller.signal?.aborted)throw new xr;return this._addRun(X(this,un,"m",ql).call(this))}static createThreadAssistantStream(e,n,r){const s=new ji;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const a=new ji;return a._run(()=>a._runAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return X(this,qf,"f")}currentRun(){return X(this,Hf,"f")}currentMessageSnapshot(){return X(this,Rr,"f")}currentRunStepSnapshot(){return X(this,ru,"f")}async finalRunSteps(){return await this.done(),Object.values(X(this,Fr,"f"))}async finalMessages(){return await this.done(),Object.values(X(this,Uf,"f"))}async finalRun(){if(await this.done(),!X(this,Li,"f"))throw Error("Final run was not received.");return X(this,Li,"f")}async _createThreadAssistantStream(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},l=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const c of l)X(this,un,"m",Ul).call(this,c);if(l.controller.signal?.aborted)throw new xr;return this._addRun(X(this,un,"m",ql).call(this))}async _createAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},c=await e.create(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of c)X(this,un,"m",Ul).call(this,f);if(c.controller.signal?.aborted)throw new xr;return this._addRun(X(this,un,"m",ql).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let a=e[r];if(a==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(dg(a)&&dg(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(l=>typeof l=="string"||typeof l=="number")){a.push(...s);continue}for(const l of s){if(!dg(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const c=l.index;if(c==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const f=a[c];f==null?a.push(l):a[c]=this.accumulateDelta(f,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}ji=su,Ul=function(e){if(!this.ended)switch($e(this,qf,e),X(this,un,"m",M1).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":X(this,un,"m",z1).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":X(this,un,"m",O1).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":X(this,un,"m",T1).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},ql=function(){if(this.ended)throw new Ie("stream has ended, this shouldn't happen");if(!X(this,Li,"f"))throw Error("Final run has not been received");return X(this,Li,"f")},T1=function(e){const[n,r]=X(this,un,"m",I1).call(this,e,X(this,Rr,"f"));$e(this,Rr,n),X(this,Uf,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,l=n.content[s.index];if(l&&l.type=="text")this._emit("textDelta",a,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=X(this,eo,"f")){if(X(this,Di,"f"))switch(X(this,Di,"f").type){case"text":this._emit("textDone",X(this,Di,"f").text,X(this,Rr,"f"));break;case"image_file":this._emit("imageFileDone",X(this,Di,"f").image_file,X(this,Rr,"f"));break}$e(this,eo,s.index)}$e(this,Di,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(X(this,eo,"f")!==void 0){const s=e.data.content[X(this,eo,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,X(this,Rr,"f"));break;case"text":this._emit("textDone",s.text,X(this,Rr,"f"));break}}X(this,Rr,"f")&&this._emit("messageDone",e.data),$e(this,Rr,void 0)}},O1=function(e){const n=X(this,un,"m",N1).call(this,e);switch($e(this,ru,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==X(this,kd,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(X(this,Yn,"f")&&this._emit("toolCallDone",X(this,Yn,"f")),$e(this,kd,a.index),$e(this,Yn,n.step_details.tool_calls[a.index]),X(this,Yn,"f")&&this._emit("toolCallCreated",X(this,Yn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":$e(this,ru,void 0),e.data.step_details.type=="tool_calls"&&X(this,Yn,"f")&&(this._emit("toolCallDone",X(this,Yn,"f")),$e(this,Yn,void 0)),this._emit("runStepDone",e.data,n);break}},M1=function(e){X(this,My,"f").push(e),this._emit("event",e)},N1=function(e){switch(e.event){case"thread.run.step.created":return X(this,Fr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=X(this,Fr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=ji.accumulateDelta(n,r.delta);X(this,Fr,"f")[e.data.id]=s}return X(this,Fr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":X(this,Fr,"f")[e.data.id]=e.data;break}if(X(this,Fr,"f")[e.data.id])return X(this,Fr,"f")[e.data.id];throw new Error("No snapshot available")},I1=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let l=n.content[a.index];n.content[a.index]=X(this,un,"m",D1).call(this,a,l)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},D1=function(e,n){return ji.accumulateDelta(n,e)},z1=function(e){switch($e(this,Hf,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":$e(this,Li,e.data),X(this,Yn,"f")&&(this._emit("toolCallDone",X(this,Yn,"f")),$e(this,Yn,void 0));break}};let K0=class extends Te{constructor(){super(...arguments),this.steps=new qR(this._client)}create(e,n,r){const{include:s,...a}=n;return this._client.post(de`/threads/${e}/runs`,{query:{include:s},body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(de`/threads/${s}/runs/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(de`/threads/${s}/runs/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(de`/threads/${e}/runs`,Bt,{query:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(de`/threads/${s}/runs/${e}/cancel`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return su.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await Nu(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return su.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...a}=n;return this._client.post(de`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return su.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};K0.Steps=qR;class Wd extends Te{constructor(){super(...arguments),this.runs=new K0(this._client),this.messages=new UR(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(de`/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(de`/threads/${e}`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(de`/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return su.createThreadAssistantStream(e,this._client.beta.threads,n)}}Wd.Runs=K0;Wd.Messages=UR;class So extends Te{constructor(){super(...arguments),this.realtime=new Jd(this._client),this.chatkit=new Xd(this._client),this.assistants=new LR(this._client),this.threads=new Wd(this._client)}}So.Realtime=Jd;So.ChatKit=Xd;So.Assistants=LR;So.Threads=Wd;class HR extends Te{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class VR extends Te{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(de`/containers/${s}/files/${e}/content`,{...r,headers:we([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let G0=class extends Te{constructor(){super(...arguments),this.content=new VR(this._client)}create(e,n,r){return this._client.post(de`/containers/${e}/files`,Gi({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(de`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(de`/containers/${e}/files`,Bt,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(de`/containers/${s}/files/${e}`,{...r,headers:we([{Accept:"*/*"},r?.headers])})}};G0.Content=VR;class Q0 extends Te{constructor(){super(...arguments),this.files=new G0(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(de`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Bt,{query:e,...n})}delete(e,n){return this._client.delete(de`/containers/${e}`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}}Q0.Files=G0;class KR extends Te{create(e,n,r){const{include:s,...a}=n;return this._client.post(de`/conversations/${e}/items`,{query:{include:s},body:a,...r})}retrieve(e,n,r){const{conversation_id:s,...a}=n;return this._client.get(de`/conversations/${s}/items/${e}`,{query:a,...r})}list(e,n={},r){return this._client.getAPIList(de`/conversations/${e}/items`,bd,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(de`/conversations/${s}/items/${e}`,r)}}class Z0 extends Te{constructor(){super(...arguments),this.items=new KR(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(de`/conversations/${e}`,n)}update(e,n,r){return this._client.post(de`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(de`/conversations/${e}`,n)}}Z0.Items=KR;class GR extends Te{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&ln(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?a:(ln(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(l=>(l&&l.data&&l.data.forEach(c=>{const f=c.embedding;c.embedding=i$(f)}),l)))}}class QR extends Te{retrieve(e,n,r){const{eval_id:s,run_id:a}=n;return this._client.get(de`/evals/${s}/runs/${a}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...a}=n;return this._client.getAPIList(de`/evals/${s}/runs/${e}/output_items`,Bt,{query:a,...r})}}class Y0 extends Te{constructor(){super(...arguments),this.outputItems=new QR(this._client)}create(e,n,r){return this._client.post(de`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(de`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(de`/evals/${e}/runs`,Bt,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(de`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(de`/evals/${s}/runs/${e}`,r)}}Y0.OutputItems=QR;class J0 extends Te{constructor(){super(...arguments),this.runs=new Y0(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(de`/evals/${e}`,n)}update(e,n,r){return this._client.post(de`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Bt,{query:e,...n})}delete(e,n){return this._client.delete(de`/evals/${e}`,n)}}J0.Runs=Y0;let ZR=class extends Te{create(e,n){return this._client.post("/files",Gi({body:e,...n},this._client))}retrieve(e,n){return this._client.get(de`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Bt,{query:e,...n})}delete(e,n){return this._client.delete(de`/files/${e}`,n)}content(e,n){return this._client.get(de`/files/${e}/content`,{...n,headers:we([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let l=await this.retrieve(e);for(;!l.status||!s.has(l.status);)if(await Nu(n),l=await this.retrieve(e),Date.now()-a>r)throw new j0({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return l}};class YR extends Te{}let JR=class extends Te{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class X0 extends Te{constructor(){super(...arguments),this.graders=new JR(this._client)}}X0.Graders=JR;class XR extends Te{create(e,n,r){return this._client.getAPIList(de`/fine_tuning/checkpoints/${e}/permissions`,Yd,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(de`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(de`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let W0=class extends Te{constructor(){super(...arguments),this.permissions=new XR(this._client)}};W0.Permissions=XR;class WR extends Te{list(e,n={},r){return this._client.getAPIList(de`/fine_tuning/jobs/${e}/checkpoints`,Bt,{query:n,...r})}}class ev extends Te{constructor(){super(...arguments),this.checkpoints=new WR(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(de`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Bt,{query:e,...n})}cancel(e,n){return this._client.post(de`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(de`/fine_tuning/jobs/${e}/events`,Bt,{query:n,...r})}pause(e,n){return this._client.post(de`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(de`/fine_tuning/jobs/${e}/resume`,n)}}ev.Checkpoints=WR;class wo extends Te{constructor(){super(...arguments),this.methods=new YR(this._client),this.jobs=new ev(this._client),this.checkpoints=new W0(this._client),this.alpha=new X0(this._client)}}wo.Methods=YR;wo.Jobs=ev;wo.Checkpoints=W0;wo.Alpha=X0;class eA extends Te{}class tv extends Te{constructor(){super(...arguments),this.graderModels=new eA(this._client)}}tv.GraderModels=eA;class tA extends Te{createVariation(e,n){return this._client.post("/images/variations",Gi({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Gi({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class nA extends Te{retrieve(e,n){return this._client.get(de`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Yd,e)}delete(e,n){return this._client.delete(de`/models/${e}`,n)}}class rA extends Te{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class sA extends Te{accept(e,n,r){return this._client.post(de`/realtime/calls/${e}/accept`,{body:n,...r,headers:we([{Accept:"*/*"},r?.headers])})}hangup(e,n){return this._client.post(de`/realtime/calls/${e}/hangup`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}refer(e,n,r){return this._client.post(de`/realtime/calls/${e}/refer`,{body:n,...r,headers:we([{Accept:"*/*"},r?.headers])})}reject(e,n={},r){return this._client.post(de`/realtime/calls/${e}/reject`,{body:n,...r,headers:we([{Accept:"*/*"},r?.headers])})}}class iA extends Te{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class eh extends Te{constructor(){super(...arguments),this.clientSecrets=new iA(this._client),this.calls=new sA(this._client)}}eh.ClientSecrets=iA;eh.Calls=sA;function o$(t,e){return!e||!u$(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:aA(t,e)}function aA(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:d$(e,s)};if(s.type==="message"){const a=s.content.map(l=>l.type==="output_text"?{...l,parsed:l$(e,l.text)}:l);return{...s,content:a}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||Ny(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function l$(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function u$(t){return!!$0(t.text?.format)}function c$(t){return t?.$brand==="auto-parseable-tool"}function f$(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function d$(t,e){const n=f$(t.tools??[],e.name);return{...e,...e,parsed_arguments:c$(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function Ny(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Ua,wf,Gs,_f,j1,L1,P1,F1;class nv extends U0{constructor(e){super(),Ua.add(this),wf.set(this,void 0),Gs.set(this,void 0),_f.set(this,void 0),$e(this,wf,e)}static createResponse(e,n,r){const s=new nv(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),X(this,Ua,"m",j1).call(this);let a,l=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const c of a)X(this,Ua,"m",L1).call(this,c,l);if(a.controller.signal?.aborted)throw new xr;return X(this,Ua,"m",P1).call(this)}[(wf=new WeakMap,Gs=new WeakMap,_f=new WeakMap,Ua=new WeakSet,j1=function(){this.ended||$e(this,Gs,void 0)},L1=function(n,r){if(this.ended)return;const s=(l,c)=>{(r==null||c.sequence_number>r)&&this._emit(l,c)},a=X(this,Ua,"m",F1).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const l=a.output[n.output_index];if(!l)throw new Ie(`missing output at index ${n.output_index}`);if(l.type==="message"){const c=l.content[n.content_index];if(!c)throw new Ie(`missing content at index ${n.content_index}`);if(c.type!=="output_text")throw new Ie(`expected content to be 'output_text', got ${c.type}`);s("response.output_text.delta",{...n,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const l=a.output[n.output_index];if(!l)throw new Ie(`missing output at index ${n.output_index}`);l.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:s(n.type,n);break}},P1=function(){if(this.ended)throw new Ie("stream has ended, this shouldn't happen");const n=X(this,Gs,"f");if(!n)throw new Ie("request ended without sending any events");$e(this,Gs,void 0);const r=h$(n,X(this,wf,"f"));return $e(this,_f,r),r},F1=function(n){let r=X(this,Gs,"f");if(!r){if(n.type!=="response.created")throw new Ie(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=$e(this,Gs,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new Ie(`missing output at index ${n.output_index}`);const a=s.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?s.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(l));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new Ie(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new Ie(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Ie(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new Ie(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new Ie(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const a=s.content?.[n.content_index];if(!a)throw new Ie(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Ie(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{$e(this,Gs,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=X(this,_f,"f");if(!e)throw new Ie("stream ended without producing a ChatCompletion");return e}}function h$(t,e){return o$(t,e)}class oA extends Te{list(e,n={},r){return this._client.getAPIList(de`/responses/${e}/input_items`,Bt,{query:n,...r})}}class lA extends Te{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class th extends Te{constructor(){super(...arguments),this.inputItems=new oA(this._client),this.inputTokens=new lA(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Ny(r),r))}retrieve(e,n={},r){return this._client.get(de`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&Ny(s),s))}delete(e,n){return this._client.delete(de`/responses/${e}`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>aA(r,e))}stream(e,n){return nv.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(de`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}th.InputItems=oA;th.InputTokens=lA;class uA extends Te{create(e,n,r){return this._client.post(de`/uploads/${e}/parts`,Gi({body:n,...r},this._client))}}class rv extends Te{constructor(){super(...arguments),this.parts=new uA(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(de`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(de`/uploads/${e}/complete`,{body:n,...r})}}rv.Parts=uA;const p$=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class cA extends Te{create(e,n,r){return this._client.post(de`/vector_stores/${e}/file_batches`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(de`/vector_stores/${s}/file_batches/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(de`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...a}=n;return this._client.getAPIList(de`/vector_stores/${s}/file_batches/${e}/files`,Bt,{query:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const s=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await Nu(c);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=s?.maxConcurrency??5,l=Math.min(a,n.length),c=this._client,f=n.values(),d=[...r];async function m(g){for(let y of g){const x=await c.files.create({file:y,purpose:"assistants"},s);d.push(x.id)}}const p=Array(l).fill(f).map(m);return await p$(p),await this.createAndPoll(e,{file_ids:d})}}class fA extends Te{create(e,n,r){return this._client.post(de`/vector_stores/${e}/files`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(de`/vector_stores/${s}/files/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:s,...a}=n;return this._client.post(de`/vector_stores/${s}/files/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(de`/vector_stores/${e}/files`,Bt,{query:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(de`/vector_stores/${s}/files/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),l=a.data;switch(l.status){case"in_progress":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=a.response.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await Nu(c);break;case"failed":case"completed":return l}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(de`/vector_stores/${s}/files/${e}/content`,Yd,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class nh extends Te{constructor(){super(...arguments),this.files=new fA(this._client),this.fileBatches=new cA(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(de`/vector_stores/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(de`/vector_stores/${e}`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Bt,{query:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(de`/vector_stores/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(de`/vector_stores/${e}/search`,Yd,{body:n,method:"post",...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}nh.Files=fA;nh.FileBatches=cA;class dA extends Te{create(e,n){return this._client.post("/videos",C1({body:e,...n},this._client))}retrieve(e,n){return this._client.get(de`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",bd,{query:e,...n})}delete(e,n){return this._client.delete(de`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(de`/videos/${e}/content`,{query:n,...r,headers:we([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(de`/videos/${e}/remix`,C1({body:n,...r},this._client))}}var Qa,hA,Vf;class pA extends Te{constructor(){super(...arguments),Qa.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");X(this,Qa,"m",hA).call(this,r);const a=we([n]).values,l=X(this,Qa,"m",Vf).call(this,a,"webhook-signature"),c=X(this,Qa,"m",Vf).call(this,a,"webhook-timestamp"),f=X(this,Qa,"m",Vf).call(this,a,"webhook-id"),d=parseInt(c,10);if(isNaN(d))throw new zl("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-d>s)throw new zl("Webhook timestamp is too old");if(d>m+s)throw new zl("Webhook timestamp is too new");const p=l.split(" ").map(S=>S.startsWith("v1,")?S.substring(3):S),g=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),y=f?`${f}.${c}.${e}`:`${c}.${e}`,x=await crypto.subtle.importKey("raw",g,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const S of p)try{const E=Buffer.from(S,"base64");if(await crypto.subtle.verify("HMAC",x,E,new TextEncoder().encode(y)))return}catch{continue}throw new zl("The given webhook signature does not match the expected signature")}}Qa=new WeakSet,hA=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Vf=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var Iy,sv,Kf,mA;class Qe{constructor({baseURL:e=Ba("OPENAI_BASE_URL"),apiKey:n=Ba("OPENAI_API_KEY"),organization:r=Ba("OPENAI_ORG_ID")??null,project:s=Ba("OPENAI_PROJECT_ID")??null,webhookSecret:a=Ba("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(Iy.add(this),Kf.set(this,void 0),this.completions=new HR(this),this.chat=new V0(this),this.embeddings=new GR(this),this.files=new ZR(this),this.images=new tA(this),this.audio=new Du(this),this.moderations=new rA(this),this.models=new nA(this),this.fineTuning=new wo(this),this.graders=new tv(this),this.vectorStores=new nh(this),this.webhooks=new pA(this),this.beta=new So(this),this.batches=new jR(this),this.uploads=new rv(this),this.responses=new th(this),this.realtime=new eh(this),this.conversations=new Z0(this),this.evals=new J0(this),this.containers=new Q0(this),this.videos=new dA(this),n===void 0)throw new Ie("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:n,organization:r,project:s,webhookSecret:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&mF())throw new Ie(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??sv.DEFAULT_TIMEOUT,this.logger=c.logger??console;const f="warn";this.logLevel=f,this.logLevel=w1(c.logLevel,"ClientOptions.logLevel",this)??w1(Ba("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??xF(),$e(this,Kf,wF),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return we([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return AF(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Ka}`}defaultIdempotencyKey(){return`stainless-node-retry-${Pk()}`}makeStatusError(e,n,r,s){return cn.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Ie?r:new Ie(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Ie(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!X(this,Iy,"m",mA).call(this)&&r||this.baseURL,a=cF(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return fF(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new Zd(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const s=await e,a=s.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(s);const{req:l,url:c,timeout:f}=await this.buildRequest(s,{retryCount:a-n});await this.prepareRequest(l,{url:c,options:s});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(ln(this).debug(`[${d}] sending request`,Ni({retryOfRequestLogID:r,method:s.method,url:c,options:s,headers:l.headers})),s.signal?.aborted)throw new xr;const g=new AbortController,y=await this.fetchWithTimeout(c,l,f,g).catch(Sy),x=Date.now();if(y instanceof globalThis.Error){const C=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new xr;const k=xy(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return ln(this).info(`[${d}] connection ${k?"timed out":"failed"} - ${C}`),ln(this).debug(`[${d}] connection ${k?"timed out":"failed"} (${C})`,Ni({retryOfRequestLogID:r,url:c,durationMs:x-p,message:y.message})),this.retryRequest(s,n,r??d);throw ln(this).info(`[${d}] connection ${k?"timed out":"failed"} - error; no more retries left`),ln(this).debug(`[${d}] connection ${k?"timed out":"failed"} (error; no more retries left)`,Ni({retryOfRequestLogID:r,url:c,durationMs:x-p,message:y.message})),k?new j0:new Gd({cause:y})}const S=[...y.headers.entries()].filter(([C])=>C==="x-request-id").map(([C,k])=>", "+C+": "+JSON.stringify(k)).join(""),E=`[${d}${m}${S}] ${l.method} ${c} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${x-p}ms`;if(!y.ok){const C=await this.shouldRetry(y);if(n&&C){const z=`retrying, ${n} attempts remaining`;return await SF(y.body),ln(this).info(`${E} - ${z}`),ln(this).debug(`[${d}] response error (${z})`,Ni({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:x-p})),this.retryRequest(s,n,r??d,y.headers)}const k=C?"error; no more retries left":"error; not retryable";ln(this).info(`${E} - ${k}`);const R=await y.text().catch(z=>Sy(z).message),I=pF(R),j=I?void 0:R;throw ln(this).debug(`[${d}] response error (${k})`,Ni({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,message:j,durationMs:Date.now()-p})),this.makeStatusError(y.status,I,j,y.headers)}return ln(this).info(E),ln(this).debug(`[${d}] response start`,Ni({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:x-p})),{response:y,options:s,controller:g,requestLogID:d,retryOfRequestLogID:r,startTime:p}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new LF(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:a,method:l,...c}=n||{};a&&a.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m={signal:s.signal,...d?{duplex:"half"}:{},method:"GET",...c};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let a;const l=s?.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(a=f)}const c=s?.get("retry-after");if(c&&!a){const f=parseFloat(c);Number.isNaN(f)?a=Date.parse(c)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,f)}return await Nu(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:a,query:l,defaultBaseURL:c}=r,f=this.buildURL(a,l,c);"timeout"in r&&hF("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:d,body:m}=this.buildBody({options:r}),p=await this.buildHeaders({options:e,method:s,bodyHeaders:d,retryCount:n});return{req:{method:s,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=we([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...bF(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=we([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Jk(e)}:X(this,Kf,"f").call(this,{body:e,headers:r})}}sv=Qe,Kf=new WeakMap,Iy=new WeakSet,mA=function(){return this.baseURL!=="https://api.openai.com/v1"};Qe.OpenAI=sv;Qe.DEFAULT_TIMEOUT=6e5;Qe.OpenAIError=Ie;Qe.APIError=cn;Qe.APIConnectionError=Gd;Qe.APIConnectionTimeoutError=j0;Qe.APIUserAbortError=xr;Qe.NotFoundError=Uk;Qe.ConflictError=qk;Qe.RateLimitError=Vk;Qe.BadRequestError=Fk;Qe.AuthenticationError=$k;Qe.InternalServerError=Kk;Qe.PermissionDeniedError=Bk;Qe.UnprocessableEntityError=Hk;Qe.InvalidWebhookSignatureError=zl;Qe.toFile=UF;Qe.Completions=HR;Qe.Chat=V0;Qe.Embeddings=GR;Qe.Files=ZR;Qe.Images=tA;Qe.Audio=Du;Qe.Moderations=rA;Qe.Models=nA;Qe.FineTuning=wo;Qe.Graders=tv;Qe.VectorStores=nh;Qe.Webhooks=pA;Qe.Beta=So;Qe.Batches=jR;Qe.Uploads=rv;Qe.Responses=th;Qe.Realtime=eh;Qe.Conversations=Z0;Qe.Evals=J0;Qe.Containers=Q0;Qe.Videos=dA;class m$ extends Qe{constructor(e){super({...e,dangerouslyAllowBrowser:!0})}}function g$(t){return new m$({apiKey:t.apiKey,organization:t.organization,baseURL:t.baseURL})}function y$(t){return`${t}-${Date.now()}-${Math.random().toString(36).substring(7)}`}class v$ extends V6{constructor(e,n){super({},n),this.kind="text",this.name="openai",this.client=g$(e)}async*chatStream(e){const n=new Map,r=this.mapTextOptionsToOpenAI(e);try{const s=await this.client.responses.create({...r,stream:!0},{headers:e.request?.headers,signal:e.request?.signal});yield*this.processOpenAIStreamChunks(s,n,e,()=>y$(this.name))}catch(s){const a=s;throw console.error(">>> chatStream: Fatal error during response creation <<<"),console.error(">>> Error message:",a.message),console.error(">>> Error stack:",a.stack),console.error(">>> Full error:",a),s}}async structuredOutput(e){const{chatOptions:n,outputSchema:r}=e,s=this.mapTextOptionsToOpenAI(n),a=tu(r,r.required||[]);try{const l=await this.client.responses.create({...s,stream:!1,text:{format:{type:"json_schema",name:"structured_output",schema:a,strict:!0}}},{headers:n.request?.headers,signal:n.request?.signal}),c=this.extractTextFromResponse(l);let f;try{f=JSON.parse(c)}catch{throw new Error(`Failed to parse structured output as JSON. Content: ${c.slice(0,200)}${c.length>200?"...":""}`)}return{data:by(f),rawText:c}}catch(l){const c=l;throw console.error(">>> structuredOutput: Error during response creation <<<"),console.error(">>> Error message:",c.message),l}}extractTextFromResponse(e){let n="";for(const r of e.output)if(r.type==="message")for(const s of r.content)s.type==="output_text"&&(n+=s.text);return n}async*processOpenAIStreamChunks(e,n,r,s){let a="",l="";const c=Date.now();let f=0,d=!1,m=!1,p=null,g=r.model;try{for await(const y of e){f++;const x=S=>S.type==="output_text"?(a+=S.text,{type:"content",id:p||s(),model:g||r.model,timestamp:c,delta:S.text,content:a,role:"assistant"}):S.type==="reasoning_text"?(l+=S.text,{type:"thinking",id:p||s(),model:g||r.model,timestamp:c,delta:S.text,content:l}):{type:"error",id:p||s(),model:g||r.model,timestamp:c,error:{message:S.refusal}};if((y.type==="response.created"||y.type==="response.incomplete"||y.type==="response.failed")&&(p=y.response.id,g=y.response.model,d=!1,m=!1,a="",l="",y.response.error&&(yield{type:"error",id:y.response.id,model:y.response.model,timestamp:c,error:y.response.error}),y.response.incomplete_details&&(yield{type:"error",id:y.response.id,model:y.response.model,timestamp:c,error:{message:y.response.incomplete_details.reason??""}})),y.type==="response.output_text.delta"&&y.delta){const S=Array.isArray(y.delta)?y.delta.join(""):typeof y.delta=="string"?y.delta:"";S&&(a+=S,d=!0,yield{type:"content",id:p||s(),model:g||r.model,timestamp:c,delta:S,content:a,role:"assistant"})}if(y.type==="response.reasoning_text.delta"&&y.delta){const S=Array.isArray(y.delta)?y.delta.join(""):typeof y.delta=="string"?y.delta:"";S&&(l+=S,m=!0,yield{type:"thinking",id:p||s(),model:g||r.model,timestamp:c,delta:S,content:l})}if(y.type==="response.reasoning_summary_text.delta"&&y.delta){const S=typeof y.delta=="string"?y.delta:"";S&&(l+=S,m=!0,yield{type:"thinking",id:p||s(),model:g||r.model,timestamp:c,delta:S,content:l})}if(y.type==="response.content_part.added"){const S=y.part;yield x(S)}if(y.type==="response.content_part.done"){const S=y.part;if(S.type==="output_text"&&d||S.type==="reasoning_text"&&m)continue;yield x(S)}if(y.type==="response.output_item.added"){const S=y.item;S.type==="function_call"&&S.id&&(n.has(S.id)||n.set(S.id,{index:y.output_index,name:S.name||""}))}if(y.type==="response.function_call_arguments.done"){const{item_id:S,output_index:E}=y,k=n.get(S)?.name||"";yield{type:"tool_call",id:p||s(),model:g||r.model,timestamp:c,index:E,toolCall:{id:S,type:"function",function:{name:k,arguments:y.arguments}}}}if(y.type==="response.completed"){const S=y.response.output.some(E=>E.type==="function_call");yield{type:"done",id:p||s(),model:g||r.model,timestamp:c,usage:{promptTokens:y.response.usage?.input_tokens||0,completionTokens:y.response.usage?.output_tokens||0,totalTokens:y.response.usage?.total_tokens||0},finishReason:S?"tool_calls":"stop"}}y.type==="error"&&(yield{type:"error",id:p||s(),model:g||r.model,timestamp:c,error:{message:y.message,code:y.code??void 0}})}}catch(y){const x=y;console.log("[OpenAI Adapter] Stream ended with error. Event type summary:",{totalChunks:f,error:x.message}),yield{type:"error",id:s(),model:r.model,timestamp:c,error:{message:x.message||"Unknown error occurred",code:x.code}}}}mapTextOptionsToOpenAI(e){const n=e.modelOptions,r=this.convertMessagesToInput(e.messages);n&&G6({...n,model:e.model});const s=e.tools?lF(e.tools):void 0;return{model:e.model,temperature:e.temperature,max_output_tokens:e.maxTokens,top_p:e.topP,metadata:e.metadata,instructions:e.systemPrompts?.join(`
`),...n,input:r,tools:s}}convertMessagesToInput(e){const n=[];for(const r of e){if(r.role==="tool"){n.push({type:"function_call_output",call_id:r.toolCallId||"",output:typeof r.content=="string"?r.content:JSON.stringify(r.content)});continue}if(r.role==="assistant"){if(r.toolCalls&&r.toolCalls.length>0)for(const l of r.toolCalls){const c=typeof l.function.arguments=="string"?l.function.arguments:JSON.stringify(l.function.arguments);n.push({type:"function_call",call_id:l.id,name:l.function.name,arguments:c})}if(r.content){const l=this.extractTextContent(r.content);l&&n.push({type:"message",role:"assistant",content:l})}continue}const s=this.normalizeContent(r.content),a=[];for(const l of s)a.push(this.convertContentPartToOpenAI(l));a.length===0&&a.push({type:"input_text",text:""}),n.push({type:"message",role:"user",content:a})}return n}convertContentPartToOpenAI(e){switch(e.type){case"text":return{type:"input_text",text:e.content};case"image":{const n=e.metadata;return e.source.type==="url"?{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}:{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}}case"audio":return e.source.type==="url"?{type:"input_file",file_url:e.source.value}:{type:"input_file",file_data:e.source.value};default:throw new Error(`Unsupported content part type: ${e.type}`)}}normalizeContent(e){return e===null?[]:typeof e=="string"?[{type:"text",content:e}]:e}extractTextContent(e){return e===null?"":typeof e=="string"?e:e.filter(n=>n.type==="text").map(n=>n.content).join("")}}const $1={ai:{model:"gpt-4o"}};function Dy(){return typeof window<"u"&&window.__APP_CONFIG__?{...$1,...window.__APP_CONFIG__}:$1}function b$(t){const e=`${window.location.origin}/openai/v1`;return new v$({apiKey:"not-needed",baseURL:e},t)}function x$(){return Dy().ai?.model||"gpt-5.1"}function ue(t,e,n){function r(c,f){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:f,constr:l,traits:new Set},enumerable:!1}),c._zod.traits.has(t))return;c._zod.traits.add(t),e(c,f);const d=l.prototype,m=Object.keys(d);for(let p=0;p<m.length;p++){const g=m[p];g in c||(c[g]=d[g].bind(c))}}const s=n?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function l(c){var f;const d=n?.Parent?new a:this;r(d,c),(f=d._zod).deferred??(f.deferred=[]);for(const m of d._zod.deferred)m();return d}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:c=>n?.Parent&&c instanceof n.Parent?!0:c?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class io extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class gA extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const yA={};function Qi(t){return yA}function vA(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function zy(t,e){return typeof e=="bigint"?e.toString():e}function iv(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function av(t){return t==null}function ov(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const B1=Symbol("evaluating");function yt(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==B1)return r===void 0&&(r=B1,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Wi(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function li(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function U1(t){return JSON.stringify(t)}function S$(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const bA="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Rd(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const w$=iv(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function xu(t){if(Rd(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Rd(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function xA(t){return xu(t)?{...t}:Array.isArray(t)?[...t]:t}const _$=new Set(["string","number","symbol"]);function rh(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ui(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function Be(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function C$(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function E$(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=li(t._zod.def,{get shape(){const l={};for(const c in e){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&(l[c]=n.shape[c])}return Wi(this,"shape",l),l},checks:[]});return ui(t,a)}function k$(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=li(t._zod.def,{get shape(){const l={...t._zod.def.shape};for(const c in e){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&delete l[c]}return Wi(this,"shape",l),l},checks:[]});return ui(t,a)}function R$(t,e){if(!xu(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const a=t._zod.def.shape;for(const l in e)if(Object.getOwnPropertyDescriptor(a,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=li(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return Wi(this,"shape",a),a}});return ui(t,s)}function A$(t,e){if(!xu(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=li(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return Wi(this,"shape",r),r}});return ui(t,n)}function T$(t,e){const n=li(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Wi(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return ui(t,n)}function O$(t,e,n){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=li(e._zod.def,{get shape(){const c=e._zod.def.shape,f={...c};if(n)for(const d in n){if(!(d in c))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(f[d]=t?new t({type:"optional",innerType:c[d]}):c[d])}else for(const d in c)f[d]=t?new t({type:"optional",innerType:c[d]}):c[d];return Wi(this,"shape",f),f},checks:[]});return ui(e,l)}function M$(t,e,n){const r=li(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new t({type:"nonoptional",innerType:s[l]});return Wi(this,"shape",a),a}});return ui(e,r)}function to(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function SA(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Cf(t){return typeof t=="string"?t:t?.message}function Zi(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const s=Cf(t.inst?._zod.def?.error?.(t))??Cf(e?.error?.(t))??Cf(n.customError?.(t))??Cf(n.localeError?.(t))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function lv(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Su(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const wA=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,zy,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},_A=ue("$ZodError",wA),CA=ue("$ZodError",wA,{Parent:Error});function N$(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function I$(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,c=0;for(;c<a.path.length;){const f=a.path[c];c===a.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(a))):l[f]=l[f]||{_errors:[]},l=l[f],c++}}};return r(t),n}const uv=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new io;if(l.issues.length){const c=new(s?.Err??t)(l.issues.map(f=>Zi(f,a,Qi())));throw bA(c,s?.callee),c}return l.value},cv=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const c=new(s?.Err??t)(l.issues.map(f=>Zi(f,a,Qi())));throw bA(c,s?.callee),c}return l.value},sh=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new io;return a.issues.length?{success:!1,error:new(t??_A)(a.issues.map(l=>Zi(l,s,Qi())))}:{success:!0,data:a.value}},D$=sh(CA),ih=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>Zi(l,s,Qi())))}:{success:!0,data:a.value}},z$=ih(CA),j$=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return uv(t)(e,n,s)},L$=t=>(e,n,r)=>uv(t)(e,n,r),P$=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return cv(t)(e,n,s)},F$=t=>async(e,n,r)=>cv(t)(e,n,r),$$=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return sh(t)(e,n,s)},B$=t=>(e,n,r)=>sh(t)(e,n,r),U$=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return ih(t)(e,n,s)},q$=t=>async(e,n,r)=>ih(t)(e,n,r),H$=/^[cC][^\s-]{8,}$/,V$=/^[0-9a-z]+$/,K$=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,G$=/^[0-9a-vA-V]{20}$/,Q$=/^[A-Za-z0-9]{27}$/,Z$=/^[a-zA-Z0-9_-]{21}$/,Y$=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,J$=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,q1=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,X$=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,W$="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function eB(){return new RegExp(W$,"u")}const tB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,nB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,rB=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,sB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,iB=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,EA=/^[A-Za-z0-9_-]*$/,aB=/^\+[1-9]\d{6,14}$/,kA="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",oB=new RegExp(`^${kA}$`);function RA(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function lB(t){return new RegExp(`^${RA(t)}$`)}function uB(t){const e=RA({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${kA}T(?:${r})$`)}const cB=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},fB=/^[^A-Z]*$/,dB=/^[^a-z]*$/,Vr=ue("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),hB=ue("$ZodCheckMaxLength",(t,e)=>{var n;Vr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!av(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=lv(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),pB=ue("$ZodCheckMinLength",(t,e)=>{var n;Vr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!av(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=lv(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),mB=ue("$ZodCheckLengthEquals",(t,e)=>{var n;Vr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!av(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const l=lv(s),c=a>e.length;r.issues.push({origin:l,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),ah=ue("$ZodCheckStringFormat",(t,e)=>{var n,r;Vr.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),gB=ue("$ZodCheckRegex",(t,e)=>{ah.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),yB=ue("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=fB),ah.init(t,e)}),vB=ue("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=dB),ah.init(t,e)}),bB=ue("$ZodCheckIncludes",(t,e)=>{Vr.init(t,e);const n=rh(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),xB=ue("$ZodCheckStartsWith",(t,e)=>{Vr.init(t,e);const n=new RegExp(`^${rh(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),SB=ue("$ZodCheckEndsWith",(t,e)=>{Vr.init(t,e);const n=new RegExp(`.*${rh(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),wB=ue("$ZodCheckOverwrite",(t,e)=>{Vr.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class _B{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const CB={major:4,minor:3,patch:4},Qt=ue("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=CB;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const a of s._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(l,c,f)=>{let d=to(l),m;for(const p of c){if(p._zod.def.when){if(!p._zod.def.when(l))continue}else if(d)continue;const g=l.issues.length,y=p._zod.check(l);if(y instanceof Promise&&f?.async===!1)throw new io;if(m||y instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await y,l.issues.length!==g&&(d||(d=to(l,g)))});else{if(l.issues.length===g)continue;d||(d=to(l,g))}}return m?m.then(()=>l):l},a=(l,c,f)=>{if(to(l))return l.aborted=!0,l;const d=s(c,r,f);if(d instanceof Promise){if(f.async===!1)throw new io;return d.then(m=>t._zod.parse(m,f))}return t._zod.parse(d,f)};t._zod.run=(l,c)=>{if(c.skipChecks)return t._zod.parse(l,c);if(c.direction==="backward"){const d=t._zod.parse({value:l.value,issues:[]},{...c,skipChecks:!0});return d instanceof Promise?d.then(m=>a(m,l,c)):a(d,l,c)}const f=t._zod.parse(l,c);if(f instanceof Promise){if(c.async===!1)throw new io;return f.then(d=>s(d,r,c))}return s(f,r,c)}}yt(t,"~standard",()=>({validate:s=>{try{const a=D$(t,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return z$(t,s).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),fv=ue("$ZodString",(t,e)=>{Qt.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??cB(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),Tt=ue("$ZodStringFormat",(t,e)=>{ah.init(t,e),fv.init(t,e)}),EB=ue("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=J$),Tt.init(t,e)}),kB=ue("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=q1(r))}else e.pattern??(e.pattern=q1());Tt.init(t,e)}),RB=ue("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=X$),Tt.init(t,e)}),AB=ue("$ZodURL",(t,e)=>{Tt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),TB=ue("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=eB()),Tt.init(t,e)}),OB=ue("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=Z$),Tt.init(t,e)}),MB=ue("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=H$),Tt.init(t,e)}),NB=ue("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=V$),Tt.init(t,e)}),IB=ue("$ZodULID",(t,e)=>{e.pattern??(e.pattern=K$),Tt.init(t,e)}),DB=ue("$ZodXID",(t,e)=>{e.pattern??(e.pattern=G$),Tt.init(t,e)}),zB=ue("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=Q$),Tt.init(t,e)}),jB=ue("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=uB(e)),Tt.init(t,e)}),LB=ue("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=oB),Tt.init(t,e)}),PB=ue("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=lB(e)),Tt.init(t,e)}),FB=ue("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=Y$),Tt.init(t,e)}),$B=ue("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=tB),Tt.init(t,e),t._zod.bag.format="ipv4"}),BB=ue("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=nB),Tt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),UB=ue("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=rB),Tt.init(t,e)}),qB=ue("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=sB),Tt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function AA(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const HB=ue("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=iB),Tt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{AA(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function VB(t){if(!EA.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return AA(n)}const KB=ue("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=EA),Tt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{VB(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),GB=ue("$ZodE164",(t,e)=>{e.pattern??(e.pattern=aB),Tt.init(t,e)});function QB(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const ZB=ue("$ZodJWT",(t,e)=>{Tt.init(t,e),t._zod.check=n=>{QB(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),YB=ue("$ZodUnknown",(t,e)=>{Qt.init(t,e),t._zod.parse=n=>n}),JB=ue("$ZodNever",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function H1(t,e,n){t.issues.length&&e.issues.push(...SA(n,t.issues)),e.value[n]=t.value}const XB=ue("$ZodArray",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const c=s[l],f=e.element._zod.run({value:c,issues:[]},r);f instanceof Promise?a.push(f.then(d=>H1(d,n,l))):H1(f,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function Ad(t,e,n,r,s){if(t.issues.length){if(s&&!(n in r))return;e.issues.push(...SA(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function TA(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=C$(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function OA(t,e,n,r,s,a){const l=[],c=s.keySet,f=s.catchall._zod,d=f.def.type,m=f.optout==="optional";for(const p in e){if(c.has(p))continue;if(d==="never"){l.push(p);continue}const g=f.run({value:e[p],issues:[]},r);g instanceof Promise?t.push(g.then(y=>Ad(y,n,p,e,m))):Ad(g,n,p,e,m)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const WB=ue("$ZodObject",(t,e)=>{if(Qt.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const c=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...c};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=iv(()=>TA(e));yt(t._zod,"propValues",()=>{const c=e.shape,f={};for(const d in c){const m=c[d]._zod;if(m.values){f[d]??(f[d]=new Set);for(const p of m.values)f[d].add(p)}}return f});const s=Rd,a=e.catchall;let l;t._zod.parse=(c,f)=>{l??(l=r.value);const d=c.value;if(!s(d))return c.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),c;c.value={};const m=[],p=l.shape;for(const g of l.keys){const y=p[g],x=y._zod.optout==="optional",S=y._zod.run({value:d[g],issues:[]},f);S instanceof Promise?m.push(S.then(E=>Ad(E,c,g,d,x))):Ad(S,c,g,d,x)}return a?OA(m,d,c,f,r.value,t):m.length?Promise.all(m).then(()=>c):c}}),eU=ue("$ZodObjectJIT",(t,e)=>{WB.init(t,e);const n=t._zod.parse,r=iv(()=>TA(e)),s=g=>{const y=new _B(["shape","payload","ctx"]),x=r.value,S=R=>{const I=U1(R);return`shape[${I}]._zod.run({ value: input[${I}], issues: [] }, ctx)`};y.write("const input = payload.value;");const E=Object.create(null);let C=0;for(const R of x.keys)E[R]=`key_${C++}`;y.write("const newResult = {};");for(const R of x.keys){const I=E[R],j=U1(R),z=g[R]?._zod?.optout==="optional";y.write(`const ${I} = ${S(R)};`),z?y.write(`
        if (${I}.issues.length) {
          if (${j} in input) {
            payload.issues = payload.issues.concat(${I}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${j}, ...iss.path] : [${j}]
            })));
          }
        }
        
        if (${I}.value === undefined) {
          if (${j} in input) {
            newResult[${j}] = undefined;
          }
        } else {
          newResult[${j}] = ${I}.value;
        }
        
      `):y.write(`
        if (${I}.issues.length) {
          payload.issues = payload.issues.concat(${I}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${j}, ...iss.path] : [${j}]
          })));
        }
        
        if (${I}.value === undefined) {
          if (${j} in input) {
            newResult[${j}] = undefined;
          }
        } else {
          newResult[${j}] = ${I}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");const k=y.compile();return(R,I)=>k(g,R,I)};let a;const l=Rd,c=!yA.jitless,d=c&&w$.value,m=e.catchall;let p;t._zod.parse=(g,y)=>{p??(p=r.value);const x=g.value;return l(x)?c&&d&&y?.async===!1&&y.jitless!==!0?(a||(a=s(e.shape)),g=a(g,y),m?OA([],x,g,y,p,t):g):n(g,y):(g.issues.push({expected:"object",code:"invalid_type",input:x,inst:t}),g)}});function V1(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!to(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>Zi(l,r,Qi())))}),e)}const tU=ue("$ZodUnion",(t,e)=>{Qt.init(t,e),yt(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),yt(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),yt(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),yt(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>ov(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let l=!1;const c=[];for(const f of e.options){const d=f._zod.run({value:s.value,issues:[]},a);if(d instanceof Promise)c.push(d),l=!0;else{if(d.issues.length===0)return d;c.push(d)}}return l?Promise.all(c).then(f=>V1(f,s,t,a)):V1(c,s,t,a)}}),nU=ue("$ZodIntersection",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([f,d])=>K1(n,f,d)):K1(n,a,l)}});function jy(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(xu(t)&&xu(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const l=jy(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],l=jy(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function K1(t,e,n){const r=new Map;let s;for(const c of e.issues)if(c.code==="unrecognized_keys"){s??(s=c);for(const f of c.keys)r.has(f)||r.set(f,{}),r.get(f).l=!0}else t.issues.push(c);for(const c of n.issues)if(c.code==="unrecognized_keys")for(const f of c.keys)r.has(f)||r.set(f,{}),r.get(f).r=!0;else t.issues.push(c);const a=[...r].filter(([,c])=>c.l&&c.r).map(([c])=>c);if(a.length&&s&&t.issues.push({...s,keys:a}),to(t))return t;const l=jy(e.value,n.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return t.value=l.data,t}const rU=ue("$ZodEnum",(t,e)=>{Qt.init(t,e);const n=vA(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>_$.has(typeof s)).map(s=>typeof s=="string"?rh(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),sU=ue("$ZodTransform",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new gA(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new io;return n.value=s,n}});function G1(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const MA=ue("$ZodOptional",(t,e)=>{Qt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",yt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),yt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${ov(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>G1(a,n.value)):G1(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),iU=ue("$ZodExactOptional",(t,e)=>{MA.init(t,e),yt(t._zod,"values",()=>e.innerType._zod.values),yt(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),aU=ue("$ZodNullable",(t,e)=>{Qt.init(t,e),yt(t._zod,"optin",()=>e.innerType._zod.optin),yt(t._zod,"optout",()=>e.innerType._zod.optout),yt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${ov(n.source)}|null)$`):void 0}),yt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),oU=ue("$ZodDefault",(t,e)=>{Qt.init(t,e),t._zod.optin="optional",yt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>Q1(a,e)):Q1(s,e)}});function Q1(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const lU=ue("$ZodPrefault",(t,e)=>{Qt.init(t,e),t._zod.optin="optional",yt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),uU=ue("$ZodNonOptional",(t,e)=>{Qt.init(t,e),yt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>Z1(a,t)):Z1(s,t)}});function Z1(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const cU=ue("$ZodCatch",(t,e)=>{Qt.init(t,e),yt(t._zod,"optin",()=>e.innerType._zod.optin),yt(t._zod,"optout",()=>e.innerType._zod.optout),yt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>Zi(l,r,Qi()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>Zi(a,r,Qi()))},input:n.value}),n.issues=[]),n)}}),fU=ue("$ZodPipe",(t,e)=>{Qt.init(t,e),yt(t._zod,"values",()=>e.in._zod.values),yt(t._zod,"optin",()=>e.in._zod.optin),yt(t._zod,"optout",()=>e.out._zod.optout),yt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>Ef(l,e.in,r)):Ef(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>Ef(a,e.out,r)):Ef(s,e.out,r)}});function Ef(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const dU=ue("$ZodReadonly",(t,e)=>{Qt.init(t,e),yt(t._zod,"propValues",()=>e.innerType._zod.propValues),yt(t._zod,"values",()=>e.innerType._zod.values),yt(t._zod,"optin",()=>e.innerType?._zod?.optin),yt(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(Y1):Y1(s)}});function Y1(t){return t.value=Object.freeze(t.value),t}const hU=ue("$ZodCustom",(t,e)=>{Vr.init(t,e),Qt.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>J1(a,n,r,t));J1(s,n,r,t)}});function J1(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Su(s))}}var X1;class pU{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function mU(){return new pU}(X1=globalThis).__zod_globalRegistry??(X1.__zod_globalRegistry=mU());const Hl=globalThis.__zod_globalRegistry;function gU(t,e){return new t({type:"string",...Be(e)})}function yU(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Be(e)})}function W1(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Be(e)})}function vU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Be(e)})}function bU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Be(e)})}function xU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Be(e)})}function SU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Be(e)})}function wU(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Be(e)})}function _U(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Be(e)})}function CU(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Be(e)})}function EU(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Be(e)})}function kU(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Be(e)})}function RU(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Be(e)})}function AU(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Be(e)})}function TU(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Be(e)})}function OU(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Be(e)})}function MU(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Be(e)})}function NU(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Be(e)})}function IU(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Be(e)})}function DU(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Be(e)})}function zU(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Be(e)})}function jU(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Be(e)})}function LU(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Be(e)})}function PU(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Be(e)})}function FU(t,e){return new t({type:"string",format:"date",check:"string_format",...Be(e)})}function $U(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Be(e)})}function BU(t,e){return new t({type:"string",format:"duration",check:"string_format",...Be(e)})}function UU(t){return new t({type:"unknown"})}function qU(t,e){return new t({type:"never",...Be(e)})}function NA(t,e){return new hB({check:"max_length",...Be(e),maximum:t})}function Td(t,e){return new pB({check:"min_length",...Be(e),minimum:t})}function IA(t,e){return new mB({check:"length_equals",...Be(e),length:t})}function HU(t,e){return new gB({check:"string_format",format:"regex",...Be(e),pattern:t})}function VU(t){return new yB({check:"string_format",format:"lowercase",...Be(t)})}function KU(t){return new vB({check:"string_format",format:"uppercase",...Be(t)})}function GU(t,e){return new bB({check:"string_format",format:"includes",...Be(e),includes:t})}function QU(t,e){return new xB({check:"string_format",format:"starts_with",...Be(e),prefix:t})}function ZU(t,e){return new SB({check:"string_format",format:"ends_with",...Be(e),suffix:t})}function _o(t){return new wB({check:"overwrite",tx:t})}function YU(t){return _o(e=>e.normalize(t))}function JU(){return _o(t=>t.trim())}function XU(){return _o(t=>t.toLowerCase())}function WU(){return _o(t=>t.toUpperCase())}function e8(){return _o(t=>S$(t))}function t8(t,e,n){return new t({type:"array",element:e,...Be(n)})}function n8(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Be(n)})}function r8(t){const e=s8(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Su(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Su(s))}},t(n.value,n)));return e}function s8(t,e){const n=new Vr({check:"custom",...Be(e)});return n._zod.check=t,n}function DA(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??Hl,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function fn(t,e,n={path:[],schemaPath:[]}){var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const c=t._zod.toJSONSchema?.();if(c)l.schema=c;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,m);else{const g=l.schema,y=e.processors[s.type];if(!y)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);y(t,e,g,m)}const p=t._zod.parent;p&&(l.ref||(l.ref=p),fn(p,e,m),e.seen.get(p).isParent=!0)}const f=e.metadataRegistry.get(t);return f&&Object.assign(l.schema,f),e.io==="input"&&bn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function zA(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const l of t.seen.entries()){const c=t.metadataRegistry.get(l[0])?.id;if(c){const f=r.get(c);if(f&&f!==l[0])throw new Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(c,l[0])}}const s=l=>{const c=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(l[0])?.id,g=t.external.uri??(x=>x);if(p)return{ref:g(p)};const y=l[1].defId??l[1].schema.id??`schema${t.counter++}`;return l[1].defId=y,{defId:y,ref:`${g("__shared")}#/${c}/${y}`}}if(l[1]===n)return{ref:"#"};const d=`#/${c}/`,m=l[1].schema.id??`__schema${t.counter++}`;return{defId:m,ref:d+m}},a=l=>{if(l[1].schema.$ref)return;const c=l[1],{ref:f,defId:d}=s(l);c.def={...c.schema},d&&(c.defId=d);const m=c.schema;for(const p in m)delete m[p];m.$ref=f};if(t.cycles==="throw")for(const l of t.seen.entries()){const c=l[1];if(c.cycle)throw new Error(`Cycle detected: #/${c.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of t.seen.entries()){const c=l[1];if(e===l[0]){a(l);continue}if(t.external){const d=t.external.registry.get(l[0])?.id;if(e!==l[0]&&d){a(l);continue}}if(t.metadataRegistry.get(l[0])?.id){a(l);continue}if(c.cycle){a(l);continue}if(c.count>1&&t.reused==="ref"){a(l);continue}}}function jA(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{const c=t.seen.get(l);if(c.ref===null)return;const f=c.def??c.schema,d={...f},m=c.ref;if(c.ref=null,m){r(m);const g=t.seen.get(m),y=g.schema;if(y.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(y)):Object.assign(f,y),Object.assign(f,d),l._zod.parent===m)for(const S in f)S==="$ref"||S==="allOf"||S in d||delete f[S];if(y.$ref)for(const S in f)S==="$ref"||S==="allOf"||S in g.def&&JSON.stringify(f[S])===JSON.stringify(g.def[S])&&delete f[S]}const p=l._zod.parent;if(p&&p!==m){r(p);const g=t.seen.get(p);if(g?.schema.$ref&&(f.$ref=g.schema.$ref,g.def))for(const y in f)y==="$ref"||y==="allOf"||y in g.def&&JSON.stringify(f[y])===JSON.stringify(g.def[y])&&delete f[y]}t.override({zodSchema:l,jsonSchema:f,path:c.path??[]})};for(const l of[...t.seen.entries()].reverse())r(l[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const l=t.external.registry.get(e)?.id;if(!l)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(l)}Object.assign(s,n.def??n.schema);const a=t.external?.defs??{};for(const l of t.seen.entries()){const c=l[1];c.def&&c.defId&&(a[c.defId]=c.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const l=JSON.parse(JSON.stringify(s));return Object.defineProperty(l,"~standard",{value:{...e["~standard"],jsonSchema:{input:Od(e,"input",t.processors),output:Od(e,"output",t.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function bn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return bn(r.element,n);if(r.type==="set")return bn(r.valueType,n);if(r.type==="lazy")return bn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return bn(r.innerType,n);if(r.type==="intersection")return bn(r.left,n)||bn(r.right,n);if(r.type==="record"||r.type==="map")return bn(r.keyType,n)||bn(r.valueType,n);if(r.type==="pipe")return bn(r.in,n)||bn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(bn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(bn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(bn(s,n))return!0;return!!(r.rest&&bn(r.rest,n))}return!1}const i8=(t,e={})=>n=>{const r=DA({...n,processors:e});return fn(t,r),zA(r,t),jA(r,t)},Od=(t,e,n={})=>r=>{const{libraryOptions:s,target:a}=r??{},l=DA({...s??{},target:a,io:e,processors:n});return fn(t,l),zA(l,t),jA(l,t)},a8={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},o8=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:l,format:c,patterns:f,contentEncoding:d}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),c&&(s.format=a8[c]??c,s.format===""&&delete s.format,c==="time"&&delete s.format),d&&(s.contentEncoding=d),f&&f.size>0){const m=[...f];m.length===1?s.pattern=m[0].source:m.length>1&&(s.allOf=[...m.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},l8=(t,e,n,r)=>{n.not={}},u8=(t,e,n,r)=>{},c8=(t,e,n,r)=>{const s=t._zod.def,a=vA(s.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},f8=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},d8=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},h8=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:l,maximum:c}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof c=="number"&&(s.maxItems=c),s.type="array",s.items=fn(a.element,e,{...r,path:[...r.path,"items"]})},p8=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",s.properties={};const l=a.shape;for(const d in l)s.properties[d]=fn(l[d],e,{...r,path:[...r.path,"properties",d]});const c=new Set(Object.keys(l)),f=new Set([...c].filter(d=>{const m=a.shape[d]._zod;return e.io==="input"?m.optin===void 0:m.optout===void 0}));f.size>0&&(s.required=Array.from(f)),a.catchall?._zod.def.type==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=fn(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},m8=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,l=s.options.map((c,f)=>fn(c,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=l:n.anyOf=l},g8=(t,e,n,r)=>{const s=t._zod.def,a=fn(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=fn(s.right,e,{...r,path:[...r.path,"allOf",1]}),c=d=>"allOf"in d&&Object.keys(d).length===1,f=[...c(a)?a.allOf:[a],...c(l)?l.allOf:[l]];n.allOf=f},y8=(t,e,n,r)=>{const s=t._zod.def,a=fn(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},v8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},b8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},x8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},S8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},w8=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;fn(a,e,r);const l=e.seen.get(t);l.ref=a},_8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},LA=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},C8=ue("ZodISODateTime",(t,e)=>{jB.init(t,e),Ot.init(t,e)});function E8(t){return PU(C8,t)}const k8=ue("ZodISODate",(t,e)=>{LB.init(t,e),Ot.init(t,e)});function R8(t){return FU(k8,t)}const A8=ue("ZodISOTime",(t,e)=>{PB.init(t,e),Ot.init(t,e)});function T8(t){return $U(A8,t)}const O8=ue("ZodISODuration",(t,e)=>{FB.init(t,e),Ot.init(t,e)});function M8(t){return BU(O8,t)}const N8=(t,e)=>{_A.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>I$(t,n)},flatten:{value:n=>N$(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,zy,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,zy,2)}},isEmpty:{get(){return t.issues.length===0}}})},wr=ue("ZodError",N8,{Parent:Error}),I8=uv(wr),D8=cv(wr),z8=sh(wr),j8=ih(wr),L8=j$(wr),P8=L$(wr),F8=P$(wr),$8=F$(wr),B8=$$(wr),U8=B$(wr),q8=U$(wr),H8=q$(wr),Zt=ue("ZodType",(t,e)=>(Qt.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:Od(t,"input"),output:Od(t,"output")}}),t.toJSONSchema=i8(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(li(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>ui(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>I8(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>z8(t,n,r),t.parseAsync=async(n,r)=>D8(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>j8(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>L8(t,n,r),t.decode=(n,r)=>P8(t,n,r),t.encodeAsync=async(n,r)=>F8(t,n,r),t.decodeAsync=async(n,r)=>$8(t,n,r),t.safeEncode=(n,r)=>B8(t,n,r),t.safeDecode=(n,r)=>U8(t,n,r),t.safeEncodeAsync=async(n,r)=>q8(t,n,r),t.safeDecodeAsync=async(n,r)=>H8(t,n,r),t.refine=(n,r)=>t.check(j9(n,r)),t.superRefine=n=>t.check(L9(n)),t.overwrite=n=>t.check(_o(n)),t.optional=()=>nC(t),t.exactOptional=()=>_9(t),t.nullable=()=>rC(t),t.nullish=()=>nC(rC(t)),t.nonoptional=n=>T9(t,n),t.array=()=>h9(t),t.or=n=>g9([t,n]),t.and=n=>v9(t,n),t.transform=n=>sC(t,S9(n)),t.default=n=>k9(t,n),t.prefault=n=>A9(t,n),t.catch=n=>M9(t,n),t.pipe=n=>sC(t,n),t.readonly=()=>D9(t),t.describe=n=>{const r=t.clone();return Hl.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return Hl.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Hl.get(t);const r=t.clone();return Hl.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),PA=ue("_ZodString",(t,e)=>{fv.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>o8(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(HU(...r)),t.includes=(...r)=>t.check(GU(...r)),t.startsWith=(...r)=>t.check(QU(...r)),t.endsWith=(...r)=>t.check(ZU(...r)),t.min=(...r)=>t.check(Td(...r)),t.max=(...r)=>t.check(NA(...r)),t.length=(...r)=>t.check(IA(...r)),t.nonempty=(...r)=>t.check(Td(1,...r)),t.lowercase=r=>t.check(VU(r)),t.uppercase=r=>t.check(KU(r)),t.trim=()=>t.check(JU()),t.normalize=(...r)=>t.check(YU(...r)),t.toLowerCase=()=>t.check(XU()),t.toUpperCase=()=>t.check(WU()),t.slugify=()=>t.check(e8())}),V8=ue("ZodString",(t,e)=>{fv.init(t,e),PA.init(t,e),t.email=n=>t.check(yU(K8,n)),t.url=n=>t.check(wU(G8,n)),t.jwt=n=>t.check(LU(l9,n)),t.emoji=n=>t.check(_U(Q8,n)),t.guid=n=>t.check(W1(eC,n)),t.uuid=n=>t.check(vU(kf,n)),t.uuidv4=n=>t.check(bU(kf,n)),t.uuidv6=n=>t.check(xU(kf,n)),t.uuidv7=n=>t.check(SU(kf,n)),t.nanoid=n=>t.check(CU(Z8,n)),t.guid=n=>t.check(W1(eC,n)),t.cuid=n=>t.check(EU(Y8,n)),t.cuid2=n=>t.check(kU(J8,n)),t.ulid=n=>t.check(RU(X8,n)),t.base64=n=>t.check(DU(i9,n)),t.base64url=n=>t.check(zU(a9,n)),t.xid=n=>t.check(AU(W8,n)),t.ksuid=n=>t.check(TU(e9,n)),t.ipv4=n=>t.check(OU(t9,n)),t.ipv6=n=>t.check(MU(n9,n)),t.cidrv4=n=>t.check(NU(r9,n)),t.cidrv6=n=>t.check(IU(s9,n)),t.e164=n=>t.check(jU(o9,n)),t.datetime=n=>t.check(E8(n)),t.date=n=>t.check(R8(n)),t.time=n=>t.check(T8(n)),t.duration=n=>t.check(M8(n))});function oh(t){return gU(V8,t)}const Ot=ue("ZodStringFormat",(t,e)=>{Tt.init(t,e),PA.init(t,e)}),K8=ue("ZodEmail",(t,e)=>{RB.init(t,e),Ot.init(t,e)}),eC=ue("ZodGUID",(t,e)=>{EB.init(t,e),Ot.init(t,e)}),kf=ue("ZodUUID",(t,e)=>{kB.init(t,e),Ot.init(t,e)}),G8=ue("ZodURL",(t,e)=>{AB.init(t,e),Ot.init(t,e)}),Q8=ue("ZodEmoji",(t,e)=>{TB.init(t,e),Ot.init(t,e)}),Z8=ue("ZodNanoID",(t,e)=>{OB.init(t,e),Ot.init(t,e)}),Y8=ue("ZodCUID",(t,e)=>{MB.init(t,e),Ot.init(t,e)}),J8=ue("ZodCUID2",(t,e)=>{NB.init(t,e),Ot.init(t,e)}),X8=ue("ZodULID",(t,e)=>{IB.init(t,e),Ot.init(t,e)}),W8=ue("ZodXID",(t,e)=>{DB.init(t,e),Ot.init(t,e)}),e9=ue("ZodKSUID",(t,e)=>{zB.init(t,e),Ot.init(t,e)}),t9=ue("ZodIPv4",(t,e)=>{$B.init(t,e),Ot.init(t,e)}),n9=ue("ZodIPv6",(t,e)=>{BB.init(t,e),Ot.init(t,e)}),r9=ue("ZodCIDRv4",(t,e)=>{UB.init(t,e),Ot.init(t,e)}),s9=ue("ZodCIDRv6",(t,e)=>{qB.init(t,e),Ot.init(t,e)}),i9=ue("ZodBase64",(t,e)=>{HB.init(t,e),Ot.init(t,e)}),a9=ue("ZodBase64URL",(t,e)=>{KB.init(t,e),Ot.init(t,e)}),o9=ue("ZodE164",(t,e)=>{GB.init(t,e),Ot.init(t,e)}),l9=ue("ZodJWT",(t,e)=>{ZB.init(t,e),Ot.init(t,e)}),u9=ue("ZodUnknown",(t,e)=>{YB.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>u8()});function tC(){return UU(u9)}const c9=ue("ZodNever",(t,e)=>{JB.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>l8(t,n,r)});function f9(t){return qU(c9,t)}const d9=ue("ZodArray",(t,e)=>{XB.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>h8(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(Td(n,r)),t.nonempty=n=>t.check(Td(1,n)),t.max=(n,r)=>t.check(NA(n,r)),t.length=(n,r)=>t.check(IA(n,r)),t.unwrap=()=>t.element});function h9(t,e){return t8(d9,t,e)}const p9=ue("ZodObject",(t,e)=>{eU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>p8(t,n,r,s),yt(t,"shape",()=>e.shape),t.keyof=()=>b9(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:tC()}),t.loose=()=>t.clone({...t._zod.def,catchall:tC()}),t.strict=()=>t.clone({...t._zod.def,catchall:f9()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>R$(t,n),t.safeExtend=n=>A$(t,n),t.merge=n=>T$(t,n),t.pick=n=>E$(t,n),t.omit=n=>k$(t,n),t.partial=(...n)=>O$(FA,t,n[0]),t.required=(...n)=>M$($A,t,n[0])});function zu(t,e){const n={type:"object",shape:t??{},...Be(e)};return new p9(n)}const m9=ue("ZodUnion",(t,e)=>{tU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>m8(t,n,r,s),t.options=e.options});function g9(t,e){return new m9({type:"union",options:t,...Be(e)})}const y9=ue("ZodIntersection",(t,e)=>{nU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>g8(t,n,r,s)});function v9(t,e){return new y9({type:"intersection",left:t,right:e})}const Ly=ue("ZodEnum",(t,e)=>{rU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>c8(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Ly({...e,checks:[],...Be(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new Ly({...e,checks:[],...Be(s),entries:a})}});function b9(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Ly({type:"enum",entries:n,...Be(e)})}const x9=ue("ZodTransform",(t,e)=>{sU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>d8(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new gA(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(Su(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(Su(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function S9(t){return new x9({type:"transform",transform:t})}const FA=ue("ZodOptional",(t,e)=>{MA.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>LA(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function nC(t){return new FA({type:"optional",innerType:t})}const w9=ue("ZodExactOptional",(t,e)=>{iU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>LA(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function _9(t){return new w9({type:"optional",innerType:t})}const C9=ue("ZodNullable",(t,e)=>{aU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>y8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function rC(t){return new C9({type:"nullable",innerType:t})}const E9=ue("ZodDefault",(t,e)=>{oU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>b8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function k9(t,e){return new E9({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():xA(e)}})}const R9=ue("ZodPrefault",(t,e)=>{lU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>x8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function A9(t,e){return new R9({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():xA(e)}})}const $A=ue("ZodNonOptional",(t,e)=>{uU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>v8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function T9(t,e){return new $A({type:"nonoptional",innerType:t,...Be(e)})}const O9=ue("ZodCatch",(t,e)=>{cU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>S8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function M9(t,e){return new O9({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const N9=ue("ZodPipe",(t,e)=>{fU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>w8(t,n,r,s),t.in=e.in,t.out=e.out});function sC(t,e){return new N9({type:"pipe",in:t,out:e})}const I9=ue("ZodReadonly",(t,e)=>{dU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>_8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function D9(t){return new I9({type:"readonly",innerType:t})}const z9=ue("ZodCustom",(t,e)=>{hU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>f8(t,n)});function j9(t,e={}){return n8(z9,t,e)}function L9(t){return r8(t)}const Py=50;function P9(t){return t?t.length<=Py?t:t.slice(0,Py):[]}function Rf(t){return t.error?{error:t.error}:{columns:t.columns,rowCount:t.rows?.length??0,rows:P9(t.rows),rowsAffected:t.rows_affected,truncated:(t.rows?.length??0)>Py}}const F9=zu({}),$9=zu({query:oh().describe("The SQL query to set in the editor")}),B9=zu({query:oh().describe("The SQL query to execute")}),U9=zu({query:oh().describe("The SQL SELECT query to run silently")}),q9=zu({query:oh().describe("The SQL statement (INSERT/UPDATE/DELETE) to execute silently")}),H9=Mu({name:"get_query_result",description:"Get the result of the last executed query that was shown in the UI, including columns, rows, and any errors",inputSchema:F9}),V9=Mu({name:"set_query",description:"Set the SQL query in the editor without executing it. The user will see the query appear in their editor immediately.",inputSchema:$9}),K9=Mu({name:"execute_query",description:"Execute a SQL query and show results in the UI. The query will be set in the editor and executed, with results displayed to the user. Returns the query results directly.",inputSchema:B9}),G9=Mu({name:"run_query",description:"Run a SELECT query silently WITHOUT changing the UI or query editor. Use this for exploratory queries, checking data, or gathering information without disrupting what the user is currently working on. Results are returned but not shown in the UI. Only use for SELECT, WITH, SHOW, DESCRIBE, EXPLAIN, or PRAGMA queries.",inputSchema:U9}),Q9=Mu({name:"run_statement",description:"Execute an INSERT, UPDATE, or DELETE statement silently WITHOUT changing the UI. Use this for modifying data without disrupting what the user is currently working on. Returns rows_affected count.",inputSchema:q9});function Z9(t){const{queryResult:e,setters:n}=t,r=H9.client(async()=>e?Rf(e):{error:"No query has been executed yet."}),s=V9.client(async f=>{const d=f;return n.setQuery(d.query),{success:!0,query:d.query}}),a=K9.client(async f=>{const d=f;try{const m=await n.executeQuery(d.query);return Rf(m)}catch(m){return{error:m instanceof Error?m.message:"Query execution failed"}}}),l=G9.client(async f=>{const d=f;try{const m=await n.runQuerySilent(d.query);return Rf(m)}catch(m){return{error:m instanceof Error?m.message:"Query execution failed"}}}),c=Q9.client(async f=>{const d=f;try{const m=await n.runStatementSilent(d.query);return Rf(m)}catch(m){return{error:m instanceof Error?m.message:"Statement execution failed"}}});return U6(r,s,a,l,c)}function Y9(t){const{connection:e,database:n,table:r,currentQuery:s,schema:a}=t,l=[];e&&"driver"in e?(l.push(`- **Driver**: ${e.driver}`),l.push(`- **Database**: ${n||"(none selected)"}`),l.push(`- **Table**: ${r||"(none selected)"}`)):l.push("- Not connected to a database");const c=l.join(`
`),f=s?.trim()?`\`\`\`sql
${s}
\`\`\``:"(empty)";let d="";return a?.tables?.length&&(d=`

## Schema

${a.tables.map(p=>{const g=a.columns[p];if(g?.length){const y=g.map(x=>`${x.name} (${x.type})`).join(", ");return`- **${p}**: ${y}`}return`- **${p}**`}).join(`
`)}`),`You are an AI assistant embedded in a database management tool. You help users write, understand, and debug SQL queries.

## Current Environment

${c}

## Current Query

${f}${d}

## Tools

- \`get_query_result\`: Get results of the last executed query
- \`set_query\`: Put a query in the editor (user sees it immediately)
- \`execute_query\`: Run a query and show results in UI
- \`run_query\`: Run a SELECT query silently without changing UI (for exploration)
- \`run_statement\`: Execute INSERT/UPDATE/DELETE silently without changing UI

## Guidelines

- **Writing queries**: Use \`set_query\` to show it in the editor for review
- **Running queries**: Use \`execute_query\` - results return directly
- **Exploring data**: Use \`run_query\` for SELECT queries without disrupting the UI
- **Modifying data**: Use \`run_statement\` for INSERT/UPDATE/DELETE operations silently
- **Query format**: One query at a time. For Oracle, omit trailing semicolon
- **Response format**: Use Markdown. Be concise.`}const iC={name:"SQL Assistant",placeholder:"Ask about your query or data..."};function J9(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const X9=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,W9=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,eq={};function aC(t,e){return(eq.jsx?W9:X9).test(t)}const tq=/[ \t\n\f\r]/g;function nq(t){return typeof t=="object"?t.type==="text"?oC(t.value):!1:oC(t)}function oC(t){return t.replace(tq,"")===""}class ju{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}ju.prototype.normal={};ju.prototype.property={};ju.prototype.space=void 0;function BA(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new ju(n,r,e)}function Fy(t){return t.toLowerCase()}class Fn{constructor(e,n){this.attribute=n,this.property=e}}Fn.prototype.attribute="";Fn.prototype.booleanish=!1;Fn.prototype.boolean=!1;Fn.prototype.commaOrSpaceSeparated=!1;Fn.prototype.commaSeparated=!1;Fn.prototype.defined=!1;Fn.prototype.mustUseProperty=!1;Fn.prototype.number=!1;Fn.prototype.overloadedBoolean=!1;Fn.prototype.property="";Fn.prototype.spaceSeparated=!1;Fn.prototype.space=void 0;let rq=0;const Ge=ea(),$t=ea(),$y=ea(),pe=ea(),Et=ea(),ao=ea(),Zn=ea();function ea(){return 2**++rq}const By=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ge,booleanish:$t,commaOrSpaceSeparated:Zn,commaSeparated:ao,number:pe,overloadedBoolean:$y,spaceSeparated:Et},Symbol.toStringTag,{value:"Module"})),xg=Object.keys(By);class dv extends Fn{constructor(e,n,r,s){let a=-1;if(super(e,n),lC(this,"space",s),typeof r=="number")for(;++a<xg.length;){const l=xg[a];lC(this,xg[a],(r&By[l])===By[l])}}}dv.prototype.defined=!0;function lC(t,e,n){n&&(t[e]=n)}function Co(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const a=new dv(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[Fy(r)]=r,n[Fy(a.attribute)]=r}return new ju(e,n,t.space)}const UA=Co({properties:{ariaActiveDescendant:null,ariaAtomic:$t,ariaAutoComplete:null,ariaBusy:$t,ariaChecked:$t,ariaColCount:pe,ariaColIndex:pe,ariaColSpan:pe,ariaControls:Et,ariaCurrent:null,ariaDescribedBy:Et,ariaDetails:null,ariaDisabled:$t,ariaDropEffect:Et,ariaErrorMessage:null,ariaExpanded:$t,ariaFlowTo:Et,ariaGrabbed:$t,ariaHasPopup:null,ariaHidden:$t,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Et,ariaLevel:pe,ariaLive:null,ariaModal:$t,ariaMultiLine:$t,ariaMultiSelectable:$t,ariaOrientation:null,ariaOwns:Et,ariaPlaceholder:null,ariaPosInSet:pe,ariaPressed:$t,ariaReadOnly:$t,ariaRelevant:null,ariaRequired:$t,ariaRoleDescription:Et,ariaRowCount:pe,ariaRowIndex:pe,ariaRowSpan:pe,ariaSelected:$t,ariaSetSize:pe,ariaSort:null,ariaValueMax:pe,ariaValueMin:pe,ariaValueNow:pe,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function qA(t,e){return e in t?t[e]:e}function HA(t,e){return qA(t,e.toLowerCase())}const sq=Co({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ao,acceptCharset:Et,accessKey:Et,action:null,allow:null,allowFullScreen:Ge,allowPaymentRequest:Ge,allowUserMedia:Ge,alt:null,as:null,async:Ge,autoCapitalize:null,autoComplete:Et,autoFocus:Ge,autoPlay:Ge,blocking:Et,capture:null,charSet:null,checked:Ge,cite:null,className:Et,cols:pe,colSpan:null,content:null,contentEditable:$t,controls:Ge,controlsList:Et,coords:pe|ao,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ge,defer:Ge,dir:null,dirName:null,disabled:Ge,download:$y,draggable:$t,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ge,formTarget:null,headers:Et,height:pe,hidden:$y,high:pe,href:null,hrefLang:null,htmlFor:Et,httpEquiv:Et,id:null,imageSizes:null,imageSrcSet:null,inert:Ge,inputMode:null,integrity:null,is:null,isMap:Ge,itemId:null,itemProp:Et,itemRef:Et,itemScope:Ge,itemType:Et,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ge,low:pe,manifest:null,max:null,maxLength:pe,media:null,method:null,min:null,minLength:pe,multiple:Ge,muted:Ge,name:null,nonce:null,noModule:Ge,noValidate:Ge,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ge,optimum:pe,pattern:null,ping:Et,placeholder:null,playsInline:Ge,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ge,referrerPolicy:null,rel:Et,required:Ge,reversed:Ge,rows:pe,rowSpan:pe,sandbox:Et,scope:null,scoped:Ge,seamless:Ge,selected:Ge,shadowRootClonable:Ge,shadowRootDelegatesFocus:Ge,shadowRootMode:null,shape:null,size:pe,sizes:null,slot:null,span:pe,spellCheck:$t,src:null,srcDoc:null,srcLang:null,srcSet:null,start:pe,step:null,style:null,tabIndex:pe,target:null,title:null,translate:null,type:null,typeMustMatch:Ge,useMap:null,value:$t,width:pe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Et,axis:null,background:null,bgColor:null,border:pe,borderColor:null,bottomMargin:pe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ge,declare:Ge,event:null,face:null,frame:null,frameBorder:null,hSpace:pe,leftMargin:pe,link:null,longDesc:null,lowSrc:null,marginHeight:pe,marginWidth:pe,noResize:Ge,noHref:Ge,noShade:Ge,noWrap:Ge,object:null,profile:null,prompt:null,rev:null,rightMargin:pe,rules:null,scheme:null,scrolling:$t,standby:null,summary:null,text:null,topMargin:pe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:pe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ge,disableRemotePlayback:Ge,prefix:null,property:null,results:pe,security:null,unselectable:null},space:"html",transform:HA}),iq=Co({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Zn,accentHeight:pe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:pe,amplitude:pe,arabicForm:null,ascent:pe,attributeName:null,attributeType:null,azimuth:pe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:pe,by:null,calcMode:null,capHeight:pe,className:Et,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:pe,diffuseConstant:pe,direction:null,display:null,dur:null,divisor:pe,dominantBaseline:null,download:Ge,dx:null,dy:null,edgeMode:null,editable:null,elevation:pe,enableBackground:null,end:null,event:null,exponent:pe,externalResourcesRequired:null,fill:null,fillOpacity:pe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ao,g2:ao,glyphName:ao,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:pe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:pe,horizOriginX:pe,horizOriginY:pe,id:null,ideographic:pe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:pe,k:pe,k1:pe,k2:pe,k3:pe,k4:pe,kernelMatrix:Zn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:pe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:pe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:pe,overlineThickness:pe,paintOrder:null,panose1:null,path:null,pathLength:pe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Et,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:pe,pointsAtY:pe,pointsAtZ:pe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Zn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Zn,rev:Zn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Zn,requiredFeatures:Zn,requiredFonts:Zn,requiredFormats:Zn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:pe,specularExponent:pe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:pe,strikethroughThickness:pe,string:null,stroke:null,strokeDashArray:Zn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:pe,strokeOpacity:pe,strokeWidth:null,style:null,surfaceScale:pe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Zn,tabIndex:pe,tableValues:null,target:null,targetX:pe,targetY:pe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Zn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:pe,underlineThickness:pe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:pe,values:null,vAlphabetic:pe,vMathematical:pe,vectorEffect:null,vHanging:pe,vIdeographic:pe,version:null,vertAdvY:pe,vertOriginX:pe,vertOriginY:pe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:pe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:qA}),VA=Co({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),KA=Co({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:HA}),GA=Co({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),aq={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},oq=/[A-Z]/g,uC=/-[a-z]/g,lq=/^data[-\w.:]+$/i;function uq(t,e){const n=Fy(e);let r=e,s=Fn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&lq.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(uC,fq);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!uC.test(a)){let l=a.replace(oq,cq);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=dv}return new s(r,e)}function cq(t){return"-"+t.toLowerCase()}function fq(t){return t.charAt(1).toUpperCase()}const dq=BA([UA,sq,VA,KA,GA],"html"),hv=BA([UA,iq,VA,KA,GA],"svg");function hq(t){return t.join(" ").trim()}var qa={},Sg,cC;function pq(){if(cC)return Sg;cC=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,c=/^\s+|\s+$/g,f=`
`,d="/",m="*",p="",g="comment",y="declaration";function x(E,C){if(typeof E!="string")throw new TypeError("First argument must be a string");if(!E)return[];C=C||{};var k=1,R=1;function I(te){var V=te.match(e);V&&(k+=V.length);var F=te.lastIndexOf(f);R=~F?te.length-F:R+te.length}function j(){var te={line:k,column:R};return function(V){return V.position=new A(te),P(),V}}function A(te){this.start=te,this.end={line:k,column:R},this.source=C.source}A.prototype.content=E;function z(te){var V=new Error(C.source+":"+k+":"+R+": "+te);if(V.reason=te,V.filename=C.source,V.line=k,V.column=R,V.source=E,!C.silent)throw V}function L(te){var V=te.exec(E);if(V){var F=V[0];return I(F),E=E.slice(F.length),V}}function P(){L(n)}function M(te){var V;for(te=te||[];V=$();)V!==!1&&te.push(V);return te}function $(){var te=j();if(!(d!=E.charAt(0)||m!=E.charAt(1))){for(var V=2;p!=E.charAt(V)&&(m!=E.charAt(V)||d!=E.charAt(V+1));)++V;if(V+=2,p===E.charAt(V-1))return z("End of comment missing");var F=E.slice(2,V-2);return R+=2,I(F),E=E.slice(V),R+=2,te({type:g,comment:F})}}function G(){var te=j(),V=L(r);if(V){if($(),!L(s))return z("property missing ':'");var F=L(a),J=te({type:y,property:S(V[0].replace(t,p)),value:F?S(F[0].replace(t,p)):p});return L(l),J}}function ee(){var te=[];M(te);for(var V;V=G();)V!==!1&&(te.push(V),M(te));return te}return P(),ee()}function S(E){return E?E.replace(c,p):p}return Sg=x,Sg}var fC;function mq(){if(fC)return qa;fC=1;var t=qa&&qa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qa,"__esModule",{value:!0}),qa.default=n;const e=t(pq());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),c=typeof s=="function";return l.forEach(f=>{if(f.type!=="declaration")return;const{property:d,value:m}=f;c?s(d,m,f):m&&(a=a||{},a[d]=m)}),a}return qa}var kl={},dC;function gq(){if(dC)return kl;dC=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(d){return!d||n.test(d)||t.test(d)},l=function(d,m){return m.toUpperCase()},c=function(d,m){return"".concat(m,"-")},f=function(d,m){return m===void 0&&(m={}),a(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(s,c):d=d.replace(r,c),d.replace(e,l))};return kl.camelCase=f,kl}var Rl,hC;function yq(){if(hC)return Rl;hC=1;var t=Rl&&Rl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(mq()),n=gq();function r(s,a){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(c,f){c&&f&&(l[(0,n.camelCase)(c,a)]=f)}),l}return r.default=r,Rl=r,Rl}var vq=yq();const bq=Yy(vq),QA=ZA("end"),pv=ZA("start");function ZA(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function xq(t){const e=pv(t),n=QA(t);if(e&&n)return{start:e,end:n}}function iu(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?pC(t.position):"start"in t||"end"in t?pC(t):"line"in t||"column"in t?Uy(t):""}function Uy(t){return mC(t&&t.line)+":"+mC(t&&t.column)}function pC(t){return Uy(t&&t.start)+"-"+Uy(t&&t.end)}function mC(t){return t&&typeof t=="number"?t:1}class yn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?s=e:!a.cause&&e&&(l=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?a.ruleId=r:(a.source=r.slice(0,f),a.ruleId=r.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const c=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=c?c.line:void 0,this.name=iu(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}yn.prototype.file="";yn.prototype.name="";yn.prototype.reason="";yn.prototype.message="";yn.prototype.stack="";yn.prototype.column=void 0;yn.prototype.line=void 0;yn.prototype.ancestors=void 0;yn.prototype.cause=void 0;yn.prototype.fatal=void 0;yn.prototype.place=void 0;yn.prototype.ruleId=void 0;yn.prototype.source=void 0;const mv={}.hasOwnProperty,Sq=new Map,wq=/[A-Z]/g,_q=new Set(["table","tbody","thead","tfoot","tr"]),Cq=new Set(["td","th"]),YA="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Eq(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Iq(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Nq(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?hv:dq,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=JA(s,t,void 0);return a&&typeof a!="string"?a:s.create(t,s.Fragment,{children:a||void 0},void 0)}function JA(t,e,n){if(e.type==="element")return kq(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Rq(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Tq(t,e,n);if(e.type==="mdxjsEsm")return Aq(t,e);if(e.type==="root")return Oq(t,e,n);if(e.type==="text")return Mq(t,e)}function kq(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=hv,t.schema=s),t.ancestors.push(e);const a=WA(t,e.tagName,!1),l=Dq(t,e);let c=yv(t,e);return _q.has(e.tagName)&&(c=c.filter(function(f){return typeof f=="string"?!nq(f):!0})),XA(t,l,a,e),gv(l,c),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function Rq(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}wu(t,e.position)}function Aq(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);wu(t,e.position)}function Tq(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=hv,t.schema=s),t.ancestors.push(e);const a=e.name===null?t.Fragment:WA(t,e.name,!0),l=zq(t,e),c=yv(t,e);return XA(t,l,a,e),gv(l,c),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function Oq(t,e,n){const r={};return gv(r,yv(t,e)),t.create(e,t.Fragment,r,n)}function Mq(t,e){return e.value}function XA(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function gv(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Nq(t,e,n){return r;function r(s,a,l,c){const d=Array.isArray(l.children)?n:e;return c?d(a,l,c):d(a,l)}}function Iq(t,e){return n;function n(r,s,a,l){const c=Array.isArray(a.children),f=pv(r);return e(s,a,l,c,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function Dq(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&mv.call(e.properties,s)){const a=jq(t,s,e.properties[s]);if(a){const[l,c]=a;t.tableCellAlignToStyle&&l==="align"&&typeof c=="string"&&Cq.has(e.tagName)?r=c:n[l]=c}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function zq(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const c=l.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else wu(t,e.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const c=r.value.data.estree.body[0];c.type,a=t.evaluater.evaluateExpression(c.expression)}else wu(t,e.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function yv(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:Sq;for(;++r<e.children.length;){const a=e.children[r];let l;if(t.passKeys){const f=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(f){const d=s.get(f)||0;l=f+"-"+d,s.set(f,d+1)}}const c=JA(t,a,l);c!==void 0&&n.push(c)}return n}function jq(t,e,n){const r=uq(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?J9(n):hq(n)),r.property==="style"){let s=typeof n=="object"?n:Lq(t,String(n));return t.stylePropertyNameCase==="css"&&(s=Pq(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?aq[r.property]||r.property:r.attribute,n]}}function Lq(t,e){try{return bq(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new yn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=YA+"#cannot-parse-style-attribute",s}}function WA(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let a=-1,l;for(;++a<s.length;){const c=aC(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};l=l?{type:"MemberExpression",object:l,property:c,computed:!!(a&&c.type==="Literal"),optional:!1}:c}r=l}else r=aC(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return mv.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);wu(t)}function wu(t,e){const n=new yn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=YA+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Pq(t){const e={};let n;for(n in t)mv.call(t,n)&&(e[Fq(n)]=t[n]);return e}function Fq(t){let e=t.replace(wq,$q);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function $q(t){return"-"+t.toLowerCase()}const wg={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Bq={};function vv(t,e){const n=Bq,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return eT(t,r,s)}function eT(t,e,n){if(Uq(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return gC(t.children,e,n)}return Array.isArray(t)?gC(t,e,n):""}function gC(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=eT(t[s],e,n);return r.join("")}function Uq(t){return!!(t&&typeof t=="object")}const yC=document.createElement("i");function bv(t){const e="&"+t+";";yC.innerHTML=e;const n=yC.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function er(t,e,n,r){const s=t.length;let a=0,l;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function yr(t,e){return t.length>0?(er(t,t.length,0,e),t):e}const vC={}.hasOwnProperty;function tT(t){const e={};let n=-1;for(;++n<t.length;)qq(e,t[n]);return e}function qq(t,e){let n;for(n in e){const s=(vC.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){vC.call(s,l)||(s[l]=[]);const c=a[l];Hq(s[l],Array.isArray(c)?c:c?[c]:[])}}}function Hq(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);er(t,0,0,r)}function nT(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Nr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Cn=ci(/[A-Za-z]/),gn=ci(/[\dA-Za-z]/),Vq=ci(/[#-'*+\--9=?A-Z^-~]/);function Md(t){return t!==null&&(t<32||t===127)}const qy=ci(/\d/),Kq=ci(/[\dA-Fa-f]/),Gq=ci(/[!-/:-@[-`{-~]/);function De(t){return t!==null&&t<-2}function Ct(t){return t!==null&&(t<0||t===32)}function et(t){return t===-2||t===-1||t===32}const lh=ci(new RegExp("\\p{P}|\\p{S}","u")),Yi=ci(/\s/);function ci(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Eo(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&gn(t.charCodeAt(n+1))&&gn(t.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const c=t.charCodeAt(n+1);a<56320&&c>56319&&c<57344?(l=String.fromCharCode(a,c),s=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+s+1,l=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function lt(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(f){return et(f)?(t.enter(n),c(f)):e(f)}function c(f){return et(f)&&a++<s?(t.consume(f),c):(t.exit(n),e(f))}}const Qq={tokenize:Zq};function Zq(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),lt(t,e,"linePrefix")}function s(c){return t.enter("paragraph"),a(c)}function a(c){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(c)}function l(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return De(c)?(t.consume(c),t.exit("chunkText"),a):(t.consume(c),l)}}const Yq={tokenize:Jq},bC={tokenize:Xq};function Jq(t){const e=this,n=[];let r=0,s,a,l;return c;function c(R){if(r<n.length){const I=n[r];return e.containerState=I[1],t.attempt(I[0].continuation,f,d)(R)}return d(R)}function f(R){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&k();const I=e.events.length;let j=I,A;for(;j--;)if(e.events[j][0]==="exit"&&e.events[j][1].type==="chunkFlow"){A=e.events[j][1].end;break}C(r);let z=I;for(;z<e.events.length;)e.events[z][1].end={...A},z++;return er(e.events,j+1,0,e.events.slice(I)),e.events.length=z,d(R)}return c(R)}function d(R){if(r===n.length){if(!s)return g(R);if(s.currentConstruct&&s.currentConstruct.concrete)return x(R);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(bC,m,p)(R)}function m(R){return s&&k(),C(r),g(R)}function p(R){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,x(R)}function g(R){return e.containerState={},t.attempt(bC,y,x)(R)}function y(R){return r++,n.push([e.currentConstruct,e.containerState]),g(R)}function x(R){if(R===null){s&&k(),C(0),t.consume(R);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),S(R)}function S(R){if(R===null){E(t.exit("chunkFlow"),!0),C(0),t.consume(R);return}return De(R)?(t.consume(R),E(t.exit("chunkFlow")),r=0,e.interrupt=void 0,c):(t.consume(R),S)}function E(R,I){const j=e.sliceStream(R);if(I&&j.push(null),R.previous=a,a&&(a.next=R),a=R,s.defineSkip(R.start),s.write(j),e.parser.lazy[R.start.line]){let A=s.events.length;for(;A--;)if(s.events[A][1].start.offset<l&&(!s.events[A][1].end||s.events[A][1].end.offset>l))return;const z=e.events.length;let L=z,P,M;for(;L--;)if(e.events[L][0]==="exit"&&e.events[L][1].type==="chunkFlow"){if(P){M=e.events[L][1].end;break}P=!0}for(C(r),A=z;A<e.events.length;)e.events[A][1].end={...M},A++;er(e.events,L+1,0,e.events.slice(z)),e.events.length=A}}function C(R){let I=n.length;for(;I-- >R;){const j=n[I];e.containerState=j[1],j[0].exit.call(e,t)}n.length=R}function k(){s.write([null]),a=void 0,s=void 0,e.containerState._closeFlow=void 0}}function Xq(t,e,n){return lt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function co(t){if(t===null||Ct(t)||Yi(t))return 1;if(lh(t))return 2}function uh(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const a=t[s].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const Hy={name:"attention",resolveAll:Wq,tokenize:e7};function Wq(t,e){let n=-1,r,s,a,l,c,f,d,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},g={...t[n][1].start};xC(p,-f),xC(g,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},a={type:f>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:f>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},t[r][1].end={...l.start},t[n][1].start={...c.end},d=[],t[r][1].end.offset-t[r][1].start.offset&&(d=yr(d,[["enter",t[r][1],e],["exit",t[r][1],e]])),d=yr(d,[["enter",s,e],["enter",l,e],["exit",l,e],["enter",a,e]]),d=yr(d,uh(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),d=yr(d,[["exit",a,e],["enter",c,e],["exit",c,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,d=yr(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,er(t,r-1,n-r+3,d),n=r+d.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function e7(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=co(r);let a;return l;function l(f){return a=f,t.enter("attentionSequence"),c(f)}function c(f){if(f===a)return t.consume(f),c;const d=t.exit("attentionSequence"),m=co(f),p=!m||m===2&&s||n.includes(f),g=!s||s===2&&m||n.includes(r);return d._open=!!(a===42?p:p&&(s||!g)),d._close=!!(a===42?g:g&&(m||!p)),e(f)}}function xC(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const t7={name:"autolink",tokenize:n7};function n7(t,e,n){let r=0;return s;function s(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(y){return Cn(y)?(t.consume(y),l):y===64?n(y):d(y)}function l(y){return y===43||y===45||y===46||gn(y)?(r=1,c(y)):d(y)}function c(y){return y===58?(t.consume(y),r=0,f):(y===43||y===45||y===46||gn(y))&&r++<32?(t.consume(y),c):(r=0,d(y))}function f(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||Md(y)?n(y):(t.consume(y),f)}function d(y){return y===64?(t.consume(y),m):Vq(y)?(t.consume(y),d):n(y)}function m(y){return gn(y)?p(y):n(y)}function p(y){return y===46?(t.consume(y),r=0,m):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):g(y)}function g(y){if((y===45||gn(y))&&r++<63){const x=y===45?g:p;return t.consume(y),x}return n(y)}}const Lu={partial:!0,tokenize:r7};function r7(t,e,n){return r;function r(a){return et(a)?lt(t,s,"linePrefix")(a):s(a)}function s(a){return a===null||De(a)?e(a):n(a)}}const rT={continuation:{tokenize:i7},exit:a7,name:"blockQuote",tokenize:s7};function s7(t,e,n){const r=this;return s;function s(l){if(l===62){const c=r.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return et(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function i7(t,e,n){const r=this;return s;function s(l){return et(l)?lt(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(rT,e,n)(l)}}function a7(t){t.exit("blockQuote")}const sT={name:"characterEscape",tokenize:o7};function o7(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),s}function s(a){return Gq(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const iT={name:"characterReference",tokenize:l7};function l7(t,e,n){const r=this;let s=0,a,l;return c;function c(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),f}function f(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),a=31,l=gn,m(p))}function d(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=Kq,m):(t.enter("characterReferenceValue"),a=7,l=qy,m(p))}function m(p){if(p===59&&s){const g=t.exit("characterReferenceValue");return l===gn&&!bv(r.sliceSerialize(g))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(p)&&s++<a?(t.consume(p),m):n(p)}}const SC={partial:!0,tokenize:c7},wC={concrete:!0,name:"codeFenced",tokenize:u7};function u7(t,e,n){const r=this,s={partial:!0,tokenize:j};let a=0,l=0,c;return f;function f(A){return d(A)}function d(A){const z=r.events[r.events.length-1];return a=z&&z[1].type==="linePrefix"?z[2].sliceSerialize(z[1],!0).length:0,c=A,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(A)}function m(A){return A===c?(l++,t.consume(A),m):l<3?n(A):(t.exit("codeFencedFenceSequence"),et(A)?lt(t,p,"whitespace")(A):p(A))}function p(A){return A===null||De(A)?(t.exit("codeFencedFence"),r.interrupt?e(A):t.check(SC,S,I)(A)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(A))}function g(A){return A===null||De(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(A)):et(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),lt(t,y,"whitespace")(A)):A===96&&A===c?n(A):(t.consume(A),g)}function y(A){return A===null||De(A)?p(A):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x(A))}function x(A){return A===null||De(A)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(A)):A===96&&A===c?n(A):(t.consume(A),x)}function S(A){return t.attempt(s,I,E)(A)}function E(A){return t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),C}function C(A){return a>0&&et(A)?lt(t,k,"linePrefix",a+1)(A):k(A)}function k(A){return A===null||De(A)?t.check(SC,S,I)(A):(t.enter("codeFlowValue"),R(A))}function R(A){return A===null||De(A)?(t.exit("codeFlowValue"),k(A)):(t.consume(A),R)}function I(A){return t.exit("codeFenced"),e(A)}function j(A,z,L){let P=0;return M;function M(V){return A.enter("lineEnding"),A.consume(V),A.exit("lineEnding"),$}function $(V){return A.enter("codeFencedFence"),et(V)?lt(A,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(V):G(V)}function G(V){return V===c?(A.enter("codeFencedFenceSequence"),ee(V)):L(V)}function ee(V){return V===c?(P++,A.consume(V),ee):P>=l?(A.exit("codeFencedFenceSequence"),et(V)?lt(A,te,"whitespace")(V):te(V)):L(V)}function te(V){return V===null||De(V)?(A.exit("codeFencedFence"),z(V)):L(V)}}}function c7(t,e,n){const r=this;return s;function s(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const _g={name:"codeIndented",tokenize:d7},f7={partial:!0,tokenize:h7};function d7(t,e,n){const r=this;return s;function s(d){return t.enter("codeIndented"),lt(t,a,"linePrefix",5)(d)}function a(d){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(d):n(d)}function l(d){return d===null?f(d):De(d)?t.attempt(f7,l,f)(d):(t.enter("codeFlowValue"),c(d))}function c(d){return d===null||De(d)?(t.exit("codeFlowValue"),l(d)):(t.consume(d),c)}function f(d){return t.exit("codeIndented"),e(d)}}function h7(t,e,n){const r=this;return s;function s(l){return r.parser.lazy[r.now().line]?n(l):De(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):lt(t,a,"linePrefix",5)(l)}function a(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):De(l)?s(l):n(l)}}const p7={name:"codeText",previous:g7,resolve:m7,tokenize:y7};function m7(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function g7(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function y7(t,e,n){let r=0,s,a;return l;function l(p){return t.enter("codeText"),t.enter("codeTextSequence"),c(p)}function c(p){return p===96?(t.consume(p),r++,c):(t.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),f):p===96?(a=t.enter("codeTextSequence"),s=0,m(p)):De(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),f):(t.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||De(p)?(t.exit("codeTextData"),f(p)):(t.consume(p),d)}function m(p){return p===96?(t.consume(p),s++,m):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(a.type="codeTextData",d(p))}}class v7{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Al(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Al(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Al(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Al(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Al(this.left,n.reverse())}}}function Al(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function aT(t){const e={};let n=-1,r,s,a,l,c,f,d;const m=new v7(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,b7(m,n)),n=e[n],d=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(l=m.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(r[1].end={...m.get(s)[1].start},c=m.slice(s,n),c.unshift(r),m.splice(s,n-s+1,c))}}return er(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function b7(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,f=[],d={};let m,p,g=-1,y=n,x=0,S=0;const E=[S];for(;y;){for(;t.get(++s)[1]!==y;);a.push(s),y._tokenizer||(m=r.sliceStream(y),y.next||m.push(null),p&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++g<c.length;)c[g][0]==="exit"&&c[g-1][0]==="enter"&&c[g][1].type===c[g-1][1].type&&c[g][1].start.line!==c[g][1].end.line&&(S=g+1,E.push(S),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):E.pop(),g=E.length;g--;){const C=c.slice(E[g],E[g+1]),k=a.pop();f.push([k,k+C.length-1]),t.splice(k,2,C)}for(f.reverse(),g=-1;++g<f.length;)d[x+f[g][0]]=x+f[g][1],x+=f[g][1]-f[g][0]-1;return d}const x7={resolve:w7,tokenize:_7},S7={partial:!0,tokenize:C7};function w7(t){return aT(t),t}function _7(t,e){let n;return r;function r(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(c)}function s(c){return c===null?a(c):De(c)?t.check(S7,l,a)(c):(t.consume(c),s)}function a(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function l(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function C7(t,e,n){const r=this;return s;function s(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),lt(t,a,"linePrefix")}function a(l){if(l===null||De(l))return n(l);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function oT(t,e,n,r,s,a,l,c,f){const d=f||Number.POSITIVE_INFINITY;let m=0;return p;function p(C){return C===60?(t.enter(r),t.enter(s),t.enter(a),t.consume(C),t.exit(a),g):C===null||C===32||C===41||Md(C)?n(C):(t.enter(r),t.enter(l),t.enter(c),t.enter("chunkString",{contentType:"string"}),S(C))}function g(C){return C===62?(t.enter(a),t.consume(C),t.exit(a),t.exit(s),t.exit(r),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),y(C))}function y(C){return C===62?(t.exit("chunkString"),t.exit(c),g(C)):C===null||C===60||De(C)?n(C):(t.consume(C),C===92?x:y)}function x(C){return C===60||C===62||C===92?(t.consume(C),y):y(C)}function S(C){return!m&&(C===null||C===41||Ct(C))?(t.exit("chunkString"),t.exit(c),t.exit(l),t.exit(r),e(C)):m<d&&C===40?(t.consume(C),m++,S):C===41?(t.consume(C),m--,S):C===null||C===32||C===40||Md(C)?n(C):(t.consume(C),C===92?E:S)}function E(C){return C===40||C===41||C===92?(t.consume(C),S):S(C)}}function lT(t,e,n,r,s,a){const l=this;let c=0,f;return d;function d(y){return t.enter(r),t.enter(s),t.consume(y),t.exit(s),t.enter(a),m}function m(y){return c>999||y===null||y===91||y===93&&!f||y===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(t.exit(a),t.enter(s),t.consume(y),t.exit(s),t.exit(r),e):De(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||De(y)||c++>999?(t.exit("chunkString"),m(y)):(t.consume(y),f||(f=!et(y)),y===92?g:p)}function g(y){return y===91||y===92||y===93?(t.consume(y),c++,p):p(y)}}function uT(t,e,n,r,s,a){let l;return c;function c(g){return g===34||g===39||g===40?(t.enter(r),t.enter(s),t.consume(g),t.exit(s),l=g===40?41:g,f):n(g)}function f(g){return g===l?(t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):(t.enter(a),d(g))}function d(g){return g===l?(t.exit(a),f(l)):g===null?n(g):De(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),lt(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===l||g===null||De(g)?(t.exit("chunkString"),d(g)):(t.consume(g),g===92?p:m)}function p(g){return g===l||g===92?(t.consume(g),m):m(g)}}function au(t,e){let n;return r;function r(s){return De(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):et(s)?lt(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const E7={name:"definition",tokenize:R7},k7={partial:!0,tokenize:A7};function R7(t,e,n){const r=this;let s;return a;function a(y){return t.enter("definition"),l(y)}function l(y){return lT.call(r,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return s=Nr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),f):n(y)}function f(y){return Ct(y)?au(t,d)(y):d(y)}function d(y){return oT(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function m(y){return t.attempt(k7,p,p)(y)}function p(y){return et(y)?lt(t,g,"whitespace")(y):g(y)}function g(y){return y===null||De(y)?(t.exit("definition"),r.parser.defined.push(s),e(y)):n(y)}}function A7(t,e,n){return r;function r(c){return Ct(c)?au(t,s)(c):n(c)}function s(c){return uT(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function a(c){return et(c)?lt(t,l,"whitespace")(c):l(c)}function l(c){return c===null||De(c)?e(c):n(c)}}const T7={name:"hardBreakEscape",tokenize:O7};function O7(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),s}function s(a){return De(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const M7={name:"headingAtx",resolve:N7,tokenize:I7};function N7(t,e){let n=t.length-2,r=3,s,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},er(t,r,n-r+1,[["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e]])),t}function I7(t,e,n){let r=0;return s;function s(m){return t.enter("atxHeading"),a(m)}function a(m){return t.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&r++<6?(t.consume(m),l):m===null||Ct(m)?(t.exit("atxHeadingSequence"),c(m)):n(m)}function c(m){return m===35?(t.enter("atxHeadingSequence"),f(m)):m===null||De(m)?(t.exit("atxHeading"),e(m)):et(m)?lt(t,c,"whitespace")(m):(t.enter("atxHeadingText"),d(m))}function f(m){return m===35?(t.consume(m),f):(t.exit("atxHeadingSequence"),c(m))}function d(m){return m===null||m===35||Ct(m)?(t.exit("atxHeadingText"),c(m)):(t.consume(m),d)}}const D7=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],_C=["pre","script","style","textarea"],z7={concrete:!0,name:"htmlFlow",resolveTo:P7,tokenize:F7},j7={partial:!0,tokenize:B7},L7={partial:!0,tokenize:$7};function P7(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function F7(t,e,n){const r=this;let s,a,l,c,f;return d;function d(T){return m(T)}function m(T){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(T),p}function p(T){return T===33?(t.consume(T),g):T===47?(t.consume(T),a=!0,S):T===63?(t.consume(T),s=3,r.interrupt?e:N):Cn(T)?(t.consume(T),l=String.fromCharCode(T),E):n(T)}function g(T){return T===45?(t.consume(T),s=2,y):T===91?(t.consume(T),s=5,c=0,x):Cn(T)?(t.consume(T),s=4,r.interrupt?e:N):n(T)}function y(T){return T===45?(t.consume(T),r.interrupt?e:N):n(T)}function x(T){const se="CDATA[";return T===se.charCodeAt(c++)?(t.consume(T),c===se.length?r.interrupt?e:G:x):n(T)}function S(T){return Cn(T)?(t.consume(T),l=String.fromCharCode(T),E):n(T)}function E(T){if(T===null||T===47||T===62||Ct(T)){const se=T===47,ce=l.toLowerCase();return!se&&!a&&_C.includes(ce)?(s=1,r.interrupt?e(T):G(T)):D7.includes(l.toLowerCase())?(s=6,se?(t.consume(T),C):r.interrupt?e(T):G(T)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(T):a?k(T):R(T))}return T===45||gn(T)?(t.consume(T),l+=String.fromCharCode(T),E):n(T)}function C(T){return T===62?(t.consume(T),r.interrupt?e:G):n(T)}function k(T){return et(T)?(t.consume(T),k):M(T)}function R(T){return T===47?(t.consume(T),M):T===58||T===95||Cn(T)?(t.consume(T),I):et(T)?(t.consume(T),R):M(T)}function I(T){return T===45||T===46||T===58||T===95||gn(T)?(t.consume(T),I):j(T)}function j(T){return T===61?(t.consume(T),A):et(T)?(t.consume(T),j):R(T)}function A(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(t.consume(T),f=T,z):et(T)?(t.consume(T),A):L(T)}function z(T){return T===f?(t.consume(T),f=null,P):T===null||De(T)?n(T):(t.consume(T),z)}function L(T){return T===null||T===34||T===39||T===47||T===60||T===61||T===62||T===96||Ct(T)?j(T):(t.consume(T),L)}function P(T){return T===47||T===62||et(T)?R(T):n(T)}function M(T){return T===62?(t.consume(T),$):n(T)}function $(T){return T===null||De(T)?G(T):et(T)?(t.consume(T),$):n(T)}function G(T){return T===45&&s===2?(t.consume(T),F):T===60&&s===1?(t.consume(T),J):T===62&&s===4?(t.consume(T),D):T===63&&s===3?(t.consume(T),N):T===93&&s===5?(t.consume(T),Q):De(T)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(j7,B,ee)(T)):T===null||De(T)?(t.exit("htmlFlowData"),ee(T)):(t.consume(T),G)}function ee(T){return t.check(L7,te,B)(T)}function te(T){return t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),V}function V(T){return T===null||De(T)?ee(T):(t.enter("htmlFlowData"),G(T))}function F(T){return T===45?(t.consume(T),N):G(T)}function J(T){return T===47?(t.consume(T),l="",ae):G(T)}function ae(T){if(T===62){const se=l.toLowerCase();return _C.includes(se)?(t.consume(T),D):G(T)}return Cn(T)&&l.length<8?(t.consume(T),l+=String.fromCharCode(T),ae):G(T)}function Q(T){return T===93?(t.consume(T),N):G(T)}function N(T){return T===62?(t.consume(T),D):T===45&&s===2?(t.consume(T),N):G(T)}function D(T){return T===null||De(T)?(t.exit("htmlFlowData"),B(T)):(t.consume(T),D)}function B(T){return t.exit("htmlFlow"),e(T)}}function $7(t,e,n){const r=this;return s;function s(l){return De(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function B7(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(Lu,e,n)}}const U7={name:"htmlText",tokenize:q7};function q7(t,e,n){const r=this;let s,a,l;return c;function c(N){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(N),f}function f(N){return N===33?(t.consume(N),d):N===47?(t.consume(N),j):N===63?(t.consume(N),R):Cn(N)?(t.consume(N),L):n(N)}function d(N){return N===45?(t.consume(N),m):N===91?(t.consume(N),a=0,x):Cn(N)?(t.consume(N),k):n(N)}function m(N){return N===45?(t.consume(N),y):n(N)}function p(N){return N===null?n(N):N===45?(t.consume(N),g):De(N)?(l=p,J(N)):(t.consume(N),p)}function g(N){return N===45?(t.consume(N),y):p(N)}function y(N){return N===62?F(N):N===45?g(N):p(N)}function x(N){const D="CDATA[";return N===D.charCodeAt(a++)?(t.consume(N),a===D.length?S:x):n(N)}function S(N){return N===null?n(N):N===93?(t.consume(N),E):De(N)?(l=S,J(N)):(t.consume(N),S)}function E(N){return N===93?(t.consume(N),C):S(N)}function C(N){return N===62?F(N):N===93?(t.consume(N),C):S(N)}function k(N){return N===null||N===62?F(N):De(N)?(l=k,J(N)):(t.consume(N),k)}function R(N){return N===null?n(N):N===63?(t.consume(N),I):De(N)?(l=R,J(N)):(t.consume(N),R)}function I(N){return N===62?F(N):R(N)}function j(N){return Cn(N)?(t.consume(N),A):n(N)}function A(N){return N===45||gn(N)?(t.consume(N),A):z(N)}function z(N){return De(N)?(l=z,J(N)):et(N)?(t.consume(N),z):F(N)}function L(N){return N===45||gn(N)?(t.consume(N),L):N===47||N===62||Ct(N)?P(N):n(N)}function P(N){return N===47?(t.consume(N),F):N===58||N===95||Cn(N)?(t.consume(N),M):De(N)?(l=P,J(N)):et(N)?(t.consume(N),P):F(N)}function M(N){return N===45||N===46||N===58||N===95||gn(N)?(t.consume(N),M):$(N)}function $(N){return N===61?(t.consume(N),G):De(N)?(l=$,J(N)):et(N)?(t.consume(N),$):P(N)}function G(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(t.consume(N),s=N,ee):De(N)?(l=G,J(N)):et(N)?(t.consume(N),G):(t.consume(N),te)}function ee(N){return N===s?(t.consume(N),s=void 0,V):N===null?n(N):De(N)?(l=ee,J(N)):(t.consume(N),ee)}function te(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||Ct(N)?P(N):(t.consume(N),te)}function V(N){return N===47||N===62||Ct(N)?P(N):n(N)}function F(N){return N===62?(t.consume(N),t.exit("htmlTextData"),t.exit("htmlText"),e):n(N)}function J(N){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),ae}function ae(N){return et(N)?lt(t,Q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):Q(N)}function Q(N){return t.enter("htmlTextData"),l(N)}}const xv={name:"labelEnd",resolveAll:G7,resolveTo:Q7,tokenize:Z7},H7={tokenize:Y7},V7={tokenize:J7},K7={tokenize:X7};function G7(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&er(t,0,t.length,n),t}function Q7(t,e){let n=t.length,r=0,s,a,l,c;for(;n--;)if(s=t[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(l=n);const f={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},m={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return c=[["enter",f,e],["enter",d,e]],c=yr(c,t.slice(a+1,a+r+3)),c=yr(c,[["enter",m,e]]),c=yr(c,uh(e.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),e)),c=yr(c,[["exit",m,e],t[l-2],t[l-1],["exit",d,e]]),c=yr(c,t.slice(l+1)),c=yr(c,[["exit",f,e]]),er(t,a,t.length,c),t}function Z7(t,e,n){const r=this;let s=r.events.length,a,l;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return c;function c(g){return a?a._inactive?p(g):(l=r.parser.defined.includes(Nr(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),f):n(g)}function f(g){return g===40?t.attempt(H7,m,l?m:p)(g):g===91?t.attempt(V7,m,l?d:p)(g):l?m(g):p(g)}function d(g){return t.attempt(K7,m,p)(g)}function m(g){return e(g)}function p(g){return a._balanced=!0,n(g)}}function Y7(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),s}function s(p){return Ct(p)?au(t,a)(p):a(p)}function a(p){return p===41?m(p):oT(t,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return Ct(p)?au(t,f)(p):m(p)}function c(p){return n(p)}function f(p){return p===34||p===39||p===40?uT(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function d(p){return Ct(p)?au(t,m)(p):m(p)}function m(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function J7(t,e,n){const r=this;return s;function s(c){return lT.call(r,t,a,l,"reference","referenceMarker","referenceString")(c)}function a(c){return r.parser.defined.includes(Nr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function l(c){return n(c)}}function X7(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),s}function s(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const W7={name:"labelStartImage",resolveAll:xv.resolveAll,tokenize:eH};function eH(t,e,n){const r=this;return s;function s(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),a}function a(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):e(c)}}const tH={name:"labelStartLink",resolveAll:xv.resolveAll,tokenize:nH};function nH(t,e,n){const r=this;return s;function s(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const Cg={name:"lineEnding",tokenize:rH};function rH(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),lt(t,e,"linePrefix")}}const Gf={name:"thematicBreak",tokenize:sH};function sH(t,e,n){let r=0,s;return a;function a(d){return t.enter("thematicBreak"),l(d)}function l(d){return s=d,c(d)}function c(d){return d===s?(t.enter("thematicBreakSequence"),f(d)):r>=3&&(d===null||De(d))?(t.exit("thematicBreak"),e(d)):n(d)}function f(d){return d===s?(t.consume(d),r++,f):(t.exit("thematicBreakSequence"),et(d)?lt(t,c,"whitespace")(d):c(d))}}const Dn={continuation:{tokenize:lH},exit:cH,name:"list",tokenize:oH},iH={partial:!0,tokenize:fH},aH={partial:!0,tokenize:uH};function oH(t,e,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return c;function c(y){const x=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:qy(y)){if(r.containerState.type||(r.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(Gf,n,d)(y):d(y);if(!r.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(y)}return n(y)}function f(y){return qy(y)&&++l<10?(t.consume(y),f):(!r.interrupt||l<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),d(y)):n(y)}function d(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,t.check(Lu,r.interrupt?n:m,t.attempt(iH,g,p))}function m(y){return r.containerState.initialBlankLine=!0,a++,g(y)}function p(y){return et(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),g):n(y)}function g(y){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function lH(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Lu,s,a);function s(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,lt(t,e,"listItemIndent",r.containerState.size+1)(c)}function a(c){return r.containerState.furtherBlankLines||!et(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(aH,e,l)(c))}function l(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,lt(t,t.attempt(Dn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function uH(t,e,n){const r=this;return lt(t,s,"listItemIndent",r.containerState.size+1);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(a):n(a)}}function cH(t){t.exit(this.containerState.type)}function fH(t,e,n){const r=this;return lt(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const l=r.events[r.events.length-1];return!et(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const CC={name:"setextUnderline",resolveTo:dH,tokenize:hH};function dH(t,e){let n=t.length,r,s,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",a?(t.splice(s,0,["enter",l,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function hH(t,e,n){const r=this;let s;return a;function a(d){let m=r.events.length,p;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){p=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),s=d,l(d)):n(d)}function l(d){return t.enter("setextHeadingLineSequence"),c(d)}function c(d){return d===s?(t.consume(d),c):(t.exit("setextHeadingLineSequence"),et(d)?lt(t,f,"lineSuffix")(d):f(d))}function f(d){return d===null||De(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const pH={tokenize:mH};function mH(t){const e=this,n=t.attempt(Lu,r,t.attempt(this.parser.constructs.flowInitial,s,lt(t,t.attempt(this.parser.constructs.flow,s,t.attempt(x7,s)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const gH={resolveAll:fT()},yH=cT("string"),vH=cT("text");function cT(t){return{resolveAll:fT(t==="text"?bH:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],a=n.attempt(s,l,c);return l;function l(m){return d(m)?a(m):c(m)}function c(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),f}function f(m){return d(m)?(n.exit("data"),a(m)):(n.consume(m),f)}function d(m){if(m===null)return!0;const p=s[m];let g=-1;if(p)for(;++g<p.length;){const y=p[g];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function fT(t){return e;function e(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return t?t(n,r):n}}function bH(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let a=s.length,l=-1,c=0,f;for(;a--;){const d=s[a];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(d===-2)f=!0,c++;else if(d!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const d={type:n===t.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const xH={42:Dn,43:Dn,45:Dn,48:Dn,49:Dn,50:Dn,51:Dn,52:Dn,53:Dn,54:Dn,55:Dn,56:Dn,57:Dn,62:rT},SH={91:E7},wH={[-2]:_g,[-1]:_g,32:_g},_H={35:M7,42:Gf,45:[CC,Gf],60:z7,61:CC,95:Gf,96:wC,126:wC},CH={38:iT,92:sT},EH={[-5]:Cg,[-4]:Cg,[-3]:Cg,33:W7,38:iT,42:Hy,60:[t7,U7],91:tH,92:[T7,sT],93:xv,95:Hy,96:p7},kH={null:[Hy,gH]},RH={null:[42,95]},AH={null:[]},TH=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:RH,contentInitial:SH,disable:AH,document:xH,flow:_H,flowInitial:wH,insideSpan:kH,string:CH,text:EH},Symbol.toStringTag,{value:"Module"}));function OH(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let l=[],c=[];const f={attempt:z(j),check:z(A),consume:k,enter:R,exit:I,interrupt:z(A,{interrupt:!0})},d={code:null,containerState:{},defineSkip:S,events:[],now:x,parser:t,previous:null,sliceSerialize:g,sliceStream:y,write:p};let m=e.tokenize.call(d,f);return e.resolveAll&&a.push(e),d;function p($){return l=yr(l,$),E(),l[l.length-1]!==null?[]:(L(e,0),d.events=uh(a,d.events,d),d.events)}function g($,G){return NH(y($),G)}function y($){return MH(l,$)}function x(){const{_bufferIndex:$,_index:G,line:ee,column:te,offset:V}=r;return{_bufferIndex:$,_index:G,line:ee,column:te,offset:V}}function S($){s[$.line]=$.column,M()}function E(){let $;for(;r._index<l.length;){const G=l[r._index];if(typeof G=="string")for($=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===$&&r._bufferIndex<G.length;)C(G.charCodeAt(r._bufferIndex));else C(G)}}function C($){m=m($)}function k($){De($)?(r.line++,r.column=1,r.offset+=$===-3?2:1,M()):$!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=$}function R($,G){const ee=G||{};return ee.type=$,ee.start=x(),d.events.push(["enter",ee,d]),c.push(ee),ee}function I($){const G=c.pop();return G.end=x(),d.events.push(["exit",G,d]),G}function j($,G){L($,G.from)}function A($,G){G.restore()}function z($,G){return ee;function ee(te,V,F){let J,ae,Q,N;return Array.isArray(te)?B(te):"tokenize"in te?B([te]):D(te);function D(he){return ve;function ve(Ae){const _e=Ae!==null&&he[Ae],me=Ae!==null&&he.null,Ee=[...Array.isArray(_e)?_e:_e?[_e]:[],...Array.isArray(me)?me:me?[me]:[]];return B(Ee)(Ae)}}function B(he){return J=he,ae=0,he.length===0?F:T(he[ae])}function T(he){return ve;function ve(Ae){return N=P(),Q=he,he.partial||(d.currentConstruct=he),he.name&&d.parser.constructs.disable.null.includes(he.name)?ce():he.tokenize.call(G?Object.assign(Object.create(d),G):d,f,se,ce)(Ae)}}function se(he){return $(Q,N),V}function ce(he){return N.restore(),++ae<J.length?T(J[ae]):F}}}function L($,G){$.resolveAll&&!a.includes($)&&a.push($),$.resolve&&er(d.events,G,d.events.length-G,$.resolve(d.events.slice(G),d)),$.resolveTo&&(d.events=$.resolveTo(d.events,d))}function P(){const $=x(),G=d.previous,ee=d.currentConstruct,te=d.events.length,V=Array.from(c);return{from:te,restore:F};function F(){r=$,d.previous=G,d.currentConstruct=ee,d.events.length=te,c=V,M()}}function M(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function MH(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,a=e.end._bufferIndex;let l;if(n===s)l=[t[n].slice(r,a)];else{if(l=t.slice(n,s),r>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(r):l.shift()}a>0&&l.push(t[s].slice(0,a))}return l}function NH(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&s)continue;l=" ";break}default:l=String.fromCharCode(a)}s=a===-2,r.push(l)}return r.join("")}function IH(t){const r={constructs:tT([TH,...(t||{}).extensions||[]]),content:s(Qq),defined:[],document:s(Yq),flow:s(pH),lazy:{},string:s(yH),text:s(vH)};return r;function s(a){return l;function l(c){return OH(r,a,c)}}}function DH(t){for(;!aT(t););return t}const EC=/[\0\t\n\r]/g;function zH(){let t=1,e="",n=!0,r;return s;function s(a,l,c){const f=[];let d,m,p,g,y;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),p=0,e="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(EC.lastIndex=p,d=EC.exec(a),g=d&&d.index!==void 0?d.index:a.length,y=a.charCodeAt(g),!d){e=a.slice(p);break}if(y===10&&p===g&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),p<g&&(f.push(a.slice(p,g)),t+=g-p),y){case 0:{f.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,f.push(-2);t++<m;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:r=!0,t=1}p=g+1}return c&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const jH=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function LH(t){return t.replace(jH,PH)}function PH(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return nT(n.slice(a?2:1),a?16:10)}return bv(n)||t}const dT={}.hasOwnProperty;function FH(t,e,n){return typeof e!="string"&&(n=e,e=void 0),$H(n)(DH(IH(n).document().write(zH()(t,e,!0))))}function $H(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(ht),autolinkProtocol:P,autolinkEmail:P,atxHeading:a(Ye),blockQuote:a(me),characterEscape:P,characterReference:P,codeFenced:a(Ee),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(Ee,l),codeText:a(Oe,l),codeTextData:P,data:P,codeFlowValue:P,definition:a(Ze),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(Le),hardBreakEscape:a(it),hardBreakTrailing:a(it),htmlFlow:a(Je,l),htmlFlowData:P,htmlText:a(Je,l),htmlTextData:P,image:a(ot),label:l,link:a(ht),listItem:a(ge),listItemValue:g,listOrdered:a(Me,p),listUnordered:a(Me),paragraph:a(je),reference:T,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(Ye),strong:a(be),thematicBreak:a(qe)},exit:{atxHeading:f(),atxHeadingSequence:j,autolink:f(),autolinkEmail:_e,autolinkProtocol:Ae,blockQuote:f(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:ce,characterReferenceMarkerNumeric:ce,characterReferenceValue:he,characterReference:ve,codeFenced:f(E),codeFencedFence:S,codeFencedFenceInfo:y,codeFencedFenceMeta:x,codeFlowValue:M,codeIndented:f(C),codeText:f(V),codeTextData:M,data:M,definition:f(),definitionDestinationString:I,definitionLabelString:k,definitionTitleString:R,emphasis:f(),hardBreakEscape:f(G),hardBreakTrailing:f(G),htmlFlow:f(ee),htmlFlowData:M,htmlText:f(te),htmlTextData:M,image:f(J),label:Q,labelText:ae,lineEnding:$,link:f(F),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:se,resourceDestinationString:N,resourceTitleString:D,resource:B,setextHeading:f(L),setextHeadingLineSequence:z,setextHeadingText:A,strong:f(),thematicBreak:f()}};hT(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ne){let fe={type:"root",children:[]};const Ce={stack:[fe],tokenStack:[],config:e,enter:c,exit:d,buffer:l,resume:m,data:n},ke=[];let xe=-1;for(;++xe<ne.length;)if(ne[xe][1].type==="listOrdered"||ne[xe][1].type==="listUnordered")if(ne[xe][0]==="enter")ke.push(xe);else{const Ue=ke.pop();xe=s(ne,Ue,xe)}for(xe=-1;++xe<ne.length;){const Ue=e[ne[xe][0]];dT.call(Ue,ne[xe][1].type)&&Ue[ne[xe][1].type].call(Object.assign({sliceSerialize:ne[xe][2].sliceSerialize},Ce),ne[xe][1])}if(Ce.tokenStack.length>0){const Ue=Ce.tokenStack[Ce.tokenStack.length-1];(Ue[1]||kC).call(Ce,void 0,Ue[0])}for(fe.position={start:Qs(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:Qs(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},xe=-1;++xe<e.transforms.length;)fe=e.transforms[xe](fe)||fe;return fe}function s(ne,fe,Ce){let ke=fe-1,xe=-1,Ue=!1,vt,ut,ct,kn;for(;++ke<=Ce;){const wt=ne[ke];switch(wt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{wt[0]==="enter"?xe++:xe--,kn=void 0;break}case"lineEndingBlank":{wt[0]==="enter"&&(vt&&!kn&&!xe&&!ct&&(ct=ke),kn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:kn=void 0}if(!xe&&wt[0]==="enter"&&wt[1].type==="listItemPrefix"||xe===-1&&wt[0]==="exit"&&(wt[1].type==="listUnordered"||wt[1].type==="listOrdered")){if(vt){let xs=ke;for(ut=void 0;xs--;){const _r=ne[xs];if(_r[1].type==="lineEnding"||_r[1].type==="lineEndingBlank"){if(_r[0]==="exit")continue;ut&&(ne[ut][1].type="lineEndingBlank",Ue=!0),_r[1].type="lineEnding",ut=xs}else if(!(_r[1].type==="linePrefix"||_r[1].type==="blockQuotePrefix"||_r[1].type==="blockQuotePrefixWhitespace"||_r[1].type==="blockQuoteMarker"||_r[1].type==="listItemIndent"))break}ct&&(!ut||ct<ut)&&(vt._spread=!0),vt.end=Object.assign({},ut?ne[ut][1].start:wt[1].end),ne.splice(ut||ke,0,["exit",vt,wt[2]]),ke++,Ce++}if(wt[1].type==="listItemPrefix"){const xs={type:"listItem",_spread:!1,start:Object.assign({},wt[1].start),end:void 0};vt=xs,ne.splice(ke,0,["enter",xs,wt[2]]),ke++,Ce++,ct=void 0,kn=!0}}}return ne[fe][1]._spread=Ue,Ce}function a(ne,fe){return Ce;function Ce(ke){c.call(this,ne(ke),ke),fe&&fe.call(this,ke)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(ne,fe,Ce){this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([fe,Ce||void 0]),ne.position={start:Qs(fe.start),end:void 0}}function f(ne){return fe;function fe(Ce){ne&&ne.call(this,Ce),d.call(this,Ce)}}function d(ne,fe){const Ce=this.stack.pop(),ke=this.tokenStack.pop();if(ke)ke[0].type!==ne.type&&(fe?fe.call(this,ne,ke[0]):(ke[1]||kC).call(this,ne,ke[0]));else throw new Error("Cannot close `"+ne.type+"` ("+iu({start:ne.start,end:ne.end})+"): its not open");Ce.position.end=Qs(ne.end)}function m(){return vv(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(ne){if(this.data.expectingFirstListItemValue){const fe=this.stack[this.stack.length-2];fe.start=Number.parseInt(this.sliceSerialize(ne),10),this.data.expectingFirstListItemValue=void 0}}function y(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.lang=ne}function x(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.meta=ne}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne.replace(/(\r?\n|\r)$/g,"")}function k(ne){const fe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.label=fe,Ce.identifier=Nr(this.sliceSerialize(ne)).toLowerCase()}function R(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.title=ne}function I(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.url=ne}function j(ne){const fe=this.stack[this.stack.length-1];if(!fe.depth){const Ce=this.sliceSerialize(ne).length;fe.depth=Ce}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function z(ne){const fe=this.stack[this.stack.length-1];fe.depth=this.sliceSerialize(ne).codePointAt(0)===61?1:2}function L(){this.data.setextHeadingSlurpLineEnding=void 0}function P(ne){const Ce=this.stack[this.stack.length-1].children;let ke=Ce[Ce.length-1];(!ke||ke.type!=="text")&&(ke=ye(),ke.position={start:Qs(ne.start),end:void 0},Ce.push(ke)),this.stack.push(ke)}function M(ne){const fe=this.stack.pop();fe.value+=this.sliceSerialize(ne),fe.position.end=Qs(ne.end)}function $(ne){const fe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ce=fe.children[fe.children.length-1];Ce.position.end=Qs(ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(fe.type)&&(P.call(this,ne),M.call(this,ne))}function G(){this.data.atHardBreak=!0}function ee(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne}function te(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne}function V(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne}function F(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const fe=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=fe,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function J(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const fe=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=fe,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function ae(ne){const fe=this.sliceSerialize(ne),Ce=this.stack[this.stack.length-2];Ce.label=LH(fe),Ce.identifier=Nr(fe).toLowerCase()}function Q(){const ne=this.stack[this.stack.length-1],fe=this.resume(),Ce=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ce.type==="link"){const ke=ne.children;Ce.children=ke}else Ce.alt=fe}function N(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.url=ne}function D(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.title=ne}function B(){this.data.inReference=void 0}function T(){this.data.referenceType="collapsed"}function se(ne){const fe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.label=fe,Ce.identifier=Nr(this.sliceSerialize(ne)).toLowerCase(),this.data.referenceType="full"}function ce(ne){this.data.characterReferenceType=ne.type}function he(ne){const fe=this.sliceSerialize(ne),Ce=this.data.characterReferenceType;let ke;Ce?(ke=nT(fe,Ce==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ke=bv(fe);const xe=this.stack[this.stack.length-1];xe.value+=ke}function ve(ne){const fe=this.stack.pop();fe.position.end=Qs(ne.end)}function Ae(ne){M.call(this,ne);const fe=this.stack[this.stack.length-1];fe.url=this.sliceSerialize(ne)}function _e(ne){M.call(this,ne);const fe=this.stack[this.stack.length-1];fe.url="mailto:"+this.sliceSerialize(ne)}function me(){return{type:"blockquote",children:[]}}function Ee(){return{type:"code",lang:null,meta:null,value:""}}function Oe(){return{type:"inlineCode",value:""}}function Ze(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Le(){return{type:"emphasis",children:[]}}function Ye(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function Je(){return{type:"html",value:""}}function ot(){return{type:"image",title:null,url:"",alt:null}}function ht(){return{type:"link",title:null,url:"",children:[]}}function Me(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function ge(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function je(){return{type:"paragraph",children:[]}}function be(){return{type:"strong",children:[]}}function ye(){return{type:"text",value:""}}function qe(){return{type:"thematicBreak"}}}function Qs(t){return{line:t.line,column:t.column,offset:t.offset}}function hT(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?hT(t,r):BH(t,r)}}function BH(t,e){let n;for(n in e)if(dT.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function kC(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+iu({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+iu({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+iu({start:e.start,end:e.end})+") is still open")}function UH(t){const e=this;e.parser=n;function n(r){return FH(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function qH(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function HH(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function VH(t,e){const n=e.value?e.value+`
`:"",r={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function KH(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function GH(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function QH(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=Eo(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,c=t.footnoteCounts.get(r);c===void 0?(c=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,c+=1,t.footnoteCounts.set(r,c);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,f);const d={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,d),t.applyData(e,d)}function ZH(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function YH(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function pT(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=r:s.push({type:"text",value:r}),s}function JH(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return pT(t,e);const s={src:Eo(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,a),t.applyData(e,a)}function XH(t,e){const n={src:Eo(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function WH(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function eV(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return pT(t,e);const s={href:Eo(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function tV(t,e){const n={href:Eo(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function nV(t,e,n){const r=t.all(e),s=n?rV(n):mT(e),a={},l=[];if(typeof e.checked=="boolean"){const m=r[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const m=r[c];(s||c!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?l.push(...m.children):l.push(m)}const f=r[r.length-1];f&&(s||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,d),t.applyData(e,d)}function rV(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=mT(n[r])}return e}function mT(t){const e=t.spread;return e??t.children.length>1}function sV(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const l=r[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function iV(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function aV(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function oV(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function lV(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=pv(e.children[1]),f=QA(e.children[e.children.length-1]);c&&f&&(l.position={start:c,end:f}),s.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function uV(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,c=l?l.length:e.children.length;let f=-1;const d=[];for(;++f<c;){const p=e.children[f],g={},y=l?l[f]:void 0;y&&(g.align=y);let x={type:"element",tagName:a,properties:g,children:[]};p&&(x.children=t.all(p),t.patch(p,x),x=t.applyData(p,x)),d.push(x)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,m),t.applyData(e,m)}function cV(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const RC=9,AC=32;function fV(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const a=[];for(;r;)a.push(TC(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return a.push(TC(e.slice(s),s>0,!1)),a.join("")}function TC(t,e,n){let r=0,s=t.length;if(e){let a=t.codePointAt(r);for(;a===RC||a===AC;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(s-1);for(;a===RC||a===AC;)s--,a=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function dV(t,e){const n={type:"text",value:fV(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function hV(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const pV={blockquote:qH,break:HH,code:VH,delete:KH,emphasis:GH,footnoteReference:QH,heading:ZH,html:YH,imageReference:JH,image:XH,inlineCode:WH,linkReference:eV,link:tV,listItem:nV,list:sV,paragraph:iV,root:aV,strong:oV,table:lV,tableCell:cV,tableRow:uV,text:dV,thematicBreak:hV,toml:Af,yaml:Af,definition:Af,footnoteDefinition:Af};function Af(){}const gT=-1,ch=0,ou=1,Nd=2,Sv=3,wv=4,_v=5,Cv=6,yT=7,vT=8,OC=typeof self=="object"?self:globalThis,mV=(t,e)=>{const n=(s,a)=>(t.set(a,s),s),r=s=>{if(t.has(s))return t.get(s);const[a,l]=e[s];switch(a){case ch:case gT:return n(l,s);case ou:{const c=n([],s);for(const f of l)c.push(r(f));return c}case Nd:{const c=n({},s);for(const[f,d]of l)c[r(f)]=r(d);return c}case Sv:return n(new Date(l),s);case wv:{const{source:c,flags:f}=l;return n(new RegExp(c,f),s)}case _v:{const c=n(new Map,s);for(const[f,d]of l)c.set(r(f),r(d));return c}case Cv:{const c=n(new Set,s);for(const f of l)c.add(r(f));return c}case yT:{const{name:c,message:f}=l;return n(new OC[c](f),s)}case vT:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:c}=new Uint8Array(l);return n(new DataView(c),l)}}return n(new OC[a](l),s)};return r},MC=t=>mV(new Map,t)(0),Ha="",{toString:gV}={},{keys:yV}=Object,Tl=t=>{const e=typeof t;if(e!=="object"||!t)return[ch,e];const n=gV.call(t).slice(8,-1);switch(n){case"Array":return[ou,Ha];case"Object":return[Nd,Ha];case"Date":return[Sv,Ha];case"RegExp":return[wv,Ha];case"Map":return[_v,Ha];case"Set":return[Cv,Ha];case"DataView":return[ou,n]}return n.includes("Array")?[ou,n]:n.includes("Error")?[yT,n]:[Nd,n]},Tf=([t,e])=>t===ch&&(e==="function"||e==="symbol"),vV=(t,e,n,r)=>{const s=(l,c)=>{const f=r.push(l)-1;return n.set(c,f),f},a=l=>{if(n.has(l))return n.get(l);let[c,f]=Tl(l);switch(c){case ch:{let m=l;switch(f){case"bigint":c=vT,m=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);m=null;break;case"undefined":return s([gT],l)}return s([c,m],l)}case ou:{if(f){let g=l;return f==="DataView"?g=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(g=new Uint8Array(l)),s([f,[...g]],l)}const m=[],p=s([c,m],l);for(const g of l)m.push(a(g));return p}case Nd:{if(f)switch(f){case"BigInt":return s([f,l.toString()],l);case"Boolean":case"Number":case"String":return s([f,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const m=[],p=s([c,m],l);for(const g of yV(l))(t||!Tf(Tl(l[g])))&&m.push([a(g),a(l[g])]);return p}case Sv:return s([c,l.toISOString()],l);case wv:{const{source:m,flags:p}=l;return s([c,{source:m,flags:p}],l)}case _v:{const m=[],p=s([c,m],l);for(const[g,y]of l)(t||!(Tf(Tl(g))||Tf(Tl(y))))&&m.push([a(g),a(y)]);return p}case Cv:{const m=[],p=s([c,m],l);for(const g of l)(t||!Tf(Tl(g)))&&m.push(a(g));return p}}const{message:d}=l;return s([c,{name:f,message:d}],l)};return a},NC=(t,{json:e,lossy:n}={})=>{const r=[];return vV(!(e||n),!!e,new Map,r)(t),r},Id=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?MC(NC(t,e)):structuredClone(t):(t,e)=>MC(NC(t,e));function bV(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function xV(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function SV(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||bV,r=t.options.footnoteBackLabel||xV,s=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let f=-1;for(;++f<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[f]);if(!d)continue;const m=t.all(d),p=String(d.identifier).toUpperCase(),g=Eo(p.toLowerCase());let y=0;const x=[],S=t.footnoteCounts.get(p);for(;S!==void 0&&++y<=S;){x.length>0&&x.push({type:"text",value:" "});let k=typeof n=="string"?n:n(f,y);typeof k=="string"&&(k={type:"text",value:k}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,y),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const E=m[m.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const k=E.children[E.children.length-1];k&&k.type==="text"?k.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...x)}else m.push(...x);const C={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(m,!0)};t.patch(d,C),c.push(C)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Id(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const fh=(function(t){if(t==null)return EV;if(typeof t=="function")return dh(t);if(typeof t=="object")return Array.isArray(t)?wV(t):_V(t);if(typeof t=="string")return CV(t);throw new Error("Expected function, string, or object as test")});function wV(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=fh(t[n]);return dh(r);function r(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function _V(t){const e=t;return dh(n);function n(r){const s=r;let a;for(a in t)if(s[a]!==e[a])return!1;return!0}}function CV(t){return dh(e);function e(n){return n&&n.type===t}}function dh(t){return e;function e(n,r,s){return!!(kV(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function EV(){return!0}function kV(t){return t!==null&&typeof t=="object"&&"type"in t}const bT=[],RV=!0,Vy=!1,AV="skip";function xT(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const a=fh(s),l=r?-1:1;c(t,void 0,[])();function c(f,d,m){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(f.type+(y?"<"+y+">":""))+")"})}return g;function g(){let y=bT,x,S,E;if((!e||a(f,d,m[m.length-1]||void 0))&&(y=TV(n(f,m)),y[0]===Vy))return y;if("children"in f&&f.children){const C=f;if(C.children&&y[0]!==AV)for(S=(r?C.children.length:-1)+l,E=m.concat(C);S>-1&&S<C.children.length;){const k=C.children[S];if(x=c(k,S,E)(),x[0]===Vy)return x;S=typeof x[1]=="number"?x[1]:S+l}}return y}}}function TV(t){return Array.isArray(t)?t:typeof t=="number"?[RV,t]:t==null?bT:[t]}function Ev(t,e,n,r){let s,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,s=n):(a=e,l=n,s=r),xT(t,a,c,s);function c(f,d){const m=d[d.length-1],p=m?m.children.indexOf(f):void 0;return l(f,p,m)}}const Ky={}.hasOwnProperty,OV={};function MV(t,e){const n=e||OV,r=new Map,s=new Map,a=new Map,l={...pV,...n.handlers},c={all:d,applyData:IV,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:l,one:f,options:n,patch:NV,wrap:zV};return Ev(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?r:s,g=String(m.identifier).toUpperCase();p.has(g)||p.set(g,m)}}),c;function f(m,p){const g=m.type,y=c.handlers[g];if(Ky.call(c.handlers,g)&&y)return y(c,m,p);if(c.options.passThrough&&c.options.passThrough.includes(g)){if("children"in m){const{children:S,...E}=m,C=Id(E);return C.children=c.all(m),C}return Id(m)}return(c.options.unknownHandler||DV)(c,m,p)}function d(m){const p=[];if("children"in m){const g=m.children;let y=-1;for(;++y<g.length;){const x=c.one(g[y],m);if(x){if(y&&g[y-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=IC(x.value)),!Array.isArray(x)&&x.type==="element")){const S=x.children[0];S&&S.type==="text"&&(S.value=IC(S.value))}Array.isArray(x)?p.push(...x):p.push(x)}}}return p}}function NV(t,e){t.position&&(e.position=xq(t))}function IV(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,Id(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function DV(t,e){const n=e.data||{},r="value"in e&&!(Ky.call(n,"hProperties")||Ky.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function zV(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function IC(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function DC(t,e){const n=MV(t,e),r=n.one(t,void 0),s=SV(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function jV(t,e){return t&&"run"in t?async function(n,r){const s=DC(n,{file:r,...e});await t.run(s,r)}:function(n,r){return DC(n,{file:r,...t||e})}}function zC(t){if(t)throw t}var Eg,jC;function LV(){if(jC)return Eg;jC=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},a=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var m=t.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!p)return!1;var g;for(g in d);return typeof g>"u"||t.call(d,g)},l=function(d,m){n&&m.name==="__proto__"?n(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},c=function(d,m){if(m==="__proto__")if(t.call(d,m)){if(r)return r(d,m).value}else return;return d[m]};return Eg=function f(){var d,m,p,g,y,x,S=arguments[0],E=1,C=arguments.length,k=!1;for(typeof S=="boolean"&&(k=S,S=arguments[1]||{},E=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});E<C;++E)if(d=arguments[E],d!=null)for(m in d)p=c(S,m),g=c(d,m),S!==g&&(k&&g&&(a(g)||(y=s(g)))?(y?(y=!1,x=p&&s(p)?p:[]):x=p&&a(p)?p:{},l(S,{name:m,newValue:f(k,x,g)})):typeof g<"u"&&l(S,{name:m,newValue:g}));return S},Eg}var PV=LV();const kg=Yy(PV);function Gy(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function FV(){const t=[],e={run:n,use:r};return e;function n(...s){let a=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...s);function c(f,...d){const m=t[++a];let p=-1;if(f){l(f);return}for(;++p<s.length;)(d[p]===null||d[p]===void 0)&&(d[p]=s[p]);s=d,m?$V(m,c)(...d):l(null,...d)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function $V(t,e){let n;return r;function r(...l){const c=t.length>l.length;let f;c&&l.push(s);try{f=t.apply(this,l)}catch(d){const m=d;if(c&&n)throw m;return s(m)}c||(f&&f.then&&typeof f.then=="function"?f.then(a,s):f instanceof Error?s(f):a(f))}function s(l,...c){n||(n=!0,e(l,...c))}function a(l){s(null,l)}}const Pr={basename:BV,dirname:UV,extname:qV,join:HV,sep:"/"};function BV(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Pu(t);let n=0,r=-1,s=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,c=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else l<0&&(a=!0,l=s+1),c>-1&&(t.codePointAt(s)===e.codePointAt(c--)?c<0&&(r=s):(c=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function UV(t){if(Pu(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function qV(t){Pu(t);let e=t.length,n=-1,r=0,s=-1,a=0,l;for(;e--;){const c=t.codePointAt(e);if(c===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),c===46?s<0?s=e:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function HV(...t){let e=-1,n;for(;++e<t.length;)Pu(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":VV(n)}function VV(t){Pu(t);const e=t.codePointAt(0)===47;let n=KV(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function KV(t,e){let n="",r=0,s=-1,a=0,l=-1,c,f;for(;++l<=t.length;){if(l<t.length)c=t.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),s=l,a=0;continue}}else if(n.length>0){n="",r=0,s=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),r=l-s-1;s=l,a=0}else c===46&&a>-1?a++:a=-1}return n}function Pu(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const GV={cwd:QV};function QV(){return"/"}function Qy(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function ZV(t){if(typeof t=="string")t=new URL(t);else if(!Qy(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return YV(t)}function YV(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Rg=["history","path","basename","stem","extname","dirname"];class ST{constructor(e){let n;e?Qy(e)?n={path:e}:typeof e=="string"||JV(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":GV.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Rg.length;){const a=Rg[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)Rg.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Pr.basename(this.path):void 0}set basename(e){Tg(e,"basename"),Ag(e,"basename"),this.path=Pr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Pr.dirname(this.path):void 0}set dirname(e){LC(this.basename,"dirname"),this.path=Pr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Pr.extname(this.path):void 0}set extname(e){if(Ag(e,"extname"),LC(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Pr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Qy(e)&&(e=ZV(e)),Tg(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Pr.basename(this.path,this.extname):void 0}set stem(e){Tg(e,"stem"),Ag(e,"stem"),this.path=Pr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new yn(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Ag(t,e){if(t&&t.includes(Pr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Pr.sep+"`")}function Tg(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function LC(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function JV(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const XV=(function(t){const r=this.constructor.prototype,s=r[t],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),WV={}.hasOwnProperty;class kv extends XV{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=FV()}copy(){const e=new kv;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(kg(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Ng("data",this.frozen),this.namespace[e]=n,this):WV.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Ng("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Of(e),r=this.parser||this.Parser;return Og("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Og("process",this.parser||this.Parser),Mg("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,l){const c=Of(e),f=r.parse(c);r.run(f,c,function(m,p,g){if(m||!p||!g)return d(m);const y=p,x=r.stringify(y,g);nK(x)?g.value=x:g.result=x,d(m,g)});function d(m,p){m||!p?l(m):a?a(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),Og("processSync",this.parser||this.Parser),Mg("processSync",this.compiler||this.Compiler),this.process(e,s),FC("processSync","process",n),r;function s(a,l){n=!0,zC(a),r=l}}run(e,n,r){PC(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,c){const f=Of(n);s.run(e,f,d);function d(m,p,g){const y=p||e;m?c(m):l?l(y):r(void 0,y,g)}}}runSync(e,n){let r=!1,s;return this.run(e,n,a),FC("runSync","run",r),s;function a(l,c){zC(l),s=c,r=!0}}stringify(e,n){this.freeze();const r=Of(n),s=this.compiler||this.Compiler;return Mg("stringify",s),PC(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(Ng("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...p]=d;f(m,p)}else l(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function l(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(d.plugins),d.settings&&(s.settings=kg(!0,s.settings,d.settings))}function c(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const p=d[m];a(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,m){let p=-1,g=-1;for(;++p<r.length;)if(r[p][0]===d){g=p;break}if(g===-1)r.push([d,...m]);else if(m.length>0){let[y,...x]=m;const S=r[g][1];Gy(S)&&Gy(y)&&(y=kg(!0,S,y)),r[g]=[d,y,...x]}}}}const eK=new kv().freeze();function Og(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Mg(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Ng(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function PC(t){if(!Gy(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function FC(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Of(t){return tK(t)?t:new ST(t)}function tK(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function nK(t){return typeof t=="string"||rK(t)}function rK(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const sK="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",$C=[],BC={allowDangerousHtml:!0},iK=/^(https?|ircs?|mailto|xmpp)$/i,aK=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function oK(t){const e=lK(t),n=uK(t);return cK(e.runSync(e.parse(n),n),t)}function lK(t){const e=t.rehypePlugins||$C,n=t.remarkPlugins||$C,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...BC}:BC;return eK().use(UH).use(n).use(jV,r).use(e)}function uK(t){const e=t.children||"",n=new ST;return typeof e=="string"&&(n.value=e),n}function cK(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,a=e.disallowedElements,l=e.skipHtml,c=e.unwrapDisallowed,f=e.urlTransform||fK;for(const m of aK)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+sK+m.id,void 0);return Ev(t,d),Eq(t,{Fragment:w.Fragment,components:s,ignoreInvalidStyle:!0,jsx:w.jsx,jsxs:w.jsxs,passKeys:!0,passNode:!0});function d(m,p,g){if(m.type==="raw"&&g&&typeof p=="number")return l?g.children.splice(p,1):g.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let y;for(y in wg)if(Object.hasOwn(wg,y)&&Object.hasOwn(m.properties,y)){const x=m.properties[y],S=wg[y];(S===null||S.includes(m.tagName))&&(m.properties[y]=f(String(x||""),y,m))}}if(m.type==="element"){let y=n?!n.includes(m.tagName):a?a.includes(m.tagName):!1;if(!y&&r&&typeof p=="number"&&(y=!r(m,p,g)),y&&g&&typeof p=="number")return c&&m.children?g.children.splice(p,1,...m.children):g.children.splice(p,1),p}}}function fK(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||iK.test(t.slice(0,e))?t:""}function UC(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function dK(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function wT(t,e,n){const s=fh((n||{}).ignore||[]),a=hK(e);let l=-1;for(;++l<a.length;)xT(t,"text",c);function c(d,m){let p=-1,g;for(;++p<m.length;){const y=m[p],x=g?g.children:void 0;if(s(y,x?x.indexOf(y):void 0,g))return;g=y}if(g)return f(d,m)}function f(d,m){const p=m[m.length-1],g=a[l][0],y=a[l][1];let x=0;const E=p.children.indexOf(d);let C=!1,k=[];g.lastIndex=0;let R=g.exec(d.value);for(;R;){const I=R.index,j={index:R.index,input:R.input,stack:[...m,d]};let A=y(...R,j);if(typeof A=="string"&&(A=A.length>0?{type:"text",value:A}:void 0),A===!1?g.lastIndex=I+1:(x!==I&&k.push({type:"text",value:d.value.slice(x,I)}),Array.isArray(A)?k.push(...A):A&&k.push(A),x=I+R[0].length,C=!0),!g.global)break;R=g.exec(d.value)}return C?(x<d.value.length&&k.push({type:"text",value:d.value.slice(x)}),p.children.splice(E,1,...k)):k=[d],E+k.length}}function hK(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([pK(s[0]),mK(s[1])])}return e}function pK(t){return typeof t=="string"?new RegExp(dK(t),"g"):t}function mK(t){return typeof t=="function"?t:function(){return t}}const Ig="phrasing",Dg=["autolink","link","image","label"];function gK(){return{transforms:[_K],enter:{literalAutolink:vK,literalAutolinkEmail:zg,literalAutolinkHttp:zg,literalAutolinkWww:zg},exit:{literalAutolink:wK,literalAutolinkEmail:SK,literalAutolinkHttp:bK,literalAutolinkWww:xK}}}function yK(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Ig,notInConstruct:Dg},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Ig,notInConstruct:Dg},{character:":",before:"[ps]",after:"\\/",inConstruct:Ig,notInConstruct:Dg}]}}function vK(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function zg(t){this.config.enter.autolinkProtocol.call(this,t)}function bK(t){this.config.exit.autolinkProtocol.call(this,t)}function xK(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function SK(t){this.config.exit.autolinkEmail.call(this,t)}function wK(t){this.exit(t)}function _K(t){wT(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,CK],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),EK]],{ignore:["link","linkReference"]})}function CK(t,e,n,r,s){let a="";if(!_T(s)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!kK(n)))return!1;const l=RK(n+r);if(!l[0])return!1;const c={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[c,{type:"text",value:l[1]}]:c}function EK(t,e,n,r){return!_T(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function kK(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function RK(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=UC(t,"(");let a=UC(t,")");for(;r!==-1&&s>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function _T(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Yi(n)||lh(n))&&(!e||n!==47)}CT.peek=jK;function AK(){this.buffer()}function TK(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function OK(){this.buffer()}function MK(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function NK(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Nr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function IK(t){this.exit(t)}function DK(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Nr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function zK(t){this.exit(t)}function jK(){return"["}function CT(t,e,n,r){const s=n.createTracker(r);let a=s.move("[^");const l=n.enter("footnoteReference"),c=n.enter("reference");return a+=s.move(n.safe(n.associationId(t),{after:"]",before:a})),c(),l(),a+=s.move("]"),a}function LK(){return{enter:{gfmFootnoteCallString:AK,gfmFootnoteCall:TK,gfmFootnoteDefinitionLabelString:OK,gfmFootnoteDefinition:MK},exit:{gfmFootnoteCallString:NK,gfmFootnoteCall:IK,gfmFootnoteDefinitionLabelString:DK,gfmFootnoteDefinition:zK}}}function PK(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:CT},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,l){const c=a.createTracker(l);let f=c.move("[^");const d=a.enter("footnoteDefinition"),m=a.enter("label");return f+=c.move(a.safe(a.associationId(r),{before:f,after:"]"})),m(),f+=c.move("]:"),r.children&&r.children.length>0&&(c.shift(4),f+=c.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,c.current()),e?ET:FK))),d(),f}}function FK(t,e,n){return e===0?t:ET(t,e,n)}function ET(t,e,n){return(n?"":"    ")+t}const $K=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];kT.peek=VK;function BK(){return{canContainEols:["delete"],enter:{strikethrough:qK},exit:{strikethrough:HK}}}function UK(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:$K}],handlers:{delete:kT}}}function qK(t){this.enter({type:"delete",children:[]},t)}function HK(t){this.exit(t)}function kT(t,e,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let l=s.move("~~");return l+=n.containerPhrasing(t,{...s.current(),before:l,after:"~"}),l+=s.move("~~"),a(),l}function VK(){return"~"}function KK(t){return t.length}function GK(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||KK,a=[],l=[],c=[],f=[];let d=0,m=-1;for(;++m<t.length;){const S=[],E=[];let C=-1;for(t[m].length>d&&(d=t[m].length);++C<t[m].length;){const k=QK(t[m][C]);if(n.alignDelimiters!==!1){const R=s(k);E[C]=R,(f[C]===void 0||R>f[C])&&(f[C]=R)}S.push(k)}l[m]=S,c[m]=E}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<d;)a[p]=qC(r[p]);else{const S=qC(r);for(;++p<d;)a[p]=S}p=-1;const g=[],y=[];for(;++p<d;){const S=a[p];let E="",C="";S===99?(E=":",C=":"):S===108?E=":":S===114&&(C=":");let k=n.alignDelimiters===!1?1:Math.max(1,f[p]-E.length-C.length);const R=E+"-".repeat(k)+C;n.alignDelimiters!==!1&&(k=E.length+k+C.length,k>f[p]&&(f[p]=k),y[p]=k),g[p]=R}l.splice(1,0,g),c.splice(1,0,y),m=-1;const x=[];for(;++m<l.length;){const S=l[m],E=c[m];p=-1;const C=[];for(;++p<d;){const k=S[p]||"";let R="",I="";if(n.alignDelimiters!==!1){const j=f[p]-(E[p]||0),A=a[p];A===114?R=" ".repeat(j):A===99?j%2?(R=" ".repeat(j/2+.5),I=" ".repeat(j/2-.5)):(R=" ".repeat(j/2),I=R):I=" ".repeat(j)}n.delimiterStart!==!1&&!p&&C.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&k==="")&&(n.delimiterStart!==!1||p)&&C.push(" "),n.alignDelimiters!==!1&&C.push(R),C.push(k),n.alignDelimiters!==!1&&C.push(I),n.padding!==!1&&C.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&C.push("|")}x.push(n.delimiterEnd===!1?C.join("").replace(/ +$/,""):C.join(""))}return x.join(`
`)}function QK(t){return t==null?"":String(t)}function qC(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function ZK(t,e,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const l=n.indentLines(n.containerFlow(t,a.current()),YK);return s(),l}function YK(t,e,n){return">"+(n?"":" ")+t}function JK(t,e){return HC(t,e.inConstruct,!0)&&!HC(t,e.notInConstruct,!1)}function HC(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function VC(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&JK(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function XK(t,e){const n=String(t);let r=n.indexOf(e),s=r,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>l&&(l=a):a=1,s=r+e.length,r=n.indexOf(e,s);return l}function WK(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function eG(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function tG(t,e,n,r){const s=eG(n),a=t.value||"",l=s==="`"?"GraveAccent":"Tilde";if(WK(t,n)){const p=n.enter("codeIndented"),g=n.indentLines(a,nG);return p(),g}const c=n.createTracker(r),f=s.repeat(Math.max(XK(a,s)+1,3)),d=n.enter("codeFenced");let m=c.move(f);if(t.lang){const p=n.enter(`codeFencedLang${l}`);m+=c.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...c.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${l}`);m+=c.move(" "),m+=c.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...c.current()})),p()}return m+=c.move(`
`),a&&(m+=c.move(a+`
`)),m+=c.move(f),d(),m}function nG(t,e,n){return(n?"":"    ")+t}function Rv(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function rG(t,e,n,r){const s=Rv(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const f=n.createTracker(r);let d=f.move("[");return d+=f.move(n.safe(n.associationId(t),{before:d,after:"]",...f.current()})),d+=f.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...f.current()}))),c(),t.title&&(c=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),c()),l(),d}function sG(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function _u(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Dd(t,e,n){const r=co(t),s=co(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}RT.peek=iG;function RT(t,e,n,r){const s=sG(n),a=n.enter("emphasis"),l=n.createTracker(r),c=l.move(s);let f=l.move(n.containerPhrasing(t,{after:s,before:c,...l.current()}));const d=f.charCodeAt(0),m=Dd(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=_u(d)+f.slice(1));const p=f.charCodeAt(f.length-1),g=Dd(r.after.charCodeAt(0),p,s);g.inside&&(f=f.slice(0,-1)+_u(p));const y=l.move(s);return a(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},c+f+y}function iG(t,e,n){return n.options.emphasis||"*"}function aG(t,e){let n=!1;return Ev(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Vy}),!!((!t.depth||t.depth<3)&&vv(t)&&(e.options.setext||n))}function oG(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(aG(t,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),g=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return p(),m(),g+`
`+(s===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const l="#".repeat(s),c=n.enter("headingAtx"),f=n.enter("phrasing");a.move(l+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=_u(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,n.options.closeAtx&&(d+=" "+l),f(),c(),d}AT.peek=lG;function AT(t){return t.value||""}function lG(){return"<"}TT.peek=uG;function TT(t,e,n,r){const s=Rv(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const f=n.createTracker(r);let d=f.move("![");return d+=f.move(n.safe(t.alt,{before:d,after:"]",...f.current()})),d+=f.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":")",...f.current()}))),c(),t.title&&(c=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),c()),d+=f.move(")"),l(),d}function uG(){return"!"}OT.peek=cG;function OT(t,e,n,r){const s=t.referenceType,a=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(r);let f=c.move("![");const d=n.safe(t.alt,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=c.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function cG(){return"!"}MT.peek=fG;function MT(t,e,n){let r=t.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const l=n.unsafe[a],c=n.compilePattern(l);let f;if(l.atBreak)for(;f=c.exec(r);){let d=f.index;r.charCodeAt(d)===10&&r.charCodeAt(d-1)===13&&d--,r=r.slice(0,d)+" "+r.slice(f.index+1)}}return s+r+s}function fG(){return"`"}function NT(t,e){const n=vv(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}IT.peek=dG;function IT(t,e,n,r){const s=Rv(n),a=s==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let c,f;if(NT(t,n)){const m=n.stack;n.stack=[],c=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(t,{before:p,after:">",...l.current()})),p+=l.move(">"),c(),n.stack=m,p}c=n.enter("link"),f=n.enter("label");let d=l.move("[");return d+=l.move(n.containerPhrasing(t,{before:d,after:"](",...l.current()})),d+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),d+=l.move("<"),d+=l.move(n.safe(t.url,{before:d,after:">",...l.current()})),d+=l.move(">")):(f=n.enter("destinationRaw"),d+=l.move(n.safe(t.url,{before:d,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${a}`),d+=l.move(" "+s),d+=l.move(n.safe(t.title,{before:d,after:s,...l.current()})),d+=l.move(s),f()),d+=l.move(")"),c(),d}function dG(t,e,n){return NT(t,n)?"<":"["}DT.peek=hG;function DT(t,e,n,r){const s=t.referenceType,a=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(r);let f=c.move("[");const d=n.containerPhrasing(t,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=c.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function hG(){return"["}function Av(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function pG(t){const e=Av(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function mG(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function zT(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function gG(t,e,n,r){const s=n.enter("list"),a=n.bulletCurrent;let l=t.ordered?mG(n):Av(n);const c=t.ordered?l==="."?")":".":pG(n);let f=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),zT(n)===l&&m){let p=-1;for(;++p<t.children.length;){const g=t.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=c),n.bulletCurrent=l;const d=n.containerFlow(t,r);return n.bulletLastUsed=l,n.bulletCurrent=a,s(),d}function yG(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function vG(t,e,n,r){const s=yG(n);let a=n.bulletCurrent||Av(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let l=a.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(r);c.move(a+" ".repeat(l-a.length)),c.shift(l);const f=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,c.current()),m);return f(),d;function m(p,g,y){return g?(y?"":" ".repeat(l))+p:(y?a:a+" ".repeat(l-a.length))+p}}function bG(t,e,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),l=n.containerPhrasing(t,r);return a(),s(),l}const xG=fh(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function SG(t,e,n,r){return(t.children.some(function(l){return xG(l)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function wG(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}jT.peek=_G;function jT(t,e,n,r){const s=wG(n),a=n.enter("strong"),l=n.createTracker(r),c=l.move(s+s);let f=l.move(n.containerPhrasing(t,{after:s,before:c,...l.current()}));const d=f.charCodeAt(0),m=Dd(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=_u(d)+f.slice(1));const p=f.charCodeAt(f.length-1),g=Dd(r.after.charCodeAt(0),p,s);g.inside&&(f=f.slice(0,-1)+_u(p));const y=l.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},c+f+y}function _G(t,e,n){return n.options.strong||"*"}function CG(t,e,n,r){return n.safe(t.value,r)}function EG(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function kG(t,e,n){const r=(zT(n)+(n.options.ruleSpaces?" ":"")).repeat(EG(n));return n.options.ruleSpaces?r.slice(0,-1):r}const LT={blockquote:ZK,break:VC,code:tG,definition:rG,emphasis:RT,hardBreak:VC,heading:oG,html:AT,image:TT,imageReference:OT,inlineCode:MT,link:IT,linkReference:DT,list:gG,listItem:vG,paragraph:bG,root:SG,strong:jT,text:CG,thematicBreak:kG};function RG(){return{enter:{table:AG,tableData:KC,tableHeader:KC,tableRow:OG},exit:{codeText:MG,table:TG,tableData:jg,tableHeader:jg,tableRow:jg}}}function AG(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function TG(t){this.exit(t),this.data.inTable=void 0}function OG(t){this.enter({type:"tableRow",children:[]},t)}function jg(t){this.exit(t)}function KC(t){this.enter({type:"tableCell",children:[]},t)}function MG(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,NG));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function NG(t,e){return e==="|"?e:t}function IG(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:l,tableCell:f,tableRow:c}};function l(y,x,S,E){return d(m(y,S,E),y.align)}function c(y,x,S,E){const C=p(y,S,E),k=d([C]);return k.slice(0,k.indexOf(`
`))}function f(y,x,S,E){const C=S.enter("tableCell"),k=S.enter("phrasing"),R=S.containerPhrasing(y,{...E,before:a,after:a});return k(),C(),R}function d(y,x){return GK(y,{align:x,alignDelimiters:r,padding:n,stringLength:s})}function m(y,x,S){const E=y.children;let C=-1;const k=[],R=x.enter("table");for(;++C<E.length;)k[C]=p(E[C],x,S);return R(),k}function p(y,x,S){const E=y.children;let C=-1;const k=[],R=x.enter("tableRow");for(;++C<E.length;)k[C]=f(E[C],y,x,S);return R(),k}function g(y,x,S){let E=LT.inlineCode(y,x,S);return S.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function DG(){return{exit:{taskListCheckValueChecked:GC,taskListCheckValueUnchecked:GC,paragraph:jG}}}function zG(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:LG}}}function GC(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function jG(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let a=-1,l;for(;++a<s.length;){const c=s[a];if(c.type==="paragraph"){l=c;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function LG(t,e,n,r){const s=t.children[0],a=typeof t.checked=="boolean"&&s&&s.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",c=n.createTracker(r);a&&c.move(l);let f=LT.listItem(t,e,n,{...r,...c.current()});return a&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),f;function d(m){return m+l}}function PG(){return[gK(),LK(),BK(),RG(),DG()]}function FG(t){return{extensions:[yK(),PK(t),UK(),IG(t),zG()]}}const $G={tokenize:KG,partial:!0},PT={tokenize:GG,partial:!0},FT={tokenize:QG,partial:!0},$T={tokenize:ZG,partial:!0},BG={tokenize:YG,partial:!0},BT={name:"wwwAutolink",tokenize:HG,previous:qT},UT={name:"protocolAutolink",tokenize:VG,previous:HT},bs={name:"emailAutolink",tokenize:qG,previous:VT},Kr={};function UG(){return{text:Kr}}let Mi=48;for(;Mi<123;)Kr[Mi]=bs,Mi++,Mi===58?Mi=65:Mi===91&&(Mi=97);Kr[43]=bs;Kr[45]=bs;Kr[46]=bs;Kr[95]=bs;Kr[72]=[bs,UT];Kr[104]=[bs,UT];Kr[87]=[bs,BT];Kr[119]=[bs,BT];function qG(t,e,n){const r=this;let s,a;return l;function l(p){return!Zy(p)||!VT.call(r,r.previous)||Tv(r.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),c(p))}function c(p){return Zy(p)?(t.consume(p),c):p===64?(t.consume(p),f):n(p)}function f(p){return p===46?t.check(BG,m,d)(p):p===45||p===95||gn(p)?(a=!0,t.consume(p),f):m(p)}function d(p){return t.consume(p),s=!0,f}function m(p){return a&&s&&Cn(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function HG(t,e,n){const r=this;return s;function s(l){return l!==87&&l!==119||!qT.call(r,r.previous)||Tv(r.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check($G,t.attempt(PT,t.attempt(FT,a),n),n)(l))}function a(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function VG(t,e,n){const r=this;let s="",a=!1;return l;function l(p){return(p===72||p===104)&&HT.call(r,r.previous)&&!Tv(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(p),t.consume(p),c):n(p)}function c(p){if(Cn(p)&&s.length<5)return s+=String.fromCodePoint(p),t.consume(p),c;if(p===58){const g=s.toLowerCase();if(g==="http"||g==="https")return t.consume(p),f}return n(p)}function f(p){return p===47?(t.consume(p),a?d:(a=!0,f)):n(p)}function d(p){return p===null||Md(p)||Ct(p)||Yi(p)||lh(p)?n(p):t.attempt(PT,t.attempt(FT,m),n)(p)}function m(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function KG(t,e,n){let r=0;return s;function s(l){return(l===87||l===119)&&r<3?(r++,t.consume(l),s):l===46&&r===3?(t.consume(l),a):n(l)}function a(l){return l===null?n(l):e(l)}}function GG(t,e,n){let r,s,a;return l;function l(d){return d===46||d===95?t.check($T,f,c)(d):d===null||Ct(d)||Yi(d)||d!==45&&lh(d)?f(d):(a=!0,t.consume(d),l)}function c(d){return d===95?r=!0:(s=r,r=void 0),t.consume(d),l}function f(d){return s||r||!a?n(d):e(d)}}function QG(t,e){let n=0,r=0;return s;function s(l){return l===40?(n++,t.consume(l),s):l===41&&r<n?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check($T,e,a)(l):l===null||Ct(l)||Yi(l)?e(l):(t.consume(l),s)}function a(l){return l===41&&r++,t.consume(l),s}}function ZG(t,e,n){return r;function r(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(t.consume(c),r):c===38?(t.consume(c),a):c===93?(t.consume(c),s):c===60||c===null||Ct(c)||Yi(c)?e(c):n(c)}function s(c){return c===null||c===40||c===91||Ct(c)||Yi(c)?e(c):r(c)}function a(c){return Cn(c)?l(c):n(c)}function l(c){return c===59?(t.consume(c),r):Cn(c)?(t.consume(c),l):n(c)}}function YG(t,e,n){return r;function r(a){return t.consume(a),s}function s(a){return gn(a)?n(a):e(a)}}function qT(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Ct(t)}function HT(t){return!Cn(t)}function VT(t){return!(t===47||Zy(t))}function Zy(t){return t===43||t===45||t===46||t===95||gn(t)}function Tv(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const JG={tokenize:iQ,partial:!0};function XG(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:nQ,continuation:{tokenize:rQ},exit:sQ}},text:{91:{name:"gfmFootnoteCall",tokenize:tQ},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:WG,resolveTo:eQ}}}}function WG(t,e,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;s--;){const f=r.events[s][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return c;function c(f){if(!l||!l._balanced)return n(f);const d=Nr(r.sliceSerialize({start:l.end,end:r.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?n(f):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),e(f))}}function eQ(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},c=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...c),t}function tQ(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,l;return c;function c(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(p){if(a>999||p===93&&!l||p===null||p===91||Ct(p))return n(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteCallString");return s.includes(Nr(r.sliceSerialize(g)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return Ct(p)||(l=!0),a++,t.consume(p),p===92?m:d}function m(p){return p===91||p===92||p===93?(t.consume(p),a++,d):d(p)}}function nQ(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,l=0,c;return f;function f(x){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(x){return x===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(x)}function m(x){if(l>999||x===93&&!c||x===null||x===91||Ct(x))return n(x);if(x===93){t.exit("chunkString");const S=t.exit("gfmFootnoteDefinitionLabelString");return a=Nr(r.sliceSerialize(S)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),g}return Ct(x)||(c=!0),l++,t.consume(x),x===92?p:m}function p(x){return x===91||x===92||x===93?(t.consume(x),l++,m):m(x)}function g(x){return x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),s.includes(a)||s.push(a),lt(t,y,"gfmFootnoteDefinitionWhitespace")):n(x)}function y(x){return e(x)}}function rQ(t,e,n){return t.check(Lu,e,t.attempt(JG,e,n))}function sQ(t){t.exit("gfmFootnoteDefinition")}function iQ(t,e,n){const r=this;return lt(t,s,"gfmFootnoteDefinitionIndent",5);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):n(a)}}function aQ(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(l,c){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let d=f;for(;d--;)if(l[d][0]==="exit"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[d][1].end.offset-l[d][1].start.offset){l[f][1].type="strikethroughSequence",l[d][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[d][1].start),end:Object.assign({},l[f][1].end)},p={type:"strikethroughText",start:Object.assign({},l[d][1].end),end:Object.assign({},l[f][1].start)},g=[["enter",m,c],["enter",l[d][1],c],["exit",l[d][1],c],["enter",p,c]],y=c.parser.constructs.insideSpan.null;y&&er(g,g.length,0,uh(y,l.slice(d+1,f),c)),er(g,g.length,0,[["exit",p,c],["enter",l[f][1],c],["exit",l[f][1],c],["exit",m,c]]),er(l,d-1,f-d+3,g),f=d+g.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function a(l,c,f){const d=this.previous,m=this.events;let p=0;return g;function g(x){return d===126&&m[m.length-1][1].type!=="characterEscape"?f(x):(l.enter("strikethroughSequenceTemporary"),y(x))}function y(x){const S=co(d);if(x===126)return p>1?f(x):(l.consume(x),p++,y);if(p<2&&!n)return f(x);const E=l.exit("strikethroughSequenceTemporary"),C=co(x);return E._open=!C||C===2&&!!S,E._close=!S||S===2&&!!C,c(x)}}}class oQ{constructor(){this.map=[]}add(e,n,r){lQ(this,e,n,r)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const a of s)e.push(a);s=r.pop()}this.map.length=0}}function lQ(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function uQ(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function cQ(){return{flow:{null:{name:"table",tokenize:fQ,resolveAll:dQ}}}}function fQ(t,e,n){const r=this;let s=0,a=0,l;return c;function c(M){let $=r.events.length-1;for(;$>-1;){const te=r.events[$][1].type;if(te==="lineEnding"||te==="linePrefix")$--;else break}const G=$>-1?r.events[$][1].type:null,ee=G==="tableHead"||G==="tableRow"?A:f;return ee===A&&r.parser.lazy[r.now().line]?n(M):ee(M)}function f(M){return t.enter("tableHead"),t.enter("tableRow"),d(M)}function d(M){return M===124||(l=!0,a+=1),m(M)}function m(M){return M===null?n(M):De(M)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),y):n(M):et(M)?lt(t,m,"whitespace")(M):(a+=1,l&&(l=!1,s+=1),M===124?(t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),l=!0,m):(t.enter("data"),p(M)))}function p(M){return M===null||M===124||Ct(M)?(t.exit("data"),m(M)):(t.consume(M),M===92?g:p)}function g(M){return M===92||M===124?(t.consume(M),p):p(M)}function y(M){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(M):(t.enter("tableDelimiterRow"),l=!1,et(M)?lt(t,x,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):x(M))}function x(M){return M===45||M===58?E(M):M===124?(l=!0,t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),S):j(M)}function S(M){return et(M)?lt(t,E,"whitespace")(M):E(M)}function E(M){return M===58?(a+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(M),t.exit("tableDelimiterMarker"),C):M===45?(a+=1,C(M)):M===null||De(M)?I(M):j(M)}function C(M){return M===45?(t.enter("tableDelimiterFiller"),k(M)):j(M)}function k(M){return M===45?(t.consume(M),k):M===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(M),t.exit("tableDelimiterMarker"),R):(t.exit("tableDelimiterFiller"),R(M))}function R(M){return et(M)?lt(t,I,"whitespace")(M):I(M)}function I(M){return M===124?x(M):M===null||De(M)?!l||s!==a?j(M):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(M)):j(M)}function j(M){return n(M)}function A(M){return t.enter("tableRow"),z(M)}function z(M){return M===124?(t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),z):M===null||De(M)?(t.exit("tableRow"),e(M)):et(M)?lt(t,z,"whitespace")(M):(t.enter("data"),L(M))}function L(M){return M===null||M===124||Ct(M)?(t.exit("data"),z(M)):(t.consume(M),M===92?P:L)}function P(M){return M===92||M===124?(t.consume(M),L):L(M)}}function dQ(t,e){let n=-1,r=!0,s=0,a=[0,0,0,0],l=[0,0,0,0],c=!1,f=0,d,m,p;const g=new oQ;for(;++n<t.length;){const y=t[n],x=y[1];y[0]==="enter"?x.type==="tableHead"?(c=!1,f!==0&&(QC(g,e,f,d,m),m=void 0,f=0),d={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},g.add(n,0,[["enter",d,e]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(r=!0,p=void 0,a=[0,0,0,0],l=[0,n+1,0,0],c&&(c=!1,m={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},g.add(n,0,[["enter",m,e]])),s=x.type==="tableDelimiterRow"?2:m?3:1):s&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],p=Mf(g,e,a,s,void 0,p),a=[0,0,0,0]),l[2]=n)):x.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(l[0]=l[1],p=Mf(g,e,a,s,void 0,p)),a=l,l=[a[1],n,0,0])):x.type==="tableHead"?(c=!0,f=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(f=n,a[1]!==0?(l[0]=l[1],p=Mf(g,e,a,s,n,p)):l[1]!==0&&(p=Mf(g,e,l,s,n,p)),s=0):s&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(l[3]=n)}for(f!==0&&QC(g,e,f,d,m),g.consume(e.events),n=-1;++n<e.events.length;){const y=e.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=uQ(e.events,n))}return t}function Mf(t,e,n,r,s,a){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(a.end=Object.assign({},Za(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const f=Za(e.events,n[1]);if(a={type:l,start:Object.assign({},f),end:Object.assign({},f)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const d=Za(e.events,n[2]),m=Za(e.events,n[3]),p={type:c,start:Object.assign({},d),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",p,e]]),r!==2){const g=e.events[n[2]],y=e.events[n[3]];if(g[1].end=Object.assign({},y[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,S=n[3]-n[2]-1;t.add(x,S,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return s!==void 0&&(a.end=Object.assign({},Za(e.events,s)),t.add(s,0,[["exit",a,e]]),a=void 0),a}function QC(t,e,n,r,s){const a=[],l=Za(e.events,n);s&&(s.end=Object.assign({},l),a.push(["exit",s,e])),r.end=Object.assign({},l),a.push(["exit",r,e]),t.add(n+1,0,a)}function Za(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const hQ={name:"tasklistCheck",tokenize:mQ};function pQ(){return{text:{91:hQ}}}function mQ(t,e,n){const r=this;return s;function s(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(f):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),a)}function a(f){return Ct(f)?(t.enter("taskListCheckValueUnchecked"),t.consume(f),t.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(t.enter("taskListCheckValueChecked"),t.consume(f),t.exit("taskListCheckValueChecked"),l):n(f)}function l(f){return f===93?(t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),c):n(f)}function c(f){return De(f)?e(f):et(f)?t.check({tokenize:gQ},e,n)(f):n(f)}}function gQ(t,e,n){return lt(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function yQ(t){return tT([UG(),XG(),aQ(t),cQ(),pQ()])}const vQ={};function bQ(t){const e=this,n=t||vQ,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(yQ(n)),a.push(PG()),l.push(FG(n))}function xQ(t){wT(t,[/\r?\n|\r/g,SQ])}function SQ(){return{type:"break"}}function wQ(){return function(t){xQ(t)}}const _Q={pre:({children:t})=>w.jsx(w.Fragment,{children:t}),li:({children:t,...e})=>w.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>w.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>w.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>w.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let r=e||"";return r&&!r.startsWith("http")&&!r.startsWith("#")&&(r=`https://${r}`),w.jsx("a",{className:"text-sky-400 hover:underline",href:r,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>w.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>w.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>w.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>w.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>w.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>w.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>w.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>w.jsx("div",{className:"overflow-x-auto my-3",children:w.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>w.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>w.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>w.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>w.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>w.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>w.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>w.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const r=/language-(\w+)/.exec(e||""),s=String(t).replace(/\n$/,""),a=s.includes(`
`);if(!r&&!a)return w.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const l=r?.[1]||"text";return w.jsxs("div",{className:"my-3",children:[w.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:w.jsx("span",{children:l})}),w.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:w.jsx("code",{className:"text-xs font-mono text-neutral-200",children:s})})]})}},CQ=[bQ,wQ],EQ=t=>{const e=tn.c(6),{children:n}=t;if(!n)return null;let r=n,s;if(e[0]!==r){r=r.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=/```\n(#{1,6}\s+)/gm,e[3]=l):l=e[3],s=r.replace(l,"```\n\n$1"),e[0]=r,e[1]=s,e[2]=r}else s=e[1],r=e[2];r=s;let a;return e[4]!==r?(a=w.jsx(oK,{remarkPlugins:CQ,components:_Q,children:r}),e[4]=r,e[5]=a):a=e[5],a},kQ=q.memo(EQ,(t,e)=>t.children===e.children);function RQ(t){const e=tn.c(90),{isOpen:n,onClose:r,connection:s,database:a,table:l,currentQuery:c,queryResult:f,schema:d,setters:m}=t,[p,g]=q.useState(""),y=q.useRef(null),x=q.useRef(null),S=q.useRef(s?.id);let E;e[0]!==s||e[1]!==c||e[2]!==a||e[3]!==f||e[4]!==d||e[5]!==m||e[6]!==l?(E={connection:s,database:a,table:l,currentQuery:c,queryResult:f,schema:d,setters:m},e[0]=s,e[1]=c,e[2]=a,e[3]=f,e[4]=d,e[5]=m,e[6]=l,e[7]=E):E=e[7];const C=E;let k;e[8]!==C?(k=Z9(C),e[8]=C,e[9]=k):k=e[9];const R=k;let I;e[10]!==C?(I=Y9(C),e[10]=C,e[11]=I):I=e[11];const j=I;let A;if(e[12]!==j||e[13]!==R){const xe=x$(),Ue=b$(xe);A=q6(vt=>w6({adapter:Ue,messages:vt,tools:R,systemPrompts:[j],agentLoopStrategy:Dk(10)})),e[12]=j,e[13]=R,e[14]=A}else A=e[14];const z=A;let L;e[15]!==z||e[16]!==R?(L={connection:z,tools:R},e[15]=z,e[16]=R,e[17]=L):L=e[17];const{messages:P,sendMessage:M,isLoading:$,stop:G,clear:ee}=H6(L);let te;e[18]!==ee||e[19]!==s?.id?(te=()=>{S.current!==s?.id&&(ee(),S.current=s?.id)},e[18]=ee,e[19]=s?.id,e[20]=te):te=e[20];const V=s?.id;let F;e[21]!==ee||e[22]!==V?(F=[V,ee],e[21]=ee,e[22]=V,e[23]=F):F=e[23],q.useEffect(te,F);let J;e[24]===Symbol.for("react.memo_cache_sentinel")?(J=()=>{y.current?.scrollIntoView({behavior:"smooth"})},e[24]=J):J=e[24];let ae;e[25]!==P?(ae=[P],e[25]=P,e[26]=ae):ae=e[26],q.useEffect(J,ae);let Q,N;e[27]!==n?(Q=()=>{n&&x.current?.focus()},N=[n],e[27]=n,e[28]=Q,e[29]=N):(Q=e[28],N=e[29]),q.useEffect(Q,N);let D;e[30]!==p||e[31]!==$||e[32]!==M?(D=xe=>{xe.preventDefault(),!(!p.trim()||$)&&(M(p.trim()),g(""))},e[30]=p,e[31]=$,e[32]=M,e[33]=D):D=e[33];const B=D;let T;e[34]!==B?(T=xe=>{xe.key==="Enter"&&!xe.shiftKey&&(xe.preventDefault(),B(xe))},e[34]=B,e[35]=T):T=e[35];const se=T,ce=AQ;let he;e[36]!==$||e[37]!==P?(he=(xe,Ue)=>$&&xe.role==="assistant"&&Ue===P.length-1,e[36]=$,e[37]=P,e[38]=he):he=e[38];const ve=he;if(!n)return null;let Ae;e[39]===Symbol.for("react.memo_cache_sentinel")?(Ae=w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Gg,{size:16,className:"text-amber-500"}),w.jsx("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:iC.name})]}),e[39]=Ae):Ae=e[39];let _e;e[40]===Symbol.for("react.memo_cache_sentinel")?(_e=w.jsx(du,{size:16}),e[40]=_e):_e=e[40];let me;e[41]!==ee?(me=w.jsx("button",{onClick:ee,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",title:"Clear chat",children:_e}),e[41]=ee,e[42]=me):me=e[42];let Ee;e[43]===Symbol.for("react.memo_cache_sentinel")?(Ee=w.jsx(Eu,{size:16}),e[43]=Ee):Ee=e[43];let Oe;e[44]!==r?(Oe=w.jsx("button",{onClick:r,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",children:Ee}),e[44]=r,e[45]=Oe):Oe=e[45];let Ze;e[46]!==me||e[47]!==Oe?(Ze=w.jsxs("div",{className:"shrink-0 h-12 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[Ae,w.jsxs("div",{className:"flex items-center gap-1",children:[me,Oe]})]}),e[46]=me,e[47]=Oe,e[48]=Ze):Ze=e[48];let Le;e[49]!==P.length?(Le=P.length===0&&w.jsxs("div",{className:"text-center text-neutral-500 dark:text-neutral-400 text-sm py-8",children:[w.jsx(Gg,{size:24,className:"mx-auto mb-3 text-amber-500/50"}),w.jsx("p",{className:"mb-2",children:"Ask me to help with your SQL queries"}),w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:`Examples: "Write a query to find all users created this month" or "What's wrong with my query?"`})]}),e[49]=P.length,e[50]=Le):Le=e[50];let Ye;if(e[51]!==ve||e[52]!==P){let xe;e[54]!==ve?(xe=(Ue,vt)=>{const ut=ce(Ue);return w.jsx("div",{className:"space-y-3",children:(ut||ve(Ue,vt))&&w.jsx("div",{className:`text-sm ${Ue.role==="user"?"bg-neutral-100 dark:bg-neutral-800 rounded-lg px-3 py-2":""}`,children:w.jsx("div",{className:Ue.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300",children:Ue.role==="assistant"?ut?w.jsx(kQ,{children:ut}):ve(Ue,vt)?w.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[w.jsx(Ki,{size:14,className:"animate-spin"}),"Thinking..."]}):null:w.jsx("span",{className:"whitespace-pre-wrap",children:ut})})})},Ue.id)},e[54]=ve,e[55]=xe):xe=e[55],Ye=P.map(xe),e[51]=ve,e[52]=P,e[53]=Ye}else Ye=e[53];let it;e[56]!==$||e[57]!==P?(it=$&&(P.length===0||P[P.length-1]?.role==="user")&&w.jsx("div",{className:"text-sm",children:w.jsx("div",{className:"text-neutral-800 dark:text-neutral-200",children:w.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[w.jsx(Ki,{size:14,className:"animate-spin"}),"Thinking..."]})})}),e[56]=$,e[57]=P,e[58]=it):it=e[58];let Je;e[59]===Symbol.for("react.memo_cache_sentinel")?(Je=w.jsx("div",{ref:y}),e[59]=Je):Je=e[59];let ot;e[60]!==Le||e[61]!==Ye||e[62]!==it?(ot=w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[Le,Ye,it,Je]}),e[60]=Le,e[61]=Ye,e[62]=it,e[63]=ot):ot=e[63];let ht;e[64]===Symbol.for("react.memo_cache_sentinel")?(ht=xe=>g(xe.target.value),e[64]=ht):ht=e[64];let Me;e[65]===Symbol.for("react.memo_cache_sentinel")?(Me={maxHeight:"120px"},e[65]=Me):Me=e[65];let ge;e[66]!==se||e[67]!==p||e[68]!==$?(ge=w.jsx("textarea",{ref:x,value:p,onChange:ht,onKeyDown:se,placeholder:iC.placeholder,rows:1,disabled:$,className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 rounded-lg text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-400 resize-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 disabled:opacity-50",style:Me}),e[66]=se,e[67]=p,e[68]=$,e[69]=ge):ge=e[69];const je=$?"button":"submit",be=$?G:void 0;let ye;e[70]!==p||e[71]!==$?(ye=!$&&!p.trim(),e[70]=p,e[71]=$,e[72]=ye):ye=e[72];let qe;e[73]!==$?(qe=$?w.jsx(LD,{size:16}):w.jsx(ND,{size:16}),e[73]=$,e[74]=qe):qe=e[74];let ne;e[75]!==je||e[76]!==be||e[77]!==ye||e[78]!==qe?(ne=w.jsx("button",{type:je,onClick:be,disabled:ye,className:"p-2 bg-amber-500 hover:bg-amber-400 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-lg transition-colors",children:qe}),e[75]=je,e[76]=be,e[77]=ye,e[78]=qe,e[79]=ne):ne=e[79];let fe;e[80]!==ge||e[81]!==ne?(fe=w.jsxs("div",{className:"flex items-end gap-2",children:[ge,ne]}),e[80]=ge,e[81]=ne,e[82]=fe):fe=e[82];let Ce;e[83]!==B||e[84]!==fe?(Ce=w.jsx("form",{onSubmit:B,className:"shrink-0 p-3 border-t border-neutral-200 dark:border-neutral-800",children:fe}),e[83]=B,e[84]=fe,e[85]=Ce):Ce=e[85];let ke;return e[86]!==Ze||e[87]!==ot||e[88]!==Ce?(ke=w.jsxs("div",{className:"w-96 shrink-0 bg-white border border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col rounded-xl overflow-hidden",children:[Ze,ot,Ce]}),e[86]=Ze,e[87]=ot,e[88]=Ce,e[89]=ke):ke=e[89],ke}function AQ(t){return t.parts.filter(OQ).map(TQ).join("").replace(/^undefined/,"")}function TQ(t){return t.content}function OQ(t){return t.type==="text"&&!!t.content}const MQ={folder:id,image:DE,document:NE,code:ME,archive:TE,file:id};function NQ(t){const e=tn.c(75),{connection:n,container:r,objectKey:s,onClose:a}=t;let l;e[0]!==n.id||e[1]!==r||e[2]!==s?(l=["storage-object-details",n.id,r,s],e[0]=n.id,e[1]=r,e[2]=s,e[3]=l):l=e[3];let c;e[4]!==n||e[5]!==r||e[6]!==s?(c=()=>$5(n,r,s),e[4]=n,e[5]=r,e[6]=s,e[7]=c):c=e[7];const f=!!n&&!!r&&!!s;let d;e[8]!==l||e[9]!==c||e[10]!==f?(d={queryKey:l,queryFn:c,enabled:f},e[8]=l,e[9]=c,e[10]=f,e[11]=d):d=e[11];const{data:m,isLoading:p,error:g}=ys(d);let y;e[12]!==n||e[13]!==r||e[14]!==s?(y=async()=>{try{const se=await B5(n,r,s),ce=document.createElement("a");ce.href=se,ce.download=yu(s),ce.target="_blank",ce.style.display="none",document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)}catch(se){console.error("Failed to get download URL:",se)}},e[12]=n,e[13]=r,e[14]=s,e[15]=y):y=e[15];const x=y;if(p){let se;return e[16]===Symbol.for("react.memo_cache_sentinel")?(se=w.jsx("div",{className:"flex-1 flex items-center justify-center",children:w.jsx(Ki,{className:"w-6 h-6 text-neutral-400 animate-spin"})}),e[16]=se):se=e[16],se}if(g||!m){const se=g?"Failed to load object details":"Select an object to view details";let ce;return e[17]!==se?(ce=w.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-400 dark:text-neutral-600 text-sm",children:se}),e[17]=se,e[18]=ce):ce=e[18],ce}const S=ck(s),E=MQ[S];let C;e[19]!==s?(C=yu(s),e[19]=s,e[20]=C):C=e[20];const k=C;let R;e[21]!==E?(R=w.jsx("div",{className:"w-10 h-10 rounded-lg bg-neutral-100 dark:bg-white/5 flex items-center justify-center",children:w.jsx(E,{className:"w-5 h-5 text-neutral-500 dark:text-neutral-400"})}),e[21]=E,e[22]=R):R=e[22];let I;e[23]!==k?(I=w.jsx("h2",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 truncate",children:k}),e[23]=k,e[24]=I):I=e[24];let j;e[25]!==r||e[26]!==s?(j=w.jsxs("p",{className:"text-xs text-neutral-400 dark:text-neutral-500 truncate",children:[r,"/",s]}),e[25]=r,e[26]=s,e[27]=j):j=e[27];let A;e[28]!==I||e[29]!==j?(A=w.jsxs("div",{className:"flex-1 min-w-0",children:[I,j]}),e[28]=I,e[29]=j,e[30]=A):A=e[30];let z;e[31]===Symbol.for("react.memo_cache_sentinel")?(z=w.jsx(cD,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),e[31]=z):z=e[31];let L;e[32]!==x?(L=w.jsx("button",{onClick:x,className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Download",children:z}),e[32]=x,e[33]=L):L=e[33];let P;e[34]===Symbol.for("react.memo_cache_sentinel")?(P=w.jsx(Eu,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),e[34]=P):P=e[34];let M;e[35]!==a?(M=w.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Close",children:P}),e[35]=a,e[36]=M):M=e[36];let $;e[37]!==L||e[38]!==M?($=w.jsxs("div",{className:"flex items-center gap-1",children:[L,M]}),e[37]=L,e[38]=M,e[39]=$):$=e[39];let G;e[40]!==A||e[41]!==$||e[42]!==R?(G=w.jsx("div",{className:"px-4 py-3 border-b border-neutral-200 dark:border-white/8",children:w.jsxs("div",{className:"flex items-center gap-3",children:[R,A,$]})}),e[40]=A,e[41]=$,e[42]=R,e[43]=G):G=e[43];let ee;e[44]!==m.size?(ee=uk(m.size),e[44]=m.size,e[45]=ee):ee=e[45];let te;e[46]!==ee?(te=w.jsx(hs,{label:"Size",value:ee}),e[46]=ee,e[47]=te):te=e[47];let V;e[48]!==m.lastModified?(V=DQ(m.lastModified),e[48]=m.lastModified,e[49]=V):V=e[49];let F;e[50]!==V?(F=w.jsx(hs,{label:"Last Modified",value:V}),e[50]=V,e[51]=F):F=e[51];let J;e[52]!==m.contentType?(J=m.contentType&&w.jsx(hs,{label:"Content Type",value:V5(m.contentType)}),e[52]=m.contentType,e[53]=J):J=e[53];let ae;e[54]!==m.etag?(ae=m.etag&&w.jsx(hs,{label:"ETag",value:m.etag,mono:!0}),e[54]=m.etag,e[55]=ae):ae=e[55];let Q;e[56]!==te||e[57]!==F||e[58]!==J||e[59]!==ae?(Q=w.jsxs(Lg,{title:"Basic Information",children:[te,F,J,ae]}),e[56]=te,e[57]=F,e[58]=J,e[59]=ae,e[60]=Q):Q=e[60];let N;e[61]!==m.accessTier||e[62]!==m.blobType||e[63]!==m.storageClass||e[64]!==m.versionId?(N=(m.storageClass||m.accessTier||m.blobType)&&w.jsxs(Lg,{title:"Storage",children:[m.storageClass&&w.jsx(hs,{label:"Storage Class",value:m.storageClass}),m.accessTier&&w.jsx(hs,{label:"Access Tier",value:m.accessTier}),m.blobType&&w.jsx(hs,{label:"Blob Type",value:m.blobType}),m.versionId&&w.jsx(hs,{label:"Version ID",value:m.versionId,mono:!0})]}),e[61]=m.accessTier,e[62]=m.blobType,e[63]=m.storageClass,e[64]=m.versionId,e[65]=N):N=e[65];let D;e[66]!==m.metadata?(D=m.metadata&&Object.keys(m.metadata).length>0&&w.jsx(Lg,{title:"Metadata",children:Object.entries(m.metadata).map(IQ)}),e[66]=m.metadata,e[67]=D):D=e[67];let B;e[68]!==Q||e[69]!==N||e[70]!==D?(B=w.jsx("div",{className:"flex-1 overflow-auto p-4",children:w.jsxs("div",{className:"space-y-4",children:[Q,N,D]})}),e[68]=Q,e[69]=N,e[70]=D,e[71]=B):B=e[71];let T;return e[72]!==G||e[73]!==B?(T=w.jsxs("div",{className:"flex-1 bg-white dark:bg-[#1a1a1a]/60 border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden flex flex-col",children:[G,B]}),e[72]=G,e[73]=B,e[74]=T):T=e[74],T}function IQ(t){const[e,n]=t;return w.jsx(hs,{label:e,value:n},e)}function Lg(t){const e=tn.c(7),{title:n,children:r}=t;let s;e[0]!==n?(s=w.jsx("h3",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400 uppercase tracking-wider mb-2",children:n}),e[0]=n,e[1]=s):s=e[1];let a;e[2]!==r?(a=w.jsx("div",{className:"bg-neutral-50 dark:bg-white/5 rounded-lg divide-y divide-neutral-200 dark:divide-white/5",children:r}),e[2]=r,e[3]=a):a=e[3];let l;return e[4]!==s||e[5]!==a?(l=w.jsxs("div",{children:[s,a]}),e[4]=s,e[5]=a,e[6]=l):l=e[6],l}function hs(t){const e=tn.c(8),{label:n,value:r,mono:s}=t;let a;e[0]!==n?(a=w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:n}),e[0]=n,e[1]=a):a=e[1];const l=`text-xs text-neutral-700 dark:text-neutral-200 ${s?"font-mono":""} truncate max-w-50`;let c;e[2]!==l||e[3]!==r?(c=w.jsx("span",{className:l,children:r}),e[2]=l,e[3]=r,e[4]=c):c=e[4];let f;return e[5]!==a||e[6]!==c?(f=w.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[a,c]}),e[5]=a,e[6]=c,e[7]=f):f=e[7],f}function DQ(t){try{return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}}function zQ(t){const e=tn.c(63),{connection:n,container:r,currentPath:s,onClose:a}=t,l=po(),c=q.useRef(null),[f,d]=q.useState(null),[m,p]=q.useState("");let g;e[0]!==n||e[1]!==r?(g=B=>{const{file:T,key:se}=B;return U5(n,r,se,T)},e[0]=n,e[1]=r,e[2]=g):g=e[2];let y;e[3]!==n||e[4]!==r||e[5]!==a||e[6]!==l?(y=()=>{l.invalidateQueries({queryKey:["storage-objects",n.id,r]}),a()},e[3]=n,e[4]=r,e[5]=a,e[6]=l,e[7]=y):y=e[7];let x;e[8]!==g||e[9]!==y?(x={mutationFn:g,onSuccess:y},e[8]=g,e[9]=y,e[10]=x):x=e[10];const S=uu(x);let E;e[11]!==s?(E=B=>{const T=B.target.files;if(!T||T.length===0)return;const se=T[0];d(se),p(s+se.name)},e[11]=s,e[12]=E):E=e[12];const C=E;let k;e[13]!==m||e[14]!==f||e[15]!==S?(k=B=>{if(B.preventDefault(),f&&m.trim()){const T=m.trim().replace(/^\/+/,"");S.mutate({file:f,key:T})}},e[13]=m,e[14]=f,e[15]=S,e[16]=k):k=e[16];const R=k,I=jQ;let j;e[17]!==a?(j=w.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:a}),e[17]=a,e[18]=j):j=e[18];let A;e[19]===Symbol.for("react.memo_cache_sentinel")?(A=w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:w.jsx(jE,{className:"w-4 h-4 text-blue-500"})}),w.jsx("h2",{className:"text-base font-semibold text-neutral-900 dark:text-neutral-100",children:"Upload File"})]}),e[19]=A):A=e[19];let z;e[20]===Symbol.for("react.memo_cache_sentinel")?(z=w.jsx(Eu,{className:"w-4 h-4 text-neutral-500"}),e[20]=z):z=e[20];let L;e[21]!==a?(L=w.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-neutral-200 dark:border-neutral-800",children:[A,w.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:z})]}),e[21]=a,e[22]=L):L=e[22];let P;e[23]!==C?(P=w.jsx("input",{ref:c,type:"file",onChange:C,className:"hidden"}),e[23]=C,e[24]=P):P=e[24];let M;e[25]!==m||e[26]!==f||e[27]!==S.isPending?(M=f&&w.jsxs("div",{className:"space-y-3",children:[w.jsx("input",{type:"text",value:m,onChange:B=>p(B.target.value),placeholder:"path/to/file.txt",className:"w-full px-3 py-2 text-sm font-mono border border-neutral-200 dark:border-neutral-700 rounded-lg bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500",disabled:S.isPending}),w.jsxs("div",{className:"flex items-center gap-3 p-3 border border-neutral-200 dark:border-neutral-700 rounded-lg bg-neutral-50 dark:bg-neutral-800/50",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center",children:w.jsx(id,{className:"w-5 h-5 text-blue-500"})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",children:f.name}),w.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[I(f.size),"  ",f.type||"Unknown type"]})]}),w.jsx("button",{type:"button",onClick:()=>c.current?.click(),className:"px-3 py-1.5 text-xs font-medium text-blue-500 hover:bg-blue-500/10 rounded-lg transition-colors",children:"Change"})]})]}),e[25]=m,e[26]=f,e[27]=S.isPending,e[28]=M):M=e[28];let $;e[29]!==f?($=!f&&w.jsx("button",{type:"button",onClick:()=>c.current?.click(),className:"w-full p-6 border-2 border-dashed border-neutral-200 dark:border-neutral-700 rounded-lg hover:border-blue-500/50 hover:bg-blue-500/5 transition-colors group",children:w.jsxs("div",{className:"flex flex-col items-center gap-2",children:[w.jsx(pD,{className:"w-8 h-8 text-neutral-400 group-hover:text-blue-500 transition-colors"}),w.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 group-hover:text-blue-500 transition-colors",children:"Click to select a file"})]})}),e[29]=f,e[30]=$):$=e[30];let G;e[31]!==P||e[32]!==M||e[33]!==$?(G=w.jsxs("div",{children:[P,M,$]}),e[31]=P,e[32]=M,e[33]=$,e[34]=G):G=e[34];let ee;e[35]!==S.error?(ee=S.error&&w.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:w.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:S.error instanceof Error?S.error.message:"Failed to upload file"})}),e[35]=S.error,e[36]=ee):ee=e[36];let te;e[37]!==a||e[38]!==S.isPending?(te=w.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-lg transition-colors",disabled:S.isPending,children:"Cancel"}),e[37]=a,e[38]=S.isPending,e[39]=te):te=e[39];let V;e[40]!==m||e[41]!==f||e[42]!==S.isPending?(V=!f||!m.trim()||S.isPending,e[40]=m,e[41]=f,e[42]=S.isPending,e[43]=V):V=e[43];let F;e[44]!==S.isPending?(F=S.isPending&&w.jsx(Ki,{className:"w-3.5 h-3.5 animate-spin"}),e[44]=S.isPending,e[45]=F):F=e[45];let J;e[46]!==V||e[47]!==F?(J=w.jsxs("button",{type:"submit",disabled:V,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors flex items-center gap-2",children:[F,"Upload"]}),e[46]=V,e[47]=F,e[48]=J):J=e[48];let ae;e[49]!==te||e[50]!==J?(ae=w.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[te,J]}),e[49]=te,e[50]=J,e[51]=ae):ae=e[51];let Q;e[52]!==R||e[53]!==G||e[54]!==ee||e[55]!==ae?(Q=w.jsxs("form",{onSubmit:R,className:"p-5 space-y-4",children:[G,ee,ae]}),e[52]=R,e[53]=G,e[54]=ee,e[55]=ae,e[56]=Q):Q=e[56];let N;e[57]!==Q||e[58]!==L?(N=w.jsxs("div",{className:"relative w-full max-w-lg bg-white dark:bg-neutral-900 rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[L,Q]}),e[57]=Q,e[58]=L,e[59]=N):N=e[59];let D;return e[60]!==N||e[61]!==j?(D=w.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[j,N]}),e[60]=N,e[61]=j,e[62]=D):D=e[62],D}function jQ(t){if(t===0)return"0 B";const e=["B","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,n)).toFixed(1))+" "+e[n]}const LQ={folder:IE,image:DE,document:NE,code:ME,archive:TE,file:id};function PQ(t){const e=tn.c(98),{connection:n,container:r,path:s,onNavigate:a}=t,l=po(),[c,f]=q.useState(null),[d,m]=q.useState(!1);let p;e[0]!==s?(p=s&&!s.endsWith("/")?s+"/":s,e[0]=s,e[1]=p):p=e[1];const g=p;let y;e[2]!==n.id||e[3]!==r||e[4]!==g?(y=["storage-objects",n.id,r,g],e[2]=n.id,e[3]=r,e[4]=g,e[5]=y):y=e[5];let x;e[6]!==n||e[7]!==r||e[8]!==g?(x=()=>qd(n,r,{prefix:g,delimiter:"/"}),e[6]=n,e[7]=r,e[8]=g,e[9]=x):x=e[9];const S=!!n&&!!r;let E;e[10]!==y||e[11]!==x||e[12]!==S?(E={queryKey:y,queryFn:x,enabled:S},e[10]=y,e[11]=x,e[12]=S,e[13]=E):E=e[13];const{data:C,isLoading:k,error:R}=ys(E);let I;e[14]!==n||e[15]!==r?(I=Me=>ok(n,r,[Me]),e[14]=n,e[15]=r,e[16]=I):I=e[16];let j;e[17]!==n.id||e[18]!==r||e[19]!==l?(j=()=>{l.invalidateQueries({queryKey:["storage-objects",n.id,r]}),f(null)},e[17]=n.id,e[18]=r,e[19]=l,e[20]=j):j=e[20];let A;e[21]!==I||e[22]!==j?(A={mutationFn:I,onSuccess:j},e[21]=I,e[22]=j,e[23]=A):A=e[23];const z=uu(A);let L;e[24]!==n||e[25]!==r?(L=Me=>lk(n,r,Me),e[24]=n,e[25]=r,e[26]=L):L=e[26];let P;e[27]!==n.id||e[28]!==r||e[29]!==l?(P=()=>{l.invalidateQueries({queryKey:["storage-objects",n.id,r]})},e[27]=n.id,e[28]=r,e[29]=l,e[30]=P):P=e[30];let M;e[31]!==P||e[32]!==L?(M={mutationFn:L,onSuccess:P},e[31]=P,e[32]=L,e[33]=M):M=e[33];const $=uu(M);let G;e[34]!==z||e[35]!==$?(G=(Me,ge)=>{ge.stopPropagation();const je=Me.name.replace(/\/$/,"")||"/",be=Me.isFolder?`Delete folder "${je}" and all its contents?`:`Delete "${je}"?`;if(confirm(be))if(Me.isFolder){const ye=Me.key;ye==="/"||ye===""?z.mutate(ye||"/"):$.mutate(ye)}else z.mutate(Me.key)},e[34]=z,e[35]=$,e[36]=G):G=e[36];const ee=G,te=z.isPending||$.isPending;let V;e:{if(!C){let ge;e[37]===Symbol.for("react.memo_cache_sentinel")?(ge=[],e[37]=ge):ge=e[37],V=ge;break e}let Me;if(e[38]!==C.objects||e[39]!==C.prefixes){const ge=C.prefixes.map(BQ),je=C.objects.filter($Q).map(FQ);Me=[...ge,...je],e[38]=C.objects,e[39]=C.prefixes,e[40]=Me}else Me=e[40];V=Me}const F=V;let J;e[41]!==r||e[42]!==a?(J=Me=>{Me.isFolder?(a(r,Me.key),f(null)):f(Me.key)},e[41]=r,e[42]=a,e[43]=J):J=e[43];const ae=J;let Q;e[44]!==r||e[45]!==a||e[46]!==s?(Q=()=>{const Me=q5(s);a(r,Me?Me+"/":""),f(null)},e[44]=r,e[45]=a,e[46]=s,e[47]=Q):Q=e[47];const N=Q;let D;e[48]!==r?(D={label:r,path:""},e[48]=r,e[49]=D):D=e[49];let B;if(e[50]!==s||e[51]!==D){if(B=[D],s){const Me=s.split("/").filter(Boolean);let ge="";for(const je of Me)ge=ge+(je+"/"),B.push({label:je,path:ge})}e[50]=s,e[51]=D,e[52]=B}else B=e[52];const T=B,se=n.provider==="s3"?"S3":"Azure Blob";let ce;e[53]!==se?(ce=w.jsxs("span",{className:"text-neutral-400 dark:text-neutral-500 shrink-0",children:[se,":"]}),e[53]=se,e[54]=ce):ce=e[54];let he;e[55]!==r||e[56]!==a||e[57]!==T?(he=T.map((Me,ge)=>w.jsxs("span",{className:"flex items-center shrink-0",children:[ge>0&&w.jsx(f0,{className:"w-4 h-4 text-neutral-400 mx-1"}),w.jsx("button",{onClick:()=>a(r,Me.path),className:`hover:text-blue-500 transition-colors ${ge===T.length-1?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-500 dark:text-neutral-400"}`,children:Me.label})]},Me.path)),e[55]=r,e[56]=a,e[57]=T,e[58]=he):he=e[58];let ve;e[59]!==ce||e[60]!==he?(ve=w.jsxs("div",{className:"flex items-center gap-1 text-sm overflow-x-auto",children:[ce,he]}),e[59]=ce,e[60]=he,e[61]=ve):ve=e[61];let Ae;e[62]===Symbol.for("react.memo_cache_sentinel")?(Ae=()=>m(!0),e[62]=Ae):Ae=e[62];let _e;e[63]===Symbol.for("react.memo_cache_sentinel")?(_e=w.jsx("div",{className:"ml-4 shrink-0",children:w.jsxs("button",{onClick:Ae,className:"px-3 py-1.5 rounded-lg bg-blue-500 hover:bg-blue-600 text-white text-xs font-medium flex items-center gap-2 transition-colors",title:"Upload file",children:[w.jsx(jE,{className:"w-3.5 h-3.5"}),"Upload"]})}),e[63]=_e):_e=e[63];let me;e[64]!==ve?(me=w.jsx("div",{className:"px-4 py-3 border-b border-neutral-200 dark:border-white/8",children:w.jsxs("div",{className:"flex items-center justify-between",children:[ve,_e]})}),e[64]=ve,e[65]=me):me=e[65];let Ee;e[66]===Symbol.for("react.memo_cache_sentinel")?(Ee=()=>f(null),e[66]=Ee):Ee=e[66];let Oe;e[67]!==R||e[68]!==ee||e[69]!==ae||e[70]!==N||e[71]!==te||e[72]!==k||e[73]!==F||e[74]!==s||e[75]!==c?(Oe=w.jsx("div",{className:"flex-1 overflow-auto",onClick:Ee,children:k?w.jsx("div",{className:"flex items-center justify-center h-full",children:w.jsx(Ki,{className:"w-6 h-6 text-neutral-400 animate-spin"})}):R?w.jsx("div",{className:"flex items-center justify-center h-full text-red-500 text-sm",children:"Failed to load objects"}):F.length===0?w.jsx("div",{className:"flex items-center justify-center h-full text-neutral-400 dark:text-neutral-600 text-sm",children:"This folder is empty"}):w.jsx(UQ,{items:F,selectedKey:c,path:s,onItemClick:ae,onNavigateUp:N,onDeleteItem:ee,isDeleting:te})}),e[67]=R,e[68]=ee,e[69]=ae,e[70]=N,e[71]=te,e[72]=k,e[73]=F,e[74]=s,e[75]=c,e[76]=Oe):Oe=e[76];const Ze=F.length===1?"item":"items",Le=C?.isTruncated&&" (truncated)";let Ye;e[77]!==F.length||e[78]!==Ze||e[79]!==Le?(Ye=w.jsxs("div",{className:"px-4 py-2 border-t border-neutral-200 dark:border-white/8 text-xs text-neutral-400 dark:text-neutral-500",children:[F.length," ",Ze,Le]}),e[77]=F.length,e[78]=Ze,e[79]=Le,e[80]=Ye):Ye=e[80];let it;e[81]!==me||e[82]!==Oe||e[83]!==Ye?(it=w.jsxs("div",{className:"flex-1 bg-white dark:bg-[#1a1a1a]/60 border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden flex flex-col min-w-0",children:[me,Oe,Ye]}),e[81]=me,e[82]=Oe,e[83]=Ye,e[84]=it):it=e[84];let Je;e[85]!==n||e[86]!==r||e[87]!==c?(Je=c&&w.jsx("div",{className:"w-80 shrink-0",children:w.jsx(NQ,{connection:n,container:r,objectKey:c,onClose:()=>f(null)})}),e[85]=n,e[86]=r,e[87]=c,e[88]=Je):Je=e[88];let ot;e[89]!==n||e[90]!==r||e[91]!==g||e[92]!==d?(ot=d&&w.jsx(zQ,{connection:n,container:r,currentPath:g,onClose:()=>m(!1)}),e[89]=n,e[90]=r,e[91]=g,e[92]=d,e[93]=ot):ot=e[93];let ht;return e[94]!==it||e[95]!==Je||e[96]!==ot?(ht=w.jsxs("div",{className:"flex-1 flex gap-2 min-h-0",children:[it,Je,ot]}),e[94]=it,e[95]=Je,e[96]=ot,e[97]=ht):ht=e[97],ht}function FQ(t){return{key:t.key,name:t.name,isFolder:!1,size:t.size,lastModified:t.lastModified,contentType:t.contentType}}function $Q(t){return!t.isFolder}function BQ(t){return{key:t,name:yu(t),isFolder:!0,size:0,lastModified:""}}function UQ({items:t,selectedKey:e,path:n,onItemClick:r,onNavigateUp:s,onDeleteItem:a,isDeleting:l}){const[c,f]=q.useState([]),d=q.useMemo(()=>[{accessorKey:"name",header:({column:p})=>w.jsxs("button",{className:"flex items-center gap-1 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors",onClick:()=>p.toggleSorting(p.getIsSorted()==="asc"),children:["Name",p.getIsSorted()==="asc"?w.jsx(Gl,{className:"w-3.5 h-3.5"}):p.getIsSorted()==="desc"?w.jsx(Bi,{className:"w-3.5 h-3.5"}):w.jsx(Df,{className:"w-3.5 h-3.5 opacity-50"})]}),cell:({row:p})=>{const g=p.original,y=g.isFolder?"folder":ck(g.key),x=LQ[y],S=e===g.key;return w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(x,{className:`w-4 h-4 ${g.isFolder?"text-yellow-500":"text-neutral-400"}`}),w.jsx("span",{className:`truncate ${S?"text-blue-600 dark:text-blue-400":"text-neutral-700 dark:text-neutral-200"}`,children:g.name})]})}},{accessorKey:"size",header:({column:p})=>w.jsxs("button",{className:"flex items-center gap-1 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors ml-auto",onClick:()=>p.toggleSorting(p.getIsSorted()==="asc"),children:["Size",p.getIsSorted()==="asc"?w.jsx(Gl,{className:"w-3.5 h-3.5"}):p.getIsSorted()==="desc"?w.jsx(Bi,{className:"w-3.5 h-3.5"}):w.jsx(Df,{className:"w-3.5 h-3.5 opacity-50"})]}),cell:({row:p})=>{const g=p.original;return w.jsx("div",{className:"text-right text-neutral-500 dark:text-neutral-400",children:g.isFolder?"-":uk(g.size)})},size:100},{accessorKey:"lastModified",header:({column:p})=>w.jsxs("button",{className:"flex items-center gap-1 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors ml-auto",onClick:()=>p.toggleSorting(p.getIsSorted()==="asc"),children:["Modified",p.getIsSorted()==="asc"?w.jsx(Gl,{className:"w-3.5 h-3.5"}):p.getIsSorted()==="desc"?w.jsx(Bi,{className:"w-3.5 h-3.5"}):w.jsx(Df,{className:"w-3.5 h-3.5 opacity-50"})]}),cell:({row:p})=>{const g=p.original;return w.jsx("div",{className:"text-right text-neutral-500 dark:text-neutral-400",children:g.lastModified?qQ(g.lastModified):"-"})},size:160},{id:"actions",header:"",cell:({row:p})=>{const g=p.original;return w.jsx("button",{onClick:y=>a(g,y),disabled:l,className:"p-1 rounded opacity-0 group-hover:opacity-100 hover:bg-red-100 dark:hover:bg-red-500/10 transition-all disabled:opacity-50",title:"Delete",children:w.jsx(du,{className:"w-3.5 h-3.5 text-red-500"})})},size:40}],[e,a,l]),m=Ik({data:t,columns:d,state:{sorting:c},onSortingChange:f,getCoreRowModel:Mk(),getSortedRowModel:Nk()});return w.jsxs("table",{className:"w-full text-sm",children:[w.jsx("thead",{className:"sticky top-0 bg-neutral-50 dark:bg-[#1a1a1a] z-10",children:m.getHeaderGroups().map(p=>w.jsx("tr",{className:"border-b border-neutral-200 dark:border-white/8",children:p.headers.map(g=>w.jsx("th",{className:"px-4 py-2 text-left font-medium text-neutral-500 dark:text-neutral-400",style:{width:g.getSize()},children:g.isPlaceholder?null:gd(g.column.columnDef.header,g.getContext())},g.id))},p.id))}),w.jsxs("tbody",{children:[n&&w.jsx("tr",{className:"hover:bg-neutral-50 dark:hover:bg-white/5 cursor-pointer border-b border-neutral-100 dark:border-white/5",onClick:p=>{p.stopPropagation(),s()},children:w.jsx("td",{className:"px-4 py-2",colSpan:4,children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(QI,{className:"w-4 h-4 text-neutral-400"}),w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:".."})]})})}),m.getRowModel().rows.map(p=>{const g=e===p.original.key;return w.jsx("tr",{className:`group cursor-pointer border-b border-neutral-100 dark:border-white/5 ${g?"bg-blue-50 dark:bg-blue-500/10":"hover:bg-neutral-50 dark:hover:bg-white/5"}`,onClick:y=>{y.stopPropagation(),r(p.original)},children:p.getVisibleCells().map(y=>w.jsx("td",{className:"px-4 py-2",children:gd(y.column.columnDef.cell,y.getContext())},y.id))},p.id)})]})]})}function qQ(t){try{return new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}catch{return t}}function HQ(t){const e=tn.c(9),{onAddConnection:n}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=w.jsxs("div",{className:"mb-6",children:[w.jsx("h1",{className:"text-2xl font-semibold text-neutral-700 dark:text-neutral-300 mb-2",children:"Welcome to Granite"}),w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-500",children:"A unified interface for databases and object storage"})]}),e[0]=r):r=e[0];let s;e[1]===Symbol.for("react.memo_cache_sentinel")?(s=w.jsxs("div",{className:"p-4 rounded-lg bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/8",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/5 dark:bg-blue-500/10 flex items-center justify-center mx-auto mb-3",children:w.jsx(fu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),w.jsx("h3",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300 mb-1",children:"Database Connections"}),w.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:"PostgreSQL, MySQL, SQLite, SQL Server, and Oracle"})]}),e[1]=s):s=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=w.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[s,w.jsxs("div",{className:"p-4 rounded-lg bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/8",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/5 dark:bg-orange-500/10 flex items-center justify-center mx-auto mb-3",children:w.jsx(zE,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),w.jsx("h3",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300 mb-1",children:"Object Storage"}),w.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:"Amazon S3 and Azure Blob Storage"})]})]}),e[2]=a):a=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=w.jsx(Fd,{className:"w-4 h-4"}),e[3]=l):l=e[3];let c;e[4]!==n?(c=w.jsxs("button",{onClick:n,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-neutral-100 hover:bg-neutral-200 dark:bg-white/5 dark:hover:bg-white/10 text-neutral-700 dark:text-neutral-300 text-sm font-medium transition-colors",children:[l,"Add Connection"]}),e[4]=n,e[5]=c):c=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=w.jsx("p",{className:"mt-6 text-xs text-neutral-400 dark:text-neutral-600",children:"You can have multiple connections open simultaneously"}),e[6]=f):f=e[6];let d;return e[7]!==c?(d=w.jsx("main",{className:"flex-1 flex items-center justify-center",children:w.jsxs("div",{className:"max-w-2xl px-8 text-center",children:[r,a,c,f]})}),e[7]=c,e[8]=d):d=e[8],d}const VQ=new iE;function KQ(){const t=Ji({strict:!1}),e=Cu(),n=t.connectionId,r=t.database,s=t.table,a=t.container,l=t._splat||"",f=(nk(Q=>Q.from({connections:Yl}).orderBy(({connections:N})=>N.createdAt,"desc"))?.data??[]).find(Q=>Q.id===n),d=f&&Hd(f)?f:void 0,m=f&&hk(f)?f:void 0,{data:p}=ys({queryKey:["tables",n,r],queryFn:()=>d&&r?fk(d.driver,d.dsn,r):[],enabled:!!d&&!!r}),{data:g}=ys({queryKey:["columns",n,r,p],queryFn:async()=>{if(!d||!r||!p?.length)return{};const Q={},N=p.slice(0,50);return await Promise.all(N.map(async D=>{try{Q[D]=await Y5(d.driver,d.dsn,D)}catch{Q[D]=[]}})),Q},enabled:!!d&&!!r&&!!p?.length,staleTime:300*1e3}),y=q.useMemo(()=>{if(p)return{tables:p,columns:g??{}}},[p,g]),[x,S]=q.useState(""),[E,C]=q.useState("records"),k=q.useMemo(()=>d?W5(d.driver):["records","columns"],[d]),R=q.useCallback(()=>{C(null)},[]),[I,j]=q.useState(!1),A=q.useCallback(()=>j(Q=>!Q),[]),[z,L]=q.useState(!1),[P,M]=q.useState(null),$=uu({mutationFn:async Q=>{if(!d)throw new Error("No database connection selected");const N=performance.now(),D=await Q5(d.driver,d.dsn,Q),B=performance.now()-N;return{response:D,duration:B}},onSuccess:Q=>{M(Q)},onError:Q=>{M({response:{error:Q instanceof Error?Q.message:"Unknown error"},duration:0})}});q.useEffect(()=>{if(d&&s){const Q=dy(s,d.driver);S(Q),$.mutate(Q),C("records")}else!s&&!a&&(S(""),M(null),C(null))},[d?.id,s,a]);const G=q.useCallback(async Q=>(S(Q),(await $.mutateAsync(Q)).response),[$]),ee=q.useCallback((Q,N)=>{if(!n)return;const D=N.replace(/^\/+/,"");e(D?{to:`/${n}/container/${Q}/${D}`}:{to:`/${n}/container/${Q}`})},[e,n]),te=q.useCallback(Q=>{if(!d||!s)return;const N=eL(d.driver,s,Q);N&&(S(N),$.mutate(N),C(Q))},[d,s,$]),V=Q=>Q===null?"NULL":typeof Q=="number"?String(Q):typeof Q=="boolean"?Q?"TRUE":"FALSE":`'${String(Q).replace(/'/g,"''")}'`,F=q.useCallback(async(Q,N,D)=>{if(!d||!s)return;const B=P?.response?.columns?.[0]??"id",T=Q[B];if(T===void 0){console.error("Cannot update: no primary key found");return}const se=`UPDATE ${s} SET ${N} = ${V(D)} WHERE ${B} = ${V(T)}`;try{await Jl(d.driver,d.dsn,se)}catch(ce){console.error("Update failed:",ce)}},[d,s,P?.response?.columns]),J=q.useCallback(async Q=>{if(!d||!s)return;const N=P?.response?.columns?.[0]??"id",D=Q[N];if(D===void 0){console.error("Cannot delete: no primary key found");return}const B=`DELETE FROM ${s} WHERE ${N} = ${V(D)}`;try{await Jl(d.driver,d.dsn,B),$.mutate(dy(s,d.driver))}catch(T){console.error("Delete failed:",T)}},[d,s,P?.response?.columns,$]),ae=q.useMemo(()=>({setQuery:S,executeQuery:G,runQuerySilent:async Q=>{if(!d)throw new Error("No database connection selected");return Tu(d.driver,d.dsn,Q)},runStatementSilent:async Q=>{if(!d)throw new Error("No database connection selected");return Jl(d.driver,d.dsn,Q)}}),[G,d]);return w.jsxs("div",{className:"h-screen flex bg-neutral-50 dark:bg-[#0d0d0d] py-2 pr-2 pl-1 gap-2",children:[w.jsx(oL,{showAddModal:z,onAddModalClose:()=>L(!1)}),d&&w.jsxs(w.Fragment,{children:[w.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden gap-2 min-w-0",children:[w.jsx("div",{className:"shrink-0",children:w.jsx(_P,{connection:d??null,selectedTable:s??null,onExecute:G,isLoading:$.isPending,schema:y,value:x,onChange:S,onToggleAI:Dy().ai?.model?A:void 0,aiPanelOpen:I,supportedViews:k,onSelectView:te,activeView:E,onExpandEditor:R})}),w.jsx("div",{className:"flex-1 min-h-0",children:w.jsx(g6,{response:P?.response??null,duration:P?.duration??0,isLoading:$.isPending,tableName:s,onUpdateCell:F,onDeleteRow:J})})]}),I&&Dy().ai?.model&&w.jsx(RQ,{isOpen:I,onClose:A,connection:d??null,database:r??null,table:s??null,currentQuery:x,queryResult:P?.response??null,schema:y,setters:ae})]}),m&&a&&w.jsx(PQ,{connection:m,container:a,path:l,onNavigate:ee}),!f&&w.jsx(HQ,{onAddConnection:()=>L(!0)})]})}function GQ(){const t=tn.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=w.jsx(FM,{client:VQ,children:w.jsx(KQ,{})}),t[0]=e):e=t[0],e}RE.options.defaultComponent=GQ;function QQ(){const t=tn.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=w.jsx(DI,{router:RE}),t[0]=e):e=t[0],e}pM.createRoot(document.getElementById("root")).render(w.jsx(q.StrictMode,{children:w.jsx(QQ,{})}));
