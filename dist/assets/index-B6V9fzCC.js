(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Qy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wm={exports:{}},gl={};var _w;function nM(){if(_w)return gl;_w=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:a}}return gl.Fragment=e,gl.jsx=n,gl.jsxs=n,gl}var Cw;function rM(){return Cw||(Cw=1,wm.exports=nM()),wm.exports}var w=rM(),_m={exports:{}},He={};var Ew;function sM(){if(Ew)return He;Ew=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(z){return z===null||typeof z!="object"?null:(z=g&&z[g]||z["@@iterator"],typeof z=="function"?z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function C(z,F,A){this.props=z,this.context=F,this.refs=E,this.updater=A||x}C.prototype.isReactComponent={},C.prototype.setState=function(z,F){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,F,"setState")},C.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function k(){}k.prototype=C.prototype;function R(z,F,A){this.props=z,this.context=F,this.refs=E,this.updater=A||x}var N=R.prototype=new k;N.constructor=R,S(N,C.prototype),N.isPureReactComponent=!0;var j=Array.isArray;function T(){}var D={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function P(z,F,A){var se=A.ref;return{$$typeof:t,type:z,key:F,ref:se!==void 0?se:null,props:A}}function M(z,F){return P(z.type,F,z.props)}function B(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function G(z){var F={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(A){return F[A]})}var ee=/\/+/g;function te(z,F){return typeof z=="object"&&z!==null&&z.key!=null?G(""+z.key):F.toString(36)}function V(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(T,T):(z.status="pending",z.then(function(F){z.status==="pending"&&(z.status="fulfilled",z.value=F)},function(F){z.status==="pending"&&(z.status="rejected",z.reason=F)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function $(z,F,A,se,ue){var fe=typeof z;(fe==="undefined"||fe==="boolean")&&(z=null);var ve=!1;if(z===null)ve=!0;else switch(fe){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(z.$$typeof){case t:case e:ve=!0;break;case m:return ve=z._init,$(ve(z._payload),F,A,se,ue)}}if(ve)return ue=ue(z),ve=se===""?"."+te(z,0):se,j(ue)?(A="",ve!=null&&(A=ve.replace(ee,"$&/")+"/"),$(ue,F,A,"",function(me){return me})):ue!=null&&(B(ue)&&(ue=M(ue,A+(ue.key==null||z&&z.key===ue.key?"":(""+ue.key).replace(ee,"$&/")+"/")+ve)),F.push(ue)),1;ve=0;var Te=se===""?".":se+":";if(j(z))for(var _e=0;_e<z.length;_e++)se=z[_e],fe=Te+te(se,_e),ve+=$(se,F,A,fe,ue);else if(_e=y(z),typeof _e=="function")for(z=_e.call(z),_e=0;!(se=z.next()).done;)se=se.value,fe=Te+te(se,_e++),ve+=$(se,F,A,fe,ue);else if(fe==="object"){if(typeof z.then=="function")return $(V(z),F,A,se,ue);throw F=String(z),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return ve}function J(z,F,A){if(z==null)return z;var se=[],ue=0;return $(z,se,"","",function(fe){return F.call(A,fe,ue++)}),se}function ae(z){if(z._status===-1){var F=z._result;F=F(),F.then(function(A){(z._status===0||z._status===-1)&&(z._status=1,z._result=A)},function(A){(z._status===0||z._status===-1)&&(z._status=2,z._result=A)}),z._status===-1&&(z._status=0,z._result=F)}if(z._status===1)return z._result.default;throw z._result}var Q=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},I={map:J,forEach:function(z,F,A){J(z,function(){F.apply(this,arguments)},A)},count:function(z){var F=0;return J(z,function(){F++}),F},toArray:function(z){return J(z,function(F){return F})||[]},only:function(z){if(!B(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return He.Activity=p,He.Children=I,He.Component=C,He.Fragment=n,He.Profiler=s,He.PureComponent=R,He.StrictMode=r,He.Suspense=f,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,He.__COMPILER_RUNTIME={__proto__:null,c:function(z){return D.H.useMemoCache(z)}},He.cache=function(z){return function(){return z.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(z,F,A){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var se=S({},z.props),ue=z.key;if(F!=null)for(fe in F.key!==void 0&&(ue=""+F.key),F)!L.call(F,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&F.ref===void 0||(se[fe]=F[fe]);var fe=arguments.length-2;if(fe===1)se.children=A;else if(1<fe){for(var ve=Array(fe),Te=0;Te<fe;Te++)ve[Te]=arguments[Te+2];se.children=ve}return P(z.type,ue,se)},He.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:a,_context:z},z},He.createElement=function(z,F,A){var se,ue={},fe=null;if(F!=null)for(se in F.key!==void 0&&(fe=""+F.key),F)L.call(F,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ue[se]=F[se]);var ve=arguments.length-2;if(ve===1)ue.children=A;else if(1<ve){for(var Te=Array(ve),_e=0;_e<ve;_e++)Te[_e]=arguments[_e+2];ue.children=Te}if(z&&z.defaultProps)for(se in ve=z.defaultProps,ve)ue[se]===void 0&&(ue[se]=ve[se]);return P(z,fe,ue)},He.createRef=function(){return{current:null}},He.forwardRef=function(z){return{$$typeof:c,render:z}},He.isValidElement=B,He.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:ae}},He.memo=function(z,F){return{$$typeof:d,type:z,compare:F===void 0?null:F}},He.startTransition=function(z){var F=D.T,A={};D.T=A;try{var se=z(),ue=D.S;ue!==null&&ue(A,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(T,Q)}catch(fe){Q(fe)}finally{F!==null&&A.types!==null&&(F.types=A.types),D.T=F}},He.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},He.use=function(z){return D.H.use(z)},He.useActionState=function(z,F,A){return D.H.useActionState(z,F,A)},He.useCallback=function(z,F){return D.H.useCallback(z,F)},He.useContext=function(z){return D.H.useContext(z)},He.useDebugValue=function(){},He.useDeferredValue=function(z,F){return D.H.useDeferredValue(z,F)},He.useEffect=function(z,F){return D.H.useEffect(z,F)},He.useEffectEvent=function(z){return D.H.useEffectEvent(z)},He.useId=function(){return D.H.useId()},He.useImperativeHandle=function(z,F,A){return D.H.useImperativeHandle(z,F,A)},He.useInsertionEffect=function(z,F){return D.H.useInsertionEffect(z,F)},He.useLayoutEffect=function(z,F){return D.H.useLayoutEffect(z,F)},He.useMemo=function(z,F){return D.H.useMemo(z,F)},He.useOptimistic=function(z,F){return D.H.useOptimistic(z,F)},He.useReducer=function(z,F,A){return D.H.useReducer(z,F,A)},He.useRef=function(z){return D.H.useRef(z)},He.useState=function(z){return D.H.useState(z)},He.useSyncExternalStore=function(z,F,A){return D.H.useSyncExternalStore(z,F,A)},He.useTransition=function(){return D.H.useTransition()},He.version="19.2.3",He}var kw;function fo(){return kw||(kw=1,_m.exports=sM()),_m.exports}var q=fo();const Or=Qy(q);var Cm={exports:{}},yl={},Em={exports:{}},km={};var Rw;function iM(){return Rw||(Rw=1,(function(t){function e($,J){var ae=$.length;$.push(J);e:for(;0<ae;){var Q=ae-1>>>1,I=$[Q];if(0<s(I,J))$[Q]=J,$[ae]=I,ae=Q;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var J=$[0],ae=$.pop();if(ae!==J){$[0]=ae;e:for(var Q=0,I=$.length,z=I>>>1;Q<z;){var F=2*(Q+1)-1,A=$[F],se=F+1,ue=$[se];if(0>s(A,ae))se<I&&0>s(ue,A)?($[Q]=ue,$[se]=ae,Q=se):($[Q]=A,$[F]=ae,Q=F);else if(se<I&&0>s(ue,ae))$[Q]=ue,$[se]=ae,Q=se;else break e}}return J}function s($,J){var ae=$.sortIndex-J.sortIndex;return ae!==0?ae:$.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],d=[],m=1,p=null,g=3,y=!1,x=!1,S=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function N($){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=$)r(d),J.sortIndex=J.expirationTime,e(f,J);else break;J=n(d)}}function j($){if(S=!1,N($),!x)if(n(f)!==null)x=!0,T||(T=!0,G());else{var J=n(d);J!==null&&V(j,J.startTime-$)}}var T=!1,D=-1,L=5,P=-1;function M(){return E?!0:!(t.unstable_now()-P<L)}function B(){if(E=!1,T){var $=t.unstable_now();P=$;var J=!0;try{e:{x=!1,S&&(S=!1,k(D),D=-1),y=!0;var ae=g;try{t:{for(N($),p=n(f);p!==null&&!(p.expirationTime>$&&M());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,g=p.priorityLevel;var I=Q(p.expirationTime<=$);if($=t.unstable_now(),typeof I=="function"){p.callback=I,N($),J=!0;break t}p===n(f)&&r(f),N($)}else r(f);p=n(f)}if(p!==null)J=!0;else{var z=n(d);z!==null&&V(j,z.startTime-$),J=!1}}break e}finally{p=null,g=ae,y=!1}J=void 0}}finally{J?G():T=!1}}}var G;if(typeof R=="function")G=function(){R(B)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=B,G=function(){te.postMessage(null)}}else G=function(){C(B,0)};function V($,J){D=C(function(){$(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var J=3;break;default:J=g}var ae=g;g=J;try{return $()}finally{g=ae}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function($,J){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ae=g;g=$;try{return J()}finally{g=ae}},t.unstable_scheduleCallback=function($,J,ae){var Q=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Q+ae:Q):ae=Q,$){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ae+I,$={id:m++,callback:J,priorityLevel:$,startTime:ae,expirationTime:I,sortIndex:-1},ae>Q?($.sortIndex=ae,e(d,$),n(f)===null&&$===n(d)&&(S?(k(D),D=-1):S=!0,V(j,ae-Q))):($.sortIndex=I,e(f,$),x||y||(x=!0,T||(T=!0,G()))),$},t.unstable_shouldYield=M,t.unstable_wrapCallback=function($){var J=g;return function(){var ae=g;g=J;try{return $.apply(this,arguments)}finally{g=ae}}}})(km)),km}var Tw;function aM(){return Tw||(Tw=1,Em.exports=iM()),Em.exports}var Rm={exports:{}},hn={};var Aw;function oM(){if(Aw)return hn;Aw=1;var t=fo();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,d,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:f,containerInfo:d,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hn.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,m)},hn.flushSync=function(f){var d=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=d,r.p=m,r.d.f()}},hn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},hn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},hn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,p=c(m,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):m==="script"&&r.d.X(f,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},hn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},hn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,p=c(m,d.crossOrigin);r.d.L(f,m,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},hn.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=c(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},hn.requestFormReset=function(f){r.d.r(f)},hn.unstable_batchedUpdates=function(f,d){return f(d)},hn.useFormState=function(f,d,m){return l.H.useFormState(f,d,m)},hn.useFormStatus=function(){return l.H.useHostTransitionStatus()},hn.version="19.2.3",hn}var Ow;function GC(){if(Ow)return Rm.exports;Ow=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rm.exports=oM(),Rm.exports}var Mw;function lM(){if(Mw)return yl;Mw=1;var t=aM(),e=fo(),n=GC();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function c(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(a(i)!==i)throw Error(r(188))}function d(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var u=i,h=o;;){var v=u.return;if(v===null)break;var b=v.alternate;if(b===null){if(h=v.return,h!==null){u=h;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===u)return f(v),i;if(b===h)return f(v),o;b=b.sibling}throw Error(r(188))}if(u.return!==h.return)u=v,h=b;else{for(var _=!1,O=v.child;O;){if(O===u){_=!0,u=v,h=b;break}if(O===h){_=!0,h=v,u=b;break}O=O.sibling}if(!_){for(O=b.child;O;){if(O===u){_=!0,u=b,h=v;break}if(O===h){_=!0,h=b,u=v;break}O=O.sibling}if(!_)throw Error(r(189))}}if(u.alternate!==h)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),R=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var ee=Symbol.for("react.client.reference");function te(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ee?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case j:return"Suspense";case T:return"SuspenseList";case P:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case x:return"Portal";case R:return i.displayName||"Context";case k:return(i._context.displayName||"Context")+".Consumer";case N:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return o=i.displayName||null,o!==null?o:te(i.type)||"Memo";case L:o=i._payload,i=i._init;try{return te(i(o))}catch{}}return null}var V=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},Q=[],I=-1;function z(i){return{current:i}}function F(i){0>I||(i.current=Q[I],Q[I]=null,I--)}function A(i,o){I++,Q[I]=i.current,i.current=o}var se=z(null),ue=z(null),fe=z(null),ve=z(null);function Te(i,o){switch(A(fe,o),A(ue,i),A(se,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?KS(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=KS(o),i=GS(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}F(se),A(se,i)}function _e(){F(se),F(ue),F(fe)}function me(i){i.memoizedState!==null&&A(ve,i);var o=se.current,u=GS(o,i.type);o!==u&&(A(ue,i),A(se,u))}function Ee(i){ue.current===i&&(F(se),F(ue)),ve.current===i&&(F(ve),dl._currentValue=ae)}var Oe,Ze;function Le(i){if(Oe===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Oe=o&&o[1]||"",Ze=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oe+i+Ze}var Ye=!1;function it(i,o){if(!i||Ye)return"";Ye=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(re){var W=re}Reflect.construct(i,[],le)}else{try{le.call()}catch(re){W=re}i.call(le.prototype)}}else{try{throw Error()}catch(re){W=re}(le=i())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(re){if(re&&W&&typeof re.stack=="string")return[re.stack,W.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),_=b[0],O=b[1];if(_&&O){var U=_.split(`
`),Y=O.split(`
`);for(v=h=0;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;for(;v<Y.length&&!Y[v].includes("DetermineComponentFrameRoot");)v++;if(h===U.length||v===Y.length)for(h=U.length-1,v=Y.length-1;1<=h&&0<=v&&U[h]!==Y[v];)v--;for(;1<=h&&0<=v;h--,v--)if(U[h]!==Y[v]){if(h!==1||v!==1)do if(h--,v--,0>v||U[h]!==Y[v]){var ie=`
`+U[h].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=h&&0<=v);break}}}finally{Ye=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?Le(u):""}function Je(i,o){switch(i.tag){case 26:case 27:case 5:return Le(i.type);case 16:return Le("Lazy");case 13:return i.child!==o&&o!==null?Le("Suspense Fallback"):Le("Suspense");case 19:return Le("SuspenseList");case 0:case 15:return it(i.type,!1);case 11:return it(i.type.render,!1);case 1:return it(i.type,!0);case 31:return Le("Activity");default:return""}}function ot(i){try{var o="",u=null;do o+=Je(i,u),u=i,i=i.return;while(i);return o}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var ht=Object.prototype.hasOwnProperty,Me=t.unstable_scheduleCallback,ge=t.unstable_cancelCallback,je=t.unstable_shouldYield,be=t.unstable_requestPaint,ye=t.unstable_now,qe=t.unstable_getCurrentPriorityLevel,ne=t.unstable_ImmediatePriority,de=t.unstable_UserBlockingPriority,Ce=t.unstable_NormalPriority,ke=t.unstable_LowPriority,xe=t.unstable_IdlePriority,Ue=t.log,vt=t.unstable_setDisableYieldValue,ut=null,ct=null;function kn(i){if(typeof Ue=="function"&&vt(i),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(ut,i)}catch{}}var wt=Math.clz32?Math.clz32:UA,xs=Math.log,_r=Math.LN2;function UA(i){return i>>>=0,i===0?32:31-(xs(i)/_r|0)|0}var Pu=256,$u=262144,Fu=4194304;function fi(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Bu(i,o,u){var h=i.pendingLanes;if(h===0)return 0;var v=0,b=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var O=h&134217727;return O!==0?(h=O&~b,h!==0?v=fi(h):(_&=O,_!==0?v=fi(_):u||(u=O&~i,u!==0&&(v=fi(u))))):(O=h&~b,O!==0?v=fi(O):_!==0?v=fi(_):u||(u=h&~i,u!==0&&(v=fi(u)))),v===0?0:o!==0&&o!==v&&(o&b)===0&&(b=v&-v,u=o&-o,b>=u||b===32&&(u&4194048)!==0)?o:v}function Eo(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function qA(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rv(){var i=Fu;return Fu<<=1,(Fu&62914560)===0&&(Fu=4194304),i}function ch(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function ko(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function HA(i,o,u,h,v,b){var _=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var O=i.entanglements,U=i.expirationTimes,Y=i.hiddenUpdates;for(u=_&~u;0<u;){var ie=31-wt(u),le=1<<ie;O[ie]=0,U[ie]=-1;var W=Y[ie];if(W!==null)for(Y[ie]=null,ie=0;ie<W.length;ie++){var re=W[ie];re!==null&&(re.lane&=-536870913)}u&=~le}h!==0&&Tv(i,h,0),b!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=b&~(_&~o))}function Tv(i,o,u){i.pendingLanes|=o,i.suspendedLanes&=~o;var h=31-wt(o);i.entangledLanes|=o,i.entanglements[h]=i.entanglements[h]|1073741824|u&261930}function Av(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var h=31-wt(u),v=1<<h;v&o|i[h]&o&&(i[h]|=o),u&=~v}}function Ov(i,o){var u=o&-o;return u=(u&42)!==0?1:fh(u),(u&(i.suspendedLanes|o))!==0?0:u}function fh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function dh(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Mv(){var i=J.p;return i!==0?i:(i=window.event,i===void 0?32:gw(i.type))}function Iv(i,o){var u=J.p;try{return J.p=i,o()}finally{J.p=u}}var Ss=Math.random().toString(36).slice(2),nn="__reactFiber$"+Ss,Rn="__reactProps$"+Ss,ta="__reactContainer$"+Ss,hh="__reactEvents$"+Ss,VA="__reactListeners$"+Ss,KA="__reactHandles$"+Ss,Nv="__reactResources$"+Ss,Ro="__reactMarker$"+Ss;function ph(i){delete i[nn],delete i[Rn],delete i[hh],delete i[VA],delete i[KA]}function na(i){var o=i[nn];if(o)return o;for(var u=i.parentNode;u;){if(o=u[ta]||u[nn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=ew(i);i!==null;){if(u=i[nn])return u;i=ew(i)}return o}i=u,u=i.parentNode}return null}function ra(i){if(i=i[nn]||i[ta]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function To(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function sa(i){var o=i[Nv];return o||(o=i[Nv]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Yt(i){i[Ro]=!0}var zv=new Set,Dv={};function di(i,o){ia(i,o),ia(i+"Capture",o)}function ia(i,o){for(Dv[i]=o,i=0;i<o.length;i++)zv.add(o[i])}var GA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jv={},Lv={};function QA(i){return ht.call(Lv,i)?!0:ht.call(jv,i)?!1:GA.test(i)?Lv[i]=!0:(jv[i]=!0,!1)}function Uu(i,o,u){if(QA(o))if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+u)}}function qu(i,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+u)}}function Gr(i,o,u,h){if(h===null)i.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(o,u,""+h)}}function ir(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Pv(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ZA(i,o,u){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,b=h.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return v.call(this)},set:function(_){u=""+_,b.call(this,_)}}),Object.defineProperty(i,o,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function mh(i){if(!i._valueTracker){var o=Pv(i)?"checked":"value";i._valueTracker=ZA(i,o,""+i[o])}}function $v(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return i&&(h=Pv(i)?i.checked?"true":"false":i.value),i=h,i!==u?(o.setValue(i),!0):!1}function Hu(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var YA=/[\n"\\]/g;function ar(i){return i.replace(YA,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function gh(i,o,u,h,v,b,_,O){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),o!=null?_==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+ir(o)):i.value!==""+ir(o)&&(i.value=""+ir(o)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),o!=null?yh(i,_,ir(o)):u!=null?yh(i,_,ir(u)):h!=null&&i.removeAttribute("value"),v==null&&b!=null&&(i.defaultChecked=!!b),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?i.name=""+ir(O):i.removeAttribute("name")}function Fv(i,o,u,h,v,b,_,O){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),o!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){mh(i);return}u=u!=null?""+ir(u):"",o=o!=null?""+ir(o):u,O||o===i.value||(i.value=o),i.defaultValue=o}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=O?i.checked:!!h,i.defaultChecked=!!h,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_),mh(i)}function yh(i,o,u){o==="number"&&Hu(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function aa(i,o,u,h){if(i=i.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<i.length;u++)v=o.hasOwnProperty("$"+i[u].value),i[u].selected!==v&&(i[u].selected=v),v&&h&&(i[u].defaultSelected=!0)}else{for(u=""+ir(u),o=null,v=0;v<i.length;v++){if(i[v].value===u){i[v].selected=!0,h&&(i[v].defaultSelected=!0);return}o!==null||i[v].disabled||(o=i[v])}o!==null&&(o.selected=!0)}}function Bv(i,o,u){if(o!=null&&(o=""+ir(o),o!==i.value&&(i.value=o),u==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=u!=null?""+ir(u):""}function Uv(i,o,u,h){if(o==null){if(h!=null){if(u!=null)throw Error(r(92));if(V(h)){if(1<h.length)throw Error(r(93));h=h[0]}u=h}u==null&&(u=""),o=u}u=ir(o),i.defaultValue=u,h=i.textContent,h===u&&h!==""&&h!==null&&(i.value=h),mh(i)}function oa(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var JA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qv(i,o,u){var h=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":h?i.setProperty(o,u):typeof u!="number"||u===0||JA.has(o)?o==="float"?i.cssFloat=u:i[o]=(""+u).trim():i[o]=u+"px"}function Hv(i,o,u){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var v in o)h=o[v],o.hasOwnProperty(v)&&u[v]!==h&&qv(i,v,h)}else for(var b in o)o.hasOwnProperty(b)&&qv(i,b,o[b])}function vh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),WA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vu(i){return WA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Qr(){}var bh=null;function xh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var la=null,ua=null;function Vv(i){var o=ra(i);if(o&&(i=o.stateNode)){var u=i[Rn]||null;e:switch(i=o.stateNode,o.type){case"input":if(gh(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ar(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==i&&h.form===i.form){var v=h[Rn]||null;if(!v)throw Error(r(90));gh(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)h=u[o],h.form===i.form&&$v(h)}break e;case"textarea":Bv(i,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&aa(i,!!u.multiple,o,!1)}}}var Sh=!1;function Kv(i,o,u){if(Sh)return i(o,u);Sh=!0;try{var h=i(o);return h}finally{if(Sh=!1,(la!==null||ua!==null)&&(Ic(),la&&(o=la,i=ua,ua=la=null,Vv(o),i)))for(o=0;o<i.length;o++)Vv(i[o])}}function Ao(i,o){var u=i.stateNode;if(u===null)return null;var h=u[Rn]||null;if(h===null)return null;u=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,o,typeof u));return u}var Zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wh=!1;if(Zr)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){wh=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{wh=!1}var ws=null,_h=null,Ku=null;function Gv(){if(Ku)return Ku;var i,o=_h,u=o.length,h,v="value"in ws?ws.value:ws.textContent,b=v.length;for(i=0;i<u&&o[i]===v[i];i++);var _=u-i;for(h=1;h<=_&&o[u-h]===v[b-h];h++);return Ku=v.slice(i,1<h?1-h:void 0)}function Gu(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Qu(){return!0}function Qv(){return!1}function Tn(i){function o(u,h,v,b,_){this._reactName=u,this._targetInst=v,this.type=h,this.nativeEvent=b,this.target=_,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(u=i[O],this[O]=u?u(b):b[O]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Qu:Qv,this.isPropagationStopped=Qv,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Qu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Qu)},persist:function(){},isPersistent:Qu}),o}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zu=Tn(hi),Mo=p({},hi,{view:0,detail:0}),eO=Tn(Mo),Ch,Eh,Io,Yu=p({},Mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Io&&(Io&&i.type==="mousemove"?(Ch=i.screenX-Io.screenX,Eh=i.screenY-Io.screenY):Eh=Ch=0,Io=i),Ch)},movementY:function(i){return"movementY"in i?i.movementY:Eh}}),Zv=Tn(Yu),tO=p({},Yu,{dataTransfer:0}),nO=Tn(tO),rO=p({},Mo,{relatedTarget:0}),kh=Tn(rO),sO=p({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),iO=Tn(sO),aO=p({},hi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),oO=Tn(aO),lO=p({},hi,{data:0}),Yv=Tn(lO),uO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dO(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=fO[i])?!!o[i]:!1}function Rh(){return dO}var hO=p({},Mo,{key:function(i){if(i.key){var o=uO[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Gu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?cO[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rh,charCode:function(i){return i.type==="keypress"?Gu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Gu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),pO=Tn(hO),mO=p({},Yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jv=Tn(mO),gO=p({},Mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rh}),yO=Tn(gO),vO=p({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),bO=Tn(vO),xO=p({},Yu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),SO=Tn(xO),wO=p({},hi,{newState:0,oldState:0}),_O=Tn(wO),CO=[9,13,27,32],Th=Zr&&"CompositionEvent"in window,No=null;Zr&&"documentMode"in document&&(No=document.documentMode);var EO=Zr&&"TextEvent"in window&&!No,Xv=Zr&&(!Th||No&&8<No&&11>=No),Wv=" ",eb=!1;function tb(i,o){switch(i){case"keyup":return CO.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nb(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ca=!1;function kO(i,o){switch(i){case"compositionend":return nb(o);case"keypress":return o.which!==32?null:(eb=!0,Wv);case"textInput":return i=o.data,i===Wv&&eb?null:i;default:return null}}function RO(i,o){if(ca)return i==="compositionend"||!Th&&tb(i,o)?(i=Gv(),Ku=_h=ws=null,ca=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Xv&&o.locale!=="ko"?null:o.data;default:return null}}var TO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rb(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!TO[i.type]:o==="textarea"}function sb(i,o,u,h){la?ua?ua.push(h):ua=[h]:la=h,o=$c(o,"onChange"),0<o.length&&(u=new Zu("onChange","change",null,u,h),i.push({event:u,listeners:o}))}var zo=null,Do=null;function AO(i){FS(i,0)}function Ju(i){var o=To(i);if($v(o))return i}function ib(i,o){if(i==="change")return o}var ab=!1;if(Zr){var Ah;if(Zr){var Oh="oninput"in document;if(!Oh){var ob=document.createElement("div");ob.setAttribute("oninput","return;"),Oh=typeof ob.oninput=="function"}Ah=Oh}else Ah=!1;ab=Ah&&(!document.documentMode||9<document.documentMode)}function lb(){zo&&(zo.detachEvent("onpropertychange",ub),Do=zo=null)}function ub(i){if(i.propertyName==="value"&&Ju(Do)){var o=[];sb(o,Do,i,xh(i)),Kv(AO,o)}}function OO(i,o,u){i==="focusin"?(lb(),zo=o,Do=u,zo.attachEvent("onpropertychange",ub)):i==="focusout"&&lb()}function MO(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ju(Do)}function IO(i,o){if(i==="click")return Ju(o)}function NO(i,o){if(i==="input"||i==="change")return Ju(o)}function zO(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Fn=typeof Object.is=="function"?Object.is:zO;function jo(i,o){if(Fn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var v=u[h];if(!ht.call(o,v)||!Fn(i[v],o[v]))return!1}return!0}function cb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function fb(i,o){var u=cb(i);i=0;for(var h;u;){if(u.nodeType===3){if(h=i+u.textContent.length,i<=o&&h>=o)return{node:u,offset:o-i};i=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=cb(u)}}function db(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?db(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function hb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Hu(i.document);o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Hu(i.document)}return o}function Mh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var DO=Zr&&"documentMode"in document&&11>=document.documentMode,fa=null,Ih=null,Lo=null,Nh=!1;function pb(i,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Nh||fa==null||fa!==Hu(h)||(h=fa,"selectionStart"in h&&Mh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Lo&&jo(Lo,h)||(Lo=h,h=$c(Ih,"onSelect"),0<h.length&&(o=new Zu("onSelect","select",null,o,u),i.push({event:o,listeners:h}),o.target=fa)))}function pi(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var da={animationend:pi("Animation","AnimationEnd"),animationiteration:pi("Animation","AnimationIteration"),animationstart:pi("Animation","AnimationStart"),transitionrun:pi("Transition","TransitionRun"),transitionstart:pi("Transition","TransitionStart"),transitioncancel:pi("Transition","TransitionCancel"),transitionend:pi("Transition","TransitionEnd")},zh={},mb={};Zr&&(mb=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function mi(i){if(zh[i])return zh[i];if(!da[i])return i;var o=da[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in mb)return zh[i]=o[u];return i}var gb=mi("animationend"),yb=mi("animationiteration"),vb=mi("animationstart"),jO=mi("transitionrun"),LO=mi("transitionstart"),PO=mi("transitioncancel"),bb=mi("transitionend"),xb=new Map,Dh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dh.push("scrollEnd");function Cr(i,o){xb.set(i,o),di(o,[i])}var Xu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},or=[],ha=0,jh=0;function Wu(){for(var i=ha,o=jh=ha=0;o<i;){var u=or[o];or[o++]=null;var h=or[o];or[o++]=null;var v=or[o];or[o++]=null;var b=or[o];if(or[o++]=null,h!==null&&v!==null){var _=h.pending;_===null?v.next=v:(v.next=_.next,_.next=v),h.pending=v}b!==0&&Sb(u,v,b)}}function ec(i,o,u,h){or[ha++]=i,or[ha++]=o,or[ha++]=u,or[ha++]=h,jh|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Lh(i,o,u,h){return ec(i,o,u,h),tc(i)}function gi(i,o){return ec(i,null,null,o),tc(i)}function Sb(i,o,u){i.lanes|=u;var h=i.alternate;h!==null&&(h.lanes|=u);for(var v=!1,b=i.return;b!==null;)b.childLanes|=u,h=b.alternate,h!==null&&(h.childLanes|=u),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(v=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,v&&o!==null&&(v=31-wt(u),i=b.hiddenUpdates,h=i[v],h===null?i[v]=[o]:h.push(o),o.lane=u|536870912),b):null}function tc(i){if(50<il)throw il=0,Kp=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var pa={};function $O(i,o,u,h){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(i,o,u,h){return new $O(i,o,u,h)}function Ph(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Yr(i,o){var u=i.alternate;return u===null?(u=Bn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function wb(i,o){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,o=u.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function nc(i,o,u,h,v,b){var _=0;if(h=i,typeof i=="function")Ph(i)&&(_=1);else if(typeof i=="string")_=H2(i,u,se.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case P:return i=Bn(31,u,o,v),i.elementType=P,i.lanes=b,i;case S:return yi(u.children,v,b,o);case E:_=8,v|=24;break;case C:return i=Bn(12,u,o,v|2),i.elementType=C,i.lanes=b,i;case j:return i=Bn(13,u,o,v),i.elementType=j,i.lanes=b,i;case T:return i=Bn(19,u,o,v),i.elementType=T,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:_=10;break e;case k:_=9;break e;case N:_=11;break e;case D:_=14;break e;case L:_=16,h=null;break e}_=29,u=Error(r(130,i===null?"null":typeof i,"")),h=null}return o=Bn(_,u,o,v),o.elementType=i,o.type=h,o.lanes=b,o}function yi(i,o,u,h){return i=Bn(7,i,h,o),i.lanes=u,i}function $h(i,o,u){return i=Bn(6,i,null,o),i.lanes=u,i}function _b(i){var o=Bn(18,null,null,0);return o.stateNode=i,o}function Fh(i,o,u){return o=Bn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Cb=new WeakMap;function lr(i,o){if(typeof i=="object"&&i!==null){var u=Cb.get(i);return u!==void 0?u:(o={value:i,source:o,stack:ot(o)},Cb.set(i,o),o)}return{value:i,source:o,stack:ot(o)}}var ma=[],ga=0,rc=null,Po=0,ur=[],cr=0,_s=null,Nr=1,zr="";function Jr(i,o){ma[ga++]=Po,ma[ga++]=rc,rc=i,Po=o}function Eb(i,o,u){ur[cr++]=Nr,ur[cr++]=zr,ur[cr++]=_s,_s=i;var h=Nr;i=zr;var v=32-wt(h)-1;h&=~(1<<v),u+=1;var b=32-wt(o)+v;if(30<b){var _=v-v%5;b=(h&(1<<_)-1).toString(32),h>>=_,v-=_,Nr=1<<32-wt(o)+v|u<<v|h,zr=b+i}else Nr=1<<b|u<<v|h,zr=i}function Bh(i){i.return!==null&&(Jr(i,1),Eb(i,1,0))}function Uh(i){for(;i===rc;)rc=ma[--ga],ma[ga]=null,Po=ma[--ga],ma[ga]=null;for(;i===_s;)_s=ur[--cr],ur[cr]=null,zr=ur[--cr],ur[cr]=null,Nr=ur[--cr],ur[cr]=null}function kb(i,o){ur[cr++]=Nr,ur[cr++]=zr,ur[cr++]=_s,Nr=o.id,zr=o.overflow,_s=i}var rn=null,kt=null,at=!1,Cs=null,fr=!1,qh=Error(r(519));function Es(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $o(lr(o,i)),qh}function Rb(i){var o=i.stateNode,u=i.type,h=i.memoizedProps;switch(o[nn]=i,o[Rn]=h,u){case"dialog":We("cancel",o),We("close",o);break;case"iframe":case"object":case"embed":We("load",o);break;case"video":case"audio":for(u=0;u<ol.length;u++)We(ol[u],o);break;case"source":We("error",o);break;case"img":case"image":case"link":We("error",o),We("load",o);break;case"details":We("toggle",o);break;case"input":We("invalid",o),Fv(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":We("invalid",o);break;case"textarea":We("invalid",o),Uv(o,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||h.suppressHydrationWarning===!0||HS(o.textContent,u)?(h.popover!=null&&(We("beforetoggle",o),We("toggle",o)),h.onScroll!=null&&We("scroll",o),h.onScrollEnd!=null&&We("scrollend",o),h.onClick!=null&&(o.onclick=Qr),o=!0):o=!1,o||Es(i,!0)}function Tb(i){for(rn=i.return;rn;)switch(rn.tag){case 5:case 31:case 13:fr=!1;return;case 27:case 3:fr=!0;return;default:rn=rn.return}}function ya(i){if(i!==rn)return!1;if(!at)return Tb(i),at=!0,!1;var o=i.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||om(i.type,i.memoizedProps)),u=!u),u&&kt&&Es(i),Tb(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));kt=WS(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));kt=WS(i)}else o===27?(o=kt,$s(i.type)?(i=dm,dm=null,kt=i):kt=o):kt=rn?hr(i.stateNode.nextSibling):null;return!0}function vi(){kt=rn=null,at=!1}function Hh(){var i=Cs;return i!==null&&(In===null?In=i:In.push.apply(In,i),Cs=null),i}function $o(i){Cs===null?Cs=[i]:Cs.push(i)}var Vh=z(null),bi=null,Xr=null;function ks(i,o,u){A(Vh,o._currentValue),o._currentValue=u}function Wr(i){i._currentValue=Vh.current,F(Vh)}function Kh(i,o,u){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===u)break;i=i.return}}function Gh(i,o,u,h){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var b=v.dependencies;if(b!==null){var _=v.child;b=b.firstContext;e:for(;b!==null;){var O=b;b=v;for(var U=0;U<o.length;U++)if(O.context===o[U]){b.lanes|=u,O=b.alternate,O!==null&&(O.lanes|=u),Kh(b.return,u,i),h||(_=null);break e}b=O.next}}else if(v.tag===18){if(_=v.return,_===null)throw Error(r(341));_.lanes|=u,b=_.alternate,b!==null&&(b.lanes|=u),Kh(_,u,i),_=null}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===i){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}}function va(i,o,u,h){i=null;for(var v=o,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var _=v.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var O=v.type;Fn(v.pendingProps.value,_.value)||(i!==null?i.push(O):i=[O])}}else if(v===ve.current){if(_=v.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(dl):i=[dl])}v=v.return}i!==null&&Gh(o,i,u,h),o.flags|=262144}function sc(i){for(i=i.firstContext;i!==null;){if(!Fn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function xi(i){bi=i,Xr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function sn(i){return Ab(bi,i)}function ic(i,o){return bi===null&&xi(i),Ab(i,o)}function Ab(i,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Xr===null){if(i===null)throw Error(r(308));Xr=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Xr=Xr.next=o;return u}var FO=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(u,h){i.push(h)}};this.abort=function(){o.aborted=!0,i.forEach(function(u){return u()})}},BO=t.unstable_scheduleCallback,UO=t.unstable_NormalPriority,Dt={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qh(){return{controller:new FO,data:new Map,refCount:0}}function Fo(i){i.refCount--,i.refCount===0&&BO(UO,function(){i.controller.abort()})}var Bo=null,Zh=0,ba=0,xa=null;function qO(i,o){if(Bo===null){var u=Bo=[];Zh=0,ba=Xp(),xa={status:"pending",value:void 0,then:function(h){u.push(h)}}}return Zh++,o.then(Ob,Ob),o}function Ob(){if(--Zh===0&&Bo!==null){xa!==null&&(xa.status="fulfilled");var i=Bo;Bo=null,ba=0,xa=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function HO(i,o){var u=[],h={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return i.then(function(){h.status="fulfilled",h.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(h.status="rejected",h.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),h}var Mb=$.S;$.S=function(i,o){pS=ye(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&qO(i,o),Mb!==null&&Mb(i,o)};var Si=z(null);function Yh(){var i=Si.current;return i!==null?i:_t.pooledCache}function ac(i,o){o===null?A(Si,Si.current):A(Si,o.pool)}function Ib(){var i=Yh();return i===null?null:{parent:Dt._currentValue,pool:i}}var Sa=Error(r(460)),Jh=Error(r(474)),oc=Error(r(542)),lc={then:function(){}};function Nb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function zb(i,o,u){switch(u=i[u],u===void 0?i.push(o):u!==o&&(o.then(Qr,Qr),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,jb(i),i;default:if(typeof o.status=="string")o.then(Qr,Qr);else{if(i=_t,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(h){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=h}},function(h){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,jb(i),i}throw _i=o,Sa}}function wi(i){try{var o=i._init;return o(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(_i=u,Sa):u}}var _i=null;function Db(){if(_i===null)throw Error(r(459));var i=_i;return _i=null,i}function jb(i){if(i===Sa||i===oc)throw Error(r(483))}var wa=null,Uo=0;function uc(i){var o=Uo;return Uo+=1,wa===null&&(wa=[]),zb(wa,i,o)}function qo(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function cc(i,o){throw o.$$typeof===g?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Lb(i){function o(K,H){if(i){var Z=K.deletions;Z===null?(K.deletions=[H],K.flags|=16):Z.push(H)}}function u(K,H){if(!i)return null;for(;H!==null;)o(K,H),H=H.sibling;return null}function h(K){for(var H=new Map;K!==null;)K.key!==null?H.set(K.key,K):H.set(K.index,K),K=K.sibling;return H}function v(K,H){return K=Yr(K,H),K.index=0,K.sibling=null,K}function b(K,H,Z){return K.index=Z,i?(Z=K.alternate,Z!==null?(Z=Z.index,Z<H?(K.flags|=67108866,H):Z):(K.flags|=67108866,H)):(K.flags|=1048576,H)}function _(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function O(K,H,Z,oe){return H===null||H.tag!==6?(H=$h(Z,K.mode,oe),H.return=K,H):(H=v(H,Z),H.return=K,H)}function U(K,H,Z,oe){var Ie=Z.type;return Ie===S?ie(K,H,Z.props.children,oe,Z.key):H!==null&&(H.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===L&&wi(Ie)===H.type)?(H=v(H,Z.props),qo(H,Z),H.return=K,H):(H=nc(Z.type,Z.key,Z.props,null,K.mode,oe),qo(H,Z),H.return=K,H)}function Y(K,H,Z,oe){return H===null||H.tag!==4||H.stateNode.containerInfo!==Z.containerInfo||H.stateNode.implementation!==Z.implementation?(H=Fh(Z,K.mode,oe),H.return=K,H):(H=v(H,Z.children||[]),H.return=K,H)}function ie(K,H,Z,oe,Ie){return H===null||H.tag!==7?(H=yi(Z,K.mode,oe,Ie),H.return=K,H):(H=v(H,Z),H.return=K,H)}function le(K,H,Z){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=$h(""+H,K.mode,Z),H.return=K,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case y:return Z=nc(H.type,H.key,H.props,null,K.mode,Z),qo(Z,H),Z.return=K,Z;case x:return H=Fh(H,K.mode,Z),H.return=K,H;case L:return H=wi(H),le(K,H,Z)}if(V(H)||G(H))return H=yi(H,K.mode,Z,null),H.return=K,H;if(typeof H.then=="function")return le(K,uc(H),Z);if(H.$$typeof===R)return le(K,ic(K,H),Z);cc(K,H)}return null}function W(K,H,Z,oe){var Ie=H!==null?H.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ie!==null?null:O(K,H,""+Z,oe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return Z.key===Ie?U(K,H,Z,oe):null;case x:return Z.key===Ie?Y(K,H,Z,oe):null;case L:return Z=wi(Z),W(K,H,Z,oe)}if(V(Z)||G(Z))return Ie!==null?null:ie(K,H,Z,oe,null);if(typeof Z.then=="function")return W(K,H,uc(Z),oe);if(Z.$$typeof===R)return W(K,H,ic(K,Z),oe);cc(K,Z)}return null}function re(K,H,Z,oe,Ie){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return K=K.get(Z)||null,O(H,K,""+oe,Ie);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return K=K.get(oe.key===null?Z:oe.key)||null,U(H,K,oe,Ie);case x:return K=K.get(oe.key===null?Z:oe.key)||null,Y(H,K,oe,Ie);case L:return oe=wi(oe),re(K,H,Z,oe,Ie)}if(V(oe)||G(oe))return K=K.get(Z)||null,ie(H,K,oe,Ie,null);if(typeof oe.then=="function")return re(K,H,Z,uc(oe),Ie);if(oe.$$typeof===R)return re(K,H,Z,ic(H,oe),Ie);cc(H,oe)}return null}function Se(K,H,Z,oe){for(var Ie=null,ft=null,Re=H,Ke=H=0,rt=null;Re!==null&&Ke<Z.length;Ke++){Re.index>Ke?(rt=Re,Re=null):rt=Re.sibling;var dt=W(K,Re,Z[Ke],oe);if(dt===null){Re===null&&(Re=rt);break}i&&Re&&dt.alternate===null&&o(K,Re),H=b(dt,H,Ke),ft===null?Ie=dt:ft.sibling=dt,ft=dt,Re=rt}if(Ke===Z.length)return u(K,Re),at&&Jr(K,Ke),Ie;if(Re===null){for(;Ke<Z.length;Ke++)Re=le(K,Z[Ke],oe),Re!==null&&(H=b(Re,H,Ke),ft===null?Ie=Re:ft.sibling=Re,ft=Re);return at&&Jr(K,Ke),Ie}for(Re=h(Re);Ke<Z.length;Ke++)rt=re(Re,K,Ke,Z[Ke],oe),rt!==null&&(i&&rt.alternate!==null&&Re.delete(rt.key===null?Ke:rt.key),H=b(rt,H,Ke),ft===null?Ie=rt:ft.sibling=rt,ft=rt);return i&&Re.forEach(function(Hs){return o(K,Hs)}),at&&Jr(K,Ke),Ie}function De(K,H,Z,oe){if(Z==null)throw Error(r(151));for(var Ie=null,ft=null,Re=H,Ke=H=0,rt=null,dt=Z.next();Re!==null&&!dt.done;Ke++,dt=Z.next()){Re.index>Ke?(rt=Re,Re=null):rt=Re.sibling;var Hs=W(K,Re,dt.value,oe);if(Hs===null){Re===null&&(Re=rt);break}i&&Re&&Hs.alternate===null&&o(K,Re),H=b(Hs,H,Ke),ft===null?Ie=Hs:ft.sibling=Hs,ft=Hs,Re=rt}if(dt.done)return u(K,Re),at&&Jr(K,Ke),Ie;if(Re===null){for(;!dt.done;Ke++,dt=Z.next())dt=le(K,dt.value,oe),dt!==null&&(H=b(dt,H,Ke),ft===null?Ie=dt:ft.sibling=dt,ft=dt);return at&&Jr(K,Ke),Ie}for(Re=h(Re);!dt.done;Ke++,dt=Z.next())dt=re(Re,K,Ke,dt.value,oe),dt!==null&&(i&&dt.alternate!==null&&Re.delete(dt.key===null?Ke:dt.key),H=b(dt,H,Ke),ft===null?Ie=dt:ft.sibling=dt,ft=dt);return i&&Re.forEach(function(tM){return o(K,tM)}),at&&Jr(K,Ke),Ie}function St(K,H,Z,oe){if(typeof Z=="object"&&Z!==null&&Z.type===S&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:e:{for(var Ie=Z.key;H!==null;){if(H.key===Ie){if(Ie=Z.type,Ie===S){if(H.tag===7){u(K,H.sibling),oe=v(H,Z.props.children),oe.return=K,K=oe;break e}}else if(H.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===L&&wi(Ie)===H.type){u(K,H.sibling),oe=v(H,Z.props),qo(oe,Z),oe.return=K,K=oe;break e}u(K,H);break}else o(K,H);H=H.sibling}Z.type===S?(oe=yi(Z.props.children,K.mode,oe,Z.key),oe.return=K,K=oe):(oe=nc(Z.type,Z.key,Z.props,null,K.mode,oe),qo(oe,Z),oe.return=K,K=oe)}return _(K);case x:e:{for(Ie=Z.key;H!==null;){if(H.key===Ie)if(H.tag===4&&H.stateNode.containerInfo===Z.containerInfo&&H.stateNode.implementation===Z.implementation){u(K,H.sibling),oe=v(H,Z.children||[]),oe.return=K,K=oe;break e}else{u(K,H);break}else o(K,H);H=H.sibling}oe=Fh(Z,K.mode,oe),oe.return=K,K=oe}return _(K);case L:return Z=wi(Z),St(K,H,Z,oe)}if(V(Z))return Se(K,H,Z,oe);if(G(Z)){if(Ie=G(Z),typeof Ie!="function")throw Error(r(150));return Z=Ie.call(Z),De(K,H,Z,oe)}if(typeof Z.then=="function")return St(K,H,uc(Z),oe);if(Z.$$typeof===R)return St(K,H,ic(K,Z),oe);cc(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,H!==null&&H.tag===6?(u(K,H.sibling),oe=v(H,Z),oe.return=K,K=oe):(u(K,H),oe=$h(Z,K.mode,oe),oe.return=K,K=oe),_(K)):u(K,H)}return function(K,H,Z,oe){try{Uo=0;var Ie=St(K,H,Z,oe);return wa=null,Ie}catch(Re){if(Re===Sa||Re===oc)throw Re;var ft=Bn(29,Re,null,K.mode);return ft.lanes=oe,ft.return=K,ft}}}var Ci=Lb(!0),Pb=Lb(!1),Rs=!1;function Xh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wh(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ts(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function As(i,o,u){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(pt&2)!==0){var v=h.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),h.pending=o,o=tc(i),Sb(i,null,u),o}return ec(i,h,o,u),tc(i)}function Ho(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,Av(i,u)}}function ep(i,o){var u=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var v=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var _={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?v=b=_:b=b.next=_,u=u.next}while(u!==null);b===null?v=b=o:b=b.next=o}else v=b=o;u={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}var tp=!1;function Vo(){if(tp){var i=xa;if(i!==null)throw i}}function Ko(i,o,u,h){tp=!1;var v=i.updateQueue;Rs=!1;var b=v.firstBaseUpdate,_=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var U=O,Y=U.next;U.next=null,_===null?b=Y:_.next=Y,_=U;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,O=ie.lastBaseUpdate,O!==_&&(O===null?ie.firstBaseUpdate=Y:O.next=Y,ie.lastBaseUpdate=U))}if(b!==null){var le=v.baseState;_=0,ie=Y=U=null,O=b;do{var W=O.lane&-536870913,re=W!==O.lane;if(re?(nt&W)===W:(h&W)===W){W!==0&&W===ba&&(tp=!0),ie!==null&&(ie=ie.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Se=i,De=O;W=o;var St=u;switch(De.tag){case 1:if(Se=De.payload,typeof Se=="function"){le=Se.call(St,le,W);break e}le=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=De.payload,W=typeof Se=="function"?Se.call(St,le,W):Se,W==null)break e;le=p({},le,W);break e;case 2:Rs=!0}}W=O.callback,W!==null&&(i.flags|=64,re&&(i.flags|=8192),re=v.callbacks,re===null?v.callbacks=[W]:re.push(W))}else re={lane:W,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ie===null?(Y=ie=re,U=le):ie=ie.next=re,_|=W;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;re=O,O=re.next,re.next=null,v.lastBaseUpdate=re,v.shared.pending=null}}while(!0);ie===null&&(U=le),v.baseState=U,v.firstBaseUpdate=Y,v.lastBaseUpdate=ie,b===null&&(v.shared.lanes=0),zs|=_,i.lanes=_,i.memoizedState=le}}function $b(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function Fb(i,o){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)$b(u[i],o)}var _a=z(null),fc=z(0);function Bb(i,o){i=ls,A(fc,i),A(_a,o),ls=i|o.baseLanes}function np(){A(fc,ls),A(_a,_a.current)}function rp(){ls=fc.current,F(_a),F(fc)}var Un=z(null),dr=null;function Os(i){var o=i.alternate;A(Nt,Nt.current&1),A(Un,i),dr===null&&(o===null||_a.current!==null||o.memoizedState!==null)&&(dr=i)}function sp(i){A(Nt,Nt.current),A(Un,i),dr===null&&(dr=i)}function Ub(i){i.tag===22?(A(Nt,Nt.current),A(Un,i),dr===null&&(dr=i)):Ms()}function Ms(){A(Nt,Nt.current),A(Un,Un.current)}function qn(i){F(Un),dr===i&&(dr=null),F(Nt)}var Nt=z(0);function dc(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||cm(u)||fm(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var es=0,Ve=null,bt=null,jt=null,hc=!1,Ca=!1,Ei=!1,pc=0,Go=0,Ea=null,VO=0;function Mt(){throw Error(r(321))}function ip(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Fn(i[u],o[u]))return!1;return!0}function ap(i,o,u,h,v,b){return es=b,Ve=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,$.H=i===null||i.memoizedState===null?Ex:Sp,Ei=!1,b=u(h,v),Ei=!1,Ca&&(b=Hb(o,u,h,v)),qb(i),b}function qb(i){$.H=Yo;var o=bt!==null&&bt.next!==null;if(es=0,jt=bt=Ve=null,hc=!1,Go=0,Ea=null,o)throw Error(r(300));i===null||Lt||(i=i.dependencies,i!==null&&sc(i)&&(Lt=!0))}function Hb(i,o,u,h){Ve=i;var v=0;do{if(Ca&&(Ea=null),Go=0,Ca=!1,25<=v)throw Error(r(301));if(v+=1,jt=bt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}$.H=kx,b=o(u,h)}while(Ca);return b}function KO(){var i=$.H,o=i.useState()[0];return o=typeof o.then=="function"?Qo(o):o,i=i.useState()[0],(bt!==null?bt.memoizedState:null)!==i&&(Ve.flags|=1024),o}function op(){var i=pc!==0;return pc=0,i}function lp(i,o,u){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~u}function up(i){if(hc){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}hc=!1}es=0,jt=bt=Ve=null,Ca=!1,Go=pc=0,Ea=null}function vn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Ve.memoizedState=jt=i:jt=jt.next=i,jt}function zt(){if(bt===null){var i=Ve.alternate;i=i!==null?i.memoizedState:null}else i=bt.next;var o=jt===null?Ve.memoizedState:jt.next;if(o!==null)jt=o,bt=i;else{if(i===null)throw Ve.alternate===null?Error(r(467)):Error(r(310));bt=i,i={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},jt===null?Ve.memoizedState=jt=i:jt=jt.next=i}return jt}function mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qo(i){var o=Go;return Go+=1,Ea===null&&(Ea=[]),i=zb(Ea,i,o),o=Ve,(jt===null?o.memoizedState:jt.next)===null&&(o=o.alternate,$.H=o===null||o.memoizedState===null?Ex:Sp),i}function gc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Qo(i);if(i.$$typeof===R)return sn(i)}throw Error(r(438,String(i)))}function cp(i){var o=null,u=Ve.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var h=Ve.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=mc(),Ve.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(i),h=0;h<i;h++)u[h]=M;return o.index++,u}function ts(i,o){return typeof o=="function"?o(i):o}function yc(i){var o=zt();return fp(o,bt,i)}function fp(i,o,u){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=u;var v=i.baseQueue,b=h.pending;if(b!==null){if(v!==null){var _=v.next;v.next=b.next,b.next=_}o.baseQueue=v=b,h.pending=null}if(b=i.baseState,v===null)i.memoizedState=b;else{o=v.next;var O=_=null,U=null,Y=o,ie=!1;do{var le=Y.lane&-536870913;if(le!==Y.lane?(nt&le)===le:(es&le)===le){var W=Y.revertLane;if(W===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),le===ba&&(ie=!0);else if((es&W)===W){Y=Y.next,W===ba&&(ie=!0);continue}else le={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(O=U=le,_=b):U=U.next=le,Ve.lanes|=W,zs|=W;le=Y.action,Ei&&u(b,le),b=Y.hasEagerState?Y.eagerState:u(b,le)}else W={lane:le,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(O=U=W,_=b):U=U.next=W,Ve.lanes|=le,zs|=le;Y=Y.next}while(Y!==null&&Y!==o);if(U===null?_=b:U.next=O,!Fn(b,i.memoizedState)&&(Lt=!0,ie&&(u=xa,u!==null)))throw u;i.memoizedState=b,i.baseState=_,i.baseQueue=U,h.lastRenderedState=b}return v===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function dp(i){var o=zt(),u=o.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var h=u.dispatch,v=u.pending,b=o.memoizedState;if(v!==null){u.pending=null;var _=v=v.next;do b=i(b,_.action),_=_.next;while(_!==v);Fn(b,o.memoizedState)||(Lt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),u.lastRenderedState=b}return[b,h]}function Vb(i,o,u){var h=Ve,v=zt(),b=at;if(b){if(u===void 0)throw Error(r(407));u=u()}else u=o();var _=!Fn((bt||v).memoizedState,u);if(_&&(v.memoizedState=u,Lt=!0),v=v.queue,mp(Qb.bind(null,h,v,i),[i]),v.getSnapshot!==o||_||jt!==null&&jt.memoizedState.tag&1){if(h.flags|=2048,ka(9,{destroy:void 0},Gb.bind(null,h,v,u,o),null),_t===null)throw Error(r(349));b||(es&127)!==0||Kb(h,o,u)}return u}function Kb(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Ve.updateQueue,o===null?(o=mc(),Ve.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function Gb(i,o,u,h){o.value=u,o.getSnapshot=h,Zb(o)&&Yb(i)}function Qb(i,o,u){return u(function(){Zb(o)&&Yb(i)})}function Zb(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Fn(i,u)}catch{return!0}}function Yb(i){var o=gi(i,2);o!==null&&Nn(o,i,2)}function hp(i){var o=vn();if(typeof i=="function"){var u=i;if(i=u(),Ei){kn(!0);try{u()}finally{kn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:i},o}function Jb(i,o,u,h){return i.baseState=u,fp(i,bt,typeof h=="function"?h:ts)}function GO(i,o,u,h,v){if(xc(i))throw Error(r(485));if(i=o.action,i!==null){var b={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){b.listeners.push(_)}};$.T!==null?u(!0):b.isTransition=!1,h(b),u=o.pending,u===null?(b.next=o.pending=b,Xb(o,b)):(b.next=u.next,o.pending=u.next=b)}}function Xb(i,o){var u=o.action,h=o.payload,v=i.state;if(o.isTransition){var b=$.T,_={};$.T=_;try{var O=u(v,h),U=$.S;U!==null&&U(_,O),Wb(i,o,O)}catch(Y){pp(i,o,Y)}finally{b!==null&&_.types!==null&&(b.types=_.types),$.T=b}}else try{b=u(v,h),Wb(i,o,b)}catch(Y){pp(i,o,Y)}}function Wb(i,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){ex(i,o,h)},function(h){return pp(i,o,h)}):ex(i,o,u)}function ex(i,o,u){o.status="fulfilled",o.value=u,tx(o),i.state=u,o=i.pending,o!==null&&(u=o.next,u===o?i.pending=null:(u=u.next,o.next=u,Xb(i,u)))}function pp(i,o,u){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=u,tx(o),o=o.next;while(o!==h)}i.action=null}function tx(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function nx(i,o){return o}function rx(i,o){if(at){var u=_t.formState;if(u!==null){e:{var h=Ve;if(at){if(kt){t:{for(var v=kt,b=fr;v.nodeType!==8;){if(!b){v=null;break t}if(v=hr(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){kt=hr(v.nextSibling),h=v.data==="F!";break e}}Es(h)}h=!1}h&&(o=u[0])}}return u=vn(),u.memoizedState=u.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nx,lastRenderedState:o},u.queue=h,u=wx.bind(null,Ve,h),h.dispatch=u,h=hp(!1),b=xp.bind(null,Ve,!1,h.queue),h=vn(),v={state:o,dispatch:null,action:i,pending:null},h.queue=v,u=GO.bind(null,Ve,v,b,u),v.dispatch=u,h.memoizedState=i,[o,u,!1]}function sx(i){var o=zt();return ix(o,bt,i)}function ix(i,o,u){if(o=fp(i,o,nx)[0],i=yc(ts)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=Qo(o)}catch(_){throw _===Sa?oc:_}else h=o;o=zt();var v=o.queue,b=v.dispatch;return u!==o.memoizedState&&(Ve.flags|=2048,ka(9,{destroy:void 0},QO.bind(null,v,u),null)),[h,b,i]}function QO(i,o){i.action=o}function ax(i){var o=zt(),u=bt;if(u!==null)return ix(o,u,i);zt(),o=o.memoizedState,u=zt();var h=u.queue.dispatch;return u.memoizedState=i,[o,h,!1]}function ka(i,o,u,h){return i={tag:i,create:u,deps:h,inst:o,next:null},o=Ve.updateQueue,o===null&&(o=mc(),Ve.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=i.next=i:(h=u.next,u.next=i,i.next=h,o.lastEffect=i),i}function ox(){return zt().memoizedState}function vc(i,o,u,h){var v=vn();Ve.flags|=i,v.memoizedState=ka(1|o,{destroy:void 0},u,h===void 0?null:h)}function bc(i,o,u,h){var v=zt();h=h===void 0?null:h;var b=v.memoizedState.inst;bt!==null&&h!==null&&ip(h,bt.memoizedState.deps)?v.memoizedState=ka(o,b,u,h):(Ve.flags|=i,v.memoizedState=ka(1|o,b,u,h))}function lx(i,o){vc(8390656,8,i,o)}function mp(i,o){bc(2048,8,i,o)}function ZO(i){Ve.flags|=4;var o=Ve.updateQueue;if(o===null)o=mc(),Ve.updateQueue=o,o.events=[i];else{var u=o.events;u===null?o.events=[i]:u.push(i)}}function ux(i){var o=zt().memoizedState;return ZO({ref:o,nextImpl:i}),function(){if((pt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function cx(i,o){return bc(4,2,i,o)}function fx(i,o){return bc(4,4,i,o)}function dx(i,o){if(typeof o=="function"){i=i();var u=o(i);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function hx(i,o,u){u=u!=null?u.concat([i]):null,bc(4,4,dx.bind(null,o,i),u)}function gp(){}function px(i,o){var u=zt();o=o===void 0?null:o;var h=u.memoizedState;return o!==null&&ip(o,h[1])?h[0]:(u.memoizedState=[i,o],i)}function mx(i,o){var u=zt();o=o===void 0?null:o;var h=u.memoizedState;if(o!==null&&ip(o,h[1]))return h[0];if(h=i(),Ei){kn(!0);try{i()}finally{kn(!1)}}return u.memoizedState=[h,o],h}function yp(i,o,u){return u===void 0||(es&1073741824)!==0&&(nt&261930)===0?i.memoizedState=o:(i.memoizedState=u,i=gS(),Ve.lanes|=i,zs|=i,u)}function gx(i,o,u,h){return Fn(u,o)?u:_a.current!==null?(i=yp(i,u,h),Fn(i,o)||(Lt=!0),i):(es&42)===0||(es&1073741824)!==0&&(nt&261930)===0?(Lt=!0,i.memoizedState=u):(i=gS(),Ve.lanes|=i,zs|=i,o)}function yx(i,o,u,h,v){var b=J.p;J.p=b!==0&&8>b?b:8;var _=$.T,O={};$.T=O,xp(i,!1,o,u);try{var U=v(),Y=$.S;if(Y!==null&&Y(O,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ie=HO(U,h);Zo(i,o,ie,Kn(i))}else Zo(i,o,h,Kn(i))}catch(le){Zo(i,o,{then:function(){},status:"rejected",reason:le},Kn())}finally{J.p=b,_!==null&&O.types!==null&&(_.types=O.types),$.T=_}}function YO(){}function vp(i,o,u,h){if(i.tag!==5)throw Error(r(476));var v=vx(i).queue;yx(i,v,o,ae,u===null?YO:function(){return bx(i),u(h)})}function vx(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:ae},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:u},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function bx(i){var o=vx(i);o.next===null&&(o=i.alternate.memoizedState),Zo(i,o.next.queue,{},Kn())}function bp(){return sn(dl)}function xx(){return zt().memoizedState}function Sx(){return zt().memoizedState}function JO(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var u=Kn();i=Ts(u);var h=As(o,i,u);h!==null&&(Nn(h,o,u),Ho(h,o,u)),o={cache:Qh()},i.payload=o;return}o=o.return}}function XO(i,o,u){var h=Kn();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},xc(i)?_x(o,u):(u=Lh(i,o,u,h),u!==null&&(Nn(u,i,h),Cx(u,o,h)))}function wx(i,o,u){var h=Kn();Zo(i,o,u,h)}function Zo(i,o,u,h){var v={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(xc(i))_x(o,v);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var _=o.lastRenderedState,O=b(_,u);if(v.hasEagerState=!0,v.eagerState=O,Fn(O,_))return ec(i,o,v,0),_t===null&&Wu(),!1}catch{}if(u=Lh(i,o,v,h),u!==null)return Nn(u,i,h),Cx(u,o,h),!0}return!1}function xp(i,o,u,h){if(h={lane:2,revertLane:Xp(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},xc(i)){if(o)throw Error(r(479))}else o=Lh(i,u,h,2),o!==null&&Nn(o,i,2)}function xc(i){var o=i.alternate;return i===Ve||o!==null&&o===Ve}function _x(i,o){Ca=hc=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Cx(i,o,u){if((u&4194048)!==0){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,Av(i,u)}}var Yo={readContext:sn,use:gc,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};Yo.useEffectEvent=Mt;var Ex={readContext:sn,use:gc,useCallback:function(i,o){return vn().memoizedState=[i,o===void 0?null:o],i},useContext:sn,useEffect:lx,useImperativeHandle:function(i,o,u){u=u!=null?u.concat([i]):null,vc(4194308,4,dx.bind(null,o,i),u)},useLayoutEffect:function(i,o){return vc(4194308,4,i,o)},useInsertionEffect:function(i,o){vc(4,2,i,o)},useMemo:function(i,o){var u=vn();o=o===void 0?null:o;var h=i();if(Ei){kn(!0);try{i()}finally{kn(!1)}}return u.memoizedState=[h,o],h},useReducer:function(i,o,u){var h=vn();if(u!==void 0){var v=u(o);if(Ei){kn(!0);try{u(o)}finally{kn(!1)}}}else v=o;return h.memoizedState=h.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},h.queue=i,i=i.dispatch=XO.bind(null,Ve,i),[h.memoizedState,i]},useRef:function(i){var o=vn();return i={current:i},o.memoizedState=i},useState:function(i){i=hp(i);var o=i.queue,u=wx.bind(null,Ve,o);return o.dispatch=u,[i.memoizedState,u]},useDebugValue:gp,useDeferredValue:function(i,o){var u=vn();return yp(u,i,o)},useTransition:function(){var i=hp(!1);return i=yx.bind(null,Ve,i.queue,!0,!1),vn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,u){var h=Ve,v=vn();if(at){if(u===void 0)throw Error(r(407));u=u()}else{if(u=o(),_t===null)throw Error(r(349));(nt&127)!==0||Kb(h,o,u)}v.memoizedState=u;var b={value:u,getSnapshot:o};return v.queue=b,lx(Qb.bind(null,h,b,i),[i]),h.flags|=2048,ka(9,{destroy:void 0},Gb.bind(null,h,b,u,o),null),u},useId:function(){var i=vn(),o=_t.identifierPrefix;if(at){var u=zr,h=Nr;u=(h&~(1<<32-wt(h)-1)).toString(32)+u,o="_"+o+"R_"+u,u=pc++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=VO++,o="_"+o+"r_"+u.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:bp,useFormState:rx,useActionState:rx,useOptimistic:function(i){var o=vn();o.memoizedState=o.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=xp.bind(null,Ve,!0,u),u.dispatch=o,[i,o]},useMemoCache:cp,useCacheRefresh:function(){return vn().memoizedState=JO.bind(null,Ve)},useEffectEvent:function(i){var o=vn(),u={impl:i};return o.memoizedState=u,function(){if((pt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},Sp={readContext:sn,use:gc,useCallback:px,useContext:sn,useEffect:mp,useImperativeHandle:hx,useInsertionEffect:cx,useLayoutEffect:fx,useMemo:mx,useReducer:yc,useRef:ox,useState:function(){return yc(ts)},useDebugValue:gp,useDeferredValue:function(i,o){var u=zt();return gx(u,bt.memoizedState,i,o)},useTransition:function(){var i=yc(ts)[0],o=zt().memoizedState;return[typeof i=="boolean"?i:Qo(i),o]},useSyncExternalStore:Vb,useId:xx,useHostTransitionStatus:bp,useFormState:sx,useActionState:sx,useOptimistic:function(i,o){var u=zt();return Jb(u,bt,i,o)},useMemoCache:cp,useCacheRefresh:Sx};Sp.useEffectEvent=ux;var kx={readContext:sn,use:gc,useCallback:px,useContext:sn,useEffect:mp,useImperativeHandle:hx,useInsertionEffect:cx,useLayoutEffect:fx,useMemo:mx,useReducer:dp,useRef:ox,useState:function(){return dp(ts)},useDebugValue:gp,useDeferredValue:function(i,o){var u=zt();return bt===null?yp(u,i,o):gx(u,bt.memoizedState,i,o)},useTransition:function(){var i=dp(ts)[0],o=zt().memoizedState;return[typeof i=="boolean"?i:Qo(i),o]},useSyncExternalStore:Vb,useId:xx,useHostTransitionStatus:bp,useFormState:ax,useActionState:ax,useOptimistic:function(i,o){var u=zt();return bt!==null?Jb(u,bt,i,o):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:cp,useCacheRefresh:Sx};kx.useEffectEvent=ux;function wp(i,o,u,h){o=i.memoizedState,u=u(h,o),u=u==null?o:p({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var _p={enqueueSetState:function(i,o,u){i=i._reactInternals;var h=Kn(),v=Ts(h);v.payload=o,u!=null&&(v.callback=u),o=As(i,v,h),o!==null&&(Nn(o,i,h),Ho(o,i,h))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var h=Kn(),v=Ts(h);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=As(i,v,h),o!==null&&(Nn(o,i,h),Ho(o,i,h))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Kn(),h=Ts(u);h.tag=2,o!=null&&(h.callback=o),o=As(i,h,u),o!==null&&(Nn(o,i,u),Ho(o,i,u))}};function Rx(i,o,u,h,v,b,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,b,_):o.prototype&&o.prototype.isPureReactComponent?!jo(u,h)||!jo(v,b):!0}function Tx(i,o,u,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==i&&_p.enqueueReplaceState(o,o.state,null)}function ki(i,o){var u=o;if("ref"in o){u={};for(var h in o)h!=="ref"&&(u[h]=o[h])}if(i=i.defaultProps){u===o&&(u=p({},u));for(var v in i)u[v]===void 0&&(u[v]=i[v])}return u}function Ax(i){Xu(i)}function Ox(i){console.error(i)}function Mx(i){Xu(i)}function Sc(i,o){try{var u=i.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function Ix(i,o,u){try{var h=i.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Cp(i,o,u){return u=Ts(u),u.tag=3,u.payload={element:null},u.callback=function(){Sc(i,o)},u}function Nx(i){return i=Ts(i),i.tag=3,i}function zx(i,o,u,h){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var b=h.value;i.payload=function(){return v(b)},i.callback=function(){Ix(o,u,h)}}var _=u.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){Ix(o,u,h),typeof v!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var O=h.stack;this.componentDidCatch(h.value,{componentStack:O!==null?O:""})})}function WO(i,o,u,h,v){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=u.alternate,o!==null&&va(o,u,v,!0),u=Un.current,u!==null){switch(u.tag){case 31:case 13:return dr===null?Nc():u.alternate===null&&It===0&&(It=3),u.flags&=-257,u.flags|=65536,u.lanes=v,h===lc?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([h]):o.add(h),Zp(i,h,v)),!1;case 22:return u.flags|=65536,h===lc?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([h]):u.add(h)),Zp(i,h,v)),!1}throw Error(r(435,u.tag))}return Zp(i,h,v),Nc(),!1}if(at)return o=Un.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,h!==qh&&(i=Error(r(422),{cause:h}),$o(lr(i,u)))):(h!==qh&&(o=Error(r(423),{cause:h}),$o(lr(o,u))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,h=lr(h,u),v=Cp(i.stateNode,h,v),ep(i,v),It!==4&&(It=2)),!1;var b=Error(r(520),{cause:h});if(b=lr(b,u),sl===null?sl=[b]:sl.push(b),It!==4&&(It=2),o===null)return!0;h=lr(h,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,i=v&-v,u.lanes|=i,i=Cp(u.stateNode,h,i),ep(u,i),!1;case 1:if(o=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ds===null||!Ds.has(b))))return u.flags|=65536,v&=-v,u.lanes|=v,v=Nx(v),zx(v,i,u,h),ep(u,v),!1}u=u.return}while(u!==null);return!1}var Ep=Error(r(461)),Lt=!1;function an(i,o,u,h){o.child=i===null?Pb(o,null,u,h):Ci(o,i.child,u,h)}function Dx(i,o,u,h,v){u=u.render;var b=o.ref;if("ref"in h){var _={};for(var O in h)O!=="ref"&&(_[O]=h[O])}else _=h;return xi(o),h=ap(i,o,u,_,b,v),O=op(),i!==null&&!Lt?(lp(i,o,v),ns(i,o,v)):(at&&O&&Bh(o),o.flags|=1,an(i,o,h,v),o.child)}function jx(i,o,u,h,v){if(i===null){var b=u.type;return typeof b=="function"&&!Ph(b)&&b.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=b,Lx(i,o,b,h,v)):(i=nc(u.type,null,h,o,o.mode,v),i.ref=o.ref,i.return=o,o.child=i)}if(b=i.child,!Np(i,v)){var _=b.memoizedProps;if(u=u.compare,u=u!==null?u:jo,u(_,h)&&i.ref===o.ref)return ns(i,o,v)}return o.flags|=1,i=Yr(b,h),i.ref=o.ref,i.return=o,o.child=i}function Lx(i,o,u,h,v){if(i!==null){var b=i.memoizedProps;if(jo(b,h)&&i.ref===o.ref)if(Lt=!1,o.pendingProps=h=b,Np(i,v))(i.flags&131072)!==0&&(Lt=!0);else return o.lanes=i.lanes,ns(i,o,v)}return kp(i,o,u,h,v)}function Px(i,o,u,h){var v=h.children,b=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,i!==null){for(h=o.child=i.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~b}else h=0,o.child=null;return $x(i,o,b,u,h)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&ac(o,b!==null?b.cachePool:null),b!==null?Bb(o,b):np(),Ub(o);else return h=o.lanes=536870912,$x(i,o,b!==null?b.baseLanes|u:u,u,h)}else b!==null?(ac(o,b.cachePool),Bb(o,b),Ms(),o.memoizedState=null):(i!==null&&ac(o,null),np(),Ms());return an(i,o,v,u),o.child}function Jo(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function $x(i,o,u,h,v){var b=Yh();return b=b===null?null:{parent:Dt._currentValue,pool:b},o.memoizedState={baseLanes:u,cachePool:b},i!==null&&ac(o,null),np(),Ub(o),i!==null&&va(i,o,h,!0),o.childLanes=v,null}function wc(i,o){return o=Cc({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Fx(i,o,u){return Ci(o,i.child,null,u),i=wc(o,o.pendingProps),i.flags|=2,qn(o),o.memoizedState=null,i}function e2(i,o,u){var h=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(at){if(h.mode==="hidden")return i=wc(o,h),o.lanes=536870912,Jo(null,i);if(sp(o),(i=kt)?(i=XS(i,fr),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:_s!==null?{id:Nr,overflow:zr}:null,retryLane:536870912,hydrationErrors:null},u=_b(i),u.return=o,o.child=u,rn=o,kt=null)):i=null,i===null)throw Es(o);return o.lanes=536870912,null}return wc(o,h)}var b=i.memoizedState;if(b!==null){var _=b.dehydrated;if(sp(o),v)if(o.flags&256)o.flags&=-257,o=Fx(i,o,u);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(Lt||va(i,o,u,!1),v=(u&i.childLanes)!==0,Lt||v){if(h=_t,h!==null&&(_=Ov(h,u),_!==0&&_!==b.retryLane))throw b.retryLane=_,gi(i,_),Nn(h,i,_),Ep;Nc(),o=Fx(i,o,u)}else i=b.treeContext,kt=hr(_.nextSibling),rn=o,at=!0,Cs=null,fr=!1,i!==null&&kb(o,i),o=wc(o,h),o.flags|=4096;return o}return i=Yr(i.child,{mode:h.mode,children:h.children}),i.ref=o.ref,o.child=i,i.return=o,i}function _c(i,o){var u=o.ref;if(u===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(o.flags|=4194816)}}function kp(i,o,u,h,v){return xi(o),u=ap(i,o,u,h,void 0,v),h=op(),i!==null&&!Lt?(lp(i,o,v),ns(i,o,v)):(at&&h&&Bh(o),o.flags|=1,an(i,o,u,v),o.child)}function Bx(i,o,u,h,v,b){return xi(o),o.updateQueue=null,u=Hb(o,h,u,v),qb(i),h=op(),i!==null&&!Lt?(lp(i,o,b),ns(i,o,b)):(at&&h&&Bh(o),o.flags|=1,an(i,o,u,b),o.child)}function Ux(i,o,u,h,v){if(xi(o),o.stateNode===null){var b=pa,_=u.contextType;typeof _=="object"&&_!==null&&(b=sn(_)),b=new u(h,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=_p,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=h,b.state=o.memoizedState,b.refs={},Xh(o),_=u.contextType,b.context=typeof _=="object"&&_!==null?sn(_):pa,b.state=o.memoizedState,_=u.getDerivedStateFromProps,typeof _=="function"&&(wp(o,u,_,h),b.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(_=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),_!==b.state&&_p.enqueueReplaceState(b,b.state,null),Ko(o,h,b,v),Vo(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(i===null){b=o.stateNode;var O=o.memoizedProps,U=ki(u,O);b.props=U;var Y=b.context,ie=u.contextType;_=pa,typeof ie=="object"&&ie!==null&&(_=sn(ie));var le=u.getDerivedStateFromProps;ie=typeof le=="function"||typeof b.getSnapshotBeforeUpdate=="function",O=o.pendingProps!==O,ie||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(O||Y!==_)&&Tx(o,b,h,_),Rs=!1;var W=o.memoizedState;b.state=W,Ko(o,h,b,v),Vo(),Y=o.memoizedState,O||W!==Y||Rs?(typeof le=="function"&&(wp(o,u,le,h),Y=o.memoizedState),(U=Rs||Rx(o,u,U,h,W,Y,_))?(ie||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=Y),b.props=h,b.state=Y,b.context=_,h=U):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{b=o.stateNode,Wh(i,o),_=o.memoizedProps,ie=ki(u,_),b.props=ie,le=o.pendingProps,W=b.context,Y=u.contextType,U=pa,typeof Y=="object"&&Y!==null&&(U=sn(Y)),O=u.getDerivedStateFromProps,(Y=typeof O=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_!==le||W!==U)&&Tx(o,b,h,U),Rs=!1,W=o.memoizedState,b.state=W,Ko(o,h,b,v),Vo();var re=o.memoizedState;_!==le||W!==re||Rs||i!==null&&i.dependencies!==null&&sc(i.dependencies)?(typeof O=="function"&&(wp(o,u,O,h),re=o.memoizedState),(ie=Rs||Rx(o,u,ie,h,W,re,U)||i!==null&&i.dependencies!==null&&sc(i.dependencies))?(Y||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,re,U),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,re,U)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||_===i.memoizedProps&&W===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&W===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=re),b.props=h,b.state=re,b.context=U,h=ie):(typeof b.componentDidUpdate!="function"||_===i.memoizedProps&&W===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&W===i.memoizedState||(o.flags|=1024),h=!1)}return b=h,_c(i,o),h=(o.flags&128)!==0,b||h?(b=o.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,i!==null&&h?(o.child=Ci(o,i.child,null,v),o.child=Ci(o,null,u,v)):an(i,o,u,v),o.memoizedState=b.state,i=o.child):i=ns(i,o,v),i}function qx(i,o,u,h){return vi(),o.flags|=256,an(i,o,u,h),o.child}var Rp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tp(i){return{baseLanes:i,cachePool:Ib()}}function Ap(i,o,u){return i=i!==null?i.childLanes&~u:0,o&&(i|=Vn),i}function Hx(i,o,u){var h=o.pendingProps,v=!1,b=(o.flags&128)!==0,_;if((_=b)||(_=i!==null&&i.memoizedState===null?!1:(Nt.current&2)!==0),_&&(v=!0,o.flags&=-129),_=(o.flags&32)!==0,o.flags&=-33,i===null){if(at){if(v?Os(o):Ms(),(i=kt)?(i=XS(i,fr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:_s!==null?{id:Nr,overflow:zr}:null,retryLane:536870912,hydrationErrors:null},u=_b(i),u.return=o,o.child=u,rn=o,kt=null)):i=null,i===null)throw Es(o);return fm(i)?o.lanes=32:o.lanes=536870912,null}var O=h.children;return h=h.fallback,v?(Ms(),v=o.mode,O=Cc({mode:"hidden",children:O},v),h=yi(h,v,u,null),O.return=o,h.return=o,O.sibling=h,o.child=O,h=o.child,h.memoizedState=Tp(u),h.childLanes=Ap(i,_,u),o.memoizedState=Rp,Jo(null,h)):(Os(o),Op(o,O))}var U=i.memoizedState;if(U!==null&&(O=U.dehydrated,O!==null)){if(b)o.flags&256?(Os(o),o.flags&=-257,o=Mp(i,o,u)):o.memoizedState!==null?(Ms(),o.child=i.child,o.flags|=128,o=null):(Ms(),O=h.fallback,v=o.mode,h=Cc({mode:"visible",children:h.children},v),O=yi(O,v,u,null),O.flags|=2,h.return=o,O.return=o,h.sibling=O,o.child=h,Ci(o,i.child,null,u),h=o.child,h.memoizedState=Tp(u),h.childLanes=Ap(i,_,u),o.memoizedState=Rp,o=Jo(null,h));else if(Os(o),fm(O)){if(_=O.nextSibling&&O.nextSibling.dataset,_)var Y=_.dgst;_=Y,h=Error(r(419)),h.stack="",h.digest=_,$o({value:h,source:null,stack:null}),o=Mp(i,o,u)}else if(Lt||va(i,o,u,!1),_=(u&i.childLanes)!==0,Lt||_){if(_=_t,_!==null&&(h=Ov(_,u),h!==0&&h!==U.retryLane))throw U.retryLane=h,gi(i,h),Nn(_,i,h),Ep;cm(O)||Nc(),o=Mp(i,o,u)}else cm(O)?(o.flags|=192,o.child=i.child,o=null):(i=U.treeContext,kt=hr(O.nextSibling),rn=o,at=!0,Cs=null,fr=!1,i!==null&&kb(o,i),o=Op(o,h.children),o.flags|=4096);return o}return v?(Ms(),O=h.fallback,v=o.mode,U=i.child,Y=U.sibling,h=Yr(U,{mode:"hidden",children:h.children}),h.subtreeFlags=U.subtreeFlags&65011712,Y!==null?O=Yr(Y,O):(O=yi(O,v,u,null),O.flags|=2),O.return=o,h.return=o,h.sibling=O,o.child=h,Jo(null,h),h=o.child,O=i.child.memoizedState,O===null?O=Tp(u):(v=O.cachePool,v!==null?(U=Dt._currentValue,v=v.parent!==U?{parent:U,pool:U}:v):v=Ib(),O={baseLanes:O.baseLanes|u,cachePool:v}),h.memoizedState=O,h.childLanes=Ap(i,_,u),o.memoizedState=Rp,Jo(i.child,h)):(Os(o),u=i.child,i=u.sibling,u=Yr(u,{mode:"visible",children:h.children}),u.return=o,u.sibling=null,i!==null&&(_=o.deletions,_===null?(o.deletions=[i],o.flags|=16):_.push(i)),o.child=u,o.memoizedState=null,u)}function Op(i,o){return o=Cc({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Cc(i,o){return i=Bn(22,i,null,o),i.lanes=0,i}function Mp(i,o,u){return Ci(o,i.child,null,u),i=Op(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Vx(i,o,u){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),Kh(i.return,o,u)}function Ip(i,o,u,h,v,b){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:v,treeForkCount:b}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=u,_.tailMode=v,_.treeForkCount=b)}function Kx(i,o,u){var h=o.pendingProps,v=h.revealOrder,b=h.tail;h=h.children;var _=Nt.current,O=(_&2)!==0;if(O?(_=_&1|2,o.flags|=128):_&=1,A(Nt,_),an(i,o,h,u),h=at?Po:0,!O&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Vx(i,u,o);else if(i.tag===19)Vx(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(u=o.child,v=null;u!==null;)i=u.alternate,i!==null&&dc(i)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),Ip(o,!1,v,u,b,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(i=v.alternate,i!==null&&dc(i)===null){o.child=v;break}i=v.sibling,v.sibling=u,u=v,v=i}Ip(o,!0,u,null,b,h);break;case"together":Ip(o,!1,null,null,void 0,h);break;default:o.memoizedState=null}return o.child}function ns(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),zs|=o.lanes,(u&o.childLanes)===0)if(i!==null){if(va(i,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,u=Yr(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Yr(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function Np(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&sc(i)))}function t2(i,o,u){switch(o.tag){case 3:Te(o,o.stateNode.containerInfo),ks(o,Dt,i.memoizedState.cache),vi();break;case 27:case 5:me(o);break;case 4:Te(o,o.stateNode.containerInfo);break;case 10:ks(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,sp(o),null;break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(Os(o),o.flags|=128,null):(u&o.child.childLanes)!==0?Hx(i,o,u):(Os(o),i=ns(i,o,u),i!==null?i.sibling:null);Os(o);break;case 19:var v=(i.flags&128)!==0;if(h=(u&o.childLanes)!==0,h||(va(i,o,u,!1),h=(u&o.childLanes)!==0),v){if(h)return Kx(i,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),A(Nt,Nt.current),h)break;return null;case 22:return o.lanes=0,Px(i,o,u,o.pendingProps);case 24:ks(o,Dt,i.memoizedState.cache)}return ns(i,o,u)}function Gx(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps)Lt=!0;else{if(!Np(i,u)&&(o.flags&128)===0)return Lt=!1,t2(i,o,u);Lt=(i.flags&131072)!==0}else Lt=!1,at&&(o.flags&1048576)!==0&&Eb(o,Po,o.index);switch(o.lanes=0,o.tag){case 16:e:{var h=o.pendingProps;if(i=wi(o.elementType),o.type=i,typeof i=="function")Ph(i)?(h=ki(i,h),o.tag=1,o=Ux(null,o,i,h,u)):(o.tag=0,o=kp(null,o,i,h,u));else{if(i!=null){var v=i.$$typeof;if(v===N){o.tag=11,o=Dx(null,o,i,h,u);break e}else if(v===D){o.tag=14,o=jx(null,o,i,h,u);break e}}throw o=te(i)||i,Error(r(306,o,""))}}return o;case 0:return kp(i,o,o.type,o.pendingProps,u);case 1:return h=o.type,v=ki(h,o.pendingProps),Ux(i,o,h,v,u);case 3:e:{if(Te(o,o.stateNode.containerInfo),i===null)throw Error(r(387));h=o.pendingProps;var b=o.memoizedState;v=b.element,Wh(i,o),Ko(o,h,null,u);var _=o.memoizedState;if(h=_.cache,ks(o,Dt,h),h!==b.cache&&Gh(o,[Dt],u,!0),Vo(),h=_.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:_.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=qx(i,o,h,u);break e}else if(h!==v){v=lr(Error(r(424)),o),$o(v),o=qx(i,o,h,u);break e}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,kt=hr(i.firstChild),rn=o,at=!0,Cs=null,fr=!0,u=Pb(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(vi(),h===v){o=ns(i,o,u);break e}an(i,o,h,u)}o=o.child}return o;case 26:return _c(i,o),i===null?(u=sw(o.type,null,o.pendingProps,null))?o.memoizedState=u:at||(u=o.type,i=o.pendingProps,h=Fc(fe.current).createElement(u),h[nn]=o,h[Rn]=i,on(h,u,i),Yt(h),o.stateNode=h):o.memoizedState=sw(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return me(o),i===null&&at&&(h=o.stateNode=tw(o.type,o.pendingProps,fe.current),rn=o,fr=!0,v=kt,$s(o.type)?(dm=v,kt=hr(h.firstChild)):kt=v),an(i,o,o.pendingProps.children,u),_c(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&at&&((v=h=kt)&&(h=M2(h,o.type,o.pendingProps,fr),h!==null?(o.stateNode=h,rn=o,kt=hr(h.firstChild),fr=!1,v=!0):v=!1),v||Es(o)),me(o),v=o.type,b=o.pendingProps,_=i!==null?i.memoizedProps:null,h=b.children,om(v,b)?h=null:_!==null&&om(v,_)&&(o.flags|=32),o.memoizedState!==null&&(v=ap(i,o,KO,null,null,u),dl._currentValue=v),_c(i,o),an(i,o,h,u),o.child;case 6:return i===null&&at&&((i=u=kt)&&(u=I2(u,o.pendingProps,fr),u!==null?(o.stateNode=u,rn=o,kt=null,i=!0):i=!1),i||Es(o)),null;case 13:return Hx(i,o,u);case 4:return Te(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=Ci(o,null,h,u):an(i,o,h,u),o.child;case 11:return Dx(i,o,o.type,o.pendingProps,u);case 7:return an(i,o,o.pendingProps,u),o.child;case 8:return an(i,o,o.pendingProps.children,u),o.child;case 12:return an(i,o,o.pendingProps.children,u),o.child;case 10:return h=o.pendingProps,ks(o,o.type,h.value),an(i,o,h.children,u),o.child;case 9:return v=o.type._context,h=o.pendingProps.children,xi(o),v=sn(v),h=h(v),o.flags|=1,an(i,o,h,u),o.child;case 14:return jx(i,o,o.type,o.pendingProps,u);case 15:return Lx(i,o,o.type,o.pendingProps,u);case 19:return Kx(i,o,u);case 31:return e2(i,o,u);case 22:return Px(i,o,u,o.pendingProps);case 24:return xi(o),h=sn(Dt),i===null?(v=Yh(),v===null&&(v=_t,b=Qh(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=u),v=b),o.memoizedState={parent:h,cache:v},Xh(o),ks(o,Dt,v)):((i.lanes&u)!==0&&(Wh(i,o),Ko(o,null,null,u),Vo()),v=i.memoizedState,b=o.memoizedState,v.parent!==h?(v={parent:h,cache:h},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),ks(o,Dt,h)):(h=b.cache,ks(o,Dt,h),h!==v.cache&&Gh(o,[Dt],u,!0))),an(i,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function rs(i){i.flags|=4}function zp(i,o,u,h,v){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(xS())i.flags|=8192;else throw _i=lc,Jh}else i.flags&=-16777217}function Qx(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!uw(o))if(xS())i.flags|=8192;else throw _i=lc,Jh}function Ec(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Rv():536870912,i.lanes|=o,Oa|=o)}function Xo(i,o){if(!at)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Rt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,h=0;if(o)for(var v=i.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=h,i.childLanes=u,o}function n2(i,o,u){var h=o.pendingProps;switch(Uh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(o),null;case 1:return Rt(o),null;case 3:return u=o.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Wr(Dt),_e(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(ya(o)?rs(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Hh())),Rt(o),null;case 26:var v=o.type,b=o.memoizedState;return i===null?(rs(o),b!==null?(Rt(o),Qx(o,b)):(Rt(o),zp(o,v,null,h,u))):b?b!==i.memoizedState?(rs(o),Rt(o),Qx(o,b)):(Rt(o),o.flags&=-16777217):(i=i.memoizedProps,i!==h&&rs(o),Rt(o),zp(o,v,i,h,u)),null;case 27:if(Ee(o),u=fe.current,v=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&rs(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return Rt(o),null}i=se.current,ya(o)?Rb(o):(i=tw(v,h,u),o.stateNode=i,rs(o))}return Rt(o),null;case 5:if(Ee(o),v=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&rs(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return Rt(o),null}if(b=se.current,ya(o))Rb(o);else{var _=Fc(fe.current);switch(b){case 1:b=_.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=_.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=_.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof h.is=="string"?_.createElement("select",{is:h.is}):_.createElement("select"),h.multiple?b.multiple=!0:h.size&&(b.size=h.size);break;default:b=typeof h.is=="string"?_.createElement(v,{is:h.is}):_.createElement(v)}}b[nn]=o,b[Rn]=h;e:for(_=o.child;_!==null;){if(_.tag===5||_.tag===6)b.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===o)break e;for(;_.sibling===null;){if(_.return===null||_.return===o)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}o.stateNode=b;e:switch(on(b,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&rs(o)}}return Rt(o),zp(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,u),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==h&&rs(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(i=fe.current,ya(o)){if(i=o.stateNode,u=o.memoizedProps,h=null,v=rn,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}i[nn]=o,i=!!(i.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||HS(i.nodeValue,u)),i||Es(o,!0)}else i=Fc(i).createTextNode(h),i[nn]=o,o.stateNode=i}return Rt(o),null;case 31:if(u=o.memoizedState,i===null||i.memoizedState!==null){if(h=ya(o),u!==null){if(i===null){if(!h)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[nn]=o}else vi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),i=!1}else u=Hh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return o.flags&256?(qn(o),o):(qn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Rt(o),null;case 13:if(h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=ya(o),h!==null&&h.dehydrated!==null){if(i===null){if(!v)throw Error(r(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[nn]=o}else vi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),v=!1}else v=Hh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(qn(o),o):(qn(o),null)}return qn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=h!==null,i=i!==null&&i.memoizedState!==null,u&&(h=o.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==v&&(h.flags|=2048)),u!==i&&u&&(o.child.flags|=8192),Ec(o,o.updateQueue),Rt(o),null);case 4:return _e(),i===null&&nm(o.stateNode.containerInfo),Rt(o),null;case 10:return Wr(o.type),Rt(o),null;case 19:if(F(Nt),h=o.memoizedState,h===null)return Rt(o),null;if(v=(o.flags&128)!==0,b=h.rendering,b===null)if(v)Xo(h,!1);else{if(It!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(b=dc(i),b!==null){for(o.flags|=128,Xo(h,!1),i=b.updateQueue,o.updateQueue=i,Ec(o,i),o.subtreeFlags=0,i=u,u=o.child;u!==null;)wb(u,i),u=u.sibling;return A(Nt,Nt.current&1|2),at&&Jr(o,h.treeForkCount),o.child}i=i.sibling}h.tail!==null&&ye()>Oc&&(o.flags|=128,v=!0,Xo(h,!1),o.lanes=4194304)}else{if(!v)if(i=dc(b),i!==null){if(o.flags|=128,v=!0,i=i.updateQueue,o.updateQueue=i,Ec(o,i),Xo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!b.alternate&&!at)return Rt(o),null}else 2*ye()-h.renderingStartTime>Oc&&u!==536870912&&(o.flags|=128,v=!0,Xo(h,!1),o.lanes=4194304);h.isBackwards?(b.sibling=o.child,o.child=b):(i=h.last,i!==null?i.sibling=b:o.child=b,h.last=b)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=ye(),i.sibling=null,u=Nt.current,A(Nt,v?u&1|2:u&1),at&&Jr(o,h.treeForkCount),i):(Rt(o),null);case 22:case 23:return qn(o),rp(),h=o.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(u&536870912)!==0&&(o.flags&128)===0&&(Rt(o),o.subtreeFlags&6&&(o.flags|=8192)):Rt(o),u=o.updateQueue,u!==null&&Ec(o,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==u&&(o.flags|=2048),i!==null&&F(Si),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Wr(Dt),Rt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function r2(i,o){switch(Uh(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Wr(Dt),_e(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Ee(o),null;case 31:if(o.memoizedState!==null){if(qn(o),o.alternate===null)throw Error(r(340));vi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(qn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));vi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return F(Nt),null;case 4:return _e(),null;case 10:return Wr(o.type),null;case 22:case 23:return qn(o),rp(),i!==null&&F(Si),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Wr(Dt),null;case 25:return null;default:return null}}function Zx(i,o){switch(Uh(o),o.tag){case 3:Wr(Dt),_e();break;case 26:case 27:case 5:Ee(o);break;case 4:_e();break;case 31:o.memoizedState!==null&&qn(o);break;case 13:qn(o);break;case 19:F(Nt);break;case 10:Wr(o.type);break;case 22:case 23:qn(o),rp(),i!==null&&F(Si);break;case 24:Wr(Dt)}}function Wo(i,o){try{var u=o.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var v=h.next;u=v;do{if((u.tag&i)===i){h=void 0;var b=u.create,_=u.inst;h=b(),_.destroy=h}u=u.next}while(u!==v)}}catch(O){gt(o,o.return,O)}}function Is(i,o,u){try{var h=o.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var b=v.next;h=b;do{if((h.tag&i)===i){var _=h.inst,O=_.destroy;if(O!==void 0){_.destroy=void 0,v=o;var U=u,Y=O;try{Y()}catch(ie){gt(v,U,ie)}}}h=h.next}while(h!==b)}}catch(ie){gt(o,o.return,ie)}}function Yx(i){var o=i.updateQueue;if(o!==null){var u=i.stateNode;try{Fb(o,u)}catch(h){gt(i,i.return,h)}}}function Jx(i,o,u){u.props=ki(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(h){gt(i,o,h)}}function el(i,o){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof u=="function"?i.refCleanup=u(h):u.current=h}}catch(v){gt(i,o,v)}}function Dr(i,o){var u=i.ref,h=i.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(v){gt(i,o,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){gt(i,o,v)}else u.current=null}function Xx(i){var o=i.type,u=i.memoizedProps,h=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(v){gt(i,i.return,v)}}function Dp(i,o,u){try{var h=i.stateNode;E2(h,i.type,u,o),h[Rn]=o}catch(v){gt(i,i.return,v)}}function Wx(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&$s(i.type)||i.tag===4}function jp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Wx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&$s(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Lp(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(i),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Qr));else if(h!==4&&(h===27&&$s(i.type)&&(u=i.stateNode,o=null),i=i.child,i!==null))for(Lp(i,o,u),i=i.sibling;i!==null;)Lp(i,o,u),i=i.sibling}function kc(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(h!==4&&(h===27&&$s(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(kc(i,o,u),i=i.sibling;i!==null;)kc(i,o,u),i=i.sibling}function eS(i){var o=i.stateNode,u=i.memoizedProps;try{for(var h=i.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);on(o,h,u),o[nn]=i,o[Rn]=u}catch(b){gt(i,i.return,b)}}var ss=!1,Pt=!1,Pp=!1,tS=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function s2(i,o){if(i=i.containerInfo,im=Gc,i=hb(i),Mh(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var v=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var _=0,O=-1,U=-1,Y=0,ie=0,le=i,W=null;t:for(;;){for(var re;le!==u||v!==0&&le.nodeType!==3||(O=_+v),le!==b||h!==0&&le.nodeType!==3||(U=_+h),le.nodeType===3&&(_+=le.nodeValue.length),(re=le.firstChild)!==null;)W=le,le=re;for(;;){if(le===i)break t;if(W===u&&++Y===v&&(O=_),W===b&&++ie===h&&(U=_),(re=le.nextSibling)!==null)break;le=W,W=le.parentNode}le=re}u=O===-1||U===-1?null:{start:O,end:U}}else u=null}u=u||{start:0,end:0}}else u=null;for(am={focusedElem:i,selectionRange:u},Gc=!1,Jt=o;Jt!==null;)if(o=Jt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Jt=i;else for(;Jt!==null;){switch(o=Jt,b=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)v=i[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,u=o,v=b.memoizedProps,b=b.memoizedState,h=u.stateNode;try{var Se=ki(u.type,v);i=h.getSnapshotBeforeUpdate(Se,b),h.__reactInternalSnapshotBeforeUpdate=i}catch(De){gt(u,u.return,De)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,u=i.nodeType,u===9)um(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":um(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,Jt=i;break}Jt=o.return}}function nS(i,o,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:as(i,u),h&4&&Wo(5,u);break;case 1:if(as(i,u),h&4)if(i=u.stateNode,o===null)try{i.componentDidMount()}catch(_){gt(u,u.return,_)}else{var v=ki(u.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(v,o,i.__reactInternalSnapshotBeforeUpdate)}catch(_){gt(u,u.return,_)}}h&64&&Yx(u),h&512&&el(u,u.return);break;case 3:if(as(i,u),h&64&&(i=u.updateQueue,i!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{Fb(i,o)}catch(_){gt(u,u.return,_)}}break;case 27:o===null&&h&4&&eS(u);case 26:case 5:as(i,u),o===null&&h&4&&Xx(u),h&512&&el(u,u.return);break;case 12:as(i,u);break;case 31:as(i,u),h&4&&iS(i,u);break;case 13:as(i,u),h&4&&aS(i,u),h&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=h2.bind(null,u),N2(i,u))));break;case 22:if(h=u.memoizedState!==null||ss,!h){o=o!==null&&o.memoizedState!==null||Pt,v=ss;var b=Pt;ss=h,(Pt=o)&&!b?os(i,u,(u.subtreeFlags&8772)!==0):as(i,u),ss=v,Pt=b}break;case 30:break;default:as(i,u)}}function rS(i){var o=i.alternate;o!==null&&(i.alternate=null,rS(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&ph(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Tt=null,An=!1;function is(i,o,u){for(u=u.child;u!==null;)sS(i,o,u),u=u.sibling}function sS(i,o,u){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(ut,u)}catch{}switch(u.tag){case 26:Pt||Dr(u,o),is(i,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Pt||Dr(u,o);var h=Tt,v=An;$s(u.type)&&(Tt=u.stateNode,An=!1),is(i,o,u),ul(u.stateNode),Tt=h,An=v;break;case 5:Pt||Dr(u,o);case 6:if(h=Tt,v=An,Tt=null,is(i,o,u),Tt=h,An=v,Tt!==null)if(An)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(u.stateNode)}catch(b){gt(u,o,b)}else try{Tt.removeChild(u.stateNode)}catch(b){gt(u,o,b)}break;case 18:Tt!==null&&(An?(i=Tt,YS(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Pa(i)):YS(Tt,u.stateNode));break;case 4:h=Tt,v=An,Tt=u.stateNode.containerInfo,An=!0,is(i,o,u),Tt=h,An=v;break;case 0:case 11:case 14:case 15:Is(2,u,o),Pt||Is(4,u,o),is(i,o,u);break;case 1:Pt||(Dr(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"&&Jx(u,o,h)),is(i,o,u);break;case 21:is(i,o,u);break;case 22:Pt=(h=Pt)||u.memoizedState!==null,is(i,o,u),Pt=h;break;default:is(i,o,u)}}function iS(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Pa(i)}catch(u){gt(o,o.return,u)}}}function aS(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Pa(i)}catch(u){gt(o,o.return,u)}}function i2(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new tS),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new tS),o;default:throw Error(r(435,i.tag))}}function Rc(i,o){var u=i2(i);o.forEach(function(h){if(!u.has(h)){u.add(h);var v=p2.bind(null,i,h);h.then(v,v)}})}function On(i,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var v=u[h],b=i,_=o,O=_;e:for(;O!==null;){switch(O.tag){case 27:if($s(O.type)){Tt=O.stateNode,An=!1;break e}break;case 5:Tt=O.stateNode,An=!1;break e;case 3:case 4:Tt=O.stateNode.containerInfo,An=!0;break e}O=O.return}if(Tt===null)throw Error(r(160));sS(b,_,v),Tt=null,An=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)oS(o,i),o=o.sibling}var Er=null;function oS(i,o){var u=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:On(o,i),Mn(i),h&4&&(Is(3,i,i.return),Wo(3,i),Is(5,i,i.return));break;case 1:On(o,i),Mn(i),h&512&&(Pt||u===null||Dr(u,u.return)),h&64&&ss&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var v=Er;if(On(o,i),Mn(i),h&512&&(Pt||u===null||Dr(u,u.return)),h&4){var b=u!==null?u.memoizedState:null;if(h=i.memoizedState,u===null)if(h===null)if(i.stateNode===null){e:{h=i.type,u=i.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Ro]||b[nn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(h),v.head.insertBefore(b,v.querySelector("head > title"))),on(b,h,u),b[nn]=i,Yt(b),h=b;break e;case"link":var _=ow("link","href",v).get(h+(u.href||""));if(_){for(var O=0;O<_.length;O++)if(b=_[O],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){_.splice(O,1);break t}}b=v.createElement(h),on(b,h,u),v.head.appendChild(b);break;case"meta":if(_=ow("meta","content",v).get(h+(u.content||""))){for(O=0;O<_.length;O++)if(b=_[O],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){_.splice(O,1);break t}}b=v.createElement(h),on(b,h,u),v.head.appendChild(b);break;default:throw Error(r(468,h))}b[nn]=i,Yt(b),h=b}i.stateNode=h}else lw(v,i.type,i.stateNode);else i.stateNode=aw(v,h,i.memoizedProps);else b!==h?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,h===null?lw(v,i.type,i.stateNode):aw(v,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Dp(i,i.memoizedProps,u.memoizedProps)}break;case 27:On(o,i),Mn(i),h&512&&(Pt||u===null||Dr(u,u.return)),u!==null&&h&4&&Dp(i,i.memoizedProps,u.memoizedProps);break;case 5:if(On(o,i),Mn(i),h&512&&(Pt||u===null||Dr(u,u.return)),i.flags&32){v=i.stateNode;try{oa(v,"")}catch(Se){gt(i,i.return,Se)}}h&4&&i.stateNode!=null&&(v=i.memoizedProps,Dp(i,v,u!==null?u.memoizedProps:v)),h&1024&&(Pp=!0);break;case 6:if(On(o,i),Mn(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,u=i.stateNode;try{u.nodeValue=h}catch(Se){gt(i,i.return,Se)}}break;case 3:if(qc=null,v=Er,Er=Bc(o.containerInfo),On(o,i),Er=v,Mn(i),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Pa(o.containerInfo)}catch(Se){gt(i,i.return,Se)}Pp&&(Pp=!1,lS(i));break;case 4:h=Er,Er=Bc(i.stateNode.containerInfo),On(o,i),Mn(i),Er=h;break;case 12:On(o,i),Mn(i);break;case 31:On(o,i),Mn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Rc(i,h)));break;case 13:On(o,i),Mn(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Ac=ye()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Rc(i,h)));break;case 22:v=i.memoizedState!==null;var U=u!==null&&u.memoizedState!==null,Y=ss,ie=Pt;if(ss=Y||v,Pt=ie||U,On(o,i),Pt=ie,ss=Y,Mn(i),h&8192)e:for(o=i.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||U||ss||Pt||Ri(i)),u=null,o=i;;){if(o.tag===5||o.tag===26){if(u===null){U=u=o;try{if(b=U.stateNode,v)_=b.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{O=U.stateNode;var le=U.memoizedProps.style,W=le!=null&&le.hasOwnProperty("display")?le.display:null;O.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Se){gt(U,U.return,Se)}}}else if(o.tag===6){if(u===null){U=o;try{U.stateNode.nodeValue=v?"":U.memoizedProps}catch(Se){gt(U,U.return,Se)}}}else if(o.tag===18){if(u===null){U=o;try{var re=U.stateNode;v?JS(re,!0):JS(U.stateNode,!1)}catch(Se){gt(U,U.return,Se)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=i.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,Rc(i,u))));break;case 19:On(o,i),Mn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Rc(i,h)));break;case 30:break;case 21:break;default:On(o,i),Mn(i)}}function Mn(i){var o=i.flags;if(o&2){try{for(var u,h=i.return;h!==null;){if(Wx(h)){u=h;break}h=h.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var v=u.stateNode,b=jp(i);kc(i,b,v);break;case 5:var _=u.stateNode;u.flags&32&&(oa(_,""),u.flags&=-33);var O=jp(i);kc(i,O,_);break;case 3:case 4:var U=u.stateNode.containerInfo,Y=jp(i);Lp(i,Y,U);break;default:throw Error(r(161))}}catch(ie){gt(i,i.return,ie)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function lS(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;lS(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function as(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)nS(i,o.alternate,o),o=o.sibling}function Ri(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Is(4,o,o.return),Ri(o);break;case 1:Dr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&Jx(o,o.return,u),Ri(o);break;case 27:ul(o.stateNode);case 26:case 5:Dr(o,o.return),Ri(o);break;case 22:o.memoizedState===null&&Ri(o);break;case 30:Ri(o);break;default:Ri(o)}i=i.sibling}}function os(i,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,v=i,b=o,_=b.flags;switch(b.tag){case 0:case 11:case 15:os(v,b,u),Wo(4,b);break;case 1:if(os(v,b,u),h=b,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Y){gt(h,h.return,Y)}if(h=b,v=h.updateQueue,v!==null){var O=h.stateNode;try{var U=v.shared.hiddenCallbacks;if(U!==null)for(v.shared.hiddenCallbacks=null,v=0;v<U.length;v++)$b(U[v],O)}catch(Y){gt(h,h.return,Y)}}u&&_&64&&Yx(b),el(b,b.return);break;case 27:eS(b);case 26:case 5:os(v,b,u),u&&h===null&&_&4&&Xx(b),el(b,b.return);break;case 12:os(v,b,u);break;case 31:os(v,b,u),u&&_&4&&iS(v,b);break;case 13:os(v,b,u),u&&_&4&&aS(v,b);break;case 22:b.memoizedState===null&&os(v,b,u),el(b,b.return);break;case 30:break;default:os(v,b,u)}o=o.sibling}}function $p(i,o){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&Fo(u))}function Fp(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Fo(i))}function kr(i,o,u,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)uS(i,o,u,h),o=o.sibling}function uS(i,o,u,h){var v=o.flags;switch(o.tag){case 0:case 11:case 15:kr(i,o,u,h),v&2048&&Wo(9,o);break;case 1:kr(i,o,u,h);break;case 3:kr(i,o,u,h),v&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Fo(i)));break;case 12:if(v&2048){kr(i,o,u,h),i=o.stateNode;try{var b=o.memoizedProps,_=b.id,O=b.onPostCommit;typeof O=="function"&&O(_,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){gt(o,o.return,U)}}else kr(i,o,u,h);break;case 31:kr(i,o,u,h);break;case 13:kr(i,o,u,h);break;case 23:break;case 22:b=o.stateNode,_=o.alternate,o.memoizedState!==null?b._visibility&2?kr(i,o,u,h):tl(i,o):b._visibility&2?kr(i,o,u,h):(b._visibility|=2,Ra(i,o,u,h,(o.subtreeFlags&10256)!==0||!1)),v&2048&&$p(_,o);break;case 24:kr(i,o,u,h),v&2048&&Fp(o.alternate,o);break;default:kr(i,o,u,h)}}function Ra(i,o,u,h,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=i,_=o,O=u,U=h,Y=_.flags;switch(_.tag){case 0:case 11:case 15:Ra(b,_,O,U,v),Wo(8,_);break;case 23:break;case 22:var ie=_.stateNode;_.memoizedState!==null?ie._visibility&2?Ra(b,_,O,U,v):tl(b,_):(ie._visibility|=2,Ra(b,_,O,U,v)),v&&Y&2048&&$p(_.alternate,_);break;case 24:Ra(b,_,O,U,v),v&&Y&2048&&Fp(_.alternate,_);break;default:Ra(b,_,O,U,v)}o=o.sibling}}function tl(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=i,h=o,v=h.flags;switch(h.tag){case 22:tl(u,h),v&2048&&$p(h.alternate,h);break;case 24:tl(u,h),v&2048&&Fp(h.alternate,h);break;default:tl(u,h)}o=o.sibling}}var nl=8192;function Ta(i,o,u){if(i.subtreeFlags&nl)for(i=i.child;i!==null;)cS(i,o,u),i=i.sibling}function cS(i,o,u){switch(i.tag){case 26:Ta(i,o,u),i.flags&nl&&i.memoizedState!==null&&V2(u,Er,i.memoizedState,i.memoizedProps);break;case 5:Ta(i,o,u);break;case 3:case 4:var h=Er;Er=Bc(i.stateNode.containerInfo),Ta(i,o,u),Er=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=nl,nl=16777216,Ta(i,o,u),nl=h):Ta(i,o,u));break;default:Ta(i,o,u)}}function fS(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function rl(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];Jt=h,hS(h,i)}fS(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)dS(i),i=i.sibling}function dS(i){switch(i.tag){case 0:case 11:case 15:rl(i),i.flags&2048&&Is(9,i,i.return);break;case 3:rl(i);break;case 12:rl(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Tc(i)):rl(i);break;default:rl(i)}}function Tc(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];Jt=h,hS(h,i)}fS(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Is(8,o,o.return),Tc(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Tc(o));break;default:Tc(o)}i=i.sibling}}function hS(i,o){for(;Jt!==null;){var u=Jt;switch(u.tag){case 0:case 11:case 15:Is(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Fo(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Jt=h;else e:for(u=i;Jt!==null;){h=Jt;var v=h.sibling,b=h.return;if(rS(h),h===u){Jt=null;break e}if(v!==null){v.return=b,Jt=v;break e}Jt=b}}}var a2={getCacheForType:function(i){var o=sn(Dt),u=o.data.get(i);return u===void 0&&(u=i(),o.data.set(i,u)),u},cacheSignal:function(){return sn(Dt).controller.signal}},o2=typeof WeakMap=="function"?WeakMap:Map,pt=0,_t=null,Xe=null,nt=0,mt=0,Hn=null,Ns=!1,Aa=!1,Bp=!1,ls=0,It=0,zs=0,Ti=0,Up=0,Vn=0,Oa=0,sl=null,In=null,qp=!1,Ac=0,pS=0,Oc=1/0,Mc=null,Ds=null,Ut=0,js=null,Ma=null,us=0,Hp=0,Vp=null,mS=null,il=0,Kp=null;function Kn(){return(pt&2)!==0&&nt!==0?nt&-nt:$.T!==null?Xp():Mv()}function gS(){if(Vn===0)if((nt&536870912)===0||at){var i=$u;$u<<=1,($u&3932160)===0&&($u=262144),Vn=i}else Vn=536870912;return i=Un.current,i!==null&&(i.flags|=32),Vn}function Nn(i,o,u){(i===_t&&(mt===2||mt===9)||i.cancelPendingCommit!==null)&&(Ia(i,0),Ls(i,nt,Vn,!1)),ko(i,u),((pt&2)===0||i!==_t)&&(i===_t&&((pt&2)===0&&(Ti|=u),It===4&&Ls(i,nt,Vn,!1)),jr(i))}function yS(i,o,u){if((pt&6)!==0)throw Error(r(327));var h=!u&&(o&127)===0&&(o&i.expiredLanes)===0||Eo(i,o),v=h?c2(i,o):Qp(i,o,!0),b=h;do{if(v===0){Aa&&!h&&Ls(i,o,0,!1);break}else{if(u=i.current.alternate,b&&!l2(u)){v=Qp(i,o,!1),b=!1;continue}if(v===2){if(b=o,i.errorRecoveryDisabledLanes&b)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){o=_;e:{var O=i;v=sl;var U=O.current.memoizedState.isDehydrated;if(U&&(Ia(O,_).flags|=256),_=Qp(O,_,!1),_!==2){if(Bp&&!U){O.errorRecoveryDisabledLanes|=b,Ti|=b,v=4;break e}b=In,In=v,b!==null&&(In===null?In=b:In.push.apply(In,b))}v=_}if(b=!1,v!==2)continue}}if(v===1){Ia(i,0),Ls(i,o,0,!0);break}e:{switch(h=i,b=v,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ls(h,o,Vn,!Ns);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(v=Ac+300-ye(),10<v)){if(Ls(h,o,Vn,!Ns),Bu(h,0,!0)!==0)break e;us=o,h.timeoutHandle=QS(vS.bind(null,h,u,In,Mc,qp,o,Vn,Ti,Oa,Ns,b,"Throttled",-0,0),v);break e}vS(h,u,In,Mc,qp,o,Vn,Ti,Oa,Ns,b,null,-0,0)}}break}while(!0);jr(i)}function vS(i,o,u,h,v,b,_,O,U,Y,ie,le,W,re){if(i.timeoutHandle=-1,le=o.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qr},cS(o,b,le);var Se=(b&62914560)===b?Ac-ye():(b&4194048)===b?pS-ye():0;if(Se=K2(le,Se),Se!==null){us=b,i.cancelPendingCommit=Se(kS.bind(null,i,o,b,u,h,v,_,O,U,ie,le,null,W,re)),Ls(i,b,_,!Y);return}}kS(i,o,b,u,h,v,_,O,U)}function l2(i){for(var o=i;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var v=u[h],b=v.getSnapshot;v=v.value;try{if(!Fn(b(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ls(i,o,u,h){o&=~Up,o&=~Ti,i.suspendedLanes|=o,i.pingedLanes&=~o,h&&(i.warmLanes|=o),h=i.expirationTimes;for(var v=o;0<v;){var b=31-wt(v),_=1<<b;h[b]=-1,v&=~_}u!==0&&Tv(i,u,o)}function Ic(){return(pt&6)===0?(al(0),!1):!0}function Gp(){if(Xe!==null){if(mt===0)var i=Xe.return;else i=Xe,Xr=bi=null,up(i),wa=null,Uo=0,i=Xe;for(;i!==null;)Zx(i.alternate,i),i=i.return;Xe=null}}function Ia(i,o){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,T2(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),us=0,Gp(),_t=i,Xe=u=Yr(i.current,null),nt=o,mt=0,Hn=null,Ns=!1,Aa=Eo(i,o),Bp=!1,Oa=Vn=Up=Ti=zs=It=0,In=sl=null,qp=!1,(o&8)!==0&&(o|=o&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=o;0<h;){var v=31-wt(h),b=1<<v;o|=i[v],h&=~b}return ls=o,Wu(),u}function bS(i,o){Ve=null,$.H=Yo,o===Sa||o===oc?(o=Db(),mt=3):o===Jh?(o=Db(),mt=4):mt=o===Ep?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Hn=o,Xe===null&&(It=1,Sc(i,lr(o,i.current)))}function xS(){var i=Un.current;return i===null?!0:(nt&4194048)===nt?dr===null:(nt&62914560)===nt||(nt&536870912)!==0?i===dr:!1}function SS(){var i=$.H;return $.H=Yo,i===null?Yo:i}function wS(){var i=$.A;return $.A=a2,i}function Nc(){It=4,Ns||(nt&4194048)!==nt&&Un.current!==null||(Aa=!0),(zs&134217727)===0&&(Ti&134217727)===0||_t===null||Ls(_t,nt,Vn,!1)}function Qp(i,o,u){var h=pt;pt|=2;var v=SS(),b=wS();(_t!==i||nt!==o)&&(Mc=null,Ia(i,o)),o=!1;var _=It;e:do try{if(mt!==0&&Xe!==null){var O=Xe,U=Hn;switch(mt){case 8:Gp(),_=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(o=!0);var Y=mt;if(mt=0,Hn=null,Na(i,O,U,Y),u&&Aa){_=0;break e}break;default:Y=mt,mt=0,Hn=null,Na(i,O,U,Y)}}u2(),_=It;break}catch(ie){bS(i,ie)}while(!0);return o&&i.shellSuspendCounter++,Xr=bi=null,pt=h,$.H=v,$.A=b,Xe===null&&(_t=null,nt=0,Wu()),_}function u2(){for(;Xe!==null;)_S(Xe)}function c2(i,o){var u=pt;pt|=2;var h=SS(),v=wS();_t!==i||nt!==o?(Mc=null,Oc=ye()+500,Ia(i,o)):Aa=Eo(i,o);e:do try{if(mt!==0&&Xe!==null){o=Xe;var b=Hn;t:switch(mt){case 1:mt=0,Hn=null,Na(i,o,b,1);break;case 2:case 9:if(Nb(b)){mt=0,Hn=null,CS(o);break}o=function(){mt!==2&&mt!==9||_t!==i||(mt=7),jr(i)},b.then(o,o);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Nb(b)?(mt=0,Hn=null,CS(o)):(mt=0,Hn=null,Na(i,o,b,7));break;case 5:var _=null;switch(Xe.tag){case 26:_=Xe.memoizedState;case 5:case 27:var O=Xe;if(_?uw(_):O.stateNode.complete){mt=0,Hn=null;var U=O.sibling;if(U!==null)Xe=U;else{var Y=O.return;Y!==null?(Xe=Y,zc(Y)):Xe=null}break t}}mt=0,Hn=null,Na(i,o,b,5);break;case 6:mt=0,Hn=null,Na(i,o,b,6);break;case 8:Gp(),It=6;break e;default:throw Error(r(462))}}f2();break}catch(ie){bS(i,ie)}while(!0);return Xr=bi=null,$.H=h,$.A=v,pt=u,Xe!==null?0:(_t=null,nt=0,Wu(),It)}function f2(){for(;Xe!==null&&!je();)_S(Xe)}function _S(i){var o=Gx(i.alternate,i,ls);i.memoizedProps=i.pendingProps,o===null?zc(i):Xe=o}function CS(i){var o=i,u=o.alternate;switch(o.tag){case 15:case 0:o=Bx(u,o,o.pendingProps,o.type,void 0,nt);break;case 11:o=Bx(u,o,o.pendingProps,o.type.render,o.ref,nt);break;case 5:up(o);default:Zx(u,o),o=Xe=wb(o,ls),o=Gx(u,o,ls)}i.memoizedProps=i.pendingProps,o===null?zc(i):Xe=o}function Na(i,o,u,h){Xr=bi=null,up(o),wa=null,Uo=0;var v=o.return;try{if(WO(i,v,o,u,nt)){It=1,Sc(i,lr(u,i.current)),Xe=null;return}}catch(b){if(v!==null)throw Xe=v,b;It=1,Sc(i,lr(u,i.current)),Xe=null;return}o.flags&32768?(at||h===1?i=!0:Aa||(nt&536870912)!==0?i=!1:(Ns=i=!0,(h===2||h===9||h===3||h===6)&&(h=Un.current,h!==null&&h.tag===13&&(h.flags|=16384))),ES(o,i)):zc(o)}function zc(i){var o=i;do{if((o.flags&32768)!==0){ES(o,Ns);return}i=o.return;var u=n2(o.alternate,o,ls);if(u!==null){Xe=u;return}if(o=o.sibling,o!==null){Xe=o;return}Xe=o=i}while(o!==null);It===0&&(It=5)}function ES(i,o){do{var u=r2(i.alternate,i);if(u!==null){u.flags&=32767,Xe=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(i=i.sibling,i!==null)){Xe=i;return}Xe=i=u}while(i!==null);It=6,Xe=null}function kS(i,o,u,h,v,b,_,O,U){i.cancelPendingCommit=null;do Dc();while(Ut!==0);if((pt&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=jh,HA(i,u,b,_,O,U),i===_t&&(Xe=_t=null,nt=0),Ma=o,js=i,us=u,Hp=b,Vp=v,mS=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,m2(Ce,function(){return MS(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=$.T,$.T=null,v=J.p,J.p=2,_=pt,pt|=4;try{s2(i,o,u)}finally{pt=_,J.p=v,$.T=h}}Ut=1,RS(),TS(),AS()}}function RS(){if(Ut===1){Ut=0;var i=js,o=Ma,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=$.T,$.T=null;var h=J.p;J.p=2;var v=pt;pt|=4;try{oS(o,i);var b=am,_=hb(i.containerInfo),O=b.focusedElem,U=b.selectionRange;if(_!==O&&O&&O.ownerDocument&&db(O.ownerDocument.documentElement,O)){if(U!==null&&Mh(O)){var Y=U.start,ie=U.end;if(ie===void 0&&(ie=Y),"selectionStart"in O)O.selectionStart=Y,O.selectionEnd=Math.min(ie,O.value.length);else{var le=O.ownerDocument||document,W=le&&le.defaultView||window;if(W.getSelection){var re=W.getSelection(),Se=O.textContent.length,De=Math.min(U.start,Se),St=U.end===void 0?De:Math.min(U.end,Se);!re.extend&&De>St&&(_=St,St=De,De=_);var K=fb(O,De),H=fb(O,St);if(K&&H&&(re.rangeCount!==1||re.anchorNode!==K.node||re.anchorOffset!==K.offset||re.focusNode!==H.node||re.focusOffset!==H.offset)){var Z=le.createRange();Z.setStart(K.node,K.offset),re.removeAllRanges(),De>St?(re.addRange(Z),re.extend(H.node,H.offset)):(Z.setEnd(H.node,H.offset),re.addRange(Z))}}}}for(le=[],re=O;re=re.parentNode;)re.nodeType===1&&le.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<le.length;O++){var oe=le[O];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Gc=!!im,am=im=null}finally{pt=v,J.p=h,$.T=u}}i.current=o,Ut=2}}function TS(){if(Ut===2){Ut=0;var i=js,o=Ma,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=$.T,$.T=null;var h=J.p;J.p=2;var v=pt;pt|=4;try{nS(i,o.alternate,o)}finally{pt=v,J.p=h,$.T=u}}Ut=3}}function AS(){if(Ut===4||Ut===3){Ut=0,be();var i=js,o=Ma,u=us,h=mS;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ut=5:(Ut=0,Ma=js=null,OS(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(Ds=null),dh(u),o=o.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(ut,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=$.T,v=J.p,J.p=2,$.T=null;try{for(var b=i.onRecoverableError,_=0;_<h.length;_++){var O=h[_];b(O.value,{componentStack:O.stack})}}finally{$.T=o,J.p=v}}(us&3)!==0&&Dc(),jr(i),v=i.pendingLanes,(u&261930)!==0&&(v&42)!==0?i===Kp?il++:(il=0,Kp=i):il=0,al(0)}}function OS(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Fo(o)))}function Dc(){return RS(),TS(),AS(),MS()}function MS(){if(Ut!==5)return!1;var i=js,o=Hp;Hp=0;var u=dh(us),h=$.T,v=J.p;try{J.p=32>u?32:u,$.T=null,u=Vp,Vp=null;var b=js,_=us;if(Ut=0,Ma=js=null,us=0,(pt&6)!==0)throw Error(r(331));var O=pt;if(pt|=4,dS(b.current),uS(b,b.current,_,u),pt=O,al(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(ut,b)}catch{}return!0}finally{J.p=v,$.T=h,OS(i,o)}}function IS(i,o,u){o=lr(u,o),o=Cp(i.stateNode,o,2),i=As(i,o,2),i!==null&&(ko(i,2),jr(i))}function gt(i,o,u){if(i.tag===3)IS(i,i,u);else for(;o!==null;){if(o.tag===3){IS(o,i,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ds===null||!Ds.has(h))){i=lr(u,i),u=Nx(2),h=As(o,u,2),h!==null&&(zx(u,h,o,i),ko(h,2),jr(h));break}}o=o.return}}function Zp(i,o,u){var h=i.pingCache;if(h===null){h=i.pingCache=new o2;var v=new Set;h.set(o,v)}else v=h.get(o),v===void 0&&(v=new Set,h.set(o,v));v.has(u)||(Bp=!0,v.add(u),i=d2.bind(null,i,o,u),o.then(i,i))}function d2(i,o,u){var h=i.pingCache;h!==null&&h.delete(o),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,_t===i&&(nt&u)===u&&(It===4||It===3&&(nt&62914560)===nt&&300>ye()-Ac?(pt&2)===0&&Ia(i,0):Up|=u,Oa===nt&&(Oa=0)),jr(i)}function NS(i,o){o===0&&(o=Rv()),i=gi(i,o),i!==null&&(ko(i,o),jr(i))}function h2(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),NS(i,u)}function p2(i,o){var u=0;switch(i.tag){case 31:case 13:var h=i.stateNode,v=i.memoizedState;v!==null&&(u=v.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),NS(i,u)}function m2(i,o){return Me(i,o)}var jc=null,za=null,Yp=!1,Lc=!1,Jp=!1,Ps=0;function jr(i){i!==za&&i.next===null&&(za===null?jc=za=i:za=za.next=i),Lc=!0,Yp||(Yp=!0,y2())}function al(i,o){if(!Jp&&Lc){Jp=!0;do for(var u=!1,h=jc;h!==null;){if(i!==0){var v=h.pendingLanes;if(v===0)var b=0;else{var _=h.suspendedLanes,O=h.pingedLanes;b=(1<<31-wt(42|i)+1)-1,b&=v&~(_&~O),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,LS(h,b))}else b=nt,b=Bu(h,h===_t?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||Eo(h,b)||(u=!0,LS(h,b));h=h.next}while(u);Jp=!1}}function g2(){zS()}function zS(){Lc=Yp=!1;var i=0;Ps!==0&&R2()&&(i=Ps);for(var o=ye(),u=null,h=jc;h!==null;){var v=h.next,b=DS(h,o);b===0?(h.next=null,u===null?jc=v:u.next=v,v===null&&(za=u)):(u=h,(i!==0||(b&3)!==0)&&(Lc=!0)),h=v}Ut!==0&&Ut!==5||al(i),Ps!==0&&(Ps=0)}function DS(i,o){for(var u=i.suspendedLanes,h=i.pingedLanes,v=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var _=31-wt(b),O=1<<_,U=v[_];U===-1?((O&u)===0||(O&h)!==0)&&(v[_]=qA(O,o)):U<=o&&(i.expiredLanes|=O),b&=~O}if(o=_t,u=nt,u=Bu(i,i===o?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,u===0||i===o&&(mt===2||mt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&ge(h),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||Eo(i,u)){if(o=u&-u,o===i.callbackPriority)return o;switch(h!==null&&ge(h),dh(u)){case 2:case 8:u=de;break;case 32:u=Ce;break;case 268435456:u=xe;break;default:u=Ce}return h=jS.bind(null,i),u=Me(u,h),i.callbackPriority=o,i.callbackNode=u,o}return h!==null&&h!==null&&ge(h),i.callbackPriority=2,i.callbackNode=null,2}function jS(i,o){if(Ut!==0&&Ut!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(Dc()&&i.callbackNode!==u)return null;var h=nt;return h=Bu(i,i===_t?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(yS(i,h,o),DS(i,ye()),i.callbackNode!=null&&i.callbackNode===u?jS.bind(null,i):null)}function LS(i,o){if(Dc())return null;yS(i,o,!0)}function y2(){A2(function(){(pt&6)!==0?Me(ne,g2):zS()})}function Xp(){if(Ps===0){var i=ba;i===0&&(i=Pu,Pu<<=1,(Pu&261888)===0&&(Pu=256)),Ps=i}return Ps}function PS(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Vu(""+i)}function $S(i,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,i.id&&u.setAttribute("form",i.id),o.parentNode.insertBefore(u,o),i=new FormData(i),u.parentNode.removeChild(u),i}function v2(i,o,u,h,v){if(o==="submit"&&u&&u.stateNode===v){var b=PS((v[Rn]||null).action),_=h.submitter;_&&(o=(o=_[Rn]||null)?PS(o.formAction):_.getAttribute("formAction"),o!==null&&(b=o,_=null));var O=new Zu("action","action",null,h,v);i.push({event:O,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ps!==0){var U=_?$S(v,_):new FormData(v);vp(u,{pending:!0,data:U,method:v.method,action:b},null,U)}}else typeof b=="function"&&(O.preventDefault(),U=_?$S(v,_):new FormData(v),vp(u,{pending:!0,data:U,method:v.method,action:b},b,U))},currentTarget:v}]})}}for(var Wp=0;Wp<Dh.length;Wp++){var em=Dh[Wp],b2=em.toLowerCase(),x2=em[0].toUpperCase()+em.slice(1);Cr(b2,"on"+x2)}Cr(gb,"onAnimationEnd"),Cr(yb,"onAnimationIteration"),Cr(vb,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(jO,"onTransitionRun"),Cr(LO,"onTransitionStart"),Cr(PO,"onTransitionCancel"),Cr(bb,"onTransitionEnd"),ia("onMouseEnter",["mouseout","mouseover"]),ia("onMouseLeave",["mouseout","mouseover"]),ia("onPointerEnter",["pointerout","pointerover"]),ia("onPointerLeave",["pointerout","pointerover"]),di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),di("onBeforeInput",["compositionend","keypress","textInput","paste"]),di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ol));function FS(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var h=i[u],v=h.event;h=h.listeners;e:{var b=void 0;if(o)for(var _=h.length-1;0<=_;_--){var O=h[_],U=O.instance,Y=O.currentTarget;if(O=O.listener,U!==b&&v.isPropagationStopped())break e;b=O,v.currentTarget=Y;try{b(v)}catch(ie){Xu(ie)}v.currentTarget=null,b=U}else for(_=0;_<h.length;_++){if(O=h[_],U=O.instance,Y=O.currentTarget,O=O.listener,U!==b&&v.isPropagationStopped())break e;b=O,v.currentTarget=Y;try{b(v)}catch(ie){Xu(ie)}v.currentTarget=null,b=U}}}}function We(i,o){var u=o[hh];u===void 0&&(u=o[hh]=new Set);var h=i+"__bubble";u.has(h)||(BS(o,i,2,!1),u.add(h))}function tm(i,o,u){var h=0;o&&(h|=4),BS(u,i,h,o)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function nm(i){if(!i[Pc]){i[Pc]=!0,zv.forEach(function(u){u!=="selectionchange"&&(S2.has(u)||tm(u,!1,i),tm(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Pc]||(o[Pc]=!0,tm("selectionchange",!1,o))}}function BS(i,o,u,h){switch(gw(o)){case 2:var v=Z2;break;case 8:v=Y2;break;default:v=ym}u=v.bind(null,o,u,i),v=void 0,!wh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),h?v!==void 0?i.addEventListener(o,u,{capture:!0,passive:v}):i.addEventListener(o,u,!0):v!==void 0?i.addEventListener(o,u,{passive:v}):i.addEventListener(o,u,!1)}function rm(i,o,u,h,v){var b=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var O=h.stateNode.containerInfo;if(O===v)break;if(_===4)for(_=h.return;_!==null;){var U=_.tag;if((U===3||U===4)&&_.stateNode.containerInfo===v)return;_=_.return}for(;O!==null;){if(_=na(O),_===null)return;if(U=_.tag,U===5||U===6||U===26||U===27){h=b=_;continue e}O=O.parentNode}}h=h.return}Kv(function(){var Y=b,ie=xh(u),le=[];e:{var W=xb.get(i);if(W!==void 0){var re=Zu,Se=i;switch(i){case"keypress":if(Gu(u)===0)break e;case"keydown":case"keyup":re=pO;break;case"focusin":Se="focus",re=kh;break;case"focusout":Se="blur",re=kh;break;case"beforeblur":case"afterblur":re=kh;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Zv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=nO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=yO;break;case gb:case yb:case vb:re=iO;break;case bb:re=bO;break;case"scroll":case"scrollend":re=eO;break;case"wheel":re=SO;break;case"copy":case"cut":case"paste":re=oO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Jv;break;case"toggle":case"beforetoggle":re=_O}var De=(o&4)!==0,St=!De&&(i==="scroll"||i==="scrollend"),K=De?W!==null?W+"Capture":null:W;De=[];for(var H=Y,Z;H!==null;){var oe=H;if(Z=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Z===null||K===null||(oe=Ao(H,K),oe!=null&&De.push(ll(H,oe,Z))),St)break;H=H.return}0<De.length&&(W=new re(W,Se,null,u,ie),le.push({event:W,listeners:De}))}}if((o&7)===0){e:{if(W=i==="mouseover"||i==="pointerover",re=i==="mouseout"||i==="pointerout",W&&u!==bh&&(Se=u.relatedTarget||u.fromElement)&&(na(Se)||Se[ta]))break e;if((re||W)&&(W=ie.window===ie?ie:(W=ie.ownerDocument)?W.defaultView||W.parentWindow:window,re?(Se=u.relatedTarget||u.toElement,re=Y,Se=Se?na(Se):null,Se!==null&&(St=a(Se),De=Se.tag,Se!==St||De!==5&&De!==27&&De!==6)&&(Se=null)):(re=null,Se=Y),re!==Se)){if(De=Zv,oe="onMouseLeave",K="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(De=Jv,oe="onPointerLeave",K="onPointerEnter",H="pointer"),St=re==null?W:To(re),Z=Se==null?W:To(Se),W=new De(oe,H+"leave",re,u,ie),W.target=St,W.relatedTarget=Z,oe=null,na(ie)===Y&&(De=new De(K,H+"enter",Se,u,ie),De.target=Z,De.relatedTarget=St,oe=De),St=oe,re&&Se)t:{for(De=w2,K=re,H=Se,Z=0,oe=K;oe;oe=De(oe))Z++;oe=0;for(var Ie=H;Ie;Ie=De(Ie))oe++;for(;0<Z-oe;)K=De(K),Z--;for(;0<oe-Z;)H=De(H),oe--;for(;Z--;){if(K===H||H!==null&&K===H.alternate){De=K;break t}K=De(K),H=De(H)}De=null}else De=null;re!==null&&US(le,W,re,De,!1),Se!==null&&St!==null&&US(le,St,Se,De,!0)}}e:{if(W=Y?To(Y):window,re=W.nodeName&&W.nodeName.toLowerCase(),re==="select"||re==="input"&&W.type==="file")var ft=ib;else if(rb(W))if(ab)ft=NO;else{ft=MO;var Re=OO}else re=W.nodeName,!re||re.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Y&&vh(Y.elementType)&&(ft=ib):ft=IO;if(ft&&(ft=ft(i,Y))){sb(le,ft,u,ie);break e}Re&&Re(i,W,Y),i==="focusout"&&Y&&W.type==="number"&&Y.memoizedProps.value!=null&&yh(W,"number",W.value)}switch(Re=Y?To(Y):window,i){case"focusin":(rb(Re)||Re.contentEditable==="true")&&(fa=Re,Ih=Y,Lo=null);break;case"focusout":Lo=Ih=fa=null;break;case"mousedown":Nh=!0;break;case"contextmenu":case"mouseup":case"dragend":Nh=!1,pb(le,u,ie);break;case"selectionchange":if(DO)break;case"keydown":case"keyup":pb(le,u,ie)}var Ke;if(Th)e:{switch(i){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else ca?tb(i,u)&&(rt="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(rt="onCompositionStart");rt&&(Xv&&u.locale!=="ko"&&(ca||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&ca&&(Ke=Gv()):(ws=ie,_h="value"in ws?ws.value:ws.textContent,ca=!0)),Re=$c(Y,rt),0<Re.length&&(rt=new Yv(rt,i,null,u,ie),le.push({event:rt,listeners:Re}),Ke?rt.data=Ke:(Ke=nb(u),Ke!==null&&(rt.data=Ke)))),(Ke=EO?kO(i,u):RO(i,u))&&(rt=$c(Y,"onBeforeInput"),0<rt.length&&(Re=new Yv("onBeforeInput","beforeinput",null,u,ie),le.push({event:Re,listeners:rt}),Re.data=Ke)),v2(le,i,Y,u,ie)}FS(le,o)})}function ll(i,o,u){return{instance:i,listener:o,currentTarget:u}}function $c(i,o){for(var u=o+"Capture",h=[];i!==null;){var v=i,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=Ao(i,u),v!=null&&h.unshift(ll(i,v,b)),v=Ao(i,o),v!=null&&h.push(ll(i,v,b))),i.tag===3)return h;i=i.return}return[]}function w2(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function US(i,o,u,h,v){for(var b=o._reactName,_=[];u!==null&&u!==h;){var O=u,U=O.alternate,Y=O.stateNode;if(O=O.tag,U!==null&&U===h)break;O!==5&&O!==26&&O!==27||Y===null||(U=Y,v?(Y=Ao(u,b),Y!=null&&_.unshift(ll(u,Y,U))):v||(Y=Ao(u,b),Y!=null&&_.push(ll(u,Y,U)))),u=u.return}_.length!==0&&i.push({event:o,listeners:_})}var _2=/\r\n?/g,C2=/\u0000|\uFFFD/g;function qS(i){return(typeof i=="string"?i:""+i).replace(_2,`
`).replace(C2,"")}function HS(i,o){return o=qS(o),qS(i)===o}function xt(i,o,u,h,v,b){switch(u){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||oa(i,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&oa(i,""+h);break;case"className":qu(i,"class",h);break;case"tabIndex":qu(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":qu(i,u,h);break;case"style":Hv(i,h,b);break;case"data":if(o!=="object"){qu(i,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||u!=="href")){i.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(u);break}h=Vu(""+h),i.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(o!=="input"&&xt(i,o,"name",v.name,v,null),xt(i,o,"formEncType",v.formEncType,v,null),xt(i,o,"formMethod",v.formMethod,v,null),xt(i,o,"formTarget",v.formTarget,v,null)):(xt(i,o,"encType",v.encType,v,null),xt(i,o,"method",v.method,v,null),xt(i,o,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(u);break}h=Vu(""+h),i.setAttribute(u,h);break;case"onClick":h!=null&&(i.onclick=Qr);break;case"onScroll":h!=null&&We("scroll",i);break;case"onScrollEnd":h!=null&&We("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}u=Vu(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(u,""+h):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":h===!0?i.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(u,h):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(u,h):i.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(u):i.setAttribute(u,h);break;case"popover":We("beforetoggle",i),We("toggle",i),Uu(i,"popover",h);break;case"xlinkActuate":Gr(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Gr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Gr(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Gr(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Gr(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Gr(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Gr(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Gr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Gr(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Uu(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=XA.get(u)||u,Uu(i,u,h))}}function sm(i,o,u,h,v,b){switch(u){case"style":Hv(i,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof h=="string"?oa(i,h):(typeof h=="number"||typeof h=="bigint")&&oa(i,""+h);break;case"onScroll":h!=null&&We("scroll",i);break;case"onScrollEnd":h!=null&&We("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dv.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),b=i[Rn]||null,b=b!=null?b[u]:null,typeof b=="function"&&i.removeEventListener(o,b,v),typeof h=="function")){typeof b!="function"&&b!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(o,h,v);break e}u in i?i[u]=h:h===!0?i.setAttribute(u,""):Uu(i,u,h)}}}function on(i,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",i),We("load",i);var h=!1,v=!1,b;for(b in u)if(u.hasOwnProperty(b)){var _=u[b];if(_!=null)switch(b){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:xt(i,o,b,_,u,null)}}v&&xt(i,o,"srcSet",u.srcSet,u,null),h&&xt(i,o,"src",u.src,u,null);return;case"input":We("invalid",i);var O=b=_=v=null,U=null,Y=null;for(h in u)if(u.hasOwnProperty(h)){var ie=u[h];if(ie!=null)switch(h){case"name":v=ie;break;case"type":_=ie;break;case"checked":U=ie;break;case"defaultChecked":Y=ie;break;case"value":b=ie;break;case"defaultValue":O=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,o));break;default:xt(i,o,h,ie,u,null)}}Fv(i,b,O,U,Y,_,v,!1);return;case"select":We("invalid",i),h=_=b=null;for(v in u)if(u.hasOwnProperty(v)&&(O=u[v],O!=null))switch(v){case"value":b=O;break;case"defaultValue":_=O;break;case"multiple":h=O;default:xt(i,o,v,O,u,null)}o=b,u=_,i.multiple=!!h,o!=null?aa(i,!!h,o,!1):u!=null&&aa(i,!!h,u,!0);return;case"textarea":We("invalid",i),b=v=h=null;for(_ in u)if(u.hasOwnProperty(_)&&(O=u[_],O!=null))switch(_){case"value":h=O;break;case"defaultValue":v=O;break;case"children":b=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:xt(i,o,_,O,u,null)}Uv(i,h,v,b);return;case"option":for(U in u)u.hasOwnProperty(U)&&(h=u[U],h!=null)&&(U==="selected"?i.selected=h&&typeof h!="function"&&typeof h!="symbol":xt(i,o,U,h,u,null));return;case"dialog":We("beforetoggle",i),We("toggle",i),We("cancel",i),We("close",i);break;case"iframe":case"object":We("load",i);break;case"video":case"audio":for(h=0;h<ol.length;h++)We(ol[h],i);break;case"image":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"embed":case"source":case"link":We("error",i),We("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in u)if(u.hasOwnProperty(Y)&&(h=u[Y],h!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:xt(i,o,Y,h,u,null)}return;default:if(vh(o)){for(ie in u)u.hasOwnProperty(ie)&&(h=u[ie],h!==void 0&&sm(i,o,ie,h,u,void 0));return}}for(O in u)u.hasOwnProperty(O)&&(h=u[O],h!=null&&xt(i,o,O,h,u,null))}function E2(i,o,u,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,_=null,O=null,U=null,Y=null,ie=null;for(re in u){var le=u[re];if(u.hasOwnProperty(re)&&le!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":U=le;default:h.hasOwnProperty(re)||xt(i,o,re,null,h,le)}}for(var W in h){var re=h[W];if(le=u[W],h.hasOwnProperty(W)&&(re!=null||le!=null))switch(W){case"type":b=re;break;case"name":v=re;break;case"checked":Y=re;break;case"defaultChecked":ie=re;break;case"value":_=re;break;case"defaultValue":O=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,o));break;default:re!==le&&xt(i,o,W,re,h,le)}}gh(i,_,O,U,Y,ie,b,v);return;case"select":re=_=O=W=null;for(b in u)if(U=u[b],u.hasOwnProperty(b)&&U!=null)switch(b){case"value":break;case"multiple":re=U;default:h.hasOwnProperty(b)||xt(i,o,b,null,h,U)}for(v in h)if(b=h[v],U=u[v],h.hasOwnProperty(v)&&(b!=null||U!=null))switch(v){case"value":W=b;break;case"defaultValue":O=b;break;case"multiple":_=b;default:b!==U&&xt(i,o,v,b,h,U)}o=O,u=_,h=re,W!=null?aa(i,!!u,W,!1):!!h!=!!u&&(o!=null?aa(i,!!u,o,!0):aa(i,!!u,u?[]:"",!1));return;case"textarea":re=W=null;for(O in u)if(v=u[O],u.hasOwnProperty(O)&&v!=null&&!h.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:xt(i,o,O,null,h,v)}for(_ in h)if(v=h[_],b=u[_],h.hasOwnProperty(_)&&(v!=null||b!=null))switch(_){case"value":W=v;break;case"defaultValue":re=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==b&&xt(i,o,_,v,h,b)}Bv(i,W,re);return;case"option":for(var Se in u)W=u[Se],u.hasOwnProperty(Se)&&W!=null&&!h.hasOwnProperty(Se)&&(Se==="selected"?i.selected=!1:xt(i,o,Se,null,h,W));for(U in h)W=h[U],re=u[U],h.hasOwnProperty(U)&&W!==re&&(W!=null||re!=null)&&(U==="selected"?i.selected=W&&typeof W!="function"&&typeof W!="symbol":xt(i,o,U,W,h,re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in u)W=u[De],u.hasOwnProperty(De)&&W!=null&&!h.hasOwnProperty(De)&&xt(i,o,De,null,h,W);for(Y in h)if(W=h[Y],re=u[Y],h.hasOwnProperty(Y)&&W!==re&&(W!=null||re!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,o));break;default:xt(i,o,Y,W,h,re)}return;default:if(vh(o)){for(var St in u)W=u[St],u.hasOwnProperty(St)&&W!==void 0&&!h.hasOwnProperty(St)&&sm(i,o,St,void 0,h,W);for(ie in h)W=h[ie],re=u[ie],!h.hasOwnProperty(ie)||W===re||W===void 0&&re===void 0||sm(i,o,ie,W,h,re);return}}for(var K in u)W=u[K],u.hasOwnProperty(K)&&W!=null&&!h.hasOwnProperty(K)&&xt(i,o,K,null,h,W);for(le in h)W=h[le],re=u[le],!h.hasOwnProperty(le)||W===re||W==null&&re==null||xt(i,o,le,W,h,re)}function VS(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function k2(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var v=u[h],b=v.transferSize,_=v.initiatorType,O=v.duration;if(b&&O&&VS(_)){for(_=0,O=v.responseEnd,h+=1;h<u.length;h++){var U=u[h],Y=U.startTime;if(Y>O)break;var ie=U.transferSize,le=U.initiatorType;ie&&VS(le)&&(U=U.responseEnd,_+=ie*(U<O?1:(O-Y)/(U-Y)))}if(--h,o+=8*(b+_)/(v.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var im=null,am=null;function Fc(i){return i.nodeType===9?i:i.ownerDocument}function KS(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function GS(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function om(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var lm=null;function R2(){var i=window.event;return i&&i.type==="popstate"?i===lm?!1:(lm=i,!0):(lm=null,!1)}var QS=typeof setTimeout=="function"?setTimeout:void 0,T2=typeof clearTimeout=="function"?clearTimeout:void 0,ZS=typeof Promise=="function"?Promise:void 0,A2=typeof queueMicrotask=="function"?queueMicrotask:typeof ZS<"u"?function(i){return ZS.resolve(null).then(i).catch(O2)}:QS;function O2(i){setTimeout(function(){throw i})}function $s(i){return i==="head"}function YS(i,o){var u=o,h=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(h===0){i.removeChild(v),Pa(o);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")ul(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,ul(u);for(var b=u.firstChild;b;){var _=b.nextSibling,O=b.nodeName;b[Ro]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=_}}else u==="body"&&ul(i.ownerDocument.body);u=v}while(u);Pa(o)}function JS(i,o){var u=i;i=0;do{var h=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=h}while(u)}function um(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":um(u),ph(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function M2(i,o,u,h){for(;i.nodeType===1;){var v=u;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Ro])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=hr(i.nextSibling),i===null)break}return null}function I2(i,o,u){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=hr(i.nextSibling),i===null))return null;return i}function XS(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=hr(i.nextSibling),i===null))return null;return i}function cm(i){return i.data==="$?"||i.data==="$~"}function fm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function N2(i,o){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||u.readyState!=="loading")o();else{var h=function(){o(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function hr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var dm=null;function WS(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(o===0)return hr(i.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}i=i.nextSibling}return null}function ew(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return i;o--}else u!=="/$"&&u!=="/&"||o++}i=i.previousSibling}return null}function tw(i,o,u){switch(o=Fc(u),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function ul(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);ph(i)}var pr=new Map,nw=new Set;function Bc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var cs=J.d;J.d={f:z2,r:D2,D:j2,C:L2,L:P2,m:$2,X:B2,S:F2,M:U2};function z2(){var i=cs.f(),o=Ic();return i||o}function D2(i){var o=ra(i);o!==null&&o.tag===5&&o.type==="form"?bx(o):cs.r(i)}var Da=typeof document>"u"?null:document;function rw(i,o,u){var h=Da;if(h&&typeof o=="string"&&o){var v=ar(o);v='link[rel="'+i+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),nw.has(v)||(nw.add(v),i={rel:i,crossOrigin:u,href:o},h.querySelector(v)===null&&(o=h.createElement("link"),on(o,"link",i),Yt(o),h.head.appendChild(o)))}}function j2(i){cs.D(i),rw("dns-prefetch",i,null)}function L2(i,o){cs.C(i,o),rw("preconnect",i,o)}function P2(i,o,u){cs.L(i,o,u);var h=Da;if(h&&i&&o){var v='link[rel="preload"][as="'+ar(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+ar(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+ar(u.imageSizes)+'"]')):v+='[href="'+ar(i)+'"]';var b=v;switch(o){case"style":b=ja(i);break;case"script":b=La(i)}pr.has(b)||(i=p({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:i,as:o},u),pr.set(b,i),h.querySelector(v)!==null||o==="style"&&h.querySelector(cl(b))||o==="script"&&h.querySelector(fl(b))||(o=h.createElement("link"),on(o,"link",i),Yt(o),h.head.appendChild(o)))}}function $2(i,o){cs.m(i,o);var u=Da;if(u&&i){var h=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+ar(h)+'"][href="'+ar(i)+'"]',b=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=La(i)}if(!pr.has(b)&&(i=p({rel:"modulepreload",href:i},o),pr.set(b,i),u.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(fl(b)))return}h=u.createElement("link"),on(h,"link",i),Yt(h),u.head.appendChild(h)}}}function F2(i,o,u){cs.S(i,o,u);var h=Da;if(h&&i){var v=sa(h).hoistableStyles,b=ja(i);o=o||"default";var _=v.get(b);if(!_){var O={loading:0,preload:null};if(_=h.querySelector(cl(b)))O.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},u),(u=pr.get(b))&&hm(i,u);var U=_=h.createElement("link");Yt(U),on(U,"link",i),U._p=new Promise(function(Y,ie){U.onload=Y,U.onerror=ie}),U.addEventListener("load",function(){O.loading|=1}),U.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Uc(_,o,h)}_={type:"stylesheet",instance:_,count:1,state:O},v.set(b,_)}}}function B2(i,o){cs.X(i,o);var u=Da;if(u&&i){var h=sa(u).hoistableScripts,v=La(i),b=h.get(v);b||(b=u.querySelector(fl(v)),b||(i=p({src:i,async:!0},o),(o=pr.get(v))&&pm(i,o),b=u.createElement("script"),Yt(b),on(b,"link",i),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(v,b))}}function U2(i,o){cs.M(i,o);var u=Da;if(u&&i){var h=sa(u).hoistableScripts,v=La(i),b=h.get(v);b||(b=u.querySelector(fl(v)),b||(i=p({src:i,async:!0,type:"module"},o),(o=pr.get(v))&&pm(i,o),b=u.createElement("script"),Yt(b),on(b,"link",i),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(v,b))}}function sw(i,o,u,h){var v=(v=fe.current)?Bc(v):null;if(!v)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=ja(u.href),u=sa(v).hoistableStyles,h=u.get(o),h||(h={type:"style",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=ja(u.href);var b=sa(v).hoistableStyles,_=b.get(i);if(_||(v=v.ownerDocument||v,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,_),(b=v.querySelector(cl(i)))&&!b._p&&(_.instance=b,_.state.loading=5),pr.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},pr.set(i,u),b||q2(v,i,u,_.state))),o&&h===null)throw Error(r(528,""));return _}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=La(u),u=sa(v).hoistableScripts,h=u.get(o),h||(h={type:"script",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function ja(i){return'href="'+ar(i)+'"'}function cl(i){return'link[rel="stylesheet"]['+i+"]"}function iw(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function q2(i,o,u,h){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=i.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),on(o,"link",u),Yt(o),i.head.appendChild(o))}function La(i){return'[src="'+ar(i)+'"]'}function fl(i){return"script[async]"+i}function aw(i,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var h=i.querySelector('style[data-href~="'+ar(u.href)+'"]');if(h)return o.instance=h,Yt(h),h;var v=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Yt(h),on(h,"style",v),Uc(h,u.precedence,i),o.instance=h;case"stylesheet":v=ja(u.href);var b=i.querySelector(cl(v));if(b)return o.state.loading|=4,o.instance=b,Yt(b),b;h=iw(u),(v=pr.get(v))&&hm(h,v),b=(i.ownerDocument||i).createElement("link"),Yt(b);var _=b;return _._p=new Promise(function(O,U){_.onload=O,_.onerror=U}),on(b,"link",h),o.state.loading|=4,Uc(b,u.precedence,i),o.instance=b;case"script":return b=La(u.src),(v=i.querySelector(fl(b)))?(o.instance=v,Yt(v),v):(h=u,(v=pr.get(b))&&(h=p({},u),pm(h,v)),i=i.ownerDocument||i,v=i.createElement("script"),Yt(v),on(v,"link",h),i.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,Uc(h,u.precedence,i));return o.instance}function Uc(i,o,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,b=v,_=0;_<h.length;_++){var O=h[_];if(O.dataset.precedence===o)b=O;else if(b!==v)break}b?b.parentNode.insertBefore(i,b.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(i,o.firstChild))}function hm(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function pm(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var qc=null;function ow(i,o,u){if(qc===null){var h=new Map,v=qc=new Map;v.set(u,h)}else v=qc,h=v.get(u),h||(h=new Map,v.set(u,h));if(h.has(i))return h;for(h.set(i,null),u=u.getElementsByTagName(i),v=0;v<u.length;v++){var b=u[v];if(!(b[Ro]||b[nn]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var _=b.getAttribute(o)||"";_=i+_;var O=h.get(_);O?O.push(b):h.set(_,[b])}}return h}function lw(i,o,u){i=i.ownerDocument||i,i.head.insertBefore(u,o==="title"?i.querySelector("head > title"):null)}function H2(i,o,u){if(u===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function uw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function V2(i,o,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=ja(h.href),b=o.querySelector(cl(v));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Hc.bind(i),o.then(i,i)),u.state.loading|=4,u.instance=b,Yt(b);return}b=o.ownerDocument||o,h=iw(h),(v=pr.get(v))&&hm(h,v),b=b.createElement("link"),Yt(b);var _=b;_._p=new Promise(function(O,U){_.onload=O,_.onerror=U}),on(b,"link",h),u.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=Hc.bind(i),o.addEventListener("load",u),o.addEventListener("error",u))}}var mm=0;function K2(i,o){return i.stylesheets&&i.count===0&&Kc(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var h=setTimeout(function(){if(i.stylesheets&&Kc(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+o);0<i.imgBytes&&mm===0&&(mm=62500*k2());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Kc(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>mm?50:800)+o);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function Hc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Vc=null;function Kc(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Vc=new Map,o.forEach(G2,i),Vc=null,Hc.call(i))}function G2(i,o){if(!(o.state.loading&4)){var u=Vc.get(i);if(u)var h=u.get(null);else{u=new Map,Vc.set(i,u);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var _=v[b];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(u.set(_.dataset.precedence,_),h=_)}h&&u.set(null,h)}v=o.instance,_=v.getAttribute("data-precedence"),b=u.get(_)||h,b===h&&u.set(null,v),u.set(_,v),this.count++,h=Hc.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),b?b.parentNode.insertBefore(v,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),o.state.loading|=4}}var dl={$$typeof:R,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function Q2(i,o,u,h,v,b,_,O,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ch(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ch(0),this.hiddenUpdates=ch(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function cw(i,o,u,h,v,b,_,O,U,Y,ie,le){return i=new Q2(i,o,u,_,U,Y,ie,le,O),o=1,b===!0&&(o|=24),b=Bn(3,null,null,o),i.current=b,b.stateNode=i,o=Qh(),o.refCount++,i.pooledCache=o,o.refCount++,b.memoizedState={element:h,isDehydrated:u,cache:o},Xh(b),i}function fw(i){return i?(i=pa,i):pa}function dw(i,o,u,h,v,b){v=fw(v),h.context===null?h.context=v:h.pendingContext=v,h=Ts(o),h.payload={element:u},b=b===void 0?null:b,b!==null&&(h.callback=b),u=As(i,h,o),u!==null&&(Nn(u,i,o),Ho(u,i,o))}function hw(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function gm(i,o){hw(i,o),(i=i.alternate)&&hw(i,o)}function pw(i){if(i.tag===13||i.tag===31){var o=gi(i,67108864);o!==null&&Nn(o,i,67108864),gm(i,67108864)}}function mw(i){if(i.tag===13||i.tag===31){var o=Kn();o=fh(o);var u=gi(i,o);u!==null&&Nn(u,i,o),gm(i,o)}}var Gc=!0;function Z2(i,o,u,h){var v=$.T;$.T=null;var b=J.p;try{J.p=2,ym(i,o,u,h)}finally{J.p=b,$.T=v}}function Y2(i,o,u,h){var v=$.T;$.T=null;var b=J.p;try{J.p=8,ym(i,o,u,h)}finally{J.p=b,$.T=v}}function ym(i,o,u,h){if(Gc){var v=vm(h);if(v===null)rm(i,o,h,Qc,u),yw(i,h);else if(X2(v,i,o,u,h))h.stopPropagation();else if(yw(i,h),o&4&&-1<J2.indexOf(i)){for(;v!==null;){var b=ra(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var _=fi(b.pendingLanes);if(_!==0){var O=b;for(O.pendingLanes|=2,O.entangledLanes|=2;_;){var U=1<<31-wt(_);O.entanglements[1]|=U,_&=~U}jr(b),(pt&6)===0&&(Oc=ye()+500,al(0))}}break;case 31:case 13:O=gi(b,2),O!==null&&Nn(O,b,2),Ic(),gm(b,2)}if(b=vm(h),b===null&&rm(i,o,h,Qc,u),b===v)break;v=b}v!==null&&h.stopPropagation()}else rm(i,o,h,null,u)}}function vm(i){return i=xh(i),bm(i)}var Qc=null;function bm(i){if(Qc=null,i=na(i),i!==null){var o=a(i);if(o===null)i=null;else{var u=o.tag;if(u===13){if(i=l(o),i!==null)return i;i=null}else if(u===31){if(i=c(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Qc=i,null}function gw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case ne:return 2;case de:return 8;case Ce:case ke:return 32;case xe:return 268435456;default:return 32}default:return 32}}var xm=!1,Fs=null,Bs=null,Us=null,hl=new Map,pl=new Map,qs=[],J2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yw(i,o){switch(i){case"focusin":case"focusout":Fs=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":hl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":pl.delete(o.pointerId)}}function ml(i,o,u,h,v,b){return i===null||i.nativeEvent!==b?(i={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:b,targetContainers:[v]},o!==null&&(o=ra(o),o!==null&&pw(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),i)}function X2(i,o,u,h,v){switch(o){case"focusin":return Fs=ml(Fs,i,o,u,h,v),!0;case"dragenter":return Bs=ml(Bs,i,o,u,h,v),!0;case"mouseover":return Us=ml(Us,i,o,u,h,v),!0;case"pointerover":var b=v.pointerId;return hl.set(b,ml(hl.get(b)||null,i,o,u,h,v)),!0;case"gotpointercapture":return b=v.pointerId,pl.set(b,ml(pl.get(b)||null,i,o,u,h,v)),!0}return!1}function vw(i){var o=na(i.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){i.blockedOn=o,Iv(i.priority,function(){mw(u)});return}}else if(o===31){if(o=c(u),o!==null){i.blockedOn=o,Iv(i.priority,function(){mw(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Zc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=vm(i.nativeEvent);if(u===null){u=i.nativeEvent;var h=new u.constructor(u.type,u);bh=h,u.target.dispatchEvent(h),bh=null}else return o=ra(u),o!==null&&pw(o),i.blockedOn=u,!1;o.shift()}return!0}function bw(i,o,u){Zc(i)&&u.delete(o)}function W2(){xm=!1,Fs!==null&&Zc(Fs)&&(Fs=null),Bs!==null&&Zc(Bs)&&(Bs=null),Us!==null&&Zc(Us)&&(Us=null),hl.forEach(bw),pl.forEach(bw)}function Yc(i,o){i.blockedOn===o&&(i.blockedOn=null,xm||(xm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,W2)))}var Jc=null;function xw(i){Jc!==i&&(Jc=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Jc===i&&(Jc=null);for(var o=0;o<i.length;o+=3){var u=i[o],h=i[o+1],v=i[o+2];if(typeof h!="function"){if(bm(h||u)===null)continue;break}var b=ra(u);b!==null&&(i.splice(o,3),o-=3,vp(b,{pending:!0,data:v,method:u.method,action:h},h,v))}}))}function Pa(i){function o(U){return Yc(U,i)}Fs!==null&&Yc(Fs,i),Bs!==null&&Yc(Bs,i),Us!==null&&Yc(Us,i),hl.forEach(o),pl.forEach(o);for(var u=0;u<qs.length;u++){var h=qs[u];h.blockedOn===i&&(h.blockedOn=null)}for(;0<qs.length&&(u=qs[0],u.blockedOn===null);)vw(u),u.blockedOn===null&&qs.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var v=u[h],b=u[h+1],_=v[Rn]||null;if(typeof b=="function")_||xw(u);else if(_){var O=null;if(b&&b.hasAttribute("formAction")){if(v=b,_=b[Rn]||null)O=_.formAction;else if(bm(v)!==null)continue}else O=_.action;typeof O=="function"?u[h+1]=O:(u.splice(h,3),h-=3),xw(u)}}}function Sw(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(_){return v=_})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function Sm(i){this._internalRoot=i}Xc.prototype.render=Sm.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var u=o.current,h=Kn();dw(u,h,i,o,null,null)},Xc.prototype.unmount=Sm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;dw(i.current,2,null,i,null,null),Ic(),o[ta]=null}};function Xc(i){this._internalRoot=i}Xc.prototype.unstable_scheduleHydration=function(i){if(i){var o=Mv();i={blockedOn:null,target:i,priority:o};for(var u=0;u<qs.length&&o!==0&&o<qs[u].priority;u++);qs.splice(u,0,i),u===0&&vw(i)}};var ww=e.version;if(ww!=="19.2.3")throw Error(r(527,ww,"19.2.3"));J.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var eM={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{ut=Wc.inject(eM),ct=Wc}catch{}}return yl.createRoot=function(i,o){if(!s(i))throw Error(r(299));var u=!1,h="",v=Ax,b=Ox,_=Mx;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),o=cw(i,1,!1,null,null,u,h,null,v,b,_,Sw),i[ta]=o.current,nm(i),new Sm(o)},yl.hydrateRoot=function(i,o,u){if(!s(i))throw Error(r(299));var h=!1,v="",b=Ax,_=Ox,O=Mx,U=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(O=u.onRecoverableError),u.formState!==void 0&&(U=u.formState)),o=cw(i,1,!0,o,u??null,h,v,U,b,_,O,Sw),o.context=fw(null),u=o.current,h=Kn(),h=fh(h),v=Ts(h),v.callback=null,As(u,v,h),u=h,o.current.lanes=u,ko(o,u),jr(o),i[ta]=o.current,nm(i),new Xc(o)},yl.version="19.2.3",yl}var Iw;function uM(){if(Iw)return Cm.exports;Iw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cm.exports=lM(),Cm.exports}var cM=uM(),Tm={exports:{}},Am={};var Nw;function fM(){if(Nw)return Am;Nw=1;var t=fo().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Am.c=function(e){return t.H.useMemoCache(e)},Am}var zw;function dM(){return zw||(zw=1,Tm.exports=fM()),Tm.exports}var tn=dM(),ho=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hM={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},pM=class{#e=hM;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Di=new pM;function mM(t){setTimeout(t,0)}var qi=typeof window>"u"||"Deno"in globalThis;function Sn(){}function gM(t,e){return typeof t=="function"?t(e):t}function jg(t){return typeof t=="number"&&t>=0&&t!==1/0}function QC(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ei(t,e){return typeof t=="function"?t(e):t}function gr(t,e){return typeof t=="function"?t(e):t}function Dw(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:c}=t;if(l){if(r){if(e.queryHash!==Zy(l,e.options))return!1}else if(!ou(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||s&&s!==e.state.fetchStatus||a&&!a(e))}function jw(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Tr(e.options.mutationKey)!==Tr(a))return!1}else if(!ou(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Zy(t,e){return(e?.queryKeyHashFn||Tr)(t)}function Tr(t){return JSON.stringify(t,(e,n)=>Lg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ou(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ou(t[n],e[n])):!1}var yM=Object.prototype.hasOwnProperty;function ZC(t,e){if(t===e)return t;const n=Lw(t)&&Lw(e);if(!n&&!(Lg(t)&&Lg(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,c=n?new Array(l):{};let f=0;for(let d=0;d<l;d++){const m=n?d:a[d],p=t[m],g=e[m];if(p===g){c[m]=p,(n?d<s:yM.call(t,m))&&f++;continue}if(p===null||g===null||typeof p!="object"||typeof g!="object"){c[m]=g;continue}const y=ZC(p,g);c[m]=y,y===p&&f++}return s===l&&f===s?t:c}function Kf(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Lw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Lg(t){if(!Pw(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Pw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Pw(t){return Object.prototype.toString.call(t)==="[object Object]"}function vM(t){return new Promise(e=>{Di.setTimeout(e,t)})}function Pg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ZC(t,e):e}function bM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function xM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Yy=Symbol();function YC(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Yy?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Jy(t,e){return typeof t=="function"?t(...e):!!t}function SM(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var wM=class extends ho{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!qi&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Xy=new wM;function $g(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var _M=mM;function CM(){let t=[],e=0,n=c=>{c()},r=c=>{c()},s=_M;const a=c=>{e?t.push(c):s(()=>{n(c)})},l=()=>{const c=t;t=[],c.length&&s(()=>{r(()=>{c.forEach(f=>{n(f)})})})};return{batch:c=>{let f;e++;try{f=c()}finally{e--,e||l()}return f},batchCalls:c=>(...f)=>{a(()=>{c(...f)})},schedule:a,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{s=c}}}var Gt=CM(),EM=class extends ho{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!qi&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Gf=new EM;function kM(t){return Math.min(1e3*2**t,3e4)}function JC(t){return(t??"online")==="online"?Gf.isOnline():!0}var Fg=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function XC(t){let e=!1,n=0,r;const s=$g(),a=()=>s.status!=="pending",l=S=>{if(!a()){const E=new Fg(S);g(E),t.onCancel?.(E)}},c=()=>{e=!0},f=()=>{e=!1},d=()=>Xy.isFocused()&&(t.networkMode==="always"||Gf.isOnline())&&t.canRun(),m=()=>JC(t.networkMode)&&t.canRun(),p=S=>{a()||(r?.(),s.resolve(S))},g=S=>{a()||(r?.(),s.reject(S))},y=()=>new Promise(S=>{r=E=>{(a()||d())&&S(E)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),x=()=>{if(a())return;let S;const E=n===0?t.initialPromise:void 0;try{S=E??t.fn()}catch(C){S=Promise.reject(C)}Promise.resolve(S).then(p).catch(C=>{if(a())return;const k=t.retry??(qi?0:3),R=t.retryDelay??kM,N=typeof R=="function"?R(n,C):R,j=k===!0||typeof k=="number"&&n<k||typeof k=="function"&&k(n,C);if(e||!j){g(C);return}n++,t.onFail?.(n,C),vM(N).then(()=>d()?void 0:y()).then(()=>{e?g(C):x()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r?.(),s),cancelRetry:c,continueRetry:f,canStart:m,start:()=>(m()?x():y().then(x),s)}}var WC=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jg(this.gcTime)&&(this.#e=Di.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(qi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Di.clearTimeout(this.#e),this.#e=void 0)}},RM=class extends WC{#e;#t;#n;#r;#s;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Fw(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=Fw(this.options);e.data!==void 0&&(this.setState($w(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=Pg(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(Sn).catch(Sn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>gr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Yy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ei(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!QC(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(f=>f.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},s=()=>{const c=YC(this.options,e),d=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#i=!1,this.options.persister?this.options.persister(c,d,this):c(d)},l=(()=>{const c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:s};return r(c),c})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#s=XC({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof Fg&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(c,f)=>{this.#a({type:"failed",failureCount:c,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const c=await this.#s.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof Fg){if(c.silent)return this.#s.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#a({type:"error",error:c}),this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...eE(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...$w(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Gt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function eE(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:JC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function $w(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Fw(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var tE=class extends ho{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#i=$g(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#i;#a;#p;#m;#u;#c;#l;#f;#d=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Bw(this.#t,this.options)?this.#h():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Bg(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Bg(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#S(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!Kf(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Uw(this.#t,n,this.options,e)&&this.#h(),this.updateResult(),r&&(this.#t!==n||gr(this.options.enabled,this.#t)!==gr(e.enabled,this.#t)||ei(this.options.staleTime,this.#t)!==ei(e.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==n||gr(this.options.enabled,this.#t)!==gr(e.enabled,this.#t)||s!==this.#f)&&this.#v(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return AM(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#d.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Sn)),e}#g(){this.#x();const t=ei(this.options.staleTime,this.#t);if(qi||this.#r.isStale||!jg(t))return;const n=QC(this.#r.dataUpdatedAt,t)+1;this.#c=Di.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#S(),this.#f=t,!(qi||gr(this.options.enabled,this.#t)===!1||!jg(this.#f)||this.#f===0)&&(this.#l=Di.setInterval(()=>{(this.options.refetchIntervalInBackground||Xy.isFocused())&&this.#h()},this.#f))}#b(){this.#g(),this.#v(this.#y())}#x(){this.#c&&(Di.clearTimeout(this.#c),this.#c=void 0)}#S(){this.#l&&(Di.clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const n=this.#t,r=this.options,s=this.#r,a=this.#s,l=this.#o,f=t!==n?t.state:this.#n,{state:d}=t;let m={...d},p=!1,g;if(e._optimisticResults){const L=this.hasListeners(),P=!L&&Bw(t,e),M=L&&Uw(t,n,e,r);(P||M)&&(m={...m,...eE(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:y,errorUpdatedAt:x,status:S}=m;g=m.data;let E=!1;if(e.placeholderData!==void 0&&g===void 0&&S==="pending"){let L;s?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(L=s.data,E=!0):L=typeof e.placeholderData=="function"?e.placeholderData(this.#u?.state.data,this.#u):e.placeholderData,L!==void 0&&(S="success",g=Pg(s?.data,L,e),p=!0)}if(e.select&&g!==void 0&&!E)if(s&&g===a?.data&&e.select===this.#p)g=this.#m;else try{this.#p=e.select,g=e.select(g),g=Pg(s?.data,g,e),this.#m=g,this.#a=null}catch(L){this.#a=L}this.#a&&(y=this.#a,g=this.#m,x=Date.now(),S="error");const C=m.fetchStatus==="fetching",k=S==="pending",R=S==="error",N=k&&C,j=g!==void 0,D={status:S,fetchStatus:m.fetchStatus,isPending:k,isSuccess:S==="success",isError:R,isInitialLoading:N,isLoading:N,data:g,dataUpdatedAt:m.dataUpdatedAt,error:y,errorUpdatedAt:x,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:C,isRefetching:C&&!k,isLoadingError:R&&!j,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:R&&j,isStale:Wy(t,e),refetch:this.refetch,promise:this.#i,isEnabled:gr(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const L=B=>{D.status==="error"?B.reject(D.error):D.data!==void 0&&B.resolve(D.data)},P=()=>{const B=this.#i=D.promise=$g();L(B)},M=this.#i;switch(M.status){case"pending":t.queryHash===n.queryHash&&L(M);break;case"fulfilled":(D.status==="error"||D.data!==M.value)&&P();break;case"rejected":(D.status!=="error"||D.error!==M.reason)&&P();break}}return D}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#u=this.#t),Kf(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#d.size)return!0;const a=new Set(s??this.#d);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const c=l;return this.#r[c]!==t[c]&&a.has(c)})};this.#_({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#_(t){Gt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function TM(t,e){return gr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Bw(t,e){return TM(t,e)||t.state.data!==void 0&&Bg(t,e,e.refetchOnMount)}function Bg(t,e,n){if(gr(e.enabled,t)!==!1&&ei(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Wy(t,e)}return!1}function Uw(t,e,n,r){return(t!==e||gr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Wy(t,n)}function Wy(t,e){return gr(e.enabled,t)!==!1&&t.isStaleByTime(ei(e.staleTime,t))}function AM(t,e){return!Kf(t.getCurrentResult(),e)}function qw(t){return{onFetch:(e,n)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},f=0;const d=async()=>{let m=!1;const p=x=>{SM(x,()=>e.signal,()=>m=!0)},g=YC(e.options,e.fetchOptions),y=async(x,S,E)=>{if(m)return Promise.reject();if(S==null&&x.pages.length)return Promise.resolve(x);const k=(()=>{const T={client:e.client,queryKey:e.queryKey,pageParam:S,direction:E?"backward":"forward",meta:e.options.meta};return p(T),T})(),R=await g(k),{maxPages:N}=e.options,j=E?xM:bM;return{pages:j(x.pages,R,N),pageParams:j(x.pageParams,S,N)}};if(s&&a.length){const x=s==="backward",S=x?OM:Hw,E={pages:a,pageParams:l},C=S(r,E);c=await y(E,C,x)}else{const x=t??a.length;do{const S=f===0?l[0]??r.initialPageParam:Hw(r,c);if(f>0&&S==null)break;c=await y(c,S),f++}while(f<x)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function Hw(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function OM(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var MM=class extends WC{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||nE(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=XC({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#s({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#r.canStart();try{if(r)e();else{this.#s({type:"pending",variables:t,isPaused:s}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#s({type:"pending",context:l,variables:t,isPaused:s})}const a=await this.#r.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#s({type:"success",data:a}),a}catch(a){try{await this.#n.config.onError?.(a,t,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(a,t,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,a,t,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#s({type:"error",error:a}),a}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Gt.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function nE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var IM=class extends ho{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new MM({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=ef(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=ef(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=ef(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=ef(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Gt.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>jw(e,n))}findAll(t={}){return this.getAll().filter(e=>jw(t,e))}notify(t){Gt.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Gt.batch(()=>Promise.all(t.map(e=>e.continue().catch(Sn))))}};function ef(t){return t.options.scope?.id}var NM=class extends ho{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),Kf(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Tr(n.mutationKey)!==Tr(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#s(),this.#o(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#o()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#s(){const e=this.#n?.state??nE();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#o(e){Gt.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#r.onSuccess?.(e.data,n,r,s)}catch(a){Promise.reject(a)}try{this.#r.onSettled?.(e.data,null,n,r,s)}catch(a){Promise.reject(a)}}else if(e?.type==="error"){try{this.#r.onError?.(e.error,n,r,s)}catch(a){Promise.reject(a)}try{this.#r.onSettled?.(void 0,e.error,n,r,s)}catch(a){Promise.reject(a)}}}this.listeners.forEach(n=>{n(this.#t)})})}},zM=class extends ho{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,s=e.queryHash??Zy(r,e);let a=this.get(s);return a||(a=new RM({client:t,queryKey:r,queryHash:s,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Gt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Dw(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Dw(t,n)):e}notify(t){Gt.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Gt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Gt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},rE=class{#e;#t;#n;#r;#s;#o;#i;#a;constructor(t={}){this.#e=t.queryCache||new zM,this.#t=t.mutationCache||new IM,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=Xy.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Gf.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ei(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,l=gM(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return Gt.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Gt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return Gt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Gt.batch(()=>this.#e.findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Sn).catch(Sn)}invalidateQueries(t,e={}){return Gt.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Gt.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Sn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Sn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(ei(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Sn).catch(Sn)}fetchInfiniteQuery(t){return t.behavior=qw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Sn).catch(Sn)}ensureInfiniteQueryData(t){return t.behavior=qw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Gf.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Tr(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{ou(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(Tr(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{ou(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Zy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Yy&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},sE=q.createContext(void 0),po=t=>{const e=q.useContext(sE);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},DM=({client:t,children:e})=>(q.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),w.jsx(sE.Provider,{value:t,children:e})),iE=q.createContext(!1),jM=()=>q.useContext(iE);iE.Provider;function LM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var PM=q.createContext(LM()),$M=()=>q.useContext(PM),FM=(t,e,n)=>{const r=n?.state.error&&typeof t.throwOnError=="function"?Jy(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||r)&&(e.isReset()||(t.retryOnMount=!1))},BM=t=>{q.useEffect(()=>{t.clearReset()},[t])},UM=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||Jy(n,[t.error,r])),qM=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},HM=(t,e)=>t.isLoading&&t.isFetching&&!e,VM=(t,e)=>t?.suspense&&e.isPending,Vw=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function KM(t,e,n){const r=jM(),s=$M(),a=po(),l=a.defaultQueryOptions(t);a.getDefaultOptions().queries?._experimental_beforeQuery?.(l);const c=a.getQueryCache().get(l.queryHash);l._optimisticResults=r?"isRestoring":"optimistic",qM(l),FM(l,s,c),BM(s);const f=!a.getQueryCache().get(l.queryHash),[d]=q.useState(()=>new e(a,l)),m=d.getOptimisticResult(l),p=!r&&t.subscribed!==!1;if(q.useSyncExternalStore(q.useCallback(g=>{const y=p?d.subscribe(Gt.batchCalls(g)):Sn;return d.updateResult(),y},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),q.useEffect(()=>{d.setOptions(l)},[l,d]),VM(l,m))throw Vw(l,d,s);if(UM({result:m,errorResetBoundary:s,throwOnError:l.throwOnError,query:c,suspense:l.suspense}))throw m.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(l,m),l.experimental_prefetchInRender&&!qi&&HM(m,r)&&(f?Vw(l,d,s):c?.promise)?.catch(Sn).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?m:d.trackResult(m)}function ys(t,e){return KM(t,tE)}function lu(t,e){const n=po(),[r]=q.useState(()=>new NM(n,t));q.useEffect(()=>{r.setOptions(t)},[r,t]);const s=q.useSyncExternalStore(q.useCallback(l=>r.subscribe(Gt.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=q.useCallback((l,c)=>{r.mutate(l,c).catch(Sn)},[r]);if(s.error&&Jy(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}const Ug=new WeakMap,GM=new WeakMap,Qf={current:[]};let Om=!1,Hl=0;const Al=new Set,tf=new Map;function aE(t){for(const e of t){if(Qf.current.includes(e))continue;Qf.current.push(e),e.recompute();const n=GM.get(e);if(n)for(const r of n){const s=Ug.get(r);s?.length&&aE(s)}}}function QM(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function ZM(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function oE(t){if(Hl>0&&!tf.has(t)&&tf.set(t,t.prevState),Al.add(t),!(Hl>0)&&!Om)try{for(Om=!0;Al.size>0;){const e=Array.from(Al);Al.clear();for(const n of e){const r=tf.get(n)??n.prevState;n.prevState=r,QM(n)}for(const n of e){const r=Ug.get(n);r&&(Qf.current.push(n),aE(r))}for(const n of e){const r=Ug.get(n);if(r)for(const s of r)ZM(s)}}}finally{Om=!1,Qf.current=[],tf.clear()}}function Vl(t){Hl++;try{t()}finally{if(Hl--,Hl===0){const e=Al.values().next().value;e&&oE(e)}}}function YM(t){return typeof t=="function"}class JM{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var s,a;this.listeners.add(r);const l=(a=(s=this.options)==null?void 0:s.onSubscribe)==null?void 0:a.call(s,r,this);return()=>{this.listeners.delete(r),l?.()}},this.prevState=e,this.state=e,this.options=n}setState(e){var n,r,s;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(e):YM(e)?this.state=e(this.prevState):this.state=e,(s=(r=this.options)==null?void 0:r.onUpdate)==null||s.call(r),oE(this)}}const ti="__TSR_index",Kw="popstate",Gw="beforeunload";function XM(t){let e=t.getLocation();const n=new Set,r=l=>{e=t.getLocation(),n.forEach(c=>c({location:e,action:l}))},s=l=>{t.notifyOnIndexChange??!0?r(l):e=t.getLocation()},a=async({task:l,navigateOpts:c,...f})=>{if(c?.ignoreBlocker??!1){l();return}const m=t.getBlockers?.()??[],p=f.type==="PUSH"||f.type==="REPLACE";if(typeof document<"u"&&m.length&&p)for(const g of m){const y=Zf(f.path,f.state);if(await g.blockerFn({currentLocation:e,nextLocation:y,action:f.type})){t.onBlocked?.();return}}l()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:l=>(n.add(l),()=>{n.delete(l)}),push:(l,c,f)=>{const d=e.state[ti];c=Qw(d+1,c),a({task:()=>{t.pushState(l,c),r({type:"PUSH"})},navigateOpts:f,type:"PUSH",path:l,state:c})},replace:(l,c,f)=>{const d=e.state[ti];c=Qw(d,c),a({task:()=>{t.replaceState(l,c),r({type:"REPLACE"})},navigateOpts:f,type:"REPLACE",path:l,state:c})},go:(l,c)=>{a({task:()=>{t.go(l),s({type:"GO",index:l})},navigateOpts:c,type:"GO"})},back:l=>{a({task:()=>{t.back(l?.ignoreBlocker??!1),s({type:"BACK"})},navigateOpts:l,type:"BACK"})},forward:l=>{a({task:()=>{t.forward(l?.ignoreBlocker??!1),s({type:"FORWARD"})},navigateOpts:l,type:"FORWARD"})},canGoBack:()=>e.state[ti]!==0,createHref:l=>t.createHref(l),block:l=>{if(!t.setBlockers)return()=>{};const c=t.getBlockers?.()??[];return t.setBlockers([...c,l]),()=>{const f=t.getBlockers?.()??[];t.setBlockers?.(f.filter(d=>d!==l))}},flush:()=>t.flush?.(),destroy:()=>t.destroy?.(),notify:r}}function Qw(t,e){e||(e={});const n=e0();return{...e,key:n,__TSR_key:n,[ti]:t}}function WM(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,r=e.history.replaceState;let s=[];const a=()=>s,l=L=>s=L,c=(L=>L),f=(()=>Zf(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state));if(!e.history.state?.__TSR_key&&!e.history.state?.key){const L=e0();e.history.replaceState({[ti]:0,key:L,__TSR_key:L},"")}let d=f(),m,p=!1,g=!1,y=!1,x=!1;const S=()=>d;let E,C;const k=()=>{E&&(D._ignoreSubscribers=!0,(E.isPush?e.history.pushState:e.history.replaceState)(E.state,"",E.href),D._ignoreSubscribers=!1,E=void 0,C=void 0,m=void 0)},R=(L,P,M)=>{const B=c(P);C||(m=d),d=Zf(P,M),E={href:B,state:M,isPush:E?.isPush||L==="push"},C||(C=Promise.resolve().then(()=>k()))},N=L=>{d=f(),D.notify({type:L})},j=async()=>{if(g){g=!1;return}const L=f(),P=L.state[ti]-d.state[ti],M=P===1,B=P===-1,G=!M&&!B||p;p=!1;const ee=G?"GO":B?"BACK":"FORWARD",te=G?{type:"GO",index:P}:{type:B?"BACK":"FORWARD"};if(y)y=!1;else{const V=a();if(typeof document<"u"&&V.length){for(const $ of V)if(await $.blockerFn({currentLocation:d,nextLocation:L,action:ee})){g=!0,e.history.go(1),D.notify(te);return}}}d=f(),D.notify(te)},T=L=>{if(x){x=!1;return}let P=!1;const M=a();if(typeof document<"u"&&M.length)for(const B of M){const G=B.enableBeforeUnload??!0;if(G===!0){P=!0;break}if(typeof G=="function"&&G()===!0){P=!0;break}}if(P)return L.preventDefault(),L.returnValue=""},D=XM({getLocation:S,getLength:()=>e.history.length,pushState:(L,P)=>R("push",L,P),replaceState:(L,P)=>R("replace",L,P),back:L=>(L&&(y=!0),x=!0,e.history.back()),forward:L=>{L&&(y=!0),x=!0,e.history.forward()},go:L=>{p=!0,e.history.go(L)},createHref:L=>c(L),flush:k,destroy:()=>{e.history.pushState=n,e.history.replaceState=r,e.removeEventListener(Gw,T,{capture:!0}),e.removeEventListener(Kw,j)},onBlocked:()=>{m&&d!==m&&(d=m)},getBlockers:a,setBlockers:l,notifyOnIndexChange:!1});return e.addEventListener(Gw,T,{capture:!0}),e.addEventListener(Kw,j),e.history.pushState=function(...L){const P=n.apply(e.history,L);return D._ignoreSubscribers||N("PUSH"),P},e.history.replaceState=function(...L){const P=r.apply(e.history,L);return D._ignoreSubscribers||N("REPLACE"),P},D}function Zf(t,e){const n=t.indexOf("#"),r=t.indexOf("?"),s=e0();return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{[ti]:0,key:s,__TSR_key:s}}}function e0(){return(Math.random()+1).toString(36).substring(7)}function Yf(t){return t[t.length-1]}function eI(t){return typeof t=="function"}function Zs(t,e){return eI(t)?t(e):t}const tI=Object.prototype.hasOwnProperty;function mr(t,e){if(t===e)return t;const n=e,r=Jw(t)&&Jw(n);if(!r&&!(Jf(t)&&Jf(n)))return n;const s=r?t:Zw(t);if(!s)return n;const a=r?n:Zw(n);if(!a)return n;const l=s.length,c=a.length,f=r?new Array(c):{};let d=0;for(let m=0;m<c;m++){const p=r?m:a[m],g=t[p],y=n[p];if(g===y){f[p]=g,(r?m<l:tI.call(t,p))&&d++;continue}if(g===null||y===null||typeof g!="object"||typeof y!="object"){f[p]=y;continue}const x=mr(g,y);f[p]=x,x===g&&d++}return l===c&&d===l?t:f}function Zw(t){const e=[],n=Object.getOwnPropertyNames(t);for(const s of n){if(!Object.prototype.propertyIsEnumerable.call(t,s))return!1;e.push(s)}const r=Object.getOwnPropertySymbols(t);for(const s of r){if(!Object.prototype.propertyIsEnumerable.call(t,s))return!1;e.push(s)}return e}function Jf(t){if(!Yw(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!Yw(n)||!n.hasOwnProperty("isPrototypeOf"))}function Yw(t){return Object.prototype.toString.call(t)==="[object Object]"}function Jw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Pi(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let r=0,s=t.length;r<s;r++)if(!Pi(t[r],e[r],n))return!1;return!0}if(Jf(t)&&Jf(e)){const r=n?.ignoreUndefined??!0;if(n?.partial){for(const l in e)if((!r||e[l]!==void 0)&&!Pi(t[l],e[l],n))return!1;return!0}let s=0;if(!r)s=Object.keys(t).length;else for(const l in t)t[l]!==void 0&&s++;let a=0;for(const l in e)if((!r||e[l]!==void 0)&&(a++,a>s||!Pi(t[l],e[l],n)))return!1;return s===a}return!1}function oo(t){let e,n;const r=new Promise((s,a)=>{e=s,n=a});return r.status="pending",r.resolve=s=>{r.status="resolved",r.value=s,e(s),t?.(s)},r.reject=s=>{r.status="rejected",n(s)},r}function ni(t){return!!(t&&typeof t=="object"&&typeof t.then=="function")}function Xw(t){try{return decodeURI(t)}catch{return t.replaceAll(/%[0-9A-F]{2}/gi,e=>{try{return decodeURI(e)}catch{return e}})}}function Ww(t,e){if(!t)return t;const n=/%25|%5C/gi;let r=0,s="",a;for(;(a=n.exec(t))!==null;)s+=Xw(t.slice(r,a.index))+a[0],r=n.lastIndex;return s+Xw(r?t.slice(r):t)}var nI="Invariant failed";function vs(t,e){if(!t)throw new Error(nI)}function Xf(t){const e=new Map;let n,r;const s=a=>{a.next&&(a.prev?(a.prev.next=a.next,a.next.prev=a.prev,a.next=void 0,r&&(r.next=a,a.prev=r)):(a.next.prev=void 0,n=a.next,a.next=void 0,r&&(a.prev=r,r.next=a)),r=a)};return{get(a){const l=e.get(a);if(l)return s(l),l.value},set(a,l){if(e.size>=t&&n){const f=n;e.delete(f.key),f.next&&(n=f.next,f.next.prev=void 0),f===r&&(r=void 0)}const c=e.get(a);if(c)c.value=l,s(c);else{const f={key:a,value:l,prev:r};r&&(r.next=f),r=f,n||(n=f),e.set(a,f)}},clear(){e.clear(),n=void 0,r=void 0}}}const lo=0,Hi=1,Vi=2,uu=3,Ya=4,rI=/^([^{]*)\{\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,sI=/^([^{]*)\{-\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,iI=/^([^{]*)\{\$\}([^}]*)$/;function t0(t,e,n=new Uint16Array(6)){const r=t.indexOf("/",e),s=r===-1?t.length:r,a=t.substring(e,s);if(!a||!a.includes("$"))return n[0]=lo,n[1]=e,n[2]=e,n[3]=s,n[4]=s,n[5]=s,n;if(a==="$"){const d=t.length;return n[0]=Vi,n[1]=e,n[2]=e,n[3]=d,n[4]=d,n[5]=d,n}if(a.charCodeAt(0)===36)return n[0]=Hi,n[1]=e,n[2]=e+1,n[3]=s,n[4]=s,n[5]=s,n;const l=a.match(iI);if(l){const m=l[1].length;return n[0]=Vi,n[1]=e+m,n[2]=e+m+1,n[3]=e+m+2,n[4]=e+m+3,n[5]=t.length,n}const c=a.match(sI);if(c){const d=c[1],m=c[2],p=c[3],g=d.length;return n[0]=uu,n[1]=e+g,n[2]=e+g+3,n[3]=e+g+3+m.length,n[4]=s-p.length,n[5]=s,n}const f=a.match(rI);if(f){const d=f[1],m=f[2],p=f[3],g=d.length;return n[0]=Hi,n[1]=e+g,n[2]=e+g+2,n[3]=e+g+2+m.length,n[4]=s-p.length,n[5]=s,n}return n[0]=lo,n[1]=e,n[2]=e,n[3]=s,n[4]=s,n[5]=s,n}function Id(t,e,n,r,s,a,l){l?.(n);let c=r;{const f=n.fullPath??n.from,d=f.length,m=n.options?.caseSensitive??t;for(;c<d;){const g=t0(f,c,e);let y;const x=c,S=g[5];switch(c=S+1,a++,g[0]){case lo:{const C=f.substring(g[2],g[3]);if(m){const k=s.static?.get(C);if(k)y=k;else{s.static??=new Map;const R=no(n.fullPath??n.from);R.parent=s,R.depth=a,y=R,s.static.set(C,R)}}else{const k=C.toLowerCase(),R=s.staticInsensitive?.get(k);if(R)y=R;else{s.staticInsensitive??=new Map;const N=no(n.fullPath??n.from);N.parent=s,N.depth=a,y=N,s.staticInsensitive.set(k,N)}}break}case Hi:{const C=f.substring(x,g[1]),k=f.substring(g[4],S),R=m&&!!(C||k),N=C?R?C:C.toLowerCase():void 0,j=k?R?k:k.toLowerCase():void 0,T=s.dynamic?.find(D=>D.caseSensitive===R&&D.prefix===N&&D.suffix===j);if(T)y=T;else{const D=Im(Hi,n.fullPath??n.from,R,N,j);y=D,D.depth=a,D.parent=s,s.dynamic??=[],s.dynamic.push(D)}break}case uu:{const C=f.substring(x,g[1]),k=f.substring(g[4],S),R=m&&!!(C||k),N=C?R?C:C.toLowerCase():void 0,j=k?R?k:k.toLowerCase():void 0,T=s.optional?.find(D=>D.caseSensitive===R&&D.prefix===N&&D.suffix===j);if(T)y=T;else{const D=Im(uu,n.fullPath??n.from,R,N,j);y=D,D.parent=s,D.depth=a,s.optional??=[],s.optional.push(D)}break}case Vi:{const C=f.substring(x,g[1]),k=f.substring(g[4],S),R=m&&!!(C||k),N=C?R?C:C.toLowerCase():void 0,j=k?R?k:k.toLowerCase():void 0,T=Im(Vi,n.fullPath??n.from,R,N,j);y=T,T.parent=s,T.depth=a,s.wildcard??=[],s.wildcard.push(T)}}s=y}const p=(n.path||!n.children)&&!n.isRoot;if(p&&f.endsWith("/")){const g=no(n.fullPath??n.from);g.kind=Ya,g.parent=s,a++,g.depth=a,s.index=g,s=g}p&&!s.route&&(s.route=n,s.fullPath=n.fullPath??n.from)}if(n.children)for(const f of n.children)Id(t,e,f,c,s,a,l)}function Mm(t,e){if(t.prefix&&e.prefix&&t.prefix!==e.prefix){if(t.prefix.startsWith(e.prefix))return-1;if(e.prefix.startsWith(t.prefix))return 1}if(t.suffix&&e.suffix&&t.suffix!==e.suffix){if(t.suffix.endsWith(e.suffix))return-1;if(e.suffix.endsWith(t.suffix))return 1}return t.prefix&&!e.prefix?-1:!t.prefix&&e.prefix?1:t.suffix&&!e.suffix?-1:!t.suffix&&e.suffix?1:t.caseSensitive&&!e.caseSensitive?-1:!t.caseSensitive&&e.caseSensitive?1:0}function Ni(t){if(t.static)for(const e of t.static.values())Ni(e);if(t.staticInsensitive)for(const e of t.staticInsensitive.values())Ni(e);if(t.dynamic?.length){t.dynamic.sort(Mm);for(const e of t.dynamic)Ni(e)}if(t.optional?.length){t.optional.sort(Mm);for(const e of t.optional)Ni(e)}if(t.wildcard?.length){t.wildcard.sort(Mm);for(const e of t.wildcard)Ni(e)}}function no(t){return{kind:lo,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null}}function Im(t,e,n,r,s){return{kind:t,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null,caseSensitive:n,prefix:r,suffix:s}}function aI(t,e){const n=no("/"),r=new Uint16Array(6);for(const s of t)Id(!1,r,s,1,n,0);Ni(n),e.masksTree=n,e.flatCache=Xf(1e3)}function oI(t,e){t||="/";const n=e.flatCache.get(t);if(n)return n;const r=n0(t,e.masksTree);return e.flatCache.set(t,r),r}function lI(t,e,n,r,s){t||="/",r||="/";const a=e?`case\0${t}`:t;let l=s.singleCache.get(a);if(!l){l=no("/");const c=new Uint16Array(6);Id(e,c,{from:t},1,l,0),s.singleCache.set(a,l)}return n0(r,l,n)}function uI(t,e,n=!1){const r=n?t:`nofuzz\0${t}`,s=e.matchCache.get(r);if(s!==void 0)return s;t||="/";const a=n0(t,e.segmentTree,n);return a&&(a.branch=hI(a.route)),e.matchCache.set(r,a),a}function cI(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function fI(t,e=!1,n){const r=no(t.fullPath),s=new Uint16Array(6),a={},l={};let c=0;return Id(e,s,t,1,r,0,d=>{if(n?.(d,c),vs(!(d.id in a),`Duplicate routes found with id: ${String(d.id)}`),a[d.id]=d,c!==0&&d.path){const m=cI(d.fullPath);(!l[m]||d.fullPath.endsWith("/"))&&(l[m]=d)}c++}),Ni(r),{processedTree:{segmentTree:r,singleCache:Xf(1e3),matchCache:Xf(1e3),flatCache:null,masksTree:null},routesById:a,routesByPath:l}}function n0(t,e,n=!1){const r=t.split("/"),s=mI(t,r,e,n);if(!s)return null;const a=dI(t,r,s);return"**"in s&&(a["**"]=s["**"]),{route:s.node.route,params:a}}function dI(t,e,n){const r=pI(n.node);let s=null;const a={};for(let l=0,c=0,f=0;c<r.length;l++,c++,f++){const d=r[c],m=e[l],p=f;if(m&&(f+=m.length),d.kind===Hi){s??=n.node.fullPath.split("/");const g=s[c],y=d.prefix?.length??0;if(g.charCodeAt(y)===123){const S=d.suffix?.length??0,E=g.substring(y+2,g.length-S-1),C=m.substring(y,m.length-S);a[E]=decodeURIComponent(C)}else{const S=g.substring(1);a[S]=decodeURIComponent(m)}}else if(d.kind===uu){if(n.skipped&1<<c){l--;continue}s??=n.node.fullPath.split("/");const g=s[c],y=d.prefix?.length??0,x=d.suffix?.length??0,S=g.substring(y+3,g.length-x-1),E=d.suffix||d.prefix?m.substring(y,m.length-x):m;E&&(a[S]=decodeURIComponent(E))}else if(d.kind===Vi){const g=d,y=t.substring(p+(g.prefix?.length??0),t.length-(g.suffix?.length??0)),x=decodeURIComponent(y);a["*"]=x,a._splat=x;break}}return a}function hI(t){const e=[t];for(;t.parentRoute;)t=t.parentRoute,e.push(t);return e.reverse(),e}function pI(t){const e=Array(t.depth+1);do e[t.depth]=t,t=t.parent;while(t);return e}function mI(t,e,n,r){if(t==="/"&&n.index)return{node:n.index,skipped:0};const s=!Yf(e),a=s&&t!=="/",l=e.length-(s?1:0),c=[{node:n,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let f=null,d=null,m=null;for(;c.length;){const p=c.pop();let{node:g,index:y,skipped:x,depth:S,statics:E,dynamics:C,optionals:k}=p;r&&g.route&&g.kind!==Ya&&vl(d,p)&&(d=p);const R=y===l;if(R&&(g.route&&!a&&vl(m,p)&&(m=p),!g.optional&&!g.wildcard&&!g.index))continue;const N=R?void 0:e[y];let j;if(R&&g.index){const T={node:g.index,index:y,skipped:x,depth:S+1,statics:E,dynamics:C,optionals:k};if(E===l&&!C&&!k&&!x)return T;vl(m,T)&&(m=T)}if(g.wildcard&&vl(f,p))for(const T of g.wildcard){const{prefix:D,suffix:L}=T;if(!(D&&(R||!(T.caseSensitive?N:j??=N.toLowerCase()).startsWith(D)))){if(L){if(R)continue;const P=e.slice(y).join("/").slice(-L.length);if((T.caseSensitive?P:P.toLowerCase())!==L)continue}f={node:T,index:l,skipped:x,depth:S,statics:E,dynamics:C,optionals:k};break}}if(g.optional){const T=x|1<<S,D=S+1;for(let L=g.optional.length-1;L>=0;L--){const P=g.optional[L];c.push({node:P,index:y,skipped:T,depth:D,statics:E,dynamics:C,optionals:k})}if(!R)for(let L=g.optional.length-1;L>=0;L--){const P=g.optional[L],{prefix:M,suffix:B}=P;if(M||B){const G=P.caseSensitive?N:j??=N.toLowerCase();if(M&&!G.startsWith(M)||B&&!G.endsWith(B))continue}c.push({node:P,index:y+1,skipped:x,depth:D,statics:E,dynamics:C,optionals:k+1})}}if(!R&&g.dynamic&&N)for(let T=g.dynamic.length-1;T>=0;T--){const D=g.dynamic[T],{prefix:L,suffix:P}=D;if(L||P){const M=D.caseSensitive?N:j??=N.toLowerCase();if(L&&!M.startsWith(L)||P&&!M.endsWith(P))continue}c.push({node:D,index:y+1,skipped:x,depth:S+1,statics:E,dynamics:C+1,optionals:k})}if(!R&&g.staticInsensitive){const T=g.staticInsensitive.get(j??=N.toLowerCase());T&&c.push({node:T,index:y+1,skipped:x,depth:S+1,statics:E+1,dynamics:C,optionals:k})}if(!R&&g.static){const T=g.static.get(N);T&&c.push({node:T,index:y+1,skipped:x,depth:S+1,statics:E+1,dynamics:C,optionals:k})}}if(m&&f)return vl(f,m)?m:f;if(m)return m;if(f)return f;if(r&&d){let p=d.index;for(let y=0;y<d.index;y++)p+=e[y].length;const g=p===t.length?"/":t.slice(p);return{node:d.node,skipped:d.skipped,"**":decodeURIComponent(g)}}return null}function vl(t,e){return t?e.statics>t.statics||e.statics===t.statics&&(e.dynamics>t.dynamics||e.dynamics===t.dynamics&&(e.optionals>t.optionals||e.optionals===t.optionals&&((e.node.kind===Ya)>(t.node.kind===Ya)||e.node.kind===Ya==(t.node.kind===Ya)&&e.depth>t.depth))):!0}function Of(t){return r0(t.filter(e=>e!==void 0).join("/"))}function r0(t){return t.replace(/\/{2,}/g,"/")}function lE(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function $i(t){const e=t.length;return e>1&&t[e-1]==="/"?t.replace(/\/{1,}$/,""):t}function uE(t){return $i(lE(t))}function Wf(t,e){return t?.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function gI(t,e,n){return Wf(t,n)===Wf(e,n)}function yI({base:t,to:e,trailingSlash:n="never",cache:r}){const s=e.startsWith("/"),a=!s&&e===".";let l;if(r){l=s?e:a?t:t+"\0"+e;const p=r.get(l);if(p)return p}let c;if(a)c=t.split("/");else if(s)c=e.split("/");else{for(c=t.split("/");c.length>1&&Yf(c)==="";)c.pop();const p=e.split("/");for(let g=0,y=p.length;g<y;g++){const x=p[g];x===""?g?g===y-1&&c.push(x):c=[x]:x===".."?c.pop():x==="."||c.push(x)}}c.length>1&&(Yf(c)===""?n==="never"&&c.pop():n==="always"&&c.push(""));let f,d="";for(let p=0;p<c.length;p++){p>0&&(d+="/");const g=c[p];if(!g)continue;f=t0(g,0,f);const y=f[0];if(y===lo){d+=g;continue}const x=f[5],S=g.substring(0,f[1]),E=g.substring(f[4],x),C=g.substring(f[2],f[3]);y===Hi?d+=S||E?`${S}{$${C}}${E}`:`$${C}`:y===Vi?d+=S||E?`${S}{$}${E}`:"$":d+=`${S}{-$${C}}${E}`}d=r0(d);const m=d||"/";return l&&r&&r.set(l,m),m}function Nm(t,e,n){const r=e[t];return typeof r!="string"?r:t==="_splat"?encodeURI(r):vI(r,n)}function zm({path:t,params:e,decodeCharMap:n}){let r=!1;const s={};if(!t||t==="/")return{interpolatedPath:"/",usedParams:s,isMissingParams:r};if(!t.includes("$"))return{interpolatedPath:t,usedParams:s,isMissingParams:r};const a=t.length;let l=0,c,f="";for(;l<a;){const m=l;c=t0(t,m,c);const p=c[5];if(l=p+1,m===p)continue;const g=c[0];if(g===lo){f+="/"+t.substring(m,p);continue}if(g===Vi){const y=e._splat;s._splat=y,s["*"]=y;const x=t.substring(m,c[1]),S=t.substring(c[4],p);if(!y){r=!0,(x||S)&&(f+="/"+x+S);continue}const E=Nm("_splat",e,n);f+="/"+x+E+S;continue}if(g===Hi){const y=t.substring(c[2],c[3]);!r&&!(y in e)&&(r=!0),s[y]=e[y];const x=t.substring(m,c[1]),S=t.substring(c[4],p),E=Nm(y,e,n)??"undefined";f+="/"+x+E+S;continue}if(g===uu){const y=t.substring(c[2],c[3]),x=e[y];if(x==null)continue;s[y]=x;const S=t.substring(m,c[1]),E=t.substring(c[4],p),C=Nm(y,e,n)??"";f+="/"+S+C+E;continue}}return t.endsWith("/")&&(f+="/"),{usedParams:s,interpolatedPath:f||"/",isMissingParams:r}}function vI(t,e){let n=encodeURIComponent(t);if(e)for(const[r,s]of e)n=n.replaceAll(r,s);return n}function Wn(t){return!!t?.isNotFound}function bI(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const ed="tsr-scroll-restoration-v1_3",xI=(t,e)=>{let n;return(...r)=>{n||(n=setTimeout(()=>{t(...r),n=null},e))}};function SI(){const t=bI();if(!t)return null;const e=t.getItem(ed);let n=e?JSON.parse(e):{};return{state:n,set:r=>(n=Zs(r,n)||n,t.setItem(ed,JSON.stringify(n)))}}const nf=SI(),qg=t=>t.state.__TSR_key||t.href;function wI(t){const e=[];let n;for(;n=t.parentNode;)e.push(`${t.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,t)+1})`),t=n;return`${e.reverse().join(" > ")}`.toLowerCase()}let td=!1;function cE({storageKey:t,key:e,behavior:n,shouldScrollRestoration:r,scrollToTopSelectors:s,location:a}){let l;try{l=JSON.parse(sessionStorage.getItem(t)||"{}")}catch(d){console.error(d);return}const c=e||window.history.state?.__TSR_key,f=l[c];td=!0;e:{if(r&&f&&Object.keys(f).length>0){for(const p in f){const g=f[p];if(p==="window")window.scrollTo({top:g.scrollY,left:g.scrollX,behavior:n});else if(p){const y=document.querySelector(p);y&&(y.scrollLeft=g.scrollX,y.scrollTop=g.scrollY)}}break e}const d=(a??window.location).hash.split("#",2)[1];if(d){const p=window.history.state?.__hashScrollIntoViewOptions??!0;if(p){const g=document.getElementById(d);g&&g.scrollIntoView(p)}break e}const m={top:0,left:0,behavior:n};if(window.scrollTo(m),s)for(const p of s){if(p==="window")continue;const g=typeof p=="function"?p():document.querySelector(p);g&&g.scrollTo(m)}}td=!1}function _I(t,e){if(!nf&&!t.isServer||((t.options.scrollRestoration??!1)&&(t.isScrollRestoring=!0),t.isServer||t.isScrollRestorationSetup||!nf))return;t.isScrollRestorationSetup=!0,td=!1;const r=t.options.getScrollRestorationKey||qg;window.history.scrollRestoration="manual";const s=a=>{if(td||!t.isScrollRestoring)return;let l="";if(a.target===document||a.target===window)l="window";else{const f=a.target.getAttribute("data-scroll-restoration-id");f?l=`[data-scroll-restoration-id="${f}"]`:l=wI(a.target)}const c=r(t.state.location);nf.set(f=>{const d=f[c]||={},m=d[l]||={};if(l==="window")m.scrollX=window.scrollX||0,m.scrollY=window.scrollY||0;else if(l){const p=document.querySelector(l);p&&(m.scrollX=p.scrollLeft||0,m.scrollY=p.scrollTop||0)}return f})};typeof document<"u"&&document.addEventListener("scroll",xI(s,100),!0),t.subscribe("onRendered",a=>{const l=r(a.toLocation);if(!t.resetNextScroll){t.resetNextScroll=!0;return}typeof t.options.scrollRestoration=="function"&&!t.options.scrollRestoration({location:t.latestLocation})||(cE({storageKey:ed,key:l,behavior:t.options.scrollRestorationBehavior,shouldScrollRestoration:t.isScrollRestoring,scrollToTopSelectors:t.options.scrollToTopSelectors,location:t.history.location}),t.isScrollRestoring&&nf.set(c=>(c[l]||={},c)))})}function CI(t){if(typeof document<"u"&&document.querySelector){const e=t.state.location.state.__hashScrollIntoViewOptions??!0;if(e&&t.state.location.hash!==""){const n=document.getElementById(t.state.location.hash);n&&n.scrollIntoView(e)}}}function EI(t,e=String){const n=new URLSearchParams;for(const r in t){const s=t[r];s!==void 0&&n.set(r,e(s))}return n.toString()}function Dm(t){return t?t==="false"?!1:t==="true"?!0:+t*0===0&&+t+""===t?+t:t:""}function kI(t){const e=new URLSearchParams(t),n={};for(const[r,s]of e.entries()){const a=n[r];a==null?n[r]=Dm(s):Array.isArray(a)?a.push(Dm(s)):n[r]=[a,Dm(s)]}return n}const RI=AI(JSON.parse),TI=OI(JSON.stringify,JSON.parse);function AI(t){return e=>{e[0]==="?"&&(e=e.substring(1));const n=kI(e);for(const r in n){const s=n[r];if(typeof s=="string")try{n[r]=t(s)}catch{}}return n}}function OI(t,e){const n=typeof e=="function";function r(s){if(typeof s=="object"&&s!==null)try{return t(s)}catch{}else if(n&&typeof s=="string")try{return e(s),t(s)}catch{}return s}return s=>{const a=EI(s,r);return a?`?${a}`:""}}const Jn="__root__";function MI(t){if(t.statusCode=t.statusCode||t.code||307,!t.reloadDocument&&typeof t.href=="string")try{new URL(t.href),t.reloadDocument=!0}catch{}const e=new Headers(t.headers);t.href&&e.get("Location")===null&&e.set("Location",t.href);const n=new Response(null,{status:t.statusCode,headers:e});if(n.options=t,t.throw)throw n;return n}function br(t){return t instanceof Response&&!!t.options}const Mf=t=>{if(!t.rendered)return t.rendered=!0,t.onReady?.()},Nd=(t,e)=>!!(t.preload&&!t.router.state.matches.some(n=>n.id===e)),s0=(t,e,n=!0)=>{const r={...t.router.options.context??{}},s=n?e:e-1;for(let a=0;a<=s;a++){const l=t.matches[a];if(!l)continue;const c=t.router.getMatch(l.id);c&&Object.assign(r,c.__routeContext,c.__beforeLoadContext)}return r},fE=(t,e)=>{const n=t.router.routesById[e.routeId??""]??t.router.routeTree;!n.options.notFoundComponent&&t.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=t.router.options.defaultNotFoundComponent),vs(n.options.notFoundComponent);const r=t.matches.find(s=>s.routeId===n.id);vs(r,"Could not find match for route: "+n.id),t.updateMatch(r.id,s=>({...s,status:"notFound",error:e,isFetching:!1})),e.routerCode==="BEFORE_LOAD"&&n.parentRoute&&(e.routeId=n.parentRoute.id,fE(t,e))},Ys=(t,e,n)=>{if(!(!br(n)&&!Wn(n))){if(br(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(e){e._nonReactive.beforeLoadPromise?.resolve(),e._nonReactive.loaderPromise?.resolve(),e._nonReactive.beforeLoadPromise=void 0,e._nonReactive.loaderPromise=void 0;const r=br(n)?"redirected":"notFound";e._nonReactive.error=n,t.updateMatch(e.id,s=>({...s,status:r,isFetching:!1,error:n})),Wn(n)&&!n.routeId&&(n.routeId=e.routeId),e._nonReactive.loadPromise?.resolve()}throw br(n)?(t.rendered=!0,n.options._fromLocation=t.location,n.redirectHandled=!0,n=t.router.resolveRedirect(n),n):(fE(t,n),n)}},dE=(t,e)=>{const n=t.router.getMatch(e);return!!(!t.router.isServer&&n._nonReactive.dehydrated||t.router.isServer&&n.ssr===!1)},bl=(t,e,n,r)=>{const{id:s,routeId:a}=t.matches[e],l=t.router.looseRoutesById[a];if(n instanceof Promise)throw n;n.routerCode=r,t.firstBadMatchIndex??=e,Ys(t,t.router.getMatch(s),n);try{l.options.onError?.(n)}catch(c){n=c,Ys(t,t.router.getMatch(s),n)}t.updateMatch(s,c=>(c._nonReactive.beforeLoadPromise?.resolve(),c._nonReactive.beforeLoadPromise=void 0,c._nonReactive.loadPromise?.resolve(),{...c,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},II=(t,e,n,r)=>{const s=t.router.getMatch(e),a=t.matches[n-1]?.id,l=a?t.router.getMatch(a):void 0;if(t.router.isShell()){s.ssr=r.id===Jn;return}if(l?.ssr===!1){s.ssr=!1;return}const c=y=>y===!0&&l?.ssr==="data-only"?"data-only":y,f=t.router.options.defaultSsr??!0;if(r.options.ssr===void 0){s.ssr=c(f);return}if(typeof r.options.ssr!="function"){s.ssr=c(r.options.ssr);return}const{search:d,params:m}=s,p={search:rf(d,s.searchError),params:rf(m,s.paramsError),location:t.location,matches:t.matches.map(y=>({index:y.index,pathname:y.pathname,fullPath:y.fullPath,staticData:y.staticData,id:y.id,routeId:y.routeId,search:rf(y.search,y.searchError),params:rf(y.params,y.paramsError),ssr:y.ssr}))},g=r.options.ssr(p);if(ni(g))return g.then(y=>{s.ssr=c(y??f)});s.ssr=c(g??f)},hE=(t,e,n,r)=>{if(r._nonReactive.pendingTimeout!==void 0)return;const s=n.options.pendingMs??t.router.options.defaultPendingMs;if(!!(t.onReady&&!t.router.isServer&&!Nd(t,e)&&(n.options.loader||n.options.beforeLoad||gE(n))&&typeof s=="number"&&s!==1/0&&(n.options.pendingComponent??t.router.options?.defaultPendingComponent))){const l=setTimeout(()=>{Mf(t)},s);r._nonReactive.pendingTimeout=l}},NI=(t,e,n)=>{const r=t.router.getMatch(e);if(!r._nonReactive.beforeLoadPromise&&!r._nonReactive.loaderPromise)return;hE(t,e,n,r);const s=()=>{const a=t.router.getMatch(e);a.preload&&(a.status==="redirected"||a.status==="notFound")&&Ys(t,a,a.error)};return r._nonReactive.beforeLoadPromise?r._nonReactive.beforeLoadPromise.then(s):s()},zI=(t,e,n,r)=>{const s=t.router.getMatch(e),a=s._nonReactive.loadPromise;s._nonReactive.loadPromise=oo(()=>{a?.resolve()});const{paramsError:l,searchError:c}=s;l&&bl(t,n,l,"PARSE_PARAMS"),c&&bl(t,n,c,"VALIDATE_SEARCH"),hE(t,e,r,s);const f=new AbortController,d=t.matches[n-1]?.id;(d?t.router.getMatch(d):void 0)?.context??t.router.options.context;let p=!1;const g=()=>{p||(p=!0,t.updateMatch(e,T=>({...T,isFetching:"beforeLoad",fetchCount:T.fetchCount+1,abortController:f})))},y=()=>{s._nonReactive.beforeLoadPromise?.resolve(),s._nonReactive.beforeLoadPromise=void 0,t.updateMatch(e,T=>({...T,isFetching:!1}))};if(!r.options.beforeLoad){Vl(()=>{g(),y()});return}s._nonReactive.beforeLoadPromise=oo();const x={...s0(t,n,!1),...s.__routeContext},{search:S,params:E,cause:C}=s,k=Nd(t,e),R={search:S,abortController:f,params:E,preload:k,context:x,location:t.location,navigate:T=>t.router.navigate({...T,_fromLocation:t.location}),buildLocation:t.router.buildLocation,cause:k?"preload":C,matches:t.matches,...t.router.options.additionalContext},N=T=>{if(T===void 0){Vl(()=>{g(),y()});return}(br(T)||Wn(T))&&(g(),bl(t,n,T,"BEFORE_LOAD")),Vl(()=>{g(),t.updateMatch(e,D=>({...D,__beforeLoadContext:T})),y()})};let j;try{if(j=r.options.beforeLoad(R),ni(j))return g(),j.catch(T=>{bl(t,n,T,"BEFORE_LOAD")}).then(N)}catch(T){g(),bl(t,n,T,"BEFORE_LOAD")}N(j)},DI=(t,e)=>{const{id:n,routeId:r}=t.matches[e],s=t.router.looseRoutesById[r],a=()=>{if(t.router.isServer){const f=II(t,n,e,s);if(ni(f))return f.then(c)}return c()},l=()=>zI(t,n,e,s),c=()=>{if(dE(t,n))return;const f=NI(t,n,s);return ni(f)?f.then(l):l()};return a()},jI=(t,e,n)=>{const r=t.router.getMatch(e);if(!r||!n.options.head&&!n.options.scripts&&!n.options.headers)return;const s={matches:t.matches,match:r,params:r.params,loaderData:r.loaderData};return Promise.all([n.options.head?.(s),n.options.scripts?.(s),n.options.headers?.(s)]).then(([a,l,c])=>{const f=a?.meta,d=a?.links,m=a?.scripts,p=a?.styles;return{meta:f,links:d,headScripts:m,headers:c,scripts:l,styles:p}})},pE=(t,e,n,r)=>{const s=t.matchPromises[n-1],{params:a,loaderDeps:l,abortController:c,cause:f}=t.router.getMatch(e),d=s0(t,n),m=Nd(t,e);return{params:a,deps:l,preload:!!m,parentMatchPromise:s,abortController:c,context:d,location:t.location,navigate:p=>t.router.navigate({...p,_fromLocation:t.location}),cause:m?"preload":f,route:r,...t.router.options.additionalContext}},e_=async(t,e,n,r)=>{try{const s=t.router.getMatch(e);try{(!t.router.isServer||s.ssr===!0)&&mE(r);const a=r.options.loader?.(pE(t,e,n,r)),l=r.options.loader&&ni(a);if((l||r._lazyPromise||r._componentsPromise||r.options.head||r.options.scripts||r.options.headers||s._nonReactive.minPendingPromise)&&t.updateMatch(e,d=>({...d,isFetching:"loader"})),r.options.loader){const d=l?await a:a;Ys(t,t.router.getMatch(e),d),d!==void 0&&t.updateMatch(e,m=>({...m,loaderData:d}))}r._lazyPromise&&await r._lazyPromise;const f=s._nonReactive.minPendingPromise;f&&await f,r._componentsPromise&&await r._componentsPromise,t.updateMatch(e,d=>({...d,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(a){let l=a;const c=s._nonReactive.minPendingPromise;c&&await c,Wn(a)&&await r.options.notFoundComponent?.preload?.(),Ys(t,t.router.getMatch(e),a);try{r.options.onError?.(a)}catch(f){l=f,Ys(t,t.router.getMatch(e),f)}t.updateMatch(e,f=>({...f,error:l,status:"error",isFetching:!1}))}}catch(s){const a=t.router.getMatch(e);a&&(a._nonReactive.loaderPromise=void 0),Ys(t,a,s)}},LI=async(t,e)=>{const{id:n,routeId:r}=t.matches[e];let s=!1,a=!1;const l=t.router.looseRoutesById[r],c=()=>{t.updateMatch(n,m=>({...m,context:s0(t,e)}))};if(dE(t,n)){if(t.router.isServer)return t.router.getMatch(n)}else{const m=t.router.getMatch(n);if(m._nonReactive.loaderPromise){if(m.status==="success"&&!t.sync&&!m.preload)return m;await m._nonReactive.loaderPromise;const p=t.router.getMatch(n),g=p._nonReactive.error||p.error;g&&Ys(t,p,g)}else{const p=Date.now()-m.updatedAt,g=Nd(t,n),y=g?l.options.preloadStaleTime??t.router.options.defaultPreloadStaleTime??3e4:l.options.staleTime??t.router.options.defaultStaleTime??0,x=l.options.shouldReload,S=typeof x=="function"?x(pE(t,n,e,l)):x,E=!!g&&!t.router.state.matches.some(N=>N.id===n),C=t.router.getMatch(n);C._nonReactive.loaderPromise=oo(),E!==C.preload&&t.updateMatch(n,N=>({...N,preload:E}));const{status:k,invalid:R}=C;s=k==="success"&&(R||(S??p>y)),g&&l.options.preload===!1||(s&&!t.sync?(a=!0,(async()=>{try{await e_(t,n,e,l),c();const N=t.router.getMatch(n);N._nonReactive.loaderPromise?.resolve(),N._nonReactive.loadPromise?.resolve(),N._nonReactive.loaderPromise=void 0}catch(N){br(N)&&await t.router.navigate(N.options)}})()):(k!=="success"||s&&t.sync)&&await e_(t,n,e,l))}}const f=t.router.getMatch(n);a||(f._nonReactive.loaderPromise?.resolve(),f._nonReactive.loadPromise?.resolve()),clearTimeout(f._nonReactive.pendingTimeout),f._nonReactive.pendingTimeout=void 0,a||(f._nonReactive.loaderPromise=void 0),f._nonReactive.dehydrated=void 0,a||c();const d=a?f.isFetching:!1;return d!==f.isFetching||f.invalid!==!1?(t.updateMatch(n,m=>({...m,isFetching:d,invalid:!1})),t.router.getMatch(n)):f};async function t_(t){const e=Object.assign(t,{matchPromises:[]});!e.router.isServer&&e.router.state.matches.some(n=>n._forcePending)&&Mf(e);try{for(let c=0;c<e.matches.length;c++){const f=DI(e,c);ni(f)&&await f}const n=e.firstBadMatchIndex??e.matches.length;for(let c=0;c<n;c++)e.matchPromises.push(LI(e,c));const s=(await Promise.allSettled(e.matchPromises)).filter(c=>c.status==="rejected").map(c=>c.reason);let a;for(const c of s){if(br(c))throw c;!a&&Wn(c)&&(a=c)}for(const c of e.matches){const{id:f,routeId:d}=c,m=e.router.looseRoutesById[d];try{const p=jI(e,f,m);if(p){const g=await p;e.updateMatch(f,y=>({...y,...g}))}}catch(p){console.error(`Error executing head for route ${d}:`,p)}}if(a)throw a;const l=Mf(e);ni(l)&&await l}catch(n){if(Wn(n)&&!e.preload){const r=Mf(e);throw ni(r)&&await r,n}if(br(n))throw n}return e.matches}async function mE(t){if(!t._lazyLoaded&&t._lazyPromise===void 0&&(t.lazyFn?t._lazyPromise=t.lazyFn().then(e=>{const{id:n,...r}=e.options;Object.assign(t.options,r),t._lazyLoaded=!0,t._lazyPromise=void 0}):t._lazyLoaded=!0),!t._componentsLoaded&&t._componentsPromise===void 0){const e=()=>{const n=[];for(const r of yE){const s=t.options[r]?.preload;s&&n.push(s())}if(n.length)return Promise.all(n).then(()=>{t._componentsLoaded=!0,t._componentsPromise=void 0});t._componentsLoaded=!0,t._componentsPromise=void 0};t._componentsPromise=t._lazyPromise?t._lazyPromise.then(e):e()}return t._componentsPromise}function rf(t,e){return e?{status:"error",error:e}:{status:"success",value:t}}function gE(t){for(const e of yE)if(t.options[e]?.preload)return!0;return!1}const yE=["component","errorComponent","pendingComponent","notFoundComponent"];function PI(t){return{input:({url:e})=>{for(const n of t)e=vE(n,e);return e},output:({url:e})=>{for(let n=t.length-1;n>=0;n--)e=bE(t[n],e);return e}}}function $I(t){const e=uE(t.basepath),n=`/${e}`,r=`${n}/`,s=t.caseSensitive?n:n.toLowerCase(),a=t.caseSensitive?r:r.toLowerCase();return{input:({url:l})=>{const c=t.caseSensitive?l.pathname:l.pathname.toLowerCase();return c===s?l.pathname="/":c.startsWith(a)&&(l.pathname=l.pathname.slice(n.length)),l},output:({url:l})=>(l.pathname=Of(["/",e,l.pathname]),l)}}function vE(t,e){const n=t?.input?.({url:e});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return e}function bE(t,e){const n=t?.output?.({url:e});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return e}function Fi(t){const e=t.resolvedLocation,n=t.location,r=e?.pathname!==n.pathname,s=e?.href!==n.href,a=e?.hash!==n.hash;return{fromLocation:e,toLocation:n,pathChanged:r,hrefChanged:s,hashChanged:a}}class FI{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=n=>n(),this.update=n=>{n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const r=this.options,s=this.basepath??r?.basepath??"/",a=this.basepath===void 0,l=r?.rewrite;this.options={...r,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(g=>[encodeURIComponent(g),g])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=WM())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new JM(UI(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(g=>!["redirected"].includes(g.status))}}}),_I(this));let c=!1;const f=this.options.basepath??"/",d=this.options.rewrite;if(a||s!==f||l!==d){this.basepath=f;const g=[];uE(f)!==""&&g.push($I({basepath:f})),d&&g.push(d),this.rewrite=g.length===0?void 0:g.length===1?g[0]:PI(g),this.history&&this.updateLatestLocation(),c=!0}c&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:n,routesByPath:r,processedTree:s}=fI(this.routeTree,this.options.caseSensitive,(l,c)=>{l.init({originalIndex:c})});this.options.routeMasks&&aI(this.options.routeMasks,s),this.routesById=n,this.routesByPath=r,this.processedTree=s;const a=this.options.notFoundRoute;a&&(a.init({originalIndex:99999999999}),this.routesById[a.id]=a)},this.subscribe=(n,r)=>{const s={eventType:n,fn:r};return this.subscribers.add(s),()=>{this.subscribers.delete(s)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const s=({href:f,state:d})=>{const m=new URL(f,this.origin),p=vE(this.rewrite,m),g=this.options.parseSearch(p.search),y=this.options.stringifySearch(g);return p.search=y,{href:p.href.replace(p.origin,""),publicHref:f,url:p,pathname:Ww(p.pathname),searchStr:y,search:mr(r?.search,g),hash:p.hash.split("#").reverse()[0]??"",state:mr(r?.state,d)}},a=s(n),{__tempLocation:l,__tempKey:c}=a.state;if(l&&(!c||c===this.tempLocationKey)){const f=s(l);return f.state.key=a.state.key,f.state.__TSR_key=a.state.__TSR_key,delete f.state.__tempLocation,{...f,maskedLocation:a}}return a},this.resolvePathCache=Xf(1e3),this.resolvePathWithBase=(n,r)=>yI({base:n,to:r0(r),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(n,r,s)=>typeof n=="string"?this.matchRoutesInternal({pathname:n,search:r},s):this.matchRoutesInternal(n,r),this.getMatchedRoutes=n=>qI({pathname:n,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r._nonReactive.pendingTimeout),r._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const n=this.state.matches.filter(a=>a.status==="pending"),r=this.state.matches.filter(a=>a.isFetching==="loader");new Set([...this.state.pendingMatches??[],...n,...r]).forEach(a=>{this.cancelMatch(a.id)})},this.buildLocation=n=>{const r=(a={})=>{const l=a._fromLocation||this.pendingBuiltLocation||this.latestLocation,c=this.matchRoutes(l,{_buildLocation:!0}),f=Yf(c);a.from;const d=a.unsafeRelative==="path"?l.pathname:a.from??f.fullPath,m=this.resolvePathWithBase(d,"."),p=f.search,g={...f.params},y=a.to?this.resolvePathWithBase(m,`${a.to}`):this.resolvePathWithBase(m,"."),x=a.params===!1||a.params===null?{}:(a.params??!0)===!0?g:Object.assign(g,Zs(a.params,g)),S=zm({path:y,params:x}).interpolatedPath,E=this.matchRoutes(S,void 0,{_buildLocation:!0}).map(M=>this.looseRoutesById[M.routeId]);if(Object.keys(x).length>0)for(const M of E){const B=M.options.params?.stringify??M.options.stringifyParams;B&&Object.assign(x,B(x))}const C=n.leaveParams?y:Ww(zm({path:y,params:x,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath);let k=p;if(n._includeValidateSearch&&this.options.search?.strict){const M={};E.forEach(B=>{if(B.options.validateSearch)try{Object.assign(M,Hg(B.options.validateSearch,{...M,...k}))}catch{}}),k=M}k=HI({search:k,dest:a,destRoutes:E,_includeValidateSearch:n._includeValidateSearch}),k=mr(p,k);const R=this.options.stringifySearch(k),N=a.hash===!0?l.hash:a.hash?Zs(a.hash,l.hash):void 0,j=N?`#${N}`:"";let T=a.state===!0?l.state:a.state?Zs(a.state,l.state):{};T=mr(l.state,T);const D=`${C}${R}${j}`,L=new URL(D,this.origin),P=bE(this.rewrite,L);return{publicHref:P.pathname+P.search+P.hash,href:D,url:P,pathname:C,search:k,searchStr:R,state:T,hash:N??"",unmaskOnReload:a.unmaskOnReload}},s=(a={},l)=>{const c=r(a);let f=l?r(l):void 0;if(!f){const d={};if(this.options.routeMasks){const m=oI(c.pathname,this.processedTree);if(m){Object.assign(d,m.params);const{from:p,params:g,...y}=m.route,x=g===!1||g===null?{}:(g??!0)===!0?d:Object.assign(d,Zs(g,d));l={from:n.from,...y,params:x},f=r(l)}}}return f&&(c.maskedLocation=f),c};return n.mask?s(n,{from:n.from,...n.mask}):s(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...s})=>{const a=()=>{const f=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];f.forEach(m=>{s.state[m]=this.latestLocation.state[m]});const d=Pi(s.state,this.latestLocation.state);return f.forEach(m=>{delete s.state[m]}),d},l=$i(this.latestLocation.href)===$i(s.href),c=this.commitLocationPromise;if(this.commitLocationPromise=oo(()=>{c?.resolve()}),l&&a())this.load();else{let{maskedLocation:f,hashScrollIntoView:d,url:m,...p}=s;f&&(p={...f,state:{...f.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=d??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[s.replace?"replace":"push"](p.publicHref,p.state,{ignoreBlocker:r})}return this.resetNextScroll=s.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:s,viewTransition:a,ignoreBlocker:l,href:c,...f}={})=>{if(c){const p=this.history.location.state.__TSR_index,g=Zf(c,{__TSR_index:n?p:p+1});f.to=g.pathname,f.search=this.options.parseSearch(g.search),f.hash=g.hash.slice(1)}const d=this.buildLocation({...f,_includeValidateSearch:!0});this.pendingBuiltLocation=d;const m=this.commitLocation({...d,viewTransition:a,replace:n,resetScroll:r,hashScrollIntoView:s,ignoreBlocker:l});return Promise.resolve().then(()=>{this.pendingBuiltLocation===d&&(this.pendingBuiltLocation=void 0)}),m},this.navigate=async({to:n,reloadDocument:r,href:s,publicHref:a,...l})=>{let c=!1;if(s)try{new URL(`${s}`),c=!0}catch{}if(c&&!r&&(r=!0),r){if(!s||!a&&!c){const d=this.buildLocation({to:n,...l});s=s??d.url.href,a=a??d.url.href}const f=!c&&a?a:s;if(!l.ignoreBlocker){const m=this.history.getBlockers?.()??[];for(const p of m)if(p?.blockerFn&&await p.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}return l.replace?window.location.replace(f):window.location.href=f,Promise.resolve()}return this.buildAndCommitLocation({...l,href:s,to:n,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const r=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});if(this.latestLocation.publicHref!==r.publicHref||r.url.origin!==this.origin){const s=this.getParsedLocationHref(r);throw MI({href:s})}}const n=this.matchRoutes(this.latestLocation);this.__store.setState(r=>({...r,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:n,cachedMatches:r.cachedMatches.filter(s=>!n.some(a=>a.id===s.id))}))},this.load=async n=>{let r,s,a;for(a=new Promise(c=>{this.startTransition(async()=>{try{this.beforeLoad();const f=this.latestLocation,d=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...Fi({resolvedLocation:d,location:f})}),this.emit({type:"onBeforeLoad",...Fi({resolvedLocation:d,location:f})}),await t_({router:this,sync:n?.sync,matches:this.state.pendingMatches,location:f,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let m=[],p=[],g=[];Vl(()=>{this.__store.setState(y=>{const x=y.matches,S=y.pendingMatches||y.matches;return m=x.filter(E=>!S.some(C=>C.id===E.id)),p=S.filter(E=>!x.some(C=>C.id===E.id)),g=S.filter(E=>x.some(C=>C.id===E.id)),{...y,isLoading:!1,loadedAt:Date.now(),matches:S,pendingMatches:void 0,cachedMatches:[...y.cachedMatches,...m.filter(E=>E.status!=="error"&&E.status!=="notFound")]}}),this.clearExpiredCache()}),[[m,"onLeave"],[p,"onEnter"],[g,"onStay"]].forEach(([y,x])=>{y.forEach(S=>{this.looseRoutesById[S.routeId].options[x]?.(S)})})})})}})}catch(f){br(f)?(r=f,this.isServer||this.navigate({...r.options,replace:!0,ignoreBlocker:!0})):Wn(f)&&(s=f),this.__store.setState(d=>({...d,statusCode:r?r.status:s?404:d.matches.some(m=>m.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===a&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),c()})}),this.latestLoadPromise=a,await a;this.latestLoadPromise&&a!==this.latestLoadPromise;)await this.latestLoadPromise;let l;this.hasNotFoundMatch()?l=404:this.__store.state.matches.some(c=>c.status==="error")&&(l=500),l!==void 0&&this.__store.setState(c=>({...c,statusCode:l}))},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let s;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const a=this.latestLocation,l=this.state.resolvedLocation,c=typeof r.types=="function"?r.types(Fi({resolvedLocation:l,location:a})):r.types;if(c===!1){n();return}s={update:n,types:c}}else s=n;document.startViewTransition(s)}else n()},this.updateMatch=(n,r)=>{this.startTransition(()=>{const s=this.state.pendingMatches?.some(a=>a.id===n)?"pendingMatches":this.state.matches.some(a=>a.id===n)?"matches":this.state.cachedMatches.some(a=>a.id===n)?"cachedMatches":"";s&&this.__store.setState(a=>({...a,[s]:a[s]?.map(l=>l.id===n?r(l):l)}))})},this.getMatch=n=>{const r=s=>s.id===n;return this.state.cachedMatches.find(r)??this.state.pendingMatches?.find(r)??this.state.matches.find(r)},this.invalidate=n=>{const r=s=>n?.filter?.(s)??!0?{...s,invalid:!0,...n?.forcePending||s.status==="error"||s.status==="notFound"?{status:"pending",error:void 0}:void 0}:s;return this.__store.setState(s=>({...s,matches:s.matches.map(r),cachedMatches:s.cachedMatches.map(r),pendingMatches:s.pendingMatches?.map(r)})),this.shouldViewTransition=!1,this.load({sync:n?.sync})},this.getParsedLocationHref=n=>{let r=n.url.href;return this.origin&&n.url.origin===this.origin&&(r=r.replace(this.origin,"")||"/"),r},this.resolveRedirect=n=>{if(!n.options.href){const r=this.buildLocation(n.options),s=this.getParsedLocationHref(r);n.options.href=r.href,n.headers.set("Location",s)}return n.headers.get("Location")||n.headers.set("Location",n.options.href),n},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(s=>({...s,cachedMatches:s.cachedMatches.filter(a=>!r(a))})):this.__store.setState(s=>({...s,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const s=this.looseRoutesById[r.routeId];if(!s.options.loader)return!0;const a=(r.preload?s.options.preloadGcTime??this.options.defaultPreloadGcTime:s.options.gcTime??this.options.defaultGcTime)??300*1e3;return r.status==="error"?!0:Date.now()-r.updatedAt>=a};this.clearCache({filter:n})},this.loadRouteChunk=mE,this.preloadRoute=async n=>{const r=this.buildLocation(n);let s=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const a=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(c=>c.id)),l=new Set([...a,...this.state.cachedMatches.map(c=>c.id)]);Vl(()=>{s.forEach(c=>{l.has(c.id)||this.__store.setState(f=>({...f,cachedMatches:[...f.cachedMatches,c]}))})});try{return s=await t_({router:this,matches:s,location:r,preload:!0,updateMatch:(c,f)=>{a.has(c)?s=s.map(d=>d.id===c?f(d):d):this.updateMatch(c,f)}}),s}catch(c){if(br(c))return c.options.reloadDocument?void 0:await this.preloadRoute({...c.options,_fromLocation:r});Wn(c)||console.error(c);return}},this.matchRoute=(n,r)=>{const s={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},a=this.buildLocation(s);if(r?.pending&&this.state.status!=="pending")return!1;const c=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,f=lI(a.pathname,r?.caseSensitive??!1,r?.fuzzy??!1,c.pathname,this.processedTree);return!f||n.params&&!Pi(f.params,n.params,{partial:!0})?!1:r?.includeSearch??!0?Pi(c.search,a.search,{partial:!0})?f.params:!1:f.params},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??TI,parseSearch:e.parseSearch??RI}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,n){const r=this.getMatchedRoutes(e.pathname),{foundRoute:s,routeParams:a}=r;let{matchedRoutes:l}=r,c=!1;(s?s.path!=="/"&&a["**"]:$i(e.pathname))&&(this.options.notFoundRoute?l=[...l,this.options.notFoundRoute]:c=!0);const f=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let p=l.length-1;p>=0;p--){const g=l[p];if(g.children)return g.id}return Jn}})(),d=[],m=p=>p?.id?p.context??this.options.context??void 0:this.options.context??void 0;return l.forEach((p,g)=>{const y=d[g-1],[x,S,E]=(()=>{const ee=y?.search??e.search,te=y?._strictSearch??void 0;try{const V=Hg(p.options.validateSearch,{...ee})??void 0;return[{...ee,...V},{...te,...V},void 0]}catch(V){let $=V;if(V instanceof nd||($=new nd(V.message,{cause:V})),n?.throwOnError)throw $;return[ee,{},$]}})(),C=p.options.loaderDeps?.({search:x})??"",k=C?JSON.stringify(C):"",{interpolatedPath:R,usedParams:N}=zm({path:p.fullPath,params:a,decodeCharMap:this.pathParamsDecodeCharMap}),j=p.id+R+k,T=this.getMatch(j),D=this.state.matches.find(ee=>ee.routeId===p.id),L=T?._strictParams??N;let P;if(!T){const ee=p.options.params?.parse??p.options.parseParams;if(ee)try{Object.assign(L,ee(L))}catch(te){if(Wn(te)||br(te)?P=te:P=new BI(te.message,{cause:te}),n?.throwOnError)throw P}}Object.assign(a,L);const M=D?"stay":"enter";let B;if(T)B={...T,cause:M,params:D?mr(D.params,a):a,_strictParams:L,search:mr(D?D.search:T.search,x),_strictSearch:S};else{const ee=p.options.loader||p.options.beforeLoad||p.lazyFn||gE(p)?"pending":"success";B={id:j,ssr:this.isServer?void 0:p.options.ssr,index:g,routeId:p.id,params:D?mr(D.params,a):a,_strictParams:L,pathname:R,updatedAt:Date.now(),search:D?mr(D.search,x):x,_strictSearch:S,searchError:void 0,status:ee,isFetching:!1,error:void 0,paramsError:P,__routeContext:void 0,_nonReactive:{loadPromise:oo()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:M,loaderDeps:D?mr(D.loaderDeps,C):C,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:p.options.staticData||{},fullPath:p.fullPath}}n?.preload||(B.globalNotFound=f===p.id),B.searchError=E;const G=m(y);B.context={...G,...B.__routeContext,...B.__beforeLoadContext},d.push(B)}),d.forEach((p,g)=>{const y=this.looseRoutesById[p.routeId];if(!this.getMatch(p.id)&&n?._buildLocation!==!0){const S=d[g-1],E=m(S);if(y.options.context){const C={deps:p.loaderDeps,params:p.params,context:E??{},location:e,navigate:k=>this.navigate({...k,_fromLocation:e}),buildLocation:this.buildLocation,cause:p.cause,abortController:p.abortController,preload:!!p.preload,matches:d};p.__routeContext=y.options.context(C)??void 0}p.context={...E,...p.__routeContext,...p.__beforeLoadContext}}}),d}}class nd extends Error{}class BI extends Error{}function UI(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Hg(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new nd("Async validation not supported");if(n.issues)throw new nd(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function qI({pathname:t,routesById:e,processedTree:n}){const r={},s=$i(t);let a;const l=uI(s,n,!0);return l&&(a=l.route,Object.assign(r,l.params)),{matchedRoutes:l?.branch||[e[Jn]],routeParams:r,foundRoute:a}}function HI({search:t,dest:e,destRoutes:n,_includeValidateSearch:r}){const s=n.reduce((c,f)=>{const d=[];if("search"in f.options)f.options.search?.middlewares&&d.push(...f.options.search.middlewares);else if(f.options.preSearchFilters||f.options.postSearchFilters){const m=({search:p,next:g})=>{let y=p;"preSearchFilters"in f.options&&f.options.preSearchFilters&&(y=f.options.preSearchFilters.reduce((S,E)=>E(S),p));const x=g(y);return"postSearchFilters"in f.options&&f.options.postSearchFilters?f.options.postSearchFilters.reduce((S,E)=>E(S),x):x};d.push(m)}if(r&&f.options.validateSearch){const m=({search:p,next:g})=>{const y=g(p);try{return{...y,...Hg(f.options.validateSearch,y)??void 0}}catch{return y}};d.push(m)}return c.concat(d)},[])??[],a=({search:c})=>e.search?e.search===!0?c:Zs(e.search,c):{};s.push(a);const l=(c,f)=>{if(c>=s.length)return f;const d=s[c];return d({search:f,next:p=>l(c+1,p)})};return l(0,t)}const VI="Error preloading route! ";class xE{constructor(e){if(this.init=n=>{this.originalIndex=n.originalIndex;const r=this.options,s=!r?.path&&!r?.id;this.parentRoute=this.options.getParentRoute?.(),s?this._path=Jn:this.parentRoute||vs(!1);let a=s?Jn:r?.path;a&&a!=="/"&&(a=lE(a));const l=r?.id||a;let c=s?Jn:Of([this.parentRoute.id===Jn?"":this.parentRoute.id,l]);a===Jn&&(a="/"),c!==Jn&&(c=Of(["/",c]));const f=c===Jn?"/":Of([this.parentRoute.fullPath,a]);this._path=a,this._id=c,this._fullPath=f,this._to=f},this.addChildren=n=>this._addFileChildren(n),this._addFileChildren=n=>(Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this),this._addFileTypes=()=>this,this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.options=e||{},this.isRoot=!e?.getParentRoute,e?.id&&e?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class KI extends xE{constructor(e){super(e)}}function i0(t){const e=t.errorComponent??zd;return w.jsx(GI,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?q.createElement(e,{error:n,reset:r}):t.children})}class GI extends q.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function zd({error:t}){const[e,n]=q.useState(!1);return w.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[w.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),w.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),w.jsx("div",{style:{height:".25rem"}}),e?w.jsx("div",{children:w.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?w.jsx("code",{children:t.message}):null})}):null]})}function QI({children:t,fallback:e=null}){return ZI()?w.jsx(Or.Fragment,{children:t}):w.jsx(Or.Fragment,{children:e})}function ZI(){return Or.useSyncExternalStore(YI,()=>!0,()=>!1)}function YI(){return()=>{}}var jm={exports:{}},Lm={},Pm={exports:{}},$m={};var n_;function JI(){if(n_)return $m;n_=1;var t=fo();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function c(p,g){var y=g(),x=r({inst:{value:y,getSnapshot:g}}),S=x[0].inst,E=x[1];return a(function(){S.value=y,S.getSnapshot=g,f(S)&&E({inst:S})},[p,y,g]),s(function(){return f(S)&&E({inst:S}),p(function(){f(S)&&E({inst:S})})},[p]),l(y),y}function f(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function d(p,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return $m.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,$m}var r_;function XI(){return r_||(r_=1,Pm.exports=JI()),Pm.exports}var s_;function WI(){if(s_)return Lm;s_=1;var t=fo(),e=XI();function n(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=t.useRef,l=t.useEffect,c=t.useMemo,f=t.useDebugValue;return Lm.useSyncExternalStoreWithSelector=function(d,m,p,g,y){var x=a(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=c(function(){function C(T){if(!k){if(k=!0,R=T,T=g(T),y!==void 0&&S.hasValue){var D=S.value;if(y(D,T))return N=D}return N=T}if(D=N,r(R,T))return D;var L=g(T);return y!==void 0&&y(D,L)?(R=T,D):(R=T,N=L)}var k=!1,R,N,j=p===void 0?null:p;return[function(){return C(m())},j===null?void 0:function(){return C(j())}]},[m,p,g,y]);var E=s(d,x[0],x[1]);return l(function(){S.hasValue=!0,S.value=E},[E]),f(E),E},Lm}var i_;function eN(){return i_||(i_=1,jm.exports=WI()),jm.exports}var tN=eN();function nN(t,e=r=>r,n={}){const r=n.equal??rN;return tN.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,r)}function rN(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!e.has(r)||!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();const n=a_(t);if(n.length!==a_(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}function a_(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}const Fm=q.createContext(null);function SE(){return typeof document>"u"?Fm:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Fm,Fm)}function nr(t){const e=q.useContext(SE());return t?.warn,e}function Pn(t){const e=nr({warn:t?.router===void 0}),n=t?.router||e,r=q.useRef(void 0);return nN(n.__store,s=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const a=mr(r.current,t.select(s));return r.current=a,a}return t.select(s)}return s})}const Dd=q.createContext(void 0),sN=q.createContext(void 0);function Br(t){const e=q.useContext(t.from?sN:Dd);return Pn({select:r=>{const s=r.matches.find(a=>t.from?t.from===a.routeId:a.id===e);if(vs(!((t.shouldThrow??!0)&&!s),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),s!==void 0)return t.select?t.select(s):s},structuralSharing:t.structuralSharing})}function a0(t){return Br({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function o0(t){const{select:e,...n}=t;return Br({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function Ji(t){return Br({from:t.from,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,strict:t.strict,select:e=>{const n=t.strict===!1?e.params:e._strictParams;return t.select?t.select(n):n}})}function l0(t){return Br({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}const sf=typeof window<"u"?q.useLayoutEffect:q.useEffect;function Bm(t){const e=q.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function iN(t,e,n={},r={}){q.useEffect(()=>{if(!t.current||r.disabled||typeof IntersectionObserver!="function")return;const s=new IntersectionObserver(([a])=>{e(a)},n);return s.observe(t.current),()=>{s.disconnect()}},[e,n,r.disabled,t])}function aN(t){const e=q.useRef(null);return q.useImperativeHandle(t,()=>e.current,[]),e}function _u(t){const e=nr();return q.useCallback(n=>e.navigate({...n,from:n.from??t?.from}),[t?.from,e])}var oN=GC();function lN(t,e){const n=nr(),[r,s]=q.useState(!1),a=q.useRef(!1),l=aN(e),{activeProps:c,inactiveProps:f,activeOptions:d,to:m,preload:p,preloadDelay:g,hashScrollIntoView:y,replace:x,startTransition:S,resetScroll:E,viewTransition:C,children:k,target:R,disabled:N,style:j,className:T,onClick:D,onFocus:L,onMouseEnter:P,onMouseLeave:M,onTouchStart:B,ignoreBlocker:G,params:ee,search:te,hash:V,state:$,mask:J,reloadDocument:ae,unsafeRelative:Q,from:I,_fromLocation:z,...F}=t,A=Pn({select:be=>be.location.search,structuralSharing:!0}),se=t.from,ue=q.useMemo(()=>({...t,from:se}),[n,A,se,t._fromLocation,t.hash,t.to,t.search,t.params,t.state,t.mask,t.unsafeRelative]),fe=q.useMemo(()=>n.buildLocation({...ue}),[n,ue]),ve=q.useMemo(()=>{if(N)return;let be=fe.maskedLocation?fe.maskedLocation.url.href:fe.url.href,ye=!1;return n.origin&&(be.startsWith(n.origin)?be=n.history.createHref(be.replace(n.origin,""))||"/":ye=!0),{href:be,external:ye}},[N,fe.maskedLocation,fe.url,n.origin,n.history]),Te=q.useMemo(()=>{if(ve?.external)return ve.href;try{return new URL(m),m}catch{}},[m,ve]),_e=t.reloadDocument||Te?!1:p??n.options.defaultPreload,me=g??n.options.defaultPreloadDelay??0,Ee=Pn({select:be=>{if(Te)return!1;if(d?.exact){if(!gI(be.location.pathname,fe.pathname,n.basepath))return!1}else{const ye=Wf(be.location.pathname,n.basepath),qe=Wf(fe.pathname,n.basepath);if(!(ye.startsWith(qe)&&(ye.length===qe.length||ye[qe.length]==="/")))return!1}return(d?.includeSearch??!0)&&!Pi(be.location.search,fe.search,{partial:!d?.exact,ignoreUndefined:!d?.explicitUndefined})?!1:d?.includeHash?be.location.hash===fe.hash:!0}}),Oe=q.useCallback(()=>{n.preloadRoute({...ue}).catch(be=>{console.warn(be),console.warn(VI)})},[n,ue]),Ze=q.useCallback(be=>{be?.isIntersecting&&Oe()},[Oe]);iN(l,Ze,hN,{disabled:!!N||_e!=="viewport"}),q.useEffect(()=>{a.current||!N&&_e==="render"&&(Oe(),a.current=!0)},[N,Oe,_e]);const Le=be=>{const ye=be.currentTarget.getAttribute("target"),qe=R!==void 0?R:ye;if(!N&&!pN(be)&&!be.defaultPrevented&&(!qe||qe==="_self")&&be.button===0){be.preventDefault(),oN.flushSync(()=>{s(!0)});const ne=n.subscribe("onResolved",()=>{ne(),s(!1)});n.navigate({...ue,replace:x,resetScroll:E,hashScrollIntoView:y,startTransition:S,viewTransition:C,ignoreBlocker:G})}};if(Te)return{...F,ref:l,href:Te,...k&&{children:k},...R&&{target:R},...N&&{disabled:N},...j&&{style:j},...T&&{className:T},...D&&{onClick:D},...L&&{onFocus:L},...P&&{onMouseEnter:P},...M&&{onMouseLeave:M},...B&&{onTouchStart:B}};const Ye=be=>{N||_e&&Oe()},it=Ye,Je=be=>{if(!(N||!_e))if(!me)Oe();else{const ye=be.target;if(xl.has(ye))return;const qe=setTimeout(()=>{xl.delete(ye),Oe()},me);xl.set(ye,qe)}},ot=be=>{if(N||!_e||!me)return;const ye=be.target,qe=xl.get(ye);qe&&(clearTimeout(qe),xl.delete(ye))},ht=Ee?Zs(c,{})??uN:Um,Me=Ee?Um:Zs(f,{})??Um,ge=[T,ht.className,Me.className].filter(Boolean).join(" "),je=(j||ht.style||Me.style)&&{...j,...ht.style,...Me.style};return{...F,...ht,...Me,href:ve?.href,ref:l,onClick:Sl([D,Le]),onFocus:Sl([L,Ye]),onMouseEnter:Sl([P,Je]),onMouseLeave:Sl([M,ot]),onTouchStart:Sl([B,it]),disabled:!!N,target:R,...je&&{style:je},...ge&&{className:ge},...N&&cN,...Ee&&fN,...r&&dN}}const Um={},uN={className:"active"},cN={role:"link","aria-disabled":!0},fN={"data-status":"active","aria-current":"page"},dN={"data-transitioning":"transitioning"},xl=new WeakMap,hN={rootMargin:"100px"},Sl=t=>e=>{for(const n of t)if(n){if(e.defaultPrevented)return;n(e)}},wE=q.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:s,ref:a,...l}=lN(r,e),c=typeof r.children=="function"?r.children({isActive:l["data-status"]==="active"}):r.children;return n===void 0&&delete l.disabled,q.createElement(n||"a",{...l,ref:a},c)});function pN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}class mN extends xE{constructor(e){super(e),this.useMatch=n=>Br({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Br({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>l0({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>Ji({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>o0({...n,from:this.id}),this.useLoaderData=n=>a0({...n,from:this.id}),this.useNavigate=()=>_u({from:this.fullPath}),this.Link=Or.forwardRef((n,r)=>w.jsx(wE,{ref:r,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function mo(t){return new mN(t)}class gN extends KI{constructor(e){super(e),this.useMatch=n=>Br({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Br({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>l0({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>Ji({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>o0({...n,from:this.id}),this.useLoaderData=n=>a0({...n,from:this.id}),this.useNavigate=()=>_u({from:this.fullPath}),this.Link=Or.forwardRef((n,r)=>w.jsx(wE,{ref:r,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function yN(t){return new gN(t)}function o_(t){return typeof t=="object"?new l_(t,{silent:!0}).createRoute(t):new l_(t,{silent:!0}).createRoute}class l_{constructor(e,n){this.path=e,this.createRoute=r=>{this.silent;const s=mo(r);return s.isRoot=!1,s},this.silent=n?.silent}}class u_{constructor(e){this.useMatch=n=>Br({select:n?.select,from:this.options.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Br({from:this.options.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>l0({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useParams=n=>Ji({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useLoaderDeps=n=>o0({...n,from:this.options.id}),this.useLoaderData=n=>a0({...n,from:this.options.id}),this.useNavigate=()=>{const n=nr();return _u({from:n.routesById[this.options.id].fullPath})},this.options=e,this.$$typeof=Symbol.for("react.memo")}}function c_(t){return typeof t=="object"?new u_(t):e=>new u_({id:t,...e})}function vN(){const t=nr(),e=q.useRef({router:t,mounted:!1}),[n,r]=q.useState(!1),{hasPendingMatches:s,isLoading:a}=Pn({select:p=>({isLoading:p.isLoading,hasPendingMatches:p.matches.some(g=>g.status==="pending")}),structuralSharing:!0}),l=Bm(a),c=a||n||s,f=Bm(c),d=a||s,m=Bm(d);return t.startTransition=p=>{r(!0),q.startTransition(()=>{p(),r(!1)})},q.useEffect(()=>{const p=t.history.subscribe(t.load),g=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return $i(t.latestLocation.publicHref)!==$i(g.publicHref)&&t.commitLocation({...g,replace:!0}),()=>{p()}},[t,t.history]),sf(()=>{if(typeof window<"u"&&t.ssr||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(g){console.error(g)}})()},[t]),sf(()=>{l&&!a&&t.emit({type:"onLoad",...Fi(t.state)})},[l,t,a]),sf(()=>{m&&!d&&t.emit({type:"onBeforeRouteMount",...Fi(t.state)})},[d,m,t]),sf(()=>{if(f&&!c){const p=Fi(t.state);t.emit({type:"onResolved",...p}),t.__store.setState(g=>({...g,status:"idle",resolvedLocation:g.location})),p.hrefChanged&&CI(t)}},[c,f,t]),null}function bN(t){const e=Pn({select:n=>`not-found-${n.location.pathname}-${n.status}`});return w.jsx(i0,{getResetKey:()=>e,onCatch:(n,r)=>{if(Wn(n))t.onCatch?.(n,r);else throw n},errorComponent:({error:n})=>{if(Wn(n))return t.fallback?.(n);throw n},children:t.children})}function xN(){return w.jsx("p",{children:"Not Found"})}function Va(t){return w.jsx(w.Fragment,{children:t.children})}function _E(t,e,n){return e.options.notFoundComponent?w.jsx(e.options.notFoundComponent,{...n}):t.options.defaultNotFoundComponent?w.jsx(t.options.defaultNotFoundComponent,{...n}):w.jsx(xN,{})}function SN({children:t}){const e=nr();return e.isServer?w.jsx("script",{nonce:e.options.ssr?.nonce,dangerouslySetInnerHTML:{__html:t+";document.currentScript.remove()"}}):null}function wN(){const t=nr();if(!t.isScrollRestoring||!t.isServer||typeof t.options.scrollRestoration=="function"&&!t.options.scrollRestoration({location:t.latestLocation}))return null;const n=(t.options.getScrollRestorationKey||qg)(t.latestLocation),r=n!==qg(t.latestLocation)?n:void 0,s={storageKey:ed,shouldScrollRestoration:!0};return r&&(s.key=r),w.jsx(SN,{children:`(${cE.toString()})(${JSON.stringify(s)})`})}const CE=q.memo(function({matchId:e}){const n=nr(),r=Pn({select:C=>{const k=C.matches.find(R=>R.id===e);return vs(k),{routeId:k.routeId,ssr:k.ssr,_displayPending:k._displayPending}},structuralSharing:!0}),s=n.routesById[r.routeId],a=s.options.pendingComponent??n.options.defaultPendingComponent,l=a?w.jsx(a,{}):null,c=s.options.errorComponent??n.options.defaultErrorComponent,f=s.options.onCatch??n.options.defaultOnCatch,d=s.isRoot?s.options.notFoundComponent??n.options.notFoundRoute?.options.component:s.options.notFoundComponent,m=r.ssr===!1||r.ssr==="data-only",p=(!s.isRoot||s.options.wrapInSuspense||m)&&(s.options.wrapInSuspense??a??(s.options.errorComponent?.preload||m))?q.Suspense:Va,g=c?i0:Va,y=d?bN:Va,x=Pn({select:C=>C.loadedAt}),S=Pn({select:C=>{const k=C.matches.findIndex(R=>R.id===e);return C.matches[k-1]?.routeId}}),E=s.isRoot?s.options.shellComponent??Va:Va;return w.jsxs(E,{children:[w.jsx(Dd.Provider,{value:e,children:w.jsx(p,{fallback:l,children:w.jsx(g,{getResetKey:()=>x,errorComponent:c||zd,onCatch:(C,k)=>{if(Wn(C))throw C;f?.(C,k)},children:w.jsx(y,{fallback:C=>{if(!d||C.routeId&&C.routeId!==r.routeId||!C.routeId&&!s.isRoot)throw C;return q.createElement(d,C)},children:m||r._displayPending?w.jsx(QI,{fallback:l,children:w.jsx(f_,{matchId:e})}):w.jsx(f_,{matchId:e})})})})}),S===Jn&&n.options.scrollRestoration?w.jsxs(w.Fragment,{children:[w.jsx(_N,{}),w.jsx(wN,{})]}):null]})});function _N(){const t=nr(),e=q.useRef(void 0);return w.jsx("script",{suppressHydrationWarning:!0,ref:n=>{n&&(e.current===void 0||e.current.href!==t.latestLocation.href)&&(t.emit({type:"onRendered",...Fi(t.state)}),e.current=t.latestLocation)}},t.latestLocation.state.__TSR_key)}const f_=q.memo(function({matchId:e}){const n=nr(),{match:r,key:s,routeId:a}=Pn({select:f=>{const d=f.matches.find(x=>x.id===e),m=d.routeId,g=(n.routesById[m].options.remountDeps??n.options.defaultRemountDeps)?.({routeId:m,loaderDeps:d.loaderDeps,params:d._strictParams,search:d._strictSearch});return{key:g?JSON.stringify(g):void 0,routeId:m,match:{id:d.id,status:d.status,error:d.error,invalid:d.invalid,_forcePending:d._forcePending,_displayPending:d._displayPending}}},structuralSharing:!0}),l=n.routesById[a],c=q.useMemo(()=>{const f=l.options.component??n.options.defaultComponent;return f?w.jsx(f,{},s):w.jsx(CN,{})},[s,l.options.component,n.options.defaultComponent]);if(r._displayPending)throw n.getMatch(r.id)?._nonReactive.displayPendingPromise;if(r._forcePending)throw n.getMatch(r.id)?._nonReactive.minPendingPromise;if(r.status==="pending"){const f=l.options.pendingMinMs??n.options.defaultPendingMinMs;if(f){const d=n.getMatch(r.id);if(d&&!d._nonReactive.minPendingPromise&&!n.isServer){const m=oo();d._nonReactive.minPendingPromise=m,setTimeout(()=>{m.resolve(),d._nonReactive.minPendingPromise=void 0},f)}}throw n.getMatch(r.id)?._nonReactive.loadPromise}if(r.status==="notFound")return vs(Wn(r.error)),_E(n,l,r.error);if(r.status==="redirected")throw vs(br(r.error)),n.getMatch(r.id)?._nonReactive.loadPromise;if(r.status==="error"){if(n.isServer){const f=(l.options.errorComponent??n.options.defaultErrorComponent)||zd;return w.jsx(f,{error:r.error,reset:void 0,info:{componentStack:""}})}throw r.error}return c}),CN=q.memo(function(){const e=nr(),n=q.useContext(Dd),r=Pn({select:d=>d.matches.find(m=>m.id===n)?.routeId}),s=e.routesById[r],a=Pn({select:d=>{const p=d.matches.find(g=>g.id===n);return vs(p),p.globalNotFound}}),l=Pn({select:d=>{const m=d.matches,p=m.findIndex(g=>g.id===n);return m[p+1]?.id}}),c=e.options.defaultPendingComponent?w.jsx(e.options.defaultPendingComponent,{}):null;if(a)return _E(e,s,void 0);if(!l)return null;const f=w.jsx(CE,{matchId:l});return r===Jn?w.jsx(q.Suspense,{fallback:c,children:f}):f});function EN(){const t=nr(),n=t.routesById[Jn].options.pendingComponent??t.options.defaultPendingComponent,r=n?w.jsx(n,{}):null,s=t.isServer||typeof document<"u"&&t.ssr?Va:q.Suspense,a=w.jsxs(s,{fallback:r,children:[!t.isServer&&w.jsx(vN,{}),w.jsx(kN,{})]});return t.options.InnerWrap?w.jsx(t.options.InnerWrap,{children:a}):a}function kN(){const t=nr(),e=Pn({select:s=>s.matches[0]?.id}),n=Pn({select:s=>s.loadedAt}),r=e?w.jsx(CE,{matchId:e}):null;return w.jsx(Dd.Provider,{value:e,children:t.options.disableGlobalCatchBoundary?r:w.jsx(i0,{getResetKey:()=>n,errorComponent:zd,onCatch:s=>{s.message||s.toString()},children:r})})}const RN=t=>new TN(t);class TN extends FI{constructor(e){super(e)}}typeof globalThis<"u"?(globalThis.createFileRoute=o_,globalThis.createLazyFileRoute=c_):typeof window<"u"&&(window.createFileRoute=o_,window.createLazyFileRoute=c_);function AN({router:t,children:e,...n}){Object.keys(n).length>0&&t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=SE(),s=w.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?w.jsx(t.options.Wrap,{children:s}):s}function ON({router:t,...e}){return w.jsx(AN,{router:t,...e,children:w.jsx(EN,{})})}const go=yN(),MN=mo({getParentRoute:()=>go,path:"/"}),IN=mo({getParentRoute:()=>go,path:"$connectionId"}),NN=mo({getParentRoute:()=>go,path:"$connectionId/container/$container/$"}),zN=mo({getParentRoute:()=>go,path:"$connectionId/$database"}),DN=mo({getParentRoute:()=>go,path:"$connectionId/$database/$table"}),jN=go.addChildren([MN,NN,DN,zN,IN]),EE=RN({routeTree:jN});const LN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PN=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),d_=t=>{const e=PN(t);return e.charAt(0).toUpperCase()+e.slice(1)},kE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),$N=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var FN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const BN=q.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...c},f)=>q.createElement("svg",{ref:f,...FN,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:kE("lucide",s),...!a&&!$N(c)&&{"aria-hidden":"true"},...c},[...l.map(([d,m])=>q.createElement(d,m)),...Array.isArray(a)?a:[a]]));const tt=(t,e)=>{const n=q.forwardRef(({className:r,...s},a)=>q.createElement(BN,{ref:a,iconNode:e,className:kE(`lucide-${LN(d_(t))}`,`lucide-${t}`,r),...s}));return n.displayName=d_(t),n};const UN=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],RE=tt("archive",UN);const qN=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],HN=tt("arrow-up",qN);const VN=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],TE=tt("box",VN);const KN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Bi=tt("chevron-down",KN);const GN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],u0=tt("chevron-right",GN);const QN=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Kl=tt("chevron-up",QN);const ZN=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],If=tt("chevrons-up-down",ZN);const YN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],JN=tt("circle-check",YN);const XN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],WN=tt("circle-x",XN);const ez=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],tz=tt("cloud",ez);const nz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],rz=tt("columns-3",nz);const sz=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],cu=tt("database",sz);const iz=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],az=tt("download",iz);const oz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],AE=tt("file-code",oz);const lz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],OE=tt("file-text",lz);const uz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],cz=tt("file-up",uz);const fz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],rd=tt("file",fz);const dz=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ME=tt("folder",dz);const hz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],IE=tt("image",hz);const pz=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],mz=tt("link",pz);const gz=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],yz=tt("list-ordered",gz);const vz=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ki=tt("loader-circle",vz);const bz=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],NE=tt("package",bz);const xz=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Sz=tt("pencil",xz);const wz=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],_z=tt("play",wz);const Cz=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],Ez=tt("plug",Cz);const kz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],jd=tt("plus",kz);const Rz=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Tz=tt("send",Rz);const Az=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Oz=tt("shield-check",Az);const Mz=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Vg=tt("sparkles",Mz);const Iz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Nz=tt("square",Iz);const zz=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],Dz=tt("table-2",zz);const jz=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Lz=tt("table",jz);const Pz=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],fu=tt("trash-2",Pz);const $z=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Fz=tt("triangle-alert",$z);const Bz=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],zE=tt("upload",Bz);const Uz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Cu=tt("x",Uz);class yo{}class uo extends yo{constructor(e,n){super(),this.collection=e,this.alias=n,this.type="collectionRef"}}class vr extends yo{constructor(e,n){super(),this.query=e,this.alias=n,this.type="queryRef"}}class En extends yo{constructor(e){super(),this.path=e,this.type="ref"}}class jn extends yo{constructor(e){super(),this.value=e,this.type="val"}}class Sr extends yo{constructor(e,n){super(),this.name=e,this.args=n,this.type="func"}}class DE extends yo{constructor(e,n){super(),this.name=e,this.args=n,this.type="agg"}}function c0(t){return t instanceof DE||t instanceof Sr||t instanceof En||t instanceof jn}function f0(t){return typeof t=="object"&&"expression"in t?t.expression:t}function h_(t){return typeof t=="object"&&"expression"in t?t.expression:t}function p_(t){return typeof t=="object"&&"expression"in t&&t.residual===!0}function qz(t){return{expression:t,residual:!0}}function Hz(t,e){if(t.from.alias===e)return t.from;for(const n of t.join||[])if(n.from.alias===e)return n.from}function du(t,e,n){if(e.path.length!==0){if(e.path.length===1){const r=e.path[0];if(t.select){const s=t.select[r];if(s&&s.type==="ref")return du(t,s,n)}return{collection:n,path:[r]}}if(e.path.length>1){const[r,...s]=e.path,a=Hz(t,r);return a?a.type==="queryRef"?du(a.query,new En(s),n):{collection:a.collection,path:s}:void 0}}}class rr extends Error{constructor(e){super(e),this.name="TanStackDBError"}}class m_ extends rr{constructor(e,n,r){const s=`${e==="insert"?"Insert":"Update"} validation failed: ${n.map(a=>`
- ${a.message} - path: ${a.path}`).join("")}`;super(r||s),this.name="SchemaValidationError",this.type=e,this.issues=n}}class Eu extends rr{constructor(e){super(e),this.name="CollectionConfigurationError"}}class Vz extends Eu{constructor(){super("Collection requires a config")}}class Kz extends Eu{constructor(){super("Collection requires a sync config")}}class Gz extends Eu{constructor(){super("Schema must implement the standard-schema interface")}}class g_ extends Eu{constructor(){super("Schema validation must be synchronous")}}class ku extends rr{constructor(e){super(e),this.name="CollectionStateError"}}class Qz extends ku{constructor(e,n){super(`Cannot perform ${e} on collection "${n}" - collection is in error state. Try calling cleanup() and restarting the collection.`)}}class Zz extends ku{constructor(e,n,r){super(`Invalid collection status transition from "${e}" to "${n}" for collection "${r}"`)}}class Yz extends ku{constructor(){super("Collection is in error state")}}class Jz extends ku{constructor(){super("Active subscribers count is negative - this should never happen")}}class Ur extends rr{constructor(e){super(e),this.name="CollectionOperationError"}}class Xz extends Ur{constructor(e){super(`An object was created without a defined key: ${JSON.stringify(e)}`)}}class Wz extends Ur{constructor(e,n){const r=e===null?"null":typeof e;super(`getKey returned an invalid key type. Expected string or number, but got ${r}: ${JSON.stringify(e)}. Item: ${JSON.stringify(n)}`)}}class eD extends Ur{constructor(e){super(`Cannot insert document with ID "${e}" because it already exists in the collection`)}}class tD extends Ur{constructor(e,n,r){const s=`Cannot insert document with key "${e}" from sync because it already exists in the collection "${n}"`;r?.hasCustomGetKey&&r.hasJoins?super(`${s}. This collection uses a custom getKey with joined queries. Joined queries can produce multiple rows with the same key when relationships are not 1:1. Consider: (1) using a composite key in your getKey function (e.g., \`\${item.key1}-\${item.key2}\`), (2) ensuring your join produces unique rows per key, or (3) removing the custom getKey to use the default composite key behavior.`):super(s)}}class nD extends Ur{constructor(){super("The first argument to update is missing")}}class rD extends Ur{constructor(){super("No keys were passed to update")}}class sD extends Ur{constructor(e){super(`The key "${e}" was passed to update but an object for this key was not found in the collection`)}}class iD extends Ur{constructor(e,n){super(`Updating the key of an item is not allowed. Original key: "${e}", Attempted new key: "${n}". Please delete the old item and create a new one if a key change is necessary.`)}}class aD extends Ur{constructor(){super("No keys were passed to delete")}}class oD extends Ur{constructor(e){super(`Collection.delete was called with key '${e}' but there is no item in the collection with this key`)}}class d0 extends rr{constructor(e){super(e),this.name="MissingHandlerError"}}class lD extends d0{constructor(){super("Collection.insert called directly (not within an explicit transaction) but no 'onInsert' handler is configured.")}}class uD extends d0{constructor(){super("Collection.update called directly (not within an explicit transaction) but no 'onUpdate' handler is configured.")}}class cD extends d0{constructor(){super("Collection.delete called directly (not within an explicit transaction) but no 'onDelete' handler is configured.")}}class ii extends rr{constructor(e){super(e),this.name="TransactionError"}}class fD extends ii{constructor(){super("mutationFn is required when creating a transaction")}}class dD extends ii{constructor(){super("You can no longer call .mutate() as the transaction is no longer pending")}}class hD extends ii{constructor(){super("You can no longer call .rollback() as the transaction is already completed")}}class pD extends ii{constructor(){super("You can no longer call .commit() as the transaction is no longer pending")}}class y_ extends ii{constructor(){super("No pending sync transaction to write to")}}class v_ extends ii{constructor(){super("The pending sync transaction is already committed, you can't still write to it.")}}class mD extends ii{constructor(){super("No pending sync transaction to commit")}}class gD extends ii{constructor(){super("The pending sync transaction is already committed, you can't commit it again.")}}class vo extends rr{constructor(e){super(e),this.name="QueryBuilderError"}}class yD extends vo{constructor(e){super(`Only one source is allowed in the ${e}`)}}class vD extends vo{constructor(e){super(`A sub query passed to a ${e} must have a from clause itself`)}}class bD extends vo{constructor(e){super(`Invalid source for live query: The value provided for alias "${e}" is not a Collection or subquery. Live queries only accept Collection instances or subqueries. Please ensure you're passing a valid Collection or QueryBuilder, not a plain array or other data type.`)}}class af extends vo{constructor(e,n){super(`Invalid source for ${e}: Expected an object with a single key-value pair like { alias: collection }. For example: .from({ todos: todosCollection }). Got: ${n}`)}}class xD extends vo{constructor(){super("Join condition must be an equality expression")}}class SD extends vo{constructor(){super("Query must have a from clause")}}class sr extends rr{constructor(e){super(e),this.name="QueryCompilationError"}}class wD extends sr{constructor(){super("DISTINCT requires a SELECT clause.")}}class _D extends sr{constructor(){super("HAVING clause requires GROUP BY clause")}}class CD extends sr{constructor(){super("LIMIT and OFFSET require an ORDER BY clause to ensure deterministic results")}}class jE extends sr{constructor(e,n,r){const s=n?`alias "${e}" (collection "${n}")`:`collection "${e}"`,a=r?.length?`. Available keys: ${r.join(", ")}`:"";super(`Input for ${s} not found in inputs map${a}`)}}class ED extends sr{constructor(e,n){super(`Subquery uses alias "${e}" which is already used in the parent query. Each alias must be unique across parent and subquery contexts. Parent query aliases: ${n.join(", ")}. Please rename "${e}" in either the parent query or subquery to avoid conflicts.`)}}class kD extends sr{constructor(e){super(`Unsupported FROM type: ${e}`)}}class RD extends sr{constructor(e){super(`Unknown expression type: ${e}`)}}class TD extends sr{constructor(){super("Reference path cannot be empty")}}class AD extends sr{constructor(e){super(`Unknown function: ${e}`)}}class b_ extends sr{constructor(e){super(`Collection "${e}" not found during compilation of join`)}}class Xi extends rr{constructor(e){super(e),this.name="JoinError"}}class OD extends Xi{constructor(e){super(`Unsupported join type: ${e}`)}}class MD extends Xi{constructor(e){super(`Invalid join condition: both expressions refer to the same source "${e}"`)}}class ID extends Xi{constructor(){super("Invalid join condition: expressions must reference source aliases")}}class ND extends Xi{constructor(e){super(`Invalid join condition: left expression refers to an unavailable source "${e}"`)}}class zD extends Xi{constructor(e){super(`Invalid join condition: right expression does not refer to the joined source "${e}"`)}}class DD extends Xi{constructor(){super("Invalid join condition")}}class jD extends Xi{constructor(e){super(`Unsupported join source type: ${e}`)}}class Ld extends rr{constructor(e){super(e),this.name="GroupByError"}}class LD extends Ld{constructor(e){super(`Non-aggregate expression '${e}' in SELECT must also appear in GROUP BY clause`)}}class PD extends Ld{constructor(e){super(`Unsupported aggregate function: ${e}`)}}class $D extends Ld{constructor(e){super(`Aggregate function in HAVING clause must also be in SELECT clause: ${e}`)}}class FD extends Ld{constructor(e){super(`Unknown expression type in HAVING clause: ${e}`)}}class x_ extends rr{constructor(e,n){const r=n instanceof Error?n.message:String(n);super(`Collection "${e}" sync cleanup function threw an error: ${r}`),this.name="SyncCleanupError"}}class BD extends rr{constructor(e){super(e),this.name="QueryOptimizerError"}}class UD extends BD{constructor(){super("Cannot combine empty expression list")}}class qD extends sr{constructor(e,n,r,s){super(`Internal error: subscription for alias '${e}' (remapped from '${n}', collection '${r}') is missing in join pipeline. Available aliases: ${s.join(", ")}. This indicates a bug in alias tracking.`)}}class HD extends sr{constructor(e){super(`Internal error: compiler returned aliases without inputs: ${e.join(", ")}. This indicates a bug in query compilation. Please report this issue.`)}}class VD extends sr{constructor(){super("setWindow() can only be called on collections with an ORDER BY clause. Add .orderBy() to your query to enable window movement.")}}const qm=new WeakMap;let KD=1;function S_(t){if(qm.has(t))return qm.get(t);const e=KD++;return qm.set(t,e),e}const h0=(t,e,n)=>{const{nulls:r}=n;if(t==null&&e==null)return 0;if(t==null)return r==="first"?-1:1;if(e==null)return r==="first"?1:-1;if(typeof t=="string"&&typeof e=="string"&&n.stringSort==="locale")return t.localeCompare(e,n.locale,n.localeOptions);if(Array.isArray(t)&&Array.isArray(e)){for(let l=0;l<Math.min(t.length,e.length);l++){const c=h0(t[l],e[l],n);if(c!==0)return c}return t.length-e.length}if(t instanceof Date&&e instanceof Date)return t.getTime()-e.getTime();const s=typeof t=="object",a=typeof e=="object";if(s||a){if(s&&a){const l=S_(t),c=S_(e);return l-c}if(s)return 1;if(a)return-1}return t<e?-1:t>e?1:0},GD=(t,e,n)=>h0(e,t,{...n,nulls:n.nulls==="first"?"last":"first"});function sd(t){return(e,n)=>t.direction==="asc"?h0(e,n,t):GD(e,n,t)}const Kg=sd({direction:"asc",nulls:"first",stringSort:"locale"});function QD(t,e){if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const ZD=128;function ps(t){return t instanceof Date?t.getTime():(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)&&t.byteLength<=ZD?`__u8__${Array.from(t).join(",")}`:t}function YD(t,e){if(t===e)return!0;const n=typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array,r=typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array;return n&&r?QD(t,e):!1}function Xt(t){return t==null}function ro(t){return t===!0}function Ln(t,e=!1){return m0(t,e)}function p0(t){return m0(t,!0)}function m0(t,e){switch(t.type){case"val":{const n=t.value;return()=>n}case"ref":return e?XD(t):JD(t);case"func":return WD(t,e);default:throw new RD(t.type)}}function JD(t){const[e,...n]=t.path;if(!e)throw new TD;if(n.length===0)return r=>r[e];if(n.length===1){const r=n[0];return s=>s[e]?.[r]}else return r=>{const s=r[e];if(s===void 0)return;let a=s;for(const l of n){if(a==null)return a;a=a[l]}return a}}function XD(t){const e=t.path;return n=>{let r=n;for(const s of e){if(r==null)return r;r=r[s]}return r}}function WD(t,e){const n=t.args.map(r=>m0(r,e));switch(t.name){case"eq":{const r=n[0],s=n[1];return a=>{const l=ps(r(a)),c=ps(s(a));return Xt(l)||Xt(c)?null:YD(l,c)}}case"gt":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:l>c}}case"gte":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:l>=c}}case"lt":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:l<c}}case"lte":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:l<=c}}case"and":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!1)return!1;Xt(l)&&(s=!0)}return s?null:!0};case"or":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!0)return!0;Xt(l)&&(s=!0)}return s?null:!1};case"not":{const r=n[0];return s=>{const a=r(s);return Xt(a)?null:!a}}case"in":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)?null:Array.isArray(c)?c.includes(l):!1}}case"like":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:w_(l,c,!1)}}case"ilike":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:w_(l,c,!0)}}case"upper":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toUpperCase():a}}case"lower":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toLowerCase():a}}case"length":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"||Array.isArray(a)?a.length:0}}case"concat":return r=>n.map(s=>{const a=s(r);try{return String(a??"")}catch{try{return JSON.stringify(a)||""}catch{return"[object]"}}}).join("");case"coalesce":return r=>{for(const s of n){const a=s(r);if(a!=null)return a}return null};case"add":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return(l??0)+(c??0)}}case"subtract":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return(l??0)-(c??0)}}case"multiply":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return(l??0)*(c??0)}}case"divide":{const r=n[0],s=n[1];return a=>{const l=r(a),f=s(a)??0;return f!==0?(l??0)/f:null}}case"isUndefined":{const r=n[0];return s=>r(s)===void 0}case"isNull":{const r=n[0];return s=>r(s)===null}default:throw new AD(t.name)}}function w_(t,e,n){if(typeof t!="string"||typeof e!="string")return!1;const r=n?t.toLowerCase():t;let a=(n?e.toLowerCase():e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return a=a.replace(/%/g,".*"),a=a.replace(/_/g,"."),new RegExp(`^${a}$`).test(r)}function Ar(t,e){return Nf(t,e,new Map)}function Nf(t,e,n){if(t===e)return!0;if(t==null||e==null||typeof t!=typeof e)return!1;if(t instanceof Date)return e instanceof Date?t.getTime()===e.getTime():!1;if(t instanceof RegExp)return e instanceof RegExp?t.source===e.source&&t.flags===e.flags:!1;if(t instanceof Map){if(!(e instanceof Map)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const s=Array.from(t.entries()).every(([a,l])=>e.has(a)&&Nf(l,e.get(a),n));return n.delete(t),s}if(t instanceof Set){if(!(e instanceof Set)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Array.from(t),s=Array.from(e);if(r.every(l=>typeof l!="object"))return n.delete(t),r.every(l=>e.has(l));const a=r.length===s.length;return n.delete(t),a}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)&&!(t instanceof DataView)&&!(e instanceof DataView)){const r=t,s=e;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}if(id(t)&&id(e)){const r=Gg(t),s=Gg(e);return r!==s?!1:typeof t.equals=="function"?t.equals(e):t.toString()===e.toString()}if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=t.every((s,a)=>Nf(s,e[a],n));return n.delete(t),r}if(typeof t=="object"){if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return n.delete(t),!1;const a=r.every(l=>l in e&&Nf(t[l],e[l],n));return n.delete(t),a}return!1}const e4=["Temporal.Duration","Temporal.Instant","Temporal.PlainDate","Temporal.PlainDateTime","Temporal.PlainMonthDay","Temporal.PlainTime","Temporal.PlainYearMonth","Temporal.ZonedDateTime"];function Gg(t){return t[Symbol.toStringTag]}function id(t){const e=Gg(t);return typeof e=="string"&&e4.includes(e)}const g0={direction:"asc",nulls:"first",stringSort:"locale"};class t4{constructor(e){this.originalIndex=e}lookup(e,n){const r=e==="gt"?"lt":e==="gte"?"lte":e==="lt"?"gt":e==="lte"?"gte":e;return this.originalIndex.lookup(r,n)}rangeQuery(e={}){return this.originalIndex.rangeQueryReversed(e)}rangeQueryReversed(e={}){return this.originalIndex.rangeQuery(e)}take(e,n,r){return this.originalIndex.takeReversed(e,n,r)}takeReversed(e,n,r){return this.originalIndex.take(e,n,r)}get orderedEntriesArray(){return this.originalIndex.orderedEntriesArrayReversed}get orderedEntriesArrayReversed(){return this.originalIndex.orderedEntriesArray}supports(e){return this.originalIndex.supports(e)}matchesField(e){return this.originalIndex.matchesField(e)}matchesCompareOptions(e){return this.originalIndex.matchesCompareOptions(e)}matchesDirection(e){return this.originalIndex.matchesDirection(e)}getStats(){return this.originalIndex.getStats()}add(e,n){this.originalIndex.add(e,n)}remove(e,n){this.originalIndex.remove(e,n)}update(e,n,r){this.originalIndex.update(e,n,r)}build(e){this.originalIndex.build(e)}clear(){this.originalIndex.clear()}get keyCount(){return this.originalIndex.keyCount}equalityLookup(e){return this.originalIndex.equalityLookup(e)}inArrayLookup(e){return this.originalIndex.inArrayLookup(e)}get indexedKeysSet(){return this.originalIndex.indexedKeysSet}get valueMapData(){return this.originalIndex.valueMapData}}function Ru(t,e,n){const r=n??{...g0,...t.compareOptions};for(const s of t.indexes.values())if(s.matchesField(e)&&s.matchesCompareOptions(r))return s.matchesDirection(r.direction)?s:new t4(s)}function n4(t){if(t.length===0)return new Set;if(t.length===1)return new Set(t[0]);let e=new Set(t[0]);for(let n=1;n<t.length;n++){const r=new Set;for(const s of e)t[n].has(s)&&r.add(s);e=r}return e}function r4(t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}function s4(t,e){return y0(t,e)}function y0(t,e){if(t.type==="func")switch(t.name){case"eq":case"gt":case"gte":case"lt":case"lte":return a4(t,e);case"and":return o4(t,e);case"or":return l4(t,e);case"in":return u4(t,e)}return{canOptimize:!1,matchingKeys:new Set}}function i4(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=new Map;for(const r of t.args)if(r.type==="func"&&["gt","gte","lt","lte"].includes(r.name)){const s=r;if(s.args.length===2){const a=s.args[0],l=s.args[1];let c=null,f=null,d=s.name;if(a.type==="ref"&&l.type==="val")c=a,f=l;else if(a.type==="val"&&l.type==="ref")switch(c=l,f=a,d){case"gt":d="lt";break;case"gte":d="lte";break;case"lt":d="gt";break;case"lte":d="gte";break}if(c&&f){const p=c.path.join("."),g=f.value;n.has(p)||n.set(p,[]),n.get(p).push({operation:d,value:g})}}}for(const[r,s]of n)if(s.length>=2){const a=r.split("."),l=Ru(e,a);if(l&&l.supports("gt")&&l.supports("lt")){let c,f,d=!0,m=!0;for(const{operation:g,value:y}of s)switch(g){case"gt":(c===void 0||y>c)&&(c=y,d=!1);break;case"gte":(c===void 0||y>c)&&(c=y,d=!0);break;case"lt":(f===void 0||y<f)&&(f=y,m=!1);break;case"lte":(f===void 0||y<f)&&(f=y,m=!0);break}return{canOptimize:!0,matchingKeys:l.rangeQuery({from:c,to:f,fromInclusive:d,toInclusive:m})}}}return{canOptimize:!1,matchingKeys:new Set}}function a4(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];let s=null,a=null,l=t.name;if(n.type==="ref"&&r.type==="val")s=n,a=r;else if(n.type==="val"&&r.type==="ref")switch(s=r,a=n,l){case"gt":l="lt";break;case"gte":l="lte";break;case"lt":l="gt";break;case"lte":l="gte";break}if(s&&a){const c=s.path,f=Ru(e,c);if(f){const d=a.value,m=l;return f.supports(m)?{canOptimize:!0,matchingKeys:f.lookup(m,d)}:{canOptimize:!1,matchingKeys:new Set}}}return{canOptimize:!1,matchingKeys:new Set}}function o4(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=i4(t,e);if(n.canOptimize)return n;const r=[];for(const s of t.args){const a=y0(s,e);a.canOptimize&&r.push(a)}if(r.length>0){const s=r.map(l=>l.matchingKeys);return{canOptimize:!0,matchingKeys:n4(s)}}return{canOptimize:!1,matchingKeys:new Set}}function l4(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=[];for(const r of t.args){const s=y0(r,e);s.canOptimize&&n.push(s)}if(n.length>0){const r=n.map(a=>a.matchingKeys);return{canOptimize:!0,matchingKeys:r4(r)}}return{canOptimize:!1,matchingKeys:new Set}}function u4(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];if(n.type==="ref"&&r.type==="val"&&Array.isArray(r.value)){const s=n.path,a=r.value,l=Ru(e,s);if(l){if(l.supports("in"))return{canOptimize:!0,matchingKeys:l.lookup("in",a)};if(l.supports("eq")){const c=new Set;for(const f of a){const d=l.lookup("eq",f);for(const m of d)c.add(m)}return{canOptimize:!0,matchingKeys:c}}}}return{canOptimize:!1,matchingKeys:new Set}}class c4 extends Map{constructor(e,n){super(n),this.defaultValue=e}get(e){return this.has(e)?super.get(e):this.defaultValue()}update(e,n){const r=this.get(e),s=n(r);return this.set(e,s),s}}const Hm=3e4;function Vm(t,e){if(e.length<=Hm)t.push(...e);else for(let n=0;n<e.length;n+=Hm){const r=e.slice(n,n+Hm);t.push(...r)}}function f4(t,e,n){let r=0,s=t.length;for(;r<s;){const a=Math.floor((r+s)/2),l=n(t[a],e);if(l<0)r=a+1;else if(l>0)s=a;else return a}return r}class d4{constructor(){this.objectIds=new WeakMap,this.nextId=0}getId(e){if(typeof e!="object"||e===null){const n=String(e);let r=0;for(let s=0;s<n.length;s++){const a=n.charCodeAt(s);r=(r<<5)-r+a,r=r&r}return r}return this.objectIds.has(e)||this.objectIds.set(e,this.nextId++),this.objectIds.get(e)}getStringId(e){return e===null?"null":e===void 0?"undefined":typeof e!="object"?`str_${String(e)}`:`obj_${this.getId(e)}`}}const Km=new d4;function h4(t,e){const[n,r]=t,[s,a]=e,l=[...of(n,Math.min(r,s)),...of(Math.max(n,a),r)],c=[...of(s,Math.min(a,n)),...of(Math.max(s,r),a)];return{onlyInA:l,onlyInB:c}}function of(t,e){const n=[];for(let r=t;r<e;r++)n.push(r);return n}function ad(t,e){return typeof t==typeof e?t<e?-1:t>e?1:0:typeof t=="string"?-1:1}const p4=dn(),m4=dn(),g4=dn(),y4=dn(),v4=dn();function dn(){return Math.random()*(2**31-1)>>>0}const LE=new ArrayBuffer(8),b4=new DataView(LE),Vs=new Uint8Array(LE);class Pd{constructor(){this.hash=p4,this.length=0,this.carry=0,this.carryBytes=0}_mix(e){e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e,this.hash=this.hash<<13|this.hash>>>19,this.hash=Math.imul(this.hash,5)+3864292196}writeByte(e){this.carry|=(e&255)<<8*this.carryBytes,this.carryBytes++,this.length++,this.carryBytes===4&&(this._mix(this.carry>>>0),this.carry=0,this.carryBytes=0)}update(e){switch(typeof e){case"symbol":{this.update(v4);const n=e.description;if(!n)return;for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);this.writeByte(s&255),this.writeByte(s>>>8&255)}return}case"string":this.update(m4);for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);this.writeByte(r&255),this.writeByte(r>>>8&255)}return;case"number":b4.setFloat64(0,e,!0),this.writeByte(Vs[0]),this.writeByte(Vs[1]),this.writeByte(Vs[2]),this.writeByte(Vs[3]),this.writeByte(Vs[4]),this.writeByte(Vs[5]),this.writeByte(Vs[6]),this.writeByte(Vs[7]);return;case"bigint":{let n=e;for(n<0n?(n=-n,this.update(y4)):this.update(g4);n>0n;)this.writeByte(Number(n&0xffn)),n>>=8n;e===0n&&this.writeByte(0);return}default:throw new TypeError(`Unsupported input type: ${typeof e}`)}}digest(){if(this.carryBytes>0){let e=this.carry>>>0;e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e}return this.hash^=this.length,this.hash^=this.hash>>>16,this.hash=Math.imul(this.hash,2246822507),this.hash^=this.hash>>>13,this.hash=Math.imul(this.hash,3266489909),this.hash^=this.hash>>>16,this.hash>>>0}}const x4=dn(),S4=dn(),w4=dn(),_4=dn(),C4=dn(),E4=dn(),k4=dn(),R4=dn(),T4=dn(),A4=dn(),O4=dn(),M4=dn(),I4=128,hu=new WeakMap;function wn(t){const e=new Pd;return PE(e,t),e.digest()}function N4(t){const e=hu.get(t);if(e!==void 0)return e;let n;if(t instanceof Date)n=z4(t);else if(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)if(t.byteLength<=I4)n=D4(t);else return Qg(t);else{if(t instanceof File)return Qg(t);{let r=t,s=R4;t instanceof Array&&(s=T4),t instanceof Map&&(s=A4,r=[...t.entries()]),t instanceof Set&&(s=O4,r=[...t.entries()]),n=j4(r,s)}}return hu.set(t,n),n}function z4(t){const e=new Pd;return e.update(k4),e.update(t.getTime()),e.digest()}function D4(t){const e=new Pd;e.update(M4),e.update(t.byteLength);for(let n=0;n<t.byteLength;n++)e.writeByte(t[n]);return e.digest()}function j4(t,e){const n=new Pd;n.update(e);const r=Object.keys(t);r.sort(P4);for(const s of r)n.update(C4),n.update(s),PE(n,t[s]);return n.digest()}function PE(t,e){if(e===null){t.update(w4);return}switch(typeof e){case"undefined":t.update(_4);return;case"boolean":t.update(e?x4:S4);return;case"number":t.update(isNaN(e)?NaN:e===0?0:e);return;case"bigint":case"string":case"symbol":t.update(e);return;case"object":t.update(L4(e));return;case"function":t.update(Qg(e));return;default:console.warn(`Ignored input during hashing because it is of type ${typeof e} which is not supported`)}}function L4(t){let e=hu.get(t);return e===void 0&&(e=N4(t)),e}let __=1;function Qg(t){let e=hu.get(t);return e===void 0&&(e=__^E4,__++,hu.set(t,e)),e}function P4(t,e){return t.localeCompare(e)}class Kt{#e;constructor(e=[]){this.#e=e}toString(e=!1){return`MultiSet(${JSON.stringify(this.#e,null,e?2:void 0)})`}toJSON(){return JSON.stringify(Array.from(this.getInner()))}static fromJSON(e){return new Kt(JSON.parse(e))}map(e){return new Kt(this.#e.map(([n,r])=>[e(n),r]))}filter(e){return new Kt(this.#e.filter(([n,r])=>e(n)))}negate(){return new Kt(this.#e.map(([e,n])=>[e,-n]))}concat(e){const n=[];return Vm(n,this.#e),Vm(n,e.getInner()),new Kt(n)}consolidate(){if(this.#e.length>0){const e=this.#e[0]?.[0];if(Array.isArray(e)&&e.length===2)return this.#t()}return this.#n()}#t(){const e=new Map,n=new Map,r=a=>{if(a.length!==2)throw new Error("Expected tuple of length 2");const[l,c]=a;return`${Km.getStringId(l)}|${Km.getStringId(c)}`};for(const[a,l]of this.#e){if(!Array.isArray(a)||a.length!==2)return this.#n();const[c,f]=a;if(typeof c!="string"&&typeof c!="number")return this.#n();let d;Array.isArray(f)&&f.length===2?d=r(f):d=Km.getStringId(f);const m=c+"|"+d;e.set(m,(e.get(m)||0)+l),n.has(m)||n.set(m,a)}const s=[];for(const[a,l]of e)l!==0&&s.push([n.get(a),l]);return new Kt(s)}#n(){const e=new c4(()=>0),n=new Map;let r=!1,s=!1,a=!1;for(const[f,d]of this.#e)if(typeof f=="string")r=!0;else if(typeof f=="number")s=!0;else{a=!0;break}const l=a||r&&s;for(const[f,d]of this.#e){const m=l?wn(f):f;l&&!n.has(m)&&n.set(m,f),e.update(m,p=>p+d)}const c=[];for(const[f,d]of e.entries())if(d!==0){const m=l?n.get(f):f;c.push([m,d])}return new Kt(c)}extend(e){const n=e instanceof Kt?e.getInner():e;Vm(this.#e,n)}add(e,n){n!==0&&this.#e.push([e,n])}getInner(){return this.#e}}class $4{#e;constructor(e){this.#e=e}drain(){const e=[...this.#e].reverse();return this.#e.length=0,e}isEmpty(){return this.#e.length===0}}class qr{#e=[];sendData(e){e instanceof Kt||(e=new Kt(e));for(const n of this.#e)n.unshift(e)}newReader(){const e=[];return this.#e.push(e),new $4(e)}}class $E{constructor(e,n,r){this.id=e,this.inputs=n,this.output=r}hasPendingWork(){return this.inputs.some(e=>!e.isEmpty())}}class bo extends $E{constructor(e,n,r){super(e,[n],r),this.id=e}inputMessages(){return this.inputs[0].drain()}}class F4 extends $E{constructor(e,n,r,s){super(e,[n,r],s),this.id=e}inputAMessages(){return this.inputs[0].drain()}inputBMessages(){return this.inputs[1].drain()}}class v0 extends bo{run(){for(const e of this.inputMessages())this.output.sendData(this.inner(e))}}class B4{#e=[];#t=0;#n=!1;constructor(){}#r(){if(this.#n)throw new Error("Graph already finalized")}getNextOperatorId(){return this.#r(),this.#t++}newInput(){this.#r();const e=new qr;return new U4(this,e)}addOperator(e){this.#r(),this.#e.push(e)}finalize(){this.#r(),this.#n=!0}step(){if(!this.#n)throw new Error("Graph not finalized");for(const e of this.#e)e.run()}pendingWork(){return this.#e.some(e=>e.hasPendingWork())}run(){for(;this.pendingWork();)this.step()}}class Hr{#e;#t;constructor(e,n){this.#e=e,this.#t=n}connectReader(){return this.#t.newReader()}get writer(){return this.#t}get graph(){return this.#e}pipe(...e){return e.reduce((n,r)=>r(n),this)}}class U4 extends Hr{sendData(e){this.writer.sendData(e)}}class q4 extends v0{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.map(this.#e)}}function _n(t){return e=>{const n=new Hr(e.graph,new qr),r=new q4(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const Ol=Symbol("NO_PREFIX");class C_ extends Map{addValue(e,n){if(n===0)return this.size===0;const r=Gl(e),s=this.get(r);if(zf(s)){const[a,l]=s;if(Gl(a)!==r)throw new Error("Mismatching prefixes, this should never happen");if(a===e||wn(a)===wn(e)){const f=l+n;f===0?this.delete(r):this.set(r,[e,f])}else{const f=new Ml;f.set(wn(a),s),f.set(wn(e),[e,n]),this.set(r,f)}}else s===void 0?this.set(r,[e,n]):s.addValue(e,n)&&this.delete(r);return this.size===0}}class Ml extends Map{addValue(e,n){if(n===0)return this.size===0;const r=wn(e),s=this.get(r);if(s){const[,a]=s,l=a+n;l===0?this.delete(r):this.set(r,[e,l])}else this.set(r,[e,n]);return this.size===0}}class Js{#e;#t=new Map;constructor(){this.#e=new Map}static fromMultiSets(e){const n=new Js;for(const r of e)for(const[s,a]of r.getInner()){const[l,c]=s;n.addValue(l,[c,a])}return n}toString(e=!1){return`Index(${JSON.stringify([...this.entries()],void 0,e?2:void 0)})`}get size(){return this.#e.size}has(e){return this.#e.has(e)}hasPresence(e){return(this.#t.get(e)||0)!==0}getConsolidatedMultiplicity(e){return this.#t.get(e)||0}getPresenceKeys(){return this.#t.keys()}get(e){return[...this.getIterator(e)]}*getIterator(e){const n=this.#e.get(e);if(zf(n))yield n;else{if(n===void 0)return;if(n instanceof Ml)for(const r of n.values())yield r;else for(const r of n.values())if(zf(r))yield r;else for(const s of r.values())yield s}}*entries(){for(const e of this.#e.keys())for(const n of this.getIterator(e))yield[e,n]}*entriesIterators(){for(const e of this.#e.keys())yield[e,this.getIterator(e)]}addValue(e,n){const[r,s]=n;if(s===0)return;const a=(this.#t.get(e)||0)+s;a===0?this.#t.delete(e):this.#t.set(e,a);const l=this.#e.get(e);if(l===void 0){this.#e.set(e,n);return}if(zf(l)){this.#n(e,l,r,s);return}if(l instanceof Ml){const c=Gl(r);if(c!==Ol){const f=new C_;f.set(Ol,l),f.set(c,n),this.#e.set(e,f)}else l.addValue(r,s)&&this.#e.delete(e)}else l.addValue(r,s)&&this.#e.delete(e)}#n(e,n,r,s){const[a,l]=n;if(a===r){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}const c=Gl(r),f=Gl(a);if(f===c&&(a===r||wn(a)===wn(r))){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}if(f===Ol&&c===Ol){const d=new Ml;d.set(wn(a),n),d.set(wn(r),[r,s]),this.#e.set(e,d)}else{const d=new C_;if(f===c){const m=new Ml;m.set(wn(a),n),m.set(wn(r),[r,s]),d.set(f,m)}else d.set(f,n),d.set(c,[r,s]);this.#e.set(e,d)}}append(e){for(const[n,r]of e.entries())this.addValue(n,r)}join(e){const n=[];if(this.size<=e.size)for(const[r,s]of this.entriesIterators()){if(!e.has(r))continue;const a=e.get(r);for(const[l,c]of s)for(const[f,d]of a)c!==0&&d!==0&&n.push([[r,[l,f]],c*d])}else for(const[r,s]of e.entriesIterators()){if(!this.has(r))continue;const a=this.get(r);for(const[l,c]of s)for(const[f,d]of a)d!==0&&c!==0&&n.push([[r,[f,l]],d*c])}return new Kt(n)}}function Gl(t){return Array.isArray(t)&&(typeof t[0]=="string"||typeof t[0]=="number"||typeof t[0]=="bigint")?t[0]:Ol}function zf(t){return Array.isArray(t)}class H4 extends bo{#e=new Js;#t=new Js;#n;constructor(e,n,r,s){super(e,n,r),this.#n=s}run(){const e=new Set;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const[l,c]=s;this.#e.addValue(l,[c,a]),e.add(l)}const n=[];for(const r of e){const s=this.#e.get(r),a=this.#t.get(r),l=this.#n(s),c=new Map,f=new Map;for(const[d,m]of l){const p=c.get(d)??0;c.set(d,p+m)}for(const[d,m]of a){const p=f.get(d)??0;f.set(d,p+m)}for(const[d,m]of f)c.has(d)||(n.push([[r,d],-m]),this.#t.addValue(r,[d,-m]));for(const[d,m]of c)f.has(d)||m!==0&&(n.push([[r,d],m]),this.#t.addValue(r,[d,m]));for(const[d,m]of c){const p=f.get(d);if(p!==void 0){const g=m-p;g!==0&&(n.push([[r,d],g]),this.#t.addValue(r,[d,g]))}}}n.length>0&&this.output.sendData(new Kt(n))}}function V4(t){return e=>{const n=new Hr(e.graph,new qr),r=new H4(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}function E_(t){return"pipe"in t}function k_(t,e={}){const n=Object.fromEntries(Object.entries(e).filter(([r,s])=>!E_(s)));return Object.fromEntries(Object.entries(e).filter(([r,s])=>E_(s))),r=>{const s="__original_key__";return r.pipe(_n(c=>{const f=t(c),d=JSON.stringify(f),m={};m[s]=f;for(const[p,g]of Object.entries(n))m[p]=g.preMap(c);return[d,m]})).pipe(V4(c=>{let f=0;for(const[p,g]of c)f+=g;if(f<=0)return[];const d={},m=c[0]?.[0]?.[s];d[s]=m;for(const[p,g]of Object.entries(n)){const y=c.map(([x,S])=>[x[p],S]);d[p]=g.reduce(y)}return[[d,1]]})).pipe(_n(([c,f])=>{const d=f[s],m={};Object.assign(m,d);for(const[p,g]of Object.entries(n))g.postMap?m[p]=g.postMap(f[p]):m[p]=f[p];return[c,m]}))}}function K4(t=e=>e){return{preMap:e=>t(e),reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function G4(t=e=>e){return{preMap:e=>t(e)==null?0:1,reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function Q4(t=e=>e){return{preMap:e=>({sum:t(e),count:0}),reduce:e=>{let n=0,r=0;for(const[s,a]of e)n+=s.sum*a,r+=a;return{sum:n,count:r}},postMap:e=>e.sum/e.count}}function Z4(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s<r)&&(r=s);return r}}}function Y4(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s>r)&&(r=s);return r}}}const J4={sum:K4,count:G4,avg:Q4,min:Z4,max:Y4};class X4 extends v0{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return this.#e(e),e}}function W4(t){return e=>{const n=new Hr(e.graph,new qr),r=new X4(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class ej extends v0{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.filter(this.#e)}}function Xs(t){return e=>{const n=new Hr(e.graph,new qr),r=new ej(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class tj extends bo{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}run(){for(const e of this.inputMessages())this.#e(e),this.output.sendData(e)}}function nj(t){return e=>{const n=new Hr(e.graph,new qr),r=new tj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class rj extends bo{run(){const e=this.inputMessages();if(e.length===0)return;const n=new Kt;for(const s of e)n.extend(s);const r=n.consolidate();r.getInner().length>0&&this.output.sendData(r)}}function sj(){return t=>{const e=new Hr(t.graph,new qr),n=new rj(t.graph.getNextOperatorId(),t.connectReader(),e.writer);return t.graph.addOperator(n),e}}class ij extends F4{#e=new Js;#t=new Js;#n;constructor(e,n,r,s,a="inner"){super(e,n,r,s),this.#n=a}run(){const e=Js.fromMultiSets(this.inputAMessages()),n=Js.fromMultiSets(this.inputBMessages());if(e.size===0&&n.size===0)return;const r=new Kt;this.#n!=="anti"&&this.emitInnerResults(e,n,r),(this.#n==="left"||this.#n==="full"||this.#n==="anti")&&this.emitLeftOuterResults(e,n,r),(this.#n==="right"||this.#n==="full")&&this.emitRightOuterResults(e,n,r),this.#e.append(e),this.#t.append(n),r.getInner().length>0&&this.output.sendData(r)}emitInnerResults(e,n,r){e.size>0&&r.extend(e.join(this.#t)),n.size>0&&r.extend(this.#e.join(n)),e.size>0&&n.size>0&&r.extend(e.join(n))}emitLeftOuterResults(e,n,r){if(e.size>0)for(const[s,a]of e.entriesIterators()){const l=this.#t.getConsolidatedMultiplicity(s),c=n.getConsolidatedMultiplicity(s);if(l+c===0)for(const[d,m]of a)m!==0&&r.add([s,[d,null]],m)}if(n.size>0)for(const s of n.getPresenceKeys()){const a=this.#t.getConsolidatedMultiplicity(s),l=n.getConsolidatedMultiplicity(s);if(l===0)continue;const c=a+l;if(a===0==(c===0))continue;const f=a===0;for(const[d,m]of this.#e.getIterator(s))m!==0&&r.add([s,[d,null]],f?-m:+m)}}emitRightOuterResults(e,n,r){if(n.size>0)for(const[s,a]of n.entriesIterators()){const l=this.#e.getConsolidatedMultiplicity(s),c=e.getConsolidatedMultiplicity(s);if(l+c===0)for(const[d,m]of a)m!==0&&r.add([s,[null,d]],m)}if(e.size>0)for(const s of e.getPresenceKeys()){const a=this.#e.getConsolidatedMultiplicity(s),l=e.getConsolidatedMultiplicity(s);if(l===0)continue;const c=a+l;if(a===0==(c===0))continue;const f=a===0;for(const[d,m]of this.#t.getIterator(s))m!==0&&r.add([s,[null,d]],f?-m:+m)}}}function aj(t,e="inner"){return n=>{if(n.graph!==t.graph)throw new Error("Cannot join streams from different graphs");const r=new Hr(n.graph,new qr),s=new ij(n.graph.getNextOperatorId(),n.connectReader(),t.connectReader(),r.writer,e);return n.graph.addOperator(s),r}}class oj extends bo{#e;#t;constructor(e,n,r,s=a=>a){super(e,n,r),this.#e=s,this.#t=new Map}run(){const e=new Map;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const l=wn(this.#e(s)),f=(e.get(l)?.[0]??this.#t.get(l)??0)+a;e.set(l,[f,s])}const n=[];for(const[r,[s,a]]of e.entries()){const l=this.#t.get(r)??0;s===0?this.#t.delete(r):this.#t.set(r,s),l<=0&&s>0?n.push([[wn(this.#e(a)),a[1]],1]):l>0&&s<=0&&n.push([[wn(this.#e(a)),a[1]],-1])}n.length>0&&this.output.sendData(new Kt(n))}}function lj(t=e=>e){return e=>{const n=new Hr(e.graph,new qr),r=new oj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const uj="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Ja(t,e,n){const r=n[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let l=0;for(;(t[l]||r)===e[l];)l++;if(l>0)return e.slice(0,l)+Ja(t.slice(l),e.slice(l),n)}const s=t?n.indexOf(t[0]):0,a=e!=null?n.indexOf(e[0]):n.length;if(a-s>1){const l=Math.round(.5*(s+a));return n[l]}else return e&&e.length>1?e.slice(0,1):n[s]+Ja(t.slice(1),null,n)}function FE(t){if(t.length!==BE(t[0]))throw new Error("invalid integer part of order key: "+t)}function BE(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function Il(t){const e=BE(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function R_(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const n=Il(t);if(t.slice(n.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function T_(t,e){FE(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])+1;l===e.length?r[a]=e[0]:(r[a]=e[l],s=!1)}if(s){if(n==="Z")return"a"+e[0];if(n==="z")return null;const a=String.fromCharCode(n.charCodeAt(0)+1);return a>"a"?r.push(e[0]):r.pop(),a+r.join("")}else return n+r.join("")}function cj(t,e){FE(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])-1;l===-1?r[a]=e.slice(-1):(r[a]=e[l],s=!1)}if(s){if(n==="a")return"Z"+e.slice(-1);if(n==="A")return null;const a=String.fromCharCode(n.charCodeAt(0)-1);return a<"Z"?r.push(e.slice(-1)):r.pop(),a+r.join("")}else return n+r.join("")}function fj(t,e,n=uj){if(t!=null&&R_(t,n),e!=null&&R_(e,n),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+n[0];const f=Il(e),d=e.slice(f.length);if(f==="A"+n[0].repeat(26))return f+Ja("",d,n);if(f<e)return f;const m=cj(f,n);if(m==null)throw new Error("cannot decrement any more");return m}if(e==null){const f=Il(t),d=t.slice(f.length),m=T_(f,n);return m??f+Ja(d,null,n)}const r=Il(t),s=t.slice(r.length),a=Il(e),l=e.slice(a.length);if(r===a)return r+Ja(s,l,n);const c=T_(r,n);if(c==null)throw new Error("cannot increment any more");return c<e?c:r+Ja(s,null,n)}class A_{#e=[];#t;#n;#r;constructor(e,n,r){this.#n=e,this.#r=e+n,this.#t=r}get size(){const e=this.#n,n=this.#r-this.#n,r=this.#e.length-e;return Math.max(0,Math.min(n,r))}move({offset:e,limit:n}){const r=this.#n,s=this.#r-this.#n,a=[this.#n,this.#r===1/0?this.#n+this.size:this.#r];this.#n=e??r,this.#r=this.#n+(n??s);const l=[this.#n,this.#r===1/0?Math.max(this.#n+this.size,a[1]):this.#r],{onlyInA:c,onlyInB:f}=h4(a,l),d=[];f.forEach(p=>{const g=this.#e[p];g&&d.push(g)});const m=[];return c.forEach(p=>{const g=this.#e[p];g&&m.push(g)}),{moveIns:d,moveOuts:m,changes:c.length+f.length>0}}insert(e){const n={moveIn:null,moveOut:null},r=this.#s(e),s=r===0?null:I_(this.#e[r-1]),a=r===this.#e.length?null:I_(this.#e[r]),l=fj(s,a),c=O_(e,l);if(this.#e.splice(r,0,c),r<this.#r){const f=Math.max(r,this.#n);f<this.#e.length&&(n.moveIn=this.#e[f],this.#r<this.#e.length&&(n.moveOut=this.#e[this.#r]))}return n}delete(e){const n={moveIn:null,moveOut:null},r=this.#s(e),[s]=this.#e.splice(r,1);if(r<this.#r){if(n.moveOut=s,r<this.#n){const l=this.#n-1;l<this.#e.length?n.moveOut=this.#e[l]:n.moveOut=null}const a=this.#r-1;a<this.#e.length&&(n.moveIn=this.#e[a])}return n}#s(e){return f4(this.#e,O_(e,""),(n,r)=>this.#t(M_(n),M_(r)))}}class dj extends bo{#e=new Map;#t;constructor(e,n,r,s,a){super(e,n,r);const l=a.limit??1/0,c=a.offset??0;this.#t=this.createTopK(c,l,pj(s)),a.setSizeCallback?.(()=>this.#t.size),a.setWindowFn?.(this.moveTopK.bind(this))}createTopK(e,n,r){return new A_(e,n,r)}moveTopK({offset:e,limit:n}){if(!(this.#t instanceof A_))throw new Error("Cannot move B+-tree implementation of TopK with fractional index");const r=[],s=this.#t.move({offset:e,limit:n});s.moveIns.forEach(a=>this.handleMoveIn(a,r)),s.moveOuts.forEach(a=>this.handleMoveOut(a,r)),s.changes&&this.output.sendData(new Kt(r))}run(){const e=[];for(const n of this.inputMessages())for(const[r,s]of n.getInner()){const[a,l]=r;this.processElement(a,l,s,e)}e.length>0&&this.output.sendData(new Kt(e))}processElement(e,n,r,s){const{oldMultiplicity:a,newMultiplicity:l}=this.addKey(e,r);let c={moveIn:null,moveOut:null};a<=0&&l>0?c=this.#t.insert([e,n]):a>0&&l<=0&&(c=this.#t.delete([e,n])),this.handleMoveIn(c.moveIn,s),this.handleMoveOut(c.moveOut,s)}handleMoveIn(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],1])}}handleMoveOut(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],-1])}}getMultiplicity(e){return this.#e.get(e)??0}addKey(e,n){const r=this.getMultiplicity(e),s=r+n;return s===0?this.#e.delete(e):this.#e.set(e,s),{oldMultiplicity:r,newMultiplicity:s}}}function hj(t,e){const n=e||{};return r=>{const s=new Hr(r.graph,new qr),a=new dj(r.graph.getNextOperatorId(),r.connectReader(),s.writer,t,n);return r.graph.addOperator(a),s}}function O_(t,e){return[t,e]}function M_(t){return t[0]}function I_(t){return t[1]}function pj(t){return([e,n],[r,s])=>{const a=t(n,s);return a!==0?a:ad(e,r)}}function mj(t,e,n){const r=n?.limit??1/0,s=n?.offset??0,a=n?.setSizeCallback,l=n?.setWindowFn,c=n?.comparator??((f,d)=>f===d?0:f<d?-1:1);return f=>f.pipe(t((d,m)=>c(e(d),e(m)),{limit:r,offset:s,setSizeCallback:a,setWindowFn:l}),sj())}function gj(t,e){return mj(hj,t,e)}class yj{constructor(e,n,r){this._root=Gm,this._size=0,this._maxNodeSize=r>=4?Math.min(r,256):32,this._compare=e,n&&this.setPairs(n)}get size(){return this._size}get length(){return this._size}get isEmpty(){return this._size===0}clear(){this._root=Gm,this._size=0}get(e,n){return this._root.get(e,n,this)}set(e,n,r){this._root.isShared&&(this._root=this._root.clone());const s=this._root.set(e,n,r,this);return s===!0||s===!1?s:(this._root=new b0([this._root,s]),!0)}has(e){return this.forRange(e,e,!0,void 0)!==0}delete(e){return this.editRange(e,e,!0,bj)!==0}get maxNodeSize(){return this._maxNodeSize}minKey(){return this._root.minKey()}maxKey(){return this._root.maxKey()}keysArray(){const e=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,(n,r)=>{e.push(n)}),e}nextHigherPair(e,n){return n=n||[],e===void 0?this._root.minPair(n):this._root.getPairOrNextHigher(e,this._compare,!1,n)}nextHigherKey(e){const n=this.nextHigherPair(e,N_);return n&&n[0]}nextLowerPair(e,n){return n=n||[],e===void 0?this._root.maxPair(n):this._root.getPairOrNextLower(e,this._compare,!1,n)}nextLowerKey(e){const n=this.nextLowerPair(e,N_);return n&&n[0]}setPairs(e,n){let r=0;for(const s of e)this.set(s[0],s[1],n)&&r++;return r}forRange(e,n,r,s,a){const l=this._root.forRange(e,n,r,!1,this,a||0,s);return typeof l=="number"?l:l.break}editRange(e,n,r,s,a){let l=this._root;l.isShared&&(this._root=l=l.clone());try{const c=l.forRange(e,n,r,!0,this,a||0,s);return typeof c=="number"?c:c.break}finally{let c;for(;l.keys.length<=1&&!l.isLeaf;)c||=l.isShared,this._root=l=l.keys.length===0?Gm:l.children[0];c&&(l.isShared=!0)}}}class pu{get isLeaf(){return this.children===void 0}constructor(e=[],n){this.keys=e,this.values=n||pn,this.isShared=void 0}maxKey(){return this.keys[this.keys.length-1]}indexOf(e,n,r){const s=this.keys;let a=0,l=s.length,c=l>>1;for(;a<l;){const f=r(s[c],e);if(f<0)a=c+1;else if(f>0)l=c;else{if(f===0)return c;if(e===e)return s.length;throw new Error("BTree: NaN was used as a key")}c=a+l>>1}return c^n}minKey(){return this.keys[0]}minPair(e){if(this.keys.length!==0)return e[0]=this.keys[0],e[1]=this.values[0],e}maxPair(e){if(this.keys.length===0)return;const n=this.keys.length-1;return e[0]=this.keys[n],e[1]=this.values[n],e}clone(){const e=this.values;return new pu(this.keys.slice(0),e===pn?e:e.slice(0))}get(e,n,r){const s=this.indexOf(e,-1,r._compare);return s<0?n:this.values[s]}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a-1:r?a:a-1;if(l>=0)return s[0]=this.keys[l],s[1]=this.values[l],s}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a:r?a:a+1,c=this.keys;if(l<c.length)return s[0]=c[l],s[1]=this.values[l],s}set(e,n,r,s){let a=this.indexOf(e,-1,s._compare);if(a<0){if(a=~a,s._size++,this.keys.length<s._maxNodeSize)return this.insertInLeaf(a,e,n,s);{const l=this.splitOffRightSide();let c=this;return a>this.keys.length&&(a-=this.keys.length,c=l),c.insertInLeaf(a,e,n,s),l}}else return r!==!1&&(n!==void 0&&this.reifyValues(),this.keys[a]=e,this.values[a]=n),!1}reifyValues(){return this.values===pn?this.values=this.values.slice(0,this.keys.length):this.values}insertInLeaf(e,n,r,s){if(this.keys.splice(e,0,n),this.values===pn){for(;pn.length<s._maxNodeSize;)pn.push(void 0);if(r===void 0)return!0;this.values=pn.slice(0,this.keys.length-1)}return this.values.splice(e,0,r),!0}takeFromRight(e){let n=this.values;e.values===pn?n!==pn&&n.push(void 0):(n=this.reifyValues(),n.push(e.values.shift())),this.keys.push(e.keys.shift())}takeFromLeft(e){let n=this.values;e.values===pn?n!==pn&&n.unshift(void 0):(n=this.reifyValues(),n.unshift(e.values.pop())),this.keys.unshift(e.keys.pop())}splitOffRightSide(){const e=this.keys.length>>1,n=this.keys.splice(e),r=this.values===pn?pn:this.values.splice(e);return new pu(n,r)}forRange(e,n,r,s,a,l,c){const f=a._compare;let d,m;if(n===e){if(!r||(m=(d=this.indexOf(e,-1,f))+1,d<0))return l}else d=this.indexOf(e,0,f),m=this.indexOf(n,-1,f),m<0?m=~m:r===!0&&m++;const p=this.keys,g=this.values;if(c!==void 0)for(let y=d;y<m;y++){const x=p[y],S=c(x,g[y],l++);if(S!==void 0){if(s===!0){if(x!==p[y]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");S.delete?(this.keys.splice(y,1),this.values!==pn&&this.values.splice(y,1),a._size--,y--,m--):S.hasOwnProperty("value")&&(g[y]=S.value)}if(S.break!==void 0)return S}}else l+=m-d;return l}mergeSibling(e,n){if(this.keys.push.apply(this.keys,e.keys),this.values===pn){if(e.values===pn)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,e.reifyValues())}}class b0 extends pu{constructor(e,n){if(!n){n=[];for(let r=0;r<e.length;r++)n[r]=e[r].maxKey()}super(n),this.children=e}minKey(){return this.children[0].minKey()}minPair(e){return this.children[0].minPair(e)}maxPair(e){return this.children[this.children.length-1].maxPair(e)}get(e,n,r){const s=this.indexOf(e,0,r._compare),a=this.children;return s<a.length?a[s].get(e,n,r):void 0}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children;if(a>=l.length)return this.maxPair(s);const c=l[a].getPairOrNextLower(e,n,r,s);return c===void 0&&a>0?l[a-1].maxPair(s):c}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children,c=l.length;if(a>=c)return;const f=l[a].getPairOrNextHigher(e,n,r,s);return f===void 0&&a<c-1?l[a+1].minPair(s):f}set(e,n,r,s){const a=this.children,l=s._maxNodeSize,c=s._compare;let f=Math.min(this.indexOf(e,0,c),a.length-1),d=a[f];if(d.isShared&&(a[f]=d=d.clone()),d.keys.length>=l){let p;f>0&&(p=a[f-1]).keys.length<l&&c(d.keys[0],e)<0?(p.isShared&&(a[f-1]=p=p.clone()),p.takeFromRight(d),this.keys[f-1]=p.maxKey()):(p=a[f+1])!==void 0&&p.keys.length<l&&c(d.maxKey(),e)<0&&(p.isShared&&(a[f+1]=p=p.clone()),p.takeFromLeft(d),this.keys[f]=a[f].maxKey())}const m=d.set(e,n,r,s);if(m===!1)return!1;if(this.keys[f]=d.maxKey(),m===!0)return!0;if(this.keys.length<l)return this.insert(f+1,m),!0;{const p=this.splitOffRightSide();let g=this;return c(m.maxKey(),this.maxKey())>0&&(g=p,f-=this.keys.length),g.insert(f+1,m),p}}insert(e,n){this.children.splice(e,0,n),this.keys.splice(e,0,n.maxKey())}splitOffRightSide(){const e=this.children.length>>1;return new b0(this.children.splice(e),this.keys.splice(e))}takeFromRight(e){this.keys.push(e.keys.shift()),this.children.push(e.children.shift())}takeFromLeft(e){this.keys.unshift(e.keys.pop()),this.children.unshift(e.children.pop())}forRange(e,n,r,s,a,l,c){const f=a._compare,d=this.keys,m=this.children;let p=this.indexOf(e,0,f),g=p;const y=Math.min(n===e?p:this.indexOf(n,0,f),d.length-1);if(s){if(g<=y)try{for(;g<=y;g++){m[g].isShared&&(m[g]=m[g].clone());const x=m[g].forRange(e,n,r,s,a,l,c);if(d[g]=m[g].maxKey(),typeof x!="number")return x;l=x}}finally{const x=a._maxNodeSize>>1;for(p>0&&p--,g=y;g>=p;g--)m[g].keys.length<=x&&(m[g].keys.length!==0?this.tryMerge(g,a._maxNodeSize):(d.splice(g,1),m.splice(g,1)));m.length!==0&&m[0].keys.length===0&&xj(!1,"emptiness bug")}}else for(;g<=y;g++){const x=m[g].forRange(e,n,r,s,a,l,c);if(typeof x!="number")return x;l=x}return l}tryMerge(e,n){const r=this.children;return e>=0&&e+1<r.length&&r[e].keys.length+r[e+1].keys.length<=n?(r[e].isShared&&(r[e]=r[e].clone()),r[e].mergeSibling(r[e+1],n),r.splice(e+1,1),this.keys.splice(e+1,1),this.keys[e]=r[e].maxKey(),!0):!1}mergeSibling(e,n){const r=this.keys.length;this.keys.push.apply(this.keys,e.keys);const s=e.children;if(this.children.push.apply(this.children,s),e.isShared&&!this.isShared)for(const a of s)a.isShared=!0;this.tryMerge(r-1,n)}}const pn=[],vj={delete:!0},bj=()=>vj,Gm=(function(){const t=new pu;return t.isShared=!0,t})(),N_=[];function xj(t,...e){throw e.unshift("B+ tree"),new Error(e.join(" "))}function Sj(){const t=new Map;function e(n){const r=n.join(".");if(t.has(r))return t.get(r);const s=new Proxy({},{get(a,l,c){if(l==="__refProxy")return!0;if(l==="__path")return n;if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,c);const f=[...n,String(l)];return e(f)},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?!0:Reflect.has(a,l)},ownKeys(a){return Reflect.ownKeys(a)},getOwnPropertyDescriptor(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(a,l)}});return t.set(r,s),s}return e([])}function $a(t){const e=new Map;let n=0;function r(a){const l=a.join(".");if(e.has(l))return e.get(l);const c=new Proxy({},{get(f,d,m){if(d==="__refProxy")return!0;if(d==="__path")return a;if(d==="__type")return;if(typeof d=="symbol")return Reflect.get(f,d,m);const p=[...a,String(d)];return r(p)},has(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?!0:Reflect.has(f,d)},ownKeys(f){const d=++n,m=`__SPREAD_SENTINEL__${a.join(".")}__${d}`;return Object.prototype.hasOwnProperty.call(f,m)||Object.defineProperty(f,m,{enumerable:!0,configurable:!0,value:!0}),Reflect.ownKeys(f)},getOwnPropertyDescriptor(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(f,d)}});return e.set(l,c),c}return new Proxy({},{get(a,l,c){if(l==="__refProxy")return!0;if(l==="__path")return[];if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,c);const f=String(l);if(t.includes(f))return r([f])},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"||typeof l=="string"&&t.includes(l)?!0:Reflect.has(a,l)},ownKeys(a){return[...t,"__refProxy","__path","__type"]},getOwnPropertyDescriptor(a,l){if(l==="__refProxy"||l==="__path"||l==="__type")return{enumerable:!1,configurable:!0};if(typeof l=="string"&&t.includes(l))return{enumerable:!0,configurable:!0}}})}function en(t){return wj(t)?new En(t.__path):t&&typeof t=="object"&&"type"in t&&(t.type==="func"||t.type==="ref"||t.type==="val"||t.type==="agg")?t:new jn(t)}function wj(t){return t&&typeof t=="object"&&t.__refProxy===!0}function Zg(t,e){return new Sr("eq",[en(t),en(e)])}function z_(t,e){return new Sr("gt",[en(t),en(e)])}function _j(t,e){return new Sr("gte",[en(t),en(e)])}function Yg(t,e){return new Sr("lt",[en(t),en(e)])}function Jg(t,e,...n){const r=[t,e,...n];return new Sr("and",r.map(s=>en(s)))}function Cj(t,e,...n){const r=[t,e,...n];return new Sr("or",r.map(s=>en(s)))}function Ej(t,e){return new Sr("in",[en(t),en(e)])}class kj{constructor(e,n,r,s){this.lookupCount=0,this.totalLookupTime=0,this.lastUpdated=new Date,this.id=e,this.expression=n,this.compareOptions=g0,this.name=r,this.initialize(s)}supports(e){return this.supportedOperations.has(e)}matchesField(e){return this.expression.type==="ref"&&this.expression.path.length===e.length&&this.expression.path.every((n,r)=>n===e[r])}matchesCompareOptions(e){const n={...this.compareOptions,direction:void 0},r={...e,direction:void 0};return Ar(n,r)}matchesDirection(e){return this.compareOptions.direction===e}getStats(){return{entryCount:this.keyCount,lookupCount:this.lookupCount,averageLookupTime:this.lookupCount>0?this.totalLookupTime/this.lookupCount:0,lastUpdated:this.lastUpdated}}evaluateIndexExpression(e){return p0(this.expression)(e)}trackLookup(e){const n=performance.now()-e;this.lookupCount++,this.totalLookupTime+=n}updateTimestamp(){this.lastUpdated=new Date}}class Xg extends kj{constructor(e,n,r,s){super(e,n,r,s),this.supportedOperations=new Set(["eq","gt","gte","lt","lte","in"]),this.valueMap=new Map,this.indexedKeys=new Set,this.compareFn=Kg,this.compareFn=s?.compareFn??Kg,s?.compareOptions&&(this.compareOptions=s.compareOptions),this.orderedEntries=new yj(this.compareFn)}initialize(e){}add(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){throw new Error(`Failed to evaluate index expression for key ${e}: ${a}`)}const s=ps(r);if(this.valueMap.has(s))this.valueMap.get(s).add(e);else{const a=new Set([e]);this.valueMap.set(s,a),this.orderedEntries.set(s,void 0)}this.indexedKeys.add(e),this.updateTimestamp()}remove(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){console.warn(`Failed to evaluate index expression for key ${e} during removal:`,a);return}const s=ps(r);if(this.valueMap.has(s)){const a=this.valueMap.get(s);a.delete(e),a.size===0&&(this.valueMap.delete(s),this.orderedEntries.delete(s))}this.indexedKeys.delete(e),this.updateTimestamp()}update(e,n,r){this.remove(e,n),this.add(e,r)}build(e){this.clear();for(const[n,r]of e)this.add(n,r)}clear(){this.orderedEntries.clear(),this.valueMap.clear(),this.indexedKeys.clear(),this.updateTimestamp()}lookup(e,n){const r=performance.now();let s;switch(e){case"eq":s=this.equalityLookup(n);break;case"gt":s=this.rangeQuery({from:n,fromInclusive:!1});break;case"gte":s=this.rangeQuery({from:n,fromInclusive:!0});break;case"lt":s=this.rangeQuery({to:n,toInclusive:!1});break;case"lte":s=this.rangeQuery({to:n,toInclusive:!0});break;case"in":s=this.inArrayLookup(n);break;default:throw new Error(`Operation ${e} not supported by BTreeIndex`)}return this.trackLookup(r),s}get keyCount(){return this.indexedKeys.size}equalityLookup(e){const n=ps(e);return new Set(this.valueMap.get(n)??[])}rangeQuery(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e,l=new Set,c=ps(n),f=ps(r),d=c??this.orderedEntries.minKey(),m=f??this.orderedEntries.maxKey();return this.orderedEntries.forRange(d,m,a,(p,g)=>{if(!s&&this.compareFn(p,n)===0)return;const y=this.valueMap.get(p);y&&y.forEach(x=>l.add(x))}),l}rangeQueryReversed(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e;return this.rangeQuery({from:r??this.orderedEntries.maxKey(),to:n??this.orderedEntries.minKey(),fromInclusive:a,toInclusive:s})}takeInternal(e,n,r,s,a=!1){const l=new Set,c=[];let f,d=ps(r);for(;(f=n(d))!==void 0&&c.length<e;){d=f[0];const m=this.valueMap.get(d);if(m&&m.size>0){const p=Array.from(m).sort(ad);a&&p.reverse();for(const g of p){if(c.length>=e)break;!l.has(g)&&(s?.(g)??!0)&&(c.push(g),l.add(g))}}}return c}take(e,n,r){const s=a=>this.orderedEntries.nextHigherPair(a);return this.takeInternal(e,s,n,r)}takeReversed(e,n,r){const s=a=>this.orderedEntries.nextLowerPair(a);return this.takeInternal(e,s,n,r,!0)}inArrayLookup(e){const n=new Set;for(const r of e){const s=ps(r),a=this.valueMap.get(s);a&&a.forEach(l=>n.add(l))}return n}get indexedKeysSet(){return this.indexedKeys}get orderedEntriesArray(){return this.orderedEntries.keysArray().map(e=>[e,this.valueMap.get(e)??new Set])}get orderedEntriesArrayReversed(){return this.takeReversed(this.orderedEntries.size).map(e=>[e,this.valueMap.get(e)??new Set])}get valueMapData(){return this.valueMap}}function UE(t){return t.config.autoIndex==="eager"}function $d(t,e,n,r,s){if(!UE(n))return;const a=r??{...g0,...n.compareOptions};if(!Array.from(n.indexes.values()).find(c=>c.matchesField(e)&&c.matchesCompareOptions(a)))try{n.createIndex(c=>{let f=c;for(const d of e)f=f[d];return f},{name:`auto:${e.join(".")}`,indexType:Xg,options:s?{compareFn:s,compareOptions:a}:{}})}catch(c){console.warn(`${n.id?`[${n.id}] `:""}Failed to create auto-index for field path "${e.join(".")}":`,c)}}function Rj(t,e){if(!UE(e))return;const n=Tj(t);for(const{fieldName:r,fieldPath:s}of n)$d(r,s,e)}function Tj(t){const e=[];function n(r){if(r.type!=="func")return;const s=r;if(s.name==="and"){for(const d of s.args)n(d);return}if(!["eq","gt","gte","lt","lte","in"].includes(s.name)||s.args.length<1||s.args[0].type!=="ref")return;const c=s.args[0].path;if(c.length===0)return;const f=c.join("_");e.push({fieldName:f,fieldPath:c})}return n(t),e}const{sum:Aj,count:Oj,avg:Mj,min:Ij,max:Nj}=J4;function zj(t,e){const n=new Map,r=[...t];if(!e)return{selectToGroupByIndex:n,groupByExpressions:r};for(const[s,a]of Object.entries(e)){if(a.type==="agg")continue;const l=r.findIndex(c=>od(a,c));if(l===-1)throw new LD(s);n.set(s,l)}return{selectToGroupByIndex:n,groupByExpressions:r}}function D_(t,e,n,r,s){if(e.length===0){const d={};if(r){for(const[p,g]of Object.entries(r))if(g.type==="agg"){const y=g;d[p]=j_(y)}}const m=()=>({__singleGroup:!0});if(t=t.pipe(k_(m,d)),t=t.pipe(_n(([,p])=>{const y={...p.__select_results||{}};if(r)for(const[x,S]of Object.entries(r))S.type==="agg"&&(y[x]=p[x]);return["single_group",{...p,__select_results:y}]})),n&&n.length>0)for(const p of n){const g=h_(p),y=ld(g,r||{}),x=Ln(y);t=t.pipe(Xs(([,S])=>{const E={result:S.__select_results};return ro(x(E))}))}if(s&&s.length>0)for(const p of s)t=t.pipe(Xs(([,g])=>{const y={result:g.__select_results};return ro(p(y))}));return t}const a=zj(e,r),l=e.map(d=>Ln(d)),c=([,d])=>{const m={...d};delete m.__select_results;const p={};for(let g=0;g<e.length;g++){const y=l[g],x=y(m);p[`__key_${g}`]=x}return p},f={};if(r){for(const[d,m]of Object.entries(r))if(m.type==="agg"){const p=m;f[d]=j_(p)}}if(t=t.pipe(k_(c,f)),t=t.pipe(_n(([,d])=>{const m=d.__select_results||{},p={};if(r)for(const[y,x]of Object.entries(r))if(x.type!=="agg"){const S=a.selectToGroupByIndex.get(y);S!==void 0?p[y]=d[`__key_${S}`]:p[y]=m[y]}else p[y]=d[y];else for(let y=0;y<e.length;y++)p[`__key_${y}`]=d[`__key_${y}`];let g;if(e.length===1)g=d.__key_0;else{const y=[];for(let x=0;x<e.length;x++)y.push(d[`__key_${x}`]);g=JSON.stringify(y)}return[g,{...d,__select_results:p}]})),n&&n.length>0)for(const d of n){const m=h_(d),p=ld(m,r||{}),g=Ln(p);t=t.pipe(Xs(([,y])=>{const x={result:y.__select_results};return g(x)}))}if(s&&s.length>0)for(const d of s)t=t.pipe(Xs(([,m])=>{const p={result:m.__select_results};return ro(d(p))}));return t}function od(t,e){if(!t||!e||t.type!==e.type)return!1;switch(t.type){case"ref":return!t.path||!e.path||t.path.length!==e.path.length?!1:t.path.every((n,r)=>n===e.path[r]);case"val":return t.value===e.value;case"func":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>od(n,e.args[r]));case"agg":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>od(n,e.args[r]));default:return!1}}function j_(t){const e=Ln(t.args[0]),n=([,a])=>{const l=e(a);return typeof l=="number"?l:l!=null?Number(l):0},r=([,a])=>{const l=e(a);return typeof l=="number"||l instanceof Date?l:l!=null?Number(l):0},s=([,a])=>e(a);switch(t.name.toLowerCase()){case"sum":return Aj(n);case"count":return Oj(s);case"avg":return Mj(n);case"min":return Ij(r);case"max":return Nj(r);default:throw new PD(t.name)}}function ld(t,e,n="result"){switch(t.type){case"agg":{const r=t;for(const[s,a]of Object.entries(e))if(a.type==="agg"&&Dj(r,a))return new En([n,s]);throw new $D(r.name)}case"func":{const r=t,s=r.args.map(a=>ld(a,e));return new Sr(r.name,s)}case"ref":return t;case"val":return t;default:throw new FD(t.type)}}function Dj(t,e){return t.name===e.name&&t.args.length===e.args.length&&t.args.every((n,r)=>od(n,e.args[r]))}function jj(t,e,n,r,s,a,l,c,f){const d=n.map(x=>{const S=ld(x.expression,r,"__select_results");return{compiledExpression:Ln(S),compareOptions:Wg(x,s)}}),m=x=>{const S=x;return n.length>1?d.map(E=>E.compiledExpression(S)):n.length===1?d[0].compiledExpression(S):null},p=(x,S)=>{if(n.length>1){const E=x,C=S;for(let k=0;k<n.length;k++){const R=d[k],j=sd(R.compareOptions)(E[k],C[k]);if(j!==0)return j}return E.length-C.length}if(n.length===1){const E=d[0];return sd(E.compareOptions)(x,S)}return Kg(x,S)};let g,y;if(c){let x,S,E,C=t.from.alias;const k=n[0],R=k.expression;if(R.type==="ref"){const N=du(t,R,s);if(N){S=N.collection;const j=N.path[0],T=Wg(k,S);j&&$d(j,N.path,S,T,p),E=Ln(new En(N.path),!0),x=Ru(S,N.path,T),x?.supports("gt")||(x=void 0),C=R.path.length>1?String(R.path[0]):t.from.alias}}if(E){const j=n.every(P=>P.expression.type==="ref")?n.map(P=>{const M=P.expression,B=du(t,M,s);return Ln(B?new En(B.path):P.expression,!0)}):void 0;y={alias:C,offset:f??0,limit:c,comparator:(P,M)=>{if(n.length===1){const B=P&&E(P),G=M&&E(M);return p(B,G)}if(j){const B=G=>G&&j.map(ee=>ee(G));return p(B(P),B(M))}return 0},valueExtractorForRawRow:P=>{if(n.length===1)return E(P);if(j)return j.map(M=>M(P))},firstColumnValueExtractor:E,index:x,orderBy:n};const L=S?.id??s.id;a[L]=y,x&&(g=P=>{a[L].dataNeeded=()=>{const M=P();return Math.max(0,y.limit-M)}})}}return e.pipe(gj(m,{limit:c,offset:f,comparator:p,setSizeCallback:g,setWindowFn:x=>{l(S=>{x(S),y&&(y.offset=S.offset??y.offset,y.limit=S.limit??y.limit)})}}))}function Wg(t,e){return t.compareOptions.stringSort!==void 0?t.compareOptions:{...e.compareOptions,direction:t.compareOptions.direction,nulls:t.compareOptions.nulls}}function Lj(t,e={}){const n=r=>{const s=[];for(const[a,l]of t.entries())(r?.(l)??!0)&&s.push({type:"insert",key:a,value:l});return s};if(e.limit!==void 0&&!e.orderBy)throw new Error("limit cannot be used without orderBy");if(e.orderBy){const r=e.where?Ql(e.where):void 0,s=$j(t,e.orderBy,e.limit,r,e.optimizedOnly);if(s===void 0)return;const a=[];for(const l of s){const c=t.get(l);c!==void 0&&a.push({type:"insert",key:l,value:c})}return a}if(!e.where)return n();try{const r=e.where,s=s4(r,t);if(s.canOptimize){const a=[];for(const l of s.matchingKeys){const c=t.get(l);c!==void 0&&a.push({type:"insert",key:l,value:c})}return a}else{if(e.optimizedOnly)return;const a=Ql(r);return n(a)}}catch(r){console.warn(`${t.id?`[${t.id}] `:""}Error processing where clause, falling back to full scan:`,r);const s=Ql(e.where);return e.optimizedOnly?void 0:n(s)}}function Ql(t){const e=p0(t);return n=>{try{const r=e(n);return ro(r)}catch{return!1}}}function Pj(t,e){const n=Ql(e.whereExpression);return r=>{const s=[];for(const a of r)if(a.type==="insert")n(a.value)&&s.push(a);else if(a.type==="update"){const l=n(a.value),c=a.previousValue?n(a.previousValue):!1;l&&c?s.push(a):l&&!c?s.push({...a,type:"insert"}):!l&&c&&s.push({...a,type:"delete",value:a.previousValue})}else n(a.value)&&s.push(a);(s.length>0||r.length===0)&&t(s)}}function $j(t,e,n,r,s){if(e.length===1){const f=e[0],d=f.expression;if(d.type==="ref"){const p=d.path,g=Wg(f,t);$d(p[0],p,t,g);const y=Ru(t,p,g);if(y&&y.supports("gt")){const x=S=>{const E=t.get(S);return E===void 0?!1:r?.(E)??!0};return y.take(n??y.keyCount,void 0,x)}}}if(s)return;const a=[];for(const[f,d]of t.entries())(r?.(d)??!0)&&a.push({key:f,value:d});const l=(f,d)=>{for(const m of e){const p=sd(m.compareOptions),g=L_(f.value,m.expression),y=L_(d.value,m.expression),x=p(g,y);if(x!==0)return x}return 0};a.sort(l);const c=a.map(f=>f.key);return n!==void 0?c.slice(0,n):c}function L_(t,e){if(e.type==="ref"){const n=e;let r=t;for(const s of n.path)r=r?.[s];return r}else return e.type==="val"?e.value:p0(e)(t)}class P_{constructor(e){this.map=new Map,this.sortedKeys=[],this.comparator=e}indexOf(e,n){let r=0,s=this.sortedKeys.length;if(!this.comparator){for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],c=ad(e,l);if(c<0)s=a;else if(c>0)r=a+1;else return a}return r}for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],c=this.map.get(l),f=this.comparator(n,c);if(f<0)s=a;else if(f>0)r=a+1;else{const d=ad(e,l);if(d<0)s=a;else if(d>0)r=a+1;else return a}}return r}set(e,n){if(this.map.has(e)){const s=this.map.get(e),a=this.indexOf(e,s);this.sortedKeys.splice(a,1)}const r=this.indexOf(e,n);return this.sortedKeys.splice(r,0,e),this.map.set(e,n),this}get(e){return this.map.get(e)}delete(e){if(this.map.has(e)){const n=this.map.get(e),r=this.indexOf(e,n);return this.sortedKeys.splice(r,1),this.map.delete(e)}return!1}has(e){return this.map.has(e)}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}*[Symbol.iterator](){for(const e of this.sortedKeys)yield[e,this.map.get(e)]}entries(){return this[Symbol.iterator]()}keys(){return this.sortedKeys[Symbol.iterator]()}values(){return(function*(){for(const e of this.sortedKeys)yield this.map.get(e)}).call(this)}forEach(e){for(const n of this.sortedKeys)e(this.map.get(n),n,this.map)}}class Fj{constructor(e){this.pendingSyncedTransactions=[],this.syncedMetadata=new Map,this.optimisticUpserts=new Map,this.optimisticDeletes=new Set,this.size=0,this.syncedKeys=new Set,this.preSyncVisibleState=new Map,this.recentlySyncedKeys=new Set,this.hasReceivedFirstCommit=!1,this.isCommittingSyncTransactions=!1,this.commitPendingTransactions=()=>{let n=!1;for(const l of this.transactions.values())if(l.state==="persisting"){n=!0;break}const{committedSyncedTransactions:r,uncommittedSyncedTransactions:s,hasTruncateSync:a}=this.pendingSyncedTransactions.reduce((l,c)=>(c.committed?(l.committedSyncedTransactions.push(c),c.truncate===!0&&(l.hasTruncateSync=!0)):l.uncommittedSyncedTransactions.push(c),l),{committedSyncedTransactions:[],uncommittedSyncedTransactions:[],hasTruncateSync:!1});if(!n||a){this.isCommittingSyncTransactions=!0;const l=a?r.find(g=>g.truncate)?.optimisticSnapshot:null,c=new Set;for(const g of r)for(const y of g.operations)c.add(y.key);let f=this.preSyncVisibleState;if(f.size===0){f=new Map;for(const g of c){const y=this.get(g);y!==void 0&&f.set(g,y)}}const d=[],m=this.config.sync.rowUpdateMode||"partial";for(const g of r){if(g.truncate){const y=new Set([...this.syncedData.keys(),...l?.upserts.keys()||[]]);for(const x of y){if(l?.deletes.has(x))continue;const S=l?.upserts.get(x)||this.syncedData.get(x);S!==void 0&&d.push({type:"delete",key:x,value:S})}this.syncedData.clear(),this.syncedMetadata.clear(),this.syncedKeys.clear();for(const x of c)f.delete(x);this._events.emit("truncate",{type:"truncate",collection:this.collection})}for(const y of g.operations){const x=y.key;switch(this.syncedKeys.add(x),y.type){case"insert":this.syncedMetadata.set(x,y.metadata);break;case"update":this.syncedMetadata.set(x,Object.assign({},this.syncedMetadata.get(x),y.metadata));break;case"delete":this.syncedMetadata.delete(x);break}switch(y.type){case"insert":this.syncedData.set(x,y.value);break;case"update":{if(m==="partial"){const S=Object.assign({},this.syncedData.get(x),y.value);this.syncedData.set(x,S)}else this.syncedData.set(x,y.value);break}case"delete":this.syncedData.delete(x);break}}}if(a){const g=new Set;for(const S of r)for(const E of S.operations)(E.type==="insert"||E.type==="update")&&g.add(E.key);const y=new Map(l.upserts),x=new Set(l.deletes);for(const[S,E]of y)if(!x.has(S))if(g.has(S)){let C=!1;for(let k=d.length-1;k>=0;k--){const R=d[k];if(R.key===S&&R.type==="insert"){R.value=E,C=!0;break}}C||d.push({type:"insert",key:S,value:E})}else d.push({type:"insert",key:S,value:E});if(d.length>0&&x.size>0){const S=[];for(const E of d)E.type==="insert"&&x.has(E.key)||S.push(E);d.length=0,d.push(...S)}this.lifecycle.status!=="ready"&&this.lifecycle.markReady()}if(this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.isCommittingSyncTransactions=!1,a&&l){for(const[g,y]of l.upserts)this.optimisticUpserts.set(g,y);for(const g of l.deletes)this.optimisticDeletes.add(g)}for(const g of this.transactions.values())if(!["completed","failed"].includes(g.state)){for(const y of g.mutations)if(this.isThisCollection(y.collection)&&y.optimistic)switch(y.type){case"insert":case"update":this.optimisticUpserts.set(y.key,y.modified),this.optimisticDeletes.delete(y.key);break;case"delete":this.optimisticUpserts.delete(y.key),this.optimisticDeletes.add(y.key);break}}const p=new Map;for(const g of this.transactions.values())if(g.state==="completed")for(const y of g.mutations)y.optimistic&&this.isThisCollection(y.collection)&&c.has(y.key)&&p.set(y.key,{type:y.type,value:y.modified});for(const g of c){const y=f.get(g),x=this.get(g),S=p.get(g);let E=!1;S&&(S.type==="delete"&&y!==void 0&&x===void 0&&Ar(S.value,y)||x!==void 0&&Ar(S.value,x))&&(E=!0),E||(y===void 0&&x!==void 0?d.push({type:"insert",key:g,value:x}):y!==void 0&&x===void 0?d.push({type:"delete",key:g,value:y}):y!==void 0&&x!==void 0&&!Ar(y,x)&&d.push({type:"update",key:g,value:x,previousValue:y}))}this.size=this.calculateSize(),d.length>0&&this.indexes.updateIndexes(d),this.changes.emitEvents(d,!0),this.pendingSyncedTransactions=s,this.preSyncVisibleState.clear(),Promise.resolve().then(()=>{this.recentlySyncedKeys.clear()}),this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0)}},this.config=e,this.transactions=new P_((n,r)=>n.compareCreatedAt(r)),this.syncedData=new P_(e.compare)}setDeps(e){this.collection=e.collection,this.lifecycle=e.lifecycle,this.changes=e.changes,this.indexes=e.indexes,this._events=e.events}get(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;if(!n.has(e))return r.has(e)?r.get(e):s.get(e)}has(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;return n.has(e)?!1:r.has(e)?!0:s.has(e)}*keys(){const{syncedData:e,optimisticDeletes:n,optimisticUpserts:r}=this;for(const s of e.keys())n.has(s)||(yield s);for(const s of r.keys())!e.has(s)&&!n.has(s)&&(yield s)}*values(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield n)}}*entries(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield[e,n])}}*[Symbol.iterator](){for(const[e,n]of this.entries())yield[e,n]}forEach(e){let n=0;for(const[r,s]of this.entries())e(s,r,n++)}map(e){const n=[];let r=0;for(const[s,a]of this.entries())n.push(e(a,s,r++));return n}isThisCollection(e){return e===this.collection}recomputeOptimisticState(e=!1){if(this.isCommittingSyncTransactions&&!e)return;const n=new Map(this.optimisticUpserts),r=new Set(this.optimisticDeletes);this.optimisticUpserts.clear(),this.optimisticDeletes.clear();const s=[];for(const c of this.transactions.values())["completed","failed"].includes(c.state)||s.push(c);for(const c of s)for(const f of c.mutations)if(this.isThisCollection(f.collection)&&f.optimistic)switch(f.type){case"insert":case"update":this.optimisticUpserts.set(f.key,f.modified),this.optimisticDeletes.delete(f.key);break;case"delete":this.optimisticUpserts.delete(f.key),this.optimisticDeletes.add(f.key);break}this.size=this.calculateSize();const a=[];this.collectOptimisticChanges(n,r,a);const l=a.filter(c=>!!(!this.recentlySyncedKeys.has(c.key)||e));if(this.pendingSyncedTransactions.length>0&&!e){const c=new Set;for(const d of this.pendingSyncedTransactions)for(const m of d.operations)c.add(m.key);const f=l.filter(d=>!(d.type==="delete"&&c.has(d.key)&&!s.some(p=>p.mutations.some(g=>this.isThisCollection(g.collection)&&g.key===d.key))));f.length>0&&this.indexes.updateIndexes(f),this.changes.emitEvents(f,e)}else l.length>0&&this.indexes.updateIndexes(l),this.changes.emitEvents(l,e)}calculateSize(){const e=this.syncedData.size,n=Array.from(this.optimisticDeletes).filter(s=>this.syncedData.has(s)&&!this.optimisticUpserts.has(s)).length,r=Array.from(this.optimisticUpserts.keys()).filter(s=>!this.syncedData.has(s)).length;return e-n+r}collectOptimisticChanges(e,n,r){const s=new Set([...e.keys(),...this.optimisticUpserts.keys(),...n,...this.optimisticDeletes]);for(const a of s){const l=this.get(a),c=this.getPreviousValue(a,e,n);c!==void 0&&l===void 0?r.push({type:"delete",key:a,value:c}):c===void 0&&l!==void 0?r.push({type:"insert",key:a,value:l}):c!==void 0&&l!==void 0&&c!==l&&r.push({type:"update",key:a,value:l,previousValue:c})}}getPreviousValue(e,n,r){if(!r.has(e))return n.has(e)?n.get(e):this.syncedData.get(e)}scheduleTransactionCleanup(e){if(e.state==="completed"){this.transactions.delete(e.id);return}e.isPersisted.promise.then(()=>{this.transactions.delete(e.id)}).catch(()=>{})}capturePreSyncVisibleState(){if(this.pendingSyncedTransactions.length===0)return;const e=new Set;for(const n of this.pendingSyncedTransactions)for(const r of n.operations)e.add(r.key);for(const n of e)this.recentlySyncedKeys.add(n);for(const n of e)if(!this.preSyncVisibleState.has(n)){const r=this.get(n);r!==void 0&&this.preSyncVisibleState.set(n,r)}}onTransactionStateChange(){this.changes.shouldBatchEvents=this.pendingSyncedTransactions.length>0,this.capturePreSyncVisibleState(),this.recomputeOptimisticState(!1)}cleanup(){this.syncedData.clear(),this.syncedMetadata.clear(),this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.size=0,this.pendingSyncedTransactions=[],this.syncedKeys.clear(),this.hasReceivedFirstCommit=!1}}class qE{constructor(){this.listeners=new Map}on(e,n){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n),()=>{this.listeners.get(e)?.delete(n)}}once(e,n){const r=this.on(e,s=>{n(s),r()});return r}off(e,n){this.listeners.get(e)?.delete(n)}waitFor(e,n){return new Promise((r,s)=>{let a;const l=this.on(e,c=>{a&&(clearTimeout(a),a=void 0),r(c),l()});n&&(a=setTimeout(()=>{a=void 0,l(),s(new Error(`Timeout waiting for event ${String(e)}`))},n))})}emitInner(e,n){this.listeners.get(e)?.forEach(r=>{try{r(n)}catch(s){queueMicrotask(()=>{throw s})}})}clearListeners(){this.listeners.clear()}}function Bj(t,e){if(e.length===0||t.length===0)return;if(t.length===1){const{expression:r,compareOptions:s}=t[0];return(s.direction==="asc"?z_:Yg)(r,new jn(e[0]))}const n=[];for(let r=0;r<t.length&&r<e.length;r++){const s=t[r],a=e[r],l=[];for(let d=0;d<r;d++){const m=t[d],p=e[d];l.push(Zg(m.expression,new jn(p)))}const f=(s.compareOptions.direction==="asc"?z_:Yg)(s.expression,new jn(a));if(l.length===0)n.push(f);else{const d=[...l,f];n.push(d.reduce((m,p)=>Jg(m,p)))}}return n.length===1?n[0]:n.reduce((r,s)=>Cj(r,s))}class Uj extends qE{constructor(e,n,r){super(),this.collection=e,this.callback=n,this.options=r,this.loadedInitialState=!1,this.skipFiltering=!1,this.snapshotSent=!1,this.loadedSubsets=[],this.sentKeys=new Set,this.limitedSnapshotRowCount=0,this._status="ready",this.pendingLoadSubsetPromises=new Set,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches=new Set,r.onUnsubscribe&&this.on("unsubscribed",a=>r.onUnsubscribe(a)),r.whereExpression&&Rj(r.whereExpression,this.collection);const s=a=>{n(a),this.trackSentKeys(a)};this.callback=s,this.filteredCallback=r.whereExpression?Pj(this.callback,r):this.callback,this.truncateCleanup=this.collection.on("truncate",()=>{this.handleTruncate()})}get status(){return this._status}handleTruncate(){const e=[...this.loadedSubsets],n=this.collection._sync.syncLoadSubsetFn!==null;if(e.length===0||!n){this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[];return}this.isBufferingForTruncate=!0,this.truncateBuffer=[],this.pendingTruncateRefetches.clear(),this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[],queueMicrotask(()=>{if(this.isBufferingForTruncate){for(const r of e){const s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),this.trackLoadSubsetPromise(s),s instanceof Promise&&(this.pendingTruncateRefetches.add(s),s.catch(()=>{}).finally(()=>{this.pendingTruncateRefetches.delete(s),this.checkTruncateRefetchComplete()}))}this.pendingTruncateRefetches.size===0&&this.flushTruncateBuffer()}})}checkTruncateRefetchComplete(){this.pendingTruncateRefetches.size===0&&this.isBufferingForTruncate&&this.flushTruncateBuffer()}flushTruncateBuffer(){this.isBufferingForTruncate=!1;const e=this.truncateBuffer.flat();e.length>0&&this.filteredCallback(e),this.truncateBuffer=[]}setOrderByIndex(e){this.orderByIndex=e}setStatus(e){if(this._status===e)return;const n=this._status;this._status=e,this.emitInner("status:change",{type:"status:change",subscription:this,previousStatus:n,status:e});const r=`status:${e}`;this.emitInner(r,{type:r,subscription:this,previousStatus:n,status:e})}trackLoadSubsetPromise(e){e instanceof Promise&&(this.pendingLoadSubsetPromises.add(e),this.setStatus("loadingSubset"),e.finally(()=>{this.pendingLoadSubsetPromises.delete(e),this.pendingLoadSubsetPromises.size===0&&this.setStatus("ready")}))}hasLoadedInitialState(){return this.loadedInitialState}hasSentAtLeastOneSnapshot(){return this.snapshotSent}emitEvents(e){const n=this.filterAndFlipChanges(e);this.isBufferingForTruncate?n.length>0&&this.truncateBuffer.push(n):this.filteredCallback(n)}requestSnapshot(e){if(this.loadedInitialState)return!1;const n={where:this.options.whereExpression,optimizedOnly:e?.optimizedOnly??!1};if(e){if("where"in e){const f=e.where;if(n.where){const d=n.where,m=Jg(d,f);n.where=m}else n.where=f}}else this.loadedInitialState=!0;const r={where:n.where,subscription:this,orderBy:e?.orderBy,limit:e?.limit},s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),(e?.trackLoadSubsetPromise??!0)&&this.trackLoadSubsetPromise(s);const l=this.collection.currentStateAsChanges(n);if(l===void 0)return!1;const c=l.filter(f=>!this.sentKeys.has(f.key));for(const f of c)this.sentKeys.add(f.key);return this.snapshotSent=!0,this.callback(c),!0}requestLimitedSnapshot({orderBy:e,limit:n,minValues:r,offset:s}){if(!n)throw new Error("limit is required");if(!this.orderByIndex)throw new Error("Ordered snapshot was requested but no index was found. You have to call setOrderByIndex before requesting an ordered snapshot.");const l=r?.[0],c=this.orderByIndex,f=this.options.whereExpression,d=f?Ql(f):void 0,m=T=>{if(this.sentKeys.has(T))return!1;const D=this.collection.get(T);return D===void 0?!1:d?.(D)??!0};let p=l;const g=[];let y=[];if(l!==void 0){const{expression:T}=e[0],D=this.collection.currentStateAsChanges({where:Zg(T,new jn(l))});if(D){const L=D.map(M=>M.key).filter(M=>!this.sentKeys.has(M)&&m(M));y.push(...L);const P=c.take(n-y.length,l,m);y.push(...P)}else y=c.take(n,l,m)}else y=c.take(n,l,m);const x=()=>Math.max(n-g.length,0),S=()=>y.length===0,E=e[0].expression,C=E.type==="ref"?Ln(new En(E.path),!0):null;for(;x()>0&&!S();){const T=new Set;for(const D of y){const L=this.collection.get(D);g.push({type:"insert",key:D,value:L}),p=C?C(L):L,T.add(D)}y=c.take(x(),p,m)}const k=this.limitedSnapshotRowCount;for(const T of g)this.sentKeys.add(T.key);this.callback(g),this.limitedSnapshotRowCount+=g.length,g.length>0&&(this.lastSentKey=g[g.length-1].key);let R;if(r!==void 0&&r.length>0){const T=Bj(e,r);if(T){const{expression:D}=e[0],L=r[0];let P;if(L instanceof Date){const M=new Date(L.getTime()+1);P=Jg(_j(D,new jn(L)),Yg(D,new jn(M)))}else P=Zg(D,new jn(L));R={whereFrom:T,whereCurrent:P,lastKey:this.lastSentKey}}}const N={where:f,limit:n,orderBy:e,cursor:R,offset:s??k,subscription:this},j=this.collection._sync.loadSubset(N);this.loadedSubsets.push(N),this.trackLoadSubsetPromise(j)}filterAndFlipChanges(e){if(this.loadedInitialState||this.skipFiltering)return e;const n=this.isBufferingForTruncate,r=[];for(const s of e){let a=s;if(this.sentKeys.has(s.key)){if(s.type==="insert")continue;s.type==="delete"&&this.sentKeys.delete(s.key)}else{if(s.type==="update")a={...s,type:"insert",previousValue:void 0};else if(s.type==="delete"&&!n)continue;this.sentKeys.add(s.key)}r.push(a)}return r}trackSentKeys(e){if(!(this.loadedInitialState||this.skipFiltering))for(const n of e)n.type==="delete"?this.sentKeys.delete(n.key):this.sentKeys.add(n.key)}markAllStateAsSeen(){this.skipFiltering=!0}unsubscribe(){this.truncateCleanup?.(),this.truncateCleanup=void 0,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches.clear();for(const e of this.loadedSubsets)this.collection._sync.unloadSubset(e);this.loadedSubsets=[],this.emitInner("unsubscribed",{type:"unsubscribed",subscription:this}),this.clearListeners()}}class qj{constructor(){this.activeSubscribersCount=0,this.changeSubscriptions=new Set,this.batchedEvents=[],this.shouldBatchEvents=!1}setDeps(e){this.lifecycle=e.lifecycle,this.sync=e.sync,this.events=e.events,this.collection=e.collection}emitEmptyReadyEvent(){for(const e of this.changeSubscriptions)e.emitEvents([])}emitEvents(e,n=!1){if(this.shouldBatchEvents&&!n){this.batchedEvents.push(...e);return}let r=e;if(n&&(this.batchedEvents.length>0&&(r=[...this.batchedEvents,...e]),this.batchedEvents=[],this.shouldBatchEvents=!1),r.length!==0)for(const s of this.changeSubscriptions)s.emitEvents(r)}subscribeChanges(e,n={}){this.addSubscriber();const r=new Uj(this.collection,e,{...n,onUnsubscribe:()=>{this.removeSubscriber(),this.changeSubscriptions.delete(r)}});return n.includeInitialState?r.requestSnapshot({trackLoadSubsetPromise:!1}):n.includeInitialState===!1&&r.markAllStateAsSeen(),this.changeSubscriptions.add(r),r}addSubscriber(){const e=this.activeSubscribersCount;this.activeSubscribersCount++,this.lifecycle.cancelGCTimer(),(this.lifecycle.status==="cleaned-up"||this.lifecycle.status==="idle")&&this.sync.startSync(),this.events.emitSubscribersChange(this.activeSubscribersCount,e)}removeSubscriber(){const e=this.activeSubscribersCount;if(this.activeSubscribersCount--,this.activeSubscribersCount===0)this.lifecycle.startGCTimer();else if(this.activeSubscribersCount<0)throw new Jz;this.events.emitSubscribersChange(this.activeSubscribersCount,e)}cleanup(){this.batchedEvents=[],this.shouldBatchEvents=!1}}const Hj=t=>setTimeout(()=>{t({didTimeout:!0,timeRemaining:()=>50})},0),Vj=t=>{clearTimeout(t)},Kj=typeof window<"u"&&"requestIdleCallback"in window?(t,e)=>window.requestIdleCallback(t,e):(t,e)=>Hj(t),Qm=typeof window<"u"&&"cancelIdleCallback"in window?t=>window.cancelIdleCallback(t):Vj;class Gj{constructor(e,n){this.status="idle",this.hasBeenReady=!1,this.hasReceivedFirstCommit=!1,this.onFirstReadyCallbacks=[],this.gcTimeoutId=null,this.idleCallbackId=null,this.config=e,this.id=n}setDeps(e){this.indexes=e.indexes,this.events=e.events,this.changes=e.changes,this.sync=e.sync,this.state=e.state}validateStatusTransition(e,n){if(e===n)return;if(!{idle:["loading","error","cleaned-up"],loading:["ready","error","cleaned-up"],ready:["cleaned-up","error"],error:["cleaned-up","idle"],"cleaned-up":["loading","error"]}[e].includes(n))throw new Zz(e,n,this.id)}setStatus(e,n=!1){if(e==="ready"&&!n)throw new ku(`You can't directly call "setStatus('ready'). You must use markReady instead.`);this.validateStatusTransition(this.status,e);const r=this.status;this.status=e,e==="ready"&&!this.indexes.isIndexesResolved&&this.indexes.resolveAllIndexes().catch(s=>{console.warn(`${this.config.id?`[${this.config.id}] `:""}Failed to resolve indexes:`,s)}),this.events.emitStatusChange(e,r)}validateCollectionUsable(e){switch(this.status){case"error":throw new Qz(e,this.id);case"cleaned-up":this.sync.startSync();break}}markReady(){if(this.validateStatusTransition(this.status,"ready"),this.status==="loading"){if(this.setStatus("ready",!0),!this.hasBeenReady){this.hasBeenReady=!0,this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0);const e=[...this.onFirstReadyCallbacks];this.onFirstReadyCallbacks=[],e.forEach(n=>n())}this.changes.changeSubscriptions.size>0&&this.changes.emitEmptyReadyEvent()}}startGCTimer(){this.gcTimeoutId&&clearTimeout(this.gcTimeoutId);const e=this.config.gcTime??3e5;e!==0&&(this.gcTimeoutId=setTimeout(()=>{this.changes.activeSubscribersCount===0&&this.scheduleIdleCleanup()},e))}cancelGCTimer(){this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.idleCallbackId!==null&&(Qm(this.idleCallbackId),this.idleCallbackId=null)}scheduleIdleCleanup(){this.idleCallbackId!==null&&Qm(this.idleCallbackId),this.idleCallbackId=Kj(e=>{this.changes.activeSubscribersCount===0?this.performCleanup(e)&&(this.idleCallbackId=null):this.idleCallbackId=null},{timeout:1e3})}performCleanup(e){return!e||e.timeRemaining()>0||e.didTimeout?(this.sync.cleanup(),this.state.cleanup(),this.changes.cleanup(),this.indexes.cleanup(),this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.hasBeenReady=!1,this.onFirstReadyCallbacks=[],this.setStatus("cleaned-up"),this.events.cleanup(),!0):(this.scheduleIdleCleanup(),!1)}onFirstReady(e){if(this.hasBeenReady){e();return}this.onFirstReadyCallbacks.push(e)}cleanup(){this.idleCallbackId!==null&&(Qm(this.idleCallbackId),this.idleCallbackId=null),this.performCleanup()}}const x0=Symbol("liveQueryInternal");class Qj{constructor(e,n){this.preloadPromise=null,this.syncCleanupFn=null,this.syncLoadSubsetFn=null,this.syncUnloadSubsetFn=null,this.pendingLoadSubsetPromises=new Set,this.config=e,this.id=n,this.syncMode=e.syncMode??"eager"}setDeps(e){this.collection=e.collection,this.state=e.state,this.lifecycle=e.lifecycle,this._events=e.events}startSync(){if(!(this.lifecycle.status!=="idle"&&this.lifecycle.status!=="cleaned-up")){this.lifecycle.setStatus("loading");try{const e=Zj(this.config.sync.sync({collection:this.collection,begin:()=>{this.state.pendingSyncedTransactions.push({committed:!1,operations:[],deletedKeys:new Set})},write:n=>{const r=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!r)throw new y_;if(r.committed)throw new v_;let s;"key"in n?s=n.key:s=this.config.getKey(n.value);let a=n.type;if(n.type==="insert"){const c=this.state.syncedData.has(s),f=r.deletedKeys.has(s),d=r.truncate===!0;if(c&&!f&&!d){const m=this.state.syncedData.get(s);if(m!==void 0&&Ar(m,n.value))a="update";else{const g=this.config.utils[x0];throw new tD(s,this.id,{hasCustomGetKey:g?.hasCustomGetKey??!1,hasJoins:g?.hasJoins??!1})}}}const l={...n,type:a,key:s};r.operations.push(l),a==="delete"&&r.deletedKeys.add(s)},commit:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new mD;if(n.committed)throw new gD;n.committed=!0,this.state.commitPendingTransactions()},markReady:()=>{this.lifecycle.markReady()},truncate:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new y_;if(n.committed)throw new v_;n.operations=[],n.deletedKeys.clear(),n.truncate=!0,n.optimisticSnapshot={upserts:new Map(this.state.optimisticUpserts),deletes:new Set(this.state.optimisticDeletes)}}}));if(this.syncCleanupFn=e?.cleanup??null,this.syncLoadSubsetFn=e?.loadSubset??null,this.syncUnloadSubsetFn=e?.unloadSubset??null,this.syncMode==="on-demand"&&!this.syncLoadSubsetFn)throw new Eu(`Collection "${this.id}" is configured with syncMode "on-demand" but the sync function did not return a loadSubset handler. Either provide a loadSubset handler or use syncMode "eager".`)}catch(e){throw this.lifecycle.setStatus("error"),e}}}preload(){return this.preloadPromise?this.preloadPromise:(this.syncMode==="on-demand"&&console.warn(`${this.id?`[${this.id}] `:""}Calling .preload() on a collection with syncMode "on-demand" is a no-op. In on-demand mode, data is only loaded when queries request it. Instead, create a live query and call .preload() on that to load the specific data you need. See https://tanstack.com/blog/tanstack-db-0.5-query-driven-sync for more details.`),this.preloadPromise=new Promise((e,n)=>{if(this.lifecycle.status==="ready"){e();return}if(this.lifecycle.status==="error"){n(new Yz);return}if(this.lifecycle.onFirstReady(()=>{e()}),this.lifecycle.status==="idle"||this.lifecycle.status==="cleaned-up")try{this.startSync()}catch(r){n(r);return}}),this.preloadPromise)}get isLoadingSubset(){return this.pendingLoadSubsetPromises.size>0}trackLoadPromise(e){const n=!this.isLoadingSubset;this.pendingLoadSubsetPromises.add(e),n&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!0,previousIsLoadingSubset:!1,loadingSubsetTransition:"start"}),e.finally(()=>{const r=this.pendingLoadSubsetPromises.size===1&&this.pendingLoadSubsetPromises.has(e);this.pendingLoadSubsetPromises.delete(e),r&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!1,previousIsLoadingSubset:!0,loadingSubsetTransition:"end"})})}loadSubset(e){if(this.syncMode==="eager")return!0;if(this.syncLoadSubsetFn){const n=this.syncLoadSubsetFn(e);if(n instanceof Promise)return this.trackLoadPromise(n),n}return!0}unloadSubset(e){this.syncUnloadSubsetFn&&this.syncUnloadSubsetFn(e)}cleanup(){try{this.syncCleanupFn&&(this.syncCleanupFn(),this.syncCleanupFn=null)}catch(e){queueMicrotask(()=>{if(e instanceof Error){const n=new x_(this.id,e);throw n.cause=e,n.stack=e.stack,n}else throw new x_(this.id,e)})}this.preloadPromise=null}}function Zj(t){if(typeof t=="function")return{cleanup:t};if(typeof t=="object")return t}function HE(t){return typeof t=="function"&&t.prototype!==void 0&&t.prototype.constructor===t}async function Yj(t){return HE(t)?t:await t()}class Jj{constructor(e,n,r,s,a,l){this.id=e,this.expression=n,this.name=r,this.resolver=s,this.options=a,this.collectionEntries=l,this.indexPromise=null,this.resolvedIndex=null,HE(this.resolver)&&(this.resolvedIndex=new this.resolver(this.id,this.expression,this.name,this.options),this.collectionEntries&&this.resolvedIndex.build(this.collectionEntries))}async resolve(){return this.resolvedIndex?this.resolvedIndex:(this.indexPromise||(this.indexPromise=this.createIndex()),this.resolvedIndex=await this.indexPromise,this.resolvedIndex)}isResolved(){return this.resolvedIndex!==null}getResolved(){if(!this.resolvedIndex)throw new Error(`Index ${this.id} has not been resolved yet. Ensure collection is synced.`);return this.resolvedIndex}getId(){return this.id}getName(){return this.name}getExpression(){return this.expression}async createIndex(){const e=await Yj(this.resolver);return new e(this.id,this.expression,this.name,this.options)}}class Xj{constructor(e,n){this.indexId=e,this.lazyIndex=n}get index(){return this.lazyIndex.getResolved()}get isReady(){return this.lazyIndex.isResolved()}async whenReady(){return await this.lazyIndex.resolve()}get id(){return this.indexId}get name(){return this.isReady?this.index.name:this.lazyIndex.getName()}get expression(){return this.lazyIndex.getExpression()}supports(e){return this.index.supports(e)}getStats(){return this.index.getStats()}matchesField(e){const n=this.expression;return n.type==="ref"&&n.path.length===e.length&&n.path.every((r,s)=>r===e[s])}get keyCount(){return this.index.keyCount}get indexedKeysSet(){return this.index.indexedKeysSet}get orderedEntriesArray(){return this.index.orderedEntriesArray}get valueMapData(){return this.index.valueMapData}equalityLookup(e){return this.index.equalityLookup?.(e)??new Set}rangeQuery(e){return this.index.rangeQuery?.(e)??new Set}inArrayLookup(e){return this.index.inArrayLookup?.(e)??new Set}_getLazyWrapper(){return this.lazyIndex}}class Wj{constructor(){this.lazyIndexes=new Map,this.resolvedIndexes=new Map,this.isIndexesResolved=!1,this.indexCounter=0}setDeps(e){this.state=e.state,this.lifecycle=e.lifecycle}createIndex(e,n={}){this.lifecycle.validateCollectionUsable("createIndex");const r=++this.indexCounter,s=Sj(),a=e(s),l=en(a),c=n.indexType??Xg,f=new Jj(r,l,n.name,c,n.options,this.state.entries());if(this.lazyIndexes.set(r,f),c===Xg)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch(d){console.warn("Failed to resolve BTreeIndex:",d)}else if(typeof c=="function"&&c.prototype)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch{this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)})}else this.isIndexesResolved&&this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)});return new Xj(r,f)}async resolveAllIndexes(){if(this.isIndexesResolved)return;const e=Array.from(this.lazyIndexes.entries()).map(async([n,r])=>{const s=await r.resolve();return s.build(this.state.entries()),this.resolvedIndexes.set(n,s),{indexId:n,resolvedIndex:s}});await Promise.all(e),this.isIndexesResolved=!0}async resolveSingleIndex(e,n){const r=await n.resolve();return r.build(this.state.entries()),this.resolvedIndexes.set(e,r),r}get indexes(){return this.resolvedIndexes}updateIndexes(e){for(const n of this.resolvedIndexes.values())for(const r of e)switch(r.type){case"insert":n.add(r.key,r.value);break;case"update":r.previousValue?n.update(r.key,r.previousValue,r.value):n.add(r.key,r.value);break;case"delete":n.remove(r.key,r.value);break}}cleanup(){this.lazyIndexes.clear(),this.resolvedIndexes.clear()}}var e3={};const t3=new Set(["find","findLast","findIndex","findLastIndex","filter","map","flatMap","forEach","some","every","reduce","reduceRight"]),n3=new Set(["pop","push","shift","unshift","splice","sort","reverse","fill","copyWithin"]),r3=new Set(["set","delete","clear","add"]),s3=new Set(["entries","keys","values","forEach"]);function S0(t){return t!==null&&typeof t=="object"&&!(t instanceof Date)&&!(t instanceof RegExp)&&!id(t)}function i3(t,e,n,r){if(t3.has(t))return function(...s){const a=s[0];if(typeof a!="function")return e.apply(n.copy_,s);const l=(d,m)=>{if(S0(d)){const p={tracker:n,prop:String(m)},{proxy:g}=r(d,p);return g}return d},c=function(d,m,p){const g=l(d,m);return a.call(this,g,m,p)};if(t==="reduce"||t==="reduceRight"){const d=function(m,p,g,y){const x=l(p,g);return a.call(this,m,x,g,y)};return e.apply(n.copy_,[d,...s.slice(1)])}const f=e.apply(n.copy_,[c,...s.slice(1)]);if((t==="find"||t==="findLast")&&f&&typeof f=="object"){const d=n.copy_.indexOf(f);if(d!==-1)return l(f,d)}return t==="filter"&&Array.isArray(f)?f.map(d=>{const m=n.copy_.indexOf(d);return m!==-1?l(d,m):d}):f}}function a3(t,e){return function(){const n=t.copy_;let r=0;return{next(){if(r>=n.length)return{done:!0,value:void 0};const s=n[r];let a=s;if(S0(s)){const l={tracker:t,prop:String(r)},{proxy:c}=e(s,l);a=c}return r++,{done:!1,value:a}},[Symbol.iterator](){return this}}}}function $_(t,e,n){return function(...r){const s=t.apply(e.copy_,r);return n(e),s}}function o3(t,e,n,r,s,a,l){if(s3.has(t)||e===Symbol.iterator)return function(...f){const d=n.apply(s.copy_,f);if(t==="forEach"){const p=f[0];if(typeof p=="function"){const g=function(y,x,S){const E=p.call(this,y,x,S);return l(s),E};return n.apply(r,[g,...f.slice(1)])}}if(t==="entries"||t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator){const p=d,g=new Map;if(t==="values"&&r instanceof Map)for(const[x,S]of s.copy_.entries())g.set(S,x);const y=new Map;if(r instanceof Set)for(const x of s.copy_.values())y.set(x,x);return{next(){const x=p.next();if(!x.done&&x.value&&typeof x.value=="object"){if(t==="entries"&&Array.isArray(x.value)&&x.value.length===2){if(x.value[1]&&typeof x.value[1]=="object"){const S=x.value[0],E={tracker:s,prop:S,updateMap:k=>{s.copy_ instanceof Map&&s.copy_.set(S,k)}},{proxy:C}=a(x.value[1],E);x.value[1]=C}}else if(t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator)if(t==="values"&&r instanceof Map){const S=g.get(x.value);if(S!==void 0){const E={tracker:s,prop:S,updateMap:k=>{s.copy_ instanceof Map&&s.copy_.set(S,k)}},{proxy:C}=a(x.value,E);x.value=C}}else if(r instanceof Set){const S=x.value,E={tracker:s,prop:S,updateSet:k=>{s.copy_ instanceof Set&&(s.copy_.delete(S),s.copy_.add(k),y.set(S,k))}},{proxy:C}=a(x.value,E);x.value=C}else{const S=Symbol("iterator-value"),{proxy:E}=a(x.value,{tracker:s,prop:S});x.value=E}}return x},[Symbol.iterator](){return this}}}return d}}function st(...t){const e=typeof window<"u"&&typeof localStorage<"u";e&&localStorage.getItem("DEBUG")==="true"?console.log("[proxy]",...t):!e&&typeof process<"u"&&e3.DEBUG==="true"&&console.log("[proxy]",...t)}function gs(t,e=new WeakMap){if(t==null||typeof t!="object")return t;if(e.has(t))return e.get(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t.source,t.flags);if(Array.isArray(t)){const s=[];return e.set(t,s),t.forEach((a,l)=>{s[l]=gs(a,e)}),s}if(ArrayBuffer.isView(t)&&!(t instanceof DataView)){const s=Object.getPrototypeOf(t).constructor,a=new s(t.length);e.set(t,a);for(let l=0;l<t.length;l++)a[l]=t[l];return a}if(t instanceof Map){const s=new Map;return e.set(t,s),t.forEach((a,l)=>{s.set(l,gs(a,e))}),s}if(t instanceof Set){const s=new Set;return e.set(t,s),t.forEach(a=>{s.add(gs(a,e))}),s}if(id(t))return t;const n={};e.set(t,n);for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=gs(t[s],e));const r=Object.getOwnPropertySymbols(t);for(const s of r)n[s]=gs(t[s],e);return n}let F_=0;function l3(){return F_+=1,F_}function w0(t,e){const n=new Map;function r(p,g){if(st("Object ID:",p.constructor.name),n.has(p))return n.get(p);{const y=w0(p,g);return n.set(p,y),y}}const s=new Map,a={copy_:gs(t),originalObject:gs(t),proxyCount:l3(),modified:!1,assigned_:{},parent:e,target:t};st("createChangeProxy called for target",t,a.proxyCount);function l(p){p.modified||(p.modified=!0),p.parent&&(st("propagating change to parent"),"updateMap"in p.parent?p.parent.updateMap(p.copy_):"updateSet"in p.parent?p.parent.updateSet(p.copy_):(p.parent.tracker.copy_[p.parent.prop]=p.copy_,p.parent.tracker.assigned_[p.parent.prop]=!0),l(p.parent.tracker))}function c(p){if(st("checkIfReverted called with assigned keys:",Object.keys(p.assigned_)),Object.keys(p.assigned_).length===0&&Object.getOwnPropertySymbols(p.assigned_).length===0)return st("No assigned properties, returning true"),!0;for(const y in p.assigned_)if(p.assigned_[y]===!0){const x=p.copy_[y],S=p.originalObject[y];if(st(`Checking property ${String(y)}, current:`,x,"original:",S),!Ar(x,S))return st(`Property ${String(y)} is different, returning false`),!1}else if(p.assigned_[y]===!1)return st(`Property ${String(y)} was deleted, returning false`),!1;const g=Object.getOwnPropertySymbols(p.assigned_);for(const y of g)if(p.assigned_[y]===!0){const x=p.copy_[y],S=p.originalObject[y];if(!Ar(x,S))return st("Symbol property is different, returning false"),!1}else if(p.assigned_[y]===!1)return st("Symbol property was deleted, returning false"),!1;return st("All properties match original values, returning true"),!0}function f(p,g){st("checkParentStatus called for child prop:",g);const y=c(p);st("Parent checkIfReverted returned:",y),y&&(st("Parent is fully reverted, clearing tracking"),p.modified=!1,p.assigned_={},p.parent&&(st("Continuing up the parent chain"),f(p.parent.tracker,p.parent.prop)))}function d(p){if(st("createObjectProxy",p),s.has(p))return st("proxyCache found match"),s.get(p);const g=new Proxy(p,{get(y,x){st("get",y,x);const S=a.copy_[x]??a.originalObject[x],E=a.originalObject[x];if(st("value (at top of proxy get)",S),Object.getOwnPropertyDescriptor(y,x)?.get)return S;if(typeof S=="function"){if(Array.isArray(y)){const k=x.toString();if(n3.has(k))return $_(S,a,l);const R=i3(k,S,a,r);if(R)return R;if(x===Symbol.iterator)return a3(a,r)}if(y instanceof Map||y instanceof Set){const k=x.toString();if(r3.has(k))return $_(S,a,l);const R=o3(k,x,S,y,a,r,l);if(R)return R}return S.bind(y)}if(S0(S)){const k={tracker:a,prop:String(x)},{proxy:R}=r(E,k);return s.set(S,R),R}return S},set(y,x,S){const E=a.copy_[x];if(st(`set called for property ${String(x)}, current:`,E,"new:",S),Ar(E,S))st("Value unchanged, not tracking");else{const C=a.originalObject[x],k=Ar(S,C);if(st("value:",S,"original:",C,"isRevertToOriginal:",k),k){st(`Reverting property ${String(x)} to original value`),delete a.assigned_[x.toString()],st(`Updating copy with original value for ${String(x)}`),a.copy_[x]=gs(C),st("Checking if all properties reverted");const R=c(a);st("All reverted:",R),R?(st("All properties reverted, clearing tracking"),a.modified=!1,a.assigned_={},e&&(st("Updating parent for property:",e.prop),f(e.tracker,e.prop))):(st("Some properties still changed, keeping modified flag"),a.modified=!0)}else st(`Setting new value for property ${String(x)}`),a.copy_[x]=S,a.assigned_[x.toString()]=!0,st("Marking object and ancestors as modified",a),l(a)}return!0},defineProperty(y,x,S){const E=Reflect.defineProperty(y,x,S);return E&&"value"in S&&(a.copy_[x]=gs(S.value),a.assigned_[x.toString()]=!0,l(a)),E},getOwnPropertyDescriptor(y,x){return Reflect.getOwnPropertyDescriptor(y,x)},preventExtensions(y){return Reflect.preventExtensions(y)},isExtensible(y){return Reflect.isExtensible(y)},deleteProperty(y,x){st("deleteProperty",y,x);const S=typeof x=="symbol"?x.toString():x;if(S in y){const E=S in a.originalObject,C=Reflect.deleteProperty(y,x);return C&&(E?(a.assigned_[S]=!1,l(a)):(delete a.assigned_[S],Object.keys(a.assigned_).length===0&&Object.getOwnPropertySymbols(a.assigned_).length===0?a.modified=!1:a.modified=!0)),C}return!0}});return s.set(p,g),g}return{proxy:d(a.copy_),getChanges:()=>{if(st("getChanges called, modified:",a.modified),st(a),!a.modified)return st("Object not modified, returning empty object"),{};if(typeof a.copy_!="object"||Array.isArray(a.copy_)||Object.keys(a.assigned_).length===0)return a.copy_;const p={};for(const g in a.copy_)a.assigned_[g]===!0&&g in a.copy_&&(p[g]=a.copy_[g]);return st("Returning copy:",p),p}}}function u3(t){const e=t.map(n=>w0(n));return{proxies:e.map(n=>n.proxy),getChanges:()=>e.map(n=>n.getChanges())}}function c3(t,e){const{proxy:n,getChanges:r}=w0(t);return e(n),r()}function f3(t,e){const{proxies:n,getChanges:r}=u3(t);return e(n),r()}function d3(){let t,e,n=!0;return{promise:new Promise((s,a)=>{t=l=>{n=!1,s(l)},e=l=>{n=!1,a(l)}}),resolve:t,reject:e,isPending:()=>n}}function h3(t){return typeof t=="object"&&t!==null&&typeof t.hasPendingGraphRun=="function"}class p3{constructor(){this.contexts=new Map,this.clearListeners=new Set}getOrCreateContext(e){let n=this.contexts.get(e);return n||(n={queue:[],jobs:new Map,dependencies:new Map,completed:new Set},this.contexts.set(e,n)),n}schedule({contextId:e,jobId:n,dependencies:r,run:s}){if(typeof e>"u"){s();return}const a=this.getOrCreateContext(e);if(a.jobs.has(n)||a.queue.push(n),a.jobs.set(n,s),r){const l=new Set(r);l.delete(n),a.dependencies.set(n,l)}else a.dependencies.has(n)||a.dependencies.set(n,new Set);a.completed.delete(n)}flush(e){const n=this.contexts.get(e);if(!n)return;const{queue:r,jobs:s,dependencies:a,completed:l}=n;for(;r.length>0;){let c=!1;const f=r.length;for(let d=0;d<f;d++){const m=r.shift(),p=s.get(m);if(!p){a.delete(m),l.delete(m);continue}const g=a.get(m);let y=!g;if(g){y=!0;for(const x of g){if(x===m)continue;const S=h3(x)&&x.hasPendingGraphRun(e);if(s.has(x)&&!l.has(x)||!s.has(x)&&S){y=!1;break}}}y?(s.delete(m),a.delete(m),p(),l.add(m),c=!0):r.push(m)}if(!c)throw new Error(`Scheduler detected unresolved dependencies for context ${String(e)}.`)}this.contexts.delete(e)}flushAll(){for(const e of Array.from(this.contexts.keys()))this.flush(e)}clear(e){this.contexts.delete(e),this.clearListeners.forEach(n=>n(e))}onClear(e){return this.clearListeners.add(e),()=>this.clearListeners.delete(e)}hasPendingJobs(e){const n=this.contexts.get(e);return!!n&&n.jobs.size>0}clearJob(e,n){const r=this.contexts.get(e);r&&(r.jobs.delete(n),r.dependencies.delete(n),r.completed.delete(n),r.queue=r.queue.filter(s=>s!==n),r.jobs.size===0&&this.contexts.delete(e))}}const ud=new p3,cd=[];let mu=[],m3=0;function g3(t,e){switch(`${t.type}-${e.type}`){case"insert-update":return{...t,type:"insert",original:{},modified:e.modified,changes:{...t.changes,...e.changes},key:t.key,globalKey:t.globalKey,metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata},mutationId:e.mutationId,updatedAt:e.updatedAt};case"insert-delete":return null;case"update-delete":return e;case"update-update":return{...e,original:t.original,changes:{...t.changes,...e.changes},metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata}};case"delete-delete":case"insert-insert":return e;default:{const n=`${t.type}-${e.type}`;throw new Error(`Unhandled mutation combination: ${n}`)}}}function lf(t){const e=new x3(t);return cd.push(e),e}function Df(){if(mu.length>0)return mu.slice(-1)[0]}function y3(t){ud.clear(t.id),mu.push(t)}function v3(t){try{ud.flush(t.id)}finally{mu=mu.filter(e=>e.id!==t.id)}}function b3(t){const e=cd.findIndex(n=>n.id===t.id);e!==-1&&cd.splice(e,1)}class x3{constructor(e){if(typeof e.mutationFn>"u")throw new fD;this.id=e.id??crypto.randomUUID(),this.mutationFn=e.mutationFn,this.state="pending",this.mutations=[],this.isPersisted=d3(),this.autoCommit=e.autoCommit??!0,this.createdAt=new Date,this.sequenceNumber=m3++,this.metadata=e.metadata??{}}setState(e){this.state=e,(e==="completed"||e==="failed")&&b3(this)}mutate(e){if(this.state!=="pending")throw new dD;y3(this);try{e()}finally{v3(this)}return this.autoCommit&&this.commit().catch(()=>{}),this}applyMutations(e){for(const n of e){const r=this.mutations.findIndex(s=>s.globalKey===n.globalKey);if(r>=0){const s=this.mutations[r],a=g3(s,n);a===null?this.mutations.splice(r,1):this.mutations[r]=a}else this.mutations.push(n)}}rollback(e){const n=e?.isSecondaryRollback??!1;if(this.state==="completed")throw new hD;if(this.setState("failed"),!n){const r=new Set;this.mutations.forEach(s=>r.add(s.globalKey));for(const s of cd)s.state==="pending"&&s.mutations.some(a=>r.has(a.globalKey))&&s.rollback({isSecondaryRollback:!0})}return this.isPersisted.reject(this.error?.error),this.touchCollection(),this}touchCollection(){const e=new Set;for(const n of this.mutations)e.has(n.collection.id)||(n.collection._state.onTransactionStateChange(),n.collection._state.pendingSyncedTransactions.length>0&&n.collection._state.commitPendingTransactions(),e.add(n.collection.id))}async commit(){if(this.state!=="pending")throw new pD;if(this.setState("persisting"),this.mutations.length===0)return this.setState("completed"),this.isPersisted.resolve(this),this;try{await this.mutationFn({transaction:this}),this.setState("completed"),this.touchCollection(),this.isPersisted.resolve(this)}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.error={message:n.message,error:n},this.rollback(),n}return this}compareCreatedAt(e){const n=this.createdAt.getTime()-e.createdAt.getTime();return n!==0?n:this.sequenceNumber-e.sequenceNumber}}class S3{constructor(e,n){this.insert=(r,s)=>{this.lifecycle.validateCollectionUsable("insert");const a=this.state,l=Df();if(!l&&!this.config.onInsert)throw new lD;const c=Array.isArray(r)?r:[r],f=[],d=new Set;if(c.forEach(m=>{const p=this.validateData(m,"insert"),g=this.config.getKey(p);if(this.state.has(g)||d.has(g))throw new eD(g);d.add(g);const y=this.generateGlobalKey(g,m),x={mutationId:crypto.randomUUID(),original:{},modified:p,changes:Object.fromEntries(Object.keys(m).map(S=>[S,p[S]])),globalKey:y,key:g,metadata:s?.metadata,syncMetadata:this.config.sync.getSyncMetadata?.()||{},optimistic:s?.optimistic??!0,type:"insert",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(x)}),l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;{const m=lf({mutationFn:async p=>await this.config.onInsert({transaction:p.transaction,collection:this.collection})});return m.applyMutations(f),m.commit().catch(()=>{}),a.transactions.set(m.id,m),a.scheduleTransactionCleanup(m),a.recomputeOptimisticState(!0),m}},this.delete=(r,s)=>{const a=this.state;this.lifecycle.validateCollectionUsable("delete");const l=Df();if(!l&&!this.config.onDelete)throw new cD;if(Array.isArray(r)&&r.length===0)throw new aD;const c=Array.isArray(r)?r:[r],f=[];for(const m of c){if(!this.state.has(m))throw new oD(m);const p=this.generateGlobalKey(m,this.state.get(m)),g={mutationId:crypto.randomUUID(),original:this.state.get(m),modified:this.state.get(m),changes:this.state.get(m),globalKey:p,key:m,metadata:s?.metadata,syncMetadata:a.syncedMetadata.get(m)||{},optimistic:s?.optimistic??!0,type:"delete",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(g)}if(l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;const d=lf({autoCommit:!0,mutationFn:async m=>this.config.onDelete({transaction:m.transaction,collection:this.collection})});return d.applyMutations(f),d.commit().catch(()=>{}),a.transactions.set(d.id,d),a.scheduleTransactionCleanup(d),a.recomputeOptimisticState(!0),d},this.id=n,this.config=e}setDeps(e){this.lifecycle=e.lifecycle,this.state=e.state,this.collection=e.collection}ensureStandardSchema(e){if(e&&"~standard"in e)return e;throw new Gz}validateData(e,n,r){if(!this.config.schema)return e;const s=this.ensureStandardSchema(this.config.schema);if(n==="update"&&r){const l=this.state.get(r);if(l&&e&&typeof e=="object"&&typeof l=="object"){const c=Object.assign({},l,e),f=s["~standard"].validate(c);if(f instanceof Promise)throw new g_;if("issues"in f&&f.issues){const g=f.issues.map(y=>({message:y.message,path:y.path?.map(x=>String(x))}));throw new m_(n,g)}const d=f.value,m=Object.keys(e);return Object.fromEntries(m.map(g=>[g,d[g]]))}}const a=s["~standard"].validate(e);if(a instanceof Promise)throw new g_;if("issues"in a&&a.issues){const l=a.issues.map(c=>({message:c.message,path:c.path?.map(f=>String(f))}));throw new m_(n,l)}return a.value}generateGlobalKey(e,n){if(typeof e!="string"&&typeof e!="number")throw typeof e>"u"?new Xz(n):new Wz(e,n);return`KEY::${this.id}/${e}`}update(e,n,r){if(typeof e>"u")throw new nD;const s=this.state;this.lifecycle.validateCollectionUsable("update");const a=Df();if(!a&&!this.config.onUpdate)throw new uD;const l=Array.isArray(e),c=l?e:[e];if(l&&c.length===0)throw new rD;const f=typeof n=="function"?n:r,d=typeof n=="function"?{}:n,m=c.map(x=>{const S=this.state.get(x);if(!S)throw new sD(x);return S});let p;l?p=f3(m,f):p=[c3(m[0],f)];const g=c.map((x,S)=>{const E=p[S];if(!E||Object.keys(E).length===0)return null;const C=m[S],k=this.validateData(E,"update",x),R=Object.assign({},C,k),N=this.config.getKey(C),j=this.config.getKey(R);if(N!==j)throw new iD(N,j);const T=this.generateGlobalKey(j,R);return{mutationId:crypto.randomUUID(),original:C,modified:R,changes:Object.fromEntries(Object.keys(E).map(D=>[D,R[D]])),globalKey:T,key:x,metadata:d.metadata,syncMetadata:s.syncedMetadata.get(x)||{},optimistic:d.optimistic??!0,type:"update",createdAt:new Date,updatedAt:new Date,collection:this.collection}}).filter(Boolean);if(g.length===0){const x=lf({mutationFn:async()=>{}});return x.commit().catch(()=>{}),s.scheduleTransactionCleanup(x),x}if(a)return a.applyMutations(g),s.transactions.set(a.id,a),s.scheduleTransactionCleanup(a),s.recomputeOptimisticState(!0),a;const y=lf({mutationFn:async x=>this.config.onUpdate({transaction:x.transaction,collection:this.collection})});return y.applyMutations(g),y.commit().catch(()=>{}),s.transactions.set(y.id,y),s.scheduleTransactionCleanup(y),s.recomputeOptimisticState(!0),y}}class w3 extends qE{constructor(){super()}setDeps(e){this.collection=e.collection}emit(e,n){this.emitInner(e,n)}emitStatusChange(e,n){this.emit("status:change",{type:"status:change",collection:this.collection,previousStatus:n,status:e});const r=`status:${e}`;this.emit(r,{type:r,collection:this.collection,previousStatus:n,status:e})}emitSubscribersChange(e,n){this.emit("subscribers:change",{type:"subscribers:change",collection:this.collection,previousSubscriberCount:n,subscriberCount:e})}cleanup(){this.clearListeners()}}function _0(t){const e=new C0(t);return t.utils?e.utils=t.utils:e.utils={},e}class C0{constructor(e){if(this.utils={},this.insert=(n,r)=>this._mutations.insert(n,r),this.delete=(n,r)=>this._mutations.delete(n,r),!e)throw new Vz;if(!e.sync)throw new Kz;e.id?this.id=e.id:this.id=crypto.randomUUID(),this.config={...e,autoIndex:e.autoIndex??"eager"},this._changes=new qj,this._events=new w3,this._indexes=new Wj,this._lifecycle=new Gj(e,this.id),this._mutations=new S3(e,this.id),this._state=new Fj(e),this._sync=new Qj(e,this.id),this.comparisonOpts=_3(e),this._changes.setDeps({collection:this,lifecycle:this._lifecycle,sync:this._sync,events:this._events}),this._events.setDeps({collection:this}),this._indexes.setDeps({state:this._state,lifecycle:this._lifecycle}),this._lifecycle.setDeps({changes:this._changes,events:this._events,indexes:this._indexes,state:this._state,sync:this._sync}),this._mutations.setDeps({collection:this,lifecycle:this._lifecycle,state:this._state}),this._state.setDeps({collection:this,lifecycle:this._lifecycle,changes:this._changes,indexes:this._indexes,events:this._events}),this._sync.setDeps({collection:this,state:this._state,lifecycle:this._lifecycle,events:this._events}),e.startSync===!0&&this._sync.startSync()}get status(){return this._lifecycle.status}get subscriberCount(){return this._changes.activeSubscribersCount}onFirstReady(e){return this._lifecycle.onFirstReady(e)}isReady(){return this._lifecycle.status==="ready"}get isLoadingSubset(){return this._sync.isLoadingSubset}startSyncImmediate(){this._sync.startSync()}preload(){return this._sync.preload()}get(e){return this._state.get(e)}has(e){return this._state.has(e)}get size(){return this._state.size}*keys(){yield*this._state.keys()}*values(){yield*this._state.values()}*entries(){yield*this._state.entries()}*[Symbol.iterator](){yield*this._state[Symbol.iterator]()}forEach(e){return this._state.forEach(e)}map(e){return this._state.map(e)}getKeyFromItem(e){return this.config.getKey(e)}createIndex(e,n={}){return this._indexes.createIndex(e,n)}get indexes(){return this._indexes.indexes}validateData(e,n,r){return this._mutations.validateData(e,n,r)}get compareOptions(){return{...this.comparisonOpts}}update(e,n,r){return this._mutations.update(e,n,r)}get state(){const e=new Map;for(const[n,r]of this.entries())e.set(n,r);return e}stateWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.state):this.preload().then(()=>this.state)}get toArray(){return Array.from(this.values())}toArrayWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.toArray):this.preload().then(()=>this.toArray)}currentStateAsChanges(e={}){return Lj(this,e)}subscribeChanges(e,n={}){return this._changes.subscribeChanges(e,n)}on(e,n){return this._events.on(e,n)}once(e,n){return this._events.once(e,n)}off(e,n){this._events.off(e,n)}waitFor(e,n){return this._events.waitFor(e,n)}async cleanup(){return this._lifecycle.cleanup(),Promise.resolve()}}function _3(t){if(t.defaultStringCollation){const e=t.defaultStringCollation;return{stringSort:e.stringSort??"locale",locale:e.stringSort==="locale"?e.locale:void 0,localeOptions:e.stringSort==="locale"?e.localeOptions:void 0}}else return{stringSort:"locale"}}class Vt{constructor(e={}){this.query={},this.query={...e}}_createRefForSource(e,n){let r;try{r=Object.keys(e)}catch{const c=e===null?"null":"undefined";throw new af(n,c)}if(Array.isArray(e))throw new af(n,"array");if(r.length!==1)throw r.length===0?new af(n,"empty object"):r.every(c=>!isNaN(Number(c)))?new af(n,"string"):new yD(n);const s=r[0],a=e[s];let l;if(a instanceof C0)l=new uo(a,s);else if(a instanceof Vt){const c=a._getQuery();if(!c.from)throw new vD(n);l=new vr(c,s)}else throw new bD(s);return[s,l]}from(e){const[,n]=this._createRefForSource(e,"from clause");return new Vt({...this.query,from:n})}join(e,n,r="left"){const[s,a]=this._createRefForSource(e,"join clause"),c=[...this._getCurrentAliases(),s],f=$a(c),d=n(f);let m,p;if(d.type==="func"&&d.name==="eq"&&d.args.length===2)m=d.args[0],p=d.args[1];else throw new xD;const g={from:a,type:r,left:m,right:p},y=this.query.join||[];return new Vt({...this.query,join:[...y,g]})}leftJoin(e,n){return this.join(e,n,"left")}rightJoin(e,n){return this.join(e,n,"right")}innerJoin(e,n){return this.join(e,n,"inner")}fullJoin(e,n){return this.join(e,n,"full")}where(e){const n=this._getCurrentAliases(),r=$a(n),s=e(r),a=this.query.where||[];return new Vt({...this.query,where:[...a,s]})}having(e){const n=this._getCurrentAliases(),r=$a(n),s=e(r),a=this.query.having||[];return new Vt({...this.query,having:[...a,s]})}select(e){const n=this._getCurrentAliases(),r=$a(n),s=e(r),a=VE(s);return new Vt({...this.query,select:a,fnSelect:void 0})}orderBy(e,n="asc"){const r=this._getCurrentAliases(),s=$a(r),a=e(s),l=typeof n=="string"?{direction:n,nulls:"first"}:{direction:n.direction??"asc",nulls:n.nulls??"first",stringSort:n.stringSort,locale:n.stringSort==="locale"?n.locale:void 0,localeOptions:n.stringSort==="locale"?n.localeOptions:void 0},c=m=>({expression:en(m),compareOptions:l}),f=Array.isArray(a)?a.map(m=>c(m)):[c(a)],d=this.query.orderBy||[];return new Vt({...this.query,orderBy:[...d,...f]})}groupBy(e){const n=this._getCurrentAliases(),r=$a(n),s=e(r),a=Array.isArray(s)?s.map(c=>en(c)):[en(s)],l=this.query.groupBy||[];return new Vt({...this.query,groupBy:[...l,...a]})}limit(e){return new Vt({...this.query,limit:e})}offset(e){return new Vt({...this.query,offset:e})}distinct(){return new Vt({...this.query,distinct:!0})}findOne(){return new Vt({...this.query,singleResult:!0})}_getCurrentAliases(){const e=[];if(this.query.from&&e.push(this.query.from.alias),this.query.join)for(const n of this.query.join)e.push(n.from.alias);return e}get fn(){const e=this;return{select(n){return new Vt({...e.query,select:void 0,fnSelect:n})},where(n){return new Vt({...e.query,fnWhere:[...e.query.fnWhere||[],n]})},having(n){return new Vt({...e.query,fnHaving:[...e.query.fnHaving||[],n]})}}}_getQuery(){if(!this.query.from)throw new SD;return this.query}}function C3(t){return t===void 0?en(null):t instanceof DE||t instanceof Sr||t instanceof En||t instanceof jn?t:en(t)}function E3(t){return t!==null&&typeof t=="object"&&!c0(t)&&!t.__refProxy}function VE(t){if(!E3(t))return C3(t);const e={};for(const[n,r]of Object.entries(t)){if(typeof n=="string"&&n.startsWith("__SPREAD_SENTINEL__")){e[n]=r;continue}e[n]=VE(r)}return e}function k3(t){const e=t(new Vt);return KE(e)}function KE(t){return t._getQuery()}function R3(t){const e=T3(t);let n=t,r,s=0;const a=10;for(;s<a&&!Ar(n,r);)r=n,n=ey(n),s++;return{optimizedQuery:GE(n),sourceWhereClauses:e}}function T3(t){const e=new Map;if(!t.where||t.where.length===0)return e;const r=ny(t.where).map(a=>QE(a)),s=ZE(r);for(const[a,l]of s.singleSource)A3(t,a)&&e.set(a,l);return e}function A3(t,e){if(t.from.alias===e)return t.from.type==="collectionRef";if(t.join){for(const n of t.join)if(n.from.alias===e)return n.from.type==="collectionRef"}return!1}function ey(t){const e={...t,from:t.from.type==="queryRef"?new vr(ey(t.from.query),t.from.alias):t.from,join:t.join?.map(n=>({...n,from:n.from.type==="queryRef"?new vr(ey(n.from.query),n.from.alias):n.from}))};return O3(e)}function O3(t){if(!t.where||t.where.length===0)return t;if(!t.join||t.join.length===0){if(t.where.length>1){const c=ny(t.where),f=fd(c);return{...t,where:[f]}}return t}const e=t.where.filter(c=>!p_(c)),r=ny(e).map(c=>QE(c)),s=ZE(r),a=I3(t,s),l=t.where.filter(c=>p_(c));return l.length>0&&(a.where=[...a.where||[],...l]),a}function GE(t){return{...t,from:ty(t.from),join:t.join?.map(e=>({...e,from:ty(e.from)}))}}function ty(t){if(t.type==="collectionRef")return t;const e=GE(t.query);if(M3(e)){const n=ty(e.from);return n.type==="collectionRef"?new uo(n.collection,t.alias):new vr(n.query,t.alias)}return new vr(e,t.alias)}function M3(t){return(!t.where||t.where.length===0)&&!t.select&&(!t.groupBy||t.groupBy.length===0)&&(!t.having||t.having.length===0)&&(!t.orderBy||t.orderBy.length===0)&&(!t.join||t.join.length===0)&&t.limit===void 0&&t.offset===void 0&&!t.fnSelect&&(!t.fnWhere||t.fnWhere.length===0)&&(!t.fnHaving||t.fnHaving.length===0)}function ny(t){const e=[];for(const n of t){const r=f0(n);e.push(...E0(r))}return e}function E0(t){if(t.type==="func"&&t.name==="and"){const e=[];for(const n of t.args)e.push(...E0(n));return e}else return[t]}function QE(t){const e=new Set;let n=!1;function r(s){switch(s.type){case"ref":if(s.path&&s.path.length>0){const a=s.path[0];a&&(e.add(a),s.path.length===1&&(n=!0))}break;case"func":s.args&&s.args.forEach(r);break;case"val":break;case"agg":s.args&&s.args.forEach(r);break}}return r(t),{expression:t,touchedSources:e,hasNamespaceOnlyRef:n}}function ZE(t){const e=new Map,n=[];for(const a of t)if(a.touchedSources.size===1&&!a.hasNamespaceOnlyRef){const l=Array.from(a.touchedSources)[0];e.has(l)||e.set(l,[]),e.get(l).push(a.expression)}else(a.touchedSources.size>1||a.hasNamespaceOnlyRef)&&n.push(a.expression);const r=new Map;for(const[a,l]of e)r.set(a,fd(l));const s=n.length>0?fd(n):void 0;return{singleSource:r,multiSource:s}}function I3(t,e){const n=new Set,r=B_(t.from,e.singleSource,n),s=t.join?t.join.map(d=>({...d,from:B_(d.from,e.singleSource,n)})):void 0,a=[];e.multiSource&&a.push(e.multiSource);const l=t.join&&t.join.some(d=>d.type==="left"||d.type==="right"||d.type==="full");for(const[d,m]of e.singleSource)n.has(d)?l&&a.push(qz(m)):a.push(m);const c=a.length>1?[fd(a.flatMap(d=>E0(f0(d))))]:a;return{select:t.select,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,distinct:t.distinct,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0,from:r,join:s,where:c.length>0?c:[]}}function Xa(t){return{from:t.from.type==="collectionRef"?new uo(t.from.collection,t.from.alias):new vr(Xa(t.from.query),t.from.alias),select:t.select,join:t.join?t.join.map(e=>({type:e.type,left:e.left,right:e.right,from:e.from.type==="collectionRef"?new uo(e.from.collection,e.from.alias):new vr(Xa(e.from.query),e.from.alias)})):void 0,where:t.where?[...t.where]:void 0,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0}}function B_(t,e,n){const r=e.get(t.alias);if(!r)return t.type==="collectionRef"?new uo(t.collection,t.alias):new vr(Xa(t.query),t.alias);if(t.type==="collectionRef"){const l={from:new uo(t.collection,t.alias),where:[r]};return n.add(t.alias),new vr(l,t.alias)}if(!P3(t.query,r,t.alias))return new vr(Xa(t.query),t.alias);if(F3(t.query,r,t.alias))return new vr(Xa(t.query),t.alias);const s=t.query.where||[],a={...Xa(t.query),where:[...s,r]};return n.add(t.alias),new vr(a,t.alias)}function N3(t,e,n){return t.select?YE(t.select)||$3(t.select,e,n):!1}function z3(t){return t.groupBy&&t.groupBy.length>0}function D3(t){return t.having&&t.having.length>0}function j3(t){return t.orderBy&&t.orderBy.length>0&&(t.limit!==void 0||t.offset!==void 0)}function L3(t){return t.fnSelect||t.fnWhere&&t.fnWhere.length>0||t.fnHaving&&t.fnHaving.length>0}function P3(t,e,n){return!(N3(t,e,n)||z3(t)||D3(t)||j3(t)||L3(t))}function YE(t){for(const e of Object.values(t))if(typeof e=="object"){const n=e;if(n.type==="agg"||!("type"in n)&&YE(n))return!0}return!1}function k0(t){const e=[];if(t==null||typeof t!="object")return e;switch(t.type){case"ref":e.push(t);break;case"func":case"agg":for(const n of t.args??[])e.push(...k0(n));break}return e}function $3(t,e,n){const r=new Set;for(const[a,l]of Object.entries(t))a.startsWith("__SPREAD_SENTINEL__")||l instanceof En||r.add(a);const s=k0(e);for(const a of s){const l=a.path;if(!Array.isArray(l)||l.length<2)continue;const c=l[0],f=l[1];if(c===n&&r.has(f))return!0}return!1}function F3(t,e,n){const r=k0(e);if(r.every(a=>a.path[0]!==n))return!1;if(t.fnSelect)return!0;const s=t.select;if(!s)return!1;for(const a of r){const l=a.path;if(l.length<2||l[0]!==n)continue;const c=s[l[1]];if(!c)continue;if(!(c instanceof En)||c.path.length<2)return!0;const[f,d]=c.path;if(f!==n&&f!==t.from.alias||d!==l[1])return!0}return!1}function fd(t){if(t.length===0)throw new UD;return t.length===1?t[0]:new Sr("and",t)}function B3(t,e,n,r,s,a,l,c,f,d,m,p,g,y,x,S,E,C){let k=t;for(const R of e)k=U3(k,R,n,r,s,a,l,c,f,d,m,p,g,y,x,S,E,C);return k}function U3(t,e,n,r,s,a,l,c,f,d,m,p,g,y,x,S,E,C){const k=e.from.type==="collectionRef",{alias:R,input:N,collectionId:j}=H3(e.from,a,f,d,m,p,g,y,l,c,S,E,C);n[R]=N,k&&(E[R]=j);const T=f[r],D=f[j];if(!T)throw new b_(r);if(!D)throw new b_(j);const{activeSource:L,lazySource:P}=K3(e.type,T,D),M=Object.keys(n),{mainExpr:B,joinedExpr:G}=q3(e.left,e.right,M,R),ee=Ln(B),te=Ln(G);let V=t.pipe(_n(([J,ae])=>[ee(ae),[J,ae]])),$=N.pipe(_n(([J,ae])=>{const Q={[R]:ae};return[te(Q),[J,Q]]}));if(!["inner","left","right","full"].includes(e.type))throw new OD(e.type);if(L){const J=L==="main"?e.from:x.from,ae=J.type==="queryRef"&&(J.query.limit||J.query.offset),Q=B.type==="func"||G.type==="func";if(!ae&&!Q){const I=L==="main"?R:s;p.add(I);const z=L==="main"?V:$,A=du(x,L==="main"?G:B,P),se=A.collection,ue=A.path[0];ue&&$d(ue,A.path,se);const fe=z.pipe(W4(ve=>{const Te=C[I]||I,_e=d[Te];if(!_e)throw new qD(Te,I,P.id,Object.keys(d));if(_e.hasLoadedInitialState())return;const me=ve.getInner().map(([[Ze]])=>Ze),Ee=new En(A.path);_e.requestSnapshot({where:Ej(Ee,me),optimizedOnly:!0})||_e.requestSnapshot()}));L==="main"?V=fe:$=fe}}return V.pipe(aj($,e.type),V3(e.type))}function q3(t,e,n,r){const s=n.filter(c=>c!==r),a=ry(t),l=ry(e);if(a&&s.includes(a)&&l===r)return{mainExpr:t,joinedExpr:e};if(a===r&&l&&s.includes(l))return{mainExpr:e,joinedExpr:t};throw!a||!l?new ID:a===l?new MD(a):s.includes(a)?l!==r?new zD(r):new DD:new ND(a)}function ry(t){switch(t.type){case"ref":return t.path[0]||null;case"func":{const e=new Set;for(const n of t.args){const r=ry(n);r&&e.add(r)}return e.size===1?Array.from(e)[0]:null}default:return null}}function H3(t,e,n,r,s,a,l,c,f,d,m,p,g){switch(t.type){case"collectionRef":{const y=e[t.alias];if(!y)throw new jE(t.alias,t.collection.id,Object.keys(e));return p[t.alias]=t.collection.id,{alias:t.alias,input:y,collectionId:t.collection.id}}case"queryRef":{const y=d.get(t.query)||t.query,x=m(y,e,n,r,s,a,l,c,f,d);Object.assign(p,x.aliasToCollectionId),Object.assign(g,x.aliasRemapping);const S=Object.keys(x.aliasToCollectionId).find(k=>x.aliasToCollectionId[k]===x.collectionId);S&&S!==t.alias&&(g[t.alias]=S);const C=x.pipeline.pipe(_n(k=>{const[R,[N,j]]=k;return[R,N]}));return{alias:t.alias,input:C,collectionId:x.collectionId}}default:throw new jD(t.type)}}function V3(t){return function(e){return e.pipe(Xs(n=>{const[r,[s,a]]=n,l=s?.[1],c=a?.[1];return t==="inner"?!!(l&&c):t==="left"?!!l:t==="right"?!!c:!0}),_n(n=>{const[r,[s,a]]=n,l=s?.[0],c=s?.[1],f=a?.[0],d=a?.[1],m={};return c&&Object.assign(m,c),d&&Object.assign(m,d),[`[${l},${f}]`,m]}))}}function K3(t,e,n){switch(t){case"left":return{activeSource:"main",lazySource:n};case"right":return{activeSource:"joined",lazySource:e};case"inner":return e.size<n.size?{activeSource:"main",lazySource:n}:{activeSource:"joined",lazySource:e};default:return{activeSource:void 0,lazySource:void 0}}}function sy(t){return t instanceof jn?t.value:t}function G3(t,e,n){const r=t.source(e);if(r&&typeof r=="object"){let s=n;const a=t.targetPath;if(a.length===0)for(const[l,c]of Object.entries(r))n[l]=sy(c);else for(let l=0;l<a.length;l++){const c=a[l];if(l===a.length-1){const f=s[c]??={};if(typeof f=="object")for(const[d,m]of Object.entries(r))f[d]=sy(m)}else{const f=s[c];(f==null||typeof f!="object")&&(s[c]={}),s=s[c]}}}}function Q3(t,e,n){const r=t.alias.split(".");if(r.length===1)n[t.alias]=t.compiled(e);else{let s=n;for(let a=0;a<r.length-1;a++){const l=r[a],c=s[l];(c==null||typeof c!="object")&&(s[l]={}),s=s[l]}s[r[r.length-1]]=sy(t.compiled(e))}}function Z3([t,e],n){const r={};for(const s of n)s.kind==="merge"?G3(s,e,r):Q3(s,e,r);return[t,{...e,__select_results:r}]}function Y3(t,e,n){const r=[];return JE([],e,r),t.pipe(_n(s=>Z3(s,r)))}function J3(t){return t.type==="agg"}function X3(t){return t&&typeof t=="object"&&!c0(t)}function JE(t,e,n){for(const[r,s]of Object.entries(e)){if(r.startsWith("__SPREAD_SENTINEL__")){const l=r.slice(19),c=l.lastIndexOf("__"),f=c>=0?l.slice(0,c):l,d=s&&typeof s=="object"&&"type"in s&&s.type==="ref";if(f.includes(".")||d){const m=[...t],p=d?s:new En(f.split(".")),g=Ln(p);n.push({kind:"merge",targetPath:m,source:g})}else{const m=f,p=[...t];n.push({kind:"merge",targetPath:p,source:g=>g[m]})}continue}const a=s;if(X3(a)){JE([...t,r],a,n);continue}if(J3(a))n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>null});else{if(a===void 0||!c0(a)){n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>a});continue}if(a instanceof jn){const l=a.value;n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>l})}else n.push({kind:"field",alias:[...t,r].join("."),compiled:Ln(a)})}}}function R0(t,e,n,r,s,a,l,c,f=new WeakMap,d=new WeakMap){const m=f.get(t);if(m)return m;iy(t);const{optimizedQuery:p,sourceWhereClauses:g}=R3(t);d.set(p,t),oy(p,t,d);const y={...e},x={},S={},E={},{alias:C,input:k,collectionId:R}=eL(p.from,y,n,r,s,a,l,c,f,d,x,S);E[C]=k;let N=k.pipe(_n(([L,P])=>[L,{[C]:P}]));if(p.join&&p.join.length>0&&(N=B3(N,p.join,E,R,C,y,f,d,n,r,s,a,l,c,t,R0,x,S)),p.where&&p.where.length>0)for(const L of p.where){const P=f0(L),M=Ln(P);N=N.pipe(Xs(([B,G])=>ro(M(G))))}if(p.fnWhere&&p.fnWhere.length>0)for(const L of p.fnWhere)N=N.pipe(Xs(([P,M])=>ro(L(M))));if(p.distinct&&!p.fnSelect&&!p.select)throw new wD;if(p.fnSelect?N=N.pipe(_n(([L,P])=>{const M=p.fnSelect(P);return[L,{...P,__select_results:M}]})):p.select?N=Y3(N,p.select):N=N.pipe(_n(([L,P])=>{const M=!p.join&&!p.groupBy?P[C]:P;return[L,{...P,__select_results:M}]})),p.groupBy&&p.groupBy.length>0?N=D_(N,p.groupBy,p.having,p.select,p.fnHaving):p.select&&Object.values(p.select).some(P=>P.type==="agg")&&(N=D_(N,[],p.having,p.select,p.fnHaving)),p.having&&(!p.groupBy||p.groupBy.length===0)&&!(p.select?Object.values(p.select).some(P=>P.type==="agg"):!1))throw new _D;if(p.fnHaving&&p.fnHaving.length>0&&(!p.groupBy||p.groupBy.length===0))for(const L of p.fnHaving)N=N.pipe(Xs(([P,M])=>L(M)));if(p.distinct&&(N=N.pipe(lj(([L,P])=>P.__select_results))),p.orderBy&&p.orderBy.length>0){const M=jj(t,N,p.orderBy,p.select||{},n[R],l,c,p.limit,p.offset).pipe(_n(([G,[ee,te]])=>{const V=ee.__select_results,$=ay(V);return[G,[$,te]]})),B={collectionId:R,pipeline:M,sourceWhereClauses:g,aliasToCollectionId:x,aliasRemapping:S};return f.set(t,B),B}else if(p.limit!==void 0||p.offset!==void 0)throw new CD;const T=N.pipe(_n(([L,P])=>{const M=P.__select_results,B=ay(M);return[L,[B,void 0]]})),D={collectionId:R,pipeline:T,sourceWhereClauses:g,aliasToCollectionId:x,aliasRemapping:S};return f.set(t,D),D}function W3(t){const e=new Set;if(t.from.type==="collectionRef"&&e.add(t.from.alias),t.join)for(const n of t.join)n.from.type==="collectionRef"&&e.add(n.from.alias);return e}function iy(t,e=new Set){const n=W3(t);for(const s of n)if(e.has(s))throw new ED(s,Array.from(e));const r=new Set([...e,...n]);if(t.from.type==="queryRef"&&iy(t.from.query,r),t.join)for(const s of t.join)s.from.type==="queryRef"&&iy(s.from.query,r)}function eL(t,e,n,r,s,a,l,c,f,d,m,p){switch(t.type){case"collectionRef":{const g=e[t.alias];if(!g)throw new jE(t.alias,t.collection.id,Object.keys(e));return m[t.alias]=t.collection.id,{alias:t.alias,input:g,collectionId:t.collection.id}}case"queryRef":{const g=d.get(t.query)||t.query,y=R0(g,e,n,r,s,a,l,c,f,d);Object.assign(m,y.aliasToCollectionId),Object.assign(p,y.aliasRemapping);const x=Object.keys(y.aliasToCollectionId).find(C=>y.aliasToCollectionId[C]===y.collectionId);x&&x!==t.alias&&(p[t.alias]=x);const E=y.pipeline.pipe(_n(C=>{const[k,[R,N]]=C,j=ay(R);return[k,j]}));return{alias:t.alias,input:E,collectionId:y.collectionId}}default:throw new kD(t.type)}}function tL(t){return t instanceof jn||t&&typeof t=="object"&&"type"in t&&t.type==="val"}function ay(t){return tL(t)?t.value:t}function oy(t,e,n){if(t.from.type==="queryRef"&&e.from.type==="queryRef"&&(n.set(t.from.query,e.from.query),oy(t.from.query,e.from.query,n)),t.join&&e.join)for(let r=0;r<t.join.length&&r<e.join.length;r++){const s=t.join[r],a=e.join[r];s.from.type==="queryRef"&&a.from.type==="queryRef"&&(n.set(s.from.query,a.from.query),oy(s.from.query,a.from.query,n))}}function T0(t,e){const n=t.type;if(n==="val")return new jn(t.value);if(n==="ref"){const r=t.path;if(Array.isArray(r)){if(r[0]===e&&r.length>1)return new En(r.slice(1));if(r.length===1&&r[0]!==void 0)return new En([r[0]])}return new En(Array.isArray(r)?r:[String(r)])}else{const r=[];for(const s of t.args){const a=T0(s,e);r.push(a)}return new Sr(t.name,r)}}function U_(t,e){return t.map(r=>{const s=T0(r.expression,e);return{...r,expression:s}})}const q_=Symbol.for("@tanstack/db.collection-config-builder");class nL{constructor(e,n,r,s){this.alias=e,this.collectionId=n,this.collection=r,this.collectionConfigBuilder=s,this.biggest=void 0,this.subscriptionLoadingPromises=new Map,this.sentToD2Keys=new Set}subscribe(){const e=this.getWhereClauseForAlias();if(e){const n=T0(e,this.alias);return this.subscribeToChanges(n)}return this.subscribeToChanges()}subscribeToChanges(e){let n;const r=this.getOrderByInfo();if(r)n=this.subscribeToOrderedChanges(e,r);else{const c=!this.collectionConfigBuilder.isLazyAlias(this.alias);n=this.subscribeToMatchingChanges(e,c)}const s=()=>{if(!this.subscriptionLoadingPromises.has(n)){let c;const f=new Promise(d=>{c=d});this.subscriptionLoadingPromises.set(n,{resolve:c}),this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(f)}};n.status==="loadingSubset"&&s();const a=n.on("status:change",c=>{if(c.status==="loadingSubset")s();else{const f=this.subscriptionLoadingPromises.get(n);f&&(this.subscriptionLoadingPromises.delete(n),f.resolve())}}),l=()=>{const c=this.subscriptionLoadingPromises.get(n);c&&(this.subscriptionLoadingPromises.delete(n),c.resolve()),a(),n.unsubscribe()};return this.collectionConfigBuilder.currentSyncState.unsubscribeCallbacks.add(l),n}sendChangesToPipeline(e,n){const r=Array.isArray(e)?e:[...e],s=[];for(const f of r){if(f.type==="insert"){if(this.sentToD2Keys.has(f.key))continue;this.sentToD2Keys.add(f.key)}else f.type==="delete"&&this.sentToD2Keys.delete(f.key);s.push(f)}const a=this.collectionConfigBuilder.currentSyncState.inputs[this.alias],c=rL(a,s,this.collection.config.getKey)>0?n:void 0;this.collectionConfigBuilder.scheduleGraphRun(c,{alias:this.alias})}subscribeToMatchingChanges(e,n=!1){const r=a=>{this.sendChangesToPipeline(a)};return this.collection.subscribeChanges(r,{...n&&{includeInitialState:n},whereExpression:e})}subscribeToOrderedChanges(e,n){const{orderBy:r,offset:s,limit:a,index:l}=n,c=p=>{const g=sL(p);this.sendChangesToPipelineWithTracking(g,f)},f=this.collection.subscribeChanges(c,{whereExpression:e}),d=this.collection.on("truncate",()=>{this.biggest=void 0,this.sentToD2Keys.clear()});f.on("unsubscribed",()=>{d()});const m=U_(r,this.alias);return l?(f.setOrderByIndex(l),f.requestLimitedSnapshot({limit:s+a,orderBy:m})):f.requestSnapshot({orderBy:m,limit:s+a}),f}loadMoreIfNeeded(e){const n=this.getOrderByInfo();if(!n)return!0;const{dataNeeded:r}=n;if(!r)return!0;const s=r();return s>0&&this.loadNextItems(s,e),!0}sendChangesToPipelineWithTracking(e,n){const r=this.getOrderByInfo();if(!r){this.sendChangesToPipeline(e);return}const s=this.trackSentValues(e,r.comparator),a=n;a[q_]??=this.loadMoreIfNeeded.bind(this,n),this.sendChangesToPipeline(s,a[q_])}loadNextItems(e,n){const r=this.getOrderByInfo();if(!r)return;const{orderBy:s,valueExtractorForRawRow:a,offset:l}=r,c=this.biggest,f=c?a(c):void 0,d=f!==void 0?Array.isArray(f)?f:[f]:void 0,m=U_(s,this.alias);n.requestLimitedSnapshot({orderBy:m,limit:e,minValues:d,offset:l})}getWhereClauseForAlias(){const e=this.collectionConfigBuilder.sourceWhereClausesCache;if(e)return e.get(this.alias)}getOrderByInfo(){const e=this.collectionConfigBuilder.optimizableOrderByCollections[this.collectionId];if(e&&e.alias===this.alias)return e}*trackSentValues(e,n){for(const r of e)r.type!=="delete"&&(this.biggest?n(this.biggest,r.value)<0&&(this.biggest=r.value):this.biggest=r.value),yield r}}function rL(t,e,n){const r=[];for(const s of e){const a=n(s.value);s.type==="insert"?r.push([[a,s.value],1]):s.type==="update"?(r.push([[a,s.previousValue],-1]),r.push([[a,s.value],1])):r.push([[a,s.value],-1])}return r.length!==0&&t.sendData(new Kt(r)),r.length}function*sL(t){for(const e of t)e.type==="update"?(yield{type:"delete",key:e.key,value:e.previousValue},yield{type:"insert",key:e.key,value:e.value}):yield e}const XE=new WeakMap;function iL(t){return t.utils?.[x0]?.getBuilder?.()}function aL(t,e){XE.set(t,e)}function oL(t){return XE.get(t)}let lL=0;class uL{constructor(e){this.config=e,this.compiledAliasToCollectionId={},this.resultKeys=new WeakMap,this.orderByIndices=new WeakMap,this.isGraphRunning=!1,this.runCount=0,this.isInErrorState=!1,this.aliasDependencies={},this.builderDependencies=new Set,this.pendingGraphRuns=new Map,this.subscriptions={},this.lazySourcesCallbacks={},this.lazySources=new Set,this.optimizableOrderByCollections={},this.id=e.id||`live-query-${++lL}`,this.query=cL(e),this.collections=dL(this.query);const n=hL(this.query);this.collectionByAlias={};for(const[r,s]of n.entries()){const a=this.collections[r];if(a)for(const l of s)this.collectionByAlias[l]=a}this.query.orderBy&&this.query.orderBy.length>0&&(this.compare=fL(this.orderByIndices)),this.compareOptions=this.config.defaultStringCollation??WE(this.query).compareOptions,this.compileBasePipeline()}hasJoins(e){return!!(e.join&&e.join.length>0||e.from.type==="queryRef"&&this.hasJoins(e.from.query))}getConfig(){return{id:this.id,getKey:this.config.getKey||(e=>this.resultKeys.get(e)),sync:this.getSyncConfig(),compare:this.compare,defaultStringCollation:this.compareOptions,gcTime:this.config.gcTime||5e3,schema:this.config.schema,onInsert:this.config.onInsert,onUpdate:this.config.onUpdate,onDelete:this.config.onDelete,startSync:this.config.startSync,singleResult:this.query.singleResult,utils:{getRunCount:this.getRunCount.bind(this),setWindow:this.setWindow.bind(this),getWindow:this.getWindow.bind(this),[x0]:{getBuilder:()=>this,hasCustomGetKey:!!this.config.getKey,hasJoins:this.hasJoins(this.query)}}}}setWindow(e){if(!this.windowFn)throw new VD;return this.currentWindow=e,this.windowFn(e),this.maybeRunGraphFn?.(),this.liveQueryCollection?.isLoadingSubset?new Promise(n=>{const r=this.liveQueryCollection.on("loadingSubset:change",s=>{s.isLoadingSubset||(r(),n())})}):!0}getWindow(){if(!(!this.windowFn||!this.currentWindow))return{offset:this.currentWindow.offset??0,limit:this.currentWindow.limit??0}}getCollectionIdForAlias(e){const n=this.compiledAliasToCollectionId[e];if(n)return n;const r=this.collectionByAlias[e];if(r)return r.id;throw new Error(`Unknown source alias "${e}"`)}isLazyAlias(e){return this.lazySources.has(e)}maybeRunGraph(e){if(!this.isGraphRunning){if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("maybeRunGraph called without active sync session. This should not happen.");this.isGraphRunning=!0;try{const{begin:n,commit:r}=this.currentSyncConfig,s=this.currentSyncState;if(this.isInErrorState)return;if(s.subscribedToAllCollections){for(;s.graph.pendingWork();)s.graph.run(),e?.();s.messagesCount===0&&(n(),r(),this.updateLiveQueryStatus(this.currentSyncConfig))}}finally{this.isGraphRunning=!1}}}scheduleGraphRun(e,n){const r=n?.contextId??Df()?.id,s=n?.jobId??this,a=(()=>{if(n?.dependencies)return n.dependencies;const f=new Set(this.builderDependencies);if(n?.alias){const d=this.aliasDependencies[n.alias];if(d)for(const m of d)f.add(m)}return f.delete(this),Array.from(f)})();if(r)for(const f of a)typeof f.scheduleGraphRun=="function"&&f.scheduleGraphRun(void 0,{contextId:r});if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("scheduleGraphRun called without active sync session. This should not happen.");let l=r?this.pendingGraphRuns.get(r):void 0;l||(l={loadCallbacks:new Set},r&&this.pendingGraphRuns.set(r,l)),e&&l.loadCallbacks.add(e);const c=r?void 0:l;ud.schedule({contextId:r,jobId:s,dependencies:a,run:()=>this.executeGraphRun(r,c)})}clearPendingGraphRun(e){this.pendingGraphRuns.delete(e)}hasPendingGraphRun(e){return this.pendingGraphRuns.has(e)}executeGraphRun(e,n){const r=n??(e?this.pendingGraphRuns.get(e):void 0);if(e&&this.pendingGraphRuns.delete(e),!r||!this.currentSyncConfig||!this.currentSyncState)return;this.incrementRunCount();const s=()=>{let a=!0,l;if(r.loadCallbacks.forEach(c=>{try{a=c()&&a}catch(f){a=!1,l??=f}}),l)throw l;return a};this.maybeRunGraph(s)}getSyncConfig(){return{rowUpdateMode:"full",sync:this.syncFn.bind(this)}}incrementRunCount(){this.runCount++}getRunCount(){return this.runCount}syncFn(e){this.liveQueryCollection=e.collection,this.currentSyncConfig=e;const n={messagesCount:0,subscribedToAllCollections:!1,unsubscribeCallbacks:new Set},r=this.extendPipelineWithChangeProcessing(e,n);this.currentSyncState=r,this.unsubscribeFromSchedulerClears=ud.onClear(a=>{this.clearPendingGraphRun(a)});const s=this.subscribeToAllCollections(e,r);return this.maybeRunGraphFn=()=>this.scheduleGraphRun(s),this.scheduleGraphRun(s),()=>{n.unsubscribeCallbacks.forEach(a=>a()),this.currentSyncConfig=void 0,this.currentSyncState=void 0,this.pendingGraphRuns.clear(),this.graphCache=void 0,this.inputsCache=void 0,this.pipelineCache=void 0,this.sourceWhereClausesCache=void 0,this.lazySources.clear(),this.optimizableOrderByCollections={},this.lazySourcesCallbacks={},Object.keys(this.subscriptions).forEach(a=>delete this.subscriptions[a]),this.compiledAliasToCollectionId={},this.unsubscribeFromSchedulerClears?.(),this.unsubscribeFromSchedulerClears=void 0}}compileBasePipeline(){this.graphCache=new B4,this.inputsCache=Object.fromEntries(Object.keys(this.collectionByAlias).map(r=>[r,this.graphCache.newInput()]));const e=R0(this.query,this.inputsCache,this.collections,this.subscriptions,this.lazySourcesCallbacks,this.lazySources,this.optimizableOrderByCollections,r=>{this.windowFn=r});this.pipelineCache=e.pipeline,this.sourceWhereClausesCache=e.sourceWhereClauses,this.compiledAliasToCollectionId=e.aliasToCollectionId;const n=Object.keys(this.compiledAliasToCollectionId).filter(r=>!Object.hasOwn(this.inputsCache,r));if(n.length>0)throw new HD(n)}maybeCompileBasePipeline(){return(!this.graphCache||!this.inputsCache||!this.pipelineCache)&&this.compileBasePipeline(),{graph:this.graphCache,inputs:this.inputsCache,pipeline:this.pipelineCache}}extendPipelineWithChangeProcessing(e,n){const{begin:r,commit:s}=e,{graph:a,inputs:l,pipeline:c}=this.maybeCompileBasePipeline();return c.pipe(nj(f=>{const d=f.getInner();n.messagesCount+=d.length,r(),d.reduce(pL,new Map).forEach(this.applyChanges.bind(this,e)),s()})),a.finalize(),n.graph=a,n.inputs=l,n.pipeline=c,n}applyChanges(e,n,r){const{write:s,collection:a}=e,{deletes:l,inserts:c,value:f,orderByIndex:d}=n;if(this.resultKeys.set(f,r),d!==void 0&&this.orderByIndices.set(f,d),c&&l===0)s({value:f,type:"insert"});else if(c>l||c===l&&a.has(a.getKeyFromItem(f)))s({value:f,type:"update"});else if(l>0)s({value:f,type:"delete"});else throw new Error(`Could not apply changes: ${JSON.stringify(n)}. This should never happen.`)}handleSourceStatusChange(e,n,r){const{status:s}=r;if(s==="error"){this.transitionToError(`Source collection '${n}' entered error state`);return}if(s==="cleaned-up"){this.transitionToError(`Source collection '${n}' was manually cleaned up while live query '${this.id}' depends on it. Live queries prevent automatic GC, so this was likely a manual cleanup() call.`);return}this.updateLiveQueryStatus(e)}updateLiveQueryStatus(e){const{markReady:n}=e;this.isInErrorState||this.allCollectionsReady()&&n()}transitionToError(e){this.isInErrorState=!0,console.error(`[Live Query Error] ${e}`),this.liveQueryCollection?._lifecycle.setStatus("error")}allCollectionsReady(){return Object.values(this.collections).every(e=>e.isReady())}subscribeToAllCollections(e,n){const r=Object.entries(this.compiledAliasToCollectionId);if(r.length===0)throw new Error(`Compiler returned no alias metadata for query '${this.id}'. This should not happen; please report.`);const s=r.map(([l,c])=>{const f=this.collectionByAlias[l]??this.collections[c],d=oL(f);d&&d!==this?(this.aliasDependencies[l]=[d],this.builderDependencies.add(d)):this.aliasDependencies[l]=[];const m=new nL(l,c,f,this),p=f.on("status:change",x=>{this.handleSourceStatusChange(e,c,x)});n.unsubscribeCallbacks.add(p);const g=m.subscribe();return this.subscriptions[l]=g,m.loadMoreIfNeeded.bind(m,g)}),a=()=>(s.map(l=>l()),!0);return n.subscribedToAllCollections=!0,this.updateLiveQueryStatus(e),a}}function cL(t){return typeof t.query=="function"?k3(t.query):KE(t.query)}function fL(t){return(e,n)=>{const r=t.get(e),s=t.get(n);return r&&s?r<s?-1:r>s?1:0:0}}function dL(t){const e={};function n(s){s.type==="collectionRef"?e[s.collection.id]=s.collection:s.type==="queryRef"&&r(s.query)}function r(s){if(s.from&&n(s.from),s.join&&Array.isArray(s.join))for(const a of s.join)a.from&&n(a.from)}return r(t),e}function WE(t){const e=t.from;if(e.type==="collectionRef")return e.collection;if(e.type==="queryRef")return WE(e.query);throw new Error(`Failed to extract collection. Invalid FROM clause: ${JSON.stringify(t)}`)}function hL(t){const e=new Map;function n(s){if(s)if(s.type==="collectionRef"){const{id:a}=s.collection,l=e.get(a);l?l.add(s.alias):e.set(a,new Set([s.alias]))}else s.type==="queryRef"&&r(s.query)}function r(s){if(s&&(n(s.from),s.join))for(const a of s.join)n(a.from)}return r(t),e}function pL(t,[[e,n],r]){const[s,a]=n,l=t.get(e)||{deletes:0,inserts:0,value:s,orderByIndex:a};return r<0?l.deletes+=Math.abs(r):r>0&&(l.inserts+=r,l.value=s,l.orderByIndex=a),t.set(e,l),t}function H_(t){return new uL(t).getConfig()}function Zm(t){if(typeof t=="function"){const n=H_({query:t});return V_(n)}else{const e=t,n=H_(e);return e.utils&&(n.utils={...n.utils,...e.utils}),V_(n)}}function V_(t){const e=_0(t),n=iL(t);return n&&aL(e,n),e}const Ym=1;function ek(t,e=[]){const n=t&&typeof t=="object"&&typeof t.subscribeChanges=="function"&&typeof t.startSyncImmediate=="function"&&typeof t.id=="string",r=q.useRef(null),s=q.useRef(null),a=q.useRef(null),l=q.useRef(0),c=q.useRef(null),f=!r.current||n&&a.current!==t||!n&&(s.current===null||s.current.length!==e.length||s.current.some((x,S)=>x!==e[S]));if(f)if(n)t.startSyncImmediate(),r.current=t,a.current=t;else if(typeof t=="function"){const x=new Vt,S=t(x);if(S==null)r.current=null;else if(S instanceof C0)S.startSyncImmediate(),r.current=S;else if(S instanceof Vt)r.current=Zm({query:t,startSync:!0,gcTime:Ym});else if(S&&typeof S=="object")r.current=Zm({startSync:!0,gcTime:Ym,...S});else throw new Error(`useLiveQuery callback must return a QueryBuilder, LiveQueryCollectionConfig, Collection, undefined, or null. Got: ${typeof S}`);s.current=[...e]}else r.current=Zm({startSync:!0,gcTime:Ym,...t}),s.current=[...e];f&&(l.current=0,c.current=null);const d=q.useRef(null);(!d.current||f)&&(d.current=x=>{if(!r.current)return()=>{};const S=r.current.subscribeChanges(()=>{l.current+=1,x()});return r.current.status==="ready"&&(l.current+=1,x()),()=>{S.unsubscribe()}});const m=q.useRef(null);(!m.current||f)&&(m.current=()=>{const x=l.current,S=r.current;return(!c.current||c.current.version!==x||c.current.collection!==S)&&(c.current={collection:S,version:x}),c.current});const p=q.useSyncExternalStore(d.current,m.current),g=q.useRef(null),y=q.useRef(null);if(!g.current||g.current.version!==p.version||g.current.collection!==p.collection){if(!p.collection)y.current={state:void 0,data:void 0,collection:void 0,status:"disabled",isLoading:!1,isReady:!0,isIdle:!1,isError:!1,isCleanedUp:!1,isEnabled:!1};else{const x=Array.from(p.collection.entries()),E=p.collection.config.singleResult;let C=null,k=null;y.current={get state(){return C||(C=new Map(x)),C},get data(){return k||(k=x.map(([,R])=>R)),E?k[0]:k},collection:p.collection,status:p.collection.status,isLoading:p.collection.status==="loading",isReady:p.collection.status==="ready",isIdle:p.collection.status==="idle",isError:p.collection.status==="error",isCleanedUp:p.collection.status==="cleaned-up",isEnabled:!0}}g.current=p}return y.current}class ai extends rr{constructor(e){super(e),this.name="QueryCollectionError"}}class mL extends ai{constructor(){super("[QueryCollection] queryKey must be provided."),this.name="QueryKeyRequiredError"}}class gL extends ai{constructor(){super("[QueryCollection] queryFn must be provided."),this.name="QueryFnRequiredError"}}class yL extends ai{constructor(){super("[QueryCollection] queryClient must be provided."),this.name="QueryClientRequiredError"}}class vL extends ai{constructor(){super("[QueryCollection] getKey must be provided."),this.name="GetKeyRequiredError"}}class bL extends ai{constructor(){super("Collection must be in 'ready' state for manual sync operations. Sync not initialized yet."),this.name="SyncNotInitializedError"}}class xL extends ai{constructor(e){super(`Duplicate key '${e}' found within batch operations`),this.name="DuplicateKeyInBatchError"}}class SL extends ai{constructor(e){super(`Update operation: Item with key '${e}' does not exist`),this.name="UpdateOperationItemNotFoundError"}}class wL extends ai{constructor(e){super(`Delete operation: Item with key '${e}' does not exist`),this.name="DeleteOperationItemNotFoundError"}}const Ai=new WeakMap;function _L(t,e){const n=Array.isArray(t)?t:[t],r=[];for(const s of n)if(s.type==="delete"){const a=Array.isArray(s.key)?s.key:[s.key];for(const l of a)r.push({type:"delete",key:l})}else{const a=Array.isArray(s.data)?s.data:[s.data];for(const l of a){let c;if(s.type==="update")c=e.getKey(l);else{const f=e.collection.validateData(l,s.type==="upsert"?"insert":s.type);c=e.getKey(f)}r.push({type:s.type,key:c,data:l})}}return r}function CL(t,e){const n=new Set;for(const r of t){if(n.has(r.key))throw new xL(r.key);if(n.add(r.key),r.type==="update"){if(!e.collection._state.syncedData.has(r.key))throw new SL(r.key)}else if(r.type==="delete"&&!e.collection._state.syncedData.has(r.key))throw new wL(r.key)}}function wl(t,e){const n=_L(t,e);CL(n,e),e.begin();for(const s of n)switch(s.type){case"insert":{const a=e.collection.validateData(s.data,"insert");e.write({type:"insert",value:a});break}case"update":{const l={...e.collection._state.syncedData.get(s.key),...s.data},c=e.collection.validateData(l,"update",s.key);e.write({type:"update",value:c});break}case"delete":{const a=e.collection._state.syncedData.get(s.key);e.write({type:"delete",value:a});break}case"upsert":{const a=e.collection._state.syncedData.has(s.key),l=e.collection.validateData(s.data,a?"update":"insert",s.key);a?e.write({type:"update",value:l}):e.write({type:"insert",value:l});break}}e.commit();const r=Array.from(e.collection._state.syncedData.values());e.updateCacheData?e.updateCacheData(r):e.queryClient.setQueryData(e.queryKey,r)}function EL(t){function e(){const n=t();if(!n)throw new bL;return n}return{writeInsert(n){const r={type:"insert",data:n},s=e(),a=Ai.get(s);if(a?.isActive){a.operations.push(r);return}wl(r,s)},writeUpdate(n){const r={type:"update",data:n},s=e(),a=Ai.get(s);if(a?.isActive){a.operations.push(r);return}wl(r,s)},writeDelete(n){const r={type:"delete",key:n},s=e(),a=Ai.get(s);if(a?.isActive){a.operations.push(r);return}wl(r,s)},writeUpsert(n){const r={type:"upsert",data:n},s=e(),a=Ai.get(s);if(a?.isActive){a.operations.push(r);return}wl(r,s)},writeBatch(n){const r=e();if(Ai.get(r)?.isActive)throw new Error("Cannot nest writeBatch calls. Complete the current batch before starting a new one.");const a={operations:[],isActive:!0};Ai.set(r,a);try{const l=n();if(l&&typeof l=="object"&&"then"in l&&typeof l.then=="function")throw new Error("writeBatch does not support async callbacks. The callback must be synchronous.");a.operations.length>0&&wl(a.operations,r)}finally{a.isActive=!1,Ai.delete(r)}}}}function kL(t){if(!t)return;const e={};return t.where&&(e.where=ly(t.where)),t.orderBy?.length&&(e.orderBy=t.orderBy.map(n=>{const r={expression:ly(n.expression),direction:n.compareOptions.direction,nulls:n.compareOptions.nulls,stringSort:n.compareOptions.stringSort};return n.compareOptions.stringSort==="locale"?{...r,locale:n.compareOptions.locale,localeOptions:n.compareOptions.localeOptions}:r})),t.limit!==void 0&&(e.limit=t.limit),t.offset!==void 0&&(e.offset=t.offset),Object.keys(e).length===0?void 0:JSON.stringify(e)}function ly(t){if(!t)return null;switch(t.type){case"val":return{type:"val",value:uy(t.value)};case"ref":return{type:"ref",path:[...t.path]};case"func":return{type:"func",name:t.name,args:t.args.map(e=>ly(e))};default:return null}}function uy(t){if(t===void 0)return{__type:"undefined"};if(typeof t=="number"){if(Number.isNaN(t))return{__type:"nan"};if(t===Number.POSITIVE_INFINITY)return{__type:"infinity",sign:1};if(t===Number.NEGATIVE_INFINITY)return{__type:"infinity",sign:-1}}return t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"?t:t instanceof Date?{__type:"date",value:t.toJSON()}:Array.isArray(t)?t.map(e=>uy(e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,uy(n)])):t}class RL{constructor(e,n,r){this.state=e,this.refetchFn=n,this.refetch=n,this.writeInsert=r.writeInsert,this.writeUpdate=r.writeUpdate,this.writeDelete=r.writeDelete,this.writeUpsert=r.writeUpsert,this.writeBatch=r.writeBatch}async clearError(){this.state.lastError=void 0,this.state.errorCount=0,this.state.lastErrorUpdatedAt=0,await this.refetchFn({throwOnError:!0})}get lastError(){return this.state.lastError}get isError(){return!!this.state.lastError}get errorCount(){return this.state.errorCount}get isFetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isFetching)}get isRefetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isRefetching)}get isLoading(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isLoading)}get dataUpdatedAt(){return Math.max(0,...Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().dataUpdatedAt))}get fetchStatus(){return Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().fetchStatus)}}function tk(t){const{queryKey:e,queryFn:n,select:r,queryClient:s,enabled:a,refetchInterval:l,retry:c,retryDelay:f,staleTime:d,getKey:m,onInsert:p,onUpdate:g,onDelete:y,meta:x,...S}=t,E=S.syncMode??"eager";if(!e)throw new mL;if(!n)throw new gL;if(!s)throw new yL;if(!m)throw new vL;const C={lastError:void 0,errorCount:0,lastErrorUpdatedAt:0,observers:new Map},k=new Map,R=new Map,N=new Map,j=new Map,T=new Map,D=(Q,I)=>{const z=N.get(Q)||new Set;z.add(I),N.set(Q,z);const F=R.get(I)||new Set;F.add(Q),R.set(I,F)},L=(Q,I)=>{const z=N.get(Q)||new Set;z.delete(I),N.set(Q,z);const F=R.get(I)||new Set;return F.delete(Q),R.set(I,F),z.size===0},P=Q=>{const{begin:I,write:z,commit:F,markReady:A,collection:se}=Q;let ue=!1;const fe=ge=>{if(typeof e=="function")return e(ge);if(E==="on-demand"){const je=kL(ge);return je!==void 0?[...e,je]:e}else return e},ve=(ge={},je=n)=>{const be=fe(ge),ye=Tr(be),qe={...x,loadSubsetOptions:ge};if(C.observers.has(ye)){T.set(ye,(T.get(ye)||0)+1);const ke=C.observers.get(ye),xe=ke.getCurrentResult();return xe.isSuccess?!0:xe.isError?Promise.reject(xe.error):new Promise((Ue,vt)=>{const ut=ke.subscribe(ct=>{ct.isSuccess?(ut(),Ue()):ct.isError&&(ut(),vt(ct.error))})})}const ne={queryKey:be,queryFn:je,meta:qe,structuralSharing:!0,notifyOnChangeProps:"all",...a!==void 0&&{enabled:a},...l!==void 0&&{refetchInterval:l},...c!==void 0&&{retry:c},...f!==void 0&&{retryDelay:f},...d!==void 0&&{staleTime:d}},de=new tE(s,ne);k.set(ye,be),C.observers.set(ye,de),T.set(ye,(T.get(ye)||0)+1);const Ce=new Promise((ke,xe)=>{const Ue=de.subscribe(vt=>{vt.isSuccess?(Ue(),ke()):vt.isError&&(Ue(),xe(vt.error))})});return(ue||se.subscriberCount>0)&&me(de,ye),Ce},Te=ge=>{const je=Tr(ge);return ye=>{if(ye.isSuccess){C.lastError=void 0,C.errorCount=0;const qe=ye.data,ne=r?r(qe):qe;if(!Array.isArray(ne)||ne.some(ke=>typeof ke!="object")){const ke=r?`@tanstack/query-db-collection: select() must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(ge)}`:`@tanstack/query-db-collection: queryFn must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(ge)}`;console.error(ke);return}const de=new Map(se._state.syncedData.entries()),Ce=new Map;ne.forEach(ke=>{const xe=m(ke);Ce.set(xe,ke)}),I(),de.forEach((ke,xe)=>{const Ue=Ce.get(xe);Ue?Ar(ke,Ue)||z({type:"update",value:Ue}):L(xe,je)&&z({type:"delete",value:ke})}),Ce.forEach((ke,xe)=>{D(xe,je),de.has(xe)||z({type:"insert",value:ke})}),F(),A()}else ye.isError&&(ye.errorUpdatedAt!==C.lastErrorUpdatedAt&&(C.lastError=ye.error,C.errorCount++,C.lastErrorUpdatedAt=ye.errorUpdatedAt),console.error(`[QueryCollection] Error observing query ${String(ge)}:`,ye.error),A())}},_e=ge=>j.has(ge),me=(ge,je)=>{if(!_e(je)){const be=k.get(je),ye=Te(be),qe=ge.subscribe(ye);j.set(je,qe);const ne=ge.getCurrentResult();(ne.isSuccess||ne.isError)&&ye(ne)}},Ee=()=>{C.observers.forEach(me)},Oe=()=>{j.forEach(ge=>{ge()}),j.clear()};ue=!0;const Ze=se.on("subscribers:change",({subscriberCount:ge})=>{ge>0?Ee():ge===0&&Oe()});if(E==="eager"){const ge=ve({});ge instanceof Promise&&ge.catch(()=>{})}else A();Ee(),C.observers.forEach((ge,je)=>{const be=k.get(je);Te(be)(ge.getCurrentResult())});const Le=ge=>{j.get(ge)?.(),j.delete(ge);const je=R.get(ge)??new Set,be=[];je.forEach(ye=>{const qe=N.get(ye);qe&&(qe.delete(ge),qe.size===0&&(N.delete(ye),se.has(ye)&&be.push(se.get(ye))))}),be.length>0&&(I(),be.forEach(ye=>{z({type:"delete",value:ye})}),F()),C.observers.delete(ge),R.delete(ge),k.delete(ge),T.delete(ge)},Ye=ge=>{const je=T.get(ge)||0,be=C.observers.get(ge);if(je<=0&&(j.get(ge)?.(),j.delete(ge)),be?.hasListeners()??!1){T.set(ge,0);return}je>0&&console.warn(`[cleanupQueryIfIdle] Invariant violation: refcount=${je} but no listeners. Cleaning up to prevent leak.`,{hashedQueryKey:ge}),Le(ge)},it=ge=>{Le(ge)},Je=s.getQueryCache().subscribe(ge=>{const je=ge.query.queryHash;ge.type==="removed"&&k.has(je)&&Ye(je)});return{loadSubset:E==="eager"?void 0:ve,unloadSubset:E==="eager"?void 0:ge=>{const je=fe(ge),be=Tr(je),qe=(T.get(be)||0)-1;qe<=0?(T.set(be,0),Ye(be)):T.set(be,qe)},cleanup:async()=>{Ze(),Oe();const ge=[...k.values()],je=[...C.observers.keys()];for(const be of je)it(be);Je(),await Promise.all(ge.map(async be=>{await s.cancelQueries({queryKey:be,exact:!0}),s.removeQueries({queryKey:be,exact:!0})}))}}},M=async Q=>{const z=[...k.values()].map(F=>C.observers.get(Tr(F)).refetch({throwOnError:Q?.throwOnError}));await Promise.all(z)},B=Q=>{const I=typeof e=="function"?e({}):e;r?s.setQueryData(I,z=>{if(!z||typeof z!="object")return z;if(Array.isArray(z))return Q;const F=r(z);if(Array.isArray(F)){for(const A of Object.keys(z))if(z[A]===F)return{...z,[A]:Q}}if(Array.isArray(z.data))return{...z,data:Q};if(Array.isArray(z.items))return{...z,items:Q};if(Array.isArray(z.results))return{...z,results:Q};for(const A of Object.keys(z))if(Array.isArray(z[A]))return{...z,[A]:Q};return z}):s.setQueryData(I,Q)};let G=null;const ee=Q=>{const{begin:I,write:z,commit:F,collection:A}=Q,se=typeof e=="function"?e({}):e;return G={collection:A,queryClient:s,queryKey:se,getKey:m,begin:I,write:z,commit:F,updateCacheData:B},P(Q)},te=EL(()=>G),V=p?async Q=>{const I=await p(Q)??{};return I.refetch!==!1&&await M(),I}:void 0,$=g?async Q=>{const I=await g(Q)??{};return I.refetch!==!1&&await M(),I}:void 0,J=y?async Q=>{const I=await y(Q)??{};return I.refetch!==!1&&await M(),I}:void 0,ae=new RL(C,M,te);return{...S,getKey:m,syncMode:E,sync:{sync:ee},onInsert:V,onUpdate:$,onDelete:J,utils:ae}}const nk=new rE({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}});async function TL(){const t=await fetch("/connections");if(!t.ok)throw new Error(`Failed to list connections: ${t.statusText}`);return t.json()}async function K_(t){if(await fetch(`/connections/${encodeURIComponent(t.id)}`).then(n=>n.ok)){const n=await fetch(`/connections/${encodeURIComponent(t.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to update connection: ${n.statusText}`)}else{const n=await fetch("/connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to create connection: ${n.statusText}`)}}async function AL(t){const e=await fetch(`/connections/${encodeURIComponent(t)}`,{method:"DELETE"});if(!e.ok&&e.status!==404)throw new Error(`Failed to delete connection: ${e.statusText}`)}async function OL(t){const e=await fetch(`/data/${t}`);if(!e.ok)throw new Error(`Failed to list entries: ${e.statusText}`);const n=await e.json(),r=[];for(const s of n){const a=await fetch(`/data/${t}/${encodeURIComponent(s.id)}`);if(a.ok){const l=await a.json();r.push(l)}}return r}async function G_(t,e){const n=await fetch(`/data/${t}/${encodeURIComponent(e.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error(`Failed to save item: ${n.statusText}`)}async function ML(t,e){const n=await fetch(`/data/${t}/${encodeURIComponent(e)}`,{method:"DELETE"});if(!n.ok&&n.status!==404)throw new Error(`Failed to delete item: ${n.statusText}`)}const Zl=_0(tk({queryKey:["connections"],queryFn:async()=>TL(),getKey:t=>t.id,queryClient:nk,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await K_(n)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await K_(n)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await AL(n.id)}))}})),uf="queries";_0(tk({queryKey:["saved-queries"],queryFn:async()=>OL(uf),getKey:t=>t.id,queryClient:nk,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await G_(uf,n)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await G_(uf,n)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await ML(uf,n.id)}))}}));const Q_={postgres:{label:"PostgreSQL",placeholder:"postgres://user:password@localhost:5432/database"},mysql:{label:"MySQL",placeholder:"user:password@tcp(localhost:3306)/database"},sqlite:{label:"SQLite",placeholder:"/path/to/database.db"},sqlserver:{label:"SQL Server",placeholder:"sqlserver://user:password@localhost:1433?database=mydb"},oracle:{label:"Oracle",placeholder:"oracle://user:password@localhost:1521/service_name"}},IL={postgres:{active:"bg-blue-500/10 border-blue-500/50 text-blue-600 dark:text-blue-400",label:"PG"},mysql:{active:"bg-yellow-500/10 border-yellow-500/50 text-yellow-600 dark:text-yellow-400",label:"MySQL"},sqlite:{active:"bg-purple-500/10 border-purple-500/50 text-purple-600 dark:text-purple-400",label:"SQLite"},sqlserver:{active:"bg-red-500/10 border-red-500/50 text-red-600 dark:text-red-400",label:"MSSQL"},oracle:{active:"bg-orange-500/10 border-orange-500/50 text-orange-600 dark:text-orange-400",label:"Oracle"}},Z_={s3:{label:"Amazon S3",color:"bg-orange-500/10 border-orange-500/50 text-orange-600 dark:text-orange-400"},"azure-blob":{label:"Azure Blob",color:"bg-blue-500/10 border-blue-500/50 text-blue-600 dark:text-blue-400"}};function NL(t){return t&&(t.amazonS3||t.azureBlob)?"storage":"database"}function zL({connection:t,onSave:e,onClose:n}){const r=NL(t),[s,a]=q.useState(r),[l,c]=q.useState(t?.name??""),[f,d]=q.useState(t?.sql?.driver??"postgres"),[m,p]=q.useState(t?.sql?.dsn??""),[g,y]=q.useState(t?.amazonS3?"s3":t?.azureBlob?"azure-blob":"s3"),[x,S]=q.useState(t?.amazonS3?.region??"us-east-1"),[E,C]=q.useState(t?.amazonS3?.accessKeyId??""),[k,R]=q.useState(t?.amazonS3?.secretAccessKey??""),[N,j]=q.useState(t?.amazonS3?.endpoint??""),[T,D]=q.useState(t?.azureBlob?.accountName??""),[L,P]=q.useState(t?.azureBlob?.accountKey??""),[M,B]=q.useState(t?.azureBlob?.connectionString??""),[G,ee]=q.useState("idle"),[te,V]=q.useState(null),$=!!t,J=async()=>{ee("testing"),V(null);try{if(s==="database"){if(!m)return;const F=`__test_${Date.now()}`,A=await fetch("/connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:F,name:"Test Connection",sql:{driver:f,dsn:m}})});if(!A.ok){const se=await A.json();ee("error"),V(se.message||"Failed to create test connection");return}try{const se=await fetch(`/sql/${encodeURIComponent(F)}/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"SELECT 1",params:[]})}),ue=await se.json();ue.error||!se.ok?(ee("error"),V(ue.error||ue.message||"Connection failed")):ee("success")}finally{await fetch(`/connections/${encodeURIComponent(F)}`,{method:"DELETE"})}}else{const F=`__test_${Date.now()}`,A=ae(),se={id:F,name:"Test Connection"};g==="s3"?se.amazonS3=A:se.azureBlob=A;const ue=await fetch("/connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)});if(!ue.ok){const fe=await ue.json();ee("error"),V(fe.message||"Failed to create test connection");return}try{const fe=await fetch(`/storage/${encodeURIComponent(F)}/containers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(fe.ok)ee("success");else{const ve=await fe.json();ee("error"),V(ve.message||"Connection failed")}}finally{await fetch(`/connections/${encodeURIComponent(F)}`,{method:"DELETE"})}}}catch(F){ee("error"),V(F instanceof Error?F.message:"Connection failed")}},ae=()=>g==="s3"?{region:x,accessKeyId:E,secretAccessKey:k,...N&&{endpoint:N}}:{accountName:T,...L&&{accountKey:L},...M&&{connectionString:M}},Q=F=>{if(F.preventDefault(),!!l)if(s==="database"){if(!m)return;e({...t?.id&&{id:t.id},name:l,sql:{driver:f,dsn:m}})}else{const A=ae();e(g==="s3"?{...t?.id&&{id:t.id},name:l,amazonS3:A}:{...t?.id&&{id:t.id},name:l,azureBlob:A})}},I=()=>l?s==="database"?!!m:g==="s3"?!!x&&!!E&&!!k:!!T&&(!!L||!!M):!1,z=Q_[f];return w.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[w.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:n}),w.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-[#1a1a1a] rounded-2xl shadow-2xl border border-neutral-200 dark:border-white/10 overflow-hidden",children:[w.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-neutral-200 dark:border-white/10",children:[w.jsx("h2",{className:"text-base font-semibold text-neutral-800 dark:text-neutral-100",children:$?"Edit Connection":"New Connection"}),w.jsx("button",{onClick:n,className:"p-1.5 -mr-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:w.jsx(Cu,{className:"w-4 h-4 text-neutral-500"})})]}),w.jsxs("form",{onSubmit:Q,className:"p-5 space-y-4",children:[!$&&w.jsxs("div",{className:"flex gap-2 p-1 bg-neutral-100 dark:bg-white/5 rounded-xl",children:[w.jsxs("button",{type:"button",onClick:()=>{a("database"),ee("idle"),V(null)},className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${s==="database"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:[w.jsx(cu,{className:"w-4 h-4"}),"Database"]}),w.jsxs("button",{type:"button",onClick:()=>{a("storage"),ee("idle"),V(null)},className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${s==="storage"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:[w.jsx(tz,{className:"w-4 h-4"}),"Storage"]})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Connection Name"}),w.jsx("input",{type:"text",placeholder:s==="database"?"My Database":"My Storage",value:l,onChange:F=>c(F.target.value),className:"w-full px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-colors",autoFocus:!0})]}),s==="database"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Database Type"}),w.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:Object.keys(Q_).map(F=>{const A=IL[F];return w.jsx("button",{type:"button",onClick:()=>{d(F),ee("idle"),V(null)},className:`px-2 py-2 text-[10px] font-semibold rounded-lg border transition-all ${f===F?A.active:"bg-neutral-50 dark:bg-white/5 border-neutral-200 dark:border-white/10 text-neutral-500 hover:bg-neutral-100 dark:hover:bg-white/10"}`,children:A.label},F)})})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Connection String"}),w.jsx("input",{type:"text",placeholder:z.placeholder,value:m,onChange:F=>{p(F.target.value),ee("idle"),V(null)},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-colors"}),w.jsxs("p",{className:"text-[10px] text-neutral-400 dark:text-neutral-600",children:[z.label," connection string format"]})]})]}),s==="storage"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Storage Provider"}),w.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:Object.keys(Z_).map(F=>{const A=Z_[F];return w.jsx("button",{type:"button",onClick:()=>{y(F),ee("idle"),V(null)},className:`px-3 py-2 text-xs font-semibold rounded-lg border transition-all ${g===F?A.color:"bg-neutral-50 dark:bg-white/5 border-neutral-200 dark:border-white/10 text-neutral-500 hover:bg-neutral-100 dark:hover:bg-white/10"}`,children:A.label},F)})})]}),g==="s3"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Region"}),w.jsx("input",{type:"text",placeholder:"us-east-1",value:x,onChange:F=>{S(F.target.value),ee("idle")},className:"w-full px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Access Key ID"}),w.jsx("input",{type:"text",placeholder:"AKIAIOSFODNN7EXAMPLE",value:E,onChange:F=>{C(F.target.value),ee("idle")},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Secret Access Key"}),w.jsx("input",{type:"password",placeholder:"",value:k,onChange:F=>{R(F.target.value),ee("idle")},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsxs("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:["Custom Endpoint ",w.jsx("span",{className:"text-neutral-400",children:"(optional)"})]}),w.jsx("input",{type:"text",placeholder:"https://s3.example.com",value:N,onChange:F=>{j(F.target.value),ee("idle")},className:"w-full px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"}),w.jsx("p",{className:"text-[10px] text-neutral-400 dark:text-neutral-600",children:"For S3-compatible services like MinIO, Wasabi, etc."})]})]}),g==="azure-blob"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Storage Account Name"}),w.jsx("input",{type:"text",placeholder:"mystorageaccount",value:T,onChange:F=>{D(F.target.value),ee("idle")},className:"w-full px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsxs("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:["Account Key ",w.jsx("span",{className:"text-neutral-400",children:"(or use connection string)"})]}),w.jsx("input",{type:"password",placeholder:"",value:L,onChange:F=>{P(F.target.value),ee("idle")},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsxs("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:["Connection String ",w.jsx("span",{className:"text-neutral-400",children:"(alternative)"})]}),w.jsx("input",{type:"password",placeholder:"DefaultEndpointsProtocol=https;AccountName=...",value:M,onChange:F=>{B(F.target.value),ee("idle")},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]})]})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsxs("button",{type:"button",onClick:J,disabled:!I()||G==="testing",className:"flex items-center gap-2 px-3 py-2 text-xs font-medium text-neutral-700 dark:text-neutral-200 bg-neutral-100 dark:bg-white/5 hover:bg-neutral-200 dark:hover:bg-white/10 disabled:opacity-50 rounded-lg transition-colors",children:[G==="testing"?w.jsx(Ki,{className:"w-3.5 h-3.5 animate-spin text-neutral-500 dark:text-neutral-400"}):G==="success"?w.jsx(JN,{className:"w-3.5 h-3.5 text-blue-500"}):G==="error"?w.jsx(WN,{className:"w-3.5 h-3.5 text-red-500"}):w.jsx(Ez,{className:"w-3.5 h-3.5 text-neutral-500 dark:text-neutral-400"}),G==="testing"?"Testing...":"Test Connection"]}),G==="success"&&w.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:" Connection successful"}),G==="error"&&te&&w.jsx("p",{className:"text-xs text-red-500 dark:text-red-400 break-all",children:te})]}),w.jsxs("div",{className:"flex gap-2 pt-2",children:[w.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2.5 text-sm font-medium text-neutral-600 dark:text-neutral-400 bg-neutral-100 dark:bg-white/5 hover:bg-neutral-200 dark:hover:bg-white/10 rounded-xl transition-colors",children:"Cancel"}),w.jsx("button",{type:"submit",disabled:!I(),className:"flex-1 px-4 py-2.5 text-sm font-medium bg-blue-500 text-white rounded-xl hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:$?"Save Changes":"Add Connection"})]})]})]})]})}async function DL(t){const e=await fetch(`/storage/${encodeURIComponent(t)}/containers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to list containers")}return e.json()}async function jL(t,e){const n=await fetch(`/storage/${encodeURIComponent(t)}/containers/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to create container")}}async function Fd(t,e,n={}){const r=await fetch(`/storage/${encodeURIComponent(t)}/objects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({container:e,prefix:n.prefix||"",delimiter:n.delimiter??"/",maxKeys:n.maxKeys||1e3,continuationToken:n.continuationToken})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to list objects")}return r.json()}async function LL(t,e,n){const r=await fetch(`/storage/${encodeURIComponent(t)}/object/details`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({container:e,key:n})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to get object details")}return r.json()}async function PL(t,e,n,r=3600){const s=await fetch(`/storage/${encodeURIComponent(t)}/object/presign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({container:e,key:n,expiresIn:r})});if(!s.ok){const l=await s.json();throw new Error(l.message||"Failed to generate presigned URL")}return(await s.json()).url}async function $L(t,e,n,r){const s=new FormData;s.append("file",r),s.append("container",e),s.append("key",n);const a=await fetch(`/storage/${encodeURIComponent(t)}/upload`,{method:"POST",body:s});if(!a.ok){const l=await a.json();throw new Error(l.message||"Failed to upload file")}}async function rk(t,e,n){const r=await fetch(`/storage/${encodeURIComponent(t)}/object/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({container:e,keys:n})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to delete objects")}}async function sk(t,e,n){const r=await Fd(t,e,{prefix:n,delimiter:"",maxKeys:1e3});if(r.objects.length===0)return;const s=r.objects.map(a=>a.key);await rk(t,e,s),r.isTruncated&&await sk(t,e,n)}function FL(t){const e=t.split("/").filter(Boolean);return e.length<=1?"":e.slice(0,-1).join("/")}function gu(t){const e=t.split("/").filter(Boolean);return e[e.length-1]||t}function ik(t){if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB","TB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(2))} ${n[r]}`}function BL(t){const e=gu(t),n=e.lastIndexOf(".");return n>0?e.slice(n+1).toLowerCase():""}function ak(t){if(t.endsWith("/"))return"folder";const e=BL(t),n=["jpg","jpeg","png","gif","webp","svg","ico","bmp"],r=["pdf","doc","docx","xls","xlsx","ppt","pptx","txt","csv"],s=["js","ts","jsx","tsx","html","css","json","xml","yaml","yml","md","py","go","rs","java"],a=["zip","tar","gz","rar","7z","bz2"];return n.includes(e)?"image":r.includes(e)?"document":s.includes(e)?"code":a.includes(e)?"archive":"file"}function UL(t){return t?{"application/json":"JSON","application/xml":"XML","application/pdf":"PDF","application/zip":"ZIP Archive","application/gzip":"GZIP Archive","text/plain":"Plain Text","text/html":"HTML","text/css":"CSS","text/javascript":"JavaScript","image/jpeg":"JPEG Image","image/png":"PNG Image","image/gif":"GIF Image","image/webp":"WebP Image","image/svg+xml":"SVG Image"}[t]||t:"Unknown"}function qL(t){const e=tn.c(69),{connection:n,onClose:r}=t,s=po(),[a,l]=q.useState(""),c=n.amazonS3?"Bucket":"Container";let f;e[0]!==n.id?(f=F=>jL(n.id,F),e[0]=n.id,e[1]=f):f=e[1];let d;e[2]!==n.id||e[3]!==r||e[4]!==s?(d=()=>{s.invalidateQueries({queryKey:["storage-containers",n.id]}),r()},e[2]=n.id,e[3]=r,e[4]=s,e[5]=d):d=e[5];let m;e[6]!==f||e[7]!==d?(m={mutationFn:f,onSuccess:d},e[6]=f,e[7]=d,e[8]=m):m=e[8];const p=lu(m);let g;e[9]!==p||e[10]!==a?(g=F=>{F.preventDefault(),a.trim()&&p.mutate(a.trim())},e[9]=p,e[10]=a,e[11]=g):g=e[11];const y=g;let x;e[12]!==r?(x=w.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:r}),e[12]=r,e[13]=x):x=e[13];let S;e[14]===Symbol.for("react.memo_cache_sentinel")?(S=w.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:w.jsx(TE,{className:"w-4 h-4 text-blue-500"})}),e[14]=S):S=e[14];let E;e[15]!==c?(E=w.jsxs("div",{className:"flex items-center gap-3",children:[S,w.jsxs("h2",{className:"text-base font-semibold text-neutral-900 dark:text-neutral-100",children:["Create ",c]})]}),e[15]=c,e[16]=E):E=e[16];let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C=w.jsx(Cu,{className:"w-4 h-4 text-neutral-500"}),e[17]=C):C=e[17];let k;e[18]!==r?(k=w.jsx("button",{onClick:r,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:C}),e[18]=r,e[19]=k):k=e[19];let R;e[20]!==E||e[21]!==k?(R=w.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-neutral-200 dark:border-neutral-800",children:[E,k]}),e[20]=E,e[21]=k,e[22]=R):R=e[22];let N;e[23]!==n.name?(N=w.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Creating in ",w.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:n.name})]}),e[23]=n.name,e[24]=N):N=e[24];let j;e[25]!==c?(j=w.jsxs("label",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:[c," Name"]}),e[25]=c,e[26]=j):j=e[26];let T;e[27]===Symbol.for("react.memo_cache_sentinel")?(T=F=>l(F.target.value),e[27]=T):T=e[27];let D;e[28]!==c?(D=c.toLowerCase(),e[28]=c,e[29]=D):D=e[29];const L=`my-${D}`;let P;e[30]!==p.isPending||e[31]!==a||e[32]!==L?(P=w.jsx("input",{type:"text",value:a,onChange:T,placeholder:L,className:"w-full px-3 py-2 text-sm border border-neutral-200 dark:border-neutral-700 rounded-lg bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500",autoFocus:!0,disabled:p.isPending}),e[30]=p.isPending,e[31]=a,e[32]=L,e[33]=P):P=e[33];const M=n.amazonS3?"Bucket names must be globally unique and follow S3 naming rules":"Container names must be lowercase and can contain letters, numbers, and hyphens";let B;e[34]!==M?(B=w.jsx("p",{className:"text-[11px] text-neutral-400 dark:text-neutral-500",children:M}),e[34]=M,e[35]=B):B=e[35];let G;e[36]!==j||e[37]!==P||e[38]!==B?(G=w.jsxs("div",{className:"space-y-1.5",children:[j,P,B]}),e[36]=j,e[37]=P,e[38]=B,e[39]=G):G=e[39];let ee;e[40]!==p.error?(ee=p.error&&w.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:w.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:p.error instanceof Error?p.error.message:"Failed to create container"})}),e[40]=p.error,e[41]=ee):ee=e[41];let te;e[42]!==p.isPending||e[43]!==r?(te=w.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-lg transition-colors",disabled:p.isPending,children:"Cancel"}),e[42]=p.isPending,e[43]=r,e[44]=te):te=e[44];let V;e[45]!==p.isPending||e[46]!==a?(V=!a.trim()||p.isPending,e[45]=p.isPending,e[46]=a,e[47]=V):V=e[47];let $;e[48]!==p.isPending?($=p.isPending&&w.jsx(Ki,{className:"w-3.5 h-3.5 animate-spin"}),e[48]=p.isPending,e[49]=$):$=e[49];let J;e[50]!==c||e[51]!==V||e[52]!==$?(J=w.jsxs("button",{type:"submit",disabled:V,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors flex items-center gap-2",children:[$,"Create ",c]}),e[50]=c,e[51]=V,e[52]=$,e[53]=J):J=e[53];let ae;e[54]!==te||e[55]!==J?(ae=w.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[te,J]}),e[54]=te,e[55]=J,e[56]=ae):ae=e[56];let Q;e[57]!==y||e[58]!==N||e[59]!==G||e[60]!==ee||e[61]!==ae?(Q=w.jsxs("form",{onSubmit:y,className:"p-5 space-y-4",children:[N,G,ee,ae]}),e[57]=y,e[58]=N,e[59]=G,e[60]=ee,e[61]=ae,e[62]=Q):Q=e[62];let I;e[63]!==R||e[64]!==Q?(I=w.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-neutral-900 rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[R,Q]}),e[63]=R,e[64]=Q,e[65]=I):I=e[65];let z;return e[66]!==I||e[67]!==x?(z=w.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[x,I]}),e[66]=I,e[67]=x,e[68]=z):z=e[68],z}const HL={driver:"postgres",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT datname FROM pg_database WHERE datistemplate = false ORDER BY datname"},listTablesQuery(){return"SELECT tablename FROM pg_tables WHERE schemaname = 'public' ORDER BY tablename"},listColumnsQuery(t){return`
      SELECT 
        column_name as name,
        data_type as type,
        is_nullable = 'YES' as nullable,
        COALESCE(
          (SELECT true FROM information_schema.table_constraints tc
           JOIN information_schema.key_column_usage kcu ON tc.constraint_name = kcu.constraint_name
           WHERE tc.table_name = c.table_name AND kcu.column_name = c.column_name AND tc.constraint_type = 'PRIMARY KEY'),
          false
        ) as primary_key
      FROM information_schema.columns c
      WHERE table_name = '${t}' AND table_schema = 'public'
      ORDER BY ordinal_position
    `},selectAllQuery(t,e=100){return`SELECT * FROM ${t} LIMIT ${e}`},createDatabaseQuery(t){return`CREATE DATABASE "${t}"`},listConstraintsQuery(t){return`
      SELECT 
        tc.constraint_name,
        tc.constraint_type,
        kcu.column_name
      FROM information_schema.table_constraints tc
      LEFT JOIN information_schema.key_column_usage kcu 
        ON tc.constraint_name = kcu.constraint_name 
        AND tc.table_schema = kcu.table_schema
      WHERE tc.table_name = '${t}' 
        AND tc.table_schema = 'public'
      ORDER BY tc.constraint_name, kcu.ordinal_position
    `},listForeignKeysQuery(t){return`
      SELECT 
        tc.constraint_name,
        kcu.column_name,
        ccu.table_name AS foreign_table,
        ccu.column_name AS foreign_column
      FROM information_schema.table_constraints tc
      JOIN information_schema.key_column_usage kcu 
        ON tc.constraint_name = kcu.constraint_name
      JOIN information_schema.constraint_column_usage ccu 
        ON tc.constraint_name = ccu.constraint_name
      WHERE tc.table_name = '${t}' 
        AND tc.constraint_type = 'FOREIGN KEY'
        AND tc.table_schema = 'public'
      ORDER BY tc.constraint_name
    `},listIndexesQuery(t){return`
      SELECT 
        indexname AS index_name,
        indexdef AS definition
      FROM pg_indexes 
      WHERE tablename = '${t}'
        AND schemaname = 'public'
      ORDER BY indexname
    `},modifyDsnForDatabase(t,e){const n=new URL(t);return n.pathname=`/${e}`,n.toString()},parseDatabaseNames(t){return t.map(e=>String(e.datname))},parseTableNames(t){return t.map(e=>String(e.tablename))},parseColumns(t){return t.map(e=>({name:String(e.name),type:String(e.type),nullable:!!e.nullable,primaryKey:!!e.primary_key}))}},VL={driver:"mysql",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SHOW DATABASES"},listTablesQuery(){return"SHOW TABLES"},listColumnsQuery(t){return`DESCRIBE ${t}`},selectAllQuery(t,e=100){return`SELECT * FROM ${t} LIMIT ${e}`},createDatabaseQuery(t){return`CREATE DATABASE \`${t}\``},listConstraintsQuery(t){return`
      SELECT 
        tc.CONSTRAINT_NAME AS constraint_name,
        tc.CONSTRAINT_TYPE AS constraint_type,
        kcu.COLUMN_NAME AS column_name
      FROM information_schema.TABLE_CONSTRAINTS tc
      LEFT JOIN information_schema.KEY_COLUMN_USAGE kcu 
        ON tc.CONSTRAINT_NAME = kcu.CONSTRAINT_NAME 
        AND tc.TABLE_SCHEMA = kcu.TABLE_SCHEMA
        AND tc.TABLE_NAME = kcu.TABLE_NAME
      WHERE tc.TABLE_NAME = '${t}'
        AND tc.TABLE_SCHEMA = DATABASE()
      ORDER BY tc.CONSTRAINT_NAME, kcu.ORDINAL_POSITION
    `},listForeignKeysQuery(t){return`
      SELECT 
        kcu.CONSTRAINT_NAME AS constraint_name,
        kcu.COLUMN_NAME AS column_name,
        kcu.REFERENCED_TABLE_NAME AS foreign_table,
        kcu.REFERENCED_COLUMN_NAME AS foreign_column
      FROM information_schema.KEY_COLUMN_USAGE kcu
      WHERE kcu.TABLE_NAME = '${t}'
        AND kcu.TABLE_SCHEMA = DATABASE()
        AND kcu.REFERENCED_TABLE_NAME IS NOT NULL
      ORDER BY kcu.CONSTRAINT_NAME
    `},listIndexesQuery(t){return`SHOW INDEX FROM ${t}`},modifyDsnForDatabase(t,e){const n=t.split("/");return n.length>1?(n[n.length-1]=e,n.join("/")):`${t}/${e}`},parseDatabaseNames(t){return t.map(e=>String(e.Database||Object.values(e)[0]))},parseTableNames(t,e){return t.map(n=>{const r=n[`Tables_in_${e}`]||Object.values(n)[0];return String(r)})},parseColumns(t){return t.map(e=>({name:String(e.Field),type:String(e.Type),nullable:e.Null==="YES",primaryKey:e.Key==="PRI"}))}},KL={driver:"sqlite",supportedTableViews(){return["records","columns","indexes"]},listDatabasesQuery(){return"SELECT 'main' as name"},listTablesQuery(){return"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%' ORDER BY name"},listColumnsQuery(t){return`PRAGMA table_info(${t})`},selectAllQuery(t,e=100){return`SELECT * FROM ${t} LIMIT ${e}`},createDatabaseQuery(){return null},listIndexesQuery(t){return`PRAGMA index_list(${t})`},modifyDsnForDatabase(t){return t},parseDatabaseNames(t){return t.map(e=>String(e.name))},parseTableNames(t){return t.map(e=>String(e.name))},parseColumns(t){return t.map(e=>({name:String(e.name),type:String(e.type||"TEXT"),nullable:e.notnull===0,primaryKey:e.pk===1}))}},GL={driver:"sqlserver",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT name FROM sys.databases WHERE name NOT IN ('tempdb', 'model') ORDER BY name"},listTablesQuery(){return"SELECT TABLE_NAME as name FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' ORDER BY TABLE_NAME"},listColumnsQuery(t){return`
      SELECT 
        c.COLUMN_NAME as name,
        c.DATA_TYPE as type,
        CASE WHEN c.IS_NULLABLE = 'YES' THEN 1 ELSE 0 END as nullable,
        CASE WHEN pk.COLUMN_NAME IS NOT NULL THEN 1 ELSE 0 END as primary_key
      FROM INFORMATION_SCHEMA.COLUMNS c
      LEFT JOIN (
        SELECT ku.COLUMN_NAME
        FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc
        JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE ku ON tc.CONSTRAINT_NAME = ku.CONSTRAINT_NAME
        WHERE tc.TABLE_NAME = '${t}' AND tc.CONSTRAINT_TYPE = 'PRIMARY KEY'
      ) pk ON c.COLUMN_NAME = pk.COLUMN_NAME
      WHERE c.TABLE_NAME = '${t}'
      ORDER BY c.ORDINAL_POSITION
    `},selectAllQuery(t,e=100){return`SELECT TOP ${e} * FROM ${t}`},createDatabaseQuery(t){return`CREATE DATABASE [${t}]`},listConstraintsQuery(t){return`
      SELECT 
        tc.CONSTRAINT_NAME AS constraint_name,
        tc.CONSTRAINT_TYPE AS constraint_type,
        kcu.COLUMN_NAME AS column_name
      FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc
      LEFT JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE kcu 
        ON tc.CONSTRAINT_NAME = kcu.CONSTRAINT_NAME
      WHERE tc.TABLE_NAME = '${t}'
      ORDER BY tc.CONSTRAINT_NAME, kcu.ORDINAL_POSITION
    `},listForeignKeysQuery(t){return`
      SELECT 
        fk.name AS constraint_name,
        COL_NAME(fkc.parent_object_id, fkc.parent_column_id) AS column_name,
        OBJECT_NAME(fkc.referenced_object_id) AS foreign_table,
        COL_NAME(fkc.referenced_object_id, fkc.referenced_column_id) AS foreign_column
      FROM sys.foreign_keys fk
      JOIN sys.foreign_key_columns fkc ON fk.object_id = fkc.constraint_object_id
      WHERE OBJECT_NAME(fk.parent_object_id) = '${t}'
      ORDER BY fk.name
    `},listIndexesQuery(t){return`
      SELECT 
        i.name AS index_name,
        i.type_desc AS index_type,
        i.is_unique,
        i.is_primary_key,
        STRING_AGG(c.name, ', ') AS columns
      FROM sys.indexes i
      JOIN sys.index_columns ic ON i.object_id = ic.object_id AND i.index_id = ic.index_id
      JOIN sys.columns c ON ic.object_id = c.object_id AND ic.column_id = c.column_id
      WHERE OBJECT_NAME(i.object_id) = '${t}' AND i.name IS NOT NULL
      GROUP BY i.name, i.type_desc, i.is_unique, i.is_primary_key
      ORDER BY i.name
    `},modifyDsnForDatabase(t,e){const n=new URL(t);return n.searchParams.set("database",e),n.toString()},parseDatabaseNames(t){return t.map(e=>String(e.name))},parseTableNames(t){return t.map(e=>String(e.name))},parseColumns(t){return t.map(e=>({name:String(e.name),type:String(e.type),nullable:!!e.nullable,primaryKey:!!e.primary_key}))}},QL={driver:"oracle",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT SYS_CONTEXT('USERENV', 'CON_NAME') as name FROM DUAL"},listTablesQuery(){return`
      SELECT table_name as name 
      FROM user_tables 
      WHERE table_name NOT LIKE 'LOGMNR%' 
        AND table_name NOT LIKE 'AQ$%'
        AND table_name NOT LIKE 'MVIEW$%'
        AND table_name NOT LIKE 'LOGSTDBY$%'
        AND table_name NOT LIKE 'ROLLING$%'
        AND table_name NOT LIKE 'SCHEDULER_%'
        AND table_name NOT IN ('OL$', 'OL$HINTS', 'OL$NODES', 'REDO_DB', 'REDO_LOG', 'HELP', 
                                'REPL_SUPPORT_MATRIX', 'REPL_VALID_COMPAT', 'SQLPLUS_PRODUCT_PROFILE')
      ORDER BY table_name
    `},listColumnsQuery(t){return`
      SELECT 
        c.column_name as name,
        c.data_type as type,
        CASE WHEN c.nullable = 'Y' THEN 1 ELSE 0 END as nullable,
        CASE WHEN cc.column_name IS NOT NULL THEN 1 ELSE 0 END as primary_key
      FROM user_tab_columns c
      LEFT JOIN (
        SELECT cc.column_name
        FROM user_constraints con
        JOIN user_cons_columns cc ON con.constraint_name = cc.constraint_name
        WHERE con.table_name = UPPER('${t}') AND con.constraint_type = 'P'
      ) cc ON c.column_name = cc.column_name
      WHERE c.table_name = UPPER('${t}')
      ORDER BY c.column_id
    `},selectAllQuery(t,e=100){return`SELECT * FROM ${t} FETCH FIRST ${e} ROWS ONLY`},createDatabaseQuery(){return null},listConstraintsQuery(t){return`
      SELECT 
        con.constraint_name,
        con.constraint_type,
        col.column_name
      FROM user_constraints con
      LEFT JOIN user_cons_columns col 
        ON con.constraint_name = col.constraint_name
      WHERE con.table_name = UPPER('${t}')
      ORDER BY con.constraint_name, col.position
    `},listForeignKeysQuery(t){return`
      SELECT 
        a.constraint_name,
        a.column_name,
        c_pk.table_name AS foreign_table,
        b.column_name AS foreign_column
      FROM user_cons_columns a
      JOIN user_constraints c ON a.constraint_name = c.constraint_name
      JOIN user_constraints c_pk ON c.r_constraint_name = c_pk.constraint_name
      JOIN user_cons_columns b ON c_pk.constraint_name = b.constraint_name AND a.position = b.position
      WHERE c.constraint_type = 'R'
        AND c.table_name = UPPER('${t}')
      ORDER BY a.constraint_name
    `},listIndexesQuery(t){return`
      SELECT 
        index_name,
        uniqueness,
        index_type
      FROM user_indexes
      WHERE table_name = UPPER('${t}')
      ORDER BY index_name
    `},modifyDsnForDatabase(t){return t},parseDatabaseNames(t){return t.map(e=>{const n=e.name??e.NAME;return String(n??Object.values(e)[0])})},parseTableNames(t){return t.map(e=>{const n=e.name??e.NAME??e.TABLE_NAME;return String(n??Object.values(e)[0])})},parseColumns(t){return t.map(e=>({name:String(e.name??e.NAME),type:String(e.type??e.TYPE??e.DATA_TYPE),nullable:!!(e.nullable??e.NULLABLE),primaryKey:!!(e.primary_key??e.PRIMARY_KEY)}))}},ZL={postgres:HL,mysql:VL,sqlite:KL,sqlserver:GL,oracle:QL};function oi(t){const e=ZL[t];if(!e)throw new Error(`Unsupported driver: ${t}`);return e}async function Tu(t,e){const n=await fetch(`/sql/${encodeURIComponent(t)}/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,params:[]})});if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(r.message||`HTTP error: ${n.status}`)}return n.json()}async function Yl(t,e){const n=await fetch(`/sql/${encodeURIComponent(t)}/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,params:[]})});if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(r.message||`HTTP error: ${n.status}`)}return n.json()}function YL(t){const e=t.trim().toUpperCase(),n=["SELECT","WITH","SHOW","DESCRIBE","EXPLAIN","PRAGMA"];for(const r of n)if(e.startsWith(r))return!0;return e.includes("RETURNING")}async function JL(t,e){return YL(e)?Tu(t,e):Yl(t,e)}async function XL(t,e){const n=oi(e),r=n.listDatabasesQuery(),s=await Tu(t,r);return n.parseDatabaseNames(s.rows||[])}async function ok(t,e,n){const r=oi(e),s=r.listTablesQuery(),a=await Tu(t,s);return r.parseTableNames(a.rows||[],n)}async function WL(t,e,n){const r=oi(e),s=r.listColumnsQuery(n),a=await Tu(t,s);return r.parseColumns(a.rows||[])}function cy(t,e,n=100){return oi(e).selectAllQuery(t,n)}async function e5(t,e,n){const s=oi(e).createDatabaseQuery(n);if(!s)throw new Error(`Creating databases is not supported for ${e}`);await Yl(t,s)}function t5(t){return oi(t).createDatabaseQuery("test")!==null}function n5(t){return oi(t).supportedTableViews()}function r5(t,e,n){const r=oi(t);switch(n){case"records":return r.selectAllQuery(e);case"columns":return r.listColumnsQuery(e);case"constraints":return r.listConstraintsQuery?.(e)??null;case"foreignKeys":return r.listForeignKeysQuery?.(e)??null;case"indexes":return r.listIndexesQuery?.(e)??null;default:return null}}function s5({connection:t,expanded:e,onToggle:n,onSelectDatabase:r,onSelectTable:s}){const a=Ji({strict:!1}),l=a.connectionId===t.id,c=l?a.database??null:null,f=l?a.table??null:null,d=po(),[m,p]=q.useState({open:!1}),[g,y]=q.useState(""),[x,S]=q.useState(null),[E,C]=q.useState(!1),{data:k}=ys({queryKey:["databases",t.id],queryFn:()=>XL(t.id,t.sql.driver),enabled:!!t&&!!t.sql}),{data:R}=ys({queryKey:["tables",t.id,c],queryFn:()=>c?ok(t.id,t.sql.driver,c):[],enabled:!!t&&!!t.sql&&!!c}),N=async()=>{if(g.trim()){C(!0),S(null);try{await e5(t.id,t.sql.driver,g.trim()),await d.invalidateQueries({queryKey:["databases",t.id]}),p({open:!1}),y("")}catch(j){S(j instanceof Error?j.message:"Failed to create database")}finally{C(!1)}}};return w.jsxs(w.Fragment,{children:[m.open&&w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:w.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] rounded-xl border border-neutral-200 dark:border-white/10 p-4 w-80 shadow-xl",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx(cu,{className:"w-5 h-5 text-blue-500"}),w.jsx("h2",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"Create Database"})]}),w.jsx("input",{type:"text",value:g,onChange:j=>y(j.target.value),placeholder:"Database name",className:"w-full px-3 py-2 text-sm rounded-lg border border-neutral-200 dark:border-white/10 bg-neutral-50 dark:bg-white/5 text-neutral-700 dark:text-neutral-200 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50",autoFocus:!0,onKeyDown:j=>{j.key==="Enter"&&g.trim()?N():j.key==="Escape"&&(p({open:!1}),y(""),S(null))}}),x&&w.jsx("p",{className:"mt-2 text-xs text-red-500",children:x}),w.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4",children:[w.jsx("button",{onClick:()=>{p({open:!1}),y(""),S(null)},className:"px-3 py-1.5 text-xs rounded-lg text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:"Cancel"}),w.jsx("button",{onClick:N,disabled:E||!g.trim(),className:"px-3 py-1.5 text-xs rounded-lg bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:E?"Creating...":"Create"})]})]})}),w.jsxs("div",{className:"space-y-0.5",children:[k?.map(j=>{const T=c===j,D=e.has(`${t.id}:${j}`);return w.jsxs("div",{children:[w.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>{n(`${t.id}:${j}`),r(j)},children:[w.jsx(cu,{className:`w-3.5 h-3.5 shrink-0 ${T?"text-blue-500":"text-neutral-400 dark:text-neutral-500"}`}),w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",children:j})]}),D&&T&&R&&w.jsxs("div",{className:"ml-4 space-y-0.5",children:[R.map(L=>w.jsxs("div",{className:`group flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-colors ${f===L?"bg-blue-500/10 dark:bg-blue-500/20":"hover:bg-neutral-100 dark:hover:bg-white/5"}`,onClick:()=>s(j,L),children:[w.jsx(Lz,{className:`w-3.5 h-3.5 shrink-0 ${f===L?"text-blue-500":"text-neutral-400 dark:text-neutral-500"}`}),w.jsx("span",{className:`text-xs truncate flex-1 ${f===L?"text-blue-600 dark:text-blue-400":"text-neutral-500 dark:text-neutral-400"}`,children:L})]},L)),R.length===0&&w.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"No tables"})]})]},j)}),(!k||k.length===0)&&w.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"No databases"}),t.sql&&t5(t.sql.driver)&&w.jsxs("button",{onClick:j=>{j.stopPropagation(),p({open:!0})},className:"flex items-center gap-2 px-3 py-1.5 w-full rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors text-left",children:[w.jsx(jd,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500"}),w.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"New database"})]})]})]})}function i5(t){const e=tn.c(41),{connection:n,expanded:r,onToggle:s,onSelectContainer:a,onSelectPath:l,onCreateContainer:c}=t;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={strict:!1},e[0]=f):f=e[0];const d=Ji(f),m=d.connectionId===n.id,p=d.container??null,g=d._splat||"";let y,x;e[1]!==n.id?(y=["storage-containers",n.id],x=()=>DL(n.id),e[1]=n.id,e[2]=y,e[3]=x):(y=e[2],x=e[3]);const S=!!n;let E;e[4]!==y||e[5]!==x||e[6]!==S?(E={queryKey:y,queryFn:x,enabled:S},e[4]=y,e[5]=x,e[6]=S,e[7]=E):E=e[7];const{data:C,isLoading:k}=ys(E);let R;e[8]!==p||e[9]!==n.id||e[10]!==r?(R=p?r.has(`container:${n.id}:${p}`):!1,e[8]=p,e[9]=n.id,e[10]=r,e[11]=R):R=e[11];const N=R;let j,T;e[12]!==p||e[13]!==n.id?(j=["storage-objects",n.id,p,""],T=()=>Fd(n.id,p,{prefix:"",delimiter:"/"}),e[12]=p,e[13]=n.id,e[14]=j,e[15]=T):(j=e[14],T=e[15]);const D=!!n&&!!p&&N;let L;e[16]!==j||e[17]!==T||e[18]!==D?(L={queryKey:j,queryFn:T,enabled:D},e[16]=j,e[17]=T,e[18]=D,e[19]=L):L=e[19];const{data:P}=ys(L);let M;e[20]!==p||e[21]!==g||e[22]!==n||e[23]!==C||e[24]!==k||e[25]!==r||e[26]!==m||e[27]!==a||e[28]!==l||e[29]!==s||e[30]!==P?(M=k?w.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"Loading containers..."}):C&&C.length>0?C.map($=>{const J=m&&p===$.name,ae=r.has(`container:${n.id}:${$.name}`);return w.jsxs("div",{children:[w.jsxs("div",{className:`group flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-colors ${J?"bg-blue-500/10 dark:bg-blue-500/20":"hover:bg-neutral-100 dark:hover:bg-white/5"}`,onClick:()=>{s(`container:${n.id}:${$.name}`),a($.name)},children:[ae?w.jsx(Bi,{className:"w-3 h-3 text-neutral-400 shrink-0"}):w.jsx(u0,{className:"w-3 h-3 text-neutral-400 shrink-0"}),w.jsx(TE,{className:`w-3.5 h-3.5 shrink-0 ${J?"text-blue-500":"text-neutral-400"}`}),w.jsx("span",{className:`text-xs truncate flex-1 ${J?"text-blue-600 dark:text-blue-400":"text-neutral-500 dark:text-neutral-400"}`,children:$.name})]}),ae&&J&&P&&w.jsx("div",{className:"ml-4",children:w.jsx(lk,{connection:n,container:$.name,prefixes:P.prefixes,activePath:g,expanded:r,onToggle:s,onSelectPath:l})})]},$.name)}):w.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"No containers found"}),e[20]=p,e[21]=g,e[22]=n,e[23]=C,e[24]=k,e[25]=r,e[26]=m,e[27]=a,e[28]=l,e[29]=s,e[30]=P,e[31]=M):M=e[31];let B;e[32]!==c?(B=$=>{$.stopPropagation(),c()},e[32]=c,e[33]=B):B=e[33];let G,ee;e[34]===Symbol.for("react.memo_cache_sentinel")?(G=w.jsx(jd,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500"}),ee=w.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"New container"}),e[34]=G,e[35]=ee):(G=e[34],ee=e[35]);let te;e[36]!==B?(te=w.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-3 py-1.5 w-full rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors text-left",children:[G,ee]}),e[36]=B,e[37]=te):te=e[37];let V;return e[38]!==M||e[39]!==te?(V=w.jsxs("div",{className:"space-y-0.5",children:[M,te]}),e[38]=M,e[39]=te,e[40]=V):V=e[40],V}function lk(t){const e=tn.c(17),{connection:n,container:r,prefixes:s,activePath:a,expanded:l,onToggle:c,onSelectPath:f}=t;if(s.length===0)return null;let d;if(e[0]!==a||e[1]!==n||e[2]!==r||e[3]!==l||e[4]!==f||e[5]!==c||e[6]!==s){let p;e[8]!==a||e[9]!==n||e[10]!==r||e[11]!==l||e[12]!==f||e[13]!==c?(p=g=>w.jsx(a5,{connection:n,container:r,prefix:g,activePath:a,expanded:l,onToggle:c,onSelectPath:f},g),e[8]=a,e[9]=n,e[10]=r,e[11]=l,e[12]=f,e[13]=c,e[14]=p):p=e[14],d=s.map(p),e[0]=a,e[1]=n,e[2]=r,e[3]=l,e[4]=f,e[5]=c,e[6]=s,e[7]=d}else d=e[7];let m;return e[15]!==d?(m=w.jsx("div",{className:"space-y-0.5",children:d}),e[15]=d,e[16]=m):m=e[16],m}function a5(t){const e=tn.c(45),{connection:n,container:r,prefix:s,activePath:a,expanded:l,onToggle:c,onSelectPath:f}=t,d=`folder:${n.id}:${r}:${s}`;let m;e[0]!==l||e[1]!==d?(m=l.has(d),e[0]=l,e[1]=d,e[2]=m):m=e[2];const p=m,g=s.replace(/^\/+/,""),x=a.replace(/^\/+/,"")===g;let S,E;e[3]!==n.id||e[4]!==r||e[5]!==s?(S=["storage-objects",n.id,r,s],E=()=>Fd(n.id,r,{prefix:s,delimiter:"/"}),e[3]=n.id,e[4]=r,e[5]=s,e[6]=S,e[7]=E):(S=e[6],E=e[7]);let C;e[8]!==p||e[9]!==S||e[10]!==E?(C={queryKey:S,queryFn:E,enabled:p},e[8]=p,e[9]=S,e[10]=E,e[11]=C):C=e[11];const{data:k}=ys(C);let R;e[12]!==s?(R=gu(s),e[12]=s,e[13]=R):R=e[13];const N=R,j=`group flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-colors ${x?"bg-blue-500/10 dark:bg-blue-500/20":"hover:bg-neutral-100 dark:hover:bg-white/5"}`;let T;e[14]!==r||e[15]!==d||e[16]!==f||e[17]!==c||e[18]!==s?(T=()=>{c(d),f(r,s)},e[14]=r,e[15]=d,e[16]=f,e[17]=c,e[18]=s,e[19]=T):T=e[19];let D;e[20]!==p?(D=p?w.jsx(Bi,{className:"w-3 h-3 text-neutral-400 shrink-0"}):w.jsx(u0,{className:"w-3 h-3 text-neutral-400 shrink-0"}),e[20]=p,e[21]=D):D=e[21];const L=`w-3.5 h-3.5 shrink-0 ${x?"text-blue-500":"text-neutral-400"}`;let P;e[22]!==L?(P=w.jsx(ME,{className:L}),e[22]=L,e[23]=P):P=e[23];const M=`text-xs truncate flex-1 ${x?"text-blue-600 dark:text-blue-400":"text-neutral-500 dark:text-neutral-400"}`;let B;e[24]!==N||e[25]!==M?(B=w.jsx("span",{className:M,children:N}),e[24]=N,e[25]=M,e[26]=B):B=e[26];let G;e[27]!==P||e[28]!==B||e[29]!==j||e[30]!==T||e[31]!==D?(G=w.jsxs("div",{className:j,onClick:T,children:[D,P,B]}),e[27]=P,e[28]=B,e[29]=j,e[30]=T,e[31]=D,e[32]=G):G=e[32];let ee;e[33]!==a||e[34]!==n||e[35]!==r||e[36]!==l||e[37]!==p||e[38]!==f||e[39]!==c||e[40]!==k?(ee=p&&k&&k.prefixes.length>0&&w.jsx("div",{className:"ml-4",children:w.jsx(lk,{connection:n,container:r,prefixes:k.prefixes,activePath:a,expanded:l,onToggle:c,onSelectPath:f})}),e[33]=a,e[34]=n,e[35]=r,e[36]=l,e[37]=p,e[38]=f,e[39]=c,e[40]=k,e[41]=ee):ee=e[41];let te;return e[42]!==G||e[43]!==ee?(te=w.jsxs("div",{children:[G,ee]}),e[42]=G,e[43]=ee,e[44]=te):te=e[44],te}function Bd(t){return t.sql!=null}function uk(t){return t.amazonS3!=null||t.azureBlob!=null}const Jm={postgres:"text-blue-600 dark:text-blue-400",mysql:"text-yellow-600 dark:text-yellow-400",sqlite:"text-purple-600 dark:text-purple-400",sqlserver:"text-red-600 dark:text-red-400",oracle:"text-orange-600 dark:text-orange-400",s3:"text-orange-600 dark:text-orange-400","azure-blob":"text-blue-600 dark:text-blue-400"};function o5(t){const e=tn.c(54),{showAddModal:n,onAddModalClose:r}=t,s=n===void 0?!1:n;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={strict:!1},e[0]=a):a=e[0];const l=Ji(a),c=_u();let f;e[1]!==c?(f=me=>{c(me?{to:`/${me}`}:{to:"/"})},e[1]=c,e[2]=f):f=e[2];const d=f;let m;e[3]!==c?(m=(me,Ee)=>{c({to:`/${me}/${Ee}`})},e[3]=c,e[4]=m):m=e[4];const p=m;let g;e[5]!==c?(g=(me,Ee,Oe)=>{c({to:`/${me}/${Ee}/${Oe}`})},e[5]=c,e[6]=g):g=e[6];const y=g;let x;e[7]!==c?(x=(me,Ee)=>{c({to:`/${me}/container/${Ee}`})},e[7]=c,e[8]=x):x=e[8];const S=x;let E;e[9]!==c?(E=(me,Ee,Oe)=>{const Ze=Oe.replace(/^\/+/,"");c({to:`/${me}/container/${Ee}/${Ze}`})},e[9]=c,e[10]=E):E=e[10];const C=E,k=ek(c5);let R;e[11]===Symbol.for("react.memo_cache_sentinel")?(R={open:!1},e[11]=R):R=e[11];const[N,j]=q.useState(R),[T,D]=q.useState(null);let L;e[12]===Symbol.for("react.memo_cache_sentinel")?(L=new Set,e[12]=L):L=e[12];const[P,M]=q.useState(L);let B;if(e[13]!==l._splat||e[14]!==l.connectionId||e[15]!==l.container||e[16]!==l.database){e:{const me=new Set,Ee=l.connectionId,Oe=l.database,Ze=l.container,Le=l._splat||"";if(!Ee){B=me;break e}if(me.add(Ee),Oe&&me.add(`${Ee}:${Oe}`),Ze&&me.add(`container:${Ee}:${Ze}`),Ze&&Le){const Ye=Le.split("/").filter(Boolean);let it="";for(const Je of Ye)it=it?`${it}/${Je}`:Je,it!==Le.replace(/\/$/,"")&&me.add(`folder:${Ee}:${Ze}:${it}/`)}B=me}e[13]=l._splat,e[14]=l.connectionId,e[15]=l.container,e[16]=l.database,e[17]=B}else B=e[17];const G=B;let ee;e[18]!==P||e[19]!==G?(ee=new Set([...G,...P]),e[18]=P,e[19]=G,e[20]=ee):ee=e[20];const te=ee;let V;e[21]!==G?(V=me=>{M(Ee=>{const Oe=new Set(Ee);if(Oe.has(me))Oe.delete(me);else{if(G.has(me))return Ee;Oe.add(me)}return Oe})},e[21]=G,e[22]=V):V=e[22];const $=V;let J;e[23]!==N.connection||e[24]!==d?(J=me=>{if(N.connection)Zl.update(N.connection.id,Ee=>{Object.assign(Ee,me)});else{const Ee=crypto.randomUUID(),Oe={...me,id:Ee,createdAt:new Date().toISOString()};Zl.insert(Oe),d(Ee),M(Ze=>new Set(Ze).add(Ee))}j({open:!1})},e[23]=N.connection,e[24]=d,e[25]=J):J=e[25];const ae=J;let Q;e[26]!==d||e[27]!==l?(Q=me=>{Zl.delete(me),l.connectionId===me&&d(null)},e[26]=d,e[27]=l,e[28]=Q):Q=e[28];const I=Q,z=u5,F=l5;let A;e[29]!==N.connection||e[30]!==N.open||e[31]!==r||e[32]!==ae||e[33]!==s?(A=(N.open||s)&&w.jsx(zL,{connection:N.connection,onSave:ae,onClose:()=>{j({open:!1}),r?.()}}),e[29]=N.connection,e[30]=N.open,e[31]=r,e[32]=ae,e[33]=s,e[34]=A):A=e[34];let se;e[35]!==T?(se=T&&w.jsx(qL,{connection:T,onClose:()=>D(null)}),e[35]=T,e[36]=se):se=e[36];let ue;e[37]===Symbol.for("react.memo_cache_sentinel")?(ue=w.jsx("h1",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 pl-0.5",children:"Granite"}),e[37]=ue):ue=e[37];let fe;e[38]===Symbol.for("react.memo_cache_sentinel")?(fe=()=>j({open:!0,connection:null}),e[38]=fe):fe=e[38];let ve;e[39]===Symbol.for("react.memo_cache_sentinel")?(ve=w.jsxs("div",{className:"px-3 py-2.5 flex items-center justify-between gap-2",children:[ue,w.jsx("div",{className:"flex items-center gap-1",children:w.jsx("button",{onClick:fe,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Add connection",children:w.jsx(jd,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"})})})]}),e[39]=ve):ve=e[39];let Te;e[40]!==k?.data||e[41]!==I||e[42]!==te||e[43]!==d||e[44]!==S||e[45]!==p||e[46]!==C||e[47]!==y||e[48]!==$?(Te=w.jsxs("aside",{className:"w-64 bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl flex flex-col overflow-hidden dark:shadow-2xl",children:[ve,w.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:(k?.data??[]).length===0?w.jsx("div",{className:"px-2 py-8 text-center text-neutral-400 dark:text-neutral-600 text-xs",children:"No connections yet"}):w.jsx("div",{className:"space-y-0.5 pb-2",children:(k?.data??[]).map(me=>{const Ee=te.has(me.id),Oe=Bd(me),Ze=uk(me);return w.jsxs("div",{children:[w.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>{d(me.id),$(me.id)},children:[Oe?w.jsx(cu,{className:`w-3 h-3 shrink-0 ${F(me)}`}):w.jsx(NE,{className:`w-3 h-3 shrink-0 ${F(me)}`}),w.jsx("span",{className:`text-[10px] font-semibold shrink-0 uppercase ${F(me)}`,children:z(me)}),w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",children:me.name}),w.jsxs("div",{className:"flex items-center gap-0.5",children:[w.jsx("button",{onClick:Le=>{Le.stopPropagation(),j({open:!0,connection:me})},className:"inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-colors",title:"Edit",children:w.jsx(Sz,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-blue-500 dark:hover:text-blue-400"})}),w.jsx("button",{onClick:Le=>{Le.stopPropagation(),I(me.id)},className:"inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-colors",title:"Delete",children:w.jsx(fu,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400"})})]})]}),Ee&&Oe&&w.jsx("div",{className:"ml-4",children:w.jsx(s5,{connection:me,expanded:te,onToggle:$,onSelectDatabase:Le=>p(me.id,Le),onSelectTable:(Le,Ye)=>y(me.id,Le,Ye)})}),Ee&&Ze&&w.jsx("div",{className:"ml-4",children:w.jsx(i5,{connection:me,expanded:te,onToggle:$,onSelectContainer:Le=>S(me.id,Le),onSelectPath:(Le,Ye)=>C(me.id,Le,Ye),onCreateContainer:()=>D(me)})})]},me.id)})})})]}),e[40]=k?.data,e[41]=I,e[42]=te,e[43]=d,e[44]=S,e[45]=p,e[46]=C,e[47]=y,e[48]=$,e[49]=Te):Te=e[49];let _e;return e[50]!==A||e[51]!==se||e[52]!==Te?(_e=w.jsxs(w.Fragment,{children:[A,se,Te]}),e[50]=A,e[51]=se,e[52]=Te,e[53]=_e):_e=e[53],_e}function l5(t){return Bd(t)&&t.sql?Jm[t.sql.driver]||"text-neutral-500":t.amazonS3?Jm.s3:t.azureBlob?Jm["azure-blob"]:"text-neutral-500"}function u5(t){if(Bd(t)&&t.sql)switch(t.sql.driver){case"postgres":return"PG";case"mysql":return"MY";case"sqlserver":return"MS";case"oracle":return"OR";case"sqlite":return"SQ";default:return"DB"}else{if(t.amazonS3)return"S3";if(t.azureBlob)return"AZ"}return"??"}function c5(t){return t.from({conn:Zl}).orderBy(f5,"desc")}function f5(t){const{conn:e}=t;return e.createdAt}function Y_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function d5(t){if(Array.isArray(t))return t}function h5(t,e,n){return(e=x5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p5(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,l,c=[],f=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(f=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);f=!0);}catch(m){d=!0,s=m}finally{try{if(!f&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}}function m5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function X_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J_(Object(n),!0).forEach(function(r){h5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g5(t,e){if(t==null)return{};var n,r,s=y5(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function y5(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function v5(t,e){return d5(t)||p5(t,e)||S5(t,e)||m5()}function b5(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function x5(t){var e=b5(t,"string");return typeof e=="symbol"?e:e+""}function S5(t,e){if(t){if(typeof t=="string")return Y_(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y_(t,e):void 0}}function w5(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function e1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W_(Object(n),!0).forEach(function(r){w5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _5(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(s,a){return a(s)},r)}}function Nl(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return s.length>=t.length?t.apply(this,s):function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return e.apply(n,[].concat(s,c))}}}function dd(t){return{}.toString.call(t).includes("Object")}function C5(t){return!Object.keys(t).length}function yu(t){return typeof t=="function"}function E5(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function k5(t,e){return dd(e)||ri("changeType"),Object.keys(e).some(function(n){return!E5(t,n)})&&ri("changeField"),e}function R5(t){yu(t)||ri("selectorType")}function T5(t){yu(t)||dd(t)||ri("handlerType"),dd(t)&&Object.values(t).some(function(e){return!yu(e)})&&ri("handlersType")}function A5(t){t||ri("initialIsRequired"),dd(t)||ri("initialType"),C5(t)&&ri("initialContent")}function O5(t,e){throw new Error(t[e]||t.default)}var M5={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},ri=Nl(O5)(M5),cf={changes:k5,selector:R5,handler:T5,initial:A5};function I5(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};cf.initial(t),cf.handler(e);var n={current:t},r=Nl(D5)(n,e),s=Nl(z5)(n),a=Nl(cf.changes)(t),l=Nl(N5)(n);function c(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(m){return m};return cf.selector(d),d(n.current)}function f(d){_5(r,s,a,l)(d)}return[c,f]}function N5(t,e){return yu(e)?e(t.current):e}function z5(t,e){return t.current=e1(e1({},t.current),e),e}function D5(t,e,n){return yu(e)?e(t.current):Object.keys(n).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,t.current[r])}),n}var j5={create:I5},L5={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function P5(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return s.length>=t.length?t.apply(this,s):function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return e.apply(n,[].concat(s,c))}}}function $5(t){return{}.toString.call(t).includes("Object")}function F5(t){return t||t1("configIsRequired"),$5(t)||t1("configType"),t.urls?(B5(),{paths:{vs:t.urls.monacoBase}}):t}function B5(){console.warn(ck.deprecation)}function U5(t,e){throw new Error(t[e]||t.default)}var ck={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},t1=P5(U5)(ck),q5={config:F5},H5=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(s){return n.reduceRight(function(a,l){return l(a)},s)}};function fk(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],fk(t[n],e[n]))}),X_(X_({},t),e)}var V5={type:"cancelation",msg:"operation is manually canceled"};function Xm(t){var e=!1,n=new Promise(function(r,s){t.then(function(a){return e?s(V5):r(a)}),t.catch(s)});return n.cancel=function(){return e=!0},n}var K5=["monaco"],G5=j5.create({config:L5,isInitialized:!1,resolve:null,reject:null,monaco:null}),dk=v5(G5,2),Au=dk[0],Ud=dk[1];function Q5(t){var e=q5.config(t),n=e.monaco,r=g5(e,K5);Ud(function(s){return{config:fk(s.config,r),monaco:n}})}function Z5(){var t=Au(function(e){var n=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:n,isInitialized:r,resolve:s}});if(!t.isInitialized){if(Ud({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),Xm(Wm);if(window.monaco&&window.monaco.editor)return hk(window.monaco),t.resolve(window.monaco),Xm(Wm);H5(Y5,X5)(W5)}return Xm(Wm)}function Y5(t){return document.body.appendChild(t)}function J5(t){var e=document.createElement("script");return t&&(e.src=t),e}function X5(t){var e=Au(function(r){var s=r.config,a=r.reject;return{config:s,reject:a}}),n=J5("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function W5(){var t=Au(function(n){var r=n.config,s=n.resolve,a=n.reject;return{config:r,resolve:s,reject:a}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var r=n.m||n;hk(r),t.resolve(r)},function(n){t.reject(n)})}function hk(t){Au().monaco||Ud({monaco:t})}function eP(){return Au(function(t){var e=t.monaco;return e})}var Wm=new Promise(function(t,e){return Ud({resolve:t,reject:e})}),pk={config:Q5,init:Z5,__getMonacoInstance:eP},tP={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},eg=tP,nP={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},rP=nP;function sP({children:t}){return Or.createElement("div",{style:rP.container},t)}var iP=sP,aP=iP;function oP({width:t,height:e,isEditorReady:n,loading:r,_ref:s,className:a,wrapperProps:l}){return Or.createElement("section",{style:{...eg.wrapper,width:t,height:e},...l},!n&&Or.createElement(aP,null,r),Or.createElement("div",{ref:s,style:{...eg.fullWidth,...!n&&eg.hide},className:a}))}var lP=oP,mk=q.memo(lP);function uP(t){q.useEffect(t,[])}var gk=uP;function cP(t,e,n=!0){let r=q.useRef(!0);q.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var Xn=cP;function Jl(){}function Wa(t,e,n,r){return fP(t,r)||dP(t,e,n,r)}function fP(t,e){return t.editor.getModel(yk(t,e))}function dP(t,e,n,r){return t.editor.createModel(e,n,r?yk(t,r):void 0)}function yk(t,e){return t.Uri.parse(e)}function hP({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:s,originalModelPath:a,modifiedModelPath:l,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:f=!1,theme:d="light",loading:m="Loading...",options:p={},height:g="100%",width:y="100%",className:x,wrapperProps:S={},beforeMount:E=Jl,onMount:C=Jl}){let[k,R]=q.useState(!1),[N,j]=q.useState(!0),T=q.useRef(null),D=q.useRef(null),L=q.useRef(null),P=q.useRef(C),M=q.useRef(E),B=q.useRef(!1);gk(()=>{let V=pk.init();return V.then($=>(D.current=$)&&j(!1)).catch($=>$?.type!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>T.current?te():V.cancel()}),Xn(()=>{if(T.current&&D.current){let V=T.current.getOriginalEditor(),$=Wa(D.current,t||"",r||n||"text",a||"");$!==V.getModel()&&V.setModel($)}},[a],k),Xn(()=>{if(T.current&&D.current){let V=T.current.getModifiedEditor(),$=Wa(D.current,e||"",s||n||"text",l||"");$!==V.getModel()&&V.setModel($)}},[l],k),Xn(()=>{let V=T.current.getModifiedEditor();V.getOption(D.current.editor.EditorOption.readOnly)?V.setValue(e||""):e!==V.getValue()&&(V.executeEdits("",[{range:V.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),V.pushUndoStop())},[e],k),Xn(()=>{T.current?.getModel()?.original.setValue(t||"")},[t],k),Xn(()=>{let{original:V,modified:$}=T.current.getModel();D.current.editor.setModelLanguage(V,r||n||"text"),D.current.editor.setModelLanguage($,s||n||"text")},[n,r,s],k),Xn(()=>{D.current?.editor.setTheme(d)},[d],k),Xn(()=>{T.current?.updateOptions(p)},[p],k);let G=q.useCallback(()=>{if(!D.current)return;M.current(D.current);let V=Wa(D.current,t||"",r||n||"text",a||""),$=Wa(D.current,e||"",s||n||"text",l||"");T.current?.setModel({original:V,modified:$})},[n,e,s,t,r,a,l]),ee=q.useCallback(()=>{!B.current&&L.current&&(T.current=D.current.editor.createDiffEditor(L.current,{automaticLayout:!0,...p}),G(),D.current?.editor.setTheme(d),R(!0),B.current=!0)},[p,d,G]);q.useEffect(()=>{k&&P.current(T.current,D.current)},[k]),q.useEffect(()=>{!N&&!k&&ee()},[N,k,ee]);function te(){let V=T.current?.getModel();c||V?.original?.dispose(),f||V?.modified?.dispose(),T.current?.dispose()}return Or.createElement(mk,{width:y,height:g,isEditorReady:k,loading:m,_ref:L,className:x,wrapperProps:S})}var pP=hP;q.memo(pP);function mP(t){let e=q.useRef();return q.useEffect(()=>{e.current=t},[t]),e.current}var gP=mP,ff=new Map;function yP({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:s,path:a,theme:l="light",line:c,loading:f="Loading...",options:d={},overrideServices:m={},saveViewState:p=!0,keepCurrentModel:g=!1,width:y="100%",height:x="100%",className:S,wrapperProps:E={},beforeMount:C=Jl,onMount:k=Jl,onChange:R,onValidate:N=Jl}){let[j,T]=q.useState(!1),[D,L]=q.useState(!0),P=q.useRef(null),M=q.useRef(null),B=q.useRef(null),G=q.useRef(k),ee=q.useRef(C),te=q.useRef(),V=q.useRef(r),$=gP(a),J=q.useRef(!1),ae=q.useRef(!1);gk(()=>{let z=pk.init();return z.then(F=>(P.current=F)&&L(!1)).catch(F=>F?.type!=="cancelation"&&console.error("Monaco initialization: error:",F)),()=>M.current?I():z.cancel()}),Xn(()=>{let z=Wa(P.current,t||r||"",e||s||"",a||n||"");z!==M.current?.getModel()&&(p&&ff.set($,M.current?.saveViewState()),M.current?.setModel(z),p&&M.current?.restoreViewState(ff.get(a)))},[a],j),Xn(()=>{M.current?.updateOptions(d)},[d],j),Xn(()=>{!M.current||r===void 0||(M.current.getOption(P.current.editor.EditorOption.readOnly)?M.current.setValue(r):r!==M.current.getValue()&&(ae.current=!0,M.current.executeEdits("",[{range:M.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),M.current.pushUndoStop(),ae.current=!1))},[r],j),Xn(()=>{let z=M.current?.getModel();z&&s&&P.current?.editor.setModelLanguage(z,s)},[s],j),Xn(()=>{c!==void 0&&M.current?.revealLine(c)},[c],j),Xn(()=>{P.current?.editor.setTheme(l)},[l],j);let Q=q.useCallback(()=>{if(!(!B.current||!P.current)&&!J.current){ee.current(P.current);let z=a||n,F=Wa(P.current,r||t||"",e||s||"",z||"");M.current=P.current?.editor.create(B.current,{model:F,automaticLayout:!0,...d},m),p&&M.current.restoreViewState(ff.get(z)),P.current.editor.setTheme(l),c!==void 0&&M.current.revealLine(c),T(!0),J.current=!0}},[t,e,n,r,s,a,d,m,p,l,c]);q.useEffect(()=>{j&&G.current(M.current,P.current)},[j]),q.useEffect(()=>{!D&&!j&&Q()},[D,j,Q]),V.current=r,q.useEffect(()=>{j&&R&&(te.current?.dispose(),te.current=M.current?.onDidChangeModelContent(z=>{ae.current||R(M.current.getValue(),z)}))},[j,R]),q.useEffect(()=>{if(j){let z=P.current.editor.onDidChangeMarkers(F=>{let A=M.current.getModel()?.uri;if(A&&F.find(se=>se.path===A.path)){let se=P.current.editor.getModelMarkers({resource:A});N?.(se)}});return()=>{z?.dispose()}}return()=>{}},[j,N]);function I(){te.current?.dispose(),g?p&&ff.set(a,M.current.saveViewState()):M.current.getModel()?.dispose(),M.current.dispose()}return Or.createElement(mk,{width:y,height:x,isEditorReady:j,loading:f,_ref:B,className:S,wrapperProps:E})}var vP=yP,bP=q.memo(vP),xP=bP;const SP={records:{icon:Dz,label:"Records"},columns:{icon:rz,label:"Columns"},constraints:{icon:Oz,label:"Constraints"},foreignKeys:{icon:mz,label:"Foreign Keys"},indexes:{icon:yz,label:"Indexes"}},wP=["SELECT","FROM","WHERE","AND","OR","NOT","IN","IS","NULL","LIKE","BETWEEN","ORDER BY","GROUP BY","HAVING","LIMIT","OFFSET","JOIN","LEFT JOIN","RIGHT JOIN","INNER JOIN","OUTER JOIN","ON","AS","DISTINCT","COUNT","SUM","AVG","MIN","MAX","INSERT INTO","VALUES","UPDATE","SET","DELETE FROM","CREATE TABLE","DROP TABLE","ALTER TABLE","ADD COLUMN","DROP COLUMN","INDEX","UNIQUE","PRIMARY KEY","FOREIGN KEY","REFERENCES","CASCADE","ASC","DESC","UNION","ALL","EXISTS","CASE","WHEN","THEN","ELSE","END","COALESCE","NULLIF","CAST","TRUE","FALSE"];function _P(t){const e=tn.c(59),{connection:n,selectedTable:r,onExecute:s,isLoading:a,schema:l,value:c,onChange:f,onToggleAI:d,aiPanelOpen:m,supportedViews:p,onSelectView:g,activeView:y,onExpandEditor:x}=t,[S,E]=q.useState(""),[C,k]=q.useState(!0),R=c!==void 0?c:S,N=f!==void 0?f:E,j=q.useRef(null),T=q.useRef(null),D=q.useRef(l),[L,P]=q.useState(CP);let M,B;e[0]===Symbol.for("react.memo_cache_sentinel")?(M=()=>{const Je=window.matchMedia("(prefers-color-scheme: dark)"),ot=ht=>P(ht.matches);return Je.addEventListener("change",ot),()=>Je.removeEventListener("change",ot)},B=[],e[0]=M,e[1]=B):(M=e[0],B=e[1]),q.useEffect(M,B);let G,ee;e[2]!==l?(G=()=>{D.current=l},ee=[l],e[2]=l,e[3]=G,e[4]=ee):(G=e[3],ee=e[4]),q.useEffect(G,ee);let te,V;e[5]!==n||e[6]!==r||e[7]!==N?(te=()=>{r&&n&&n.sql&&queueMicrotask(()=>N(cy(r,n.sql.driver)))},V=[r,n,N],e[5]=n,e[6]=r,e[7]=N,e[8]=te,e[9]=V):(te=e[8],V=e[9]),q.useEffect(te,V);let $;e[10]===Symbol.for("react.memo_cache_sentinel")?($=(Je,ot)=>{j.current=ot,T.current?.dispose(),T.current=ot.languages.registerCompletionItemProvider("sql",{triggerCharacters:[" ",".",",","("],provideCompletionItems:(ht,Me)=>{const ge=D.current,je=ht.getWordUntilPosition(Me),be={startLineNumber:Me.lineNumber,endLineNumber:Me.lineNumber,startColumn:je.startColumn,endColumn:je.endColumn},ye=ht.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:Me.lineNumber,endColumn:Me.column}).toUpperCase(),qe=[],Ce=ht.getLineContent(Me.lineNumber).substring(0,Me.column-1).match(/(\w+)\.$/);if(Ce&&ge?.columns){const Ue=Ce[1].toLowerCase(),vt=Object.entries(ge.columns).find(ut=>{const[ct]=ut;return ct.toLowerCase()===Ue})?.[1];return vt&&vt.forEach(ut=>{qe.push({label:ut.name,kind:ot.languages.CompletionItemKind.Field,detail:`${ut.type}${ut.primaryKey?" (PK)":""}${ut.nullable?"":" NOT NULL"}`,insertText:ut.name,range:be})}),{suggestions:qe}}const ke=/\b(FROM|JOIN|INTO|UPDATE|TABLE)\s+$/i.test(ye)||/\b(FROM|JOIN|INTO|UPDATE|TABLE)\s+\w*$/i.test(ye),xe=/\bSELECT\s+(\w+\s*,\s*)*\w*$/i.test(ye)||/\bWHERE\s+.*$/i.test(ye)||/\bSET\s+.*$/i.test(ye)||/\bAND\s+\w*$/i.test(ye)||/\bOR\s+\w*$/i.test(ye)||/\bORDER BY\s+.*$/i.test(ye)||/\bGROUP BY\s+.*$/i.test(ye);return wP.forEach(Ue=>{Ue.toUpperCase().startsWith(je.word.toUpperCase())&&qe.push({label:Ue,kind:ot.languages.CompletionItemKind.Keyword,detail:"SQL keyword",insertText:Ue,range:be})}),ge?.tables&&(ke||!xe)&&ge.tables.forEach(Ue=>{qe.push({label:Ue,kind:ot.languages.CompletionItemKind.Class,detail:"Table",insertText:Ue,range:be})}),ge?.columns&&xe&&Object.entries(ge.columns).forEach(Ue=>{const[vt,ut]=Ue;ut.forEach(ct=>{qe.push({label:ct.name,kind:ot.languages.CompletionItemKind.Field,detail:`${vt}.${ct.name} (${ct.type})`,insertText:ct.name,range:be}),qe.push({label:`${vt}.${ct.name}`,kind:ot.languages.CompletionItemKind.Field,detail:ct.type,insertText:`${vt}.${ct.name}`,range:be})})}),{suggestions:qe}}})},e[10]=$):$=e[10];const J=$;let ae,Q;e[11]===Symbol.for("react.memo_cache_sentinel")?(ae=()=>()=>{T.current?.dispose()},Q=[],e[11]=ae,e[12]=Q):(ae=e[11],Q=e[12]),q.useEffect(ae,Q);let I;e[13]!==n||e[14]!==s||e[15]!==R?(I=()=>{!n||!R.trim()||s(R)},e[13]=n,e[14]=s,e[15]=R,e[16]=I):I=e[16];const z=I;let F;e[17]!==z?(F=Je=>{(Je.metaKey||Je.ctrlKey)&&Je.key==="Enter"&&(Je.preventDefault(),z())},e[17]=z,e[18]=F):F=e[18];const A=F,se=`flex flex-col bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden dark:shadow-2xl transition-all ${C?"":"h-80"}`;let ue;e[19]!==C||e[20]!==x?(ue=()=>{C&&x&&x(),k(!C)},e[19]=C,e[20]=x,e[21]=ue):ue=e[21];const fe=C?"Expand editor":"Collapse editor";let ve;e[22]!==C?(ve=C?w.jsx(Bi,{className:"w-4 h-4"}):w.jsx(Kl,{className:"w-4 h-4"}),e[22]=C,e[23]=ve):ve=e[23];let Te;e[24]!==ue||e[25]!==fe||e[26]!==ve?(Te=w.jsx("button",{onClick:ue,className:"p-1.5 rounded-lg transition-colors text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/5",title:fe,children:ve}),e[24]=ue,e[25]=fe,e[26]=ve,e[27]=Te):Te=e[27];let _e;e[28]!==y||e[29]!==g||e[30]!==r||e[31]!==p?(_e=r&&p&&g&&w.jsx("div",{className:"flex gap-0.5 p-1 bg-neutral-100 dark:bg-white/5 rounded-lg",children:p.map(Je=>{const{icon:ot,label:ht}=SP[Je],Me=y===Je;return w.jsxs("button",{type:"button",onClick:()=>{g(Je),k(!0)},title:ht,className:`flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded-md transition-all whitespace-nowrap ${Me?"bg-white dark:bg-neutral-700 text-neutral-900 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 hover:bg-white dark:hover:bg-neutral-700 hover:shadow-sm"}`,children:[w.jsx(ot,{className:"w-3.5 h-3.5"}),w.jsx("span",{className:"hidden lg:inline",children:ht})]},Je)})}),e[28]=y,e[29]=g,e[30]=r,e[31]=p,e[32]=_e):_e=e[32];let me;e[33]===Symbol.for("react.memo_cache_sentinel")?(me=w.jsx("div",{className:"flex-1"}),e[33]=me):me=e[33];let Ee;e[34]!==n?(Ee=n?w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"font-medium text-neutral-600 dark:text-neutral-300",children:n.name}),w.jsx("span",{className:"mx-1.5",children:""}),w.jsx("span",{className:"uppercase",children:n.sql?.driver??"unknown"})]}):"No connection",e[34]=n,e[35]=Ee):Ee=e[35];let Oe;e[36]!==Ee?(Oe=w.jsx("span",{className:"text-[10px] text-neutral-400 dark:text-neutral-500",children:Ee}),e[36]=Ee,e[37]=Oe):Oe=e[37];let Ze;e[38]!==m||e[39]!==d?(Ze=d&&w.jsx("button",{onClick:d,className:`p-1.5 rounded-lg transition-colors ${m?"bg-amber-500/10 text-amber-500":"text-neutral-400 hover:text-amber-500 hover:bg-amber-500/10"}`,title:"Toggle AI Assistant",children:w.jsx(Vg,{className:"w-4 h-4"})}),e[38]=m,e[39]=d,e[40]=Ze):Ze=e[40];let Le;e[41]!==Te||e[42]!==_e||e[43]!==Oe||e[44]!==Ze?(Le=w.jsxs("div",{className:"h-12 px-3 flex items-center gap-3 border-b border-neutral-200 dark:border-white/8",children:[Te,_e,me,Oe,Ze]}),e[41]=Te,e[42]=_e,e[43]=Oe,e[44]=Ze,e[45]=Le):Le=e[45];let Ye;e[46]!==n||e[47]!==z||e[48]!==C||e[49]!==L||e[50]!==a||e[51]!==N||e[52]!==R?(Ye=!C&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"flex-1 min-h-0",children:w.jsx(xP,{height:"100%",defaultLanguage:"sql",value:R,onChange:Je=>N(Je||""),onMount:J,theme:L?"vs-dark":"vs",options:{quickSuggestions:!0,suggestOnTriggerCharacters:!0,minimap:{enabled:!1},fontSize:13,fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",padding:{top:12,bottom:12},renderLineHighlight:"none",overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,scrollbar:{vertical:"auto",horizontal:"auto",verticalScrollbarSize:8,horizontalScrollbarSize:8},lineNumbersMinChars:3,folding:!1}})}),w.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 border-t border-neutral-200 dark:border-white/8",children:[w.jsxs("button",{onClick:z,disabled:!n||!R.trim()||a,className:"flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-md disabled:opacity-50 transition-colors",children:[w.jsx(_z,{className:"w-3 h-3"}),a?"Running...":"Run"]}),w.jsx("span",{className:"text-[10px] text-neutral-400 dark:text-neutral-600",children:""})]})]}),e[46]=n,e[47]=z,e[48]=C,e[49]=L,e[50]=a,e[51]=N,e[52]=R,e[53]=Ye):Ye=e[53];let it;return e[54]!==A||e[55]!==se||e[56]!==Le||e[57]!==Ye?(it=w.jsxs("div",{className:se,onKeyDown:A,children:[Le,Ye]}),e[54]=A,e[55]=se,e[56]=Le,e[57]=Ye,e[58]=it):it=e[58],it}function CP(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function Ws(t,e){return typeof t=="function"?t(e):t}function tr(t,e){return n=>{e.setState(r=>({...r,[t]:Ws(n,r[t])}))}}function qd(t){return t instanceof Function}function EP(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function kP(t,e){const n=[],r=s=>{s.forEach(a=>{n.push(a);const l=e(a);l!=null&&l.length&&r(l)})};return r(t),n}function Pe(t,e,n){let r=[],s;return a=>{let l;n.key&&n.debug&&(l=Date.now());const c=t(a);if(!(c.length!==r.length||c.some((m,p)=>r[p]!==m)))return s;r=c;let d;if(n.key&&n.debug&&(d=Date.now()),s=e(...c),n==null||n.onChange==null||n.onChange(s),n.key&&n.debug&&n!=null&&n.debug()){const m=Math.round((Date.now()-l)*100)/100,p=Math.round((Date.now()-d)*100)/100,g=p/16,y=(x,S)=>{for(x=String(x);x.length<S;)x=" "+x;return x};console.info(`%c ${y(p,5)} /${y(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,n?.key)}return s}}function $e(t,e,n,r){return{debug:()=>{var s;return(s=t?.debugAll)!=null?s:t[e]},key:!1,onChange:r}}function RP(t,e,n,r){const s=()=>{var l;return(l=a.getValue())!=null?l:t.options.renderFallbackValue},a={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:s,getContext:Pe(()=>[t,n,e,a],(l,c,f,d)=>({table:l,column:c,row:f,cell:d,getValue:d.getValue,renderValue:d.renderValue}),$e(t.options,"debugCells"))};return t._features.forEach(l=>{l.createCell==null||l.createCell(a,n,e,t)},{}),a}function TP(t,e,n,r){var s,a;const c={...t._getDefaultColumnDef(),...e},f=c.accessorKey;let d=(s=(a=c.id)!=null?a:f?typeof String.prototype.replaceAll=="function"?f.replaceAll(".","_"):f.replace(/\./g,"_"):void 0)!=null?s:typeof c.header=="string"?c.header:void 0,m;if(c.accessorFn?m=c.accessorFn:f&&(f.includes(".")?m=g=>{let y=g;for(const S of f.split(".")){var x;y=(x=y)==null?void 0:x[S]}return y}:m=g=>g[c.accessorKey]),!d)throw new Error;let p={id:`${String(d)}`,accessorFn:m,parent:r,depth:n,columnDef:c,columns:[],getFlatColumns:Pe(()=>[!0],()=>{var g;return[p,...(g=p.columns)==null?void 0:g.flatMap(y=>y.getFlatColumns())]},$e(t.options,"debugColumns")),getLeafColumns:Pe(()=>[t._getOrderColumnsFn()],g=>{var y;if((y=p.columns)!=null&&y.length){let x=p.columns.flatMap(S=>S.getLeafColumns());return g(x)}return[p]},$e(t.options,"debugColumns"))};for(const g of t._features)g.createColumn==null||g.createColumn(p,t);return p}const mn="debugHeaders";function n1(t,e,n){var r;let a={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const l=[],c=f=>{f.subHeaders&&f.subHeaders.length&&f.subHeaders.map(c),l.push(f)};return c(a),l},getContext:()=>({table:t,header:a,column:e})};return t._features.forEach(l=>{l.createHeader==null||l.createHeader(a,t)}),a}const AP={createTable:t=>{t.getHeaderGroups=Pe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>{var a,l;const c=(a=r?.map(p=>n.find(g=>g.id===p)).filter(Boolean))!=null?a:[],f=(l=s?.map(p=>n.find(g=>g.id===p)).filter(Boolean))!=null?l:[],d=n.filter(p=>!(r!=null&&r.includes(p.id))&&!(s!=null&&s.includes(p.id)));return df(e,[...c,...d,...f],t)},$e(t.options,mn)),t.getCenterHeaderGroups=Pe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>(n=n.filter(a=>!(r!=null&&r.includes(a.id))&&!(s!=null&&s.includes(a.id))),df(e,n,t,"center")),$e(t.options,mn)),t.getLeftHeaderGroups=Pe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var s;const a=(s=r?.map(l=>n.find(c=>c.id===l)).filter(Boolean))!=null?s:[];return df(e,a,t,"left")},$e(t.options,mn)),t.getRightHeaderGroups=Pe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var s;const a=(s=r?.map(l=>n.find(c=>c.id===l)).filter(Boolean))!=null?s:[];return df(e,a,t,"right")},$e(t.options,mn)),t.getFooterGroups=Pe(()=>[t.getHeaderGroups()],e=>[...e].reverse(),$e(t.options,mn)),t.getLeftFooterGroups=Pe(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),$e(t.options,mn)),t.getCenterFooterGroups=Pe(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),$e(t.options,mn)),t.getRightFooterGroups=Pe(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),$e(t.options,mn)),t.getFlatHeaders=Pe(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),$e(t.options,mn)),t.getLeftFlatHeaders=Pe(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),$e(t.options,mn)),t.getCenterFlatHeaders=Pe(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),$e(t.options,mn)),t.getRightFlatHeaders=Pe(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),$e(t.options,mn)),t.getCenterLeafHeaders=Pe(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),$e(t.options,mn)),t.getLeftLeafHeaders=Pe(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),$e(t.options,mn)),t.getRightLeafHeaders=Pe(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),$e(t.options,mn)),t.getLeafHeaders=Pe(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var s,a,l,c,f,d;return[...(s=(a=e[0])==null?void 0:a.headers)!=null?s:[],...(l=(c=n[0])==null?void 0:c.headers)!=null?l:[],...(f=(d=r[0])==null?void 0:d.headers)!=null?f:[]].map(m=>m.getLeafHeaders()).flat()},$e(t.options,mn))}};function df(t,e,n,r){var s,a;let l=0;const c=function(g,y){y===void 0&&(y=1),l=Math.max(l,y),g.filter(x=>x.getIsVisible()).forEach(x=>{var S;(S=x.columns)!=null&&S.length&&c(x.columns,y+1)},0)};c(t);let f=[];const d=(g,y)=>{const x={depth:y,id:[r,`${y}`].filter(Boolean).join("_"),headers:[]},S=[];g.forEach(E=>{const C=[...S].reverse()[0],k=E.column.depth===x.depth;let R,N=!1;if(k&&E.column.parent?R=E.column.parent:(R=E.column,N=!0),C&&C?.column===R)C.subHeaders.push(E);else{const j=n1(n,R,{id:[r,y,R.id,E?.id].filter(Boolean).join("_"),isPlaceholder:N,placeholderId:N?`${S.filter(T=>T.column===R).length}`:void 0,depth:y,index:S.length});j.subHeaders.push(E),S.push(j)}x.headers.push(E),E.headerGroup=x}),f.push(x),y>0&&d(S,y-1)},m=e.map((g,y)=>n1(n,g,{depth:l,index:y}));d(m,l-1),f.reverse();const p=g=>g.filter(x=>x.column.getIsVisible()).map(x=>{let S=0,E=0,C=[0];x.subHeaders&&x.subHeaders.length?(C=[],p(x.subHeaders).forEach(R=>{let{colSpan:N,rowSpan:j}=R;S+=N,C.push(j)})):S=1;const k=Math.min(...C);return E=E+k,x.colSpan=S,x.rowSpan=E,{colSpan:S,rowSpan:E}});return p((s=(a=f[0])==null?void 0:a.headers)!=null?s:[]),f}const OP=(t,e,n,r,s,a,l)=>{let c={id:e,index:r,original:n,depth:s,parentId:l,_valuesCache:{},_uniqueValuesCache:{},getValue:f=>{if(c._valuesCache.hasOwnProperty(f))return c._valuesCache[f];const d=t.getColumn(f);if(d!=null&&d.accessorFn)return c._valuesCache[f]=d.accessorFn(c.original,r),c._valuesCache[f]},getUniqueValues:f=>{if(c._uniqueValuesCache.hasOwnProperty(f))return c._uniqueValuesCache[f];const d=t.getColumn(f);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(c._uniqueValuesCache[f]=d.columnDef.getUniqueValues(c.original,r),c._uniqueValuesCache[f]):(c._uniqueValuesCache[f]=[c.getValue(f)],c._uniqueValuesCache[f])},renderValue:f=>{var d;return(d=c.getValue(f))!=null?d:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>kP(c.subRows,f=>f.subRows),getParentRow:()=>c.parentId?t.getRow(c.parentId,!0):void 0,getParentRows:()=>{let f=[],d=c;for(;;){const m=d.getParentRow();if(!m)break;f.push(m),d=m}return f.reverse()},getAllCells:Pe(()=>[t.getAllLeafColumns()],f=>f.map(d=>RP(t,c,d,d.id)),$e(t.options,"debugRows")),_getAllCellsByColumnId:Pe(()=>[c.getAllCells()],f=>f.reduce((d,m)=>(d[m.column.id]=m,d),{}),$e(t.options,"debugRows"))};for(let f=0;f<t._features.length;f++){const d=t._features[f];d==null||d.createRow==null||d.createRow(c,t)}return c},MP={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},vk=(t,e,n)=>{var r,s;const a=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((s=t.getValue(e))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(a))};vk.autoRemove=t=>Mr(t);const bk=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};bk.autoRemove=t=>Mr(t);const xk=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===n?.toLowerCase()};xk.autoRemove=t=>Mr(t);const Sk=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};Sk.autoRemove=t=>Mr(t);const wk=(t,e,n)=>!n.some(r=>{var s;return!((s=t.getValue(e))!=null&&s.includes(r))});wk.autoRemove=t=>Mr(t)||!(t!=null&&t.length);const _k=(t,e,n)=>n.some(r=>{var s;return(s=t.getValue(e))==null?void 0:s.includes(r)});_k.autoRemove=t=>Mr(t)||!(t!=null&&t.length);const Ck=(t,e,n)=>t.getValue(e)===n;Ck.autoRemove=t=>Mr(t);const Ek=(t,e,n)=>t.getValue(e)==n;Ek.autoRemove=t=>Mr(t);const A0=(t,e,n)=>{let[r,s]=n;const a=t.getValue(e);return a>=r&&a<=s};A0.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,s=typeof n!="number"?parseFloat(n):n,a=e===null||Number.isNaN(r)?-1/0:r,l=n===null||Number.isNaN(s)?1/0:s;if(a>l){const c=a;a=l,l=c}return[a,l]};A0.autoRemove=t=>Mr(t)||Mr(t[0])&&Mr(t[1]);const ms={includesString:vk,includesStringSensitive:bk,equalsString:xk,arrIncludes:Sk,arrIncludesAll:wk,arrIncludesSome:_k,equals:Ck,weakEquals:Ek,inNumberRange:A0};function Mr(t){return t==null||t===""}const IP={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:tr("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);return typeof r=="string"?ms.includesString:typeof r=="number"?ms.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?ms.equals:Array.isArray(r)?ms.arrIncludes:ms.weakEquals},t.getFilterFn=()=>{var n,r;return qd(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:ms[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,s;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const s=t.getFilterFn(),a=r?.find(m=>m.id===t.id),l=Ws(n,a?a.value:void 0);if(r1(s,l,t)){var c;return(c=r?.filter(m=>m.id!==t.id))!=null?c:[]}const f={id:t.id,value:l};if(a){var d;return(d=r?.map(m=>m.id===t.id?f:m))!=null?d:[]}return r!=null&&r.length?[...r,f]:[f]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=s=>{var a;return(a=Ws(e,s))==null?void 0:a.filter(l=>{const c=n.find(f=>f.id===l.id);if(c){const f=c.getFilterFn();if(r1(f,l.value,c))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function r1(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const NP=(t,e,n)=>n.reduce((r,s)=>{const a=s.getValue(t);return r+(typeof a=="number"?a:0)},0),zP=(t,e,n)=>{let r;return n.forEach(s=>{const a=s.getValue(t);a!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}),r},DP=(t,e,n)=>{let r;return n.forEach(s=>{const a=s.getValue(t);a!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}),r},jP=(t,e,n)=>{let r,s;return n.forEach(a=>{const l=a.getValue(t);l!=null&&(r===void 0?l>=l&&(r=s=l):(r>l&&(r=l),s<l&&(s=l)))}),[r,s]},LP=(t,e)=>{let n=0,r=0;if(e.forEach(s=>{let a=s.getValue(t);a!=null&&(a=+a)>=a&&(++n,r+=a)}),n)return r/n},PP=(t,e)=>{if(!e.length)return;const n=e.map(a=>a.getValue(t));if(!EP(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),s=n.sort((a,l)=>a-l);return n.length%2!==0?s[r]:(s[r-1]+s[r])/2},$P=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),FP=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,BP=(t,e)=>e.length,tg={sum:NP,min:zP,max:DP,extent:jP,mean:LP,median:PP,unique:$P,uniqueCount:FP,count:BP},UP={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:tr("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);if(typeof r=="number")return tg.sum;if(Object.prototype.toString.call(r)==="[object Date]")return tg.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return qd(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:tg[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var s;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((s=n.subRows)!=null&&s.length)}}};function qP(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(a=>!e.includes(a.id));return n==="remove"?r:[...e.map(a=>t.find(l=>l.id===a)).filter(Boolean),...r]}const HP={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:tr("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=Pe(n=>[Xl(e,n)],n=>n.findIndex(r=>r.id===t.id),$e(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=Xl(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const s=Xl(e,n);return((r=s[s.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=Pe(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>s=>{let a=[];if(!(e!=null&&e.length))a=s;else{const l=[...e],c=[...s];for(;c.length&&l.length;){const f=l.shift(),d=c.findIndex(m=>m.id===f);d>-1&&a.push(c.splice(d,1)[0])}a=[...a,...c]}return qP(a,n,r)},$e(t.options,"debugTable"))}},ng=()=>({left:[],right:[]}),VP={getInitialState:t=>({columnPinning:ng(),...t}),getDefaultOptions:t=>({onColumnPinningChange:tr("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(s=>s.id).filter(Boolean);e.setColumnPinning(s=>{var a,l;if(n==="right"){var c,f;return{left:((c=s?.left)!=null?c:[]).filter(p=>!(r!=null&&r.includes(p))),right:[...((f=s?.right)!=null?f:[]).filter(p=>!(r!=null&&r.includes(p))),...r]}}if(n==="left"){var d,m;return{left:[...((d=s?.left)!=null?d:[]).filter(p=>!(r!=null&&r.includes(p))),...r],right:((m=s?.right)!=null?m:[]).filter(p=>!(r!=null&&r.includes(p)))}}return{left:((a=s?.left)!=null?a:[]).filter(p=>!(r!=null&&r.includes(p))),right:((l=s?.right)!=null?l:[]).filter(p=>!(r!=null&&r.includes(p)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var s,a,l;return((s=r.columnDef.enablePinning)!=null?s:!0)&&((a=(l=e.options.enableColumnPinning)!=null?l:e.options.enablePinning)!=null?a:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(c=>c.id),{left:r,right:s}=e.getState().columnPinning,a=n.some(c=>r?.includes(c)),l=n.some(c=>s?.includes(c));return a?"left":l?"right":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();return s?(n=(r=e.getState().columnPinning)==null||(r=r[s])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=Pe(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,s)=>{const a=[...r??[],...s??[]];return n.filter(l=>!a.includes(l.column.id))},$e(e.options,"debugRows")),t.getLeftVisibleCells=Pe(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(a=>n.find(l=>l.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),$e(e.options,"debugRows")),t.getRightVisibleCells=Pe(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(a=>n.find(l=>l.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),$e(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?ng():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:ng())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var s,a;return!!((s=r.left)!=null&&s.length||(a=r.right)!=null&&a.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=Pe(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),$e(t.options,"debugColumns")),t.getRightLeafColumns=Pe(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),$e(t.options,"debugColumns")),t.getCenterLeafColumns=Pe(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const s=[...n??[],...r??[]];return e.filter(a=>!s.includes(a.id))},$e(t.options,"debugColumns"))}};function KP(t){return t||(typeof document<"u"?document:null)}const hf={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},rg=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),GP={getDefaultColumnDef:()=>hf,getInitialState:t=>({columnSizing:{},columnSizingInfo:rg(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:tr("columnSizing",t),onColumnSizingInfoChange:tr("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,s;const a=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:hf.minSize,(r=a??t.columnDef.size)!=null?r:hf.size),(s=t.columnDef.maxSize)!=null?s:hf.maxSize)},t.getStart=Pe(n=>[n,Xl(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((s,a)=>s+a.getSize(),0),$e(e.options,"debugColumns")),t.getAfter=Pe(n=>[n,Xl(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((s,a)=>s+a.getSize(),0),$e(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...s}=n;return s})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=s=>{if(s.subHeaders.length)s.subHeaders.forEach(r);else{var a;n+=(a=s.column.getSize())!=null?a:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),s=r?.getCanResize();return a=>{if(!r||!s||(a.persist==null||a.persist(),sg(a)&&a.touches&&a.touches.length>1))return;const l=t.getSize(),c=t?t.getLeafHeaders().map(C=>[C.column.id,C.column.getSize()]):[[r.id,r.getSize()]],f=sg(a)?Math.round(a.touches[0].clientX):a.clientX,d={},m=(C,k)=>{typeof k=="number"&&(e.setColumnSizingInfo(R=>{var N,j;const T=e.options.columnResizeDirection==="rtl"?-1:1,D=(k-((N=R?.startOffset)!=null?N:0))*T,L=Math.max(D/((j=R?.startSize)!=null?j:0),-.999999);return R.columnSizingStart.forEach(P=>{let[M,B]=P;d[M]=Math.round(Math.max(B+B*L,0)*100)/100}),{...R,deltaOffset:D,deltaPercentage:L}}),(e.options.columnResizeMode==="onChange"||C==="end")&&e.setColumnSizing(R=>({...R,...d})))},p=C=>m("move",C),g=C=>{m("end",C),e.setColumnSizingInfo(k=>({...k,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},y=KP(n),x={moveHandler:C=>p(C.clientX),upHandler:C=>{y?.removeEventListener("mousemove",x.moveHandler),y?.removeEventListener("mouseup",x.upHandler),g(C.clientX)}},S={moveHandler:C=>(C.cancelable&&(C.preventDefault(),C.stopPropagation()),p(C.touches[0].clientX),!1),upHandler:C=>{var k;y?.removeEventListener("touchmove",S.moveHandler),y?.removeEventListener("touchend",S.upHandler),C.cancelable&&(C.preventDefault(),C.stopPropagation()),g((k=C.touches[0])==null?void 0:k.clientX)}},E=QP()?{passive:!1}:!1;sg(a)?(y?.addEventListener("touchmove",S.moveHandler,E),y?.addEventListener("touchend",S.upHandler,E)):(y?.addEventListener("mousemove",x.moveHandler,E),y?.addEventListener("mouseup",x.upHandler,E)),e.setColumnSizingInfo(C=>({...C,startOffset:f,startSize:l,deltaOffset:0,deltaPercentage:0,columnSizingStart:c,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?rg():(n=t.initialState.columnSizingInfo)!=null?n:rg())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0}}};let pf=null;function QP(){if(typeof pf=="boolean")return pf;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return pf=t,pf}function sg(t){return t.type==="touchstart"}const ZP={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:tr("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const s=t.columns;return(n=s.length?s.some(a=>a.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=Pe(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),$e(e.options,"debugRows")),t.getVisibleCells=Pe(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,s)=>[...n,...r,...s],$e(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>Pe(()=>[r(),r().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),$e(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((s,a)=>({...s,[a.id]:n||!(a.getCanHide!=null&&a.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function Xl(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const YP={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},JP={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:tr("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,s,a;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&((a=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?a:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>ms.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return qd(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:ms[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},XP={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:tr("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var s,a;t.setExpanded(r?{}:(s=(a=t.initialState)==null?void 0:a.expanded)!=null?s:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(a=>{const l=a.split(".");r=Math.max(r,l.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var s;const a=r===!0?!0:!!(r!=null&&r[t.id]);let l={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(c=>{l[c]=!0}):l=r,n=(s=n)!=null?s:!a,!a&&n)return{...l,[t.id]:!0};if(a&&!n){const{[t.id]:c,...f}=l;return f}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r?.[t.id])},t.getCanExpand=()=>{var n,r,s;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((s=t.subRows)!=null&&s.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},fy=0,dy=10,ig=()=>({pageIndex:fy,pageSize:dy}),WP={getInitialState:t=>({...t,pagination:{...ig(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:tr("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const s=a=>Ws(r,a);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(s)},t.resetPagination=r=>{var s;t.setPagination(r?ig():(s=t.initialState.pagination)!=null?s:ig())},t.setPageIndex=r=>{t.setPagination(s=>{let a=Ws(r,s.pageIndex);const l=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return a=Math.max(0,Math.min(a,l)),{...s,pageIndex:a}})},t.resetPageIndex=r=>{var s,a;t.setPageIndex(r?fy:(s=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?s:fy)},t.resetPageSize=r=>{var s,a;t.setPageSize(r?dy:(s=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?s:dy)},t.setPageSize=r=>{t.setPagination(s=>{const a=Math.max(1,Ws(r,s.pageSize)),l=s.pageSize*s.pageIndex,c=Math.floor(l/a);return{...s,pageIndex:c,pageSize:a}})},t.setPageCount=r=>t.setPagination(s=>{var a;let l=Ws(r,(a=t.options.pageCount)!=null?a:-1);return typeof l=="number"&&(l=Math.max(-1,l)),{...s,pageCount:l}}),t.getPageOptions=Pe(()=>[t.getPageCount()],r=>{let s=[];return r&&r>0&&(s=[...new Array(r)].fill(null).map((a,l)=>l)),s},$e(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,s=t.getPageCount();return s===-1?!0:s===0?!1:r<s-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},ag=()=>({top:[],bottom:[]}),e6={getInitialState:t=>({rowPinning:ag(),...t}),getDefaultOptions:t=>({onRowPinningChange:tr("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,s)=>{const a=r?t.getLeafRows().map(f=>{let{id:d}=f;return d}):[],l=s?t.getParentRows().map(f=>{let{id:d}=f;return d}):[],c=new Set([...l,t.id,...a]);e.setRowPinning(f=>{var d,m;if(n==="bottom"){var p,g;return{top:((p=f?.top)!=null?p:[]).filter(S=>!(c!=null&&c.has(S))),bottom:[...((g=f?.bottom)!=null?g:[]).filter(S=>!(c!=null&&c.has(S))),...Array.from(c)]}}if(n==="top"){var y,x;return{top:[...((y=f?.top)!=null?y:[]).filter(S=>!(c!=null&&c.has(S))),...Array.from(c)],bottom:((x=f?.bottom)!=null?x:[]).filter(S=>!(c!=null&&c.has(S)))}}return{top:((d=f?.top)!=null?d:[]).filter(S=>!(c!=null&&c.has(S))),bottom:((m=f?.bottom)!=null?m:[]).filter(S=>!(c!=null&&c.has(S)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:s}=e.options;return typeof r=="function"?r(t):(n=r??s)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:s}=e.getState().rowPinning,a=n.some(c=>r?.includes(c)),l=n.some(c=>s?.includes(c));return a?"top":l?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();if(!s)return-1;const a=(n=s==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(l=>{let{id:c}=l;return c});return(r=a?.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?ag():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:ag())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var s,a;return!!((s=r.top)!=null&&s.length||(a=r.bottom)!=null&&a.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var s;return((s=t.options.keepPinnedRows)==null||s?(n??[]).map(l=>{const c=t.getRow(l,!0);return c.getIsAllParentsExpanded()?c:null}):(n??[]).map(l=>e.find(c=>c.id===l))).filter(Boolean).map(l=>({...l,position:r}))},t.getTopRows=Pe(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),$e(t.options,"debugRows")),t.getBottomRows=Pe(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),$e(t.options,"debugRows")),t.getCenterRows=Pe(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const s=new Set([...n??[],...r??[]]);return e.filter(a=>!s.has(a.id))},$e(t.options,"debugRows"))}},t6={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:tr("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},s=t.getPreGroupedRowModel().flatRows;return e?s.forEach(a=>{a.getCanSelect()&&(r[a.id]=!0)}):s.forEach(a=>{delete r[a.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),s={...n};return t.getRowModel().rows.forEach(a=>{hy(s,a.id,r,!0,t)}),s}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=Pe(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?og(t,n):{rows:[],flatRows:[],rowsById:{}},$e(t.options,"debugTable")),t.getFilteredSelectedRowModel=Pe(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?og(t,n):{rows:[],flatRows:[],rowsById:{}},$e(t.options,"debugTable")),t.getGroupedSelectedRowModel=Pe(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?og(t,n):{rows:[],flatRows:[],rowsById:{}},$e(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(s=>s.getCanSelect()&&!n[s.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(s=>!n[s.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const s=t.getIsSelected();e.setRowSelection(a=>{var l;if(n=typeof n<"u"?n:!s,t.getCanSelect()&&s===n)return a;const c={...a};return hy(c,t.id,n,(l=r?.selectChildren)!=null?l:!0,e),c})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return O0(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return py(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return py(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var s;n&&t.toggleSelected((s=r.target)==null?void 0:s.checked)}}}},hy=(t,e,n,r,s)=>{var a;const l=s.getRow(e,!0);n?(l.getCanMultiSelect()||Object.keys(t).forEach(c=>delete t[c]),l.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(a=l.subRows)!=null&&a.length&&l.getCanSelectSubRows()&&l.subRows.forEach(c=>hy(t,c.id,n,r,s))};function og(t,e){const n=t.getState().rowSelection,r=[],s={},a=function(l,c){return l.map(f=>{var d;const m=O0(f,n);if(m&&(r.push(f),s[f.id]=f),(d=f.subRows)!=null&&d.length&&(f={...f,subRows:a(f.subRows)}),m)return f}).filter(Boolean)};return{rows:a(e.rows),flatRows:r,rowsById:s}}function O0(t,e){var n;return(n=e[t.id])!=null?n:!1}function py(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let s=!0,a=!1;return t.subRows.forEach(l=>{if(!(a&&!s)&&(l.getCanSelect()&&(O0(l,e)?a=!0:s=!1),l.subRows&&l.subRows.length)){const c=py(l,e);c==="all"?a=!0:(c==="some"&&(a=!0),s=!1)}}),s?"all":a?"some":!1}const my=/([0-9]+)/gm,n6=(t,e,n)=>kk(si(t.getValue(n)).toLowerCase(),si(e.getValue(n)).toLowerCase()),r6=(t,e,n)=>kk(si(t.getValue(n)),si(e.getValue(n))),s6=(t,e,n)=>M0(si(t.getValue(n)).toLowerCase(),si(e.getValue(n)).toLowerCase()),i6=(t,e,n)=>M0(si(t.getValue(n)),si(e.getValue(n))),a6=(t,e,n)=>{const r=t.getValue(n),s=e.getValue(n);return r>s?1:r<s?-1:0},o6=(t,e,n)=>M0(t.getValue(n),e.getValue(n));function M0(t,e){return t===e?0:t>e?1:-1}function si(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function kk(t,e){const n=t.split(my).filter(Boolean),r=e.split(my).filter(Boolean);for(;n.length&&r.length;){const s=n.shift(),a=r.shift(),l=parseInt(s,10),c=parseInt(a,10),f=[l,c].sort();if(isNaN(f[0])){if(s>a)return 1;if(a>s)return-1;continue}if(isNaN(f[1]))return isNaN(l)?-1:1;if(l>c)return 1;if(c>l)return-1}return n.length-r.length}const _l={alphanumeric:n6,alphanumericCaseSensitive:r6,text:s6,textCaseSensitive:i6,datetime:a6,basic:o6},l6={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:tr("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const s of n){const a=s?.getValue(t.id);if(Object.prototype.toString.call(a)==="[object Date]")return _l.datetime;if(typeof a=="string"&&(r=!0,a.split(my).length>1))return _l.alphanumeric}return r?_l.text:_l.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return qd(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:_l[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const s=t.getNextSortingOrder(),a=typeof n<"u"&&n!==null;e.setSorting(l=>{const c=l?.find(y=>y.id===t.id),f=l?.findIndex(y=>y.id===t.id);let d=[],m,p=a?n:s==="desc";if(l!=null&&l.length&&t.getCanMultiSort()&&r?c?m="toggle":m="add":l!=null&&l.length&&f!==l.length-1?m="replace":c?m="toggle":m="replace",m==="toggle"&&(a||s||(m="remove")),m==="add"){var g;d=[...l,{id:t.id,desc:p}],d.splice(0,d.length-((g=e.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else m==="toggle"?d=l.map(y=>y.id===t.id?{...y,desc:p}:y):m==="remove"?d=l.filter(y=>y.id!==t.id):d=[{id:t.id,desc:p}];return d})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,s;const a=t.getFirstSortDir(),l=t.getIsSorted();return l?l!==a&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(s=e.options.enableMultiRemove)!=null)||s)?!1:l==="desc"?"asc":"desc":a},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(s=>s.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},u6=[AP,ZP,HP,VP,MP,IP,YP,JP,l6,UP,XP,WP,e6,t6,GP];function c6(t){var e,n;const r=[...u6,...(e=t._features)!=null?e:[]];let s={_features:r};const a=s._features.reduce((g,y)=>Object.assign(g,y.getDefaultOptions==null?void 0:y.getDefaultOptions(s)),{}),l=g=>s.options.mergeOptions?s.options.mergeOptions(a,g):{...a,...g};let f={...{},...(n=t.initialState)!=null?n:{}};s._features.forEach(g=>{var y;f=(y=g.getInitialState==null?void 0:g.getInitialState(f))!=null?y:f});const d=[];let m=!1;const p={_features:r,options:{...a,...t},initialState:f,_queue:g=>{d.push(g),m||(m=!0,Promise.resolve().then(()=>{for(;d.length;)d.shift()();m=!1}).catch(y=>setTimeout(()=>{throw y})))},reset:()=>{s.setState(s.initialState)},setOptions:g=>{const y=Ws(g,s.options);s.options=l(y)},getState:()=>s.options.state,setState:g=>{s.options.onStateChange==null||s.options.onStateChange(g)},_getRowId:(g,y,x)=>{var S;return(S=s.options.getRowId==null?void 0:s.options.getRowId(g,y,x))!=null?S:`${x?[x.id,y].join("."):y}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(g,y)=>{let x=(y?s.getPrePaginationRowModel():s.getRowModel()).rowsById[g];if(!x&&(x=s.getCoreRowModel().rowsById[g],!x))throw new Error;return x},_getDefaultColumnDef:Pe(()=>[s.options.defaultColumn],g=>{var y;return g=(y=g)!=null?y:{},{header:x=>{const S=x.header.column.columnDef;return S.accessorKey?S.accessorKey:S.accessorFn?S.id:null},cell:x=>{var S,E;return(S=(E=x.renderValue())==null||E.toString==null?void 0:E.toString())!=null?S:null},...s._features.reduce((x,S)=>Object.assign(x,S.getDefaultColumnDef==null?void 0:S.getDefaultColumnDef()),{}),...g}},$e(t,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:Pe(()=>[s._getColumnDefs()],g=>{const y=function(x,S,E){return E===void 0&&(E=0),x.map(C=>{const k=TP(s,C,E,S),R=C;return k.columns=R.columns?y(R.columns,k,E+1):[],k})};return y(g)},$e(t,"debugColumns")),getAllFlatColumns:Pe(()=>[s.getAllColumns()],g=>g.flatMap(y=>y.getFlatColumns()),$e(t,"debugColumns")),_getAllFlatColumnsById:Pe(()=>[s.getAllFlatColumns()],g=>g.reduce((y,x)=>(y[x.id]=x,y),{}),$e(t,"debugColumns")),getAllLeafColumns:Pe(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(g,y)=>{let x=g.flatMap(S=>S.getLeafColumns());return y(x)},$e(t,"debugColumns")),getColumn:g=>s._getAllFlatColumnsById()[g]};Object.assign(s,p);for(let g=0;g<s._features.length;g++){const y=s._features[g];y==null||y.createTable==null||y.createTable(s)}return s}function Rk(){return t=>Pe(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(s,a,l){a===void 0&&(a=0);const c=[];for(let d=0;d<s.length;d++){const m=OP(t,t._getRowId(s[d],d,l),s[d],d,a,void 0,l?.id);if(n.flatRows.push(m),n.rowsById[m.id]=m,c.push(m),t.options.getSubRows){var f;m.originalSubRows=t.options.getSubRows(s[d],d),(f=m.originalSubRows)!=null&&f.length&&(m.subRows=r(m.originalSubRows,a+1,m))}}return c};return n.rows=r(e),n},$e(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function Tk(){return t=>Pe(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const r=t.getState().sorting,s=[],a=r.filter(f=>{var d;return(d=t.getColumn(f.id))==null?void 0:d.getCanSort()}),l={};a.forEach(f=>{const d=t.getColumn(f.id);d&&(l[f.id]={sortUndefined:d.columnDef.sortUndefined,invertSorting:d.columnDef.invertSorting,sortingFn:d.getSortingFn()})});const c=f=>{const d=f.map(m=>({...m}));return d.sort((m,p)=>{for(let y=0;y<a.length;y+=1){var g;const x=a[y],S=l[x.id],E=S.sortUndefined,C=(g=x?.desc)!=null?g:!1;let k=0;if(E){const R=m.getValue(x.id),N=p.getValue(x.id),j=R===void 0,T=N===void 0;if(j||T){if(E==="first")return j?-1:1;if(E==="last")return j?1:-1;k=j&&T?0:j?E:-E}}if(k===0&&(k=S.sortingFn(m,p,x.id)),k!==0)return C&&(k*=-1),S.invertSorting&&(k*=-1),k}return m.index-p.index}),d.forEach(m=>{var p;s.push(m),(p=m.subRows)!=null&&p.length&&(m.subRows=c(m.subRows))}),d};return{rows:c(n.rows),flatRows:s,rowsById:n.rowsById}},$e(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}function hd(t,e){return t?f6(t)?q.createElement(t,e):t:null}function f6(t){return d6(t)||typeof t=="function"||h6(t)}function d6(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function h6(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function Ak(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=q.useState(()=>({current:c6(e)})),[r,s]=q.useState(()=>n.current.initialState);return n.current.setOptions(a=>({...a,...t,state:{...r,...t.state},onStateChange:l=>{s(l),t.onStateChange==null||t.onStateChange(l)}})),n.current}function p6(t){const e=tn.c(29),{getValue:n,row:r,column:s,table:a}=t,{index:l}=r,{id:c}=s;let f;e[0]!==n?(f=n(),e[0]=n,e[1]=f):f=e[1];const d=f,[m,p]=q.useState(d),[g,y]=q.useState(!1);let x,S;e[2]!==d?(x=()=>{p(d)},S=[d],e[2]=d,e[3]=x,e[4]=S):(x=e[3],S=e[4]),q.useEffect(x,S);let E;e[5]!==c||e[6]!==l||e[7]!==d||e[8]!==a||e[9]!==m?(E=()=>{y(!1),m!==d&&a.options.meta?.updateData(l,c,m)},e[5]=c,e[6]=l,e[7]=d,e[8]=a,e[9]=m,e[10]=E):E=e[10];const C=E;let k;e[11]!==d?(k=D=>{D.key==="Enter"&&D.target.blur(),D.key==="Escape"&&(p(d),y(!1))},e[11]=d,e[12]=k):k=e[12];const R=k;if(d===null&&!g){let D;return e[13]===Symbol.for("react.memo_cache_sentinel")?(D=w.jsx("span",{className:"text-neutral-400 dark:text-neutral-600 italic cursor-pointer",onClick:()=>y(!0),children:"NULL"}),e[13]=D):D=e[13],D}if(typeof d=="boolean"&&!g){let D;e[14]===Symbol.for("react.memo_cache_sentinel")?(D=()=>y(!0),e[14]=D):D=e[14];const L=d?"true":"false";let P;return e[15]!==L?(P=w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400 cursor-pointer",onClick:D,children:L}),e[15]=L,e[16]=P):P=e[16],P}if(typeof d=="object"&&d!==null){let D;e[17]!==d?(D=JSON.stringify(d),e[17]=d,e[18]=D):D=e[18];let L;return e[19]!==D?(L=w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:D}),e[19]=D,e[20]=L):L=e[20],L}if(g){const D=m===null?"":String(m);let L;e[21]===Symbol.for("react.memo_cache_sentinel")?(L=M=>p(M.target.value),e[21]=L):L=e[21];let P;return e[22]!==R||e[23]!==C||e[24]!==D?(P=w.jsx("input",{value:D,onChange:L,onBlur:C,onKeyDown:R,autoFocus:!0,className:"w-full bg-white dark:bg-neutral-800 border border-blue-500 dark:border-blue-400 rounded px-1 py-0.5 text-[12px] font-mono text-neutral-700 dark:text-neutral-200 outline-none"}),e[22]=R,e[23]=C,e[24]=D,e[25]=P):P=e[25],P}let N;e[26]===Symbol.for("react.memo_cache_sentinel")?(N=()=>y(!0),e[26]=N):N=e[26];const j=String(m);let T;return e[27]!==j?(T=w.jsx("span",{className:"text-neutral-600 dark:text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-200",onClick:N,children:j}),e[27]=j,e[28]=T):T=e[28],T}function m6(t){const e=tn.c(8),{getValue:n}=t;let r,s;if(e[0]!==n){r=Symbol.for("react.early_return_sentinel");e:{if(s=n(),s===null){let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=w.jsx("span",{className:"text-neutral-400 dark:text-neutral-600 italic",children:"NULL"}),e[3]=c):c=e[3],r=c;break e}if(typeof s=="boolean"){const c=s?"true":"false";let f;e[4]!==c?(f=w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:c}),e[4]=c,e[5]=f):f=e[5],r=f;break e}if(typeof s=="object"){r=w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:JSON.stringify(s)});break e}}e[0]=n,e[1]=r,e[2]=s}else r=e[1],s=e[2];if(r!==Symbol.for("react.early_return_sentinel"))return r;const a=String(s);let l;return e[6]!==a?(l=w.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:a}),e[6]=a,e[7]=l):l=e[7],l}function g6({response:t,duration:e,isLoading:n,tableName:r,onUpdateCell:s,onDeleteRow:a}){const[l,c]=q.useState([]),[f,d]=q.useState([]),[m,p]=q.useState(null),g=!!r&&!!s,y=!!r&&!!a;q.useEffect(()=>{d(t?.rows??[])},[t?.rows]);const x=q.useMemo(()=>{if(!t?.columns)return[];const E=t.columns.map(C=>({accessorKey:C,header:C,cell:g?p6:m6}));return y&&E.push({id:"actions",header:"",size:50,cell:({row:C})=>{const k=m===C.index;return w.jsx("div",{className:"flex items-center gap-1",children:k?w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>{a?.(C.original),p(null)},className:"p-1 text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300",title:"Confirm delete",children:w.jsx(fu,{size:14})}),w.jsx("button",{onClick:()=>p(null),className:"p-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 text-xs",title:"Cancel",children:""})]}):w.jsx("button",{onClick:()=>p(C.index),className:"p-1 text-neutral-400 hover:text-red-500 dark:hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete row",children:w.jsx(fu,{size:14})})})}}),E},[t?.columns,g,y,m,a]),S=Ak({data:f,columns:x,state:{sorting:l},onSortingChange:c,getCoreRowModel:Rk(),getSortedRowModel:Tk(),meta:{updateData:(E,C,k)=>{const R=f[E];d(N=>N.map((j,T)=>T===E?{...j,[C]:k}:j)),s?.(R,C,k)}}});return n?w.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:w.jsxs("div",{className:"flex flex-col items-center gap-3 text-neutral-400 dark:text-neutral-500",children:[w.jsx("div",{className:"w-6 h-6 border-2 border-neutral-200 border-t-neutral-400 dark:border-neutral-700 dark:border-t-neutral-500 rounded-full animate-spin"}),w.jsx("span",{className:"text-sm",children:"Running query..."})]})}):t?t.error?w.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:w.jsxs("div",{className:"flex items-center gap-3 text-red-500 dark:text-red-400",children:[w.jsx(Fz,{size:18}),w.jsx("span",{className:"text-sm",children:t.error})]})}):t.rows_affected!==void 0&&!t.rows?w.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:w.jsxs("div",{className:"flex flex-col items-center gap-2",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-500/30",children:"OK"}),w.jsxs("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[w.jsx("span",{className:"font-medium",children:t.rows_affected})," row(s) affected"]})]}),w.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-600",children:[e.toFixed(0),"ms"]})]})}):w.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden dark:shadow-2xl",children:[w.jsx("div",{className:"flex-1 overflow-auto",children:w.jsxs("table",{className:"w-full text-[13px]",children:[w.jsx("thead",{className:"sticky top-0 z-10 bg-neutral-100 dark:bg-neutral-950",children:S.getHeaderGroups().map(E=>w.jsx("tr",{children:E.headers.map(C=>{const k=C.column.getIsSorted(),R=C.id==="actions";return w.jsx("th",{onClick:R?void 0:C.column.getToggleSortingHandler(),className:`text-left px-4 py-2 text-[11px] font-medium whitespace-nowrap transition-colors select-none group bg-neutral-100 dark:bg-neutral-950 ${R?"w-12":"cursor-pointer"} ${k?"text-neutral-900 dark:text-neutral-200":"text-neutral-500 dark:text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-400"}`,children:!R&&w.jsxs("div",{className:"flex items-center gap-1",children:[hd(C.column.columnDef.header,C.getContext()),w.jsx("span",{className:`transition-opacity ${k?"opacity-100":"opacity-0 group-hover:opacity-40"}`,children:k==="asc"?w.jsx(Kl,{size:12}):k==="desc"?w.jsx(Bi,{size:12}):w.jsx(If,{size:12})})]})},C.id)})},E.id))}),w.jsx("tbody",{children:S.getRowModel().rows.map((E,C)=>{const k=C%2===1,R=E.getVisibleCells();return w.jsx("tr",{className:`group transition-colors ${k?"bg-neutral-200/40 dark:bg-neutral-800/30 hover:bg-neutral-200/70 dark:hover:bg-neutral-800/50":"hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30"}`,children:R.map((N,j)=>w.jsx("td",{className:`px-4 py-2 whitespace-nowrap font-mono text-[12px] ${j===0?"rounded-l-lg":""} ${j===R.length-1?"rounded-r-lg":""}`,children:hd(N.column.columnDef.cell,N.getContext())},N.id))},E.id)})})]})}),w.jsxs("div",{className:"px-3 py-2 flex items-center gap-4 text-xs border-t border-neutral-200 dark:border-white/8 shrink-0",children:[w.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-500/30",children:"OK"}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Time:"}),w.jsxs("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:[e.toFixed(0),"ms"]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Rows:"}),w.jsx("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:f.length})]}),g&&w.jsx("div",{className:"ml-auto text-neutral-400 dark:text-neutral-600 text-[10px]",children:"Click a cell to edit"})]})]}):w.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:w.jsxs("div",{className:"flex flex-col items-center text-neutral-400 dark:text-neutral-500",children:[w.jsx("svg",{className:"w-8 h-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),w.jsx("span",{className:"text-sm",children:"Run a query to see results"})]})})}class y6{#e=!0;#t;#n;#r;#s;#o;#i;#a;#p=0;#m=5;#u=!1;#c=!1;#l=null;#f=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#u=!1,this.debugLog("Emitting queued events",this.#s),this.#s.forEach(e=>this.emitEventToBus(e)),this.#s=[],this.stopConnectLoop(),this.#n().removeEventListener("tanstack-connect-success",this.#f)};#d=()=>{if(this.#p<this.#m){this.#p++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#n().removeEventListener("tanstack-connect",this.#d),this.#c=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#h=()=>{this.#u||(this.#u=!0,this.#n().addEventListener("tanstack-connect-success",this.#f),this.#d())};constructor({pluginId:e,debug:n=!1,enabled:r=!0,reconnectEveryMs:s=300}){this.#t=e,this.#e=r,this.#n=this.getGlobalTarget,this.#r=n,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#s=[],this.#o=!1,this.#c=!1,this.#i=null,this.#a=s}startConnectLoop(){this.#i!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#a}ms)`),this.#i=setInterval(this.#d,this.#a))}stopConnectLoop(){this.#u=!1,this.#i!==null&&(clearInterval(this.#i),this.#i=null,this.#s=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#r&&console.log(` [tanstack-devtools:${this.#t}-plugin]`,...e)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const e=typeof EventTarget<"u"?new EventTarget:void 0;return typeof e>"u"||typeof e.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#t}dispatchCustomEventShim(e,n){try{const r=new Event(e,{detail:n});this.#n().dispatchEvent(r)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,n){try{this.#n().dispatchEvent(new CustomEvent(e,{detail:n}))}catch{this.dispatchCustomEventShim(e,n)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,n){return{type:`${this.#t}:${e}`,payload:n,pluginId:this.#t}}emit(e,n){if(!this.#e){this.debugLog("Event bus client is disabled, not emitting event",e,n);return}if(this.#l&&(this.debugLog("Emitting event to internal event target",e,n),this.#l.dispatchEvent(new CustomEvent(`${this.#t}:${e}`,{detail:this.createEventPayload(e,n)}))),this.#c){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#s.push(this.createEventPayload(e,n)),typeof CustomEvent<"u"&&!this.#u&&(this.#h(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,n))}on(e,n,r){const s=r?.withEventTarget??!1,a=`${this.#t}:${e}`;if(s&&(this.#l||(this.#l=new EventTarget),this.#l.addEventListener(a,c=>{n(c.detail)})),!this.#e)return this.debugLog("Event bus client is disabled, not registering event",a),()=>{};const l=c=>{this.debugLog("Received event from bus",c.detail),n(c.detail)};return this.#n().addEventListener(a,l),this.debugLog("Registered event to bus",a),()=>{s&&this.#l?.removeEventListener(a,l),this.#n().removeEventListener(a,l)}}onAll(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;this.#t&&s.pluginId!==this.#t||e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}}class v6 extends y6{constructor(){super({pluginId:"tanstack-ai-devtools"})}}const $t=new v6;async function b6(t){let e="";for await(const n of t)n.type==="content"&&n.delta&&(e+=n.delta);return e}function x6(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"].version===1&&typeof t["~standard"].jsonSchema=="object"&&typeof t["~standard"].jsonSchema.input=="function"}function Ui(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t!==null&&t["~standard"]!==null&&"version"in t["~standard"]&&t["~standard"].version===1&&"validate"in t["~standard"]&&typeof t["~standard"].validate=="function"}function Wl(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],c=!e.includes(a);l.type==="object"&&l.properties?r[a]=Wl(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:Wl(l.items,l.items.required||[])}:c&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=Wl(n.items,n.items.required||[])),n}function gy(t,e={}){if(!t)return;const{forStructuredOutput:n=!1}=e;if(x6(t)){let s=t["~standard"].jsonSchema.input({target:"draft-07"});if(typeof s=="object"&&"$schema"in s){const{$schema:a,...l}=s;s=l}return typeof s=="object"&&("properties"in s&&!s.type&&(s.type="object"),s.type==="object"&&!("properties"in s)&&(s.properties={}),s.type==="object"&&!("required"in s)&&(s.required=[]),n&&(s=Wl(s,s.required||[]))),s}return n&&typeof t=="object"?Wl(t,t.required||[]):t}function so(t,e){if(!Ui(t))return e;const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Error("Schema validation returned a Promise. Use validateWithStandardSchema for async validation.");if(!n.issues)return n.value;const r=n.issues.map(s=>s.message||"Validation failed").join(", ");throw new Error(`Validation failed: ${r}`)}class S6{constructor(e){this.toolCallsMap=new Map,this.tools=e}addToolCallChunk(e){const n=e.index,r=this.toolCallsMap.get(n);r?(e.toolCall.function.name&&!r.function.name&&(r.function.name=e.toolCall.function.name),e.toolCall.function.arguments&&(r.function.arguments+=e.toolCall.function.arguments)):e.toolCall.id&&e.toolCall.function.name&&this.toolCallsMap.set(n,{id:e.toolCall.id,type:"function",function:{name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||""}})}hasToolCalls(){return this.getToolCalls().length>0}getToolCalls(){return Array.from(this.toolCallsMap.values()).filter(e=>e.id&&e.function.name&&e.function.name.trim().length>0)}async*executeTools(e){const n=this.getToolCalls(),r=[];for(const s of n){const a=this.tools.find(c=>c.name===s.function.name);let l;if(a?.execute)try{let c;try{c=JSON.parse(s.function.arguments)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${s.function.arguments}`)}if(a.inputSchema&&Ui(a.inputSchema))try{c=so(a.inputSchema,c)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Input validation failed for tool ${a.name}: ${m}`)}let f=await a.execute(c);if(a.outputSchema&&Ui(a.outputSchema)&&f!==void 0&&f!==null)try{f=so(a.outputSchema,f)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Output validation failed for tool ${a.name}: ${m}`)}l=typeof f=="string"?f:JSON.stringify(f)}catch(c){l=`Error executing tool: ${c instanceof Error?c.message:"Unknown error"}`}else l=`Tool ${s.function.name} does not have an execute function`;yield{type:"tool_result",id:e.id,model:e.model,timestamp:Date.now(),toolCallId:s.id,content:l},r.push({role:"tool",content:l,toolCallId:s.id})}return r}clear(){this.toolCallsMap.clear()}}async function s1(t,e,n=new Map,r=new Map){const s=[],a=[],l=[],c=new Map;for(const f of e)c.set(f.name,f);for(const f of t){const d=c.get(f.function.name),m=f.function.name;if(!d){s.push({toolCallId:f.id,toolName:m,result:{error:`Unknown tool: ${m}`},state:"output-error"});continue}let p={};const g=f.function.arguments.trim()||"{}";try{p=JSON.parse(g)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${g}`)}if(d.inputSchema&&Ui(d.inputSchema))try{p=so(d.inputSchema,p)}catch(x){const S=x instanceof Error?x.message:"Validation failed";s.push({toolCallId:f.id,toolName:m,result:{error:`Input validation failed for tool ${d.name}: ${S}`},state:"output-error"});continue}if(!d.execute){if(d.needsApproval){const x=`approval_${f.id}`;n.has(x)?n.get(x)?r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p}):s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"}):a.push({toolCallId:f.id,toolName:f.function.name,input:p,approvalId:x})}else r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p});continue}if(d.needsApproval){const x=`approval_${f.id}`;if(n.has(x))if(n.get(x)){const E=Date.now();try{let C=await d.execute(p);const k=Date.now()-E;d.outputSchema&&Ui(d.outputSchema)&&C!==void 0&&C!==null&&(C=so(d.outputSchema,C)),s.push({toolCallId:f.id,toolName:m,result:typeof C=="string"?JSON.parse(C):C||null,duration:k})}catch(C){const k=Date.now()-E,R=C instanceof Error?C.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:R},state:"output-error",duration:k})}}else s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"});else a.push({toolCallId:f.id,toolName:m,input:p,approvalId:x});continue}const y=Date.now();try{let x=await d.execute(p);const S=Date.now()-y;d.outputSchema&&Ui(d.outputSchema)&&x!==void 0&&x!==null&&(x=so(d.outputSchema,x)),s.push({toolCallId:f.id,toolName:m,result:typeof x=="string"?JSON.parse(x):x||null,duration:S})}catch(x){const S=Date.now()-y,E=x instanceof Error?x.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:E},state:"output-error",duration:S})}}return{results:s,needsApproval:a,needsClientExecution:l}}function Ok(t){return({iterationCount:e})=>e<t}class Mk{constructor(e){this.iterationCount=0,this.lastFinishReason=null,this.streamStartTime=0,this.totalChunkCount=0,this.currentMessageId=null,this.accumulatedContent="",this.doneChunk=null,this.shouldEmitStreamEnd=!0,this.earlyTermination=!1,this.toolPhase="continue",this.cyclePhase="processText",this.adapter=e.adapter,this.params=e.params,this.systemPrompts=e.params.systemPrompts||[],this.tools=e.params.tools||[],this.loopStrategy=e.params.agentLoopStrategy||Ok(5),this.toolCallManager=new S6(this.tools),this.initialMessageCount=e.params.messages.length,this.messages=e.params.messages,this.requestId=this.createId("chat"),this.streamId=this.createId("stream"),this.effectiveRequest=e.params.abortController?{signal:e.params.abortController.signal}:void 0,this.effectiveSignal=e.params.abortController?.signal}getAccumulatedContent(){return this.accumulatedContent}getMessages(){return this.messages}async*run(){this.beforeRun();try{if((yield*this.checkForPendingToolCalls())==="wait")return;do{if(this.earlyTermination||this.isAborted())return;this.beginCycle(),this.cyclePhase==="processText"?yield*this.streamModelResponse():yield*this.processToolCalls(),this.endCycle()}while(this.shouldContinue())}finally{this.afterRun()}}beforeRun(){this.streamStartTime=Date.now();const{model:e,tools:n,temperature:r,topP:s,maxTokens:a,metadata:l,modelOptions:c,conversationId:f}=this.params,d={};r!==void 0&&(d.temperature=r),s!==void 0&&(d.topP=s),a!==void 0&&(d.maxTokens=a),l!==void 0&&(d.metadata=l),$t.emit("text:started",{requestId:this.requestId,streamId:this.streamId,model:e,provider:this.adapter.name,messageCount:this.initialMessageCount,hasTools:!!n&&n.length>0,streaming:!0,timestamp:Date.now(),clientId:f,toolNames:n?.map(m=>m.name),options:Object.keys(d).length>0?d:void 0,modelOptions:c}),$t.emit("stream:started",{streamId:this.streamId,model:e,provider:this.adapter.name,timestamp:Date.now()})}afterRun(){if(!this.shouldEmitStreamEnd)return;const e=Date.now();$t.emit("text:completed",{requestId:this.requestId,streamId:this.streamId,model:this.params.model,content:this.accumulatedContent,messageId:this.currentMessageId||void 0,finishReason:this.lastFinishReason||void 0,usage:this.doneChunk?.usage,timestamp:e}),$t.emit("stream:ended",{requestId:this.requestId,streamId:this.streamId,totalChunks:this.totalChunkCount,duration:e-this.streamStartTime,timestamp:e})}beginCycle(){this.cyclePhase==="processText"&&this.beginIteration()}endCycle(){if(this.cyclePhase==="processText"){this.cyclePhase="executeToolCalls";return}this.cyclePhase="processText",this.iterationCount++}beginIteration(){this.currentMessageId=this.createId("msg"),this.accumulatedContent="",this.doneChunk=null}async*streamModelResponse(){const{temperature:e,topP:n,maxTokens:r,metadata:s,modelOptions:a}=this.params,c=this.params.tools?.map(f=>({...f,inputSchema:f.inputSchema?gy(f.inputSchema):void 0,outputSchema:f.outputSchema?gy(f.outputSchema):void 0}));for await(const f of this.adapter.chatStream({model:this.params.model,messages:this.messages,tools:c,temperature:e,topP:n,maxTokens:r,metadata:s,request:this.effectiveRequest,modelOptions:a,systemPrompts:this.systemPrompts}))if(this.isAborted()||(this.totalChunkCount++,yield f,this.handleStreamChunk(f),this.earlyTermination))break}handleStreamChunk(e){switch(e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break}}handleContentChunk(e){this.accumulatedContent=e.content,$t.emit("stream:chunk:content",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}handleToolCallChunk(e){this.toolCallManager.addToolCallChunk(e),$t.emit("stream:chunk:tool-call",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCall.id,toolName:e.toolCall.function.name,index:e.index,arguments:e.toolCall.function.arguments,timestamp:Date.now()})}handleToolResultChunk(e){$t.emit("stream:chunk:tool-result",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCallId,result:e.content,timestamp:Date.now()})}handleDoneChunk(e){if(this.doneChunk?.finishReason==="tool_calls"&&e.finishReason==="stop"){this.lastFinishReason=e.finishReason,$t.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&$t.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()});return}this.doneChunk=e,this.lastFinishReason=e.finishReason,$t.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&$t.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()})}handleErrorChunk(e){$t.emit("stream:chunk:error",{streamId:this.streamId,messageId:this.currentMessageId||void 0,error:e.error.message,timestamp:Date.now()}),this.earlyTermination=!0,this.shouldEmitStreamEnd=!1}handleThinkingChunk(e){$t.emit("stream:chunk:thinking",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}async*checkForPendingToolCalls(){const e=this.getPendingToolCallsFromMessages();if(e.length===0)return"continue";const n=this.createSyntheticDoneChunk();$t.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()});const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await s1(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const c of this.emitApprovalRequests(a.needsApproval,n))yield c;for(const c of this.emitClientToolInputs(a.needsClientExecution,n))yield c;return this.shouldEmitStreamEnd=!1,"wait"}const l=this.emitToolResults(a.results,n);for(const c of l)yield c;return"continue"}async*processToolCalls(){if(!this.shouldExecuteToolPhase()){this.setToolPhase("stop");return}const e=this.toolCallManager.getToolCalls(),n=this.doneChunk;if(!n||e.length===0){this.setToolPhase("stop");return}$t.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()}),this.addAssistantToolCallMessage(e);const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await s1(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const c of this.emitApprovalRequests(a.needsApproval,n))yield c;for(const c of this.emitClientToolInputs(a.needsClientExecution,n))yield c;this.setToolPhase("wait");return}const l=this.emitToolResults(a.results,n);for(const c of l)yield c;this.toolCallManager.clear(),this.setToolPhase("continue")}shouldExecuteToolPhase(){return this.doneChunk?.finishReason==="tool_calls"&&this.tools.length>0&&this.toolCallManager.hasToolCalls()}addAssistantToolCallMessage(e){this.messages=[...this.messages,{role:"assistant",content:this.accumulatedContent||null,toolCalls:e}]}collectClientState(){const e=new Map,n=new Map;for(const r of this.messages)if(r.role==="assistant"&&r.parts){const s=r.parts;for(const a of s)a.type==="tool-call"&&a.state==="approval-responded"&&a.approval&&e.set(a.approval.id,a.approval.approved),a.type==="tool-call"&&a.output!==void 0&&!a.approval&&n.set(a.id,a.output)}return{approvals:e,clientToolResults:n}}emitApprovalRequests(e,n){const r=[];for(const s of e)$t.emit("stream:approval-requested",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approvalId:s.approvalId,timestamp:Date.now()}),r.push({type:"approval-requested",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approval:{id:s.approvalId,needsApproval:!0}});return r}emitClientToolInputs(e,n){const r=[];for(const s of e)$t.emit("stream:tool-input-available",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,timestamp:Date.now()}),r.push({type:"tool-input-available",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input});return r}emitToolResults(e,n){const r=[];for(const s of e){$t.emit("tool:call-completed",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,result:s.result,duration:s.duration??0,timestamp:Date.now()});const a=JSON.stringify(s.result),l={type:"tool_result",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,content:a};r.push(l),this.messages=[...this.messages,{role:"tool",content:a,toolCallId:s.toolCallId}]}return r}getPendingToolCallsFromMessages(){const e=new Set(this.messages.filter(r=>r.role==="tool"&&r.toolCallId).map(r=>r.toolCallId)),n=[];for(const r of this.messages)if(r.role==="assistant"&&r.toolCalls)for(const s of r.toolCalls)e.has(s.id)||n.push(s);return n}createSyntheticDoneChunk(){return{type:"done",id:this.createId("pending"),model:this.params.model,timestamp:Date.now(),finishReason:"tool_calls"}}shouldContinue(){return this.cyclePhase==="executeToolCalls"?!0:this.loopStrategy({iterationCount:this.iterationCount,messages:this.messages,finishReason:this.lastFinishReason})&&this.toolPhase==="continue"}isAborted(){return!!this.effectiveSignal?.aborted}setToolPhase(e){this.toolPhase=e,e==="wait"&&(this.shouldEmitStreamEnd=!1)}createId(e){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}}function w6(t){const{outputSchema:e,stream:n}=t;return e?C6(t):n===!1?_6(t):Ik(t)}async function*Ik(t){const{adapter:e,...n}=t,r=e.model,s=new Mk({adapter:e,params:{...n,model:r}});for await(const a of s.run())yield a}function _6(t){const e=Ik(t);return b6(e)}async function C6(t){const{adapter:e,outputSchema:n,...r}=t,s=e.model;if(!n)throw new Error("outputSchema is required for structured output");const a=new Mk({adapter:e,params:{...r,model:s}});for await(const g of a.run());const l=a.getMessages(),{tools:c,agentLoopStrategy:f,...d}=r,m=gy(n);if(!m)throw new Error("Failed to convert output schema to JSON Schema");const p=await e.structuredOutput({chatOptions:{...d,model:s,messages:l},outputSchema:m});return Ui(n)?so(n,p.data):p.data}function Ou(t){return{__toolSide:"definition",...t,server(n){return{__toolSide:"server",...t,execute:n}},client(n){return{__toolSide:"client",...t,execute:n}}}}function i1(t){return t===null?"":typeof t=="string"?t:t.filter(e=>e.type==="text").map(e=>e.content).join("")}function E6(t){const e=[];for(const n of t)"parts"in n?e.push(...Nk(n)):e.push(n);return e}function Nk(t){const e=[];if(t.role==="system")return e;const n=[],r=[],s=[];for(const c of t.parts)c.type==="text"?n.push(c):c.type==="tool-call"?r.push(c):c.type==="tool-result"&&s.push(c);const a=n.map(c=>c.content).join("")||null,l=r.length>0?r.filter(c=>c.state==="input-complete"||c.state==="approval-responded"||c.output!==void 0).map(c=>({id:c.id,type:"function",function:{name:c.name,arguments:c.arguments}})):void 0;t.role!=="assistant"||a||!l?e.push({role:t.role,content:a,...l&&l.length>0&&{toolCalls:l}}):l.length>0&&e.push({role:"assistant",content:a,toolCalls:l});for(const c of s)(c.state==="complete"||c.state==="error")&&e.push({role:"tool",content:c.content,toolCallId:c.toolCallId});return e}function k6(t,e){const n=[],r=i1(t.content);if(r&&n.push({type:"text",content:r}),t.toolCalls&&t.toolCalls.length>0)for(const s of t.toolCalls)n.push({type:"tool-call",id:s.id,name:s.function.name,arguments:s.function.arguments,state:"input-complete"});return t.role==="tool"&&t.toolCallId&&n.push({type:"tool-result",toolCallId:t.toolCallId,content:i1(t.content),state:"complete"}),{id:e||pd(),role:t.role==="tool"?"assistant":t.role,parts:n}}function R6(t,e){return"parts"in t?{...t,id:t.id||e(),createdAt:t.createdAt||new Date}:{...k6(t,e()),createdAt:new Date}}function pd(){return`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`}var Oi={},lg={},a1;function o1(){return a1||(a1=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(lg)),lg}var l1;function T6(){return l1||(l1=1,(function(t){var e=Oi&&Oi.__createBinding||(Object.create?(function(d,m,p,g){g===void 0&&(g=p);var y=Object.getOwnPropertyDescriptor(m,p);(!y||("get"in y?!m.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(d,g,y)}):(function(d,m,p,g){g===void 0&&(g=p),d[g]=m[p]})),n=Oi&&Oi.__exportStar||function(d,m){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&e(m,d,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=o1();Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(o1(),t);class s extends Error{}t.PartialJSON=s;class a extends Error{}t.MalformedJSON=a;function l(d,m=r.Allow.ALL){if(typeof d!="string")throw new TypeError(`expecting str, got ${typeof d}`);if(!d.trim())throw new Error(`${d} is empty`);return c(d.trim(),m)}t.parseJSON=l;const c=(d,m)=>{const p=d.length;let g=0;const y=j=>{throw new s(`${j} at position ${g}`)},x=j=>{throw new a(`${j} at position ${g}`)},S=()=>(N(),g>=p&&y("Unexpected end of input"),d[g]==='"'?E():d[g]==="{"?C():d[g]==="["?k():d.substring(g,g+4)==="null"||r.Allow.NULL&m&&p-g<4&&"null".startsWith(d.substring(g))?(g+=4,null):d.substring(g,g+4)==="true"||r.Allow.BOOL&m&&p-g<4&&"true".startsWith(d.substring(g))?(g+=4,!0):d.substring(g,g+5)==="false"||r.Allow.BOOL&m&&p-g<5&&"false".startsWith(d.substring(g))?(g+=5,!1):d.substring(g,g+8)==="Infinity"||r.Allow.INFINITY&m&&p-g<8&&"Infinity".startsWith(d.substring(g))?(g+=8,1/0):d.substring(g,g+9)==="-Infinity"||r.Allow._INFINITY&m&&1<p-g&&p-g<9&&"-Infinity".startsWith(d.substring(g))?(g+=9,-1/0):d.substring(g,g+3)==="NaN"||r.Allow.NAN&m&&p-g<3&&"NaN".startsWith(d.substring(g))?(g+=3,NaN):R()),E=()=>{const j=g;let T=!1;for(g++;g<p&&(d[g]!=='"'||T&&d[g-1]==="\\");)T=d[g]==="\\"?!T:!1,g++;if(d.charAt(g)=='"')try{return JSON.parse(d.substring(j,++g-Number(T)))}catch(D){x(String(D))}else if(r.Allow.STR&m)try{return JSON.parse(d.substring(j,g-Number(T))+'"')}catch{return JSON.parse(d.substring(j,d.lastIndexOf("\\"))+'"')}y("Unterminated string literal")},C=()=>{g++,N();const j={};try{for(;d[g]!=="}";){if(N(),g>=p&&r.Allow.OBJ&m)return j;const T=E();N(),g++;try{const D=S();j[T]=D}catch(D){if(r.Allow.OBJ&m)return j;throw D}N(),d[g]===","&&g++}}catch{if(r.Allow.OBJ&m)return j;y("Expected '}' at end of object")}return g++,j},k=()=>{g++;const j=[];try{for(;d[g]!=="]";)j.push(S()),N(),d[g]===","&&g++}catch{if(r.Allow.ARR&m)return j;y("Expected ']' at end of array")}return g++,j},R=()=>{if(g===0){d==="-"&&x("Not sure what '-' is");try{return JSON.parse(d)}catch(T){if(r.Allow.NUM&m)try{return JSON.parse(d.substring(0,d.lastIndexOf("e")))}catch{}x(String(T))}}const j=g;for(d[g]==="-"&&g++;d[g]&&",]}".indexOf(d[g])===-1;)g++;g==p&&!(r.Allow.NUM&m)&&y("Unterminated number literal");try{return JSON.parse(d.substring(j,g))}catch{d.substring(j,g)==="-"&&y("Not sure what '-' is");try{return JSON.parse(d.substring(j,d.lastIndexOf("e")))}catch(D){x(String(D))}}},N=()=>{for(;g<p&&` 
\r	`.includes(d[g]);)g++};return S()},f=l;t.parse=f})(Oi)),Oi}var A6=T6();class O6{parse(e){if(!(!e||e.trim()===""))try{return A6.parse(e)}catch{return}}}const M6=new O6;function I6(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.length>0?s[s.length-1]:null;return a&&a.type==="text"?s[s.length-1]={type:"text",content:n}:s.push({type:"text",content:n}),{...r,parts:s}})}function ug(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(c=>c.type==="tool-call"&&c.id===n.id),l={type:"tool-call",id:n.id,name:n.name,arguments:n.arguments,state:n.state};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}function u1(t,e,n,r,s,a){return t.map(l=>{if(l.id!==e)return l;const c=[...l.parts],f=c.findIndex(m=>m.type==="tool-result"&&m.toolCallId===n),d={type:"tool-result",toolCallId:n,content:r,state:s,...a&&{error:a}};return f>=0?c[f]=d:c.push(d),{...l,parts:c}})}function N6(t,e,n,r){return t.map(s=>{if(s.id!==e)return s;const a=[...s.parts],l=a.find(c=>c.type==="tool-call"&&c.id===n);return l&&(l.state="approval-requested",l.approval={id:r,needsApproval:!0}),{...s,parts:a}})}function z6(t,e,n,r,s){return t.map(a=>{const l=[...a.parts],c=l.find(f=>f.type==="tool-call"&&f.id===e);return c&&(c.output=s?{error:s}:n,r?c.state=r:c.state="input-complete"),{...a,parts:l}})}function D6(t,e,n){return t.map(r=>{const s=[...r.parts],a=s.find(l=>l.type==="tool-call"&&l.approval?.id===e);return a&&a.approval&&(a.approval.approved=n,a.state="approval-responded"),{...r,parts:s}})}function j6(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(c=>c.type==="thinking"),l={type:"thinking",content:n};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}class L6{shouldEmit(e,n){return!0}}class I0{constructor(e={}){this.messages=[],this.currentAssistantMessageId=null,this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls=new Map,this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.recording=null,this.recordingStartTime=0,this.chunkStrategy=e.chunkStrategy||new L6,this.events=e.events||{},this.handlers=e.handlers||{},this.jsonParser=e.jsonParser||M6,this.recordingEnabled=e.recording??!1,e.initialMessages&&(this.messages=[...e.initialMessages])}setMessages(e){this.messages=[...e],this.emitMessagesChange()}addUserMessage(e){const n={id:pd(),role:"user",parts:[{type:"text",content:e}],createdAt:new Date};return this.messages=[...this.messages,n],this.emitMessagesChange(),n}startAssistantMessage(){this.resetStreamState();const e={id:pd(),role:"assistant",parts:[],createdAt:new Date};return this.currentAssistantMessageId=e.id,this.messages=[...this.messages,e],this.events.onStreamStart?.(),this.emitMessagesChange(),e.id}addToolResult(e,n,r){const s=this.messages.find(f=>f.parts.some(d=>d.type==="tool-call"&&d.id===e));if(!s){console.warn(`[StreamProcessor] Could not find message with tool call ${e}`);return}let a=z6(this.messages,e,n,r?"input-complete":void 0,r);const l=typeof n=="string"?n:JSON.stringify(n),c=r?"error":"complete";a=u1(a,s.id,e,l,c,r),this.messages=a,this.emitMessagesChange()}addToolApprovalResponse(e,n){this.messages=D6(this.messages,e,n),this.emitMessagesChange()}toModelMessages(){const e=[];for(const n of this.messages)e.push(...Nk(n));return e}getMessages(){return this.messages}areAllToolsComplete(){const e=this.messages.findLast(r=>r.role==="assistant");if(!e)return!0;const n=e.parts.filter(r=>r.type==="tool-call");return n.length===0?!0:n.every(r=>r.state==="approval-responded"||r.output!==void 0&&!r.approval)}removeMessagesAfter(e){this.messages=this.messages.slice(0,e+1),this.emitMessagesChange()}clearMessages(){this.messages=[],this.currentAssistantMessageId=null,this.emitMessagesChange()}async process(e){this.resetStreamState(),this.recordingEnabled&&this.startRecording();for await(const n of e)this.processChunk(n);return this.finalizeStream(),this.recording&&(this.recording.result=this.getResult()),this.getResult()}processChunk(e){switch(this.recording&&this.recording.chunks.push({chunk:e,timestamp:Date.now(),index:this.recording.chunks.length}),e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break;case"approval-requested":this.handleApprovalRequestedChunk(e);break;case"tool-input-available":this.handleToolInputAvailableChunk(e);break}}handleContentChunk(e){this.completeAllToolCalls();const n=this.currentSegmentText;this.hasToolCallsSinceTextStart&&n.length>0&&this.isNewTextSegment(e,n)&&(n!==this.lastEmittedText&&this.emitTextUpdate(),this.currentSegmentText="",this.lastEmittedText="",this.hasToolCallsSinceTextStart=!1);const s=this.currentSegmentText;let a=s;e.delta!==""?a=s+e.delta:e.content!==""&&(e.content.startsWith(s)?a=e.content:s.startsWith(e.content)?a=s:a=s+e.content);const l=a.slice(s.length);this.currentSegmentText=a,this.totalTextContent+=l;const c=e.delta??e.content??"";this.chunkStrategy.shouldEmit(c,this.currentSegmentText)&&this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate()}handleToolCallChunk(e){this.hasToolCallsSinceTextStart=!0;const n=e.toolCall.id,r=this.toolCalls.get(n);if(r){const s=r.state==="awaiting-input";r.arguments+=e.toolCall.function.arguments||"",s&&e.toolCall.function.arguments&&(r.state="input-streaming"),r.parsedArguments=this.jsonParser.parse(r.arguments);const a=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStateChange?.(a,r.id,r.name,r.state,r.arguments,r.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(a,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=ug(this.messages,this.currentAssistantMessageId,{id:r.id,name:r.name,arguments:r.arguments,state:r.state}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,r.id,r.state,r.arguments))}else{const s=e.toolCall.function.arguments?"input-streaming":"awaiting-input",a={id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s,parsedArguments:void 0,index:e.index};e.toolCall.function.arguments&&(a.parsedArguments=this.jsonParser.parse(e.toolCall.function.arguments)),this.toolCalls.set(n,a),this.toolCallOrder.push(n);const l=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStart?.(l,e.toolCall.id,e.toolCall.function.name),this.handlers.onToolCallStateChange?.(l,e.toolCall.id,e.toolCall.function.name,s,e.toolCall.function.arguments||"",a.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(l,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=ug(this.messages,this.currentAssistantMessageId,{id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,e.toolCall.id,s,e.toolCall.function.arguments||""))}}handleToolResultChunk(e){const n="complete";this.handlers.onToolResultStateChange?.(e.toolCallId,e.content,n),this.currentAssistantMessageId&&(this.messages=u1(this.messages,this.currentAssistantMessageId,e.toolCallId,e.content,n),this.emitMessagesChange())}handleDoneChunk(e){this.finishReason=e.finishReason,this.isDone=!0,this.completeAllToolCalls()}handleErrorChunk(e){this.handlers.onError?.(e.error),this.events.onError?.(new Error(e.error.message))}handleThinkingChunk(e){const n=this.thinkingContent;let r=n;e.delta!==""?r=n+e.delta:e.content!==""&&(e.content.startsWith(n)?r=e.content:n.startsWith(e.content)?r=n:r=n+e.content),this.thinkingContent=r,this.handlers.onThinkingUpdate?.(this.thinkingContent),this.currentAssistantMessageId&&(this.messages=j6(this.messages,this.currentAssistantMessageId,this.thinkingContent),this.emitMessagesChange(),this.events.onThinkingUpdate?.(this.currentAssistantMessageId,this.thinkingContent))}handleApprovalRequestedChunk(e){this.handlers.onApprovalRequested?.(e.toolCallId,e.toolName,e.input,e.approval.id),this.currentAssistantMessageId&&(this.messages=N6(this.messages,this.currentAssistantMessageId,e.toolCallId,e.approval.id),this.emitMessagesChange()),this.events.onApprovalRequest?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,approvalId:e.approval.id})}handleToolInputAvailableChunk(e){this.handlers.onToolInputAvailable?.(e.toolCallId,e.toolName,e.input),this.events.onToolCall?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input})}isNewTextSegment(e,n){return e.delta!==void 0&&e.content!==void 0&&(e.content.length<n.length||!e.content.startsWith(n)&&!n.startsWith(e.content))}completeAllToolCalls(){this.toolCalls.forEach((e,n)=>{if(e.state!=="input-complete"){const r=this.toolCallOrder.indexOf(n);this.completeToolCall(r,e)}})}completeToolCall(e,n){n.state="input-complete",n.parsedArguments=this.jsonParser.parse(n.arguments),this.handlers.onToolCallStateChange?.(e,n.id,n.name,"input-complete",n.arguments,n.parsedArguments),this.handlers.onToolCallComplete?.(e,n.id,n.name,n.arguments),this.currentAssistantMessageId&&(this.messages=ug(this.messages,this.currentAssistantMessageId,{id:n.id,name:n.name,arguments:n.arguments,state:"input-complete"}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,n.id,"input-complete",n.arguments))}emitTextUpdate(){this.lastEmittedText=this.currentSegmentText,this.handlers.onTextUpdate?.(this.currentSegmentText),this.currentAssistantMessageId&&(this.messages=I6(this.messages,this.currentAssistantMessageId,this.currentSegmentText),this.emitMessagesChange(),this.events.onTextUpdate?.(this.currentAssistantMessageId,this.currentSegmentText))}emitMessagesChange(){this.events.onMessagesChange?.([...this.messages])}finalizeStream(){this.completeAllToolCalls(),this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate();const e=this.getCompletedToolCalls();if(this.handlers.onStreamEnd?.(this.totalTextContent,e.length>0?e:void 0),this.currentAssistantMessageId){const n=this.messages.find(r=>r.id===this.currentAssistantMessageId);n&&this.events.onStreamEnd?.(n)}}getCompletedToolCalls(){return Array.from(this.toolCalls.values()).filter(e=>e.state==="input-complete").map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:e.arguments}}))}getResult(){const e=this.getCompletedToolCalls();return{content:this.totalTextContent,thinking:this.thinkingContent||void 0,toolCalls:e.length>0?e:void 0,finishReason:this.finishReason}}getState(){return{content:this.totalTextContent,thinking:this.thinkingContent,toolCalls:new Map(this.toolCalls),toolCallOrder:[...this.toolCallOrder],finishReason:this.finishReason,done:this.isDone}}startRecording(){this.recordingEnabled=!0,this.recordingStartTime=Date.now(),this.recording={version:"1.0",timestamp:this.recordingStartTime,chunks:[]}}getRecording(){return this.recording}resetStreamState(){this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls.clear(),this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.chunkStrategy.reset?.()}reset(){this.resetStreamState(),this.messages=[],this.currentAssistantMessageId=null}static async replay(e,n){return new I0(n).process(P6(e))}}function P6(t){return{async*[Symbol.asyncIterator](){for(const{chunk:e}of t.chunks)yield e}}}class $6{constructor(e){this.clientId=e}clientCreated(e){this.emitEvent("client:created",{initialMessageCount:e})}loadingChanged(e){this.emitEvent("client:loading-changed",{isLoading:e})}errorChanged(e){this.emitEvent("client:error-changed",{error:e})}textUpdated(e,n,r){this.emitEvent("processor:text-updated",{streamId:e,content:r}),this.emitEvent("client:assistant-message-updated",{messageId:n,content:r})}toolCallStateChanged(e,n,r,s,a,l){this.emitEvent("processor:tool-call-state-changed",{streamId:e,toolCallId:r,toolName:s,state:a,arguments:l}),this.emitEvent("client:tool-call-updated",{messageId:n,toolCallId:r,toolName:s,state:a,arguments:l})}toolResultStateChanged(e,n,r,s,a){this.emitEvent("processor:tool-result-state-changed",{streamId:e,toolCallId:n,content:r,state:s,error:a})}thinkingUpdated(e,n,r,s){this.emitEvent("stream:chunk:thinking",{streamId:e,messageId:n,content:r,delta:s})}approvalRequested(e,n,r,s,a){this.emitEvent("client:approval-requested",{messageId:e,toolCallId:n,toolName:r,input:s,approvalId:a})}messageAppended(e){const n=e.parts.filter(r=>r.type==="text").map(r=>r.content).join(" ").substring(0,100);this.emitEvent("client:message-appended",{messageId:e.id,role:e.role,contentPreview:n})}messageSent(e,n){this.emitEvent("client:message-sent",{messageId:e,content:n})}reloaded(e){this.emitEvent("client:reloaded",{fromMessageIndex:e})}stopped(){this.emitEvent("client:stopped")}messagesCleared(){this.emitEvent("client:messages-cleared")}toolResultAdded(e,n,r,s){this.emitEvent("tool:result-added",{toolCallId:e,toolName:n,output:r,state:s})}toolApprovalResponded(e,n,r){this.emitEvent("tool:approval-responded",{approvalId:e,toolCallId:n,approved:r})}}class F6 extends $6{emitEvent(e,n){e.startsWith("client:")||e.startsWith("tool:")?$t.emit(e,{...n,clientId:this.clientId,timestamp:Date.now()}):$t.emit(e,{...n,timestamp:Date.now()})}}class B6{constructor(e){if(this.body={},this.isLoading=!1,this.error=void 0,this.abortController=null,this.currentStreamId=null,this.currentMessageId=null,this.postStreamActions=[],this.uniqueId=e.id||this.generateUniqueId("chat"),this.body=e.body||{},this.connection=e.connection,this.events=new F6(this.uniqueId),this.clientToolsRef={current:new Map},e.tools)for(const n of e.tools)this.clientToolsRef.current.set(n.name,n);this.callbacksRef={current:{onResponse:e.onResponse||(()=>{}),onChunk:e.onChunk||(()=>{}),onFinish:e.onFinish||(()=>{}),onError:e.onError||(()=>{}),onMessagesChange:e.onMessagesChange||(()=>{}),onLoadingChange:e.onLoadingChange||(()=>{}),onErrorChange:e.onErrorChange||(()=>{})}},this.processor=new I0({chunkStrategy:e.streamProcessor?.chunkStrategy,initialMessages:e.initialMessages,events:{onMessagesChange:n=>{this.callbacksRef.current.onMessagesChange(n)},onStreamStart:()=>{},onStreamEnd:n=>{this.callbacksRef.current.onFinish(n)},onError:n=>{this.setError(n),this.callbacksRef.current.onError(n)},onTextUpdate:(n,r)=>{this.currentStreamId&&this.events.textUpdated(this.currentStreamId,n,r)},onThinkingUpdate:(n,r)=>{this.currentStreamId&&this.events.thinkingUpdated(this.currentStreamId,n,r)},onToolCallStateChange:(n,r,s,a)=>{const d=this.processor.getMessages().find(m=>m.id===n)?.parts.find(m=>m.type==="tool-call"&&m.id===r)?.name||"unknown";this.currentStreamId&&this.events.toolCallStateChanged(this.currentStreamId,n,r,d,s,a)},onToolCall:async n=>{const r=this.clientToolsRef.current.get(n.toolName);if(r?.execute)try{const s=await r.execute(n.input);await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:s,state:"output-available"})}catch(s){await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:null,state:"output-error",errorText:s.message})}},onApprovalRequest:n=>{this.events.approvalRequested(this.currentMessageId||"",n.toolCallId,n.toolName,n.input,n.approvalId)}}}),this.events.clientCreated(this.processor.getMessages().length)}generateUniqueId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substring(7)}`}setIsLoading(e){this.isLoading=e,this.callbacksRef.current.onLoadingChange(e),this.events.loadingChanged(e)}setError(e){this.error=e,this.callbacksRef.current.onErrorChange(e),this.events.errorChanged(e?.message||null)}async processStream(e){this.currentStreamId=this.generateUniqueId("stream");const n=this.processor.startAssistantMessage();this.currentMessageId=n;const r={id:n,role:"assistant",parts:[],createdAt:new Date};this.events.messageAppended(r);for await(const l of e)this.callbacksRef.current.onChunk(l),this.processor.processChunk(l),await new Promise(c=>setTimeout(c,0));return this.processor.finalizeStream(),this.currentStreamId=null,this.currentMessageId=null,this.processor.getMessages().find(l=>l.id===n)||{id:n,role:"assistant",parts:[],createdAt:new Date}}async sendMessage(e){if(!e.trim()||this.isLoading)return;const n=this.processor.addUserMessage(e.trim());this.events.messageSent(n.id,e.trim()),await this.streamResponse()}async append(e){const n=R6(e,pd);if(n.role==="system")return;const r=n;this.events.messageAppended(r);const s=this.processor.getMessages();this.processor.setMessages([...s,r]),await this.streamResponse()}async streamResponse(){this.setIsLoading(!0),this.setError(void 0),this.abortController=new AbortController;try{const e=this.processor.toModelMessages();await this.callbacksRef.current.onResponse();const n={...this.body,conversationId:this.uniqueId},r=this.connection.connect(e,n,this.abortController.signal);await this.processStream(r)}catch(e){if(e instanceof Error){if(e.name==="AbortError")return;this.setError(e),this.callbacksRef.current.onError(e)}}finally{this.abortController=null,this.setIsLoading(!1),await this.drainPostStreamActions()}}async reload(){const e=this.processor.getMessages();if(e.length===0)return;const n=e.findLastIndex(r=>r.role==="user");n!==-1&&(this.events.reloaded(n),this.processor.removeMessagesAfter(n),await this.streamResponse())}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.setIsLoading(!1),this.events.stopped()}clear(){this.processor.clearMessages(),this.setError(void 0),this.events.messagesCleared()}async addToolResult(e){if(this.events.toolResultAdded(e.toolCallId,e.tool,e.output,e.state||"output-available"),this.processor.addToolResult(e.toolCallId,e.output,e.errorText),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}async addToolApprovalResponse(e){const n=this.processor.getMessages();let r;for(const s of n){const a=s.parts.find(l=>l.type==="tool-call"&&l.approval?.id===e.id);if(a){r=a.id;break}}if(r&&this.events.toolApprovalResponded(e.id,r,e.approved),this.processor.addToolApprovalResponse(e.id,e.approved),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}queuePostStreamAction(e){this.postStreamActions.push(e)}async drainPostStreamActions(){for(;this.postStreamActions.length>0;)await this.postStreamActions.shift()()}async checkForContinuation(){this.shouldAutoSend()&&await this.streamResponse()}shouldAutoSend(){return this.processor.areAllToolsComplete()}getMessages(){return this.processor.getMessages()}getIsLoading(){return this.isLoading}getError(){return this.error}setMessagesManually(e){this.processor.setMessages(e)}updateOptions(e){if(e.connection!==void 0&&(this.connection=e.connection),e.body!==void 0&&(this.body=e.body),e.tools!==void 0){this.clientToolsRef.current=new Map;for(const n of e.tools)this.clientToolsRef.current.set(n.name,n)}e.onResponse!==void 0&&(this.callbacksRef.current.onResponse=e.onResponse),e.onChunk!==void 0&&(this.callbacksRef.current.onChunk=e.onChunk),e.onFinish!==void 0&&(this.callbacksRef.current.onFinish=e.onFinish),e.onError!==void 0&&(this.callbacksRef.current.onError=e.onError)}}function U6(...t){return t}function q6(t){return{async*connect(e,n){const r=E6(e);yield*t(r,n)}}}function H6(t){const e=q.useId(),n=t.id||e,[r,s]=q.useState(t.initialMessages||[]),[a,l]=q.useState(!1),[c,f]=q.useState(void 0),d=q.useRef(t.initialMessages||[]),m=q.useRef(!0);q.useEffect(()=>{d.current=r},[r]);const p=q.useRef(t);p.current=t;const g=q.useMemo(()=>{const j=m.current?t.initialMessages||[]:d.current;return m.current=!1,new B6({connection:p.current.connection,id:n,initialMessages:j,body:p.current.body,onResponse:p.current.onResponse,onChunk:p.current.onChunk,onFinish:p.current.onFinish,onError:p.current.onError,tools:p.current.tools,streamProcessor:t.streamProcessor,onMessagesChange:T=>{s(T)},onLoadingChange:T=>{l(T)},onErrorChange:T=>{f(T)}})},[n]);q.useEffect(()=>{t.initialMessages&&t.initialMessages.length>0&&r.length===0&&g.setMessagesManually(t.initialMessages)},[]),q.useEffect(()=>()=>{g.stop()},[g]);const y=q.useCallback(async j=>{await g.sendMessage(j)},[g]),x=q.useCallback(async j=>{await g.append(j)},[g]),S=q.useCallback(async()=>{await g.reload()},[g]),E=q.useCallback(()=>{g.stop()},[g]),C=q.useCallback(()=>{g.clear()},[g]),k=q.useCallback(j=>{g.setMessagesManually(j)},[g]),R=q.useCallback(async j=>{await g.addToolResult(j)},[g]),N=q.useCallback(async j=>{await g.addToolApprovalResponse(j)},[g]);return{messages:r,sendMessage:y,append:x,reload:S,stop:E,isLoading:a,error:c,setMessages:k,clear:C,addToolResult:R,addToolApprovalResponse:N}}class V6{constructor(e={},n){this.kind="text",this.config=e,this.model=n}generateId(){return`${this.name}-${Date.now()}-${Math.random().toString(36).substring(7)}`}}const K6=t=>{if(t.conversation&&t.previous_response_id)throw new Error("Cannot use both 'conversation' and 'previous_response_id' in the same request.")},G6=t=>{Q6(t),K6(t)},Q6=t=>{const e=t.metadata;if(e&&Object.keys(e).length>16)throw new Error("Metadata cannot have more than 16 key-value pairs.");if(e&&Object.keys(e).some(a=>a.length>64))throw new Error("Metadata keys cannot be longer than 64 characters.");if(e&&Object.values(e).some(a=>a.length>512))throw new Error("Metadata values cannot be longer than 512 characters.")};function yy(t){if(t!==null){if(Array.isArray(t))return t.map(e=>yy(e));if(typeof t=="object"){const e={};for(const[n,r]of Object.entries(t)){const s=yy(r);s!==void 0&&(e[n]=s)}return e}return t}}function eu(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],c=!e.includes(a);l.type==="object"&&l.properties?r[a]=eu(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:eu(l.items,l.items.required||[])}:c&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=eu(n.items,n.items.required||[])),n}function Z6(t){return{type:"apply_patch"}}function Y6(t){return{type:"code_interpreter",container:t.metadata.container}}function J6(t){const e=t.metadata;return{type:"computer_use_preview",display_height:e.display_height,display_width:e.display_width,environment:e.environment}}function X6(t){const e=t.metadata;return{type:"custom",name:e.name,description:e.description,format:e.format}}function W6(t){const e=t.metadata;return{type:"file_search",vector_store_ids:e.vector_store_ids,max_num_results:e.max_num_results,ranking_options:e.ranking_options,filters:e.filters}}function e$(t){const e=t.inputSchema??{type:"object",properties:{},required:[]},n=eu(e,e.required||[]);return n.additionalProperties=!1,{type:"function",name:t.name,description:t.description,parameters:n,strict:!0}}function t$(t){return{type:"image_generation",...t.metadata}}function n$(t){return{type:"local_shell"}}function r$(t){if(!t.server_url&&!t.connector_id)throw new Error("Either server_url or connector_id must be provided.");if(t.connector_id&&t.server_url)throw new Error("Only one of server_url or connector_id can be provided.")}function s$(t){const n={type:"mcp",...t.metadata};return r$(n),n}function i$(t){return{type:"shell"}}function a$(t){const e=t.metadata;return{type:e.type,search_context_size:e.search_context_size,user_location:e.user_location}}function o$(t){return t.metadata}function l$(t){return t.map(e=>{const n=new Set(["apply_patch","code_interpreter","computer_use_preview","file_search","image_generation","local_shell","mcp","shell","web_search_preview","web_search","custom"]),r=e.name;if(n.has(r))switch(r){case"apply_patch":return Z6();case"code_interpreter":return Y6(e);case"computer_use_preview":return J6(e);case"file_search":return W6(e);case"image_generation":return t$(e);case"local_shell":return n$();case"mcp":return s$(e);case"shell":return i$();case"web_search_preview":return a$(e);case"web_search":return o$(e);case"custom":return X6(e)}return e$(e)})}function Fe(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function X(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let zk=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return zk=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function vy(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const by=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Ne extends Error{}class cn extends Ne{constructor(e,n,r,s){super(`${cn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new Hd({message:r,cause:by(n)});const a=n?.error;return e===400?new Dk(e,a,r,s):e===401?new jk(e,a,r,s):e===403?new Lk(e,a,r,s):e===404?new Pk(e,a,r,s):e===409?new $k(e,a,r,s):e===422?new Fk(e,a,r,s):e===429?new Bk(e,a,r,s):e>=500?new Uk(e,a,r,s):new cn(e,a,r,s)}}class xr extends cn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Hd extends cn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class N0 extends Hd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Dk extends cn{}class jk extends cn{}class Lk extends cn{}class Pk extends cn{}class $k extends cn{}class Fk extends cn{}class Bk extends cn{}class Uk extends cn{}class qk extends Ne{constructor(){super("Could not parse response content as the length limit was reached")}}class Hk extends Ne{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class zl extends Error{constructor(e){super(e)}}const u$=/^[a-z][a-z0-9+.-]*:/i,c$=t=>u$.test(t);let Dn=t=>(Dn=Array.isArray,Dn(t)),c1=Dn;function Vk(t){return typeof t!="object"?{}:t??{}}function f$(t){if(!t)return!0;for(const e in t)return!1;return!0}function d$(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function cg(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const h$=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ne(`${t} must be an integer`);if(e<0)throw new Ne(`${t} must be a positive integer`);return e},p$=t=>{try{return JSON.parse(t)}catch{return}},Mu=t=>new Promise(e=>setTimeout(e,t)),Ka="6.15.0",m$=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function g$(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const y$=()=>{const t=g$();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ka,"X-Stainless-OS":d1(Deno.build.os),"X-Stainless-Arch":f1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ka,"X-Stainless-OS":d1(globalThis.process.platform??"unknown"),"X-Stainless-Arch":f1(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=v$();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function v$(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${s}.${a}.${l}`}}}return null}const f1=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",d1=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let h1;const b$=()=>h1??(h1=y$());function x$(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Kk(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Gk(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Kk({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){await e.return?.()}})}function Qk(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function S$(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const w$=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),Zk="RFC3986",Yk=t=>String(t),p1={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:Yk},_$="RFC1738";let xy=(t,e)=>(xy=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),xy(t,e));const Lr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),fg=1024,C$=(t,e,n,r,s)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let l="";for(let c=0;c<a.length;c+=fg){const f=a.length>=fg?a.slice(c,c+fg):a,d=[];for(let m=0;m<f.length;++m){let p=f.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===_$&&(p===40||p===41)){d[d.length]=f.charAt(m);continue}if(p<128){d[d.length]=Lr[p];continue}if(p<2048){d[d.length]=Lr[192|p>>6]+Lr[128|p&63];continue}if(p<55296||p>=57344){d[d.length]=Lr[224|p>>12]+Lr[128|p>>6&63]+Lr[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|f.charCodeAt(m)&1023),d[d.length]=Lr[240|p>>18]+Lr[128|p>>12&63]+Lr[128|p>>6&63]+Lr[128|p&63]}l+=d.join("")}return l};function E$(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function m1(t,e){if(Dn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const Jk={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},Xk=function(t,e){Array.prototype.push.apply(t,Dn(e)?e:[e])};let g1;const Ht={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:C$,encodeValuesOnly:!1,format:Zk,formatter:Yk,indices:!1,serializeDate(t){return(g1??(g1=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function k$(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const dg={};function Wk(t,e,n,r,s,a,l,c,f,d,m,p,g,y,x,S,E,C){let k=t,R=C,N=0,j=!1;for(;(R=R.get(dg))!==void 0&&!j;){const M=R.get(t);if(N+=1,typeof M<"u"){if(M===N)throw new RangeError("Cyclic object value");j=!0}typeof R.get(dg)>"u"&&(N=0)}if(typeof d=="function"?k=d(e,k):k instanceof Date?k=g?.(k):n==="comma"&&Dn(k)&&(k=m1(k,function(M){return M instanceof Date?g?.(M):M})),k===null){if(a)return f&&!S?f(e,Ht.encoder,E,"key",y):e;k=""}if(k$(k)||E$(k)){if(f){const M=S?e:f(e,Ht.encoder,E,"key",y);return[x?.(M)+"="+x?.(f(k,Ht.encoder,E,"value",y))]}return[x?.(e)+"="+x?.(String(k))]}const T=[];if(typeof k>"u")return T;let D;if(n==="comma"&&Dn(k))S&&f&&(k=m1(k,f)),D=[{value:k.length>0?k.join(",")||null:void 0}];else if(Dn(d))D=d;else{const M=Object.keys(k);D=m?M.sort(m):M}const L=c?String(e).replace(/\./g,"%2E"):String(e),P=r&&Dn(k)&&k.length===1?L+"[]":L;if(s&&Dn(k)&&k.length===0)return P+"[]";for(let M=0;M<D.length;++M){const B=D[M],G=typeof B=="object"&&typeof B.value<"u"?B.value:k[B];if(l&&G===null)continue;const ee=p&&c?B.replace(/\./g,"%2E"):B,te=Dn(k)?typeof n=="function"?n(P,ee):P:P+(p?"."+ee:"["+ee+"]");C.set(t,N);const V=new WeakMap;V.set(dg,C),Xk(T,Wk(G,te,n,r,s,a,l,c,n==="comma"&&S&&Dn(k)?null:f,d,m,p,g,y,x,S,E,V))}return T}function R$(t=Ht){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ht.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Zk;if(typeof t.format<"u"){if(!xy(p1,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=p1[n];let s=Ht.filter;(typeof t.filter=="function"||Dn(t.filter))&&(s=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in Jk?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Ht.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ht.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ht.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ht.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ht.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ht.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ht.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ht.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ht.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ht.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ht.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ht.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ht.strictNullHandling}}function T$(t,e={}){let n=t;const r=R$(e);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):Dn(r.filter)&&(a=r.filter,s=a);const l=[];if(typeof n!="object"||n===null)return"";const c=Jk[r.arrayFormat],f=c==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const d=new WeakMap;for(let g=0;g<s.length;++g){const y=s[g];r.skipNulls&&n[y]===null||Xk(l,Wk(n[y],y,c,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}const m=l.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function A$(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let y1;function z0(t){let e;return(y1??(e=new globalThis.TextEncoder,y1=e.encode.bind(e)))(t)}let v1;function b1(t){let e;return(v1??(e=new globalThis.TextDecoder,v1=e.decode.bind(e)))(t)}var Gn,Qn;class Vd{constructor(){Gn.set(this,void 0),Qn.set(this,void 0),Fe(this,Gn,new Uint8Array),Fe(this,Qn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?z0(e):e;Fe(this,Gn,A$([X(this,Gn,"f"),n]));const r=[];let s;for(;(s=O$(X(this,Gn,"f"),X(this,Qn,"f")))!=null;){if(s.carriage&&X(this,Qn,"f")==null){Fe(this,Qn,s.index);continue}if(X(this,Qn,"f")!=null&&(s.index!==X(this,Qn,"f")+1||s.carriage)){r.push(b1(X(this,Gn,"f").subarray(0,X(this,Qn,"f")-1))),Fe(this,Gn,X(this,Gn,"f").subarray(X(this,Qn,"f"))),Fe(this,Qn,null);continue}const a=X(this,Qn,"f")!==null?s.preceding-1:s.preceding,l=b1(X(this,Gn,"f").subarray(0,a));r.push(l),Fe(this,Gn,X(this,Gn,"f").subarray(s.index)),Fe(this,Qn,null)}return r}flush(){return X(this,Gn,"f").length?this.decode(`
`):[]}}Gn=new WeakMap,Qn=new WeakMap;Vd.NEWLINE_CHARS=new Set([`
`,"\r"]);Vd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function O$(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function M$(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const md={off:0,error:200,warn:300,info:400,debug:500},x1=(t,e,n)=>{if(t){if(d$(md,t))return t;ln(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(md))}`)}};function Dl(){}function mf(t,e,n){return!e||md[t]>md[n]?Dl:e[t].bind(e)}const I$={error:Dl,warn:Dl,info:Dl,debug:Dl};let S1=new WeakMap;function ln(t){const e=t.logger,n=t.logLevel??"off";if(!e)return I$;const r=S1.get(e);if(r&&r[0]===n)return r[1];const s={error:mf("error",e,n),warn:mf("warn",e,n),info:mf("info",e,n),debug:mf("debug",e,n)};return S1.set(e,[n,s]),s}const Ii=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Cl;class Fr{constructor(e,n,r){this.iterator=e,Cl.set(this,void 0),this.controller=n,Fe(this,Cl,r)}static fromSSEResponse(e,n,r){let s=!1;const a=r?ln(r):console;async function*l(){if(s)throw new Ne("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let c=!1;try{for await(const f of N$(e,n))if(!c){if(f.data.startsWith("[DONE]")){c=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let d;try{d=JSON.parse(f.data)}catch(m){throw a.error("Could not parse message into JSON:",f.data),a.error("From chunk:",f.raw),m}if(d&&d.error)throw new cn(void 0,d.error,void 0,e.headers);yield d}else{let d;try{d=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new cn(void 0,d.error,d.message,void 0);yield{event:f.event,data:d}}}c=!0}catch(f){if(vy(f))return;throw f}finally{c||n.abort()}}return new Fr(l,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*a(){const c=new Vd,f=Qk(e);for await(const d of f)for(const m of c.decode(d))yield m;for(const d of c.flush())yield d}async function*l(){if(s)throw new Ne("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let c=!1;try{for await(const f of a())c||f&&(yield JSON.parse(f));c=!0}catch(f){if(vy(f))return;throw f}finally{c||n.abort()}}return new Fr(l,n,r)}[(Cl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),n.push(l)}return a.shift()}});return[new Fr(()=>s(e),this.controller,X(this,Cl,"f")),new Fr(()=>s(n),this.controller,X(this,Cl,"f"))]}toReadableStream(){const e=this;let n;return Kk({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const l=z0(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}}async function*N$(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ne("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ne("Attempted to iterate over a response with no body");const n=new D$,r=new Vd,s=Qk(t.body);for await(const a of z$(s))for(const l of r.decode(a)){const c=n.decode(l);c&&(yield c)}for(const a of r.flush()){const l=n.decode(a);l&&(yield l)}}async function*z$(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?z0(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let a;for(;(a=M$(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class D${constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=j$(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function j$(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function eR(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=e,l=await(async()=>{if(e.options.stream)return ln(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Fr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return tR(p,n)}return await n.text()})();return ln(t).debug(`[${r}] response parsed`,Ii({retryOfRequestLogID:s,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}function tR(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var jl;class Kd extends Promise{constructor(e,n,r=eR){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,jl.set(this,void 0),Fe(this,jl,e)}_thenUnwrap(e){return new Kd(X(this,jl,"f"),this.responsePromise,async(n,r)=>tR(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(X(this,jl,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}jl=new WeakMap;var gf;class D0{constructor(e,n,r,s){gf.set(this,void 0),Fe(this,gf,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Ne("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await X(this,gf,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(gf=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class L$ extends Kd{constructor(e,n,r){super(e,n,async(s,a)=>new r(s,a.response,await eR(s,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Gd extends D0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Bt extends D0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...Vk(this.options.query),after:n}}:null}}class gd extends D0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...Vk(this.options.query),after:e}}:null}}const nR=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function tu(t,e,n){return nR(),new File(t,e??"unknown_file",n)}function jf(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const j0=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",w1=async(t,e)=>Sy(t.body)?{...t,body:await rR(t.body,e)}:t,Gi=async(t,e)=>({...t,body:await rR(t.body,e)}),_1=new WeakMap;function P$(t){const e=typeof t=="function"?t:t.fetch,n=_1.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return _1.set(e,r),r}const rR=async(t,e)=>{if(!await P$(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>wy(n,r,s))),n},sR=t=>t instanceof Blob&&"name"in t,$$=t=>typeof t=="object"&&t!==null&&(t instanceof Response||j0(t)||sR(t)),Sy=t=>{if($$(t))return!0;if(Array.isArray(t))return t.some(Sy);if(t&&typeof t=="object"){for(const e in t)if(Sy(t[e]))return!0}return!1},wy=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,tu([await n.blob()],jf(n)));else if(j0(n))t.append(e,tu([await new Response(Gk(n)).blob()],jf(n)));else if(sR(n))t.append(e,n,jf(n));else if(Array.isArray(n))await Promise.all(n.map(r=>wy(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>wy(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},iR=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",F$=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&iR(t),B$=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function U$(t,e,n){if(nR(),t=await t,F$(t))return t instanceof File?t:tu([await t.arrayBuffer()],t.name);if(B$(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),tu(await _y(s),e,n)}const r=await _y(t);if(e||(e=jf(t)),!n?.type){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n={...n,type:s})}return tu(r,e,n)}async function _y(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(iR(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(j0(t))for await(const n of t)e.push(...await _y(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${q$(t)}`)}return e}function q$(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Ae{constructor(e){this._client=e}}function aR(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const C1=Object.freeze(Object.create(null)),H$=(t=aR)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],l=n.reduce((m,p,g)=>{/[?#]/.test(p)&&(s=!0);const y=r[g];let x=(s?encodeURIComponent:t)(""+y);return g!==r.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??C1)??C1)?.toString)&&(x=y+"",a.push({start:m.length+p.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),m+p+(g===r.length?"":x)},""),c=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=f.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,p)=>m.start-p.start),a.length>0){let m=0;const p=a.reduce((g,y)=>{const x=" ".repeat(y.start-m),S="^".repeat(y.length);return m=y.start+y.length,g+x+S},"");throw new Ne(`Path parameters result in path with invalid segments:
${a.map(g=>g.error).join(`
`)}
${l}
${p}`)}return l},he=H$(aR);let oR=class extends Ae{list(e,n={},r){return this._client.getAPIList(he`/chat/completions/${e}/messages`,Bt,{query:n,...r})}};function yd(t){return t!==void 0&&"function"in t&&t.function!==void 0}function L0(t){return t?.$brand==="auto-parseable-response-format"}function Iu(t){return t?.$brand==="auto-parseable-tool"}function V$(t,e){return!e||!lR(e)?{...t,choices:t.choices.map(n=>(uR(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:P0(t,e)}function P0(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new qk;if(r.finish_reason==="content_filter")throw new Hk;return uR(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(s=>G$(e,s))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?K$(e,r.message.content):null}}});return{...t,choices:n}}function K$(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function G$(t,e){const n=t.tools?.find(r=>yd(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Iu(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function Q$(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>yd(r)&&r.function?.name===e.function.name);return yd(n)&&(Iu(n)||n?.function.strict||!1)}function lR(t){return L0(t.response_format)?!0:t.tools?.some(e=>Iu(e)||e.type==="function"&&e.function.strict===!0)??!1}function uR(t){for(const e of t||[])if(e.type!=="function")throw new Ne(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Z$(t){for(const e of t??[]){if(e.type!=="function")throw new Ne(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ne(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const vd=t=>t?.role==="assistant",cR=t=>t?.role==="tool";var Cy,Lf,Pf,Ll,Pl,$f,$l,ds,Fl,bd,xd,Ga,fR;class $0{constructor(){Cy.add(this),this.controller=new AbortController,Lf.set(this,void 0),Pf.set(this,()=>{}),Ll.set(this,()=>{}),Pl.set(this,void 0),$f.set(this,()=>{}),$l.set(this,()=>{}),ds.set(this,{}),Fl.set(this,!1),bd.set(this,!1),xd.set(this,!1),Ga.set(this,!1),Fe(this,Lf,new Promise((e,n)=>{Fe(this,Pf,e,"f"),Fe(this,Ll,n,"f")})),Fe(this,Pl,new Promise((e,n)=>{Fe(this,$f,e,"f"),Fe(this,$l,n,"f")})),X(this,Lf,"f").catch(()=>{}),X(this,Pl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},X(this,Cy,"m",fR).bind(this))},0)}_connected(){this.ended||(X(this,Pf,"f").call(this),this._emit("connect"))}get ended(){return X(this,Fl,"f")}get errored(){return X(this,bd,"f")}get aborted(){return X(this,xd,"f")}abort(){this.controller.abort()}on(e,n){return(X(this,ds,"f")[e]||(X(this,ds,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=X(this,ds,"f")[e];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(X(this,ds,"f")[e]||(X(this,ds,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Fe(this,Ga,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Fe(this,Ga,!0),await X(this,Pl,"f")}_emit(e,...n){if(X(this,Fl,"f"))return;e==="end"&&(Fe(this,Fl,!0),X(this,$f,"f").call(this));const r=X(this,ds,"f")[e];if(r&&(X(this,ds,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!X(this,Ga,"f")&&!r?.length&&Promise.reject(s),X(this,Ll,"f").call(this,s),X(this,$l,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!X(this,Ga,"f")&&!r?.length&&Promise.reject(s),X(this,Ll,"f").call(this,s),X(this,$l,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Lf=new WeakMap,Pf=new WeakMap,Ll=new WeakMap,Pl=new WeakMap,$f=new WeakMap,$l=new WeakMap,ds=new WeakMap,Fl=new WeakMap,bd=new WeakMap,xd=new WeakMap,Ga=new WeakMap,Cy=new WeakSet,fR=function(e){if(Fe(this,bd,!0),e instanceof Error&&e.name==="AbortError"&&(e=new xr),e instanceof xr)return Fe(this,xd,!0),this._emit("abort",e);if(e instanceof Ne)return this._emit("error",e);if(e instanceof Error){const n=new Ne(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Ne(String(e)))};function Y$(t){return typeof t.parse=="function"}var xn,Ey,Sd,ky,Ry,Ty,dR,hR;const J$=10;class pR extends $0{constructor(){super(...arguments),xn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),cR(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(vd(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ne("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),X(this,xn,"m",Ey).call(this)}async finalMessage(){return await this.done(),X(this,xn,"m",Sd).call(this)}async finalFunctionToolCall(){return await this.done(),X(this,xn,"m",ky).call(this)}async finalFunctionToolCallResult(){return await this.done(),X(this,xn,"m",Ry).call(this)}async totalUsage(){return await this.done(),X(this,xn,"m",Ty).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=X(this,xn,"m",Sd).call(this);n&&this._emit("finalMessage",n);const r=X(this,xn,"m",Ey).call(this);r&&this._emit("finalContent",r);const s=X(this,xn,"m",ky).call(this);s&&this._emit("finalFunctionToolCall",s);const a=X(this,xn,"m",Ry).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",X(this,xn,"m",Ty).call(this))}async _createChatCompletion(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),X(this,xn,"m",dR).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(P0(a,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const s="tool",{tool_choice:a="auto",stream:l,...c}=n,f=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=J$}=r||{},m=n.tools.map(y=>{if(Iu(y)){if(!y.$callback)throw new Ne("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),p={};for(const y of m)y.type==="function"&&(p[y.function.name||y.function.function.name]=y.function);const g="tools"in n?m.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<d;++y){const S=(await this._createChatCompletion(e,{...c,tool_choice:a,tools:g,messages:[...this.messages]},r)).choices[0]?.message;if(!S)throw new Ne("missing message in ChatCompletion response");if(!S.tool_calls?.length)return;for(const E of S.tool_calls){if(E.type!=="function")continue;const C=E.id,{name:k,arguments:R}=E.function,N=p[k];if(N){if(f&&f!==k){const L=`Invalid tool_call: ${JSON.stringify(k)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:s,tool_call_id:C,content:L});continue}}else{const L=`Invalid tool_call: ${JSON.stringify(k)}. Available options are: ${Object.keys(p).map(P=>JSON.stringify(P)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:C,content:L});continue}let j;try{j=Y$(N)?await N.parse(R):R}catch(L){const P=L instanceof Error?L.message:String(L);this._addMessage({role:s,tool_call_id:C,content:P});continue}const T=await N.function(j,this),D=X(this,xn,"m",hR).call(this,T);if(this._addMessage({role:s,tool_call_id:C,content:D}),f)return}}}}xn=new WeakSet,Ey=function(){return X(this,xn,"m",Sd).call(this).content??null},Sd=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(vd(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Ne("stream ended without producing a ChatCompletionMessage with role=assistant")},ky=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(vd(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},Ry=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(cR(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},Ty=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},dR=function(e){if(e.n!=null&&e.n>1)throw new Ne("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},hR=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class F0 extends pR{static runTools(e,n,r){const s=new F0,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}_addMessage(e,n=!0){super._addMessage(e,n),vd(e)&&e.content&&this._emit("content",e.content)}}const mR=1,gR=2,yR=4,vR=8,bR=16,xR=32,SR=64,wR=128,_R=256,CR=wR|_R,ER=bR|xR|CR|SR,kR=mR|gR|ER,RR=yR|vR,X$=kR|RR,Wt={STR:mR,NUM:gR,ARR:yR,OBJ:vR,NULL:bR,BOOL:xR,NAN:SR,INFINITY:wR,MINUS_INFINITY:_R,INF:CR,SPECIAL:ER,ATOM:kR,COLLECTION:RR,ALL:X$};class W$ extends Error{}class eF extends Error{}function tF(t,e=Wt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return nF(t.trim(),e)}const nF=(t,e)=>{const n=t.length;let r=0;const s=g=>{throw new W$(`${g} at position ${r}`)},a=g=>{throw new eF(`${g} at position ${r}`)},l=()=>(p(),r>=n&&s("Unexpected end of input"),t[r]==='"'?c():t[r]==="{"?f():t[r]==="["?d():t.substring(r,r+4)==="null"||Wt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Wt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Wt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Wt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Wt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Wt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):m()),c=()=>{const g=r;let y=!1;for(r++;r<n&&(t[r]!=='"'||y&&t[r-1]==="\\");)y=t[r]==="\\"?!y:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(g,++r-Number(y)))}catch(x){a(String(x))}else if(Wt.STR&e)try{return JSON.parse(t.substring(g,r-Number(y))+'"')}catch{return JSON.parse(t.substring(g,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},f=()=>{r++,p();const g={};try{for(;t[r]!=="}";){if(p(),r>=n&&Wt.OBJ&e)return g;const y=c();p(),r++;try{const x=l();Object.defineProperty(g,y,{value:x,writable:!0,enumerable:!0,configurable:!0})}catch(x){if(Wt.OBJ&e)return g;throw x}p(),t[r]===","&&r++}}catch{if(Wt.OBJ&e)return g;s("Expected '}' at end of object")}return r++,g},d=()=>{r++;const g=[];try{for(;t[r]!=="]";)g.push(l()),p(),t[r]===","&&r++}catch{if(Wt.ARR&e)return g;s("Expected ']' at end of array")}return r++,g},m=()=>{if(r===0){t==="-"&&Wt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(y){if(Wt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(y))}}const g=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Wt.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(g,r))}catch{t.substring(g,r)==="-"&&Wt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(g,t.lastIndexOf("e")))}catch(x){a(String(x))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return l()},E1=t=>tF(t,Wt.ALL^Wt.NUM);var qt,fs,Fa,Ks,hg,yf,pg,mg,gg,vf,yg,k1;class vu extends pR{constructor(e){super(),qt.add(this),fs.set(this,void 0),Fa.set(this,void 0),Ks.set(this,void 0),Fe(this,fs,e),Fe(this,Fa,[])}get currentChatCompletionSnapshot(){return X(this,Ks,"f")}static fromReadableStream(e){const n=new vu(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new vu(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){super._createChatCompletion;const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),X(this,qt,"m",hg).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of a)X(this,qt,"m",pg).call(this,l);if(a.controller.signal?.aborted)throw new xr;return this._addChatCompletion(X(this,qt,"m",vf).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),X(this,qt,"m",hg).call(this),this._connected();const s=Fr.fromReadableStream(e,this.controller);let a;for await(const l of s)a&&a!==l.id&&this._addChatCompletion(X(this,qt,"m",vf).call(this)),X(this,qt,"m",pg).call(this,l),a=l.id;if(s.controller.signal?.aborted)throw new xr;return this._addChatCompletion(X(this,qt,"m",vf).call(this))}[(fs=new WeakMap,Fa=new WeakMap,Ks=new WeakMap,qt=new WeakSet,hg=function(){this.ended||Fe(this,Ks,void 0)},yf=function(n){let r=X(this,Fa,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},X(this,Fa,"f")[n.index]=r,r)},pg=function(n){if(this.ended)return;const r=X(this,qt,"m",k1).call(this,n);this._emit("chunk",n,r);for(const s of n.choices){const a=r.choices[s.index];s.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",s.delta.content,a.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),s.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:a.message.refusal}),s.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:a.logprobs?.content??[]}),s.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const l=X(this,qt,"m",yf).call(this,a);a.finish_reason&&(X(this,qt,"m",gg).call(this,a),l.current_tool_call_index!=null&&X(this,qt,"m",mg).call(this,a,l.current_tool_call_index));for(const c of s.delta.tool_calls??[])l.current_tool_call_index!==c.index&&(X(this,qt,"m",gg).call(this,a),l.current_tool_call_index!=null&&X(this,qt,"m",mg).call(this,a,l.current_tool_call_index)),l.current_tool_call_index=c.index;for(const c of s.delta.tool_calls??[]){const f=a.message.tool_calls?.[c.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:c.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(f?.type,void 0))}}},mg=function(n,r){if(X(this,qt,"m",yf).call(this,n).done_tool_calls.has(r))return;const a=n.message.tool_calls?.[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=X(this,fs,"f")?.tools?.find(c=>yd(c)&&c.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:Iu(l)?l.$parseRaw(a.function.arguments):l?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},gg=function(n){const r=X(this,qt,"m",yf).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=X(this,qt,"m",yg).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},vf=function(){if(this.ended)throw new Ne("stream has ended, this shouldn't happen");const n=X(this,Ks,"f");if(!n)throw new Ne("request ended without sending any chunks");return Fe(this,Ks,void 0),Fe(this,Fa,[]),rF(n,X(this,fs,"f"))},yg=function(){const n=X(this,fs,"f")?.response_format;return L0(n)?n:null},k1=function(n){var r,s,a,l;let c=X(this,Ks,"f");const{choices:f,...d}=n;c?Object.assign(c,d):c=Fe(this,Ks,{...d,choices:[]});for(const{delta:m,finish_reason:p,index:g,logprobs:y=null,...x}of n.choices){let S=c.choices[g];if(S||(S=c.choices[g]={finish_reason:p,index:g,message:{},logprobs:y,...x}),y)if(!S.logprobs)S.logprobs=Object.assign({},y);else{const{content:T,refusal:D,...L}=y;Object.assign(S.logprobs,L),T&&((r=S.logprobs).content??(r.content=[]),S.logprobs.content.push(...T)),D&&((s=S.logprobs).refusal??(s.refusal=[]),S.logprobs.refusal.push(...D))}if(p&&(S.finish_reason=p,X(this,fs,"f")&&lR(X(this,fs,"f")))){if(p==="length")throw new qk;if(p==="content_filter")throw new Hk}if(Object.assign(S,x),!m)continue;const{content:E,refusal:C,function_call:k,role:R,tool_calls:N,...j}=m;if(Object.assign(S.message,j),C&&(S.message.refusal=(S.message.refusal||"")+C),R&&(S.message.role=R),k&&(S.message.function_call?(k.name&&(S.message.function_call.name=k.name),k.arguments&&((a=S.message.function_call).arguments??(a.arguments=""),S.message.function_call.arguments+=k.arguments)):S.message.function_call=k),E&&(S.message.content=(S.message.content||"")+E,!S.message.refusal&&X(this,qt,"m",yg).call(this)&&(S.message.parsed=E1(S.message.content))),N){S.message.tool_calls||(S.message.tool_calls=[]);for(const{index:T,id:D,type:L,function:P,...M}of N){const B=(l=S.message.tool_calls)[T]??(l[T]={});Object.assign(B,M),D&&(B.id=D),L&&(B.type=L),P&&(B.function??(B.function={name:P.name??"",arguments:""})),P?.name&&(B.function.name=P.name),P?.arguments&&(B.function.arguments+=P.arguments,Q$(X(this,fs,"f"),B)&&(B.function.parsed_arguments=E1(B.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Fr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function rF(t,e){const{id:n,choices:r,created:s,model:a,system_fingerprint:l,...c}=t,f={...c,id:n,choices:r.map(({message:d,finish_reason:m,index:p,logprobs:g,...y})=>{if(!m)throw new Ne(`missing finish_reason for choice ${p}`);const{content:x=null,function_call:S,tool_calls:E,...C}=d,k=d.role;if(!k)throw new Ne(`missing role for choice ${p}`);if(S){const{arguments:R,name:N}=S;if(R==null)throw new Ne(`missing function_call.arguments for choice ${p}`);if(!N)throw new Ne(`missing function_call.name for choice ${p}`);return{...y,message:{content:x,function_call:{arguments:R,name:N},role:k,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:g}}return E?{...y,index:p,finish_reason:m,logprobs:g,message:{...C,role:k,content:x,refusal:d.refusal??null,tool_calls:E.map((R,N)=>{const{function:j,type:T,id:D,...L}=R,{arguments:P,name:M,...B}=j||{};if(D==null)throw new Ne(`missing choices[${p}].tool_calls[${N}].id
${bf(t)}`);if(T==null)throw new Ne(`missing choices[${p}].tool_calls[${N}].type
${bf(t)}`);if(M==null)throw new Ne(`missing choices[${p}].tool_calls[${N}].function.name
${bf(t)}`);if(P==null)throw new Ne(`missing choices[${p}].tool_calls[${N}].function.arguments
${bf(t)}`);return{...L,id:D,type:T,function:{...B,name:M,arguments:P}}})}}:{...y,message:{...C,content:x,role:k,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:g}}),created:s,model:a,object:"chat.completion",...l?{system_fingerprint:l}:{}};return V$(f,e)}function bf(t){return JSON.stringify(t)}class wd extends vu{static fromReadableStream(e){const n=new wd(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new wd(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}}let B0=class extends Ae{constructor(){super(...arguments),this.messages=new oR(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(he`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(he`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Bt,{query:e,...n})}delete(e,n){return this._client.delete(he`/chat/completions/${e}`,n)}parse(e,n){return Z$(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>P0(r,e))}runTools(e,n){return e.stream?wd.runTools(this._client,e,n):F0.runTools(this._client,e,n)}stream(e,n){return vu.createChatCompletion(this._client,e,n)}};B0.Messages=oR;class U0 extends Ae{constructor(){super(...arguments),this.completions=new B0(this._client)}}U0.Completions=B0;const TR=Symbol("brand.privateNullableHeaders");function*sF(t){if(!t)return;if(TR in t){const{values:r,nulls:s}=t;yield*r.entries();for(const a of s)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():c1(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=c1(r[1])?r[1]:[r[1]];let l=!1;for(const c of a)c!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,c])}}const we=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[a,l]of sF(r)){const c=a.toLowerCase();s.has(c)||(e.delete(a),s.add(c)),l===null?(e.delete(a),n.add(c)):(e.append(a,l),n.delete(c))}}return{[TR]:!0,values:e,nulls:n}};class AR extends Ae{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:we([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class OR extends Ae{create(e,n){return this._client.post("/audio/transcriptions",Gi({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class MR extends Ae{create(e,n){return this._client.post("/audio/translations",Gi({body:e,...n,__metadata:{model:e.model}},this._client))}}class Nu extends Ae{constructor(){super(...arguments),this.transcriptions=new OR(this._client),this.translations=new MR(this._client),this.speech=new AR(this._client)}}Nu.Transcriptions=OR;Nu.Translations=MR;Nu.Speech=AR;class IR extends Ae{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(he`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Bt,{query:e,...n})}cancel(e,n){return this._client.post(he`/batches/${e}/cancel`,n)}}class NR extends Ae{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/assistants/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/assistants/${e}`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Bt,{query:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(he`/assistants/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let zR=class extends Ae{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class DR extends Ae{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Qd=class extends Ae{constructor(){super(...arguments),this.sessions=new zR(this._client),this.transcriptionSessions=new DR(this._client)}};Qd.Sessions=zR;Qd.TranscriptionSessions=DR;class jR extends Ae{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(he`/chatkit/sessions/${e}/cancel`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let LR=class extends Ae{retrieve(e,n){return this._client.get(he`/chatkit/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",gd,{query:e,...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(he`/chatkit/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},r){return this._client.getAPIList(he`/chatkit/threads/${e}/items`,gd,{query:n,...r,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class Zd extends Ae{constructor(){super(...arguments),this.sessions=new jR(this._client),this.threads=new LR(this._client)}}Zd.Sessions=jR;Zd.Threads=LR;class PR extends Ae{create(e,n,r){return this._client.post(he`/threads/${e}/messages`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(he`/threads/${s}/messages/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(he`/threads/${s}/messages/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/threads/${e}/messages`,Bt,{query:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(he`/threads/${s}/messages/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class $R extends Ae{retrieve(e,n,r){const{thread_id:s,run_id:a,...l}=n;return this._client.get(he`/threads/${s}/runs/${a}/steps/${e}`,{query:l,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:s,...a}=n;return this._client.getAPIList(he`/threads/${s}/runs/${e}/steps`,Bt,{query:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const iF=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var aF={};const Ba=t=>{if(typeof globalThis.process<"u")return aF?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var un,ji,Ay,$r,Ff,Rr,Li,eo,zi,_d,Yn,Bf,Uf,nu,Bl,Ul,R1,T1,A1,O1,M1,I1,N1;class ru extends $0{constructor(){super(...arguments),un.add(this),Ay.set(this,[]),$r.set(this,{}),Ff.set(this,{}),Rr.set(this,void 0),Li.set(this,void 0),eo.set(this,void 0),zi.set(this,void 0),_d.set(this,void 0),Yn.set(this,void 0),Bf.set(this,void 0),Uf.set(this,void 0),nu.set(this,void 0)}[(Ay=new WeakMap,$r=new WeakMap,Ff=new WeakMap,Rr=new WeakMap,Li=new WeakMap,eo=new WeakMap,zi=new WeakMap,_d=new WeakMap,Yn=new WeakMap,Bf=new WeakMap,Uf=new WeakMap,nu=new WeakMap,un=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new ji;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Fr.fromReadableStream(e,this.controller);for await(const a of s)X(this,un,"m",Bl).call(this,a);if(s.controller.signal?.aborted)throw new xr;return this._addRun(X(this,un,"m",Ul).call(this))}toReadableStream(){return new Fr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const a=new ji;return a._run(()=>a._runToolAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},c=await e.submitToolOutputs(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of c)X(this,un,"m",Bl).call(this,f);if(c.controller.signal?.aborted)throw new xr;return this._addRun(X(this,un,"m",Ul).call(this))}static createThreadAssistantStream(e,n,r){const s=new ji;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const a=new ji;return a._run(()=>a._runAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return X(this,Bf,"f")}currentRun(){return X(this,Uf,"f")}currentMessageSnapshot(){return X(this,Rr,"f")}currentRunStepSnapshot(){return X(this,nu,"f")}async finalRunSteps(){return await this.done(),Object.values(X(this,$r,"f"))}async finalMessages(){return await this.done(),Object.values(X(this,Ff,"f"))}async finalRun(){if(await this.done(),!X(this,Li,"f"))throw Error("Final run was not received.");return X(this,Li,"f")}async _createThreadAssistantStream(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},l=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const c of l)X(this,un,"m",Bl).call(this,c);if(l.controller.signal?.aborted)throw new xr;return this._addRun(X(this,un,"m",Ul).call(this))}async _createAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},c=await e.create(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of c)X(this,un,"m",Bl).call(this,f);if(c.controller.signal?.aborted)throw new xr;return this._addRun(X(this,un,"m",Ul).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let a=e[r];if(a==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(cg(a)&&cg(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(l=>typeof l=="string"||typeof l=="number")){a.push(...s);continue}for(const l of s){if(!cg(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const c=l.index;if(c==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const f=a[c];f==null?a.push(l):a[c]=this.accumulateDelta(f,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}ji=ru,Bl=function(e){if(!this.ended)switch(Fe(this,Bf,e),X(this,un,"m",A1).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":X(this,un,"m",N1).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":X(this,un,"m",T1).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":X(this,un,"m",R1).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Ul=function(){if(this.ended)throw new Ne("stream has ended, this shouldn't happen");if(!X(this,Li,"f"))throw Error("Final run has not been received");return X(this,Li,"f")},R1=function(e){const[n,r]=X(this,un,"m",M1).call(this,e,X(this,Rr,"f"));Fe(this,Rr,n),X(this,Ff,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,l=n.content[s.index];if(l&&l.type=="text")this._emit("textDelta",a,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=X(this,eo,"f")){if(X(this,zi,"f"))switch(X(this,zi,"f").type){case"text":this._emit("textDone",X(this,zi,"f").text,X(this,Rr,"f"));break;case"image_file":this._emit("imageFileDone",X(this,zi,"f").image_file,X(this,Rr,"f"));break}Fe(this,eo,s.index)}Fe(this,zi,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(X(this,eo,"f")!==void 0){const s=e.data.content[X(this,eo,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,X(this,Rr,"f"));break;case"text":this._emit("textDone",s.text,X(this,Rr,"f"));break}}X(this,Rr,"f")&&this._emit("messageDone",e.data),Fe(this,Rr,void 0)}},T1=function(e){const n=X(this,un,"m",O1).call(this,e);switch(Fe(this,nu,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==X(this,_d,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(X(this,Yn,"f")&&this._emit("toolCallDone",X(this,Yn,"f")),Fe(this,_d,a.index),Fe(this,Yn,n.step_details.tool_calls[a.index]),X(this,Yn,"f")&&this._emit("toolCallCreated",X(this,Yn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Fe(this,nu,void 0),e.data.step_details.type=="tool_calls"&&X(this,Yn,"f")&&(this._emit("toolCallDone",X(this,Yn,"f")),Fe(this,Yn,void 0)),this._emit("runStepDone",e.data,n);break}},A1=function(e){X(this,Ay,"f").push(e),this._emit("event",e)},O1=function(e){switch(e.event){case"thread.run.step.created":return X(this,$r,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=X(this,$r,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=ji.accumulateDelta(n,r.delta);X(this,$r,"f")[e.data.id]=s}return X(this,$r,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":X(this,$r,"f")[e.data.id]=e.data;break}if(X(this,$r,"f")[e.data.id])return X(this,$r,"f")[e.data.id];throw new Error("No snapshot available")},M1=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let l=n.content[a.index];n.content[a.index]=X(this,un,"m",I1).call(this,a,l)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},I1=function(e,n){return ji.accumulateDelta(n,e)},N1=function(e){switch(Fe(this,Uf,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Fe(this,Li,e.data),X(this,Yn,"f")&&(this._emit("toolCallDone",X(this,Yn,"f")),Fe(this,Yn,void 0));break}};let q0=class extends Ae{constructor(){super(...arguments),this.steps=new $R(this._client)}create(e,n,r){const{include:s,...a}=n;return this._client.post(he`/threads/${e}/runs`,{query:{include:s},body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(he`/threads/${s}/runs/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(he`/threads/${s}/runs/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/threads/${e}/runs`,Bt,{query:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(he`/threads/${s}/runs/${e}/cancel`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return ru.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await Mu(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return ru.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...a}=n;return this._client.post(he`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return ru.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};q0.Steps=$R;class Yd extends Ae{constructor(){super(...arguments),this.runs=new q0(this._client),this.messages=new PR(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/threads/${e}`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(he`/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return ru.createThreadAssistantStream(e,this._client.beta.threads,n)}}Yd.Runs=q0;Yd.Messages=PR;class xo extends Ae{constructor(){super(...arguments),this.realtime=new Qd(this._client),this.chatkit=new Zd(this._client),this.assistants=new NR(this._client),this.threads=new Yd(this._client)}}xo.Realtime=Qd;xo.ChatKit=Zd;xo.Assistants=NR;xo.Threads=Yd;class FR extends Ae{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class BR extends Ae{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(he`/containers/${s}/files/${e}/content`,{...r,headers:we([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let H0=class extends Ae{constructor(){super(...arguments),this.content=new BR(this._client)}create(e,n,r){return this._client.post(he`/containers/${e}/files`,Gi({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(he`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(he`/containers/${e}/files`,Bt,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(he`/containers/${s}/files/${e}`,{...r,headers:we([{Accept:"*/*"},r?.headers])})}};H0.Content=BR;class V0 extends Ae{constructor(){super(...arguments),this.files=new H0(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(he`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Bt,{query:e,...n})}delete(e,n){return this._client.delete(he`/containers/${e}`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}}V0.Files=H0;class UR extends Ae{create(e,n,r){const{include:s,...a}=n;return this._client.post(he`/conversations/${e}/items`,{query:{include:s},body:a,...r})}retrieve(e,n,r){const{conversation_id:s,...a}=n;return this._client.get(he`/conversations/${s}/items/${e}`,{query:a,...r})}list(e,n={},r){return this._client.getAPIList(he`/conversations/${e}/items`,gd,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(he`/conversations/${s}/items/${e}`,r)}}class K0 extends Ae{constructor(){super(...arguments),this.items=new UR(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(he`/conversations/${e}`,n)}update(e,n,r){return this._client.post(he`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(he`/conversations/${e}`,n)}}K0.Items=UR;class qR extends Ae{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&ln(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?a:(ln(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(l=>(l&&l.data&&l.data.forEach(c=>{const f=c.embedding;c.embedding=iF(f)}),l)))}}class HR extends Ae{retrieve(e,n,r){const{eval_id:s,run_id:a}=n;return this._client.get(he`/evals/${s}/runs/${a}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...a}=n;return this._client.getAPIList(he`/evals/${s}/runs/${e}/output_items`,Bt,{query:a,...r})}}class G0 extends Ae{constructor(){super(...arguments),this.outputItems=new HR(this._client)}create(e,n,r){return this._client.post(he`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(he`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(he`/evals/${e}/runs`,Bt,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(he`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(he`/evals/${s}/runs/${e}`,r)}}G0.OutputItems=HR;class Q0 extends Ae{constructor(){super(...arguments),this.runs=new G0(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(he`/evals/${e}`,n)}update(e,n,r){return this._client.post(he`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Bt,{query:e,...n})}delete(e,n){return this._client.delete(he`/evals/${e}`,n)}}Q0.Runs=G0;let VR=class extends Ae{create(e,n){return this._client.post("/files",Gi({body:e,...n},this._client))}retrieve(e,n){return this._client.get(he`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Bt,{query:e,...n})}delete(e,n){return this._client.delete(he`/files/${e}`,n)}content(e,n){return this._client.get(he`/files/${e}/content`,{...n,headers:we([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let l=await this.retrieve(e);for(;!l.status||!s.has(l.status);)if(await Mu(n),l=await this.retrieve(e),Date.now()-a>r)throw new N0({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return l}};class KR extends Ae{}let GR=class extends Ae{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Z0 extends Ae{constructor(){super(...arguments),this.graders=new GR(this._client)}}Z0.Graders=GR;class QR extends Ae{create(e,n,r){return this._client.getAPIList(he`/fine_tuning/checkpoints/${e}/permissions`,Gd,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(he`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(he`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let Y0=class extends Ae{constructor(){super(...arguments),this.permissions=new QR(this._client)}};Y0.Permissions=QR;class ZR extends Ae{list(e,n={},r){return this._client.getAPIList(he`/fine_tuning/jobs/${e}/checkpoints`,Bt,{query:n,...r})}}class J0 extends Ae{constructor(){super(...arguments),this.checkpoints=new ZR(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(he`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Bt,{query:e,...n})}cancel(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(he`/fine_tuning/jobs/${e}/events`,Bt,{query:n,...r})}pause(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/resume`,n)}}J0.Checkpoints=ZR;class So extends Ae{constructor(){super(...arguments),this.methods=new KR(this._client),this.jobs=new J0(this._client),this.checkpoints=new Y0(this._client),this.alpha=new Z0(this._client)}}So.Methods=KR;So.Jobs=J0;So.Checkpoints=Y0;So.Alpha=Z0;class YR extends Ae{}class X0 extends Ae{constructor(){super(...arguments),this.graderModels=new YR(this._client)}}X0.GraderModels=YR;class JR extends Ae{createVariation(e,n){return this._client.post("/images/variations",Gi({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Gi({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class XR extends Ae{retrieve(e,n){return this._client.get(he`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Gd,e)}delete(e,n){return this._client.delete(he`/models/${e}`,n)}}class WR extends Ae{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class eT extends Ae{accept(e,n,r){return this._client.post(he`/realtime/calls/${e}/accept`,{body:n,...r,headers:we([{Accept:"*/*"},r?.headers])})}hangup(e,n){return this._client.post(he`/realtime/calls/${e}/hangup`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}refer(e,n,r){return this._client.post(he`/realtime/calls/${e}/refer`,{body:n,...r,headers:we([{Accept:"*/*"},r?.headers])})}reject(e,n={},r){return this._client.post(he`/realtime/calls/${e}/reject`,{body:n,...r,headers:we([{Accept:"*/*"},r?.headers])})}}class tT extends Ae{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Jd extends Ae{constructor(){super(...arguments),this.clientSecrets=new tT(this._client),this.calls=new eT(this._client)}}Jd.ClientSecrets=tT;Jd.Calls=eT;function oF(t,e){return!e||!uF(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:nT(t,e)}function nT(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:dF(e,s)};if(s.type==="message"){const a=s.content.map(l=>l.type==="output_text"?{...l,parsed:lF(e,l.text)}:l);return{...s,content:a}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||Oy(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function lF(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function uF(t){return!!L0(t.text?.format)}function cF(t){return t?.$brand==="auto-parseable-tool"}function fF(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function dF(t,e){const n=fF(t.tools??[],e.name);return{...e,...e,parsed_arguments:cF(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function Oy(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Ua,xf,Gs,Sf,z1,D1,j1,L1;class W0 extends $0{constructor(e){super(),Ua.add(this),xf.set(this,void 0),Gs.set(this,void 0),Sf.set(this,void 0),Fe(this,xf,e)}static createResponse(e,n,r){const s=new W0(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),X(this,Ua,"m",z1).call(this);let a,l=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const c of a)X(this,Ua,"m",D1).call(this,c,l);if(a.controller.signal?.aborted)throw new xr;return X(this,Ua,"m",j1).call(this)}[(xf=new WeakMap,Gs=new WeakMap,Sf=new WeakMap,Ua=new WeakSet,z1=function(){this.ended||Fe(this,Gs,void 0)},D1=function(n,r){if(this.ended)return;const s=(l,c)=>{(r==null||c.sequence_number>r)&&this._emit(l,c)},a=X(this,Ua,"m",L1).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const l=a.output[n.output_index];if(!l)throw new Ne(`missing output at index ${n.output_index}`);if(l.type==="message"){const c=l.content[n.content_index];if(!c)throw new Ne(`missing content at index ${n.content_index}`);if(c.type!=="output_text")throw new Ne(`expected content to be 'output_text', got ${c.type}`);s("response.output_text.delta",{...n,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const l=a.output[n.output_index];if(!l)throw new Ne(`missing output at index ${n.output_index}`);l.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:s(n.type,n);break}},j1=function(){if(this.ended)throw new Ne("stream has ended, this shouldn't happen");const n=X(this,Gs,"f");if(!n)throw new Ne("request ended without sending any events");Fe(this,Gs,void 0);const r=hF(n,X(this,xf,"f"));return Fe(this,Sf,r),r},L1=function(n){let r=X(this,Gs,"f");if(!r){if(n.type!=="response.created")throw new Ne(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Fe(this,Gs,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new Ne(`missing output at index ${n.output_index}`);const a=s.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?s.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(l));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new Ne(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new Ne(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Ne(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new Ne(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new Ne(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const a=s.content?.[n.content_index];if(!a)throw new Ne(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Ne(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{Fe(this,Gs,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=X(this,Sf,"f");if(!e)throw new Ne("stream ended without producing a ChatCompletion");return e}}function hF(t,e){return oF(t,e)}class rT extends Ae{list(e,n={},r){return this._client.getAPIList(he`/responses/${e}/input_items`,Bt,{query:n,...r})}}class sT extends Ae{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Xd extends Ae{constructor(){super(...arguments),this.inputItems=new rT(this._client),this.inputTokens=new sT(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Oy(r),r))}retrieve(e,n={},r){return this._client.get(he`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&Oy(s),s))}delete(e,n){return this._client.delete(he`/responses/${e}`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>nT(r,e))}stream(e,n){return W0.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(he`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}Xd.InputItems=rT;Xd.InputTokens=sT;class iT extends Ae{create(e,n,r){return this._client.post(he`/uploads/${e}/parts`,Gi({body:n,...r},this._client))}}class ev extends Ae{constructor(){super(...arguments),this.parts=new iT(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(he`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(he`/uploads/${e}/complete`,{body:n,...r})}}ev.Parts=iT;const pF=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class aT extends Ae{create(e,n,r){return this._client.post(he`/vector_stores/${e}/file_batches`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(he`/vector_stores/${s}/file_batches/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(he`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...a}=n;return this._client.getAPIList(he`/vector_stores/${s}/file_batches/${e}/files`,Bt,{query:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const s=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await Mu(c);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=s?.maxConcurrency??5,l=Math.min(a,n.length),c=this._client,f=n.values(),d=[...r];async function m(g){for(let y of g){const x=await c.files.create({file:y,purpose:"assistants"},s);d.push(x.id)}}const p=Array(l).fill(f).map(m);return await pF(p),await this.createAndPoll(e,{file_ids:d})}}class oT extends Ae{create(e,n,r){return this._client.post(he`/vector_stores/${e}/files`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(he`/vector_stores/${s}/files/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:s,...a}=n;return this._client.post(he`/vector_stores/${s}/files/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/vector_stores/${e}/files`,Bt,{query:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(he`/vector_stores/${s}/files/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),l=a.data;switch(l.status){case"in_progress":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=a.response.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await Mu(c);break;case"failed":case"completed":return l}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(he`/vector_stores/${s}/files/${e}/content`,Gd,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Wd extends Ae{constructor(){super(...arguments),this.files=new oT(this._client),this.fileBatches=new aT(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/vector_stores/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/vector_stores/${e}`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Bt,{query:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(he`/vector_stores/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(he`/vector_stores/${e}/search`,Gd,{body:n,method:"post",...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}Wd.Files=oT;Wd.FileBatches=aT;class lT extends Ae{create(e,n){return this._client.post("/videos",w1({body:e,...n},this._client))}retrieve(e,n){return this._client.get(he`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",gd,{query:e,...n})}delete(e,n){return this._client.delete(he`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(he`/videos/${e}/content`,{query:n,...r,headers:we([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(he`/videos/${e}/remix`,w1({body:n,...r},this._client))}}var Qa,uT,qf;class cT extends Ae{constructor(){super(...arguments),Qa.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");X(this,Qa,"m",uT).call(this,r);const a=we([n]).values,l=X(this,Qa,"m",qf).call(this,a,"webhook-signature"),c=X(this,Qa,"m",qf).call(this,a,"webhook-timestamp"),f=X(this,Qa,"m",qf).call(this,a,"webhook-id"),d=parseInt(c,10);if(isNaN(d))throw new zl("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-d>s)throw new zl("Webhook timestamp is too old");if(d>m+s)throw new zl("Webhook timestamp is too new");const p=l.split(" ").map(S=>S.startsWith("v1,")?S.substring(3):S),g=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),y=f?`${f}.${c}.${e}`:`${c}.${e}`,x=await crypto.subtle.importKey("raw",g,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const S of p)try{const E=Buffer.from(S,"base64");if(await crypto.subtle.verify("HMAC",x,E,new TextEncoder().encode(y)))return}catch{continue}throw new zl("The given webhook signature does not match the expected signature")}}Qa=new WeakSet,uT=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},qf=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var My,tv,Hf,fT;class Qe{constructor({baseURL:e=Ba("OPENAI_BASE_URL"),apiKey:n=Ba("OPENAI_API_KEY"),organization:r=Ba("OPENAI_ORG_ID")??null,project:s=Ba("OPENAI_PROJECT_ID")??null,webhookSecret:a=Ba("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(My.add(this),Hf.set(this,void 0),this.completions=new FR(this),this.chat=new U0(this),this.embeddings=new qR(this),this.files=new VR(this),this.images=new JR(this),this.audio=new Nu(this),this.moderations=new WR(this),this.models=new XR(this),this.fineTuning=new So(this),this.graders=new X0(this),this.vectorStores=new Wd(this),this.webhooks=new cT(this),this.beta=new xo(this),this.batches=new IR(this),this.uploads=new ev(this),this.responses=new Xd(this),this.realtime=new Jd(this),this.conversations=new K0(this),this.evals=new Q0(this),this.containers=new V0(this),this.videos=new lT(this),n===void 0)throw new Ne("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:n,organization:r,project:s,webhookSecret:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&m$())throw new Ne(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??tv.DEFAULT_TIMEOUT,this.logger=c.logger??console;const f="warn";this.logLevel=f,this.logLevel=x1(c.logLevel,"ClientOptions.logLevel",this)??x1(Ba("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??x$(),Fe(this,Hf,w$),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return we([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return T$(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Ka}`}defaultIdempotencyKey(){return`stainless-node-retry-${zk()}`}makeStatusError(e,n,r,s){return cn.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Ne?r:new Ne(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Ne(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!X(this,My,"m",fT).call(this)&&r||this.baseURL,a=c$(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return f$(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new Kd(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const s=await e,a=s.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(s);const{req:l,url:c,timeout:f}=await this.buildRequest(s,{retryCount:a-n});await this.prepareRequest(l,{url:c,options:s});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(ln(this).debug(`[${d}] sending request`,Ii({retryOfRequestLogID:r,method:s.method,url:c,options:s,headers:l.headers})),s.signal?.aborted)throw new xr;const g=new AbortController,y=await this.fetchWithTimeout(c,l,f,g).catch(by),x=Date.now();if(y instanceof globalThis.Error){const C=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new xr;const k=vy(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return ln(this).info(`[${d}] connection ${k?"timed out":"failed"} - ${C}`),ln(this).debug(`[${d}] connection ${k?"timed out":"failed"} (${C})`,Ii({retryOfRequestLogID:r,url:c,durationMs:x-p,message:y.message})),this.retryRequest(s,n,r??d);throw ln(this).info(`[${d}] connection ${k?"timed out":"failed"} - error; no more retries left`),ln(this).debug(`[${d}] connection ${k?"timed out":"failed"} (error; no more retries left)`,Ii({retryOfRequestLogID:r,url:c,durationMs:x-p,message:y.message})),k?new N0:new Hd({cause:y})}const S=[...y.headers.entries()].filter(([C])=>C==="x-request-id").map(([C,k])=>", "+C+": "+JSON.stringify(k)).join(""),E=`[${d}${m}${S}] ${l.method} ${c} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${x-p}ms`;if(!y.ok){const C=await this.shouldRetry(y);if(n&&C){const D=`retrying, ${n} attempts remaining`;return await S$(y.body),ln(this).info(`${E} - ${D}`),ln(this).debug(`[${d}] response error (${D})`,Ii({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:x-p})),this.retryRequest(s,n,r??d,y.headers)}const k=C?"error; no more retries left":"error; not retryable";ln(this).info(`${E} - ${k}`);const R=await y.text().catch(D=>by(D).message),N=p$(R),j=N?void 0:R;throw ln(this).debug(`[${d}] response error (${k})`,Ii({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,message:j,durationMs:Date.now()-p})),this.makeStatusError(y.status,N,j,y.headers)}return ln(this).info(E),ln(this).debug(`[${d}] response start`,Ii({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:x-p})),{response:y,options:s,controller:g,requestLogID:d,retryOfRequestLogID:r,startTime:p}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new L$(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:a,method:l,...c}=n||{};a&&a.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m={signal:s.signal,...d?{duplex:"half"}:{},method:"GET",...c};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let a;const l=s?.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(a=f)}const c=s?.get("retry-after");if(c&&!a){const f=parseFloat(c);Number.isNaN(f)?a=Date.parse(c)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,f)}return await Mu(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:a,query:l,defaultBaseURL:c}=r,f=this.buildURL(a,l,c);"timeout"in r&&h$("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:d,body:m}=this.buildBody({options:r}),p=await this.buildHeaders({options:e,method:s,bodyHeaders:d,retryCount:n});return{req:{method:s,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=we([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...b$(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=we([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Gk(e)}:X(this,Hf,"f").call(this,{body:e,headers:r})}}tv=Qe,Hf=new WeakMap,My=new WeakSet,fT=function(){return this.baseURL!=="https://api.openai.com/v1"};Qe.OpenAI=tv;Qe.DEFAULT_TIMEOUT=6e5;Qe.OpenAIError=Ne;Qe.APIError=cn;Qe.APIConnectionError=Hd;Qe.APIConnectionTimeoutError=N0;Qe.APIUserAbortError=xr;Qe.NotFoundError=Pk;Qe.ConflictError=$k;Qe.RateLimitError=Bk;Qe.BadRequestError=Dk;Qe.AuthenticationError=jk;Qe.InternalServerError=Uk;Qe.PermissionDeniedError=Lk;Qe.UnprocessableEntityError=Fk;Qe.InvalidWebhookSignatureError=zl;Qe.toFile=U$;Qe.Completions=FR;Qe.Chat=U0;Qe.Embeddings=qR;Qe.Files=VR;Qe.Images=JR;Qe.Audio=Nu;Qe.Moderations=WR;Qe.Models=XR;Qe.FineTuning=So;Qe.Graders=X0;Qe.VectorStores=Wd;Qe.Webhooks=cT;Qe.Beta=xo;Qe.Batches=IR;Qe.Uploads=ev;Qe.Responses=Xd;Qe.Realtime=Jd;Qe.Conversations=K0;Qe.Evals=Q0;Qe.Containers=V0;Qe.Videos=lT;class mF extends Qe{constructor(e){super({...e,dangerouslyAllowBrowser:!0})}}function gF(t){return new mF({apiKey:t.apiKey,organization:t.organization,baseURL:t.baseURL})}function yF(t){return`${t}-${Date.now()}-${Math.random().toString(36).substring(7)}`}class vF extends V6{constructor(e,n){super({},n),this.kind="text",this.name="openai",this.client=gF(e)}async*chatStream(e){const n=new Map,r=this.mapTextOptionsToOpenAI(e);try{const s=await this.client.responses.create({...r,stream:!0},{headers:e.request?.headers,signal:e.request?.signal});yield*this.processOpenAIStreamChunks(s,n,e,()=>yF(this.name))}catch(s){const a=s;throw console.error(">>> chatStream: Fatal error during response creation <<<"),console.error(">>> Error message:",a.message),console.error(">>> Error stack:",a.stack),console.error(">>> Full error:",a),s}}async structuredOutput(e){const{chatOptions:n,outputSchema:r}=e,s=this.mapTextOptionsToOpenAI(n),a=eu(r,r.required||[]);try{const l=await this.client.responses.create({...s,stream:!1,text:{format:{type:"json_schema",name:"structured_output",schema:a,strict:!0}}},{headers:n.request?.headers,signal:n.request?.signal}),c=this.extractTextFromResponse(l);let f;try{f=JSON.parse(c)}catch{throw new Error(`Failed to parse structured output as JSON. Content: ${c.slice(0,200)}${c.length>200?"...":""}`)}return{data:yy(f),rawText:c}}catch(l){const c=l;throw console.error(">>> structuredOutput: Error during response creation <<<"),console.error(">>> Error message:",c.message),l}}extractTextFromResponse(e){let n="";for(const r of e.output)if(r.type==="message")for(const s of r.content)s.type==="output_text"&&(n+=s.text);return n}async*processOpenAIStreamChunks(e,n,r,s){let a="",l="";const c=Date.now();let f=0,d=!1,m=!1,p=null,g=r.model;try{for await(const y of e){f++;const x=S=>S.type==="output_text"?(a+=S.text,{type:"content",id:p||s(),model:g||r.model,timestamp:c,delta:S.text,content:a,role:"assistant"}):S.type==="reasoning_text"?(l+=S.text,{type:"thinking",id:p||s(),model:g||r.model,timestamp:c,delta:S.text,content:l}):{type:"error",id:p||s(),model:g||r.model,timestamp:c,error:{message:S.refusal}};if((y.type==="response.created"||y.type==="response.incomplete"||y.type==="response.failed")&&(p=y.response.id,g=y.response.model,d=!1,m=!1,a="",l="",y.response.error&&(yield{type:"error",id:y.response.id,model:y.response.model,timestamp:c,error:y.response.error}),y.response.incomplete_details&&(yield{type:"error",id:y.response.id,model:y.response.model,timestamp:c,error:{message:y.response.incomplete_details.reason??""}})),y.type==="response.output_text.delta"&&y.delta){const S=Array.isArray(y.delta)?y.delta.join(""):typeof y.delta=="string"?y.delta:"";S&&(a+=S,d=!0,yield{type:"content",id:p||s(),model:g||r.model,timestamp:c,delta:S,content:a,role:"assistant"})}if(y.type==="response.reasoning_text.delta"&&y.delta){const S=Array.isArray(y.delta)?y.delta.join(""):typeof y.delta=="string"?y.delta:"";S&&(l+=S,m=!0,yield{type:"thinking",id:p||s(),model:g||r.model,timestamp:c,delta:S,content:l})}if(y.type==="response.reasoning_summary_text.delta"&&y.delta){const S=typeof y.delta=="string"?y.delta:"";S&&(l+=S,m=!0,yield{type:"thinking",id:p||s(),model:g||r.model,timestamp:c,delta:S,content:l})}if(y.type==="response.content_part.added"){const S=y.part;yield x(S)}if(y.type==="response.content_part.done"){const S=y.part;if(S.type==="output_text"&&d||S.type==="reasoning_text"&&m)continue;yield x(S)}if(y.type==="response.output_item.added"){const S=y.item;S.type==="function_call"&&S.id&&(n.has(S.id)||n.set(S.id,{index:y.output_index,name:S.name||""}))}if(y.type==="response.function_call_arguments.done"){const{item_id:S,output_index:E}=y,k=n.get(S)?.name||"";yield{type:"tool_call",id:p||s(),model:g||r.model,timestamp:c,index:E,toolCall:{id:S,type:"function",function:{name:k,arguments:y.arguments}}}}if(y.type==="response.completed"){const S=y.response.output.some(E=>E.type==="function_call");yield{type:"done",id:p||s(),model:g||r.model,timestamp:c,usage:{promptTokens:y.response.usage?.input_tokens||0,completionTokens:y.response.usage?.output_tokens||0,totalTokens:y.response.usage?.total_tokens||0},finishReason:S?"tool_calls":"stop"}}y.type==="error"&&(yield{type:"error",id:p||s(),model:g||r.model,timestamp:c,error:{message:y.message,code:y.code??void 0}})}}catch(y){const x=y;console.log("[OpenAI Adapter] Stream ended with error. Event type summary:",{totalChunks:f,error:x.message}),yield{type:"error",id:s(),model:r.model,timestamp:c,error:{message:x.message||"Unknown error occurred",code:x.code}}}}mapTextOptionsToOpenAI(e){const n=e.modelOptions,r=this.convertMessagesToInput(e.messages);n&&G6({...n,model:e.model});const s=e.tools?l$(e.tools):void 0;return{model:e.model,temperature:e.temperature,max_output_tokens:e.maxTokens,top_p:e.topP,metadata:e.metadata,instructions:e.systemPrompts?.join(`
`),...n,input:r,tools:s}}convertMessagesToInput(e){const n=[];for(const r of e){if(r.role==="tool"){n.push({type:"function_call_output",call_id:r.toolCallId||"",output:typeof r.content=="string"?r.content:JSON.stringify(r.content)});continue}if(r.role==="assistant"){if(r.toolCalls&&r.toolCalls.length>0)for(const l of r.toolCalls){const c=typeof l.function.arguments=="string"?l.function.arguments:JSON.stringify(l.function.arguments);n.push({type:"function_call",call_id:l.id,name:l.function.name,arguments:c})}if(r.content){const l=this.extractTextContent(r.content);l&&n.push({type:"message",role:"assistant",content:l})}continue}const s=this.normalizeContent(r.content),a=[];for(const l of s)a.push(this.convertContentPartToOpenAI(l));a.length===0&&a.push({type:"input_text",text:""}),n.push({type:"message",role:"user",content:a})}return n}convertContentPartToOpenAI(e){switch(e.type){case"text":return{type:"input_text",text:e.content};case"image":{const n=e.metadata;return e.source.type==="url"?{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}:{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}}case"audio":return e.source.type==="url"?{type:"input_file",file_url:e.source.value}:{type:"input_file",file_data:e.source.value};default:throw new Error(`Unsupported content part type: ${e.type}`)}}normalizeContent(e){return e===null?[]:typeof e=="string"?[{type:"text",content:e}]:e}extractTextContent(e){return e===null?"":typeof e=="string"?e:e.filter(n=>n.type==="text").map(n=>n.content).join("")}}const P1={ai:{model:"gpt-4o"}};function Iy(){return typeof window<"u"&&window.__APP_CONFIG__?{...P1,...window.__APP_CONFIG__}:P1}function bF(t){const e=`${window.location.origin}/openai/v1`;return new vF({apiKey:"not-needed",baseURL:e},t)}function xF(){return Iy().ai?.model||"gpt-5.1"}function ce(t,e,n){function r(c,f){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:f,constr:l,traits:new Set},enumerable:!1}),c._zod.traits.has(t))return;c._zod.traits.add(t),e(c,f);const d=l.prototype,m=Object.keys(d);for(let p=0;p<m.length;p++){const g=m[p];g in c||(c[g]=d[g].bind(c))}}const s=n?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function l(c){var f;const d=n?.Parent?new a:this;r(d,c),(f=d._zod).deferred??(f.deferred=[]);for(const m of d._zod.deferred)m();return d}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:c=>n?.Parent&&c instanceof n.Parent?!0:c?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class io extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class dT extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const hT={};function Qi(t){return hT}function pT(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function Ny(t,e){return typeof e=="bigint"?e.toString():e}function nv(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function rv(t){return t==null}function sv(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const $1=Symbol("evaluating");function yt(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==$1)return r===void 0&&(r=$1,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Wi(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function li(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function F1(t){return JSON.stringify(t)}function SF(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const mT="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Cd(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const wF=nv(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function bu(t){if(Cd(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Cd(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function gT(t){return bu(t)?{...t}:Array.isArray(t)?[...t]:t}const _F=new Set(["string","number","symbol"]);function eh(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ui(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function Be(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function CF(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function EF(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=li(t._zod.def,{get shape(){const l={};for(const c in e){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&(l[c]=n.shape[c])}return Wi(this,"shape",l),l},checks:[]});return ui(t,a)}function kF(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=li(t._zod.def,{get shape(){const l={...t._zod.def.shape};for(const c in e){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&delete l[c]}return Wi(this,"shape",l),l},checks:[]});return ui(t,a)}function RF(t,e){if(!bu(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const a=t._zod.def.shape;for(const l in e)if(Object.getOwnPropertyDescriptor(a,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=li(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return Wi(this,"shape",a),a}});return ui(t,s)}function TF(t,e){if(!bu(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=li(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return Wi(this,"shape",r),r}});return ui(t,n)}function AF(t,e){const n=li(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Wi(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return ui(t,n)}function OF(t,e,n){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=li(e._zod.def,{get shape(){const c=e._zod.def.shape,f={...c};if(n)for(const d in n){if(!(d in c))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(f[d]=t?new t({type:"optional",innerType:c[d]}):c[d])}else for(const d in c)f[d]=t?new t({type:"optional",innerType:c[d]}):c[d];return Wi(this,"shape",f),f},checks:[]});return ui(e,l)}function MF(t,e,n){const r=li(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new t({type:"nonoptional",innerType:s[l]});return Wi(this,"shape",a),a}});return ui(e,r)}function to(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function yT(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function wf(t){return typeof t=="string"?t:t?.message}function Zi(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const s=wf(t.inst?._zod.def?.error?.(t))??wf(e?.error?.(t))??wf(n.customError?.(t))??wf(n.localeError?.(t))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function iv(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function xu(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const vT=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Ny,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},bT=ce("$ZodError",vT),xT=ce("$ZodError",vT,{Parent:Error});function IF(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function NF(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,c=0;for(;c<a.path.length;){const f=a.path[c];c===a.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(a))):l[f]=l[f]||{_errors:[]},l=l[f],c++}}};return r(t),n}const av=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new io;if(l.issues.length){const c=new(s?.Err??t)(l.issues.map(f=>Zi(f,a,Qi())));throw mT(c,s?.callee),c}return l.value},ov=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const c=new(s?.Err??t)(l.issues.map(f=>Zi(f,a,Qi())));throw mT(c,s?.callee),c}return l.value},th=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new io;return a.issues.length?{success:!1,error:new(t??bT)(a.issues.map(l=>Zi(l,s,Qi())))}:{success:!0,data:a.value}},zF=th(xT),nh=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>Zi(l,s,Qi())))}:{success:!0,data:a.value}},DF=nh(xT),jF=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return av(t)(e,n,s)},LF=t=>(e,n,r)=>av(t)(e,n,r),PF=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return ov(t)(e,n,s)},$F=t=>async(e,n,r)=>ov(t)(e,n,r),FF=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return th(t)(e,n,s)},BF=t=>(e,n,r)=>th(t)(e,n,r),UF=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return nh(t)(e,n,s)},qF=t=>async(e,n,r)=>nh(t)(e,n,r),HF=/^[cC][^\s-]{8,}$/,VF=/^[0-9a-z]+$/,KF=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,GF=/^[0-9a-vA-V]{20}$/,QF=/^[A-Za-z0-9]{27}$/,ZF=/^[a-zA-Z0-9_-]{21}$/,YF=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,JF=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,B1=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,XF=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,WF="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function eB(){return new RegExp(WF,"u")}const tB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,nB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,rB=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,sB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,iB=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ST=/^[A-Za-z0-9_-]*$/,aB=/^\+[1-9]\d{6,14}$/,wT="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",oB=new RegExp(`^${wT}$`);function _T(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function lB(t){return new RegExp(`^${_T(t)}$`)}function uB(t){const e=_T({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${wT}T(?:${r})$`)}const cB=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},fB=/^[^A-Z]*$/,dB=/^[^a-z]*$/,Vr=ce("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),hB=ce("$ZodCheckMaxLength",(t,e)=>{var n;Vr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!rv(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=iv(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),pB=ce("$ZodCheckMinLength",(t,e)=>{var n;Vr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!rv(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=iv(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),mB=ce("$ZodCheckLengthEquals",(t,e)=>{var n;Vr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!rv(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const l=iv(s),c=a>e.length;r.issues.push({origin:l,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),rh=ce("$ZodCheckStringFormat",(t,e)=>{var n,r;Vr.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),gB=ce("$ZodCheckRegex",(t,e)=>{rh.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),yB=ce("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=fB),rh.init(t,e)}),vB=ce("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=dB),rh.init(t,e)}),bB=ce("$ZodCheckIncludes",(t,e)=>{Vr.init(t,e);const n=eh(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),xB=ce("$ZodCheckStartsWith",(t,e)=>{Vr.init(t,e);const n=new RegExp(`^${eh(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),SB=ce("$ZodCheckEndsWith",(t,e)=>{Vr.init(t,e);const n=new RegExp(`.*${eh(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),wB=ce("$ZodCheckOverwrite",(t,e)=>{Vr.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class _B{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const CB={major:4,minor:3,patch:4},Qt=ce("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=CB;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const a of s._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(l,c,f)=>{let d=to(l),m;for(const p of c){if(p._zod.def.when){if(!p._zod.def.when(l))continue}else if(d)continue;const g=l.issues.length,y=p._zod.check(l);if(y instanceof Promise&&f?.async===!1)throw new io;if(m||y instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await y,l.issues.length!==g&&(d||(d=to(l,g)))});else{if(l.issues.length===g)continue;d||(d=to(l,g))}}return m?m.then(()=>l):l},a=(l,c,f)=>{if(to(l))return l.aborted=!0,l;const d=s(c,r,f);if(d instanceof Promise){if(f.async===!1)throw new io;return d.then(m=>t._zod.parse(m,f))}return t._zod.parse(d,f)};t._zod.run=(l,c)=>{if(c.skipChecks)return t._zod.parse(l,c);if(c.direction==="backward"){const d=t._zod.parse({value:l.value,issues:[]},{...c,skipChecks:!0});return d instanceof Promise?d.then(m=>a(m,l,c)):a(d,l,c)}const f=t._zod.parse(l,c);if(f instanceof Promise){if(c.async===!1)throw new io;return f.then(d=>s(d,r,c))}return s(f,r,c)}}yt(t,"~standard",()=>({validate:s=>{try{const a=zF(t,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return DF(t,s).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),lv=ce("$ZodString",(t,e)=>{Qt.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??cB(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),At=ce("$ZodStringFormat",(t,e)=>{rh.init(t,e),lv.init(t,e)}),EB=ce("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=JF),At.init(t,e)}),kB=ce("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=B1(r))}else e.pattern??(e.pattern=B1());At.init(t,e)}),RB=ce("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=XF),At.init(t,e)}),TB=ce("$ZodURL",(t,e)=>{At.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),AB=ce("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=eB()),At.init(t,e)}),OB=ce("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=ZF),At.init(t,e)}),MB=ce("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=HF),At.init(t,e)}),IB=ce("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=VF),At.init(t,e)}),NB=ce("$ZodULID",(t,e)=>{e.pattern??(e.pattern=KF),At.init(t,e)}),zB=ce("$ZodXID",(t,e)=>{e.pattern??(e.pattern=GF),At.init(t,e)}),DB=ce("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=QF),At.init(t,e)}),jB=ce("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=uB(e)),At.init(t,e)}),LB=ce("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=oB),At.init(t,e)}),PB=ce("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=lB(e)),At.init(t,e)}),$B=ce("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=YF),At.init(t,e)}),FB=ce("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=tB),At.init(t,e),t._zod.bag.format="ipv4"}),BB=ce("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=nB),At.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),UB=ce("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=rB),At.init(t,e)}),qB=ce("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=sB),At.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function CT(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const HB=ce("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=iB),At.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{CT(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function VB(t){if(!ST.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return CT(n)}const KB=ce("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=ST),At.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{VB(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),GB=ce("$ZodE164",(t,e)=>{e.pattern??(e.pattern=aB),At.init(t,e)});function QB(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const ZB=ce("$ZodJWT",(t,e)=>{At.init(t,e),t._zod.check=n=>{QB(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),YB=ce("$ZodUnknown",(t,e)=>{Qt.init(t,e),t._zod.parse=n=>n}),JB=ce("$ZodNever",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function U1(t,e,n){t.issues.length&&e.issues.push(...yT(n,t.issues)),e.value[n]=t.value}const XB=ce("$ZodArray",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const c=s[l],f=e.element._zod.run({value:c,issues:[]},r);f instanceof Promise?a.push(f.then(d=>U1(d,n,l))):U1(f,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function Ed(t,e,n,r,s){if(t.issues.length){if(s&&!(n in r))return;e.issues.push(...yT(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function ET(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=CF(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function kT(t,e,n,r,s,a){const l=[],c=s.keySet,f=s.catchall._zod,d=f.def.type,m=f.optout==="optional";for(const p in e){if(c.has(p))continue;if(d==="never"){l.push(p);continue}const g=f.run({value:e[p],issues:[]},r);g instanceof Promise?t.push(g.then(y=>Ed(y,n,p,e,m))):Ed(g,n,p,e,m)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const WB=ce("$ZodObject",(t,e)=>{if(Qt.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const c=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...c};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=nv(()=>ET(e));yt(t._zod,"propValues",()=>{const c=e.shape,f={};for(const d in c){const m=c[d]._zod;if(m.values){f[d]??(f[d]=new Set);for(const p of m.values)f[d].add(p)}}return f});const s=Cd,a=e.catchall;let l;t._zod.parse=(c,f)=>{l??(l=r.value);const d=c.value;if(!s(d))return c.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),c;c.value={};const m=[],p=l.shape;for(const g of l.keys){const y=p[g],x=y._zod.optout==="optional",S=y._zod.run({value:d[g],issues:[]},f);S instanceof Promise?m.push(S.then(E=>Ed(E,c,g,d,x))):Ed(S,c,g,d,x)}return a?kT(m,d,c,f,r.value,t):m.length?Promise.all(m).then(()=>c):c}}),eU=ce("$ZodObjectJIT",(t,e)=>{WB.init(t,e);const n=t._zod.parse,r=nv(()=>ET(e)),s=g=>{const y=new _B(["shape","payload","ctx"]),x=r.value,S=R=>{const N=F1(R);return`shape[${N}]._zod.run({ value: input[${N}], issues: [] }, ctx)`};y.write("const input = payload.value;");const E=Object.create(null);let C=0;for(const R of x.keys)E[R]=`key_${C++}`;y.write("const newResult = {};");for(const R of x.keys){const N=E[R],j=F1(R),D=g[R]?._zod?.optout==="optional";y.write(`const ${N} = ${S(R)};`),D?y.write(`
        if (${N}.issues.length) {
          if (${j} in input) {
            payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${j}, ...iss.path] : [${j}]
            })));
          }
        }
        
        if (${N}.value === undefined) {
          if (${j} in input) {
            newResult[${j}] = undefined;
          }
        } else {
          newResult[${j}] = ${N}.value;
        }
        
      `):y.write(`
        if (${N}.issues.length) {
          payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${j}, ...iss.path] : [${j}]
          })));
        }
        
        if (${N}.value === undefined) {
          if (${j} in input) {
            newResult[${j}] = undefined;
          }
        } else {
          newResult[${j}] = ${N}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");const k=y.compile();return(R,N)=>k(g,R,N)};let a;const l=Cd,c=!hT.jitless,d=c&&wF.value,m=e.catchall;let p;t._zod.parse=(g,y)=>{p??(p=r.value);const x=g.value;return l(x)?c&&d&&y?.async===!1&&y.jitless!==!0?(a||(a=s(e.shape)),g=a(g,y),m?kT([],x,g,y,p,t):g):n(g,y):(g.issues.push({expected:"object",code:"invalid_type",input:x,inst:t}),g)}});function q1(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!to(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>Zi(l,r,Qi())))}),e)}const tU=ce("$ZodUnion",(t,e)=>{Qt.init(t,e),yt(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),yt(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),yt(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),yt(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>sv(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let l=!1;const c=[];for(const f of e.options){const d=f._zod.run({value:s.value,issues:[]},a);if(d instanceof Promise)c.push(d),l=!0;else{if(d.issues.length===0)return d;c.push(d)}}return l?Promise.all(c).then(f=>q1(f,s,t,a)):q1(c,s,t,a)}}),nU=ce("$ZodIntersection",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([f,d])=>H1(n,f,d)):H1(n,a,l)}});function zy(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(bu(t)&&bu(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const l=zy(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],l=zy(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function H1(t,e,n){const r=new Map;let s;for(const c of e.issues)if(c.code==="unrecognized_keys"){s??(s=c);for(const f of c.keys)r.has(f)||r.set(f,{}),r.get(f).l=!0}else t.issues.push(c);for(const c of n.issues)if(c.code==="unrecognized_keys")for(const f of c.keys)r.has(f)||r.set(f,{}),r.get(f).r=!0;else t.issues.push(c);const a=[...r].filter(([,c])=>c.l&&c.r).map(([c])=>c);if(a.length&&s&&t.issues.push({...s,keys:a}),to(t))return t;const l=zy(e.value,n.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return t.value=l.data,t}const rU=ce("$ZodEnum",(t,e)=>{Qt.init(t,e);const n=pT(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>_F.has(typeof s)).map(s=>typeof s=="string"?eh(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),sU=ce("$ZodTransform",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new dT(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new io;return n.value=s,n}});function V1(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const RT=ce("$ZodOptional",(t,e)=>{Qt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",yt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),yt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${sv(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>V1(a,n.value)):V1(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),iU=ce("$ZodExactOptional",(t,e)=>{RT.init(t,e),yt(t._zod,"values",()=>e.innerType._zod.values),yt(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),aU=ce("$ZodNullable",(t,e)=>{Qt.init(t,e),yt(t._zod,"optin",()=>e.innerType._zod.optin),yt(t._zod,"optout",()=>e.innerType._zod.optout),yt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${sv(n.source)}|null)$`):void 0}),yt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),oU=ce("$ZodDefault",(t,e)=>{Qt.init(t,e),t._zod.optin="optional",yt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>K1(a,e)):K1(s,e)}});function K1(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const lU=ce("$ZodPrefault",(t,e)=>{Qt.init(t,e),t._zod.optin="optional",yt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),uU=ce("$ZodNonOptional",(t,e)=>{Qt.init(t,e),yt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>G1(a,t)):G1(s,t)}});function G1(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const cU=ce("$ZodCatch",(t,e)=>{Qt.init(t,e),yt(t._zod,"optin",()=>e.innerType._zod.optin),yt(t._zod,"optout",()=>e.innerType._zod.optout),yt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>Zi(l,r,Qi()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>Zi(a,r,Qi()))},input:n.value}),n.issues=[]),n)}}),fU=ce("$ZodPipe",(t,e)=>{Qt.init(t,e),yt(t._zod,"values",()=>e.in._zod.values),yt(t._zod,"optin",()=>e.in._zod.optin),yt(t._zod,"optout",()=>e.out._zod.optout),yt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>_f(l,e.in,r)):_f(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>_f(a,e.out,r)):_f(s,e.out,r)}});function _f(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const dU=ce("$ZodReadonly",(t,e)=>{Qt.init(t,e),yt(t._zod,"propValues",()=>e.innerType._zod.propValues),yt(t._zod,"values",()=>e.innerType._zod.values),yt(t._zod,"optin",()=>e.innerType?._zod?.optin),yt(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(Q1):Q1(s)}});function Q1(t){return t.value=Object.freeze(t.value),t}const hU=ce("$ZodCustom",(t,e)=>{Vr.init(t,e),Qt.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>Z1(a,n,r,t));Z1(s,n,r,t)}});function Z1(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(xu(s))}}var Y1;class pU{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function mU(){return new pU}(Y1=globalThis).__zod_globalRegistry??(Y1.__zod_globalRegistry=mU());const ql=globalThis.__zod_globalRegistry;function gU(t,e){return new t({type:"string",...Be(e)})}function yU(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Be(e)})}function J1(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Be(e)})}function vU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Be(e)})}function bU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Be(e)})}function xU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Be(e)})}function SU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Be(e)})}function wU(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Be(e)})}function _U(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Be(e)})}function CU(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Be(e)})}function EU(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Be(e)})}function kU(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Be(e)})}function RU(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Be(e)})}function TU(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Be(e)})}function AU(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Be(e)})}function OU(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Be(e)})}function MU(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Be(e)})}function IU(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Be(e)})}function NU(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Be(e)})}function zU(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Be(e)})}function DU(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Be(e)})}function jU(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Be(e)})}function LU(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Be(e)})}function PU(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Be(e)})}function $U(t,e){return new t({type:"string",format:"date",check:"string_format",...Be(e)})}function FU(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Be(e)})}function BU(t,e){return new t({type:"string",format:"duration",check:"string_format",...Be(e)})}function UU(t){return new t({type:"unknown"})}function qU(t,e){return new t({type:"never",...Be(e)})}function TT(t,e){return new hB({check:"max_length",...Be(e),maximum:t})}function kd(t,e){return new pB({check:"min_length",...Be(e),minimum:t})}function AT(t,e){return new mB({check:"length_equals",...Be(e),length:t})}function HU(t,e){return new gB({check:"string_format",format:"regex",...Be(e),pattern:t})}function VU(t){return new yB({check:"string_format",format:"lowercase",...Be(t)})}function KU(t){return new vB({check:"string_format",format:"uppercase",...Be(t)})}function GU(t,e){return new bB({check:"string_format",format:"includes",...Be(e),includes:t})}function QU(t,e){return new xB({check:"string_format",format:"starts_with",...Be(e),prefix:t})}function ZU(t,e){return new SB({check:"string_format",format:"ends_with",...Be(e),suffix:t})}function wo(t){return new wB({check:"overwrite",tx:t})}function YU(t){return wo(e=>e.normalize(t))}function JU(){return wo(t=>t.trim())}function XU(){return wo(t=>t.toLowerCase())}function WU(){return wo(t=>t.toUpperCase())}function e8(){return wo(t=>SF(t))}function t8(t,e,n){return new t({type:"array",element:e,...Be(n)})}function n8(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Be(n)})}function r8(t){const e=s8(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(xu(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(xu(s))}},t(n.value,n)));return e}function s8(t,e){const n=new Vr({check:"custom",...Be(e)});return n._zod.check=t,n}function OT(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??ql,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function fn(t,e,n={path:[],schemaPath:[]}){var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const c=t._zod.toJSONSchema?.();if(c)l.schema=c;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,m);else{const g=l.schema,y=e.processors[s.type];if(!y)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);y(t,e,g,m)}const p=t._zod.parent;p&&(l.ref||(l.ref=p),fn(p,e,m),e.seen.get(p).isParent=!0)}const f=e.metadataRegistry.get(t);return f&&Object.assign(l.schema,f),e.io==="input"&&bn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function MT(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const l of t.seen.entries()){const c=t.metadataRegistry.get(l[0])?.id;if(c){const f=r.get(c);if(f&&f!==l[0])throw new Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(c,l[0])}}const s=l=>{const c=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(l[0])?.id,g=t.external.uri??(x=>x);if(p)return{ref:g(p)};const y=l[1].defId??l[1].schema.id??`schema${t.counter++}`;return l[1].defId=y,{defId:y,ref:`${g("__shared")}#/${c}/${y}`}}if(l[1]===n)return{ref:"#"};const d=`#/${c}/`,m=l[1].schema.id??`__schema${t.counter++}`;return{defId:m,ref:d+m}},a=l=>{if(l[1].schema.$ref)return;const c=l[1],{ref:f,defId:d}=s(l);c.def={...c.schema},d&&(c.defId=d);const m=c.schema;for(const p in m)delete m[p];m.$ref=f};if(t.cycles==="throw")for(const l of t.seen.entries()){const c=l[1];if(c.cycle)throw new Error(`Cycle detected: #/${c.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of t.seen.entries()){const c=l[1];if(e===l[0]){a(l);continue}if(t.external){const d=t.external.registry.get(l[0])?.id;if(e!==l[0]&&d){a(l);continue}}if(t.metadataRegistry.get(l[0])?.id){a(l);continue}if(c.cycle){a(l);continue}if(c.count>1&&t.reused==="ref"){a(l);continue}}}function IT(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{const c=t.seen.get(l);if(c.ref===null)return;const f=c.def??c.schema,d={...f},m=c.ref;if(c.ref=null,m){r(m);const g=t.seen.get(m),y=g.schema;if(y.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(y)):Object.assign(f,y),Object.assign(f,d),l._zod.parent===m)for(const S in f)S==="$ref"||S==="allOf"||S in d||delete f[S];if(y.$ref)for(const S in f)S==="$ref"||S==="allOf"||S in g.def&&JSON.stringify(f[S])===JSON.stringify(g.def[S])&&delete f[S]}const p=l._zod.parent;if(p&&p!==m){r(p);const g=t.seen.get(p);if(g?.schema.$ref&&(f.$ref=g.schema.$ref,g.def))for(const y in f)y==="$ref"||y==="allOf"||y in g.def&&JSON.stringify(f[y])===JSON.stringify(g.def[y])&&delete f[y]}t.override({zodSchema:l,jsonSchema:f,path:c.path??[]})};for(const l of[...t.seen.entries()].reverse())r(l[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const l=t.external.registry.get(e)?.id;if(!l)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(l)}Object.assign(s,n.def??n.schema);const a=t.external?.defs??{};for(const l of t.seen.entries()){const c=l[1];c.def&&c.defId&&(a[c.defId]=c.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const l=JSON.parse(JSON.stringify(s));return Object.defineProperty(l,"~standard",{value:{...e["~standard"],jsonSchema:{input:Rd(e,"input",t.processors),output:Rd(e,"output",t.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function bn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return bn(r.element,n);if(r.type==="set")return bn(r.valueType,n);if(r.type==="lazy")return bn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return bn(r.innerType,n);if(r.type==="intersection")return bn(r.left,n)||bn(r.right,n);if(r.type==="record"||r.type==="map")return bn(r.keyType,n)||bn(r.valueType,n);if(r.type==="pipe")return bn(r.in,n)||bn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(bn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(bn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(bn(s,n))return!0;return!!(r.rest&&bn(r.rest,n))}return!1}const i8=(t,e={})=>n=>{const r=OT({...n,processors:e});return fn(t,r),MT(r,t),IT(r,t)},Rd=(t,e,n={})=>r=>{const{libraryOptions:s,target:a}=r??{},l=OT({...s??{},target:a,io:e,processors:n});return fn(t,l),MT(l,t),IT(l,t)},a8={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},o8=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:l,format:c,patterns:f,contentEncoding:d}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),c&&(s.format=a8[c]??c,s.format===""&&delete s.format,c==="time"&&delete s.format),d&&(s.contentEncoding=d),f&&f.size>0){const m=[...f];m.length===1?s.pattern=m[0].source:m.length>1&&(s.allOf=[...m.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},l8=(t,e,n,r)=>{n.not={}},u8=(t,e,n,r)=>{},c8=(t,e,n,r)=>{const s=t._zod.def,a=pT(s.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},f8=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},d8=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},h8=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:l,maximum:c}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof c=="number"&&(s.maxItems=c),s.type="array",s.items=fn(a.element,e,{...r,path:[...r.path,"items"]})},p8=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",s.properties={};const l=a.shape;for(const d in l)s.properties[d]=fn(l[d],e,{...r,path:[...r.path,"properties",d]});const c=new Set(Object.keys(l)),f=new Set([...c].filter(d=>{const m=a.shape[d]._zod;return e.io==="input"?m.optin===void 0:m.optout===void 0}));f.size>0&&(s.required=Array.from(f)),a.catchall?._zod.def.type==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=fn(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},m8=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,l=s.options.map((c,f)=>fn(c,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=l:n.anyOf=l},g8=(t,e,n,r)=>{const s=t._zod.def,a=fn(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=fn(s.right,e,{...r,path:[...r.path,"allOf",1]}),c=d=>"allOf"in d&&Object.keys(d).length===1,f=[...c(a)?a.allOf:[a],...c(l)?l.allOf:[l]];n.allOf=f},y8=(t,e,n,r)=>{const s=t._zod.def,a=fn(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},v8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},b8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},x8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},S8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},w8=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;fn(a,e,r);const l=e.seen.get(t);l.ref=a},_8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},NT=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},C8=ce("ZodISODateTime",(t,e)=>{jB.init(t,e),Ot.init(t,e)});function E8(t){return PU(C8,t)}const k8=ce("ZodISODate",(t,e)=>{LB.init(t,e),Ot.init(t,e)});function R8(t){return $U(k8,t)}const T8=ce("ZodISOTime",(t,e)=>{PB.init(t,e),Ot.init(t,e)});function A8(t){return FU(T8,t)}const O8=ce("ZodISODuration",(t,e)=>{$B.init(t,e),Ot.init(t,e)});function M8(t){return BU(O8,t)}const I8=(t,e)=>{bT.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>NF(t,n)},flatten:{value:n=>IF(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,Ny,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,Ny,2)}},isEmpty:{get(){return t.issues.length===0}}})},wr=ce("ZodError",I8,{Parent:Error}),N8=av(wr),z8=ov(wr),D8=th(wr),j8=nh(wr),L8=jF(wr),P8=LF(wr),$8=PF(wr),F8=$F(wr),B8=FF(wr),U8=BF(wr),q8=UF(wr),H8=qF(wr),Zt=ce("ZodType",(t,e)=>(Qt.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:Rd(t,"input"),output:Rd(t,"output")}}),t.toJSONSchema=i8(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(li(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>ui(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>N8(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>D8(t,n,r),t.parseAsync=async(n,r)=>z8(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>j8(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>L8(t,n,r),t.decode=(n,r)=>P8(t,n,r),t.encodeAsync=async(n,r)=>$8(t,n,r),t.decodeAsync=async(n,r)=>F8(t,n,r),t.safeEncode=(n,r)=>B8(t,n,r),t.safeDecode=(n,r)=>U8(t,n,r),t.safeEncodeAsync=async(n,r)=>q8(t,n,r),t.safeDecodeAsync=async(n,r)=>H8(t,n,r),t.refine=(n,r)=>t.check(jq(n,r)),t.superRefine=n=>t.check(Lq(n)),t.overwrite=n=>t.check(wo(n)),t.optional=()=>eC(t),t.exactOptional=()=>_q(t),t.nullable=()=>tC(t),t.nullish=()=>eC(tC(t)),t.nonoptional=n=>Aq(t,n),t.array=()=>hq(t),t.or=n=>gq([t,n]),t.and=n=>vq(t,n),t.transform=n=>nC(t,Sq(n)),t.default=n=>kq(t,n),t.prefault=n=>Tq(t,n),t.catch=n=>Mq(t,n),t.pipe=n=>nC(t,n),t.readonly=()=>zq(t),t.describe=n=>{const r=t.clone();return ql.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return ql.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return ql.get(t);const r=t.clone();return ql.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),zT=ce("_ZodString",(t,e)=>{lv.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>o8(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(HU(...r)),t.includes=(...r)=>t.check(GU(...r)),t.startsWith=(...r)=>t.check(QU(...r)),t.endsWith=(...r)=>t.check(ZU(...r)),t.min=(...r)=>t.check(kd(...r)),t.max=(...r)=>t.check(TT(...r)),t.length=(...r)=>t.check(AT(...r)),t.nonempty=(...r)=>t.check(kd(1,...r)),t.lowercase=r=>t.check(VU(r)),t.uppercase=r=>t.check(KU(r)),t.trim=()=>t.check(JU()),t.normalize=(...r)=>t.check(YU(...r)),t.toLowerCase=()=>t.check(XU()),t.toUpperCase=()=>t.check(WU()),t.slugify=()=>t.check(e8())}),V8=ce("ZodString",(t,e)=>{lv.init(t,e),zT.init(t,e),t.email=n=>t.check(yU(K8,n)),t.url=n=>t.check(wU(G8,n)),t.jwt=n=>t.check(LU(lq,n)),t.emoji=n=>t.check(_U(Q8,n)),t.guid=n=>t.check(J1(X1,n)),t.uuid=n=>t.check(vU(Cf,n)),t.uuidv4=n=>t.check(bU(Cf,n)),t.uuidv6=n=>t.check(xU(Cf,n)),t.uuidv7=n=>t.check(SU(Cf,n)),t.nanoid=n=>t.check(CU(Z8,n)),t.guid=n=>t.check(J1(X1,n)),t.cuid=n=>t.check(EU(Y8,n)),t.cuid2=n=>t.check(kU(J8,n)),t.ulid=n=>t.check(RU(X8,n)),t.base64=n=>t.check(zU(iq,n)),t.base64url=n=>t.check(DU(aq,n)),t.xid=n=>t.check(TU(W8,n)),t.ksuid=n=>t.check(AU(eq,n)),t.ipv4=n=>t.check(OU(tq,n)),t.ipv6=n=>t.check(MU(nq,n)),t.cidrv4=n=>t.check(IU(rq,n)),t.cidrv6=n=>t.check(NU(sq,n)),t.e164=n=>t.check(jU(oq,n)),t.datetime=n=>t.check(E8(n)),t.date=n=>t.check(R8(n)),t.time=n=>t.check(A8(n)),t.duration=n=>t.check(M8(n))});function sh(t){return gU(V8,t)}const Ot=ce("ZodStringFormat",(t,e)=>{At.init(t,e),zT.init(t,e)}),K8=ce("ZodEmail",(t,e)=>{RB.init(t,e),Ot.init(t,e)}),X1=ce("ZodGUID",(t,e)=>{EB.init(t,e),Ot.init(t,e)}),Cf=ce("ZodUUID",(t,e)=>{kB.init(t,e),Ot.init(t,e)}),G8=ce("ZodURL",(t,e)=>{TB.init(t,e),Ot.init(t,e)}),Q8=ce("ZodEmoji",(t,e)=>{AB.init(t,e),Ot.init(t,e)}),Z8=ce("ZodNanoID",(t,e)=>{OB.init(t,e),Ot.init(t,e)}),Y8=ce("ZodCUID",(t,e)=>{MB.init(t,e),Ot.init(t,e)}),J8=ce("ZodCUID2",(t,e)=>{IB.init(t,e),Ot.init(t,e)}),X8=ce("ZodULID",(t,e)=>{NB.init(t,e),Ot.init(t,e)}),W8=ce("ZodXID",(t,e)=>{zB.init(t,e),Ot.init(t,e)}),eq=ce("ZodKSUID",(t,e)=>{DB.init(t,e),Ot.init(t,e)}),tq=ce("ZodIPv4",(t,e)=>{FB.init(t,e),Ot.init(t,e)}),nq=ce("ZodIPv6",(t,e)=>{BB.init(t,e),Ot.init(t,e)}),rq=ce("ZodCIDRv4",(t,e)=>{UB.init(t,e),Ot.init(t,e)}),sq=ce("ZodCIDRv6",(t,e)=>{qB.init(t,e),Ot.init(t,e)}),iq=ce("ZodBase64",(t,e)=>{HB.init(t,e),Ot.init(t,e)}),aq=ce("ZodBase64URL",(t,e)=>{KB.init(t,e),Ot.init(t,e)}),oq=ce("ZodE164",(t,e)=>{GB.init(t,e),Ot.init(t,e)}),lq=ce("ZodJWT",(t,e)=>{ZB.init(t,e),Ot.init(t,e)}),uq=ce("ZodUnknown",(t,e)=>{YB.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>u8()});function W1(){return UU(uq)}const cq=ce("ZodNever",(t,e)=>{JB.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>l8(t,n,r)});function fq(t){return qU(cq,t)}const dq=ce("ZodArray",(t,e)=>{XB.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>h8(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(kd(n,r)),t.nonempty=n=>t.check(kd(1,n)),t.max=(n,r)=>t.check(TT(n,r)),t.length=(n,r)=>t.check(AT(n,r)),t.unwrap=()=>t.element});function hq(t,e){return t8(dq,t,e)}const pq=ce("ZodObject",(t,e)=>{eU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>p8(t,n,r,s),yt(t,"shape",()=>e.shape),t.keyof=()=>bq(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:W1()}),t.loose=()=>t.clone({...t._zod.def,catchall:W1()}),t.strict=()=>t.clone({...t._zod.def,catchall:fq()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>RF(t,n),t.safeExtend=n=>TF(t,n),t.merge=n=>AF(t,n),t.pick=n=>EF(t,n),t.omit=n=>kF(t,n),t.partial=(...n)=>OF(DT,t,n[0]),t.required=(...n)=>MF(jT,t,n[0])});function zu(t,e){const n={type:"object",shape:t??{},...Be(e)};return new pq(n)}const mq=ce("ZodUnion",(t,e)=>{tU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>m8(t,n,r,s),t.options=e.options});function gq(t,e){return new mq({type:"union",options:t,...Be(e)})}const yq=ce("ZodIntersection",(t,e)=>{nU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>g8(t,n,r,s)});function vq(t,e){return new yq({type:"intersection",left:t,right:e})}const Dy=ce("ZodEnum",(t,e)=>{rU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>c8(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Dy({...e,checks:[],...Be(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new Dy({...e,checks:[],...Be(s),entries:a})}});function bq(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Dy({type:"enum",entries:n,...Be(e)})}const xq=ce("ZodTransform",(t,e)=>{sU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>d8(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new dT(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(xu(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(xu(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function Sq(t){return new xq({type:"transform",transform:t})}const DT=ce("ZodOptional",(t,e)=>{RT.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>NT(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function eC(t){return new DT({type:"optional",innerType:t})}const wq=ce("ZodExactOptional",(t,e)=>{iU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>NT(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function _q(t){return new wq({type:"optional",innerType:t})}const Cq=ce("ZodNullable",(t,e)=>{aU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>y8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function tC(t){return new Cq({type:"nullable",innerType:t})}const Eq=ce("ZodDefault",(t,e)=>{oU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>b8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function kq(t,e){return new Eq({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():gT(e)}})}const Rq=ce("ZodPrefault",(t,e)=>{lU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>x8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Tq(t,e){return new Rq({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():gT(e)}})}const jT=ce("ZodNonOptional",(t,e)=>{uU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>v8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function Aq(t,e){return new jT({type:"nonoptional",innerType:t,...Be(e)})}const Oq=ce("ZodCatch",(t,e)=>{cU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>S8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function Mq(t,e){return new Oq({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const Iq=ce("ZodPipe",(t,e)=>{fU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>w8(t,n,r,s),t.in=e.in,t.out=e.out});function nC(t,e){return new Iq({type:"pipe",in:t,out:e})}const Nq=ce("ZodReadonly",(t,e)=>{dU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>_8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function zq(t){return new Nq({type:"readonly",innerType:t})}const Dq=ce("ZodCustom",(t,e)=>{hU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>f8(t,n)});function jq(t,e={}){return n8(Dq,t,e)}function Lq(t){return r8(t)}const jy=50;function Pq(t){return t?t.length<=jy?t:t.slice(0,jy):[]}function Ef(t){return t.error?{error:t.error}:{columns:t.columns,rowCount:t.rows?.length??0,rows:Pq(t.rows),rowsAffected:t.rows_affected,truncated:(t.rows?.length??0)>jy}}const $q=zu({}),Fq=zu({query:sh().describe("The SQL query to set in the editor")}),Bq=zu({query:sh().describe("The SQL query to execute")}),Uq=zu({query:sh().describe("The SQL SELECT query to run silently")}),qq=zu({query:sh().describe("The SQL statement (INSERT/UPDATE/DELETE) to execute silently")}),Hq=Ou({name:"get_query_result",description:"Get the result of the last executed query that was shown in the UI, including columns, rows, and any errors",inputSchema:$q}),Vq=Ou({name:"set_query",description:"Set the SQL query in the editor without executing it. The user will see the query appear in their editor immediately.",inputSchema:Fq}),Kq=Ou({name:"execute_query",description:"Execute a SQL query and show results in the UI. The query will be set in the editor and executed, with results displayed to the user. Returns the query results directly.",inputSchema:Bq}),Gq=Ou({name:"run_query",description:"Run a SELECT query silently WITHOUT changing the UI or query editor. Use this for exploratory queries, checking data, or gathering information without disrupting what the user is currently working on. Results are returned but not shown in the UI. Only use for SELECT, WITH, SHOW, DESCRIBE, EXPLAIN, or PRAGMA queries.",inputSchema:Uq}),Qq=Ou({name:"run_statement",description:"Execute an INSERT, UPDATE, or DELETE statement silently WITHOUT changing the UI. Use this for modifying data without disrupting what the user is currently working on. Returns rows_affected count.",inputSchema:qq});function Zq(t){const{queryResult:e,setters:n}=t,r=Hq.client(async()=>e?Ef(e):{error:"No query has been executed yet."}),s=Vq.client(async f=>{const d=f;return n.setQuery(d.query),{success:!0,query:d.query}}),a=Kq.client(async f=>{const d=f;try{const m=await n.executeQuery(d.query);return Ef(m)}catch(m){return{error:m instanceof Error?m.message:"Query execution failed"}}}),l=Gq.client(async f=>{const d=f;try{const m=await n.runQuerySilent(d.query);return Ef(m)}catch(m){return{error:m instanceof Error?m.message:"Query execution failed"}}}),c=Qq.client(async f=>{const d=f;try{const m=await n.runStatementSilent(d.query);return Ef(m)}catch(m){return{error:m instanceof Error?m.message:"Statement execution failed"}}});return U6(r,s,a,l,c)}function Yq(t){const{connection:e,database:n,table:r,currentQuery:s,schema:a}=t,l=[];e&&e.sql?(l.push(`- **Driver**: ${e.sql.driver}`),l.push(`- **Database**: ${n||"(none selected)"}`),l.push(`- **Table**: ${r||"(none selected)"}`)):l.push("- Not connected to a database");const c=l.join(`
`),f=s?.trim()?`\`\`\`sql
${s}
\`\`\``:"(empty)";let d="";return a?.tables?.length&&(d=`

## Schema

${a.tables.map(p=>{const g=a.columns[p];if(g?.length){const y=g.map(x=>`${x.name} (${x.type})`).join(", ");return`- **${p}**: ${y}`}return`- **${p}**`}).join(`
`)}`),`You are an AI assistant embedded in a database management tool. You help users write, understand, and debug SQL queries.

## Current Environment

${c}

## Current Query

${f}${d}

## Tools

- \`get_query_result\`: Get results of the last executed query
- \`set_query\`: Put a query in the editor (user sees it immediately)
- \`execute_query\`: Run a query and show results in UI
- \`run_query\`: Run a SELECT query silently without changing UI (for exploration)
- \`run_statement\`: Execute INSERT/UPDATE/DELETE silently without changing UI

## Guidelines

- **Writing queries**: Use \`set_query\` to show it in the editor for review
- **Running queries**: Use \`execute_query\` - results return directly
- **Exploring data**: Use \`run_query\` for SELECT queries without disrupting the UI
- **Modifying data**: Use \`run_statement\` for INSERT/UPDATE/DELETE operations silently
- **Query format**: One query at a time. For Oracle, omit trailing semicolon
- **Response format**: Use Markdown. Be concise.`}const rC={name:"SQL Assistant",placeholder:"Ask about your query or data..."};function Jq(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Xq=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Wq=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,e9={};function sC(t,e){return(e9.jsx?Wq:Xq).test(t)}const t9=/[ \t\n\f\r]/g;function n9(t){return typeof t=="object"?t.type==="text"?iC(t.value):!1:iC(t)}function iC(t){return t.replace(t9,"")===""}class Du{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Du.prototype.normal={};Du.prototype.property={};Du.prototype.space=void 0;function LT(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new Du(n,r,e)}function Ly(t){return t.toLowerCase()}class $n{constructor(e,n){this.attribute=n,this.property=e}}$n.prototype.attribute="";$n.prototype.booleanish=!1;$n.prototype.boolean=!1;$n.prototype.commaOrSpaceSeparated=!1;$n.prototype.commaSeparated=!1;$n.prototype.defined=!1;$n.prototype.mustUseProperty=!1;$n.prototype.number=!1;$n.prototype.overloadedBoolean=!1;$n.prototype.property="";$n.prototype.spaceSeparated=!1;$n.prototype.space=void 0;let r9=0;const Ge=ea(),Ft=ea(),Py=ea(),pe=ea(),Et=ea(),ao=ea(),Zn=ea();function ea(){return 2**++r9}const $y=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ge,booleanish:Ft,commaOrSpaceSeparated:Zn,commaSeparated:ao,number:pe,overloadedBoolean:Py,spaceSeparated:Et},Symbol.toStringTag,{value:"Module"})),vg=Object.keys($y);class uv extends $n{constructor(e,n,r,s){let a=-1;if(super(e,n),aC(this,"space",s),typeof r=="number")for(;++a<vg.length;){const l=vg[a];aC(this,vg[a],(r&$y[l])===$y[l])}}}uv.prototype.defined=!0;function aC(t,e,n){n&&(t[e]=n)}function _o(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const a=new uv(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[Ly(r)]=r,n[Ly(a.attribute)]=r}return new Du(e,n,t.space)}const PT=_o({properties:{ariaActiveDescendant:null,ariaAtomic:Ft,ariaAutoComplete:null,ariaBusy:Ft,ariaChecked:Ft,ariaColCount:pe,ariaColIndex:pe,ariaColSpan:pe,ariaControls:Et,ariaCurrent:null,ariaDescribedBy:Et,ariaDetails:null,ariaDisabled:Ft,ariaDropEffect:Et,ariaErrorMessage:null,ariaExpanded:Ft,ariaFlowTo:Et,ariaGrabbed:Ft,ariaHasPopup:null,ariaHidden:Ft,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Et,ariaLevel:pe,ariaLive:null,ariaModal:Ft,ariaMultiLine:Ft,ariaMultiSelectable:Ft,ariaOrientation:null,ariaOwns:Et,ariaPlaceholder:null,ariaPosInSet:pe,ariaPressed:Ft,ariaReadOnly:Ft,ariaRelevant:null,ariaRequired:Ft,ariaRoleDescription:Et,ariaRowCount:pe,ariaRowIndex:pe,ariaRowSpan:pe,ariaSelected:Ft,ariaSetSize:pe,ariaSort:null,ariaValueMax:pe,ariaValueMin:pe,ariaValueNow:pe,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function $T(t,e){return e in t?t[e]:e}function FT(t,e){return $T(t,e.toLowerCase())}const s9=_o({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ao,acceptCharset:Et,accessKey:Et,action:null,allow:null,allowFullScreen:Ge,allowPaymentRequest:Ge,allowUserMedia:Ge,alt:null,as:null,async:Ge,autoCapitalize:null,autoComplete:Et,autoFocus:Ge,autoPlay:Ge,blocking:Et,capture:null,charSet:null,checked:Ge,cite:null,className:Et,cols:pe,colSpan:null,content:null,contentEditable:Ft,controls:Ge,controlsList:Et,coords:pe|ao,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ge,defer:Ge,dir:null,dirName:null,disabled:Ge,download:Py,draggable:Ft,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ge,formTarget:null,headers:Et,height:pe,hidden:Py,high:pe,href:null,hrefLang:null,htmlFor:Et,httpEquiv:Et,id:null,imageSizes:null,imageSrcSet:null,inert:Ge,inputMode:null,integrity:null,is:null,isMap:Ge,itemId:null,itemProp:Et,itemRef:Et,itemScope:Ge,itemType:Et,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ge,low:pe,manifest:null,max:null,maxLength:pe,media:null,method:null,min:null,minLength:pe,multiple:Ge,muted:Ge,name:null,nonce:null,noModule:Ge,noValidate:Ge,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ge,optimum:pe,pattern:null,ping:Et,placeholder:null,playsInline:Ge,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ge,referrerPolicy:null,rel:Et,required:Ge,reversed:Ge,rows:pe,rowSpan:pe,sandbox:Et,scope:null,scoped:Ge,seamless:Ge,selected:Ge,shadowRootClonable:Ge,shadowRootDelegatesFocus:Ge,shadowRootMode:null,shape:null,size:pe,sizes:null,slot:null,span:pe,spellCheck:Ft,src:null,srcDoc:null,srcLang:null,srcSet:null,start:pe,step:null,style:null,tabIndex:pe,target:null,title:null,translate:null,type:null,typeMustMatch:Ge,useMap:null,value:Ft,width:pe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Et,axis:null,background:null,bgColor:null,border:pe,borderColor:null,bottomMargin:pe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ge,declare:Ge,event:null,face:null,frame:null,frameBorder:null,hSpace:pe,leftMargin:pe,link:null,longDesc:null,lowSrc:null,marginHeight:pe,marginWidth:pe,noResize:Ge,noHref:Ge,noShade:Ge,noWrap:Ge,object:null,profile:null,prompt:null,rev:null,rightMargin:pe,rules:null,scheme:null,scrolling:Ft,standby:null,summary:null,text:null,topMargin:pe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:pe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ge,disableRemotePlayback:Ge,prefix:null,property:null,results:pe,security:null,unselectable:null},space:"html",transform:FT}),i9=_o({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Zn,accentHeight:pe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:pe,amplitude:pe,arabicForm:null,ascent:pe,attributeName:null,attributeType:null,azimuth:pe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:pe,by:null,calcMode:null,capHeight:pe,className:Et,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:pe,diffuseConstant:pe,direction:null,display:null,dur:null,divisor:pe,dominantBaseline:null,download:Ge,dx:null,dy:null,edgeMode:null,editable:null,elevation:pe,enableBackground:null,end:null,event:null,exponent:pe,externalResourcesRequired:null,fill:null,fillOpacity:pe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ao,g2:ao,glyphName:ao,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:pe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:pe,horizOriginX:pe,horizOriginY:pe,id:null,ideographic:pe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:pe,k:pe,k1:pe,k2:pe,k3:pe,k4:pe,kernelMatrix:Zn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:pe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:pe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:pe,overlineThickness:pe,paintOrder:null,panose1:null,path:null,pathLength:pe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Et,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:pe,pointsAtY:pe,pointsAtZ:pe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Zn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Zn,rev:Zn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Zn,requiredFeatures:Zn,requiredFonts:Zn,requiredFormats:Zn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:pe,specularExponent:pe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:pe,strikethroughThickness:pe,string:null,stroke:null,strokeDashArray:Zn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:pe,strokeOpacity:pe,strokeWidth:null,style:null,surfaceScale:pe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Zn,tabIndex:pe,tableValues:null,target:null,targetX:pe,targetY:pe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Zn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:pe,underlineThickness:pe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:pe,values:null,vAlphabetic:pe,vMathematical:pe,vectorEffect:null,vHanging:pe,vIdeographic:pe,version:null,vertAdvY:pe,vertOriginX:pe,vertOriginY:pe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:pe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:$T}),BT=_o({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),UT=_o({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:FT}),qT=_o({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),a9={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},o9=/[A-Z]/g,oC=/-[a-z]/g,l9=/^data[-\w.:]+$/i;function u9(t,e){const n=Ly(e);let r=e,s=$n;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&l9.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(oC,f9);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!oC.test(a)){let l=a.replace(o9,c9);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=uv}return new s(r,e)}function c9(t){return"-"+t.toLowerCase()}function f9(t){return t.charAt(1).toUpperCase()}const d9=LT([PT,s9,BT,UT,qT],"html"),cv=LT([PT,i9,BT,UT,qT],"svg");function h9(t){return t.join(" ").trim()}var qa={},bg,lC;function p9(){if(lC)return bg;lC=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,c=/^\s+|\s+$/g,f=`
`,d="/",m="*",p="",g="comment",y="declaration";function x(E,C){if(typeof E!="string")throw new TypeError("First argument must be a string");if(!E)return[];C=C||{};var k=1,R=1;function N(te){var V=te.match(e);V&&(k+=V.length);var $=te.lastIndexOf(f);R=~$?te.length-$:R+te.length}function j(){var te={line:k,column:R};return function(V){return V.position=new T(te),P(),V}}function T(te){this.start=te,this.end={line:k,column:R},this.source=C.source}T.prototype.content=E;function D(te){var V=new Error(C.source+":"+k+":"+R+": "+te);if(V.reason=te,V.filename=C.source,V.line=k,V.column=R,V.source=E,!C.silent)throw V}function L(te){var V=te.exec(E);if(V){var $=V[0];return N($),E=E.slice($.length),V}}function P(){L(n)}function M(te){var V;for(te=te||[];V=B();)V!==!1&&te.push(V);return te}function B(){var te=j();if(!(d!=E.charAt(0)||m!=E.charAt(1))){for(var V=2;p!=E.charAt(V)&&(m!=E.charAt(V)||d!=E.charAt(V+1));)++V;if(V+=2,p===E.charAt(V-1))return D("End of comment missing");var $=E.slice(2,V-2);return R+=2,N($),E=E.slice(V),R+=2,te({type:g,comment:$})}}function G(){var te=j(),V=L(r);if(V){if(B(),!L(s))return D("property missing ':'");var $=L(a),J=te({type:y,property:S(V[0].replace(t,p)),value:$?S($[0].replace(t,p)):p});return L(l),J}}function ee(){var te=[];M(te);for(var V;V=G();)V!==!1&&(te.push(V),M(te));return te}return P(),ee()}function S(E){return E?E.replace(c,p):p}return bg=x,bg}var uC;function m9(){if(uC)return qa;uC=1;var t=qa&&qa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qa,"__esModule",{value:!0}),qa.default=n;const e=t(p9());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),c=typeof s=="function";return l.forEach(f=>{if(f.type!=="declaration")return;const{property:d,value:m}=f;c?s(d,m,f):m&&(a=a||{},a[d]=m)}),a}return qa}var El={},cC;function g9(){if(cC)return El;cC=1,Object.defineProperty(El,"__esModule",{value:!0}),El.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(d){return!d||n.test(d)||t.test(d)},l=function(d,m){return m.toUpperCase()},c=function(d,m){return"".concat(m,"-")},f=function(d,m){return m===void 0&&(m={}),a(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(s,c):d=d.replace(r,c),d.replace(e,l))};return El.camelCase=f,El}var kl,fC;function y9(){if(fC)return kl;fC=1;var t=kl&&kl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(m9()),n=g9();function r(s,a){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(c,f){c&&f&&(l[(0,n.camelCase)(c,a)]=f)}),l}return r.default=r,kl=r,kl}var v9=y9();const b9=Qy(v9),HT=VT("end"),fv=VT("start");function VT(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function x9(t){const e=fv(t),n=HT(t);if(e&&n)return{start:e,end:n}}function su(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?dC(t.position):"start"in t||"end"in t?dC(t):"line"in t||"column"in t?Fy(t):""}function Fy(t){return hC(t&&t.line)+":"+hC(t&&t.column)}function dC(t){return Fy(t&&t.start)+"-"+Fy(t&&t.end)}function hC(t){return t&&typeof t=="number"?t:1}class yn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?s=e:!a.cause&&e&&(l=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?a.ruleId=r:(a.source=r.slice(0,f),a.ruleId=r.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const c=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=c?c.line:void 0,this.name=su(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}yn.prototype.file="";yn.prototype.name="";yn.prototype.reason="";yn.prototype.message="";yn.prototype.stack="";yn.prototype.column=void 0;yn.prototype.line=void 0;yn.prototype.ancestors=void 0;yn.prototype.cause=void 0;yn.prototype.fatal=void 0;yn.prototype.place=void 0;yn.prototype.ruleId=void 0;yn.prototype.source=void 0;const dv={}.hasOwnProperty,S9=new Map,w9=/[A-Z]/g,_9=new Set(["table","tbody","thead","tfoot","tr"]),C9=new Set(["td","th"]),KT="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function E9(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=N9(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=I9(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?cv:d9,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=GT(s,t,void 0);return a&&typeof a!="string"?a:s.create(t,s.Fragment,{children:a||void 0},void 0)}function GT(t,e,n){if(e.type==="element")return k9(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return R9(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return A9(t,e,n);if(e.type==="mdxjsEsm")return T9(t,e);if(e.type==="root")return O9(t,e,n);if(e.type==="text")return M9(t,e)}function k9(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=cv,t.schema=s),t.ancestors.push(e);const a=ZT(t,e.tagName,!1),l=z9(t,e);let c=pv(t,e);return _9.has(e.tagName)&&(c=c.filter(function(f){return typeof f=="string"?!n9(f):!0})),QT(t,l,a,e),hv(l,c),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function R9(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Su(t,e.position)}function T9(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Su(t,e.position)}function A9(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=cv,t.schema=s),t.ancestors.push(e);const a=e.name===null?t.Fragment:ZT(t,e.name,!0),l=D9(t,e),c=pv(t,e);return QT(t,l,a,e),hv(l,c),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function O9(t,e,n){const r={};return hv(r,pv(t,e)),t.create(e,t.Fragment,r,n)}function M9(t,e){return e.value}function QT(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function hv(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function I9(t,e,n){return r;function r(s,a,l,c){const d=Array.isArray(l.children)?n:e;return c?d(a,l,c):d(a,l)}}function N9(t,e){return n;function n(r,s,a,l){const c=Array.isArray(a.children),f=fv(r);return e(s,a,l,c,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function z9(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&dv.call(e.properties,s)){const a=j9(t,s,e.properties[s]);if(a){const[l,c]=a;t.tableCellAlignToStyle&&l==="align"&&typeof c=="string"&&C9.has(e.tagName)?r=c:n[l]=c}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function D9(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const c=l.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else Su(t,e.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const c=r.value.data.estree.body[0];c.type,a=t.evaluater.evaluateExpression(c.expression)}else Su(t,e.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function pv(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:S9;for(;++r<e.children.length;){const a=e.children[r];let l;if(t.passKeys){const f=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(f){const d=s.get(f)||0;l=f+"-"+d,s.set(f,d+1)}}const c=GT(t,a,l);c!==void 0&&n.push(c)}return n}function j9(t,e,n){const r=u9(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Jq(n):h9(n)),r.property==="style"){let s=typeof n=="object"?n:L9(t,String(n));return t.stylePropertyNameCase==="css"&&(s=P9(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?a9[r.property]||r.property:r.attribute,n]}}function L9(t,e){try{return b9(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new yn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=KT+"#cannot-parse-style-attribute",s}}function ZT(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let a=-1,l;for(;++a<s.length;){const c=sC(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};l=l?{type:"MemberExpression",object:l,property:c,computed:!!(a&&c.type==="Literal"),optional:!1}:c}r=l}else r=sC(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return dv.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);Su(t)}function Su(t,e){const n=new yn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=KT+"#cannot-handle-mdx-estrees-without-createevaluater",n}function P9(t){const e={};let n;for(n in t)dv.call(t,n)&&(e[$9(n)]=t[n]);return e}function $9(t){let e=t.replace(w9,F9);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function F9(t){return"-"+t.toLowerCase()}const xg={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},B9={};function mv(t,e){const n=B9,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return YT(t,r,s)}function YT(t,e,n){if(U9(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return pC(t.children,e,n)}return Array.isArray(t)?pC(t,e,n):""}function pC(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=YT(t[s],e,n);return r.join("")}function U9(t){return!!(t&&typeof t=="object")}const mC=document.createElement("i");function gv(t){const e="&"+t+";";mC.innerHTML=e;const n=mC.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function er(t,e,n,r){const s=t.length;let a=0,l;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function yr(t,e){return t.length>0?(er(t,t.length,0,e),t):e}const gC={}.hasOwnProperty;function JT(t){const e={};let n=-1;for(;++n<t.length;)q9(e,t[n]);return e}function q9(t,e){let n;for(n in e){const s=(gC.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){gC.call(s,l)||(s[l]=[]);const c=a[l];H9(s[l],Array.isArray(c)?c:c?[c]:[])}}}function H9(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);er(t,0,0,r)}function XT(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ir(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Cn=ci(/[A-Za-z]/),gn=ci(/[\dA-Za-z]/),V9=ci(/[#-'*+\--9=?A-Z^-~]/);function Td(t){return t!==null&&(t<32||t===127)}const By=ci(/\d/),K9=ci(/[\dA-Fa-f]/),G9=ci(/[!-/:-@[-`{-~]/);function ze(t){return t!==null&&t<-2}function Ct(t){return t!==null&&(t<0||t===32)}function et(t){return t===-2||t===-1||t===32}const ih=ci(new RegExp("\\p{P}|\\p{S}","u")),Yi=ci(/\s/);function ci(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Co(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&gn(t.charCodeAt(n+1))&&gn(t.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const c=t.charCodeAt(n+1);a<56320&&c>56319&&c<57344?(l=String.fromCharCode(a,c),s=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+s+1,l=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function lt(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(f){return et(f)?(t.enter(n),c(f)):e(f)}function c(f){return et(f)&&a++<s?(t.consume(f),c):(t.exit(n),e(f))}}const Q9={tokenize:Z9};function Z9(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),lt(t,e,"linePrefix")}function s(c){return t.enter("paragraph"),a(c)}function a(c){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(c)}function l(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return ze(c)?(t.consume(c),t.exit("chunkText"),a):(t.consume(c),l)}}const Y9={tokenize:J9},yC={tokenize:X9};function J9(t){const e=this,n=[];let r=0,s,a,l;return c;function c(R){if(r<n.length){const N=n[r];return e.containerState=N[1],t.attempt(N[0].continuation,f,d)(R)}return d(R)}function f(R){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&k();const N=e.events.length;let j=N,T;for(;j--;)if(e.events[j][0]==="exit"&&e.events[j][1].type==="chunkFlow"){T=e.events[j][1].end;break}C(r);let D=N;for(;D<e.events.length;)e.events[D][1].end={...T},D++;return er(e.events,j+1,0,e.events.slice(N)),e.events.length=D,d(R)}return c(R)}function d(R){if(r===n.length){if(!s)return g(R);if(s.currentConstruct&&s.currentConstruct.concrete)return x(R);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(yC,m,p)(R)}function m(R){return s&&k(),C(r),g(R)}function p(R){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,x(R)}function g(R){return e.containerState={},t.attempt(yC,y,x)(R)}function y(R){return r++,n.push([e.currentConstruct,e.containerState]),g(R)}function x(R){if(R===null){s&&k(),C(0),t.consume(R);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),S(R)}function S(R){if(R===null){E(t.exit("chunkFlow"),!0),C(0),t.consume(R);return}return ze(R)?(t.consume(R),E(t.exit("chunkFlow")),r=0,e.interrupt=void 0,c):(t.consume(R),S)}function E(R,N){const j=e.sliceStream(R);if(N&&j.push(null),R.previous=a,a&&(a.next=R),a=R,s.defineSkip(R.start),s.write(j),e.parser.lazy[R.start.line]){let T=s.events.length;for(;T--;)if(s.events[T][1].start.offset<l&&(!s.events[T][1].end||s.events[T][1].end.offset>l))return;const D=e.events.length;let L=D,P,M;for(;L--;)if(e.events[L][0]==="exit"&&e.events[L][1].type==="chunkFlow"){if(P){M=e.events[L][1].end;break}P=!0}for(C(r),T=D;T<e.events.length;)e.events[T][1].end={...M},T++;er(e.events,L+1,0,e.events.slice(D)),e.events.length=T}}function C(R){let N=n.length;for(;N-- >R;){const j=n[N];e.containerState=j[1],j[0].exit.call(e,t)}n.length=R}function k(){s.write([null]),a=void 0,s=void 0,e.containerState._closeFlow=void 0}}function X9(t,e,n){return lt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function co(t){if(t===null||Ct(t)||Yi(t))return 1;if(ih(t))return 2}function ah(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const a=t[s].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const Uy={name:"attention",resolveAll:W9,tokenize:e7};function W9(t,e){let n=-1,r,s,a,l,c,f,d,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},g={...t[n][1].start};vC(p,-f),vC(g,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},a={type:f>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:f>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},t[r][1].end={...l.start},t[n][1].start={...c.end},d=[],t[r][1].end.offset-t[r][1].start.offset&&(d=yr(d,[["enter",t[r][1],e],["exit",t[r][1],e]])),d=yr(d,[["enter",s,e],["enter",l,e],["exit",l,e],["enter",a,e]]),d=yr(d,ah(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),d=yr(d,[["exit",a,e],["enter",c,e],["exit",c,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,d=yr(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,er(t,r-1,n-r+3,d),n=r+d.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function e7(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=co(r);let a;return l;function l(f){return a=f,t.enter("attentionSequence"),c(f)}function c(f){if(f===a)return t.consume(f),c;const d=t.exit("attentionSequence"),m=co(f),p=!m||m===2&&s||n.includes(f),g=!s||s===2&&m||n.includes(r);return d._open=!!(a===42?p:p&&(s||!g)),d._close=!!(a===42?g:g&&(m||!p)),e(f)}}function vC(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const t7={name:"autolink",tokenize:n7};function n7(t,e,n){let r=0;return s;function s(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(y){return Cn(y)?(t.consume(y),l):y===64?n(y):d(y)}function l(y){return y===43||y===45||y===46||gn(y)?(r=1,c(y)):d(y)}function c(y){return y===58?(t.consume(y),r=0,f):(y===43||y===45||y===46||gn(y))&&r++<32?(t.consume(y),c):(r=0,d(y))}function f(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||Td(y)?n(y):(t.consume(y),f)}function d(y){return y===64?(t.consume(y),m):V9(y)?(t.consume(y),d):n(y)}function m(y){return gn(y)?p(y):n(y)}function p(y){return y===46?(t.consume(y),r=0,m):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):g(y)}function g(y){if((y===45||gn(y))&&r++<63){const x=y===45?g:p;return t.consume(y),x}return n(y)}}const ju={partial:!0,tokenize:r7};function r7(t,e,n){return r;function r(a){return et(a)?lt(t,s,"linePrefix")(a):s(a)}function s(a){return a===null||ze(a)?e(a):n(a)}}const WT={continuation:{tokenize:i7},exit:a7,name:"blockQuote",tokenize:s7};function s7(t,e,n){const r=this;return s;function s(l){if(l===62){const c=r.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return et(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function i7(t,e,n){const r=this;return s;function s(l){return et(l)?lt(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(WT,e,n)(l)}}function a7(t){t.exit("blockQuote")}const eA={name:"characterEscape",tokenize:o7};function o7(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),s}function s(a){return G9(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const tA={name:"characterReference",tokenize:l7};function l7(t,e,n){const r=this;let s=0,a,l;return c;function c(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),f}function f(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),a=31,l=gn,m(p))}function d(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=K9,m):(t.enter("characterReferenceValue"),a=7,l=By,m(p))}function m(p){if(p===59&&s){const g=t.exit("characterReferenceValue");return l===gn&&!gv(r.sliceSerialize(g))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(p)&&s++<a?(t.consume(p),m):n(p)}}const bC={partial:!0,tokenize:c7},xC={concrete:!0,name:"codeFenced",tokenize:u7};function u7(t,e,n){const r=this,s={partial:!0,tokenize:j};let a=0,l=0,c;return f;function f(T){return d(T)}function d(T){const D=r.events[r.events.length-1];return a=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,c=T,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(T)}function m(T){return T===c?(l++,t.consume(T),m):l<3?n(T):(t.exit("codeFencedFenceSequence"),et(T)?lt(t,p,"whitespace")(T):p(T))}function p(T){return T===null||ze(T)?(t.exit("codeFencedFence"),r.interrupt?e(T):t.check(bC,S,N)(T)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(T))}function g(T){return T===null||ze(T)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(T)):et(T)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),lt(t,y,"whitespace")(T)):T===96&&T===c?n(T):(t.consume(T),g)}function y(T){return T===null||ze(T)?p(T):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x(T))}function x(T){return T===null||ze(T)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(T)):T===96&&T===c?n(T):(t.consume(T),x)}function S(T){return t.attempt(s,N,E)(T)}function E(T){return t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),C}function C(T){return a>0&&et(T)?lt(t,k,"linePrefix",a+1)(T):k(T)}function k(T){return T===null||ze(T)?t.check(bC,S,N)(T):(t.enter("codeFlowValue"),R(T))}function R(T){return T===null||ze(T)?(t.exit("codeFlowValue"),k(T)):(t.consume(T),R)}function N(T){return t.exit("codeFenced"),e(T)}function j(T,D,L){let P=0;return M;function M(V){return T.enter("lineEnding"),T.consume(V),T.exit("lineEnding"),B}function B(V){return T.enter("codeFencedFence"),et(V)?lt(T,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(V):G(V)}function G(V){return V===c?(T.enter("codeFencedFenceSequence"),ee(V)):L(V)}function ee(V){return V===c?(P++,T.consume(V),ee):P>=l?(T.exit("codeFencedFenceSequence"),et(V)?lt(T,te,"whitespace")(V):te(V)):L(V)}function te(V){return V===null||ze(V)?(T.exit("codeFencedFence"),D(V)):L(V)}}}function c7(t,e,n){const r=this;return s;function s(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const Sg={name:"codeIndented",tokenize:d7},f7={partial:!0,tokenize:h7};function d7(t,e,n){const r=this;return s;function s(d){return t.enter("codeIndented"),lt(t,a,"linePrefix",5)(d)}function a(d){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(d):n(d)}function l(d){return d===null?f(d):ze(d)?t.attempt(f7,l,f)(d):(t.enter("codeFlowValue"),c(d))}function c(d){return d===null||ze(d)?(t.exit("codeFlowValue"),l(d)):(t.consume(d),c)}function f(d){return t.exit("codeIndented"),e(d)}}function h7(t,e,n){const r=this;return s;function s(l){return r.parser.lazy[r.now().line]?n(l):ze(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):lt(t,a,"linePrefix",5)(l)}function a(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):ze(l)?s(l):n(l)}}const p7={name:"codeText",previous:g7,resolve:m7,tokenize:y7};function m7(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function g7(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function y7(t,e,n){let r=0,s,a;return l;function l(p){return t.enter("codeText"),t.enter("codeTextSequence"),c(p)}function c(p){return p===96?(t.consume(p),r++,c):(t.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),f):p===96?(a=t.enter("codeTextSequence"),s=0,m(p)):ze(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),f):(t.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||ze(p)?(t.exit("codeTextData"),f(p)):(t.consume(p),d)}function m(p){return p===96?(t.consume(p),s++,m):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(a.type="codeTextData",d(p))}}class v7{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Rl(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Rl(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Rl(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Rl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Rl(this.left,n.reverse())}}}function Rl(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function nA(t){const e={};let n=-1,r,s,a,l,c,f,d;const m=new v7(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,b7(m,n)),n=e[n],d=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(l=m.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(r[1].end={...m.get(s)[1].start},c=m.slice(s,n),c.unshift(r),m.splice(s,n-s+1,c))}}return er(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function b7(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,f=[],d={};let m,p,g=-1,y=n,x=0,S=0;const E=[S];for(;y;){for(;t.get(++s)[1]!==y;);a.push(s),y._tokenizer||(m=r.sliceStream(y),y.next||m.push(null),p&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++g<c.length;)c[g][0]==="exit"&&c[g-1][0]==="enter"&&c[g][1].type===c[g-1][1].type&&c[g][1].start.line!==c[g][1].end.line&&(S=g+1,E.push(S),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):E.pop(),g=E.length;g--;){const C=c.slice(E[g],E[g+1]),k=a.pop();f.push([k,k+C.length-1]),t.splice(k,2,C)}for(f.reverse(),g=-1;++g<f.length;)d[x+f[g][0]]=x+f[g][1],x+=f[g][1]-f[g][0]-1;return d}const x7={resolve:w7,tokenize:_7},S7={partial:!0,tokenize:C7};function w7(t){return nA(t),t}function _7(t,e){let n;return r;function r(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(c)}function s(c){return c===null?a(c):ze(c)?t.check(S7,l,a)(c):(t.consume(c),s)}function a(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function l(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function C7(t,e,n){const r=this;return s;function s(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),lt(t,a,"linePrefix")}function a(l){if(l===null||ze(l))return n(l);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function rA(t,e,n,r,s,a,l,c,f){const d=f||Number.POSITIVE_INFINITY;let m=0;return p;function p(C){return C===60?(t.enter(r),t.enter(s),t.enter(a),t.consume(C),t.exit(a),g):C===null||C===32||C===41||Td(C)?n(C):(t.enter(r),t.enter(l),t.enter(c),t.enter("chunkString",{contentType:"string"}),S(C))}function g(C){return C===62?(t.enter(a),t.consume(C),t.exit(a),t.exit(s),t.exit(r),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),y(C))}function y(C){return C===62?(t.exit("chunkString"),t.exit(c),g(C)):C===null||C===60||ze(C)?n(C):(t.consume(C),C===92?x:y)}function x(C){return C===60||C===62||C===92?(t.consume(C),y):y(C)}function S(C){return!m&&(C===null||C===41||Ct(C))?(t.exit("chunkString"),t.exit(c),t.exit(l),t.exit(r),e(C)):m<d&&C===40?(t.consume(C),m++,S):C===41?(t.consume(C),m--,S):C===null||C===32||C===40||Td(C)?n(C):(t.consume(C),C===92?E:S)}function E(C){return C===40||C===41||C===92?(t.consume(C),S):S(C)}}function sA(t,e,n,r,s,a){const l=this;let c=0,f;return d;function d(y){return t.enter(r),t.enter(s),t.consume(y),t.exit(s),t.enter(a),m}function m(y){return c>999||y===null||y===91||y===93&&!f||y===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(t.exit(a),t.enter(s),t.consume(y),t.exit(s),t.exit(r),e):ze(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||ze(y)||c++>999?(t.exit("chunkString"),m(y)):(t.consume(y),f||(f=!et(y)),y===92?g:p)}function g(y){return y===91||y===92||y===93?(t.consume(y),c++,p):p(y)}}function iA(t,e,n,r,s,a){let l;return c;function c(g){return g===34||g===39||g===40?(t.enter(r),t.enter(s),t.consume(g),t.exit(s),l=g===40?41:g,f):n(g)}function f(g){return g===l?(t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):(t.enter(a),d(g))}function d(g){return g===l?(t.exit(a),f(l)):g===null?n(g):ze(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),lt(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===l||g===null||ze(g)?(t.exit("chunkString"),d(g)):(t.consume(g),g===92?p:m)}function p(g){return g===l||g===92?(t.consume(g),m):m(g)}}function iu(t,e){let n;return r;function r(s){return ze(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):et(s)?lt(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const E7={name:"definition",tokenize:R7},k7={partial:!0,tokenize:T7};function R7(t,e,n){const r=this;let s;return a;function a(y){return t.enter("definition"),l(y)}function l(y){return sA.call(r,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return s=Ir(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),f):n(y)}function f(y){return Ct(y)?iu(t,d)(y):d(y)}function d(y){return rA(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function m(y){return t.attempt(k7,p,p)(y)}function p(y){return et(y)?lt(t,g,"whitespace")(y):g(y)}function g(y){return y===null||ze(y)?(t.exit("definition"),r.parser.defined.push(s),e(y)):n(y)}}function T7(t,e,n){return r;function r(c){return Ct(c)?iu(t,s)(c):n(c)}function s(c){return iA(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function a(c){return et(c)?lt(t,l,"whitespace")(c):l(c)}function l(c){return c===null||ze(c)?e(c):n(c)}}const A7={name:"hardBreakEscape",tokenize:O7};function O7(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),s}function s(a){return ze(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const M7={name:"headingAtx",resolve:I7,tokenize:N7};function I7(t,e){let n=t.length-2,r=3,s,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},er(t,r,n-r+1,[["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e]])),t}function N7(t,e,n){let r=0;return s;function s(m){return t.enter("atxHeading"),a(m)}function a(m){return t.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&r++<6?(t.consume(m),l):m===null||Ct(m)?(t.exit("atxHeadingSequence"),c(m)):n(m)}function c(m){return m===35?(t.enter("atxHeadingSequence"),f(m)):m===null||ze(m)?(t.exit("atxHeading"),e(m)):et(m)?lt(t,c,"whitespace")(m):(t.enter("atxHeadingText"),d(m))}function f(m){return m===35?(t.consume(m),f):(t.exit("atxHeadingSequence"),c(m))}function d(m){return m===null||m===35||Ct(m)?(t.exit("atxHeadingText"),c(m)):(t.consume(m),d)}}const z7=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],SC=["pre","script","style","textarea"],D7={concrete:!0,name:"htmlFlow",resolveTo:P7,tokenize:$7},j7={partial:!0,tokenize:B7},L7={partial:!0,tokenize:F7};function P7(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function $7(t,e,n){const r=this;let s,a,l,c,f;return d;function d(A){return m(A)}function m(A){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(A),p}function p(A){return A===33?(t.consume(A),g):A===47?(t.consume(A),a=!0,S):A===63?(t.consume(A),s=3,r.interrupt?e:I):Cn(A)?(t.consume(A),l=String.fromCharCode(A),E):n(A)}function g(A){return A===45?(t.consume(A),s=2,y):A===91?(t.consume(A),s=5,c=0,x):Cn(A)?(t.consume(A),s=4,r.interrupt?e:I):n(A)}function y(A){return A===45?(t.consume(A),r.interrupt?e:I):n(A)}function x(A){const se="CDATA[";return A===se.charCodeAt(c++)?(t.consume(A),c===se.length?r.interrupt?e:G:x):n(A)}function S(A){return Cn(A)?(t.consume(A),l=String.fromCharCode(A),E):n(A)}function E(A){if(A===null||A===47||A===62||Ct(A)){const se=A===47,ue=l.toLowerCase();return!se&&!a&&SC.includes(ue)?(s=1,r.interrupt?e(A):G(A)):z7.includes(l.toLowerCase())?(s=6,se?(t.consume(A),C):r.interrupt?e(A):G(A)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(A):a?k(A):R(A))}return A===45||gn(A)?(t.consume(A),l+=String.fromCharCode(A),E):n(A)}function C(A){return A===62?(t.consume(A),r.interrupt?e:G):n(A)}function k(A){return et(A)?(t.consume(A),k):M(A)}function R(A){return A===47?(t.consume(A),M):A===58||A===95||Cn(A)?(t.consume(A),N):et(A)?(t.consume(A),R):M(A)}function N(A){return A===45||A===46||A===58||A===95||gn(A)?(t.consume(A),N):j(A)}function j(A){return A===61?(t.consume(A),T):et(A)?(t.consume(A),j):R(A)}function T(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(t.consume(A),f=A,D):et(A)?(t.consume(A),T):L(A)}function D(A){return A===f?(t.consume(A),f=null,P):A===null||ze(A)?n(A):(t.consume(A),D)}function L(A){return A===null||A===34||A===39||A===47||A===60||A===61||A===62||A===96||Ct(A)?j(A):(t.consume(A),L)}function P(A){return A===47||A===62||et(A)?R(A):n(A)}function M(A){return A===62?(t.consume(A),B):n(A)}function B(A){return A===null||ze(A)?G(A):et(A)?(t.consume(A),B):n(A)}function G(A){return A===45&&s===2?(t.consume(A),$):A===60&&s===1?(t.consume(A),J):A===62&&s===4?(t.consume(A),z):A===63&&s===3?(t.consume(A),I):A===93&&s===5?(t.consume(A),Q):ze(A)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(j7,F,ee)(A)):A===null||ze(A)?(t.exit("htmlFlowData"),ee(A)):(t.consume(A),G)}function ee(A){return t.check(L7,te,F)(A)}function te(A){return t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),V}function V(A){return A===null||ze(A)?ee(A):(t.enter("htmlFlowData"),G(A))}function $(A){return A===45?(t.consume(A),I):G(A)}function J(A){return A===47?(t.consume(A),l="",ae):G(A)}function ae(A){if(A===62){const se=l.toLowerCase();return SC.includes(se)?(t.consume(A),z):G(A)}return Cn(A)&&l.length<8?(t.consume(A),l+=String.fromCharCode(A),ae):G(A)}function Q(A){return A===93?(t.consume(A),I):G(A)}function I(A){return A===62?(t.consume(A),z):A===45&&s===2?(t.consume(A),I):G(A)}function z(A){return A===null||ze(A)?(t.exit("htmlFlowData"),F(A)):(t.consume(A),z)}function F(A){return t.exit("htmlFlow"),e(A)}}function F7(t,e,n){const r=this;return s;function s(l){return ze(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function B7(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(ju,e,n)}}const U7={name:"htmlText",tokenize:q7};function q7(t,e,n){const r=this;let s,a,l;return c;function c(I){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(I),f}function f(I){return I===33?(t.consume(I),d):I===47?(t.consume(I),j):I===63?(t.consume(I),R):Cn(I)?(t.consume(I),L):n(I)}function d(I){return I===45?(t.consume(I),m):I===91?(t.consume(I),a=0,x):Cn(I)?(t.consume(I),k):n(I)}function m(I){return I===45?(t.consume(I),y):n(I)}function p(I){return I===null?n(I):I===45?(t.consume(I),g):ze(I)?(l=p,J(I)):(t.consume(I),p)}function g(I){return I===45?(t.consume(I),y):p(I)}function y(I){return I===62?$(I):I===45?g(I):p(I)}function x(I){const z="CDATA[";return I===z.charCodeAt(a++)?(t.consume(I),a===z.length?S:x):n(I)}function S(I){return I===null?n(I):I===93?(t.consume(I),E):ze(I)?(l=S,J(I)):(t.consume(I),S)}function E(I){return I===93?(t.consume(I),C):S(I)}function C(I){return I===62?$(I):I===93?(t.consume(I),C):S(I)}function k(I){return I===null||I===62?$(I):ze(I)?(l=k,J(I)):(t.consume(I),k)}function R(I){return I===null?n(I):I===63?(t.consume(I),N):ze(I)?(l=R,J(I)):(t.consume(I),R)}function N(I){return I===62?$(I):R(I)}function j(I){return Cn(I)?(t.consume(I),T):n(I)}function T(I){return I===45||gn(I)?(t.consume(I),T):D(I)}function D(I){return ze(I)?(l=D,J(I)):et(I)?(t.consume(I),D):$(I)}function L(I){return I===45||gn(I)?(t.consume(I),L):I===47||I===62||Ct(I)?P(I):n(I)}function P(I){return I===47?(t.consume(I),$):I===58||I===95||Cn(I)?(t.consume(I),M):ze(I)?(l=P,J(I)):et(I)?(t.consume(I),P):$(I)}function M(I){return I===45||I===46||I===58||I===95||gn(I)?(t.consume(I),M):B(I)}function B(I){return I===61?(t.consume(I),G):ze(I)?(l=B,J(I)):et(I)?(t.consume(I),B):P(I)}function G(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),s=I,ee):ze(I)?(l=G,J(I)):et(I)?(t.consume(I),G):(t.consume(I),te)}function ee(I){return I===s?(t.consume(I),s=void 0,V):I===null?n(I):ze(I)?(l=ee,J(I)):(t.consume(I),ee)}function te(I){return I===null||I===34||I===39||I===60||I===61||I===96?n(I):I===47||I===62||Ct(I)?P(I):(t.consume(I),te)}function V(I){return I===47||I===62||Ct(I)?P(I):n(I)}function $(I){return I===62?(t.consume(I),t.exit("htmlTextData"),t.exit("htmlText"),e):n(I)}function J(I){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),ae}function ae(I){return et(I)?lt(t,Q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):Q(I)}function Q(I){return t.enter("htmlTextData"),l(I)}}const yv={name:"labelEnd",resolveAll:G7,resolveTo:Q7,tokenize:Z7},H7={tokenize:Y7},V7={tokenize:J7},K7={tokenize:X7};function G7(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&er(t,0,t.length,n),t}function Q7(t,e){let n=t.length,r=0,s,a,l,c;for(;n--;)if(s=t[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(l=n);const f={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},m={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return c=[["enter",f,e],["enter",d,e]],c=yr(c,t.slice(a+1,a+r+3)),c=yr(c,[["enter",m,e]]),c=yr(c,ah(e.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),e)),c=yr(c,[["exit",m,e],t[l-2],t[l-1],["exit",d,e]]),c=yr(c,t.slice(l+1)),c=yr(c,[["exit",f,e]]),er(t,a,t.length,c),t}function Z7(t,e,n){const r=this;let s=r.events.length,a,l;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return c;function c(g){return a?a._inactive?p(g):(l=r.parser.defined.includes(Ir(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),f):n(g)}function f(g){return g===40?t.attempt(H7,m,l?m:p)(g):g===91?t.attempt(V7,m,l?d:p)(g):l?m(g):p(g)}function d(g){return t.attempt(K7,m,p)(g)}function m(g){return e(g)}function p(g){return a._balanced=!0,n(g)}}function Y7(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),s}function s(p){return Ct(p)?iu(t,a)(p):a(p)}function a(p){return p===41?m(p):rA(t,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return Ct(p)?iu(t,f)(p):m(p)}function c(p){return n(p)}function f(p){return p===34||p===39||p===40?iA(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function d(p){return Ct(p)?iu(t,m)(p):m(p)}function m(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function J7(t,e,n){const r=this;return s;function s(c){return sA.call(r,t,a,l,"reference","referenceMarker","referenceString")(c)}function a(c){return r.parser.defined.includes(Ir(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function l(c){return n(c)}}function X7(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),s}function s(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const W7={name:"labelStartImage",resolveAll:yv.resolveAll,tokenize:eH};function eH(t,e,n){const r=this;return s;function s(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),a}function a(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):e(c)}}const tH={name:"labelStartLink",resolveAll:yv.resolveAll,tokenize:nH};function nH(t,e,n){const r=this;return s;function s(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const wg={name:"lineEnding",tokenize:rH};function rH(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),lt(t,e,"linePrefix")}}const Vf={name:"thematicBreak",tokenize:sH};function sH(t,e,n){let r=0,s;return a;function a(d){return t.enter("thematicBreak"),l(d)}function l(d){return s=d,c(d)}function c(d){return d===s?(t.enter("thematicBreakSequence"),f(d)):r>=3&&(d===null||ze(d))?(t.exit("thematicBreak"),e(d)):n(d)}function f(d){return d===s?(t.consume(d),r++,f):(t.exit("thematicBreakSequence"),et(d)?lt(t,c,"whitespace")(d):c(d))}}const zn={continuation:{tokenize:lH},exit:cH,name:"list",tokenize:oH},iH={partial:!0,tokenize:fH},aH={partial:!0,tokenize:uH};function oH(t,e,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return c;function c(y){const x=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:By(y)){if(r.containerState.type||(r.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(Vf,n,d)(y):d(y);if(!r.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(y)}return n(y)}function f(y){return By(y)&&++l<10?(t.consume(y),f):(!r.interrupt||l<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),d(y)):n(y)}function d(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,t.check(ju,r.interrupt?n:m,t.attempt(iH,g,p))}function m(y){return r.containerState.initialBlankLine=!0,a++,g(y)}function p(y){return et(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),g):n(y)}function g(y){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function lH(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(ju,s,a);function s(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,lt(t,e,"listItemIndent",r.containerState.size+1)(c)}function a(c){return r.containerState.furtherBlankLines||!et(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(aH,e,l)(c))}function l(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,lt(t,t.attempt(zn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function uH(t,e,n){const r=this;return lt(t,s,"listItemIndent",r.containerState.size+1);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(a):n(a)}}function cH(t){t.exit(this.containerState.type)}function fH(t,e,n){const r=this;return lt(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const l=r.events[r.events.length-1];return!et(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const wC={name:"setextUnderline",resolveTo:dH,tokenize:hH};function dH(t,e){let n=t.length,r,s,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",a?(t.splice(s,0,["enter",l,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function hH(t,e,n){const r=this;let s;return a;function a(d){let m=r.events.length,p;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){p=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),s=d,l(d)):n(d)}function l(d){return t.enter("setextHeadingLineSequence"),c(d)}function c(d){return d===s?(t.consume(d),c):(t.exit("setextHeadingLineSequence"),et(d)?lt(t,f,"lineSuffix")(d):f(d))}function f(d){return d===null||ze(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const pH={tokenize:mH};function mH(t){const e=this,n=t.attempt(ju,r,t.attempt(this.parser.constructs.flowInitial,s,lt(t,t.attempt(this.parser.constructs.flow,s,t.attempt(x7,s)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const gH={resolveAll:oA()},yH=aA("string"),vH=aA("text");function aA(t){return{resolveAll:oA(t==="text"?bH:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],a=n.attempt(s,l,c);return l;function l(m){return d(m)?a(m):c(m)}function c(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),f}function f(m){return d(m)?(n.exit("data"),a(m)):(n.consume(m),f)}function d(m){if(m===null)return!0;const p=s[m];let g=-1;if(p)for(;++g<p.length;){const y=p[g];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function oA(t){return e;function e(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return t?t(n,r):n}}function bH(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let a=s.length,l=-1,c=0,f;for(;a--;){const d=s[a];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(d===-2)f=!0,c++;else if(d!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const d={type:n===t.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const xH={42:zn,43:zn,45:zn,48:zn,49:zn,50:zn,51:zn,52:zn,53:zn,54:zn,55:zn,56:zn,57:zn,62:WT},SH={91:E7},wH={[-2]:Sg,[-1]:Sg,32:Sg},_H={35:M7,42:Vf,45:[wC,Vf],60:D7,61:wC,95:Vf,96:xC,126:xC},CH={38:tA,92:eA},EH={[-5]:wg,[-4]:wg,[-3]:wg,33:W7,38:tA,42:Uy,60:[t7,U7],91:tH,92:[A7,eA],93:yv,95:Uy,96:p7},kH={null:[Uy,gH]},RH={null:[42,95]},TH={null:[]},AH=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:RH,contentInitial:SH,disable:TH,document:xH,flow:_H,flowInitial:wH,insideSpan:kH,string:CH,text:EH},Symbol.toStringTag,{value:"Module"}));function OH(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let l=[],c=[];const f={attempt:D(j),check:D(T),consume:k,enter:R,exit:N,interrupt:D(T,{interrupt:!0})},d={code:null,containerState:{},defineSkip:S,events:[],now:x,parser:t,previous:null,sliceSerialize:g,sliceStream:y,write:p};let m=e.tokenize.call(d,f);return e.resolveAll&&a.push(e),d;function p(B){return l=yr(l,B),E(),l[l.length-1]!==null?[]:(L(e,0),d.events=ah(a,d.events,d),d.events)}function g(B,G){return IH(y(B),G)}function y(B){return MH(l,B)}function x(){const{_bufferIndex:B,_index:G,line:ee,column:te,offset:V}=r;return{_bufferIndex:B,_index:G,line:ee,column:te,offset:V}}function S(B){s[B.line]=B.column,M()}function E(){let B;for(;r._index<l.length;){const G=l[r._index];if(typeof G=="string")for(B=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===B&&r._bufferIndex<G.length;)C(G.charCodeAt(r._bufferIndex));else C(G)}}function C(B){m=m(B)}function k(B){ze(B)?(r.line++,r.column=1,r.offset+=B===-3?2:1,M()):B!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=B}function R(B,G){const ee=G||{};return ee.type=B,ee.start=x(),d.events.push(["enter",ee,d]),c.push(ee),ee}function N(B){const G=c.pop();return G.end=x(),d.events.push(["exit",G,d]),G}function j(B,G){L(B,G.from)}function T(B,G){G.restore()}function D(B,G){return ee;function ee(te,V,$){let J,ae,Q,I;return Array.isArray(te)?F(te):"tokenize"in te?F([te]):z(te);function z(fe){return ve;function ve(Te){const _e=Te!==null&&fe[Te],me=Te!==null&&fe.null,Ee=[...Array.isArray(_e)?_e:_e?[_e]:[],...Array.isArray(me)?me:me?[me]:[]];return F(Ee)(Te)}}function F(fe){return J=fe,ae=0,fe.length===0?$:A(fe[ae])}function A(fe){return ve;function ve(Te){return I=P(),Q=fe,fe.partial||(d.currentConstruct=fe),fe.name&&d.parser.constructs.disable.null.includes(fe.name)?ue():fe.tokenize.call(G?Object.assign(Object.create(d),G):d,f,se,ue)(Te)}}function se(fe){return B(Q,I),V}function ue(fe){return I.restore(),++ae<J.length?A(J[ae]):$}}}function L(B,G){B.resolveAll&&!a.includes(B)&&a.push(B),B.resolve&&er(d.events,G,d.events.length-G,B.resolve(d.events.slice(G),d)),B.resolveTo&&(d.events=B.resolveTo(d.events,d))}function P(){const B=x(),G=d.previous,ee=d.currentConstruct,te=d.events.length,V=Array.from(c);return{from:te,restore:$};function $(){r=B,d.previous=G,d.currentConstruct=ee,d.events.length=te,c=V,M()}}function M(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function MH(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,a=e.end._bufferIndex;let l;if(n===s)l=[t[n].slice(r,a)];else{if(l=t.slice(n,s),r>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(r):l.shift()}a>0&&l.push(t[s].slice(0,a))}return l}function IH(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&s)continue;l=" ";break}default:l=String.fromCharCode(a)}s=a===-2,r.push(l)}return r.join("")}function NH(t){const r={constructs:JT([AH,...(t||{}).extensions||[]]),content:s(Q9),defined:[],document:s(Y9),flow:s(pH),lazy:{},string:s(yH),text:s(vH)};return r;function s(a){return l;function l(c){return OH(r,a,c)}}}function zH(t){for(;!nA(t););return t}const _C=/[\0\t\n\r]/g;function DH(){let t=1,e="",n=!0,r;return s;function s(a,l,c){const f=[];let d,m,p,g,y;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),p=0,e="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(_C.lastIndex=p,d=_C.exec(a),g=d&&d.index!==void 0?d.index:a.length,y=a.charCodeAt(g),!d){e=a.slice(p);break}if(y===10&&p===g&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),p<g&&(f.push(a.slice(p,g)),t+=g-p),y){case 0:{f.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,f.push(-2);t++<m;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:r=!0,t=1}p=g+1}return c&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const jH=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function LH(t){return t.replace(jH,PH)}function PH(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return XT(n.slice(a?2:1),a?16:10)}return gv(n)||t}const lA={}.hasOwnProperty;function $H(t,e,n){return typeof e!="string"&&(n=e,e=void 0),FH(n)(zH(NH(n).document().write(DH()(t,e,!0))))}function FH(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(ht),autolinkProtocol:P,autolinkEmail:P,atxHeading:a(Ye),blockQuote:a(me),characterEscape:P,characterReference:P,codeFenced:a(Ee),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(Ee,l),codeText:a(Oe,l),codeTextData:P,data:P,codeFlowValue:P,definition:a(Ze),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(Le),hardBreakEscape:a(it),hardBreakTrailing:a(it),htmlFlow:a(Je,l),htmlFlowData:P,htmlText:a(Je,l),htmlTextData:P,image:a(ot),label:l,link:a(ht),listItem:a(ge),listItemValue:g,listOrdered:a(Me,p),listUnordered:a(Me),paragraph:a(je),reference:A,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(Ye),strong:a(be),thematicBreak:a(qe)},exit:{atxHeading:f(),atxHeadingSequence:j,autolink:f(),autolinkEmail:_e,autolinkProtocol:Te,blockQuote:f(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:ue,characterReferenceMarkerNumeric:ue,characterReferenceValue:fe,characterReference:ve,codeFenced:f(E),codeFencedFence:S,codeFencedFenceInfo:y,codeFencedFenceMeta:x,codeFlowValue:M,codeIndented:f(C),codeText:f(V),codeTextData:M,data:M,definition:f(),definitionDestinationString:N,definitionLabelString:k,definitionTitleString:R,emphasis:f(),hardBreakEscape:f(G),hardBreakTrailing:f(G),htmlFlow:f(ee),htmlFlowData:M,htmlText:f(te),htmlTextData:M,image:f(J),label:Q,labelText:ae,lineEnding:B,link:f($),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:se,resourceDestinationString:I,resourceTitleString:z,resource:F,setextHeading:f(L),setextHeadingLineSequence:D,setextHeadingText:T,strong:f(),thematicBreak:f()}};uA(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ne){let de={type:"root",children:[]};const Ce={stack:[de],tokenStack:[],config:e,enter:c,exit:d,buffer:l,resume:m,data:n},ke=[];let xe=-1;for(;++xe<ne.length;)if(ne[xe][1].type==="listOrdered"||ne[xe][1].type==="listUnordered")if(ne[xe][0]==="enter")ke.push(xe);else{const Ue=ke.pop();xe=s(ne,Ue,xe)}for(xe=-1;++xe<ne.length;){const Ue=e[ne[xe][0]];lA.call(Ue,ne[xe][1].type)&&Ue[ne[xe][1].type].call(Object.assign({sliceSerialize:ne[xe][2].sliceSerialize},Ce),ne[xe][1])}if(Ce.tokenStack.length>0){const Ue=Ce.tokenStack[Ce.tokenStack.length-1];(Ue[1]||CC).call(Ce,void 0,Ue[0])}for(de.position={start:Qs(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:Qs(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},xe=-1;++xe<e.transforms.length;)de=e.transforms[xe](de)||de;return de}function s(ne,de,Ce){let ke=de-1,xe=-1,Ue=!1,vt,ut,ct,kn;for(;++ke<=Ce;){const wt=ne[ke];switch(wt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{wt[0]==="enter"?xe++:xe--,kn=void 0;break}case"lineEndingBlank":{wt[0]==="enter"&&(vt&&!kn&&!xe&&!ct&&(ct=ke),kn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:kn=void 0}if(!xe&&wt[0]==="enter"&&wt[1].type==="listItemPrefix"||xe===-1&&wt[0]==="exit"&&(wt[1].type==="listUnordered"||wt[1].type==="listOrdered")){if(vt){let xs=ke;for(ut=void 0;xs--;){const _r=ne[xs];if(_r[1].type==="lineEnding"||_r[1].type==="lineEndingBlank"){if(_r[0]==="exit")continue;ut&&(ne[ut][1].type="lineEndingBlank",Ue=!0),_r[1].type="lineEnding",ut=xs}else if(!(_r[1].type==="linePrefix"||_r[1].type==="blockQuotePrefix"||_r[1].type==="blockQuotePrefixWhitespace"||_r[1].type==="blockQuoteMarker"||_r[1].type==="listItemIndent"))break}ct&&(!ut||ct<ut)&&(vt._spread=!0),vt.end=Object.assign({},ut?ne[ut][1].start:wt[1].end),ne.splice(ut||ke,0,["exit",vt,wt[2]]),ke++,Ce++}if(wt[1].type==="listItemPrefix"){const xs={type:"listItem",_spread:!1,start:Object.assign({},wt[1].start),end:void 0};vt=xs,ne.splice(ke,0,["enter",xs,wt[2]]),ke++,Ce++,ct=void 0,kn=!0}}}return ne[de][1]._spread=Ue,Ce}function a(ne,de){return Ce;function Ce(ke){c.call(this,ne(ke),ke),de&&de.call(this,ke)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(ne,de,Ce){this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([de,Ce||void 0]),ne.position={start:Qs(de.start),end:void 0}}function f(ne){return de;function de(Ce){ne&&ne.call(this,Ce),d.call(this,Ce)}}function d(ne,de){const Ce=this.stack.pop(),ke=this.tokenStack.pop();if(ke)ke[0].type!==ne.type&&(de?de.call(this,ne,ke[0]):(ke[1]||CC).call(this,ne,ke[0]));else throw new Error("Cannot close `"+ne.type+"` ("+su({start:ne.start,end:ne.end})+"): its not open");Ce.position.end=Qs(ne.end)}function m(){return mv(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(ne){if(this.data.expectingFirstListItemValue){const de=this.stack[this.stack.length-2];de.start=Number.parseInt(this.sliceSerialize(ne),10),this.data.expectingFirstListItemValue=void 0}}function y(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.lang=ne}function x(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.meta=ne}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.value=ne.replace(/(\r?\n|\r)$/g,"")}function k(ne){const de=this.resume(),Ce=this.stack[this.stack.length-1];Ce.label=de,Ce.identifier=Ir(this.sliceSerialize(ne)).toLowerCase()}function R(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.title=ne}function N(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.url=ne}function j(ne){const de=this.stack[this.stack.length-1];if(!de.depth){const Ce=this.sliceSerialize(ne).length;de.depth=Ce}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function D(ne){const de=this.stack[this.stack.length-1];de.depth=this.sliceSerialize(ne).codePointAt(0)===61?1:2}function L(){this.data.setextHeadingSlurpLineEnding=void 0}function P(ne){const Ce=this.stack[this.stack.length-1].children;let ke=Ce[Ce.length-1];(!ke||ke.type!=="text")&&(ke=ye(),ke.position={start:Qs(ne.start),end:void 0},Ce.push(ke)),this.stack.push(ke)}function M(ne){const de=this.stack.pop();de.value+=this.sliceSerialize(ne),de.position.end=Qs(ne.end)}function B(ne){const de=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ce=de.children[de.children.length-1];Ce.position.end=Qs(ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(de.type)&&(P.call(this,ne),M.call(this,ne))}function G(){this.data.atHardBreak=!0}function ee(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.value=ne}function te(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.value=ne}function V(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.value=ne}function $(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const de=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=de,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function J(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const de=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=de,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function ae(ne){const de=this.sliceSerialize(ne),Ce=this.stack[this.stack.length-2];Ce.label=LH(de),Ce.identifier=Ir(de).toLowerCase()}function Q(){const ne=this.stack[this.stack.length-1],de=this.resume(),Ce=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ce.type==="link"){const ke=ne.children;Ce.children=ke}else Ce.alt=de}function I(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.url=ne}function z(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.title=ne}function F(){this.data.inReference=void 0}function A(){this.data.referenceType="collapsed"}function se(ne){const de=this.resume(),Ce=this.stack[this.stack.length-1];Ce.label=de,Ce.identifier=Ir(this.sliceSerialize(ne)).toLowerCase(),this.data.referenceType="full"}function ue(ne){this.data.characterReferenceType=ne.type}function fe(ne){const de=this.sliceSerialize(ne),Ce=this.data.characterReferenceType;let ke;Ce?(ke=XT(de,Ce==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ke=gv(de);const xe=this.stack[this.stack.length-1];xe.value+=ke}function ve(ne){const de=this.stack.pop();de.position.end=Qs(ne.end)}function Te(ne){M.call(this,ne);const de=this.stack[this.stack.length-1];de.url=this.sliceSerialize(ne)}function _e(ne){M.call(this,ne);const de=this.stack[this.stack.length-1];de.url="mailto:"+this.sliceSerialize(ne)}function me(){return{type:"blockquote",children:[]}}function Ee(){return{type:"code",lang:null,meta:null,value:""}}function Oe(){return{type:"inlineCode",value:""}}function Ze(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Le(){return{type:"emphasis",children:[]}}function Ye(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function Je(){return{type:"html",value:""}}function ot(){return{type:"image",title:null,url:"",alt:null}}function ht(){return{type:"link",title:null,url:"",children:[]}}function Me(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function ge(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function je(){return{type:"paragraph",children:[]}}function be(){return{type:"strong",children:[]}}function ye(){return{type:"text",value:""}}function qe(){return{type:"thematicBreak"}}}function Qs(t){return{line:t.line,column:t.column,offset:t.offset}}function uA(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?uA(t,r):BH(t,r)}}function BH(t,e){let n;for(n in e)if(lA.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function CC(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+su({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+su({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+su({start:e.start,end:e.end})+") is still open")}function UH(t){const e=this;e.parser=n;function n(r){return $H(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function qH(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function HH(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function VH(t,e){const n=e.value?e.value+`
`:"",r={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function KH(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function GH(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function QH(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=Co(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,c=t.footnoteCounts.get(r);c===void 0?(c=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,c+=1,t.footnoteCounts.set(r,c);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,f);const d={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,d),t.applyData(e,d)}function ZH(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function YH(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function cA(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=r:s.push({type:"text",value:r}),s}function JH(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return cA(t,e);const s={src:Co(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,a),t.applyData(e,a)}function XH(t,e){const n={src:Co(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function WH(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function eV(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return cA(t,e);const s={href:Co(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function tV(t,e){const n={href:Co(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function nV(t,e,n){const r=t.all(e),s=n?rV(n):fA(e),a={},l=[];if(typeof e.checked=="boolean"){const m=r[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const m=r[c];(s||c!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?l.push(...m.children):l.push(m)}const f=r[r.length-1];f&&(s||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,d),t.applyData(e,d)}function rV(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=fA(n[r])}return e}function fA(t){const e=t.spread;return e??t.children.length>1}function sV(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const l=r[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function iV(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function aV(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function oV(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function lV(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=fv(e.children[1]),f=HT(e.children[e.children.length-1]);c&&f&&(l.position={start:c,end:f}),s.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function uV(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,c=l?l.length:e.children.length;let f=-1;const d=[];for(;++f<c;){const p=e.children[f],g={},y=l?l[f]:void 0;y&&(g.align=y);let x={type:"element",tagName:a,properties:g,children:[]};p&&(x.children=t.all(p),t.patch(p,x),x=t.applyData(p,x)),d.push(x)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,m),t.applyData(e,m)}function cV(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const EC=9,kC=32;function fV(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const a=[];for(;r;)a.push(RC(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return a.push(RC(e.slice(s),s>0,!1)),a.join("")}function RC(t,e,n){let r=0,s=t.length;if(e){let a=t.codePointAt(r);for(;a===EC||a===kC;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(s-1);for(;a===EC||a===kC;)s--,a=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function dV(t,e){const n={type:"text",value:fV(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function hV(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const pV={blockquote:qH,break:HH,code:VH,delete:KH,emphasis:GH,footnoteReference:QH,heading:ZH,html:YH,imageReference:JH,image:XH,inlineCode:WH,linkReference:eV,link:tV,listItem:nV,list:sV,paragraph:iV,root:aV,strong:oV,table:lV,tableCell:cV,tableRow:uV,text:dV,thematicBreak:hV,toml:kf,yaml:kf,definition:kf,footnoteDefinition:kf};function kf(){}const dA=-1,oh=0,au=1,Ad=2,vv=3,bv=4,xv=5,Sv=6,hA=7,pA=8,TC=typeof self=="object"?self:globalThis,mV=(t,e)=>{const n=(s,a)=>(t.set(a,s),s),r=s=>{if(t.has(s))return t.get(s);const[a,l]=e[s];switch(a){case oh:case dA:return n(l,s);case au:{const c=n([],s);for(const f of l)c.push(r(f));return c}case Ad:{const c=n({},s);for(const[f,d]of l)c[r(f)]=r(d);return c}case vv:return n(new Date(l),s);case bv:{const{source:c,flags:f}=l;return n(new RegExp(c,f),s)}case xv:{const c=n(new Map,s);for(const[f,d]of l)c.set(r(f),r(d));return c}case Sv:{const c=n(new Set,s);for(const f of l)c.add(r(f));return c}case hA:{const{name:c,message:f}=l;return n(new TC[c](f),s)}case pA:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:c}=new Uint8Array(l);return n(new DataView(c),l)}}return n(new TC[a](l),s)};return r},AC=t=>mV(new Map,t)(0),Ha="",{toString:gV}={},{keys:yV}=Object,Tl=t=>{const e=typeof t;if(e!=="object"||!t)return[oh,e];const n=gV.call(t).slice(8,-1);switch(n){case"Array":return[au,Ha];case"Object":return[Ad,Ha];case"Date":return[vv,Ha];case"RegExp":return[bv,Ha];case"Map":return[xv,Ha];case"Set":return[Sv,Ha];case"DataView":return[au,n]}return n.includes("Array")?[au,n]:n.includes("Error")?[hA,n]:[Ad,n]},Rf=([t,e])=>t===oh&&(e==="function"||e==="symbol"),vV=(t,e,n,r)=>{const s=(l,c)=>{const f=r.push(l)-1;return n.set(c,f),f},a=l=>{if(n.has(l))return n.get(l);let[c,f]=Tl(l);switch(c){case oh:{let m=l;switch(f){case"bigint":c=pA,m=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);m=null;break;case"undefined":return s([dA],l)}return s([c,m],l)}case au:{if(f){let g=l;return f==="DataView"?g=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(g=new Uint8Array(l)),s([f,[...g]],l)}const m=[],p=s([c,m],l);for(const g of l)m.push(a(g));return p}case Ad:{if(f)switch(f){case"BigInt":return s([f,l.toString()],l);case"Boolean":case"Number":case"String":return s([f,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const m=[],p=s([c,m],l);for(const g of yV(l))(t||!Rf(Tl(l[g])))&&m.push([a(g),a(l[g])]);return p}case vv:return s([c,l.toISOString()],l);case bv:{const{source:m,flags:p}=l;return s([c,{source:m,flags:p}],l)}case xv:{const m=[],p=s([c,m],l);for(const[g,y]of l)(t||!(Rf(Tl(g))||Rf(Tl(y))))&&m.push([a(g),a(y)]);return p}case Sv:{const m=[],p=s([c,m],l);for(const g of l)(t||!Rf(Tl(g)))&&m.push(a(g));return p}}const{message:d}=l;return s([c,{name:f,message:d}],l)};return a},OC=(t,{json:e,lossy:n}={})=>{const r=[];return vV(!(e||n),!!e,new Map,r)(t),r},Od=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?AC(OC(t,e)):structuredClone(t):(t,e)=>AC(OC(t,e));function bV(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function xV(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function SV(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||bV,r=t.options.footnoteBackLabel||xV,s=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let f=-1;for(;++f<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[f]);if(!d)continue;const m=t.all(d),p=String(d.identifier).toUpperCase(),g=Co(p.toLowerCase());let y=0;const x=[],S=t.footnoteCounts.get(p);for(;S!==void 0&&++y<=S;){x.length>0&&x.push({type:"text",value:" "});let k=typeof n=="string"?n:n(f,y);typeof k=="string"&&(k={type:"text",value:k}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,y),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const E=m[m.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const k=E.children[E.children.length-1];k&&k.type==="text"?k.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...x)}else m.push(...x);const C={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(m,!0)};t.patch(d,C),c.push(C)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Od(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const lh=(function(t){if(t==null)return EV;if(typeof t=="function")return uh(t);if(typeof t=="object")return Array.isArray(t)?wV(t):_V(t);if(typeof t=="string")return CV(t);throw new Error("Expected function, string, or object as test")});function wV(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=lh(t[n]);return uh(r);function r(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function _V(t){const e=t;return uh(n);function n(r){const s=r;let a;for(a in t)if(s[a]!==e[a])return!1;return!0}}function CV(t){return uh(e);function e(n){return n&&n.type===t}}function uh(t){return e;function e(n,r,s){return!!(kV(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function EV(){return!0}function kV(t){return t!==null&&typeof t=="object"&&"type"in t}const mA=[],RV=!0,qy=!1,TV="skip";function gA(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const a=lh(s),l=r?-1:1;c(t,void 0,[])();function c(f,d,m){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(f.type+(y?"<"+y+">":""))+")"})}return g;function g(){let y=mA,x,S,E;if((!e||a(f,d,m[m.length-1]||void 0))&&(y=AV(n(f,m)),y[0]===qy))return y;if("children"in f&&f.children){const C=f;if(C.children&&y[0]!==TV)for(S=(r?C.children.length:-1)+l,E=m.concat(C);S>-1&&S<C.children.length;){const k=C.children[S];if(x=c(k,S,E)(),x[0]===qy)return x;S=typeof x[1]=="number"?x[1]:S+l}}return y}}}function AV(t){return Array.isArray(t)?t:typeof t=="number"?[RV,t]:t==null?mA:[t]}function wv(t,e,n,r){let s,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,s=n):(a=e,l=n,s=r),gA(t,a,c,s);function c(f,d){const m=d[d.length-1],p=m?m.children.indexOf(f):void 0;return l(f,p,m)}}const Hy={}.hasOwnProperty,OV={};function MV(t,e){const n=e||OV,r=new Map,s=new Map,a=new Map,l={...pV,...n.handlers},c={all:d,applyData:NV,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:l,one:f,options:n,patch:IV,wrap:DV};return wv(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?r:s,g=String(m.identifier).toUpperCase();p.has(g)||p.set(g,m)}}),c;function f(m,p){const g=m.type,y=c.handlers[g];if(Hy.call(c.handlers,g)&&y)return y(c,m,p);if(c.options.passThrough&&c.options.passThrough.includes(g)){if("children"in m){const{children:S,...E}=m,C=Od(E);return C.children=c.all(m),C}return Od(m)}return(c.options.unknownHandler||zV)(c,m,p)}function d(m){const p=[];if("children"in m){const g=m.children;let y=-1;for(;++y<g.length;){const x=c.one(g[y],m);if(x){if(y&&g[y-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=MC(x.value)),!Array.isArray(x)&&x.type==="element")){const S=x.children[0];S&&S.type==="text"&&(S.value=MC(S.value))}Array.isArray(x)?p.push(...x):p.push(x)}}}return p}}function IV(t,e){t.position&&(e.position=x9(t))}function NV(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,Od(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function zV(t,e){const n=e.data||{},r="value"in e&&!(Hy.call(n,"hProperties")||Hy.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function DV(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function MC(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function IC(t,e){const n=MV(t,e),r=n.one(t,void 0),s=SV(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function jV(t,e){return t&&"run"in t?async function(n,r){const s=IC(n,{file:r,...e});await t.run(s,r)}:function(n,r){return IC(n,{file:r,...t||e})}}function NC(t){if(t)throw t}var _g,zC;function LV(){if(zC)return _g;zC=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},a=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var m=t.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!p)return!1;var g;for(g in d);return typeof g>"u"||t.call(d,g)},l=function(d,m){n&&m.name==="__proto__"?n(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},c=function(d,m){if(m==="__proto__")if(t.call(d,m)){if(r)return r(d,m).value}else return;return d[m]};return _g=function f(){var d,m,p,g,y,x,S=arguments[0],E=1,C=arguments.length,k=!1;for(typeof S=="boolean"&&(k=S,S=arguments[1]||{},E=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});E<C;++E)if(d=arguments[E],d!=null)for(m in d)p=c(S,m),g=c(d,m),S!==g&&(k&&g&&(a(g)||(y=s(g)))?(y?(y=!1,x=p&&s(p)?p:[]):x=p&&a(p)?p:{},l(S,{name:m,newValue:f(k,x,g)})):typeof g<"u"&&l(S,{name:m,newValue:g}));return S},_g}var PV=LV();const Cg=Qy(PV);function Vy(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function $V(){const t=[],e={run:n,use:r};return e;function n(...s){let a=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...s);function c(f,...d){const m=t[++a];let p=-1;if(f){l(f);return}for(;++p<s.length;)(d[p]===null||d[p]===void 0)&&(d[p]=s[p]);s=d,m?FV(m,c)(...d):l(null,...d)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function FV(t,e){let n;return r;function r(...l){const c=t.length>l.length;let f;c&&l.push(s);try{f=t.apply(this,l)}catch(d){const m=d;if(c&&n)throw m;return s(m)}c||(f&&f.then&&typeof f.then=="function"?f.then(a,s):f instanceof Error?s(f):a(f))}function s(l,...c){n||(n=!0,e(l,...c))}function a(l){s(null,l)}}const Pr={basename:BV,dirname:UV,extname:qV,join:HV,sep:"/"};function BV(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Lu(t);let n=0,r=-1,s=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,c=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else l<0&&(a=!0,l=s+1),c>-1&&(t.codePointAt(s)===e.codePointAt(c--)?c<0&&(r=s):(c=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function UV(t){if(Lu(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function qV(t){Lu(t);let e=t.length,n=-1,r=0,s=-1,a=0,l;for(;e--;){const c=t.codePointAt(e);if(c===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),c===46?s<0?s=e:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function HV(...t){let e=-1,n;for(;++e<t.length;)Lu(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":VV(n)}function VV(t){Lu(t);const e=t.codePointAt(0)===47;let n=KV(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function KV(t,e){let n="",r=0,s=-1,a=0,l=-1,c,f;for(;++l<=t.length;){if(l<t.length)c=t.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),s=l,a=0;continue}}else if(n.length>0){n="",r=0,s=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),r=l-s-1;s=l,a=0}else c===46&&a>-1?a++:a=-1}return n}function Lu(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const GV={cwd:QV};function QV(){return"/"}function Ky(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function ZV(t){if(typeof t=="string")t=new URL(t);else if(!Ky(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return YV(t)}function YV(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Eg=["history","path","basename","stem","extname","dirname"];class yA{constructor(e){let n;e?Ky(e)?n={path:e}:typeof e=="string"||JV(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":GV.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Eg.length;){const a=Eg[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)Eg.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Pr.basename(this.path):void 0}set basename(e){Rg(e,"basename"),kg(e,"basename"),this.path=Pr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Pr.dirname(this.path):void 0}set dirname(e){DC(this.basename,"dirname"),this.path=Pr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Pr.extname(this.path):void 0}set extname(e){if(kg(e,"extname"),DC(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Pr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Ky(e)&&(e=ZV(e)),Rg(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Pr.basename(this.path,this.extname):void 0}set stem(e){Rg(e,"stem"),kg(e,"stem"),this.path=Pr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new yn(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function kg(t,e){if(t&&t.includes(Pr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Pr.sep+"`")}function Rg(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function DC(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function JV(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const XV=(function(t){const r=this.constructor.prototype,s=r[t],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),WV={}.hasOwnProperty;class _v extends XV{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=$V()}copy(){const e=new _v;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Cg(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Og("data",this.frozen),this.namespace[e]=n,this):WV.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Og("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Tf(e),r=this.parser||this.Parser;return Tg("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Tg("process",this.parser||this.Parser),Ag("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,l){const c=Tf(e),f=r.parse(c);r.run(f,c,function(m,p,g){if(m||!p||!g)return d(m);const y=p,x=r.stringify(y,g);nK(x)?g.value=x:g.result=x,d(m,g)});function d(m,p){m||!p?l(m):a?a(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),Tg("processSync",this.parser||this.Parser),Ag("processSync",this.compiler||this.Compiler),this.process(e,s),LC("processSync","process",n),r;function s(a,l){n=!0,NC(a),r=l}}run(e,n,r){jC(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,c){const f=Tf(n);s.run(e,f,d);function d(m,p,g){const y=p||e;m?c(m):l?l(y):r(void 0,y,g)}}}runSync(e,n){let r=!1,s;return this.run(e,n,a),LC("runSync","run",r),s;function a(l,c){NC(l),s=c,r=!0}}stringify(e,n){this.freeze();const r=Tf(n),s=this.compiler||this.Compiler;return Ag("stringify",s),jC(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(Og("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...p]=d;f(m,p)}else l(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function l(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(d.plugins),d.settings&&(s.settings=Cg(!0,s.settings,d.settings))}function c(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const p=d[m];a(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,m){let p=-1,g=-1;for(;++p<r.length;)if(r[p][0]===d){g=p;break}if(g===-1)r.push([d,...m]);else if(m.length>0){let[y,...x]=m;const S=r[g][1];Vy(S)&&Vy(y)&&(y=Cg(!0,S,y)),r[g]=[d,y,...x]}}}}const eK=new _v().freeze();function Tg(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Ag(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Og(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function jC(t){if(!Vy(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function LC(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Tf(t){return tK(t)?t:new yA(t)}function tK(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function nK(t){return typeof t=="string"||rK(t)}function rK(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const sK="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",PC=[],$C={allowDangerousHtml:!0},iK=/^(https?|ircs?|mailto|xmpp)$/i,aK=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function oK(t){const e=lK(t),n=uK(t);return cK(e.runSync(e.parse(n),n),t)}function lK(t){const e=t.rehypePlugins||PC,n=t.remarkPlugins||PC,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...$C}:$C;return eK().use(UH).use(n).use(jV,r).use(e)}function uK(t){const e=t.children||"",n=new yA;return typeof e=="string"&&(n.value=e),n}function cK(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,a=e.disallowedElements,l=e.skipHtml,c=e.unwrapDisallowed,f=e.urlTransform||fK;for(const m of aK)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+sK+m.id,void 0);return wv(t,d),E9(t,{Fragment:w.Fragment,components:s,ignoreInvalidStyle:!0,jsx:w.jsx,jsxs:w.jsxs,passKeys:!0,passNode:!0});function d(m,p,g){if(m.type==="raw"&&g&&typeof p=="number")return l?g.children.splice(p,1):g.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let y;for(y in xg)if(Object.hasOwn(xg,y)&&Object.hasOwn(m.properties,y)){const x=m.properties[y],S=xg[y];(S===null||S.includes(m.tagName))&&(m.properties[y]=f(String(x||""),y,m))}}if(m.type==="element"){let y=n?!n.includes(m.tagName):a?a.includes(m.tagName):!1;if(!y&&r&&typeof p=="number"&&(y=!r(m,p,g)),y&&g&&typeof p=="number")return c&&m.children?g.children.splice(p,1,...m.children):g.children.splice(p,1),p}}}function fK(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||iK.test(t.slice(0,e))?t:""}function FC(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function dK(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function vA(t,e,n){const s=lh((n||{}).ignore||[]),a=hK(e);let l=-1;for(;++l<a.length;)gA(t,"text",c);function c(d,m){let p=-1,g;for(;++p<m.length;){const y=m[p],x=g?g.children:void 0;if(s(y,x?x.indexOf(y):void 0,g))return;g=y}if(g)return f(d,m)}function f(d,m){const p=m[m.length-1],g=a[l][0],y=a[l][1];let x=0;const E=p.children.indexOf(d);let C=!1,k=[];g.lastIndex=0;let R=g.exec(d.value);for(;R;){const N=R.index,j={index:R.index,input:R.input,stack:[...m,d]};let T=y(...R,j);if(typeof T=="string"&&(T=T.length>0?{type:"text",value:T}:void 0),T===!1?g.lastIndex=N+1:(x!==N&&k.push({type:"text",value:d.value.slice(x,N)}),Array.isArray(T)?k.push(...T):T&&k.push(T),x=N+R[0].length,C=!0),!g.global)break;R=g.exec(d.value)}return C?(x<d.value.length&&k.push({type:"text",value:d.value.slice(x)}),p.children.splice(E,1,...k)):k=[d],E+k.length}}function hK(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([pK(s[0]),mK(s[1])])}return e}function pK(t){return typeof t=="string"?new RegExp(dK(t),"g"):t}function mK(t){return typeof t=="function"?t:function(){return t}}const Mg="phrasing",Ig=["autolink","link","image","label"];function gK(){return{transforms:[_K],enter:{literalAutolink:vK,literalAutolinkEmail:Ng,literalAutolinkHttp:Ng,literalAutolinkWww:Ng},exit:{literalAutolink:wK,literalAutolinkEmail:SK,literalAutolinkHttp:bK,literalAutolinkWww:xK}}}function yK(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Mg,notInConstruct:Ig},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Mg,notInConstruct:Ig},{character:":",before:"[ps]",after:"\\/",inConstruct:Mg,notInConstruct:Ig}]}}function vK(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Ng(t){this.config.enter.autolinkProtocol.call(this,t)}function bK(t){this.config.exit.autolinkProtocol.call(this,t)}function xK(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function SK(t){this.config.exit.autolinkEmail.call(this,t)}function wK(t){this.exit(t)}function _K(t){vA(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,CK],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),EK]],{ignore:["link","linkReference"]})}function CK(t,e,n,r,s){let a="";if(!bA(s)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!kK(n)))return!1;const l=RK(n+r);if(!l[0])return!1;const c={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[c,{type:"text",value:l[1]}]:c}function EK(t,e,n,r){return!bA(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function kK(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function RK(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=FC(t,"(");let a=FC(t,")");for(;r!==-1&&s>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function bA(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Yi(n)||ih(n))&&(!e||n!==47)}xA.peek=jK;function TK(){this.buffer()}function AK(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function OK(){this.buffer()}function MK(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function IK(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ir(this.sliceSerialize(t)).toLowerCase(),n.label=e}function NK(t){this.exit(t)}function zK(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ir(this.sliceSerialize(t)).toLowerCase(),n.label=e}function DK(t){this.exit(t)}function jK(){return"["}function xA(t,e,n,r){const s=n.createTracker(r);let a=s.move("[^");const l=n.enter("footnoteReference"),c=n.enter("reference");return a+=s.move(n.safe(n.associationId(t),{after:"]",before:a})),c(),l(),a+=s.move("]"),a}function LK(){return{enter:{gfmFootnoteCallString:TK,gfmFootnoteCall:AK,gfmFootnoteDefinitionLabelString:OK,gfmFootnoteDefinition:MK},exit:{gfmFootnoteCallString:IK,gfmFootnoteCall:NK,gfmFootnoteDefinitionLabelString:zK,gfmFootnoteDefinition:DK}}}function PK(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:xA},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,l){const c=a.createTracker(l);let f=c.move("[^");const d=a.enter("footnoteDefinition"),m=a.enter("label");return f+=c.move(a.safe(a.associationId(r),{before:f,after:"]"})),m(),f+=c.move("]:"),r.children&&r.children.length>0&&(c.shift(4),f+=c.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,c.current()),e?SA:$K))),d(),f}}function $K(t,e,n){return e===0?t:SA(t,e,n)}function SA(t,e,n){return(n?"":"    ")+t}const FK=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];wA.peek=VK;function BK(){return{canContainEols:["delete"],enter:{strikethrough:qK},exit:{strikethrough:HK}}}function UK(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:FK}],handlers:{delete:wA}}}function qK(t){this.enter({type:"delete",children:[]},t)}function HK(t){this.exit(t)}function wA(t,e,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let l=s.move("~~");return l+=n.containerPhrasing(t,{...s.current(),before:l,after:"~"}),l+=s.move("~~"),a(),l}function VK(){return"~"}function KK(t){return t.length}function GK(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||KK,a=[],l=[],c=[],f=[];let d=0,m=-1;for(;++m<t.length;){const S=[],E=[];let C=-1;for(t[m].length>d&&(d=t[m].length);++C<t[m].length;){const k=QK(t[m][C]);if(n.alignDelimiters!==!1){const R=s(k);E[C]=R,(f[C]===void 0||R>f[C])&&(f[C]=R)}S.push(k)}l[m]=S,c[m]=E}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<d;)a[p]=BC(r[p]);else{const S=BC(r);for(;++p<d;)a[p]=S}p=-1;const g=[],y=[];for(;++p<d;){const S=a[p];let E="",C="";S===99?(E=":",C=":"):S===108?E=":":S===114&&(C=":");let k=n.alignDelimiters===!1?1:Math.max(1,f[p]-E.length-C.length);const R=E+"-".repeat(k)+C;n.alignDelimiters!==!1&&(k=E.length+k+C.length,k>f[p]&&(f[p]=k),y[p]=k),g[p]=R}l.splice(1,0,g),c.splice(1,0,y),m=-1;const x=[];for(;++m<l.length;){const S=l[m],E=c[m];p=-1;const C=[];for(;++p<d;){const k=S[p]||"";let R="",N="";if(n.alignDelimiters!==!1){const j=f[p]-(E[p]||0),T=a[p];T===114?R=" ".repeat(j):T===99?j%2?(R=" ".repeat(j/2+.5),N=" ".repeat(j/2-.5)):(R=" ".repeat(j/2),N=R):N=" ".repeat(j)}n.delimiterStart!==!1&&!p&&C.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&k==="")&&(n.delimiterStart!==!1||p)&&C.push(" "),n.alignDelimiters!==!1&&C.push(R),C.push(k),n.alignDelimiters!==!1&&C.push(N),n.padding!==!1&&C.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&C.push("|")}x.push(n.delimiterEnd===!1?C.join("").replace(/ +$/,""):C.join(""))}return x.join(`
`)}function QK(t){return t==null?"":String(t)}function BC(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function ZK(t,e,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const l=n.indentLines(n.containerFlow(t,a.current()),YK);return s(),l}function YK(t,e,n){return">"+(n?"":" ")+t}function JK(t,e){return UC(t,e.inConstruct,!0)&&!UC(t,e.notInConstruct,!1)}function UC(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function qC(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&JK(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function XK(t,e){const n=String(t);let r=n.indexOf(e),s=r,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>l&&(l=a):a=1,s=r+e.length,r=n.indexOf(e,s);return l}function WK(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function eG(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function tG(t,e,n,r){const s=eG(n),a=t.value||"",l=s==="`"?"GraveAccent":"Tilde";if(WK(t,n)){const p=n.enter("codeIndented"),g=n.indentLines(a,nG);return p(),g}const c=n.createTracker(r),f=s.repeat(Math.max(XK(a,s)+1,3)),d=n.enter("codeFenced");let m=c.move(f);if(t.lang){const p=n.enter(`codeFencedLang${l}`);m+=c.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...c.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${l}`);m+=c.move(" "),m+=c.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...c.current()})),p()}return m+=c.move(`
`),a&&(m+=c.move(a+`
`)),m+=c.move(f),d(),m}function nG(t,e,n){return(n?"":"    ")+t}function Cv(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function rG(t,e,n,r){const s=Cv(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const f=n.createTracker(r);let d=f.move("[");return d+=f.move(n.safe(n.associationId(t),{before:d,after:"]",...f.current()})),d+=f.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...f.current()}))),c(),t.title&&(c=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),c()),l(),d}function sG(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function wu(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Md(t,e,n){const r=co(t),s=co(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}_A.peek=iG;function _A(t,e,n,r){const s=sG(n),a=n.enter("emphasis"),l=n.createTracker(r),c=l.move(s);let f=l.move(n.containerPhrasing(t,{after:s,before:c,...l.current()}));const d=f.charCodeAt(0),m=Md(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=wu(d)+f.slice(1));const p=f.charCodeAt(f.length-1),g=Md(r.after.charCodeAt(0),p,s);g.inside&&(f=f.slice(0,-1)+wu(p));const y=l.move(s);return a(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},c+f+y}function iG(t,e,n){return n.options.emphasis||"*"}function aG(t,e){let n=!1;return wv(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,qy}),!!((!t.depth||t.depth<3)&&mv(t)&&(e.options.setext||n))}function oG(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(aG(t,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),g=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return p(),m(),g+`
`+(s===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const l="#".repeat(s),c=n.enter("headingAtx"),f=n.enter("phrasing");a.move(l+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=wu(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,n.options.closeAtx&&(d+=" "+l),f(),c(),d}CA.peek=lG;function CA(t){return t.value||""}function lG(){return"<"}EA.peek=uG;function EA(t,e,n,r){const s=Cv(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const f=n.createTracker(r);let d=f.move("![");return d+=f.move(n.safe(t.alt,{before:d,after:"]",...f.current()})),d+=f.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":")",...f.current()}))),c(),t.title&&(c=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),c()),d+=f.move(")"),l(),d}function uG(){return"!"}kA.peek=cG;function kA(t,e,n,r){const s=t.referenceType,a=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(r);let f=c.move("![");const d=n.safe(t.alt,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=c.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function cG(){return"!"}RA.peek=fG;function RA(t,e,n){let r=t.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const l=n.unsafe[a],c=n.compilePattern(l);let f;if(l.atBreak)for(;f=c.exec(r);){let d=f.index;r.charCodeAt(d)===10&&r.charCodeAt(d-1)===13&&d--,r=r.slice(0,d)+" "+r.slice(f.index+1)}}return s+r+s}function fG(){return"`"}function TA(t,e){const n=mv(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}AA.peek=dG;function AA(t,e,n,r){const s=Cv(n),a=s==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let c,f;if(TA(t,n)){const m=n.stack;n.stack=[],c=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(t,{before:p,after:">",...l.current()})),p+=l.move(">"),c(),n.stack=m,p}c=n.enter("link"),f=n.enter("label");let d=l.move("[");return d+=l.move(n.containerPhrasing(t,{before:d,after:"](",...l.current()})),d+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),d+=l.move("<"),d+=l.move(n.safe(t.url,{before:d,after:">",...l.current()})),d+=l.move(">")):(f=n.enter("destinationRaw"),d+=l.move(n.safe(t.url,{before:d,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${a}`),d+=l.move(" "+s),d+=l.move(n.safe(t.title,{before:d,after:s,...l.current()})),d+=l.move(s),f()),d+=l.move(")"),c(),d}function dG(t,e,n){return TA(t,n)?"<":"["}OA.peek=hG;function OA(t,e,n,r){const s=t.referenceType,a=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(r);let f=c.move("[");const d=n.containerPhrasing(t,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=c.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function hG(){return"["}function Ev(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function pG(t){const e=Ev(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function mG(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function MA(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function gG(t,e,n,r){const s=n.enter("list"),a=n.bulletCurrent;let l=t.ordered?mG(n):Ev(n);const c=t.ordered?l==="."?")":".":pG(n);let f=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),MA(n)===l&&m){let p=-1;for(;++p<t.children.length;){const g=t.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=c),n.bulletCurrent=l;const d=n.containerFlow(t,r);return n.bulletLastUsed=l,n.bulletCurrent=a,s(),d}function yG(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function vG(t,e,n,r){const s=yG(n);let a=n.bulletCurrent||Ev(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let l=a.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(r);c.move(a+" ".repeat(l-a.length)),c.shift(l);const f=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,c.current()),m);return f(),d;function m(p,g,y){return g?(y?"":" ".repeat(l))+p:(y?a:a+" ".repeat(l-a.length))+p}}function bG(t,e,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),l=n.containerPhrasing(t,r);return a(),s(),l}const xG=lh(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function SG(t,e,n,r){return(t.children.some(function(l){return xG(l)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function wG(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}IA.peek=_G;function IA(t,e,n,r){const s=wG(n),a=n.enter("strong"),l=n.createTracker(r),c=l.move(s+s);let f=l.move(n.containerPhrasing(t,{after:s,before:c,...l.current()}));const d=f.charCodeAt(0),m=Md(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=wu(d)+f.slice(1));const p=f.charCodeAt(f.length-1),g=Md(r.after.charCodeAt(0),p,s);g.inside&&(f=f.slice(0,-1)+wu(p));const y=l.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},c+f+y}function _G(t,e,n){return n.options.strong||"*"}function CG(t,e,n,r){return n.safe(t.value,r)}function EG(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function kG(t,e,n){const r=(MA(n)+(n.options.ruleSpaces?" ":"")).repeat(EG(n));return n.options.ruleSpaces?r.slice(0,-1):r}const NA={blockquote:ZK,break:qC,code:tG,definition:rG,emphasis:_A,hardBreak:qC,heading:oG,html:CA,image:EA,imageReference:kA,inlineCode:RA,link:AA,linkReference:OA,list:gG,listItem:vG,paragraph:bG,root:SG,strong:IA,text:CG,thematicBreak:kG};function RG(){return{enter:{table:TG,tableData:HC,tableHeader:HC,tableRow:OG},exit:{codeText:MG,table:AG,tableData:zg,tableHeader:zg,tableRow:zg}}}function TG(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function AG(t){this.exit(t),this.data.inTable=void 0}function OG(t){this.enter({type:"tableRow",children:[]},t)}function zg(t){this.exit(t)}function HC(t){this.enter({type:"tableCell",children:[]},t)}function MG(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,IG));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function IG(t,e){return e==="|"?e:t}function NG(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:l,tableCell:f,tableRow:c}};function l(y,x,S,E){return d(m(y,S,E),y.align)}function c(y,x,S,E){const C=p(y,S,E),k=d([C]);return k.slice(0,k.indexOf(`
`))}function f(y,x,S,E){const C=S.enter("tableCell"),k=S.enter("phrasing"),R=S.containerPhrasing(y,{...E,before:a,after:a});return k(),C(),R}function d(y,x){return GK(y,{align:x,alignDelimiters:r,padding:n,stringLength:s})}function m(y,x,S){const E=y.children;let C=-1;const k=[],R=x.enter("table");for(;++C<E.length;)k[C]=p(E[C],x,S);return R(),k}function p(y,x,S){const E=y.children;let C=-1;const k=[],R=x.enter("tableRow");for(;++C<E.length;)k[C]=f(E[C],y,x,S);return R(),k}function g(y,x,S){let E=NA.inlineCode(y,x,S);return S.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function zG(){return{exit:{taskListCheckValueChecked:VC,taskListCheckValueUnchecked:VC,paragraph:jG}}}function DG(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:LG}}}function VC(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function jG(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let a=-1,l;for(;++a<s.length;){const c=s[a];if(c.type==="paragraph"){l=c;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function LG(t,e,n,r){const s=t.children[0],a=typeof t.checked=="boolean"&&s&&s.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",c=n.createTracker(r);a&&c.move(l);let f=NA.listItem(t,e,n,{...r,...c.current()});return a&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),f;function d(m){return m+l}}function PG(){return[gK(),LK(),BK(),RG(),zG()]}function $G(t){return{extensions:[yK(),PK(t),UK(),NG(t),DG()]}}const FG={tokenize:KG,partial:!0},zA={tokenize:GG,partial:!0},DA={tokenize:QG,partial:!0},jA={tokenize:ZG,partial:!0},BG={tokenize:YG,partial:!0},LA={name:"wwwAutolink",tokenize:HG,previous:$A},PA={name:"protocolAutolink",tokenize:VG,previous:FA},bs={name:"emailAutolink",tokenize:qG,previous:BA},Kr={};function UG(){return{text:Kr}}let Mi=48;for(;Mi<123;)Kr[Mi]=bs,Mi++,Mi===58?Mi=65:Mi===91&&(Mi=97);Kr[43]=bs;Kr[45]=bs;Kr[46]=bs;Kr[95]=bs;Kr[72]=[bs,PA];Kr[104]=[bs,PA];Kr[87]=[bs,LA];Kr[119]=[bs,LA];function qG(t,e,n){const r=this;let s,a;return l;function l(p){return!Gy(p)||!BA.call(r,r.previous)||kv(r.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),c(p))}function c(p){return Gy(p)?(t.consume(p),c):p===64?(t.consume(p),f):n(p)}function f(p){return p===46?t.check(BG,m,d)(p):p===45||p===95||gn(p)?(a=!0,t.consume(p),f):m(p)}function d(p){return t.consume(p),s=!0,f}function m(p){return a&&s&&Cn(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function HG(t,e,n){const r=this;return s;function s(l){return l!==87&&l!==119||!$A.call(r,r.previous)||kv(r.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(FG,t.attempt(zA,t.attempt(DA,a),n),n)(l))}function a(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function VG(t,e,n){const r=this;let s="",a=!1;return l;function l(p){return(p===72||p===104)&&FA.call(r,r.previous)&&!kv(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(p),t.consume(p),c):n(p)}function c(p){if(Cn(p)&&s.length<5)return s+=String.fromCodePoint(p),t.consume(p),c;if(p===58){const g=s.toLowerCase();if(g==="http"||g==="https")return t.consume(p),f}return n(p)}function f(p){return p===47?(t.consume(p),a?d:(a=!0,f)):n(p)}function d(p){return p===null||Td(p)||Ct(p)||Yi(p)||ih(p)?n(p):t.attempt(zA,t.attempt(DA,m),n)(p)}function m(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function KG(t,e,n){let r=0;return s;function s(l){return(l===87||l===119)&&r<3?(r++,t.consume(l),s):l===46&&r===3?(t.consume(l),a):n(l)}function a(l){return l===null?n(l):e(l)}}function GG(t,e,n){let r,s,a;return l;function l(d){return d===46||d===95?t.check(jA,f,c)(d):d===null||Ct(d)||Yi(d)||d!==45&&ih(d)?f(d):(a=!0,t.consume(d),l)}function c(d){return d===95?r=!0:(s=r,r=void 0),t.consume(d),l}function f(d){return s||r||!a?n(d):e(d)}}function QG(t,e){let n=0,r=0;return s;function s(l){return l===40?(n++,t.consume(l),s):l===41&&r<n?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check(jA,e,a)(l):l===null||Ct(l)||Yi(l)?e(l):(t.consume(l),s)}function a(l){return l===41&&r++,t.consume(l),s}}function ZG(t,e,n){return r;function r(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(t.consume(c),r):c===38?(t.consume(c),a):c===93?(t.consume(c),s):c===60||c===null||Ct(c)||Yi(c)?e(c):n(c)}function s(c){return c===null||c===40||c===91||Ct(c)||Yi(c)?e(c):r(c)}function a(c){return Cn(c)?l(c):n(c)}function l(c){return c===59?(t.consume(c),r):Cn(c)?(t.consume(c),l):n(c)}}function YG(t,e,n){return r;function r(a){return t.consume(a),s}function s(a){return gn(a)?n(a):e(a)}}function $A(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Ct(t)}function FA(t){return!Cn(t)}function BA(t){return!(t===47||Gy(t))}function Gy(t){return t===43||t===45||t===46||t===95||gn(t)}function kv(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const JG={tokenize:iQ,partial:!0};function XG(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:nQ,continuation:{tokenize:rQ},exit:sQ}},text:{91:{name:"gfmFootnoteCall",tokenize:tQ},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:WG,resolveTo:eQ}}}}function WG(t,e,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;s--;){const f=r.events[s][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return c;function c(f){if(!l||!l._balanced)return n(f);const d=Ir(r.sliceSerialize({start:l.end,end:r.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?n(f):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),e(f))}}function eQ(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},c=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...c),t}function tQ(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,l;return c;function c(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(p){if(a>999||p===93&&!l||p===null||p===91||Ct(p))return n(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteCallString");return s.includes(Ir(r.sliceSerialize(g)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return Ct(p)||(l=!0),a++,t.consume(p),p===92?m:d}function m(p){return p===91||p===92||p===93?(t.consume(p),a++,d):d(p)}}function nQ(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,l=0,c;return f;function f(x){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(x){return x===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(x)}function m(x){if(l>999||x===93&&!c||x===null||x===91||Ct(x))return n(x);if(x===93){t.exit("chunkString");const S=t.exit("gfmFootnoteDefinitionLabelString");return a=Ir(r.sliceSerialize(S)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),g}return Ct(x)||(c=!0),l++,t.consume(x),x===92?p:m}function p(x){return x===91||x===92||x===93?(t.consume(x),l++,m):m(x)}function g(x){return x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),s.includes(a)||s.push(a),lt(t,y,"gfmFootnoteDefinitionWhitespace")):n(x)}function y(x){return e(x)}}function rQ(t,e,n){return t.check(ju,e,t.attempt(JG,e,n))}function sQ(t){t.exit("gfmFootnoteDefinition")}function iQ(t,e,n){const r=this;return lt(t,s,"gfmFootnoteDefinitionIndent",5);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):n(a)}}function aQ(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(l,c){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let d=f;for(;d--;)if(l[d][0]==="exit"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[d][1].end.offset-l[d][1].start.offset){l[f][1].type="strikethroughSequence",l[d][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[d][1].start),end:Object.assign({},l[f][1].end)},p={type:"strikethroughText",start:Object.assign({},l[d][1].end),end:Object.assign({},l[f][1].start)},g=[["enter",m,c],["enter",l[d][1],c],["exit",l[d][1],c],["enter",p,c]],y=c.parser.constructs.insideSpan.null;y&&er(g,g.length,0,ah(y,l.slice(d+1,f),c)),er(g,g.length,0,[["exit",p,c],["enter",l[f][1],c],["exit",l[f][1],c],["exit",m,c]]),er(l,d-1,f-d+3,g),f=d+g.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function a(l,c,f){const d=this.previous,m=this.events;let p=0;return g;function g(x){return d===126&&m[m.length-1][1].type!=="characterEscape"?f(x):(l.enter("strikethroughSequenceTemporary"),y(x))}function y(x){const S=co(d);if(x===126)return p>1?f(x):(l.consume(x),p++,y);if(p<2&&!n)return f(x);const E=l.exit("strikethroughSequenceTemporary"),C=co(x);return E._open=!C||C===2&&!!S,E._close=!S||S===2&&!!C,c(x)}}}class oQ{constructor(){this.map=[]}add(e,n,r){lQ(this,e,n,r)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const a of s)e.push(a);s=r.pop()}this.map.length=0}}function lQ(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function uQ(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function cQ(){return{flow:{null:{name:"table",tokenize:fQ,resolveAll:dQ}}}}function fQ(t,e,n){const r=this;let s=0,a=0,l;return c;function c(M){let B=r.events.length-1;for(;B>-1;){const te=r.events[B][1].type;if(te==="lineEnding"||te==="linePrefix")B--;else break}const G=B>-1?r.events[B][1].type:null,ee=G==="tableHead"||G==="tableRow"?T:f;return ee===T&&r.parser.lazy[r.now().line]?n(M):ee(M)}function f(M){return t.enter("tableHead"),t.enter("tableRow"),d(M)}function d(M){return M===124||(l=!0,a+=1),m(M)}function m(M){return M===null?n(M):ze(M)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),y):n(M):et(M)?lt(t,m,"whitespace")(M):(a+=1,l&&(l=!1,s+=1),M===124?(t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),l=!0,m):(t.enter("data"),p(M)))}function p(M){return M===null||M===124||Ct(M)?(t.exit("data"),m(M)):(t.consume(M),M===92?g:p)}function g(M){return M===92||M===124?(t.consume(M),p):p(M)}function y(M){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(M):(t.enter("tableDelimiterRow"),l=!1,et(M)?lt(t,x,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):x(M))}function x(M){return M===45||M===58?E(M):M===124?(l=!0,t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),S):j(M)}function S(M){return et(M)?lt(t,E,"whitespace")(M):E(M)}function E(M){return M===58?(a+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(M),t.exit("tableDelimiterMarker"),C):M===45?(a+=1,C(M)):M===null||ze(M)?N(M):j(M)}function C(M){return M===45?(t.enter("tableDelimiterFiller"),k(M)):j(M)}function k(M){return M===45?(t.consume(M),k):M===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(M),t.exit("tableDelimiterMarker"),R):(t.exit("tableDelimiterFiller"),R(M))}function R(M){return et(M)?lt(t,N,"whitespace")(M):N(M)}function N(M){return M===124?x(M):M===null||ze(M)?!l||s!==a?j(M):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(M)):j(M)}function j(M){return n(M)}function T(M){return t.enter("tableRow"),D(M)}function D(M){return M===124?(t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),D):M===null||ze(M)?(t.exit("tableRow"),e(M)):et(M)?lt(t,D,"whitespace")(M):(t.enter("data"),L(M))}function L(M){return M===null||M===124||Ct(M)?(t.exit("data"),D(M)):(t.consume(M),M===92?P:L)}function P(M){return M===92||M===124?(t.consume(M),L):L(M)}}function dQ(t,e){let n=-1,r=!0,s=0,a=[0,0,0,0],l=[0,0,0,0],c=!1,f=0,d,m,p;const g=new oQ;for(;++n<t.length;){const y=t[n],x=y[1];y[0]==="enter"?x.type==="tableHead"?(c=!1,f!==0&&(KC(g,e,f,d,m),m=void 0,f=0),d={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},g.add(n,0,[["enter",d,e]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(r=!0,p=void 0,a=[0,0,0,0],l=[0,n+1,0,0],c&&(c=!1,m={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},g.add(n,0,[["enter",m,e]])),s=x.type==="tableDelimiterRow"?2:m?3:1):s&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],p=Af(g,e,a,s,void 0,p),a=[0,0,0,0]),l[2]=n)):x.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(l[0]=l[1],p=Af(g,e,a,s,void 0,p)),a=l,l=[a[1],n,0,0])):x.type==="tableHead"?(c=!0,f=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(f=n,a[1]!==0?(l[0]=l[1],p=Af(g,e,a,s,n,p)):l[1]!==0&&(p=Af(g,e,l,s,n,p)),s=0):s&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(l[3]=n)}for(f!==0&&KC(g,e,f,d,m),g.consume(e.events),n=-1;++n<e.events.length;){const y=e.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=uQ(e.events,n))}return t}function Af(t,e,n,r,s,a){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(a.end=Object.assign({},Za(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const f=Za(e.events,n[1]);if(a={type:l,start:Object.assign({},f),end:Object.assign({},f)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const d=Za(e.events,n[2]),m=Za(e.events,n[3]),p={type:c,start:Object.assign({},d),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",p,e]]),r!==2){const g=e.events[n[2]],y=e.events[n[3]];if(g[1].end=Object.assign({},y[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,S=n[3]-n[2]-1;t.add(x,S,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return s!==void 0&&(a.end=Object.assign({},Za(e.events,s)),t.add(s,0,[["exit",a,e]]),a=void 0),a}function KC(t,e,n,r,s){const a=[],l=Za(e.events,n);s&&(s.end=Object.assign({},l),a.push(["exit",s,e])),r.end=Object.assign({},l),a.push(["exit",r,e]),t.add(n+1,0,a)}function Za(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const hQ={name:"tasklistCheck",tokenize:mQ};function pQ(){return{text:{91:hQ}}}function mQ(t,e,n){const r=this;return s;function s(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(f):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),a)}function a(f){return Ct(f)?(t.enter("taskListCheckValueUnchecked"),t.consume(f),t.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(t.enter("taskListCheckValueChecked"),t.consume(f),t.exit("taskListCheckValueChecked"),l):n(f)}function l(f){return f===93?(t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),c):n(f)}function c(f){return ze(f)?e(f):et(f)?t.check({tokenize:gQ},e,n)(f):n(f)}}function gQ(t,e,n){return lt(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function yQ(t){return JT([UG(),XG(),aQ(t),cQ(),pQ()])}const vQ={};function bQ(t){const e=this,n=t||vQ,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(yQ(n)),a.push(PG()),l.push($G(n))}function xQ(t){vA(t,[/\r?\n|\r/g,SQ])}function SQ(){return{type:"break"}}function wQ(){return function(t){xQ(t)}}const _Q={pre:({children:t})=>w.jsx(w.Fragment,{children:t}),li:({children:t,...e})=>w.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>w.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>w.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>w.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let r=e||"";return r&&!r.startsWith("http")&&!r.startsWith("#")&&(r=`https://${r}`),w.jsx("a",{className:"text-sky-400 hover:underline",href:r,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>w.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>w.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>w.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>w.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>w.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>w.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>w.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>w.jsx("div",{className:"overflow-x-auto my-3",children:w.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>w.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>w.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>w.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>w.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>w.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>w.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>w.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const r=/language-(\w+)/.exec(e||""),s=String(t).replace(/\n$/,""),a=s.includes(`
`);if(!r&&!a)return w.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const l=r?.[1]||"text";return w.jsxs("div",{className:"my-3",children:[w.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:w.jsx("span",{children:l})}),w.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:w.jsx("code",{className:"text-xs font-mono text-neutral-200",children:s})})]})}},CQ=[bQ,wQ],EQ=t=>{const e=tn.c(6),{children:n}=t;if(!n)return null;let r=n,s;if(e[0]!==r){r=r.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=/```\n(#{1,6}\s+)/gm,e[3]=l):l=e[3],s=r.replace(l,"```\n\n$1"),e[0]=r,e[1]=s,e[2]=r}else s=e[1],r=e[2];r=s;let a;return e[4]!==r?(a=w.jsx(oK,{remarkPlugins:CQ,components:_Q,children:r}),e[4]=r,e[5]=a):a=e[5],a},kQ=q.memo(EQ,(t,e)=>t.children===e.children);function RQ(t){const e=tn.c(90),{isOpen:n,onClose:r,connection:s,database:a,table:l,currentQuery:c,queryResult:f,schema:d,setters:m}=t,[p,g]=q.useState(""),y=q.useRef(null),x=q.useRef(null),S=q.useRef(s?.id);let E;e[0]!==s||e[1]!==c||e[2]!==a||e[3]!==f||e[4]!==d||e[5]!==m||e[6]!==l?(E={connection:s,database:a,table:l,currentQuery:c,queryResult:f,schema:d,setters:m},e[0]=s,e[1]=c,e[2]=a,e[3]=f,e[4]=d,e[5]=m,e[6]=l,e[7]=E):E=e[7];const C=E;let k;e[8]!==C?(k=Zq(C),e[8]=C,e[9]=k):k=e[9];const R=k;let N;e[10]!==C?(N=Yq(C),e[10]=C,e[11]=N):N=e[11];const j=N;let T;if(e[12]!==j||e[13]!==R){const xe=xF(),Ue=bF(xe);T=q6(vt=>w6({adapter:Ue,messages:vt,tools:R,systemPrompts:[j],agentLoopStrategy:Ok(10)})),e[12]=j,e[13]=R,e[14]=T}else T=e[14];const D=T;let L;e[15]!==D||e[16]!==R?(L={connection:D,tools:R},e[15]=D,e[16]=R,e[17]=L):L=e[17];const{messages:P,sendMessage:M,isLoading:B,stop:G,clear:ee}=H6(L);let te;e[18]!==ee||e[19]!==s?.id?(te=()=>{S.current!==s?.id&&(ee(),S.current=s?.id)},e[18]=ee,e[19]=s?.id,e[20]=te):te=e[20];const V=s?.id;let $;e[21]!==ee||e[22]!==V?($=[V,ee],e[21]=ee,e[22]=V,e[23]=$):$=e[23],q.useEffect(te,$);let J;e[24]===Symbol.for("react.memo_cache_sentinel")?(J=()=>{y.current?.scrollIntoView({behavior:"smooth"})},e[24]=J):J=e[24];let ae;e[25]!==P?(ae=[P],e[25]=P,e[26]=ae):ae=e[26],q.useEffect(J,ae);let Q,I;e[27]!==n?(Q=()=>{n&&x.current?.focus()},I=[n],e[27]=n,e[28]=Q,e[29]=I):(Q=e[28],I=e[29]),q.useEffect(Q,I);let z;e[30]!==p||e[31]!==B||e[32]!==M?(z=xe=>{xe.preventDefault(),!(!p.trim()||B)&&(M(p.trim()),g(""))},e[30]=p,e[31]=B,e[32]=M,e[33]=z):z=e[33];const F=z;let A;e[34]!==F?(A=xe=>{xe.key==="Enter"&&!xe.shiftKey&&(xe.preventDefault(),F(xe))},e[34]=F,e[35]=A):A=e[35];const se=A,ue=TQ;let fe;e[36]!==B||e[37]!==P?(fe=(xe,Ue)=>B&&xe.role==="assistant"&&Ue===P.length-1,e[36]=B,e[37]=P,e[38]=fe):fe=e[38];const ve=fe;if(!n)return null;let Te;e[39]===Symbol.for("react.memo_cache_sentinel")?(Te=w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Vg,{size:16,className:"text-amber-500"}),w.jsx("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:rC.name})]}),e[39]=Te):Te=e[39];let _e;e[40]===Symbol.for("react.memo_cache_sentinel")?(_e=w.jsx(fu,{size:16}),e[40]=_e):_e=e[40];let me;e[41]!==ee?(me=w.jsx("button",{onClick:ee,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",title:"Clear chat",children:_e}),e[41]=ee,e[42]=me):me=e[42];let Ee;e[43]===Symbol.for("react.memo_cache_sentinel")?(Ee=w.jsx(Cu,{size:16}),e[43]=Ee):Ee=e[43];let Oe;e[44]!==r?(Oe=w.jsx("button",{onClick:r,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",children:Ee}),e[44]=r,e[45]=Oe):Oe=e[45];let Ze;e[46]!==me||e[47]!==Oe?(Ze=w.jsxs("div",{className:"shrink-0 h-12 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[Te,w.jsxs("div",{className:"flex items-center gap-1",children:[me,Oe]})]}),e[46]=me,e[47]=Oe,e[48]=Ze):Ze=e[48];let Le;e[49]!==P.length?(Le=P.length===0&&w.jsxs("div",{className:"text-center text-neutral-500 dark:text-neutral-400 text-sm py-8",children:[w.jsx(Vg,{size:24,className:"mx-auto mb-3 text-amber-500/50"}),w.jsx("p",{className:"mb-2",children:"Ask me to help with your SQL queries"}),w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:`Examples: "Write a query to find all users created this month" or "What's wrong with my query?"`})]}),e[49]=P.length,e[50]=Le):Le=e[50];let Ye;if(e[51]!==ve||e[52]!==P){let xe;e[54]!==ve?(xe=(Ue,vt)=>{const ut=ue(Ue);return w.jsx("div",{className:"space-y-3",children:(ut||ve(Ue,vt))&&w.jsx("div",{className:`text-sm ${Ue.role==="user"?"bg-neutral-100 dark:bg-neutral-800 rounded-lg px-3 py-2":""}`,children:w.jsx("div",{className:Ue.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300",children:Ue.role==="assistant"?ut?w.jsx(kQ,{children:ut}):ve(Ue,vt)?w.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[w.jsx(Ki,{size:14,className:"animate-spin"}),"Thinking..."]}):null:w.jsx("span",{className:"whitespace-pre-wrap",children:ut})})})},Ue.id)},e[54]=ve,e[55]=xe):xe=e[55],Ye=P.map(xe),e[51]=ve,e[52]=P,e[53]=Ye}else Ye=e[53];let it;e[56]!==B||e[57]!==P?(it=B&&(P.length===0||P[P.length-1]?.role==="user")&&w.jsx("div",{className:"text-sm",children:w.jsx("div",{className:"text-neutral-800 dark:text-neutral-200",children:w.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[w.jsx(Ki,{size:14,className:"animate-spin"}),"Thinking..."]})})}),e[56]=B,e[57]=P,e[58]=it):it=e[58];let Je;e[59]===Symbol.for("react.memo_cache_sentinel")?(Je=w.jsx("div",{ref:y}),e[59]=Je):Je=e[59];let ot;e[60]!==Le||e[61]!==Ye||e[62]!==it?(ot=w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[Le,Ye,it,Je]}),e[60]=Le,e[61]=Ye,e[62]=it,e[63]=ot):ot=e[63];let ht;e[64]===Symbol.for("react.memo_cache_sentinel")?(ht=xe=>g(xe.target.value),e[64]=ht):ht=e[64];let Me;e[65]===Symbol.for("react.memo_cache_sentinel")?(Me={maxHeight:"120px"},e[65]=Me):Me=e[65];let ge;e[66]!==se||e[67]!==p||e[68]!==B?(ge=w.jsx("textarea",{ref:x,value:p,onChange:ht,onKeyDown:se,placeholder:rC.placeholder,rows:1,disabled:B,className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 rounded-lg text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-400 resize-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 disabled:opacity-50",style:Me}),e[66]=se,e[67]=p,e[68]=B,e[69]=ge):ge=e[69];const je=B?"button":"submit",be=B?G:void 0;let ye;e[70]!==p||e[71]!==B?(ye=!B&&!p.trim(),e[70]=p,e[71]=B,e[72]=ye):ye=e[72];let qe;e[73]!==B?(qe=B?w.jsx(Nz,{size:16}):w.jsx(Tz,{size:16}),e[73]=B,e[74]=qe):qe=e[74];let ne;e[75]!==je||e[76]!==be||e[77]!==ye||e[78]!==qe?(ne=w.jsx("button",{type:je,onClick:be,disabled:ye,className:"p-2 bg-amber-500 hover:bg-amber-400 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-lg transition-colors",children:qe}),e[75]=je,e[76]=be,e[77]=ye,e[78]=qe,e[79]=ne):ne=e[79];let de;e[80]!==ge||e[81]!==ne?(de=w.jsxs("div",{className:"flex items-end gap-2",children:[ge,ne]}),e[80]=ge,e[81]=ne,e[82]=de):de=e[82];let Ce;e[83]!==F||e[84]!==de?(Ce=w.jsx("form",{onSubmit:F,className:"shrink-0 p-3 border-t border-neutral-200 dark:border-neutral-800",children:de}),e[83]=F,e[84]=de,e[85]=Ce):Ce=e[85];let ke;return e[86]!==Ze||e[87]!==ot||e[88]!==Ce?(ke=w.jsxs("div",{className:"w-96 shrink-0 bg-white border border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col rounded-xl overflow-hidden",children:[Ze,ot,Ce]}),e[86]=Ze,e[87]=ot,e[88]=Ce,e[89]=ke):ke=e[89],ke}function TQ(t){return t.parts.filter(OQ).map(AQ).join("").replace(/^undefined/,"")}function AQ(t){return t.content}function OQ(t){return t.type==="text"&&!!t.content}const MQ={folder:rd,image:IE,document:OE,code:AE,archive:RE,file:rd};function IQ(t){const e=tn.c(72),{connection:n,container:r,objectKey:s,onClose:a}=t;let l,c;e[0]!==n.id||e[1]!==r||e[2]!==s?(l=["storage-object-details",n.id,r,s],c=()=>LL(n.id,r,s),e[0]=n.id,e[1]=r,e[2]=s,e[3]=l,e[4]=c):(l=e[3],c=e[4]);const f=!!n&&!!r&&!!s;let d;e[5]!==l||e[6]!==c||e[7]!==f?(d={queryKey:l,queryFn:c,enabled:f},e[5]=l,e[6]=c,e[7]=f,e[8]=d):d=e[8];const{data:m,isLoading:p,error:g}=ys(d);let y;e[9]!==n.id||e[10]!==r||e[11]!==s?(y=async()=>{try{const se=await PL(n.id,r,s),ue=document.createElement("a");ue.href=se,ue.download=gu(s),ue.target="_blank",ue.style.display="none",document.body.appendChild(ue),ue.click(),document.body.removeChild(ue)}catch(se){console.error("Failed to get download URL:",se)}},e[9]=n.id,e[10]=r,e[11]=s,e[12]=y):y=e[12];const x=y;if(p){let se;return e[13]===Symbol.for("react.memo_cache_sentinel")?(se=w.jsx("div",{className:"flex-1 flex items-center justify-center",children:w.jsx(Ki,{className:"w-6 h-6 text-neutral-400 animate-spin"})}),e[13]=se):se=e[13],se}if(g||!m){const se=g?"Failed to load object details":"Select an object to view details";let ue;return e[14]!==se?(ue=w.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-400 dark:text-neutral-600 text-sm",children:se}),e[14]=se,e[15]=ue):ue=e[15],ue}const S=ak(s),E=MQ[S];let C;e[16]!==s?(C=gu(s),e[16]=s,e[17]=C):C=e[17];const k=C;let R;e[18]!==E?(R=w.jsx("div",{className:"w-10 h-10 rounded-lg bg-neutral-100 dark:bg-white/5 flex items-center justify-center",children:w.jsx(E,{className:"w-5 h-5 text-neutral-500 dark:text-neutral-400"})}),e[18]=E,e[19]=R):R=e[19];let N;e[20]!==k?(N=w.jsx("h2",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 truncate",children:k}),e[20]=k,e[21]=N):N=e[21];let j;e[22]!==r||e[23]!==s?(j=w.jsxs("p",{className:"text-xs text-neutral-400 dark:text-neutral-500 truncate",children:[r,"/",s]}),e[22]=r,e[23]=s,e[24]=j):j=e[24];let T;e[25]!==N||e[26]!==j?(T=w.jsxs("div",{className:"flex-1 min-w-0",children:[N,j]}),e[25]=N,e[26]=j,e[27]=T):T=e[27];let D;e[28]===Symbol.for("react.memo_cache_sentinel")?(D=w.jsx(az,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),e[28]=D):D=e[28];let L;e[29]!==x?(L=w.jsx("button",{onClick:x,className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Download",children:D}),e[29]=x,e[30]=L):L=e[30];let P;e[31]===Symbol.for("react.memo_cache_sentinel")?(P=w.jsx(Cu,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),e[31]=P):P=e[31];let M;e[32]!==a?(M=w.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Close",children:P}),e[32]=a,e[33]=M):M=e[33];let B;e[34]!==L||e[35]!==M?(B=w.jsxs("div",{className:"flex items-center gap-1",children:[L,M]}),e[34]=L,e[35]=M,e[36]=B):B=e[36];let G;e[37]!==T||e[38]!==B||e[39]!==R?(G=w.jsx("div",{className:"px-4 py-3 border-b border-neutral-200 dark:border-white/8",children:w.jsxs("div",{className:"flex items-center gap-3",children:[R,T,B]})}),e[37]=T,e[38]=B,e[39]=R,e[40]=G):G=e[40];let ee;e[41]!==m.size?(ee=ik(m.size),e[41]=m.size,e[42]=ee):ee=e[42];let te;e[43]!==ee?(te=w.jsx(hs,{label:"Size",value:ee}),e[43]=ee,e[44]=te):te=e[44];let V;e[45]!==m.lastModified?(V=zQ(m.lastModified),e[45]=m.lastModified,e[46]=V):V=e[46];let $;e[47]!==V?($=w.jsx(hs,{label:"Last Modified",value:V}),e[47]=V,e[48]=$):$=e[48];let J;e[49]!==m.contentType?(J=m.contentType&&w.jsx(hs,{label:"Content Type",value:UL(m.contentType)}),e[49]=m.contentType,e[50]=J):J=e[50];let ae;e[51]!==m.etag?(ae=m.etag&&w.jsx(hs,{label:"ETag",value:m.etag,mono:!0}),e[51]=m.etag,e[52]=ae):ae=e[52];let Q;e[53]!==te||e[54]!==$||e[55]!==J||e[56]!==ae?(Q=w.jsxs(Dg,{title:"Basic Information",children:[te,$,J,ae]}),e[53]=te,e[54]=$,e[55]=J,e[56]=ae,e[57]=Q):Q=e[57];let I;e[58]!==m.accessTier||e[59]!==m.blobType||e[60]!==m.storageClass||e[61]!==m.versionId?(I=(m.storageClass||m.accessTier||m.blobType)&&w.jsxs(Dg,{title:"Storage",children:[m.storageClass&&w.jsx(hs,{label:"Storage Class",value:m.storageClass}),m.accessTier&&w.jsx(hs,{label:"Access Tier",value:m.accessTier}),m.blobType&&w.jsx(hs,{label:"Blob Type",value:m.blobType}),m.versionId&&w.jsx(hs,{label:"Version ID",value:m.versionId,mono:!0})]}),e[58]=m.accessTier,e[59]=m.blobType,e[60]=m.storageClass,e[61]=m.versionId,e[62]=I):I=e[62];let z;e[63]!==m.metadata?(z=m.metadata&&Object.keys(m.metadata).length>0&&w.jsx(Dg,{title:"Metadata",children:Object.entries(m.metadata).map(NQ)}),e[63]=m.metadata,e[64]=z):z=e[64];let F;e[65]!==Q||e[66]!==I||e[67]!==z?(F=w.jsx("div",{className:"flex-1 overflow-auto p-4",children:w.jsxs("div",{className:"space-y-4",children:[Q,I,z]})}),e[65]=Q,e[66]=I,e[67]=z,e[68]=F):F=e[68];let A;return e[69]!==G||e[70]!==F?(A=w.jsxs("div",{className:"flex-1 bg-white dark:bg-[#1a1a1a]/60 border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden flex flex-col",children:[G,F]}),e[69]=G,e[70]=F,e[71]=A):A=e[71],A}function NQ(t){const[e,n]=t;return w.jsx(hs,{label:e,value:n},e)}function Dg(t){const e=tn.c(7),{title:n,children:r}=t;let s;e[0]!==n?(s=w.jsx("h3",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400 uppercase tracking-wider mb-2",children:n}),e[0]=n,e[1]=s):s=e[1];let a;e[2]!==r?(a=w.jsx("div",{className:"bg-neutral-50 dark:bg-white/5 rounded-lg divide-y divide-neutral-200 dark:divide-white/5",children:r}),e[2]=r,e[3]=a):a=e[3];let l;return e[4]!==s||e[5]!==a?(l=w.jsxs("div",{children:[s,a]}),e[4]=s,e[5]=a,e[6]=l):l=e[6],l}function hs(t){const e=tn.c(8),{label:n,value:r,mono:s}=t;let a;e[0]!==n?(a=w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:n}),e[0]=n,e[1]=a):a=e[1];const l=`text-xs text-neutral-700 dark:text-neutral-200 ${s?"font-mono":""} truncate max-w-50`;let c;e[2]!==l||e[3]!==r?(c=w.jsx("span",{className:l,children:r}),e[2]=l,e[3]=r,e[4]=c):c=e[4];let f;return e[5]!==a||e[6]!==c?(f=w.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[a,c]}),e[5]=a,e[6]=c,e[7]=f):f=e[7],f}function zQ(t){try{return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}}function DQ(t){const e=tn.c(63),{connection:n,container:r,currentPath:s,onClose:a}=t,l=po(),c=q.useRef(null),[f,d]=q.useState(null),[m,p]=q.useState("");let g;e[0]!==n||e[1]!==r?(g=F=>{const{file:A,key:se}=F;return $L(n.id,r,se,A)},e[0]=n,e[1]=r,e[2]=g):g=e[2];let y;e[3]!==n||e[4]!==r||e[5]!==a||e[6]!==l?(y=()=>{l.invalidateQueries({queryKey:["storage-objects",n.id,r]}),a()},e[3]=n,e[4]=r,e[5]=a,e[6]=l,e[7]=y):y=e[7];let x;e[8]!==g||e[9]!==y?(x={mutationFn:g,onSuccess:y},e[8]=g,e[9]=y,e[10]=x):x=e[10];const S=lu(x);let E;e[11]!==s?(E=F=>{const A=F.target.files;if(!A||A.length===0)return;const se=A[0];d(se),p(s+se.name)},e[11]=s,e[12]=E):E=e[12];const C=E;let k;e[13]!==m||e[14]!==f||e[15]!==S?(k=F=>{if(F.preventDefault(),f&&m.trim()){const A=m.trim().replace(/^\/+/,"");S.mutate({file:f,key:A})}},e[13]=m,e[14]=f,e[15]=S,e[16]=k):k=e[16];const R=k,N=jQ;let j;e[17]!==a?(j=w.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:a}),e[17]=a,e[18]=j):j=e[18];let T;e[19]===Symbol.for("react.memo_cache_sentinel")?(T=w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:w.jsx(zE,{className:"w-4 h-4 text-blue-500"})}),w.jsx("h2",{className:"text-base font-semibold text-neutral-900 dark:text-neutral-100",children:"Upload File"})]}),e[19]=T):T=e[19];let D;e[20]===Symbol.for("react.memo_cache_sentinel")?(D=w.jsx(Cu,{className:"w-4 h-4 text-neutral-500"}),e[20]=D):D=e[20];let L;e[21]!==a?(L=w.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-neutral-200 dark:border-neutral-800",children:[T,w.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:D})]}),e[21]=a,e[22]=L):L=e[22];let P;e[23]!==C?(P=w.jsx("input",{ref:c,type:"file",onChange:C,className:"hidden"}),e[23]=C,e[24]=P):P=e[24];let M;e[25]!==m||e[26]!==f||e[27]!==S.isPending?(M=f&&w.jsxs("div",{className:"space-y-3",children:[w.jsx("input",{type:"text",value:m,onChange:F=>p(F.target.value),placeholder:"path/to/file.txt",className:"w-full px-3 py-2 text-sm font-mono border border-neutral-200 dark:border-neutral-700 rounded-lg bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500",disabled:S.isPending}),w.jsxs("div",{className:"flex items-center gap-3 p-3 border border-neutral-200 dark:border-neutral-700 rounded-lg bg-neutral-50 dark:bg-neutral-800/50",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center",children:w.jsx(rd,{className:"w-5 h-5 text-blue-500"})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",children:f.name}),w.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[N(f.size),"  ",f.type||"Unknown type"]})]}),w.jsx("button",{type:"button",onClick:()=>c.current?.click(),className:"px-3 py-1.5 text-xs font-medium text-blue-500 hover:bg-blue-500/10 rounded-lg transition-colors",children:"Change"})]})]}),e[25]=m,e[26]=f,e[27]=S.isPending,e[28]=M):M=e[28];let B;e[29]!==f?(B=!f&&w.jsx("button",{type:"button",onClick:()=>c.current?.click(),className:"w-full p-6 border-2 border-dashed border-neutral-200 dark:border-neutral-700 rounded-lg hover:border-blue-500/50 hover:bg-blue-500/5 transition-colors group",children:w.jsxs("div",{className:"flex flex-col items-center gap-2",children:[w.jsx(cz,{className:"w-8 h-8 text-neutral-400 group-hover:text-blue-500 transition-colors"}),w.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 group-hover:text-blue-500 transition-colors",children:"Click to select a file"})]})}),e[29]=f,e[30]=B):B=e[30];let G;e[31]!==P||e[32]!==M||e[33]!==B?(G=w.jsxs("div",{children:[P,M,B]}),e[31]=P,e[32]=M,e[33]=B,e[34]=G):G=e[34];let ee;e[35]!==S.error?(ee=S.error&&w.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:w.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:S.error instanceof Error?S.error.message:"Failed to upload file"})}),e[35]=S.error,e[36]=ee):ee=e[36];let te;e[37]!==a||e[38]!==S.isPending?(te=w.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-lg transition-colors",disabled:S.isPending,children:"Cancel"}),e[37]=a,e[38]=S.isPending,e[39]=te):te=e[39];let V;e[40]!==m||e[41]!==f||e[42]!==S.isPending?(V=!f||!m.trim()||S.isPending,e[40]=m,e[41]=f,e[42]=S.isPending,e[43]=V):V=e[43];let $;e[44]!==S.isPending?($=S.isPending&&w.jsx(Ki,{className:"w-3.5 h-3.5 animate-spin"}),e[44]=S.isPending,e[45]=$):$=e[45];let J;e[46]!==V||e[47]!==$?(J=w.jsxs("button",{type:"submit",disabled:V,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors flex items-center gap-2",children:[$,"Upload"]}),e[46]=V,e[47]=$,e[48]=J):J=e[48];let ae;e[49]!==te||e[50]!==J?(ae=w.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[te,J]}),e[49]=te,e[50]=J,e[51]=ae):ae=e[51];let Q;e[52]!==R||e[53]!==G||e[54]!==ee||e[55]!==ae?(Q=w.jsxs("form",{onSubmit:R,className:"p-5 space-y-4",children:[G,ee,ae]}),e[52]=R,e[53]=G,e[54]=ee,e[55]=ae,e[56]=Q):Q=e[56];let I;e[57]!==Q||e[58]!==L?(I=w.jsxs("div",{className:"relative w-full max-w-lg bg-white dark:bg-neutral-900 rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[L,Q]}),e[57]=Q,e[58]=L,e[59]=I):I=e[59];let z;return e[60]!==I||e[61]!==j?(z=w.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[j,I]}),e[60]=I,e[61]=j,e[62]=z):z=e[62],z}function jQ(t){if(t===0)return"0 B";const e=["B","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,n)).toFixed(1))+" "+e[n]}const LQ={folder:ME,image:IE,document:OE,code:AE,archive:RE,file:rd};function PQ(t){const e=tn.c(95),{connection:n,container:r,path:s,onNavigate:a}=t,l=po(),[c,f]=q.useState(null),[d,m]=q.useState(!1);let p;e[0]!==s?(p=s&&!s.endsWith("/")?s+"/":s,e[0]=s,e[1]=p):p=e[1];const g=p;let y,x;e[2]!==n.id||e[3]!==r||e[4]!==g?(y=["storage-objects",n.id,r,g],x=()=>Fd(n.id,r,{prefix:g,delimiter:"/"}),e[2]=n.id,e[3]=r,e[4]=g,e[5]=y,e[6]=x):(y=e[5],x=e[6]);const S=!!n&&!!r;let E;e[7]!==y||e[8]!==x||e[9]!==S?(E={queryKey:y,queryFn:x,enabled:S},e[7]=y,e[8]=x,e[9]=S,e[10]=E):E=e[10];const{data:C,isLoading:k,error:R}=ys(E);let N;e[11]!==n.id||e[12]!==r?(N=Me=>rk(n.id,r,[Me]),e[11]=n.id,e[12]=r,e[13]=N):N=e[13];let j;e[14]!==n.id||e[15]!==r||e[16]!==l?(j=()=>{l.invalidateQueries({queryKey:["storage-objects",n.id,r]}),f(null)},e[14]=n.id,e[15]=r,e[16]=l,e[17]=j):j=e[17];let T;e[18]!==N||e[19]!==j?(T={mutationFn:N,onSuccess:j},e[18]=N,e[19]=j,e[20]=T):T=e[20];const D=lu(T);let L;e[21]!==n.id||e[22]!==r?(L=Me=>sk(n.id,r,Me),e[21]=n.id,e[22]=r,e[23]=L):L=e[23];let P;e[24]!==n.id||e[25]!==r||e[26]!==l?(P=()=>{l.invalidateQueries({queryKey:["storage-objects",n.id,r]})},e[24]=n.id,e[25]=r,e[26]=l,e[27]=P):P=e[27];let M;e[28]!==P||e[29]!==L?(M={mutationFn:L,onSuccess:P},e[28]=P,e[29]=L,e[30]=M):M=e[30];const B=lu(M);let G;e[31]!==D||e[32]!==B?(G=(Me,ge)=>{ge.stopPropagation();const je=Me.name.replace(/\/$/,"")||"/",be=Me.isFolder?`Delete folder "${je}" and all its contents?`:`Delete "${je}"?`;if(confirm(be))if(Me.isFolder){const ye=Me.key;ye==="/"||ye===""?D.mutate(ye||"/"):B.mutate(ye)}else D.mutate(Me.key)},e[31]=D,e[32]=B,e[33]=G):G=e[33];const ee=G,te=D.isPending||B.isPending;let V;e:{if(!C){let ge;e[34]===Symbol.for("react.memo_cache_sentinel")?(ge=[],e[34]=ge):ge=e[34],V=ge;break e}let Me;if(e[35]!==C.objects||e[36]!==C.prefixes){const ge=C.prefixes.map(BQ),je=C.objects.filter(FQ).map($Q);Me=[...ge,...je],e[35]=C.objects,e[36]=C.prefixes,e[37]=Me}else Me=e[37];V=Me}const $=V;let J;e[38]!==r||e[39]!==a?(J=Me=>{Me.isFolder?(a(r,Me.key),f(null)):f(Me.key)},e[38]=r,e[39]=a,e[40]=J):J=e[40];const ae=J;let Q;e[41]!==r||e[42]!==a||e[43]!==s?(Q=()=>{const Me=FL(s);a(r,Me?Me+"/":""),f(null)},e[41]=r,e[42]=a,e[43]=s,e[44]=Q):Q=e[44];const I=Q;let z;e[45]!==r?(z={label:r,path:""},e[45]=r,e[46]=z):z=e[46];let F;if(e[47]!==s||e[48]!==z){if(F=[z],s){const Me=s.split("/").filter(Boolean);let ge="";for(const je of Me)ge=ge+(je+"/"),F.push({label:je,path:ge})}e[47]=s,e[48]=z,e[49]=F}else F=e[49];const A=F,se=n.amazonS3?"S3":"Azure Blob";let ue;e[50]!==se?(ue=w.jsxs("span",{className:"text-neutral-400 dark:text-neutral-500 shrink-0",children:[se,":"]}),e[50]=se,e[51]=ue):ue=e[51];let fe;e[52]!==r||e[53]!==a||e[54]!==A?(fe=A.map((Me,ge)=>w.jsxs("span",{className:"flex items-center shrink-0",children:[ge>0&&w.jsx(u0,{className:"w-4 h-4 text-neutral-400 mx-1"}),w.jsx("button",{onClick:()=>a(r,Me.path),className:`hover:text-blue-500 transition-colors ${ge===A.length-1?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-500 dark:text-neutral-400"}`,children:Me.label})]},Me.path)),e[52]=r,e[53]=a,e[54]=A,e[55]=fe):fe=e[55];let ve;e[56]!==ue||e[57]!==fe?(ve=w.jsxs("div",{className:"flex items-center gap-1 text-sm overflow-x-auto",children:[ue,fe]}),e[56]=ue,e[57]=fe,e[58]=ve):ve=e[58];let Te;e[59]===Symbol.for("react.memo_cache_sentinel")?(Te=()=>m(!0),e[59]=Te):Te=e[59];let _e;e[60]===Symbol.for("react.memo_cache_sentinel")?(_e=w.jsx("div",{className:"ml-4 shrink-0",children:w.jsxs("button",{onClick:Te,className:"px-3 py-1.5 rounded-lg bg-blue-500 hover:bg-blue-600 text-white text-xs font-medium flex items-center gap-2 transition-colors",title:"Upload file",children:[w.jsx(zE,{className:"w-3.5 h-3.5"}),"Upload"]})}),e[60]=_e):_e=e[60];let me;e[61]!==ve?(me=w.jsx("div",{className:"px-4 py-3 border-b border-neutral-200 dark:border-white/8",children:w.jsxs("div",{className:"flex items-center justify-between",children:[ve,_e]})}),e[61]=ve,e[62]=me):me=e[62];let Ee;e[63]===Symbol.for("react.memo_cache_sentinel")?(Ee=()=>f(null),e[63]=Ee):Ee=e[63];let Oe;e[64]!==R||e[65]!==ee||e[66]!==ae||e[67]!==I||e[68]!==te||e[69]!==k||e[70]!==$||e[71]!==s||e[72]!==c?(Oe=w.jsx("div",{className:"flex-1 overflow-auto",onClick:Ee,children:k?w.jsx("div",{className:"flex items-center justify-center h-full",children:w.jsx(Ki,{className:"w-6 h-6 text-neutral-400 animate-spin"})}):R?w.jsx("div",{className:"flex items-center justify-center h-full text-red-500 text-sm",children:"Failed to load objects"}):$.length===0?w.jsx("div",{className:"flex items-center justify-center h-full text-neutral-400 dark:text-neutral-600 text-sm",children:"This folder is empty"}):w.jsx(UQ,{items:$,selectedKey:c,path:s,onItemClick:ae,onNavigateUp:I,onDeleteItem:ee,isDeleting:te})}),e[64]=R,e[65]=ee,e[66]=ae,e[67]=I,e[68]=te,e[69]=k,e[70]=$,e[71]=s,e[72]=c,e[73]=Oe):Oe=e[73];const Ze=$.length===1?"item":"items",Le=C?.isTruncated&&" (truncated)";let Ye;e[74]!==$.length||e[75]!==Ze||e[76]!==Le?(Ye=w.jsxs("div",{className:"px-4 py-2 border-t border-neutral-200 dark:border-white/8 text-xs text-neutral-400 dark:text-neutral-500",children:[$.length," ",Ze,Le]}),e[74]=$.length,e[75]=Ze,e[76]=Le,e[77]=Ye):Ye=e[77];let it;e[78]!==me||e[79]!==Oe||e[80]!==Ye?(it=w.jsxs("div",{className:"flex-1 bg-white dark:bg-[#1a1a1a]/60 border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden flex flex-col min-w-0",children:[me,Oe,Ye]}),e[78]=me,e[79]=Oe,e[80]=Ye,e[81]=it):it=e[81];let Je;e[82]!==n||e[83]!==r||e[84]!==c?(Je=c&&w.jsx("div",{className:"w-80 shrink-0",children:w.jsx(IQ,{connection:n,container:r,objectKey:c,onClose:()=>f(null)})}),e[82]=n,e[83]=r,e[84]=c,e[85]=Je):Je=e[85];let ot;e[86]!==n||e[87]!==r||e[88]!==g||e[89]!==d?(ot=d&&w.jsx(DQ,{connection:n,container:r,currentPath:g,onClose:()=>m(!1)}),e[86]=n,e[87]=r,e[88]=g,e[89]=d,e[90]=ot):ot=e[90];let ht;return e[91]!==it||e[92]!==Je||e[93]!==ot?(ht=w.jsxs("div",{className:"flex-1 flex gap-2 min-h-0",children:[it,Je,ot]}),e[91]=it,e[92]=Je,e[93]=ot,e[94]=ht):ht=e[94],ht}function $Q(t){return{key:t.key,name:t.name,isFolder:!1,size:t.size,lastModified:t.lastModified,contentType:t.contentType}}function FQ(t){return!t.isFolder}function BQ(t){return{key:t,name:gu(t),isFolder:!0,size:0,lastModified:""}}function UQ({items:t,selectedKey:e,path:n,onItemClick:r,onNavigateUp:s,onDeleteItem:a,isDeleting:l}){const[c,f]=q.useState([]),d=q.useMemo(()=>[{accessorKey:"name",header:({column:p})=>w.jsxs("button",{className:"flex items-center gap-1 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors",onClick:()=>p.toggleSorting(p.getIsSorted()==="asc"),children:["Name",p.getIsSorted()==="asc"?w.jsx(Kl,{className:"w-3.5 h-3.5"}):p.getIsSorted()==="desc"?w.jsx(Bi,{className:"w-3.5 h-3.5"}):w.jsx(If,{className:"w-3.5 h-3.5 opacity-50"})]}),cell:({row:p})=>{const g=p.original,y=g.isFolder?"folder":ak(g.key),x=LQ[y],S=e===g.key;return w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(x,{className:`w-4 h-4 ${g.isFolder?"text-yellow-500":"text-neutral-400"}`}),w.jsx("span",{className:`truncate ${S?"text-blue-600 dark:text-blue-400":"text-neutral-700 dark:text-neutral-200"}`,children:g.name})]})}},{accessorKey:"size",header:({column:p})=>w.jsxs("button",{className:"flex items-center gap-1 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors ml-auto",onClick:()=>p.toggleSorting(p.getIsSorted()==="asc"),children:["Size",p.getIsSorted()==="asc"?w.jsx(Kl,{className:"w-3.5 h-3.5"}):p.getIsSorted()==="desc"?w.jsx(Bi,{className:"w-3.5 h-3.5"}):w.jsx(If,{className:"w-3.5 h-3.5 opacity-50"})]}),cell:({row:p})=>{const g=p.original;return w.jsx("div",{className:"text-right text-neutral-500 dark:text-neutral-400",children:g.isFolder?"-":ik(g.size)})},size:100},{accessorKey:"lastModified",header:({column:p})=>w.jsxs("button",{className:"flex items-center gap-1 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors ml-auto",onClick:()=>p.toggleSorting(p.getIsSorted()==="asc"),children:["Modified",p.getIsSorted()==="asc"?w.jsx(Kl,{className:"w-3.5 h-3.5"}):p.getIsSorted()==="desc"?w.jsx(Bi,{className:"w-3.5 h-3.5"}):w.jsx(If,{className:"w-3.5 h-3.5 opacity-50"})]}),cell:({row:p})=>{const g=p.original;return w.jsx("div",{className:"text-right text-neutral-500 dark:text-neutral-400",children:g.lastModified?qQ(g.lastModified):"-"})},size:160},{id:"actions",header:"",cell:({row:p})=>{const g=p.original;return w.jsx("button",{onClick:y=>a(g,y),disabled:l,className:"p-1 rounded opacity-0 group-hover:opacity-100 hover:bg-red-100 dark:hover:bg-red-500/10 transition-all disabled:opacity-50",title:"Delete",children:w.jsx(fu,{className:"w-3.5 h-3.5 text-red-500"})})},size:40}],[e,a,l]),m=Ak({data:t,columns:d,state:{sorting:c},onSortingChange:f,getCoreRowModel:Rk(),getSortedRowModel:Tk()});return w.jsxs("table",{className:"w-full text-sm",children:[w.jsx("thead",{className:"sticky top-0 bg-neutral-50 dark:bg-[#1a1a1a] z-10",children:m.getHeaderGroups().map(p=>w.jsx("tr",{className:"border-b border-neutral-200 dark:border-white/8",children:p.headers.map(g=>w.jsx("th",{className:"px-4 py-2 text-left font-medium text-neutral-500 dark:text-neutral-400",style:{width:g.getSize()},children:g.isPlaceholder?null:hd(g.column.columnDef.header,g.getContext())},g.id))},p.id))}),w.jsxs("tbody",{children:[n&&w.jsx("tr",{className:"hover:bg-neutral-50 dark:hover:bg-white/5 cursor-pointer border-b border-neutral-100 dark:border-white/5",onClick:p=>{p.stopPropagation(),s()},children:w.jsx("td",{className:"px-4 py-2",colSpan:4,children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(HN,{className:"w-4 h-4 text-neutral-400"}),w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:".."})]})})}),m.getRowModel().rows.map(p=>{const g=e===p.original.key;return w.jsx("tr",{className:`group cursor-pointer border-b border-neutral-100 dark:border-white/5 ${g?"bg-blue-50 dark:bg-blue-500/10":"hover:bg-neutral-50 dark:hover:bg-white/5"}`,onClick:y=>{y.stopPropagation(),r(p.original)},children:p.getVisibleCells().map(y=>w.jsx("td",{className:"px-4 py-2",children:hd(y.column.columnDef.cell,y.getContext())},y.id))},p.id)})]})]})}function qQ(t){try{return new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}catch{return t}}function HQ(t){const e=tn.c(9),{onAddConnection:n}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=w.jsxs("div",{className:"mb-6",children:[w.jsx("h1",{className:"text-2xl font-semibold text-neutral-700 dark:text-neutral-300 mb-2",children:"Welcome to Granite"}),w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-500",children:"A unified interface for databases and object storage"})]}),e[0]=r):r=e[0];let s;e[1]===Symbol.for("react.memo_cache_sentinel")?(s=w.jsxs("div",{className:"p-4 rounded-lg bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/8",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/5 dark:bg-blue-500/10 flex items-center justify-center mx-auto mb-3",children:w.jsx(cu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),w.jsx("h3",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300 mb-1",children:"Database Connections"}),w.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:"PostgreSQL, MySQL, SQLite, SQL Server, and Oracle"})]}),e[1]=s):s=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=w.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[s,w.jsxs("div",{className:"p-4 rounded-lg bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/8",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/5 dark:bg-orange-500/10 flex items-center justify-center mx-auto mb-3",children:w.jsx(NE,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),w.jsx("h3",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300 mb-1",children:"Object Storage"}),w.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:"Amazon S3 and Azure Blob Storage"})]})]}),e[2]=a):a=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=w.jsx(jd,{className:"w-4 h-4"}),e[3]=l):l=e[3];let c;e[4]!==n?(c=w.jsxs("button",{onClick:n,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-neutral-100 hover:bg-neutral-200 dark:bg-white/5 dark:hover:bg-white/10 text-neutral-700 dark:text-neutral-300 text-sm font-medium transition-colors",children:[l,"Add Connection"]}),e[4]=n,e[5]=c):c=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=w.jsx("p",{className:"mt-6 text-xs text-neutral-400 dark:text-neutral-600",children:"You can have multiple connections open simultaneously"}),e[6]=f):f=e[6];let d;return e[7]!==c?(d=w.jsx("main",{className:"flex-1 flex items-center justify-center",children:w.jsxs("div",{className:"max-w-2xl px-8 text-center",children:[r,a,c,f]})}),e[7]=c,e[8]=d):d=e[8],d}const VQ=new rE;function KQ(){const t=Ji({strict:!1}),e=_u(),n=t.connectionId,r=t.database,s=t.table,a=t.container,l=t._splat||"",f=(ek(Q=>Q.from({connections:Zl}).orderBy(({connections:I})=>I.createdAt,"desc"))?.data??[]).find(Q=>Q.id===n),d=f&&Bd(f)?f:void 0,m=f&&uk(f)?f:void 0,{data:p}=ys({queryKey:["tables",n,r],queryFn:()=>d&&d.sql&&r?ok(d.id,d.sql.driver,r):[],enabled:!!d&&!!d.sql&&!!r}),{data:g}=ys({queryKey:["columns",n,r,p],queryFn:async()=>{if(!d||!d.sql||!r||!p?.length)return{};const Q={},I=p.slice(0,50);return await Promise.all(I.map(async z=>{try{Q[z]=await WL(d.id,d.sql.driver,z)}catch{Q[z]=[]}})),Q},enabled:!!d&&!!d.sql&&!!r&&!!p?.length,staleTime:300*1e3}),y=q.useMemo(()=>{if(p)return{tables:p,columns:g??{}}},[p,g]),[x,S]=q.useState(""),[E,C]=q.useState("records"),k=q.useMemo(()=>d?.sql?n5(d.sql.driver):["records","columns"],[d?.sql]),R=q.useCallback(()=>{C(null)},[]),[N,j]=q.useState(!1),T=q.useCallback(()=>j(Q=>!Q),[]),[D,L]=q.useState(!1),[P,M]=q.useState(null),B=lu({mutationFn:async Q=>{if(!d?.sql)throw new Error("No database connection selected");const I=performance.now(),z=await JL(d.id,Q),F=performance.now()-I;return{response:z,duration:F}},onSuccess:Q=>{M(Q)},onError:Q=>{M({response:{error:Q instanceof Error?Q.message:"Unknown error"},duration:0})}});q.useEffect(()=>{if(d?.sql&&s){const Q=cy(s,d.sql.driver);S(Q),B.mutate(Q),C("records")}else!s&&!a&&(S(""),M(null),C(null))},[d?.id,d?.sql,s,a]);const G=q.useCallback(async Q=>(S(Q),(await B.mutateAsync(Q)).response),[B]),ee=q.useCallback((Q,I)=>{if(!n)return;const z=I.replace(/^\/+/,"");e(z?{to:`/${n}/container/${Q}/${z}`}:{to:`/${n}/container/${Q}`})},[e,n]),te=q.useCallback(Q=>{if(!d?.sql||!s)return;const I=r5(d.sql.driver,s,Q);I&&(S(I),B.mutate(I),C(Q))},[d,s,B]),V=Q=>Q===null?"NULL":typeof Q=="number"?String(Q):typeof Q=="boolean"?Q?"TRUE":"FALSE":`'${String(Q).replace(/'/g,"''")}'`,$=q.useCallback(async(Q,I,z)=>{if(!d||!s)return;const F=P?.response?.columns?.[0]??"id",A=Q[F];if(A===void 0){console.error("Cannot update: no primary key found");return}const se=`UPDATE ${s} SET ${I} = ${V(z)} WHERE ${F} = ${V(A)}`;try{await Yl(d.id,se)}catch(ue){console.error("Update failed:",ue)}},[d,s,P?.response?.columns]),J=q.useCallback(async Q=>{if(!d?.sql||!s)return;const I=P?.response?.columns?.[0]??"id",z=Q[I];if(z===void 0){console.error("Cannot delete: no primary key found");return}const F=`DELETE FROM ${s} WHERE ${I} = ${V(z)}`;try{await Yl(d.id,F),B.mutate(cy(s,d.sql.driver))}catch(A){console.error("Delete failed:",A)}},[d,s,P?.response?.columns,B]),ae=q.useMemo(()=>({setQuery:S,executeQuery:G,runQuerySilent:async Q=>{if(!d)throw new Error("No database connection selected");return Tu(d.id,Q)},runStatementSilent:async Q=>{if(!d)throw new Error("No database connection selected");return Yl(d.id,Q)}}),[G,d]);return w.jsxs("div",{className:"h-screen flex bg-neutral-50 dark:bg-[#0d0d0d] py-2 pr-2 pl-1 gap-2",children:[w.jsx(o5,{showAddModal:D,onAddModalClose:()=>L(!1)}),d&&w.jsxs(w.Fragment,{children:[w.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden gap-2 min-w-0",children:[w.jsx("div",{className:"shrink-0",children:w.jsx(_P,{connection:d??null,selectedTable:s??null,onExecute:G,isLoading:B.isPending,schema:y,value:x,onChange:S,onToggleAI:Iy().ai?.model?T:void 0,aiPanelOpen:N,supportedViews:k,onSelectView:te,activeView:E,onExpandEditor:R})}),w.jsx("div",{className:"flex-1 min-h-0",children:w.jsx(g6,{response:P?.response??null,duration:P?.duration??0,isLoading:B.isPending,tableName:s,onUpdateCell:$,onDeleteRow:J})})]}),N&&Iy().ai?.model&&w.jsx(RQ,{isOpen:N,onClose:T,connection:d??null,database:r??null,table:s??null,currentQuery:x,queryResult:P?.response??null,schema:y,setters:ae})]}),m&&a&&w.jsx(PQ,{connection:m,container:a,path:l,onNavigate:ee}),!f&&w.jsx(HQ,{onAddConnection:()=>L(!0)})]})}function GQ(){const t=tn.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=w.jsx(DM,{client:VQ,children:w.jsx(KQ,{})}),t[0]=e):e=t[0],e}EE.options.defaultComponent=GQ;function QQ(){const t=tn.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=w.jsx(ON,{router:EE}),t[0]=e):e=t[0],e}cM.createRoot(document.getElementById("root")).render(w.jsx(q.StrictMode,{children:w.jsx(QQ,{})}));
