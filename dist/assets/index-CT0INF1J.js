(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ly(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var um={exports:{}},ml={};var h_;function NM(){if(h_)return ml;h_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var c in i)c!=="key"&&(o[c]=i[c])}else o=i;return i=o.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:o}}return ml.Fragment=t,ml.jsx=n,ml.jsxs=n,ml}var p_;function DM(){return p_||(p_=1,um.exports=NM()),um.exports}var O=DM(),cm={exports:{}},Be={};var m_;function zM(){if(m_)return Be;m_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(D){return D===null||typeof D!="object"?null:(D=g&&D[g]||D["@@iterator"],typeof D=="function"?D:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,C={};function x(D,V,T){this.props=D,this.context=V,this.refs=C,this.updater=T||S}x.prototype.isReactComponent={},x.prototype.setState=function(D,V){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,V,"setState")},x.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function E(){}E.prototype=x.prototype;function k(D,V,T){this.props=D,this.context=V,this.refs=C,this.updater=T||S}var I=k.prototype=new E;I.constructor=k,w(I,x.prototype),I.isPureReactComponent=!0;var P=Array.isArray;function R(){}var M={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function j(D,V,T){var ae=T.ref;return{$$typeof:e,type:D,key:V,ref:ae!==void 0?ae:null,props:T}}function N(D,V){return j(D.type,V,D.props)}function U(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function Z(D){var V={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(T){return V[T]})}var ee=/\/+/g;function re(D,V){return typeof D=="object"&&D!==null&&D.key!=null?Z(""+D.key):V.toString(36)}function K(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(R,R):(D.status="pending",D.then(function(V){D.status==="pending"&&(D.status="fulfilled",D.value=V)},function(V){D.status==="pending"&&(D.status="rejected",D.reason=V)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function $(D,V,T,ae,ce){var he=typeof D;(he==="undefined"||he==="boolean")&&(D=null);var ye=!1;if(D===null)ye=!0;else switch(he){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(D.$$typeof){case e:case t:ye=!0;break;case m:return ye=D._init,$(ye(D._payload),V,T,ae,ce)}}if(ye)return ce=ce(D),ye=ae===""?"."+re(D,0):ae,P(ce)?(T="",ye!=null&&(T=ye.replace(ee,"$&/")+"/"),$(ce,V,T,"",function(qe){return qe})):ce!=null&&(U(ce)&&(ce=N(ce,T+(ce.key==null||D&&D.key===ce.key?"":(""+ce.key).replace(ee,"$&/")+"/")+ye)),V.push(ce)),1;ye=0;var Re=ae===""?".":ae+":";if(P(D))for(var we=0;we<D.length;we++)ae=D[we],he=Re+re(ae,we),ye+=$(ae,V,T,he,ce);else if(we=y(D),typeof we=="function")for(D=we.call(D),we=0;!(ae=D.next()).done;)ae=ae.value,he=Re+re(ae,we++),ye+=$(ae,V,T,he,ce);else if(he==="object"){if(typeof D.then=="function")return $(K(D),V,T,ae,ce);throw V=String(D),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ye}function te(D,V,T){if(D==null)return D;var ae=[],ce=0;return $(D,ae,"","",function(he){return V.call(T,he,ce++)}),ae}function de(D){if(D._status===-1){var V=D._result;V=V(),V.then(function(T){(D._status===0||D._status===-1)&&(D._status=1,D._result=T)},function(T){(D._status===0||D._status===-1)&&(D._status=2,D._result=T)}),D._status===-1&&(D._status=0,D._result=V)}if(D._status===1)return D._result.default;throw D._result}var se=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},z={map:te,forEach:function(D,V,T){te(D,function(){V.apply(this,arguments)},T)},count:function(D){var V=0;return te(D,function(){V++}),V},toArray:function(D){return te(D,function(V){return V})||[]},only:function(D){if(!U(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Be.Activity=p,Be.Children=z,Be.Component=x,Be.Fragment=n,Be.Profiler=i,Be.PureComponent=k,Be.StrictMode=r,Be.Suspense=f,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Be.__COMPILER_RUNTIME={__proto__:null,c:function(D){return M.H.useMemoCache(D)}},Be.cache=function(D){return function(){return D.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(D,V,T){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ae=w({},D.props),ce=D.key;if(V!=null)for(he in V.key!==void 0&&(ce=""+V.key),V)!L.call(V,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&V.ref===void 0||(ae[he]=V[he]);var he=arguments.length-2;if(he===1)ae.children=T;else if(1<he){for(var ye=Array(he),Re=0;Re<he;Re++)ye[Re]=arguments[Re+2];ae.children=ye}return j(D.type,ce,ae)},Be.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},Be.createElement=function(D,V,T){var ae,ce={},he=null;if(V!=null)for(ae in V.key!==void 0&&(he=""+V.key),V)L.call(V,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ce[ae]=V[ae]);var ye=arguments.length-2;if(ye===1)ce.children=T;else if(1<ye){for(var Re=Array(ye),we=0;we<ye;we++)Re[we]=arguments[we+2];ce.children=Re}if(D&&D.defaultProps)for(ae in ye=D.defaultProps,ye)ce[ae]===void 0&&(ce[ae]=ye[ae]);return j(D,he,ce)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(D){return{$$typeof:c,render:D}},Be.isValidElement=U,Be.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:de}},Be.memo=function(D,V){return{$$typeof:d,type:D,compare:V===void 0?null:V}},Be.startTransition=function(D){var V=M.T,T={};M.T=T;try{var ae=D(),ce=M.S;ce!==null&&ce(T,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(R,se)}catch(he){se(he)}finally{V!==null&&T.types!==null&&(V.types=T.types),M.T=V}},Be.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Be.use=function(D){return M.H.use(D)},Be.useActionState=function(D,V,T){return M.H.useActionState(D,V,T)},Be.useCallback=function(D,V){return M.H.useCallback(D,V)},Be.useContext=function(D){return M.H.useContext(D)},Be.useDebugValue=function(){},Be.useDeferredValue=function(D,V){return M.H.useDeferredValue(D,V)},Be.useEffect=function(D,V){return M.H.useEffect(D,V)},Be.useEffectEvent=function(D){return M.H.useEffectEvent(D)},Be.useId=function(){return M.H.useId()},Be.useImperativeHandle=function(D,V,T){return M.H.useImperativeHandle(D,V,T)},Be.useInsertionEffect=function(D,V){return M.H.useInsertionEffect(D,V)},Be.useLayoutEffect=function(D,V){return M.H.useLayoutEffect(D,V)},Be.useMemo=function(D,V){return M.H.useMemo(D,V)},Be.useOptimistic=function(D,V){return M.H.useOptimistic(D,V)},Be.useReducer=function(D,V,T){return M.H.useReducer(D,V,T)},Be.useRef=function(D){return M.H.useRef(D)},Be.useState=function(D){return M.H.useState(D)},Be.useSyncExternalStore=function(D,V,T){return M.H.useSyncExternalStore(D,V,T)},Be.useTransition=function(){return M.H.useTransition()},Be.version="19.2.3",Be}var g_;function ma(){return g_||(g_=1,cm.exports=zM()),cm.exports}var H=ma();const Nr=Ly(H);var fm={exports:{}},gl={},dm={exports:{}},hm={};var y_;function LM(){return y_||(y_=1,(function(e){function t($,te){var de=$.length;$.push(te);e:for(;0<de;){var se=de-1>>>1,z=$[se];if(0<i(z,te))$[se]=te,$[de]=z,de=se;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var te=$[0],de=$.pop();if(de!==te){$[0]=de;e:for(var se=0,z=$.length,D=z>>>1;se<D;){var V=2*(se+1)-1,T=$[V],ae=V+1,ce=$[ae];if(0>i(T,de))ae<z&&0>i(ce,T)?($[se]=ce,$[ae]=de,se=ae):($[se]=T,$[V]=de,se=V);else if(ae<z&&0>i(ce,de))$[se]=ce,$[ae]=de,se=ae;else break e}}return te}function i($,te){var de=$.sortIndex-te.sortIndex;return de!==0?de:$.id-te.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var f=[],d=[],m=1,p=null,g=3,y=!1,S=!1,w=!1,C=!1,x=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function I($){for(var te=n(d);te!==null;){if(te.callback===null)r(d);else if(te.startTime<=$)r(d),te.sortIndex=te.expirationTime,t(f,te);else break;te=n(d)}}function P($){if(w=!1,I($),!S)if(n(f)!==null)S=!0,R||(R=!0,Z());else{var te=n(d);te!==null&&K(P,te.startTime-$)}}var R=!1,M=-1,L=5,j=-1;function N(){return C?!0:!(e.unstable_now()-j<L)}function U(){if(C=!1,R){var $=e.unstable_now();j=$;var te=!0;try{e:{S=!1,w&&(w=!1,E(M),M=-1),y=!0;var de=g;try{t:{for(I($),p=n(f);p!==null&&!(p.expirationTime>$&&N());){var se=p.callback;if(typeof se=="function"){p.callback=null,g=p.priorityLevel;var z=se(p.expirationTime<=$);if($=e.unstable_now(),typeof z=="function"){p.callback=z,I($),te=!0;break t}p===n(f)&&r(f),I($)}else r(f);p=n(f)}if(p!==null)te=!0;else{var D=n(d);D!==null&&K(P,D.startTime-$),te=!1}}break e}finally{p=null,g=de,y=!1}te=void 0}}finally{te?Z():R=!1}}}var Z;if(typeof k=="function")Z=function(){k(U)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,re=ee.port2;ee.port1.onmessage=U,Z=function(){re.postMessage(null)}}else Z=function(){x(U,0)};function K($,te){M=x(function(){$(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function($){switch(g){case 1:case 2:case 3:var te=3;break;default:te=g}var de=g;g=te;try{return $()}finally{g=de}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function($,te){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var de=g;g=$;try{return te()}finally{g=de}},e.unstable_scheduleCallback=function($,te,de){var se=e.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?se+de:se):de=se,$){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=de+z,$={id:m++,callback:te,priorityLevel:$,startTime:de,expirationTime:z,sortIndex:-1},de>se?($.sortIndex=de,t(d,$),n(f)===null&&$===n(d)&&(w?(E(M),M=-1):w=!0,K(P,de-se))):($.sortIndex=z,t(f,$),S||y||(S=!0,R||(R=!0,Z()))),$},e.unstable_shouldYield=N,e.unstable_wrapCallback=function($){var te=g;return function(){var de=g;g=te;try{return $.apply(this,arguments)}finally{g=de}}}})(hm)),hm}var v_;function PM(){return v_||(v_=1,dm.exports=LM()),dm.exports}var pm={exports:{}},mn={};var b_;function jM(){if(b_)return mn;b_=1;var e=ma();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(f,d,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:f,containerInfo:d,implementation:m}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,mn.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return o(f,d,null,m)},mn.flushSync=function(f){var d=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=d,r.p=m,r.d.f()}},mn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},mn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},mn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,p=c(m,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):m==="script"&&r.d.X(f,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},mn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},mn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,p=c(m,d.crossOrigin);r.d.L(f,m,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},mn.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=c(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},mn.requestFormReset=function(f){r.d.r(f)},mn.unstable_batchedUpdates=function(f,d){return f(d)},mn.useFormState=function(f,d,m){return l.H.useFormState(f,d,m)},mn.useFormStatus=function(){return l.H.useHostTransitionStatus()},mn.version="19.2.3",mn}var S_;function P1(){if(S_)return pm.exports;S_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),pm.exports=jM(),pm.exports}var w_;function FM(){if(w_)return gl;w_=1;var e=PM(),t=ma(),n=P1();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(r(188))}function d(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var u=s,h=a;;){var v=u.return;if(v===null)break;var b=v.alternate;if(b===null){if(h=v.return,h!==null){u=h;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===u)return f(v),s;if(b===h)return f(v),a;b=b.sibling}throw Error(r(188))}if(u.return!==h.return)u=v,h=b;else{for(var _=!1,A=v.child;A;){if(A===u){_=!0,u=v,h=b;break}if(A===h){_=!0,h=v,u=b;break}A=A.sibling}if(!_){for(A=b.child;A;){if(A===u){_=!0,u=b,h=v;break}if(A===h){_=!0,h=b,u=v;break}A=A.sibling}if(!_)throw Error(r(189))}}if(u.alternate!==h)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?s:a}function m(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=m(s),a!==null)return a;s=s.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),k=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function Z(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var ee=Symbol.for("react.client.reference");function re(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ee?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case x:return"Profiler";case C:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList";case j:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case k:return s.displayName||"Context";case E:return(s._context.displayName||"Context")+".Consumer";case I:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return a=s.displayName||null,a!==null?a:re(s.type)||"Memo";case L:a=s._payload,s=s._init;try{return re(s(a))}catch{}}return null}var K=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},se=[],z=-1;function D(s){return{current:s}}function V(s){0>z||(s.current=se[z],se[z]=null,z--)}function T(s,a){z++,se[z]=s.current,s.current=a}var ae=D(null),ce=D(null),he=D(null),ye=D(null);function Re(s,a){switch(T(he,a),T(ce,s),T(ae,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Lw(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Lw(a),s=Pw(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}V(ae),T(ae,s)}function we(){V(ae),V(ce),V(he)}function qe(s){s.memoizedState!==null&&T(ye,s);var a=ae.current,u=Pw(a,s.type);a!==u&&(T(ce,s),T(ae,u))}function Je(s){ce.current===s&&(V(ae),V(ce)),ye.current===s&&(V(ye),fl._currentValue=de)}var Ue,ot;function Qe(s){if(Ue===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Ue=a&&a[1]||"",ot=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ue+s+ot}var Xe=!1;function ct(s,a){if(!s||Xe)return"";Xe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(W){var J=W}Reflect.construct(s,[],oe)}else{try{oe.call()}catch(W){J=W}s.call(oe.prototype)}}else{try{throw Error()}catch(W){J=W}(oe=s())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(W){if(W&&J&&typeof W.stack=="string")return[W.stack,J.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),_=b[0],A=b[1];if(_&&A){var F=_.split(`
`),Q=A.split(`
`);for(v=h=0;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;for(;v<Q.length&&!Q[v].includes("DetermineComponentFrameRoot");)v++;if(h===F.length||v===Q.length)for(h=F.length-1,v=Q.length-1;1<=h&&0<=v&&F[h]!==Q[v];)v--;for(;1<=h&&0<=v;h--,v--)if(F[h]!==Q[v]){if(h!==1||v!==1)do if(h--,v--,0>v||F[h]!==Q[v]){var ne=`
`+F[h].replace(" at new "," at ");return s.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",s.displayName)),ne}while(1<=h&&0<=v);break}}}finally{Xe=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Qe(u):""}function je(s,a){switch(s.tag){case 26:case 27:case 5:return Qe(s.type);case 16:return Qe("Lazy");case 13:return s.child!==a&&a!==null?Qe("Suspense Fallback"):Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 15:return ct(s.type,!1);case 11:return ct(s.type.render,!1);case 1:return ct(s.type,!0);case 31:return Qe("Activity");default:return""}}function Ve(s){try{var a="",u=null;do a+=je(s,u),u=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var gt=Object.prototype.hasOwnProperty,ft=e.unstable_scheduleCallback,ge=e.unstable_cancelCallback,Fe=e.unstable_shouldYield,be=e.unstable_requestPaint,me=e.unstable_now,De=e.unstable_getCurrentPriorityLevel,X=e.unstable_ImmediatePriority,ue=e.unstable_UserBlockingPriority,Se=e.unstable_NormalPriority,_e=e.unstable_LowPriority,ve=e.unstable_IdlePriority,Me=e.log,dt=e.unstable_setDisableYieldValue,We=null,Ze=null;function zt(s){if(typeof Me=="function"&&dt(s),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(We,s)}catch{}}var lt=Math.clz32?Math.clz32:xt,qn=Math.log,ke=Math.LN2;function xt(s){return s>>>=0,s===0?32:31-(qn(s)/ke|0)|0}var Sn=256,Lr=262144,Jr=4194304;function lr(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ms(s,a,u){var h=s.pendingLanes;if(h===0)return 0;var v=0,b=s.suspendedLanes,_=s.pingedLanes;s=s.warmLanes;var A=h&134217727;return A!==0?(h=A&~b,h!==0?v=lr(h):(_&=A,_!==0?v=lr(_):u||(u=A&~s,u!==0&&(v=lr(u))))):(A=h&~b,A!==0?v=lr(A):_!==0?v=lr(_):u||(u=h&~s,u!==0&&(v=lr(u)))),v===0?0:a!==0&&a!==v&&(a&b)===0&&(b=v&-v,u=a&-a,b>=u||b===32&&(u&4194048)!==0)?a:v}function gs(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function gv(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yv(){var s=Jr;return Jr<<=1,(Jr&62914560)===0&&(Jr=4194304),s}function Jd(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Ea(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function wT(s,a,u,h,v,b){var _=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var A=s.entanglements,F=s.expirationTimes,Q=s.hiddenUpdates;for(u=_&~u;0<u;){var ne=31-lt(u),oe=1<<ne;A[ne]=0,F[ne]=-1;var J=Q[ne];if(J!==null)for(Q[ne]=null,ne=0;ne<J.length;ne++){var W=J[ne];W!==null&&(W.lane&=-536870913)}u&=~oe}h!==0&&vv(s,h,0),b!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=b&~(_&~a))}function vv(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-lt(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|u&261930}function bv(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var h=31-lt(u),v=1<<h;v&a|s[h]&a&&(s[h]|=a),u&=~v}}function Sv(s,a){var u=a&-a;return u=(u&42)!==0?1:Xd(u),(u&(s.suspendedLanes|a))!==0?0:u}function Xd(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Wd(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function wv(){var s=te.p;return s!==0?s:(s=window.event,s===void 0?32:o_(s.type))}function _v(s,a){var u=te.p;try{return te.p=s,a()}finally{te.p=u}}var Ci=Math.random().toString(36).slice(2),sn="__reactFiber$"+Ci,Tn="__reactProps$"+Ci,ro="__reactContainer$"+Ci,eh="__reactEvents$"+Ci,_T="__reactListeners$"+Ci,xT="__reactHandles$"+Ci,xv="__reactResources$"+Ci,Ra="__reactMarker$"+Ci;function th(s){delete s[sn],delete s[Tn],delete s[eh],delete s[_T],delete s[xT]}function io(s){var a=s[sn];if(a)return a;for(var u=s.parentNode;u;){if(a=u[ro]||u[sn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=Hw(s);s!==null;){if(u=s[sn])return u;s=Hw(s)}return a}s=u,u=s.parentNode}return null}function so(s){if(s=s[sn]||s[ro]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function ka(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function oo(s){var a=s[xv];return a||(a=s[xv]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Wt(s){s[Ra]=!0}var Cv=new Set,Ev={};function ys(s,a){ao(s,a),ao(s+"Capture",a)}function ao(s,a){for(Ev[s]=a,s=0;s<a.length;s++)Cv.add(a[s])}var CT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rv={},kv={};function ET(s){return gt.call(kv,s)?!0:gt.call(Rv,s)?!1:CT.test(s)?kv[s]=!0:(Rv[s]=!0,!1)}function Au(s,a,u){if(ET(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function Tu(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function Xr(s,a,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+h)}}function ur(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Av(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function RT(s,a,u){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,b=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return v.call(this)},set:function(_){u=""+_,b.call(this,_)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function nh(s){if(!s._valueTracker){var a=Av(s)?"checked":"value";s._valueTracker=RT(s,a,""+s[a])}}function Tv(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return s&&(h=Av(s)?s.checked?"true":"false":s.value),s=h,s!==u?(a.setValue(s),!0):!1}function Ou(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var kT=/[\n"\\]/g;function cr(s){return s.replace(kT,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function rh(s,a,u,h,v,b,_,A){s.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?s.type=_:s.removeAttribute("type"),a!=null?_==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+ur(a)):s.value!==""+ur(a)&&(s.value=""+ur(a)):_!=="submit"&&_!=="reset"||s.removeAttribute("value"),a!=null?ih(s,_,ur(a)):u!=null?ih(s,_,ur(u)):h!=null&&s.removeAttribute("value"),v==null&&b!=null&&(s.defaultChecked=!!b),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.name=""+ur(A):s.removeAttribute("name")}function Ov(s,a,u,h,v,b,_,A){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),a!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){nh(s);return}u=u!=null?""+ur(u):"",a=a!=null?""+ur(a):u,A||a===s.value||(s.value=a),s.defaultValue=a}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=A?s.checked:!!h,s.defaultChecked=!!h,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.name=_),nh(s)}function ih(s,a,u){a==="number"&&Ou(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function lo(s,a,u,h){if(s=s.options,a){a={};for(var v=0;v<u.length;v++)a["$"+u[v]]=!0;for(u=0;u<s.length;u++)v=a.hasOwnProperty("$"+s[u].value),s[u].selected!==v&&(s[u].selected=v),v&&h&&(s[u].defaultSelected=!0)}else{for(u=""+ur(u),a=null,v=0;v<s.length;v++){if(s[v].value===u){s[v].selected=!0,h&&(s[v].defaultSelected=!0);return}a!==null||s[v].disabled||(a=s[v])}a!==null&&(a.selected=!0)}}function Mv(s,a,u){if(a!=null&&(a=""+ur(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+ur(u):""}function Iv(s,a,u,h){if(a==null){if(h!=null){if(u!=null)throw Error(r(92));if(K(h)){if(1<h.length)throw Error(r(93));h=h[0]}u=h}u==null&&(u=""),a=u}u=ur(a),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h),nh(s)}function uo(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var AT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nv(s,a,u){var h=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,u):typeof u!="number"||u===0||AT.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function Dv(s,a,u){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var v in a)h=a[v],a.hasOwnProperty(v)&&u[v]!==h&&Nv(s,v,h)}else for(var b in a)a.hasOwnProperty(b)&&Nv(s,b,a[b])}function sh(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var TT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),OT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mu(s){return OT.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Wr(){}var oh=null;function ah(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var co=null,fo=null;function zv(s){var a=so(s);if(a&&(s=a.stateNode)){var u=s[Tn]||null;e:switch(s=a.stateNode,a.type){case"input":if(rh(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+cr(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==s&&h.form===s.form){var v=h[Tn]||null;if(!v)throw Error(r(90));rh(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<u.length;a++)h=u[a],h.form===s.form&&Tv(h)}break e;case"textarea":Mv(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&lo(s,!!u.multiple,a,!1)}}}var lh=!1;function Lv(s,a,u){if(lh)return s(a,u);lh=!0;try{var h=s(a);return h}finally{if(lh=!1,(co!==null||fo!==null)&&(vc(),co&&(a=co,s=fo,fo=co=null,zv(a),s)))for(a=0;a<s.length;a++)zv(s[a])}}function Aa(s,a){var u=s.stateNode;if(u===null)return null;var h=u[Tn]||null;if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(r(231,a,typeof u));return u}var ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uh=!1;if(ei)try{var Ta={};Object.defineProperty(Ta,"passive",{get:function(){uh=!0}}),window.addEventListener("test",Ta,Ta),window.removeEventListener("test",Ta,Ta)}catch{uh=!1}var Ei=null,ch=null,Iu=null;function Pv(){if(Iu)return Iu;var s,a=ch,u=a.length,h,v="value"in Ei?Ei.value:Ei.textContent,b=v.length;for(s=0;s<u&&a[s]===v[s];s++);var _=u-s;for(h=1;h<=_&&a[u-h]===v[b-h];h++);return Iu=v.slice(s,1<h?1-h:void 0)}function Nu(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Du(){return!0}function jv(){return!1}function On(s){function a(u,h,v,b,_){this._reactName=u,this._targetInst=v,this.type=h,this.nativeEvent=b,this.target=_,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(u=s[A],this[A]=u?u(b):b[A]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Du:jv,this.isPropagationStopped=jv,this}return p(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Du)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Du)},persist:function(){},isPersistent:Du}),a}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zu=On(vs),Oa=p({},vs,{view:0,detail:0}),MT=On(Oa),fh,dh,Ma,Lu=p({},Oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ph,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ma&&(Ma&&s.type==="mousemove"?(fh=s.screenX-Ma.screenX,dh=s.screenY-Ma.screenY):dh=fh=0,Ma=s),fh)},movementY:function(s){return"movementY"in s?s.movementY:dh}}),Fv=On(Lu),IT=p({},Lu,{dataTransfer:0}),NT=On(IT),DT=p({},Oa,{relatedTarget:0}),hh=On(DT),zT=p({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),LT=On(zT),PT=p({},vs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),jT=On(PT),FT=p({},vs,{data:0}),$v=On(FT),$T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qT(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=UT[s])?!!a[s]:!1}function ph(){return qT}var HT=p({},Oa,{key:function(s){if(s.key){var a=$T[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Nu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?BT[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ph,charCode:function(s){return s.type==="keypress"?Nu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Nu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),VT=On(HT),KT=p({},Lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bv=On(KT),GT=p({},Oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ph}),QT=On(GT),ZT=p({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),YT=On(ZT),JT=p({},Lu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),XT=On(JT),WT=p({},vs,{newState:0,oldState:0}),eO=On(WT),tO=[9,13,27,32],mh=ei&&"CompositionEvent"in window,Ia=null;ei&&"documentMode"in document&&(Ia=document.documentMode);var nO=ei&&"TextEvent"in window&&!Ia,Uv=ei&&(!mh||Ia&&8<Ia&&11>=Ia),qv=" ",Hv=!1;function Vv(s,a){switch(s){case"keyup":return tO.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ho=!1;function rO(s,a){switch(s){case"compositionend":return Kv(a);case"keypress":return a.which!==32?null:(Hv=!0,qv);case"textInput":return s=a.data,s===qv&&Hv?null:s;default:return null}}function iO(s,a){if(ho)return s==="compositionend"||!mh&&Vv(s,a)?(s=Pv(),Iu=ch=Ei=null,ho=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Uv&&a.locale!=="ko"?null:a.data;default:return null}}var sO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gv(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!sO[s.type]:a==="textarea"}function Qv(s,a,u,h){co?fo?fo.push(h):fo=[h]:co=h,a=Ec(a,"onChange"),0<a.length&&(u=new zu("onChange","change",null,u,h),s.push({event:u,listeners:a}))}var Na=null,Da=null;function oO(s){Ow(s,0)}function Pu(s){var a=ka(s);if(Tv(a))return s}function Zv(s,a){if(s==="change")return a}var Yv=!1;if(ei){var gh;if(ei){var yh="oninput"in document;if(!yh){var Jv=document.createElement("div");Jv.setAttribute("oninput","return;"),yh=typeof Jv.oninput=="function"}gh=yh}else gh=!1;Yv=gh&&(!document.documentMode||9<document.documentMode)}function Xv(){Na&&(Na.detachEvent("onpropertychange",Wv),Da=Na=null)}function Wv(s){if(s.propertyName==="value"&&Pu(Da)){var a=[];Qv(a,Da,s,ah(s)),Lv(oO,a)}}function aO(s,a,u){s==="focusin"?(Xv(),Na=a,Da=u,Na.attachEvent("onpropertychange",Wv)):s==="focusout"&&Xv()}function lO(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Pu(Da)}function uO(s,a){if(s==="click")return Pu(a)}function cO(s,a){if(s==="input"||s==="change")return Pu(a)}function fO(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Hn=typeof Object.is=="function"?Object.is:fO;function za(s,a){if(Hn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var v=u[h];if(!gt.call(a,v)||!Hn(s[v],a[v]))return!1}return!0}function eb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function tb(s,a){var u=eb(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=a&&h>=a)return{node:u,offset:a-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=eb(u)}}function nb(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?nb(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function rb(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Ou(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=Ou(s.document)}return a}function vh(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var dO=ei&&"documentMode"in document&&11>=document.documentMode,po=null,bh=null,La=null,Sh=!1;function ib(s,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Sh||po==null||po!==Ou(h)||(h=po,"selectionStart"in h&&vh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),La&&za(La,h)||(La=h,h=Ec(bh,"onSelect"),0<h.length&&(a=new zu("onSelect","select",null,a,u),s.push({event:a,listeners:h}),a.target=po)))}function bs(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var mo={animationend:bs("Animation","AnimationEnd"),animationiteration:bs("Animation","AnimationIteration"),animationstart:bs("Animation","AnimationStart"),transitionrun:bs("Transition","TransitionRun"),transitionstart:bs("Transition","TransitionStart"),transitioncancel:bs("Transition","TransitionCancel"),transitionend:bs("Transition","TransitionEnd")},wh={},sb={};ei&&(sb=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function Ss(s){if(wh[s])return wh[s];if(!mo[s])return s;var a=mo[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in sb)return wh[s]=a[u];return s}var ob=Ss("animationend"),ab=Ss("animationiteration"),lb=Ss("animationstart"),hO=Ss("transitionrun"),pO=Ss("transitionstart"),mO=Ss("transitioncancel"),ub=Ss("transitionend"),cb=new Map,_h="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_h.push("scrollEnd");function kr(s,a){cb.set(s,a),ys(a,[s])}var ju=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},fr=[],go=0,xh=0;function Fu(){for(var s=go,a=xh=go=0;a<s;){var u=fr[a];fr[a++]=null;var h=fr[a];fr[a++]=null;var v=fr[a];fr[a++]=null;var b=fr[a];if(fr[a++]=null,h!==null&&v!==null){var _=h.pending;_===null?v.next=v:(v.next=_.next,_.next=v),h.pending=v}b!==0&&fb(u,v,b)}}function $u(s,a,u,h){fr[go++]=s,fr[go++]=a,fr[go++]=u,fr[go++]=h,xh|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Ch(s,a,u,h){return $u(s,a,u,h),Bu(s)}function ws(s,a){return $u(s,null,null,a),Bu(s)}function fb(s,a,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var v=!1,b=s.return;b!==null;)b.childLanes|=u,h=b.alternate,h!==null&&(h.childLanes|=u),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(v=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,v&&a!==null&&(v=31-lt(u),s=b.hiddenUpdates,h=s[v],h===null?s[v]=[a]:h.push(a),a.lane=u|536870912),b):null}function Bu(s){if(50<il)throw il=0,Np=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var yo={};function gO(s,a,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(s,a,u,h){return new gO(s,a,u,h)}function Eh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ti(s,a){var u=s.alternate;return u===null?(u=Vn(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function db(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Uu(s,a,u,h,v,b){var _=0;if(h=s,typeof s=="function")Eh(s)&&(_=1);else if(typeof s=="string")_=wM(s,u,ae.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case j:return s=Vn(31,u,a,v),s.elementType=j,s.lanes=b,s;case w:return _s(u.children,v,b,a);case C:_=8,v|=24;break;case x:return s=Vn(12,u,a,v|2),s.elementType=x,s.lanes=b,s;case P:return s=Vn(13,u,a,v),s.elementType=P,s.lanes=b,s;case R:return s=Vn(19,u,a,v),s.elementType=R,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:_=10;break e;case E:_=9;break e;case I:_=11;break e;case M:_=14;break e;case L:_=16,h=null;break e}_=29,u=Error(r(130,s===null?"null":typeof s,"")),h=null}return a=Vn(_,u,a,v),a.elementType=s,a.type=h,a.lanes=b,a}function _s(s,a,u,h){return s=Vn(7,s,h,a),s.lanes=u,s}function Rh(s,a,u){return s=Vn(6,s,null,a),s.lanes=u,s}function hb(s){var a=Vn(18,null,null,0);return a.stateNode=s,a}function kh(s,a,u){return a=Vn(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var pb=new WeakMap;function dr(s,a){if(typeof s=="object"&&s!==null){var u=pb.get(s);return u!==void 0?u:(a={value:s,source:a,stack:Ve(a)},pb.set(s,a),a)}return{value:s,source:a,stack:Ve(a)}}var vo=[],bo=0,qu=null,Pa=0,hr=[],pr=0,Ri=null,Pr=1,jr="";function ni(s,a){vo[bo++]=Pa,vo[bo++]=qu,qu=s,Pa=a}function mb(s,a,u){hr[pr++]=Pr,hr[pr++]=jr,hr[pr++]=Ri,Ri=s;var h=Pr;s=jr;var v=32-lt(h)-1;h&=~(1<<v),u+=1;var b=32-lt(a)+v;if(30<b){var _=v-v%5;b=(h&(1<<_)-1).toString(32),h>>=_,v-=_,Pr=1<<32-lt(a)+v|u<<v|h,jr=b+s}else Pr=1<<b|u<<v|h,jr=s}function Ah(s){s.return!==null&&(ni(s,1),mb(s,1,0))}function Th(s){for(;s===qu;)qu=vo[--bo],vo[bo]=null,Pa=vo[--bo],vo[bo]=null;for(;s===Ri;)Ri=hr[--pr],hr[pr]=null,jr=hr[--pr],hr[pr]=null,Pr=hr[--pr],hr[pr]=null}function gb(s,a){hr[pr++]=Pr,hr[pr++]=jr,hr[pr++]=Ri,Pr=a.id,jr=a.overflow,Ri=s}var on=null,kt=null,at=!1,ki=null,mr=!1,Oh=Error(r(519));function Ai(s){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ja(dr(a,s)),Oh}function yb(s){var a=s.stateNode,u=s.type,h=s.memoizedProps;switch(a[sn]=s,a[Tn]=h,u){case"dialog":tt("cancel",a),tt("close",a);break;case"iframe":case"object":case"embed":tt("load",a);break;case"video":case"audio":for(u=0;u<ol.length;u++)tt(ol[u],a);break;case"source":tt("error",a);break;case"img":case"image":case"link":tt("error",a),tt("load",a);break;case"details":tt("toggle",a);break;case"input":tt("invalid",a),Ov(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":tt("invalid",a);break;case"textarea":tt("invalid",a),Iv(a,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||h.suppressHydrationWarning===!0||Dw(a.textContent,u)?(h.popover!=null&&(tt("beforetoggle",a),tt("toggle",a)),h.onScroll!=null&&tt("scroll",a),h.onScrollEnd!=null&&tt("scrollend",a),h.onClick!=null&&(a.onclick=Wr),a=!0):a=!1,a||Ai(s,!0)}function vb(s){for(on=s.return;on;)switch(on.tag){case 5:case 31:case 13:mr=!1;return;case 27:case 3:mr=!0;return;default:on=on.return}}function So(s){if(s!==on)return!1;if(!at)return vb(s),at=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||Qp(s.type,s.memoizedProps)),u=!u),u&&kt&&Ai(s),vb(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));kt=qw(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));kt=qw(s)}else a===27?(a=kt,Ui(s.type)?(s=Wp,Wp=null,kt=s):kt=a):kt=on?yr(s.stateNode.nextSibling):null;return!0}function xs(){kt=on=null,at=!1}function Mh(){var s=ki;return s!==null&&(Dn===null?Dn=s:Dn.push.apply(Dn,s),ki=null),s}function ja(s){ki===null?ki=[s]:ki.push(s)}var Ih=D(null),Cs=null,ri=null;function Ti(s,a,u){T(Ih,a._currentValue),a._currentValue=u}function ii(s){s._currentValue=Ih.current,V(Ih)}function Nh(s,a,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===u)break;s=s.return}}function Dh(s,a,u,h){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var b=v.dependencies;if(b!==null){var _=v.child;b=b.firstContext;e:for(;b!==null;){var A=b;b=v;for(var F=0;F<a.length;F++)if(A.context===a[F]){b.lanes|=u,A=b.alternate,A!==null&&(A.lanes|=u),Nh(b.return,u,s),h||(_=null);break e}b=A.next}}else if(v.tag===18){if(_=v.return,_===null)throw Error(r(341));_.lanes|=u,b=_.alternate,b!==null&&(b.lanes|=u),Nh(_,u,s),_=null}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===s){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}}function wo(s,a,u,h){s=null;for(var v=a,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var _=v.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var A=v.type;Hn(v.pendingProps.value,_.value)||(s!==null?s.push(A):s=[A])}}else if(v===ye.current){if(_=v.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(fl):s=[fl])}v=v.return}s!==null&&Dh(a,s,u,h),a.flags|=262144}function Hu(s){for(s=s.firstContext;s!==null;){if(!Hn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Es(s){Cs=s,ri=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function an(s){return bb(Cs,s)}function Vu(s,a){return Cs===null&&Es(s),bb(s,a)}function bb(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},ri===null){if(s===null)throw Error(r(308));ri=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else ri=ri.next=a;return u}var yO=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},vO=e.unstable_scheduleCallback,bO=e.unstable_NormalPriority,jt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zh(){return{controller:new yO,data:new Map,refCount:0}}function Fa(s){s.refCount--,s.refCount===0&&vO(bO,function(){s.controller.abort()})}var $a=null,Lh=0,_o=0,xo=null;function SO(s,a){if($a===null){var u=$a=[];Lh=0,_o=Fp(),xo={status:"pending",value:void 0,then:function(h){u.push(h)}}}return Lh++,a.then(Sb,Sb),a}function Sb(){if(--Lh===0&&$a!==null){xo!==null&&(xo.status="fulfilled");var s=$a;$a=null,_o=0,xo=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function wO(s,a){var u=[],h={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var v=0;v<u.length;v++)(0,u[v])(a)},function(v){for(h.status="rejected",h.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),h}var wb=$.S;$.S=function(s,a){iw=me(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&SO(s,a),wb!==null&&wb(s,a)};var Rs=D(null);function Ph(){var s=Rs.current;return s!==null?s:Ct.pooledCache}function Ku(s,a){a===null?T(Rs,Rs.current):T(Rs,a.pool)}function _b(){var s=Ph();return s===null?null:{parent:jt._currentValue,pool:s}}var Co=Error(r(460)),jh=Error(r(474)),Gu=Error(r(542)),Qu={then:function(){}};function xb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Cb(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(Wr,Wr),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Rb(s),s;default:if(typeof a.status=="string")a.then(Wr,Wr);else{if(s=Ct,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=h}},function(h){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Rb(s),s}throw As=a,Co}}function ks(s){try{var a=s._init;return a(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(As=u,Co):u}}var As=null;function Eb(){if(As===null)throw Error(r(459));var s=As;return As=null,s}function Rb(s){if(s===Co||s===Gu)throw Error(r(483))}var Eo=null,Ba=0;function Zu(s){var a=Ba;return Ba+=1,Eo===null&&(Eo=[]),Cb(Eo,s,a)}function Ua(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Yu(s,a){throw a.$$typeof===g?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function kb(s){function a(q,B){if(s){var G=q.deletions;G===null?(q.deletions=[B],q.flags|=16):G.push(B)}}function u(q,B){if(!s)return null;for(;B!==null;)a(q,B),B=B.sibling;return null}function h(q){for(var B=new Map;q!==null;)q.key!==null?B.set(q.key,q):B.set(q.index,q),q=q.sibling;return B}function v(q,B){return q=ti(q,B),q.index=0,q.sibling=null,q}function b(q,B,G){return q.index=G,s?(G=q.alternate,G!==null?(G=G.index,G<B?(q.flags|=67108866,B):G):(q.flags|=67108866,B)):(q.flags|=1048576,B)}function _(q){return s&&q.alternate===null&&(q.flags|=67108866),q}function A(q,B,G,ie){return B===null||B.tag!==6?(B=Rh(G,q.mode,ie),B.return=q,B):(B=v(B,G),B.return=q,B)}function F(q,B,G,ie){var Te=G.type;return Te===w?ne(q,B,G.props.children,ie,G.key):B!==null&&(B.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===L&&ks(Te)===B.type)?(B=v(B,G.props),Ua(B,G),B.return=q,B):(B=Uu(G.type,G.key,G.props,null,q.mode,ie),Ua(B,G),B.return=q,B)}function Q(q,B,G,ie){return B===null||B.tag!==4||B.stateNode.containerInfo!==G.containerInfo||B.stateNode.implementation!==G.implementation?(B=kh(G,q.mode,ie),B.return=q,B):(B=v(B,G.children||[]),B.return=q,B)}function ne(q,B,G,ie,Te){return B===null||B.tag!==7?(B=_s(G,q.mode,ie,Te),B.return=q,B):(B=v(B,G),B.return=q,B)}function oe(q,B,G){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Rh(""+B,q.mode,G),B.return=q,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case y:return G=Uu(B.type,B.key,B.props,null,q.mode,G),Ua(G,B),G.return=q,G;case S:return B=kh(B,q.mode,G),B.return=q,B;case L:return B=ks(B),oe(q,B,G)}if(K(B)||Z(B))return B=_s(B,q.mode,G,null),B.return=q,B;if(typeof B.then=="function")return oe(q,Zu(B),G);if(B.$$typeof===k)return oe(q,Vu(q,B),G);Yu(q,B)}return null}function J(q,B,G,ie){var Te=B!==null?B.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Te!==null?null:A(q,B,""+G,ie);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case y:return G.key===Te?F(q,B,G,ie):null;case S:return G.key===Te?Q(q,B,G,ie):null;case L:return G=ks(G),J(q,B,G,ie)}if(K(G)||Z(G))return Te!==null?null:ne(q,B,G,ie,null);if(typeof G.then=="function")return J(q,B,Zu(G),ie);if(G.$$typeof===k)return J(q,B,Vu(q,G),ie);Yu(q,G)}return null}function W(q,B,G,ie,Te){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return q=q.get(G)||null,A(B,q,""+ie,Te);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case y:return q=q.get(ie.key===null?G:ie.key)||null,F(B,q,ie,Te);case S:return q=q.get(ie.key===null?G:ie.key)||null,Q(B,q,ie,Te);case L:return ie=ks(ie),W(q,B,G,ie,Te)}if(K(ie)||Z(ie))return q=q.get(G)||null,ne(B,q,ie,Te,null);if(typeof ie.then=="function")return W(q,B,G,Zu(ie),Te);if(ie.$$typeof===k)return W(q,B,G,Vu(B,ie),Te);Yu(B,ie)}return null}function xe(q,B,G,ie){for(var Te=null,ht=null,Ee=B,Ke=B=0,it=null;Ee!==null&&Ke<G.length;Ke++){Ee.index>Ke?(it=Ee,Ee=null):it=Ee.sibling;var pt=J(q,Ee,G[Ke],ie);if(pt===null){Ee===null&&(Ee=it);break}s&&Ee&&pt.alternate===null&&a(q,Ee),B=b(pt,B,Ke),ht===null?Te=pt:ht.sibling=pt,ht=pt,Ee=it}if(Ke===G.length)return u(q,Ee),at&&ni(q,Ke),Te;if(Ee===null){for(;Ke<G.length;Ke++)Ee=oe(q,G[Ke],ie),Ee!==null&&(B=b(Ee,B,Ke),ht===null?Te=Ee:ht.sibling=Ee,ht=Ee);return at&&ni(q,Ke),Te}for(Ee=h(Ee);Ke<G.length;Ke++)it=W(Ee,q,Ke,G[Ke],ie),it!==null&&(s&&it.alternate!==null&&Ee.delete(it.key===null?Ke:it.key),B=b(it,B,Ke),ht===null?Te=it:ht.sibling=it,ht=it);return s&&Ee.forEach(function(Gi){return a(q,Gi)}),at&&ni(q,Ke),Te}function Ne(q,B,G,ie){if(G==null)throw Error(r(151));for(var Te=null,ht=null,Ee=B,Ke=B=0,it=null,pt=G.next();Ee!==null&&!pt.done;Ke++,pt=G.next()){Ee.index>Ke?(it=Ee,Ee=null):it=Ee.sibling;var Gi=J(q,Ee,pt.value,ie);if(Gi===null){Ee===null&&(Ee=it);break}s&&Ee&&Gi.alternate===null&&a(q,Ee),B=b(Gi,B,Ke),ht===null?Te=Gi:ht.sibling=Gi,ht=Gi,Ee=it}if(pt.done)return u(q,Ee),at&&ni(q,Ke),Te;if(Ee===null){for(;!pt.done;Ke++,pt=G.next())pt=oe(q,pt.value,ie),pt!==null&&(B=b(pt,B,Ke),ht===null?Te=pt:ht.sibling=pt,ht=pt);return at&&ni(q,Ke),Te}for(Ee=h(Ee);!pt.done;Ke++,pt=G.next())pt=W(Ee,q,Ke,pt.value,ie),pt!==null&&(s&&pt.alternate!==null&&Ee.delete(pt.key===null?Ke:pt.key),B=b(pt,B,Ke),ht===null?Te=pt:ht.sibling=pt,ht=pt);return s&&Ee.forEach(function(IM){return a(q,IM)}),at&&ni(q,Ke),Te}function _t(q,B,G,ie){if(typeof G=="object"&&G!==null&&G.type===w&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case y:e:{for(var Te=G.key;B!==null;){if(B.key===Te){if(Te=G.type,Te===w){if(B.tag===7){u(q,B.sibling),ie=v(B,G.props.children),ie.return=q,q=ie;break e}}else if(B.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===L&&ks(Te)===B.type){u(q,B.sibling),ie=v(B,G.props),Ua(ie,G),ie.return=q,q=ie;break e}u(q,B);break}else a(q,B);B=B.sibling}G.type===w?(ie=_s(G.props.children,q.mode,ie,G.key),ie.return=q,q=ie):(ie=Uu(G.type,G.key,G.props,null,q.mode,ie),Ua(ie,G),ie.return=q,q=ie)}return _(q);case S:e:{for(Te=G.key;B!==null;){if(B.key===Te)if(B.tag===4&&B.stateNode.containerInfo===G.containerInfo&&B.stateNode.implementation===G.implementation){u(q,B.sibling),ie=v(B,G.children||[]),ie.return=q,q=ie;break e}else{u(q,B);break}else a(q,B);B=B.sibling}ie=kh(G,q.mode,ie),ie.return=q,q=ie}return _(q);case L:return G=ks(G),_t(q,B,G,ie)}if(K(G))return xe(q,B,G,ie);if(Z(G)){if(Te=Z(G),typeof Te!="function")throw Error(r(150));return G=Te.call(G),Ne(q,B,G,ie)}if(typeof G.then=="function")return _t(q,B,Zu(G),ie);if(G.$$typeof===k)return _t(q,B,Vu(q,G),ie);Yu(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,B!==null&&B.tag===6?(u(q,B.sibling),ie=v(B,G),ie.return=q,q=ie):(u(q,B),ie=Rh(G,q.mode,ie),ie.return=q,q=ie),_(q)):u(q,B)}return function(q,B,G,ie){try{Ba=0;var Te=_t(q,B,G,ie);return Eo=null,Te}catch(Ee){if(Ee===Co||Ee===Gu)throw Ee;var ht=Vn(29,Ee,null,q.mode);return ht.lanes=ie,ht.return=q,ht}}}var Ts=kb(!0),Ab=kb(!1),Oi=!1;function Fh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $h(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Mi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ii(s,a,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(mt&2)!==0){var v=h.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),h.pending=a,a=Bu(s),fb(s,null,u),a}return $u(s,h,a,u),Bu(s)}function qa(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,bv(s,u)}}function Bh(s,a){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var v=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var _={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?v=b=_:b=b.next=_,u=u.next}while(u!==null);b===null?v=b=a:b=b.next=a}else v=b=a;u={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var Uh=!1;function Ha(){if(Uh){var s=xo;if(s!==null)throw s}}function Va(s,a,u,h){Uh=!1;var v=s.updateQueue;Oi=!1;var b=v.firstBaseUpdate,_=v.lastBaseUpdate,A=v.shared.pending;if(A!==null){v.shared.pending=null;var F=A,Q=F.next;F.next=null,_===null?b=Q:_.next=Q,_=F;var ne=s.alternate;ne!==null&&(ne=ne.updateQueue,A=ne.lastBaseUpdate,A!==_&&(A===null?ne.firstBaseUpdate=Q:A.next=Q,ne.lastBaseUpdate=F))}if(b!==null){var oe=v.baseState;_=0,ne=Q=F=null,A=b;do{var J=A.lane&-536870913,W=J!==A.lane;if(W?(rt&J)===J:(h&J)===J){J!==0&&J===_o&&(Uh=!0),ne!==null&&(ne=ne.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var xe=s,Ne=A;J=a;var _t=u;switch(Ne.tag){case 1:if(xe=Ne.payload,typeof xe=="function"){oe=xe.call(_t,oe,J);break e}oe=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Ne.payload,J=typeof xe=="function"?xe.call(_t,oe,J):xe,J==null)break e;oe=p({},oe,J);break e;case 2:Oi=!0}}J=A.callback,J!==null&&(s.flags|=64,W&&(s.flags|=8192),W=v.callbacks,W===null?v.callbacks=[J]:W.push(J))}else W={lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ne===null?(Q=ne=W,F=oe):ne=ne.next=W,_|=J;if(A=A.next,A===null){if(A=v.shared.pending,A===null)break;W=A,A=W.next,W.next=null,v.lastBaseUpdate=W,v.shared.pending=null}}while(!0);ne===null&&(F=oe),v.baseState=F,v.firstBaseUpdate=Q,v.lastBaseUpdate=ne,b===null&&(v.shared.lanes=0),Pi|=_,s.lanes=_,s.memoizedState=oe}}function Tb(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function Ob(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)Tb(u[s],a)}var Ro=D(null),Ju=D(0);function Mb(s,a){s=hi,T(Ju,s),T(Ro,a),hi=s|a.baseLanes}function qh(){T(Ju,hi),T(Ro,Ro.current)}function Hh(){hi=Ju.current,V(Ro),V(Ju)}var Kn=D(null),gr=null;function Ni(s){var a=s.alternate;T(Lt,Lt.current&1),T(Kn,s),gr===null&&(a===null||Ro.current!==null||a.memoizedState!==null)&&(gr=s)}function Vh(s){T(Lt,Lt.current),T(Kn,s),gr===null&&(gr=s)}function Ib(s){s.tag===22?(T(Lt,Lt.current),T(Kn,s),gr===null&&(gr=s)):Di()}function Di(){T(Lt,Lt.current),T(Kn,Kn.current)}function Gn(s){V(Kn),gr===s&&(gr=null),V(Lt)}var Lt=D(0);function Xu(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Jp(u)||Xp(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var si=0,He=null,St=null,Ft=null,Wu=!1,ko=!1,Os=!1,ec=0,Ka=0,Ao=null,_O=0;function It(){throw Error(r(321))}function Kh(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Hn(s[u],a[u]))return!1;return!0}function Gh(s,a,u,h,v,b){return si=b,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,$.H=s===null||s.memoizedState===null?mS:lp,Os=!1,b=u(h,v),Os=!1,ko&&(b=Db(a,u,h,v)),Nb(s),b}function Nb(s){$.H=Za;var a=St!==null&&St.next!==null;if(si=0,Ft=St=He=null,Wu=!1,Ka=0,Ao=null,a)throw Error(r(300));s===null||$t||(s=s.dependencies,s!==null&&Hu(s)&&($t=!0))}function Db(s,a,u,h){He=s;var v=0;do{if(ko&&(Ao=null),Ka=0,ko=!1,25<=v)throw Error(r(301));if(v+=1,Ft=St=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}$.H=gS,b=a(u,h)}while(ko);return b}function xO(){var s=$.H,a=s.useState()[0];return a=typeof a.then=="function"?Ga(a):a,s=s.useState()[0],(St!==null?St.memoizedState:null)!==s&&(He.flags|=1024),a}function Qh(){var s=ec!==0;return ec=0,s}function Zh(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function Yh(s){if(Wu){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Wu=!1}si=0,Ft=St=He=null,ko=!1,Ka=ec=0,Ao=null}function wn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?He.memoizedState=Ft=s:Ft=Ft.next=s,Ft}function Pt(){if(St===null){var s=He.alternate;s=s!==null?s.memoizedState:null}else s=St.next;var a=Ft===null?He.memoizedState:Ft.next;if(a!==null)Ft=a,St=s;else{if(s===null)throw He.alternate===null?Error(r(467)):Error(r(310));St=s,s={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Ft===null?He.memoizedState=Ft=s:Ft=Ft.next=s}return Ft}function tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ga(s){var a=Ka;return Ka+=1,Ao===null&&(Ao=[]),s=Cb(Ao,s,a),a=He,(Ft===null?a.memoizedState:Ft.next)===null&&(a=a.alternate,$.H=a===null||a.memoizedState===null?mS:lp),s}function nc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ga(s);if(s.$$typeof===k)return an(s)}throw Error(r(438,String(s)))}function Jh(s){var a=null,u=He.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var h=He.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=tc(),He.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),h=0;h<s;h++)u[h]=N;return a.index++,u}function oi(s,a){return typeof a=="function"?a(s):a}function rc(s){var a=Pt();return Xh(a,St,s)}function Xh(s,a,u){var h=s.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=u;var v=s.baseQueue,b=h.pending;if(b!==null){if(v!==null){var _=v.next;v.next=b.next,b.next=_}a.baseQueue=v=b,h.pending=null}if(b=s.baseState,v===null)s.memoizedState=b;else{a=v.next;var A=_=null,F=null,Q=a,ne=!1;do{var oe=Q.lane&-536870913;if(oe!==Q.lane?(rt&oe)===oe:(si&oe)===oe){var J=Q.revertLane;if(J===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),oe===_o&&(ne=!0);else if((si&J)===J){Q=Q.next,J===_o&&(ne=!0);continue}else oe={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},F===null?(A=F=oe,_=b):F=F.next=oe,He.lanes|=J,Pi|=J;oe=Q.action,Os&&u(b,oe),b=Q.hasEagerState?Q.eagerState:u(b,oe)}else J={lane:oe,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},F===null?(A=F=J,_=b):F=F.next=J,He.lanes|=oe,Pi|=oe;Q=Q.next}while(Q!==null&&Q!==a);if(F===null?_=b:F.next=A,!Hn(b,s.memoizedState)&&($t=!0,ne&&(u=xo,u!==null)))throw u;s.memoizedState=b,s.baseState=_,s.baseQueue=F,h.lastRenderedState=b}return v===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Wh(s){var a=Pt(),u=a.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var h=u.dispatch,v=u.pending,b=a.memoizedState;if(v!==null){u.pending=null;var _=v=v.next;do b=s(b,_.action),_=_.next;while(_!==v);Hn(b,a.memoizedState)||($t=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),u.lastRenderedState=b}return[b,h]}function zb(s,a,u){var h=He,v=Pt(),b=at;if(b){if(u===void 0)throw Error(r(407));u=u()}else u=a();var _=!Hn((St||v).memoizedState,u);if(_&&(v.memoizedState=u,$t=!0),v=v.queue,np(jb.bind(null,h,v,s),[s]),v.getSnapshot!==a||_||Ft!==null&&Ft.memoizedState.tag&1){if(h.flags|=2048,To(9,{destroy:void 0},Pb.bind(null,h,v,u,a),null),Ct===null)throw Error(r(349));b||(si&127)!==0||Lb(h,a,u)}return u}function Lb(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=He.updateQueue,a===null?(a=tc(),He.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function Pb(s,a,u,h){a.value=u,a.getSnapshot=h,Fb(a)&&$b(s)}function jb(s,a,u){return u(function(){Fb(a)&&$b(s)})}function Fb(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Hn(s,u)}catch{return!0}}function $b(s){var a=ws(s,2);a!==null&&zn(a,s,2)}function ep(s){var a=wn();if(typeof s=="function"){var u=s;if(s=u(),Os){zt(!0);try{u()}finally{zt(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:s},a}function Bb(s,a,u,h){return s.baseState=u,Xh(s,St,typeof h=="function"?h:oi)}function CO(s,a,u,h,v){if(oc(s))throw Error(r(485));if(s=a.action,s!==null){var b={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){b.listeners.push(_)}};$.T!==null?u(!0):b.isTransition=!1,h(b),u=a.pending,u===null?(b.next=a.pending=b,Ub(a,b)):(b.next=u.next,a.pending=u.next=b)}}function Ub(s,a){var u=a.action,h=a.payload,v=s.state;if(a.isTransition){var b=$.T,_={};$.T=_;try{var A=u(v,h),F=$.S;F!==null&&F(_,A),qb(s,a,A)}catch(Q){tp(s,a,Q)}finally{b!==null&&_.types!==null&&(b.types=_.types),$.T=b}}else try{b=u(v,h),qb(s,a,b)}catch(Q){tp(s,a,Q)}}function qb(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){Hb(s,a,h)},function(h){return tp(s,a,h)}):Hb(s,a,u)}function Hb(s,a,u){a.status="fulfilled",a.value=u,Vb(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,Ub(s,u)))}function tp(s,a,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=u,Vb(a),a=a.next;while(a!==h)}s.action=null}function Vb(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function Kb(s,a){return a}function Gb(s,a){if(at){var u=Ct.formState;if(u!==null){e:{var h=He;if(at){if(kt){t:{for(var v=kt,b=mr;v.nodeType!==8;){if(!b){v=null;break t}if(v=yr(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){kt=yr(v.nextSibling),h=v.data==="F!";break e}}Ai(h)}h=!1}h&&(a=u[0])}}return u=wn(),u.memoizedState=u.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kb,lastRenderedState:a},u.queue=h,u=dS.bind(null,He,h),h.dispatch=u,h=ep(!1),b=ap.bind(null,He,!1,h.queue),h=wn(),v={state:a,dispatch:null,action:s,pending:null},h.queue=v,u=CO.bind(null,He,v,b,u),v.dispatch=u,h.memoizedState=s,[a,u,!1]}function Qb(s){var a=Pt();return Zb(a,St,s)}function Zb(s,a,u){if(a=Xh(s,a,Kb)[0],s=rc(oi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Ga(a)}catch(_){throw _===Co?Gu:_}else h=a;a=Pt();var v=a.queue,b=v.dispatch;return u!==a.memoizedState&&(He.flags|=2048,To(9,{destroy:void 0},EO.bind(null,v,u),null)),[h,b,s]}function EO(s,a){s.action=a}function Yb(s){var a=Pt(),u=St;if(u!==null)return Zb(a,u,s);Pt(),a=a.memoizedState,u=Pt();var h=u.queue.dispatch;return u.memoizedState=s,[a,h,!1]}function To(s,a,u,h){return s={tag:s,create:u,deps:h,inst:a,next:null},a=He.updateQueue,a===null&&(a=tc(),He.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,a.lastEffect=s),s}function Jb(){return Pt().memoizedState}function ic(s,a,u,h){var v=wn();He.flags|=s,v.memoizedState=To(1|a,{destroy:void 0},u,h===void 0?null:h)}function sc(s,a,u,h){var v=Pt();h=h===void 0?null:h;var b=v.memoizedState.inst;St!==null&&h!==null&&Kh(h,St.memoizedState.deps)?v.memoizedState=To(a,b,u,h):(He.flags|=s,v.memoizedState=To(1|a,b,u,h))}function Xb(s,a){ic(8390656,8,s,a)}function np(s,a){sc(2048,8,s,a)}function RO(s){He.flags|=4;var a=He.updateQueue;if(a===null)a=tc(),He.updateQueue=a,a.events=[s];else{var u=a.events;u===null?a.events=[s]:u.push(s)}}function Wb(s){var a=Pt().memoizedState;return RO({ref:a,nextImpl:s}),function(){if((mt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function eS(s,a){return sc(4,2,s,a)}function tS(s,a){return sc(4,4,s,a)}function nS(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function rS(s,a,u){u=u!=null?u.concat([s]):null,sc(4,4,nS.bind(null,a,s),u)}function rp(){}function iS(s,a){var u=Pt();a=a===void 0?null:a;var h=u.memoizedState;return a!==null&&Kh(a,h[1])?h[0]:(u.memoizedState=[s,a],s)}function sS(s,a){var u=Pt();a=a===void 0?null:a;var h=u.memoizedState;if(a!==null&&Kh(a,h[1]))return h[0];if(h=s(),Os){zt(!0);try{s()}finally{zt(!1)}}return u.memoizedState=[h,a],h}function ip(s,a,u){return u===void 0||(si&1073741824)!==0&&(rt&261930)===0?s.memoizedState=a:(s.memoizedState=u,s=ow(),He.lanes|=s,Pi|=s,u)}function oS(s,a,u,h){return Hn(u,a)?u:Ro.current!==null?(s=ip(s,u,h),Hn(s,a)||($t=!0),s):(si&42)===0||(si&1073741824)!==0&&(rt&261930)===0?($t=!0,s.memoizedState=u):(s=ow(),He.lanes|=s,Pi|=s,a)}function aS(s,a,u,h,v){var b=te.p;te.p=b!==0&&8>b?b:8;var _=$.T,A={};$.T=A,ap(s,!1,a,u);try{var F=v(),Q=$.S;if(Q!==null&&Q(A,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ne=wO(F,h);Qa(s,a,ne,Yn(s))}else Qa(s,a,h,Yn(s))}catch(oe){Qa(s,a,{then:function(){},status:"rejected",reason:oe},Yn())}finally{te.p=b,_!==null&&A.types!==null&&(_.types=A.types),$.T=_}}function kO(){}function sp(s,a,u,h){if(s.tag!==5)throw Error(r(476));var v=lS(s).queue;aS(s,v,a,de,u===null?kO:function(){return uS(s),u(h)})}function lS(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:de},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function uS(s){var a=lS(s);a.next===null&&(a=s.alternate.memoizedState),Qa(s,a.next.queue,{},Yn())}function op(){return an(fl)}function cS(){return Pt().memoizedState}function fS(){return Pt().memoizedState}function AO(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Yn();s=Mi(u);var h=Ii(a,s,u);h!==null&&(zn(h,a,u),qa(h,a,u)),a={cache:zh()},s.payload=a;return}a=a.return}}function TO(s,a,u){var h=Yn();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},oc(s)?hS(a,u):(u=Ch(s,a,u,h),u!==null&&(zn(u,s,h),pS(u,a,h)))}function dS(s,a,u){var h=Yn();Qa(s,a,u,h)}function Qa(s,a,u,h){var v={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(oc(s))hS(a,v);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var _=a.lastRenderedState,A=b(_,u);if(v.hasEagerState=!0,v.eagerState=A,Hn(A,_))return $u(s,a,v,0),Ct===null&&Fu(),!1}catch{}if(u=Ch(s,a,v,h),u!==null)return zn(u,s,h),pS(u,a,h),!0}return!1}function ap(s,a,u,h){if(h={lane:2,revertLane:Fp(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},oc(s)){if(a)throw Error(r(479))}else a=Ch(s,u,h,2),a!==null&&zn(a,s,2)}function oc(s){var a=s.alternate;return s===He||a!==null&&a===He}function hS(s,a){ko=Wu=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function pS(s,a,u){if((u&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,bv(s,u)}}var Za={readContext:an,use:nc,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};Za.useEffectEvent=It;var mS={readContext:an,use:nc,useCallback:function(s,a){return wn().memoizedState=[s,a===void 0?null:a],s},useContext:an,useEffect:Xb,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,ic(4194308,4,nS.bind(null,a,s),u)},useLayoutEffect:function(s,a){return ic(4194308,4,s,a)},useInsertionEffect:function(s,a){ic(4,2,s,a)},useMemo:function(s,a){var u=wn();a=a===void 0?null:a;var h=s();if(Os){zt(!0);try{s()}finally{zt(!1)}}return u.memoizedState=[h,a],h},useReducer:function(s,a,u){var h=wn();if(u!==void 0){var v=u(a);if(Os){zt(!0);try{u(a)}finally{zt(!1)}}}else v=a;return h.memoizedState=h.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},h.queue=s,s=s.dispatch=TO.bind(null,He,s),[h.memoizedState,s]},useRef:function(s){var a=wn();return s={current:s},a.memoizedState=s},useState:function(s){s=ep(s);var a=s.queue,u=dS.bind(null,He,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:rp,useDeferredValue:function(s,a){var u=wn();return ip(u,s,a)},useTransition:function(){var s=ep(!1);return s=aS.bind(null,He,s.queue,!0,!1),wn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var h=He,v=wn();if(at){if(u===void 0)throw Error(r(407));u=u()}else{if(u=a(),Ct===null)throw Error(r(349));(rt&127)!==0||Lb(h,a,u)}v.memoizedState=u;var b={value:u,getSnapshot:a};return v.queue=b,Xb(jb.bind(null,h,b,s),[s]),h.flags|=2048,To(9,{destroy:void 0},Pb.bind(null,h,b,u,a),null),u},useId:function(){var s=wn(),a=Ct.identifierPrefix;if(at){var u=jr,h=Pr;u=(h&~(1<<32-lt(h)-1)).toString(32)+u,a="_"+a+"R_"+u,u=ec++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=_O++,a="_"+a+"r_"+u.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:op,useFormState:Gb,useActionState:Gb,useOptimistic:function(s){var a=wn();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=ap.bind(null,He,!0,u),u.dispatch=a,[s,a]},useMemoCache:Jh,useCacheRefresh:function(){return wn().memoizedState=AO.bind(null,He)},useEffectEvent:function(s){var a=wn(),u={impl:s};return a.memoizedState=u,function(){if((mt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},lp={readContext:an,use:nc,useCallback:iS,useContext:an,useEffect:np,useImperativeHandle:rS,useInsertionEffect:eS,useLayoutEffect:tS,useMemo:sS,useReducer:rc,useRef:Jb,useState:function(){return rc(oi)},useDebugValue:rp,useDeferredValue:function(s,a){var u=Pt();return oS(u,St.memoizedState,s,a)},useTransition:function(){var s=rc(oi)[0],a=Pt().memoizedState;return[typeof s=="boolean"?s:Ga(s),a]},useSyncExternalStore:zb,useId:cS,useHostTransitionStatus:op,useFormState:Qb,useActionState:Qb,useOptimistic:function(s,a){var u=Pt();return Bb(u,St,s,a)},useMemoCache:Jh,useCacheRefresh:fS};lp.useEffectEvent=Wb;var gS={readContext:an,use:nc,useCallback:iS,useContext:an,useEffect:np,useImperativeHandle:rS,useInsertionEffect:eS,useLayoutEffect:tS,useMemo:sS,useReducer:Wh,useRef:Jb,useState:function(){return Wh(oi)},useDebugValue:rp,useDeferredValue:function(s,a){var u=Pt();return St===null?ip(u,s,a):oS(u,St.memoizedState,s,a)},useTransition:function(){var s=Wh(oi)[0],a=Pt().memoizedState;return[typeof s=="boolean"?s:Ga(s),a]},useSyncExternalStore:zb,useId:cS,useHostTransitionStatus:op,useFormState:Yb,useActionState:Yb,useOptimistic:function(s,a){var u=Pt();return St!==null?Bb(u,St,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:Jh,useCacheRefresh:fS};gS.useEffectEvent=Wb;function up(s,a,u,h){a=s.memoizedState,u=u(h,a),u=u==null?a:p({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var cp={enqueueSetState:function(s,a,u){s=s._reactInternals;var h=Yn(),v=Mi(h);v.payload=a,u!=null&&(v.callback=u),a=Ii(s,v,h),a!==null&&(zn(a,s,h),qa(a,s,h))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var h=Yn(),v=Mi(h);v.tag=1,v.payload=a,u!=null&&(v.callback=u),a=Ii(s,v,h),a!==null&&(zn(a,s,h),qa(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Yn(),h=Mi(u);h.tag=2,a!=null&&(h.callback=a),a=Ii(s,h,u),a!==null&&(zn(a,s,u),qa(a,s,u))}};function yS(s,a,u,h,v,b,_){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,b,_):a.prototype&&a.prototype.isPureReactComponent?!za(u,h)||!za(v,b):!0}function vS(s,a,u,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==s&&cp.enqueueReplaceState(a,a.state,null)}function Ms(s,a){var u=a;if("ref"in a){u={};for(var h in a)h!=="ref"&&(u[h]=a[h])}if(s=s.defaultProps){u===a&&(u=p({},u));for(var v in s)u[v]===void 0&&(u[v]=s[v])}return u}function bS(s){ju(s)}function SS(s){console.error(s)}function wS(s){ju(s)}function ac(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function _S(s,a,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function fp(s,a,u){return u=Mi(u),u.tag=3,u.payload={element:null},u.callback=function(){ac(s,a)},u}function xS(s){return s=Mi(s),s.tag=3,s}function CS(s,a,u,h){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var b=h.value;s.payload=function(){return v(b)},s.callback=function(){_S(a,u,h)}}var _=u.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(s.callback=function(){_S(a,u,h),typeof v!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var A=h.stack;this.componentDidCatch(h.value,{componentStack:A!==null?A:""})})}function OO(s,a,u,h,v){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=u.alternate,a!==null&&wo(a,u,v,!0),u=Kn.current,u!==null){switch(u.tag){case 31:case 13:return gr===null?bc():u.alternate===null&&Nt===0&&(Nt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,h===Qu?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([h]):a.add(h),Lp(s,h,v)),!1;case 22:return u.flags|=65536,h===Qu?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([h]):u.add(h)),Lp(s,h,v)),!1}throw Error(r(435,u.tag))}return Lp(s,h,v),bc(),!1}if(at)return a=Kn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,h!==Oh&&(s=Error(r(422),{cause:h}),ja(dr(s,u)))):(h!==Oh&&(a=Error(r(423),{cause:h}),ja(dr(a,u))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,h=dr(h,u),v=fp(s.stateNode,h,v),Bh(s,v),Nt!==4&&(Nt=2)),!1;var b=Error(r(520),{cause:h});if(b=dr(b,u),rl===null?rl=[b]:rl.push(b),Nt!==4&&(Nt=2),a===null)return!0;h=dr(h,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=v&-v,u.lanes|=s,s=fp(u.stateNode,h,s),Bh(u,s),!1;case 1:if(a=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ji===null||!ji.has(b))))return u.flags|=65536,v&=-v,u.lanes|=v,v=xS(v),CS(v,s,u,h),Bh(u,v),!1}u=u.return}while(u!==null);return!1}var dp=Error(r(461)),$t=!1;function ln(s,a,u,h){a.child=s===null?Ab(a,null,u,h):Ts(a,s.child,u,h)}function ES(s,a,u,h,v){u=u.render;var b=a.ref;if("ref"in h){var _={};for(var A in h)A!=="ref"&&(_[A]=h[A])}else _=h;return Es(a),h=Gh(s,a,u,_,b,v),A=Qh(),s!==null&&!$t?(Zh(s,a,v),ai(s,a,v)):(at&&A&&Ah(a),a.flags|=1,ln(s,a,h,v),a.child)}function RS(s,a,u,h,v){if(s===null){var b=u.type;return typeof b=="function"&&!Eh(b)&&b.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=b,kS(s,a,b,h,v)):(s=Uu(u.type,null,h,a,a.mode,v),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,!Sp(s,v)){var _=b.memoizedProps;if(u=u.compare,u=u!==null?u:za,u(_,h)&&s.ref===a.ref)return ai(s,a,v)}return a.flags|=1,s=ti(b,h),s.ref=a.ref,s.return=a,a.child=s}function kS(s,a,u,h,v){if(s!==null){var b=s.memoizedProps;if(za(b,h)&&s.ref===a.ref)if($t=!1,a.pendingProps=h=b,Sp(s,v))(s.flags&131072)!==0&&($t=!0);else return a.lanes=s.lanes,ai(s,a,v)}return hp(s,a,u,h,v)}function AS(s,a,u,h){var v=h.children,b=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,s!==null){for(h=a.child=s.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~b}else h=0,a.child=null;return TS(s,a,b,u,h)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ku(a,b!==null?b.cachePool:null),b!==null?Mb(a,b):qh(),Ib(a);else return h=a.lanes=536870912,TS(s,a,b!==null?b.baseLanes|u:u,u,h)}else b!==null?(Ku(a,b.cachePool),Mb(a,b),Di(),a.memoizedState=null):(s!==null&&Ku(a,null),qh(),Di());return ln(s,a,v,u),a.child}function Ya(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function TS(s,a,u,h,v){var b=Ph();return b=b===null?null:{parent:jt._currentValue,pool:b},a.memoizedState={baseLanes:u,cachePool:b},s!==null&&Ku(a,null),qh(),Ib(a),s!==null&&wo(s,a,h,!0),a.childLanes=v,null}function lc(s,a){return a=cc({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function OS(s,a,u){return Ts(a,s.child,null,u),s=lc(a,a.pendingProps),s.flags|=2,Gn(a),a.memoizedState=null,s}function MO(s,a,u){var h=a.pendingProps,v=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(at){if(h.mode==="hidden")return s=lc(a,h),a.lanes=536870912,Ya(null,s);if(Vh(a),(s=kt)?(s=Uw(s,mr),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Ri!==null?{id:Pr,overflow:jr}:null,retryLane:536870912,hydrationErrors:null},u=hb(s),u.return=a,a.child=u,on=a,kt=null)):s=null,s===null)throw Ai(a);return a.lanes=536870912,null}return lc(a,h)}var b=s.memoizedState;if(b!==null){var _=b.dehydrated;if(Vh(a),v)if(a.flags&256)a.flags&=-257,a=OS(s,a,u);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(r(558));else if($t||wo(s,a,u,!1),v=(u&s.childLanes)!==0,$t||v){if(h=Ct,h!==null&&(_=Sv(h,u),_!==0&&_!==b.retryLane))throw b.retryLane=_,ws(s,_),zn(h,s,_),dp;bc(),a=OS(s,a,u)}else s=b.treeContext,kt=yr(_.nextSibling),on=a,at=!0,ki=null,mr=!1,s!==null&&gb(a,s),a=lc(a,h),a.flags|=4096;return a}return s=ti(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function uc(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function hp(s,a,u,h,v){return Es(a),u=Gh(s,a,u,h,void 0,v),h=Qh(),s!==null&&!$t?(Zh(s,a,v),ai(s,a,v)):(at&&h&&Ah(a),a.flags|=1,ln(s,a,u,v),a.child)}function MS(s,a,u,h,v,b){return Es(a),a.updateQueue=null,u=Db(a,h,u,v),Nb(s),h=Qh(),s!==null&&!$t?(Zh(s,a,b),ai(s,a,b)):(at&&h&&Ah(a),a.flags|=1,ln(s,a,u,b),a.child)}function IS(s,a,u,h,v){if(Es(a),a.stateNode===null){var b=yo,_=u.contextType;typeof _=="object"&&_!==null&&(b=an(_)),b=new u(h,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=cp,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=h,b.state=a.memoizedState,b.refs={},Fh(a),_=u.contextType,b.context=typeof _=="object"&&_!==null?an(_):yo,b.state=a.memoizedState,_=u.getDerivedStateFromProps,typeof _=="function"&&(up(a,u,_,h),b.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(_=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),_!==b.state&&cp.enqueueReplaceState(b,b.state,null),Va(a,h,b,v),Ha(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){b=a.stateNode;var A=a.memoizedProps,F=Ms(u,A);b.props=F;var Q=b.context,ne=u.contextType;_=yo,typeof ne=="object"&&ne!==null&&(_=an(ne));var oe=u.getDerivedStateFromProps;ne=typeof oe=="function"||typeof b.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,ne||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A||Q!==_)&&vS(a,b,h,_),Oi=!1;var J=a.memoizedState;b.state=J,Va(a,h,b,v),Ha(),Q=a.memoizedState,A||J!==Q||Oi?(typeof oe=="function"&&(up(a,u,oe,h),Q=a.memoizedState),(F=Oi||yS(a,u,F,h,J,Q,_))?(ne||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=Q),b.props=h,b.state=Q,b.context=_,h=F):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{b=a.stateNode,$h(s,a),_=a.memoizedProps,ne=Ms(u,_),b.props=ne,oe=a.pendingProps,J=b.context,Q=u.contextType,F=yo,typeof Q=="object"&&Q!==null&&(F=an(Q)),A=u.getDerivedStateFromProps,(Q=typeof A=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_!==oe||J!==F)&&vS(a,b,h,F),Oi=!1,J=a.memoizedState,b.state=J,Va(a,h,b,v),Ha();var W=a.memoizedState;_!==oe||J!==W||Oi||s!==null&&s.dependencies!==null&&Hu(s.dependencies)?(typeof A=="function"&&(up(a,u,A,h),W=a.memoizedState),(ne=Oi||yS(a,u,ne,h,J,W,F)||s!==null&&s.dependencies!==null&&Hu(s.dependencies))?(Q||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,W,F),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,W,F)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||_===s.memoizedProps&&J===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&J===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=W),b.props=h,b.state=W,b.context=F,h=ne):(typeof b.componentDidUpdate!="function"||_===s.memoizedProps&&J===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&J===s.memoizedState||(a.flags|=1024),h=!1)}return b=h,uc(s,a),h=(a.flags&128)!==0,b||h?(b=a.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,s!==null&&h?(a.child=Ts(a,s.child,null,v),a.child=Ts(a,null,u,v)):ln(s,a,u,v),a.memoizedState=b.state,s=a.child):s=ai(s,a,v),s}function NS(s,a,u,h){return xs(),a.flags|=256,ln(s,a,u,h),a.child}var pp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mp(s){return{baseLanes:s,cachePool:_b()}}function gp(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=Zn),s}function DS(s,a,u){var h=a.pendingProps,v=!1,b=(a.flags&128)!==0,_;if((_=b)||(_=s!==null&&s.memoizedState===null?!1:(Lt.current&2)!==0),_&&(v=!0,a.flags&=-129),_=(a.flags&32)!==0,a.flags&=-33,s===null){if(at){if(v?Ni(a):Di(),(s=kt)?(s=Uw(s,mr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Ri!==null?{id:Pr,overflow:jr}:null,retryLane:536870912,hydrationErrors:null},u=hb(s),u.return=a,a.child=u,on=a,kt=null)):s=null,s===null)throw Ai(a);return Xp(s)?a.lanes=32:a.lanes=536870912,null}var A=h.children;return h=h.fallback,v?(Di(),v=a.mode,A=cc({mode:"hidden",children:A},v),h=_s(h,v,u,null),A.return=a,h.return=a,A.sibling=h,a.child=A,h=a.child,h.memoizedState=mp(u),h.childLanes=gp(s,_,u),a.memoizedState=pp,Ya(null,h)):(Ni(a),yp(a,A))}var F=s.memoizedState;if(F!==null&&(A=F.dehydrated,A!==null)){if(b)a.flags&256?(Ni(a),a.flags&=-257,a=vp(s,a,u)):a.memoizedState!==null?(Di(),a.child=s.child,a.flags|=128,a=null):(Di(),A=h.fallback,v=a.mode,h=cc({mode:"visible",children:h.children},v),A=_s(A,v,u,null),A.flags|=2,h.return=a,A.return=a,h.sibling=A,a.child=h,Ts(a,s.child,null,u),h=a.child,h.memoizedState=mp(u),h.childLanes=gp(s,_,u),a.memoizedState=pp,a=Ya(null,h));else if(Ni(a),Xp(A)){if(_=A.nextSibling&&A.nextSibling.dataset,_)var Q=_.dgst;_=Q,h=Error(r(419)),h.stack="",h.digest=_,ja({value:h,source:null,stack:null}),a=vp(s,a,u)}else if($t||wo(s,a,u,!1),_=(u&s.childLanes)!==0,$t||_){if(_=Ct,_!==null&&(h=Sv(_,u),h!==0&&h!==F.retryLane))throw F.retryLane=h,ws(s,h),zn(_,s,h),dp;Jp(A)||bc(),a=vp(s,a,u)}else Jp(A)?(a.flags|=192,a.child=s.child,a=null):(s=F.treeContext,kt=yr(A.nextSibling),on=a,at=!0,ki=null,mr=!1,s!==null&&gb(a,s),a=yp(a,h.children),a.flags|=4096);return a}return v?(Di(),A=h.fallback,v=a.mode,F=s.child,Q=F.sibling,h=ti(F,{mode:"hidden",children:h.children}),h.subtreeFlags=F.subtreeFlags&65011712,Q!==null?A=ti(Q,A):(A=_s(A,v,u,null),A.flags|=2),A.return=a,h.return=a,h.sibling=A,a.child=h,Ya(null,h),h=a.child,A=s.child.memoizedState,A===null?A=mp(u):(v=A.cachePool,v!==null?(F=jt._currentValue,v=v.parent!==F?{parent:F,pool:F}:v):v=_b(),A={baseLanes:A.baseLanes|u,cachePool:v}),h.memoizedState=A,h.childLanes=gp(s,_,u),a.memoizedState=pp,Ya(s.child,h)):(Ni(a),u=s.child,s=u.sibling,u=ti(u,{mode:"visible",children:h.children}),u.return=a,u.sibling=null,s!==null&&(_=a.deletions,_===null?(a.deletions=[s],a.flags|=16):_.push(s)),a.child=u,a.memoizedState=null,u)}function yp(s,a){return a=cc({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function cc(s,a){return s=Vn(22,s,null,a),s.lanes=0,s}function vp(s,a,u){return Ts(a,s.child,null,u),s=yp(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function zS(s,a,u){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),Nh(s.return,a,u)}function bp(s,a,u,h,v,b){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:v,treeForkCount:b}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=u,_.tailMode=v,_.treeForkCount=b)}function LS(s,a,u){var h=a.pendingProps,v=h.revealOrder,b=h.tail;h=h.children;var _=Lt.current,A=(_&2)!==0;if(A?(_=_&1|2,a.flags|=128):_&=1,T(Lt,_),ln(s,a,h,u),h=at?Pa:0,!A&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&zS(s,u,a);else if(s.tag===19)zS(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(v){case"forwards":for(u=a.child,v=null;u!==null;)s=u.alternate,s!==null&&Xu(s)===null&&(v=u),u=u.sibling;u=v,u===null?(v=a.child,a.child=null):(v=u.sibling,u.sibling=null),bp(a,!1,v,u,b,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=a.child,a.child=null;v!==null;){if(s=v.alternate,s!==null&&Xu(s)===null){a.child=v;break}s=v.sibling,v.sibling=u,u=v,v=s}bp(a,!0,u,null,b,h);break;case"together":bp(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function ai(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),Pi|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(wo(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,u=ti(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=ti(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Sp(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Hu(s)))}function IO(s,a,u){switch(a.tag){case 3:Re(a,a.stateNode.containerInfo),Ti(a,jt,s.memoizedState.cache),xs();break;case 27:case 5:qe(a);break;case 4:Re(a,a.stateNode.containerInfo);break;case 10:Ti(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Vh(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Ni(a),a.flags|=128,null):(u&a.child.childLanes)!==0?DS(s,a,u):(Ni(a),s=ai(s,a,u),s!==null?s.sibling:null);Ni(a);break;case 19:var v=(s.flags&128)!==0;if(h=(u&a.childLanes)!==0,h||(wo(s,a,u,!1),h=(u&a.childLanes)!==0),v){if(h)return LS(s,a,u);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),T(Lt,Lt.current),h)break;return null;case 22:return a.lanes=0,AS(s,a,u,a.pendingProps);case 24:Ti(a,jt,s.memoizedState.cache)}return ai(s,a,u)}function PS(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)$t=!0;else{if(!Sp(s,u)&&(a.flags&128)===0)return $t=!1,IO(s,a,u);$t=(s.flags&131072)!==0}else $t=!1,at&&(a.flags&1048576)!==0&&mb(a,Pa,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(s=ks(a.elementType),a.type=s,typeof s=="function")Eh(s)?(h=Ms(s,h),a.tag=1,a=IS(null,a,s,h,u)):(a.tag=0,a=hp(null,a,s,h,u));else{if(s!=null){var v=s.$$typeof;if(v===I){a.tag=11,a=ES(null,a,s,h,u);break e}else if(v===M){a.tag=14,a=RS(null,a,s,h,u);break e}}throw a=re(s)||s,Error(r(306,a,""))}}return a;case 0:return hp(s,a,a.type,a.pendingProps,u);case 1:return h=a.type,v=Ms(h,a.pendingProps),IS(s,a,h,v,u);case 3:e:{if(Re(a,a.stateNode.containerInfo),s===null)throw Error(r(387));h=a.pendingProps;var b=a.memoizedState;v=b.element,$h(s,a),Va(a,h,null,u);var _=a.memoizedState;if(h=_.cache,Ti(a,jt,h),h!==b.cache&&Dh(a,[jt],u,!0),Ha(),h=_.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:_.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=NS(s,a,h,u);break e}else if(h!==v){v=dr(Error(r(424)),a),ja(v),a=NS(s,a,h,u);break e}else for(s=a.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,kt=yr(s.firstChild),on=a,at=!0,ki=null,mr=!0,u=Ab(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(xs(),h===v){a=ai(s,a,u);break e}ln(s,a,h,u)}a=a.child}return a;case 26:return uc(s,a),s===null?(u=Qw(a.type,null,a.pendingProps,null))?a.memoizedState=u:at||(u=a.type,s=a.pendingProps,h=Rc(he.current).createElement(u),h[sn]=a,h[Tn]=s,un(h,u,s),Wt(h),a.stateNode=h):a.memoizedState=Qw(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return qe(a),s===null&&at&&(h=a.stateNode=Vw(a.type,a.pendingProps,he.current),on=a,mr=!0,v=kt,Ui(a.type)?(Wp=v,kt=yr(h.firstChild)):kt=v),ln(s,a,a.pendingProps.children,u),uc(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&at&&((v=h=kt)&&(h=lM(h,a.type,a.pendingProps,mr),h!==null?(a.stateNode=h,on=a,kt=yr(h.firstChild),mr=!1,v=!0):v=!1),v||Ai(a)),qe(a),v=a.type,b=a.pendingProps,_=s!==null?s.memoizedProps:null,h=b.children,Qp(v,b)?h=null:_!==null&&Qp(v,_)&&(a.flags|=32),a.memoizedState!==null&&(v=Gh(s,a,xO,null,null,u),fl._currentValue=v),uc(s,a),ln(s,a,h,u),a.child;case 6:return s===null&&at&&((s=u=kt)&&(u=uM(u,a.pendingProps,mr),u!==null?(a.stateNode=u,on=a,kt=null,s=!0):s=!1),s||Ai(a)),null;case 13:return DS(s,a,u);case 4:return Re(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Ts(a,null,h,u):ln(s,a,h,u),a.child;case 11:return ES(s,a,a.type,a.pendingProps,u);case 7:return ln(s,a,a.pendingProps,u),a.child;case 8:return ln(s,a,a.pendingProps.children,u),a.child;case 12:return ln(s,a,a.pendingProps.children,u),a.child;case 10:return h=a.pendingProps,Ti(a,a.type,h.value),ln(s,a,h.children,u),a.child;case 9:return v=a.type._context,h=a.pendingProps.children,Es(a),v=an(v),h=h(v),a.flags|=1,ln(s,a,h,u),a.child;case 14:return RS(s,a,a.type,a.pendingProps,u);case 15:return kS(s,a,a.type,a.pendingProps,u);case 19:return LS(s,a,u);case 31:return MO(s,a,u);case 22:return AS(s,a,u,a.pendingProps);case 24:return Es(a),h=an(jt),s===null?(v=Ph(),v===null&&(v=Ct,b=zh(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=u),v=b),a.memoizedState={parent:h,cache:v},Fh(a),Ti(a,jt,v)):((s.lanes&u)!==0&&($h(s,a),Va(a,null,null,u),Ha()),v=s.memoizedState,b=a.memoizedState,v.parent!==h?(v={parent:h,cache:h},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),Ti(a,jt,h)):(h=b.cache,Ti(a,jt,h),h!==v.cache&&Dh(a,[jt],u,!0))),ln(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function li(s){s.flags|=4}function wp(s,a,u,h,v){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(v&335544128)===v)if(s.stateNode.complete)s.flags|=8192;else if(cw())s.flags|=8192;else throw As=Qu,jh}else s.flags&=-16777217}function jS(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Ww(a))if(cw())s.flags|=8192;else throw As=Qu,jh}function fc(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?yv():536870912,s.lanes|=a,No|=a)}function Ja(s,a){if(!at)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function At(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(a)for(var v=s.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=h,s.childLanes=u,a}function NO(s,a,u){var h=a.pendingProps;switch(Th(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(a),null;case 1:return At(a),null;case 3:return u=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),ii(jt),we(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(So(a)?li(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Mh())),At(a),null;case 26:var v=a.type,b=a.memoizedState;return s===null?(li(a),b!==null?(At(a),jS(a,b)):(At(a),wp(a,v,null,h,u))):b?b!==s.memoizedState?(li(a),At(a),jS(a,b)):(At(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&li(a),At(a),wp(a,v,s,h,u)),null;case 27:if(Je(a),u=he.current,v=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&li(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return At(a),null}s=ae.current,So(a)?yb(a):(s=Vw(v,h,u),a.stateNode=s,li(a))}return At(a),null;case 5:if(Je(a),v=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&li(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return At(a),null}if(b=ae.current,So(a))yb(a);else{var _=Rc(he.current);switch(b){case 1:b=_.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=_.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=_.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof h.is=="string"?_.createElement("select",{is:h.is}):_.createElement("select"),h.multiple?b.multiple=!0:h.size&&(b.size=h.size);break;default:b=typeof h.is=="string"?_.createElement(v,{is:h.is}):_.createElement(v)}}b[sn]=a,b[Tn]=h;e:for(_=a.child;_!==null;){if(_.tag===5||_.tag===6)b.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===a)break e;for(;_.sibling===null;){if(_.return===null||_.return===a)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}a.stateNode=b;e:switch(un(b,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&li(a)}}return At(a),wp(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,u),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&li(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(r(166));if(s=he.current,So(a)){if(s=a.stateNode,u=a.memoizedProps,h=null,v=on,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}s[sn]=a,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||Dw(s.nodeValue,u)),s||Ai(a,!0)}else s=Rc(s).createTextNode(h),s[sn]=a,a.stateNode=s}return At(a),null;case 31:if(u=a.memoizedState,s===null||s.memoizedState!==null){if(h=So(a),u!==null){if(s===null){if(!h)throw Error(r(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[sn]=a}else xs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;At(a),s=!1}else u=Mh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return a.flags&256?(Gn(a),a):(Gn(a),null);if((a.flags&128)!==0)throw Error(r(558))}return At(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=So(a),h!==null&&h.dehydrated!==null){if(s===null){if(!v)throw Error(r(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[sn]=a}else xs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;At(a),v=!1}else v=Mh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(Gn(a),a):(Gn(a),null)}return Gn(a),(a.flags&128)!==0?(a.lanes=u,a):(u=h!==null,s=s!==null&&s.memoizedState!==null,u&&(h=a.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==v&&(h.flags|=2048)),u!==s&&u&&(a.child.flags|=8192),fc(a,a.updateQueue),At(a),null);case 4:return we(),s===null&&qp(a.stateNode.containerInfo),At(a),null;case 10:return ii(a.type),At(a),null;case 19:if(V(Lt),h=a.memoizedState,h===null)return At(a),null;if(v=(a.flags&128)!==0,b=h.rendering,b===null)if(v)Ja(h,!1);else{if(Nt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(b=Xu(s),b!==null){for(a.flags|=128,Ja(h,!1),s=b.updateQueue,a.updateQueue=s,fc(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)db(u,s),u=u.sibling;return T(Lt,Lt.current&1|2),at&&ni(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&me()>gc&&(a.flags|=128,v=!0,Ja(h,!1),a.lanes=4194304)}else{if(!v)if(s=Xu(b),s!==null){if(a.flags|=128,v=!0,s=s.updateQueue,a.updateQueue=s,fc(a,s),Ja(h,!0),h.tail===null&&h.tailMode==="hidden"&&!b.alternate&&!at)return At(a),null}else 2*me()-h.renderingStartTime>gc&&u!==536870912&&(a.flags|=128,v=!0,Ja(h,!1),a.lanes=4194304);h.isBackwards?(b.sibling=a.child,a.child=b):(s=h.last,s!==null?s.sibling=b:a.child=b,h.last=b)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=me(),s.sibling=null,u=Lt.current,T(Lt,v?u&1|2:u&1),at&&ni(a,h.treeForkCount),s):(At(a),null);case 22:case 23:return Gn(a),Hh(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(u&536870912)!==0&&(a.flags&128)===0&&(At(a),a.subtreeFlags&6&&(a.flags|=8192)):At(a),u=a.updateQueue,u!==null&&fc(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==u&&(a.flags|=2048),s!==null&&V(Rs),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),ii(jt),At(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function DO(s,a){switch(Th(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ii(jt),we(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Je(a),null;case 31:if(a.memoizedState!==null){if(Gn(a),a.alternate===null)throw Error(r(340));xs()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Gn(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));xs()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return V(Lt),null;case 4:return we(),null;case 10:return ii(a.type),null;case 22:case 23:return Gn(a),Hh(),s!==null&&V(Rs),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return ii(jt),null;case 25:return null;default:return null}}function FS(s,a){switch(Th(a),a.tag){case 3:ii(jt),we();break;case 26:case 27:case 5:Je(a);break;case 4:we();break;case 31:a.memoizedState!==null&&Gn(a);break;case 13:Gn(a);break;case 19:V(Lt);break;case 10:ii(a.type);break;case 22:case 23:Gn(a),Hh(),s!==null&&V(Rs);break;case 24:ii(jt)}}function Xa(s,a){try{var u=a.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var v=h.next;u=v;do{if((u.tag&s)===s){h=void 0;var b=u.create,_=u.inst;h=b(),_.destroy=h}u=u.next}while(u!==v)}}catch(A){vt(a,a.return,A)}}function zi(s,a,u){try{var h=a.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var b=v.next;h=b;do{if((h.tag&s)===s){var _=h.inst,A=_.destroy;if(A!==void 0){_.destroy=void 0,v=a;var F=u,Q=A;try{Q()}catch(ne){vt(v,F,ne)}}}h=h.next}while(h!==b)}}catch(ne){vt(a,a.return,ne)}}function $S(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{Ob(a,u)}catch(h){vt(s,s.return,h)}}}function BS(s,a,u){u.props=Ms(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){vt(s,a,h)}}function Wa(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(v){vt(s,a,v)}}function Fr(s,a){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(v){vt(s,a,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){vt(s,a,v)}else u.current=null}function US(s){var a=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(v){vt(s,s.return,v)}}function _p(s,a,u){try{var h=s.stateNode;nM(h,s.type,u,a),h[Tn]=a}catch(v){vt(s,s.return,v)}}function qS(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ui(s.type)||s.tag===4}function xp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||qS(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ui(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Cp(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Wr));else if(h!==4&&(h===27&&Ui(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(Cp(s,a,u),s=s.sibling;s!==null;)Cp(s,a,u),s=s.sibling}function dc(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(h!==4&&(h===27&&Ui(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(dc(s,a,u),s=s.sibling;s!==null;)dc(s,a,u),s=s.sibling}function HS(s){var a=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);un(a,h,u),a[sn]=s,a[Tn]=u}catch(b){vt(s,s.return,b)}}var ui=!1,Bt=!1,Ep=!1,VS=typeof WeakSet=="function"?WeakSet:Set,en=null;function zO(s,a){if(s=s.containerInfo,Kp=Nc,s=rb(s),vh(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var v=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var _=0,A=-1,F=-1,Q=0,ne=0,oe=s,J=null;t:for(;;){for(var W;oe!==u||v!==0&&oe.nodeType!==3||(A=_+v),oe!==b||h!==0&&oe.nodeType!==3||(F=_+h),oe.nodeType===3&&(_+=oe.nodeValue.length),(W=oe.firstChild)!==null;)J=oe,oe=W;for(;;){if(oe===s)break t;if(J===u&&++Q===v&&(A=_),J===b&&++ne===h&&(F=_),(W=oe.nextSibling)!==null)break;oe=J,J=oe.parentNode}oe=W}u=A===-1||F===-1?null:{start:A,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(Gp={focusedElem:s,selectionRange:u},Nc=!1,en=a;en!==null;)if(a=en,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,en=s;else for(;en!==null;){switch(a=en,b=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)v=s[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,u=a,v=b.memoizedProps,b=b.memoizedState,h=u.stateNode;try{var xe=Ms(u.type,v);s=h.getSnapshotBeforeUpdate(xe,b),h.__reactInternalSnapshotBeforeUpdate=s}catch(Ne){vt(u,u.return,Ne)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)Yp(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Yp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,en=s;break}en=a.return}}function KS(s,a,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:fi(s,u),h&4&&Xa(5,u);break;case 1:if(fi(s,u),h&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(_){vt(u,u.return,_)}else{var v=Ms(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(v,a,s.__reactInternalSnapshotBeforeUpdate)}catch(_){vt(u,u.return,_)}}h&64&&$S(u),h&512&&Wa(u,u.return);break;case 3:if(fi(s,u),h&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{Ob(s,a)}catch(_){vt(u,u.return,_)}}break;case 27:a===null&&h&4&&HS(u);case 26:case 5:fi(s,u),a===null&&h&4&&US(u),h&512&&Wa(u,u.return);break;case 12:fi(s,u);break;case 31:fi(s,u),h&4&&ZS(s,u);break;case 13:fi(s,u),h&4&&YS(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=HO.bind(null,u),cM(s,u))));break;case 22:if(h=u.memoizedState!==null||ui,!h){a=a!==null&&a.memoizedState!==null||Bt,v=ui;var b=Bt;ui=h,(Bt=a)&&!b?di(s,u,(u.subtreeFlags&8772)!==0):fi(s,u),ui=v,Bt=b}break;case 30:break;default:fi(s,u)}}function GS(s){var a=s.alternate;a!==null&&(s.alternate=null,GS(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&th(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Tt=null,Mn=!1;function ci(s,a,u){for(u=u.child;u!==null;)QS(s,a,u),u=u.sibling}function QS(s,a,u){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(We,u)}catch{}switch(u.tag){case 26:Bt||Fr(u,a),ci(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Bt||Fr(u,a);var h=Tt,v=Mn;Ui(u.type)&&(Tt=u.stateNode,Mn=!1),ci(s,a,u),ll(u.stateNode),Tt=h,Mn=v;break;case 5:Bt||Fr(u,a);case 6:if(h=Tt,v=Mn,Tt=null,ci(s,a,u),Tt=h,Mn=v,Tt!==null)if(Mn)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(u.stateNode)}catch(b){vt(u,a,b)}else try{Tt.removeChild(u.stateNode)}catch(b){vt(u,a,b)}break;case 18:Tt!==null&&(Mn?(s=Tt,$w(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Bo(s)):$w(Tt,u.stateNode));break;case 4:h=Tt,v=Mn,Tt=u.stateNode.containerInfo,Mn=!0,ci(s,a,u),Tt=h,Mn=v;break;case 0:case 11:case 14:case 15:zi(2,u,a),Bt||zi(4,u,a),ci(s,a,u);break;case 1:Bt||(Fr(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"&&BS(u,a,h)),ci(s,a,u);break;case 21:ci(s,a,u);break;case 22:Bt=(h=Bt)||u.memoizedState!==null,ci(s,a,u),Bt=h;break;default:ci(s,a,u)}}function ZS(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Bo(s)}catch(u){vt(a,a.return,u)}}}function YS(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Bo(s)}catch(u){vt(a,a.return,u)}}function LO(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new VS),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new VS),a;default:throw Error(r(435,s.tag))}}function hc(s,a){var u=LO(s);a.forEach(function(h){if(!u.has(h)){u.add(h);var v=VO.bind(null,s,h);h.then(v,v)}})}function In(s,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var v=u[h],b=s,_=a,A=_;e:for(;A!==null;){switch(A.tag){case 27:if(Ui(A.type)){Tt=A.stateNode,Mn=!1;break e}break;case 5:Tt=A.stateNode,Mn=!1;break e;case 3:case 4:Tt=A.stateNode.containerInfo,Mn=!0;break e}A=A.return}if(Tt===null)throw Error(r(160));QS(b,_,v),Tt=null,Mn=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)JS(a,s),a=a.sibling}var Ar=null;function JS(s,a){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:In(a,s),Nn(s),h&4&&(zi(3,s,s.return),Xa(3,s),zi(5,s,s.return));break;case 1:In(a,s),Nn(s),h&512&&(Bt||u===null||Fr(u,u.return)),h&64&&ui&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var v=Ar;if(In(a,s),Nn(s),h&512&&(Bt||u===null||Fr(u,u.return)),h&4){var b=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Ra]||b[sn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(h),v.head.insertBefore(b,v.querySelector("head > title"))),un(b,h,u),b[sn]=s,Wt(b),h=b;break e;case"link":var _=Jw("link","href",v).get(h+(u.href||""));if(_){for(var A=0;A<_.length;A++)if(b=_[A],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){_.splice(A,1);break t}}b=v.createElement(h),un(b,h,u),v.head.appendChild(b);break;case"meta":if(_=Jw("meta","content",v).get(h+(u.content||""))){for(A=0;A<_.length;A++)if(b=_[A],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){_.splice(A,1);break t}}b=v.createElement(h),un(b,h,u),v.head.appendChild(b);break;default:throw Error(r(468,h))}b[sn]=s,Wt(b),h=b}s.stateNode=h}else Xw(v,s.type,s.stateNode);else s.stateNode=Yw(v,h,s.memoizedProps);else b!==h?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,h===null?Xw(v,s.type,s.stateNode):Yw(v,h,s.memoizedProps)):h===null&&s.stateNode!==null&&_p(s,s.memoizedProps,u.memoizedProps)}break;case 27:In(a,s),Nn(s),h&512&&(Bt||u===null||Fr(u,u.return)),u!==null&&h&4&&_p(s,s.memoizedProps,u.memoizedProps);break;case 5:if(In(a,s),Nn(s),h&512&&(Bt||u===null||Fr(u,u.return)),s.flags&32){v=s.stateNode;try{uo(v,"")}catch(xe){vt(s,s.return,xe)}}h&4&&s.stateNode!=null&&(v=s.memoizedProps,_p(s,v,u!==null?u.memoizedProps:v)),h&1024&&(Ep=!0);break;case 6:if(In(a,s),Nn(s),h&4){if(s.stateNode===null)throw Error(r(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(xe){vt(s,s.return,xe)}}break;case 3:if(Tc=null,v=Ar,Ar=kc(a.containerInfo),In(a,s),Ar=v,Nn(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Bo(a.containerInfo)}catch(xe){vt(s,s.return,xe)}Ep&&(Ep=!1,XS(s));break;case 4:h=Ar,Ar=kc(s.stateNode.containerInfo),In(a,s),Nn(s),Ar=h;break;case 12:In(a,s),Nn(s);break;case 31:In(a,s),Nn(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,hc(s,h)));break;case 13:In(a,s),Nn(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(mc=me()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,hc(s,h)));break;case 22:v=s.memoizedState!==null;var F=u!==null&&u.memoizedState!==null,Q=ui,ne=Bt;if(ui=Q||v,Bt=ne||F,In(a,s),Bt=ne,ui=Q,Nn(s),h&8192)e:for(a=s.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(u===null||F||ui||Bt||Is(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){F=u=a;try{if(b=F.stateNode,v)_=b.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{A=F.stateNode;var oe=F.memoizedProps.style,J=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;A.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(xe){vt(F,F.return,xe)}}}else if(a.tag===6){if(u===null){F=a;try{F.stateNode.nodeValue=v?"":F.memoizedProps}catch(xe){vt(F,F.return,xe)}}}else if(a.tag===18){if(u===null){F=a;try{var W=F.stateNode;v?Bw(W,!0):Bw(F.stateNode,!1)}catch(xe){vt(F,F.return,xe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,hc(s,u))));break;case 19:In(a,s),Nn(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,hc(s,h)));break;case 30:break;case 21:break;default:In(a,s),Nn(s)}}function Nn(s){var a=s.flags;if(a&2){try{for(var u,h=s.return;h!==null;){if(qS(h)){u=h;break}h=h.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var v=u.stateNode,b=xp(s);dc(s,b,v);break;case 5:var _=u.stateNode;u.flags&32&&(uo(_,""),u.flags&=-33);var A=xp(s);dc(s,A,_);break;case 3:case 4:var F=u.stateNode.containerInfo,Q=xp(s);Cp(s,Q,F);break;default:throw Error(r(161))}}catch(ne){vt(s,s.return,ne)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function XS(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;XS(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function fi(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)KS(s,a.alternate,a),a=a.sibling}function Is(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:zi(4,a,a.return),Is(a);break;case 1:Fr(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&BS(a,a.return,u),Is(a);break;case 27:ll(a.stateNode);case 26:case 5:Fr(a,a.return),Is(a);break;case 22:a.memoizedState===null&&Is(a);break;case 30:Is(a);break;default:Is(a)}s=s.sibling}}function di(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,v=s,b=a,_=b.flags;switch(b.tag){case 0:case 11:case 15:di(v,b,u),Xa(4,b);break;case 1:if(di(v,b,u),h=b,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Q){vt(h,h.return,Q)}if(h=b,v=h.updateQueue,v!==null){var A=h.stateNode;try{var F=v.shared.hiddenCallbacks;if(F!==null)for(v.shared.hiddenCallbacks=null,v=0;v<F.length;v++)Tb(F[v],A)}catch(Q){vt(h,h.return,Q)}}u&&_&64&&$S(b),Wa(b,b.return);break;case 27:HS(b);case 26:case 5:di(v,b,u),u&&h===null&&_&4&&US(b),Wa(b,b.return);break;case 12:di(v,b,u);break;case 31:di(v,b,u),u&&_&4&&ZS(v,b);break;case 13:di(v,b,u),u&&_&4&&YS(v,b);break;case 22:b.memoizedState===null&&di(v,b,u),Wa(b,b.return);break;case 30:break;default:di(v,b,u)}a=a.sibling}}function Rp(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Fa(u))}function kp(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Fa(s))}function Tr(s,a,u,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)WS(s,a,u,h),a=a.sibling}function WS(s,a,u,h){var v=a.flags;switch(a.tag){case 0:case 11:case 15:Tr(s,a,u,h),v&2048&&Xa(9,a);break;case 1:Tr(s,a,u,h);break;case 3:Tr(s,a,u,h),v&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Fa(s)));break;case 12:if(v&2048){Tr(s,a,u,h),s=a.stateNode;try{var b=a.memoizedProps,_=b.id,A=b.onPostCommit;typeof A=="function"&&A(_,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(F){vt(a,a.return,F)}}else Tr(s,a,u,h);break;case 31:Tr(s,a,u,h);break;case 13:Tr(s,a,u,h);break;case 23:break;case 22:b=a.stateNode,_=a.alternate,a.memoizedState!==null?b._visibility&2?Tr(s,a,u,h):el(s,a):b._visibility&2?Tr(s,a,u,h):(b._visibility|=2,Oo(s,a,u,h,(a.subtreeFlags&10256)!==0||!1)),v&2048&&Rp(_,a);break;case 24:Tr(s,a,u,h),v&2048&&kp(a.alternate,a);break;default:Tr(s,a,u,h)}}function Oo(s,a,u,h,v){for(v=v&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=s,_=a,A=u,F=h,Q=_.flags;switch(_.tag){case 0:case 11:case 15:Oo(b,_,A,F,v),Xa(8,_);break;case 23:break;case 22:var ne=_.stateNode;_.memoizedState!==null?ne._visibility&2?Oo(b,_,A,F,v):el(b,_):(ne._visibility|=2,Oo(b,_,A,F,v)),v&&Q&2048&&Rp(_.alternate,_);break;case 24:Oo(b,_,A,F,v),v&&Q&2048&&kp(_.alternate,_);break;default:Oo(b,_,A,F,v)}a=a.sibling}}function el(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,h=a,v=h.flags;switch(h.tag){case 22:el(u,h),v&2048&&Rp(h.alternate,h);break;case 24:el(u,h),v&2048&&kp(h.alternate,h);break;default:el(u,h)}a=a.sibling}}var tl=8192;function Mo(s,a,u){if(s.subtreeFlags&tl)for(s=s.child;s!==null;)ew(s,a,u),s=s.sibling}function ew(s,a,u){switch(s.tag){case 26:Mo(s,a,u),s.flags&tl&&s.memoizedState!==null&&_M(u,Ar,s.memoizedState,s.memoizedProps);break;case 5:Mo(s,a,u);break;case 3:case 4:var h=Ar;Ar=kc(s.stateNode.containerInfo),Mo(s,a,u),Ar=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=tl,tl=16777216,Mo(s,a,u),tl=h):Mo(s,a,u));break;default:Mo(s,a,u)}}function tw(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function nl(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];en=h,rw(h,s)}tw(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)nw(s),s=s.sibling}function nw(s){switch(s.tag){case 0:case 11:case 15:nl(s),s.flags&2048&&zi(9,s,s.return);break;case 3:nl(s);break;case 12:nl(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,pc(s)):nl(s);break;default:nl(s)}}function pc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];en=h,rw(h,s)}tw(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:zi(8,a,a.return),pc(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,pc(a));break;default:pc(a)}s=s.sibling}}function rw(s,a){for(;en!==null;){var u=en;switch(u.tag){case 0:case 11:case 15:zi(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Fa(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,en=h;else e:for(u=s;en!==null;){h=en;var v=h.sibling,b=h.return;if(GS(h),h===u){en=null;break e}if(v!==null){v.return=b,en=v;break e}en=b}}}var PO={getCacheForType:function(s){var a=an(jt),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u},cacheSignal:function(){return an(jt).controller.signal}},jO=typeof WeakMap=="function"?WeakMap:Map,mt=0,Ct=null,et=null,rt=0,yt=0,Qn=null,Li=!1,Io=!1,Ap=!1,hi=0,Nt=0,Pi=0,Ns=0,Tp=0,Zn=0,No=0,rl=null,Dn=null,Op=!1,mc=0,iw=0,gc=1/0,yc=null,ji=null,Vt=0,Fi=null,Do=null,pi=0,Mp=0,Ip=null,sw=null,il=0,Np=null;function Yn(){return(mt&2)!==0&&rt!==0?rt&-rt:$.T!==null?Fp():wv()}function ow(){if(Zn===0)if((rt&536870912)===0||at){var s=Lr;Lr<<=1,(Lr&3932160)===0&&(Lr=262144),Zn=s}else Zn=536870912;return s=Kn.current,s!==null&&(s.flags|=32),Zn}function zn(s,a,u){(s===Ct&&(yt===2||yt===9)||s.cancelPendingCommit!==null)&&(zo(s,0),$i(s,rt,Zn,!1)),Ea(s,u),((mt&2)===0||s!==Ct)&&(s===Ct&&((mt&2)===0&&(Ns|=u),Nt===4&&$i(s,rt,Zn,!1)),$r(s))}function aw(s,a,u){if((mt&6)!==0)throw Error(r(327));var h=!u&&(a&127)===0&&(a&s.expiredLanes)===0||gs(s,a),v=h?BO(s,a):zp(s,a,!0),b=h;do{if(v===0){Io&&!h&&$i(s,a,0,!1);break}else{if(u=s.current.alternate,b&&!FO(u)){v=zp(s,a,!1),b=!1;continue}if(v===2){if(b=a,s.errorRecoveryDisabledLanes&b)var _=0;else _=s.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){a=_;e:{var A=s;v=rl;var F=A.current.memoizedState.isDehydrated;if(F&&(zo(A,_).flags|=256),_=zp(A,_,!1),_!==2){if(Ap&&!F){A.errorRecoveryDisabledLanes|=b,Ns|=b,v=4;break e}b=Dn,Dn=v,b!==null&&(Dn===null?Dn=b:Dn.push.apply(Dn,b))}v=_}if(b=!1,v!==2)continue}}if(v===1){zo(s,0),$i(s,a,0,!0);break}e:{switch(h=s,b=v,b){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:$i(h,a,Zn,!Li);break e;case 2:Dn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(v=mc+300-me(),10<v)){if($i(h,a,Zn,!Li),ms(h,0,!0)!==0)break e;pi=a,h.timeoutHandle=jw(lw.bind(null,h,u,Dn,yc,Op,a,Zn,Ns,No,Li,b,"Throttled",-0,0),v);break e}lw(h,u,Dn,yc,Op,a,Zn,Ns,No,Li,b,null,-0,0)}}break}while(!0);$r(s)}function lw(s,a,u,h,v,b,_,A,F,Q,ne,oe,J,W){if(s.timeoutHandle=-1,oe=a.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wr},ew(a,b,oe);var xe=(b&62914560)===b?mc-me():(b&4194048)===b?iw-me():0;if(xe=xM(oe,xe),xe!==null){pi=b,s.cancelPendingCommit=xe(gw.bind(null,s,a,b,u,h,v,_,A,F,ne,oe,null,J,W)),$i(s,b,_,!Q);return}}gw(s,a,b,u,h,v,_,A,F)}function FO(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var v=u[h],b=v.getSnapshot;v=v.value;try{if(!Hn(b(),v))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function $i(s,a,u,h){a&=~Tp,a&=~Ns,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var v=a;0<v;){var b=31-lt(v),_=1<<b;h[b]=-1,v&=~_}u!==0&&vv(s,u,a)}function vc(){return(mt&6)===0?(sl(0),!1):!0}function Dp(){if(et!==null){if(yt===0)var s=et.return;else s=et,ri=Cs=null,Yh(s),Eo=null,Ba=0,s=et;for(;s!==null;)FS(s.alternate,s),s=s.return;et=null}}function zo(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,sM(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),pi=0,Dp(),Ct=s,et=u=ti(s.current,null),rt=a,yt=0,Qn=null,Li=!1,Io=gs(s,a),Ap=!1,No=Zn=Tp=Ns=Pi=Nt=0,Dn=rl=null,Op=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var v=31-lt(h),b=1<<v;a|=s[v],h&=~b}return hi=a,Fu(),u}function uw(s,a){He=null,$.H=Za,a===Co||a===Gu?(a=Eb(),yt=3):a===jh?(a=Eb(),yt=4):yt=a===dp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Qn=a,et===null&&(Nt=1,ac(s,dr(a,s.current)))}function cw(){var s=Kn.current;return s===null?!0:(rt&4194048)===rt?gr===null:(rt&62914560)===rt||(rt&536870912)!==0?s===gr:!1}function fw(){var s=$.H;return $.H=Za,s===null?Za:s}function dw(){var s=$.A;return $.A=PO,s}function bc(){Nt=4,Li||(rt&4194048)!==rt&&Kn.current!==null||(Io=!0),(Pi&134217727)===0&&(Ns&134217727)===0||Ct===null||$i(Ct,rt,Zn,!1)}function zp(s,a,u){var h=mt;mt|=2;var v=fw(),b=dw();(Ct!==s||rt!==a)&&(yc=null,zo(s,a)),a=!1;var _=Nt;e:do try{if(yt!==0&&et!==null){var A=et,F=Qn;switch(yt){case 8:Dp(),_=6;break e;case 3:case 2:case 9:case 6:Kn.current===null&&(a=!0);var Q=yt;if(yt=0,Qn=null,Lo(s,A,F,Q),u&&Io){_=0;break e}break;default:Q=yt,yt=0,Qn=null,Lo(s,A,F,Q)}}$O(),_=Nt;break}catch(ne){uw(s,ne)}while(!0);return a&&s.shellSuspendCounter++,ri=Cs=null,mt=h,$.H=v,$.A=b,et===null&&(Ct=null,rt=0,Fu()),_}function $O(){for(;et!==null;)hw(et)}function BO(s,a){var u=mt;mt|=2;var h=fw(),v=dw();Ct!==s||rt!==a?(yc=null,gc=me()+500,zo(s,a)):Io=gs(s,a);e:do try{if(yt!==0&&et!==null){a=et;var b=Qn;t:switch(yt){case 1:yt=0,Qn=null,Lo(s,a,b,1);break;case 2:case 9:if(xb(b)){yt=0,Qn=null,pw(a);break}a=function(){yt!==2&&yt!==9||Ct!==s||(yt=7),$r(s)},b.then(a,a);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:xb(b)?(yt=0,Qn=null,pw(a)):(yt=0,Qn=null,Lo(s,a,b,7));break;case 5:var _=null;switch(et.tag){case 26:_=et.memoizedState;case 5:case 27:var A=et;if(_?Ww(_):A.stateNode.complete){yt=0,Qn=null;var F=A.sibling;if(F!==null)et=F;else{var Q=A.return;Q!==null?(et=Q,Sc(Q)):et=null}break t}}yt=0,Qn=null,Lo(s,a,b,5);break;case 6:yt=0,Qn=null,Lo(s,a,b,6);break;case 8:Dp(),Nt=6;break e;default:throw Error(r(462))}}UO();break}catch(ne){uw(s,ne)}while(!0);return ri=Cs=null,$.H=h,$.A=v,mt=u,et!==null?0:(Ct=null,rt=0,Fu(),Nt)}function UO(){for(;et!==null&&!Fe();)hw(et)}function hw(s){var a=PS(s.alternate,s,hi);s.memoizedProps=s.pendingProps,a===null?Sc(s):et=a}function pw(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=MS(u,a,a.pendingProps,a.type,void 0,rt);break;case 11:a=MS(u,a,a.pendingProps,a.type.render,a.ref,rt);break;case 5:Yh(a);default:FS(u,a),a=et=db(a,hi),a=PS(u,a,hi)}s.memoizedProps=s.pendingProps,a===null?Sc(s):et=a}function Lo(s,a,u,h){ri=Cs=null,Yh(a),Eo=null,Ba=0;var v=a.return;try{if(OO(s,v,a,u,rt)){Nt=1,ac(s,dr(u,s.current)),et=null;return}}catch(b){if(v!==null)throw et=v,b;Nt=1,ac(s,dr(u,s.current)),et=null;return}a.flags&32768?(at||h===1?s=!0:Io||(rt&536870912)!==0?s=!1:(Li=s=!0,(h===2||h===9||h===3||h===6)&&(h=Kn.current,h!==null&&h.tag===13&&(h.flags|=16384))),mw(a,s)):Sc(a)}function Sc(s){var a=s;do{if((a.flags&32768)!==0){mw(a,Li);return}s=a.return;var u=NO(a.alternate,a,hi);if(u!==null){et=u;return}if(a=a.sibling,a!==null){et=a;return}et=a=s}while(a!==null);Nt===0&&(Nt=5)}function mw(s,a){do{var u=DO(s.alternate,s);if(u!==null){u.flags&=32767,et=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){et=s;return}et=s=u}while(s!==null);Nt=6,et=null}function gw(s,a,u,h,v,b,_,A,F){s.cancelPendingCommit=null;do wc();while(Vt!==0);if((mt&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(b=a.lanes|a.childLanes,b|=xh,wT(s,u,b,_,A,F),s===Ct&&(et=Ct=null,rt=0),Do=a,Fi=s,pi=u,Mp=b,Ip=v,sw=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,KO(Se,function(){return ww(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=$.T,$.T=null,v=te.p,te.p=2,_=mt,mt|=4;try{zO(s,a,u)}finally{mt=_,te.p=v,$.T=h}}Vt=1,yw(),vw(),bw()}}function yw(){if(Vt===1){Vt=0;var s=Fi,a=Do,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=$.T,$.T=null;var h=te.p;te.p=2;var v=mt;mt|=4;try{JS(a,s);var b=Gp,_=rb(s.containerInfo),A=b.focusedElem,F=b.selectionRange;if(_!==A&&A&&A.ownerDocument&&nb(A.ownerDocument.documentElement,A)){if(F!==null&&vh(A)){var Q=F.start,ne=F.end;if(ne===void 0&&(ne=Q),"selectionStart"in A)A.selectionStart=Q,A.selectionEnd=Math.min(ne,A.value.length);else{var oe=A.ownerDocument||document,J=oe&&oe.defaultView||window;if(J.getSelection){var W=J.getSelection(),xe=A.textContent.length,Ne=Math.min(F.start,xe),_t=F.end===void 0?Ne:Math.min(F.end,xe);!W.extend&&Ne>_t&&(_=_t,_t=Ne,Ne=_);var q=tb(A,Ne),B=tb(A,_t);if(q&&B&&(W.rangeCount!==1||W.anchorNode!==q.node||W.anchorOffset!==q.offset||W.focusNode!==B.node||W.focusOffset!==B.offset)){var G=oe.createRange();G.setStart(q.node,q.offset),W.removeAllRanges(),Ne>_t?(W.addRange(G),W.extend(B.node,B.offset)):(G.setEnd(B.node,B.offset),W.addRange(G))}}}}for(oe=[],W=A;W=W.parentNode;)W.nodeType===1&&oe.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<oe.length;A++){var ie=oe[A];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Nc=!!Kp,Gp=Kp=null}finally{mt=v,te.p=h,$.T=u}}s.current=a,Vt=2}}function vw(){if(Vt===2){Vt=0;var s=Fi,a=Do,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=$.T,$.T=null;var h=te.p;te.p=2;var v=mt;mt|=4;try{KS(s,a.alternate,a)}finally{mt=v,te.p=h,$.T=u}}Vt=3}}function bw(){if(Vt===4||Vt===3){Vt=0,be();var s=Fi,a=Do,u=pi,h=sw;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Vt=5:(Vt=0,Do=Fi=null,Sw(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(ji=null),Wd(u),a=a.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(We,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=$.T,v=te.p,te.p=2,$.T=null;try{for(var b=s.onRecoverableError,_=0;_<h.length;_++){var A=h[_];b(A.value,{componentStack:A.stack})}}finally{$.T=a,te.p=v}}(pi&3)!==0&&wc(),$r(s),v=s.pendingLanes,(u&261930)!==0&&(v&42)!==0?s===Np?il++:(il=0,Np=s):il=0,sl(0)}}function Sw(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Fa(a)))}function wc(){return yw(),vw(),bw(),ww()}function ww(){if(Vt!==5)return!1;var s=Fi,a=Mp;Mp=0;var u=Wd(pi),h=$.T,v=te.p;try{te.p=32>u?32:u,$.T=null,u=Ip,Ip=null;var b=Fi,_=pi;if(Vt=0,Do=Fi=null,pi=0,(mt&6)!==0)throw Error(r(331));var A=mt;if(mt|=4,nw(b.current),WS(b,b.current,_,u),mt=A,sl(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(We,b)}catch{}return!0}finally{te.p=v,$.T=h,Sw(s,a)}}function _w(s,a,u){a=dr(u,a),a=fp(s.stateNode,a,2),s=Ii(s,a,2),s!==null&&(Ea(s,2),$r(s))}function vt(s,a,u){if(s.tag===3)_w(s,s,u);else for(;a!==null;){if(a.tag===3){_w(a,s,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ji===null||!ji.has(h))){s=dr(u,s),u=xS(2),h=Ii(a,u,2),h!==null&&(CS(u,h,a,s),Ea(h,2),$r(h));break}}a=a.return}}function Lp(s,a,u){var h=s.pingCache;if(h===null){h=s.pingCache=new jO;var v=new Set;h.set(a,v)}else v=h.get(a),v===void 0&&(v=new Set,h.set(a,v));v.has(u)||(Ap=!0,v.add(u),s=qO.bind(null,s,a,u),a.then(s,s))}function qO(s,a,u){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Ct===s&&(rt&u)===u&&(Nt===4||Nt===3&&(rt&62914560)===rt&&300>me()-mc?(mt&2)===0&&zo(s,0):Tp|=u,No===rt&&(No=0)),$r(s)}function xw(s,a){a===0&&(a=yv()),s=ws(s,a),s!==null&&(Ea(s,a),$r(s))}function HO(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),xw(s,u)}function VO(s,a){var u=0;switch(s.tag){case 31:case 13:var h=s.stateNode,v=s.memoizedState;v!==null&&(u=v.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(a),xw(s,u)}function KO(s,a){return ft(s,a)}var _c=null,Po=null,Pp=!1,xc=!1,jp=!1,Bi=0;function $r(s){s!==Po&&s.next===null&&(Po===null?_c=Po=s:Po=Po.next=s),xc=!0,Pp||(Pp=!0,QO())}function sl(s,a){if(!jp&&xc){jp=!0;do for(var u=!1,h=_c;h!==null;){if(s!==0){var v=h.pendingLanes;if(v===0)var b=0;else{var _=h.suspendedLanes,A=h.pingedLanes;b=(1<<31-lt(42|s)+1)-1,b&=v&~(_&~A),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,kw(h,b))}else b=rt,b=ms(h,h===Ct?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||gs(h,b)||(u=!0,kw(h,b));h=h.next}while(u);jp=!1}}function GO(){Cw()}function Cw(){xc=Pp=!1;var s=0;Bi!==0&&iM()&&(s=Bi);for(var a=me(),u=null,h=_c;h!==null;){var v=h.next,b=Ew(h,a);b===0?(h.next=null,u===null?_c=v:u.next=v,v===null&&(Po=u)):(u=h,(s!==0||(b&3)!==0)&&(xc=!0)),h=v}Vt!==0&&Vt!==5||sl(s),Bi!==0&&(Bi=0)}function Ew(s,a){for(var u=s.suspendedLanes,h=s.pingedLanes,v=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var _=31-lt(b),A=1<<_,F=v[_];F===-1?((A&u)===0||(A&h)!==0)&&(v[_]=gv(A,a)):F<=a&&(s.expiredLanes|=A),b&=~A}if(a=Ct,u=rt,u=ms(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===a&&(yt===2||yt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&ge(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||gs(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(h!==null&&ge(h),Wd(u)){case 2:case 8:u=ue;break;case 32:u=Se;break;case 268435456:u=ve;break;default:u=Se}return h=Rw.bind(null,s),u=ft(u,h),s.callbackPriority=a,s.callbackNode=u,a}return h!==null&&h!==null&&ge(h),s.callbackPriority=2,s.callbackNode=null,2}function Rw(s,a){if(Vt!==0&&Vt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(wc()&&s.callbackNode!==u)return null;var h=rt;return h=ms(s,s===Ct?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(aw(s,h,a),Ew(s,me()),s.callbackNode!=null&&s.callbackNode===u?Rw.bind(null,s):null)}function kw(s,a){if(wc())return null;aw(s,a,!0)}function QO(){oM(function(){(mt&6)!==0?ft(X,GO):Cw()})}function Fp(){if(Bi===0){var s=_o;s===0&&(s=Sn,Sn<<=1,(Sn&261888)===0&&(Sn=256)),Bi=s}return Bi}function Aw(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Mu(""+s)}function Tw(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function ZO(s,a,u,h,v){if(a==="submit"&&u&&u.stateNode===v){var b=Aw((v[Tn]||null).action),_=h.submitter;_&&(a=(a=_[Tn]||null)?Aw(a.formAction):_.getAttribute("formAction"),a!==null&&(b=a,_=null));var A=new zu("action","action",null,h,v);s.push({event:A,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Bi!==0){var F=_?Tw(v,_):new FormData(v);sp(u,{pending:!0,data:F,method:v.method,action:b},null,F)}}else typeof b=="function"&&(A.preventDefault(),F=_?Tw(v,_):new FormData(v),sp(u,{pending:!0,data:F,method:v.method,action:b},b,F))},currentTarget:v}]})}}for(var $p=0;$p<_h.length;$p++){var Bp=_h[$p],YO=Bp.toLowerCase(),JO=Bp[0].toUpperCase()+Bp.slice(1);kr(YO,"on"+JO)}kr(ob,"onAnimationEnd"),kr(ab,"onAnimationIteration"),kr(lb,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(hO,"onTransitionRun"),kr(pO,"onTransitionStart"),kr(mO,"onTransitionCancel"),kr(ub,"onTransitionEnd"),ao("onMouseEnter",["mouseout","mouseover"]),ao("onMouseLeave",["mouseout","mouseover"]),ao("onPointerEnter",["pointerout","pointerover"]),ao("onPointerLeave",["pointerout","pointerover"]),ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ys("onBeforeInput",["compositionend","keypress","textInput","paste"]),ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ol));function Ow(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],v=h.event;h=h.listeners;e:{var b=void 0;if(a)for(var _=h.length-1;0<=_;_--){var A=h[_],F=A.instance,Q=A.currentTarget;if(A=A.listener,F!==b&&v.isPropagationStopped())break e;b=A,v.currentTarget=Q;try{b(v)}catch(ne){ju(ne)}v.currentTarget=null,b=F}else for(_=0;_<h.length;_++){if(A=h[_],F=A.instance,Q=A.currentTarget,A=A.listener,F!==b&&v.isPropagationStopped())break e;b=A,v.currentTarget=Q;try{b(v)}catch(ne){ju(ne)}v.currentTarget=null,b=F}}}}function tt(s,a){var u=a[eh];u===void 0&&(u=a[eh]=new Set);var h=s+"__bubble";u.has(h)||(Mw(a,s,2,!1),u.add(h))}function Up(s,a,u){var h=0;a&&(h|=4),Mw(u,s,h,a)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function qp(s){if(!s[Cc]){s[Cc]=!0,Cv.forEach(function(u){u!=="selectionchange"&&(XO.has(u)||Up(u,!1,s),Up(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Cc]||(a[Cc]=!0,Up("selectionchange",!1,a))}}function Mw(s,a,u,h){switch(o_(a)){case 2:var v=RM;break;case 8:v=kM;break;default:v=im}u=v.bind(null,a,u,s),v=void 0,!uh||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),h?v!==void 0?s.addEventListener(a,u,{capture:!0,passive:v}):s.addEventListener(a,u,!0):v!==void 0?s.addEventListener(a,u,{passive:v}):s.addEventListener(a,u,!1)}function Hp(s,a,u,h,v){var b=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var A=h.stateNode.containerInfo;if(A===v)break;if(_===4)for(_=h.return;_!==null;){var F=_.tag;if((F===3||F===4)&&_.stateNode.containerInfo===v)return;_=_.return}for(;A!==null;){if(_=io(A),_===null)return;if(F=_.tag,F===5||F===6||F===26||F===27){h=b=_;continue e}A=A.parentNode}}h=h.return}Lv(function(){var Q=b,ne=ah(u),oe=[];e:{var J=cb.get(s);if(J!==void 0){var W=zu,xe=s;switch(s){case"keypress":if(Nu(u)===0)break e;case"keydown":case"keyup":W=VT;break;case"focusin":xe="focus",W=hh;break;case"focusout":xe="blur",W=hh;break;case"beforeblur":case"afterblur":W=hh;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Fv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=NT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=QT;break;case ob:case ab:case lb:W=LT;break;case ub:W=YT;break;case"scroll":case"scrollend":W=MT;break;case"wheel":W=XT;break;case"copy":case"cut":case"paste":W=jT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Bv;break;case"toggle":case"beforetoggle":W=eO}var Ne=(a&4)!==0,_t=!Ne&&(s==="scroll"||s==="scrollend"),q=Ne?J!==null?J+"Capture":null:J;Ne=[];for(var B=Q,G;B!==null;){var ie=B;if(G=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||G===null||q===null||(ie=Aa(B,q),ie!=null&&Ne.push(al(B,ie,G))),_t)break;B=B.return}0<Ne.length&&(J=new W(J,xe,null,u,ne),oe.push({event:J,listeners:Ne}))}}if((a&7)===0){e:{if(J=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",J&&u!==oh&&(xe=u.relatedTarget||u.fromElement)&&(io(xe)||xe[ro]))break e;if((W||J)&&(J=ne.window===ne?ne:(J=ne.ownerDocument)?J.defaultView||J.parentWindow:window,W?(xe=u.relatedTarget||u.toElement,W=Q,xe=xe?io(xe):null,xe!==null&&(_t=o(xe),Ne=xe.tag,xe!==_t||Ne!==5&&Ne!==27&&Ne!==6)&&(xe=null)):(W=null,xe=Q),W!==xe)){if(Ne=Fv,ie="onMouseLeave",q="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Ne=Bv,ie="onPointerLeave",q="onPointerEnter",B="pointer"),_t=W==null?J:ka(W),G=xe==null?J:ka(xe),J=new Ne(ie,B+"leave",W,u,ne),J.target=_t,J.relatedTarget=G,ie=null,io(ne)===Q&&(Ne=new Ne(q,B+"enter",xe,u,ne),Ne.target=G,Ne.relatedTarget=_t,ie=Ne),_t=ie,W&&xe)t:{for(Ne=WO,q=W,B=xe,G=0,ie=q;ie;ie=Ne(ie))G++;ie=0;for(var Te=B;Te;Te=Ne(Te))ie++;for(;0<G-ie;)q=Ne(q),G--;for(;0<ie-G;)B=Ne(B),ie--;for(;G--;){if(q===B||B!==null&&q===B.alternate){Ne=q;break t}q=Ne(q),B=Ne(B)}Ne=null}else Ne=null;W!==null&&Iw(oe,J,W,Ne,!1),xe!==null&&_t!==null&&Iw(oe,_t,xe,Ne,!0)}}e:{if(J=Q?ka(Q):window,W=J.nodeName&&J.nodeName.toLowerCase(),W==="select"||W==="input"&&J.type==="file")var ht=Zv;else if(Gv(J))if(Yv)ht=cO;else{ht=lO;var Ee=aO}else W=J.nodeName,!W||W.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Q&&sh(Q.elementType)&&(ht=Zv):ht=uO;if(ht&&(ht=ht(s,Q))){Qv(oe,ht,u,ne);break e}Ee&&Ee(s,J,Q),s==="focusout"&&Q&&J.type==="number"&&Q.memoizedProps.value!=null&&ih(J,"number",J.value)}switch(Ee=Q?ka(Q):window,s){case"focusin":(Gv(Ee)||Ee.contentEditable==="true")&&(po=Ee,bh=Q,La=null);break;case"focusout":La=bh=po=null;break;case"mousedown":Sh=!0;break;case"contextmenu":case"mouseup":case"dragend":Sh=!1,ib(oe,u,ne);break;case"selectionchange":if(dO)break;case"keydown":case"keyup":ib(oe,u,ne)}var Ke;if(mh)e:{switch(s){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else ho?Vv(s,u)&&(it="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(it="onCompositionStart");it&&(Uv&&u.locale!=="ko"&&(ho||it!=="onCompositionStart"?it==="onCompositionEnd"&&ho&&(Ke=Pv()):(Ei=ne,ch="value"in Ei?Ei.value:Ei.textContent,ho=!0)),Ee=Ec(Q,it),0<Ee.length&&(it=new $v(it,s,null,u,ne),oe.push({event:it,listeners:Ee}),Ke?it.data=Ke:(Ke=Kv(u),Ke!==null&&(it.data=Ke)))),(Ke=nO?rO(s,u):iO(s,u))&&(it=Ec(Q,"onBeforeInput"),0<it.length&&(Ee=new $v("onBeforeInput","beforeinput",null,u,ne),oe.push({event:Ee,listeners:it}),Ee.data=Ke)),ZO(oe,s,Q,u,ne)}Ow(oe,a)})}function al(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Ec(s,a){for(var u=a+"Capture",h=[];s!==null;){var v=s,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=Aa(s,u),v!=null&&h.unshift(al(s,v,b)),v=Aa(s,a),v!=null&&h.push(al(s,v,b))),s.tag===3)return h;s=s.return}return[]}function WO(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Iw(s,a,u,h,v){for(var b=a._reactName,_=[];u!==null&&u!==h;){var A=u,F=A.alternate,Q=A.stateNode;if(A=A.tag,F!==null&&F===h)break;A!==5&&A!==26&&A!==27||Q===null||(F=Q,v?(Q=Aa(u,b),Q!=null&&_.unshift(al(u,Q,F))):v||(Q=Aa(u,b),Q!=null&&_.push(al(u,Q,F)))),u=u.return}_.length!==0&&s.push({event:a,listeners:_})}var eM=/\r\n?/g,tM=/\u0000|\uFFFD/g;function Nw(s){return(typeof s=="string"?s:""+s).replace(eM,`
`).replace(tM,"")}function Dw(s,a){return a=Nw(a),Nw(s)===a}function wt(s,a,u,h,v,b){switch(u){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||uo(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&uo(s,""+h);break;case"className":Tu(s,"class",h);break;case"tabIndex":Tu(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Tu(s,u,h);break;case"style":Dv(s,h,b);break;case"data":if(a!=="object"){Tu(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Mu(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(a!=="input"&&wt(s,a,"name",v.name,v,null),wt(s,a,"formEncType",v.formEncType,v,null),wt(s,a,"formMethod",v.formMethod,v,null),wt(s,a,"formTarget",v.formTarget,v,null)):(wt(s,a,"encType",v.encType,v,null),wt(s,a,"method",v.method,v,null),wt(s,a,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Mu(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=Wr);break;case"onScroll":h!=null&&tt("scroll",s);break;case"onScrollEnd":h!=null&&tt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=Mu(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":tt("beforetoggle",s),tt("toggle",s),Au(s,"popover",h);break;case"xlinkActuate":Xr(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Xr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Xr(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Xr(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Xr(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Xr(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Xr(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Xr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Xr(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Au(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=TT.get(u)||u,Au(s,u,h))}}function Vp(s,a,u,h,v,b){switch(u){case"style":Dv(s,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"children":typeof h=="string"?uo(s,h):(typeof h=="number"||typeof h=="bigint")&&uo(s,""+h);break;case"onScroll":h!=null&&tt("scroll",s);break;case"onScrollEnd":h!=null&&tt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Wr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ev.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),a=u.slice(2,v?u.length-7:void 0),b=s[Tn]||null,b=b!=null?b[u]:null,typeof b=="function"&&s.removeEventListener(a,b,v),typeof h=="function")){typeof b!="function"&&b!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,h,v);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):Au(s,u,h)}}}function un(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",s),tt("load",s);var h=!1,v=!1,b;for(b in u)if(u.hasOwnProperty(b)){var _=u[b];if(_!=null)switch(b){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:wt(s,a,b,_,u,null)}}v&&wt(s,a,"srcSet",u.srcSet,u,null),h&&wt(s,a,"src",u.src,u,null);return;case"input":tt("invalid",s);var A=b=_=v=null,F=null,Q=null;for(h in u)if(u.hasOwnProperty(h)){var ne=u[h];if(ne!=null)switch(h){case"name":v=ne;break;case"type":_=ne;break;case"checked":F=ne;break;case"defaultChecked":Q=ne;break;case"value":b=ne;break;case"defaultValue":A=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,a));break;default:wt(s,a,h,ne,u,null)}}Ov(s,b,A,F,Q,_,v,!1);return;case"select":tt("invalid",s),h=_=b=null;for(v in u)if(u.hasOwnProperty(v)&&(A=u[v],A!=null))switch(v){case"value":b=A;break;case"defaultValue":_=A;break;case"multiple":h=A;default:wt(s,a,v,A,u,null)}a=b,u=_,s.multiple=!!h,a!=null?lo(s,!!h,a,!1):u!=null&&lo(s,!!h,u,!0);return;case"textarea":tt("invalid",s),b=v=h=null;for(_ in u)if(u.hasOwnProperty(_)&&(A=u[_],A!=null))switch(_){case"value":h=A;break;case"defaultValue":v=A;break;case"children":b=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:wt(s,a,_,A,u,null)}Iv(s,h,v,b);return;case"option":for(F in u)u.hasOwnProperty(F)&&(h=u[F],h!=null)&&(F==="selected"?s.selected=h&&typeof h!="function"&&typeof h!="symbol":wt(s,a,F,h,u,null));return;case"dialog":tt("beforetoggle",s),tt("toggle",s),tt("cancel",s),tt("close",s);break;case"iframe":case"object":tt("load",s);break;case"video":case"audio":for(h=0;h<ol.length;h++)tt(ol[h],s);break;case"image":tt("error",s),tt("load",s);break;case"details":tt("toggle",s);break;case"embed":case"source":case"link":tt("error",s),tt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in u)if(u.hasOwnProperty(Q)&&(h=u[Q],h!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:wt(s,a,Q,h,u,null)}return;default:if(sh(a)){for(ne in u)u.hasOwnProperty(ne)&&(h=u[ne],h!==void 0&&Vp(s,a,ne,h,u,void 0));return}}for(A in u)u.hasOwnProperty(A)&&(h=u[A],h!=null&&wt(s,a,A,h,u,null))}function nM(s,a,u,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,_=null,A=null,F=null,Q=null,ne=null;for(W in u){var oe=u[W];if(u.hasOwnProperty(W)&&oe!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":F=oe;default:h.hasOwnProperty(W)||wt(s,a,W,null,h,oe)}}for(var J in h){var W=h[J];if(oe=u[J],h.hasOwnProperty(J)&&(W!=null||oe!=null))switch(J){case"type":b=W;break;case"name":v=W;break;case"checked":Q=W;break;case"defaultChecked":ne=W;break;case"value":_=W;break;case"defaultValue":A=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,a));break;default:W!==oe&&wt(s,a,J,W,h,oe)}}rh(s,_,A,F,Q,ne,b,v);return;case"select":W=_=A=J=null;for(b in u)if(F=u[b],u.hasOwnProperty(b)&&F!=null)switch(b){case"value":break;case"multiple":W=F;default:h.hasOwnProperty(b)||wt(s,a,b,null,h,F)}for(v in h)if(b=h[v],F=u[v],h.hasOwnProperty(v)&&(b!=null||F!=null))switch(v){case"value":J=b;break;case"defaultValue":A=b;break;case"multiple":_=b;default:b!==F&&wt(s,a,v,b,h,F)}a=A,u=_,h=W,J!=null?lo(s,!!u,J,!1):!!h!=!!u&&(a!=null?lo(s,!!u,a,!0):lo(s,!!u,u?[]:"",!1));return;case"textarea":W=J=null;for(A in u)if(v=u[A],u.hasOwnProperty(A)&&v!=null&&!h.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:wt(s,a,A,null,h,v)}for(_ in h)if(v=h[_],b=u[_],h.hasOwnProperty(_)&&(v!=null||b!=null))switch(_){case"value":J=v;break;case"defaultValue":W=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==b&&wt(s,a,_,v,h,b)}Mv(s,J,W);return;case"option":for(var xe in u)J=u[xe],u.hasOwnProperty(xe)&&J!=null&&!h.hasOwnProperty(xe)&&(xe==="selected"?s.selected=!1:wt(s,a,xe,null,h,J));for(F in h)J=h[F],W=u[F],h.hasOwnProperty(F)&&J!==W&&(J!=null||W!=null)&&(F==="selected"?s.selected=J&&typeof J!="function"&&typeof J!="symbol":wt(s,a,F,J,h,W));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in u)J=u[Ne],u.hasOwnProperty(Ne)&&J!=null&&!h.hasOwnProperty(Ne)&&wt(s,a,Ne,null,h,J);for(Q in h)if(J=h[Q],W=u[Q],h.hasOwnProperty(Q)&&J!==W&&(J!=null||W!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,a));break;default:wt(s,a,Q,J,h,W)}return;default:if(sh(a)){for(var _t in u)J=u[_t],u.hasOwnProperty(_t)&&J!==void 0&&!h.hasOwnProperty(_t)&&Vp(s,a,_t,void 0,h,J);for(ne in h)J=h[ne],W=u[ne],!h.hasOwnProperty(ne)||J===W||J===void 0&&W===void 0||Vp(s,a,ne,J,h,W);return}}for(var q in u)J=u[q],u.hasOwnProperty(q)&&J!=null&&!h.hasOwnProperty(q)&&wt(s,a,q,null,h,J);for(oe in h)J=h[oe],W=u[oe],!h.hasOwnProperty(oe)||J===W||J==null&&W==null||wt(s,a,oe,J,h,W)}function zw(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rM(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var v=u[h],b=v.transferSize,_=v.initiatorType,A=v.duration;if(b&&A&&zw(_)){for(_=0,A=v.responseEnd,h+=1;h<u.length;h++){var F=u[h],Q=F.startTime;if(Q>A)break;var ne=F.transferSize,oe=F.initiatorType;ne&&zw(oe)&&(F=F.responseEnd,_+=ne*(F<A?1:(A-Q)/(F-Q)))}if(--h,a+=8*(b+_)/(v.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Kp=null,Gp=null;function Rc(s){return s.nodeType===9?s:s.ownerDocument}function Lw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pw(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Qp(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Zp=null;function iM(){var s=window.event;return s&&s.type==="popstate"?s===Zp?!1:(Zp=s,!0):(Zp=null,!1)}var jw=typeof setTimeout=="function"?setTimeout:void 0,sM=typeof clearTimeout=="function"?clearTimeout:void 0,Fw=typeof Promise=="function"?Promise:void 0,oM=typeof queueMicrotask=="function"?queueMicrotask:typeof Fw<"u"?function(s){return Fw.resolve(null).then(s).catch(aM)}:jw;function aM(s){setTimeout(function(){throw s})}function Ui(s){return s==="head"}function $w(s,a){var u=a,h=0;do{var v=u.nextSibling;if(s.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(h===0){s.removeChild(v),Bo(a);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")ll(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,ll(u);for(var b=u.firstChild;b;){var _=b.nextSibling,A=b.nodeName;b[Ra]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=_}}else u==="body"&&ll(s.ownerDocument.body);u=v}while(u);Bo(a)}function Bw(s,a){var u=s;s=0;do{var h=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=h}while(u)}function Yp(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Yp(u),th(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function lM(s,a,u,h){for(;s.nodeType===1;){var v=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Ra])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=yr(s.nextSibling),s===null)break}return null}function uM(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=yr(s.nextSibling),s===null))return null;return s}function Uw(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=yr(s.nextSibling),s===null))return null;return s}function Jp(s){return s.data==="$?"||s.data==="$~"}function Xp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function cM(s,a){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||u.readyState!=="loading")a();else{var h=function(){a(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function yr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Wp=null;function qw(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(a===0)return yr(s.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}s=s.nextSibling}return null}function Hw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return s;a--}else u!=="/$"&&u!=="/&"||a++}s=s.previousSibling}return null}function Vw(s,a,u){switch(a=Rc(u),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function ll(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);th(s)}var vr=new Map,Kw=new Set;function kc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var mi=te.d;te.d={f:fM,r:dM,D:hM,C:pM,L:mM,m:gM,X:vM,S:yM,M:bM};function fM(){var s=mi.f(),a=vc();return s||a}function dM(s){var a=so(s);a!==null&&a.tag===5&&a.type==="form"?uS(a):mi.r(s)}var jo=typeof document>"u"?null:document;function Gw(s,a,u){var h=jo;if(h&&typeof a=="string"&&a){var v=cr(a);v='link[rel="'+s+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),Kw.has(v)||(Kw.add(v),s={rel:s,crossOrigin:u,href:a},h.querySelector(v)===null&&(a=h.createElement("link"),un(a,"link",s),Wt(a),h.head.appendChild(a)))}}function hM(s){mi.D(s),Gw("dns-prefetch",s,null)}function pM(s,a){mi.C(s,a),Gw("preconnect",s,a)}function mM(s,a,u){mi.L(s,a,u);var h=jo;if(h&&s&&a){var v='link[rel="preload"][as="'+cr(a)+'"]';a==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+cr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+cr(u.imageSizes)+'"]')):v+='[href="'+cr(s)+'"]';var b=v;switch(a){case"style":b=Fo(s);break;case"script":b=$o(s)}vr.has(b)||(s=p({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),vr.set(b,s),h.querySelector(v)!==null||a==="style"&&h.querySelector(ul(b))||a==="script"&&h.querySelector(cl(b))||(a=h.createElement("link"),un(a,"link",s),Wt(a),h.head.appendChild(a)))}}function gM(s,a){mi.m(s,a);var u=jo;if(u&&s){var h=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+cr(h)+'"][href="'+cr(s)+'"]',b=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=$o(s)}if(!vr.has(b)&&(s=p({rel:"modulepreload",href:s},a),vr.set(b,s),u.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(cl(b)))return}h=u.createElement("link"),un(h,"link",s),Wt(h),u.head.appendChild(h)}}}function yM(s,a,u){mi.S(s,a,u);var h=jo;if(h&&s){var v=oo(h).hoistableStyles,b=Fo(s);a=a||"default";var _=v.get(b);if(!_){var A={loading:0,preload:null};if(_=h.querySelector(ul(b)))A.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":a},u),(u=vr.get(b))&&em(s,u);var F=_=h.createElement("link");Wt(F),un(F,"link",s),F._p=new Promise(function(Q,ne){F.onload=Q,F.onerror=ne}),F.addEventListener("load",function(){A.loading|=1}),F.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Ac(_,a,h)}_={type:"stylesheet",instance:_,count:1,state:A},v.set(b,_)}}}function vM(s,a){mi.X(s,a);var u=jo;if(u&&s){var h=oo(u).hoistableScripts,v=$o(s),b=h.get(v);b||(b=u.querySelector(cl(v)),b||(s=p({src:s,async:!0},a),(a=vr.get(v))&&tm(s,a),b=u.createElement("script"),Wt(b),un(b,"link",s),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(v,b))}}function bM(s,a){mi.M(s,a);var u=jo;if(u&&s){var h=oo(u).hoistableScripts,v=$o(s),b=h.get(v);b||(b=u.querySelector(cl(v)),b||(s=p({src:s,async:!0,type:"module"},a),(a=vr.get(v))&&tm(s,a),b=u.createElement("script"),Wt(b),un(b,"link",s),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(v,b))}}function Qw(s,a,u,h){var v=(v=he.current)?kc(v):null;if(!v)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Fo(u.href),u=oo(v).hoistableStyles,h=u.get(a),h||(h={type:"style",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Fo(u.href);var b=oo(v).hoistableStyles,_=b.get(s);if(_||(v=v.ownerDocument||v,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,_),(b=v.querySelector(ul(s)))&&!b._p&&(_.instance=b,_.state.loading=5),vr.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},vr.set(s,u),b||SM(v,s,u,_.state))),a&&h===null)throw Error(r(528,""));return _}if(a&&h!==null)throw Error(r(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=$o(u),u=oo(v).hoistableScripts,h=u.get(a),h||(h={type:"script",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Fo(s){return'href="'+cr(s)+'"'}function ul(s){return'link[rel="stylesheet"]['+s+"]"}function Zw(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function SM(s,a,u,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),un(a,"link",u),Wt(a),s.head.appendChild(a))}function $o(s){return'[src="'+cr(s)+'"]'}function cl(s){return"script[async]"+s}function Yw(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+cr(u.href)+'"]');if(h)return a.instance=h,Wt(h),h;var v=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Wt(h),un(h,"style",v),Ac(h,u.precedence,s),a.instance=h;case"stylesheet":v=Fo(u.href);var b=s.querySelector(ul(v));if(b)return a.state.loading|=4,a.instance=b,Wt(b),b;h=Zw(u),(v=vr.get(v))&&em(h,v),b=(s.ownerDocument||s).createElement("link"),Wt(b);var _=b;return _._p=new Promise(function(A,F){_.onload=A,_.onerror=F}),un(b,"link",h),a.state.loading|=4,Ac(b,u.precedence,s),a.instance=b;case"script":return b=$o(u.src),(v=s.querySelector(cl(b)))?(a.instance=v,Wt(v),v):(h=u,(v=vr.get(b))&&(h=p({},u),tm(h,v)),s=s.ownerDocument||s,v=s.createElement("script"),Wt(v),un(v,"link",h),s.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Ac(h,u.precedence,s));return a.instance}function Ac(s,a,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,b=v,_=0;_<h.length;_++){var A=h[_];if(A.dataset.precedence===a)b=A;else if(b!==v)break}b?b.parentNode.insertBefore(s,b.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function em(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function tm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Tc=null;function Jw(s,a,u){if(Tc===null){var h=new Map,v=Tc=new Map;v.set(u,h)}else v=Tc,h=v.get(u),h||(h=new Map,v.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),v=0;v<u.length;v++){var b=u[v];if(!(b[Ra]||b[sn]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var _=b.getAttribute(a)||"";_=s+_;var A=h.get(_);A?A.push(b):h.set(_,[b])}}return h}function Xw(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function wM(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(s=a.disabled,typeof a.precedence=="string"&&s==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ww(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function _M(s,a,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=Fo(h.href),b=a.querySelector(ul(v));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Oc.bind(s),a.then(s,s)),u.state.loading|=4,u.instance=b,Wt(b);return}b=a.ownerDocument||a,h=Zw(h),(v=vr.get(v))&&em(h,v),b=b.createElement("link"),Wt(b);var _=b;_._p=new Promise(function(A,F){_.onload=A,_.onerror=F}),un(b,"link",h),u.instance=b}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=Oc.bind(s),a.addEventListener("load",u),a.addEventListener("error",u))}}var nm=0;function xM(s,a){return s.stylesheets&&s.count===0&&Ic(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var h=setTimeout(function(){if(s.stylesheets&&Ic(s,s.stylesheets),s.unsuspend){var b=s.unsuspend;s.unsuspend=null,b()}},6e4+a);0<s.imgBytes&&nm===0&&(nm=62500*rM());var v=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Ic(s,s.stylesheets),s.unsuspend)){var b=s.unsuspend;s.unsuspend=null,b()}},(s.imgBytes>nm?50:800)+a);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function Oc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ic(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Mc=null;function Ic(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Mc=new Map,a.forEach(CM,s),Mc=null,Oc.call(s))}function CM(s,a){if(!(a.state.loading&4)){var u=Mc.get(s);if(u)var h=u.get(null);else{u=new Map,Mc.set(s,u);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var _=v[b];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(u.set(_.dataset.precedence,_),h=_)}h&&u.set(null,h)}v=a.instance,_=v.getAttribute("data-precedence"),b=u.get(_)||h,b===h&&u.set(null,v),u.set(_,v),this.count++,h=Oc.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),b?b.parentNode.insertBefore(v,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),a.state.loading|=4}}var fl={$$typeof:k,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function EM(s,a,u,h,v,b,_,A,F){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jd(0),this.hiddenUpdates=Jd(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function e_(s,a,u,h,v,b,_,A,F,Q,ne,oe){return s=new EM(s,a,u,_,F,Q,ne,oe,A),a=1,b===!0&&(a|=24),b=Vn(3,null,null,a),s.current=b,b.stateNode=s,a=zh(),a.refCount++,s.pooledCache=a,a.refCount++,b.memoizedState={element:h,isDehydrated:u,cache:a},Fh(b),s}function t_(s){return s?(s=yo,s):yo}function n_(s,a,u,h,v,b){v=t_(v),h.context===null?h.context=v:h.pendingContext=v,h=Mi(a),h.payload={element:u},b=b===void 0?null:b,b!==null&&(h.callback=b),u=Ii(s,h,a),u!==null&&(zn(u,s,a),qa(u,s,a))}function r_(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function rm(s,a){r_(s,a),(s=s.alternate)&&r_(s,a)}function i_(s){if(s.tag===13||s.tag===31){var a=ws(s,67108864);a!==null&&zn(a,s,67108864),rm(s,67108864)}}function s_(s){if(s.tag===13||s.tag===31){var a=Yn();a=Xd(a);var u=ws(s,a);u!==null&&zn(u,s,a),rm(s,a)}}var Nc=!0;function RM(s,a,u,h){var v=$.T;$.T=null;var b=te.p;try{te.p=2,im(s,a,u,h)}finally{te.p=b,$.T=v}}function kM(s,a,u,h){var v=$.T;$.T=null;var b=te.p;try{te.p=8,im(s,a,u,h)}finally{te.p=b,$.T=v}}function im(s,a,u,h){if(Nc){var v=sm(h);if(v===null)Hp(s,a,h,Dc,u),a_(s,h);else if(TM(v,s,a,u,h))h.stopPropagation();else if(a_(s,h),a&4&&-1<AM.indexOf(s)){for(;v!==null;){var b=so(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var _=lr(b.pendingLanes);if(_!==0){var A=b;for(A.pendingLanes|=2,A.entangledLanes|=2;_;){var F=1<<31-lt(_);A.entanglements[1]|=F,_&=~F}$r(b),(mt&6)===0&&(gc=me()+500,sl(0))}}break;case 31:case 13:A=ws(b,2),A!==null&&zn(A,b,2),vc(),rm(b,2)}if(b=sm(h),b===null&&Hp(s,a,h,Dc,u),b===v)break;v=b}v!==null&&h.stopPropagation()}else Hp(s,a,h,null,u)}}function sm(s){return s=ah(s),om(s)}var Dc=null;function om(s){if(Dc=null,s=io(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===31){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Dc=s,null}function o_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(De()){case X:return 2;case ue:return 8;case Se:case _e:return 32;case ve:return 268435456;default:return 32}default:return 32}}var am=!1,qi=null,Hi=null,Vi=null,dl=new Map,hl=new Map,Ki=[],AM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function a_(s,a){switch(s){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":Vi=null;break;case"pointerover":case"pointerout":dl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(a.pointerId)}}function pl(s,a,u,h,v,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:b,targetContainers:[v]},a!==null&&(a=so(a),a!==null&&i_(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),s)}function TM(s,a,u,h,v){switch(a){case"focusin":return qi=pl(qi,s,a,u,h,v),!0;case"dragenter":return Hi=pl(Hi,s,a,u,h,v),!0;case"mouseover":return Vi=pl(Vi,s,a,u,h,v),!0;case"pointerover":var b=v.pointerId;return dl.set(b,pl(dl.get(b)||null,s,a,u,h,v)),!0;case"gotpointercapture":return b=v.pointerId,hl.set(b,pl(hl.get(b)||null,s,a,u,h,v)),!0}return!1}function l_(s){var a=io(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,_v(s.priority,function(){s_(u)});return}}else if(a===31){if(a=c(u),a!==null){s.blockedOn=a,_v(s.priority,function(){s_(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function zc(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=sm(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);oh=h,u.target.dispatchEvent(h),oh=null}else return a=so(u),a!==null&&i_(a),s.blockedOn=u,!1;a.shift()}return!0}function u_(s,a,u){zc(s)&&u.delete(a)}function OM(){am=!1,qi!==null&&zc(qi)&&(qi=null),Hi!==null&&zc(Hi)&&(Hi=null),Vi!==null&&zc(Vi)&&(Vi=null),dl.forEach(u_),hl.forEach(u_)}function Lc(s,a){s.blockedOn===a&&(s.blockedOn=null,am||(am=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,OM)))}var Pc=null;function c_(s){Pc!==s&&(Pc=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Pc===s&&(Pc=null);for(var a=0;a<s.length;a+=3){var u=s[a],h=s[a+1],v=s[a+2];if(typeof h!="function"){if(om(h||u)===null)continue;break}var b=so(u);b!==null&&(s.splice(a,3),a-=3,sp(b,{pending:!0,data:v,method:u.method,action:h},h,v))}}))}function Bo(s){function a(F){return Lc(F,s)}qi!==null&&Lc(qi,s),Hi!==null&&Lc(Hi,s),Vi!==null&&Lc(Vi,s),dl.forEach(a),hl.forEach(a);for(var u=0;u<Ki.length;u++){var h=Ki[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<Ki.length&&(u=Ki[0],u.blockedOn===null);)l_(u),u.blockedOn===null&&Ki.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var v=u[h],b=u[h+1],_=v[Tn]||null;if(typeof b=="function")_||c_(u);else if(_){var A=null;if(b&&b.hasAttribute("formAction")){if(v=b,_=b[Tn]||null)A=_.formAction;else if(om(v)!==null)continue}else A=_.action;typeof A=="function"?u[h+1]=A:(u.splice(h,3),h-=3),c_(u)}}}function f_(){function s(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(_){return v=_})},focusReset:"manual",scroll:"manual"})}function a(){v!==null&&(v(),v=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),v!==null&&(v(),v=null)}}}function lm(s){this._internalRoot=s}jc.prototype.render=lm.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var u=a.current,h=Yn();n_(u,h,s,a,null,null)},jc.prototype.unmount=lm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;n_(s.current,2,null,s,null,null),vc(),a[ro]=null}};function jc(s){this._internalRoot=s}jc.prototype.unstable_scheduleHydration=function(s){if(s){var a=wv();s={blockedOn:null,target:s,priority:a};for(var u=0;u<Ki.length&&a!==0&&a<Ki[u].priority;u++);Ki.splice(u,0,s),u===0&&l_(s)}};var d_=t.version;if(d_!=="19.2.3")throw Error(r(527,d_,"19.2.3"));te.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(a),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var MM={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{We=Fc.inject(MM),Ze=Fc}catch{}}return gl.createRoot=function(s,a){if(!i(s))throw Error(r(299));var u=!1,h="",v=bS,b=SS,_=wS;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=e_(s,1,!1,null,null,u,h,null,v,b,_,f_),s[ro]=a.current,qp(s),new lm(a)},gl.hydrateRoot=function(s,a,u){if(!i(s))throw Error(r(299));var h=!1,v="",b=bS,_=SS,A=wS,F=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(A=u.onRecoverableError),u.formState!==void 0&&(F=u.formState)),a=e_(s,1,!0,a,u??null,h,v,F,b,_,A,f_),a.context=t_(null),u=a.current,h=Yn(),h=Xd(h),v=Mi(h),v.callback=null,Ii(u,v,h),u=h,a.current.lanes=u,Ea(a,u),$r(a),s[ro]=a.current,qp(s),new jc(a)},gl.version="19.2.3",gl}var __;function $M(){if(__)return fm.exports;__=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),fm.exports=FM(),fm.exports}var BM=$M(),mm={exports:{}},gm={};var x_;function UM(){if(x_)return gm;x_=1;var e=ma().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return gm.c=function(t){return e.H.useMemoCache(t)},gm}var C_;function qM(){return C_||(C_=1,mm.exports=UM()),mm.exports}var _i=qM(),ga=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},HM={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},VM=class{#e=HM;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},$s=new VM;function KM(e){setTimeout(e,0)}var Gs=typeof window>"u"||"Deno"in globalThis;function Cn(){}function GM(e,t){return typeof e=="function"?e(t):e}function xg(e){return typeof e=="number"&&e>=0&&e!==1/0}function j1(e,t){return Math.max(e+(t||0)-Date.now(),0)}function is(e,t){return typeof e=="function"?e(t):e}function Sr(e,t){return typeof e=="function"?e(t):e}function E_(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:l,stale:c}=e;if(l){if(r){if(t.queryHash!==Py(l,t.options))return!1}else if(!iu(t.queryKey,l))return!1}if(n!=="all"){const f=t.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||i&&i!==t.state.fetchStatus||o&&!o(t))}function R_(e,t){const{exact:n,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(Mr(t.options.mutationKey)!==Mr(o))return!1}else if(!iu(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function Py(e,t){return(t?.queryKeyHashFn||Mr)(e)}function Mr(e){return JSON.stringify(e,(t,n)=>Cg(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function iu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>iu(e[n],t[n])):!1}var QM=Object.prototype.hasOwnProperty;function F1(e,t){if(e===t)return e;const n=k_(e)&&k_(t);if(!n&&!(Cg(e)&&Cg(t)))return t;const i=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),l=o.length,c=n?new Array(l):{};let f=0;for(let d=0;d<l;d++){const m=n?d:o[d],p=e[m],g=t[m];if(p===g){c[m]=p,(n?d<i:QM.call(e,m))&&f++;continue}if(p===null||g===null||typeof p!="object"||typeof g!="object"){c[m]=g;continue}const y=F1(p,g);c[m]=y,y===p&&f++}return i===l&&f===i?e:c}function Mf(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function k_(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Cg(e){if(!A_(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!A_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function A_(e){return Object.prototype.toString.call(e)==="[object Object]"}function ZM(e){return new Promise(t=>{$s.setTimeout(t,e)})}function Eg(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?F1(e,t):t}function YM(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function JM(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var jy=Symbol();function $1(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===jy?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Fy(e,t){return typeof e=="function"?e(...t):!!e}function XM(e,t,n){let r=!1,i;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(i??=t(),r||(r=!0,i.aborted?n():i.addEventListener("abort",n,{once:!0})),i)}),e}var WM=class extends ga{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Gs&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},$y=new WM;function Rg(){let e,t;const n=new Promise((i,o)=>{e=i,t=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}var eI=KM;function tI(){let e=[],t=0,n=c=>{c()},r=c=>{c()},i=eI;const o=c=>{t?e.push(c):i(()=>{n(c)})},l=()=>{const c=e;e=[],c.length&&i(()=>{r(()=>{c.forEach(f=>{n(f)})})})};return{batch:c=>{let f;t++;try{f=c()}finally{t--,t||l()}return f},batchCalls:c=>(...f)=>{o(()=>{c(...f)})},schedule:o,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var Yt=tI(),nI=class extends ga{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Gs&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},If=new nI;function rI(e){return Math.min(1e3*2**e,3e4)}function B1(e){return(e??"online")==="online"?If.isOnline():!0}var kg=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function U1(e){let t=!1,n=0,r;const i=Rg(),o=()=>i.status!=="pending",l=w=>{if(!o()){const C=new kg(w);g(C),e.onCancel?.(C)}},c=()=>{t=!0},f=()=>{t=!1},d=()=>$y.isFocused()&&(e.networkMode==="always"||If.isOnline())&&e.canRun(),m=()=>B1(e.networkMode)&&e.canRun(),p=w=>{o()||(r?.(),i.resolve(w))},g=w=>{o()||(r?.(),i.reject(w))},y=()=>new Promise(w=>{r=C=>{(o()||d())&&w(C)},e.onPause?.()}).then(()=>{r=void 0,o()||e.onContinue?.()}),S=()=>{if(o())return;let w;const C=n===0?e.initialPromise:void 0;try{w=C??e.fn()}catch(x){w=Promise.reject(x)}Promise.resolve(w).then(p).catch(x=>{if(o())return;const E=e.retry??(Gs?0:3),k=e.retryDelay??rI,I=typeof k=="function"?k(n,x):k,P=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,x);if(t||!P){g(x);return}n++,e.onFail?.(n,x),ZM(I).then(()=>d()?void 0:y()).then(()=>{t?g(x):S()})})};return{promise:i,status:()=>i.status,cancel:l,continue:()=>(r?.(),i),cancelRetry:c,continueRetry:f,canStart:m,start:()=>(m()?S():y().then(S),i)}}var q1=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xg(this.gcTime)&&(this.#e=$s.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Gs?1/0:300*1e3))}clearGcTimeout(){this.#e&&($s.clearTimeout(this.#e),this.#e=void 0)}},iI=class extends q1{#e;#t;#n;#r;#i;#a;#s;constructor(e){super(),this.#s=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#n=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=O_(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=O_(this.options);t.data!==void 0&&(this.setState(T_(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const n=Eg(this.state.data,e,this.options);return this.#o({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#o({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#i?.promise;return this.#i?.cancel(e),t?t.then(Cn).catch(Cn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Sr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>is(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!j1(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#i&&(this.#s?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(f=>f.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#s=!0,n.signal)})},i=()=>{const c=$1(this.options,t),d=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#s=!1,this.options.persister?this.options.persister(c,d,this):c(d)},l=(()=>{const c={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:i};return r(c),c})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#o({type:"fetch",meta:l.fetchOptions?.meta}),this.#i=U1({initialPromise:t?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof kg&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(c,f)=>{this.#o({type:"failed",failureCount:c,error:f})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const c=await this.#i.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof kg){if(c.silent)return this.#i.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#o({type:"error",error:c}),this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#o(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...H1(n.data,this.options),fetchMeta:e.meta??null};case"success":const r={...n,...T_(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?r:void 0,r;case"error":const i=e.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),Yt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function H1(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:B1(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function T_(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function O_(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var V1=class extends ga{constructor(e,t){super(),this.options=t,this.#e=e,this.#o=null,this.#s=Rg(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#a;#s;#o;#p;#m;#u;#c;#l;#f;#d=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),M_(this.#t,this.options)?this.#h():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ag(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ag(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#S(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Sr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),t._defaulted&&!Mf(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&I_(this.#t,n,this.options,t)&&this.#h(),this.updateResult(),r&&(this.#t!==n||Sr(this.options.enabled,this.#t)!==Sr(t.enabled,this.#t)||is(this.options.staleTime,this.#t)!==is(t.staleTime,this.#t))&&this.#g();const i=this.#y();r&&(this.#t!==n||Sr(this.options.enabled,this.#t)!==Sr(t.enabled,this.#t)||i!==this.#f)&&this.#v(i)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return oI(this,n)&&(this.#r=n,this.#a=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(e,t){return new Proxy(e,{get:(n,r)=>(this.trackProp(r),t?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#s.status==="pending"&&this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(e){this.#d.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#h({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(e){this.#_();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Cn)),t}#g(){this.#S();const e=is(this.options.staleTime,this.#t);if(Gs||this.#r.isStale||!xg(e))return;const n=j1(this.#r.dataUpdatedAt,e)+1;this.#c=$s.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#w(),this.#f=e,!(Gs||Sr(this.options.enabled,this.#t)===!1||!xg(this.#f)||this.#f===0)&&(this.#l=$s.setInterval(()=>{(this.options.refetchIntervalInBackground||$y.isFocused())&&this.#h()},this.#f))}#b(){this.#g(),this.#v(this.#y())}#S(){this.#c&&($s.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#l&&($s.clearInterval(this.#l),this.#l=void 0)}createResult(e,t){const n=this.#t,r=this.options,i=this.#r,o=this.#i,l=this.#a,f=e!==n?e.state:this.#n,{state:d}=e;let m={...d},p=!1,g;if(t._optimisticResults){const L=this.hasListeners(),j=!L&&M_(e,t),N=L&&I_(e,n,t,r);(j||N)&&(m={...m,...H1(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:y,errorUpdatedAt:S,status:w}=m;g=m.data;let C=!1;if(t.placeholderData!==void 0&&g===void 0&&w==="pending"){let L;i?.isPlaceholderData&&t.placeholderData===l?.placeholderData?(L=i.data,C=!0):L=typeof t.placeholderData=="function"?t.placeholderData(this.#u?.state.data,this.#u):t.placeholderData,L!==void 0&&(w="success",g=Eg(i?.data,L,t),p=!0)}if(t.select&&g!==void 0&&!C)if(i&&g===o?.data&&t.select===this.#p)g=this.#m;else try{this.#p=t.select,g=t.select(g),g=Eg(i?.data,g,t),this.#m=g,this.#o=null}catch(L){this.#o=L}this.#o&&(y=this.#o,g=this.#m,S=Date.now(),w="error");const x=m.fetchStatus==="fetching",E=w==="pending",k=w==="error",I=E&&x,P=g!==void 0,M={status:w,fetchStatus:m.fetchStatus,isPending:E,isSuccess:w==="success",isError:k,isInitialLoading:I,isLoading:I,data:g,dataUpdatedAt:m.dataUpdatedAt,error:y,errorUpdatedAt:S,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:x,isRefetching:x&&!E,isLoadingError:k&&!P,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:k&&P,isStale:By(e,t),refetch:this.refetch,promise:this.#s,isEnabled:Sr(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const L=U=>{M.status==="error"?U.reject(M.error):M.data!==void 0&&U.resolve(M.data)},j=()=>{const U=this.#s=M.promise=Rg();L(U)},N=this.#s;switch(N.status){case"pending":e.queryHash===n.queryHash&&L(N);break;case"fulfilled":(M.status==="error"||M.data!==N.value)&&j();break;case"rejected":(M.status!=="error"||M.error!==N.reason)&&j();break}}return M}updateResult(){const e=this.#r,t=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#a=this.options,this.#i.data!==void 0&&(this.#u=this.#t),Mf(t,e))return;this.#r=t;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#d.size)return!0;const o=new Set(i??this.#d);return this.options.throwOnError&&o.add("error"),Object.keys(this.#r).some(l=>{const c=l;return this.#r[c]!==e[c]&&o.has(c)})};this.#x({listeners:n()})}#_(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#x(e){Yt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function sI(e,t){return Sr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function M_(e,t){return sI(e,t)||e.state.data!==void 0&&Ag(e,t,t.refetchOnMount)}function Ag(e,t,n){if(Sr(t.enabled,e)!==!1&&is(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&By(e,t)}return!1}function I_(e,t,n,r){return(e!==t||Sr(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&By(e,n)}function By(e,t){return Sr(t.enabled,e)!==!1&&e.isStaleByTime(is(t.staleTime,e))}function oI(e,t){return!Mf(e.getCurrentResult(),t)}function N_(e){return{onFetch:(t,n)=>{const r=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],l=t.state.data?.pageParams||[];let c={pages:[],pageParams:[]},f=0;const d=async()=>{let m=!1;const p=S=>{XM(S,()=>t.signal,()=>m=!0)},g=$1(t.options,t.fetchOptions),y=async(S,w,C)=>{if(m)return Promise.reject();if(w==null&&S.pages.length)return Promise.resolve(S);const E=(()=>{const R={client:t.client,queryKey:t.queryKey,pageParam:w,direction:C?"backward":"forward",meta:t.options.meta};return p(R),R})(),k=await g(E),{maxPages:I}=t.options,P=C?JM:YM;return{pages:P(S.pages,k,I),pageParams:P(S.pageParams,w,I)}};if(i&&o.length){const S=i==="backward",w=S?aI:D_,C={pages:o,pageParams:l},x=w(r,C);c=await y(C,x,S)}else{const S=e??o.length;do{const w=f===0?l[0]??r.initialPageParam:D_(r,c);if(f>0&&w==null)break;c=await y(c,w),f++}while(f<S)}return c};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=d}}}function D_(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function aI(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var lI=class extends q1{#e;#t;#n;#r;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||K1(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#i({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=U1({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(o,l)=>{this.#i({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#i({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",i=!this.#r.canStart();try{if(r)t();else{this.#i({type:"pending",variables:e,isPaused:i}),await this.#n.config.onMutate?.(e,this,n);const l=await this.options.onMutate?.(e,n);l!==this.state.context&&this.#i({type:"pending",context:l,variables:e,isPaused:i})}const o=await this.#r.start();return await this.#n.config.onSuccess?.(o,e,this.state.context,this,n),await this.options.onSuccess?.(o,e,this.state.context,n),await this.#n.config.onSettled?.(o,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(o,null,e,this.state.context,n),this.#i({type:"success",data:o}),o}catch(o){try{await this.#n.config.onError?.(o,e,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(o,e,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#n.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,o,e,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#i({type:"error",error:o}),o}finally{this.#n.runNext(this)}}#i(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Yt.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function K1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var uI=class extends ga{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,n){const r=new lI({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){this.#e.add(e);const t=$c(e);if(typeof t=="string"){const n=this.#t.get(t);n?n.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=$c(e);if(typeof t=="string"){const n=this.#t.get(t);if(n)if(n.length>1){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}else n[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=$c(e);if(typeof t=="string"){const r=this.#t.get(t)?.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){const t=$c(e);return typeof t=="string"?this.#t.get(t)?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Yt.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>R_(t,n))}findAll(e={}){return this.getAll().filter(t=>R_(e,t))}notify(e){Yt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Yt.batch(()=>Promise.all(e.map(t=>t.continue().catch(Cn))))}};function $c(e){return e.options.scope?.id}var cI=class extends ga{#e;#t=void 0;#n;#r;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),Mf(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Mr(n.mutationKey)!==Mr(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#a(t)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#a()}mutate(t,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(t)}#i(){const t=this.#n?.state??K1();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){Yt.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#r.onSuccess?.(t.data,n,r,i)}catch(o){Promise.reject(o)}try{this.#r.onSettled?.(t.data,null,n,r,i)}catch(o){Promise.reject(o)}}else if(t?.type==="error"){try{this.#r.onError?.(t.error,n,r,i)}catch(o){Promise.reject(o)}try{this.#r.onSettled?.(void 0,t.error,n,r,i)}catch(o){Promise.reject(o)}}}this.listeners.forEach(n=>{n(this.#t)})})}},fI=class extends ga{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const r=t.queryKey,i=t.queryHash??Py(r,t);let o=this.get(i);return o||(o=new iI({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Yt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>E_(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>E_(e,n)):t}notify(e){Yt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Yt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Yt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},G1=class{#e;#t;#n;#r;#i;#a;#s;#o;constructor(e={}){this.#e=e.queryCache||new fI,this.#t=e.mutationCache||new uI,this.#n=e.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#s=$y.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=If.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#s?.(),this.#s=void 0,this.#o?.(),this.#o=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(is(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(r.queryHash)?.state.data,l=GM(t,o);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(e,t,n){return Yt.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Yt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return Yt.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Yt.batch(()=>this.#e.findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(Cn).catch(Cn)}invalidateQueries(e,t={}){return Yt.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Yt.batch(()=>this.#e.findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(Cn)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Cn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(is(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Cn).catch(Cn)}fetchInfiniteQuery(e){return e.behavior=N_(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Cn).catch(Cn)}ensureInfiniteQueryData(e){return e.behavior=N_(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return If.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#r.set(Mr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#r.values()],n={};return t.forEach(r=>{iu(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){this.#i.set(Mr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#i.values()],n={};return t.forEach(r=>{iu(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Py(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===jy&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Q1=H.createContext(void 0),Uy=e=>{const t=H.useContext(Q1);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},dI=({client:e,children:t})=>(H.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),O.jsx(Q1.Provider,{value:e,children:t})),Z1=H.createContext(!1),hI=()=>H.useContext(Z1);Z1.Provider;function pI(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var mI=H.createContext(pI()),gI=()=>H.useContext(mI),yI=(e,t,n)=>{const r=n?.state.error&&typeof e.throwOnError=="function"?Fy(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||r)&&(t.isReset()||(e.retryOnMount=!1))},vI=e=>{H.useEffect(()=>{e.clearReset()},[e])},bI=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&e.data===void 0||Fy(n,[e.error,r])),SI=e=>{if(e.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},wI=(e,t)=>e.isLoading&&e.isFetching&&!t,_I=(e,t)=>e?.suspense&&t.isPending,z_=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function xI(e,t,n){const r=hI(),i=gI(),o=Uy(),l=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(l);const c=o.getQueryCache().get(l.queryHash);l._optimisticResults=r?"isRestoring":"optimistic",SI(l),yI(l,i,c),vI(i);const f=!o.getQueryCache().get(l.queryHash),[d]=H.useState(()=>new t(o,l)),m=d.getOptimisticResult(l),p=!r&&e.subscribed!==!1;if(H.useSyncExternalStore(H.useCallback(g=>{const y=p?d.subscribe(Yt.batchCalls(g)):Cn;return d.updateResult(),y},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),H.useEffect(()=>{d.setOptions(l)},[l,d]),_I(l,m))throw z_(l,d,i);if(bI({result:m,errorResetBoundary:i,throwOnError:l.throwOnError,query:c,suspense:l.suspense}))throw m.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(l,m),l.experimental_prefetchInRender&&!Gs&&wI(m,r)&&(f?z_(l,d,i):c?.promise)?.catch(Cn).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?m:d.trackResult(m)}function Nf(e,t){return xI(e,V1)}function CI(e,t){const n=Uy(),[r]=H.useState(()=>new cI(n,e));H.useEffect(()=>{r.setOptions(e)},[r,e]);const i=H.useSyncExternalStore(H.useCallback(l=>r.subscribe(Yt.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=H.useCallback((l,c)=>{r.mutate(l,c).catch(Cn)},[r]);if(i.error&&Fy(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}const Tg=new WeakMap,EI=new WeakMap,Df={current:[]};let ym=!1,Hl=0;const Al=new Set,Bc=new Map;function Y1(e){for(const t of e){if(Df.current.includes(t))continue;Df.current.push(t),t.recompute();const n=EI.get(t);if(n)for(const r of n){const i=Tg.get(r);i?.length&&Y1(i)}}}function RI(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function kI(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function J1(e){if(Hl>0&&!Bc.has(e)&&Bc.set(e,e.prevState),Al.add(e),!(Hl>0)&&!ym)try{for(ym=!0;Al.size>0;){const t=Array.from(Al);Al.clear();for(const n of t){const r=Bc.get(n)??n.prevState;n.prevState=r,RI(n)}for(const n of t){const r=Tg.get(n);r&&(Df.current.push(n),Y1(r))}for(const n of t){const r=Tg.get(n);if(r)for(const i of r)kI(i)}}}finally{ym=!1,Df.current=[],Bc.clear()}}function Vl(e){Hl++;try{e()}finally{if(Hl--,Hl===0){const t=Al.values().next().value;t&&J1(t)}}}function AI(e){return typeof e=="function"}class TI{constructor(t,n){this.listeners=new Set,this.subscribe=r=>{var i,o;this.listeners.add(r);const l=(o=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:o.call(i,r,this);return()=>{this.listeners.delete(r),l?.()}},this.prevState=t,this.state=t,this.options=n}setState(t){var n,r,i;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(t):AI(t)?this.state=t(this.prevState):this.state=t,(i=(r=this.options)==null?void 0:r.onUpdate)==null||i.call(r),J1(this)}}const ss="__TSR_index",L_="popstate",P_="beforeunload";function OI(e){let t=e.getLocation();const n=new Set,r=l=>{t=e.getLocation(),n.forEach(c=>c({location:t,action:l}))},i=l=>{e.notifyOnIndexChange??!0?r(l):t=e.getLocation()},o=async({task:l,navigateOpts:c,...f})=>{if(c?.ignoreBlocker??!1){l();return}const m=e.getBlockers?.()??[],p=f.type==="PUSH"||f.type==="REPLACE";if(typeof document<"u"&&m.length&&p)for(const g of m){const y=zf(f.path,f.state);if(await g.blockerFn({currentLocation:t,nextLocation:y,action:f.type})){e.onBlocked?.();return}}l()};return{get location(){return t},get length(){return e.getLength()},subscribers:n,subscribe:l=>(n.add(l),()=>{n.delete(l)}),push:(l,c,f)=>{const d=t.state[ss];c=j_(d+1,c),o({task:()=>{e.pushState(l,c),r({type:"PUSH"})},navigateOpts:f,type:"PUSH",path:l,state:c})},replace:(l,c,f)=>{const d=t.state[ss];c=j_(d,c),o({task:()=>{e.replaceState(l,c),r({type:"REPLACE"})},navigateOpts:f,type:"REPLACE",path:l,state:c})},go:(l,c)=>{o({task:()=>{e.go(l),i({type:"GO",index:l})},navigateOpts:c,type:"GO"})},back:l=>{o({task:()=>{e.back(l?.ignoreBlocker??!1),i({type:"BACK"})},navigateOpts:l,type:"BACK"})},forward:l=>{o({task:()=>{e.forward(l?.ignoreBlocker??!1),i({type:"FORWARD"})},navigateOpts:l,type:"FORWARD"})},canGoBack:()=>t.state[ss]!==0,createHref:l=>e.createHref(l),block:l=>{if(!e.setBlockers)return()=>{};const c=e.getBlockers?.()??[];return e.setBlockers([...c,l]),()=>{const f=e.getBlockers?.()??[];e.setBlockers?.(f.filter(d=>d!==l))}},flush:()=>e.flush?.(),destroy:()=>e.destroy?.(),notify:r}}function j_(e,t){t||(t={});const n=qy();return{...t,key:n,__TSR_key:n,[ss]:e}}function MI(e){const t=typeof document<"u"?window:void 0,n=t.history.pushState,r=t.history.replaceState;let i=[];const o=()=>i,l=L=>i=L,c=(L=>L),f=(()=>zf(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state));if(!t.history.state?.__TSR_key&&!t.history.state?.key){const L=qy();t.history.replaceState({[ss]:0,key:L,__TSR_key:L},"")}let d=f(),m,p=!1,g=!1,y=!1,S=!1;const w=()=>d;let C,x;const E=()=>{C&&(M._ignoreSubscribers=!0,(C.isPush?t.history.pushState:t.history.replaceState)(C.state,"",C.href),M._ignoreSubscribers=!1,C=void 0,x=void 0,m=void 0)},k=(L,j,N)=>{const U=c(j);x||(m=d),d=zf(j,N),C={href:U,state:N,isPush:C?.isPush||L==="push"},x||(x=Promise.resolve().then(()=>E()))},I=L=>{d=f(),M.notify({type:L})},P=async()=>{if(g){g=!1;return}const L=f(),j=L.state[ss]-d.state[ss],N=j===1,U=j===-1,Z=!N&&!U||p;p=!1;const ee=Z?"GO":U?"BACK":"FORWARD",re=Z?{type:"GO",index:j}:{type:U?"BACK":"FORWARD"};if(y)y=!1;else{const K=o();if(typeof document<"u"&&K.length){for(const $ of K)if(await $.blockerFn({currentLocation:d,nextLocation:L,action:ee})){g=!0,t.history.go(1),M.notify(re);return}}}d=f(),M.notify(re)},R=L=>{if(S){S=!1;return}let j=!1;const N=o();if(typeof document<"u"&&N.length)for(const U of N){const Z=U.enableBeforeUnload??!0;if(Z===!0){j=!0;break}if(typeof Z=="function"&&Z()===!0){j=!0;break}}if(j)return L.preventDefault(),L.returnValue=""},M=OI({getLocation:w,getLength:()=>t.history.length,pushState:(L,j)=>k("push",L,j),replaceState:(L,j)=>k("replace",L,j),back:L=>(L&&(y=!0),S=!0,t.history.back()),forward:L=>{L&&(y=!0),S=!0,t.history.forward()},go:L=>{p=!0,t.history.go(L)},createHref:L=>c(L),flush:E,destroy:()=>{t.history.pushState=n,t.history.replaceState=r,t.removeEventListener(P_,R,{capture:!0}),t.removeEventListener(L_,P)},onBlocked:()=>{m&&d!==m&&(d=m)},getBlockers:o,setBlockers:l,notifyOnIndexChange:!1});return t.addEventListener(P_,R,{capture:!0}),t.addEventListener(L_,P),t.history.pushState=function(...L){const j=n.apply(t.history,L);return M._ignoreSubscribers||I("PUSH"),j},t.history.replaceState=function(...L){const j=r.apply(t.history,L);return M._ignoreSubscribers||I("REPLACE"),j},M}function zf(e,t){const n=e.indexOf("#"),r=e.indexOf("?"),i=qy();return{href:e,pathname:e.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:e.length),hash:n>-1?e.substring(n):"",search:r>-1?e.slice(r,n===-1?void 0:n):"",state:t||{[ss]:0,key:i,__TSR_key:i}}}function qy(){return(Math.random()+1).toString(36).substring(7)}function Lf(e){return e[e.length-1]}function II(e){return typeof e=="function"}function Xi(e,t){return II(e)?e(t):e}const NI=Object.prototype.hasOwnProperty;function br(e,t){if(e===t)return e;const n=t,r=B_(e)&&B_(n);if(!r&&!(Pf(e)&&Pf(n)))return n;const i=r?e:F_(e);if(!i)return n;const o=r?n:F_(n);if(!o)return n;const l=i.length,c=o.length,f=r?new Array(c):{};let d=0;for(let m=0;m<c;m++){const p=r?m:o[m],g=e[p],y=n[p];if(g===y){f[p]=g,(r?m<l:NI.call(e,p))&&d++;continue}if(g===null||y===null||typeof g!="object"||typeof y!="object"){f[p]=y;continue}const S=br(g,y);f[p]=S,S===g&&d++}return l===c&&d===l?e:f}function F_(e){const t=[],n=Object.getOwnPropertyNames(e);for(const i of n){if(!Object.prototype.propertyIsEnumerable.call(e,i))return!1;t.push(i)}const r=Object.getOwnPropertySymbols(e);for(const i of r){if(!Object.prototype.propertyIsEnumerable.call(e,i))return!1;t.push(i)}return t}function Pf(e){if(!$_(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!$_(n)||!n.hasOwnProperty("isPrototypeOf"))}function $_(e){return Object.prototype.toString.call(e)==="[object Object]"}function B_(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function qs(e,t,n){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(!qs(e[r],t[r],n))return!1;return!0}if(Pf(e)&&Pf(t)){const r=n?.ignoreUndefined??!0;if(n?.partial){for(const l in t)if((!r||t[l]!==void 0)&&!qs(e[l],t[l],n))return!1;return!0}let i=0;if(!r)i=Object.keys(e).length;else for(const l in e)e[l]!==void 0&&i++;let o=0;for(const l in t)if((!r||t[l]!==void 0)&&(o++,o>i||!qs(e[l],t[l],n)))return!1;return i===o}return!1}function fa(e){let t,n;const r=new Promise((i,o)=>{t=i,n=o});return r.status="pending",r.resolve=i=>{r.status="resolved",r.value=i,t(i),e?.(i)},r.reject=i=>{r.status="rejected",n(i)},r}function os(e){return!!(e&&typeof e=="object"&&typeof e.then=="function")}function U_(e){try{return decodeURI(e)}catch{return e.replaceAll(/%[0-9A-F]{2}/gi,t=>{try{return decodeURI(t)}catch{return t}})}}function q_(e,t){if(!e)return e;const n=/%25|%5C/gi;let r=0,i="",o;for(;(o=n.exec(e))!==null;)i+=U_(e.slice(r,o.index))+o[0],r=n.lastIndex;return i+U_(r?e.slice(r):e)}var DI="Invariant failed";function wi(e,t){if(!e)throw new Error(DI)}function jf(e){const t=new Map;let n,r;const i=o=>{o.next&&(o.prev?(o.prev.next=o.next,o.next.prev=o.prev,o.next=void 0,r&&(r.next=o,o.prev=r)):(o.next.prev=void 0,n=o.next,o.next=void 0,r&&(o.prev=r,r.next=o)),r=o)};return{get(o){const l=t.get(o);if(l)return i(l),l.value},set(o,l){if(t.size>=e&&n){const f=n;t.delete(f.key),f.next&&(n=f.next,f.next.prev=void 0),f===r&&(r=void 0)}const c=t.get(o);if(c)c.value=l,i(c);else{const f={key:o,value:l,prev:r};r&&(r.next=f),r=f,n||(n=f),t.set(o,f)}},clear(){t.clear(),n=void 0,r=void 0}}}const da=0,Qs=1,Zs=2,su=3,Wo=4,zI=/^([^{]*)\{\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,LI=/^([^{]*)\{-\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,PI=/^([^{]*)\{\$\}([^}]*)$/;function Hy(e,t,n=new Uint16Array(6)){const r=e.indexOf("/",t),i=r===-1?e.length:r,o=e.substring(t,i);if(!o||!o.includes("$"))return n[0]=da,n[1]=t,n[2]=t,n[3]=i,n[4]=i,n[5]=i,n;if(o==="$"){const d=e.length;return n[0]=Zs,n[1]=t,n[2]=t,n[3]=d,n[4]=d,n[5]=d,n}if(o.charCodeAt(0)===36)return n[0]=Qs,n[1]=t,n[2]=t+1,n[3]=i,n[4]=i,n[5]=i,n;const l=o.match(PI);if(l){const m=l[1].length;return n[0]=Zs,n[1]=t+m,n[2]=t+m+1,n[3]=t+m+2,n[4]=t+m+3,n[5]=e.length,n}const c=o.match(LI);if(c){const d=c[1],m=c[2],p=c[3],g=d.length;return n[0]=su,n[1]=t+g,n[2]=t+g+3,n[3]=t+g+3+m.length,n[4]=i-p.length,n[5]=i,n}const f=o.match(zI);if(f){const d=f[1],m=f[2],p=f[3],g=d.length;return n[0]=Qs,n[1]=t+g,n[2]=t+g+2,n[3]=t+g+2+m.length,n[4]=i-p.length,n[5]=i,n}return n[0]=da,n[1]=t,n[2]=t,n[3]=i,n[4]=i,n[5]=i,n}function vd(e,t,n,r,i,o,l){l?.(n);let c=r;{const f=n.fullPath??n.from,d=f.length,m=n.options?.caseSensitive??e;for(;c<d;){const g=Hy(f,c,t);let y;const S=c,w=g[5];switch(c=w+1,o++,g[0]){case da:{const x=f.substring(g[2],g[3]);if(m){const E=i.static?.get(x);if(E)y=E;else{i.static??=new Map;const k=oa(n.fullPath??n.from);k.parent=i,k.depth=o,y=k,i.static.set(x,k)}}else{const E=x.toLowerCase(),k=i.staticInsensitive?.get(E);if(k)y=k;else{i.staticInsensitive??=new Map;const I=oa(n.fullPath??n.from);I.parent=i,I.depth=o,y=I,i.staticInsensitive.set(E,I)}}break}case Qs:{const x=f.substring(S,g[1]),E=f.substring(g[4],w),k=m&&!!(x||E),I=x?k?x:x.toLowerCase():void 0,P=E?k?E:E.toLowerCase():void 0,R=i.dynamic?.find(M=>M.caseSensitive===k&&M.prefix===I&&M.suffix===P);if(R)y=R;else{const M=bm(Qs,n.fullPath??n.from,k,I,P);y=M,M.depth=o,M.parent=i,i.dynamic??=[],i.dynamic.push(M)}break}case su:{const x=f.substring(S,g[1]),E=f.substring(g[4],w),k=m&&!!(x||E),I=x?k?x:x.toLowerCase():void 0,P=E?k?E:E.toLowerCase():void 0,R=i.optional?.find(M=>M.caseSensitive===k&&M.prefix===I&&M.suffix===P);if(R)y=R;else{const M=bm(su,n.fullPath??n.from,k,I,P);y=M,M.parent=i,M.depth=o,i.optional??=[],i.optional.push(M)}break}case Zs:{const x=f.substring(S,g[1]),E=f.substring(g[4],w),k=m&&!!(x||E),I=x?k?x:x.toLowerCase():void 0,P=E?k?E:E.toLowerCase():void 0,R=bm(Zs,n.fullPath??n.from,k,I,P);y=R,R.parent=i,R.depth=o,i.wildcard??=[],i.wildcard.push(R)}}i=y}const p=(n.path||!n.children)&&!n.isRoot;if(p&&f.endsWith("/")){const g=oa(n.fullPath??n.from);g.kind=Wo,g.parent=i,o++,g.depth=o,i.index=g,i=g}p&&!i.route&&(i.route=n,i.fullPath=n.fullPath??n.from)}if(n.children)for(const f of n.children)vd(e,t,f,c,i,o,l)}function vm(e,t){if(e.prefix&&t.prefix&&e.prefix!==t.prefix){if(e.prefix.startsWith(t.prefix))return-1;if(t.prefix.startsWith(e.prefix))return 1}if(e.suffix&&t.suffix&&e.suffix!==t.suffix){if(e.suffix.endsWith(t.suffix))return-1;if(t.suffix.endsWith(e.suffix))return 1}return e.prefix&&!t.prefix?-1:!e.prefix&&t.prefix?1:e.suffix&&!t.suffix?-1:!e.suffix&&t.suffix?1:e.caseSensitive&&!t.caseSensitive?-1:!e.caseSensitive&&t.caseSensitive?1:0}function js(e){if(e.static)for(const t of e.static.values())js(t);if(e.staticInsensitive)for(const t of e.staticInsensitive.values())js(t);if(e.dynamic?.length){e.dynamic.sort(vm);for(const t of e.dynamic)js(t)}if(e.optional?.length){e.optional.sort(vm);for(const t of e.optional)js(t)}if(e.wildcard?.length){e.wildcard.sort(vm);for(const t of e.wildcard)js(t)}}function oa(e){return{kind:da,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null}}function bm(e,t,n,r,i){return{kind:e,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null,caseSensitive:n,prefix:r,suffix:i}}function jI(e,t){const n=oa("/"),r=new Uint16Array(6);for(const i of e)vd(!1,r,i,1,n,0);js(n),t.masksTree=n,t.flatCache=jf(1e3)}function FI(e,t){e||="/";const n=t.flatCache.get(e);if(n)return n;const r=Vy(e,t.masksTree);return t.flatCache.set(e,r),r}function $I(e,t,n,r,i){e||="/",r||="/";const o=t?`case\0${e}`:e;let l=i.singleCache.get(o);if(!l){l=oa("/");const c=new Uint16Array(6);vd(t,c,{from:e},1,l,0),i.singleCache.set(o,l)}return Vy(r,l,n)}function BI(e,t,n=!1){const r=n?e:`nofuzz\0${e}`,i=t.matchCache.get(r);if(i!==void 0)return i;e||="/";const o=Vy(e,t.segmentTree,n);return o&&(o.branch=VI(o.route)),t.matchCache.set(r,o),o}function UI(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function qI(e,t=!1,n){const r=oa(e.fullPath),i=new Uint16Array(6),o={},l={};let c=0;return vd(t,i,e,1,r,0,d=>{if(n?.(d,c),wi(!(d.id in o),`Duplicate routes found with id: ${String(d.id)}`),o[d.id]=d,c!==0&&d.path){const m=UI(d.fullPath);(!l[m]||d.fullPath.endsWith("/"))&&(l[m]=d)}c++}),js(r),{processedTree:{segmentTree:r,singleCache:jf(1e3),matchCache:jf(1e3),flatCache:null,masksTree:null},routesById:o,routesByPath:l}}function Vy(e,t,n=!1){const r=e.split("/"),i=GI(e,r,t,n);if(!i)return null;const o=HI(e,r,i);return"**"in i&&(o["**"]=i["**"]),{route:i.node.route,params:o}}function HI(e,t,n){const r=KI(n.node);let i=null;const o={};for(let l=0,c=0,f=0;c<r.length;l++,c++,f++){const d=r[c],m=t[l],p=f;if(m&&(f+=m.length),d.kind===Qs){i??=n.node.fullPath.split("/");const g=i[c],y=d.prefix?.length??0;if(g.charCodeAt(y)===123){const w=d.suffix?.length??0,C=g.substring(y+2,g.length-w-1),x=m.substring(y,m.length-w);o[C]=decodeURIComponent(x)}else{const w=g.substring(1);o[w]=decodeURIComponent(m)}}else if(d.kind===su){if(n.skipped&1<<c){l--;continue}i??=n.node.fullPath.split("/");const g=i[c],y=d.prefix?.length??0,S=d.suffix?.length??0,w=g.substring(y+3,g.length-S-1),C=d.suffix||d.prefix?m.substring(y,m.length-S):m;C&&(o[w]=decodeURIComponent(C))}else if(d.kind===Zs){const g=d,y=e.substring(p+(g.prefix?.length??0),e.length-(g.suffix?.length??0)),S=decodeURIComponent(y);o["*"]=S,o._splat=S;break}}return o}function VI(e){const t=[e];for(;e.parentRoute;)e=e.parentRoute,t.push(e);return t.reverse(),t}function KI(e){const t=Array(e.depth+1);do t[e.depth]=e,e=e.parent;while(e);return t}function GI(e,t,n,r){if(e==="/"&&n.index)return{node:n.index,skipped:0};const i=!Lf(t),o=i&&e!=="/",l=t.length-(i?1:0),c=[{node:n,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let f=null,d=null,m=null;for(;c.length;){const p=c.pop();let{node:g,index:y,skipped:S,depth:w,statics:C,dynamics:x,optionals:E}=p;r&&g.route&&g.kind!==Wo&&yl(d,p)&&(d=p);const k=y===l;if(k&&(g.route&&!o&&yl(m,p)&&(m=p),!g.optional&&!g.wildcard&&!g.index))continue;const I=k?void 0:t[y];let P;if(k&&g.index){const R={node:g.index,index:y,skipped:S,depth:w+1,statics:C,dynamics:x,optionals:E};if(C===l&&!x&&!E&&!S)return R;yl(m,R)&&(m=R)}if(g.wildcard&&yl(f,p))for(const R of g.wildcard){const{prefix:M,suffix:L}=R;if(!(M&&(k||!(R.caseSensitive?I:P??=I.toLowerCase()).startsWith(M)))){if(L){if(k)continue;const j=t.slice(y).join("/").slice(-L.length);if((R.caseSensitive?j:j.toLowerCase())!==L)continue}f={node:R,index:l,skipped:S,depth:w,statics:C,dynamics:x,optionals:E};break}}if(g.optional){const R=S|1<<w,M=w+1;for(let L=g.optional.length-1;L>=0;L--){const j=g.optional[L];c.push({node:j,index:y,skipped:R,depth:M,statics:C,dynamics:x,optionals:E})}if(!k)for(let L=g.optional.length-1;L>=0;L--){const j=g.optional[L],{prefix:N,suffix:U}=j;if(N||U){const Z=j.caseSensitive?I:P??=I.toLowerCase();if(N&&!Z.startsWith(N)||U&&!Z.endsWith(U))continue}c.push({node:j,index:y+1,skipped:S,depth:M,statics:C,dynamics:x,optionals:E+1})}}if(!k&&g.dynamic&&I)for(let R=g.dynamic.length-1;R>=0;R--){const M=g.dynamic[R],{prefix:L,suffix:j}=M;if(L||j){const N=M.caseSensitive?I:P??=I.toLowerCase();if(L&&!N.startsWith(L)||j&&!N.endsWith(j))continue}c.push({node:M,index:y+1,skipped:S,depth:w+1,statics:C,dynamics:x+1,optionals:E})}if(!k&&g.staticInsensitive){const R=g.staticInsensitive.get(P??=I.toLowerCase());R&&c.push({node:R,index:y+1,skipped:S,depth:w+1,statics:C+1,dynamics:x,optionals:E})}if(!k&&g.static){const R=g.static.get(I);R&&c.push({node:R,index:y+1,skipped:S,depth:w+1,statics:C+1,dynamics:x,optionals:E})}}if(m&&f)return yl(f,m)?m:f;if(m)return m;if(f)return f;if(r&&d){let p=d.index;for(let y=0;y<d.index;y++)p+=t[y].length;const g=p===e.length?"/":e.slice(p);return{node:d.node,skipped:d.skipped,"**":decodeURIComponent(g)}}return null}function yl(e,t){return e?t.statics>e.statics||t.statics===e.statics&&(t.dynamics>e.dynamics||t.dynamics===e.dynamics&&(t.optionals>e.optionals||t.optionals===e.optionals&&((t.node.kind===Wo)>(e.node.kind===Wo)||t.node.kind===Wo==(e.node.kind===Wo)&&t.depth>e.depth))):!0}function gf(e){return Ky(e.filter(t=>t!==void 0).join("/"))}function Ky(e){return e.replace(/\/{2,}/g,"/")}function X1(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function Hs(e){const t=e.length;return t>1&&e[t-1]==="/"?e.replace(/\/{1,}$/,""):e}function W1(e){return Hs(X1(e))}function Ff(e,t){return e?.endsWith("/")&&e!=="/"&&e!==`${t}/`?e.slice(0,-1):e}function QI(e,t,n){return Ff(e,n)===Ff(t,n)}function ZI({base:e,to:t,trailingSlash:n="never",cache:r}){const i=t.startsWith("/"),o=!i&&t===".";let l;if(r){l=i?t:o?e:e+"\0"+t;const p=r.get(l);if(p)return p}let c;if(o)c=e.split("/");else if(i)c=t.split("/");else{for(c=e.split("/");c.length>1&&Lf(c)==="";)c.pop();const p=t.split("/");for(let g=0,y=p.length;g<y;g++){const S=p[g];S===""?g?g===y-1&&c.push(S):c=[S]:S===".."?c.pop():S==="."||c.push(S)}}c.length>1&&(Lf(c)===""?n==="never"&&c.pop():n==="always"&&c.push(""));let f,d="";for(let p=0;p<c.length;p++){p>0&&(d+="/");const g=c[p];if(!g)continue;f=Hy(g,0,f);const y=f[0];if(y===da){d+=g;continue}const S=f[5],w=g.substring(0,f[1]),C=g.substring(f[4],S),x=g.substring(f[2],f[3]);y===Qs?d+=w||C?`${w}{$${x}}${C}`:`$${x}`:y===Zs?d+=w||C?`${w}{$}${C}`:"$":d+=`${w}{-$${x}}${C}`}d=Ky(d);const m=d||"/";return l&&r&&r.set(l,m),m}function Sm(e,t,n){const r=t[e];return typeof r!="string"?r:e==="_splat"?encodeURI(r):YI(r,n)}function wm({path:e,params:t,decodeCharMap:n}){let r=!1;const i={};if(!e||e==="/")return{interpolatedPath:"/",usedParams:i,isMissingParams:r};if(!e.includes("$"))return{interpolatedPath:e,usedParams:i,isMissingParams:r};const o=e.length;let l=0,c,f="";for(;l<o;){const m=l;c=Hy(e,m,c);const p=c[5];if(l=p+1,m===p)continue;const g=c[0];if(g===da){f+="/"+e.substring(m,p);continue}if(g===Zs){const y=t._splat;i._splat=y,i["*"]=y;const S=e.substring(m,c[1]),w=e.substring(c[4],p);if(!y){r=!0,(S||w)&&(f+="/"+S+w);continue}const C=Sm("_splat",t,n);f+="/"+S+C+w;continue}if(g===Qs){const y=e.substring(c[2],c[3]);!r&&!(y in t)&&(r=!0),i[y]=t[y];const S=e.substring(m,c[1]),w=e.substring(c[4],p),C=Sm(y,t,n)??"undefined";f+="/"+S+C+w;continue}if(g===su){const y=e.substring(c[2],c[3]),S=t[y];if(S==null)continue;i[y]=S;const w=e.substring(m,c[1]),C=e.substring(c[4],p),x=Sm(y,t,n)??"";f+="/"+w+x+C;continue}}return e.endsWith("/")&&(f+="/"),{usedParams:i,interpolatedPath:f||"/",isMissingParams:r}}function YI(e,t){let n=encodeURIComponent(e);if(t)for(const[r,i]of t)n=n.replaceAll(r,i);return n}function rr(e){return!!e?.isNotFound}function JI(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const $f="tsr-scroll-restoration-v1_3",XI=(e,t)=>{let n;return(...r)=>{n||(n=setTimeout(()=>{e(...r),n=null},t))}};function WI(){const e=JI();if(!e)return null;const t=e.getItem($f);let n=t?JSON.parse(t):{};return{state:n,set:r=>(n=Xi(r,n)||n,e.setItem($f,JSON.stringify(n)))}}const Uc=WI(),Og=e=>e.state.__TSR_key||e.href;function e2(e){const t=[];let n;for(;n=e.parentNode;)t.push(`${e.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,e)+1})`),e=n;return`${t.reverse().join(" > ")}`.toLowerCase()}let Bf=!1;function eE({storageKey:e,key:t,behavior:n,shouldScrollRestoration:r,scrollToTopSelectors:i,location:o}){let l;try{l=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(d){console.error(d);return}const c=t||window.history.state?.__TSR_key,f=l[c];Bf=!0;e:{if(r&&f&&Object.keys(f).length>0){for(const p in f){const g=f[p];if(p==="window")window.scrollTo({top:g.scrollY,left:g.scrollX,behavior:n});else if(p){const y=document.querySelector(p);y&&(y.scrollLeft=g.scrollX,y.scrollTop=g.scrollY)}}break e}const d=(o??window.location).hash.split("#",2)[1];if(d){const p=window.history.state?.__hashScrollIntoViewOptions??!0;if(p){const g=document.getElementById(d);g&&g.scrollIntoView(p)}break e}const m={top:0,left:0,behavior:n};if(window.scrollTo(m),i)for(const p of i){if(p==="window")continue;const g=typeof p=="function"?p():document.querySelector(p);g&&g.scrollTo(m)}}Bf=!1}function t2(e,t){if(!Uc&&!e.isServer||((e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),e.isServer||e.isScrollRestorationSetup||!Uc))return;e.isScrollRestorationSetup=!0,Bf=!1;const r=e.options.getScrollRestorationKey||Og;window.history.scrollRestoration="manual";const i=o=>{if(Bf||!e.isScrollRestoring)return;let l="";if(o.target===document||o.target===window)l="window";else{const f=o.target.getAttribute("data-scroll-restoration-id");f?l=`[data-scroll-restoration-id="${f}"]`:l=e2(o.target)}const c=r(e.state.location);Uc.set(f=>{const d=f[c]||={},m=d[l]||={};if(l==="window")m.scrollX=window.scrollX||0,m.scrollY=window.scrollY||0;else if(l){const p=document.querySelector(l);p&&(m.scrollX=p.scrollLeft||0,m.scrollY=p.scrollTop||0)}return f})};typeof document<"u"&&document.addEventListener("scroll",XI(i,100),!0),e.subscribe("onRendered",o=>{const l=r(o.toLocation);if(!e.resetNextScroll){e.resetNextScroll=!0;return}typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation})||(eE({storageKey:$f,key:l,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&Uc.set(c=>(c[l]||={},c)))})}function n2(e){if(typeof document<"u"&&document.querySelector){const t=e.state.location.state.__hashScrollIntoViewOptions??!0;if(t&&e.state.location.hash!==""){const n=document.getElementById(e.state.location.hash);n&&n.scrollIntoView(t)}}}function r2(e,t=String){const n=new URLSearchParams;for(const r in e){const i=e[r];i!==void 0&&n.set(r,t(i))}return n.toString()}function _m(e){return e?e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e:""}function i2(e){const t=new URLSearchParams(e),n={};for(const[r,i]of t.entries()){const o=n[r];o==null?n[r]=_m(i):Array.isArray(o)?o.push(_m(i)):n[r]=[o,_m(i)]}return n}const s2=a2(JSON.parse),o2=l2(JSON.stringify,JSON.parse);function a2(e){return t=>{t[0]==="?"&&(t=t.substring(1));const n=i2(t);for(const r in n){const i=n[r];if(typeof i=="string")try{n[r]=e(i)}catch{}}return n}}function l2(e,t){const n=typeof t=="function";function r(i){if(typeof i=="object"&&i!==null)try{return e(i)}catch{}else if(n&&typeof i=="string")try{return t(i),e(i)}catch{}return i}return i=>{const o=r2(i,r);return o?`?${o}`:""}}const tr="__root__";function u2(e){if(e.statusCode=e.statusCode||e.code||307,!e.reloadDocument&&typeof e.href=="string")try{new URL(e.href),e.reloadDocument=!0}catch{}const t=new Headers(e.headers);e.href&&t.get("Location")===null&&t.set("Location",e.href);const n=new Response(null,{status:e.statusCode,headers:t});if(n.options=e,e.throw)throw n;return n}function xr(e){return e instanceof Response&&!!e.options}const yf=e=>{if(!e.rendered)return e.rendered=!0,e.onReady?.()},bd=(e,t)=>!!(e.preload&&!e.router.state.matches.some(n=>n.id===t)),Gy=(e,t,n=!0)=>{const r={...e.router.options.context??{}},i=n?t:t-1;for(let o=0;o<=i;o++){const l=e.matches[o];if(!l)continue;const c=e.router.getMatch(l.id);c&&Object.assign(r,c.__routeContext,c.__beforeLoadContext)}return r},tE=(e,t)=>{const n=e.router.routesById[t.routeId??""]??e.router.routeTree;!n.options.notFoundComponent&&e.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=e.router.options.defaultNotFoundComponent),wi(n.options.notFoundComponent);const r=e.matches.find(i=>i.routeId===n.id);wi(r,"Could not find match for route: "+n.id),e.updateMatch(r.id,i=>({...i,status:"notFound",error:t,isFetching:!1})),t.routerCode==="BEFORE_LOAD"&&n.parentRoute&&(t.routeId=n.parentRoute.id,tE(e,t))},Wi=(e,t,n)=>{if(!(!xr(n)&&!rr(n))){if(xr(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(t){t._nonReactive.beforeLoadPromise?.resolve(),t._nonReactive.loaderPromise?.resolve(),t._nonReactive.beforeLoadPromise=void 0,t._nonReactive.loaderPromise=void 0;const r=xr(n)?"redirected":"notFound";t._nonReactive.error=n,e.updateMatch(t.id,i=>({...i,status:r,isFetching:!1,error:n})),rr(n)&&!n.routeId&&(n.routeId=t.routeId),t._nonReactive.loadPromise?.resolve()}throw xr(n)?(e.rendered=!0,n.options._fromLocation=e.location,n.redirectHandled=!0,n=e.router.resolveRedirect(n),n):(tE(e,n),n)}},nE=(e,t)=>{const n=e.router.getMatch(t);return!!(!e.router.isServer&&n._nonReactive.dehydrated||e.router.isServer&&n.ssr===!1)},vl=(e,t,n,r)=>{const{id:i,routeId:o}=e.matches[t],l=e.router.looseRoutesById[o];if(n instanceof Promise)throw n;n.routerCode=r,e.firstBadMatchIndex??=t,Wi(e,e.router.getMatch(i),n);try{l.options.onError?.(n)}catch(c){n=c,Wi(e,e.router.getMatch(i),n)}e.updateMatch(i,c=>(c._nonReactive.beforeLoadPromise?.resolve(),c._nonReactive.beforeLoadPromise=void 0,c._nonReactive.loadPromise?.resolve(),{...c,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},c2=(e,t,n,r)=>{const i=e.router.getMatch(t),o=e.matches[n-1]?.id,l=o?e.router.getMatch(o):void 0;if(e.router.isShell()){i.ssr=r.id===tr;return}if(l?.ssr===!1){i.ssr=!1;return}const c=y=>y===!0&&l?.ssr==="data-only"?"data-only":y,f=e.router.options.defaultSsr??!0;if(r.options.ssr===void 0){i.ssr=c(f);return}if(typeof r.options.ssr!="function"){i.ssr=c(r.options.ssr);return}const{search:d,params:m}=i,p={search:qc(d,i.searchError),params:qc(m,i.paramsError),location:e.location,matches:e.matches.map(y=>({index:y.index,pathname:y.pathname,fullPath:y.fullPath,staticData:y.staticData,id:y.id,routeId:y.routeId,search:qc(y.search,y.searchError),params:qc(y.params,y.paramsError),ssr:y.ssr}))},g=r.options.ssr(p);if(os(g))return g.then(y=>{i.ssr=c(y??f)});i.ssr=c(g??f)},rE=(e,t,n,r)=>{if(r._nonReactive.pendingTimeout!==void 0)return;const i=n.options.pendingMs??e.router.options.defaultPendingMs;if(!!(e.onReady&&!e.router.isServer&&!bd(e,t)&&(n.options.loader||n.options.beforeLoad||oE(n))&&typeof i=="number"&&i!==1/0&&(n.options.pendingComponent??e.router.options?.defaultPendingComponent))){const l=setTimeout(()=>{yf(e)},i);r._nonReactive.pendingTimeout=l}},f2=(e,t,n)=>{const r=e.router.getMatch(t);if(!r._nonReactive.beforeLoadPromise&&!r._nonReactive.loaderPromise)return;rE(e,t,n,r);const i=()=>{const o=e.router.getMatch(t);o.preload&&(o.status==="redirected"||o.status==="notFound")&&Wi(e,o,o.error)};return r._nonReactive.beforeLoadPromise?r._nonReactive.beforeLoadPromise.then(i):i()},d2=(e,t,n,r)=>{const i=e.router.getMatch(t),o=i._nonReactive.loadPromise;i._nonReactive.loadPromise=fa(()=>{o?.resolve()});const{paramsError:l,searchError:c}=i;l&&vl(e,n,l,"PARSE_PARAMS"),c&&vl(e,n,c,"VALIDATE_SEARCH"),rE(e,t,r,i);const f=new AbortController,d=e.matches[n-1]?.id;(d?e.router.getMatch(d):void 0)?.context??e.router.options.context;let p=!1;const g=()=>{p||(p=!0,e.updateMatch(t,R=>({...R,isFetching:"beforeLoad",fetchCount:R.fetchCount+1,abortController:f})))},y=()=>{i._nonReactive.beforeLoadPromise?.resolve(),i._nonReactive.beforeLoadPromise=void 0,e.updateMatch(t,R=>({...R,isFetching:!1}))};if(!r.options.beforeLoad){Vl(()=>{g(),y()});return}i._nonReactive.beforeLoadPromise=fa();const S={...Gy(e,n,!1),...i.__routeContext},{search:w,params:C,cause:x}=i,E=bd(e,t),k={search:w,abortController:f,params:C,preload:E,context:S,location:e.location,navigate:R=>e.router.navigate({...R,_fromLocation:e.location}),buildLocation:e.router.buildLocation,cause:E?"preload":x,matches:e.matches,...e.router.options.additionalContext},I=R=>{if(R===void 0){Vl(()=>{g(),y()});return}(xr(R)||rr(R))&&(g(),vl(e,n,R,"BEFORE_LOAD")),Vl(()=>{g(),e.updateMatch(t,M=>({...M,__beforeLoadContext:R})),y()})};let P;try{if(P=r.options.beforeLoad(k),os(P))return g(),P.catch(R=>{vl(e,n,R,"BEFORE_LOAD")}).then(I)}catch(R){g(),vl(e,n,R,"BEFORE_LOAD")}I(P)},h2=(e,t)=>{const{id:n,routeId:r}=e.matches[t],i=e.router.looseRoutesById[r],o=()=>{if(e.router.isServer){const f=c2(e,n,t,i);if(os(f))return f.then(c)}return c()},l=()=>d2(e,n,t,i),c=()=>{if(nE(e,n))return;const f=f2(e,n,i);return os(f)?f.then(l):l()};return o()},p2=(e,t,n)=>{const r=e.router.getMatch(t);if(!r||!n.options.head&&!n.options.scripts&&!n.options.headers)return;const i={matches:e.matches,match:r,params:r.params,loaderData:r.loaderData};return Promise.all([n.options.head?.(i),n.options.scripts?.(i),n.options.headers?.(i)]).then(([o,l,c])=>{const f=o?.meta,d=o?.links,m=o?.scripts,p=o?.styles;return{meta:f,links:d,headScripts:m,headers:c,scripts:l,styles:p}})},iE=(e,t,n,r)=>{const i=e.matchPromises[n-1],{params:o,loaderDeps:l,abortController:c,cause:f}=e.router.getMatch(t),d=Gy(e,n),m=bd(e,t);return{params:o,deps:l,preload:!!m,parentMatchPromise:i,abortController:c,context:d,location:e.location,navigate:p=>e.router.navigate({...p,_fromLocation:e.location}),cause:m?"preload":f,route:r,...e.router.options.additionalContext}},H_=async(e,t,n,r)=>{try{const i=e.router.getMatch(t);try{(!e.router.isServer||i.ssr===!0)&&sE(r);const o=r.options.loader?.(iE(e,t,n,r)),l=r.options.loader&&os(o);if((l||r._lazyPromise||r._componentsPromise||r.options.head||r.options.scripts||r.options.headers||i._nonReactive.minPendingPromise)&&e.updateMatch(t,d=>({...d,isFetching:"loader"})),r.options.loader){const d=l?await o:o;Wi(e,e.router.getMatch(t),d),d!==void 0&&e.updateMatch(t,m=>({...m,loaderData:d}))}r._lazyPromise&&await r._lazyPromise;const f=i._nonReactive.minPendingPromise;f&&await f,r._componentsPromise&&await r._componentsPromise,e.updateMatch(t,d=>({...d,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(o){let l=o;const c=i._nonReactive.minPendingPromise;c&&await c,rr(o)&&await r.options.notFoundComponent?.preload?.(),Wi(e,e.router.getMatch(t),o);try{r.options.onError?.(o)}catch(f){l=f,Wi(e,e.router.getMatch(t),f)}e.updateMatch(t,f=>({...f,error:l,status:"error",isFetching:!1}))}}catch(i){const o=e.router.getMatch(t);o&&(o._nonReactive.loaderPromise=void 0),Wi(e,o,i)}},m2=async(e,t)=>{const{id:n,routeId:r}=e.matches[t];let i=!1,o=!1;const l=e.router.looseRoutesById[r],c=()=>{e.updateMatch(n,m=>({...m,context:Gy(e,t)}))};if(nE(e,n)){if(e.router.isServer)return e.router.getMatch(n)}else{const m=e.router.getMatch(n);if(m._nonReactive.loaderPromise){if(m.status==="success"&&!e.sync&&!m.preload)return m;await m._nonReactive.loaderPromise;const p=e.router.getMatch(n),g=p._nonReactive.error||p.error;g&&Wi(e,p,g)}else{const p=Date.now()-m.updatedAt,g=bd(e,n),y=g?l.options.preloadStaleTime??e.router.options.defaultPreloadStaleTime??3e4:l.options.staleTime??e.router.options.defaultStaleTime??0,S=l.options.shouldReload,w=typeof S=="function"?S(iE(e,n,t,l)):S,C=!!g&&!e.router.state.matches.some(I=>I.id===n),x=e.router.getMatch(n);x._nonReactive.loaderPromise=fa(),C!==x.preload&&e.updateMatch(n,I=>({...I,preload:C}));const{status:E,invalid:k}=x;i=E==="success"&&(k||(w??p>y)),g&&l.options.preload===!1||(i&&!e.sync?(o=!0,(async()=>{try{await H_(e,n,t,l),c();const I=e.router.getMatch(n);I._nonReactive.loaderPromise?.resolve(),I._nonReactive.loadPromise?.resolve(),I._nonReactive.loaderPromise=void 0}catch(I){xr(I)&&await e.router.navigate(I.options)}})()):(E!=="success"||i&&e.sync)&&await H_(e,n,t,l))}}const f=e.router.getMatch(n);o||(f._nonReactive.loaderPromise?.resolve(),f._nonReactive.loadPromise?.resolve()),clearTimeout(f._nonReactive.pendingTimeout),f._nonReactive.pendingTimeout=void 0,o||(f._nonReactive.loaderPromise=void 0),f._nonReactive.dehydrated=void 0,o||c();const d=o?f.isFetching:!1;return d!==f.isFetching||f.invalid!==!1?(e.updateMatch(n,m=>({...m,isFetching:d,invalid:!1})),e.router.getMatch(n)):f};async function V_(e){const t=Object.assign(e,{matchPromises:[]});!t.router.isServer&&t.router.state.matches.some(n=>n._forcePending)&&yf(t);try{for(let c=0;c<t.matches.length;c++){const f=h2(t,c);os(f)&&await f}const n=t.firstBadMatchIndex??t.matches.length;for(let c=0;c<n;c++)t.matchPromises.push(m2(t,c));const i=(await Promise.allSettled(t.matchPromises)).filter(c=>c.status==="rejected").map(c=>c.reason);let o;for(const c of i){if(xr(c))throw c;!o&&rr(c)&&(o=c)}for(const c of t.matches){const{id:f,routeId:d}=c,m=t.router.looseRoutesById[d];try{const p=p2(t,f,m);if(p){const g=await p;t.updateMatch(f,y=>({...y,...g}))}}catch(p){console.error(`Error executing head for route ${d}:`,p)}}if(o)throw o;const l=yf(t);os(l)&&await l}catch(n){if(rr(n)&&!t.preload){const r=yf(t);throw os(r)&&await r,n}if(xr(n))throw n}return t.matches}async function sE(e){if(!e._lazyLoaded&&e._lazyPromise===void 0&&(e.lazyFn?e._lazyPromise=e.lazyFn().then(t=>{const{id:n,...r}=t.options;Object.assign(e.options,r),e._lazyLoaded=!0,e._lazyPromise=void 0}):e._lazyLoaded=!0),!e._componentsLoaded&&e._componentsPromise===void 0){const t=()=>{const n=[];for(const r of aE){const i=e.options[r]?.preload;i&&n.push(i())}if(n.length)return Promise.all(n).then(()=>{e._componentsLoaded=!0,e._componentsPromise=void 0});e._componentsLoaded=!0,e._componentsPromise=void 0};e._componentsPromise=e._lazyPromise?e._lazyPromise.then(t):t()}return e._componentsPromise}function qc(e,t){return t?{status:"error",error:t}:{status:"success",value:e}}function oE(e){for(const t of aE)if(e.options[t]?.preload)return!0;return!1}const aE=["component","errorComponent","pendingComponent","notFoundComponent"];function g2(e){return{input:({url:t})=>{for(const n of e)t=lE(n,t);return t},output:({url:t})=>{for(let n=e.length-1;n>=0;n--)t=uE(e[n],t);return t}}}function y2(e){const t=W1(e.basepath),n=`/${t}`,r=`${n}/`,i=e.caseSensitive?n:n.toLowerCase(),o=e.caseSensitive?r:r.toLowerCase();return{input:({url:l})=>{const c=e.caseSensitive?l.pathname:l.pathname.toLowerCase();return c===i?l.pathname="/":c.startsWith(o)&&(l.pathname=l.pathname.slice(n.length)),l},output:({url:l})=>(l.pathname=gf(["/",t,l.pathname]),l)}}function lE(e,t){const n=e?.input?.({url:t});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return t}function uE(e,t){const n=e?.output?.({url:t});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return t}function Vs(e){const t=e.resolvedLocation,n=e.location,r=t?.pathname!==n.pathname,i=t?.href!==n.href,o=t?.hash!==n.hash;return{fromLocation:t,toLocation:n,pathChanged:r,hrefChanged:i,hashChanged:o}}class v2{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=n=>n(),this.update=n=>{n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const r=this.options,i=this.basepath??r?.basepath??"/",o=this.basepath===void 0,l=r?.rewrite;this.options={...r,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(g=>[encodeURIComponent(g),g])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=MI())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new TI(S2(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(g=>!["redirected"].includes(g.status))}}}),t2(this));let c=!1;const f=this.options.basepath??"/",d=this.options.rewrite;if(o||i!==f||l!==d){this.basepath=f;const g=[];W1(f)!==""&&g.push(y2({basepath:f})),d&&g.push(d),this.rewrite=g.length===0?void 0:g.length===1?g[0]:g2(g),this.history&&this.updateLatestLocation(),c=!0}c&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:n,routesByPath:r,processedTree:i}=qI(this.routeTree,this.options.caseSensitive,(l,c)=>{l.init({originalIndex:c})});this.options.routeMasks&&jI(this.options.routeMasks,i),this.routesById=n,this.routesByPath=r,this.processedTree=i;const o=this.options.notFoundRoute;o&&(o.init({originalIndex:99999999999}),this.routesById[o.id]=o)},this.subscribe=(n,r)=>{const i={eventType:n,fn:r};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const i=({href:f,state:d})=>{const m=new URL(f,this.origin),p=lE(this.rewrite,m),g=this.options.parseSearch(p.search),y=this.options.stringifySearch(g);return p.search=y,{href:p.href.replace(p.origin,""),publicHref:f,url:p,pathname:q_(p.pathname),searchStr:y,search:br(r?.search,g),hash:p.hash.split("#").reverse()[0]??"",state:br(r?.state,d)}},o=i(n),{__tempLocation:l,__tempKey:c}=o.state;if(l&&(!c||c===this.tempLocationKey)){const f=i(l);return f.state.key=o.state.key,f.state.__TSR_key=o.state.__TSR_key,delete f.state.__tempLocation,{...f,maskedLocation:o}}return o},this.resolvePathCache=jf(1e3),this.resolvePathWithBase=(n,r)=>ZI({base:n,to:Ky(r),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(n,r,i)=>typeof n=="string"?this.matchRoutesInternal({pathname:n,search:r},i):this.matchRoutesInternal(n,r),this.getMatchedRoutes=n=>w2({pathname:n,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r._nonReactive.pendingTimeout),r._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const n=this.state.matches.filter(o=>o.status==="pending"),r=this.state.matches.filter(o=>o.isFetching==="loader");new Set([...this.state.pendingMatches??[],...n,...r]).forEach(o=>{this.cancelMatch(o.id)})},this.buildLocation=n=>{const r=(o={})=>{const l=o._fromLocation||this.pendingBuiltLocation||this.latestLocation,c=this.matchRoutes(l,{_buildLocation:!0}),f=Lf(c);o.from;const d=o.unsafeRelative==="path"?l.pathname:o.from??f.fullPath,m=this.resolvePathWithBase(d,"."),p=f.search,g={...f.params},y=o.to?this.resolvePathWithBase(m,`${o.to}`):this.resolvePathWithBase(m,"."),S=o.params===!1||o.params===null?{}:(o.params??!0)===!0?g:Object.assign(g,Xi(o.params,g)),w=wm({path:y,params:S}).interpolatedPath,C=this.matchRoutes(w,void 0,{_buildLocation:!0}).map(N=>this.looseRoutesById[N.routeId]);if(Object.keys(S).length>0)for(const N of C){const U=N.options.params?.stringify??N.options.stringifyParams;U&&Object.assign(S,U(S))}const x=n.leaveParams?y:q_(wm({path:y,params:S,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath);let E=p;if(n._includeValidateSearch&&this.options.search?.strict){const N={};C.forEach(U=>{if(U.options.validateSearch)try{Object.assign(N,Mg(U.options.validateSearch,{...N,...E}))}catch{}}),E=N}E=_2({search:E,dest:o,destRoutes:C,_includeValidateSearch:n._includeValidateSearch}),E=br(p,E);const k=this.options.stringifySearch(E),I=o.hash===!0?l.hash:o.hash?Xi(o.hash,l.hash):void 0,P=I?`#${I}`:"";let R=o.state===!0?l.state:o.state?Xi(o.state,l.state):{};R=br(l.state,R);const M=`${x}${k}${P}`,L=new URL(M,this.origin),j=uE(this.rewrite,L);return{publicHref:j.pathname+j.search+j.hash,href:M,url:j,pathname:x,search:E,searchStr:k,state:R,hash:I??"",unmaskOnReload:o.unmaskOnReload}},i=(o={},l)=>{const c=r(o);let f=l?r(l):void 0;if(!f){const d={};if(this.options.routeMasks){const m=FI(c.pathname,this.processedTree);if(m){Object.assign(d,m.params);const{from:p,params:g,...y}=m.route,S=g===!1||g===null?{}:(g??!0)===!0?d:Object.assign(d,Xi(g,d));l={from:n.from,...y,params:S},f=r(l)}}}return f&&(c.maskedLocation=f),c};return n.mask?i(n,{from:n.from,...n.mask}):i(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...i})=>{const o=()=>{const f=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];f.forEach(m=>{i.state[m]=this.latestLocation.state[m]});const d=qs(i.state,this.latestLocation.state);return f.forEach(m=>{delete i.state[m]}),d},l=Hs(this.latestLocation.href)===Hs(i.href),c=this.commitLocationPromise;if(this.commitLocationPromise=fa(()=>{c?.resolve()}),l&&o())this.load();else{let{maskedLocation:f,hashScrollIntoView:d,url:m,...p}=i;f&&(p={...f,state:{...f.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=d??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[i.replace?"replace":"push"](p.publicHref,p.state,{ignoreBlocker:r})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:i,viewTransition:o,ignoreBlocker:l,href:c,...f}={})=>{if(c){const p=this.history.location.state.__TSR_index,g=zf(c,{__TSR_index:n?p:p+1});f.to=g.pathname,f.search=this.options.parseSearch(g.search),f.hash=g.hash.slice(1)}const d=this.buildLocation({...f,_includeValidateSearch:!0});this.pendingBuiltLocation=d;const m=this.commitLocation({...d,viewTransition:o,replace:n,resetScroll:r,hashScrollIntoView:i,ignoreBlocker:l});return Promise.resolve().then(()=>{this.pendingBuiltLocation===d&&(this.pendingBuiltLocation=void 0)}),m},this.navigate=async({to:n,reloadDocument:r,href:i,publicHref:o,...l})=>{let c=!1;if(i)try{new URL(`${i}`),c=!0}catch{}if(c&&!r&&(r=!0),r){if(!i||!o&&!c){const d=this.buildLocation({to:n,...l});i=i??d.url.href,o=o??d.url.href}const f=!c&&o?o:i;if(!l.ignoreBlocker){const m=this.history.getBlockers?.()??[];for(const p of m)if(p?.blockerFn&&await p.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}return l.replace?window.location.replace(f):window.location.href=f,Promise.resolve()}return this.buildAndCommitLocation({...l,href:i,to:n,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const r=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});if(this.latestLocation.publicHref!==r.publicHref||r.url.origin!==this.origin){const i=this.getParsedLocationHref(r);throw u2({href:i})}}const n=this.matchRoutes(this.latestLocation);this.__store.setState(r=>({...r,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:n,cachedMatches:r.cachedMatches.filter(i=>!n.some(o=>o.id===i.id))}))},this.load=async n=>{let r,i,o;for(o=new Promise(c=>{this.startTransition(async()=>{try{this.beforeLoad();const f=this.latestLocation,d=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...Vs({resolvedLocation:d,location:f})}),this.emit({type:"onBeforeLoad",...Vs({resolvedLocation:d,location:f})}),await V_({router:this,sync:n?.sync,matches:this.state.pendingMatches,location:f,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let m=[],p=[],g=[];Vl(()=>{this.__store.setState(y=>{const S=y.matches,w=y.pendingMatches||y.matches;return m=S.filter(C=>!w.some(x=>x.id===C.id)),p=w.filter(C=>!S.some(x=>x.id===C.id)),g=w.filter(C=>S.some(x=>x.id===C.id)),{...y,isLoading:!1,loadedAt:Date.now(),matches:w,pendingMatches:void 0,cachedMatches:[...y.cachedMatches,...m.filter(C=>C.status!=="error"&&C.status!=="notFound")]}}),this.clearExpiredCache()}),[[m,"onLeave"],[p,"onEnter"],[g,"onStay"]].forEach(([y,S])=>{y.forEach(w=>{this.looseRoutesById[w.routeId].options[S]?.(w)})})})})}})}catch(f){xr(f)?(r=f,this.isServer||this.navigate({...r.options,replace:!0,ignoreBlocker:!0})):rr(f)&&(i=f),this.__store.setState(d=>({...d,statusCode:r?r.status:i?404:d.matches.some(m=>m.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===o&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),c()})}),this.latestLoadPromise=o,await o;this.latestLoadPromise&&o!==this.latestLoadPromise;)await this.latestLoadPromise;let l;this.hasNotFoundMatch()?l=404:this.__store.state.matches.some(c=>c.status==="error")&&(l=500),l!==void 0&&this.__store.setState(c=>({...c,statusCode:l}))},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const o=this.latestLocation,l=this.state.resolvedLocation,c=typeof r.types=="function"?r.types(Vs({resolvedLocation:l,location:o})):r.types;if(c===!1){n();return}i={update:n,types:c}}else i=n;document.startViewTransition(i)}else n()},this.updateMatch=(n,r)=>{this.startTransition(()=>{const i=this.state.pendingMatches?.some(o=>o.id===n)?"pendingMatches":this.state.matches.some(o=>o.id===n)?"matches":this.state.cachedMatches.some(o=>o.id===n)?"cachedMatches":"";i&&this.__store.setState(o=>({...o,[i]:o[i]?.map(l=>l.id===n?r(l):l)}))})},this.getMatch=n=>{const r=i=>i.id===n;return this.state.cachedMatches.find(r)??this.state.pendingMatches?.find(r)??this.state.matches.find(r)},this.invalidate=n=>{const r=i=>n?.filter?.(i)??!0?{...i,invalid:!0,...n?.forcePending||i.status==="error"||i.status==="notFound"?{status:"pending",error:void 0}:void 0}:i;return this.__store.setState(i=>({...i,matches:i.matches.map(r),cachedMatches:i.cachedMatches.map(r),pendingMatches:i.pendingMatches?.map(r)})),this.shouldViewTransition=!1,this.load({sync:n?.sync})},this.getParsedLocationHref=n=>{let r=n.url.href;return this.origin&&n.url.origin===this.origin&&(r=r.replace(this.origin,"")||"/"),r},this.resolveRedirect=n=>{if(!n.options.href){const r=this.buildLocation(n.options),i=this.getParsedLocationHref(r);n.options.href=r.href,n.headers.set("Location",i)}return n.headers.get("Location")||n.headers.set("Location",n.options.href),n},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(o=>!r(o))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const i=this.looseRoutesById[r.routeId];if(!i.options.loader)return!0;const o=(r.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??300*1e3;return r.status==="error"?!0:Date.now()-r.updatedAt>=o};this.clearCache({filter:n})},this.loadRouteChunk=sE,this.preloadRoute=async n=>{const r=this.buildLocation(n);let i=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const o=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(c=>c.id)),l=new Set([...o,...this.state.cachedMatches.map(c=>c.id)]);Vl(()=>{i.forEach(c=>{l.has(c.id)||this.__store.setState(f=>({...f,cachedMatches:[...f.cachedMatches,c]}))})});try{return i=await V_({router:this,matches:i,location:r,preload:!0,updateMatch:(c,f)=>{o.has(c)?i=i.map(d=>d.id===c?f(d):d):this.updateMatch(c,f)}}),i}catch(c){if(xr(c))return c.options.reloadDocument?void 0:await this.preloadRoute({...c.options,_fromLocation:r});rr(c)||console.error(c);return}},this.matchRoute=(n,r)=>{const i={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},o=this.buildLocation(i);if(r?.pending&&this.state.status!=="pending")return!1;const c=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,f=$I(o.pathname,r?.caseSensitive??!1,r?.fuzzy??!1,c.pathname,this.processedTree);return!f||n.params&&!qs(f.params,n.params,{partial:!0})?!1:r?.includeSearch??!0?qs(c.search,o.search,{partial:!0})?f.params:!1:f.params},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,caseSensitive:t.caseSensitive??!1,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??o2,parseSearch:t.parseSearch??s2}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(t,n){const r=this.getMatchedRoutes(t.pathname),{foundRoute:i,routeParams:o}=r;let{matchedRoutes:l}=r,c=!1;(i?i.path!=="/"&&o["**"]:Hs(t.pathname))&&(this.options.notFoundRoute?l=[...l,this.options.notFoundRoute]:c=!0);const f=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let p=l.length-1;p>=0;p--){const g=l[p];if(g.children)return g.id}return tr}})(),d=[],m=p=>p?.id?p.context??this.options.context??void 0:this.options.context??void 0;return l.forEach((p,g)=>{const y=d[g-1],[S,w,C]=(()=>{const ee=y?.search??t.search,re=y?._strictSearch??void 0;try{const K=Mg(p.options.validateSearch,{...ee})??void 0;return[{...ee,...K},{...re,...K},void 0]}catch(K){let $=K;if(K instanceof Uf||($=new Uf(K.message,{cause:K})),n?.throwOnError)throw $;return[ee,{},$]}})(),x=p.options.loaderDeps?.({search:S})??"",E=x?JSON.stringify(x):"",{interpolatedPath:k,usedParams:I}=wm({path:p.fullPath,params:o,decodeCharMap:this.pathParamsDecodeCharMap}),P=p.id+k+E,R=this.getMatch(P),M=this.state.matches.find(ee=>ee.routeId===p.id),L=R?._strictParams??I;let j;if(!R){const ee=p.options.params?.parse??p.options.parseParams;if(ee)try{Object.assign(L,ee(L))}catch(re){if(rr(re)||xr(re)?j=re:j=new b2(re.message,{cause:re}),n?.throwOnError)throw j}}Object.assign(o,L);const N=M?"stay":"enter";let U;if(R)U={...R,cause:N,params:M?br(M.params,o):o,_strictParams:L,search:br(M?M.search:R.search,S),_strictSearch:w};else{const ee=p.options.loader||p.options.beforeLoad||p.lazyFn||oE(p)?"pending":"success";U={id:P,ssr:this.isServer?void 0:p.options.ssr,index:g,routeId:p.id,params:M?br(M.params,o):o,_strictParams:L,pathname:k,updatedAt:Date.now(),search:M?br(M.search,S):S,_strictSearch:w,searchError:void 0,status:ee,isFetching:!1,error:void 0,paramsError:j,__routeContext:void 0,_nonReactive:{loadPromise:fa()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:N,loaderDeps:M?br(M.loaderDeps,x):x,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:p.options.staticData||{},fullPath:p.fullPath}}n?.preload||(U.globalNotFound=f===p.id),U.searchError=C;const Z=m(y);U.context={...Z,...U.__routeContext,...U.__beforeLoadContext},d.push(U)}),d.forEach((p,g)=>{const y=this.looseRoutesById[p.routeId];if(!this.getMatch(p.id)&&n?._buildLocation!==!0){const w=d[g-1],C=m(w);if(y.options.context){const x={deps:p.loaderDeps,params:p.params,context:C??{},location:t,navigate:E=>this.navigate({...E,_fromLocation:t}),buildLocation:this.buildLocation,cause:p.cause,abortController:p.abortController,preload:!!p.preload,matches:d};p.__routeContext=y.options.context(x)??void 0}p.context={...C,...p.__routeContext,...p.__beforeLoadContext}}}),d}}class Uf extends Error{}class b2 extends Error{}function S2(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Mg(e,t){if(e==null)return{};if("~standard"in e){const n=e["~standard"].validate(t);if(n instanceof Promise)throw new Uf("Async validation not supported");if(n.issues)throw new Uf(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in e?e.parse(t):typeof e=="function"?e(t):{}}function w2({pathname:e,routesById:t,processedTree:n}){const r={},i=Hs(e);let o;const l=BI(i,n,!0);return l&&(o=l.route,Object.assign(r,l.params)),{matchedRoutes:l?.branch||[t[tr]],routeParams:r,foundRoute:o}}function _2({search:e,dest:t,destRoutes:n,_includeValidateSearch:r}){const i=n.reduce((c,f)=>{const d=[];if("search"in f.options)f.options.search?.middlewares&&d.push(...f.options.search.middlewares);else if(f.options.preSearchFilters||f.options.postSearchFilters){const m=({search:p,next:g})=>{let y=p;"preSearchFilters"in f.options&&f.options.preSearchFilters&&(y=f.options.preSearchFilters.reduce((w,C)=>C(w),p));const S=g(y);return"postSearchFilters"in f.options&&f.options.postSearchFilters?f.options.postSearchFilters.reduce((w,C)=>C(w),S):S};d.push(m)}if(r&&f.options.validateSearch){const m=({search:p,next:g})=>{const y=g(p);try{return{...y,...Mg(f.options.validateSearch,y)??void 0}}catch{return y}};d.push(m)}return c.concat(d)},[])??[],o=({search:c})=>t.search?t.search===!0?c:Xi(t.search,c):{};i.push(o);const l=(c,f)=>{if(c>=i.length)return f;const d=i[c];return d({search:f,next:p=>l(c+1,p)})};return l(0,e)}const x2="Error preloading route! ";class cE{constructor(t){if(this.init=n=>{this.originalIndex=n.originalIndex;const r=this.options,i=!r?.path&&!r?.id;this.parentRoute=this.options.getParentRoute?.(),i?this._path=tr:this.parentRoute||wi(!1);let o=i?tr:r?.path;o&&o!=="/"&&(o=X1(o));const l=r?.id||o;let c=i?tr:gf([this.parentRoute.id===tr?"":this.parentRoute.id,l]);o===tr&&(o="/"),c!==tr&&(c=gf(["/",c]));const f=c===tr?"/":gf([this.parentRoute.fullPath,o]);this._path=o,this._id=c,this._fullPath=f,this._to=f},this.addChildren=n=>this._addFileChildren(n),this._addFileChildren=n=>(Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this),this._addFileTypes=()=>this,this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.options=t||{},this.isRoot=!t?.getParentRoute,t?.id&&t?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class C2 extends cE{constructor(t){super(t)}}function Qy(e){const t=e.errorComponent??Sd;return O.jsx(E2,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:({error:n,reset:r})=>n?H.createElement(t,{error:n,reset:r}):e.children})}class E2 extends H.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(t){return{resetKey:t.getResetKey()}}static getDerivedStateFromError(t){return{error:t}}reset(){this.setState({error:null})}componentDidUpdate(t,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(t,n){this.props.onCatch&&this.props.onCatch(t,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Sd({error:e}){const[t,n]=H.useState(!1);return O.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[O.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),O.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:t?"Hide Error":"Show Error"})]}),O.jsx("div",{style:{height:".25rem"}}),t?O.jsx("div",{children:O.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:e.message?O.jsx("code",{children:e.message}):null})}):null]})}function R2({children:e,fallback:t=null}){return k2()?O.jsx(Nr.Fragment,{children:e}):O.jsx(Nr.Fragment,{children:t})}function k2(){return Nr.useSyncExternalStore(A2,()=>!0,()=>!1)}function A2(){return()=>{}}var xm={exports:{}},Cm={},Em={exports:{}},Rm={};var K_;function T2(){if(K_)return Rm;K_=1;var e=ma();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,o=e.useLayoutEffect,l=e.useDebugValue;function c(p,g){var y=g(),S=r({inst:{value:y,getSnapshot:g}}),w=S[0].inst,C=S[1];return o(function(){w.value=y,w.getSnapshot=g,f(w)&&C({inst:w})},[p,y,g]),i(function(){return f(w)&&C({inst:w}),p(function(){f(w)&&C({inst:w})})},[p]),l(y),y}function f(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function d(p,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return Rm.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Rm}var G_;function O2(){return G_||(G_=1,Em.exports=T2()),Em.exports}var Q_;function M2(){if(Q_)return Cm;Q_=1;var e=ma(),t=O2();function n(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,o=e.useRef,l=e.useEffect,c=e.useMemo,f=e.useDebugValue;return Cm.useSyncExternalStoreWithSelector=function(d,m,p,g,y){var S=o(null);if(S.current===null){var w={hasValue:!1,value:null};S.current=w}else w=S.current;S=c(function(){function x(R){if(!E){if(E=!0,k=R,R=g(R),y!==void 0&&w.hasValue){var M=w.value;if(y(M,R))return I=M}return I=R}if(M=I,r(k,R))return M;var L=g(R);return y!==void 0&&y(M,L)?(k=R,M):(k=R,I=L)}var E=!1,k,I,P=p===void 0?null:p;return[function(){return x(m())},P===null?void 0:function(){return x(P())}]},[m,p,g,y]);var C=i(d,S[0],S[1]);return l(function(){w.hasValue=!0,w.value=C},[C]),f(C),C},Cm}var Z_;function I2(){return Z_||(Z_=1,xm.exports=M2()),xm.exports}var N2=I2();function D2(e,t=r=>r,n={}){const r=n.equal??z2;return N2.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,r)}function z2(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!t.has(r)||!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const n=Y_(e);if(n.length!==Y_(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}function Y_(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}const km=H.createContext(null);function fE(){return typeof document>"u"?km:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=km,km)}function or(e){const t=H.useContext(fE());return e?.warn,t}function $n(e){const t=or({warn:e?.router===void 0}),n=e?.router||t,r=H.useRef(void 0);return D2(n.__store,i=>{if(e?.select){if(e.structuralSharing??n.options.defaultStructuralSharing){const o=br(r.current,e.select(i));return r.current=o,o}return e.select(i)}return i})}const wd=H.createContext(void 0),L2=H.createContext(void 0);function Vr(e){const t=H.useContext(e.from?L2:wd);return $n({select:r=>{const i=r.matches.find(o=>e.from?e.from===o.routeId:o.id===t);if(wi(!((e.shouldThrow??!0)&&!i),`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`),i!==void 0)return e.select?e.select(i):i},structuralSharing:e.structuralSharing})}function Zy(e){return Vr({from:e.from,strict:e.strict,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function Yy(e){const{select:t,...n}=e;return Vr({...n,select:r=>t?t(r.loaderDeps):r.loaderDeps})}function _d(e){return Vr({from:e.from,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,strict:e.strict,select:t=>{const n=e.strict===!1?t.params:t._strictParams;return e.select?e.select(n):n}})}function Jy(e){return Vr({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.search):t.search})}const Hc=typeof window<"u"?H.useLayoutEffect:H.useEffect;function Am(e){const t=H.useRef({value:e,prev:null}),n=t.current.value;return e!==n&&(t.current={value:e,prev:n}),t.current.prev}function P2(e,t,n={},r={}){H.useEffect(()=>{if(!e.current||r.disabled||typeof IntersectionObserver!="function")return;const i=new IntersectionObserver(([o])=>{t(o)},n);return i.observe(e.current),()=>{i.disconnect()}},[t,n,r.disabled,e])}function j2(e){const t=H.useRef(null);return H.useImperativeHandle(e,()=>t.current,[]),t}function xd(e){const t=or();return H.useCallback(n=>t.navigate({...n,from:n.from??e?.from}),[e?.from,t])}var F2=P1();function $2(e,t){const n=or(),[r,i]=H.useState(!1),o=H.useRef(!1),l=j2(t),{activeProps:c,inactiveProps:f,activeOptions:d,to:m,preload:p,preloadDelay:g,hashScrollIntoView:y,replace:S,startTransition:w,resetScroll:C,viewTransition:x,children:E,target:k,disabled:I,style:P,className:R,onClick:M,onFocus:L,onMouseEnter:j,onMouseLeave:N,onTouchStart:U,ignoreBlocker:Z,params:ee,search:re,hash:K,state:$,mask:te,reloadDocument:de,unsafeRelative:se,from:z,_fromLocation:D,...V}=e,T=$n({select:be=>be.location.search,structuralSharing:!0}),ae=e.from,ce=H.useMemo(()=>({...e,from:ae}),[n,T,ae,e._fromLocation,e.hash,e.to,e.search,e.params,e.state,e.mask,e.unsafeRelative]),he=H.useMemo(()=>n.buildLocation({...ce}),[n,ce]),ye=H.useMemo(()=>{if(I)return;let be=he.maskedLocation?he.maskedLocation.url.href:he.url.href,me=!1;return n.origin&&(be.startsWith(n.origin)?be=n.history.createHref(be.replace(n.origin,""))||"/":me=!0),{href:be,external:me}},[I,he.maskedLocation,he.url,n.origin,n.history]),Re=H.useMemo(()=>{if(ye?.external)return ye.href;try{return new URL(m),m}catch{}},[m,ye]),we=e.reloadDocument||Re?!1:p??n.options.defaultPreload,qe=g??n.options.defaultPreloadDelay??0,Je=$n({select:be=>{if(Re)return!1;if(d?.exact){if(!QI(be.location.pathname,he.pathname,n.basepath))return!1}else{const me=Ff(be.location.pathname,n.basepath),De=Ff(he.pathname,n.basepath);if(!(me.startsWith(De)&&(me.length===De.length||me[De.length]==="/")))return!1}return(d?.includeSearch??!0)&&!qs(be.location.search,he.search,{partial:!d?.exact,ignoreUndefined:!d?.explicitUndefined})?!1:d?.includeHash?be.location.hash===he.hash:!0}}),Ue=H.useCallback(()=>{n.preloadRoute({...ce}).catch(be=>{console.warn(be),console.warn(x2)})},[n,ce]),ot=H.useCallback(be=>{be?.isIntersecting&&Ue()},[Ue]);P2(l,ot,V2,{disabled:!!I||we!=="viewport"}),H.useEffect(()=>{o.current||!I&&we==="render"&&(Ue(),o.current=!0)},[I,Ue,we]);const Qe=be=>{const me=be.currentTarget.getAttribute("target"),De=k!==void 0?k:me;if(!I&&!K2(be)&&!be.defaultPrevented&&(!De||De==="_self")&&be.button===0){be.preventDefault(),F2.flushSync(()=>{i(!0)});const X=n.subscribe("onResolved",()=>{X(),i(!1)});n.navigate({...ce,replace:S,resetScroll:C,hashScrollIntoView:y,startTransition:w,viewTransition:x,ignoreBlocker:Z})}};if(Re)return{...V,ref:l,href:Re,...E&&{children:E},...k&&{target:k},...I&&{disabled:I},...P&&{style:P},...R&&{className:R},...M&&{onClick:M},...L&&{onFocus:L},...j&&{onMouseEnter:j},...N&&{onMouseLeave:N},...U&&{onTouchStart:U}};const Xe=be=>{I||we&&Ue()},ct=Xe,je=be=>{if(!(I||!we))if(!qe)Ue();else{const me=be.target;if(bl.has(me))return;const De=setTimeout(()=>{bl.delete(me),Ue()},qe);bl.set(me,De)}},Ve=be=>{if(I||!we||!qe)return;const me=be.target,De=bl.get(me);De&&(clearTimeout(De),bl.delete(me))},gt=Je?Xi(c,{})??B2:Tm,ft=Je?Tm:Xi(f,{})??Tm,ge=[R,gt.className,ft.className].filter(Boolean).join(" "),Fe=(P||gt.style||ft.style)&&{...P,...gt.style,...ft.style};return{...V,...gt,...ft,href:ye?.href,ref:l,onClick:Sl([M,Qe]),onFocus:Sl([L,Xe]),onMouseEnter:Sl([j,je]),onMouseLeave:Sl([N,Ve]),onTouchStart:Sl([U,ct]),disabled:!!I,target:k,...Fe&&{style:Fe},...ge&&{className:ge},...I&&U2,...Je&&q2,...r&&H2}}const Tm={},B2={className:"active"},U2={role:"link","aria-disabled":!0},q2={"data-status":"active","aria-current":"page"},H2={"data-transitioning":"transitioning"},bl=new WeakMap,V2={rootMargin:"100px"},Sl=e=>t=>{for(const n of e)if(n){if(t.defaultPrevented)return;n(t)}},dE=H.forwardRef((e,t)=>{const{_asChild:n,...r}=e,{type:i,ref:o,...l}=$2(r,t),c=typeof r.children=="function"?r.children({isActive:l["data-status"]==="active"}):r.children;return n===void 0&&delete l.disabled,H.createElement(n||"a",{...l,ref:o},c)});function K2(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}class G2 extends cE{constructor(t){super(t),this.useMatch=n=>Vr({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Vr({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Jy({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>_d({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>Yy({...n,from:this.id}),this.useLoaderData=n=>Zy({...n,from:this.id}),this.useNavigate=()=>xd({from:this.fullPath}),this.Link=Nr.forwardRef((n,r)=>O.jsx(dE,{ref:r,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function gu(e){return new G2(e)}class Q2 extends C2{constructor(t){super(t),this.useMatch=n=>Vr({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Vr({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Jy({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>_d({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>Yy({...n,from:this.id}),this.useLoaderData=n=>Zy({...n,from:this.id}),this.useNavigate=()=>xd({from:this.fullPath}),this.Link=Nr.forwardRef((n,r)=>O.jsx(dE,{ref:r,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function Z2(e){return new Q2(e)}function J_(e){return typeof e=="object"?new X_(e,{silent:!0}).createRoute(e):new X_(e,{silent:!0}).createRoute}class X_{constructor(t,n){this.path=t,this.createRoute=r=>{this.silent;const i=gu(r);return i.isRoot=!1,i},this.silent=n?.silent}}class W_{constructor(t){this.useMatch=n=>Vr({select:n?.select,from:this.options.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Vr({from:this.options.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Jy({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useParams=n=>_d({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useLoaderDeps=n=>Yy({...n,from:this.options.id}),this.useLoaderData=n=>Zy({...n,from:this.options.id}),this.useNavigate=()=>{const n=or();return xd({from:n.routesById[this.options.id].fullPath})},this.options=t,this.$$typeof=Symbol.for("react.memo")}}function ex(e){return typeof e=="object"?new W_(e):t=>new W_({id:e,...t})}function Y2(){const e=or(),t=H.useRef({router:e,mounted:!1}),[n,r]=H.useState(!1),{hasPendingMatches:i,isLoading:o}=$n({select:p=>({isLoading:p.isLoading,hasPendingMatches:p.matches.some(g=>g.status==="pending")}),structuralSharing:!0}),l=Am(o),c=o||n||i,f=Am(c),d=o||i,m=Am(d);return e.startTransition=p=>{r(!0),H.startTransition(()=>{p(),r(!1)})},H.useEffect(()=>{const p=e.history.subscribe(e.load),g=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Hs(e.latestLocation.publicHref)!==Hs(g.publicHref)&&e.commitLocation({...g,replace:!0}),()=>{p()}},[e,e.history]),Hc(()=>{if(typeof window<"u"&&e.ssr||t.current.router===e&&t.current.mounted)return;t.current={router:e,mounted:!0},(async()=>{try{await e.load()}catch(g){console.error(g)}})()},[e]),Hc(()=>{l&&!o&&e.emit({type:"onLoad",...Vs(e.state)})},[l,e,o]),Hc(()=>{m&&!d&&e.emit({type:"onBeforeRouteMount",...Vs(e.state)})},[d,m,e]),Hc(()=>{if(f&&!c){const p=Vs(e.state);e.emit({type:"onResolved",...p}),e.__store.setState(g=>({...g,status:"idle",resolvedLocation:g.location})),p.hrefChanged&&n2(e)}},[c,f,e]),null}function J2(e){const t=$n({select:n=>`not-found-${n.location.pathname}-${n.status}`});return O.jsx(Qy,{getResetKey:()=>t,onCatch:(n,r)=>{if(rr(n))e.onCatch?.(n,r);else throw n},errorComponent:({error:n})=>{if(rr(n))return e.fallback?.(n);throw n},children:e.children})}function X2(){return O.jsx("p",{children:"Not Found"})}function Qo(e){return O.jsx(O.Fragment,{children:e.children})}function hE(e,t,n){return t.options.notFoundComponent?O.jsx(t.options.notFoundComponent,{...n}):e.options.defaultNotFoundComponent?O.jsx(e.options.defaultNotFoundComponent,{...n}):O.jsx(X2,{})}function W2({children:e}){const t=or();return t.isServer?O.jsx("script",{nonce:t.options.ssr?.nonce,dangerouslySetInnerHTML:{__html:e+";document.currentScript.remove()"}}):null}function eN(){const e=or();if(!e.isScrollRestoring||!e.isServer||typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation}))return null;const n=(e.options.getScrollRestorationKey||Og)(e.latestLocation),r=n!==Og(e.latestLocation)?n:void 0,i={storageKey:$f,shouldScrollRestoration:!0};return r&&(i.key=r),O.jsx(W2,{children:`(${eE.toString()})(${JSON.stringify(i)})`})}const pE=H.memo(function({matchId:t}){const n=or(),r=$n({select:x=>{const E=x.matches.find(k=>k.id===t);return wi(E),{routeId:E.routeId,ssr:E.ssr,_displayPending:E._displayPending}},structuralSharing:!0}),i=n.routesById[r.routeId],o=i.options.pendingComponent??n.options.defaultPendingComponent,l=o?O.jsx(o,{}):null,c=i.options.errorComponent??n.options.defaultErrorComponent,f=i.options.onCatch??n.options.defaultOnCatch,d=i.isRoot?i.options.notFoundComponent??n.options.notFoundRoute?.options.component:i.options.notFoundComponent,m=r.ssr===!1||r.ssr==="data-only",p=(!i.isRoot||i.options.wrapInSuspense||m)&&(i.options.wrapInSuspense??o??(i.options.errorComponent?.preload||m))?H.Suspense:Qo,g=c?Qy:Qo,y=d?J2:Qo,S=$n({select:x=>x.loadedAt}),w=$n({select:x=>{const E=x.matches.findIndex(k=>k.id===t);return x.matches[E-1]?.routeId}}),C=i.isRoot?i.options.shellComponent??Qo:Qo;return O.jsxs(C,{children:[O.jsx(wd.Provider,{value:t,children:O.jsx(p,{fallback:l,children:O.jsx(g,{getResetKey:()=>S,errorComponent:c||Sd,onCatch:(x,E)=>{if(rr(x))throw x;f?.(x,E)},children:O.jsx(y,{fallback:x=>{if(!d||x.routeId&&x.routeId!==r.routeId||!x.routeId&&!i.isRoot)throw x;return H.createElement(d,x)},children:m||r._displayPending?O.jsx(R2,{fallback:l,children:O.jsx(tx,{matchId:t})}):O.jsx(tx,{matchId:t})})})})}),w===tr&&n.options.scrollRestoration?O.jsxs(O.Fragment,{children:[O.jsx(tN,{}),O.jsx(eN,{})]}):null]})});function tN(){const e=or(),t=H.useRef(void 0);return O.jsx("script",{suppressHydrationWarning:!0,ref:n=>{n&&(t.current===void 0||t.current.href!==e.latestLocation.href)&&(e.emit({type:"onRendered",...Vs(e.state)}),t.current=e.latestLocation)}},e.latestLocation.state.__TSR_key)}const tx=H.memo(function({matchId:t}){const n=or(),{match:r,key:i,routeId:o}=$n({select:f=>{const d=f.matches.find(S=>S.id===t),m=d.routeId,g=(n.routesById[m].options.remountDeps??n.options.defaultRemountDeps)?.({routeId:m,loaderDeps:d.loaderDeps,params:d._strictParams,search:d._strictSearch});return{key:g?JSON.stringify(g):void 0,routeId:m,match:{id:d.id,status:d.status,error:d.error,invalid:d.invalid,_forcePending:d._forcePending,_displayPending:d._displayPending}}},structuralSharing:!0}),l=n.routesById[o],c=H.useMemo(()=>{const f=l.options.component??n.options.defaultComponent;return f?O.jsx(f,{},i):O.jsx(nN,{})},[i,l.options.component,n.options.defaultComponent]);if(r._displayPending)throw n.getMatch(r.id)?._nonReactive.displayPendingPromise;if(r._forcePending)throw n.getMatch(r.id)?._nonReactive.minPendingPromise;if(r.status==="pending"){const f=l.options.pendingMinMs??n.options.defaultPendingMinMs;if(f){const d=n.getMatch(r.id);if(d&&!d._nonReactive.minPendingPromise&&!n.isServer){const m=fa();d._nonReactive.minPendingPromise=m,setTimeout(()=>{m.resolve(),d._nonReactive.minPendingPromise=void 0},f)}}throw n.getMatch(r.id)?._nonReactive.loadPromise}if(r.status==="notFound")return wi(rr(r.error)),hE(n,l,r.error);if(r.status==="redirected")throw wi(xr(r.error)),n.getMatch(r.id)?._nonReactive.loadPromise;if(r.status==="error"){if(n.isServer){const f=(l.options.errorComponent??n.options.defaultErrorComponent)||Sd;return O.jsx(f,{error:r.error,reset:void 0,info:{componentStack:""}})}throw r.error}return c}),nN=H.memo(function(){const t=or(),n=H.useContext(wd),r=$n({select:d=>d.matches.find(m=>m.id===n)?.routeId}),i=t.routesById[r],o=$n({select:d=>{const p=d.matches.find(g=>g.id===n);return wi(p),p.globalNotFound}}),l=$n({select:d=>{const m=d.matches,p=m.findIndex(g=>g.id===n);return m[p+1]?.id}}),c=t.options.defaultPendingComponent?O.jsx(t.options.defaultPendingComponent,{}):null;if(o)return hE(t,i,void 0);if(!l)return null;const f=O.jsx(pE,{matchId:l});return r===tr?O.jsx(H.Suspense,{fallback:c,children:f}):f});function rN(){const e=or(),n=e.routesById[tr].options.pendingComponent??e.options.defaultPendingComponent,r=n?O.jsx(n,{}):null,i=e.isServer||typeof document<"u"&&e.ssr?Qo:H.Suspense,o=O.jsxs(i,{fallback:r,children:[!e.isServer&&O.jsx(Y2,{}),O.jsx(iN,{})]});return e.options.InnerWrap?O.jsx(e.options.InnerWrap,{children:o}):o}function iN(){const e=or(),t=$n({select:i=>i.matches[0]?.id}),n=$n({select:i=>i.loadedAt}),r=t?O.jsx(pE,{matchId:t}):null;return O.jsx(wd.Provider,{value:t,children:e.options.disableGlobalCatchBoundary?r:O.jsx(Qy,{getResetKey:()=>n,errorComponent:Sd,onCatch:i=>{i.message||i.toString()},children:r})})}const sN=e=>new oN(e);class oN extends v2{constructor(t){super(t)}}typeof globalThis<"u"?(globalThis.createFileRoute=J_,globalThis.createLazyFileRoute=ex):typeof window<"u"&&(window.createFileRoute=J_,window.createLazyFileRoute=ex);function aN({router:e,children:t,...n}){Object.keys(n).length>0&&e.update({...e.options,...n,context:{...e.options.context,...n.context}});const r=fE(),i=O.jsx(r.Provider,{value:e,children:t});return e.options.Wrap?O.jsx(e.options.Wrap,{children:i}):i}function lN({router:e,...t}){return O.jsx(aN,{router:e,...t,children:O.jsx(rN,{})})}const yu=Z2(),uN=gu({getParentRoute:()=>yu,path:"/"}),cN=gu({getParentRoute:()=>yu,path:"$connectionId"}),fN=gu({getParentRoute:()=>yu,path:"$connectionId/$database"}),dN=gu({getParentRoute:()=>yu,path:"$connectionId/$database/$table"}),hN=yu.addChildren([uN,cN,fN,dN]),mE=sN({routeTree:hN});const pN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mN=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),nx=e=>{const t=mN(e);return t.charAt(0).toUpperCase()+t.slice(1)},gE=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),gN=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var yN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vN=H.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:l,...c},f)=>H.createElement("svg",{ref:f,...yN,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:gE("lucide",i),...!o&&!gN(c)&&{"aria-hidden":"true"},...c},[...l.map(([d,m])=>H.createElement(d,m)),...Array.isArray(o)?o:[o]]));const Dt=(e,t)=>{const n=H.forwardRef(({className:r,...i},o)=>H.createElement(vN,{ref:o,iconNode:t,className:gE(`lucide-${pN(nx(e))}`,`lucide-${e}`,r),...i}));return n.displayName=nx(e),n};const bN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],yE=Dt("chevron-down",bN);const SN=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],vE=Dt("chevron-up",SN);const wN=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],_N=Dt("chevrons-up-down",wN);const xN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],CN=Dt("circle-check",xN);const EN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],RN=Dt("circle-x",EN);const kN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],AN=Dt("columns-3",kN);const TN=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ON=Dt("database",TN);const MN=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],IN=Dt("link",MN);const NN=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],DN=Dt("list-ordered",NN);const zN=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ig=Dt("loader-circle",zN);const LN=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],PN=Dt("pencil",LN);const jN=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],FN=Dt("play",jN);const $N=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],BN=Dt("plug",$N);const UN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rx=Dt("plus",UN);const qN=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],HN=Dt("send",qN);const VN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],KN=Dt("shield-check",VN);const GN=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ng=Dt("sparkles",GN);const QN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ZN=Dt("square",QN);const YN=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],JN=Dt("table-2",YN);const XN=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],qf=Dt("trash-2",XN);const WN=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],eD=Dt("triangle-alert",WN);const tD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bE=Dt("x",tD);class ya{}class ha extends ya{constructor(t,n){super(),this.collection=t,this.alias=n,this.type="collectionRef"}}class _r extends ya{constructor(t,n){super(),this.query=t,this.alias=n,this.type="queryRef"}}class An extends ya{constructor(t){super(),this.path=t,this.type="ref"}}class jn extends ya{constructor(t){super(),this.value=t,this.type="val"}}class Er extends ya{constructor(t,n){super(),this.name=t,this.args=n,this.type="func"}}class SE extends ya{constructor(t,n){super(),this.name=t,this.args=n,this.type="agg"}}function Xy(e){return e instanceof SE||e instanceof Er||e instanceof An||e instanceof jn}function Wy(e){return typeof e=="object"&&"expression"in e?e.expression:e}function ix(e){return typeof e=="object"&&"expression"in e?e.expression:e}function sx(e){return typeof e=="object"&&"expression"in e&&e.residual===!0}function nD(e){return{expression:e,residual:!0}}function rD(e,t){if(e.from.alias===t)return e.from;for(const n of e.join||[])if(n.from.alias===t)return n.from}function ou(e,t,n){if(t.path.length!==0){if(t.path.length===1){const r=t.path[0];if(e.select){const i=e.select[r];if(i&&i.type==="ref")return ou(e,i,n)}return{collection:n,path:[r]}}if(t.path.length>1){const[r,...i]=t.path,o=rD(e,r);return o?o.type==="queryRef"?ou(o.query,new An(i),n):{collection:o.collection,path:i}:void 0}}}class Bn extends Error{constructor(t){super(t),this.name="TanStackDBError"}}class ox extends Bn{constructor(t,n,r){const i=`${t==="insert"?"Insert":"Update"} validation failed: ${n.map(o=>`
- ${o.message} - path: ${o.path}`).join("")}`;super(r||i),this.name="SchemaValidationError",this.type=t,this.issues=n}}class vu extends Bn{constructor(t){super(t),this.name="CollectionConfigurationError"}}class iD extends vu{constructor(){super("Collection requires a config")}}class sD extends vu{constructor(){super("Collection requires a sync config")}}class oD extends vu{constructor(){super("Schema must implement the standard-schema interface")}}class ax extends vu{constructor(){super("Schema validation must be synchronous")}}class bu extends Bn{constructor(t){super(t),this.name="CollectionStateError"}}class aD extends bu{constructor(t,n){super(`Cannot perform ${t} on collection "${n}" - collection is in error state. Try calling cleanup() and restarting the collection.`)}}class lD extends bu{constructor(t,n,r){super(`Invalid collection status transition from "${t}" to "${n}" for collection "${r}"`)}}class uD extends bu{constructor(){super("Collection is in error state")}}class cD extends bu{constructor(){super("Active subscribers count is negative - this should never happen")}}class Kr extends Bn{constructor(t){super(t),this.name="CollectionOperationError"}}class fD extends Kr{constructor(t){super(`An object was created without a defined key: ${JSON.stringify(t)}`)}}class dD extends Kr{constructor(t,n){const r=t===null?"null":typeof t;super(`getKey returned an invalid key type. Expected string or number, but got ${r}: ${JSON.stringify(t)}. Item: ${JSON.stringify(n)}`)}}class hD extends Kr{constructor(t){super(`Cannot insert document with ID "${t}" because it already exists in the collection`)}}class pD extends Kr{constructor(t,n,r){const i=`Cannot insert document with key "${t}" from sync because it already exists in the collection "${n}"`;r?.hasCustomGetKey&&r.hasJoins?super(`${i}. This collection uses a custom getKey with joined queries. Joined queries can produce multiple rows with the same key when relationships are not 1:1. Consider: (1) using a composite key in your getKey function (e.g., \`\${item.key1}-\${item.key2}\`), (2) ensuring your join produces unique rows per key, or (3) removing the custom getKey to use the default composite key behavior.`):super(i)}}class mD extends Kr{constructor(){super("The first argument to update is missing")}}class gD extends Kr{constructor(){super("No keys were passed to update")}}class yD extends Kr{constructor(t){super(`The key "${t}" was passed to update but an object for this key was not found in the collection`)}}class vD extends Kr{constructor(t,n){super(`Updating the key of an item is not allowed. Original key: "${t}", Attempted new key: "${n}". Please delete the old item and create a new one if a key change is necessary.`)}}class bD extends Kr{constructor(){super("No keys were passed to delete")}}class SD extends Kr{constructor(t){super(`Collection.delete was called with key '${t}' but there is no item in the collection with this key`)}}class e0 extends Bn{constructor(t){super(t),this.name="MissingHandlerError"}}class wD extends e0{constructor(){super("Collection.insert called directly (not within an explicit transaction) but no 'onInsert' handler is configured.")}}class _D extends e0{constructor(){super("Collection.update called directly (not within an explicit transaction) but no 'onUpdate' handler is configured.")}}class xD extends e0{constructor(){super("Collection.delete called directly (not within an explicit transaction) but no 'onDelete' handler is configured.")}}class us extends Bn{constructor(t){super(t),this.name="TransactionError"}}class CD extends us{constructor(){super("mutationFn is required when creating a transaction")}}class ED extends us{constructor(){super("You can no longer call .mutate() as the transaction is no longer pending")}}class RD extends us{constructor(){super("You can no longer call .rollback() as the transaction is already completed")}}class kD extends us{constructor(){super("You can no longer call .commit() as the transaction is no longer pending")}}class lx extends us{constructor(){super("No pending sync transaction to write to")}}class ux extends us{constructor(){super("The pending sync transaction is already committed, you can't still write to it.")}}class AD extends us{constructor(){super("No pending sync transaction to commit")}}class TD extends us{constructor(){super("The pending sync transaction is already committed, you can't commit it again.")}}class va extends Bn{constructor(t){super(t),this.name="QueryBuilderError"}}class OD extends va{constructor(t){super(`Only one source is allowed in the ${t}`)}}class MD extends va{constructor(t){super(`A sub query passed to a ${t} must have a from clause itself`)}}class ID extends va{constructor(t){super(`Invalid source for live query: The value provided for alias "${t}" is not a Collection or subquery. Live queries only accept Collection instances or subqueries. Please ensure you're passing a valid Collection or QueryBuilder, not a plain array or other data type.`)}}class Vc extends va{constructor(t,n){super(`Invalid source for ${t}: Expected an object with a single key-value pair like { alias: collection }. For example: .from({ todos: todosCollection }). Got: ${n}`)}}class ND extends va{constructor(){super("Join condition must be an equality expression")}}class DD extends va{constructor(){super("Query must have a from clause")}}class ar extends Bn{constructor(t){super(t),this.name="QueryCompilationError"}}class zD extends ar{constructor(){super("DISTINCT requires a SELECT clause.")}}class LD extends ar{constructor(){super("HAVING clause requires GROUP BY clause")}}class PD extends ar{constructor(){super("LIMIT and OFFSET require an ORDER BY clause to ensure deterministic results")}}class wE extends ar{constructor(t,n,r){const i=n?`alias "${t}" (collection "${n}")`:`collection "${t}"`,o=r?.length?`. Available keys: ${r.join(", ")}`:"";super(`Input for ${i} not found in inputs map${o}`)}}class jD extends ar{constructor(t,n){super(`Subquery uses alias "${t}" which is already used in the parent query. Each alias must be unique across parent and subquery contexts. Parent query aliases: ${n.join(", ")}. Please rename "${t}" in either the parent query or subquery to avoid conflicts.`)}}class FD extends ar{constructor(t){super(`Unsupported FROM type: ${t}`)}}class $D extends ar{constructor(t){super(`Unknown expression type: ${t}`)}}class BD extends ar{constructor(){super("Reference path cannot be empty")}}class UD extends ar{constructor(t){super(`Unknown function: ${t}`)}}class cx extends ar{constructor(t){super(`Collection "${t}" not found during compilation of join`)}}class eo extends Bn{constructor(t){super(t),this.name="JoinError"}}class qD extends eo{constructor(t){super(`Unsupported join type: ${t}`)}}class HD extends eo{constructor(t){super(`Invalid join condition: both expressions refer to the same source "${t}"`)}}class VD extends eo{constructor(){super("Invalid join condition: expressions must reference source aliases")}}class KD extends eo{constructor(t){super(`Invalid join condition: left expression refers to an unavailable source "${t}"`)}}class GD extends eo{constructor(t){super(`Invalid join condition: right expression does not refer to the joined source "${t}"`)}}class QD extends eo{constructor(){super("Invalid join condition")}}class ZD extends eo{constructor(t){super(`Unsupported join source type: ${t}`)}}class Cd extends Bn{constructor(t){super(t),this.name="GroupByError"}}class YD extends Cd{constructor(t){super(`Non-aggregate expression '${t}' in SELECT must also appear in GROUP BY clause`)}}class JD extends Cd{constructor(t){super(`Unsupported aggregate function: ${t}`)}}class XD extends Cd{constructor(t){super(`Aggregate function in HAVING clause must also be in SELECT clause: ${t}`)}}class WD extends Cd{constructor(t){super(`Unknown expression type in HAVING clause: ${t}`)}}class _E extends Bn{constructor(t){super(t),this.name="StorageError"}}class ez extends _E{constructor(t,n){super(`Cannot ${t} item because it cannot be JSON serialized: ${n}`)}}class t0 extends _E{constructor(t){super(t),this.name="LocalStorageCollectionError"}}class tz extends t0{constructor(){super("[LocalStorageCollection] storageKey must be provided.")}}class nz extends t0{constructor(t,n){super(`[LocalStorageCollection] Invalid data format in storage key "${t}" for key "${n}".`)}}class rz extends t0{constructor(t){super(`[LocalStorageCollection] Invalid data format in storage key "${t}". Expected object format.`)}}class fx extends Bn{constructor(t,n){const r=n instanceof Error?n.message:String(n);super(`Collection "${t}" sync cleanup function threw an error: ${r}`),this.name="SyncCleanupError"}}class iz extends Bn{constructor(t){super(t),this.name="QueryOptimizerError"}}class sz extends iz{constructor(){super("Cannot combine empty expression list")}}class oz extends ar{constructor(t,n,r,i){super(`Internal error: subscription for alias '${t}' (remapped from '${n}', collection '${r}') is missing in join pipeline. Available aliases: ${i.join(", ")}. This indicates a bug in alias tracking.`)}}class az extends ar{constructor(t){super(`Internal error: compiler returned aliases without inputs: ${t.join(", ")}. This indicates a bug in query compilation. Please report this issue.`)}}class lz extends ar{constructor(){super("setWindow() can only be called on collections with an ORDER BY clause. Add .orderBy() to your query to enable window movement.")}}const Om=new WeakMap;let uz=1;function dx(e){if(Om.has(e))return Om.get(e);const t=uz++;return Om.set(e,t),t}const n0=(e,t,n)=>{const{nulls:r}=n;if(e==null&&t==null)return 0;if(e==null)return r==="first"?-1:1;if(t==null)return r==="first"?1:-1;if(typeof e=="string"&&typeof t=="string"&&n.stringSort==="locale")return e.localeCompare(t,n.locale,n.localeOptions);if(Array.isArray(e)&&Array.isArray(t)){for(let l=0;l<Math.min(e.length,t.length);l++){const c=n0(e[l],t[l],n);if(c!==0)return c}return e.length-t.length}if(e instanceof Date&&t instanceof Date)return e.getTime()-t.getTime();const i=typeof e=="object",o=typeof t=="object";if(i||o){if(i&&o){const l=dx(e),c=dx(t);return l-c}if(i)return 1;if(o)return-1}return e<t?-1:e>t?1:0},cz=(e,t,n)=>n0(t,e,{...n,nulls:n.nulls==="first"?"last":"first"});function Hf(e){return(t,n)=>e.direction==="asc"?n0(t,n,e):cz(t,n,e)}const Dg=Hf({direction:"asc",nulls:"first",stringSort:"locale"});function fz(e,t){if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}const dz=128;function vi(e){return e instanceof Date?e.getTime():(typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array)&&e.byteLength<=dz?`__u8__${Array.from(e).join(",")}`:e}function hz(e,t){if(e===t)return!0;const n=typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array,r=typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array;return n&&r?fz(e,t):!1}function tn(e){return e==null}function aa(e){return e===!0}function Fn(e,t=!1){return i0(e,t)}function r0(e){return i0(e,!0)}function i0(e,t){switch(e.type){case"val":{const n=e.value;return()=>n}case"ref":return t?mz(e):pz(e);case"func":return gz(e,t);default:throw new $D(e.type)}}function pz(e){const[t,...n]=e.path;if(!t)throw new BD;if(n.length===0)return r=>r[t];if(n.length===1){const r=n[0];return i=>i[t]?.[r]}else return r=>{const i=r[t];if(i===void 0)return;let o=i;for(const l of n){if(o==null)return o;o=o[l]}return o}}function mz(e){const t=e.path;return n=>{let r=n;for(const i of t){if(r==null)return r;r=r[i]}return r}}function gz(e,t){const n=e.args.map(r=>i0(r,t));switch(e.name){case"eq":{const r=n[0],i=n[1];return o=>{const l=vi(r(o)),c=vi(i(o));return tn(l)||tn(c)?null:hz(l,c)}}case"gt":{const r=n[0],i=n[1];return o=>{const l=r(o),c=i(o);return tn(l)||tn(c)?null:l>c}}case"gte":{const r=n[0],i=n[1];return o=>{const l=r(o),c=i(o);return tn(l)||tn(c)?null:l>=c}}case"lt":{const r=n[0],i=n[1];return o=>{const l=r(o),c=i(o);return tn(l)||tn(c)?null:l<c}}case"lte":{const r=n[0],i=n[1];return o=>{const l=r(o),c=i(o);return tn(l)||tn(c)?null:l<=c}}case"and":return r=>{let i=!1;for(const o of n){const l=o(r);if(l===!1)return!1;tn(l)&&(i=!0)}return i?null:!0};case"or":return r=>{let i=!1;for(const o of n){const l=o(r);if(l===!0)return!0;tn(l)&&(i=!0)}return i?null:!1};case"not":{const r=n[0];return i=>{const o=r(i);return tn(o)?null:!o}}case"in":{const r=n[0],i=n[1];return o=>{const l=r(o),c=i(o);return tn(l)?null:Array.isArray(c)?c.includes(l):!1}}case"like":{const r=n[0],i=n[1];return o=>{const l=r(o),c=i(o);return tn(l)||tn(c)?null:hx(l,c,!1)}}case"ilike":{const r=n[0],i=n[1];return o=>{const l=r(o),c=i(o);return tn(l)||tn(c)?null:hx(l,c,!0)}}case"upper":{const r=n[0];return i=>{const o=r(i);return typeof o=="string"?o.toUpperCase():o}}case"lower":{const r=n[0];return i=>{const o=r(i);return typeof o=="string"?o.toLowerCase():o}}case"length":{const r=n[0];return i=>{const o=r(i);return typeof o=="string"||Array.isArray(o)?o.length:0}}case"concat":return r=>n.map(i=>{const o=i(r);try{return String(o??"")}catch{try{return JSON.stringify(o)||""}catch{return"[object]"}}}).join("");case"coalesce":return r=>{for(const i of n){const o=i(r);if(o!=null)return o}return null};case"add":{const r=n[0],i=n[1];return o=>{const l=r(o),c=i(o);return(l??0)+(c??0)}}case"subtract":{const r=n[0],i=n[1];return o=>{const l=r(o),c=i(o);return(l??0)-(c??0)}}case"multiply":{const r=n[0],i=n[1];return o=>{const l=r(o),c=i(o);return(l??0)*(c??0)}}case"divide":{const r=n[0],i=n[1];return o=>{const l=r(o),f=i(o)??0;return f!==0?(l??0)/f:null}}case"isUndefined":{const r=n[0];return i=>r(i)===void 0}case"isNull":{const r=n[0];return i=>r(i)===null}default:throw new UD(e.name)}}function hx(e,t,n){if(typeof e!="string"||typeof t!="string")return!1;const r=n?e.toLowerCase():e;let o=(n?t.toLowerCase():t).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return o=o.replace(/%/g,".*"),o=o.replace(/_/g,"."),new RegExp(`^${o}$`).test(r)}function Ir(e,t){return vf(e,t,new Map)}function vf(e,t,n){if(e===t)return!0;if(e==null||t==null||typeof e!=typeof t)return!1;if(e instanceof Date)return t instanceof Date?e.getTime()===t.getTime():!1;if(e instanceof RegExp)return t instanceof RegExp?e.source===t.source&&e.flags===t.flags:!1;if(e instanceof Map){if(!(t instanceof Map)||e.size!==t.size)return!1;if(n.has(e))return n.get(e)===t;n.set(e,t);const i=Array.from(e.entries()).every(([o,l])=>t.has(o)&&vf(l,t.get(o),n));return n.delete(e),i}if(e instanceof Set){if(!(t instanceof Set)||e.size!==t.size)return!1;if(n.has(e))return n.get(e)===t;n.set(e,t);const r=Array.from(e),i=Array.from(t);if(r.every(l=>typeof l!="object"))return n.delete(e),r.every(l=>t.has(l));const o=r.length===i.length;return n.delete(e),o}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)&&!(e instanceof DataView)&&!(t instanceof DataView)){const r=e,i=t;if(r.length!==i.length)return!1;for(let o=0;o<r.length;o++)if(r[o]!==i[o])return!1;return!0}if(Vf(e)&&Vf(t)){const r=zg(e),i=zg(t);return r!==i?!1:typeof e.equals=="function"?e.equals(t):e.toString()===t.toString()}if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;if(n.has(e))return n.get(e)===t;n.set(e,t);const r=e.every((i,o)=>vf(i,t[o],n));return n.delete(e),r}if(typeof e=="object"){if(n.has(e))return n.get(e)===t;n.set(e,t);const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return n.delete(e),!1;const o=r.every(l=>l in t&&vf(e[l],t[l],n));return n.delete(e),o}return!1}const yz=["Temporal.Duration","Temporal.Instant","Temporal.PlainDate","Temporal.PlainDateTime","Temporal.PlainMonthDay","Temporal.PlainTime","Temporal.PlainYearMonth","Temporal.ZonedDateTime"];function zg(e){return e[Symbol.toStringTag]}function Vf(e){const t=zg(e);return typeof t=="string"&&yz.includes(t)}const s0={direction:"asc",nulls:"first",stringSort:"locale"};class vz{constructor(t){this.originalIndex=t}lookup(t,n){const r=t==="gt"?"lt":t==="gte"?"lte":t==="lt"?"gt":t==="lte"?"gte":t;return this.originalIndex.lookup(r,n)}rangeQuery(t={}){return this.originalIndex.rangeQueryReversed(t)}rangeQueryReversed(t={}){return this.originalIndex.rangeQuery(t)}take(t,n,r){return this.originalIndex.takeReversed(t,n,r)}takeReversed(t,n,r){return this.originalIndex.take(t,n,r)}get orderedEntriesArray(){return this.originalIndex.orderedEntriesArrayReversed}get orderedEntriesArrayReversed(){return this.originalIndex.orderedEntriesArray}supports(t){return this.originalIndex.supports(t)}matchesField(t){return this.originalIndex.matchesField(t)}matchesCompareOptions(t){return this.originalIndex.matchesCompareOptions(t)}matchesDirection(t){return this.originalIndex.matchesDirection(t)}getStats(){return this.originalIndex.getStats()}add(t,n){this.originalIndex.add(t,n)}remove(t,n){this.originalIndex.remove(t,n)}update(t,n,r){this.originalIndex.update(t,n,r)}build(t){this.originalIndex.build(t)}clear(){this.originalIndex.clear()}get keyCount(){return this.originalIndex.keyCount}equalityLookup(t){return this.originalIndex.equalityLookup(t)}inArrayLookup(t){return this.originalIndex.inArrayLookup(t)}get indexedKeysSet(){return this.originalIndex.indexedKeysSet}get valueMapData(){return this.originalIndex.valueMapData}}function Su(e,t,n){const r=n??{...s0,...e.compareOptions};for(const i of e.indexes.values())if(i.matchesField(t)&&i.matchesCompareOptions(r))return i.matchesDirection(r.direction)?i:new vz(i)}function bz(e){if(e.length===0)return new Set;if(e.length===1)return new Set(e[0]);let t=new Set(e[0]);for(let n=1;n<e.length;n++){const r=new Set;for(const i of t)e[n].has(i)&&r.add(i);t=r}return t}function Sz(e){const t=new Set;for(const n of e)for(const r of n)t.add(r);return t}function wz(e,t){return o0(e,t)}function o0(e,t){if(e.type==="func")switch(e.name){case"eq":case"gt":case"gte":case"lt":case"lte":return xz(e,t);case"and":return Cz(e,t);case"or":return Ez(e,t);case"in":return Rz(e,t)}return{canOptimize:!1,matchingKeys:new Set}}function _z(e,t){if(e.type!=="func"||e.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=new Map;for(const r of e.args)if(r.type==="func"&&["gt","gte","lt","lte"].includes(r.name)){const i=r;if(i.args.length===2){const o=i.args[0],l=i.args[1];let c=null,f=null,d=i.name;if(o.type==="ref"&&l.type==="val")c=o,f=l;else if(o.type==="val"&&l.type==="ref")switch(c=l,f=o,d){case"gt":d="lt";break;case"gte":d="lte";break;case"lt":d="gt";break;case"lte":d="gte";break}if(c&&f){const p=c.path.join("."),g=f.value;n.has(p)||n.set(p,[]),n.get(p).push({operation:d,value:g})}}}for(const[r,i]of n)if(i.length>=2){const o=r.split("."),l=Su(t,o);if(l&&l.supports("gt")&&l.supports("lt")){let c,f,d=!0,m=!0;for(const{operation:g,value:y}of i)switch(g){case"gt":(c===void 0||y>c)&&(c=y,d=!1);break;case"gte":(c===void 0||y>c)&&(c=y,d=!0);break;case"lt":(f===void 0||y<f)&&(f=y,m=!1);break;case"lte":(f===void 0||y<f)&&(f=y,m=!0);break}return{canOptimize:!0,matchingKeys:l.rangeQuery({from:c,to:f,fromInclusive:d,toInclusive:m})}}}return{canOptimize:!1,matchingKeys:new Set}}function xz(e,t){if(e.type!=="func"||e.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=e.args[0],r=e.args[1];let i=null,o=null,l=e.name;if(n.type==="ref"&&r.type==="val")i=n,o=r;else if(n.type==="val"&&r.type==="ref")switch(i=r,o=n,l){case"gt":l="lt";break;case"gte":l="lte";break;case"lt":l="gt";break;case"lte":l="gte";break}if(i&&o){const c=i.path,f=Su(t,c);if(f){const d=o.value,m=l;return f.supports(m)?{canOptimize:!0,matchingKeys:f.lookup(m,d)}:{canOptimize:!1,matchingKeys:new Set}}}return{canOptimize:!1,matchingKeys:new Set}}function Cz(e,t){if(e.type!=="func"||e.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=_z(e,t);if(n.canOptimize)return n;const r=[];for(const i of e.args){const o=o0(i,t);o.canOptimize&&r.push(o)}if(r.length>0){const i=r.map(l=>l.matchingKeys);return{canOptimize:!0,matchingKeys:bz(i)}}return{canOptimize:!1,matchingKeys:new Set}}function Ez(e,t){if(e.type!=="func"||e.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=[];for(const r of e.args){const i=o0(r,t);i.canOptimize&&n.push(i)}if(n.length>0){const r=n.map(o=>o.matchingKeys);return{canOptimize:!0,matchingKeys:Sz(r)}}return{canOptimize:!1,matchingKeys:new Set}}function Rz(e,t){if(e.type!=="func"||e.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=e.args[0],r=e.args[1];if(n.type==="ref"&&r.type==="val"&&Array.isArray(r.value)){const i=n.path,o=r.value,l=Su(t,i);if(l){if(l.supports("in"))return{canOptimize:!0,matchingKeys:l.lookup("in",o)};if(l.supports("eq")){const c=new Set;for(const f of o){const d=l.lookup("eq",f);for(const m of d)c.add(m)}return{canOptimize:!0,matchingKeys:c}}}}return{canOptimize:!1,matchingKeys:new Set}}class kz extends Map{constructor(t,n){super(n),this.defaultValue=t}get(t){return this.has(t)?super.get(t):this.defaultValue()}update(t,n){const r=this.get(t),i=n(r);return this.set(t,i),i}}const Mm=3e4;function Im(e,t){if(t.length<=Mm)e.push(...t);else for(let n=0;n<t.length;n+=Mm){const r=t.slice(n,n+Mm);e.push(...r)}}function Az(e,t,n){let r=0,i=e.length;for(;r<i;){const o=Math.floor((r+i)/2),l=n(e[o],t);if(l<0)r=o+1;else if(l>0)i=o;else return o}return r}class Tz{constructor(){this.objectIds=new WeakMap,this.nextId=0}getId(t){if(typeof t!="object"||t===null){const n=String(t);let r=0;for(let i=0;i<n.length;i++){const o=n.charCodeAt(i);r=(r<<5)-r+o,r=r&r}return r}return this.objectIds.has(t)||this.objectIds.set(t,this.nextId++),this.objectIds.get(t)}getStringId(t){return t===null?"null":t===void 0?"undefined":typeof t!="object"?`str_${String(t)}`:`obj_${this.getId(t)}`}}const Nm=new Tz;function Oz(e,t){const[n,r]=e,[i,o]=t,l=[...Kc(n,Math.min(r,i)),...Kc(Math.max(n,o),r)],c=[...Kc(i,Math.min(o,n)),...Kc(Math.max(i,r),o)];return{onlyInA:l,onlyInB:c}}function Kc(e,t){const n=[];for(let r=e;r<t;r++)n.push(r);return n}function Kf(e,t){return typeof e==typeof t?e<t?-1:e>t?1:0:typeof e=="string"?-1:1}const Mz=pn(),Iz=pn(),Nz=pn(),Dz=pn(),zz=pn();function pn(){return Math.random()*(2**31-1)>>>0}const xE=new ArrayBuffer(8),Lz=new DataView(xE),Qi=new Uint8Array(xE);class Ed{constructor(){this.hash=Mz,this.length=0,this.carry=0,this.carryBytes=0}_mix(t){t=Math.imul(t,3432918353),t=t<<15|t>>>17,t=Math.imul(t,461845907),this.hash^=t,this.hash=this.hash<<13|this.hash>>>19,this.hash=Math.imul(this.hash,5)+3864292196}writeByte(t){this.carry|=(t&255)<<8*this.carryBytes,this.carryBytes++,this.length++,this.carryBytes===4&&(this._mix(this.carry>>>0),this.carry=0,this.carryBytes=0)}update(t){switch(typeof t){case"symbol":{this.update(zz);const n=t.description;if(!n)return;for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);this.writeByte(i&255),this.writeByte(i>>>8&255)}return}case"string":this.update(Iz);for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);this.writeByte(r&255),this.writeByte(r>>>8&255)}return;case"number":Lz.setFloat64(0,t,!0),this.writeByte(Qi[0]),this.writeByte(Qi[1]),this.writeByte(Qi[2]),this.writeByte(Qi[3]),this.writeByte(Qi[4]),this.writeByte(Qi[5]),this.writeByte(Qi[6]),this.writeByte(Qi[7]);return;case"bigint":{let n=t;for(n<0n?(n=-n,this.update(Dz)):this.update(Nz);n>0n;)this.writeByte(Number(n&0xffn)),n>>=8n;t===0n&&this.writeByte(0);return}default:throw new TypeError(`Unsupported input type: ${typeof t}`)}}digest(){if(this.carryBytes>0){let t=this.carry>>>0;t=Math.imul(t,3432918353),t=t<<15|t>>>17,t=Math.imul(t,461845907),this.hash^=t}return this.hash^=this.length,this.hash^=this.hash>>>16,this.hash=Math.imul(this.hash,2246822507),this.hash^=this.hash>>>13,this.hash=Math.imul(this.hash,3266489909),this.hash^=this.hash>>>16,this.hash>>>0}}const Pz=pn(),jz=pn(),Fz=pn(),$z=pn(),Bz=pn(),Uz=pn(),qz=pn(),Hz=pn(),Vz=pn(),Kz=pn(),Gz=pn(),Qz=pn(),Zz=128,au=new WeakMap;function En(e){const t=new Ed;return CE(t,e),t.digest()}function Yz(e){const t=au.get(e);if(t!==void 0)return t;let n;if(e instanceof Date)n=Jz(e);else if(typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array)if(e.byteLength<=Zz)n=Xz(e);else return Lg(e);else{if(e instanceof File)return Lg(e);{let r=e,i=Hz;e instanceof Array&&(i=Vz),e instanceof Map&&(i=Kz,r=[...e.entries()]),e instanceof Set&&(i=Gz,r=[...e.entries()]),n=Wz(r,i)}}return au.set(e,n),n}function Jz(e){const t=new Ed;return t.update(qz),t.update(e.getTime()),t.digest()}function Xz(e){const t=new Ed;t.update(Qz),t.update(e.byteLength);for(let n=0;n<e.byteLength;n++)t.writeByte(e[n]);return t.digest()}function Wz(e,t){const n=new Ed;n.update(t);const r=Object.keys(e);r.sort(tL);for(const i of r)n.update(Bz),n.update(i),CE(n,e[i]);return n.digest()}function CE(e,t){if(t===null){e.update(Fz);return}switch(typeof t){case"undefined":e.update($z);return;case"boolean":e.update(t?Pz:jz);return;case"number":e.update(isNaN(t)?NaN:t===0?0:t);return;case"bigint":case"string":case"symbol":e.update(t);return;case"object":e.update(eL(t));return;case"function":e.update(Lg(t));return;default:console.warn(`Ignored input during hashing because it is of type ${typeof t} which is not supported`)}}function eL(e){let t=au.get(e);return t===void 0&&(t=Yz(e)),t}let px=1;function Lg(e){let t=au.get(e);return t===void 0&&(t=px^Uz,px++,au.set(e,t)),t}function tL(e,t){return e.localeCompare(t)}class Zt{#e;constructor(t=[]){this.#e=t}toString(t=!1){return`MultiSet(${JSON.stringify(this.#e,null,t?2:void 0)})`}toJSON(){return JSON.stringify(Array.from(this.getInner()))}static fromJSON(t){return new Zt(JSON.parse(t))}map(t){return new Zt(this.#e.map(([n,r])=>[t(n),r]))}filter(t){return new Zt(this.#e.filter(([n,r])=>t(n)))}negate(){return new Zt(this.#e.map(([t,n])=>[t,-n]))}concat(t){const n=[];return Im(n,this.#e),Im(n,t.getInner()),new Zt(n)}consolidate(){if(this.#e.length>0){const t=this.#e[0]?.[0];if(Array.isArray(t)&&t.length===2)return this.#t()}return this.#n()}#t(){const t=new Map,n=new Map,r=o=>{if(o.length!==2)throw new Error("Expected tuple of length 2");const[l,c]=o;return`${Nm.getStringId(l)}|${Nm.getStringId(c)}`};for(const[o,l]of this.#e){if(!Array.isArray(o)||o.length!==2)return this.#n();const[c,f]=o;if(typeof c!="string"&&typeof c!="number")return this.#n();let d;Array.isArray(f)&&f.length===2?d=r(f):d=Nm.getStringId(f);const m=c+"|"+d;t.set(m,(t.get(m)||0)+l),n.has(m)||n.set(m,o)}const i=[];for(const[o,l]of t)l!==0&&i.push([n.get(o),l]);return new Zt(i)}#n(){const t=new kz(()=>0),n=new Map;let r=!1,i=!1,o=!1;for(const[f,d]of this.#e)if(typeof f=="string")r=!0;else if(typeof f=="number")i=!0;else{o=!0;break}const l=o||r&&i;for(const[f,d]of this.#e){const m=l?En(f):f;l&&!n.has(m)&&n.set(m,f),t.update(m,p=>p+d)}const c=[];for(const[f,d]of t.entries())if(d!==0){const m=l?n.get(f):f;c.push([m,d])}return new Zt(c)}extend(t){const n=t instanceof Zt?t.getInner():t;Im(this.#e,n)}add(t,n){n!==0&&this.#e.push([t,n])}getInner(){return this.#e}}class nL{#e;constructor(t){this.#e=t}drain(){const t=[...this.#e].reverse();return this.#e.length=0,t}isEmpty(){return this.#e.length===0}}class Gr{#e=[];sendData(t){t instanceof Zt||(t=new Zt(t));for(const n of this.#e)n.unshift(t)}newReader(){const t=[];return this.#e.push(t),new nL(t)}}class EE{constructor(t,n,r){this.id=t,this.inputs=n,this.output=r}hasPendingWork(){return this.inputs.some(t=>!t.isEmpty())}}class ba extends EE{constructor(t,n,r){super(t,[n],r),this.id=t}inputMessages(){return this.inputs[0].drain()}}class rL extends EE{constructor(t,n,r,i){super(t,[n,r],i),this.id=t}inputAMessages(){return this.inputs[0].drain()}inputBMessages(){return this.inputs[1].drain()}}class a0 extends ba{run(){for(const t of this.inputMessages())this.output.sendData(this.inner(t))}}class iL{#e=[];#t=0;#n=!1;constructor(){}#r(){if(this.#n)throw new Error("Graph already finalized")}getNextOperatorId(){return this.#r(),this.#t++}newInput(){this.#r();const t=new Gr;return new sL(this,t)}addOperator(t){this.#r(),this.#e.push(t)}finalize(){this.#r(),this.#n=!0}step(){if(!this.#n)throw new Error("Graph not finalized");for(const t of this.#e)t.run()}pendingWork(){return this.#e.some(t=>t.hasPendingWork())}run(){for(;this.pendingWork();)this.step()}}class Qr{#e;#t;constructor(t,n){this.#e=t,this.#t=n}connectReader(){return this.#t.newReader()}get writer(){return this.#t}get graph(){return this.#e}pipe(...t){return t.reduce((n,r)=>r(n),this)}}class sL extends Qr{sendData(t){this.writer.sendData(t)}}class oL extends a0{#e;constructor(t,n,r,i){super(t,n,r),this.#e=i}inner(t){return t.map(this.#e)}}function Rn(e){return t=>{const n=new Qr(t.graph,new Gr),r=new oL(t.graph.getNextOperatorId(),t.connectReader(),n.writer,e);return t.graph.addOperator(r),n}}const Tl=Symbol("NO_PREFIX");class mx extends Map{addValue(t,n){if(n===0)return this.size===0;const r=Kl(t),i=this.get(r);if(bf(i)){const[o,l]=i;if(Kl(o)!==r)throw new Error("Mismatching prefixes, this should never happen");if(o===t||En(o)===En(t)){const f=l+n;f===0?this.delete(r):this.set(r,[t,f])}else{const f=new Ol;f.set(En(o),i),f.set(En(t),[t,n]),this.set(r,f)}}else i===void 0?this.set(r,[t,n]):i.addValue(t,n)&&this.delete(r);return this.size===0}}class Ol extends Map{addValue(t,n){if(n===0)return this.size===0;const r=En(t),i=this.get(r);if(i){const[,o]=i,l=o+n;l===0?this.delete(r):this.set(r,[t,l])}else this.set(r,[t,n]);return this.size===0}}class es{#e;#t=new Map;constructor(){this.#e=new Map}static fromMultiSets(t){const n=new es;for(const r of t)for(const[i,o]of r.getInner()){const[l,c]=i;n.addValue(l,[c,o])}return n}toString(t=!1){return`Index(${JSON.stringify([...this.entries()],void 0,t?2:void 0)})`}get size(){return this.#e.size}has(t){return this.#e.has(t)}hasPresence(t){return(this.#t.get(t)||0)!==0}getConsolidatedMultiplicity(t){return this.#t.get(t)||0}getPresenceKeys(){return this.#t.keys()}get(t){return[...this.getIterator(t)]}*getIterator(t){const n=this.#e.get(t);if(bf(n))yield n;else{if(n===void 0)return;if(n instanceof Ol)for(const r of n.values())yield r;else for(const r of n.values())if(bf(r))yield r;else for(const i of r.values())yield i}}*entries(){for(const t of this.#e.keys())for(const n of this.getIterator(t))yield[t,n]}*entriesIterators(){for(const t of this.#e.keys())yield[t,this.getIterator(t)]}addValue(t,n){const[r,i]=n;if(i===0)return;const o=(this.#t.get(t)||0)+i;o===0?this.#t.delete(t):this.#t.set(t,o);const l=this.#e.get(t);if(l===void 0){this.#e.set(t,n);return}if(bf(l)){this.#n(t,l,r,i);return}if(l instanceof Ol){const c=Kl(r);if(c!==Tl){const f=new mx;f.set(Tl,l),f.set(c,n),this.#e.set(t,f)}else l.addValue(r,i)&&this.#e.delete(t)}else l.addValue(r,i)&&this.#e.delete(t)}#n(t,n,r,i){const[o,l]=n;if(o===r){const d=l+i;d===0?this.#e.delete(t):this.#e.set(t,[r,d]);return}const c=Kl(r),f=Kl(o);if(f===c&&(o===r||En(o)===En(r))){const d=l+i;d===0?this.#e.delete(t):this.#e.set(t,[r,d]);return}if(f===Tl&&c===Tl){const d=new Ol;d.set(En(o),n),d.set(En(r),[r,i]),this.#e.set(t,d)}else{const d=new mx;if(f===c){const m=new Ol;m.set(En(o),n),m.set(En(r),[r,i]),d.set(f,m)}else d.set(f,n),d.set(c,[r,i]);this.#e.set(t,d)}}append(t){for(const[n,r]of t.entries())this.addValue(n,r)}join(t){const n=[];if(this.size<=t.size)for(const[r,i]of this.entriesIterators()){if(!t.has(r))continue;const o=t.get(r);for(const[l,c]of i)for(const[f,d]of o)c!==0&&d!==0&&n.push([[r,[l,f]],c*d])}else for(const[r,i]of t.entriesIterators()){if(!this.has(r))continue;const o=this.get(r);for(const[l,c]of i)for(const[f,d]of o)d!==0&&c!==0&&n.push([[r,[f,l]],d*c])}return new Zt(n)}}function Kl(e){return Array.isArray(e)&&(typeof e[0]=="string"||typeof e[0]=="number"||typeof e[0]=="bigint")?e[0]:Tl}function bf(e){return Array.isArray(e)}class aL extends ba{#e=new es;#t=new es;#n;constructor(t,n,r,i){super(t,n,r),this.#n=i}run(){const t=new Set;for(const r of this.inputMessages())for(const[i,o]of r.getInner()){const[l,c]=i;this.#e.addValue(l,[c,o]),t.add(l)}const n=[];for(const r of t){const i=this.#e.get(r),o=this.#t.get(r),l=this.#n(i),c=new Map,f=new Map;for(const[d,m]of l){const p=c.get(d)??0;c.set(d,p+m)}for(const[d,m]of o){const p=f.get(d)??0;f.set(d,p+m)}for(const[d,m]of f)c.has(d)||(n.push([[r,d],-m]),this.#t.addValue(r,[d,-m]));for(const[d,m]of c)f.has(d)||m!==0&&(n.push([[r,d],m]),this.#t.addValue(r,[d,m]));for(const[d,m]of c){const p=f.get(d);if(p!==void 0){const g=m-p;g!==0&&(n.push([[r,d],g]),this.#t.addValue(r,[d,g]))}}}n.length>0&&this.output.sendData(new Zt(n))}}function lL(e){return t=>{const n=new Qr(t.graph,new Gr),r=new aL(t.graph.getNextOperatorId(),t.connectReader(),n.writer,e);return t.graph.addOperator(r),n}}function gx(e){return"pipe"in e}function yx(e,t={}){const n=Object.fromEntries(Object.entries(t).filter(([r,i])=>!gx(i)));return Object.fromEntries(Object.entries(t).filter(([r,i])=>gx(i))),r=>{const i="__original_key__";return r.pipe(Rn(c=>{const f=e(c),d=JSON.stringify(f),m={};m[i]=f;for(const[p,g]of Object.entries(n))m[p]=g.preMap(c);return[d,m]})).pipe(lL(c=>{let f=0;for(const[p,g]of c)f+=g;if(f<=0)return[];const d={},m=c[0]?.[0]?.[i];d[i]=m;for(const[p,g]of Object.entries(n)){const y=c.map(([S,w])=>[S[p],w]);d[p]=g.reduce(y)}return[[d,1]]})).pipe(Rn(([c,f])=>{const d=f[i],m={};Object.assign(m,d);for(const[p,g]of Object.entries(n))g.postMap?m[p]=g.postMap(f[p]):m[p]=f[p];return[c,m]}))}}function uL(e=t=>t){return{preMap:t=>e(t),reduce:t=>{let n=0;for(const[r,i]of t)n+=r*i;return n}}}function cL(e=t=>t){return{preMap:t=>e(t)==null?0:1,reduce:t=>{let n=0;for(const[r,i]of t)n+=r*i;return n}}}function fL(e=t=>t){return{preMap:t=>({sum:e(t),count:0}),reduce:t=>{let n=0,r=0;for(const[i,o]of t)n+=i.sum*o,r+=o;return{sum:n,count:r}},postMap:t=>t.sum/t.count}}function dL(e){const t=e??(n=>n);return{preMap:n=>t(n),reduce:n=>{let r;for(const[i,o]of n)(!r||i&&i<r)&&(r=i);return r}}}function hL(e){const t=e??(n=>n);return{preMap:n=>t(n),reduce:n=>{let r;for(const[i,o]of n)(!r||i&&i>r)&&(r=i);return r}}}const pL={sum:uL,count:cL,avg:fL,min:dL,max:hL};class mL extends a0{#e;constructor(t,n,r,i){super(t,n,r),this.#e=i}inner(t){return this.#e(t),t}}function gL(e){return t=>{const n=new Qr(t.graph,new Gr),r=new mL(t.graph.getNextOperatorId(),t.connectReader(),n.writer,e);return t.graph.addOperator(r),n}}class yL extends a0{#e;constructor(t,n,r,i){super(t,n,r),this.#e=i}inner(t){return t.filter(this.#e)}}function ts(e){return t=>{const n=new Qr(t.graph,new Gr),r=new yL(t.graph.getNextOperatorId(),t.connectReader(),n.writer,e);return t.graph.addOperator(r),n}}class vL extends ba{#e;constructor(t,n,r,i){super(t,n,r),this.#e=i}run(){for(const t of this.inputMessages())this.#e(t),this.output.sendData(t)}}function bL(e){return t=>{const n=new Qr(t.graph,new Gr),r=new vL(t.graph.getNextOperatorId(),t.connectReader(),n.writer,e);return t.graph.addOperator(r),n}}class SL extends ba{run(){const t=this.inputMessages();if(t.length===0)return;const n=new Zt;for(const i of t)n.extend(i);const r=n.consolidate();r.getInner().length>0&&this.output.sendData(r)}}function wL(){return e=>{const t=new Qr(e.graph,new Gr),n=new SL(e.graph.getNextOperatorId(),e.connectReader(),t.writer);return e.graph.addOperator(n),t}}class _L extends rL{#e=new es;#t=new es;#n;constructor(t,n,r,i,o="inner"){super(t,n,r,i),this.#n=o}run(){const t=es.fromMultiSets(this.inputAMessages()),n=es.fromMultiSets(this.inputBMessages());if(t.size===0&&n.size===0)return;const r=new Zt;this.#n!=="anti"&&this.emitInnerResults(t,n,r),(this.#n==="left"||this.#n==="full"||this.#n==="anti")&&this.emitLeftOuterResults(t,n,r),(this.#n==="right"||this.#n==="full")&&this.emitRightOuterResults(t,n,r),this.#e.append(t),this.#t.append(n),r.getInner().length>0&&this.output.sendData(r)}emitInnerResults(t,n,r){t.size>0&&r.extend(t.join(this.#t)),n.size>0&&r.extend(this.#e.join(n)),t.size>0&&n.size>0&&r.extend(t.join(n))}emitLeftOuterResults(t,n,r){if(t.size>0)for(const[i,o]of t.entriesIterators()){const l=this.#t.getConsolidatedMultiplicity(i),c=n.getConsolidatedMultiplicity(i);if(l+c===0)for(const[d,m]of o)m!==0&&r.add([i,[d,null]],m)}if(n.size>0)for(const i of n.getPresenceKeys()){const o=this.#t.getConsolidatedMultiplicity(i),l=n.getConsolidatedMultiplicity(i);if(l===0)continue;const c=o+l;if(o===0==(c===0))continue;const f=o===0;for(const[d,m]of this.#e.getIterator(i))m!==0&&r.add([i,[d,null]],f?-m:+m)}}emitRightOuterResults(t,n,r){if(n.size>0)for(const[i,o]of n.entriesIterators()){const l=this.#e.getConsolidatedMultiplicity(i),c=t.getConsolidatedMultiplicity(i);if(l+c===0)for(const[d,m]of o)m!==0&&r.add([i,[null,d]],m)}if(t.size>0)for(const i of t.getPresenceKeys()){const o=this.#e.getConsolidatedMultiplicity(i),l=t.getConsolidatedMultiplicity(i);if(l===0)continue;const c=o+l;if(o===0==(c===0))continue;const f=o===0;for(const[d,m]of this.#t.getIterator(i))m!==0&&r.add([i,[null,d]],f?-m:+m)}}}function xL(e,t="inner"){return n=>{if(n.graph!==e.graph)throw new Error("Cannot join streams from different graphs");const r=new Qr(n.graph,new Gr),i=new _L(n.graph.getNextOperatorId(),n.connectReader(),e.connectReader(),r.writer,t);return n.graph.addOperator(i),r}}class CL extends ba{#e;#t;constructor(t,n,r,i=o=>o){super(t,n,r),this.#e=i,this.#t=new Map}run(){const t=new Map;for(const r of this.inputMessages())for(const[i,o]of r.getInner()){const l=En(this.#e(i)),f=(t.get(l)?.[0]??this.#t.get(l)??0)+o;t.set(l,[f,i])}const n=[];for(const[r,[i,o]]of t.entries()){const l=this.#t.get(r)??0;i===0?this.#t.delete(r):this.#t.set(r,i),l<=0&&i>0?n.push([[En(this.#e(o)),o[1]],1]):l>0&&i<=0&&n.push([[En(this.#e(o)),o[1]],-1])}n.length>0&&this.output.sendData(new Zt(n))}}function EL(e=t=>t){return t=>{const n=new Qr(t.graph,new Gr),r=new CL(t.graph.getNextOperatorId(),t.connectReader(),n.writer,e);return t.graph.addOperator(r),n}}const RL="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function ea(e,t,n){const r=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===r||t&&t.slice(-1)===r)throw new Error("trailing zero");if(t){let l=0;for(;(e[l]||r)===t[l];)l++;if(l>0)return t.slice(0,l)+ea(e.slice(l),t.slice(l),n)}const i=e?n.indexOf(e[0]):0,o=t!=null?n.indexOf(t[0]):n.length;if(o-i>1){const l=Math.round(.5*(i+o));return n[l]}else return t&&t.length>1?t.slice(0,1):n[i]+ea(e.slice(1),null,n)}function RE(e){if(e.length!==kE(e[0]))throw new Error("invalid integer part of order key: "+e)}function kE(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function Ml(e){const t=kE(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function vx(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=Ml(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function bx(e,t){RE(e);const[n,...r]=e.split("");let i=!0;for(let o=r.length-1;i&&o>=0;o--){const l=t.indexOf(r[o])+1;l===t.length?r[o]=t[0]:(r[o]=t[l],i=!1)}if(i){if(n==="Z")return"a"+t[0];if(n==="z")return null;const o=String.fromCharCode(n.charCodeAt(0)+1);return o>"a"?r.push(t[0]):r.pop(),o+r.join("")}else return n+r.join("")}function kL(e,t){RE(e);const[n,...r]=e.split("");let i=!0;for(let o=r.length-1;i&&o>=0;o--){const l=t.indexOf(r[o])-1;l===-1?r[o]=t.slice(-1):(r[o]=t[l],i=!1)}if(i){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const o=String.fromCharCode(n.charCodeAt(0)-1);return o<"Z"?r.push(t.slice(-1)):r.pop(),o+r.join("")}else return n+r.join("")}function AL(e,t,n=RL){if(e!=null&&vx(e,n),t!=null&&vx(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const f=Ml(t),d=t.slice(f.length);if(f==="A"+n[0].repeat(26))return f+ea("",d,n);if(f<t)return f;const m=kL(f,n);if(m==null)throw new Error("cannot decrement any more");return m}if(t==null){const f=Ml(e),d=e.slice(f.length),m=bx(f,n);return m??f+ea(d,null,n)}const r=Ml(e),i=e.slice(r.length),o=Ml(t),l=t.slice(o.length);if(r===o)return r+ea(i,l,n);const c=bx(r,n);if(c==null)throw new Error("cannot increment any more");return c<t?c:r+ea(i,null,n)}class Sx{#e=[];#t;#n;#r;constructor(t,n,r){this.#n=t,this.#r=t+n,this.#t=r}get size(){const t=this.#n,n=this.#r-this.#n,r=this.#e.length-t;return Math.max(0,Math.min(n,r))}move({offset:t,limit:n}){const r=this.#n,i=this.#r-this.#n,o=[this.#n,this.#r===1/0?this.#n+this.size:this.#r];this.#n=t??r,this.#r=this.#n+(n??i);const l=[this.#n,this.#r===1/0?Math.max(this.#n+this.size,o[1]):this.#r],{onlyInA:c,onlyInB:f}=Oz(o,l),d=[];f.forEach(p=>{const g=this.#e[p];g&&d.push(g)});const m=[];return c.forEach(p=>{const g=this.#e[p];g&&m.push(g)}),{moveIns:d,moveOuts:m,changes:c.length+f.length>0}}insert(t){const n={moveIn:null,moveOut:null},r=this.#i(t),i=r===0?null:xx(this.#e[r-1]),o=r===this.#e.length?null:xx(this.#e[r]),l=AL(i,o),c=wx(t,l);if(this.#e.splice(r,0,c),r<this.#r){const f=Math.max(r,this.#n);f<this.#e.length&&(n.moveIn=this.#e[f],this.#r<this.#e.length&&(n.moveOut=this.#e[this.#r]))}return n}delete(t){const n={moveIn:null,moveOut:null},r=this.#i(t),[i]=this.#e.splice(r,1);if(r<this.#r){if(n.moveOut=i,r<this.#n){const l=this.#n-1;l<this.#e.length?n.moveOut=this.#e[l]:n.moveOut=null}const o=this.#r-1;o<this.#e.length&&(n.moveIn=this.#e[o])}return n}#i(t){return Az(this.#e,wx(t,""),(n,r)=>this.#t(_x(n),_x(r)))}}class TL extends ba{#e=new Map;#t;constructor(t,n,r,i,o){super(t,n,r);const l=o.limit??1/0,c=o.offset??0;this.#t=this.createTopK(c,l,ML(i)),o.setSizeCallback?.(()=>this.#t.size),o.setWindowFn?.(this.moveTopK.bind(this))}createTopK(t,n,r){return new Sx(t,n,r)}moveTopK({offset:t,limit:n}){if(!(this.#t instanceof Sx))throw new Error("Cannot move B+-tree implementation of TopK with fractional index");const r=[],i=this.#t.move({offset:t,limit:n});i.moveIns.forEach(o=>this.handleMoveIn(o,r)),i.moveOuts.forEach(o=>this.handleMoveOut(o,r)),i.changes&&this.output.sendData(new Zt(r))}run(){const t=[];for(const n of this.inputMessages())for(const[r,i]of n.getInner()){const[o,l]=r;this.processElement(o,l,i,t)}t.length>0&&this.output.sendData(new Zt(t))}processElement(t,n,r,i){const{oldMultiplicity:o,newMultiplicity:l}=this.addKey(t,r);let c={moveIn:null,moveOut:null};o<=0&&l>0?c=this.#t.insert([t,n]):o>0&&l<=0&&(c=this.#t.delete([t,n])),this.handleMoveIn(c.moveIn,i),this.handleMoveOut(c.moveOut,i)}handleMoveIn(t,n){if(t){const[[r,i],o]=t;n.push([[r,[i,o]],1])}}handleMoveOut(t,n){if(t){const[[r,i],o]=t;n.push([[r,[i,o]],-1])}}getMultiplicity(t){return this.#e.get(t)??0}addKey(t,n){const r=this.getMultiplicity(t),i=r+n;return i===0?this.#e.delete(t):this.#e.set(t,i),{oldMultiplicity:r,newMultiplicity:i}}}function OL(e,t){const n=t||{};return r=>{const i=new Qr(r.graph,new Gr),o=new TL(r.graph.getNextOperatorId(),r.connectReader(),i.writer,e,n);return r.graph.addOperator(o),i}}function wx(e,t){return[e,t]}function _x(e){return e[0]}function xx(e){return e[1]}function ML(e){return([t,n],[r,i])=>{const o=e(n,i);return o!==0?o:Kf(t,r)}}function IL(e,t,n){const r=n?.limit??1/0,i=n?.offset??0,o=n?.setSizeCallback,l=n?.setWindowFn,c=n?.comparator??((f,d)=>f===d?0:f<d?-1:1);return f=>f.pipe(e((d,m)=>c(t(d),t(m)),{limit:r,offset:i,setSizeCallback:o,setWindowFn:l}),wL())}function NL(e,t){return IL(OL,e,t)}class DL{constructor(t,n,r){this._root=Dm,this._size=0,this._maxNodeSize=r>=4?Math.min(r,256):32,this._compare=t,n&&this.setPairs(n)}get size(){return this._size}get length(){return this._size}get isEmpty(){return this._size===0}clear(){this._root=Dm,this._size=0}get(t,n){return this._root.get(t,n,this)}set(t,n,r){this._root.isShared&&(this._root=this._root.clone());const i=this._root.set(t,n,r,this);return i===!0||i===!1?i:(this._root=new l0([this._root,i]),!0)}has(t){return this.forRange(t,t,!0,void 0)!==0}delete(t){return this.editRange(t,t,!0,LL)!==0}get maxNodeSize(){return this._maxNodeSize}minKey(){return this._root.minKey()}maxKey(){return this._root.maxKey()}keysArray(){const t=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,(n,r)=>{t.push(n)}),t}nextHigherPair(t,n){return n=n||[],t===void 0?this._root.minPair(n):this._root.getPairOrNextHigher(t,this._compare,!1,n)}nextHigherKey(t){const n=this.nextHigherPair(t,Cx);return n&&n[0]}nextLowerPair(t,n){return n=n||[],t===void 0?this._root.maxPair(n):this._root.getPairOrNextLower(t,this._compare,!1,n)}nextLowerKey(t){const n=this.nextLowerPair(t,Cx);return n&&n[0]}setPairs(t,n){let r=0;for(const i of t)this.set(i[0],i[1],n)&&r++;return r}forRange(t,n,r,i,o){const l=this._root.forRange(t,n,r,!1,this,o||0,i);return typeof l=="number"?l:l.break}editRange(t,n,r,i,o){let l=this._root;l.isShared&&(this._root=l=l.clone());try{const c=l.forRange(t,n,r,!0,this,o||0,i);return typeof c=="number"?c:c.break}finally{let c;for(;l.keys.length<=1&&!l.isLeaf;)c||=l.isShared,this._root=l=l.keys.length===0?Dm:l.children[0];c&&(l.isShared=!0)}}}class lu{get isLeaf(){return this.children===void 0}constructor(t=[],n){this.keys=t,this.values=n||gn,this.isShared=void 0}maxKey(){return this.keys[this.keys.length-1]}indexOf(t,n,r){const i=this.keys;let o=0,l=i.length,c=l>>1;for(;o<l;){const f=r(i[c],t);if(f<0)o=c+1;else if(f>0)l=c;else{if(f===0)return c;if(t===t)return i.length;throw new Error("BTree: NaN was used as a key")}c=o+l>>1}return c^n}minKey(){return this.keys[0]}minPair(t){if(this.keys.length!==0)return t[0]=this.keys[0],t[1]=this.values[0],t}maxPair(t){if(this.keys.length===0)return;const n=this.keys.length-1;return t[0]=this.keys[n],t[1]=this.values[n],t}clone(){const t=this.values;return new lu(this.keys.slice(0),t===gn?t:t.slice(0))}get(t,n,r){const i=this.indexOf(t,-1,r._compare);return i<0?n:this.values[i]}getPairOrNextLower(t,n,r,i){const o=this.indexOf(t,-1,n),l=o<0?~o-1:r?o:o-1;if(l>=0)return i[0]=this.keys[l],i[1]=this.values[l],i}getPairOrNextHigher(t,n,r,i){const o=this.indexOf(t,-1,n),l=o<0?~o:r?o:o+1,c=this.keys;if(l<c.length)return i[0]=c[l],i[1]=this.values[l],i}set(t,n,r,i){let o=this.indexOf(t,-1,i._compare);if(o<0){if(o=~o,i._size++,this.keys.length<i._maxNodeSize)return this.insertInLeaf(o,t,n,i);{const l=this.splitOffRightSide();let c=this;return o>this.keys.length&&(o-=this.keys.length,c=l),c.insertInLeaf(o,t,n,i),l}}else return r!==!1&&(n!==void 0&&this.reifyValues(),this.keys[o]=t,this.values[o]=n),!1}reifyValues(){return this.values===gn?this.values=this.values.slice(0,this.keys.length):this.values}insertInLeaf(t,n,r,i){if(this.keys.splice(t,0,n),this.values===gn){for(;gn.length<i._maxNodeSize;)gn.push(void 0);if(r===void 0)return!0;this.values=gn.slice(0,this.keys.length-1)}return this.values.splice(t,0,r),!0}takeFromRight(t){let n=this.values;t.values===gn?n!==gn&&n.push(void 0):(n=this.reifyValues(),n.push(t.values.shift())),this.keys.push(t.keys.shift())}takeFromLeft(t){let n=this.values;t.values===gn?n!==gn&&n.unshift(void 0):(n=this.reifyValues(),n.unshift(t.values.pop())),this.keys.unshift(t.keys.pop())}splitOffRightSide(){const t=this.keys.length>>1,n=this.keys.splice(t),r=this.values===gn?gn:this.values.splice(t);return new lu(n,r)}forRange(t,n,r,i,o,l,c){const f=o._compare;let d,m;if(n===t){if(!r||(m=(d=this.indexOf(t,-1,f))+1,d<0))return l}else d=this.indexOf(t,0,f),m=this.indexOf(n,-1,f),m<0?m=~m:r===!0&&m++;const p=this.keys,g=this.values;if(c!==void 0)for(let y=d;y<m;y++){const S=p[y],w=c(S,g[y],l++);if(w!==void 0){if(i===!0){if(S!==p[y]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");w.delete?(this.keys.splice(y,1),this.values!==gn&&this.values.splice(y,1),o._size--,y--,m--):w.hasOwnProperty("value")&&(g[y]=w.value)}if(w.break!==void 0)return w}}else l+=m-d;return l}mergeSibling(t,n){if(this.keys.push.apply(this.keys,t.keys),this.values===gn){if(t.values===gn)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,t.reifyValues())}}class l0 extends lu{constructor(t,n){if(!n){n=[];for(let r=0;r<t.length;r++)n[r]=t[r].maxKey()}super(n),this.children=t}minKey(){return this.children[0].minKey()}minPair(t){return this.children[0].minPair(t)}maxPair(t){return this.children[this.children.length-1].maxPair(t)}get(t,n,r){const i=this.indexOf(t,0,r._compare),o=this.children;return i<o.length?o[i].get(t,n,r):void 0}getPairOrNextLower(t,n,r,i){const o=this.indexOf(t,0,n),l=this.children;if(o>=l.length)return this.maxPair(i);const c=l[o].getPairOrNextLower(t,n,r,i);return c===void 0&&o>0?l[o-1].maxPair(i):c}getPairOrNextHigher(t,n,r,i){const o=this.indexOf(t,0,n),l=this.children,c=l.length;if(o>=c)return;const f=l[o].getPairOrNextHigher(t,n,r,i);return f===void 0&&o<c-1?l[o+1].minPair(i):f}set(t,n,r,i){const o=this.children,l=i._maxNodeSize,c=i._compare;let f=Math.min(this.indexOf(t,0,c),o.length-1),d=o[f];if(d.isShared&&(o[f]=d=d.clone()),d.keys.length>=l){let p;f>0&&(p=o[f-1]).keys.length<l&&c(d.keys[0],t)<0?(p.isShared&&(o[f-1]=p=p.clone()),p.takeFromRight(d),this.keys[f-1]=p.maxKey()):(p=o[f+1])!==void 0&&p.keys.length<l&&c(d.maxKey(),t)<0&&(p.isShared&&(o[f+1]=p=p.clone()),p.takeFromLeft(d),this.keys[f]=o[f].maxKey())}const m=d.set(t,n,r,i);if(m===!1)return!1;if(this.keys[f]=d.maxKey(),m===!0)return!0;if(this.keys.length<l)return this.insert(f+1,m),!0;{const p=this.splitOffRightSide();let g=this;return c(m.maxKey(),this.maxKey())>0&&(g=p,f-=this.keys.length),g.insert(f+1,m),p}}insert(t,n){this.children.splice(t,0,n),this.keys.splice(t,0,n.maxKey())}splitOffRightSide(){const t=this.children.length>>1;return new l0(this.children.splice(t),this.keys.splice(t))}takeFromRight(t){this.keys.push(t.keys.shift()),this.children.push(t.children.shift())}takeFromLeft(t){this.keys.unshift(t.keys.pop()),this.children.unshift(t.children.pop())}forRange(t,n,r,i,o,l,c){const f=o._compare,d=this.keys,m=this.children;let p=this.indexOf(t,0,f),g=p;const y=Math.min(n===t?p:this.indexOf(n,0,f),d.length-1);if(i){if(g<=y)try{for(;g<=y;g++){m[g].isShared&&(m[g]=m[g].clone());const S=m[g].forRange(t,n,r,i,o,l,c);if(d[g]=m[g].maxKey(),typeof S!="number")return S;l=S}}finally{const S=o._maxNodeSize>>1;for(p>0&&p--,g=y;g>=p;g--)m[g].keys.length<=S&&(m[g].keys.length!==0?this.tryMerge(g,o._maxNodeSize):(d.splice(g,1),m.splice(g,1)));m.length!==0&&m[0].keys.length===0&&PL(!1,"emptiness bug")}}else for(;g<=y;g++){const S=m[g].forRange(t,n,r,i,o,l,c);if(typeof S!="number")return S;l=S}return l}tryMerge(t,n){const r=this.children;return t>=0&&t+1<r.length&&r[t].keys.length+r[t+1].keys.length<=n?(r[t].isShared&&(r[t]=r[t].clone()),r[t].mergeSibling(r[t+1],n),r.splice(t+1,1),this.keys.splice(t+1,1),this.keys[t]=r[t].maxKey(),!0):!1}mergeSibling(t,n){const r=this.keys.length;this.keys.push.apply(this.keys,t.keys);const i=t.children;if(this.children.push.apply(this.children,i),t.isShared&&!this.isShared)for(const o of i)o.isShared=!0;this.tryMerge(r-1,n)}}const gn=[],zL={delete:!0},LL=()=>zL,Dm=(function(){const e=new lu;return e.isShared=!0,e})(),Cx=[];function PL(e,...t){throw t.unshift("B+ tree"),new Error(t.join(" "))}function jL(){const e=new Map;function t(n){const r=n.join(".");if(e.has(r))return e.get(r);const i=new Proxy({},{get(o,l,c){if(l==="__refProxy")return!0;if(l==="__path")return n;if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(o,l,c);const f=[...n,String(l)];return t(f)},has(o,l){return l==="__refProxy"||l==="__path"||l==="__type"?!0:Reflect.has(o,l)},ownKeys(o){return Reflect.ownKeys(o)},getOwnPropertyDescriptor(o,l){return l==="__refProxy"||l==="__path"||l==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(o,l)}});return e.set(r,i),i}return t([])}function Uo(e){const t=new Map;let n=0;function r(o){const l=o.join(".");if(t.has(l))return t.get(l);const c=new Proxy({},{get(f,d,m){if(d==="__refProxy")return!0;if(d==="__path")return o;if(d==="__type")return;if(typeof d=="symbol")return Reflect.get(f,d,m);const p=[...o,String(d)];return r(p)},has(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?!0:Reflect.has(f,d)},ownKeys(f){const d=++n,m=`__SPREAD_SENTINEL__${o.join(".")}__${d}`;return Object.prototype.hasOwnProperty.call(f,m)||Object.defineProperty(f,m,{enumerable:!0,configurable:!0,value:!0}),Reflect.ownKeys(f)},getOwnPropertyDescriptor(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(f,d)}});return t.set(l,c),c}return new Proxy({},{get(o,l,c){if(l==="__refProxy")return!0;if(l==="__path")return[];if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(o,l,c);const f=String(l);if(e.includes(f))return r([f])},has(o,l){return l==="__refProxy"||l==="__path"||l==="__type"||typeof l=="string"&&e.includes(l)?!0:Reflect.has(o,l)},ownKeys(o){return[...e,"__refProxy","__path","__type"]},getOwnPropertyDescriptor(o,l){if(l==="__refProxy"||l==="__path"||l==="__type")return{enumerable:!1,configurable:!0};if(typeof l=="string"&&e.includes(l))return{enumerable:!0,configurable:!0}}})}function rn(e){return FL(e)?new An(e.__path):e&&typeof e=="object"&&"type"in e&&(e.type==="func"||e.type==="ref"||e.type==="val"||e.type==="agg")?e:new jn(e)}function FL(e){return e&&typeof e=="object"&&e.__refProxy===!0}function Pg(e,t){return new Er("eq",[rn(e),rn(t)])}function Ex(e,t){return new Er("gt",[rn(e),rn(t)])}function $L(e,t){return new Er("gte",[rn(e),rn(t)])}function jg(e,t){return new Er("lt",[rn(e),rn(t)])}function Fg(e,t,...n){const r=[e,t,...n];return new Er("and",r.map(i=>rn(i)))}function BL(e,t,...n){const r=[e,t,...n];return new Er("or",r.map(i=>rn(i)))}function UL(e,t){return new Er("in",[rn(e),rn(t)])}class qL{constructor(t,n,r,i){this.lookupCount=0,this.totalLookupTime=0,this.lastUpdated=new Date,this.id=t,this.expression=n,this.compareOptions=s0,this.name=r,this.initialize(i)}supports(t){return this.supportedOperations.has(t)}matchesField(t){return this.expression.type==="ref"&&this.expression.path.length===t.length&&this.expression.path.every((n,r)=>n===t[r])}matchesCompareOptions(t){const n={...this.compareOptions,direction:void 0},r={...t,direction:void 0};return Ir(n,r)}matchesDirection(t){return this.compareOptions.direction===t}getStats(){return{entryCount:this.keyCount,lookupCount:this.lookupCount,averageLookupTime:this.lookupCount>0?this.totalLookupTime/this.lookupCount:0,lastUpdated:this.lastUpdated}}evaluateIndexExpression(t){return r0(this.expression)(t)}trackLookup(t){const n=performance.now()-t;this.lookupCount++,this.totalLookupTime+=n}updateTimestamp(){this.lastUpdated=new Date}}class $g extends qL{constructor(t,n,r,i){super(t,n,r,i),this.supportedOperations=new Set(["eq","gt","gte","lt","lte","in"]),this.valueMap=new Map,this.indexedKeys=new Set,this.compareFn=Dg,this.compareFn=i?.compareFn??Dg,i?.compareOptions&&(this.compareOptions=i.compareOptions),this.orderedEntries=new DL(this.compareFn)}initialize(t){}add(t,n){let r;try{r=this.evaluateIndexExpression(n)}catch(o){throw new Error(`Failed to evaluate index expression for key ${t}: ${o}`)}const i=vi(r);if(this.valueMap.has(i))this.valueMap.get(i).add(t);else{const o=new Set([t]);this.valueMap.set(i,o),this.orderedEntries.set(i,void 0)}this.indexedKeys.add(t),this.updateTimestamp()}remove(t,n){let r;try{r=this.evaluateIndexExpression(n)}catch(o){console.warn(`Failed to evaluate index expression for key ${t} during removal:`,o);return}const i=vi(r);if(this.valueMap.has(i)){const o=this.valueMap.get(i);o.delete(t),o.size===0&&(this.valueMap.delete(i),this.orderedEntries.delete(i))}this.indexedKeys.delete(t),this.updateTimestamp()}update(t,n,r){this.remove(t,n),this.add(t,r)}build(t){this.clear();for(const[n,r]of t)this.add(n,r)}clear(){this.orderedEntries.clear(),this.valueMap.clear(),this.indexedKeys.clear(),this.updateTimestamp()}lookup(t,n){const r=performance.now();let i;switch(t){case"eq":i=this.equalityLookup(n);break;case"gt":i=this.rangeQuery({from:n,fromInclusive:!1});break;case"gte":i=this.rangeQuery({from:n,fromInclusive:!0});break;case"lt":i=this.rangeQuery({to:n,toInclusive:!1});break;case"lte":i=this.rangeQuery({to:n,toInclusive:!0});break;case"in":i=this.inArrayLookup(n);break;default:throw new Error(`Operation ${t} not supported by BTreeIndex`)}return this.trackLookup(r),i}get keyCount(){return this.indexedKeys.size}equalityLookup(t){const n=vi(t);return new Set(this.valueMap.get(n)??[])}rangeQuery(t={}){const{from:n,to:r,fromInclusive:i=!0,toInclusive:o=!0}=t,l=new Set,c=vi(n),f=vi(r),d=c??this.orderedEntries.minKey(),m=f??this.orderedEntries.maxKey();return this.orderedEntries.forRange(d,m,o,(p,g)=>{if(!i&&this.compareFn(p,n)===0)return;const y=this.valueMap.get(p);y&&y.forEach(S=>l.add(S))}),l}rangeQueryReversed(t={}){const{from:n,to:r,fromInclusive:i=!0,toInclusive:o=!0}=t;return this.rangeQuery({from:r??this.orderedEntries.maxKey(),to:n??this.orderedEntries.minKey(),fromInclusive:o,toInclusive:i})}takeInternal(t,n,r,i,o=!1){const l=new Set,c=[];let f,d=vi(r);for(;(f=n(d))!==void 0&&c.length<t;){d=f[0];const m=this.valueMap.get(d);if(m&&m.size>0){const p=Array.from(m).sort(Kf);o&&p.reverse();for(const g of p){if(c.length>=t)break;!l.has(g)&&(i?.(g)??!0)&&(c.push(g),l.add(g))}}}return c}take(t,n,r){const i=o=>this.orderedEntries.nextHigherPair(o);return this.takeInternal(t,i,n,r)}takeReversed(t,n,r){const i=o=>this.orderedEntries.nextLowerPair(o);return this.takeInternal(t,i,n,r,!0)}inArrayLookup(t){const n=new Set;for(const r of t){const i=vi(r),o=this.valueMap.get(i);o&&o.forEach(l=>n.add(l))}return n}get indexedKeysSet(){return this.indexedKeys}get orderedEntriesArray(){return this.orderedEntries.keysArray().map(t=>[t,this.valueMap.get(t)??new Set])}get orderedEntriesArrayReversed(){return this.takeReversed(this.orderedEntries.size).map(t=>[t,this.valueMap.get(t)??new Set])}get valueMapData(){return this.valueMap}}function AE(e){return e.config.autoIndex==="eager"}function Rd(e,t,n,r,i){if(!AE(n))return;const o=r??{...s0,...n.compareOptions};if(!Array.from(n.indexes.values()).find(c=>c.matchesField(t)&&c.matchesCompareOptions(o)))try{n.createIndex(c=>{let f=c;for(const d of t)f=f[d];return f},{name:`auto:${t.join(".")}`,indexType:$g,options:i?{compareFn:i,compareOptions:o}:{}})}catch(c){console.warn(`${n.id?`[${n.id}] `:""}Failed to create auto-index for field path "${t.join(".")}":`,c)}}function HL(e,t){if(!AE(t))return;const n=VL(e);for(const{fieldName:r,fieldPath:i}of n)Rd(r,i,t)}function VL(e){const t=[];function n(r){if(r.type!=="func")return;const i=r;if(i.name==="and"){for(const d of i.args)n(d);return}if(!["eq","gt","gte","lt","lte","in"].includes(i.name)||i.args.length<1||i.args[0].type!=="ref")return;const c=i.args[0].path;if(c.length===0)return;const f=c.join("_");t.push({fieldName:f,fieldPath:c})}return n(e),t}const{sum:KL,count:GL,avg:QL,min:ZL,max:YL}=pL;function JL(e,t){const n=new Map,r=[...e];if(!t)return{selectToGroupByIndex:n,groupByExpressions:r};for(const[i,o]of Object.entries(t)){if(o.type==="agg")continue;const l=r.findIndex(c=>Gf(o,c));if(l===-1)throw new YD(i);n.set(i,l)}return{selectToGroupByIndex:n,groupByExpressions:r}}function Rx(e,t,n,r,i){if(t.length===0){const d={};if(r){for(const[p,g]of Object.entries(r))if(g.type==="agg"){const y=g;d[p]=kx(y)}}const m=()=>({__singleGroup:!0});if(e=e.pipe(yx(m,d)),e=e.pipe(Rn(([,p])=>{const y={...p.__select_results||{}};if(r)for(const[S,w]of Object.entries(r))w.type==="agg"&&(y[S]=p[S]);return["single_group",{...p,__select_results:y}]})),n&&n.length>0)for(const p of n){const g=ix(p),y=Qf(g,r||{}),S=Fn(y);e=e.pipe(ts(([,w])=>{const C={result:w.__select_results};return aa(S(C))}))}if(i&&i.length>0)for(const p of i)e=e.pipe(ts(([,g])=>{const y={result:g.__select_results};return aa(p(y))}));return e}const o=JL(t,r),l=t.map(d=>Fn(d)),c=([,d])=>{const m={...d};delete m.__select_results;const p={};for(let g=0;g<t.length;g++){const y=l[g],S=y(m);p[`__key_${g}`]=S}return p},f={};if(r){for(const[d,m]of Object.entries(r))if(m.type==="agg"){const p=m;f[d]=kx(p)}}if(e=e.pipe(yx(c,f)),e=e.pipe(Rn(([,d])=>{const m=d.__select_results||{},p={};if(r)for(const[y,S]of Object.entries(r))if(S.type!=="agg"){const w=o.selectToGroupByIndex.get(y);w!==void 0?p[y]=d[`__key_${w}`]:p[y]=m[y]}else p[y]=d[y];else for(let y=0;y<t.length;y++)p[`__key_${y}`]=d[`__key_${y}`];let g;if(t.length===1)g=d.__key_0;else{const y=[];for(let S=0;S<t.length;S++)y.push(d[`__key_${S}`]);g=JSON.stringify(y)}return[g,{...d,__select_results:p}]})),n&&n.length>0)for(const d of n){const m=ix(d),p=Qf(m,r||{}),g=Fn(p);e=e.pipe(ts(([,y])=>{const S={result:y.__select_results};return g(S)}))}if(i&&i.length>0)for(const d of i)e=e.pipe(ts(([,m])=>{const p={result:m.__select_results};return aa(d(p))}));return e}function Gf(e,t){if(!e||!t||e.type!==t.type)return!1;switch(e.type){case"ref":return!e.path||!t.path||e.path.length!==t.path.length?!1:e.path.every((n,r)=>n===t.path[r]);case"val":return e.value===t.value;case"func":return e.name===t.name&&e.args?.length===t.args?.length&&(e.args||[]).every((n,r)=>Gf(n,t.args[r]));case"agg":return e.name===t.name&&e.args?.length===t.args?.length&&(e.args||[]).every((n,r)=>Gf(n,t.args[r]));default:return!1}}function kx(e){const t=Fn(e.args[0]),n=([,o])=>{const l=t(o);return typeof l=="number"?l:l!=null?Number(l):0},r=([,o])=>{const l=t(o);return typeof l=="number"||l instanceof Date?l:l!=null?Number(l):0},i=([,o])=>t(o);switch(e.name.toLowerCase()){case"sum":return KL(n);case"count":return GL(i);case"avg":return QL(n);case"min":return ZL(r);case"max":return YL(r);default:throw new JD(e.name)}}function Qf(e,t,n="result"){switch(e.type){case"agg":{const r=e;for(const[i,o]of Object.entries(t))if(o.type==="agg"&&XL(r,o))return new An([n,i]);throw new XD(r.name)}case"func":{const r=e,i=r.args.map(o=>Qf(o,t));return new Er(r.name,i)}case"ref":return e;case"val":return e;default:throw new WD(e.type)}}function XL(e,t){return e.name===t.name&&e.args.length===t.args.length&&e.args.every((n,r)=>Gf(n,t.args[r]))}function WL(e,t,n,r,i,o,l,c,f){const d=n.map(S=>{const w=Qf(S.expression,r,"__select_results");return{compiledExpression:Fn(w),compareOptions:Bg(S,i)}}),m=S=>{const w=S;return n.length>1?d.map(C=>C.compiledExpression(w)):n.length===1?d[0].compiledExpression(w):null},p=(S,w)=>{if(n.length>1){const C=S,x=w;for(let E=0;E<n.length;E++){const k=d[E],P=Hf(k.compareOptions)(C[E],x[E]);if(P!==0)return P}return C.length-x.length}if(n.length===1){const C=d[0];return Hf(C.compareOptions)(S,w)}return Dg(S,w)};let g,y;if(c){let S,w,C,x=e.from.alias;const E=n[0],k=E.expression;if(k.type==="ref"){const I=ou(e,k,i);if(I){w=I.collection;const P=I.path[0],R=Bg(E,w);P&&Rd(P,I.path,w,R,p),C=Fn(new An(I.path),!0),S=Su(w,I.path,R),S?.supports("gt")||(S=void 0),x=k.path.length>1?String(k.path[0]):e.from.alias}}if(C){const P=n.every(j=>j.expression.type==="ref")?n.map(j=>{const N=j.expression,U=ou(e,N,i);return Fn(U?new An(U.path):j.expression,!0)}):void 0;y={alias:x,offset:f??0,limit:c,comparator:(j,N)=>{if(n.length===1){const U=j&&C(j),Z=N&&C(N);return p(U,Z)}if(P){const U=Z=>Z&&P.map(ee=>ee(Z));return p(U(j),U(N))}return 0},valueExtractorForRawRow:j=>{if(n.length===1)return C(j);if(P)return P.map(N=>N(j))},firstColumnValueExtractor:C,index:S,orderBy:n};const L=w?.id??i.id;o[L]=y,S&&(g=j=>{o[L].dataNeeded=()=>{const N=j();return Math.max(0,y.limit-N)}})}}return t.pipe(NL(m,{limit:c,offset:f,comparator:p,setSizeCallback:g,setWindowFn:S=>{l(w=>{S(w),y&&(y.offset=w.offset??y.offset,y.limit=w.limit??y.limit)})}}))}function Bg(e,t){return e.compareOptions.stringSort!==void 0?e.compareOptions:{...t.compareOptions,direction:e.compareOptions.direction,nulls:e.compareOptions.nulls}}function eP(e,t={}){const n=r=>{const i=[];for(const[o,l]of e.entries())(r?.(l)??!0)&&i.push({type:"insert",key:o,value:l});return i};if(t.limit!==void 0&&!t.orderBy)throw new Error("limit cannot be used without orderBy");if(t.orderBy){const r=t.where?Gl(t.where):void 0,i=nP(e,t.orderBy,t.limit,r,t.optimizedOnly);if(i===void 0)return;const o=[];for(const l of i){const c=e.get(l);c!==void 0&&o.push({type:"insert",key:l,value:c})}return o}if(!t.where)return n();try{const r=t.where,i=wz(r,e);if(i.canOptimize){const o=[];for(const l of i.matchingKeys){const c=e.get(l);c!==void 0&&o.push({type:"insert",key:l,value:c})}return o}else{if(t.optimizedOnly)return;const o=Gl(r);return n(o)}}catch(r){console.warn(`${e.id?`[${e.id}] `:""}Error processing where clause, falling back to full scan:`,r);const i=Gl(t.where);return t.optimizedOnly?void 0:n(i)}}function Gl(e){const t=r0(e);return n=>{try{const r=t(n);return aa(r)}catch{return!1}}}function tP(e,t){const n=Gl(t.whereExpression);return r=>{const i=[];for(const o of r)if(o.type==="insert")n(o.value)&&i.push(o);else if(o.type==="update"){const l=n(o.value),c=o.previousValue?n(o.previousValue):!1;l&&c?i.push(o):l&&!c?i.push({...o,type:"insert"}):!l&&c&&i.push({...o,type:"delete",value:o.previousValue})}else n(o.value)&&i.push(o);(i.length>0||r.length===0)&&e(i)}}function nP(e,t,n,r,i){if(t.length===1){const f=t[0],d=f.expression;if(d.type==="ref"){const p=d.path,g=Bg(f,e);Rd(p[0],p,e,g);const y=Su(e,p,g);if(y&&y.supports("gt")){const S=w=>{const C=e.get(w);return C===void 0?!1:r?.(C)??!0};return y.take(n??y.keyCount,void 0,S)}}}if(i)return;const o=[];for(const[f,d]of e.entries())(r?.(d)??!0)&&o.push({key:f,value:d});const l=(f,d)=>{for(const m of t){const p=Hf(m.compareOptions),g=Ax(f.value,m.expression),y=Ax(d.value,m.expression),S=p(g,y);if(S!==0)return S}return 0};o.sort(l);const c=o.map(f=>f.key);return n!==void 0?c.slice(0,n):c}function Ax(e,t){if(t.type==="ref"){const n=t;let r=e;for(const i of n.path)r=r?.[i];return r}else return t.type==="val"?t.value:r0(t)(e)}class Tx{constructor(t){this.map=new Map,this.sortedKeys=[],this.comparator=t}indexOf(t,n){let r=0,i=this.sortedKeys.length;if(!this.comparator){for(;r<i;){const o=Math.floor((r+i)/2),l=this.sortedKeys[o],c=Kf(t,l);if(c<0)i=o;else if(c>0)r=o+1;else return o}return r}for(;r<i;){const o=Math.floor((r+i)/2),l=this.sortedKeys[o],c=this.map.get(l),f=this.comparator(n,c);if(f<0)i=o;else if(f>0)r=o+1;else{const d=Kf(t,l);if(d<0)i=o;else if(d>0)r=o+1;else return o}}return r}set(t,n){if(this.map.has(t)){const i=this.map.get(t),o=this.indexOf(t,i);this.sortedKeys.splice(o,1)}const r=this.indexOf(t,n);return this.sortedKeys.splice(r,0,t),this.map.set(t,n),this}get(t){return this.map.get(t)}delete(t){if(this.map.has(t)){const n=this.map.get(t),r=this.indexOf(t,n);return this.sortedKeys.splice(r,1),this.map.delete(t)}return!1}has(t){return this.map.has(t)}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}*[Symbol.iterator](){for(const t of this.sortedKeys)yield[t,this.map.get(t)]}entries(){return this[Symbol.iterator]()}keys(){return this.sortedKeys[Symbol.iterator]()}values(){return(function*(){for(const t of this.sortedKeys)yield this.map.get(t)}).call(this)}forEach(t){for(const n of this.sortedKeys)t(this.map.get(n),n,this.map)}}class rP{constructor(t){this.pendingSyncedTransactions=[],this.syncedMetadata=new Map,this.optimisticUpserts=new Map,this.optimisticDeletes=new Set,this.size=0,this.syncedKeys=new Set,this.preSyncVisibleState=new Map,this.recentlySyncedKeys=new Set,this.hasReceivedFirstCommit=!1,this.isCommittingSyncTransactions=!1,this.commitPendingTransactions=()=>{let n=!1;for(const l of this.transactions.values())if(l.state==="persisting"){n=!0;break}const{committedSyncedTransactions:r,uncommittedSyncedTransactions:i,hasTruncateSync:o}=this.pendingSyncedTransactions.reduce((l,c)=>(c.committed?(l.committedSyncedTransactions.push(c),c.truncate===!0&&(l.hasTruncateSync=!0)):l.uncommittedSyncedTransactions.push(c),l),{committedSyncedTransactions:[],uncommittedSyncedTransactions:[],hasTruncateSync:!1});if(!n||o){this.isCommittingSyncTransactions=!0;const l=o?r.find(g=>g.truncate)?.optimisticSnapshot:null,c=new Set;for(const g of r)for(const y of g.operations)c.add(y.key);let f=this.preSyncVisibleState;if(f.size===0){f=new Map;for(const g of c){const y=this.get(g);y!==void 0&&f.set(g,y)}}const d=[],m=this.config.sync.rowUpdateMode||"partial";for(const g of r){if(g.truncate){const y=new Set([...this.syncedData.keys(),...l?.upserts.keys()||[]]);for(const S of y){if(l?.deletes.has(S))continue;const w=l?.upserts.get(S)||this.syncedData.get(S);w!==void 0&&d.push({type:"delete",key:S,value:w})}this.syncedData.clear(),this.syncedMetadata.clear(),this.syncedKeys.clear();for(const S of c)f.delete(S);this._events.emit("truncate",{type:"truncate",collection:this.collection})}for(const y of g.operations){const S=y.key;switch(this.syncedKeys.add(S),y.type){case"insert":this.syncedMetadata.set(S,y.metadata);break;case"update":this.syncedMetadata.set(S,Object.assign({},this.syncedMetadata.get(S),y.metadata));break;case"delete":this.syncedMetadata.delete(S);break}switch(y.type){case"insert":this.syncedData.set(S,y.value);break;case"update":{if(m==="partial"){const w=Object.assign({},this.syncedData.get(S),y.value);this.syncedData.set(S,w)}else this.syncedData.set(S,y.value);break}case"delete":this.syncedData.delete(S);break}}}if(o){const g=new Set;for(const w of r)for(const C of w.operations)(C.type==="insert"||C.type==="update")&&g.add(C.key);const y=new Map(l.upserts),S=new Set(l.deletes);for(const[w,C]of y)if(!S.has(w))if(g.has(w)){let x=!1;for(let E=d.length-1;E>=0;E--){const k=d[E];if(k.key===w&&k.type==="insert"){k.value=C,x=!0;break}}x||d.push({type:"insert",key:w,value:C})}else d.push({type:"insert",key:w,value:C});if(d.length>0&&S.size>0){const w=[];for(const C of d)C.type==="insert"&&S.has(C.key)||w.push(C);d.length=0,d.push(...w)}this.lifecycle.status!=="ready"&&this.lifecycle.markReady()}if(this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.isCommittingSyncTransactions=!1,o&&l){for(const[g,y]of l.upserts)this.optimisticUpserts.set(g,y);for(const g of l.deletes)this.optimisticDeletes.add(g)}for(const g of this.transactions.values())if(!["completed","failed"].includes(g.state)){for(const y of g.mutations)if(this.isThisCollection(y.collection)&&y.optimistic)switch(y.type){case"insert":case"update":this.optimisticUpserts.set(y.key,y.modified),this.optimisticDeletes.delete(y.key);break;case"delete":this.optimisticUpserts.delete(y.key),this.optimisticDeletes.add(y.key);break}}const p=new Map;for(const g of this.transactions.values())if(g.state==="completed")for(const y of g.mutations)y.optimistic&&this.isThisCollection(y.collection)&&c.has(y.key)&&p.set(y.key,{type:y.type,value:y.modified});for(const g of c){const y=f.get(g),S=this.get(g),w=p.get(g);let C=!1;w&&(w.type==="delete"&&y!==void 0&&S===void 0&&Ir(w.value,y)||S!==void 0&&Ir(w.value,S))&&(C=!0),C||(y===void 0&&S!==void 0?d.push({type:"insert",key:g,value:S}):y!==void 0&&S===void 0?d.push({type:"delete",key:g,value:y}):y!==void 0&&S!==void 0&&!Ir(y,S)&&d.push({type:"update",key:g,value:S,previousValue:y}))}this.size=this.calculateSize(),d.length>0&&this.indexes.updateIndexes(d),this.changes.emitEvents(d,!0),this.pendingSyncedTransactions=i,this.preSyncVisibleState.clear(),Promise.resolve().then(()=>{this.recentlySyncedKeys.clear()}),this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0)}},this.config=t,this.transactions=new Tx((n,r)=>n.compareCreatedAt(r)),this.syncedData=new Tx(t.compare)}setDeps(t){this.collection=t.collection,this.lifecycle=t.lifecycle,this.changes=t.changes,this.indexes=t.indexes,this._events=t.events}get(t){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:i}=this;if(!n.has(t))return r.has(t)?r.get(t):i.get(t)}has(t){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:i}=this;return n.has(t)?!1:r.has(t)?!0:i.has(t)}*keys(){const{syncedData:t,optimisticDeletes:n,optimisticUpserts:r}=this;for(const i of t.keys())n.has(i)||(yield i);for(const i of r.keys())!t.has(i)&&!n.has(i)&&(yield i)}*values(){for(const t of this.keys()){const n=this.get(t);n!==void 0&&(yield n)}}*entries(){for(const t of this.keys()){const n=this.get(t);n!==void 0&&(yield[t,n])}}*[Symbol.iterator](){for(const[t,n]of this.entries())yield[t,n]}forEach(t){let n=0;for(const[r,i]of this.entries())t(i,r,n++)}map(t){const n=[];let r=0;for(const[i,o]of this.entries())n.push(t(o,i,r++));return n}isThisCollection(t){return t===this.collection}recomputeOptimisticState(t=!1){if(this.isCommittingSyncTransactions&&!t)return;const n=new Map(this.optimisticUpserts),r=new Set(this.optimisticDeletes);this.optimisticUpserts.clear(),this.optimisticDeletes.clear();const i=[];for(const c of this.transactions.values())["completed","failed"].includes(c.state)||i.push(c);for(const c of i)for(const f of c.mutations)if(this.isThisCollection(f.collection)&&f.optimistic)switch(f.type){case"insert":case"update":this.optimisticUpserts.set(f.key,f.modified),this.optimisticDeletes.delete(f.key);break;case"delete":this.optimisticUpserts.delete(f.key),this.optimisticDeletes.add(f.key);break}this.size=this.calculateSize();const o=[];this.collectOptimisticChanges(n,r,o);const l=o.filter(c=>!!(!this.recentlySyncedKeys.has(c.key)||t));if(this.pendingSyncedTransactions.length>0&&!t){const c=new Set;for(const d of this.pendingSyncedTransactions)for(const m of d.operations)c.add(m.key);const f=l.filter(d=>!(d.type==="delete"&&c.has(d.key)&&!i.some(p=>p.mutations.some(g=>this.isThisCollection(g.collection)&&g.key===d.key))));f.length>0&&this.indexes.updateIndexes(f),this.changes.emitEvents(f,t)}else l.length>0&&this.indexes.updateIndexes(l),this.changes.emitEvents(l,t)}calculateSize(){const t=this.syncedData.size,n=Array.from(this.optimisticDeletes).filter(i=>this.syncedData.has(i)&&!this.optimisticUpserts.has(i)).length,r=Array.from(this.optimisticUpserts.keys()).filter(i=>!this.syncedData.has(i)).length;return t-n+r}collectOptimisticChanges(t,n,r){const i=new Set([...t.keys(),...this.optimisticUpserts.keys(),...n,...this.optimisticDeletes]);for(const o of i){const l=this.get(o),c=this.getPreviousValue(o,t,n);c!==void 0&&l===void 0?r.push({type:"delete",key:o,value:c}):c===void 0&&l!==void 0?r.push({type:"insert",key:o,value:l}):c!==void 0&&l!==void 0&&c!==l&&r.push({type:"update",key:o,value:l,previousValue:c})}}getPreviousValue(t,n,r){if(!r.has(t))return n.has(t)?n.get(t):this.syncedData.get(t)}scheduleTransactionCleanup(t){if(t.state==="completed"){this.transactions.delete(t.id);return}t.isPersisted.promise.then(()=>{this.transactions.delete(t.id)}).catch(()=>{})}capturePreSyncVisibleState(){if(this.pendingSyncedTransactions.length===0)return;const t=new Set;for(const n of this.pendingSyncedTransactions)for(const r of n.operations)t.add(r.key);for(const n of t)this.recentlySyncedKeys.add(n);for(const n of t)if(!this.preSyncVisibleState.has(n)){const r=this.get(n);r!==void 0&&this.preSyncVisibleState.set(n,r)}}onTransactionStateChange(){this.changes.shouldBatchEvents=this.pendingSyncedTransactions.length>0,this.capturePreSyncVisibleState(),this.recomputeOptimisticState(!1)}cleanup(){this.syncedData.clear(),this.syncedMetadata.clear(),this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.size=0,this.pendingSyncedTransactions=[],this.syncedKeys.clear(),this.hasReceivedFirstCommit=!1}}class TE{constructor(){this.listeners=new Map}on(t,n){return this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(n),()=>{this.listeners.get(t)?.delete(n)}}once(t,n){const r=this.on(t,i=>{n(i),r()});return r}off(t,n){this.listeners.get(t)?.delete(n)}waitFor(t,n){return new Promise((r,i)=>{let o;const l=this.on(t,c=>{o&&(clearTimeout(o),o=void 0),r(c),l()});n&&(o=setTimeout(()=>{o=void 0,l(),i(new Error(`Timeout waiting for event ${String(t)}`))},n))})}emitInner(t,n){this.listeners.get(t)?.forEach(r=>{try{r(n)}catch(i){queueMicrotask(()=>{throw i})}})}clearListeners(){this.listeners.clear()}}function iP(e,t){if(t.length===0||e.length===0)return;if(e.length===1){const{expression:r,compareOptions:i}=e[0];return(i.direction==="asc"?Ex:jg)(r,new jn(t[0]))}const n=[];for(let r=0;r<e.length&&r<t.length;r++){const i=e[r],o=t[r],l=[];for(let d=0;d<r;d++){const m=e[d],p=t[d];l.push(Pg(m.expression,new jn(p)))}const f=(i.compareOptions.direction==="asc"?Ex:jg)(i.expression,new jn(o));if(l.length===0)n.push(f);else{const d=[...l,f];n.push(d.reduce((m,p)=>Fg(m,p)))}}return n.length===1?n[0]:n.reduce((r,i)=>BL(r,i))}class sP extends TE{constructor(t,n,r){super(),this.collection=t,this.callback=n,this.options=r,this.loadedInitialState=!1,this.skipFiltering=!1,this.snapshotSent=!1,this.loadedSubsets=[],this.sentKeys=new Set,this.limitedSnapshotRowCount=0,this._status="ready",this.pendingLoadSubsetPromises=new Set,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches=new Set,r.onUnsubscribe&&this.on("unsubscribed",o=>r.onUnsubscribe(o)),r.whereExpression&&HL(r.whereExpression,this.collection);const i=o=>{n(o),this.trackSentKeys(o)};this.callback=i,this.filteredCallback=r.whereExpression?tP(this.callback,r):this.callback,this.truncateCleanup=this.collection.on("truncate",()=>{this.handleTruncate()})}get status(){return this._status}handleTruncate(){const t=[...this.loadedSubsets],n=this.collection._sync.syncLoadSubsetFn!==null;if(t.length===0||!n){this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[];return}this.isBufferingForTruncate=!0,this.truncateBuffer=[],this.pendingTruncateRefetches.clear(),this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[],queueMicrotask(()=>{if(this.isBufferingForTruncate){for(const r of t){const i=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),this.trackLoadSubsetPromise(i),i instanceof Promise&&(this.pendingTruncateRefetches.add(i),i.catch(()=>{}).finally(()=>{this.pendingTruncateRefetches.delete(i),this.checkTruncateRefetchComplete()}))}this.pendingTruncateRefetches.size===0&&this.flushTruncateBuffer()}})}checkTruncateRefetchComplete(){this.pendingTruncateRefetches.size===0&&this.isBufferingForTruncate&&this.flushTruncateBuffer()}flushTruncateBuffer(){this.isBufferingForTruncate=!1;const t=this.truncateBuffer.flat();t.length>0&&this.filteredCallback(t),this.truncateBuffer=[]}setOrderByIndex(t){this.orderByIndex=t}setStatus(t){if(this._status===t)return;const n=this._status;this._status=t,this.emitInner("status:change",{type:"status:change",subscription:this,previousStatus:n,status:t});const r=`status:${t}`;this.emitInner(r,{type:r,subscription:this,previousStatus:n,status:t})}trackLoadSubsetPromise(t){t instanceof Promise&&(this.pendingLoadSubsetPromises.add(t),this.setStatus("loadingSubset"),t.finally(()=>{this.pendingLoadSubsetPromises.delete(t),this.pendingLoadSubsetPromises.size===0&&this.setStatus("ready")}))}hasLoadedInitialState(){return this.loadedInitialState}hasSentAtLeastOneSnapshot(){return this.snapshotSent}emitEvents(t){const n=this.filterAndFlipChanges(t);this.isBufferingForTruncate?n.length>0&&this.truncateBuffer.push(n):this.filteredCallback(n)}requestSnapshot(t){if(this.loadedInitialState)return!1;const n={where:this.options.whereExpression,optimizedOnly:t?.optimizedOnly??!1};if(t){if("where"in t){const f=t.where;if(n.where){const d=n.where,m=Fg(d,f);n.where=m}else n.where=f}}else this.loadedInitialState=!0;const r={where:n.where,subscription:this,orderBy:t?.orderBy,limit:t?.limit},i=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),(t?.trackLoadSubsetPromise??!0)&&this.trackLoadSubsetPromise(i);const l=this.collection.currentStateAsChanges(n);if(l===void 0)return!1;const c=l.filter(f=>!this.sentKeys.has(f.key));for(const f of c)this.sentKeys.add(f.key);return this.snapshotSent=!0,this.callback(c),!0}requestLimitedSnapshot({orderBy:t,limit:n,minValues:r,offset:i}){if(!n)throw new Error("limit is required");if(!this.orderByIndex)throw new Error("Ordered snapshot was requested but no index was found. You have to call setOrderByIndex before requesting an ordered snapshot.");const l=r?.[0],c=this.orderByIndex,f=this.options.whereExpression,d=f?Gl(f):void 0,m=R=>{if(this.sentKeys.has(R))return!1;const M=this.collection.get(R);return M===void 0?!1:d?.(M)??!0};let p=l;const g=[];let y=[];if(l!==void 0){const{expression:R}=t[0],M=this.collection.currentStateAsChanges({where:Pg(R,new jn(l))});if(M){const L=M.map(N=>N.key).filter(N=>!this.sentKeys.has(N)&&m(N));y.push(...L);const j=c.take(n-y.length,l,m);y.push(...j)}else y=c.take(n,l,m)}else y=c.take(n,l,m);const S=()=>Math.max(n-g.length,0),w=()=>y.length===0,C=t[0].expression,x=C.type==="ref"?Fn(new An(C.path),!0):null;for(;S()>0&&!w();){const R=new Set;for(const M of y){const L=this.collection.get(M);g.push({type:"insert",key:M,value:L}),p=x?x(L):L,R.add(M)}y=c.take(S(),p,m)}const E=this.limitedSnapshotRowCount;for(const R of g)this.sentKeys.add(R.key);this.callback(g),this.limitedSnapshotRowCount+=g.length,g.length>0&&(this.lastSentKey=g[g.length-1].key);let k;if(r!==void 0&&r.length>0){const R=iP(t,r);if(R){const{expression:M}=t[0],L=r[0];let j;if(L instanceof Date){const N=new Date(L.getTime()+1);j=Fg($L(M,new jn(L)),jg(M,new jn(N)))}else j=Pg(M,new jn(L));k={whereFrom:R,whereCurrent:j,lastKey:this.lastSentKey}}}const I={where:f,limit:n,orderBy:t,cursor:k,offset:i??E,subscription:this},P=this.collection._sync.loadSubset(I);this.loadedSubsets.push(I),this.trackLoadSubsetPromise(P)}filterAndFlipChanges(t){if(this.loadedInitialState||this.skipFiltering)return t;const n=this.isBufferingForTruncate,r=[];for(const i of t){let o=i;if(this.sentKeys.has(i.key)){if(i.type==="insert")continue;i.type==="delete"&&this.sentKeys.delete(i.key)}else{if(i.type==="update")o={...i,type:"insert",previousValue:void 0};else if(i.type==="delete"&&!n)continue;this.sentKeys.add(i.key)}r.push(o)}return r}trackSentKeys(t){if(!(this.loadedInitialState||this.skipFiltering))for(const n of t)n.type==="delete"?this.sentKeys.delete(n.key):this.sentKeys.add(n.key)}markAllStateAsSeen(){this.skipFiltering=!0}unsubscribe(){this.truncateCleanup?.(),this.truncateCleanup=void 0,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches.clear();for(const t of this.loadedSubsets)this.collection._sync.unloadSubset(t);this.loadedSubsets=[],this.emitInner("unsubscribed",{type:"unsubscribed",subscription:this}),this.clearListeners()}}class oP{constructor(){this.activeSubscribersCount=0,this.changeSubscriptions=new Set,this.batchedEvents=[],this.shouldBatchEvents=!1}setDeps(t){this.lifecycle=t.lifecycle,this.sync=t.sync,this.events=t.events,this.collection=t.collection}emitEmptyReadyEvent(){for(const t of this.changeSubscriptions)t.emitEvents([])}emitEvents(t,n=!1){if(this.shouldBatchEvents&&!n){this.batchedEvents.push(...t);return}let r=t;if(n&&(this.batchedEvents.length>0&&(r=[...this.batchedEvents,...t]),this.batchedEvents=[],this.shouldBatchEvents=!1),r.length!==0)for(const i of this.changeSubscriptions)i.emitEvents(r)}subscribeChanges(t,n={}){this.addSubscriber();const r=new sP(this.collection,t,{...n,onUnsubscribe:()=>{this.removeSubscriber(),this.changeSubscriptions.delete(r)}});return n.includeInitialState?r.requestSnapshot({trackLoadSubsetPromise:!1}):n.includeInitialState===!1&&r.markAllStateAsSeen(),this.changeSubscriptions.add(r),r}addSubscriber(){const t=this.activeSubscribersCount;this.activeSubscribersCount++,this.lifecycle.cancelGCTimer(),(this.lifecycle.status==="cleaned-up"||this.lifecycle.status==="idle")&&this.sync.startSync(),this.events.emitSubscribersChange(this.activeSubscribersCount,t)}removeSubscriber(){const t=this.activeSubscribersCount;if(this.activeSubscribersCount--,this.activeSubscribersCount===0)this.lifecycle.startGCTimer();else if(this.activeSubscribersCount<0)throw new cD;this.events.emitSubscribersChange(this.activeSubscribersCount,t)}cleanup(){this.batchedEvents=[],this.shouldBatchEvents=!1}}const aP=e=>setTimeout(()=>{e({didTimeout:!0,timeRemaining:()=>50})},0),lP=e=>{clearTimeout(e)},uP=typeof window<"u"&&"requestIdleCallback"in window?(e,t)=>window.requestIdleCallback(e,t):(e,t)=>aP(e),zm=typeof window<"u"&&"cancelIdleCallback"in window?e=>window.cancelIdleCallback(e):lP;class cP{constructor(t,n){this.status="idle",this.hasBeenReady=!1,this.hasReceivedFirstCommit=!1,this.onFirstReadyCallbacks=[],this.gcTimeoutId=null,this.idleCallbackId=null,this.config=t,this.id=n}setDeps(t){this.indexes=t.indexes,this.events=t.events,this.changes=t.changes,this.sync=t.sync,this.state=t.state}validateStatusTransition(t,n){if(t===n)return;if(!{idle:["loading","error","cleaned-up"],loading:["ready","error","cleaned-up"],ready:["cleaned-up","error"],error:["cleaned-up","idle"],"cleaned-up":["loading","error"]}[t].includes(n))throw new lD(t,n,this.id)}setStatus(t,n=!1){if(t==="ready"&&!n)throw new bu(`You can't directly call "setStatus('ready'). You must use markReady instead.`);this.validateStatusTransition(this.status,t);const r=this.status;this.status=t,t==="ready"&&!this.indexes.isIndexesResolved&&this.indexes.resolveAllIndexes().catch(i=>{console.warn(`${this.config.id?`[${this.config.id}] `:""}Failed to resolve indexes:`,i)}),this.events.emitStatusChange(t,r)}validateCollectionUsable(t){switch(this.status){case"error":throw new aD(t,this.id);case"cleaned-up":this.sync.startSync();break}}markReady(){if(this.validateStatusTransition(this.status,"ready"),this.status==="loading"){if(this.setStatus("ready",!0),!this.hasBeenReady){this.hasBeenReady=!0,this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0);const t=[...this.onFirstReadyCallbacks];this.onFirstReadyCallbacks=[],t.forEach(n=>n())}this.changes.changeSubscriptions.size>0&&this.changes.emitEmptyReadyEvent()}}startGCTimer(){this.gcTimeoutId&&clearTimeout(this.gcTimeoutId);const t=this.config.gcTime??3e5;t!==0&&(this.gcTimeoutId=setTimeout(()=>{this.changes.activeSubscribersCount===0&&this.scheduleIdleCleanup()},t))}cancelGCTimer(){this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.idleCallbackId!==null&&(zm(this.idleCallbackId),this.idleCallbackId=null)}scheduleIdleCleanup(){this.idleCallbackId!==null&&zm(this.idleCallbackId),this.idleCallbackId=uP(t=>{this.changes.activeSubscribersCount===0?this.performCleanup(t)&&(this.idleCallbackId=null):this.idleCallbackId=null},{timeout:1e3})}performCleanup(t){return!t||t.timeRemaining()>0||t.didTimeout?(this.sync.cleanup(),this.state.cleanup(),this.changes.cleanup(),this.indexes.cleanup(),this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.hasBeenReady=!1,this.onFirstReadyCallbacks=[],this.setStatus("cleaned-up"),this.events.cleanup(),!0):(this.scheduleIdleCleanup(),!1)}onFirstReady(t){if(this.hasBeenReady){t();return}this.onFirstReadyCallbacks.push(t)}cleanup(){this.idleCallbackId!==null&&(zm(this.idleCallbackId),this.idleCallbackId=null),this.performCleanup()}}const u0=Symbol("liveQueryInternal");class fP{constructor(t,n){this.preloadPromise=null,this.syncCleanupFn=null,this.syncLoadSubsetFn=null,this.syncUnloadSubsetFn=null,this.pendingLoadSubsetPromises=new Set,this.config=t,this.id=n,this.syncMode=t.syncMode??"eager"}setDeps(t){this.collection=t.collection,this.state=t.state,this.lifecycle=t.lifecycle,this._events=t.events}startSync(){if(!(this.lifecycle.status!=="idle"&&this.lifecycle.status!=="cleaned-up")){this.lifecycle.setStatus("loading");try{const t=dP(this.config.sync.sync({collection:this.collection,begin:()=>{this.state.pendingSyncedTransactions.push({committed:!1,operations:[],deletedKeys:new Set})},write:n=>{const r=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!r)throw new lx;if(r.committed)throw new ux;let i;"key"in n?i=n.key:i=this.config.getKey(n.value);let o=n.type;if(n.type==="insert"){const c=this.state.syncedData.has(i),f=r.deletedKeys.has(i),d=r.truncate===!0;if(c&&!f&&!d){const m=this.state.syncedData.get(i);if(m!==void 0&&Ir(m,n.value))o="update";else{const g=this.config.utils[u0];throw new pD(i,this.id,{hasCustomGetKey:g?.hasCustomGetKey??!1,hasJoins:g?.hasJoins??!1})}}}const l={...n,type:o,key:i};r.operations.push(l),o==="delete"&&r.deletedKeys.add(i)},commit:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new AD;if(n.committed)throw new TD;n.committed=!0,this.state.commitPendingTransactions()},markReady:()=>{this.lifecycle.markReady()},truncate:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new lx;if(n.committed)throw new ux;n.operations=[],n.deletedKeys.clear(),n.truncate=!0,n.optimisticSnapshot={upserts:new Map(this.state.optimisticUpserts),deletes:new Set(this.state.optimisticDeletes)}}}));if(this.syncCleanupFn=t?.cleanup??null,this.syncLoadSubsetFn=t?.loadSubset??null,this.syncUnloadSubsetFn=t?.unloadSubset??null,this.syncMode==="on-demand"&&!this.syncLoadSubsetFn)throw new vu(`Collection "${this.id}" is configured with syncMode "on-demand" but the sync function did not return a loadSubset handler. Either provide a loadSubset handler or use syncMode "eager".`)}catch(t){throw this.lifecycle.setStatus("error"),t}}}preload(){return this.preloadPromise?this.preloadPromise:(this.syncMode==="on-demand"&&console.warn(`${this.id?`[${this.id}] `:""}Calling .preload() on a collection with syncMode "on-demand" is a no-op. In on-demand mode, data is only loaded when queries request it. Instead, create a live query and call .preload() on that to load the specific data you need. See https://tanstack.com/blog/tanstack-db-0.5-query-driven-sync for more details.`),this.preloadPromise=new Promise((t,n)=>{if(this.lifecycle.status==="ready"){t();return}if(this.lifecycle.status==="error"){n(new uD);return}if(this.lifecycle.onFirstReady(()=>{t()}),this.lifecycle.status==="idle"||this.lifecycle.status==="cleaned-up")try{this.startSync()}catch(r){n(r);return}}),this.preloadPromise)}get isLoadingSubset(){return this.pendingLoadSubsetPromises.size>0}trackLoadPromise(t){const n=!this.isLoadingSubset;this.pendingLoadSubsetPromises.add(t),n&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!0,previousIsLoadingSubset:!1,loadingSubsetTransition:"start"}),t.finally(()=>{const r=this.pendingLoadSubsetPromises.size===1&&this.pendingLoadSubsetPromises.has(t);this.pendingLoadSubsetPromises.delete(t),r&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!1,previousIsLoadingSubset:!0,loadingSubsetTransition:"end"})})}loadSubset(t){if(this.syncMode==="eager")return!0;if(this.syncLoadSubsetFn){const n=this.syncLoadSubsetFn(t);if(n instanceof Promise)return this.trackLoadPromise(n),n}return!0}unloadSubset(t){this.syncUnloadSubsetFn&&this.syncUnloadSubsetFn(t)}cleanup(){try{this.syncCleanupFn&&(this.syncCleanupFn(),this.syncCleanupFn=null)}catch(t){queueMicrotask(()=>{if(t instanceof Error){const n=new fx(this.id,t);throw n.cause=t,n.stack=t.stack,n}else throw new fx(this.id,t)})}this.preloadPromise=null}}function dP(e){if(typeof e=="function")return{cleanup:e};if(typeof e=="object")return e}function OE(e){return typeof e=="function"&&e.prototype!==void 0&&e.prototype.constructor===e}async function hP(e){return OE(e)?e:await e()}class pP{constructor(t,n,r,i,o,l){this.id=t,this.expression=n,this.name=r,this.resolver=i,this.options=o,this.collectionEntries=l,this.indexPromise=null,this.resolvedIndex=null,OE(this.resolver)&&(this.resolvedIndex=new this.resolver(this.id,this.expression,this.name,this.options),this.collectionEntries&&this.resolvedIndex.build(this.collectionEntries))}async resolve(){return this.resolvedIndex?this.resolvedIndex:(this.indexPromise||(this.indexPromise=this.createIndex()),this.resolvedIndex=await this.indexPromise,this.resolvedIndex)}isResolved(){return this.resolvedIndex!==null}getResolved(){if(!this.resolvedIndex)throw new Error(`Index ${this.id} has not been resolved yet. Ensure collection is synced.`);return this.resolvedIndex}getId(){return this.id}getName(){return this.name}getExpression(){return this.expression}async createIndex(){const t=await hP(this.resolver);return new t(this.id,this.expression,this.name,this.options)}}class mP{constructor(t,n){this.indexId=t,this.lazyIndex=n}get index(){return this.lazyIndex.getResolved()}get isReady(){return this.lazyIndex.isResolved()}async whenReady(){return await this.lazyIndex.resolve()}get id(){return this.indexId}get name(){return this.isReady?this.index.name:this.lazyIndex.getName()}get expression(){return this.lazyIndex.getExpression()}supports(t){return this.index.supports(t)}getStats(){return this.index.getStats()}matchesField(t){const n=this.expression;return n.type==="ref"&&n.path.length===t.length&&n.path.every((r,i)=>r===t[i])}get keyCount(){return this.index.keyCount}get indexedKeysSet(){return this.index.indexedKeysSet}get orderedEntriesArray(){return this.index.orderedEntriesArray}get valueMapData(){return this.index.valueMapData}equalityLookup(t){return this.index.equalityLookup?.(t)??new Set}rangeQuery(t){return this.index.rangeQuery?.(t)??new Set}inArrayLookup(t){return this.index.inArrayLookup?.(t)??new Set}_getLazyWrapper(){return this.lazyIndex}}class gP{constructor(){this.lazyIndexes=new Map,this.resolvedIndexes=new Map,this.isIndexesResolved=!1,this.indexCounter=0}setDeps(t){this.state=t.state,this.lifecycle=t.lifecycle}createIndex(t,n={}){this.lifecycle.validateCollectionUsable("createIndex");const r=++this.indexCounter,i=jL(),o=t(i),l=rn(o),c=n.indexType??$g,f=new pP(r,l,n.name,c,n.options,this.state.entries());if(this.lazyIndexes.set(r,f),c===$g)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch(d){console.warn("Failed to resolve BTreeIndex:",d)}else if(typeof c=="function"&&c.prototype)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch{this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)})}else this.isIndexesResolved&&this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)});return new mP(r,f)}async resolveAllIndexes(){if(this.isIndexesResolved)return;const t=Array.from(this.lazyIndexes.entries()).map(async([n,r])=>{const i=await r.resolve();return i.build(this.state.entries()),this.resolvedIndexes.set(n,i),{indexId:n,resolvedIndex:i}});await Promise.all(t),this.isIndexesResolved=!0}async resolveSingleIndex(t,n){const r=await n.resolve();return r.build(this.state.entries()),this.resolvedIndexes.set(t,r),r}get indexes(){return this.resolvedIndexes}updateIndexes(t){for(const n of this.resolvedIndexes.values())for(const r of t)switch(r.type){case"insert":n.add(r.key,r.value);break;case"update":r.previousValue?n.update(r.key,r.previousValue,r.value):n.add(r.key,r.value);break;case"delete":n.remove(r.key,r.value);break}}cleanup(){this.lazyIndexes.clear(),this.resolvedIndexes.clear()}}var yP={};const vP=new Set(["find","findLast","findIndex","findLastIndex","filter","map","flatMap","forEach","some","every","reduce","reduceRight"]),bP=new Set(["pop","push","shift","unshift","splice","sort","reverse","fill","copyWithin"]),SP=new Set(["set","delete","clear","add"]),wP=new Set(["entries","keys","values","forEach"]);function c0(e){return e!==null&&typeof e=="object"&&!(e instanceof Date)&&!(e instanceof RegExp)&&!Vf(e)}function _P(e,t,n,r){if(vP.has(e))return function(...i){const o=i[0];if(typeof o!="function")return t.apply(n.copy_,i);const l=(d,m)=>{if(c0(d)){const p={tracker:n,prop:String(m)},{proxy:g}=r(d,p);return g}return d},c=function(d,m,p){const g=l(d,m);return o.call(this,g,m,p)};if(e==="reduce"||e==="reduceRight"){const d=function(m,p,g,y){const S=l(p,g);return o.call(this,m,S,g,y)};return t.apply(n.copy_,[d,...i.slice(1)])}const f=t.apply(n.copy_,[c,...i.slice(1)]);if((e==="find"||e==="findLast")&&f&&typeof f=="object"){const d=n.copy_.indexOf(f);if(d!==-1)return l(f,d)}return e==="filter"&&Array.isArray(f)?f.map(d=>{const m=n.copy_.indexOf(d);return m!==-1?l(d,m):d}):f}}function xP(e,t){return function(){const n=e.copy_;let r=0;return{next(){if(r>=n.length)return{done:!0,value:void 0};const i=n[r];let o=i;if(c0(i)){const l={tracker:e,prop:String(r)},{proxy:c}=t(i,l);o=c}return r++,{done:!1,value:o}},[Symbol.iterator](){return this}}}}function Ox(e,t,n){return function(...r){const i=e.apply(t.copy_,r);return n(t),i}}function CP(e,t,n,r,i,o,l){if(wP.has(e)||t===Symbol.iterator)return function(...f){const d=n.apply(i.copy_,f);if(e==="forEach"){const p=f[0];if(typeof p=="function"){const g=function(y,S,w){const C=p.call(this,y,S,w);return l(i),C};return n.apply(r,[g,...f.slice(1)])}}if(e==="entries"||e==="values"||e===Symbol.iterator.toString()||t===Symbol.iterator){const p=d,g=new Map;if(e==="values"&&r instanceof Map)for(const[S,w]of i.copy_.entries())g.set(w,S);const y=new Map;if(r instanceof Set)for(const S of i.copy_.values())y.set(S,S);return{next(){const S=p.next();if(!S.done&&S.value&&typeof S.value=="object"){if(e==="entries"&&Array.isArray(S.value)&&S.value.length===2){if(S.value[1]&&typeof S.value[1]=="object"){const w=S.value[0],C={tracker:i,prop:w,updateMap:E=>{i.copy_ instanceof Map&&i.copy_.set(w,E)}},{proxy:x}=o(S.value[1],C);S.value[1]=x}}else if(e==="values"||e===Symbol.iterator.toString()||t===Symbol.iterator)if(e==="values"&&r instanceof Map){const w=g.get(S.value);if(w!==void 0){const C={tracker:i,prop:w,updateMap:E=>{i.copy_ instanceof Map&&i.copy_.set(w,E)}},{proxy:x}=o(S.value,C);S.value=x}}else if(r instanceof Set){const w=S.value,C={tracker:i,prop:w,updateSet:E=>{i.copy_ instanceof Set&&(i.copy_.delete(w),i.copy_.add(E),y.set(w,E))}},{proxy:x}=o(S.value,C);S.value=x}else{const w=Symbol("iterator-value"),{proxy:C}=o(S.value,{tracker:i,prop:w});S.value=C}}return S},[Symbol.iterator](){return this}}}return d}}function st(...e){const t=typeof window<"u"&&typeof localStorage<"u";t&&localStorage.getItem("DEBUG")==="true"?console.log("[proxy]",...e):!t&&typeof process<"u"&&yP.DEBUG==="true"&&console.log("[proxy]",...e)}function Si(e,t=new WeakMap){if(e==null||typeof e!="object")return e;if(t.has(e))return t.get(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e.source,e.flags);if(Array.isArray(e)){const i=[];return t.set(e,i),e.forEach((o,l)=>{i[l]=Si(o,t)}),i}if(ArrayBuffer.isView(e)&&!(e instanceof DataView)){const i=Object.getPrototypeOf(e).constructor,o=new i(e.length);t.set(e,o);for(let l=0;l<e.length;l++)o[l]=e[l];return o}if(e instanceof Map){const i=new Map;return t.set(e,i),e.forEach((o,l)=>{i.set(l,Si(o,t))}),i}if(e instanceof Set){const i=new Set;return t.set(e,i),e.forEach(o=>{i.add(Si(o,t))}),i}if(Vf(e))return e;const n={};t.set(e,n);for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=Si(e[i],t));const r=Object.getOwnPropertySymbols(e);for(const i of r)n[i]=Si(e[i],t);return n}let Mx=0;function EP(){return Mx+=1,Mx}function f0(e,t){const n=new Map;function r(p,g){if(st("Object ID:",p.constructor.name),n.has(p))return n.get(p);{const y=f0(p,g);return n.set(p,y),y}}const i=new Map,o={copy_:Si(e),originalObject:Si(e),proxyCount:EP(),modified:!1,assigned_:{},parent:t,target:e};st("createChangeProxy called for target",e,o.proxyCount);function l(p){p.modified||(p.modified=!0),p.parent&&(st("propagating change to parent"),"updateMap"in p.parent?p.parent.updateMap(p.copy_):"updateSet"in p.parent?p.parent.updateSet(p.copy_):(p.parent.tracker.copy_[p.parent.prop]=p.copy_,p.parent.tracker.assigned_[p.parent.prop]=!0),l(p.parent.tracker))}function c(p){if(st("checkIfReverted called with assigned keys:",Object.keys(p.assigned_)),Object.keys(p.assigned_).length===0&&Object.getOwnPropertySymbols(p.assigned_).length===0)return st("No assigned properties, returning true"),!0;for(const y in p.assigned_)if(p.assigned_[y]===!0){const S=p.copy_[y],w=p.originalObject[y];if(st(`Checking property ${String(y)}, current:`,S,"original:",w),!Ir(S,w))return st(`Property ${String(y)} is different, returning false`),!1}else if(p.assigned_[y]===!1)return st(`Property ${String(y)} was deleted, returning false`),!1;const g=Object.getOwnPropertySymbols(p.assigned_);for(const y of g)if(p.assigned_[y]===!0){const S=p.copy_[y],w=p.originalObject[y];if(!Ir(S,w))return st("Symbol property is different, returning false"),!1}else if(p.assigned_[y]===!1)return st("Symbol property was deleted, returning false"),!1;return st("All properties match original values, returning true"),!0}function f(p,g){st("checkParentStatus called for child prop:",g);const y=c(p);st("Parent checkIfReverted returned:",y),y&&(st("Parent is fully reverted, clearing tracking"),p.modified=!1,p.assigned_={},p.parent&&(st("Continuing up the parent chain"),f(p.parent.tracker,p.parent.prop)))}function d(p){if(st("createObjectProxy",p),i.has(p))return st("proxyCache found match"),i.get(p);const g=new Proxy(p,{get(y,S){st("get",y,S);const w=o.copy_[S]??o.originalObject[S],C=o.originalObject[S];if(st("value (at top of proxy get)",w),Object.getOwnPropertyDescriptor(y,S)?.get)return w;if(typeof w=="function"){if(Array.isArray(y)){const E=S.toString();if(bP.has(E))return Ox(w,o,l);const k=_P(E,w,o,r);if(k)return k;if(S===Symbol.iterator)return xP(o,r)}if(y instanceof Map||y instanceof Set){const E=S.toString();if(SP.has(E))return Ox(w,o,l);const k=CP(E,S,w,y,o,r,l);if(k)return k}return w.bind(y)}if(c0(w)){const E={tracker:o,prop:String(S)},{proxy:k}=r(C,E);return i.set(w,k),k}return w},set(y,S,w){const C=o.copy_[S];if(st(`set called for property ${String(S)}, current:`,C,"new:",w),Ir(C,w))st("Value unchanged, not tracking");else{const x=o.originalObject[S],E=Ir(w,x);if(st("value:",w,"original:",x,"isRevertToOriginal:",E),E){st(`Reverting property ${String(S)} to original value`),delete o.assigned_[S.toString()],st(`Updating copy with original value for ${String(S)}`),o.copy_[S]=Si(x),st("Checking if all properties reverted");const k=c(o);st("All reverted:",k),k?(st("All properties reverted, clearing tracking"),o.modified=!1,o.assigned_={},t&&(st("Updating parent for property:",t.prop),f(t.tracker,t.prop))):(st("Some properties still changed, keeping modified flag"),o.modified=!0)}else st(`Setting new value for property ${String(S)}`),o.copy_[S]=w,o.assigned_[S.toString()]=!0,st("Marking object and ancestors as modified",o),l(o)}return!0},defineProperty(y,S,w){const C=Reflect.defineProperty(y,S,w);return C&&"value"in w&&(o.copy_[S]=Si(w.value),o.assigned_[S.toString()]=!0,l(o)),C},getOwnPropertyDescriptor(y,S){return Reflect.getOwnPropertyDescriptor(y,S)},preventExtensions(y){return Reflect.preventExtensions(y)},isExtensible(y){return Reflect.isExtensible(y)},deleteProperty(y,S){st("deleteProperty",y,S);const w=typeof S=="symbol"?S.toString():S;if(w in y){const C=w in o.originalObject,x=Reflect.deleteProperty(y,S);return x&&(C?(o.assigned_[w]=!1,l(o)):(delete o.assigned_[w],Object.keys(o.assigned_).length===0&&Object.getOwnPropertySymbols(o.assigned_).length===0?o.modified=!1:o.modified=!0)),x}return!0}});return i.set(p,g),g}return{proxy:d(o.copy_),getChanges:()=>{if(st("getChanges called, modified:",o.modified),st(o),!o.modified)return st("Object not modified, returning empty object"),{};if(typeof o.copy_!="object"||Array.isArray(o.copy_)||Object.keys(o.assigned_).length===0)return o.copy_;const p={};for(const g in o.copy_)o.assigned_[g]===!0&&g in o.copy_&&(p[g]=o.copy_[g]);return st("Returning copy:",p),p}}}function RP(e){const t=e.map(n=>f0(n));return{proxies:t.map(n=>n.proxy),getChanges:()=>t.map(n=>n.getChanges())}}function kP(e,t){const{proxy:n,getChanges:r}=f0(e);return t(n),r()}function AP(e,t){const{proxies:n,getChanges:r}=RP(e);return t(n),r()}function TP(){let e,t,n=!0;return{promise:new Promise((i,o)=>{e=l=>{n=!1,i(l)},t=l=>{n=!1,o(l)}}),resolve:e,reject:t,isPending:()=>n}}function OP(e){return typeof e=="object"&&e!==null&&typeof e.hasPendingGraphRun=="function"}class MP{constructor(){this.contexts=new Map,this.clearListeners=new Set}getOrCreateContext(t){let n=this.contexts.get(t);return n||(n={queue:[],jobs:new Map,dependencies:new Map,completed:new Set},this.contexts.set(t,n)),n}schedule({contextId:t,jobId:n,dependencies:r,run:i}){if(typeof t>"u"){i();return}const o=this.getOrCreateContext(t);if(o.jobs.has(n)||o.queue.push(n),o.jobs.set(n,i),r){const l=new Set(r);l.delete(n),o.dependencies.set(n,l)}else o.dependencies.has(n)||o.dependencies.set(n,new Set);o.completed.delete(n)}flush(t){const n=this.contexts.get(t);if(!n)return;const{queue:r,jobs:i,dependencies:o,completed:l}=n;for(;r.length>0;){let c=!1;const f=r.length;for(let d=0;d<f;d++){const m=r.shift(),p=i.get(m);if(!p){o.delete(m),l.delete(m);continue}const g=o.get(m);let y=!g;if(g){y=!0;for(const S of g){if(S===m)continue;const w=OP(S)&&S.hasPendingGraphRun(t);if(i.has(S)&&!l.has(S)||!i.has(S)&&w){y=!1;break}}}y?(i.delete(m),o.delete(m),p(),l.add(m),c=!0):r.push(m)}if(!c)throw new Error(`Scheduler detected unresolved dependencies for context ${String(t)}.`)}this.contexts.delete(t)}flushAll(){for(const t of Array.from(this.contexts.keys()))this.flush(t)}clear(t){this.contexts.delete(t),this.clearListeners.forEach(n=>n(t))}onClear(t){return this.clearListeners.add(t),()=>this.clearListeners.delete(t)}hasPendingJobs(t){const n=this.contexts.get(t);return!!n&&n.jobs.size>0}clearJob(t,n){const r=this.contexts.get(t);r&&(r.jobs.delete(n),r.dependencies.delete(n),r.completed.delete(n),r.queue=r.queue.filter(i=>i!==n),r.jobs.size===0&&this.contexts.delete(t))}}const Zf=new MP,Yf=[];let uu=[],IP=0;function NP(e,t){switch(`${e.type}-${t.type}`){case"insert-update":return{...e,type:"insert",original:{},modified:t.modified,changes:{...e.changes,...t.changes},key:e.key,globalKey:e.globalKey,metadata:t.metadata??e.metadata,syncMetadata:{...e.syncMetadata,...t.syncMetadata},mutationId:t.mutationId,updatedAt:t.updatedAt};case"insert-delete":return null;case"update-delete":return t;case"update-update":return{...t,original:e.original,changes:{...e.changes,...t.changes},metadata:t.metadata??e.metadata,syncMetadata:{...e.syncMetadata,...t.syncMetadata}};case"delete-delete":case"insert-insert":return t;default:{const n=`${e.type}-${t.type}`;throw new Error(`Unhandled mutation combination: ${n}`)}}}function Gc(e){const t=new PP(e);return Yf.push(t),t}function Sf(){if(uu.length>0)return uu.slice(-1)[0]}function DP(e){Zf.clear(e.id),uu.push(e)}function zP(e){try{Zf.flush(e.id)}finally{uu=uu.filter(t=>t.id!==e.id)}}function LP(e){const t=Yf.findIndex(n=>n.id===e.id);t!==-1&&Yf.splice(t,1)}class PP{constructor(t){if(typeof t.mutationFn>"u")throw new CD;this.id=t.id??crypto.randomUUID(),this.mutationFn=t.mutationFn,this.state="pending",this.mutations=[],this.isPersisted=TP(),this.autoCommit=t.autoCommit??!0,this.createdAt=new Date,this.sequenceNumber=IP++,this.metadata=t.metadata??{}}setState(t){this.state=t,(t==="completed"||t==="failed")&&LP(this)}mutate(t){if(this.state!=="pending")throw new ED;DP(this);try{t()}finally{zP(this)}return this.autoCommit&&this.commit().catch(()=>{}),this}applyMutations(t){for(const n of t){const r=this.mutations.findIndex(i=>i.globalKey===n.globalKey);if(r>=0){const i=this.mutations[r],o=NP(i,n);o===null?this.mutations.splice(r,1):this.mutations[r]=o}else this.mutations.push(n)}}rollback(t){const n=t?.isSecondaryRollback??!1;if(this.state==="completed")throw new RD;if(this.setState("failed"),!n){const r=new Set;this.mutations.forEach(i=>r.add(i.globalKey));for(const i of Yf)i.state==="pending"&&i.mutations.some(o=>r.has(o.globalKey))&&i.rollback({isSecondaryRollback:!0})}return this.isPersisted.reject(this.error?.error),this.touchCollection(),this}touchCollection(){const t=new Set;for(const n of this.mutations)t.has(n.collection.id)||(n.collection._state.onTransactionStateChange(),n.collection._state.pendingSyncedTransactions.length>0&&n.collection._state.commitPendingTransactions(),t.add(n.collection.id))}async commit(){if(this.state!=="pending")throw new kD;if(this.setState("persisting"),this.mutations.length===0)return this.setState("completed"),this.isPersisted.resolve(this),this;try{await this.mutationFn({transaction:this}),this.setState("completed"),this.touchCollection(),this.isPersisted.resolve(this)}catch(t){const n=t instanceof Error?t:new Error(String(t));throw this.error={message:n.message,error:n},this.rollback(),n}return this}compareCreatedAt(t){const n=this.createdAt.getTime()-t.createdAt.getTime();return n!==0?n:this.sequenceNumber-t.sequenceNumber}}class jP{constructor(t,n){this.insert=(r,i)=>{this.lifecycle.validateCollectionUsable("insert");const o=this.state,l=Sf();if(!l&&!this.config.onInsert)throw new wD;const c=Array.isArray(r)?r:[r],f=[],d=new Set;if(c.forEach(m=>{const p=this.validateData(m,"insert"),g=this.config.getKey(p);if(this.state.has(g)||d.has(g))throw new hD(g);d.add(g);const y=this.generateGlobalKey(g,m),S={mutationId:crypto.randomUUID(),original:{},modified:p,changes:Object.fromEntries(Object.keys(m).map(w=>[w,p[w]])),globalKey:y,key:g,metadata:i?.metadata,syncMetadata:this.config.sync.getSyncMetadata?.()||{},optimistic:i?.optimistic??!0,type:"insert",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(S)}),l)return l.applyMutations(f),o.transactions.set(l.id,l),o.scheduleTransactionCleanup(l),o.recomputeOptimisticState(!0),l;{const m=Gc({mutationFn:async p=>await this.config.onInsert({transaction:p.transaction,collection:this.collection})});return m.applyMutations(f),m.commit().catch(()=>{}),o.transactions.set(m.id,m),o.scheduleTransactionCleanup(m),o.recomputeOptimisticState(!0),m}},this.delete=(r,i)=>{const o=this.state;this.lifecycle.validateCollectionUsable("delete");const l=Sf();if(!l&&!this.config.onDelete)throw new xD;if(Array.isArray(r)&&r.length===0)throw new bD;const c=Array.isArray(r)?r:[r],f=[];for(const m of c){if(!this.state.has(m))throw new SD(m);const p=this.generateGlobalKey(m,this.state.get(m)),g={mutationId:crypto.randomUUID(),original:this.state.get(m),modified:this.state.get(m),changes:this.state.get(m),globalKey:p,key:m,metadata:i?.metadata,syncMetadata:o.syncedMetadata.get(m)||{},optimistic:i?.optimistic??!0,type:"delete",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(g)}if(l)return l.applyMutations(f),o.transactions.set(l.id,l),o.scheduleTransactionCleanup(l),o.recomputeOptimisticState(!0),l;const d=Gc({autoCommit:!0,mutationFn:async m=>this.config.onDelete({transaction:m.transaction,collection:this.collection})});return d.applyMutations(f),d.commit().catch(()=>{}),o.transactions.set(d.id,d),o.scheduleTransactionCleanup(d),o.recomputeOptimisticState(!0),d},this.id=n,this.config=t}setDeps(t){this.lifecycle=t.lifecycle,this.state=t.state,this.collection=t.collection}ensureStandardSchema(t){if(t&&"~standard"in t)return t;throw new oD}validateData(t,n,r){if(!this.config.schema)return t;const i=this.ensureStandardSchema(this.config.schema);if(n==="update"&&r){const l=this.state.get(r);if(l&&t&&typeof t=="object"&&typeof l=="object"){const c=Object.assign({},l,t),f=i["~standard"].validate(c);if(f instanceof Promise)throw new ax;if("issues"in f&&f.issues){const g=f.issues.map(y=>({message:y.message,path:y.path?.map(S=>String(S))}));throw new ox(n,g)}const d=f.value,m=Object.keys(t);return Object.fromEntries(m.map(g=>[g,d[g]]))}}const o=i["~standard"].validate(t);if(o instanceof Promise)throw new ax;if("issues"in o&&o.issues){const l=o.issues.map(c=>({message:c.message,path:c.path?.map(f=>String(f))}));throw new ox(n,l)}return o.value}generateGlobalKey(t,n){if(typeof t!="string"&&typeof t!="number")throw typeof t>"u"?new fD(n):new dD(t,n);return`KEY::${this.id}/${t}`}update(t,n,r){if(typeof t>"u")throw new mD;const i=this.state;this.lifecycle.validateCollectionUsable("update");const o=Sf();if(!o&&!this.config.onUpdate)throw new _D;const l=Array.isArray(t),c=l?t:[t];if(l&&c.length===0)throw new gD;const f=typeof n=="function"?n:r,d=typeof n=="function"?{}:n,m=c.map(S=>{const w=this.state.get(S);if(!w)throw new yD(S);return w});let p;l?p=AP(m,f):p=[kP(m[0],f)];const g=c.map((S,w)=>{const C=p[w];if(!C||Object.keys(C).length===0)return null;const x=m[w],E=this.validateData(C,"update",S),k=Object.assign({},x,E),I=this.config.getKey(x),P=this.config.getKey(k);if(I!==P)throw new vD(I,P);const R=this.generateGlobalKey(P,k);return{mutationId:crypto.randomUUID(),original:x,modified:k,changes:Object.fromEntries(Object.keys(C).map(M=>[M,k[M]])),globalKey:R,key:S,metadata:d.metadata,syncMetadata:i.syncedMetadata.get(S)||{},optimistic:d.optimistic??!0,type:"update",createdAt:new Date,updatedAt:new Date,collection:this.collection}}).filter(Boolean);if(g.length===0){const S=Gc({mutationFn:async()=>{}});return S.commit().catch(()=>{}),i.scheduleTransactionCleanup(S),S}if(o)return o.applyMutations(g),i.transactions.set(o.id,o),i.scheduleTransactionCleanup(o),i.recomputeOptimisticState(!0),o;const y=Gc({mutationFn:async S=>this.config.onUpdate({transaction:S.transaction,collection:this.collection})});return y.applyMutations(g),y.commit().catch(()=>{}),i.transactions.set(y.id,y),i.scheduleTransactionCleanup(y),i.recomputeOptimisticState(!0),y}}class FP extends TE{constructor(){super()}setDeps(t){this.collection=t.collection}emit(t,n){this.emitInner(t,n)}emitStatusChange(t,n){this.emit("status:change",{type:"status:change",collection:this.collection,previousStatus:n,status:t});const r=`status:${t}`;this.emit(r,{type:r,collection:this.collection,previousStatus:n,status:t})}emitSubscribersChange(t,n){this.emit("subscribers:change",{type:"subscribers:change",collection:this.collection,previousSubscriberCount:n,subscriberCount:t})}cleanup(){this.clearListeners()}}function kd(e){const t=new d0(e);return e.utils?t.utils=e.utils:t.utils={},t}class d0{constructor(t){if(this.utils={},this.insert=(n,r)=>this._mutations.insert(n,r),this.delete=(n,r)=>this._mutations.delete(n,r),!t)throw new iD;if(!t.sync)throw new sD;t.id?this.id=t.id:this.id=crypto.randomUUID(),this.config={...t,autoIndex:t.autoIndex??"eager"},this._changes=new oP,this._events=new FP,this._indexes=new gP,this._lifecycle=new cP(t,this.id),this._mutations=new jP(t,this.id),this._state=new rP(t),this._sync=new fP(t,this.id),this.comparisonOpts=$P(t),this._changes.setDeps({collection:this,lifecycle:this._lifecycle,sync:this._sync,events:this._events}),this._events.setDeps({collection:this}),this._indexes.setDeps({state:this._state,lifecycle:this._lifecycle}),this._lifecycle.setDeps({changes:this._changes,events:this._events,indexes:this._indexes,state:this._state,sync:this._sync}),this._mutations.setDeps({collection:this,lifecycle:this._lifecycle,state:this._state}),this._state.setDeps({collection:this,lifecycle:this._lifecycle,changes:this._changes,indexes:this._indexes,events:this._events}),this._sync.setDeps({collection:this,state:this._state,lifecycle:this._lifecycle,events:this._events}),t.startSync===!0&&this._sync.startSync()}get status(){return this._lifecycle.status}get subscriberCount(){return this._changes.activeSubscribersCount}onFirstReady(t){return this._lifecycle.onFirstReady(t)}isReady(){return this._lifecycle.status==="ready"}get isLoadingSubset(){return this._sync.isLoadingSubset}startSyncImmediate(){this._sync.startSync()}preload(){return this._sync.preload()}get(t){return this._state.get(t)}has(t){return this._state.has(t)}get size(){return this._state.size}*keys(){yield*this._state.keys()}*values(){yield*this._state.values()}*entries(){yield*this._state.entries()}*[Symbol.iterator](){yield*this._state[Symbol.iterator]()}forEach(t){return this._state.forEach(t)}map(t){return this._state.map(t)}getKeyFromItem(t){return this.config.getKey(t)}createIndex(t,n={}){return this._indexes.createIndex(t,n)}get indexes(){return this._indexes.indexes}validateData(t,n,r){return this._mutations.validateData(t,n,r)}get compareOptions(){return{...this.comparisonOpts}}update(t,n,r){return this._mutations.update(t,n,r)}get state(){const t=new Map;for(const[n,r]of this.entries())t.set(n,r);return t}stateWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.state):this.preload().then(()=>this.state)}get toArray(){return Array.from(this.values())}toArrayWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.toArray):this.preload().then(()=>this.toArray)}currentStateAsChanges(t={}){return eP(this,t)}subscribeChanges(t,n={}){return this._changes.subscribeChanges(t,n)}on(t,n){return this._events.on(t,n)}once(t,n){return this._events.once(t,n)}off(t,n){this._events.off(t,n)}waitFor(t,n){return this._events.waitFor(t,n)}async cleanup(){return this._lifecycle.cleanup(),Promise.resolve()}}function $P(e){if(e.defaultStringCollation){const t=e.defaultStringCollation;return{stringSort:t.stringSort??"locale",locale:t.stringSort==="locale"?t.locale:void 0,localeOptions:t.stringSort==="locale"?t.localeOptions:void 0}}else return{stringSort:"locale"}}function ta(e,t,n){try{e.stringify(t)}catch(r){throw new ez(n,r instanceof Error?r.message:String(r))}}function Lm(){return crypto.randomUUID()}function BP(e){return typeof e=="number"?`n:${e}`:`s:${e}`}function UP(e){return e.startsWith("n:")?Number(e.slice(2)):e.startsWith("s:")?e.slice(2):e}function qP(){const e=new Map;return{getItem(t){return e.get(t)??null},setItem(t,n){e.set(t,n)},removeItem(t){e.delete(t)}}}function HP(){return{addEventListener:()=>{},removeEventListener:()=>{}}}function VP(e){if(!e.storageKey)throw new tz;const t=e.storage||(typeof window<"u"?window.localStorage:null)||qP(),n=e.storageEventApi||(typeof window<"u"?window:null)||HP(),r=e.parser||JSON,i=new Map,o=KP(e.storageKey,t,n,r,e.getKey,i),l=R=>{try{const M={};R.forEach((j,N)=>{M[BP(N)]=j});const L=r.stringify(M);t.setItem(e.storageKey,L)}catch(M){throw console.error(`[LocalStorageCollection] Error saving data to storage key "${e.storageKey}":`,M),M}},c=()=>{t.removeItem(e.storageKey)},f=()=>{const R=t.getItem(e.storageKey);return R?new Blob([R]).size:0},d=async R=>{R.transaction.mutations.forEach(L=>{ta(r,L.modified,"insert")});let M={};return e.onInsert&&(M=await e.onInsert(R)??{}),R.transaction.mutations.forEach(L=>{const j={versionKey:Lm(),data:L.modified};i.set(L.key,j)}),l(i),o.confirmOperationsSync(R.transaction.mutations),M},m=async R=>{R.transaction.mutations.forEach(L=>{ta(r,L.modified,"update")});let M={};return e.onUpdate&&(M=await e.onUpdate(R)??{}),R.transaction.mutations.forEach(L=>{const j={versionKey:Lm(),data:L.modified};i.set(L.key,j)}),l(i),o.confirmOperationsSync(R.transaction.mutations),M},p=async R=>{let M={};return e.onDelete&&(M=await e.onDelete(R)??{}),R.transaction.mutations.forEach(L=>{i.delete(L.key)}),l(i),o.confirmOperationsSync(R.transaction.mutations),M},{storageKey:g,storage:y,storageEventApi:S,onInsert:w,onUpdate:C,onDelete:x,id:E,...k}=e,I=E??`local-collection:${e.storageKey}`;return{...k,id:I,sync:o,onInsert:d,onUpdate:m,onDelete:p,utils:{clearStorage:c,getStorageSize:f,acceptMutations:R=>{const M=R.mutations.filter(L=>o.collection&&L.collection===o.collection?!0:L.collection.id===I);if(M.length!==0){for(const L of M)switch(L.type){case"insert":case"update":ta(r,L.modified,L.type);break;case"delete":ta(r,L.original,L.type);break}for(const L of M)switch(L.type){case"insert":case"update":{const j={versionKey:Lm(),data:L.modified};i.set(L.key,j);break}case"delete":{i.delete(L.key);break}}l(i),o.confirmOperationsSync(M)}}}}}function Ix(e,t,n){try{const r=t.getItem(e);if(!r)return new Map;const i=n.parse(r),o=new Map;if(typeof i=="object"&&i!==null&&!Array.isArray(i))Object.entries(i).forEach(([l,c])=>{if(c&&typeof c=="object"&&"versionKey"in c&&"data"in c){const f=c,d=UP(l);o.set(d,f)}else throw new nz(e,l)});else throw new rz(e);return o}catch(r){return console.warn(`[LocalStorageCollection] Error loading data from storage key "${e}":`,r),new Map}}function KP(e,t,n,r,i,o){let l=null,c=null;const f=(g,y)=>{const S=[];return g.forEach((w,C)=>{const x=y.get(C);x?w.versionKey!==x.versionKey&&S.push({type:"update",key:C,value:x.data}):S.push({type:"delete",key:C,value:w.data})}),y.forEach((w,C)=>{g.has(C)||S.push({type:"insert",key:C,value:w.data})}),S},d=()=>{if(!l)return;const{begin:g,write:y,commit:S}=l,w=Ix(e,t,r),C=f(o,w);C.length>0&&(g(),C.forEach(({type:x,value:E})=>{E&&(ta(r,E,x),y({type:x,value:E}))}),S(),o.clear(),w.forEach((x,E)=>{o.set(E,x)}))};return{...{sync:g=>{const{begin:y,write:S,commit:w,markReady:C}=g;l=g,c=g.collection;const x=Ix(e,t,r);x.size>0&&(y(),x.forEach(k=>{ta(r,k.data,"load"),S({type:"insert",value:k.data})}),w()),o.clear(),x.forEach((k,I)=>{o.set(I,k)}),C();const E=k=>{k.key!==e||k.storageArea!==t||d()};n.addEventListener("storage",E)},getSyncMetadata:()=>({storageKey:e,storageType:t===(typeof window<"u"?window.localStorage:null)?"localStorage":"custom"}),manualTrigger:d,collection:c},confirmOperationsSync:g=>{if(!l)return;const{begin:y,write:S,commit:w}=l;y(),g.forEach(C=>{S({type:C.type,value:C.type==="delete"?C.original:C.modified})}),w()}}}class Qt{constructor(t={}){this.query={},this.query={...t}}_createRefForSource(t,n){let r;try{r=Object.keys(t)}catch{const c=t===null?"null":"undefined";throw new Vc(n,c)}if(Array.isArray(t))throw new Vc(n,"array");if(r.length!==1)throw r.length===0?new Vc(n,"empty object"):r.every(c=>!isNaN(Number(c)))?new Vc(n,"string"):new OD(n);const i=r[0],o=t[i];let l;if(o instanceof d0)l=new ha(o,i);else if(o instanceof Qt){const c=o._getQuery();if(!c.from)throw new MD(n);l=new _r(c,i)}else throw new ID(i);return[i,l]}from(t){const[,n]=this._createRefForSource(t,"from clause");return new Qt({...this.query,from:n})}join(t,n,r="left"){const[i,o]=this._createRefForSource(t,"join clause"),c=[...this._getCurrentAliases(),i],f=Uo(c),d=n(f);let m,p;if(d.type==="func"&&d.name==="eq"&&d.args.length===2)m=d.args[0],p=d.args[1];else throw new ND;const g={from:o,type:r,left:m,right:p},y=this.query.join||[];return new Qt({...this.query,join:[...y,g]})}leftJoin(t,n){return this.join(t,n,"left")}rightJoin(t,n){return this.join(t,n,"right")}innerJoin(t,n){return this.join(t,n,"inner")}fullJoin(t,n){return this.join(t,n,"full")}where(t){const n=this._getCurrentAliases(),r=Uo(n),i=t(r),o=this.query.where||[];return new Qt({...this.query,where:[...o,i]})}having(t){const n=this._getCurrentAliases(),r=Uo(n),i=t(r),o=this.query.having||[];return new Qt({...this.query,having:[...o,i]})}select(t){const n=this._getCurrentAliases(),r=Uo(n),i=t(r),o=ME(i);return new Qt({...this.query,select:o,fnSelect:void 0})}orderBy(t,n="asc"){const r=this._getCurrentAliases(),i=Uo(r),o=t(i),l=typeof n=="string"?{direction:n,nulls:"first"}:{direction:n.direction??"asc",nulls:n.nulls??"first",stringSort:n.stringSort,locale:n.stringSort==="locale"?n.locale:void 0,localeOptions:n.stringSort==="locale"?n.localeOptions:void 0},c=m=>({expression:rn(m),compareOptions:l}),f=Array.isArray(o)?o.map(m=>c(m)):[c(o)],d=this.query.orderBy||[];return new Qt({...this.query,orderBy:[...d,...f]})}groupBy(t){const n=this._getCurrentAliases(),r=Uo(n),i=t(r),o=Array.isArray(i)?i.map(c=>rn(c)):[rn(i)],l=this.query.groupBy||[];return new Qt({...this.query,groupBy:[...l,...o]})}limit(t){return new Qt({...this.query,limit:t})}offset(t){return new Qt({...this.query,offset:t})}distinct(){return new Qt({...this.query,distinct:!0})}findOne(){return new Qt({...this.query,singleResult:!0})}_getCurrentAliases(){const t=[];if(this.query.from&&t.push(this.query.from.alias),this.query.join)for(const n of this.query.join)t.push(n.from.alias);return t}get fn(){const t=this;return{select(n){return new Qt({...t.query,select:void 0,fnSelect:n})},where(n){return new Qt({...t.query,fnWhere:[...t.query.fnWhere||[],n]})},having(n){return new Qt({...t.query,fnHaving:[...t.query.fnHaving||[],n]})}}}_getQuery(){if(!this.query.from)throw new DD;return this.query}}function GP(e){return e===void 0?rn(null):e instanceof SE||e instanceof Er||e instanceof An||e instanceof jn?e:rn(e)}function QP(e){return e!==null&&typeof e=="object"&&!Xy(e)&&!e.__refProxy}function ME(e){if(!QP(e))return GP(e);const t={};for(const[n,r]of Object.entries(e)){if(typeof n=="string"&&n.startsWith("__SPREAD_SENTINEL__")){t[n]=r;continue}t[n]=ME(r)}return t}function ZP(e){const t=e(new Qt);return IE(t)}function IE(e){return e._getQuery()}function YP(e){const t=JP(e);let n=e,r,i=0;const o=10;for(;i<o&&!Ir(n,r);)r=n,n=Ug(n),i++;return{optimizedQuery:NE(n),sourceWhereClauses:t}}function JP(e){const t=new Map;if(!e.where||e.where.length===0)return t;const r=Hg(e.where).map(o=>DE(o)),i=zE(r);for(const[o,l]of i.singleSource)XP(e,o)&&t.set(o,l);return t}function XP(e,t){if(e.from.alias===t)return e.from.type==="collectionRef";if(e.join){for(const n of e.join)if(n.from.alias===t)return n.from.type==="collectionRef"}return!1}function Ug(e){const t={...e,from:e.from.type==="queryRef"?new _r(Ug(e.from.query),e.from.alias):e.from,join:e.join?.map(n=>({...n,from:n.from.type==="queryRef"?new _r(Ug(n.from.query),n.from.alias):n.from}))};return WP(t)}function WP(e){if(!e.where||e.where.length===0)return e;if(!e.join||e.join.length===0){if(e.where.length>1){const c=Hg(e.where),f=Jf(c);return{...e,where:[f]}}return e}const t=e.where.filter(c=>!sx(c)),r=Hg(t).map(c=>DE(c)),i=zE(r),o=t4(e,i),l=e.where.filter(c=>sx(c));return l.length>0&&(o.where=[...o.where||[],...l]),o}function NE(e){return{...e,from:qg(e.from),join:e.join?.map(t=>({...t,from:qg(t.from)}))}}function qg(e){if(e.type==="collectionRef")return e;const t=NE(e.query);if(e4(t)){const n=qg(t.from);return n.type==="collectionRef"?new ha(n.collection,e.alias):new _r(n.query,e.alias)}return new _r(t,e.alias)}function e4(e){return(!e.where||e.where.length===0)&&!e.select&&(!e.groupBy||e.groupBy.length===0)&&(!e.having||e.having.length===0)&&(!e.orderBy||e.orderBy.length===0)&&(!e.join||e.join.length===0)&&e.limit===void 0&&e.offset===void 0&&!e.fnSelect&&(!e.fnWhere||e.fnWhere.length===0)&&(!e.fnHaving||e.fnHaving.length===0)}function Hg(e){const t=[];for(const n of e){const r=Wy(n);t.push(...h0(r))}return t}function h0(e){if(e.type==="func"&&e.name==="and"){const t=[];for(const n of e.args)t.push(...h0(n));return t}else return[e]}function DE(e){const t=new Set;let n=!1;function r(i){switch(i.type){case"ref":if(i.path&&i.path.length>0){const o=i.path[0];o&&(t.add(o),i.path.length===1&&(n=!0))}break;case"func":i.args&&i.args.forEach(r);break;case"val":break;case"agg":i.args&&i.args.forEach(r);break}}return r(e),{expression:e,touchedSources:t,hasNamespaceOnlyRef:n}}function zE(e){const t=new Map,n=[];for(const o of e)if(o.touchedSources.size===1&&!o.hasNamespaceOnlyRef){const l=Array.from(o.touchedSources)[0];t.has(l)||t.set(l,[]),t.get(l).push(o.expression)}else(o.touchedSources.size>1||o.hasNamespaceOnlyRef)&&n.push(o.expression);const r=new Map;for(const[o,l]of t)r.set(o,Jf(l));const i=n.length>0?Jf(n):void 0;return{singleSource:r,multiSource:i}}function t4(e,t){const n=new Set,r=Nx(e.from,t.singleSource,n),i=e.join?e.join.map(d=>({...d,from:Nx(d.from,t.singleSource,n)})):void 0,o=[];t.multiSource&&o.push(t.multiSource);const l=e.join&&e.join.some(d=>d.type==="left"||d.type==="right"||d.type==="full");for(const[d,m]of t.singleSource)n.has(d)?l&&o.push(nD(m)):o.push(m);const c=o.length>1?[Jf(o.flatMap(d=>h0(Wy(d))))]:o;return{select:e.select,groupBy:e.groupBy?[...e.groupBy]:void 0,having:e.having?[...e.having]:void 0,orderBy:e.orderBy?[...e.orderBy]:void 0,limit:e.limit,offset:e.offset,distinct:e.distinct,fnSelect:e.fnSelect,fnWhere:e.fnWhere?[...e.fnWhere]:void 0,fnHaving:e.fnHaving?[...e.fnHaving]:void 0,from:r,join:i,where:c.length>0?c:[]}}function na(e){return{from:e.from.type==="collectionRef"?new ha(e.from.collection,e.from.alias):new _r(na(e.from.query),e.from.alias),select:e.select,join:e.join?e.join.map(t=>({type:t.type,left:t.left,right:t.right,from:t.from.type==="collectionRef"?new ha(t.from.collection,t.from.alias):new _r(na(t.from.query),t.from.alias)})):void 0,where:e.where?[...e.where]:void 0,groupBy:e.groupBy?[...e.groupBy]:void 0,having:e.having?[...e.having]:void 0,orderBy:e.orderBy?[...e.orderBy]:void 0,limit:e.limit,offset:e.offset,fnSelect:e.fnSelect,fnWhere:e.fnWhere?[...e.fnWhere]:void 0,fnHaving:e.fnHaving?[...e.fnHaving]:void 0}}function Nx(e,t,n){const r=t.get(e.alias);if(!r)return e.type==="collectionRef"?new ha(e.collection,e.alias):new _r(na(e.query),e.alias);if(e.type==="collectionRef"){const l={from:new ha(e.collection,e.alias),where:[r]};return n.add(e.alias),new _r(l,e.alias)}if(!a4(e.query,r,e.alias))return new _r(na(e.query),e.alias);if(u4(e.query,r,e.alias))return new _r(na(e.query),e.alias);const i=e.query.where||[],o={...na(e.query),where:[...i,r]};return n.add(e.alias),new _r(o,e.alias)}function n4(e,t,n){return e.select?LE(e.select)||l4(e.select,t,n):!1}function r4(e){return e.groupBy&&e.groupBy.length>0}function i4(e){return e.having&&e.having.length>0}function s4(e){return e.orderBy&&e.orderBy.length>0&&(e.limit!==void 0||e.offset!==void 0)}function o4(e){return e.fnSelect||e.fnWhere&&e.fnWhere.length>0||e.fnHaving&&e.fnHaving.length>0}function a4(e,t,n){return!(n4(e,t,n)||r4(e)||i4(e)||s4(e)||o4(e))}function LE(e){for(const t of Object.values(e))if(typeof t=="object"){const n=t;if(n.type==="agg"||!("type"in n)&&LE(n))return!0}return!1}function p0(e){const t=[];if(e==null||typeof e!="object")return t;switch(e.type){case"ref":t.push(e);break;case"func":case"agg":for(const n of e.args??[])t.push(...p0(n));break}return t}function l4(e,t,n){const r=new Set;for(const[o,l]of Object.entries(e))o.startsWith("__SPREAD_SENTINEL__")||l instanceof An||r.add(o);const i=p0(t);for(const o of i){const l=o.path;if(!Array.isArray(l)||l.length<2)continue;const c=l[0],f=l[1];if(c===n&&r.has(f))return!0}return!1}function u4(e,t,n){const r=p0(t);if(r.every(o=>o.path[0]!==n))return!1;if(e.fnSelect)return!0;const i=e.select;if(!i)return!1;for(const o of r){const l=o.path;if(l.length<2||l[0]!==n)continue;const c=i[l[1]];if(!c)continue;if(!(c instanceof An)||c.path.length<2)return!0;const[f,d]=c.path;if(f!==n&&f!==e.from.alias||d!==l[1])return!0}return!1}function Jf(e){if(e.length===0)throw new sz;return e.length===1?e[0]:new Er("and",e)}function c4(e,t,n,r,i,o,l,c,f,d,m,p,g,y,S,w,C,x){let E=e;for(const k of t)E=f4(E,k,n,r,i,o,l,c,f,d,m,p,g,y,S,w,C,x);return E}function f4(e,t,n,r,i,o,l,c,f,d,m,p,g,y,S,w,C,x){const E=t.from.type==="collectionRef",{alias:k,input:I,collectionId:P}=h4(t.from,o,f,d,m,p,g,y,l,c,w,C,x);n[k]=I,E&&(C[k]=P);const R=f[r],M=f[P];if(!R)throw new cx(r);if(!M)throw new cx(P);const{activeSource:L,lazySource:j}=m4(t.type,R,M),N=Object.keys(n),{mainExpr:U,joinedExpr:Z}=d4(t.left,t.right,N,k),ee=Fn(U),re=Fn(Z);let K=e.pipe(Rn(([te,de])=>[ee(de),[te,de]])),$=I.pipe(Rn(([te,de])=>{const se={[k]:de};return[re(se),[te,se]]}));if(!["inner","left","right","full"].includes(t.type))throw new qD(t.type);if(L){const te=L==="main"?t.from:S.from,de=te.type==="queryRef"&&(te.query.limit||te.query.offset),se=U.type==="func"||Z.type==="func";if(!de&&!se){const z=L==="main"?k:i;p.add(z);const D=L==="main"?K:$,T=ou(S,L==="main"?Z:U,j),ae=T.collection,ce=T.path[0];ce&&Rd(ce,T.path,ae);const he=D.pipe(gL(ye=>{const Re=x[z]||z,we=d[Re];if(!we)throw new oz(Re,z,j.id,Object.keys(d));if(we.hasLoadedInitialState())return;const qe=ye.getInner().map(([[ot]])=>ot),Je=new An(T.path);we.requestSnapshot({where:UL(Je,qe),optimizedOnly:!0})||we.requestSnapshot()}));L==="main"?K=he:$=he}}return K.pipe(xL($,t.type),p4(t.type))}function d4(e,t,n,r){const i=n.filter(c=>c!==r),o=Vg(e),l=Vg(t);if(o&&i.includes(o)&&l===r)return{mainExpr:e,joinedExpr:t};if(o===r&&l&&i.includes(l))return{mainExpr:t,joinedExpr:e};throw!o||!l?new VD:o===l?new HD(o):i.includes(o)?l!==r?new GD(r):new QD:new KD(o)}function Vg(e){switch(e.type){case"ref":return e.path[0]||null;case"func":{const t=new Set;for(const n of e.args){const r=Vg(n);r&&t.add(r)}return t.size===1?Array.from(t)[0]:null}default:return null}}function h4(e,t,n,r,i,o,l,c,f,d,m,p,g){switch(e.type){case"collectionRef":{const y=t[e.alias];if(!y)throw new wE(e.alias,e.collection.id,Object.keys(t));return p[e.alias]=e.collection.id,{alias:e.alias,input:y,collectionId:e.collection.id}}case"queryRef":{const y=d.get(e.query)||e.query,S=m(y,t,n,r,i,o,l,c,f,d);Object.assign(p,S.aliasToCollectionId),Object.assign(g,S.aliasRemapping);const w=Object.keys(S.aliasToCollectionId).find(E=>S.aliasToCollectionId[E]===S.collectionId);w&&w!==e.alias&&(g[e.alias]=w);const x=S.pipeline.pipe(Rn(E=>{const[k,[I,P]]=E;return[k,I]}));return{alias:e.alias,input:x,collectionId:S.collectionId}}default:throw new ZD(e.type)}}function p4(e){return function(t){return t.pipe(ts(n=>{const[r,[i,o]]=n,l=i?.[1],c=o?.[1];return e==="inner"?!!(l&&c):e==="left"?!!l:e==="right"?!!c:!0}),Rn(n=>{const[r,[i,o]]=n,l=i?.[0],c=i?.[1],f=o?.[0],d=o?.[1],m={};return c&&Object.assign(m,c),d&&Object.assign(m,d),[`[${l},${f}]`,m]}))}}function m4(e,t,n){switch(e){case"left":return{activeSource:"main",lazySource:n};case"right":return{activeSource:"joined",lazySource:t};case"inner":return t.size<n.size?{activeSource:"main",lazySource:n}:{activeSource:"joined",lazySource:t};default:return{activeSource:void 0,lazySource:void 0}}}function Kg(e){return e instanceof jn?e.value:e}function g4(e,t,n){const r=e.source(t);if(r&&typeof r=="object"){let i=n;const o=e.targetPath;if(o.length===0)for(const[l,c]of Object.entries(r))n[l]=Kg(c);else for(let l=0;l<o.length;l++){const c=o[l];if(l===o.length-1){const f=i[c]??={};if(typeof f=="object")for(const[d,m]of Object.entries(r))f[d]=Kg(m)}else{const f=i[c];(f==null||typeof f!="object")&&(i[c]={}),i=i[c]}}}}function y4(e,t,n){const r=e.alias.split(".");if(r.length===1)n[e.alias]=e.compiled(t);else{let i=n;for(let o=0;o<r.length-1;o++){const l=r[o],c=i[l];(c==null||typeof c!="object")&&(i[l]={}),i=i[l]}i[r[r.length-1]]=Kg(e.compiled(t))}}function v4([e,t],n){const r={};for(const i of n)i.kind==="merge"?g4(i,t,r):y4(i,t,r);return[e,{...t,__select_results:r}]}function b4(e,t,n){const r=[];return PE([],t,r),e.pipe(Rn(i=>v4(i,r)))}function S4(e){return e.type==="agg"}function w4(e){return e&&typeof e=="object"&&!Xy(e)}function PE(e,t,n){for(const[r,i]of Object.entries(t)){if(r.startsWith("__SPREAD_SENTINEL__")){const l=r.slice(19),c=l.lastIndexOf("__"),f=c>=0?l.slice(0,c):l,d=i&&typeof i=="object"&&"type"in i&&i.type==="ref";if(f.includes(".")||d){const m=[...e],p=d?i:new An(f.split(".")),g=Fn(p);n.push({kind:"merge",targetPath:m,source:g})}else{const m=f,p=[...e];n.push({kind:"merge",targetPath:p,source:g=>g[m]})}continue}const o=i;if(w4(o)){PE([...e,r],o,n);continue}if(S4(o))n.push({kind:"field",alias:[...e,r].join("."),compiled:()=>null});else{if(o===void 0||!Xy(o)){n.push({kind:"field",alias:[...e,r].join("."),compiled:()=>o});continue}if(o instanceof jn){const l=o.value;n.push({kind:"field",alias:[...e,r].join("."),compiled:()=>l})}else n.push({kind:"field",alias:[...e,r].join("."),compiled:Fn(o)})}}}function m0(e,t,n,r,i,o,l,c,f=new WeakMap,d=new WeakMap){const m=f.get(e);if(m)return m;Gg(e);const{optimizedQuery:p,sourceWhereClauses:g}=YP(e);d.set(p,e),Zg(p,e,d);const y={...t},S={},w={},C={},{alias:x,input:E,collectionId:k}=x4(p.from,y,n,r,i,o,l,c,f,d,S,w);C[x]=E;let I=E.pipe(Rn(([L,j])=>[L,{[x]:j}]));if(p.join&&p.join.length>0&&(I=c4(I,p.join,C,k,x,y,f,d,n,r,i,o,l,c,e,m0,S,w)),p.where&&p.where.length>0)for(const L of p.where){const j=Wy(L),N=Fn(j);I=I.pipe(ts(([U,Z])=>aa(N(Z))))}if(p.fnWhere&&p.fnWhere.length>0)for(const L of p.fnWhere)I=I.pipe(ts(([j,N])=>aa(L(N))));if(p.distinct&&!p.fnSelect&&!p.select)throw new zD;if(p.fnSelect?I=I.pipe(Rn(([L,j])=>{const N=p.fnSelect(j);return[L,{...j,__select_results:N}]})):p.select?I=b4(I,p.select):I=I.pipe(Rn(([L,j])=>{const N=!p.join&&!p.groupBy?j[x]:j;return[L,{...j,__select_results:N}]})),p.groupBy&&p.groupBy.length>0?I=Rx(I,p.groupBy,p.having,p.select,p.fnHaving):p.select&&Object.values(p.select).some(j=>j.type==="agg")&&(I=Rx(I,[],p.having,p.select,p.fnHaving)),p.having&&(!p.groupBy||p.groupBy.length===0)&&!(p.select?Object.values(p.select).some(j=>j.type==="agg"):!1))throw new LD;if(p.fnHaving&&p.fnHaving.length>0&&(!p.groupBy||p.groupBy.length===0))for(const L of p.fnHaving)I=I.pipe(ts(([j,N])=>L(N)));if(p.distinct&&(I=I.pipe(EL(([L,j])=>j.__select_results))),p.orderBy&&p.orderBy.length>0){const N=WL(e,I,p.orderBy,p.select||{},n[k],l,c,p.limit,p.offset).pipe(Rn(([Z,[ee,re]])=>{const K=ee.__select_results,$=Qg(K);return[Z,[$,re]]})),U={collectionId:k,pipeline:N,sourceWhereClauses:g,aliasToCollectionId:S,aliasRemapping:w};return f.set(e,U),U}else if(p.limit!==void 0||p.offset!==void 0)throw new PD;const R=I.pipe(Rn(([L,j])=>{const N=j.__select_results,U=Qg(N);return[L,[U,void 0]]})),M={collectionId:k,pipeline:R,sourceWhereClauses:g,aliasToCollectionId:S,aliasRemapping:w};return f.set(e,M),M}function _4(e){const t=new Set;if(e.from.type==="collectionRef"&&t.add(e.from.alias),e.join)for(const n of e.join)n.from.type==="collectionRef"&&t.add(n.from.alias);return t}function Gg(e,t=new Set){const n=_4(e);for(const i of n)if(t.has(i))throw new jD(i,Array.from(t));const r=new Set([...t,...n]);if(e.from.type==="queryRef"&&Gg(e.from.query,r),e.join)for(const i of e.join)i.from.type==="queryRef"&&Gg(i.from.query,r)}function x4(e,t,n,r,i,o,l,c,f,d,m,p){switch(e.type){case"collectionRef":{const g=t[e.alias];if(!g)throw new wE(e.alias,e.collection.id,Object.keys(t));return m[e.alias]=e.collection.id,{alias:e.alias,input:g,collectionId:e.collection.id}}case"queryRef":{const g=d.get(e.query)||e.query,y=m0(g,t,n,r,i,o,l,c,f,d);Object.assign(m,y.aliasToCollectionId),Object.assign(p,y.aliasRemapping);const S=Object.keys(y.aliasToCollectionId).find(x=>y.aliasToCollectionId[x]===y.collectionId);S&&S!==e.alias&&(p[e.alias]=S);const C=y.pipeline.pipe(Rn(x=>{const[E,[k,I]]=x,P=Qg(k);return[E,P]}));return{alias:e.alias,input:C,collectionId:y.collectionId}}default:throw new FD(e.type)}}function C4(e){return e instanceof jn||e&&typeof e=="object"&&"type"in e&&e.type==="val"}function Qg(e){return C4(e)?e.value:e}function Zg(e,t,n){if(e.from.type==="queryRef"&&t.from.type==="queryRef"&&(n.set(e.from.query,t.from.query),Zg(e.from.query,t.from.query,n)),e.join&&t.join)for(let r=0;r<e.join.length&&r<t.join.length;r++){const i=e.join[r],o=t.join[r];i.from.type==="queryRef"&&o.from.type==="queryRef"&&(n.set(i.from.query,o.from.query),Zg(i.from.query,o.from.query,n))}}function g0(e,t){const n=e.type;if(n==="val")return new jn(e.value);if(n==="ref"){const r=e.path;if(Array.isArray(r)){if(r[0]===t&&r.length>1)return new An(r.slice(1));if(r.length===1&&r[0]!==void 0)return new An([r[0]])}return new An(Array.isArray(r)?r:[String(r)])}else{const r=[];for(const i of e.args){const o=g0(i,t);r.push(o)}return new Er(e.name,r)}}function Dx(e,t){return e.map(r=>{const i=g0(r.expression,t);return{...r,expression:i}})}const zx=Symbol.for("@tanstack/db.collection-config-builder");class E4{constructor(t,n,r,i){this.alias=t,this.collectionId=n,this.collection=r,this.collectionConfigBuilder=i,this.biggest=void 0,this.subscriptionLoadingPromises=new Map,this.sentToD2Keys=new Set}subscribe(){const t=this.getWhereClauseForAlias();if(t){const n=g0(t,this.alias);return this.subscribeToChanges(n)}return this.subscribeToChanges()}subscribeToChanges(t){let n;const r=this.getOrderByInfo();if(r)n=this.subscribeToOrderedChanges(t,r);else{const c=!this.collectionConfigBuilder.isLazyAlias(this.alias);n=this.subscribeToMatchingChanges(t,c)}const i=()=>{if(!this.subscriptionLoadingPromises.has(n)){let c;const f=new Promise(d=>{c=d});this.subscriptionLoadingPromises.set(n,{resolve:c}),this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(f)}};n.status==="loadingSubset"&&i();const o=n.on("status:change",c=>{if(c.status==="loadingSubset")i();else{const f=this.subscriptionLoadingPromises.get(n);f&&(this.subscriptionLoadingPromises.delete(n),f.resolve())}}),l=()=>{const c=this.subscriptionLoadingPromises.get(n);c&&(this.subscriptionLoadingPromises.delete(n),c.resolve()),o(),n.unsubscribe()};return this.collectionConfigBuilder.currentSyncState.unsubscribeCallbacks.add(l),n}sendChangesToPipeline(t,n){const r=Array.isArray(t)?t:[...t],i=[];for(const f of r){if(f.type==="insert"){if(this.sentToD2Keys.has(f.key))continue;this.sentToD2Keys.add(f.key)}else f.type==="delete"&&this.sentToD2Keys.delete(f.key);i.push(f)}const o=this.collectionConfigBuilder.currentSyncState.inputs[this.alias],c=R4(o,i,this.collection.config.getKey)>0?n:void 0;this.collectionConfigBuilder.scheduleGraphRun(c,{alias:this.alias})}subscribeToMatchingChanges(t,n=!1){const r=o=>{this.sendChangesToPipeline(o)};return this.collection.subscribeChanges(r,{...n&&{includeInitialState:n},whereExpression:t})}subscribeToOrderedChanges(t,n){const{orderBy:r,offset:i,limit:o,index:l}=n,c=p=>{const g=k4(p);this.sendChangesToPipelineWithTracking(g,f)},f=this.collection.subscribeChanges(c,{whereExpression:t}),d=this.collection.on("truncate",()=>{this.biggest=void 0,this.sentToD2Keys.clear()});f.on("unsubscribed",()=>{d()});const m=Dx(r,this.alias);return l?(f.setOrderByIndex(l),f.requestLimitedSnapshot({limit:i+o,orderBy:m})):f.requestSnapshot({orderBy:m,limit:i+o}),f}loadMoreIfNeeded(t){const n=this.getOrderByInfo();if(!n)return!0;const{dataNeeded:r}=n;if(!r)return!0;const i=r();return i>0&&this.loadNextItems(i,t),!0}sendChangesToPipelineWithTracking(t,n){const r=this.getOrderByInfo();if(!r){this.sendChangesToPipeline(t);return}const i=this.trackSentValues(t,r.comparator),o=n;o[zx]??=this.loadMoreIfNeeded.bind(this,n),this.sendChangesToPipeline(i,o[zx])}loadNextItems(t,n){const r=this.getOrderByInfo();if(!r)return;const{orderBy:i,valueExtractorForRawRow:o,offset:l}=r,c=this.biggest,f=c?o(c):void 0,d=f!==void 0?Array.isArray(f)?f:[f]:void 0,m=Dx(i,this.alias);n.requestLimitedSnapshot({orderBy:m,limit:t,minValues:d,offset:l})}getWhereClauseForAlias(){const t=this.collectionConfigBuilder.sourceWhereClausesCache;if(t)return t.get(this.alias)}getOrderByInfo(){const t=this.collectionConfigBuilder.optimizableOrderByCollections[this.collectionId];if(t&&t.alias===this.alias)return t}*trackSentValues(t,n){for(const r of t)r.type!=="delete"&&(this.biggest?n(this.biggest,r.value)<0&&(this.biggest=r.value):this.biggest=r.value),yield r}}function R4(e,t,n){const r=[];for(const i of t){const o=n(i.value);i.type==="insert"?r.push([[o,i.value],1]):i.type==="update"?(r.push([[o,i.previousValue],-1]),r.push([[o,i.value],1])):r.push([[o,i.value],-1])}return r.length!==0&&e.sendData(new Zt(r)),r.length}function*k4(e){for(const t of e)t.type==="update"?(yield{type:"delete",key:t.key,value:t.previousValue},yield{type:"insert",key:t.key,value:t.value}):yield t}const jE=new WeakMap;function A4(e){return e.utils?.[u0]?.getBuilder?.()}function T4(e,t){jE.set(e,t)}function O4(e){return jE.get(e)}let M4=0;class I4{constructor(t){this.config=t,this.compiledAliasToCollectionId={},this.resultKeys=new WeakMap,this.orderByIndices=new WeakMap,this.isGraphRunning=!1,this.runCount=0,this.isInErrorState=!1,this.aliasDependencies={},this.builderDependencies=new Set,this.pendingGraphRuns=new Map,this.subscriptions={},this.lazySourcesCallbacks={},this.lazySources=new Set,this.optimizableOrderByCollections={},this.id=t.id||`live-query-${++M4}`,this.query=N4(t),this.collections=z4(this.query);const n=L4(this.query);this.collectionByAlias={};for(const[r,i]of n.entries()){const o=this.collections[r];if(o)for(const l of i)this.collectionByAlias[l]=o}this.query.orderBy&&this.query.orderBy.length>0&&(this.compare=D4(this.orderByIndices)),this.compareOptions=this.config.defaultStringCollation??FE(this.query).compareOptions,this.compileBasePipeline()}hasJoins(t){return!!(t.join&&t.join.length>0||t.from.type==="queryRef"&&this.hasJoins(t.from.query))}getConfig(){return{id:this.id,getKey:this.config.getKey||(t=>this.resultKeys.get(t)),sync:this.getSyncConfig(),compare:this.compare,defaultStringCollation:this.compareOptions,gcTime:this.config.gcTime||5e3,schema:this.config.schema,onInsert:this.config.onInsert,onUpdate:this.config.onUpdate,onDelete:this.config.onDelete,startSync:this.config.startSync,singleResult:this.query.singleResult,utils:{getRunCount:this.getRunCount.bind(this),setWindow:this.setWindow.bind(this),getWindow:this.getWindow.bind(this),[u0]:{getBuilder:()=>this,hasCustomGetKey:!!this.config.getKey,hasJoins:this.hasJoins(this.query)}}}}setWindow(t){if(!this.windowFn)throw new lz;return this.currentWindow=t,this.windowFn(t),this.maybeRunGraphFn?.(),this.liveQueryCollection?.isLoadingSubset?new Promise(n=>{const r=this.liveQueryCollection.on("loadingSubset:change",i=>{i.isLoadingSubset||(r(),n())})}):!0}getWindow(){if(!(!this.windowFn||!this.currentWindow))return{offset:this.currentWindow.offset??0,limit:this.currentWindow.limit??0}}getCollectionIdForAlias(t){const n=this.compiledAliasToCollectionId[t];if(n)return n;const r=this.collectionByAlias[t];if(r)return r.id;throw new Error(`Unknown source alias "${t}"`)}isLazyAlias(t){return this.lazySources.has(t)}maybeRunGraph(t){if(!this.isGraphRunning){if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("maybeRunGraph called without active sync session. This should not happen.");this.isGraphRunning=!0;try{const{begin:n,commit:r}=this.currentSyncConfig,i=this.currentSyncState;if(this.isInErrorState)return;if(i.subscribedToAllCollections){for(;i.graph.pendingWork();)i.graph.run(),t?.();i.messagesCount===0&&(n(),r(),this.updateLiveQueryStatus(this.currentSyncConfig))}}finally{this.isGraphRunning=!1}}}scheduleGraphRun(t,n){const r=n?.contextId??Sf()?.id,i=n?.jobId??this,o=(()=>{if(n?.dependencies)return n.dependencies;const f=new Set(this.builderDependencies);if(n?.alias){const d=this.aliasDependencies[n.alias];if(d)for(const m of d)f.add(m)}return f.delete(this),Array.from(f)})();if(r)for(const f of o)typeof f.scheduleGraphRun=="function"&&f.scheduleGraphRun(void 0,{contextId:r});if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("scheduleGraphRun called without active sync session. This should not happen.");let l=r?this.pendingGraphRuns.get(r):void 0;l||(l={loadCallbacks:new Set},r&&this.pendingGraphRuns.set(r,l)),t&&l.loadCallbacks.add(t);const c=r?void 0:l;Zf.schedule({contextId:r,jobId:i,dependencies:o,run:()=>this.executeGraphRun(r,c)})}clearPendingGraphRun(t){this.pendingGraphRuns.delete(t)}hasPendingGraphRun(t){return this.pendingGraphRuns.has(t)}executeGraphRun(t,n){const r=n??(t?this.pendingGraphRuns.get(t):void 0);if(t&&this.pendingGraphRuns.delete(t),!r||!this.currentSyncConfig||!this.currentSyncState)return;this.incrementRunCount();const i=()=>{let o=!0,l;if(r.loadCallbacks.forEach(c=>{try{o=c()&&o}catch(f){o=!1,l??=f}}),l)throw l;return o};this.maybeRunGraph(i)}getSyncConfig(){return{rowUpdateMode:"full",sync:this.syncFn.bind(this)}}incrementRunCount(){this.runCount++}getRunCount(){return this.runCount}syncFn(t){this.liveQueryCollection=t.collection,this.currentSyncConfig=t;const n={messagesCount:0,subscribedToAllCollections:!1,unsubscribeCallbacks:new Set},r=this.extendPipelineWithChangeProcessing(t,n);this.currentSyncState=r,this.unsubscribeFromSchedulerClears=Zf.onClear(o=>{this.clearPendingGraphRun(o)});const i=this.subscribeToAllCollections(t,r);return this.maybeRunGraphFn=()=>this.scheduleGraphRun(i),this.scheduleGraphRun(i),()=>{n.unsubscribeCallbacks.forEach(o=>o()),this.currentSyncConfig=void 0,this.currentSyncState=void 0,this.pendingGraphRuns.clear(),this.graphCache=void 0,this.inputsCache=void 0,this.pipelineCache=void 0,this.sourceWhereClausesCache=void 0,this.lazySources.clear(),this.optimizableOrderByCollections={},this.lazySourcesCallbacks={},Object.keys(this.subscriptions).forEach(o=>delete this.subscriptions[o]),this.compiledAliasToCollectionId={},this.unsubscribeFromSchedulerClears?.(),this.unsubscribeFromSchedulerClears=void 0}}compileBasePipeline(){this.graphCache=new iL,this.inputsCache=Object.fromEntries(Object.keys(this.collectionByAlias).map(r=>[r,this.graphCache.newInput()]));const t=m0(this.query,this.inputsCache,this.collections,this.subscriptions,this.lazySourcesCallbacks,this.lazySources,this.optimizableOrderByCollections,r=>{this.windowFn=r});this.pipelineCache=t.pipeline,this.sourceWhereClausesCache=t.sourceWhereClauses,this.compiledAliasToCollectionId=t.aliasToCollectionId;const n=Object.keys(this.compiledAliasToCollectionId).filter(r=>!Object.hasOwn(this.inputsCache,r));if(n.length>0)throw new az(n)}maybeCompileBasePipeline(){return(!this.graphCache||!this.inputsCache||!this.pipelineCache)&&this.compileBasePipeline(),{graph:this.graphCache,inputs:this.inputsCache,pipeline:this.pipelineCache}}extendPipelineWithChangeProcessing(t,n){const{begin:r,commit:i}=t,{graph:o,inputs:l,pipeline:c}=this.maybeCompileBasePipeline();return c.pipe(bL(f=>{const d=f.getInner();n.messagesCount+=d.length,r(),d.reduce(P4,new Map).forEach(this.applyChanges.bind(this,t)),i()})),o.finalize(),n.graph=o,n.inputs=l,n.pipeline=c,n}applyChanges(t,n,r){const{write:i,collection:o}=t,{deletes:l,inserts:c,value:f,orderByIndex:d}=n;if(this.resultKeys.set(f,r),d!==void 0&&this.orderByIndices.set(f,d),c&&l===0)i({value:f,type:"insert"});else if(c>l||c===l&&o.has(o.getKeyFromItem(f)))i({value:f,type:"update"});else if(l>0)i({value:f,type:"delete"});else throw new Error(`Could not apply changes: ${JSON.stringify(n)}. This should never happen.`)}handleSourceStatusChange(t,n,r){const{status:i}=r;if(i==="error"){this.transitionToError(`Source collection '${n}' entered error state`);return}if(i==="cleaned-up"){this.transitionToError(`Source collection '${n}' was manually cleaned up while live query '${this.id}' depends on it. Live queries prevent automatic GC, so this was likely a manual cleanup() call.`);return}this.updateLiveQueryStatus(t)}updateLiveQueryStatus(t){const{markReady:n}=t;this.isInErrorState||this.allCollectionsReady()&&n()}transitionToError(t){this.isInErrorState=!0,console.error(`[Live Query Error] ${t}`),this.liveQueryCollection?._lifecycle.setStatus("error")}allCollectionsReady(){return Object.values(this.collections).every(t=>t.isReady())}subscribeToAllCollections(t,n){const r=Object.entries(this.compiledAliasToCollectionId);if(r.length===0)throw new Error(`Compiler returned no alias metadata for query '${this.id}'. This should not happen; please report.`);const i=r.map(([l,c])=>{const f=this.collectionByAlias[l]??this.collections[c],d=O4(f);d&&d!==this?(this.aliasDependencies[l]=[d],this.builderDependencies.add(d)):this.aliasDependencies[l]=[];const m=new E4(l,c,f,this),p=f.on("status:change",S=>{this.handleSourceStatusChange(t,c,S)});n.unsubscribeCallbacks.add(p);const g=m.subscribe();return this.subscriptions[l]=g,m.loadMoreIfNeeded.bind(m,g)}),o=()=>(i.map(l=>l()),!0);return n.subscribedToAllCollections=!0,this.updateLiveQueryStatus(t),o}}function N4(e){return typeof e.query=="function"?ZP(e.query):IE(e.query)}function D4(e){return(t,n)=>{const r=e.get(t),i=e.get(n);return r&&i?r<i?-1:r>i?1:0:0}}function z4(e){const t={};function n(i){i.type==="collectionRef"?t[i.collection.id]=i.collection:i.type==="queryRef"&&r(i.query)}function r(i){if(i.from&&n(i.from),i.join&&Array.isArray(i.join))for(const o of i.join)o.from&&n(o.from)}return r(e),t}function FE(e){const t=e.from;if(t.type==="collectionRef")return t.collection;if(t.type==="queryRef")return FE(t.query);throw new Error(`Failed to extract collection. Invalid FROM clause: ${JSON.stringify(e)}`)}function L4(e){const t=new Map;function n(i){if(i)if(i.type==="collectionRef"){const{id:o}=i.collection,l=t.get(o);l?l.add(i.alias):t.set(o,new Set([i.alias]))}else i.type==="queryRef"&&r(i.query)}function r(i){if(i&&(n(i.from),i.join))for(const o of i.join)n(o.from)}return r(e),t}function P4(e,[[t,n],r]){const[i,o]=n,l=e.get(t)||{deletes:0,inserts:0,value:i,orderByIndex:o};return r<0?l.deletes+=Math.abs(r):r>0&&(l.inserts+=r,l.value=i,l.orderByIndex=o),e.set(t,l),e}function Lx(e){return new I4(e).getConfig()}function Pm(e){if(typeof e=="function"){const n=Lx({query:e});return Px(n)}else{const t=e,n=Lx(t);return t.utils&&(n.utils={...n.utils,...t.utils}),Px(n)}}function Px(e){const t=kd(e),n=A4(e);return n&&T4(t,n),t}const jm=1;function $E(e,t=[]){const n=e&&typeof e=="object"&&typeof e.subscribeChanges=="function"&&typeof e.startSyncImmediate=="function"&&typeof e.id=="string",r=H.useRef(null),i=H.useRef(null),o=H.useRef(null),l=H.useRef(0),c=H.useRef(null),f=!r.current||n&&o.current!==e||!n&&(i.current===null||i.current.length!==t.length||i.current.some((S,w)=>S!==t[w]));if(f)if(n)e.startSyncImmediate(),r.current=e,o.current=e;else if(typeof e=="function"){const S=new Qt,w=e(S);if(w==null)r.current=null;else if(w instanceof d0)w.startSyncImmediate(),r.current=w;else if(w instanceof Qt)r.current=Pm({query:e,startSync:!0,gcTime:jm});else if(w&&typeof w=="object")r.current=Pm({startSync:!0,gcTime:jm,...w});else throw new Error(`useLiveQuery callback must return a QueryBuilder, LiveQueryCollectionConfig, Collection, undefined, or null. Got: ${typeof w}`);i.current=[...t]}else r.current=Pm({startSync:!0,gcTime:jm,...e}),i.current=[...t];f&&(l.current=0,c.current=null);const d=H.useRef(null);(!d.current||f)&&(d.current=S=>{if(!r.current)return()=>{};const w=r.current.subscribeChanges(()=>{l.current+=1,S()});return r.current.status==="ready"&&(l.current+=1,S()),()=>{w.unsubscribe()}});const m=H.useRef(null);(!m.current||f)&&(m.current=()=>{const S=l.current,w=r.current;return(!c.current||c.current.version!==S||c.current.collection!==w)&&(c.current={collection:w,version:S}),c.current});const p=H.useSyncExternalStore(d.current,m.current),g=H.useRef(null),y=H.useRef(null);if(!g.current||g.current.version!==p.version||g.current.collection!==p.collection){if(!p.collection)y.current={state:void 0,data:void 0,collection:void 0,status:"disabled",isLoading:!1,isReady:!0,isIdle:!1,isError:!1,isCleanedUp:!1,isEnabled:!1};else{const S=Array.from(p.collection.entries()),C=p.collection.config.singleResult;let x=null,E=null;y.current={get state(){return x||(x=new Map(S)),x},get data(){return E||(E=S.map(([,k])=>k)),C?E[0]:E},collection:p.collection,status:p.collection.status,isLoading:p.collection.status==="loading",isReady:p.collection.status==="ready",isIdle:p.collection.status==="idle",isError:p.collection.status==="error",isCleanedUp:p.collection.status==="cleaned-up",isEnabled:!0}}g.current=p}return y.current}class cs extends Bn{constructor(t){super(t),this.name="QueryCollectionError"}}class j4 extends cs{constructor(){super("[QueryCollection] queryKey must be provided."),this.name="QueryKeyRequiredError"}}class F4 extends cs{constructor(){super("[QueryCollection] queryFn must be provided."),this.name="QueryFnRequiredError"}}class $4 extends cs{constructor(){super("[QueryCollection] queryClient must be provided."),this.name="QueryClientRequiredError"}}class B4 extends cs{constructor(){super("[QueryCollection] getKey must be provided."),this.name="GetKeyRequiredError"}}class U4 extends cs{constructor(){super("Collection must be in 'ready' state for manual sync operations. Sync not initialized yet."),this.name="SyncNotInitializedError"}}class q4 extends cs{constructor(t){super(`Duplicate key '${t}' found within batch operations`),this.name="DuplicateKeyInBatchError"}}class H4 extends cs{constructor(t){super(`Update operation: Item with key '${t}' does not exist`),this.name="UpdateOperationItemNotFoundError"}}class V4 extends cs{constructor(t){super(`Delete operation: Item with key '${t}' does not exist`),this.name="DeleteOperationItemNotFoundError"}}const Ds=new WeakMap;function K4(e,t){const n=Array.isArray(e)?e:[e],r=[];for(const i of n)if(i.type==="delete"){const o=Array.isArray(i.key)?i.key:[i.key];for(const l of o)r.push({type:"delete",key:l})}else{const o=Array.isArray(i.data)?i.data:[i.data];for(const l of o){let c;if(i.type==="update")c=t.getKey(l);else{const f=t.collection.validateData(l,i.type==="upsert"?"insert":i.type);c=t.getKey(f)}r.push({type:i.type,key:c,data:l})}}return r}function G4(e,t){const n=new Set;for(const r of e){if(n.has(r.key))throw new q4(r.key);if(n.add(r.key),r.type==="update"){if(!t.collection._state.syncedData.has(r.key))throw new H4(r.key)}else if(r.type==="delete"&&!t.collection._state.syncedData.has(r.key))throw new V4(r.key)}}function wl(e,t){const n=K4(e,t);G4(n,t),t.begin();for(const i of n)switch(i.type){case"insert":{const o=t.collection.validateData(i.data,"insert");t.write({type:"insert",value:o});break}case"update":{const l={...t.collection._state.syncedData.get(i.key),...i.data},c=t.collection.validateData(l,"update",i.key);t.write({type:"update",value:c});break}case"delete":{const o=t.collection._state.syncedData.get(i.key);t.write({type:"delete",value:o});break}case"upsert":{const o=t.collection._state.syncedData.has(i.key),l=t.collection.validateData(i.data,o?"update":"insert",i.key);o?t.write({type:"update",value:l}):t.write({type:"insert",value:l});break}}t.commit();const r=Array.from(t.collection._state.syncedData.values());t.updateCacheData?t.updateCacheData(r):t.queryClient.setQueryData(t.queryKey,r)}function Q4(e){function t(){const n=e();if(!n)throw new U4;return n}return{writeInsert(n){const r={type:"insert",data:n},i=t(),o=Ds.get(i);if(o?.isActive){o.operations.push(r);return}wl(r,i)},writeUpdate(n){const r={type:"update",data:n},i=t(),o=Ds.get(i);if(o?.isActive){o.operations.push(r);return}wl(r,i)},writeDelete(n){const r={type:"delete",key:n},i=t(),o=Ds.get(i);if(o?.isActive){o.operations.push(r);return}wl(r,i)},writeUpsert(n){const r={type:"upsert",data:n},i=t(),o=Ds.get(i);if(o?.isActive){o.operations.push(r);return}wl(r,i)},writeBatch(n){const r=t();if(Ds.get(r)?.isActive)throw new Error("Cannot nest writeBatch calls. Complete the current batch before starting a new one.");const o={operations:[],isActive:!0};Ds.set(r,o);try{const l=n();if(l&&typeof l=="object"&&"then"in l&&typeof l.then=="function")throw new Error("writeBatch does not support async callbacks. The callback must be synchronous.");o.operations.length>0&&wl(o.operations,r)}finally{o.isActive=!1,Ds.delete(r)}}}}function Z4(e){if(!e)return;const t={};return e.where&&(t.where=Yg(e.where)),e.orderBy?.length&&(t.orderBy=e.orderBy.map(n=>{const r={expression:Yg(n.expression),direction:n.compareOptions.direction,nulls:n.compareOptions.nulls,stringSort:n.compareOptions.stringSort};return n.compareOptions.stringSort==="locale"?{...r,locale:n.compareOptions.locale,localeOptions:n.compareOptions.localeOptions}:r})),e.limit!==void 0&&(t.limit=e.limit),e.offset!==void 0&&(t.offset=e.offset),Object.keys(t).length===0?void 0:JSON.stringify(t)}function Yg(e){if(!e)return null;switch(e.type){case"val":return{type:"val",value:Jg(e.value)};case"ref":return{type:"ref",path:[...e.path]};case"func":return{type:"func",name:e.name,args:e.args.map(t=>Yg(t))};default:return null}}function Jg(e){if(e===void 0)return{__type:"undefined"};if(typeof e=="number"){if(Number.isNaN(e))return{__type:"nan"};if(e===Number.POSITIVE_INFINITY)return{__type:"infinity",sign:1};if(e===Number.NEGATIVE_INFINITY)return{__type:"infinity",sign:-1}}return e===null||typeof e=="string"||typeof e=="number"||typeof e=="boolean"?e:e instanceof Date?{__type:"date",value:e.toJSON()}:Array.isArray(e)?e.map(t=>Jg(t)):typeof e=="object"?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,Jg(n)])):e}class Y4{constructor(t,n,r){this.state=t,this.refetchFn=n,this.refetch=n,this.writeInsert=r.writeInsert,this.writeUpdate=r.writeUpdate,this.writeDelete=r.writeDelete,this.writeUpsert=r.writeUpsert,this.writeBatch=r.writeBatch}async clearError(){this.state.lastError=void 0,this.state.errorCount=0,this.state.lastErrorUpdatedAt=0,await this.refetchFn({throwOnError:!0})}get lastError(){return this.state.lastError}get isError(){return!!this.state.lastError}get errorCount(){return this.state.errorCount}get isFetching(){return Array.from(this.state.observers.values()).some(t=>t.getCurrentResult().isFetching)}get isRefetching(){return Array.from(this.state.observers.values()).some(t=>t.getCurrentResult().isRefetching)}get isLoading(){return Array.from(this.state.observers.values()).some(t=>t.getCurrentResult().isLoading)}get dataUpdatedAt(){return Math.max(0,...Array.from(this.state.observers.values()).map(t=>t.getCurrentResult().dataUpdatedAt))}get fetchStatus(){return Array.from(this.state.observers.values()).map(t=>t.getCurrentResult().fetchStatus)}}function BE(e){const{queryKey:t,queryFn:n,select:r,queryClient:i,enabled:o,refetchInterval:l,retry:c,retryDelay:f,staleTime:d,getKey:m,onInsert:p,onUpdate:g,onDelete:y,meta:S,...w}=e,C=w.syncMode??"eager";if(!t)throw new j4;if(!n)throw new F4;if(!i)throw new $4;if(!m)throw new B4;const x={lastError:void 0,errorCount:0,lastErrorUpdatedAt:0,observers:new Map},E=new Map,k=new Map,I=new Map,P=new Map,R=new Map,M=(se,z)=>{const D=I.get(se)||new Set;D.add(z),I.set(se,D);const V=k.get(z)||new Set;V.add(se),k.set(z,V)},L=(se,z)=>{const D=I.get(se)||new Set;D.delete(z),I.set(se,D);const V=k.get(z)||new Set;return V.delete(se),k.set(z,V),D.size===0},j=se=>{const{begin:z,write:D,commit:V,markReady:T,collection:ae}=se;let ce=!1;const he=ge=>{if(typeof t=="function")return t(ge);if(C==="on-demand"){const Fe=Z4(ge);return Fe!==void 0?[...t,Fe]:t}else return t},ye=(ge={},Fe=n)=>{const be=he(ge),me=Mr(be),De={...S,loadSubsetOptions:ge};if(x.observers.has(me)){R.set(me,(R.get(me)||0)+1);const _e=x.observers.get(me),ve=_e.getCurrentResult();return ve.isSuccess?!0:ve.isError?Promise.reject(ve.error):new Promise((Me,dt)=>{const We=_e.subscribe(Ze=>{Ze.isSuccess?(We(),Me()):Ze.isError&&(We(),dt(Ze.error))})})}const X={queryKey:be,queryFn:Fe,meta:De,structuralSharing:!0,notifyOnChangeProps:"all",...o!==void 0&&{enabled:o},...l!==void 0&&{refetchInterval:l},...c!==void 0&&{retry:c},...f!==void 0&&{retryDelay:f},...d!==void 0&&{staleTime:d}},ue=new V1(i,X);E.set(me,be),x.observers.set(me,ue),R.set(me,(R.get(me)||0)+1);const Se=new Promise((_e,ve)=>{const Me=ue.subscribe(dt=>{dt.isSuccess?(Me(),_e()):dt.isError&&(Me(),ve(dt.error))})});return(ce||ae.subscriberCount>0)&&qe(ue,me),Se},Re=ge=>{const Fe=Mr(ge);return me=>{if(me.isSuccess){x.lastError=void 0,x.errorCount=0;const De=me.data,X=r?r(De):De;if(!Array.isArray(X)||X.some(_e=>typeof _e!="object")){const _e=r?`@tanstack/query-db-collection: select() must return an array of objects. Got: ${typeof X} for queryKey ${JSON.stringify(ge)}`:`@tanstack/query-db-collection: queryFn must return an array of objects. Got: ${typeof X} for queryKey ${JSON.stringify(ge)}`;console.error(_e);return}const ue=new Map(ae._state.syncedData.entries()),Se=new Map;X.forEach(_e=>{const ve=m(_e);Se.set(ve,_e)}),z(),ue.forEach((_e,ve)=>{const Me=Se.get(ve);Me?Ir(_e,Me)||D({type:"update",value:Me}):L(ve,Fe)&&D({type:"delete",value:_e})}),Se.forEach((_e,ve)=>{M(ve,Fe),ue.has(ve)||D({type:"insert",value:_e})}),V(),T()}else me.isError&&(me.errorUpdatedAt!==x.lastErrorUpdatedAt&&(x.lastError=me.error,x.errorCount++,x.lastErrorUpdatedAt=me.errorUpdatedAt),console.error(`[QueryCollection] Error observing query ${String(ge)}:`,me.error),T())}},we=ge=>P.has(ge),qe=(ge,Fe)=>{if(!we(Fe)){const be=E.get(Fe),me=Re(be),De=ge.subscribe(me);P.set(Fe,De);const X=ge.getCurrentResult();(X.isSuccess||X.isError)&&me(X)}},Je=()=>{x.observers.forEach(qe)},Ue=()=>{P.forEach(ge=>{ge()}),P.clear()};ce=!0;const ot=ae.on("subscribers:change",({subscriberCount:ge})=>{ge>0?Je():ge===0&&Ue()});if(C==="eager"){const ge=ye({});ge instanceof Promise&&ge.catch(()=>{})}else T();Je(),x.observers.forEach((ge,Fe)=>{const be=E.get(Fe);Re(be)(ge.getCurrentResult())});const Qe=ge=>{P.get(ge)?.(),P.delete(ge);const Fe=k.get(ge)??new Set,be=[];Fe.forEach(me=>{const De=I.get(me);De&&(De.delete(ge),De.size===0&&(I.delete(me),ae.has(me)&&be.push(ae.get(me))))}),be.length>0&&(z(),be.forEach(me=>{D({type:"delete",value:me})}),V()),x.observers.delete(ge),k.delete(ge),E.delete(ge),R.delete(ge)},Xe=ge=>{const Fe=R.get(ge)||0,be=x.observers.get(ge);if(Fe<=0&&(P.get(ge)?.(),P.delete(ge)),be?.hasListeners()??!1){R.set(ge,0);return}Fe>0&&console.warn(`[cleanupQueryIfIdle] Invariant violation: refcount=${Fe} but no listeners. Cleaning up to prevent leak.`,{hashedQueryKey:ge}),Qe(ge)},ct=ge=>{Qe(ge)},je=i.getQueryCache().subscribe(ge=>{const Fe=ge.query.queryHash;ge.type==="removed"&&E.has(Fe)&&Xe(Fe)});return{loadSubset:C==="eager"?void 0:ye,unloadSubset:C==="eager"?void 0:ge=>{const Fe=he(ge),be=Mr(Fe),De=(R.get(be)||0)-1;De<=0?(R.set(be,0),Xe(be)):R.set(be,De)},cleanup:async()=>{ot(),Ue();const ge=[...E.values()],Fe=[...x.observers.keys()];for(const be of Fe)ct(be);je(),await Promise.all(ge.map(async be=>{await i.cancelQueries({queryKey:be,exact:!0}),i.removeQueries({queryKey:be,exact:!0})}))}}},N=async se=>{const D=[...E.values()].map(V=>x.observers.get(Mr(V)).refetch({throwOnError:se?.throwOnError}));await Promise.all(D)},U=se=>{const z=typeof t=="function"?t({}):t;r?i.setQueryData(z,D=>{if(!D||typeof D!="object")return D;if(Array.isArray(D))return se;const V=r(D);if(Array.isArray(V)){for(const T of Object.keys(D))if(D[T]===V)return{...D,[T]:se}}if(Array.isArray(D.data))return{...D,data:se};if(Array.isArray(D.items))return{...D,items:se};if(Array.isArray(D.results))return{...D,results:se};for(const T of Object.keys(D))if(Array.isArray(D[T]))return{...D,[T]:se};return D}):i.setQueryData(z,se)};let Z=null;const ee=se=>{const{begin:z,write:D,commit:V,collection:T}=se,ae=typeof t=="function"?t({}):t;return Z={collection:T,queryClient:i,queryKey:ae,getKey:m,begin:z,write:D,commit:V,updateCacheData:U},j(se)},re=Q4(()=>Z),K=p?async se=>{const z=await p(se)??{};return z.refetch!==!1&&await N(),z}:void 0,$=g?async se=>{const z=await g(se)??{};return z.refetch!==!1&&await N(),z}:void 0,te=y?async se=>{const z=await y(se)??{};return z.refetch!==!1&&await N(),z}:void 0,de=new Y4(x,N,re);return{...w,getKey:m,syncMode:C,sync:{sync:ee},onInsert:K,onUpdate:$,onDelete:te,utils:de}}const UE=new G1({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}});async function qE(e){const t=await fetch(`/data/${e}`);if(!t.ok)throw new Error(`Failed to list entries: ${t.statusText}`);const n=await t.json(),r=[];for(const i of n){const o=await fetch(`/data/${e}/${encodeURIComponent(i.id)}`);if(o.ok){const l=await o.json();r.push(l)}}return r}async function Xf(e,t){const n=await fetch(`/data/${e}/${encodeURIComponent(t.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to save item: ${n.statusText}`)}async function HE(e,t){const n=await fetch(`/data/${e}/${encodeURIComponent(t)}`,{method:"DELETE"});if(!n.ok&&n.status!==404)throw new Error(`Failed to delete item: ${n.statusText}`)}const Qc="connections",Il=kd(BE({queryKey:["connections"],queryFn:async()=>qE(Qc),getKey:e=>e.id,queryClient:UE,onInsert:async({transaction:e})=>{await Promise.all(e.mutations.map(async t=>{const n=t.modified;await Xf(Qc,n)}))},onUpdate:async({transaction:e})=>{await Promise.all(e.mutations.map(async t=>{const n=t.modified;await Xf(Qc,n)}))},onDelete:async({transaction:e})=>{await Promise.all(e.mutations.map(async t=>{const n=t.original;await HE(Qc,n.id)}))}})),Zc="queries";kd(BE({queryKey:["saved-queries"],queryFn:async()=>qE(Zc),getKey:e=>e.id,queryClient:UE,onInsert:async({transaction:e})=>{await Promise.all(e.mutations.map(async t=>{const n=t.modified;await Xf(Zc,n)}))},onUpdate:async({transaction:e})=>{await Promise.all(e.mutations.map(async t=>{const n=t.modified;await Xf(Zc,n)}))},onDelete:async({transaction:e})=>{await Promise.all(e.mutations.map(async t=>{const n=t.original;await HE(Zc,n.id)}))}}));kd(VP({id:"preferences",storageKey:"granite-preferences",getKey:e=>e.id}));const J4={driver:"postgres",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT datname FROM pg_database WHERE datistemplate = false ORDER BY datname"},listTablesQuery(){return"SELECT tablename FROM pg_tables WHERE schemaname = 'public' ORDER BY tablename"},listColumnsQuery(e){return`
      SELECT 
        column_name as name,
        data_type as type,
        is_nullable = 'YES' as nullable,
        COALESCE(
          (SELECT true FROM information_schema.table_constraints tc
           JOIN information_schema.key_column_usage kcu ON tc.constraint_name = kcu.constraint_name
           WHERE tc.table_name = c.table_name AND kcu.column_name = c.column_name AND tc.constraint_type = 'PRIMARY KEY'),
          false
        ) as primary_key
      FROM information_schema.columns c
      WHERE table_name = '${e}' AND table_schema = 'public'
      ORDER BY ordinal_position
    `},selectAllQuery(e,t=100){return`SELECT * FROM ${e} LIMIT ${t}`},createDatabaseQuery(e){return`CREATE DATABASE "${e}"`},listConstraintsQuery(e){return`
      SELECT 
        tc.constraint_name,
        tc.constraint_type,
        kcu.column_name
      FROM information_schema.table_constraints tc
      LEFT JOIN information_schema.key_column_usage kcu 
        ON tc.constraint_name = kcu.constraint_name 
        AND tc.table_schema = kcu.table_schema
      WHERE tc.table_name = '${e}' 
        AND tc.table_schema = 'public'
      ORDER BY tc.constraint_name, kcu.ordinal_position
    `},listForeignKeysQuery(e){return`
      SELECT 
        tc.constraint_name,
        kcu.column_name,
        ccu.table_name AS foreign_table,
        ccu.column_name AS foreign_column
      FROM information_schema.table_constraints tc
      JOIN information_schema.key_column_usage kcu 
        ON tc.constraint_name = kcu.constraint_name
      JOIN information_schema.constraint_column_usage ccu 
        ON tc.constraint_name = ccu.constraint_name
      WHERE tc.table_name = '${e}' 
        AND tc.constraint_type = 'FOREIGN KEY'
        AND tc.table_schema = 'public'
      ORDER BY tc.constraint_name
    `},listIndexesQuery(e){return`
      SELECT 
        indexname AS index_name,
        indexdef AS definition
      FROM pg_indexes 
      WHERE tablename = '${e}'
        AND schemaname = 'public'
      ORDER BY indexname
    `},modifyDsnForDatabase(e,t){const n=new URL(e);return n.pathname=`/${t}`,n.toString()},parseDatabaseNames(e){return e.map(t=>String(t.datname))},parseTableNames(e){return e.map(t=>String(t.tablename))},parseColumns(e){return e.map(t=>({name:String(t.name),type:String(t.type),nullable:!!t.nullable,primaryKey:!!t.primary_key}))}},X4={driver:"mysql",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SHOW DATABASES"},listTablesQuery(){return"SHOW TABLES"},listColumnsQuery(e){return`DESCRIBE ${e}`},selectAllQuery(e,t=100){return`SELECT * FROM ${e} LIMIT ${t}`},createDatabaseQuery(e){return`CREATE DATABASE \`${e}\``},listConstraintsQuery(e){return`
      SELECT 
        tc.CONSTRAINT_NAME AS constraint_name,
        tc.CONSTRAINT_TYPE AS constraint_type,
        kcu.COLUMN_NAME AS column_name
      FROM information_schema.TABLE_CONSTRAINTS tc
      LEFT JOIN information_schema.KEY_COLUMN_USAGE kcu 
        ON tc.CONSTRAINT_NAME = kcu.CONSTRAINT_NAME 
        AND tc.TABLE_SCHEMA = kcu.TABLE_SCHEMA
        AND tc.TABLE_NAME = kcu.TABLE_NAME
      WHERE tc.TABLE_NAME = '${e}'
        AND tc.TABLE_SCHEMA = DATABASE()
      ORDER BY tc.CONSTRAINT_NAME, kcu.ORDINAL_POSITION
    `},listForeignKeysQuery(e){return`
      SELECT 
        kcu.CONSTRAINT_NAME AS constraint_name,
        kcu.COLUMN_NAME AS column_name,
        kcu.REFERENCED_TABLE_NAME AS foreign_table,
        kcu.REFERENCED_COLUMN_NAME AS foreign_column
      FROM information_schema.KEY_COLUMN_USAGE kcu
      WHERE kcu.TABLE_NAME = '${e}'
        AND kcu.TABLE_SCHEMA = DATABASE()
        AND kcu.REFERENCED_TABLE_NAME IS NOT NULL
      ORDER BY kcu.CONSTRAINT_NAME
    `},listIndexesQuery(e){return`SHOW INDEX FROM ${e}`},modifyDsnForDatabase(e,t){const n=e.split("/");return n.length>1?(n[n.length-1]=t,n.join("/")):`${e}/${t}`},parseDatabaseNames(e){return e.map(t=>String(t.Database||Object.values(t)[0]))},parseTableNames(e,t){return e.map(n=>{const r=n[`Tables_in_${t}`]||Object.values(n)[0];return String(r)})},parseColumns(e){return e.map(t=>({name:String(t.Field),type:String(t.Type),nullable:t.Null==="YES",primaryKey:t.Key==="PRI"}))}},W4={driver:"sqlite",supportedTableViews(){return["records","columns","indexes"]},listDatabasesQuery(){return"SELECT 'main' as name"},listTablesQuery(){return"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%' ORDER BY name"},listColumnsQuery(e){return`PRAGMA table_info(${e})`},selectAllQuery(e,t=100){return`SELECT * FROM ${e} LIMIT ${t}`},createDatabaseQuery(e){return null},listIndexesQuery(e){return`PRAGMA index_list(${e})`},modifyDsnForDatabase(e,t){return e},parseDatabaseNames(e){return e.map(t=>String(t.name))},parseTableNames(e){return e.map(t=>String(t.name))},parseColumns(e){return e.map(t=>({name:String(t.name),type:String(t.type||"TEXT"),nullable:t.notnull===0,primaryKey:t.pk===1}))}},e3={driver:"sqlserver",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT name FROM sys.databases WHERE name NOT IN ('tempdb', 'model') ORDER BY name"},listTablesQuery(){return"SELECT TABLE_NAME as name FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' ORDER BY TABLE_NAME"},listColumnsQuery(e){return`
      SELECT 
        c.COLUMN_NAME as name,
        c.DATA_TYPE as type,
        CASE WHEN c.IS_NULLABLE = 'YES' THEN 1 ELSE 0 END as nullable,
        CASE WHEN pk.COLUMN_NAME IS NOT NULL THEN 1 ELSE 0 END as primary_key
      FROM INFORMATION_SCHEMA.COLUMNS c
      LEFT JOIN (
        SELECT ku.COLUMN_NAME
        FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc
        JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE ku ON tc.CONSTRAINT_NAME = ku.CONSTRAINT_NAME
        WHERE tc.TABLE_NAME = '${e}' AND tc.CONSTRAINT_TYPE = 'PRIMARY KEY'
      ) pk ON c.COLUMN_NAME = pk.COLUMN_NAME
      WHERE c.TABLE_NAME = '${e}'
      ORDER BY c.ORDINAL_POSITION
    `},selectAllQuery(e,t=100){return`SELECT TOP ${t} * FROM ${e}`},createDatabaseQuery(e){return`CREATE DATABASE [${e}]`},listConstraintsQuery(e){return`
      SELECT 
        tc.CONSTRAINT_NAME AS constraint_name,
        tc.CONSTRAINT_TYPE AS constraint_type,
        kcu.COLUMN_NAME AS column_name
      FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc
      LEFT JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE kcu 
        ON tc.CONSTRAINT_NAME = kcu.CONSTRAINT_NAME
      WHERE tc.TABLE_NAME = '${e}'
      ORDER BY tc.CONSTRAINT_NAME, kcu.ORDINAL_POSITION
    `},listForeignKeysQuery(e){return`
      SELECT 
        fk.name AS constraint_name,
        COL_NAME(fkc.parent_object_id, fkc.parent_column_id) AS column_name,
        OBJECT_NAME(fkc.referenced_object_id) AS foreign_table,
        COL_NAME(fkc.referenced_object_id, fkc.referenced_column_id) AS foreign_column
      FROM sys.foreign_keys fk
      JOIN sys.foreign_key_columns fkc ON fk.object_id = fkc.constraint_object_id
      WHERE OBJECT_NAME(fk.parent_object_id) = '${e}'
      ORDER BY fk.name
    `},listIndexesQuery(e){return`
      SELECT 
        i.name AS index_name,
        i.type_desc AS index_type,
        i.is_unique,
        i.is_primary_key,
        STRING_AGG(c.name, ', ') AS columns
      FROM sys.indexes i
      JOIN sys.index_columns ic ON i.object_id = ic.object_id AND i.index_id = ic.index_id
      JOIN sys.columns c ON ic.object_id = c.object_id AND ic.column_id = c.column_id
      WHERE OBJECT_NAME(i.object_id) = '${e}' AND i.name IS NOT NULL
      GROUP BY i.name, i.type_desc, i.is_unique, i.is_primary_key
      ORDER BY i.name
    `},modifyDsnForDatabase(e,t){const n=new URL(e);return n.searchParams.set("database",t),n.toString()},parseDatabaseNames(e){return e.map(t=>String(t.name))},parseTableNames(e){return e.map(t=>String(t.name))},parseColumns(e){return e.map(t=>({name:String(t.name),type:String(t.type),nullable:!!t.nullable,primaryKey:!!t.primary_key}))}},t3={driver:"oracle",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT SYS_CONTEXT('USERENV', 'CON_NAME') as name FROM DUAL"},listTablesQuery(){return`
      SELECT table_name as name 
      FROM user_tables 
      WHERE table_name NOT LIKE 'LOGMNR%' 
        AND table_name NOT LIKE 'AQ$%'
        AND table_name NOT LIKE 'MVIEW$%'
        AND table_name NOT LIKE 'LOGSTDBY$%'
        AND table_name NOT LIKE 'ROLLING$%'
        AND table_name NOT LIKE 'SCHEDULER_%'
        AND table_name NOT IN ('OL$', 'OL$HINTS', 'OL$NODES', 'REDO_DB', 'REDO_LOG', 'HELP', 
                                'REPL_SUPPORT_MATRIX', 'REPL_VALID_COMPAT', 'SQLPLUS_PRODUCT_PROFILE')
      ORDER BY table_name
    `},listColumnsQuery(e){return`
      SELECT 
        c.column_name as name,
        c.data_type as type,
        CASE WHEN c.nullable = 'Y' THEN 1 ELSE 0 END as nullable,
        CASE WHEN cc.column_name IS NOT NULL THEN 1 ELSE 0 END as primary_key
      FROM user_tab_columns c
      LEFT JOIN (
        SELECT cc.column_name
        FROM user_constraints con
        JOIN user_cons_columns cc ON con.constraint_name = cc.constraint_name
        WHERE con.table_name = UPPER('${e}') AND con.constraint_type = 'P'
      ) cc ON c.column_name = cc.column_name
      WHERE c.table_name = UPPER('${e}')
      ORDER BY c.column_id
    `},selectAllQuery(e,t=100){return`SELECT * FROM ${e} FETCH FIRST ${t} ROWS ONLY`},createDatabaseQuery(e){return null},listConstraintsQuery(e){return`
      SELECT 
        con.constraint_name,
        con.constraint_type,
        col.column_name
      FROM user_constraints con
      LEFT JOIN user_cons_columns col 
        ON con.constraint_name = col.constraint_name
      WHERE con.table_name = UPPER('${e}')
      ORDER BY con.constraint_name, col.position
    `},listForeignKeysQuery(e){return`
      SELECT 
        a.constraint_name,
        a.column_name,
        c_pk.table_name AS foreign_table,
        b.column_name AS foreign_column
      FROM user_cons_columns a
      JOIN user_constraints c ON a.constraint_name = c.constraint_name
      JOIN user_constraints c_pk ON c.r_constraint_name = c_pk.constraint_name
      JOIN user_cons_columns b ON c_pk.constraint_name = b.constraint_name AND a.position = b.position
      WHERE c.constraint_type = 'R'
        AND c.table_name = UPPER('${e}')
      ORDER BY a.constraint_name
    `},listIndexesQuery(e){return`
      SELECT 
        index_name,
        uniqueness,
        index_type
      FROM user_indexes
      WHERE table_name = UPPER('${e}')
      ORDER BY index_name
    `},modifyDsnForDatabase(e,t){return e},parseDatabaseNames(e){return e.map(t=>{const n=t.name??t.NAME;return String(n??Object.values(t)[0])})},parseTableNames(e){return e.map(t=>{const n=t.name??t.NAME??t.TABLE_NAME;return String(n??Object.values(t)[0])})},parseColumns(e){return e.map(t=>({name:String(t.name??t.NAME),type:String(t.type??t.TYPE??t.DATA_TYPE),nullable:!!(t.nullable??t.NULLABLE),primaryKey:!!(t.primary_key??t.PRIMARY_KEY)}))}},n3={postgres:J4,mysql:X4,sqlite:W4,sqlserver:e3,oracle:t3};function fs(e){const t=n3[e];if(!t)throw new Error(`Unsupported driver: ${e}`);return t}async function ns(e,t,n){const r=await fetch("/sql/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({driver:e,dsn:t,query:n,params:[]})});if(!r.ok){const i=await r.json().catch(()=>({}));throw new Error(i.message||`HTTP error: ${r.status}`)}return r.json()}async function r3(e,t){const n=fs(e),r=n.listDatabasesQuery(),i=await ns(e,t,r);return n.parseDatabaseNames(i.rows||[])}async function VE(e,t,n){const r=fs(e),i=n?r.modifyDsnForDatabase(t,n):t,o=r.listTablesQuery(),l=await ns(e,i,o);return r.parseTableNames(l.rows||[],n)}async function i3(e,t,n){const r=fs(e),i=r.listColumnsQuery(n),o=await ns(e,t,i);return r.parseColumns(o.rows||[])}function Xg(e,t,n=100){return fs(t).selectAllQuery(e,n)}async function s3(e,t,n){const i=fs(e).createDatabaseQuery(n);if(!i)throw new Error(`Creating databases is not supported for ${e}`);await ns(e,t,i)}function o3(e){return fs(e).createDatabaseQuery("test")!==null}function a3(e){return fs(e).supportedTableViews()}function l3(e,t,n){const r=fs(e);switch(n){case"records":return r.selectAllQuery(t);case"columns":return r.listColumnsQuery(t);case"constraints":return r.listConstraintsQuery?.(t)??null;case"foreignKeys":return r.listForeignKeysQuery?.(t)??null;case"indexes":return r.listIndexesQuery?.(t)??null;default:return null}}const jx={postgres:{label:"PostgreSQL",placeholder:"postgres://user:password@localhost:5432/database"},mysql:{label:"MySQL",placeholder:"user:password@tcp(localhost:3306)/database"},sqlite:{label:"SQLite",placeholder:"/path/to/database.db"},sqlserver:{label:"SQL Server",placeholder:"sqlserver://user:password@localhost:1433?database=mydb"},oracle:{label:"Oracle",placeholder:"oracle://user:password@localhost:1521/service_name"}},u3={postgres:{active:"bg-blue-500/10 border-blue-500/50 text-blue-600 dark:text-blue-400",label:"PG"},mysql:{active:"bg-yellow-500/10 border-yellow-500/50 text-yellow-600 dark:text-yellow-400",label:"MySQL"},sqlite:{active:"bg-purple-500/10 border-purple-500/50 text-purple-600 dark:text-purple-400",label:"SQLite"},sqlserver:{active:"bg-red-500/10 border-red-500/50 text-red-600 dark:text-red-400",label:"MSSQL"},oracle:{active:"bg-orange-500/10 border-orange-500/50 text-orange-600 dark:text-orange-400",label:"Oracle"}};function c3(e){const t=_i.c(73),{connection:n,onSave:r,onClose:i}=e,[o,l]=H.useState(n?.name??""),[c,f]=H.useState(n?.driver??"postgres"),[d,m]=H.useState(n?.dsn??""),[p,g]=H.useState("idle"),[y,S]=H.useState(null),w=!!n;let C;t[0]!==c||t[1]!==d?(C=async()=>{if(d){g("testing"),S(null);try{const Ve=await(await fetch("/sql/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({driver:c,dsn:d,query:"SELECT 1",params:[]})})).json();Ve.error?(g("error"),S(Ve.error)):g("success")}catch(je){const Ve=je;g("error"),S(Ve instanceof Error?Ve.message:"Connection failed")}}},t[0]=c,t[1]=d,t[2]=C):C=t[2];const x=C;let E;t[3]!==c||t[4]!==d||t[5]!==o||t[6]!==r?(E=je=>{je.preventDefault(),o&&d&&r({name:o,driver:c,dsn:d})},t[3]=c,t[4]=d,t[5]=o,t[6]=r,t[7]=E):E=t[7];const k=E,I=jx[c];let P;t[8]!==i?(P=O.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:i}),t[8]=i,t[9]=P):P=t[9];const R=w?"Edit Connection":"New Connection";let M;t[10]!==R?(M=O.jsx("h2",{className:"text-base font-semibold text-neutral-800 dark:text-neutral-100",children:R}),t[10]=R,t[11]=M):M=t[11];let L;t[12]===Symbol.for("react.memo_cache_sentinel")?(L=O.jsx(bE,{className:"w-4 h-4 text-neutral-500"}),t[12]=L):L=t[12];let j;t[13]!==i?(j=O.jsx("button",{onClick:i,className:"p-1.5 -mr-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:L}),t[13]=i,t[14]=j):j=t[14];let N;t[15]!==M||t[16]!==j?(N=O.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-neutral-200 dark:border-white/10",children:[M,j]}),t[15]=M,t[16]=j,t[17]=N):N=t[17];let U;t[18]===Symbol.for("react.memo_cache_sentinel")?(U=O.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Connection Name"}),t[18]=U):U=t[18];let Z;t[19]===Symbol.for("react.memo_cache_sentinel")?(Z=je=>l(je.target.value),t[19]=Z):Z=t[19];let ee;t[20]!==o?(ee=O.jsxs("div",{className:"space-y-1.5",children:[U,O.jsx("input",{type:"text",placeholder:"My Database",value:o,onChange:Z,className:"w-full px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-colors",autoFocus:!0})]}),t[20]=o,t[21]=ee):ee=t[21];let re;t[22]===Symbol.for("react.memo_cache_sentinel")?(re=O.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Database Type"}),t[22]=re):re=t[22];let K;t[23]===Symbol.for("react.memo_cache_sentinel")?(K=Object.keys(jx),t[23]=K):K=t[23];let $;t[24]!==c?($=O.jsxs("div",{className:"space-y-1.5",children:[re,O.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:K.map(je=>{const Ve=u3[je];return O.jsx("button",{type:"button",onClick:()=>{f(je),g("idle"),S(null)},className:`px-2 py-2 text-[10px] font-semibold rounded-lg border transition-all ${c===je?Ve.active:"bg-neutral-50 dark:bg-white/5 border-neutral-200 dark:border-white/10 text-neutral-500 hover:bg-neutral-100 dark:hover:bg-white/10"}`,children:Ve.label},je)})})]}),t[24]=c,t[25]=$):$=t[25];let te;t[26]===Symbol.for("react.memo_cache_sentinel")?(te=O.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Connection String"}),t[26]=te):te=t[26];let de;t[27]===Symbol.for("react.memo_cache_sentinel")?(de=je=>{m(je.target.value),g("idle"),S(null)},t[27]=de):de=t[27];let se;t[28]!==d||t[29]!==I.placeholder?(se=O.jsx("input",{type:"text",placeholder:I.placeholder,value:d,onChange:de,className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-colors"}),t[28]=d,t[29]=I.placeholder,t[30]=se):se=t[30];let z;t[31]!==I.label?(z=O.jsxs("p",{className:"text-[10px] text-neutral-400 dark:text-neutral-600",children:[I.label," connection string format"]}),t[31]=I.label,t[32]=z):z=t[32];let D;t[33]!==se||t[34]!==z?(D=O.jsxs("div",{className:"space-y-1.5",children:[te,se,z]}),t[33]=se,t[34]=z,t[35]=D):D=t[35];const V=!d||p==="testing";let T;t[36]!==p?(T=p==="testing"?O.jsx(Ig,{className:"w-3.5 h-3.5 animate-spin text-neutral-500 dark:text-neutral-400"}):p==="success"?O.jsx(CN,{className:"w-3.5 h-3.5 text-blue-500"}):p==="error"?O.jsx(RN,{className:"w-3.5 h-3.5 text-red-500"}):O.jsx(BN,{className:"w-3.5 h-3.5 text-neutral-500 dark:text-neutral-400"}),t[36]=p,t[37]=T):T=t[37];const ae=p==="testing"?"Testing...":"Test Connection";let ce;t[38]!==x||t[39]!==V||t[40]!==T||t[41]!==ae?(ce=O.jsxs("button",{type:"button",onClick:x,disabled:V,className:"flex items-center gap-2 px-3 py-2 text-xs font-medium text-neutral-700 dark:text-neutral-200 bg-neutral-100 dark:bg-white/5 hover:bg-neutral-200 dark:hover:bg-white/10 disabled:opacity-50 rounded-lg transition-colors",children:[T,ae]}),t[38]=x,t[39]=V,t[40]=T,t[41]=ae,t[42]=ce):ce=t[42];let he;t[43]!==p?(he=p==="success"&&O.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:" Connection successful"}),t[43]=p,t[44]=he):he=t[44];let ye;t[45]!==y||t[46]!==p?(ye=p==="error"&&y&&O.jsx("p",{className:"text-xs text-red-500 dark:text-red-400 break-all",children:y}),t[45]=y,t[46]=p,t[47]=ye):ye=t[47];let Re;t[48]!==ce||t[49]!==he||t[50]!==ye?(Re=O.jsxs("div",{className:"space-y-2",children:[ce,he,ye]}),t[48]=ce,t[49]=he,t[50]=ye,t[51]=Re):Re=t[51];let we;t[52]!==i?(we=O.jsx("button",{type:"button",onClick:i,className:"flex-1 px-4 py-2.5 text-sm font-medium text-neutral-600 dark:text-neutral-400 bg-neutral-100 dark:bg-white/5 hover:bg-neutral-200 dark:hover:bg-white/10 rounded-xl transition-colors",children:"Cancel"}),t[52]=i,t[53]=we):we=t[53];const qe=!o||!d,Je=w?"Save Changes":"Add Connection";let Ue;t[54]!==qe||t[55]!==Je?(Ue=O.jsx("button",{type:"submit",disabled:qe,className:"flex-1 px-4 py-2.5 text-sm font-medium bg-blue-500 text-white rounded-xl hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:Je}),t[54]=qe,t[55]=Je,t[56]=Ue):Ue=t[56];let ot;t[57]!==we||t[58]!==Ue?(ot=O.jsxs("div",{className:"flex gap-2 pt-2",children:[we,Ue]}),t[57]=we,t[58]=Ue,t[59]=ot):ot=t[59];let Qe;t[60]!==k||t[61]!==ee||t[62]!==$||t[63]!==D||t[64]!==Re||t[65]!==ot?(Qe=O.jsxs("form",{onSubmit:k,className:"p-5 space-y-4",children:[ee,$,D,Re,ot]}),t[60]=k,t[61]=ee,t[62]=$,t[63]=D,t[64]=Re,t[65]=ot,t[66]=Qe):Qe=t[66];let Xe;t[67]!==Qe||t[68]!==N?(Xe=O.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-[#1a1a1a] rounded-2xl shadow-2xl border border-neutral-200 dark:border-white/10 overflow-hidden",children:[N,Qe]}),t[67]=Qe,t[68]=N,t[69]=Xe):Xe=t[69];let ct;return t[70]!==P||t[71]!==Xe?(ct=O.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[P,Xe]}),t[70]=P,t[71]=Xe,t[72]=ct):ct=t[72],ct}const f3={postgres:"text-blue-600 dark:text-blue-400",mysql:"text-yellow-600 dark:text-yellow-400",sqlite:"text-purple-600 dark:text-purple-400",sqlserver:"text-red-600 dark:text-red-400",oracle:"text-orange-600 dark:text-orange-400"};function d3(e){const t=new Date(e),n=new Date;return t.toDateString()===n.toDateString()?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString([],{month:"short",day:"numeric"})}function h3(e){return e?"bg-blue-500":"bg-neutral-500"}function p3({activeConnectionId:e,activeDatabase:t,activeTable:n,onSelectConnection:r,onSelectDatabase:i,onSelectTable:o}){const l=$E(Z=>Z.from({conn:Il}).orderBy(({conn:ee})=>ee.createdAt,"desc")),c=Uy(),[f,d]=H.useState({open:!1}),[m,p]=H.useState({open:!1,connectionId:null}),[g,y]=H.useState(""),[S,w]=H.useState(null),[C,x]=H.useState(!1),[E,k]=H.useState(new Set),I=(l?.data??[]).find(Z=>Z.id===e),{data:P}=Nf({queryKey:["databases",e],queryFn:()=>I&&e?r3(I.driver,I.dsn):[],enabled:!!I&&!!e}),{data:R}=Nf({queryKey:["tables",e,t],queryFn:()=>I&&t?VE(I.driver,I.dsn,t):[],enabled:!!I&&!!e&&!!t}),M=H.useMemo(()=>{const Z=l?.data??[],ee=new Map;for(const re of Z){const K=ee.get(re.name)||[];K.push(re),ee.set(re.name,K)}return Array.from(ee.entries()).map(([re,K])=>({name:re,entries:K}))},[l?.data]),L=Z=>{k(ee=>{const re=new Set(ee);return re.has(Z)?re.delete(Z):re.add(Z),re})},j=Z=>{if(f.connection)Il.update(f.connection.id,ee=>{ee.name=Z.name,ee.driver=Z.driver,ee.dsn=Z.dsn});else{const ee=crypto.randomUUID();Il.insert({...Z,id:ee,createdAt:new Date().toISOString()}),r(ee),k(re=>new Set(re).add(ee))}d({open:!1})},N=Z=>{Il.delete(Z),e===Z&&r(null)},U=async()=>{if(!(!I||!g.trim())){x(!0),w(null);try{await s3(I.driver,I.dsn,g.trim()),await c.invalidateQueries({queryKey:["databases",e]}),p({open:!1,connectionId:null}),y("")}catch(Z){w(Z instanceof Error?Z.message:"Failed to create database")}finally{x(!1)}}};return O.jsxs(O.Fragment,{children:[f.open&&O.jsx(c3,{connection:f.connection,onSave:j,onClose:()=>d({open:!1})}),m.open&&I&&O.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:O.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] rounded-xl border border-neutral-200 dark:border-white/10 p-4 w-80 shadow-xl",children:[O.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[O.jsx(ON,{className:"w-5 h-5 text-blue-500"}),O.jsx("h2",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"Create Database"})]}),O.jsx("input",{type:"text",value:g,onChange:Z=>y(Z.target.value),placeholder:"Database name",className:"w-full px-3 py-2 text-sm rounded-lg border border-neutral-200 dark:border-white/10 bg-neutral-50 dark:bg-white/5 text-neutral-700 dark:text-neutral-200 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50",autoFocus:!0,onKeyDown:Z=>{Z.key==="Enter"&&g.trim()?U():Z.key==="Escape"&&(p({open:!1,connectionId:null}),y(""),w(null))}}),S&&O.jsx("p",{className:"mt-2 text-xs text-red-500",children:S}),O.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4",children:[O.jsx("button",{onClick:()=>{p({open:!1,connectionId:null}),y(""),w(null)},className:"px-3 py-1.5 text-xs rounded-lg text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:"Cancel"}),O.jsx("button",{onClick:U,disabled:C||!g.trim(),className:"px-3 py-1.5 text-xs rounded-lg bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:C?"Creating...":"Create"})]})]})}),O.jsxs("aside",{className:"w-64 bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl flex flex-col overflow-hidden dark:shadow-2xl",children:[O.jsxs("div",{className:"px-3 py-2.5 flex items-center justify-between gap-2",children:[O.jsx("h1",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 pl-0.5",children:"Granite"}),O.jsx("div",{className:"flex items-center gap-1",children:O.jsx("button",{onClick:()=>d({open:!0,connection:null}),className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Add connection",children:O.jsx(rx,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"})})})]}),O.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:(l?.data??[]).length===0?O.jsx("div",{className:"px-2 py-8 text-center text-neutral-400 dark:text-neutral-600 text-xs",children:"No connections yet"}):O.jsx("div",{className:"space-y-3 pb-2",children:M.map(Z=>O.jsxs("div",{children:[O.jsx("div",{className:"px-2 py-1 text-[10px] font-medium text-neutral-400 dark:text-neutral-500 uppercase tracking-wider truncate",children:Z.name}),O.jsx("div",{className:"space-y-0.5",children:Z.entries.map(ee=>{const re=e===ee.id,K=E.has(ee.id);return O.jsxs("div",{children:[O.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>{r(ee.id),L(ee.id)},children:[O.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${h3(re)}`}),O.jsx("span",{className:`text-[10px] font-semibold shrink-0 uppercase ${f3[ee.driver]||"text-neutral-500"}`,children:ee.driver==="postgres"?"PG":ee.driver==="mysql"?"MY":ee.driver==="sqlserver"?"MS":ee.driver==="oracle"?"OR":"SQ"}),O.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",children:ee.dsn.split("@").pop()?.split("/")[0]||ee.dsn.slice(0,20)}),O.jsxs("div",{className:"flex items-center justify-end text-[10px] text-neutral-400 dark:text-neutral-600 shrink-0 w-16 h-5",children:[O.jsx("span",{className:"group-hover:hidden",children:d3(ee.createdAt)}),O.jsxs("div",{className:"hidden group-hover:flex items-center gap-0.5",children:[O.jsx("button",{onClick:$=>{$.stopPropagation(),d({open:!0,connection:ee})},className:"inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-colors",title:"Edit",children:O.jsx(PN,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-blue-500 dark:hover:text-blue-400"})}),O.jsx("button",{onClick:$=>{$.stopPropagation(),N(ee.id)},className:"inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-colors",title:"Delete",children:O.jsx(qf,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400"})})]})]})]}),K&&re&&P&&O.jsxs("div",{className:"ml-4 space-y-0.5",children:[P.map($=>{const te=t===$,de=E.has(`${ee.id}:${$}`);return O.jsxs("div",{children:[O.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>{L(`${ee.id}:${$}`),i($)},children:[O.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${te?"bg-blue-500":"bg-neutral-400"}`}),O.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",children:$})]}),de&&te&&R&&O.jsxs("div",{className:"ml-4 space-y-0.5",children:[R.map(se=>O.jsxs("div",{className:`group flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-colors ${n===se?"bg-blue-500/10 dark:bg-blue-500/20":"hover:bg-neutral-100 dark:hover:bg-white/5"}`,onClick:()=>o(se),children:[O.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${n===se?"bg-blue-500":"bg-neutral-400"}`}),O.jsx("span",{className:`text-xs truncate flex-1 ${n===se?"text-blue-600 dark:text-blue-400":"text-neutral-500 dark:text-neutral-400"}`,children:se})]},se)),R.length===0&&O.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"No tables"})]})]},$)}),P.length===0&&O.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"No databases"}),o3(ee.driver)&&O.jsxs("button",{onClick:$=>{$.stopPropagation(),p({open:!0,connectionId:ee.id})},className:"flex items-center gap-2 px-3 py-1.5 w-full rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors text-left",children:[O.jsx(rx,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500"}),O.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"New database"})]})]})]},ee.id)})})]},Z.name))})})]})]})}function Fx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m3(e){if(Array.isArray(e))return e}function g3(e,t,n){return(t=x3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y3(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,l,c=[],f=!0,d=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(f=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);f=!0);}catch(m){d=!0,i=m}finally{try{if(!f&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw i}}return c}}function v3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Bx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$x(Object(n),!0).forEach(function(r){g3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$x(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function b3(e,t){if(e==null)return{};var n,r,i=S3(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function S3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function w3(e,t){return m3(e)||y3(e,t)||C3(e,t)||v3()}function _3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x3(e){var t=_3(e,"string");return typeof t=="symbol"?t:t+""}function C3(e,t){if(e){if(typeof e=="string")return Fx(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fx(e,t):void 0}}function E3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ux(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ux(Object(n),!0).forEach(function(r){E3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ux(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(function(i,o){return o(i)},r)}}function Nl(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=e.length?e.apply(this,i):function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return t.apply(n,[].concat(i,c))}}}function Wf(e){return{}.toString.call(e).includes("Object")}function k3(e){return!Object.keys(e).length}function cu(e){return typeof e=="function"}function A3(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function T3(e,t){return Wf(t)||as("changeType"),Object.keys(t).some(function(n){return!A3(e,n)})&&as("changeField"),t}function O3(e){cu(e)||as("selectorType")}function M3(e){cu(e)||Wf(e)||as("handlerType"),Wf(e)&&Object.values(e).some(function(t){return!cu(t)})&&as("handlersType")}function I3(e){e||as("initialIsRequired"),Wf(e)||as("initialType"),k3(e)&&as("initialContent")}function N3(e,t){throw new Error(e[t]||e.default)}var D3={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},as=Nl(N3)(D3),Yc={changes:T3,selector:O3,handler:M3,initial:I3};function z3(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Yc.initial(e),Yc.handler(t);var n={current:e},r=Nl(j3)(n,t),i=Nl(P3)(n),o=Nl(Yc.changes)(e),l=Nl(L3)(n);function c(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(m){return m};return Yc.selector(d),d(n.current)}function f(d){R3(r,i,o,l)(d)}return[c,f]}function L3(e,t){return cu(t)?t(e.current):t}function P3(e,t){return e.current=qx(qx({},e.current),t),t}function j3(e,t,n){return cu(t)?t(e.current):Object.keys(n).forEach(function(r){var i;return(i=t[r])===null||i===void 0?void 0:i.call(t,e.current[r])}),n}var F3={create:z3},$3={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function B3(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=e.length?e.apply(this,i):function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return t.apply(n,[].concat(i,c))}}}function U3(e){return{}.toString.call(e).includes("Object")}function q3(e){return e||Hx("configIsRequired"),U3(e)||Hx("configType"),e.urls?(H3(),{paths:{vs:e.urls.monacoBase}}):e}function H3(){console.warn(KE.deprecation)}function V3(e,t){throw new Error(e[t]||e.default)}var KE={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Hx=B3(V3)(KE),K3={config:q3},G3=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(o,l){return l(o)},i)}};function GE(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],GE(e[n],t[n]))}),Bx(Bx({},e),t)}var Q3={type:"cancelation",msg:"operation is manually canceled"};function Fm(e){var t=!1,n=new Promise(function(r,i){e.then(function(o){return t?i(Q3):r(o)}),e.catch(i)});return n.cancel=function(){return t=!0},n}var Z3=["monaco"],Y3=F3.create({config:$3,isInitialized:!1,resolve:null,reject:null,monaco:null}),QE=w3(Y3,2),wu=QE[0],Ad=QE[1];function J3(e){var t=K3.config(e),n=t.monaco,r=b3(t,Z3);Ad(function(i){return{config:GE(i.config,r),monaco:n}})}function X3(){var e=wu(function(t){var n=t.monaco,r=t.isInitialized,i=t.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!e.isInitialized){if(Ad({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Fm($m);if(window.monaco&&window.monaco.editor)return ZE(window.monaco),e.resolve(window.monaco),Fm($m);G3(W3,tj)(nj)}return Fm($m)}function W3(e){return document.body.appendChild(e)}function ej(e){var t=document.createElement("script");return e&&(t.src=e),t}function tj(e){var t=wu(function(r){var i=r.config,o=r.reject;return{config:i,reject:o}}),n=ej("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function nj(){var e=wu(function(n){var r=n.config,i=n.resolve,o=n.reject;return{config:r,resolve:i,reject:o}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){var r=n.m||n;ZE(r),e.resolve(r)},function(n){e.reject(n)})}function ZE(e){wu().monaco||Ad({monaco:e})}function rj(){return wu(function(e){var t=e.monaco;return t})}var $m=new Promise(function(e,t){return Ad({resolve:e,reject:t})}),YE={config:J3,init:X3,__getMonacoInstance:rj},ij={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Bm=ij,sj={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},oj=sj;function aj({children:e}){return Nr.createElement("div",{style:oj.container},e)}var lj=aj,uj=lj;function cj({width:e,height:t,isEditorReady:n,loading:r,_ref:i,className:o,wrapperProps:l}){return Nr.createElement("section",{style:{...Bm.wrapper,width:e,height:t},...l},!n&&Nr.createElement(uj,null,r),Nr.createElement("div",{ref:i,style:{...Bm.fullWidth,...!n&&Bm.hide},className:o}))}var fj=cj,JE=H.memo(fj);function dj(e){H.useEffect(e,[])}var XE=dj;function hj(e,t,n=!0){let r=H.useRef(!0);H.useEffect(r.current||!n?()=>{r.current=!1}:e,t)}var nr=hj;function Ql(){}function ra(e,t,n,r){return pj(e,r)||mj(e,t,n,r)}function pj(e,t){return e.editor.getModel(WE(e,t))}function mj(e,t,n,r){return e.editor.createModel(t,n,r?WE(e,r):void 0)}function WE(e,t){return e.Uri.parse(t)}function gj({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:i,originalModelPath:o,modifiedModelPath:l,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:f=!1,theme:d="light",loading:m="Loading...",options:p={},height:g="100%",width:y="100%",className:S,wrapperProps:w={},beforeMount:C=Ql,onMount:x=Ql}){let[E,k]=H.useState(!1),[I,P]=H.useState(!0),R=H.useRef(null),M=H.useRef(null),L=H.useRef(null),j=H.useRef(x),N=H.useRef(C),U=H.useRef(!1);XE(()=>{let K=YE.init();return K.then($=>(M.current=$)&&P(!1)).catch($=>$?.type!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>R.current?re():K.cancel()}),nr(()=>{if(R.current&&M.current){let K=R.current.getOriginalEditor(),$=ra(M.current,e||"",r||n||"text",o||"");$!==K.getModel()&&K.setModel($)}},[o],E),nr(()=>{if(R.current&&M.current){let K=R.current.getModifiedEditor(),$=ra(M.current,t||"",i||n||"text",l||"");$!==K.getModel()&&K.setModel($)}},[l],E),nr(()=>{let K=R.current.getModifiedEditor();K.getOption(M.current.editor.EditorOption.readOnly)?K.setValue(t||""):t!==K.getValue()&&(K.executeEdits("",[{range:K.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),K.pushUndoStop())},[t],E),nr(()=>{R.current?.getModel()?.original.setValue(e||"")},[e],E),nr(()=>{let{original:K,modified:$}=R.current.getModel();M.current.editor.setModelLanguage(K,r||n||"text"),M.current.editor.setModelLanguage($,i||n||"text")},[n,r,i],E),nr(()=>{M.current?.editor.setTheme(d)},[d],E),nr(()=>{R.current?.updateOptions(p)},[p],E);let Z=H.useCallback(()=>{if(!M.current)return;N.current(M.current);let K=ra(M.current,e||"",r||n||"text",o||""),$=ra(M.current,t||"",i||n||"text",l||"");R.current?.setModel({original:K,modified:$})},[n,t,i,e,r,o,l]),ee=H.useCallback(()=>{!U.current&&L.current&&(R.current=M.current.editor.createDiffEditor(L.current,{automaticLayout:!0,...p}),Z(),M.current?.editor.setTheme(d),k(!0),U.current=!0)},[p,d,Z]);H.useEffect(()=>{E&&j.current(R.current,M.current)},[E]),H.useEffect(()=>{!I&&!E&&ee()},[I,E,ee]);function re(){let K=R.current?.getModel();c||K?.original?.dispose(),f||K?.modified?.dispose(),R.current?.dispose()}return Nr.createElement(JE,{width:y,height:g,isEditorReady:E,loading:m,_ref:L,className:S,wrapperProps:w})}var yj=gj;H.memo(yj);function vj(e){let t=H.useRef();return H.useEffect(()=>{t.current=e},[e]),t.current}var bj=vj,Jc=new Map;function Sj({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:i,path:o,theme:l="light",line:c,loading:f="Loading...",options:d={},overrideServices:m={},saveViewState:p=!0,keepCurrentModel:g=!1,width:y="100%",height:S="100%",className:w,wrapperProps:C={},beforeMount:x=Ql,onMount:E=Ql,onChange:k,onValidate:I=Ql}){let[P,R]=H.useState(!1),[M,L]=H.useState(!0),j=H.useRef(null),N=H.useRef(null),U=H.useRef(null),Z=H.useRef(E),ee=H.useRef(x),re=H.useRef(),K=H.useRef(r),$=bj(o),te=H.useRef(!1),de=H.useRef(!1);XE(()=>{let D=YE.init();return D.then(V=>(j.current=V)&&L(!1)).catch(V=>V?.type!=="cancelation"&&console.error("Monaco initialization: error:",V)),()=>N.current?z():D.cancel()}),nr(()=>{let D=ra(j.current,e||r||"",t||i||"",o||n||"");D!==N.current?.getModel()&&(p&&Jc.set($,N.current?.saveViewState()),N.current?.setModel(D),p&&N.current?.restoreViewState(Jc.get(o)))},[o],P),nr(()=>{N.current?.updateOptions(d)},[d],P),nr(()=>{!N.current||r===void 0||(N.current.getOption(j.current.editor.EditorOption.readOnly)?N.current.setValue(r):r!==N.current.getValue()&&(de.current=!0,N.current.executeEdits("",[{range:N.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),N.current.pushUndoStop(),de.current=!1))},[r],P),nr(()=>{let D=N.current?.getModel();D&&i&&j.current?.editor.setModelLanguage(D,i)},[i],P),nr(()=>{c!==void 0&&N.current?.revealLine(c)},[c],P),nr(()=>{j.current?.editor.setTheme(l)},[l],P);let se=H.useCallback(()=>{if(!(!U.current||!j.current)&&!te.current){ee.current(j.current);let D=o||n,V=ra(j.current,r||e||"",t||i||"",D||"");N.current=j.current?.editor.create(U.current,{model:V,automaticLayout:!0,...d},m),p&&N.current.restoreViewState(Jc.get(D)),j.current.editor.setTheme(l),c!==void 0&&N.current.revealLine(c),R(!0),te.current=!0}},[e,t,n,r,i,o,d,m,p,l,c]);H.useEffect(()=>{P&&Z.current(N.current,j.current)},[P]),H.useEffect(()=>{!M&&!P&&se()},[M,P,se]),K.current=r,H.useEffect(()=>{P&&k&&(re.current?.dispose(),re.current=N.current?.onDidChangeModelContent(D=>{de.current||k(N.current.getValue(),D)}))},[P,k]),H.useEffect(()=>{if(P){let D=j.current.editor.onDidChangeMarkers(V=>{let T=N.current.getModel()?.uri;if(T&&V.find(ae=>ae.path===T.path)){let ae=j.current.editor.getModelMarkers({resource:T});I?.(ae)}});return()=>{D?.dispose()}}return()=>{}},[P,I]);function z(){re.current?.dispose(),g?p&&Jc.set(o,N.current.saveViewState()):N.current.getModel()?.dispose(),N.current.dispose()}return Nr.createElement(JE,{width:y,height:S,isEditorReady:P,loading:f,_ref:U,className:w,wrapperProps:C})}var wj=Sj,_j=H.memo(wj),xj=_j;const Cj={records:{icon:JN,label:"Records"},columns:{icon:AN,label:"Columns"},constraints:{icon:KN,label:"Constraints"},foreignKeys:{icon:IN,label:"Foreign Keys"},indexes:{icon:DN,label:"Indexes"}},Ej=["SELECT","FROM","WHERE","AND","OR","NOT","IN","IS","NULL","LIKE","BETWEEN","ORDER BY","GROUP BY","HAVING","LIMIT","OFFSET","JOIN","LEFT JOIN","RIGHT JOIN","INNER JOIN","OUTER JOIN","ON","AS","DISTINCT","COUNT","SUM","AVG","MIN","MAX","INSERT INTO","VALUES","UPDATE","SET","DELETE FROM","CREATE TABLE","DROP TABLE","ALTER TABLE","ADD COLUMN","DROP COLUMN","INDEX","UNIQUE","PRIMARY KEY","FOREIGN KEY","REFERENCES","CASCADE","ASC","DESC","UNION","ALL","EXISTS","CASE","WHEN","THEN","ELSE","END","COALESCE","NULLIF","CAST","TRUE","FALSE"];function Rj(e){const t=_i.c(61),{connection:n,selectedTable:r,onExecute:i,isLoading:o,schema:l,value:c,onChange:f,onToggleAI:d,aiPanelOpen:m,supportedViews:p,onSelectView:g,activeView:y,onExpandEditor:S}=e,[w,C]=H.useState(""),[x,E]=H.useState(!0),k=c!==void 0?c:w,I=f!==void 0?f:C,P=H.useRef(null),R=H.useRef(null),M=H.useRef(l),[L,j]=H.useState(kj);let N,U;t[0]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{const je=window.matchMedia("(prefers-color-scheme: dark)"),Ve=gt=>j(gt.matches);return je.addEventListener("change",Ve),()=>je.removeEventListener("change",Ve)},U=[],t[0]=N,t[1]=U):(N=t[0],U=t[1]),H.useEffect(N,U);let Z,ee;t[2]!==l?(Z=()=>{M.current=l},ee=[l],t[2]=l,t[3]=Z,t[4]=ee):(Z=t[3],ee=t[4]),H.useEffect(Z,ee);let re;t[5]!==n||t[6]!==r||t[7]!==I?(re=()=>{r&&n&&queueMicrotask(()=>I(Xg(r,n.driver)))},t[5]=n,t[6]=r,t[7]=I,t[8]=re):re=t[8];let K;t[9]!==n||t[10]!==r?(K=[r,n],t[9]=n,t[10]=r,t[11]=K):K=t[11],H.useEffect(re,K);let $;t[12]===Symbol.for("react.memo_cache_sentinel")?($=(je,Ve)=>{P.current=Ve,R.current?.dispose(),R.current=Ve.languages.registerCompletionItemProvider("sql",{triggerCharacters:[" ",".",",","("],provideCompletionItems:(gt,ft)=>{const ge=M.current,Fe=gt.getWordUntilPosition(ft),be={startLineNumber:ft.lineNumber,endLineNumber:ft.lineNumber,startColumn:Fe.startColumn,endColumn:Fe.endColumn},me=gt.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:ft.lineNumber,endColumn:ft.column}).toUpperCase(),De=[],Se=gt.getLineContent(ft.lineNumber).substring(0,ft.column-1).match(/(\w+)\.$/);if(Se&&ge?.columns){const Me=Se[1].toLowerCase(),dt=Object.entries(ge.columns).find(We=>{const[Ze]=We;return Ze.toLowerCase()===Me})?.[1];return dt&&dt.forEach(We=>{De.push({label:We.name,kind:Ve.languages.CompletionItemKind.Field,detail:`${We.type}${We.primaryKey?" (PK)":""}${We.nullable?"":" NOT NULL"}`,insertText:We.name,range:be})}),{suggestions:De}}const _e=/\b(FROM|JOIN|INTO|UPDATE|TABLE)\s+$/i.test(me)||/\b(FROM|JOIN|INTO|UPDATE|TABLE)\s+\w*$/i.test(me),ve=/\bSELECT\s+(\w+\s*,\s*)*\w*$/i.test(me)||/\bWHERE\s+.*$/i.test(me)||/\bSET\s+.*$/i.test(me)||/\bAND\s+\w*$/i.test(me)||/\bOR\s+\w*$/i.test(me)||/\bORDER BY\s+.*$/i.test(me)||/\bGROUP BY\s+.*$/i.test(me);return Ej.forEach(Me=>{Me.toUpperCase().startsWith(Fe.word.toUpperCase())&&De.push({label:Me,kind:Ve.languages.CompletionItemKind.Keyword,detail:"SQL keyword",insertText:Me,range:be})}),ge?.tables&&(_e||!ve)&&ge.tables.forEach(Me=>{De.push({label:Me,kind:Ve.languages.CompletionItemKind.Class,detail:"Table",insertText:Me,range:be})}),ge?.columns&&ve&&Object.entries(ge.columns).forEach(Me=>{const[dt,We]=Me;We.forEach(Ze=>{De.push({label:Ze.name,kind:Ve.languages.CompletionItemKind.Field,detail:`${dt}.${Ze.name} (${Ze.type})`,insertText:Ze.name,range:be}),De.push({label:`${dt}.${Ze.name}`,kind:Ve.languages.CompletionItemKind.Field,detail:Ze.type,insertText:`${dt}.${Ze.name}`,range:be})})}),{suggestions:De}}})},t[12]=$):$=t[12];const te=$;let de,se;t[13]===Symbol.for("react.memo_cache_sentinel")?(de=()=>()=>{R.current?.dispose()},se=[],t[13]=de,t[14]=se):(de=t[13],se=t[14]),H.useEffect(de,se);let z;t[15]!==n||t[16]!==i||t[17]!==k?(z=()=>{!n||!k.trim()||i(k)},t[15]=n,t[16]=i,t[17]=k,t[18]=z):z=t[18];const D=z;let V;t[19]!==D?(V=je=>{(je.metaKey||je.ctrlKey)&&je.key==="Enter"&&(je.preventDefault(),D())},t[19]=D,t[20]=V):V=t[20];const T=V,ae=`flex flex-col bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden dark:shadow-2xl transition-all ${x?"":"h-80"}`;let ce;t[21]!==x||t[22]!==S?(ce=()=>{x&&S&&S(),E(!x)},t[21]=x,t[22]=S,t[23]=ce):ce=t[23];const he=x?"Expand editor":"Collapse editor";let ye;t[24]!==x?(ye=x?O.jsx(yE,{className:"w-4 h-4"}):O.jsx(vE,{className:"w-4 h-4"}),t[24]=x,t[25]=ye):ye=t[25];let Re;t[26]!==ce||t[27]!==he||t[28]!==ye?(Re=O.jsx("button",{onClick:ce,className:"p-1.5 rounded-lg transition-colors text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/5",title:he,children:ye}),t[26]=ce,t[27]=he,t[28]=ye,t[29]=Re):Re=t[29];let we;t[30]!==y||t[31]!==g||t[32]!==r||t[33]!==p?(we=r&&p&&g&&O.jsx("div",{className:"flex gap-0.5 p-1 bg-neutral-100 dark:bg-white/5 rounded-lg",children:p.map(je=>{const{icon:Ve,label:gt}=Cj[je],ft=y===je;return O.jsxs("button",{type:"button",onClick:()=>{g(je),E(!0)},title:gt,className:`flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded-md transition-all whitespace-nowrap ${ft?"bg-white dark:bg-neutral-700 text-neutral-900 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 hover:bg-white dark:hover:bg-neutral-700 hover:shadow-sm"}`,children:[O.jsx(Ve,{className:"w-3.5 h-3.5"}),O.jsx("span",{className:"hidden lg:inline",children:gt})]},je)})}),t[30]=y,t[31]=g,t[32]=r,t[33]=p,t[34]=we):we=t[34];let qe;t[35]===Symbol.for("react.memo_cache_sentinel")?(qe=O.jsx("div",{className:"flex-1"}),t[35]=qe):qe=t[35];let Je;t[36]!==n?(Je=n?O.jsxs(O.Fragment,{children:[O.jsx("span",{className:"font-medium text-neutral-600 dark:text-neutral-300",children:n.name}),O.jsx("span",{className:"mx-1.5",children:""}),O.jsx("span",{className:"uppercase",children:n.driver})]}):"No connection",t[36]=n,t[37]=Je):Je=t[37];let Ue;t[38]!==Je?(Ue=O.jsx("span",{className:"text-[10px] text-neutral-400 dark:text-neutral-500",children:Je}),t[38]=Je,t[39]=Ue):Ue=t[39];let ot;t[40]!==m||t[41]!==d?(ot=d&&O.jsx("button",{onClick:d,className:`p-1.5 rounded-lg transition-colors ${m?"bg-amber-500/10 text-amber-500":"text-neutral-400 hover:text-amber-500 hover:bg-amber-500/10"}`,title:"Toggle AI Assistant",children:O.jsx(Ng,{className:"w-4 h-4"})}),t[40]=m,t[41]=d,t[42]=ot):ot=t[42];let Qe;t[43]!==Re||t[44]!==we||t[45]!==Ue||t[46]!==ot?(Qe=O.jsxs("div",{className:"h-12 px-3 flex items-center gap-3 border-b border-neutral-200 dark:border-white/8",children:[Re,we,qe,Ue,ot]}),t[43]=Re,t[44]=we,t[45]=Ue,t[46]=ot,t[47]=Qe):Qe=t[47];let Xe;t[48]!==n||t[49]!==D||t[50]!==x||t[51]!==L||t[52]!==o||t[53]!==I||t[54]!==k?(Xe=!x&&O.jsxs(O.Fragment,{children:[O.jsx("div",{className:"flex-1 min-h-0",children:O.jsx(xj,{height:"100%",defaultLanguage:"sql",value:k,onChange:je=>I(je||""),onMount:te,theme:L?"vs-dark":"vs",options:{quickSuggestions:!0,suggestOnTriggerCharacters:!0,minimap:{enabled:!1},fontSize:13,fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",padding:{top:12,bottom:12},renderLineHighlight:"none",overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,scrollbar:{vertical:"auto",horizontal:"auto",verticalScrollbarSize:8,horizontalScrollbarSize:8},lineNumbersMinChars:3,folding:!1}})}),O.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 border-t border-neutral-200 dark:border-white/8",children:[O.jsxs("button",{onClick:D,disabled:!n||!k.trim()||o,className:"flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-md disabled:opacity-50 transition-colors",children:[O.jsx(FN,{className:"w-3 h-3"}),o?"Running...":"Run"]}),O.jsx("span",{className:"text-[10px] text-neutral-400 dark:text-neutral-600",children:""})]})]}),t[48]=n,t[49]=D,t[50]=x,t[51]=L,t[52]=o,t[53]=I,t[54]=k,t[55]=Xe):Xe=t[55];let ct;return t[56]!==T||t[57]!==ae||t[58]!==Qe||t[59]!==Xe?(ct=O.jsxs("div",{className:ae,onKeyDown:T,children:[Qe,Xe]}),t[56]=T,t[57]=ae,t[58]=Qe,t[59]=Xe,t[60]=ct):ct=t[60],ct}function kj(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function rs(e,t){return typeof e=="function"?e(t):e}function sr(e,t){return n=>{t.setState(r=>({...r,[e]:rs(n,r[e])}))}}function Td(e){return e instanceof Function}function Aj(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function Tj(e,t){const n=[],r=i=>{i.forEach(o=>{n.push(o);const l=t(o);l!=null&&l.length&&r(l)})};return r(e),n}function ze(e,t,n){let r=[],i;return o=>{let l;n.key&&n.debug&&(l=Date.now());const c=e(o);if(!(c.length!==r.length||c.some((m,p)=>r[p]!==m)))return i;r=c;let d;if(n.key&&n.debug&&(d=Date.now()),i=t(...c),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug&&n!=null&&n.debug()){const m=Math.round((Date.now()-l)*100)/100,p=Math.round((Date.now()-d)*100)/100,g=p/16,y=(S,w)=>{for(S=String(S);S.length<w;)S=" "+S;return S};console.info(`%c ${y(p,5)} /${y(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,n?.key)}return i}}function Le(e,t,n,r){return{debug:()=>{var i;return(i=e?.debugAll)!=null?i:e[t]},key:!1,onChange:r}}function Oj(e,t,n,r){const i=()=>{var l;return(l=o.getValue())!=null?l:e.options.renderFallbackValue},o={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:i,getContext:ze(()=>[e,n,t,o],(l,c,f,d)=>({table:l,column:c,row:f,cell:d,getValue:d.getValue,renderValue:d.renderValue}),Le(e.options,"debugCells"))};return e._features.forEach(l=>{l.createCell==null||l.createCell(o,n,t,e)},{}),o}function Mj(e,t,n,r){var i,o;const c={...e._getDefaultColumnDef(),...t},f=c.accessorKey;let d=(i=(o=c.id)!=null?o:f?typeof String.prototype.replaceAll=="function"?f.replaceAll(".","_"):f.replace(/\./g,"_"):void 0)!=null?i:typeof c.header=="string"?c.header:void 0,m;if(c.accessorFn?m=c.accessorFn:f&&(f.includes(".")?m=g=>{let y=g;for(const w of f.split(".")){var S;y=(S=y)==null?void 0:S[w]}return y}:m=g=>g[c.accessorKey]),!d)throw new Error;let p={id:`${String(d)}`,accessorFn:m,parent:r,depth:n,columnDef:c,columns:[],getFlatColumns:ze(()=>[!0],()=>{var g;return[p,...(g=p.columns)==null?void 0:g.flatMap(y=>y.getFlatColumns())]},Le(e.options,"debugColumns")),getLeafColumns:ze(()=>[e._getOrderColumnsFn()],g=>{var y;if((y=p.columns)!=null&&y.length){let S=p.columns.flatMap(w=>w.getLeafColumns());return g(S)}return[p]},Le(e.options,"debugColumns"))};for(const g of e._features)g.createColumn==null||g.createColumn(p,e);return p}const yn="debugHeaders";function Vx(e,t,n){var r;let o={id:(r=n.id)!=null?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const l=[],c=f=>{f.subHeaders&&f.subHeaders.length&&f.subHeaders.map(c),l.push(f)};return c(o),l},getContext:()=>({table:e,header:o,column:t})};return e._features.forEach(l=>{l.createHeader==null||l.createHeader(o,e)}),o}const Ij={createTable:e=>{e.getHeaderGroups=ze(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>{var o,l;const c=(o=r?.map(p=>n.find(g=>g.id===p)).filter(Boolean))!=null?o:[],f=(l=i?.map(p=>n.find(g=>g.id===p)).filter(Boolean))!=null?l:[],d=n.filter(p=>!(r!=null&&r.includes(p.id))&&!(i!=null&&i.includes(p.id)));return Xc(t,[...c,...d,...f],e)},Le(e.options,yn)),e.getCenterHeaderGroups=ze(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>(n=n.filter(o=>!(r!=null&&r.includes(o.id))&&!(i!=null&&i.includes(o.id))),Xc(t,n,e,"center")),Le(e.options,yn)),e.getLeftHeaderGroups=ze(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var i;const o=(i=r?.map(l=>n.find(c=>c.id===l)).filter(Boolean))!=null?i:[];return Xc(t,o,e,"left")},Le(e.options,yn)),e.getRightHeaderGroups=ze(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var i;const o=(i=r?.map(l=>n.find(c=>c.id===l)).filter(Boolean))!=null?i:[];return Xc(t,o,e,"right")},Le(e.options,yn)),e.getFooterGroups=ze(()=>[e.getHeaderGroups()],t=>[...t].reverse(),Le(e.options,yn)),e.getLeftFooterGroups=ze(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),Le(e.options,yn)),e.getCenterFooterGroups=ze(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),Le(e.options,yn)),e.getRightFooterGroups=ze(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),Le(e.options,yn)),e.getFlatHeaders=ze(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),Le(e.options,yn)),e.getLeftFlatHeaders=ze(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),Le(e.options,yn)),e.getCenterFlatHeaders=ze(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),Le(e.options,yn)),e.getRightFlatHeaders=ze(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),Le(e.options,yn)),e.getCenterLeafHeaders=ze(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Le(e.options,yn)),e.getLeftLeafHeaders=ze(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Le(e.options,yn)),e.getRightLeafHeaders=ze(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Le(e.options,yn)),e.getLeafHeaders=ze(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,r)=>{var i,o,l,c,f,d;return[...(i=(o=t[0])==null?void 0:o.headers)!=null?i:[],...(l=(c=n[0])==null?void 0:c.headers)!=null?l:[],...(f=(d=r[0])==null?void 0:d.headers)!=null?f:[]].map(m=>m.getLeafHeaders()).flat()},Le(e.options,yn))}};function Xc(e,t,n,r){var i,o;let l=0;const c=function(g,y){y===void 0&&(y=1),l=Math.max(l,y),g.filter(S=>S.getIsVisible()).forEach(S=>{var w;(w=S.columns)!=null&&w.length&&c(S.columns,y+1)},0)};c(e);let f=[];const d=(g,y)=>{const S={depth:y,id:[r,`${y}`].filter(Boolean).join("_"),headers:[]},w=[];g.forEach(C=>{const x=[...w].reverse()[0],E=C.column.depth===S.depth;let k,I=!1;if(E&&C.column.parent?k=C.column.parent:(k=C.column,I=!0),x&&x?.column===k)x.subHeaders.push(C);else{const P=Vx(n,k,{id:[r,y,k.id,C?.id].filter(Boolean).join("_"),isPlaceholder:I,placeholderId:I?`${w.filter(R=>R.column===k).length}`:void 0,depth:y,index:w.length});P.subHeaders.push(C),w.push(P)}S.headers.push(C),C.headerGroup=S}),f.push(S),y>0&&d(w,y-1)},m=t.map((g,y)=>Vx(n,g,{depth:l,index:y}));d(m,l-1),f.reverse();const p=g=>g.filter(S=>S.column.getIsVisible()).map(S=>{let w=0,C=0,x=[0];S.subHeaders&&S.subHeaders.length?(x=[],p(S.subHeaders).forEach(k=>{let{colSpan:I,rowSpan:P}=k;w+=I,x.push(P)})):w=1;const E=Math.min(...x);return C=C+E,S.colSpan=w,S.rowSpan=C,{colSpan:w,rowSpan:C}});return p((i=(o=f[0])==null?void 0:o.headers)!=null?i:[]),f}const Nj=(e,t,n,r,i,o,l)=>{let c={id:t,index:r,original:n,depth:i,parentId:l,_valuesCache:{},_uniqueValuesCache:{},getValue:f=>{if(c._valuesCache.hasOwnProperty(f))return c._valuesCache[f];const d=e.getColumn(f);if(d!=null&&d.accessorFn)return c._valuesCache[f]=d.accessorFn(c.original,r),c._valuesCache[f]},getUniqueValues:f=>{if(c._uniqueValuesCache.hasOwnProperty(f))return c._uniqueValuesCache[f];const d=e.getColumn(f);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(c._uniqueValuesCache[f]=d.columnDef.getUniqueValues(c.original,r),c._uniqueValuesCache[f]):(c._uniqueValuesCache[f]=[c.getValue(f)],c._uniqueValuesCache[f])},renderValue:f=>{var d;return(d=c.getValue(f))!=null?d:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>Tj(c.subRows,f=>f.subRows),getParentRow:()=>c.parentId?e.getRow(c.parentId,!0):void 0,getParentRows:()=>{let f=[],d=c;for(;;){const m=d.getParentRow();if(!m)break;f.push(m),d=m}return f.reverse()},getAllCells:ze(()=>[e.getAllLeafColumns()],f=>f.map(d=>Oj(e,c,d,d.id)),Le(e.options,"debugRows")),_getAllCellsByColumnId:ze(()=>[c.getAllCells()],f=>f.reduce((d,m)=>(d[m.column.id]=m,d),{}),Le(e.options,"debugRows"))};for(let f=0;f<e._features.length;f++){const d=e._features[f];d==null||d.createRow==null||d.createRow(c,e)}return c},Dj={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},eR=(e,t,n)=>{var r,i;const o=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((i=e.getValue(t))==null||(i=i.toString())==null||(i=i.toLowerCase())==null)&&i.includes(o))};eR.autoRemove=e=>Dr(e);const tR=(e,t,n)=>{var r;return!!(!((r=e.getValue(t))==null||(r=r.toString())==null)&&r.includes(n))};tR.autoRemove=e=>Dr(e);const nR=(e,t,n)=>{var r;return((r=e.getValue(t))==null||(r=r.toString())==null?void 0:r.toLowerCase())===n?.toLowerCase()};nR.autoRemove=e=>Dr(e);const rR=(e,t,n)=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(n)};rR.autoRemove=e=>Dr(e);const iR=(e,t,n)=>!n.some(r=>{var i;return!((i=e.getValue(t))!=null&&i.includes(r))});iR.autoRemove=e=>Dr(e)||!(e!=null&&e.length);const sR=(e,t,n)=>n.some(r=>{var i;return(i=e.getValue(t))==null?void 0:i.includes(r)});sR.autoRemove=e=>Dr(e)||!(e!=null&&e.length);const oR=(e,t,n)=>e.getValue(t)===n;oR.autoRemove=e=>Dr(e);const aR=(e,t,n)=>e.getValue(t)==n;aR.autoRemove=e=>Dr(e);const y0=(e,t,n)=>{let[r,i]=n;const o=e.getValue(t);return o>=r&&o<=i};y0.resolveFilterValue=e=>{let[t,n]=e,r=typeof t!="number"?parseFloat(t):t,i=typeof n!="number"?parseFloat(n):n,o=t===null||Number.isNaN(r)?-1/0:r,l=n===null||Number.isNaN(i)?1/0:i;if(o>l){const c=o;o=l,l=c}return[o,l]};y0.autoRemove=e=>Dr(e)||Dr(e[0])&&Dr(e[1]);const bi={includesString:eR,includesStringSensitive:tR,equalsString:nR,arrIncludes:rR,arrIncludesAll:iR,arrIncludesSome:sR,equals:oR,weakEquals:aR,inNumberRange:y0};function Dr(e){return e==null||e===""}const zj={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:sr("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n?.getValue(e.id);return typeof r=="string"?bi.includesString:typeof r=="number"?bi.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?bi.equals:Array.isArray(r)?bi.arrIncludes:bi.weakEquals},e.getFilterFn=()=>{var n,r;return Td(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(r=t.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?n:bi[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,r,i;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((r=t.options.enableColumnFilters)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(r=>r.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,r;return(n=(r=t.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(r=>{const i=e.getFilterFn(),o=r?.find(m=>m.id===e.id),l=rs(n,o?o.value:void 0);if(Kx(i,l,e)){var c;return(c=r?.filter(m=>m.id!==e.id))!=null?c:[]}const f={id:e.id,value:l};if(o){var d;return(d=r?.map(m=>m.id===e.id?f:m))!=null?d:[]}return r!=null&&r.length?[...r,f]:[f]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),r=i=>{var o;return(o=rs(t,i))==null?void 0:o.filter(l=>{const c=n.find(f=>f.id===l.id);if(c){const f=c.getFilterFn();if(Kx(f,l.value,c))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},e.resetColumnFilters=t=>{var n,r;e.setColumnFilters(t?[]:(n=(r=e.initialState)==null?void 0:r.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function Kx(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const Lj=(e,t,n)=>n.reduce((r,i)=>{const o=i.getValue(e);return r+(typeof o=="number"?o:0)},0),Pj=(e,t,n)=>{let r;return n.forEach(i=>{const o=i.getValue(e);o!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}),r},jj=(e,t,n)=>{let r;return n.forEach(i=>{const o=i.getValue(e);o!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}),r},Fj=(e,t,n)=>{let r,i;return n.forEach(o=>{const l=o.getValue(e);l!=null&&(r===void 0?l>=l&&(r=i=l):(r>l&&(r=l),i<l&&(i=l)))}),[r,i]},$j=(e,t)=>{let n=0,r=0;if(t.forEach(i=>{let o=i.getValue(e);o!=null&&(o=+o)>=o&&(++n,r+=o)}),n)return r/n},Bj=(e,t)=>{if(!t.length)return;const n=t.map(o=>o.getValue(e));if(!Aj(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),i=n.sort((o,l)=>o-l);return n.length%2!==0?i[r]:(i[r-1]+i[r])/2},Uj=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),qj=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,Hj=(e,t)=>t.length,Um={sum:Lj,min:Pj,max:jj,extent:Fj,mean:$j,median:Bj,unique:Uj,uniqueCount:qj,count:Hj},Vj={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:sr("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(r=>r!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,r;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((r=t.options.enableGrouping)!=null?r:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n?.getValue(e.id);if(typeof r=="number")return Um.sum;if(Object.prototype.toString.call(r)==="[object Date]")return Um.extent},e.getAggregationFn=()=>{var n,r;if(!e)throw new Error;return Td(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(r=t.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?n:Um[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,r;e.setGrouping(t?[]:(n=(r=e.initialState)==null?void 0:r.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,r)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var i;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((i=n.subRows)!=null&&i.length)}}};function Kj(e,t,n){if(!(t!=null&&t.length)||!n)return e;const r=e.filter(o=>!t.includes(o.id));return n==="remove"?r:[...t.map(o=>e.find(l=>l.id===o)).filter(Boolean),...r]}const Gj={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:sr("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=ze(n=>[Zl(t,n)],n=>n.findIndex(r=>r.id===e.id),Le(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var r;return((r=Zl(t,n)[0])==null?void 0:r.id)===e.id},e.getIsLastColumn=n=>{var r;const i=Zl(t,n);return((r=i[i.length-1])==null?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=ze(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,r)=>i=>{let o=[];if(!(t!=null&&t.length))o=i;else{const l=[...t],c=[...i];for(;c.length&&l.length;){const f=l.shift(),d=c.findIndex(m=>m.id===f);d>-1&&o.push(c.splice(d,1)[0])}o=[...o,...c]}return Kj(o,n,r)},Le(e.options,"debugTable"))}},qm=()=>({left:[],right:[]}),Qj={getInitialState:e=>({columnPinning:qm(),...e}),getDefaultOptions:e=>({onColumnPinningChange:sr("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const r=e.getLeafColumns().map(i=>i.id).filter(Boolean);t.setColumnPinning(i=>{var o,l;if(n==="right"){var c,f;return{left:((c=i?.left)!=null?c:[]).filter(p=>!(r!=null&&r.includes(p))),right:[...((f=i?.right)!=null?f:[]).filter(p=>!(r!=null&&r.includes(p))),...r]}}if(n==="left"){var d,m;return{left:[...((d=i?.left)!=null?d:[]).filter(p=>!(r!=null&&r.includes(p))),...r],right:((m=i?.right)!=null?m:[]).filter(p=>!(r!=null&&r.includes(p)))}}return{left:((o=i?.left)!=null?o:[]).filter(p=>!(r!=null&&r.includes(p))),right:((l=i?.right)!=null?l:[]).filter(p=>!(r!=null&&r.includes(p)))}})},e.getCanPin=()=>e.getLeafColumns().some(r=>{var i,o,l;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((o=(l=t.options.enableColumnPinning)!=null?l:t.options.enablePinning)!=null?o:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(c=>c.id),{left:r,right:i}=t.getState().columnPinning,o=n.some(c=>r?.includes(c)),l=n.some(c=>i?.includes(c));return o?"left":l?"right":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();return i?(n=(r=t.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=ze(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,r,i)=>{const o=[...r??[],...i??[]];return n.filter(l=>!o.includes(l.column.id))},Le(t.options,"debugRows")),e.getLeftVisibleCells=ze(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,r)=>(r??[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"left"})),Le(t.options,"debugRows")),e.getRightVisibleCells=ze(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,r)=>(r??[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"right"})),Le(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,r;return e.setColumnPinning(t?qm():(n=(r=e.initialState)==null?void 0:r.columnPinning)!=null?n:qm())},e.getIsSomeColumnsPinned=t=>{var n;const r=e.getState().columnPinning;if(!t){var i,o;return!!((i=r.left)!=null&&i.length||(o=r.right)!=null&&o.length)}return!!((n=r[t])!=null&&n.length)},e.getLeftLeafColumns=ze(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),Le(e.options,"debugColumns")),e.getRightLeafColumns=ze(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),Le(e.options,"debugColumns")),e.getCenterLeafColumns=ze(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r)=>{const i=[...n??[],...r??[]];return t.filter(o=>!i.includes(o.id))},Le(e.options,"debugColumns"))}};function Zj(e){return e||(typeof document<"u"?document:null)}const Wc={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Hm=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Yj={getDefaultColumnDef:()=>Wc,getInitialState:e=>({columnSizing:{},columnSizingInfo:Hm(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:sr("columnSizing",e),onColumnSizingInfoChange:sr("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,r,i;const o=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:Wc.minSize,(r=o??e.columnDef.size)!=null?r:Wc.size),(i=e.columnDef.maxSize)!=null?i:Wc.maxSize)},e.getStart=ze(n=>[n,Zl(t,n),t.getState().columnSizing],(n,r)=>r.slice(0,e.getIndex(n)).reduce((i,o)=>i+o.getSize(),0),Le(t.options,"debugColumns")),e.getAfter=ze(n=>[n,Zl(t,n),t.getState().columnSizing],(n,r)=>r.slice(e.getIndex(n)+1).reduce((i,o)=>i+o.getSize(),0),Le(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:r,...i}=n;return i})},e.getCanResize=()=>{var n,r;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((r=t.options.enableColumnResizing)!=null?r:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var o;n+=(o=i.column.getSize())!=null?o:0}};return r(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const r=t.getColumn(e.column.id),i=r?.getCanResize();return o=>{if(!r||!i||(o.persist==null||o.persist(),Vm(o)&&o.touches&&o.touches.length>1))return;const l=e.getSize(),c=e?e.getLeafHeaders().map(x=>[x.column.id,x.column.getSize()]):[[r.id,r.getSize()]],f=Vm(o)?Math.round(o.touches[0].clientX):o.clientX,d={},m=(x,E)=>{typeof E=="number"&&(t.setColumnSizingInfo(k=>{var I,P;const R=t.options.columnResizeDirection==="rtl"?-1:1,M=(E-((I=k?.startOffset)!=null?I:0))*R,L=Math.max(M/((P=k?.startSize)!=null?P:0),-.999999);return k.columnSizingStart.forEach(j=>{let[N,U]=j;d[N]=Math.round(Math.max(U+U*L,0)*100)/100}),{...k,deltaOffset:M,deltaPercentage:L}}),(t.options.columnResizeMode==="onChange"||x==="end")&&t.setColumnSizing(k=>({...k,...d})))},p=x=>m("move",x),g=x=>{m("end",x),t.setColumnSizingInfo(E=>({...E,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},y=Zj(n),S={moveHandler:x=>p(x.clientX),upHandler:x=>{y?.removeEventListener("mousemove",S.moveHandler),y?.removeEventListener("mouseup",S.upHandler),g(x.clientX)}},w={moveHandler:x=>(x.cancelable&&(x.preventDefault(),x.stopPropagation()),p(x.touches[0].clientX),!1),upHandler:x=>{var E;y?.removeEventListener("touchmove",w.moveHandler),y?.removeEventListener("touchend",w.upHandler),x.cancelable&&(x.preventDefault(),x.stopPropagation()),g((E=x.touches[0])==null?void 0:E.clientX)}},C=Jj()?{passive:!1}:!1;Vm(o)?(y?.addEventListener("touchmove",w.moveHandler,C),y?.addEventListener("touchend",w.upHandler,C)):(y?.addEventListener("mousemove",S.moveHandler,C),y?.addEventListener("mouseup",S.upHandler,C)),t.setColumnSizingInfo(x=>({...x,startOffset:f,startSize:l,deltaOffset:0,deltaPercentage:0,columnSizingStart:c,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?Hm():(n=e.initialState.columnSizingInfo)!=null?n:Hm())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0}}};let ef=null;function Jj(){if(typeof ef=="boolean")return ef;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return ef=e,ef}function Vm(e){return e.type==="touchstart"}const Xj={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:sr("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(r=>({...r,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,r;const i=e.columns;return(n=i.length?i.some(o=>o.getIsVisible()):(r=t.getState().columnVisibility)==null?void 0:r[e.id])!=null?n:!0},e.getCanHide=()=>{var n,r;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((r=t.options.enableHiding)!=null?r:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=ze(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),Le(t.options,"debugRows")),e.getVisibleCells=ze(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,r,i)=>[...n,...r,...i],Le(t.options,"debugRows"))},createTable:e=>{const t=(n,r)=>ze(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),Le(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var r;e.setColumnVisibility(n?{}:(r=e.initialState.columnVisibility)!=null?r:{})},e.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((i,o)=>({...i,[o.id]:n||!(o.getCanHide!=null&&o.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;e.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function Zl(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Wj={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},e5={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:sr("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const r=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,r,i,o;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=t.options.enableGlobalFilter)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&((o=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?o:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>bi.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:r}=e.options;return Td(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[r])!=null?t:bi[r]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},t5={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:sr("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),e.toggleAllRowsExpanded=r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=r=>{var i,o;e.setExpanded(r?{}:(i=(o=e.initialState)==null?void 0:o.expanded)!=null?i:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},e.getIsAllRowsExpanded=()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},e.getExpandedDepth=()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(o=>{const l=o.split(".");r=Math.max(r,l.length)}),r},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(r=>{var i;const o=r===!0?!0:!!(r!=null&&r[e.id]);let l={};if(r===!0?Object.keys(t.getRowModel().rowsById).forEach(c=>{l[c]=!0}):l=r,n=(i=n)!=null?i:!o,!o&&n)return{...l,[e.id]:!0};if(o&&!n){const{[e.id]:c,...f}=l;return f}return r})},e.getIsExpanded=()=>{var n;const r=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:r===!0||r?.[e.id])},e.getCanExpand=()=>{var n,r,i;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((r=t.options.enableExpanding)!=null?r:!0)&&!!((i=e.subRows)!=null&&i.length)},e.getIsAllParentsExpanded=()=>{let n=!0,r=e;for(;n&&r.parentId;)r=t.getRow(r.parentId,!0),n=r.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},Wg=0,ey=10,Km=()=>({pageIndex:Wg,pageSize:ey}),n5={getInitialState:e=>({...e,pagination:{...Km(),...e?.pagination}}),getDefaultOptions:e=>({onPaginationChange:sr("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=r=>{const i=o=>rs(r,o);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(i)},e.resetPagination=r=>{var i;e.setPagination(r?Km():(i=e.initialState.pagination)!=null?i:Km())},e.setPageIndex=r=>{e.setPagination(i=>{let o=rs(r,i.pageIndex);const l=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return o=Math.max(0,Math.min(o,l)),{...i,pageIndex:o}})},e.resetPageIndex=r=>{var i,o;e.setPageIndex(r?Wg:(i=(o=e.initialState)==null||(o=o.pagination)==null?void 0:o.pageIndex)!=null?i:Wg)},e.resetPageSize=r=>{var i,o;e.setPageSize(r?ey:(i=(o=e.initialState)==null||(o=o.pagination)==null?void 0:o.pageSize)!=null?i:ey)},e.setPageSize=r=>{e.setPagination(i=>{const o=Math.max(1,rs(r,i.pageSize)),l=i.pageSize*i.pageIndex,c=Math.floor(l/o);return{...i,pageIndex:c,pageSize:o}})},e.setPageCount=r=>e.setPagination(i=>{var o;let l=rs(r,(o=e.options.pageCount)!=null?o:-1);return typeof l=="number"&&(l=Math.max(-1,l)),{...i,pageCount:l}}),e.getPageOptions=ze(()=>[e.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((o,l)=>l)),i},Le(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:r}=e.getState().pagination,i=e.getPageCount();return i===-1?!0:i===0?!1:r<i-1},e.previousPage=()=>e.setPageIndex(r=>r-1),e.nextPage=()=>e.setPageIndex(r=>r+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var r;return(r=e.options.rowCount)!=null?r:e.getPrePaginationRowModel().rows.length}}},Gm=()=>({top:[],bottom:[]}),r5={getInitialState:e=>({rowPinning:Gm(),...e}),getDefaultOptions:e=>({onRowPinningChange:sr("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,r,i)=>{const o=r?e.getLeafRows().map(f=>{let{id:d}=f;return d}):[],l=i?e.getParentRows().map(f=>{let{id:d}=f;return d}):[],c=new Set([...l,e.id,...o]);t.setRowPinning(f=>{var d,m;if(n==="bottom"){var p,g;return{top:((p=f?.top)!=null?p:[]).filter(w=>!(c!=null&&c.has(w))),bottom:[...((g=f?.bottom)!=null?g:[]).filter(w=>!(c!=null&&c.has(w))),...Array.from(c)]}}if(n==="top"){var y,S;return{top:[...((y=f?.top)!=null?y:[]).filter(w=>!(c!=null&&c.has(w))),...Array.from(c)],bottom:((S=f?.bottom)!=null?S:[]).filter(w=>!(c!=null&&c.has(w)))}}return{top:((d=f?.top)!=null?d:[]).filter(w=>!(c!=null&&c.has(w))),bottom:((m=f?.bottom)!=null?m:[]).filter(w=>!(c!=null&&c.has(w)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:i}=t.options;return typeof r=="function"?r(e):(n=r??i)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:r,bottom:i}=t.getState().rowPinning,o=n.some(c=>r?.includes(c)),l=n.some(c=>i?.includes(c));return o?"top":l?"bottom":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();if(!i)return-1;const o=(n=i==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(l=>{let{id:c}=l;return c});return(r=o?.indexOf(e.id))!=null?r:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,r;return e.setRowPinning(t?Gm():(n=(r=e.initialState)==null?void 0:r.rowPinning)!=null?n:Gm())},e.getIsSomeRowsPinned=t=>{var n;const r=e.getState().rowPinning;if(!t){var i,o;return!!((i=r.top)!=null&&i.length||(o=r.bottom)!=null&&o.length)}return!!((n=r[t])!=null&&n.length)},e._getPinnedRows=(t,n,r)=>{var i;return((i=e.options.keepPinnedRows)==null||i?(n??[]).map(l=>{const c=e.getRow(l,!0);return c.getIsAllParentsExpanded()?c:null}):(n??[]).map(l=>t.find(c=>c.id===l))).filter(Boolean).map(l=>({...l,position:r}))},e.getTopRows=ze(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),Le(e.options,"debugRows")),e.getBottomRows=ze(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),Le(e.options,"debugRows")),e.getCenterRows=ze(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,r)=>{const i=new Set([...n??[],...r??[]]);return t.filter(o=>!i.has(o.id))},Le(e.options,"debugRows"))}},i5={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:sr("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const r={...n},i=e.getPreGroupedRowModel().flatRows;return t?i.forEach(o=>{o.getCanSelect()&&(r[o.id]=!0)}):i.forEach(o=>{delete r[o.id]}),r})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const r=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),i={...n};return e.getRowModel().rows.forEach(o=>{ty(i,o.id,r,!0,e)}),i}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=ze(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Qm(e,n):{rows:[],flatRows:[],rowsById:{}},Le(e.options,"debugTable")),e.getFilteredSelectedRowModel=ze(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Qm(e,n):{rows:[],flatRows:[],rowsById:{}},Le(e.options,"debugTable")),e.getGroupedSelectedRowModel=ze(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Qm(e,n):{rows:[],flatRows:[],rowsById:{}},Le(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=!!(t.length&&Object.keys(n).length);return r&&t.some(i=>i.getCanSelect()&&!n[i.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some(i=>!n[i.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,r)=>{const i=e.getIsSelected();t.setRowSelection(o=>{var l;if(n=typeof n<"u"?n:!i,e.getCanSelect()&&i===n)return o;const c={...o};return ty(c,e.id,n,(l=r?.selectChildren)!=null?l:!0,t),c})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return v0(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return ny(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return ny(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return r=>{var i;n&&e.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},ty=(e,t,n,r,i)=>{var o;const l=i.getRow(t,!0);n?(l.getCanMultiSelect()||Object.keys(e).forEach(c=>delete e[c]),l.getCanSelect()&&(e[t]=!0)):delete e[t],r&&(o=l.subRows)!=null&&o.length&&l.getCanSelectSubRows()&&l.subRows.forEach(c=>ty(e,c.id,n,r,i))};function Qm(e,t){const n=e.getState().rowSelection,r=[],i={},o=function(l,c){return l.map(f=>{var d;const m=v0(f,n);if(m&&(r.push(f),i[f.id]=f),(d=f.subRows)!=null&&d.length&&(f={...f,subRows:o(f.subRows)}),m)return f}).filter(Boolean)};return{rows:o(t.rows),flatRows:r,rowsById:i}}function v0(e,t){var n;return(n=t[e.id])!=null?n:!1}function ny(e,t,n){var r;if(!((r=e.subRows)!=null&&r.length))return!1;let i=!0,o=!1;return e.subRows.forEach(l=>{if(!(o&&!i)&&(l.getCanSelect()&&(v0(l,t)?o=!0:i=!1),l.subRows&&l.subRows.length)){const c=ny(l,t);c==="all"?o=!0:(c==="some"&&(o=!0),i=!1)}}),i?"all":o?"some":!1}const ry=/([0-9]+)/gm,s5=(e,t,n)=>lR(ls(e.getValue(n)).toLowerCase(),ls(t.getValue(n)).toLowerCase()),o5=(e,t,n)=>lR(ls(e.getValue(n)),ls(t.getValue(n))),a5=(e,t,n)=>b0(ls(e.getValue(n)).toLowerCase(),ls(t.getValue(n)).toLowerCase()),l5=(e,t,n)=>b0(ls(e.getValue(n)),ls(t.getValue(n))),u5=(e,t,n)=>{const r=e.getValue(n),i=t.getValue(n);return r>i?1:r<i?-1:0},c5=(e,t,n)=>b0(e.getValue(n),t.getValue(n));function b0(e,t){return e===t?0:e>t?1:-1}function ls(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function lR(e,t){const n=e.split(ry).filter(Boolean),r=t.split(ry).filter(Boolean);for(;n.length&&r.length;){const i=n.shift(),o=r.shift(),l=parseInt(i,10),c=parseInt(o,10),f=[l,c].sort();if(isNaN(f[0])){if(i>o)return 1;if(o>i)return-1;continue}if(isNaN(f[1]))return isNaN(l)?-1:1;if(l>c)return 1;if(c>l)return-1}return n.length-r.length}const _l={alphanumeric:s5,alphanumericCaseSensitive:o5,text:a5,textCaseSensitive:l5,datetime:u5,basic:c5},f5={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:sr("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of n){const o=i?.getValue(e.id);if(Object.prototype.toString.call(o)==="[object Date]")return _l.datetime;if(typeof o=="string"&&(r=!0,o.split(ry).length>1))return _l.alphanumeric}return r?_l.text:_l.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof n?.getValue(e.id)=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,r;if(!e)throw new Error;return Td(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(r=t.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?n:_l[e.columnDef.sortingFn]},e.toggleSorting=(n,r)=>{const i=e.getNextSortingOrder(),o=typeof n<"u"&&n!==null;t.setSorting(l=>{const c=l?.find(y=>y.id===e.id),f=l?.findIndex(y=>y.id===e.id);let d=[],m,p=o?n:i==="desc";if(l!=null&&l.length&&e.getCanMultiSort()&&r?c?m="toggle":m="add":l!=null&&l.length&&f!==l.length-1?m="replace":c?m="toggle":m="replace",m==="toggle"&&(o||i||(m="remove")),m==="add"){var g;d=[...l,{id:e.id,desc:p}],d.splice(0,d.length-((g=t.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else m==="toggle"?d=l.map(y=>y.id===e.id?{...y,desc:p}:y):m==="remove"?d=l.filter(y=>y.id!==e.id):d=[{id:e.id,desc:p}];return d})},e.getFirstSortDir=()=>{var n,r;return((n=(r=e.columnDef.sortDescFirst)!=null?r:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var r,i;const o=e.getFirstSortDir(),l=e.getIsSorted();return l?l!==o&&((r=t.options.enableSortingRemoval)==null||r)&&(!(n&&(i=t.options.enableMultiRemove)!=null)||i)?!1:l==="desc"?"asc":"desc":o},e.getCanSort=()=>{var n,r;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((r=t.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,r;return(n=(r=e.columnDef.enableMultiSort)!=null?r:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const r=(n=t.getState().sorting)==null?void 0:n.find(i=>i.id===e.id);return r?r.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,r;return(n=(r=t.getState().sorting)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return r=>{n&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(r):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,r;e.setSorting(t?[]:(n=(r=e.initialState)==null?void 0:r.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},d5=[Ij,Xj,Gj,Qj,Dj,zj,Wj,e5,f5,Vj,t5,n5,r5,i5,Yj];function h5(e){var t,n;const r=[...d5,...(t=e._features)!=null?t:[]];let i={_features:r};const o=i._features.reduce((g,y)=>Object.assign(g,y.getDefaultOptions==null?void 0:y.getDefaultOptions(i)),{}),l=g=>i.options.mergeOptions?i.options.mergeOptions(o,g):{...o,...g};let f={...{},...(n=e.initialState)!=null?n:{}};i._features.forEach(g=>{var y;f=(y=g.getInitialState==null?void 0:g.getInitialState(f))!=null?y:f});const d=[];let m=!1;const p={_features:r,options:{...o,...e},initialState:f,_queue:g=>{d.push(g),m||(m=!0,Promise.resolve().then(()=>{for(;d.length;)d.shift()();m=!1}).catch(y=>setTimeout(()=>{throw y})))},reset:()=>{i.setState(i.initialState)},setOptions:g=>{const y=rs(g,i.options);i.options=l(y)},getState:()=>i.options.state,setState:g=>{i.options.onStateChange==null||i.options.onStateChange(g)},_getRowId:(g,y,S)=>{var w;return(w=i.options.getRowId==null?void 0:i.options.getRowId(g,y,S))!=null?w:`${S?[S.id,y].join("."):y}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(g,y)=>{let S=(y?i.getPrePaginationRowModel():i.getRowModel()).rowsById[g];if(!S&&(S=i.getCoreRowModel().rowsById[g],!S))throw new Error;return S},_getDefaultColumnDef:ze(()=>[i.options.defaultColumn],g=>{var y;return g=(y=g)!=null?y:{},{header:S=>{const w=S.header.column.columnDef;return w.accessorKey?w.accessorKey:w.accessorFn?w.id:null},cell:S=>{var w,C;return(w=(C=S.renderValue())==null||C.toString==null?void 0:C.toString())!=null?w:null},...i._features.reduce((S,w)=>Object.assign(S,w.getDefaultColumnDef==null?void 0:w.getDefaultColumnDef()),{}),...g}},Le(e,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:ze(()=>[i._getColumnDefs()],g=>{const y=function(S,w,C){return C===void 0&&(C=0),S.map(x=>{const E=Mj(i,x,C,w),k=x;return E.columns=k.columns?y(k.columns,E,C+1):[],E})};return y(g)},Le(e,"debugColumns")),getAllFlatColumns:ze(()=>[i.getAllColumns()],g=>g.flatMap(y=>y.getFlatColumns()),Le(e,"debugColumns")),_getAllFlatColumnsById:ze(()=>[i.getAllFlatColumns()],g=>g.reduce((y,S)=>(y[S.id]=S,y),{}),Le(e,"debugColumns")),getAllLeafColumns:ze(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(g,y)=>{let S=g.flatMap(w=>w.getLeafColumns());return y(S)},Le(e,"debugColumns")),getColumn:g=>i._getAllFlatColumnsById()[g]};Object.assign(i,p);for(let g=0;g<i._features.length;g++){const y=i._features[g];y==null||y.createTable==null||y.createTable(i)}return i}function p5(){return e=>ze(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(i,o,l){o===void 0&&(o=0);const c=[];for(let d=0;d<i.length;d++){const m=Nj(e,e._getRowId(i[d],d,l),i[d],d,o,void 0,l?.id);if(n.flatRows.push(m),n.rowsById[m.id]=m,c.push(m),e.options.getSubRows){var f;m.originalSubRows=e.options.getSubRows(i[d],d),(f=m.originalSubRows)!=null&&f.length&&(m.subRows=r(m.originalSubRows,o+1,m))}}return c};return n.rows=r(t),n},Le(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function m5(){return e=>ze(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const r=e.getState().sorting,i=[],o=r.filter(f=>{var d;return(d=e.getColumn(f.id))==null?void 0:d.getCanSort()}),l={};o.forEach(f=>{const d=e.getColumn(f.id);d&&(l[f.id]={sortUndefined:d.columnDef.sortUndefined,invertSorting:d.columnDef.invertSorting,sortingFn:d.getSortingFn()})});const c=f=>{const d=f.map(m=>({...m}));return d.sort((m,p)=>{for(let y=0;y<o.length;y+=1){var g;const S=o[y],w=l[S.id],C=w.sortUndefined,x=(g=S?.desc)!=null?g:!1;let E=0;if(C){const k=m.getValue(S.id),I=p.getValue(S.id),P=k===void 0,R=I===void 0;if(P||R){if(C==="first")return P?-1:1;if(C==="last")return P?1:-1;E=P&&R?0:P?C:-C}}if(E===0&&(E=w.sortingFn(m,p,S.id)),E!==0)return x&&(E*=-1),w.invertSorting&&(E*=-1),E}return m.index-p.index}),d.forEach(m=>{var p;i.push(m),(p=m.subRows)!=null&&p.length&&(m.subRows=c(m.subRows))}),d};return{rows:c(n.rows),flatRows:i,rowsById:n.rowsById}},Le(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}function Gx(e,t){return e?g5(e)?H.createElement(e,t):e:null}function g5(e){return y5(e)||typeof e=="function"||v5(e)}function y5(e){return typeof e=="function"&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}function v5(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function b5(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=H.useState(()=>({current:h5(t)})),[r,i]=H.useState(()=>n.current.initialState);return n.current.setOptions(o=>({...o,...e,state:{...r,...e.state},onStateChange:l=>{i(l),e.onStateChange==null||e.onStateChange(l)}})),n.current}function S5(e){const t=_i.c(29),{getValue:n,row:r,column:i,table:o}=e,{index:l}=r,{id:c}=i;let f;t[0]!==n?(f=n(),t[0]=n,t[1]=f):f=t[1];const d=f,[m,p]=H.useState(d),[g,y]=H.useState(!1);let S,w;t[2]!==d?(S=()=>{p(d)},w=[d],t[2]=d,t[3]=S,t[4]=w):(S=t[3],w=t[4]),H.useEffect(S,w);let C;t[5]!==c||t[6]!==l||t[7]!==d||t[8]!==o||t[9]!==m?(C=()=>{y(!1),m!==d&&o.options.meta?.updateData(l,c,m)},t[5]=c,t[6]=l,t[7]=d,t[8]=o,t[9]=m,t[10]=C):C=t[10];const x=C;let E;t[11]!==d?(E=M=>{M.key==="Enter"&&M.target.blur(),M.key==="Escape"&&(p(d),y(!1))},t[11]=d,t[12]=E):E=t[12];const k=E;if(d===null&&!g){let M;return t[13]===Symbol.for("react.memo_cache_sentinel")?(M=O.jsx("span",{className:"text-neutral-400 dark:text-neutral-600 italic cursor-pointer",onClick:()=>y(!0),children:"NULL"}),t[13]=M):M=t[13],M}if(typeof d=="boolean"&&!g){let M;t[14]===Symbol.for("react.memo_cache_sentinel")?(M=()=>y(!0),t[14]=M):M=t[14];const L=d?"true":"false";let j;return t[15]!==L?(j=O.jsx("span",{className:"text-neutral-500 dark:text-neutral-400 cursor-pointer",onClick:M,children:L}),t[15]=L,t[16]=j):j=t[16],j}if(typeof d=="object"&&d!==null){let M;t[17]!==d?(M=JSON.stringify(d),t[17]=d,t[18]=M):M=t[18];let L;return t[19]!==M?(L=O.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:M}),t[19]=M,t[20]=L):L=t[20],L}if(g){const M=m===null?"":String(m);let L;t[21]===Symbol.for("react.memo_cache_sentinel")?(L=N=>p(N.target.value),t[21]=L):L=t[21];let j;return t[22]!==k||t[23]!==x||t[24]!==M?(j=O.jsx("input",{value:M,onChange:L,onBlur:x,onKeyDown:k,autoFocus:!0,className:"w-full bg-white dark:bg-neutral-800 border border-blue-500 dark:border-blue-400 rounded px-1 py-0.5 text-[12px] font-mono text-neutral-700 dark:text-neutral-200 outline-none"}),t[22]=k,t[23]=x,t[24]=M,t[25]=j):j=t[25],j}let I;t[26]===Symbol.for("react.memo_cache_sentinel")?(I=()=>y(!0),t[26]=I):I=t[26];const P=String(m);let R;return t[27]!==P?(R=O.jsx("span",{className:"text-neutral-600 dark:text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-200",onClick:I,children:P}),t[27]=P,t[28]=R):R=t[28],R}function w5(e){const t=_i.c(8),{getValue:n}=e;let r,i;if(t[0]!==n){r=Symbol.for("react.early_return_sentinel");e:{if(i=n(),i===null){let c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=O.jsx("span",{className:"text-neutral-400 dark:text-neutral-600 italic",children:"NULL"}),t[3]=c):c=t[3],r=c;break e}if(typeof i=="boolean"){const c=i?"true":"false";let f;t[4]!==c?(f=O.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:c}),t[4]=c,t[5]=f):f=t[5],r=f;break e}if(typeof i=="object"){r=O.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:JSON.stringify(i)});break e}}t[0]=n,t[1]=r,t[2]=i}else r=t[1],i=t[2];if(r!==Symbol.for("react.early_return_sentinel"))return r;const o=String(i);let l;return t[6]!==o?(l=O.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:o}),t[6]=o,t[7]=l):l=t[7],l}function _5({response:e,duration:t,isLoading:n,tableName:r,onUpdateCell:i,onDeleteRow:o}){const[l,c]=H.useState([]),[f,d]=H.useState([]),[m,p]=H.useState(null),g=!!r&&!!i,y=!!r&&!!o;H.useEffect(()=>{d(e?.rows??[])},[e?.rows]);const S=H.useMemo(()=>{if(!e?.columns)return[];const C=e.columns.map(x=>({accessorKey:x,header:x,cell:g?S5:w5}));return y&&C.push({id:"actions",header:"",size:50,cell:({row:x})=>{const E=m===x.index;return O.jsx("div",{className:"flex items-center gap-1",children:E?O.jsxs(O.Fragment,{children:[O.jsx("button",{onClick:()=>{o?.(x.original),p(null)},className:"p-1 text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300",title:"Confirm delete",children:O.jsx(qf,{size:14})}),O.jsx("button",{onClick:()=>p(null),className:"p-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 text-xs",title:"Cancel",children:""})]}):O.jsx("button",{onClick:()=>p(x.index),className:"p-1 text-neutral-400 hover:text-red-500 dark:hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete row",children:O.jsx(qf,{size:14})})})}}),C},[e?.columns,g,y,m,o]),w=b5({data:f,columns:S,state:{sorting:l},onSortingChange:c,getCoreRowModel:p5(),getSortedRowModel:m5(),meta:{updateData:(C,x,E)=>{const k=f[C];d(I=>I.map((P,R)=>R===C?{...P,[x]:E}:P)),i?.(k,x,E)}}});return n?O.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:O.jsxs("div",{className:"flex flex-col items-center gap-3 text-neutral-400 dark:text-neutral-500",children:[O.jsx("div",{className:"w-6 h-6 border-2 border-neutral-200 border-t-neutral-400 dark:border-neutral-700 dark:border-t-neutral-500 rounded-full animate-spin"}),O.jsx("span",{className:"text-sm",children:"Running query..."})]})}):e?e.error?O.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:O.jsxs("div",{className:"flex items-center gap-3 text-red-500 dark:text-red-400",children:[O.jsx(eD,{size:18}),O.jsx("span",{className:"text-sm",children:e.error})]})}):e.rows_affected!==void 0&&!e.rows?O.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:O.jsxs("div",{className:"flex flex-col items-center gap-2",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-500/30",children:"OK"}),O.jsxs("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[O.jsx("span",{className:"font-medium",children:e.rows_affected})," row(s) affected"]})]}),O.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-600",children:[t.toFixed(0),"ms"]})]})}):O.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden dark:shadow-2xl",children:[O.jsx("div",{className:"flex-1 overflow-auto",children:O.jsxs("table",{className:"w-full text-[13px]",children:[O.jsx("thead",{className:"sticky top-0 z-10 bg-neutral-100 dark:bg-neutral-950",children:w.getHeaderGroups().map(C=>O.jsx("tr",{children:C.headers.map(x=>{const E=x.column.getIsSorted(),k=x.id==="actions";return O.jsx("th",{onClick:k?void 0:x.column.getToggleSortingHandler(),className:`text-left px-4 py-2 text-[11px] font-medium whitespace-nowrap transition-colors select-none group bg-neutral-100 dark:bg-neutral-950 ${k?"w-12":"cursor-pointer"} ${E?"text-neutral-900 dark:text-neutral-200":"text-neutral-500 dark:text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-400"}`,children:!k&&O.jsxs("div",{className:"flex items-center gap-1",children:[Gx(x.column.columnDef.header,x.getContext()),O.jsx("span",{className:`transition-opacity ${E?"opacity-100":"opacity-0 group-hover:opacity-40"}`,children:E==="asc"?O.jsx(vE,{size:12}):E==="desc"?O.jsx(yE,{size:12}):O.jsx(_N,{size:12})})]})},x.id)})},C.id))}),O.jsx("tbody",{children:w.getRowModel().rows.map((C,x)=>{const E=x%2===1,k=C.getVisibleCells();return O.jsx("tr",{className:`group transition-colors ${E?"bg-neutral-200/40 dark:bg-neutral-800/30 hover:bg-neutral-200/70 dark:hover:bg-neutral-800/50":"hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30"}`,children:k.map((I,P)=>O.jsx("td",{className:`px-4 py-2 whitespace-nowrap font-mono text-[12px] ${P===0?"rounded-l-lg":""} ${P===k.length-1?"rounded-r-lg":""}`,children:Gx(I.column.columnDef.cell,I.getContext())},I.id))},C.id)})})]})}),O.jsxs("div",{className:"px-3 py-2 flex items-center gap-4 text-xs border-t border-neutral-200 dark:border-white/8 shrink-0",children:[O.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-500/30",children:"OK"}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Time:"}),O.jsxs("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:[t.toFixed(0),"ms"]})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Rows:"}),O.jsx("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:f.length})]}),g&&O.jsx("div",{className:"ml-auto text-neutral-400 dark:text-neutral-600 text-[10px]",children:"Click a cell to edit"})]})]}):O.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:O.jsxs("div",{className:"flex flex-col items-center text-neutral-400 dark:text-neutral-500",children:[O.jsx("svg",{className:"w-8 h-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),O.jsx("span",{className:"text-sm",children:"Run a query to see results"})]})})}class x5{#e=!0;#t;#n;#r;#i;#a;#s;#o;#p=0;#m=5;#u=!1;#c=!1;#l=null;#f=()=>{this.debugLog("Connected to event bus"),this.#a=!0,this.#u=!1,this.debugLog("Emitting queued events",this.#i),this.#i.forEach(t=>this.emitEventToBus(t)),this.#i=[],this.stopConnectLoop(),this.#n().removeEventListener("tanstack-connect-success",this.#f)};#d=()=>{if(this.#p<this.#m){this.#p++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#n().removeEventListener("tanstack-connect",this.#d),this.#c=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#h=()=>{this.#u||(this.#u=!0,this.#n().addEventListener("tanstack-connect-success",this.#f),this.#d())};constructor({pluginId:t,debug:n=!1,enabled:r=!0,reconnectEveryMs:i=300}){this.#t=t,this.#e=r,this.#n=this.getGlobalTarget,this.#r=n,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#i=[],this.#a=!1,this.#c=!1,this.#s=null,this.#o=i}startConnectLoop(){this.#s!==null||this.#a||(this.debugLog(`Starting connect loop (every ${this.#o}ms)`),this.#s=setInterval(this.#d,this.#o))}stopConnectLoop(){this.#u=!1,this.#s!==null&&(clearInterval(this.#s),this.#s=null,this.#i=[],this.debugLog("Stopped connect loop"))}debugLog(...t){this.#r&&console.log(` [tanstack-devtools:${this.#t}-plugin]`,...t)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const t=typeof EventTarget<"u"?new EventTarget:void 0;return typeof t>"u"||typeof t.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),t)}getPluginId(){return this.#t}dispatchCustomEventShim(t,n){try{const r=new Event(t,{detail:n});this.#n().dispatchEvent(r)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(t,n){try{this.#n().dispatchEvent(new CustomEvent(t,{detail:n}))}catch{this.dispatchCustomEventShim(t,n)}}emitEventToBus(t){this.debugLog("Emitting event to client bus",t),this.dispatchCustomEvent("tanstack-dispatch-event",t)}createEventPayload(t,n){return{type:`${this.#t}:${t}`,payload:n,pluginId:this.#t}}emit(t,n){if(!this.#e){this.debugLog("Event bus client is disabled, not emitting event",t,n);return}if(this.#l&&(this.debugLog("Emitting event to internal event target",t,n),this.#l.dispatchEvent(new CustomEvent(`${this.#t}:${t}`,{detail:this.createEventPayload(t,n)}))),this.#c){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#a){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#i.push(this.createEventPayload(t,n)),typeof CustomEvent<"u"&&!this.#u&&(this.#h(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(t,n))}on(t,n,r){const i=r?.withEventTarget??!1,o=`${this.#t}:${t}`;if(i&&(this.#l||(this.#l=new EventTarget),this.#l.addEventListener(o,c=>{n(c.detail)})),!this.#e)return this.debugLog("Event bus client is disabled, not registering event",o),()=>{};const l=c=>{this.debugLog("Received event from bus",c.detail),n(c.detail)};return this.#n().addEventListener(o,l),this.debugLog("Registered event to bus",o),()=>{i&&this.#l?.removeEventListener(o,l),this.#n().removeEventListener(o,l)}}onAll(t){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const i=r.detail;t(i)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(t){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const i=r.detail;this.#t&&i.pluginId!==this.#t||t(i)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}}class C5 extends x5{constructor(){super({pluginId:"tanstack-ai-devtools"})}}const Ut=new C5;async function E5(e){let t="";for await(const n of e)n.type==="content"&&n.delta&&(t+=n.delta);return t}function R5(e){return typeof e=="object"&&e!==null&&"~standard"in e&&typeof e["~standard"]=="object"&&e["~standard"].version===1&&typeof e["~standard"].jsonSchema=="object"&&typeof e["~standard"].jsonSchema.input=="function"}function Ks(e){return typeof e=="object"&&e!==null&&"~standard"in e&&typeof e["~standard"]=="object"&&e!==null&&e["~standard"]!==null&&"version"in e["~standard"]&&e["~standard"].version===1&&"validate"in e["~standard"]&&typeof e["~standard"].validate=="function"}function Yl(e,t=[]){const n={...e};if(n.type==="object"&&n.properties){const r={...n.properties},i=Object.keys(r);for(const o of i){const l=r[o],c=!t.includes(o);l.type==="object"&&l.properties?r[o]=Yl(l,l.required||[]):l.type==="array"&&l.items?r[o]={...l,items:Yl(l.items,l.items.required||[])}:c&&(l.type&&!Array.isArray(l.type)?r[o]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[o]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=i,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=Yl(n.items,n.items.required||[])),n}function iy(e,t={}){if(!e)return;const{forStructuredOutput:n=!1}=t;if(R5(e)){let i=e["~standard"].jsonSchema.input({target:"draft-07"});if(typeof i=="object"&&"$schema"in i){const{$schema:o,...l}=i;i=l}return typeof i=="object"&&("properties"in i&&!i.type&&(i.type="object"),i.type==="object"&&!("properties"in i)&&(i.properties={}),i.type==="object"&&!("required"in i)&&(i.required=[]),n&&(i=Yl(i,i.required||[]))),i}return n&&typeof e=="object"?Yl(e,e.required||[]):e}function la(e,t){if(!Ks(e))return t;const n=e["~standard"].validate(t);if(n instanceof Promise)throw new Error("Schema validation returned a Promise. Use validateWithStandardSchema for async validation.");if(!n.issues)return n.value;const r=n.issues.map(i=>i.message||"Validation failed").join(", ");throw new Error(`Validation failed: ${r}`)}class k5{constructor(t){this.toolCallsMap=new Map,this.tools=t}addToolCallChunk(t){const n=t.index,r=this.toolCallsMap.get(n);r?(t.toolCall.function.name&&!r.function.name&&(r.function.name=t.toolCall.function.name),t.toolCall.function.arguments&&(r.function.arguments+=t.toolCall.function.arguments)):t.toolCall.id&&t.toolCall.function.name&&this.toolCallsMap.set(n,{id:t.toolCall.id,type:"function",function:{name:t.toolCall.function.name,arguments:t.toolCall.function.arguments||""}})}hasToolCalls(){return this.getToolCalls().length>0}getToolCalls(){return Array.from(this.toolCallsMap.values()).filter(t=>t.id&&t.function.name&&t.function.name.trim().length>0)}async*executeTools(t){const n=this.getToolCalls(),r=[];for(const i of n){const o=this.tools.find(c=>c.name===i.function.name);let l;if(o?.execute)try{let c;try{c=JSON.parse(i.function.arguments)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${i.function.arguments}`)}if(o.inputSchema&&Ks(o.inputSchema))try{c=la(o.inputSchema,c)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Input validation failed for tool ${o.name}: ${m}`)}let f=await o.execute(c);if(o.outputSchema&&Ks(o.outputSchema)&&f!==void 0&&f!==null)try{f=la(o.outputSchema,f)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Output validation failed for tool ${o.name}: ${m}`)}l=typeof f=="string"?f:JSON.stringify(f)}catch(c){l=`Error executing tool: ${c instanceof Error?c.message:"Unknown error"}`}else l=`Tool ${i.function.name} does not have an execute function`;yield{type:"tool_result",id:t.id,model:t.model,timestamp:Date.now(),toolCallId:i.id,content:l},r.push({role:"tool",content:l,toolCallId:i.id})}return r}clear(){this.toolCallsMap.clear()}}async function Qx(e,t,n=new Map,r=new Map){const i=[],o=[],l=[],c=new Map;for(const f of t)c.set(f.name,f);for(const f of e){const d=c.get(f.function.name),m=f.function.name;if(!d){i.push({toolCallId:f.id,toolName:m,result:{error:`Unknown tool: ${m}`},state:"output-error"});continue}let p={};const g=f.function.arguments.trim()||"{}";try{p=JSON.parse(g)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${g}`)}if(d.inputSchema&&Ks(d.inputSchema))try{p=la(d.inputSchema,p)}catch(S){const w=S instanceof Error?S.message:"Validation failed";i.push({toolCallId:f.id,toolName:m,result:{error:`Input validation failed for tool ${d.name}: ${w}`},state:"output-error"});continue}if(!d.execute){if(d.needsApproval){const S=`approval_${f.id}`;n.has(S)?n.get(S)?r.has(f.id)?i.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p}):i.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"}):o.push({toolCallId:f.id,toolName:f.function.name,input:p,approvalId:S})}else r.has(f.id)?i.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p});continue}if(d.needsApproval){const S=`approval_${f.id}`;if(n.has(S))if(n.get(S)){const C=Date.now();try{let x=await d.execute(p);const E=Date.now()-C;d.outputSchema&&Ks(d.outputSchema)&&x!==void 0&&x!==null&&(x=la(d.outputSchema,x)),i.push({toolCallId:f.id,toolName:m,result:typeof x=="string"?JSON.parse(x):x||null,duration:E})}catch(x){const E=Date.now()-C,k=x instanceof Error?x.message:"Unknown error";i.push({toolCallId:f.id,toolName:m,result:{error:k},state:"output-error",duration:E})}}else i.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"});else o.push({toolCallId:f.id,toolName:m,input:p,approvalId:S});continue}const y=Date.now();try{let S=await d.execute(p);const w=Date.now()-y;d.outputSchema&&Ks(d.outputSchema)&&S!==void 0&&S!==null&&(S=la(d.outputSchema,S)),i.push({toolCallId:f.id,toolName:m,result:typeof S=="string"?JSON.parse(S):S||null,duration:w})}catch(S){const w=Date.now()-y,C=S instanceof Error?S.message:"Unknown error";i.push({toolCallId:f.id,toolName:m,result:{error:C},state:"output-error",duration:w})}}return{results:i,needsApproval:o,needsClientExecution:l}}function uR(e){return({iterationCount:t})=>t<e}class cR{constructor(t){this.iterationCount=0,this.lastFinishReason=null,this.streamStartTime=0,this.totalChunkCount=0,this.currentMessageId=null,this.accumulatedContent="",this.doneChunk=null,this.shouldEmitStreamEnd=!0,this.earlyTermination=!1,this.toolPhase="continue",this.cyclePhase="processText",this.adapter=t.adapter,this.params=t.params,this.systemPrompts=t.params.systemPrompts||[],this.tools=t.params.tools||[],this.loopStrategy=t.params.agentLoopStrategy||uR(5),this.toolCallManager=new k5(this.tools),this.initialMessageCount=t.params.messages.length,this.messages=t.params.messages,this.requestId=this.createId("chat"),this.streamId=this.createId("stream"),this.effectiveRequest=t.params.abortController?{signal:t.params.abortController.signal}:void 0,this.effectiveSignal=t.params.abortController?.signal}getAccumulatedContent(){return this.accumulatedContent}getMessages(){return this.messages}async*run(){this.beforeRun();try{if((yield*this.checkForPendingToolCalls())==="wait")return;do{if(this.earlyTermination||this.isAborted())return;this.beginCycle(),this.cyclePhase==="processText"?yield*this.streamModelResponse():yield*this.processToolCalls(),this.endCycle()}while(this.shouldContinue())}finally{this.afterRun()}}beforeRun(){this.streamStartTime=Date.now();const{model:t,tools:n,temperature:r,topP:i,maxTokens:o,metadata:l,modelOptions:c,conversationId:f}=this.params,d={};r!==void 0&&(d.temperature=r),i!==void 0&&(d.topP=i),o!==void 0&&(d.maxTokens=o),l!==void 0&&(d.metadata=l),Ut.emit("text:started",{requestId:this.requestId,streamId:this.streamId,model:t,provider:this.adapter.name,messageCount:this.initialMessageCount,hasTools:!!n&&n.length>0,streaming:!0,timestamp:Date.now(),clientId:f,toolNames:n?.map(m=>m.name),options:Object.keys(d).length>0?d:void 0,modelOptions:c}),Ut.emit("stream:started",{streamId:this.streamId,model:t,provider:this.adapter.name,timestamp:Date.now()})}afterRun(){if(!this.shouldEmitStreamEnd)return;const t=Date.now();Ut.emit("text:completed",{requestId:this.requestId,streamId:this.streamId,model:this.params.model,content:this.accumulatedContent,messageId:this.currentMessageId||void 0,finishReason:this.lastFinishReason||void 0,usage:this.doneChunk?.usage,timestamp:t}),Ut.emit("stream:ended",{requestId:this.requestId,streamId:this.streamId,totalChunks:this.totalChunkCount,duration:t-this.streamStartTime,timestamp:t})}beginCycle(){this.cyclePhase==="processText"&&this.beginIteration()}endCycle(){if(this.cyclePhase==="processText"){this.cyclePhase="executeToolCalls";return}this.cyclePhase="processText",this.iterationCount++}beginIteration(){this.currentMessageId=this.createId("msg"),this.accumulatedContent="",this.doneChunk=null}async*streamModelResponse(){const{temperature:t,topP:n,maxTokens:r,metadata:i,modelOptions:o}=this.params,c=this.params.tools?.map(f=>({...f,inputSchema:f.inputSchema?iy(f.inputSchema):void 0,outputSchema:f.outputSchema?iy(f.outputSchema):void 0}));for await(const f of this.adapter.chatStream({model:this.params.model,messages:this.messages,tools:c,temperature:t,topP:n,maxTokens:r,metadata:i,request:this.effectiveRequest,modelOptions:o,systemPrompts:this.systemPrompts}))if(this.isAborted()||(this.totalChunkCount++,yield f,this.handleStreamChunk(f),this.earlyTermination))break}handleStreamChunk(t){switch(t.type){case"content":this.handleContentChunk(t);break;case"tool_call":this.handleToolCallChunk(t);break;case"tool_result":this.handleToolResultChunk(t);break;case"done":this.handleDoneChunk(t);break;case"error":this.handleErrorChunk(t);break;case"thinking":this.handleThinkingChunk(t);break}}handleContentChunk(t){this.accumulatedContent=t.content,Ut.emit("stream:chunk:content",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:t.content,delta:t.delta,timestamp:Date.now()})}handleToolCallChunk(t){this.toolCallManager.addToolCallChunk(t),Ut.emit("stream:chunk:tool-call",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:t.toolCall.id,toolName:t.toolCall.function.name,index:t.index,arguments:t.toolCall.function.arguments,timestamp:Date.now()})}handleToolResultChunk(t){Ut.emit("stream:chunk:tool-result",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:t.toolCallId,result:t.content,timestamp:Date.now()})}handleDoneChunk(t){if(this.doneChunk?.finishReason==="tool_calls"&&t.finishReason==="stop"){this.lastFinishReason=t.finishReason,Ut.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:t.finishReason,usage:t.usage,timestamp:Date.now()}),t.usage&&Ut.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:t.usage,timestamp:Date.now()});return}this.doneChunk=t,this.lastFinishReason=t.finishReason,Ut.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:t.finishReason,usage:t.usage,timestamp:Date.now()}),t.usage&&Ut.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:t.usage,timestamp:Date.now()})}handleErrorChunk(t){Ut.emit("stream:chunk:error",{streamId:this.streamId,messageId:this.currentMessageId||void 0,error:t.error.message,timestamp:Date.now()}),this.earlyTermination=!0,this.shouldEmitStreamEnd=!1}handleThinkingChunk(t){Ut.emit("stream:chunk:thinking",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:t.content,delta:t.delta,timestamp:Date.now()})}async*checkForPendingToolCalls(){const t=this.getPendingToolCallsFromMessages();if(t.length===0)return"continue";const n=this.createSyntheticDoneChunk();Ut.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:t.length,timestamp:Date.now()});const{approvals:r,clientToolResults:i}=this.collectClientState(),o=await Qx(t,this.tools,r,i);if(o.needsApproval.length>0||o.needsClientExecution.length>0){for(const c of this.emitApprovalRequests(o.needsApproval,n))yield c;for(const c of this.emitClientToolInputs(o.needsClientExecution,n))yield c;return this.shouldEmitStreamEnd=!1,"wait"}const l=this.emitToolResults(o.results,n);for(const c of l)yield c;return"continue"}async*processToolCalls(){if(!this.shouldExecuteToolPhase()){this.setToolPhase("stop");return}const t=this.toolCallManager.getToolCalls(),n=this.doneChunk;if(!n||t.length===0){this.setToolPhase("stop");return}Ut.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:t.length,timestamp:Date.now()}),this.addAssistantToolCallMessage(t);const{approvals:r,clientToolResults:i}=this.collectClientState(),o=await Qx(t,this.tools,r,i);if(o.needsApproval.length>0||o.needsClientExecution.length>0){for(const c of this.emitApprovalRequests(o.needsApproval,n))yield c;for(const c of this.emitClientToolInputs(o.needsClientExecution,n))yield c;this.setToolPhase("wait");return}const l=this.emitToolResults(o.results,n);for(const c of l)yield c;this.toolCallManager.clear(),this.setToolPhase("continue")}shouldExecuteToolPhase(){return this.doneChunk?.finishReason==="tool_calls"&&this.tools.length>0&&this.toolCallManager.hasToolCalls()}addAssistantToolCallMessage(t){this.messages=[...this.messages,{role:"assistant",content:this.accumulatedContent||null,toolCalls:t}]}collectClientState(){const t=new Map,n=new Map;for(const r of this.messages)if(r.role==="assistant"&&r.parts){const i=r.parts;for(const o of i)o.type==="tool-call"&&o.state==="approval-responded"&&o.approval&&t.set(o.approval.id,o.approval.approved),o.type==="tool-call"&&o.output!==void 0&&!o.approval&&n.set(o.id,o.output)}return{approvals:t,clientToolResults:n}}emitApprovalRequests(t,n){const r=[];for(const i of t)Ut.emit("stream:approval-requested",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:i.toolCallId,toolName:i.toolName,input:i.input,approvalId:i.approvalId,timestamp:Date.now()}),r.push({type:"approval-requested",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:i.toolCallId,toolName:i.toolName,input:i.input,approval:{id:i.approvalId,needsApproval:!0}});return r}emitClientToolInputs(t,n){const r=[];for(const i of t)Ut.emit("stream:tool-input-available",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:i.toolCallId,toolName:i.toolName,input:i.input,timestamp:Date.now()}),r.push({type:"tool-input-available",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:i.toolCallId,toolName:i.toolName,input:i.input});return r}emitToolResults(t,n){const r=[];for(const i of t){Ut.emit("tool:call-completed",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:i.toolCallId,toolName:i.toolName,result:i.result,duration:i.duration??0,timestamp:Date.now()});const o=JSON.stringify(i.result),l={type:"tool_result",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:i.toolCallId,content:o};r.push(l),this.messages=[...this.messages,{role:"tool",content:o,toolCallId:i.toolCallId}]}return r}getPendingToolCallsFromMessages(){const t=new Set(this.messages.filter(r=>r.role==="tool"&&r.toolCallId).map(r=>r.toolCallId)),n=[];for(const r of this.messages)if(r.role==="assistant"&&r.toolCalls)for(const i of r.toolCalls)t.has(i.id)||n.push(i);return n}createSyntheticDoneChunk(){return{type:"done",id:this.createId("pending"),model:this.params.model,timestamp:Date.now(),finishReason:"tool_calls"}}shouldContinue(){return this.cyclePhase==="executeToolCalls"?!0:this.loopStrategy({iterationCount:this.iterationCount,messages:this.messages,finishReason:this.lastFinishReason})&&this.toolPhase==="continue"}isAborted(){return!!this.effectiveSignal?.aborted}setToolPhase(t){this.toolPhase=t,t==="wait"&&(this.shouldEmitStreamEnd=!1)}createId(t){return`${t}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}}function A5(e){const{outputSchema:t,stream:n}=e;return t?O5(e):n===!1?T5(e):fR(e)}async function*fR(e){const{adapter:t,...n}=e,r=t.model,i=new cR({adapter:t,params:{...n,model:r}});for await(const o of i.run())yield o}function T5(e){const t=fR(e);return E5(t)}async function O5(e){const{adapter:t,outputSchema:n,...r}=e,i=t.model;if(!n)throw new Error("outputSchema is required for structured output");const o=new cR({adapter:t,params:{...r,model:i}});for await(const g of o.run());const l=o.getMessages(),{tools:c,agentLoopStrategy:f,...d}=r,m=iy(n);if(!m)throw new Error("Failed to convert output schema to JSON Schema");const p=await t.structuredOutput({chatOptions:{...d,model:i,messages:l},outputSchema:m});return Ks(n)?la(n,p.data):p.data}function Od(e){return{__toolSide:"definition",...e,server(n){return{__toolSide:"server",...e,execute:n}},client(n){return{__toolSide:"client",...e,execute:n}}}}function Zx(e){return e===null?"":typeof e=="string"?e:e.filter(t=>t.type==="text").map(t=>t.content).join("")}function M5(e){const t=[];for(const n of e)"parts"in n?t.push(...dR(n)):t.push(n);return t}function dR(e){const t=[];if(e.role==="system")return t;const n=[],r=[],i=[];for(const c of e.parts)c.type==="text"?n.push(c):c.type==="tool-call"?r.push(c):c.type==="tool-result"&&i.push(c);const o=n.map(c=>c.content).join("")||null,l=r.length>0?r.filter(c=>c.state==="input-complete"||c.state==="approval-responded"||c.output!==void 0).map(c=>({id:c.id,type:"function",function:{name:c.name,arguments:c.arguments}})):void 0;e.role!=="assistant"||o||!l?t.push({role:e.role,content:o,...l&&l.length>0&&{toolCalls:l}}):l.length>0&&t.push({role:"assistant",content:o,toolCalls:l});for(const c of i)(c.state==="complete"||c.state==="error")&&t.push({role:"tool",content:c.content,toolCallId:c.toolCallId});return t}function I5(e,t){const n=[],r=Zx(e.content);if(r&&n.push({type:"text",content:r}),e.toolCalls&&e.toolCalls.length>0)for(const i of e.toolCalls)n.push({type:"tool-call",id:i.id,name:i.function.name,arguments:i.function.arguments,state:"input-complete"});return e.role==="tool"&&e.toolCallId&&n.push({type:"tool-result",toolCallId:e.toolCallId,content:Zx(e.content),state:"complete"}),{id:t||ed(),role:e.role==="tool"?"assistant":e.role,parts:n}}function N5(e,t){return"parts"in e?{...e,id:e.id||t(),createdAt:e.createdAt||new Date}:{...I5(e,t()),createdAt:new Date}}function ed(){return`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`}var zs={},Zm={},Yx;function Jx(){return Yx||(Yx=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow})(Zm)),Zm}var Xx;function D5(){return Xx||(Xx=1,(function(e){var t=zs&&zs.__createBinding||(Object.create?(function(d,m,p,g){g===void 0&&(g=p);var y=Object.getOwnPropertyDescriptor(m,p);(!y||("get"in y?!m.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(d,g,y)}):(function(d,m,p,g){g===void 0&&(g=p),d[g]=m[p]})),n=zs&&zs.__exportStar||function(d,m){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&t(m,d,p)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=Jx();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(Jx(),e);class i extends Error{}e.PartialJSON=i;class o extends Error{}e.MalformedJSON=o;function l(d,m=r.Allow.ALL){if(typeof d!="string")throw new TypeError(`expecting str, got ${typeof d}`);if(!d.trim())throw new Error(`${d} is empty`);return c(d.trim(),m)}e.parseJSON=l;const c=(d,m)=>{const p=d.length;let g=0;const y=P=>{throw new i(`${P} at position ${g}`)},S=P=>{throw new o(`${P} at position ${g}`)},w=()=>(I(),g>=p&&y("Unexpected end of input"),d[g]==='"'?C():d[g]==="{"?x():d[g]==="["?E():d.substring(g,g+4)==="null"||r.Allow.NULL&m&&p-g<4&&"null".startsWith(d.substring(g))?(g+=4,null):d.substring(g,g+4)==="true"||r.Allow.BOOL&m&&p-g<4&&"true".startsWith(d.substring(g))?(g+=4,!0):d.substring(g,g+5)==="false"||r.Allow.BOOL&m&&p-g<5&&"false".startsWith(d.substring(g))?(g+=5,!1):d.substring(g,g+8)==="Infinity"||r.Allow.INFINITY&m&&p-g<8&&"Infinity".startsWith(d.substring(g))?(g+=8,1/0):d.substring(g,g+9)==="-Infinity"||r.Allow._INFINITY&m&&1<p-g&&p-g<9&&"-Infinity".startsWith(d.substring(g))?(g+=9,-1/0):d.substring(g,g+3)==="NaN"||r.Allow.NAN&m&&p-g<3&&"NaN".startsWith(d.substring(g))?(g+=3,NaN):k()),C=()=>{const P=g;let R=!1;for(g++;g<p&&(d[g]!=='"'||R&&d[g-1]==="\\");)R=d[g]==="\\"?!R:!1,g++;if(d.charAt(g)=='"')try{return JSON.parse(d.substring(P,++g-Number(R)))}catch(M){S(String(M))}else if(r.Allow.STR&m)try{return JSON.parse(d.substring(P,g-Number(R))+'"')}catch{return JSON.parse(d.substring(P,d.lastIndexOf("\\"))+'"')}y("Unterminated string literal")},x=()=>{g++,I();const P={};try{for(;d[g]!=="}";){if(I(),g>=p&&r.Allow.OBJ&m)return P;const R=C();I(),g++;try{const M=w();P[R]=M}catch(M){if(r.Allow.OBJ&m)return P;throw M}I(),d[g]===","&&g++}}catch{if(r.Allow.OBJ&m)return P;y("Expected '}' at end of object")}return g++,P},E=()=>{g++;const P=[];try{for(;d[g]!=="]";)P.push(w()),I(),d[g]===","&&g++}catch{if(r.Allow.ARR&m)return P;y("Expected ']' at end of array")}return g++,P},k=()=>{if(g===0){d==="-"&&S("Not sure what '-' is");try{return JSON.parse(d)}catch(R){if(r.Allow.NUM&m)try{return JSON.parse(d.substring(0,d.lastIndexOf("e")))}catch{}S(String(R))}}const P=g;for(d[g]==="-"&&g++;d[g]&&",]}".indexOf(d[g])===-1;)g++;g==p&&!(r.Allow.NUM&m)&&y("Unterminated number literal");try{return JSON.parse(d.substring(P,g))}catch{d.substring(P,g)==="-"&&y("Not sure what '-' is");try{return JSON.parse(d.substring(P,d.lastIndexOf("e")))}catch(M){S(String(M))}}},I=()=>{for(;g<p&&` 
\r	`.includes(d[g]);)g++};return w()},f=l;e.parse=f})(zs)),zs}var z5=D5();class L5{parse(t){if(!(!t||t.trim()===""))try{return z5.parse(t)}catch{return}}}const P5=new L5;function j5(e,t,n){return e.map(r=>{if(r.id!==t)return r;const i=[...r.parts],o=i.length>0?i[i.length-1]:null;return o&&o.type==="text"?i[i.length-1]={type:"text",content:n}:i.push({type:"text",content:n}),{...r,parts:i}})}function Ym(e,t,n){return e.map(r=>{if(r.id!==t)return r;const i=[...r.parts],o=i.findIndex(c=>c.type==="tool-call"&&c.id===n.id),l={type:"tool-call",id:n.id,name:n.name,arguments:n.arguments,state:n.state};return o>=0?i[o]=l:i.push(l),{...r,parts:i}})}function Wx(e,t,n,r,i,o){return e.map(l=>{if(l.id!==t)return l;const c=[...l.parts],f=c.findIndex(m=>m.type==="tool-result"&&m.toolCallId===n),d={type:"tool-result",toolCallId:n,content:r,state:i,...o&&{error:o}};return f>=0?c[f]=d:c.push(d),{...l,parts:c}})}function F5(e,t,n,r){return e.map(i=>{if(i.id!==t)return i;const o=[...i.parts],l=o.find(c=>c.type==="tool-call"&&c.id===n);return l&&(l.state="approval-requested",l.approval={id:r,needsApproval:!0}),{...i,parts:o}})}function $5(e,t,n,r,i){return e.map(o=>{const l=[...o.parts],c=l.find(f=>f.type==="tool-call"&&f.id===t);return c&&(c.output=i?{error:i}:n,r?c.state=r:c.state="input-complete"),{...o,parts:l}})}function B5(e,t,n){return e.map(r=>{const i=[...r.parts],o=i.find(l=>l.type==="tool-call"&&l.approval?.id===t);return o&&o.approval&&(o.approval.approved=n,o.state="approval-responded"),{...r,parts:i}})}function U5(e,t,n){return e.map(r=>{if(r.id!==t)return r;const i=[...r.parts],o=i.findIndex(c=>c.type==="thinking"),l={type:"thinking",content:n};return o>=0?i[o]=l:i.push(l),{...r,parts:i}})}class q5{shouldEmit(t,n){return!0}}class S0{constructor(t={}){this.messages=[],this.currentAssistantMessageId=null,this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls=new Map,this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.recording=null,this.recordingStartTime=0,this.chunkStrategy=t.chunkStrategy||new q5,this.events=t.events||{},this.handlers=t.handlers||{},this.jsonParser=t.jsonParser||P5,this.recordingEnabled=t.recording??!1,t.initialMessages&&(this.messages=[...t.initialMessages])}setMessages(t){this.messages=[...t],this.emitMessagesChange()}addUserMessage(t){const n={id:ed(),role:"user",parts:[{type:"text",content:t}],createdAt:new Date};return this.messages=[...this.messages,n],this.emitMessagesChange(),n}startAssistantMessage(){this.resetStreamState();const t={id:ed(),role:"assistant",parts:[],createdAt:new Date};return this.currentAssistantMessageId=t.id,this.messages=[...this.messages,t],this.events.onStreamStart?.(),this.emitMessagesChange(),t.id}addToolResult(t,n,r){const i=this.messages.find(f=>f.parts.some(d=>d.type==="tool-call"&&d.id===t));if(!i){console.warn(`[StreamProcessor] Could not find message with tool call ${t}`);return}let o=$5(this.messages,t,n,r?"input-complete":void 0,r);const l=typeof n=="string"?n:JSON.stringify(n),c=r?"error":"complete";o=Wx(o,i.id,t,l,c,r),this.messages=o,this.emitMessagesChange()}addToolApprovalResponse(t,n){this.messages=B5(this.messages,t,n),this.emitMessagesChange()}toModelMessages(){const t=[];for(const n of this.messages)t.push(...dR(n));return t}getMessages(){return this.messages}areAllToolsComplete(){const t=this.messages.findLast(r=>r.role==="assistant");if(!t)return!0;const n=t.parts.filter(r=>r.type==="tool-call");return n.length===0?!0:n.every(r=>r.state==="approval-responded"||r.output!==void 0&&!r.approval)}removeMessagesAfter(t){this.messages=this.messages.slice(0,t+1),this.emitMessagesChange()}clearMessages(){this.messages=[],this.currentAssistantMessageId=null,this.emitMessagesChange()}async process(t){this.resetStreamState(),this.recordingEnabled&&this.startRecording();for await(const n of t)this.processChunk(n);return this.finalizeStream(),this.recording&&(this.recording.result=this.getResult()),this.getResult()}processChunk(t){switch(this.recording&&this.recording.chunks.push({chunk:t,timestamp:Date.now(),index:this.recording.chunks.length}),t.type){case"content":this.handleContentChunk(t);break;case"tool_call":this.handleToolCallChunk(t);break;case"tool_result":this.handleToolResultChunk(t);break;case"done":this.handleDoneChunk(t);break;case"error":this.handleErrorChunk(t);break;case"thinking":this.handleThinkingChunk(t);break;case"approval-requested":this.handleApprovalRequestedChunk(t);break;case"tool-input-available":this.handleToolInputAvailableChunk(t);break}}handleContentChunk(t){this.completeAllToolCalls();const n=this.currentSegmentText;this.hasToolCallsSinceTextStart&&n.length>0&&this.isNewTextSegment(t,n)&&(n!==this.lastEmittedText&&this.emitTextUpdate(),this.currentSegmentText="",this.lastEmittedText="",this.hasToolCallsSinceTextStart=!1);const i=this.currentSegmentText;let o=i;t.delta!==""?o=i+t.delta:t.content!==""&&(t.content.startsWith(i)?o=t.content:i.startsWith(t.content)?o=i:o=i+t.content);const l=o.slice(i.length);this.currentSegmentText=o,this.totalTextContent+=l;const c=t.delta??t.content??"";this.chunkStrategy.shouldEmit(c,this.currentSegmentText)&&this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate()}handleToolCallChunk(t){this.hasToolCallsSinceTextStart=!0;const n=t.toolCall.id,r=this.toolCalls.get(n);if(r){const i=r.state==="awaiting-input";r.arguments+=t.toolCall.function.arguments||"",i&&t.toolCall.function.arguments&&(r.state="input-streaming"),r.parsedArguments=this.jsonParser.parse(r.arguments);const o=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStateChange?.(o,r.id,r.name,r.state,r.arguments,r.parsedArguments),t.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(o,t.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=Ym(this.messages,this.currentAssistantMessageId,{id:r.id,name:r.name,arguments:r.arguments,state:r.state}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,r.id,r.state,r.arguments))}else{const i=t.toolCall.function.arguments?"input-streaming":"awaiting-input",o={id:t.toolCall.id,name:t.toolCall.function.name,arguments:t.toolCall.function.arguments||"",state:i,parsedArguments:void 0,index:t.index};t.toolCall.function.arguments&&(o.parsedArguments=this.jsonParser.parse(t.toolCall.function.arguments)),this.toolCalls.set(n,o),this.toolCallOrder.push(n);const l=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStart?.(l,t.toolCall.id,t.toolCall.function.name),this.handlers.onToolCallStateChange?.(l,t.toolCall.id,t.toolCall.function.name,i,t.toolCall.function.arguments||"",o.parsedArguments),t.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(l,t.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=Ym(this.messages,this.currentAssistantMessageId,{id:t.toolCall.id,name:t.toolCall.function.name,arguments:t.toolCall.function.arguments||"",state:i}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,t.toolCall.id,i,t.toolCall.function.arguments||""))}}handleToolResultChunk(t){const n="complete";this.handlers.onToolResultStateChange?.(t.toolCallId,t.content,n),this.currentAssistantMessageId&&(this.messages=Wx(this.messages,this.currentAssistantMessageId,t.toolCallId,t.content,n),this.emitMessagesChange())}handleDoneChunk(t){this.finishReason=t.finishReason,this.isDone=!0,this.completeAllToolCalls()}handleErrorChunk(t){this.handlers.onError?.(t.error),this.events.onError?.(new Error(t.error.message))}handleThinkingChunk(t){const n=this.thinkingContent;let r=n;t.delta!==""?r=n+t.delta:t.content!==""&&(t.content.startsWith(n)?r=t.content:n.startsWith(t.content)?r=n:r=n+t.content),this.thinkingContent=r,this.handlers.onThinkingUpdate?.(this.thinkingContent),this.currentAssistantMessageId&&(this.messages=U5(this.messages,this.currentAssistantMessageId,this.thinkingContent),this.emitMessagesChange(),this.events.onThinkingUpdate?.(this.currentAssistantMessageId,this.thinkingContent))}handleApprovalRequestedChunk(t){this.handlers.onApprovalRequested?.(t.toolCallId,t.toolName,t.input,t.approval.id),this.currentAssistantMessageId&&(this.messages=F5(this.messages,this.currentAssistantMessageId,t.toolCallId,t.approval.id),this.emitMessagesChange()),this.events.onApprovalRequest?.({toolCallId:t.toolCallId,toolName:t.toolName,input:t.input,approvalId:t.approval.id})}handleToolInputAvailableChunk(t){this.handlers.onToolInputAvailable?.(t.toolCallId,t.toolName,t.input),this.events.onToolCall?.({toolCallId:t.toolCallId,toolName:t.toolName,input:t.input})}isNewTextSegment(t,n){return t.delta!==void 0&&t.content!==void 0&&(t.content.length<n.length||!t.content.startsWith(n)&&!n.startsWith(t.content))}completeAllToolCalls(){this.toolCalls.forEach((t,n)=>{if(t.state!=="input-complete"){const r=this.toolCallOrder.indexOf(n);this.completeToolCall(r,t)}})}completeToolCall(t,n){n.state="input-complete",n.parsedArguments=this.jsonParser.parse(n.arguments),this.handlers.onToolCallStateChange?.(t,n.id,n.name,"input-complete",n.arguments,n.parsedArguments),this.handlers.onToolCallComplete?.(t,n.id,n.name,n.arguments),this.currentAssistantMessageId&&(this.messages=Ym(this.messages,this.currentAssistantMessageId,{id:n.id,name:n.name,arguments:n.arguments,state:"input-complete"}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,n.id,"input-complete",n.arguments))}emitTextUpdate(){this.lastEmittedText=this.currentSegmentText,this.handlers.onTextUpdate?.(this.currentSegmentText),this.currentAssistantMessageId&&(this.messages=j5(this.messages,this.currentAssistantMessageId,this.currentSegmentText),this.emitMessagesChange(),this.events.onTextUpdate?.(this.currentAssistantMessageId,this.currentSegmentText))}emitMessagesChange(){this.events.onMessagesChange?.([...this.messages])}finalizeStream(){this.completeAllToolCalls(),this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate();const t=this.getCompletedToolCalls();if(this.handlers.onStreamEnd?.(this.totalTextContent,t.length>0?t:void 0),this.currentAssistantMessageId){const n=this.messages.find(r=>r.id===this.currentAssistantMessageId);n&&this.events.onStreamEnd?.(n)}}getCompletedToolCalls(){return Array.from(this.toolCalls.values()).filter(t=>t.state==="input-complete").map(t=>({id:t.id,type:"function",function:{name:t.name,arguments:t.arguments}}))}getResult(){const t=this.getCompletedToolCalls();return{content:this.totalTextContent,thinking:this.thinkingContent||void 0,toolCalls:t.length>0?t:void 0,finishReason:this.finishReason}}getState(){return{content:this.totalTextContent,thinking:this.thinkingContent,toolCalls:new Map(this.toolCalls),toolCallOrder:[...this.toolCallOrder],finishReason:this.finishReason,done:this.isDone}}startRecording(){this.recordingEnabled=!0,this.recordingStartTime=Date.now(),this.recording={version:"1.0",timestamp:this.recordingStartTime,chunks:[]}}getRecording(){return this.recording}resetStreamState(){this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls.clear(),this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.chunkStrategy.reset?.()}reset(){this.resetStreamState(),this.messages=[],this.currentAssistantMessageId=null}static async replay(t,n){return new S0(n).process(H5(t))}}function H5(e){return{async*[Symbol.asyncIterator](){for(const{chunk:t}of e.chunks)yield t}}}class V5{constructor(t){this.clientId=t}clientCreated(t){this.emitEvent("client:created",{initialMessageCount:t})}loadingChanged(t){this.emitEvent("client:loading-changed",{isLoading:t})}errorChanged(t){this.emitEvent("client:error-changed",{error:t})}textUpdated(t,n,r){this.emitEvent("processor:text-updated",{streamId:t,content:r}),this.emitEvent("client:assistant-message-updated",{messageId:n,content:r})}toolCallStateChanged(t,n,r,i,o,l){this.emitEvent("processor:tool-call-state-changed",{streamId:t,toolCallId:r,toolName:i,state:o,arguments:l}),this.emitEvent("client:tool-call-updated",{messageId:n,toolCallId:r,toolName:i,state:o,arguments:l})}toolResultStateChanged(t,n,r,i,o){this.emitEvent("processor:tool-result-state-changed",{streamId:t,toolCallId:n,content:r,state:i,error:o})}thinkingUpdated(t,n,r,i){this.emitEvent("stream:chunk:thinking",{streamId:t,messageId:n,content:r,delta:i})}approvalRequested(t,n,r,i,o){this.emitEvent("client:approval-requested",{messageId:t,toolCallId:n,toolName:r,input:i,approvalId:o})}messageAppended(t){const n=t.parts.filter(r=>r.type==="text").map(r=>r.content).join(" ").substring(0,100);this.emitEvent("client:message-appended",{messageId:t.id,role:t.role,contentPreview:n})}messageSent(t,n){this.emitEvent("client:message-sent",{messageId:t,content:n})}reloaded(t){this.emitEvent("client:reloaded",{fromMessageIndex:t})}stopped(){this.emitEvent("client:stopped")}messagesCleared(){this.emitEvent("client:messages-cleared")}toolResultAdded(t,n,r,i){this.emitEvent("tool:result-added",{toolCallId:t,toolName:n,output:r,state:i})}toolApprovalResponded(t,n,r){this.emitEvent("tool:approval-responded",{approvalId:t,toolCallId:n,approved:r})}}class K5 extends V5{emitEvent(t,n){t.startsWith("client:")||t.startsWith("tool:")?Ut.emit(t,{...n,clientId:this.clientId,timestamp:Date.now()}):Ut.emit(t,{...n,timestamp:Date.now()})}}class G5{constructor(t){if(this.body={},this.isLoading=!1,this.error=void 0,this.abortController=null,this.currentStreamId=null,this.currentMessageId=null,this.postStreamActions=[],this.uniqueId=t.id||this.generateUniqueId("chat"),this.body=t.body||{},this.connection=t.connection,this.events=new K5(this.uniqueId),this.clientToolsRef={current:new Map},t.tools)for(const n of t.tools)this.clientToolsRef.current.set(n.name,n);this.callbacksRef={current:{onResponse:t.onResponse||(()=>{}),onChunk:t.onChunk||(()=>{}),onFinish:t.onFinish||(()=>{}),onError:t.onError||(()=>{}),onMessagesChange:t.onMessagesChange||(()=>{}),onLoadingChange:t.onLoadingChange||(()=>{}),onErrorChange:t.onErrorChange||(()=>{})}},this.processor=new S0({chunkStrategy:t.streamProcessor?.chunkStrategy,initialMessages:t.initialMessages,events:{onMessagesChange:n=>{this.callbacksRef.current.onMessagesChange(n)},onStreamStart:()=>{},onStreamEnd:n=>{this.callbacksRef.current.onFinish(n)},onError:n=>{this.setError(n),this.callbacksRef.current.onError(n)},onTextUpdate:(n,r)=>{this.currentStreamId&&this.events.textUpdated(this.currentStreamId,n,r)},onThinkingUpdate:(n,r)=>{this.currentStreamId&&this.events.thinkingUpdated(this.currentStreamId,n,r)},onToolCallStateChange:(n,r,i,o)=>{const d=this.processor.getMessages().find(m=>m.id===n)?.parts.find(m=>m.type==="tool-call"&&m.id===r)?.name||"unknown";this.currentStreamId&&this.events.toolCallStateChanged(this.currentStreamId,n,r,d,i,o)},onToolCall:async n=>{const r=this.clientToolsRef.current.get(n.toolName);if(r?.execute)try{const i=await r.execute(n.input);await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:i,state:"output-available"})}catch(i){await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:null,state:"output-error",errorText:i.message})}},onApprovalRequest:n=>{this.events.approvalRequested(this.currentMessageId||"",n.toolCallId,n.toolName,n.input,n.approvalId)}}}),this.events.clientCreated(this.processor.getMessages().length)}generateUniqueId(t){return`${t}-${Date.now()}-${Math.random().toString(36).substring(7)}`}setIsLoading(t){this.isLoading=t,this.callbacksRef.current.onLoadingChange(t),this.events.loadingChanged(t)}setError(t){this.error=t,this.callbacksRef.current.onErrorChange(t),this.events.errorChanged(t?.message||null)}async processStream(t){this.currentStreamId=this.generateUniqueId("stream");const n=this.processor.startAssistantMessage();this.currentMessageId=n;const r={id:n,role:"assistant",parts:[],createdAt:new Date};this.events.messageAppended(r);for await(const l of t)this.callbacksRef.current.onChunk(l),this.processor.processChunk(l),await new Promise(c=>setTimeout(c,0));return this.processor.finalizeStream(),this.currentStreamId=null,this.currentMessageId=null,this.processor.getMessages().find(l=>l.id===n)||{id:n,role:"assistant",parts:[],createdAt:new Date}}async sendMessage(t){if(!t.trim()||this.isLoading)return;const n=this.processor.addUserMessage(t.trim());this.events.messageSent(n.id,t.trim()),await this.streamResponse()}async append(t){const n=N5(t,ed);if(n.role==="system")return;const r=n;this.events.messageAppended(r);const i=this.processor.getMessages();this.processor.setMessages([...i,r]),await this.streamResponse()}async streamResponse(){this.setIsLoading(!0),this.setError(void 0),this.abortController=new AbortController;try{const t=this.processor.toModelMessages();await this.callbacksRef.current.onResponse();const n={...this.body,conversationId:this.uniqueId},r=this.connection.connect(t,n,this.abortController.signal);await this.processStream(r)}catch(t){if(t instanceof Error){if(t.name==="AbortError")return;this.setError(t),this.callbacksRef.current.onError(t)}}finally{this.abortController=null,this.setIsLoading(!1),await this.drainPostStreamActions()}}async reload(){const t=this.processor.getMessages();if(t.length===0)return;const n=t.findLastIndex(r=>r.role==="user");n!==-1&&(this.events.reloaded(n),this.processor.removeMessagesAfter(n),await this.streamResponse())}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.setIsLoading(!1),this.events.stopped()}clear(){this.processor.clearMessages(),this.setError(void 0),this.events.messagesCleared()}async addToolResult(t){if(this.events.toolResultAdded(t.toolCallId,t.tool,t.output,t.state||"output-available"),this.processor.addToolResult(t.toolCallId,t.output,t.errorText),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}async addToolApprovalResponse(t){const n=this.processor.getMessages();let r;for(const i of n){const o=i.parts.find(l=>l.type==="tool-call"&&l.approval?.id===t.id);if(o){r=o.id;break}}if(r&&this.events.toolApprovalResponded(t.id,r,t.approved),this.processor.addToolApprovalResponse(t.id,t.approved),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}queuePostStreamAction(t){this.postStreamActions.push(t)}async drainPostStreamActions(){for(;this.postStreamActions.length>0;)await this.postStreamActions.shift()()}async checkForContinuation(){this.shouldAutoSend()&&await this.streamResponse()}shouldAutoSend(){return this.processor.areAllToolsComplete()}getMessages(){return this.processor.getMessages()}getIsLoading(){return this.isLoading}getError(){return this.error}setMessagesManually(t){this.processor.setMessages(t)}updateOptions(t){if(t.connection!==void 0&&(this.connection=t.connection),t.body!==void 0&&(this.body=t.body),t.tools!==void 0){this.clientToolsRef.current=new Map;for(const n of t.tools)this.clientToolsRef.current.set(n.name,n)}t.onResponse!==void 0&&(this.callbacksRef.current.onResponse=t.onResponse),t.onChunk!==void 0&&(this.callbacksRef.current.onChunk=t.onChunk),t.onFinish!==void 0&&(this.callbacksRef.current.onFinish=t.onFinish),t.onError!==void 0&&(this.callbacksRef.current.onError=t.onError)}}function Q5(...e){return e}function Z5(e){return{async*connect(t,n){const r=M5(t);yield*e(r,n)}}}function Y5(e){const t=H.useId(),n=e.id||t,[r,i]=H.useState(e.initialMessages||[]),[o,l]=H.useState(!1),[c,f]=H.useState(void 0),d=H.useRef(e.initialMessages||[]),m=H.useRef(!0);H.useEffect(()=>{d.current=r},[r]);const p=H.useRef(e);p.current=e;const g=H.useMemo(()=>{const P=m.current?e.initialMessages||[]:d.current;return m.current=!1,new G5({connection:p.current.connection,id:n,initialMessages:P,body:p.current.body,onResponse:p.current.onResponse,onChunk:p.current.onChunk,onFinish:p.current.onFinish,onError:p.current.onError,tools:p.current.tools,streamProcessor:e.streamProcessor,onMessagesChange:R=>{i(R)},onLoadingChange:R=>{l(R)},onErrorChange:R=>{f(R)}})},[n]);H.useEffect(()=>{e.initialMessages&&e.initialMessages.length>0&&r.length===0&&g.setMessagesManually(e.initialMessages)},[]),H.useEffect(()=>()=>{g.stop()},[g]);const y=H.useCallback(async P=>{await g.sendMessage(P)},[g]),S=H.useCallback(async P=>{await g.append(P)},[g]),w=H.useCallback(async()=>{await g.reload()},[g]),C=H.useCallback(()=>{g.stop()},[g]),x=H.useCallback(()=>{g.clear()},[g]),E=H.useCallback(P=>{g.setMessagesManually(P)},[g]),k=H.useCallback(async P=>{await g.addToolResult(P)},[g]),I=H.useCallback(async P=>{await g.addToolApprovalResponse(P)},[g]);return{messages:r,sendMessage:y,append:S,reload:w,stop:C,isLoading:o,error:c,setMessages:E,clear:x,addToolResult:k,addToolApprovalResponse:I}}class J5{constructor(t={},n){this.kind="text",this.config=t,this.model=n}generateId(){return`${this.name}-${Date.now()}-${Math.random().toString(36).substring(7)}`}}const X5=e=>{if(e.conversation&&e.previous_response_id)throw new Error("Cannot use both 'conversation' and 'previous_response_id' in the same request.")},W5=e=>{eF(e),X5(e)},eF=e=>{const t=e.metadata;if(t&&Object.keys(t).length>16)throw new Error("Metadata cannot have more than 16 key-value pairs.");if(t&&Object.keys(t).some(o=>o.length>64))throw new Error("Metadata keys cannot be longer than 64 characters.");if(t&&Object.values(t).some(o=>o.length>512))throw new Error("Metadata values cannot be longer than 512 characters.")};function sy(e){if(e!==null){if(Array.isArray(e))return e.map(t=>sy(t));if(typeof e=="object"){const t={};for(const[n,r]of Object.entries(e)){const i=sy(r);i!==void 0&&(t[n]=i)}return t}return e}}function Jl(e,t=[]){const n={...e};if(n.type==="object"&&n.properties){const r={...n.properties},i=Object.keys(r);for(const o of i){const l=r[o],c=!t.includes(o);l.type==="object"&&l.properties?r[o]=Jl(l,l.required||[]):l.type==="array"&&l.items?r[o]={...l,items:Jl(l.items,l.items.required||[])}:c&&(l.type&&!Array.isArray(l.type)?r[o]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[o]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=i,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=Jl(n.items,n.items.required||[])),n}function tF(e){return{type:"apply_patch"}}function nF(e){return{type:"code_interpreter",container:e.metadata.container}}function rF(e){const t=e.metadata;return{type:"computer_use_preview",display_height:t.display_height,display_width:t.display_width,environment:t.environment}}function iF(e){const t=e.metadata;return{type:"custom",name:t.name,description:t.description,format:t.format}}function sF(e){const t=e.metadata;return{type:"file_search",vector_store_ids:t.vector_store_ids,max_num_results:t.max_num_results,ranking_options:t.ranking_options,filters:t.filters}}function oF(e){const t=e.inputSchema??{type:"object",properties:{},required:[]},n=Jl(t,t.required||[]);return n.additionalProperties=!1,{type:"function",name:e.name,description:e.description,parameters:n,strict:!0}}function aF(e){return{type:"image_generation",...e.metadata}}function lF(e){return{type:"local_shell"}}function uF(e){if(!e.server_url&&!e.connector_id)throw new Error("Either server_url or connector_id must be provided.");if(e.connector_id&&e.server_url)throw new Error("Only one of server_url or connector_id can be provided.")}function cF(e){const n={type:"mcp",...e.metadata};return uF(n),n}function fF(e){return{type:"shell"}}function dF(e){const t=e.metadata;return{type:t.type,search_context_size:t.search_context_size,user_location:t.user_location}}function hF(e){return e.metadata}function pF(e){return e.map(t=>{const n=new Set(["apply_patch","code_interpreter","computer_use_preview","file_search","image_generation","local_shell","mcp","shell","web_search_preview","web_search","custom"]),r=t.name;if(n.has(r))switch(r){case"apply_patch":return tF();case"code_interpreter":return nF(t);case"computer_use_preview":return rF(t);case"file_search":return sF(t);case"image_generation":return aF(t);case"local_shell":return lF();case"mcp":return cF(t);case"shell":return fF();case"web_search_preview":return dF(t);case"web_search":return hF(t);case"custom":return iF(t)}return oF(t)})}function Pe(e,t,n,r,i){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}function Y(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}let hR=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return hR=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function oy(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const ay=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};class Oe extends Error{}class dn extends Oe{constructor(t,n,r,i){super(`${dn.makeMessage(t,n,r)}`),this.status=t,this.headers=i,this.requestID=i?.get("x-request-id"),this.error=n;const o=n;this.code=o?.code,this.param=o?.param,this.type=o?.type}static makeMessage(t,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&i?`${t} ${i}`:t?`${t} status code (no body)`:i||"(no status code or body)"}static generate(t,n,r,i){if(!t||!i)return new Md({message:r,cause:ay(n)});const o=n?.error;return t===400?new pR(t,o,r,i):t===401?new mR(t,o,r,i):t===403?new gR(t,o,r,i):t===404?new yR(t,o,r,i):t===409?new vR(t,o,r,i):t===422?new bR(t,o,r,i):t===429?new SR(t,o,r,i):t>=500?new wR(t,o,r,i):new dn(t,o,r,i)}}class Cr extends dn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Md extends dn{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class w0 extends Md{constructor({message:t}={}){super({message:t??"Request timed out."})}}class pR extends dn{}class mR extends dn{}class gR extends dn{}class yR extends dn{}class vR extends dn{}class bR extends dn{}class SR extends dn{}class wR extends dn{}class _R extends Oe{constructor(){super("Could not parse response content as the length limit was reached")}}class xR extends Oe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Dl extends Error{constructor(t){super(t)}}const mF=/^[a-z][a-z0-9+.-]*:/i,gF=e=>mF.test(e);let Pn=e=>(Pn=Array.isArray,Pn(e)),eC=Pn;function CR(e){return typeof e!="object"?{}:e??{}}function yF(e){if(!e)return!0;for(const t in e)return!1;return!0}function vF(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Jm(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}const bF=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Oe(`${e} must be an integer`);if(t<0)throw new Oe(`${e} must be a positive integer`);return t},SF=e=>{try{return JSON.parse(e)}catch{return}},_u=e=>new Promise(t=>setTimeout(t,e)),Zo="6.15.0",wF=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function _F(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const xF=()=>{const e=_F();if(e==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":nC(Deno.build.os),"X-Stainless-Arch":tC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(e==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":nC(globalThis.process.platform??"unknown"),"X-Stainless-Arch":tC(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const t=CF();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function CF(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,l=r[3]||0;return{browser:t,version:`${i}.${o}.${l}`}}}return null}const tC=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",nC=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let rC;const EF=()=>rC??(rC=xF());function RF(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function ER(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function RR(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return ER({start(){},async pull(n){const{done:r,value:i}=await t.next();r?n.close():n.enqueue(i)},async cancel(){await t.return?.()}})}function kR(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function kF(e){if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await e[Symbol.asyncIterator]().return?.();return}const t=e.getReader(),n=t.cancel();t.releaseLock(),await n}const AF=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),AR="RFC3986",TR=e=>String(e),iC={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:TR},TF="RFC1738";let ly=(e,t)=>(ly=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),ly(e,t));const Br=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),Xm=1024,OF=(e,t,n,r,i)=>{if(e.length===0)return e;let o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let l="";for(let c=0;c<o.length;c+=Xm){const f=o.length>=Xm?o.slice(c,c+Xm):o,d=[];for(let m=0;m<f.length;++m){let p=f.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||i===TF&&(p===40||p===41)){d[d.length]=f.charAt(m);continue}if(p<128){d[d.length]=Br[p];continue}if(p<2048){d[d.length]=Br[192|p>>6]+Br[128|p&63];continue}if(p<55296||p>=57344){d[d.length]=Br[224|p>>12]+Br[128|p>>6&63]+Br[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|f.charCodeAt(m)&1023),d[d.length]=Br[240|p>>18]+Br[128|p>>12&63]+Br[128|p>>6&63]+Br[128|p&63]}l+=d.join("")}return l};function MF(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function sC(e,t){if(Pn(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const OR={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},MR=function(e,t){Array.prototype.push.apply(e,Pn(t)?t:[t])};let oC;const Gt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:OF,encodeValuesOnly:!1,format:AR,formatter:TR,indices:!1,serializeDate(e){return(oC??(oC=Function.prototype.call.bind(Date.prototype.toISOString)))(e)},skipNulls:!1,strictNullHandling:!1};function IF(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}const Wm={};function IR(e,t,n,r,i,o,l,c,f,d,m,p,g,y,S,w,C,x){let E=e,k=x,I=0,P=!1;for(;(k=k.get(Wm))!==void 0&&!P;){const N=k.get(e);if(I+=1,typeof N<"u"){if(N===I)throw new RangeError("Cyclic object value");P=!0}typeof k.get(Wm)>"u"&&(I=0)}if(typeof d=="function"?E=d(t,E):E instanceof Date?E=g?.(E):n==="comma"&&Pn(E)&&(E=sC(E,function(N){return N instanceof Date?g?.(N):N})),E===null){if(o)return f&&!w?f(t,Gt.encoder,C,"key",y):t;E=""}if(IF(E)||MF(E)){if(f){const N=w?t:f(t,Gt.encoder,C,"key",y);return[S?.(N)+"="+S?.(f(E,Gt.encoder,C,"value",y))]}return[S?.(t)+"="+S?.(String(E))]}const R=[];if(typeof E>"u")return R;let M;if(n==="comma"&&Pn(E))w&&f&&(E=sC(E,f)),M=[{value:E.length>0?E.join(",")||null:void 0}];else if(Pn(d))M=d;else{const N=Object.keys(E);M=m?N.sort(m):N}const L=c?String(t).replace(/\./g,"%2E"):String(t),j=r&&Pn(E)&&E.length===1?L+"[]":L;if(i&&Pn(E)&&E.length===0)return j+"[]";for(let N=0;N<M.length;++N){const U=M[N],Z=typeof U=="object"&&typeof U.value<"u"?U.value:E[U];if(l&&Z===null)continue;const ee=p&&c?U.replace(/\./g,"%2E"):U,re=Pn(E)?typeof n=="function"?n(j,ee):j:j+(p?"."+ee:"["+ee+"]");x.set(e,I);const K=new WeakMap;K.set(Wm,x),MR(R,IR(Z,re,n,r,i,o,l,c,n==="comma"&&w&&Pn(E)?null:f,d,m,p,g,y,S,w,C,K))}return R}function NF(e=Gt){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=e.charset||Gt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=AR;if(typeof e.format<"u"){if(!ly(iC,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=iC[n];let i=Gt.filter;(typeof e.filter=="function"||Pn(e.filter))&&(i=e.filter);let o;if(e.arrayFormat&&e.arrayFormat in OR?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=Gt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:Gt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Gt.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Gt.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Gt.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Gt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Gt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Gt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Gt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Gt.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Gt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Gt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Gt.strictNullHandling}}function DF(e,t={}){let n=e;const r=NF(t);let i,o;typeof r.filter=="function"?(o=r.filter,n=o("",n)):Pn(r.filter)&&(o=r.filter,i=o);const l=[];if(typeof n!="object"||n===null)return"";const c=OR[r.arrayFormat],f=c==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const d=new WeakMap;for(let g=0;g<i.length;++g){const y=i[g];r.skipNulls&&n[y]===null||MR(l,IR(n[y],y,c,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}const m=l.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function zF(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}let aC;function _0(e){let t;return(aC??(t=new globalThis.TextEncoder,aC=t.encode.bind(t)))(e)}let lC;function uC(e){let t;return(lC??(t=new globalThis.TextDecoder,lC=t.decode.bind(t)))(e)}var Jn,Xn;class Id{constructor(){Jn.set(this,void 0),Xn.set(this,void 0),Pe(this,Jn,new Uint8Array),Pe(this,Xn,null)}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?_0(t):t;Pe(this,Jn,zF([Y(this,Jn,"f"),n]));const r=[];let i;for(;(i=LF(Y(this,Jn,"f"),Y(this,Xn,"f")))!=null;){if(i.carriage&&Y(this,Xn,"f")==null){Pe(this,Xn,i.index);continue}if(Y(this,Xn,"f")!=null&&(i.index!==Y(this,Xn,"f")+1||i.carriage)){r.push(uC(Y(this,Jn,"f").subarray(0,Y(this,Xn,"f")-1))),Pe(this,Jn,Y(this,Jn,"f").subarray(Y(this,Xn,"f"))),Pe(this,Xn,null);continue}const o=Y(this,Xn,"f")!==null?i.preceding-1:i.preceding,l=uC(Y(this,Jn,"f").subarray(0,o));r.push(l),Pe(this,Jn,Y(this,Jn,"f").subarray(i.index)),Pe(this,Xn,null)}return r}flush(){return Y(this,Jn,"f").length?this.decode(`
`):[]}}Jn=new WeakMap,Xn=new WeakMap;Id.NEWLINE_CHARS=new Set([`
`,"\r"]);Id.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function LF(e,t){for(let i=t??0;i<e.length;i++){if(e[i]===10)return{preceding:i,index:i+1,carriage:!1};if(e[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function PF(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}const td={off:0,error:200,warn:300,info:400,debug:500},cC=(e,t,n)=>{if(e){if(vF(td,e))return e;cn(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(td))}`)}};function zl(){}function tf(e,t,n){return!t||td[e]>td[n]?zl:t[e].bind(t)}const jF={error:zl,warn:zl,info:zl,debug:zl};let fC=new WeakMap;function cn(e){const t=e.logger,n=e.logLevel??"off";if(!t)return jF;const r=fC.get(t);if(r&&r[0]===n)return r[1];const i={error:tf("error",t,n),warn:tf("warn",t,n),info:tf("info",t,n),debug:tf("debug",t,n)};return fC.set(t,[n,i]),i}const Ps=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var xl;class Hr{constructor(t,n,r){this.iterator=t,xl.set(this,void 0),this.controller=n,Pe(this,xl,r)}static fromSSEResponse(t,n,r){let i=!1;const o=r?cn(r):console;async function*l(){if(i)throw new Oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let c=!1;try{for await(const f of FF(t,n))if(!c){if(f.data.startsWith("[DONE]")){c=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let d;try{d=JSON.parse(f.data)}catch(m){throw o.error("Could not parse message into JSON:",f.data),o.error("From chunk:",f.raw),m}if(d&&d.error)throw new dn(void 0,d.error,void 0,t.headers);yield d}else{let d;try{d=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new dn(void 0,d.error,d.message,void 0);yield{event:f.event,data:d}}}c=!0}catch(f){if(oy(f))return;throw f}finally{c||n.abort()}}return new Hr(l,n,r)}static fromReadableStream(t,n,r){let i=!1;async function*o(){const c=new Id,f=kR(t);for await(const d of f)for(const m of c.decode(d))yield m;for(const d of c.flush())yield d}async function*l(){if(i)throw new Oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let c=!1;try{for await(const f of o())c||f&&(yield JSON.parse(f));c=!0}catch(f){if(oy(f))return;throw f}finally{c||n.abort()}}return new Hr(l,n,r)}[(xl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const l=r.next();t.push(l),n.push(l)}return o.shift()}});return[new Hr(()=>i(t),this.controller,Y(this,xl,"f")),new Hr(()=>i(n),this.controller,Y(this,xl,"f"))]}toReadableStream(){const t=this;let n;return ER({async start(){n=t[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const l=_0(JSON.stringify(i)+`
`);r.enqueue(l)}catch(i){r.error(i)}},async cancel(){await n.return?.()}})}}async function*FF(e,t){if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Oe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Oe("Attempted to iterate over a response with no body");const n=new BF,r=new Id,i=kR(e.body);for await(const o of $F(i))for(const l of r.decode(o)){const c=n.decode(l);c&&(yield c)}for(const o of r.flush()){const l=n.decode(o);l&&(yield l)}}async function*$F(e){let t=new Uint8Array;for await(const n of e){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?_0(n):n;let i=new Uint8Array(t.length+r.length);i.set(t),i.set(r,t.length),t=i;let o;for(;(o=PF(t))!==-1;)yield t.slice(0,o),t=t.slice(o)}t.length>0&&(yield t)}class BF{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,i]=UF(t,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function UF(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}async function NR(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=t,l=await(async()=>{if(t.options.stream)return cn(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Hr.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return DR(p,n)}return await n.text()})();return cn(e).debug(`[${r}] response parsed`,Ps({retryOfRequestLogID:i,url:n.url,status:n.status,body:l,durationMs:Date.now()-o})),l}function DR(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}var Ll;class Nd extends Promise{constructor(t,n,r=NR){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,Ll.set(this,void 0),Pe(this,Ll,t)}_thenUnwrap(t){return new Nd(Y(this,Ll,"f"),this.responsePromise,async(n,r)=>DR(t(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(Y(this,Ll,"f"),t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}Ll=new WeakMap;var nf;class x0{constructor(t,n,r,i){nf.set(this,void 0),Pe(this,nf,t),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const t=this.nextPageRequestOptions();if(!t)throw new Oe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await Y(this,nf,"f").requestAPIList(this.constructor,t)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(nf=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class qF extends Nd{constructor(t,n,r){super(t,n,async(i,o)=>new r(i,o.response,await NR(i,o),o.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}class Dd extends x0{constructor(t,n,r,i){super(t,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Ht extends x0{constructor(t,n,r,i){super(t,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const t=this.getPaginatedItems(),n=t[t.length-1]?.id;return n?{...this.options,query:{...CR(this.options.query),after:n}}:null}}class nd extends x0{constructor(t,n,r,i){super(t,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const t=this.last_id;return t?{...this.options,query:{...CR(this.options.query),after:t}}:null}}const zR=()=>{if(typeof File>"u"){const{process:e}=globalThis,t=typeof e?.versions?.node=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Xl(e,t,n){return zR(),new File(e,t??"unknown_file",n)}function wf(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const C0=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",dC=async(e,t)=>uy(e.body)?{...e,body:await LR(e.body,t)}:e,Ys=async(e,t)=>({...e,body:await LR(e.body,t)}),hC=new WeakMap;function HF(e){const t=typeof e=="function"?e:e.fetch,n=hC.get(t);if(n)return n;const r=(async()=>{try{const i="Response"in t?t.Response:(await t("data:,")).constructor,o=new FormData;return o.toString()!==await new i(o).text()}catch{return!0}})();return hC.set(t,r),r}const LR=async(e,t)=>{if(!await HF(t))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(e||{}).map(([r,i])=>cy(n,r,i))),n},PR=e=>e instanceof Blob&&"name"in e,VF=e=>typeof e=="object"&&e!==null&&(e instanceof Response||C0(e)||PR(e)),uy=e=>{if(VF(e))return!0;if(Array.isArray(e))return e.some(uy);if(e&&typeof e=="object"){for(const t in e)if(uy(e[t]))return!0}return!1},cy=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(n instanceof Response)e.append(t,Xl([await n.blob()],wf(n)));else if(C0(n))e.append(t,Xl([await new Response(RR(n)).blob()],wf(n)));else if(PR(n))e.append(t,n,wf(n));else if(Array.isArray(n))await Promise.all(n.map(r=>cy(e,t+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>cy(e,`${t}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},jR=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",KF=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&jR(e),GF=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function QF(e,t,n){if(zR(),e=await e,KF(e))return e instanceof File?e:Xl([await e.arrayBuffer()],e.name);if(GF(e)){const i=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Xl(await fy(i),t,n)}const r=await fy(e);if(t||(t=wf(e)),!n?.type){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n={...n,type:i})}return Xl(r,t,n)}async function fy(e){let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(jR(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(C0(e))for await(const n of e)t.push(...await fy(n));else{const n=e?.constructor?.name;throw new Error(`Unexpected data type: ${typeof e}${n?`; constructor: ${n}`:""}${ZF(e)}`)}return t}function ZF(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}class Ae{constructor(t){this._client=t}}function FR(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const pC=Object.freeze(Object.create(null)),YF=(e=FR)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],l=n.reduce((m,p,g)=>{/[?#]/.test(p)&&(i=!0);const y=r[g];let S=(i?encodeURIComponent:e)(""+y);return g!==r.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??pC)??pC)?.toString)&&(S=y+"",o.push({start:m.length+p.length,length:S.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),m+p+(g===r.length?"":S)},""),c=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=f.exec(c))!==null;)o.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(o.sort((m,p)=>m.start-p.start),o.length>0){let m=0;const p=o.reduce((g,y)=>{const S=" ".repeat(y.start-m),w="^".repeat(y.length);return m=y.start+y.length,g+S+w},"");throw new Oe(`Path parameters result in path with invalid segments:
${o.map(g=>g.error).join(`
`)}
${l}
${p}`)}return l},fe=YF(FR);let $R=class extends Ae{list(t,n={},r){return this._client.getAPIList(fe`/chat/completions/${t}/messages`,Ht,{query:n,...r})}};function rd(e){return e!==void 0&&"function"in e&&e.function!==void 0}function E0(e){return e?.$brand==="auto-parseable-response-format"}function xu(e){return e?.$brand==="auto-parseable-tool"}function JF(e,t){return!t||!BR(t)?{...e,choices:e.choices.map(n=>(UR(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:R0(e,t)}function R0(e,t){const n=e.choices.map(r=>{if(r.finish_reason==="length")throw new _R;if(r.finish_reason==="content_filter")throw new xR;return UR(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(i=>WF(t,i))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?XF(t,r.message.content):null}}});return{...e,choices:n}}function XF(e,t){return e.response_format?.type!=="json_schema"?null:e.response_format?.type==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function WF(e,t){const n=e.tools?.find(r=>rd(r)&&r.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:xu(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}function e$(e,t){if(!e||!("tools"in e)||!e.tools)return!1;const n=e.tools?.find(r=>rd(r)&&r.function?.name===t.function.name);return rd(n)&&(xu(n)||n?.function.strict||!1)}function BR(e){return E0(e.response_format)?!0:e.tools?.some(t=>xu(t)||t.type==="function"&&t.function.strict===!0)??!1}function UR(e){for(const t of e||[])if(t.type!=="function")throw new Oe(`Currently only \`function\` tool calls are supported; Received \`${t.type}\``)}function t$(e){for(const t of e??[]){if(t.type!=="function")throw new Oe(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new Oe(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const id=e=>e?.role==="assistant",qR=e=>e?.role==="tool";var dy,_f,xf,Pl,jl,Cf,Fl,yi,$l,sd,od,Yo,HR;class k0{constructor(){dy.add(this),this.controller=new AbortController,_f.set(this,void 0),xf.set(this,()=>{}),Pl.set(this,()=>{}),jl.set(this,void 0),Cf.set(this,()=>{}),Fl.set(this,()=>{}),yi.set(this,{}),$l.set(this,!1),sd.set(this,!1),od.set(this,!1),Yo.set(this,!1),Pe(this,_f,new Promise((t,n)=>{Pe(this,xf,t,"f"),Pe(this,Pl,n,"f")})),Pe(this,jl,new Promise((t,n)=>{Pe(this,Cf,t,"f"),Pe(this,Fl,n,"f")})),Y(this,_f,"f").catch(()=>{}),Y(this,jl,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},Y(this,dy,"m",HR).bind(this))},0)}_connected(){this.ended||(Y(this,xf,"f").call(this),this._emit("connect"))}get ended(){return Y(this,$l,"f")}get errored(){return Y(this,sd,"f")}get aborted(){return Y(this,od,"f")}abort(){this.controller.abort()}on(t,n){return(Y(this,yi,"f")[t]||(Y(this,yi,"f")[t]=[])).push({listener:n}),this}off(t,n){const r=Y(this,yi,"f")[t];if(!r)return this;const i=r.findIndex(o=>o.listener===n);return i>=0&&r.splice(i,1),this}once(t,n){return(Y(this,yi,"f")[t]||(Y(this,yi,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,r)=>{Pe(this,Yo,!0),t!=="error"&&this.once("error",r),this.once(t,n)})}async done(){Pe(this,Yo,!0),await Y(this,jl,"f")}_emit(t,...n){if(Y(this,$l,"f"))return;t==="end"&&(Pe(this,$l,!0),Y(this,Cf,"f").call(this));const r=Y(this,yi,"f")[t];if(r&&(Y(this,yi,"f")[t]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),t==="abort"){const i=n[0];!Y(this,Yo,"f")&&!r?.length&&Promise.reject(i),Y(this,Pl,"f").call(this,i),Y(this,Fl,"f").call(this,i),this._emit("end");return}if(t==="error"){const i=n[0];!Y(this,Yo,"f")&&!r?.length&&Promise.reject(i),Y(this,Pl,"f").call(this,i),Y(this,Fl,"f").call(this,i),this._emit("end")}}_emitFinal(){}}_f=new WeakMap,xf=new WeakMap,Pl=new WeakMap,jl=new WeakMap,Cf=new WeakMap,Fl=new WeakMap,yi=new WeakMap,$l=new WeakMap,sd=new WeakMap,od=new WeakMap,Yo=new WeakMap,dy=new WeakSet,HR=function(t){if(Pe(this,sd,!0),t instanceof Error&&t.name==="AbortError"&&(t=new Cr),t instanceof Cr)return Pe(this,od,!0),this._emit("abort",t);if(t instanceof Oe)return this._emit("error",t);if(t instanceof Error){const n=new Oe(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new Oe(String(t)))};function n$(e){return typeof e.parse=="function"}var xn,hy,ad,py,my,gy,VR,KR;const r$=10;class GR extends k0{constructor(){super(...arguments),xn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=t.choices[0]?.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),qR(t)&&t.content)this._emit("functionToolCallResult",t.content);else if(id(t)&&t.tool_calls)for(const r of t.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new Oe("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),Y(this,xn,"m",hy).call(this)}async finalMessage(){return await this.done(),Y(this,xn,"m",ad).call(this)}async finalFunctionToolCall(){return await this.done(),Y(this,xn,"m",py).call(this)}async finalFunctionToolCallResult(){return await this.done(),Y(this,xn,"m",my).call(this)}async totalUsage(){return await this.done(),Y(this,xn,"m",gy).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=Y(this,xn,"m",ad).call(this);n&&this._emit("finalMessage",n);const r=Y(this,xn,"m",hy).call(this);r&&this._emit("finalContent",r);const i=Y(this,xn,"m",py).call(this);i&&this._emit("finalFunctionToolCall",i);const o=Y(this,xn,"m",my).call(this);o!=null&&this._emit("finalFunctionToolCallResult",o),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",Y(this,xn,"m",gy).call(this))}async _createChatCompletion(t,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Y(this,xn,"m",VR).call(this,n);const o=await t.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(R0(o,n))}async _runChatCompletion(t,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(t,n,r)}async _runTools(t,n,r){const i="tool",{tool_choice:o="auto",stream:l,...c}=n,f=typeof o!="string"&&o.type==="function"&&o?.function?.name,{maxChatCompletions:d=r$}=r||{},m=n.tools.map(y=>{if(xu(y)){if(!y.$callback)throw new Oe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),p={};for(const y of m)y.type==="function"&&(p[y.function.name||y.function.function.name]=y.function);const g="tools"in n?m.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<d;++y){const w=(await this._createChatCompletion(t,{...c,tool_choice:o,tools:g,messages:[...this.messages]},r)).choices[0]?.message;if(!w)throw new Oe("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(const C of w.tool_calls){if(C.type!=="function")continue;const x=C.id,{name:E,arguments:k}=C.function,I=p[E];if(I){if(f&&f!==E){const L=`Invalid tool_call: ${JSON.stringify(E)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:i,tool_call_id:x,content:L});continue}}else{const L=`Invalid tool_call: ${JSON.stringify(E)}. Available options are: ${Object.keys(p).map(j=>JSON.stringify(j)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:x,content:L});continue}let P;try{P=n$(I)?await I.parse(k):k}catch(L){const j=L instanceof Error?L.message:String(L);this._addMessage({role:i,tool_call_id:x,content:j});continue}const R=await I.function(P,this),M=Y(this,xn,"m",KR).call(this,R);if(this._addMessage({role:i,tool_call_id:x,content:M}),f)return}}}}xn=new WeakSet,hy=function(){return Y(this,xn,"m",ad).call(this).content??null},ad=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(id(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Oe("stream ended without producing a ChatCompletionMessage with role=assistant")},py=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(id(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},my=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(qR(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(i=>i.type==="function"&&i.id===n.tool_call_id)))return n.content}},gy=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},VR=function(t){if(t.n!=null&&t.n>1)throw new Oe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},KR=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class A0 extends GR{static runTools(t,n,r){const i=new A0,o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(t,n,o)),i}_addMessage(t,n=!0){super._addMessage(t,n),id(t)&&t.content&&this._emit("content",t.content)}}const QR=1,ZR=2,YR=4,JR=8,XR=16,WR=32,ek=64,tk=128,nk=256,rk=tk|nk,ik=XR|WR|rk|ek,sk=QR|ZR|ik,ok=YR|JR,i$=sk|ok,nn={STR:QR,NUM:ZR,ARR:YR,OBJ:JR,NULL:XR,BOOL:WR,NAN:ek,INFINITY:tk,MINUS_INFINITY:nk,INF:rk,SPECIAL:ik,ATOM:sk,COLLECTION:ok,ALL:i$};class s$ extends Error{}class o$ extends Error{}function a$(e,t=nn.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return l$(e.trim(),t)}const l$=(e,t)=>{const n=e.length;let r=0;const i=g=>{throw new s$(`${g} at position ${r}`)},o=g=>{throw new o$(`${g} at position ${r}`)},l=()=>(p(),r>=n&&i("Unexpected end of input"),e[r]==='"'?c():e[r]==="{"?f():e[r]==="["?d():e.substring(r,r+4)==="null"||nn.NULL&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):e.substring(r,r+4)==="true"||nn.BOOL&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):e.substring(r,r+5)==="false"||nn.BOOL&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):e.substring(r,r+8)==="Infinity"||nn.INFINITY&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):e.substring(r,r+9)==="-Infinity"||nn.MINUS_INFINITY&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):e.substring(r,r+3)==="NaN"||nn.NAN&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):m()),c=()=>{const g=r;let y=!1;for(r++;r<n&&(e[r]!=='"'||y&&e[r-1]==="\\");)y=e[r]==="\\"?!y:!1,r++;if(e.charAt(r)=='"')try{return JSON.parse(e.substring(g,++r-Number(y)))}catch(S){o(String(S))}else if(nn.STR&t)try{return JSON.parse(e.substring(g,r-Number(y))+'"')}catch{return JSON.parse(e.substring(g,e.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},f=()=>{r++,p();const g={};try{for(;e[r]!=="}";){if(p(),r>=n&&nn.OBJ&t)return g;const y=c();p(),r++;try{const S=l();Object.defineProperty(g,y,{value:S,writable:!0,enumerable:!0,configurable:!0})}catch(S){if(nn.OBJ&t)return g;throw S}p(),e[r]===","&&r++}}catch{if(nn.OBJ&t)return g;i("Expected '}' at end of object")}return r++,g},d=()=>{r++;const g=[];try{for(;e[r]!=="]";)g.push(l()),p(),e[r]===","&&r++}catch{if(nn.ARR&t)return g;i("Expected ']' at end of array")}return r++,g},m=()=>{if(r===0){e==="-"&&nn.NUM&t&&i("Not sure what '-' is");try{return JSON.parse(e)}catch(y){if(nn.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}o(String(y))}}const g=r;for(e[r]==="-"&&r++;e[r]&&!",]}".includes(e[r]);)r++;r==n&&!(nn.NUM&t)&&i("Unterminated number literal");try{return JSON.parse(e.substring(g,r))}catch{e.substring(g,r)==="-"&&nn.NUM&t&&i("Not sure what '-' is");try{return JSON.parse(e.substring(g,e.lastIndexOf("e")))}catch(S){o(String(S))}}},p=()=>{for(;r<n&&` 
\r	`.includes(e[r]);)r++};return l()},mC=e=>a$(e,nn.ALL^nn.NUM);var Kt,gi,qo,Zi,eg,rf,tg,ng,rg,sf,ig,gC;class fu extends GR{constructor(t){super(),Kt.add(this),gi.set(this,void 0),qo.set(this,void 0),Zi.set(this,void 0),Pe(this,gi,t),Pe(this,qo,[])}get currentChatCompletionSnapshot(){return Y(this,Zi,"f")}static fromReadableStream(t){const n=new fu(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,r){const i=new fu(n);return i._run(()=>i._runChatCompletion(t,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(t,n,r){super._createChatCompletion;const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Y(this,Kt,"m",eg).call(this);const o=await t.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of o)Y(this,Kt,"m",tg).call(this,l);if(o.controller.signal?.aborted)throw new Cr;return this._addChatCompletion(Y(this,Kt,"m",sf).call(this))}async _fromReadableStream(t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Y(this,Kt,"m",eg).call(this),this._connected();const i=Hr.fromReadableStream(t,this.controller);let o;for await(const l of i)o&&o!==l.id&&this._addChatCompletion(Y(this,Kt,"m",sf).call(this)),Y(this,Kt,"m",tg).call(this,l),o=l.id;if(i.controller.signal?.aborted)throw new Cr;return this._addChatCompletion(Y(this,Kt,"m",sf).call(this))}[(gi=new WeakMap,qo=new WeakMap,Zi=new WeakMap,Kt=new WeakSet,eg=function(){this.ended||Pe(this,Zi,void 0)},rf=function(n){let r=Y(this,qo,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Y(this,qo,"f")[n.index]=r,r)},tg=function(n){if(this.ended)return;const r=Y(this,Kt,"m",gC).call(this,n);this._emit("chunk",n,r);for(const i of n.choices){const o=r.choices[i.index];i.delta.content!=null&&o.message?.role==="assistant"&&o.message?.content&&(this._emit("content",i.delta.content,o.message.content),this._emit("content.delta",{delta:i.delta.content,snapshot:o.message.content,parsed:o.message.parsed})),i.delta.refusal!=null&&o.message?.role==="assistant"&&o.message?.refusal&&this._emit("refusal.delta",{delta:i.delta.refusal,snapshot:o.message.refusal}),i.logprobs?.content!=null&&o.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:i.logprobs?.content,snapshot:o.logprobs?.content??[]}),i.logprobs?.refusal!=null&&o.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:i.logprobs?.refusal,snapshot:o.logprobs?.refusal??[]});const l=Y(this,Kt,"m",rf).call(this,o);o.finish_reason&&(Y(this,Kt,"m",rg).call(this,o),l.current_tool_call_index!=null&&Y(this,Kt,"m",ng).call(this,o,l.current_tool_call_index));for(const c of i.delta.tool_calls??[])l.current_tool_call_index!==c.index&&(Y(this,Kt,"m",rg).call(this,o),l.current_tool_call_index!=null&&Y(this,Kt,"m",ng).call(this,o,l.current_tool_call_index)),l.current_tool_call_index=c.index;for(const c of i.delta.tool_calls??[]){const f=o.message.tool_calls?.[c.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:c.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(f?.type,void 0))}}},ng=function(n,r){if(Y(this,Kt,"m",rf).call(this,n).done_tool_calls.has(r))return;const o=n.message.tool_calls?.[r];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){const l=Y(this,gi,"f")?.tools?.find(c=>rd(c)&&c.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:r,arguments:o.function.arguments,parsed_arguments:xu(l)?l.$parseRaw(o.function.arguments):l?.function.strict?JSON.parse(o.function.arguments):null})}else o.type},rg=function(n){const r=Y(this,Kt,"m",rf).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const i=Y(this,Kt,"m",ig).call(this);this._emit("content.done",{content:n.message.content,parsed:i?i.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},sf=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");const n=Y(this,Zi,"f");if(!n)throw new Oe("request ended without sending any chunks");return Pe(this,Zi,void 0),Pe(this,qo,[]),u$(n,Y(this,gi,"f"))},ig=function(){const n=Y(this,gi,"f")?.response_format;return E0(n)?n:null},gC=function(n){var r,i,o,l;let c=Y(this,Zi,"f");const{choices:f,...d}=n;c?Object.assign(c,d):c=Pe(this,Zi,{...d,choices:[]});for(const{delta:m,finish_reason:p,index:g,logprobs:y=null,...S}of n.choices){let w=c.choices[g];if(w||(w=c.choices[g]={finish_reason:p,index:g,message:{},logprobs:y,...S}),y)if(!w.logprobs)w.logprobs=Object.assign({},y);else{const{content:R,refusal:M,...L}=y;Object.assign(w.logprobs,L),R&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...R)),M&&((i=w.logprobs).refusal??(i.refusal=[]),w.logprobs.refusal.push(...M))}if(p&&(w.finish_reason=p,Y(this,gi,"f")&&BR(Y(this,gi,"f")))){if(p==="length")throw new _R;if(p==="content_filter")throw new xR}if(Object.assign(w,S),!m)continue;const{content:C,refusal:x,function_call:E,role:k,tool_calls:I,...P}=m;if(Object.assign(w.message,P),x&&(w.message.refusal=(w.message.refusal||"")+x),k&&(w.message.role=k),E&&(w.message.function_call?(E.name&&(w.message.function_call.name=E.name),E.arguments&&((o=w.message.function_call).arguments??(o.arguments=""),w.message.function_call.arguments+=E.arguments)):w.message.function_call=E),C&&(w.message.content=(w.message.content||"")+C,!w.message.refusal&&Y(this,Kt,"m",ig).call(this)&&(w.message.parsed=mC(w.message.content))),I){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:R,id:M,type:L,function:j,...N}of I){const U=(l=w.message.tool_calls)[R]??(l[R]={});Object.assign(U,N),M&&(U.id=M),L&&(U.type=L),j&&(U.function??(U.function={name:j.name??"",arguments:""})),j?.name&&(U.function.name=j.name),j?.arguments&&(U.function.arguments+=j.arguments,e$(Y(this,gi,"f"),U)&&(U.function.parsed_arguments=mC(U.function.arguments)))}}}return c},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("chunk",i=>{const o=n.shift();o?o.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,l)=>n.push({resolve:o,reject:l})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Hr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function u$(e,t){const{id:n,choices:r,created:i,model:o,system_fingerprint:l,...c}=e,f={...c,id:n,choices:r.map(({message:d,finish_reason:m,index:p,logprobs:g,...y})=>{if(!m)throw new Oe(`missing finish_reason for choice ${p}`);const{content:S=null,function_call:w,tool_calls:C,...x}=d,E=d.role;if(!E)throw new Oe(`missing role for choice ${p}`);if(w){const{arguments:k,name:I}=w;if(k==null)throw new Oe(`missing function_call.arguments for choice ${p}`);if(!I)throw new Oe(`missing function_call.name for choice ${p}`);return{...y,message:{content:S,function_call:{arguments:k,name:I},role:E,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:g}}return C?{...y,index:p,finish_reason:m,logprobs:g,message:{...x,role:E,content:S,refusal:d.refusal??null,tool_calls:C.map((k,I)=>{const{function:P,type:R,id:M,...L}=k,{arguments:j,name:N,...U}=P||{};if(M==null)throw new Oe(`missing choices[${p}].tool_calls[${I}].id
${of(e)}`);if(R==null)throw new Oe(`missing choices[${p}].tool_calls[${I}].type
${of(e)}`);if(N==null)throw new Oe(`missing choices[${p}].tool_calls[${I}].function.name
${of(e)}`);if(j==null)throw new Oe(`missing choices[${p}].tool_calls[${I}].function.arguments
${of(e)}`);return{...L,id:M,type:R,function:{...U,name:N,arguments:j}}})}}:{...y,message:{...x,content:S,role:E,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:g}}),created:i,model:o,object:"chat.completion",...l?{system_fingerprint:l}:{}};return JF(f,t)}function of(e){return JSON.stringify(e)}class ld extends fu{static fromReadableStream(t){const n=new ld(null);return n._run(()=>n._fromReadableStream(t)),n}static runTools(t,n,r){const i=new ld(n),o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(t,n,o)),i}}let T0=class extends Ae{constructor(){super(...arguments),this.messages=new $R(this._client)}create(t,n){return this._client.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}retrieve(t,n){return this._client.get(fe`/chat/completions/${t}`,n)}update(t,n,r){return this._client.post(fe`/chat/completions/${t}`,{body:n,...r})}list(t={},n){return this._client.getAPIList("/chat/completions",Ht,{query:t,...n})}delete(t,n){return this._client.delete(fe`/chat/completions/${t}`,n)}parse(t,n){return t$(t.tools),this._client.chat.completions.create(t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>R0(r,t))}runTools(t,n){return t.stream?ld.runTools(this._client,t,n):A0.runTools(this._client,t,n)}stream(t,n){return fu.createChatCompletion(this._client,t,n)}};T0.Messages=$R;class O0 extends Ae{constructor(){super(...arguments),this.completions=new T0(this._client)}}O0.Completions=T0;const ak=Symbol("brand.privateNullableHeaders");function*c$(e){if(!e)return;if(ak in e){const{values:r,nulls:i}=e;yield*r.entries();for(const o of i)yield[o,null];return}let t=!1,n;e instanceof Headers?n=e.entries():eC(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=eC(r[1])?r[1]:[r[1]];let l=!1;for(const c of o)c!==void 0&&(t&&!l&&(l=!0,yield[i,null]),yield[i,c])}}const Ce=e=>{const t=new Headers,n=new Set;for(const r of e){const i=new Set;for(const[o,l]of c$(r)){const c=o.toLowerCase();i.has(c)||(t.delete(o),i.add(c)),l===null?(t.delete(o),n.add(c)):(t.append(o,l),n.delete(c))}}return{[ak]:!0,values:t,nulls:n}};class lk extends Ae{create(t,n){return this._client.post("/audio/speech",{body:t,...n,headers:Ce([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class uk extends Ae{create(t,n){return this._client.post("/audio/transcriptions",Ys({body:t,...n,stream:t.stream??!1,__metadata:{model:t.model}},this._client))}}class ck extends Ae{create(t,n){return this._client.post("/audio/translations",Ys({body:t,...n,__metadata:{model:t.model}},this._client))}}class Cu extends Ae{constructor(){super(...arguments),this.transcriptions=new uk(this._client),this.translations=new ck(this._client),this.speech=new lk(this._client)}}Cu.Transcriptions=uk;Cu.Translations=ck;Cu.Speech=lk;class fk extends Ae{create(t,n){return this._client.post("/batches",{body:t,...n})}retrieve(t,n){return this._client.get(fe`/batches/${t}`,n)}list(t={},n){return this._client.getAPIList("/batches",Ht,{query:t,...n})}cancel(t,n){return this._client.post(fe`/batches/${t}/cancel`,n)}}class dk extends Ae{create(t,n){return this._client.post("/assistants",{body:t,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(fe`/assistants/${t}`,{...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,r){return this._client.post(fe`/assistants/${t}`,{body:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(t={},n){return this._client.getAPIList("/assistants",Ht,{query:t,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(t,n){return this._client.delete(fe`/assistants/${t}`,{...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let hk=class extends Ae{create(t,n){return this._client.post("/realtime/sessions",{body:t,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class pk extends Ae{create(t,n){return this._client.post("/realtime/transcription_sessions",{body:t,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let zd=class extends Ae{constructor(){super(...arguments),this.sessions=new hk(this._client),this.transcriptionSessions=new pk(this._client)}};zd.Sessions=hk;zd.TranscriptionSessions=pk;class mk extends Ae{create(t,n){return this._client.post("/chatkit/sessions",{body:t,...n,headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(t,n){return this._client.post(fe`/chatkit/sessions/${t}/cancel`,{...n,headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let gk=class extends Ae{retrieve(t,n){return this._client.get(fe`/chatkit/threads/${t}`,{...n,headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(t={},n){return this._client.getAPIList("/chatkit/threads",nd,{query:t,...n,headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(t,n){return this._client.delete(fe`/chatkit/threads/${t}`,{...n,headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(t,n={},r){return this._client.getAPIList(fe`/chatkit/threads/${t}/items`,nd,{query:n,...r,headers:Ce([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class Ld extends Ae{constructor(){super(...arguments),this.sessions=new mk(this._client),this.threads=new gk(this._client)}}Ld.Sessions=mk;Ld.Threads=gk;class yk extends Ae{create(t,n,r){return this._client.post(fe`/threads/${t}/messages`,{body:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(t,n,r){const{thread_id:i}=n;return this._client.get(fe`/threads/${i}/messages/${t}`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(t,n,r){const{thread_id:i,...o}=n;return this._client.post(fe`/threads/${i}/messages/${t}`,{body:o,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(t,n={},r){return this._client.getAPIList(fe`/threads/${t}/messages`,Ht,{query:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(t,n,r){const{thread_id:i}=n;return this._client.delete(fe`/threads/${i}/messages/${t}`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class vk extends Ae{retrieve(t,n,r){const{thread_id:i,run_id:o,...l}=n;return this._client.get(fe`/threads/${i}/runs/${o}/steps/${t}`,{query:l,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(t,n,r){const{thread_id:i,...o}=n;return this._client.getAPIList(fe`/threads/${i}/runs/${t}/steps`,Ht,{query:o,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const f$=e=>{if(typeof Buffer<"u"){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}else{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var d$={};const Ho=e=>{if(typeof globalThis.process<"u")return d$?.[e]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(e)?.trim()};var fn,Bs,yy,qr,Ef,Or,Us,ia,Fs,ud,er,Rf,kf,Wl,Bl,Ul,yC,vC,bC,SC,wC,_C,xC;class eu extends k0{constructor(){super(...arguments),fn.add(this),yy.set(this,[]),qr.set(this,{}),Ef.set(this,{}),Or.set(this,void 0),Us.set(this,void 0),ia.set(this,void 0),Fs.set(this,void 0),ud.set(this,void 0),er.set(this,void 0),Rf.set(this,void 0),kf.set(this,void 0),Wl.set(this,void 0)}[(yy=new WeakMap,qr=new WeakMap,Ef=new WeakMap,Or=new WeakMap,Us=new WeakMap,ia=new WeakMap,Fs=new WeakMap,ud=new WeakMap,er=new WeakMap,Rf=new WeakMap,kf=new WeakMap,Wl=new WeakMap,fn=new WeakSet,Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("event",i=>{const o=n.shift();o?o.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,l)=>n.push({resolve:o,reject:l})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const n=new Bs;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=Hr.fromReadableStream(t,this.controller);for await(const o of i)Y(this,fn,"m",Bl).call(this,o);if(i.controller.signal?.aborted)throw new Cr;return this._addRun(Y(this,fn,"m",Ul).call(this))}toReadableStream(){return new Hr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,r,i){const o=new Bs;return o._run(()=>o._runToolAssistantStream(t,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(t,n,r,i){const o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},c=await t.submitToolOutputs(n,l,{...i,signal:this.controller.signal});this._connected();for await(const f of c)Y(this,fn,"m",Bl).call(this,f);if(c.controller.signal?.aborted)throw new Cr;return this._addRun(Y(this,fn,"m",Ul).call(this))}static createThreadAssistantStream(t,n,r){const i=new Bs;return i._run(()=>i._threadAssistantStream(t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(t,n,r,i){const o=new Bs;return o._run(()=>o._runAssistantStream(t,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return Y(this,Rf,"f")}currentRun(){return Y(this,kf,"f")}currentMessageSnapshot(){return Y(this,Or,"f")}currentRunStepSnapshot(){return Y(this,Wl,"f")}async finalRunSteps(){return await this.done(),Object.values(Y(this,qr,"f"))}async finalMessages(){return await this.done(),Object.values(Y(this,Ef,"f"))}async finalRun(){if(await this.done(),!Y(this,Us,"f"))throw Error("Final run was not received.");return Y(this,Us,"f")}async _createThreadAssistantStream(t,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},l=await t.createAndRun(o,{...r,signal:this.controller.signal});this._connected();for await(const c of l)Y(this,fn,"m",Bl).call(this,c);if(l.controller.signal?.aborted)throw new Cr;return this._addRun(Y(this,fn,"m",Ul).call(this))}async _createAssistantStream(t,n,r,i){const o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},c=await t.create(n,l,{...i,signal:this.controller.signal});this._connected();for await(const f of c)Y(this,fn,"m",Bl).call(this,f);if(c.controller.signal?.aborted)throw new Cr;return this._addRun(Y(this,fn,"m",Ul).call(this))}static accumulateDelta(t,n){for(const[r,i]of Object.entries(n)){if(!t.hasOwnProperty(r)){t[r]=i;continue}let o=t[r];if(o==null){t[r]=i;continue}if(r==="index"||r==="type"){t[r]=i;continue}if(typeof o=="string"&&typeof i=="string")o+=i;else if(typeof o=="number"&&typeof i=="number")o+=i;else if(Jm(o)&&Jm(i))o=this.accumulateDelta(o,i);else if(Array.isArray(o)&&Array.isArray(i)){if(o.every(l=>typeof l=="string"||typeof l=="number")){o.push(...i);continue}for(const l of i){if(!Jm(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const c=l.index;if(c==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const f=o[c];f==null?o.push(l):o[c]=this.accumulateDelta(f,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${o}`);t[r]=o}return t}_addRun(t){return t}async _threadAssistantStream(t,n,r){return await this._createThreadAssistantStream(n,t,r)}async _runAssistantStream(t,n,r,i){return await this._createAssistantStream(n,t,r,i)}async _runToolAssistantStream(t,n,r,i){return await this._createToolAssistantStream(n,t,r,i)}}Bs=eu,Bl=function(t){if(!this.ended)switch(Pe(this,Rf,t),Y(this,fn,"m",bC).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Y(this,fn,"m",xC).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Y(this,fn,"m",vC).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Y(this,fn,"m",yC).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Ul=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");if(!Y(this,Us,"f"))throw Error("Final run has not been received");return Y(this,Us,"f")},yC=function(t){const[n,r]=Y(this,fn,"m",wC).call(this,t,Y(this,Or,"f"));Pe(this,Or,n),Y(this,Ef,"f")[n.id]=n;for(const i of r){const o=n.content[i.index];o?.type=="text"&&this._emit("textCreated",o.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(const i of t.data.delta.content){if(i.type=="text"&&i.text){let o=i.text,l=n.content[i.index];if(l&&l.type=="text")this._emit("textDelta",o,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=Y(this,ia,"f")){if(Y(this,Fs,"f"))switch(Y(this,Fs,"f").type){case"text":this._emit("textDone",Y(this,Fs,"f").text,Y(this,Or,"f"));break;case"image_file":this._emit("imageFileDone",Y(this,Fs,"f").image_file,Y(this,Or,"f"));break}Pe(this,ia,i.index)}Pe(this,Fs,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(Y(this,ia,"f")!==void 0){const i=t.data.content[Y(this,ia,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,Y(this,Or,"f"));break;case"text":this._emit("textDone",i.text,Y(this,Or,"f"));break}}Y(this,Or,"f")&&this._emit("messageDone",t.data),Pe(this,Or,void 0)}},vC=function(t){const n=Y(this,fn,"m",SC).call(this,t);switch(Pe(this,Wl,n),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const r=t.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const o of r.step_details.tool_calls)o.index==Y(this,ud,"f")?this._emit("toolCallDelta",o,n.step_details.tool_calls[o.index]):(Y(this,er,"f")&&this._emit("toolCallDone",Y(this,er,"f")),Pe(this,ud,o.index),Pe(this,er,n.step_details.tool_calls[o.index]),Y(this,er,"f")&&this._emit("toolCallCreated",Y(this,er,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Pe(this,Wl,void 0),t.data.step_details.type=="tool_calls"&&Y(this,er,"f")&&(this._emit("toolCallDone",Y(this,er,"f")),Pe(this,er,void 0)),this._emit("runStepDone",t.data,n);break}},bC=function(t){Y(this,yy,"f").push(t),this._emit("event",t)},SC=function(t){switch(t.event){case"thread.run.step.created":return Y(this,qr,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=Y(this,qr,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=t.data;if(r.delta){const i=Bs.accumulateDelta(n,r.delta);Y(this,qr,"f")[t.data.id]=i}return Y(this,qr,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Y(this,qr,"f")[t.data.id]=t.data;break}if(Y(this,qr,"f")[t.data.id])return Y(this,qr,"f")[t.data.id];throw new Error("No snapshot available")},wC=function(t,n){let r=[];switch(t.event){case"thread.message.created":return[t.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=t.data;if(i.delta.content)for(const o of i.delta.content)if(o.index in n.content){let l=n.content[o.index];n.content[o.index]=Y(this,fn,"m",_C).call(this,o,l)}else n.content[o.index]=o,r.push(o);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},_C=function(t,n){return Bs.accumulateDelta(n,t)},xC=function(t){switch(Pe(this,kf,t.data),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Pe(this,Us,t.data),Y(this,er,"f")&&(this._emit("toolCallDone",Y(this,er,"f")),Pe(this,er,void 0));break}};let M0=class extends Ae{constructor(){super(...arguments),this.steps=new vk(this._client)}create(t,n,r){const{include:i,...o}=n;return this._client.post(fe`/threads/${t}/runs`,{query:{include:i},body:o,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(t,n,r){const{thread_id:i}=n;return this._client.get(fe`/threads/${i}/runs/${t}`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(t,n,r){const{thread_id:i,...o}=n;return this._client.post(fe`/threads/${i}/runs/${t}`,{body:o,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(t,n={},r){return this._client.getAPIList(fe`/threads/${t}/runs`,Ht,{query:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(t,n,r){const{thread_id:i}=n;return this._client.post(fe`/threads/${i}/runs/${t}/cancel`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(t,n,r){const i=await this.create(t,n,r);return await this.poll(i.id,{thread_id:t},r)}createAndStream(t,n,r){return eu.createAssistantStream(t,this._client.beta.threads.runs,n,r)}async poll(t,n,r){const i=Ce([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:o,response:l}=await this.retrieve(t,n,{...r,headers:{...r?.headers,...i}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await _u(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(t,n,r){return eu.createAssistantStream(t,this._client.beta.threads.runs,n,r)}submitToolOutputs(t,n,r){const{thread_id:i,...o}=n;return this._client.post(fe`/threads/${i}/runs/${t}/submit_tool_outputs`,{body:o,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(t,n,r){const i=await this.submitToolOutputs(t,n,r);return await this.poll(i.id,n,r)}submitToolOutputsStream(t,n,r){return eu.createToolAssistantStream(t,this._client.beta.threads.runs,n,r)}};M0.Steps=vk;class Pd extends Ae{constructor(){super(...arguments),this.runs=new M0(this._client),this.messages=new yk(this._client)}create(t={},n){return this._client.post("/threads",{body:t,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(fe`/threads/${t}`,{...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,r){return this._client.post(fe`/threads/${t}`,{body:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(t,n){return this._client.delete(fe`/threads/${t}`,{...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(t,n){return this._client.post("/threads/runs",{body:t,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:t.stream??!1})}async createAndRunPoll(t,n){const r=await this.createAndRun(t,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(t,n){return eu.createThreadAssistantStream(t,this._client.beta.threads,n)}}Pd.Runs=M0;Pd.Messages=yk;class Sa extends Ae{constructor(){super(...arguments),this.realtime=new zd(this._client),this.chatkit=new Ld(this._client),this.assistants=new dk(this._client),this.threads=new Pd(this._client)}}Sa.Realtime=zd;Sa.ChatKit=Ld;Sa.Assistants=dk;Sa.Threads=Pd;class bk extends Ae{create(t,n){return this._client.post("/completions",{body:t,...n,stream:t.stream??!1})}}class Sk extends Ae{retrieve(t,n,r){const{container_id:i}=n;return this._client.get(fe`/containers/${i}/files/${t}/content`,{...r,headers:Ce([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let I0=class extends Ae{constructor(){super(...arguments),this.content=new Sk(this._client)}create(t,n,r){return this._client.post(fe`/containers/${t}/files`,Ys({body:n,...r},this._client))}retrieve(t,n,r){const{container_id:i}=n;return this._client.get(fe`/containers/${i}/files/${t}`,r)}list(t,n={},r){return this._client.getAPIList(fe`/containers/${t}/files`,Ht,{query:n,...r})}delete(t,n,r){const{container_id:i}=n;return this._client.delete(fe`/containers/${i}/files/${t}`,{...r,headers:Ce([{Accept:"*/*"},r?.headers])})}};I0.Content=Sk;class N0 extends Ae{constructor(){super(...arguments),this.files=new I0(this._client)}create(t,n){return this._client.post("/containers",{body:t,...n})}retrieve(t,n){return this._client.get(fe`/containers/${t}`,n)}list(t={},n){return this._client.getAPIList("/containers",Ht,{query:t,...n})}delete(t,n){return this._client.delete(fe`/containers/${t}`,{...n,headers:Ce([{Accept:"*/*"},n?.headers])})}}N0.Files=I0;class wk extends Ae{create(t,n,r){const{include:i,...o}=n;return this._client.post(fe`/conversations/${t}/items`,{query:{include:i},body:o,...r})}retrieve(t,n,r){const{conversation_id:i,...o}=n;return this._client.get(fe`/conversations/${i}/items/${t}`,{query:o,...r})}list(t,n={},r){return this._client.getAPIList(fe`/conversations/${t}/items`,nd,{query:n,...r})}delete(t,n,r){const{conversation_id:i}=n;return this._client.delete(fe`/conversations/${i}/items/${t}`,r)}}class D0 extends Ae{constructor(){super(...arguments),this.items=new wk(this._client)}create(t={},n){return this._client.post("/conversations",{body:t,...n})}retrieve(t,n){return this._client.get(fe`/conversations/${t}`,n)}update(t,n,r){return this._client.post(fe`/conversations/${t}`,{body:n,...r})}delete(t,n){return this._client.delete(fe`/conversations/${t}`,n)}}D0.Items=wk;class _k extends Ae{create(t,n){const r=!!t.encoding_format;let i=r?t.encoding_format:"base64";r&&cn(this._client).debug("embeddings/user defined encoding_format:",t.encoding_format);const o=this._client.post("/embeddings",{body:{...t,encoding_format:i},...n});return r?o:(cn(this._client).debug("embeddings/decoding base64 embeddings from base64"),o._thenUnwrap(l=>(l&&l.data&&l.data.forEach(c=>{const f=c.embedding;c.embedding=f$(f)}),l)))}}class xk extends Ae{retrieve(t,n,r){const{eval_id:i,run_id:o}=n;return this._client.get(fe`/evals/${i}/runs/${o}/output_items/${t}`,r)}list(t,n,r){const{eval_id:i,...o}=n;return this._client.getAPIList(fe`/evals/${i}/runs/${t}/output_items`,Ht,{query:o,...r})}}class z0 extends Ae{constructor(){super(...arguments),this.outputItems=new xk(this._client)}create(t,n,r){return this._client.post(fe`/evals/${t}/runs`,{body:n,...r})}retrieve(t,n,r){const{eval_id:i}=n;return this._client.get(fe`/evals/${i}/runs/${t}`,r)}list(t,n={},r){return this._client.getAPIList(fe`/evals/${t}/runs`,Ht,{query:n,...r})}delete(t,n,r){const{eval_id:i}=n;return this._client.delete(fe`/evals/${i}/runs/${t}`,r)}cancel(t,n,r){const{eval_id:i}=n;return this._client.post(fe`/evals/${i}/runs/${t}`,r)}}z0.OutputItems=xk;class L0 extends Ae{constructor(){super(...arguments),this.runs=new z0(this._client)}create(t,n){return this._client.post("/evals",{body:t,...n})}retrieve(t,n){return this._client.get(fe`/evals/${t}`,n)}update(t,n,r){return this._client.post(fe`/evals/${t}`,{body:n,...r})}list(t={},n){return this._client.getAPIList("/evals",Ht,{query:t,...n})}delete(t,n){return this._client.delete(fe`/evals/${t}`,n)}}L0.Runs=z0;let Ck=class extends Ae{create(t,n){return this._client.post("/files",Ys({body:t,...n},this._client))}retrieve(t,n){return this._client.get(fe`/files/${t}`,n)}list(t={},n){return this._client.getAPIList("/files",Ht,{query:t,...n})}delete(t,n){return this._client.delete(fe`/files/${t}`,n)}content(t,n){return this._client.get(fe`/files/${t}/content`,{...n,headers:Ce([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const i=new Set(["processed","error","deleted"]),o=Date.now();let l=await this.retrieve(t);for(;!l.status||!i.has(l.status);)if(await _u(n),l=await this.retrieve(t),Date.now()-o>r)throw new w0({message:`Giving up on waiting for file ${t} to finish processing after ${r} milliseconds.`});return l}};class Ek extends Ae{}let Rk=class extends Ae{run(t,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:t,...n})}validate(t,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:t,...n})}};class P0 extends Ae{constructor(){super(...arguments),this.graders=new Rk(this._client)}}P0.Graders=Rk;class kk extends Ae{create(t,n,r){return this._client.getAPIList(fe`/fine_tuning/checkpoints/${t}/permissions`,Dd,{body:n,method:"post",...r})}retrieve(t,n={},r){return this._client.get(fe`/fine_tuning/checkpoints/${t}/permissions`,{query:n,...r})}delete(t,n,r){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(fe`/fine_tuning/checkpoints/${i}/permissions/${t}`,r)}}let j0=class extends Ae{constructor(){super(...arguments),this.permissions=new kk(this._client)}};j0.Permissions=kk;class Ak extends Ae{list(t,n={},r){return this._client.getAPIList(fe`/fine_tuning/jobs/${t}/checkpoints`,Ht,{query:n,...r})}}class F0 extends Ae{constructor(){super(...arguments),this.checkpoints=new Ak(this._client)}create(t,n){return this._client.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this._client.get(fe`/fine_tuning/jobs/${t}`,n)}list(t={},n){return this._client.getAPIList("/fine_tuning/jobs",Ht,{query:t,...n})}cancel(t,n){return this._client.post(fe`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},r){return this._client.getAPIList(fe`/fine_tuning/jobs/${t}/events`,Ht,{query:n,...r})}pause(t,n){return this._client.post(fe`/fine_tuning/jobs/${t}/pause`,n)}resume(t,n){return this._client.post(fe`/fine_tuning/jobs/${t}/resume`,n)}}F0.Checkpoints=Ak;class wa extends Ae{constructor(){super(...arguments),this.methods=new Ek(this._client),this.jobs=new F0(this._client),this.checkpoints=new j0(this._client),this.alpha=new P0(this._client)}}wa.Methods=Ek;wa.Jobs=F0;wa.Checkpoints=j0;wa.Alpha=P0;class Tk extends Ae{}class $0 extends Ae{constructor(){super(...arguments),this.graderModels=new Tk(this._client)}}$0.GraderModels=Tk;class Ok extends Ae{createVariation(t,n){return this._client.post("/images/variations",Ys({body:t,...n},this._client))}edit(t,n){return this._client.post("/images/edits",Ys({body:t,...n,stream:t.stream??!1},this._client))}generate(t,n){return this._client.post("/images/generations",{body:t,...n,stream:t.stream??!1})}}class Mk extends Ae{retrieve(t,n){return this._client.get(fe`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",Dd,t)}delete(t,n){return this._client.delete(fe`/models/${t}`,n)}}class Ik extends Ae{create(t,n){return this._client.post("/moderations",{body:t,...n})}}class Nk extends Ae{accept(t,n,r){return this._client.post(fe`/realtime/calls/${t}/accept`,{body:n,...r,headers:Ce([{Accept:"*/*"},r?.headers])})}hangup(t,n){return this._client.post(fe`/realtime/calls/${t}/hangup`,{...n,headers:Ce([{Accept:"*/*"},n?.headers])})}refer(t,n,r){return this._client.post(fe`/realtime/calls/${t}/refer`,{body:n,...r,headers:Ce([{Accept:"*/*"},r?.headers])})}reject(t,n={},r){return this._client.post(fe`/realtime/calls/${t}/reject`,{body:n,...r,headers:Ce([{Accept:"*/*"},r?.headers])})}}class Dk extends Ae{create(t,n){return this._client.post("/realtime/client_secrets",{body:t,...n})}}class jd extends Ae{constructor(){super(...arguments),this.clientSecrets=new Dk(this._client),this.calls=new Nk(this._client)}}jd.ClientSecrets=Dk;jd.Calls=Nk;function h$(e,t){return!t||!m$(t)?{...e,output_parsed:null,output:e.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:zk(e,t)}function zk(e,t){const n=e.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:v$(t,i)};if(i.type==="message"){const o=i.content.map(l=>l.type==="output_text"?{...l,parsed:p$(t,l.text)}:l);return{...i,content:o}}return i}),r=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||vy(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const o of i.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),r}function p$(e,t){return e.text?.format?.type!=="json_schema"?null:"$parseRaw"in e.text?.format?(e.text?.format).$parseRaw(t):JSON.parse(t)}function m$(e){return!!E0(e.text?.format)}function g$(e){return e?.$brand==="auto-parseable-tool"}function y$(e,t){return e.find(n=>n.type==="function"&&n.name===t)}function v$(e,t){const n=y$(e.tools??[],t.name);return{...t,...t,parsed_arguments:g$(n)?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null}}function vy(e){const t=[];for(const n of e.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&t.push(r.text);e.output_text=t.join("")}var Vo,af,Yi,lf,CC,EC,RC,kC;class B0 extends k0{constructor(t){super(),Vo.add(this),af.set(this,void 0),Yi.set(this,void 0),lf.set(this,void 0),Pe(this,af,t)}static createResponse(t,n,r){const i=new B0(n);return i._run(()=>i._createOrRetrieveResponse(t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(t,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Y(this,Vo,"m",CC).call(this);let o,l=null;"response_id"in n?(o=await t.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):o=await t.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const c of o)Y(this,Vo,"m",EC).call(this,c,l);if(o.controller.signal?.aborted)throw new Cr;return Y(this,Vo,"m",RC).call(this)}[(af=new WeakMap,Yi=new WeakMap,lf=new WeakMap,Vo=new WeakSet,CC=function(){this.ended||Pe(this,Yi,void 0)},EC=function(n,r){if(this.ended)return;const i=(l,c)=>{(r==null||c.sequence_number>r)&&this._emit(l,c)},o=Y(this,Vo,"m",kC).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const l=o.output[n.output_index];if(!l)throw new Oe(`missing output at index ${n.output_index}`);if(l.type==="message"){const c=l.content[n.content_index];if(!c)throw new Oe(`missing content at index ${n.content_index}`);if(c.type!=="output_text")throw new Oe(`expected content to be 'output_text', got ${c.type}`);i("response.output_text.delta",{...n,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const l=o.output[n.output_index];if(!l)throw new Oe(`missing output at index ${n.output_index}`);l.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:i(n.type,n);break}},RC=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");const n=Y(this,Yi,"f");if(!n)throw new Oe("request ended without sending any events");Pe(this,Yi,void 0);const r=b$(n,Y(this,af,"f"));return Pe(this,lf,r),r},kC=function(n){let r=Y(this,Yi,"f");if(!r){if(n.type!=="response.created")throw new Oe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Pe(this,Yi,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new Oe(`missing output at index ${n.output_index}`);const o=i.type,l=n.part;o==="message"&&l.type!=="reasoning_text"?i.content.push(l):o==="reasoning"&&l.type==="reasoning_text"&&(i.content||(i.content=[]),i.content.push(l));break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new Oe(`missing output at index ${n.output_index}`);if(i.type==="message"){const o=i.content[n.content_index];if(!o)throw new Oe(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new Oe(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new Oe(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.reasoning_text.delta":{const i=r.output[n.output_index];if(!i)throw new Oe(`missing output at index ${n.output_index}`);if(i.type==="reasoning"){const o=i.content?.[n.content_index];if(!o)throw new Oe(`missing content at index ${n.content_index}`);if(o.type!=="reasoning_text")throw new Oe(`expected content to be 'reasoning_text', got ${o.type}`);o.text+=n.delta}break}case"response.completed":{Pe(this,Yi,n.response);break}}return r},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("event",i=>{const o=n.shift();o?o.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const o of n)o.reject(i);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,l)=>n.push({resolve:o,reject:l})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const t=Y(this,lf,"f");if(!t)throw new Oe("stream ended without producing a ChatCompletion");return t}}function b$(e,t){return h$(e,t)}class Lk extends Ae{list(t,n={},r){return this._client.getAPIList(fe`/responses/${t}/input_items`,Ht,{query:n,...r})}}class Pk extends Ae{count(t={},n){return this._client.post("/responses/input_tokens",{body:t,...n})}}class Fd extends Ae{constructor(){super(...arguments),this.inputItems=new Lk(this._client),this.inputTokens=new Pk(this._client)}create(t,n){return this._client.post("/responses",{body:t,...n,stream:t.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&vy(r),r))}retrieve(t,n={},r){return this._client.get(fe`/responses/${t}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&vy(i),i))}delete(t,n){return this._client.delete(fe`/responses/${t}`,{...n,headers:Ce([{Accept:"*/*"},n?.headers])})}parse(t,n){return this._client.responses.create(t,n)._thenUnwrap(r=>zk(r,t))}stream(t,n){return B0.createResponse(this._client,t,n)}cancel(t,n){return this._client.post(fe`/responses/${t}/cancel`,n)}compact(t,n){return this._client.post("/responses/compact",{body:t,...n})}}Fd.InputItems=Lk;Fd.InputTokens=Pk;class jk extends Ae{create(t,n,r){return this._client.post(fe`/uploads/${t}/parts`,Ys({body:n,...r},this._client))}}class U0 extends Ae{constructor(){super(...arguments),this.parts=new jk(this._client)}create(t,n){return this._client.post("/uploads",{body:t,...n})}cancel(t,n){return this._client.post(fe`/uploads/${t}/cancel`,n)}complete(t,n,r){return this._client.post(fe`/uploads/${t}/complete`,{body:n,...r})}}U0.Parts=jk;const S$=async e=>{const t=await Promise.allSettled(e),n=t.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of t)i.status==="fulfilled"&&r.push(i.value);return r};class Fk extends Ae{create(t,n,r){return this._client.post(fe`/vector_stores/${t}/file_batches`,{body:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(t,n,r){const{vector_store_id:i}=n;return this._client.get(fe`/vector_stores/${i}/file_batches/${t}`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(t,n,r){const{vector_store_id:i}=n;return this._client.post(fe`/vector_stores/${i}/file_batches/${t}/cancel`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(t,n,r){const i=await this.create(t,n);return await this.poll(t,i.id,r)}listFiles(t,n,r){const{vector_store_id:i,...o}=n;return this._client.getAPIList(fe`/vector_stores/${i}/file_batches/${t}/files`,Ht,{query:o,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(t,n,r){const i=Ce([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:o,response:l}=await this.retrieve(n,{vector_store_id:t},{...r,headers:i}).withResponse();switch(o.status){case"in_progress":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await _u(c);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(t,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const o=i?.maxConcurrency??5,l=Math.min(o,n.length),c=this._client,f=n.values(),d=[...r];async function m(g){for(let y of g){const S=await c.files.create({file:y,purpose:"assistants"},i);d.push(S.id)}}const p=Array(l).fill(f).map(m);return await S$(p),await this.createAndPoll(t,{file_ids:d})}}class $k extends Ae{create(t,n,r){return this._client.post(fe`/vector_stores/${t}/files`,{body:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(t,n,r){const{vector_store_id:i}=n;return this._client.get(fe`/vector_stores/${i}/files/${t}`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(t,n,r){const{vector_store_id:i,...o}=n;return this._client.post(fe`/vector_stores/${i}/files/${t}`,{body:o,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(t,n={},r){return this._client.getAPIList(fe`/vector_stores/${t}/files`,Ht,{query:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(t,n,r){const{vector_store_id:i}=n;return this._client.delete(fe`/vector_stores/${i}/files/${t}`,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(t,n,r){const i=await this.create(t,n,r);return await this.poll(t,i.id,r)}async poll(t,n,r){const i=Ce([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const o=await this.retrieve(n,{vector_store_id:t},{...r,headers:i}).withResponse(),l=o.data;switch(l.status){case"in_progress":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=o.response.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await _u(c);break;case"failed":case"completed":return l}}}async upload(t,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(t,{file_id:i.id},r)}async uploadAndPoll(t,n,r){const i=await this.upload(t,n,r);return await this.poll(t,i.id,r)}content(t,n,r){const{vector_store_id:i}=n;return this._client.getAPIList(fe`/vector_stores/${i}/files/${t}/content`,Dd,{...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class $d extends Ae{constructor(){super(...arguments),this.files=new $k(this._client),this.fileBatches=new Fk(this._client)}create(t,n){return this._client.post("/vector_stores",{body:t,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(fe`/vector_stores/${t}`,{...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,r){return this._client.post(fe`/vector_stores/${t}`,{body:n,...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(t={},n){return this._client.getAPIList("/vector_stores",Ht,{query:t,...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(t,n){return this._client.delete(fe`/vector_stores/${t}`,{...n,headers:Ce([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(t,n,r){return this._client.getAPIList(fe`/vector_stores/${t}/search`,Dd,{body:n,method:"post",...r,headers:Ce([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}$d.Files=$k;$d.FileBatches=Fk;class Bk extends Ae{create(t,n){return this._client.post("/videos",dC({body:t,...n},this._client))}retrieve(t,n){return this._client.get(fe`/videos/${t}`,n)}list(t={},n){return this._client.getAPIList("/videos",nd,{query:t,...n})}delete(t,n){return this._client.delete(fe`/videos/${t}`,n)}downloadContent(t,n={},r){return this._client.get(fe`/videos/${t}/content`,{query:n,...r,headers:Ce([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(t,n,r){return this._client.post(fe`/videos/${t}/remix`,dC({body:n,...r},this._client))}}var Jo,Uk,Af;class qk extends Ae{constructor(){super(...arguments),Jo.add(this)}async unwrap(t,n,r=this._client.webhookSecret,i=300){return await this.verifySignature(t,n,r,i),JSON.parse(t)}async verifySignature(t,n,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");Y(this,Jo,"m",Uk).call(this,r);const o=Ce([n]).values,l=Y(this,Jo,"m",Af).call(this,o,"webhook-signature"),c=Y(this,Jo,"m",Af).call(this,o,"webhook-timestamp"),f=Y(this,Jo,"m",Af).call(this,o,"webhook-id"),d=parseInt(c,10);if(isNaN(d))throw new Dl("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-d>i)throw new Dl("Webhook timestamp is too old");if(d>m+i)throw new Dl("Webhook timestamp is too new");const p=l.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),g=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),y=f?`${f}.${c}.${t}`:`${c}.${t}`,S=await crypto.subtle.importKey("raw",g,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of p)try{const C=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",S,C,new TextEncoder().encode(y)))return}catch{continue}throw new Dl("The given webhook signature does not match the expected signature")}}Jo=new WeakSet,Uk=function(t){if(typeof t!="string"||t.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Af=function(t,n){if(!t)throw new Error("Headers are required");const r=t.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var by,q0,Tf,Hk;class Ye{constructor({baseURL:t=Ho("OPENAI_BASE_URL"),apiKey:n=Ho("OPENAI_API_KEY"),organization:r=Ho("OPENAI_ORG_ID")??null,project:i=Ho("OPENAI_PROJECT_ID")??null,webhookSecret:o=Ho("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(by.add(this),Tf.set(this,void 0),this.completions=new bk(this),this.chat=new O0(this),this.embeddings=new _k(this),this.files=new Ck(this),this.images=new Ok(this),this.audio=new Cu(this),this.moderations=new Ik(this),this.models=new Mk(this),this.fineTuning=new wa(this),this.graders=new $0(this),this.vectorStores=new $d(this),this.webhooks=new qk(this),this.beta=new Sa(this),this.batches=new fk(this),this.uploads=new U0(this),this.responses=new Fd(this),this.realtime=new jd(this),this.conversations=new D0(this),this.evals=new L0(this),this.containers=new N0(this),this.videos=new Bk(this),n===void 0)throw new Oe("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:n,organization:r,project:i,webhookSecret:o,...l,baseURL:t||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&wF())throw new Oe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??q0.DEFAULT_TIMEOUT,this.logger=c.logger??console;const f="warn";this.logLevel=f,this.logLevel=cC(c.logLevel,"ClientOptions.logLevel",this)??cC(Ho("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??RF(),Pe(this,Tf,AF),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=i,this.webhookSecret=o}withOptions(t){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...t})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){}async authHeaders(t){return Ce([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(t){return DF(t,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Zo}`}defaultIdempotencyKey(){return`stainless-node-retry-${hR()}`}makeStatusError(t,n,r,i){return dn.generate(t,n,r,i)}async _callApiKey(){const t=this._options.apiKey;if(typeof t!="function")return!1;let n;try{n=await t()}catch(r){throw r instanceof Oe?r:new Oe(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Oe(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(t,n,r){const i=!Y(this,by,"m",Hk).call(this)&&r||this.baseURL,o=gF(t)?new URL(t):new URL(i+(i.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),l=this.defaultQuery();return yF(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(t){await this._callApiKey()}async prepareRequest(t,{url:n,options:r}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(i=>({method:t,path:n,...i})))}request(t,n=null){return new Nd(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,r){const i=await t,o=i.maxRetries??this.maxRetries;n==null&&(n=o),await this.prepareOptions(i);const{req:l,url:c,timeout:f}=await this.buildRequest(i,{retryCount:o-n});await this.prepareRequest(l,{url:c,options:i});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(cn(this).debug(`[${d}] sending request`,Ps({retryOfRequestLogID:r,method:i.method,url:c,options:i,headers:l.headers})),i.signal?.aborted)throw new Cr;const g=new AbortController,y=await this.fetchWithTimeout(c,l,f,g).catch(ay),S=Date.now();if(y instanceof globalThis.Error){const x=`retrying, ${n} attempts remaining`;if(i.signal?.aborted)throw new Cr;const E=oy(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return cn(this).info(`[${d}] connection ${E?"timed out":"failed"} - ${x}`),cn(this).debug(`[${d}] connection ${E?"timed out":"failed"} (${x})`,Ps({retryOfRequestLogID:r,url:c,durationMs:S-p,message:y.message})),this.retryRequest(i,n,r??d);throw cn(this).info(`[${d}] connection ${E?"timed out":"failed"} - error; no more retries left`),cn(this).debug(`[${d}] connection ${E?"timed out":"failed"} (error; no more retries left)`,Ps({retryOfRequestLogID:r,url:c,durationMs:S-p,message:y.message})),E?new w0:new Md({cause:y})}const w=[...y.headers.entries()].filter(([x])=>x==="x-request-id").map(([x,E])=>", "+x+": "+JSON.stringify(E)).join(""),C=`[${d}${m}${w}] ${l.method} ${c} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${S-p}ms`;if(!y.ok){const x=await this.shouldRetry(y);if(n&&x){const M=`retrying, ${n} attempts remaining`;return await kF(y.body),cn(this).info(`${C} - ${M}`),cn(this).debug(`[${d}] response error (${M})`,Ps({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:S-p})),this.retryRequest(i,n,r??d,y.headers)}const E=x?"error; no more retries left":"error; not retryable";cn(this).info(`${C} - ${E}`);const k=await y.text().catch(M=>ay(M).message),I=SF(k),P=I?void 0:k;throw cn(this).debug(`[${d}] response error (${E})`,Ps({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,message:P,durationMs:Date.now()-p})),this.makeStatusError(y.status,I,P,y.headers)}return cn(this).info(C),cn(this).debug(`[${d}] response start`,Ps({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:S-p})),{response:y,options:i,controller:g,requestLogID:d,retryOfRequestLogID:r,startTime:p}}getAPIList(t,n,r){return this.requestAPIList(n,{method:"get",path:t,...r})}requestAPIList(t,n){const r=this.makeRequest(n,null,void 0);return new qF(this,r,t)}async fetchWithTimeout(t,n,r,i){const{signal:o,method:l,...c}=n||{};o&&o.addEventListener("abort",()=>i.abort());const f=setTimeout(()=>i.abort(),r),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m={signal:i.signal,...d?{duplex:"half"}:{},method:"GET",...c};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,t,m)}finally{clearTimeout(f)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r,i){let o;const l=i?.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(o=f)}const c=i?.get("retry-after");if(c&&!o){const f=parseFloat(c);Number.isNaN(f)?o=Date.parse(c)-Date.now():o=f*1e3}if(!(o&&0<=o&&o<60*1e3)){const f=t.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,f)}return await _u(o),this.makeRequest(t,n-1,r)}calculateDefaultRetryTimeoutMillis(t,n){const o=n-t,l=Math.min(.5*Math.pow(2,o),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(t,{retryCount:n=0}={}){const r={...t},{method:i,path:o,query:l,defaultBaseURL:c}=r,f=this.buildURL(o,l,c);"timeout"in r&&bF("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:d,body:m}=this.buildBody({options:r}),p=await this.buildHeaders({options:t,method:i,bodyHeaders:d,retryCount:n});return{req:{method:i,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const l=Ce([o,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{},...EF(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(t),this._options.defaultHeaders,r,t.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const r=Ce([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:RR(t)}:Y(this,Tf,"f").call(this,{body:t,headers:r})}}q0=Ye,Tf=new WeakMap,by=new WeakSet,Hk=function(){return this.baseURL!=="https://api.openai.com/v1"};Ye.OpenAI=q0;Ye.DEFAULT_TIMEOUT=6e5;Ye.OpenAIError=Oe;Ye.APIError=dn;Ye.APIConnectionError=Md;Ye.APIConnectionTimeoutError=w0;Ye.APIUserAbortError=Cr;Ye.NotFoundError=yR;Ye.ConflictError=vR;Ye.RateLimitError=SR;Ye.BadRequestError=pR;Ye.AuthenticationError=mR;Ye.InternalServerError=wR;Ye.PermissionDeniedError=gR;Ye.UnprocessableEntityError=bR;Ye.InvalidWebhookSignatureError=Dl;Ye.toFile=QF;Ye.Completions=bk;Ye.Chat=O0;Ye.Embeddings=_k;Ye.Files=Ck;Ye.Images=Ok;Ye.Audio=Cu;Ye.Moderations=Ik;Ye.Models=Mk;Ye.FineTuning=wa;Ye.Graders=$0;Ye.VectorStores=$d;Ye.Webhooks=qk;Ye.Beta=Sa;Ye.Batches=fk;Ye.Uploads=U0;Ye.Responses=Fd;Ye.Realtime=jd;Ye.Conversations=D0;Ye.Evals=L0;Ye.Containers=N0;Ye.Videos=Bk;class w$ extends Ye{constructor(t){super({...t,dangerouslyAllowBrowser:!0})}}function _$(e){return new w$({apiKey:e.apiKey,organization:e.organization,baseURL:e.baseURL})}function x$(e){return`${e}-${Date.now()}-${Math.random().toString(36).substring(7)}`}class C$ extends J5{constructor(t,n){super({},n),this.kind="text",this.name="openai",this.client=_$(t)}async*chatStream(t){const n=new Map,r=this.mapTextOptionsToOpenAI(t);try{const i=await this.client.responses.create({...r,stream:!0},{headers:t.request?.headers,signal:t.request?.signal});yield*this.processOpenAIStreamChunks(i,n,t,()=>x$(this.name))}catch(i){const o=i;throw console.error(">>> chatStream: Fatal error during response creation <<<"),console.error(">>> Error message:",o.message),console.error(">>> Error stack:",o.stack),console.error(">>> Full error:",o),i}}async structuredOutput(t){const{chatOptions:n,outputSchema:r}=t,i=this.mapTextOptionsToOpenAI(n),o=Jl(r,r.required||[]);try{const l=await this.client.responses.create({...i,stream:!1,text:{format:{type:"json_schema",name:"structured_output",schema:o,strict:!0}}},{headers:n.request?.headers,signal:n.request?.signal}),c=this.extractTextFromResponse(l);let f;try{f=JSON.parse(c)}catch{throw new Error(`Failed to parse structured output as JSON. Content: ${c.slice(0,200)}${c.length>200?"...":""}`)}return{data:sy(f),rawText:c}}catch(l){const c=l;throw console.error(">>> structuredOutput: Error during response creation <<<"),console.error(">>> Error message:",c.message),l}}extractTextFromResponse(t){let n="";for(const r of t.output)if(r.type==="message")for(const i of r.content)i.type==="output_text"&&(n+=i.text);return n}async*processOpenAIStreamChunks(t,n,r,i){let o="",l="";const c=Date.now();let f=0,d=!1,m=!1,p=null,g=r.model;try{for await(const y of t){f++;const S=w=>w.type==="output_text"?(o+=w.text,{type:"content",id:p||i(),model:g||r.model,timestamp:c,delta:w.text,content:o,role:"assistant"}):w.type==="reasoning_text"?(l+=w.text,{type:"thinking",id:p||i(),model:g||r.model,timestamp:c,delta:w.text,content:l}):{type:"error",id:p||i(),model:g||r.model,timestamp:c,error:{message:w.refusal}};if((y.type==="response.created"||y.type==="response.incomplete"||y.type==="response.failed")&&(p=y.response.id,g=y.response.model,d=!1,m=!1,o="",l="",y.response.error&&(yield{type:"error",id:y.response.id,model:y.response.model,timestamp:c,error:y.response.error}),y.response.incomplete_details&&(yield{type:"error",id:y.response.id,model:y.response.model,timestamp:c,error:{message:y.response.incomplete_details.reason??""}})),y.type==="response.output_text.delta"&&y.delta){const w=Array.isArray(y.delta)?y.delta.join(""):typeof y.delta=="string"?y.delta:"";w&&(o+=w,d=!0,yield{type:"content",id:p||i(),model:g||r.model,timestamp:c,delta:w,content:o,role:"assistant"})}if(y.type==="response.reasoning_text.delta"&&y.delta){const w=Array.isArray(y.delta)?y.delta.join(""):typeof y.delta=="string"?y.delta:"";w&&(l+=w,m=!0,yield{type:"thinking",id:p||i(),model:g||r.model,timestamp:c,delta:w,content:l})}if(y.type==="response.reasoning_summary_text.delta"&&y.delta){const w=typeof y.delta=="string"?y.delta:"";w&&(l+=w,m=!0,yield{type:"thinking",id:p||i(),model:g||r.model,timestamp:c,delta:w,content:l})}if(y.type==="response.content_part.added"){const w=y.part;yield S(w)}if(y.type==="response.content_part.done"){const w=y.part;if(w.type==="output_text"&&d||w.type==="reasoning_text"&&m)continue;yield S(w)}if(y.type==="response.output_item.added"){const w=y.item;w.type==="function_call"&&w.id&&(n.has(w.id)||n.set(w.id,{index:y.output_index,name:w.name||""}))}if(y.type==="response.function_call_arguments.done"){const{item_id:w,output_index:C}=y,E=n.get(w)?.name||"";yield{type:"tool_call",id:p||i(),model:g||r.model,timestamp:c,index:C,toolCall:{id:w,type:"function",function:{name:E,arguments:y.arguments}}}}if(y.type==="response.completed"){const w=y.response.output.some(C=>C.type==="function_call");yield{type:"done",id:p||i(),model:g||r.model,timestamp:c,usage:{promptTokens:y.response.usage?.input_tokens||0,completionTokens:y.response.usage?.output_tokens||0,totalTokens:y.response.usage?.total_tokens||0},finishReason:w?"tool_calls":"stop"}}y.type==="error"&&(yield{type:"error",id:p||i(),model:g||r.model,timestamp:c,error:{message:y.message,code:y.code??void 0}})}}catch(y){const S=y;console.log("[OpenAI Adapter] Stream ended with error. Event type summary:",{totalChunks:f,error:S.message}),yield{type:"error",id:i(),model:r.model,timestamp:c,error:{message:S.message||"Unknown error occurred",code:S.code}}}}mapTextOptionsToOpenAI(t){const n=t.modelOptions,r=this.convertMessagesToInput(t.messages);n&&W5({...n,model:t.model});const i=t.tools?pF(t.tools):void 0;return{model:t.model,temperature:t.temperature,max_output_tokens:t.maxTokens,top_p:t.topP,metadata:t.metadata,instructions:t.systemPrompts?.join(`
`),...n,input:r,tools:i}}convertMessagesToInput(t){const n=[];for(const r of t){if(r.role==="tool"){n.push({type:"function_call_output",call_id:r.toolCallId||"",output:typeof r.content=="string"?r.content:JSON.stringify(r.content)});continue}if(r.role==="assistant"){if(r.toolCalls&&r.toolCalls.length>0)for(const l of r.toolCalls){const c=typeof l.function.arguments=="string"?l.function.arguments:JSON.stringify(l.function.arguments);n.push({type:"function_call",call_id:l.id,name:l.function.name,arguments:c})}if(r.content){const l=this.extractTextContent(r.content);l&&n.push({type:"message",role:"assistant",content:l})}continue}const i=this.normalizeContent(r.content),o=[];for(const l of i)o.push(this.convertContentPartToOpenAI(l));o.length===0&&o.push({type:"input_text",text:""}),n.push({type:"message",role:"user",content:o})}return n}convertContentPartToOpenAI(t){switch(t.type){case"text":return{type:"input_text",text:t.content};case"image":{const n=t.metadata;return t.source.type==="url"?{type:"input_image",image_url:t.source.value,detail:n?.detail||"auto"}:{type:"input_image",image_url:t.source.value,detail:n?.detail||"auto"}}case"audio":return t.source.type==="url"?{type:"input_file",file_url:t.source.value}:{type:"input_file",file_data:t.source.value};default:throw new Error(`Unsupported content part type: ${t.type}`)}}normalizeContent(t){return t===null?[]:typeof t=="string"?[{type:"text",content:t}]:t}extractTextContent(t){return t===null?"":typeof t=="string"?t:t.filter(n=>n.type==="text").map(n=>n.content).join("")}}const AC={ai:{model:"gpt-4o"}};function Sy(){return typeof window<"u"&&window.__APP_CONFIG__?{...AC,...window.__APP_CONFIG__}:AC}function E$(e){const t=`${window.location.origin}/openai/v1`;return new C$({apiKey:"not-needed",baseURL:t},e)}function R$(){return Sy().ai?.model||"gpt-5.1"}function le(e,t,n){function r(c,f){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:f,constr:l,traits:new Set},enumerable:!1}),c._zod.traits.has(e))return;c._zod.traits.add(e),t(c,f);const d=l.prototype,m=Object.keys(d);for(let p=0;p<m.length;p++){const g=m[p];g in c||(c[g]=d[g].bind(c))}}const i=n?.Parent??Object;class o extends i{}Object.defineProperty(o,"name",{value:e});function l(c){var f;const d=n?.Parent?new o:this;r(d,c),(f=d._zod).deferred??(f.deferred=[]);for(const m of d._zod.deferred)m();return d}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:c=>n?.Parent&&c instanceof n.Parent?!0:c?._zod?.traits?.has(e)}),Object.defineProperty(l,"name",{value:e}),l}class ua extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Vk extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Kk={};function Js(e){return Kk}function Gk(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,i])=>t.indexOf(+r)===-1).map(([r,i])=>i)}function wy(e,t){return typeof t=="bigint"?t.toString():t}function H0(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function V0(e){return e==null}function K0(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}const TC=Symbol("evaluating");function bt(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==TC)return r===void 0&&(r=TC,r=n()),r},set(i){Object.defineProperty(e,t,{value:i})},configurable:!0})}function to(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function ds(...e){const t={};for(const n of e){const r=Object.getOwnPropertyDescriptors(n);Object.assign(t,r)}return Object.defineProperties({},t)}function OC(e){return JSON.stringify(e)}function k$(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Qk="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function cd(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const A$=H0(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function du(e){if(cd(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const n=t.prototype;return!(cd(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Zk(e){return du(e)?{...e}:Array.isArray(e)?[...e]:e}const T$=new Set(["string","number","symbol"]);function Bd(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function hs(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function $e(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function O$(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}function M$(e,t){const n=e._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const o=ds(e._zod.def,{get shape(){const l={};for(const c in t){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);t[c]&&(l[c]=n.shape[c])}return to(this,"shape",l),l},checks:[]});return hs(e,o)}function I$(e,t){const n=e._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const o=ds(e._zod.def,{get shape(){const l={...e._zod.def.shape};for(const c in t){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);t[c]&&delete l[c]}return to(this,"shape",l),l},checks:[]});return hs(e,o)}function N$(e,t){if(!du(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0){const o=e._zod.def.shape;for(const l in t)if(Object.getOwnPropertyDescriptor(o,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const i=ds(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t};return to(this,"shape",o),o}});return hs(e,i)}function D$(e,t){if(!du(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n=ds(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return to(this,"shape",r),r}});return hs(e,n)}function z$(e,t){const n=ds(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return to(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return hs(e,n)}function L$(e,t,n){const i=t._zod.def.checks;if(i&&i.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=ds(t._zod.def,{get shape(){const c=t._zod.def.shape,f={...c};if(n)for(const d in n){if(!(d in c))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(f[d]=e?new e({type:"optional",innerType:c[d]}):c[d])}else for(const d in c)f[d]=e?new e({type:"optional",innerType:c[d]}):c[d];return to(this,"shape",f),f},checks:[]});return hs(t,l)}function P$(e,t,n){const r=ds(t._zod.def,{get shape(){const i=t._zod.def.shape,o={...i};if(n)for(const l in n){if(!(l in o))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(o[l]=new e({type:"nonoptional",innerType:i[l]}))}else for(const l in i)o[l]=new e({type:"nonoptional",innerType:i[l]});return to(this,"shape",o),o}});return hs(t,r)}function sa(e,t=0){if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function Yk(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function uf(e){return typeof e=="string"?e:e?.message}function Xs(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const i=uf(e.inst?._zod.def?.error?.(e))??uf(t?.error?.(e))??uf(n.customError?.(e))??uf(n.localeError?.(e))??"Invalid input";r.message=i}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function G0(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function hu(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const Jk=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,wy,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Xk=le("$ZodError",Jk),Wk=le("$ZodError",Jk,{Parent:Error});function j$(e,t=n=>n.message){const n={},r=[];for(const i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}function F$(e,t=n=>n.message){const n={_errors:[]},r=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(l=>r({issues:l}));else if(o.code==="invalid_key")r({issues:o.issues});else if(o.code==="invalid_element")r({issues:o.issues});else if(o.path.length===0)n._errors.push(t(o));else{let l=n,c=0;for(;c<o.path.length;){const f=o.path[c];c===o.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(t(o))):l[f]=l[f]||{_errors:[]},l=l[f],c++}}};return r(e),n}const Q0=e=>(t,n,r,i)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},l=t._zod.run({value:n,issues:[]},o);if(l instanceof Promise)throw new ua;if(l.issues.length){const c=new(i?.Err??e)(l.issues.map(f=>Xs(f,o,Js())));throw Qk(c,i?.callee),c}return l.value},Z0=e=>async(t,n,r,i)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let l=t._zod.run({value:n,issues:[]},o);if(l instanceof Promise&&(l=await l),l.issues.length){const c=new(i?.Err??e)(l.issues.map(f=>Xs(f,o,Js())));throw Qk(c,i?.callee),c}return l.value},Ud=e=>(t,n,r)=>{const i=r?{...r,async:!1}:{async:!1},o=t._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new ua;return o.issues.length?{success:!1,error:new(e??Xk)(o.issues.map(l=>Xs(l,i,Js())))}:{success:!0,data:o.value}},$$=Ud(Wk),qd=e=>async(t,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(l=>Xs(l,i,Js())))}:{success:!0,data:o.value}},B$=qd(Wk),U$=e=>(t,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Q0(e)(t,n,i)},q$=e=>(t,n,r)=>Q0(e)(t,n,r),H$=e=>async(t,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Z0(e)(t,n,i)},V$=e=>async(t,n,r)=>Z0(e)(t,n,r),K$=e=>(t,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Ud(e)(t,n,i)},G$=e=>(t,n,r)=>Ud(e)(t,n,r),Q$=e=>async(t,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return qd(e)(t,n,i)},Z$=e=>async(t,n,r)=>qd(e)(t,n,r),Y$=/^[cC][^\s-]{8,}$/,J$=/^[0-9a-z]+$/,X$=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,W$=/^[0-9a-vA-V]{20}$/,eB=/^[A-Za-z0-9]{27}$/,tB=/^[a-zA-Z0-9_-]{21}$/,nB=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,rB=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,MC=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,iB=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,sB="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function oB(){return new RegExp(sB,"u")}const aB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,uB=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,cB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,fB=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,eA=/^[A-Za-z0-9_-]*$/,dB=/^\+[1-9]\d{6,14}$/,tA="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",hB=new RegExp(`^${tA}$`);function nA(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function pB(e){return new RegExp(`^${nA(e)}$`)}function mB(e){const t=nA({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${tA}T(?:${r})$`)}const gB=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},yB=/^[^A-Z]*$/,vB=/^[^a-z]*$/,Zr=le("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),bB=le("$ZodCheckMaxLength",(e,t)=>{var n;Zr.init(e,t),(n=e._zod.def).when??(n.when=r=>{const i=r.value;return!V0(i)&&i.length!==void 0}),e._zod.onattach.push(r=>{const i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const i=r.value;if(i.length<=t.maximum)return;const l=G0(i);r.issues.push({origin:l,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),SB=le("$ZodCheckMinLength",(e,t)=>{var n;Zr.init(e,t),(n=e._zod.def).when??(n.when=r=>{const i=r.value;return!V0(i)&&i.length!==void 0}),e._zod.onattach.push(r=>{const i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const i=r.value;if(i.length>=t.minimum)return;const l=G0(i);r.issues.push({origin:l,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),wB=le("$ZodCheckLengthEquals",(e,t)=>{var n;Zr.init(e,t),(n=e._zod.def).when??(n.when=r=>{const i=r.value;return!V0(i)&&i.length!==void 0}),e._zod.onattach.push(r=>{const i=r._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=r=>{const i=r.value,o=i.length;if(o===t.length)return;const l=G0(i),c=o>t.length;r.issues.push({origin:l,...c?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),Hd=le("$ZodCheckStringFormat",(e,t)=>{var n,r;Zr.init(e,t),e._zod.onattach.push(i=>{const o=i._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=i=>{t.pattern.lastIndex=0,!t.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:t.format,input:i.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),_B=le("$ZodCheckRegex",(e,t)=>{Hd.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),xB=le("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=yB),Hd.init(e,t)}),CB=le("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=vB),Hd.init(e,t)}),EB=le("$ZodCheckIncludes",(e,t)=>{Zr.init(e,t);const n=Bd(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(i=>{const o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),e._zod.check=i=>{i.value.includes(t.includes,t.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:i.value,inst:e,continue:!t.abort})}}),RB=le("$ZodCheckStartsWith",(e,t)=>{Zr.init(e,t);const n=new RegExp(`^${Bd(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),kB=le("$ZodCheckEndsWith",(e,t)=>{Zr.init(e,t);const n=new RegExp(`.*${Bd(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),AB=le("$ZodCheckOverwrite",(e,t)=>{Zr.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class TB{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(l=>l),i=Math.min(...r.map(l=>l.length-l.trimStart().length)),o=r.map(l=>l.slice(i)).map(l=>" ".repeat(this.indent*2)+l);for(const l of o)this.content.push(l)}compile(){const t=Function,n=this?.args,i=[...(this?.content??[""]).map(o=>`  ${o}`)];return new t(...n,i.join(`
`))}}const OB={major:4,minor:3,patch:4},Jt=le("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=OB;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const i of r)for(const o of i._zod.onattach)o(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const i=(l,c,f)=>{let d=sa(l),m;for(const p of c){if(p._zod.def.when){if(!p._zod.def.when(l))continue}else if(d)continue;const g=l.issues.length,y=p._zod.check(l);if(y instanceof Promise&&f?.async===!1)throw new ua;if(m||y instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await y,l.issues.length!==g&&(d||(d=sa(l,g)))});else{if(l.issues.length===g)continue;d||(d=sa(l,g))}}return m?m.then(()=>l):l},o=(l,c,f)=>{if(sa(l))return l.aborted=!0,l;const d=i(c,r,f);if(d instanceof Promise){if(f.async===!1)throw new ua;return d.then(m=>e._zod.parse(m,f))}return e._zod.parse(d,f)};e._zod.run=(l,c)=>{if(c.skipChecks)return e._zod.parse(l,c);if(c.direction==="backward"){const d=e._zod.parse({value:l.value,issues:[]},{...c,skipChecks:!0});return d instanceof Promise?d.then(m=>o(m,l,c)):o(d,l,c)}const f=e._zod.parse(l,c);if(f instanceof Promise){if(c.async===!1)throw new ua;return f.then(d=>i(d,r,c))}return i(f,r,c)}}bt(e,"~standard",()=>({validate:i=>{try{const o=$$(e,i);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return B$(e,i).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),Y0=le("$ZodString",(e,t)=>{Jt.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??gB(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Ot=le("$ZodStringFormat",(e,t)=>{Hd.init(e,t),Y0.init(e,t)}),MB=le("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=rB),Ot.init(e,t)}),IB=le("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=MC(r))}else t.pattern??(t.pattern=MC());Ot.init(e,t)}),NB=le("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=iB),Ot.init(e,t)}),DB=le("$ZodURL",(e,t)=>{Ot.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),i=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=i.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),zB=le("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=oB()),Ot.init(e,t)}),LB=le("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=tB),Ot.init(e,t)}),PB=le("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Y$),Ot.init(e,t)}),jB=le("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=J$),Ot.init(e,t)}),FB=le("$ZodULID",(e,t)=>{t.pattern??(t.pattern=X$),Ot.init(e,t)}),$B=le("$ZodXID",(e,t)=>{t.pattern??(t.pattern=W$),Ot.init(e,t)}),BB=le("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=eB),Ot.init(e,t)}),UB=le("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=mB(t)),Ot.init(e,t)}),qB=le("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=hB),Ot.init(e,t)}),HB=le("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=pB(t)),Ot.init(e,t)}),VB=le("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=nB),Ot.init(e,t)}),KB=le("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=aB),Ot.init(e,t),e._zod.bag.format="ipv4"}),GB=le("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=lB),Ot.init(e,t),e._zod.bag.format="ipv6",e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),QB=le("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=uB),Ot.init(e,t)}),ZB=le("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=cB),Ot.init(e,t),e._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[i,o]=r;if(!o)throw new Error;const l=Number(o);if(`${l}`!==o)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${i}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function rA(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const YB=le("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=fB),Ot.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=n=>{rA(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function JB(e){if(!eA.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return rA(n)}const XB=le("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=eA),Ot.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=n=>{JB(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),WB=le("$ZodE164",(e,t)=>{t.pattern??(t.pattern=dB),Ot.init(e,t)});function e6(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const i=JSON.parse(atob(r));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))}catch{return!1}}const t6=le("$ZodJWT",(e,t)=>{Ot.init(e,t),e._zod.check=n=>{e6(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),n6=le("$ZodUnknown",(e,t)=>{Jt.init(e,t),e._zod.parse=n=>n}),r6=le("$ZodNever",(e,t)=>{Jt.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function IC(e,t,n){e.issues.length&&t.issues.push(...Yk(n,e.issues)),t.value[n]=e.value}const i6=le("$ZodArray",(e,t)=>{Jt.init(e,t),e._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),n;n.value=Array(i.length);const o=[];for(let l=0;l<i.length;l++){const c=i[l],f=t.element._zod.run({value:c,issues:[]},r);f instanceof Promise?o.push(f.then(d=>IC(d,n,l))):IC(f,n,l)}return o.length?Promise.all(o).then(()=>n):n}});function fd(e,t,n,r,i){if(e.issues.length){if(i&&!(n in r))return;t.issues.push(...Yk(n,e.issues))}e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function iA(e){const t=Object.keys(e.shape);for(const r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=O$(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function sA(e,t,n,r,i,o){const l=[],c=i.keySet,f=i.catchall._zod,d=f.def.type,m=f.optout==="optional";for(const p in t){if(c.has(p))continue;if(d==="never"){l.push(p);continue}const g=f.run({value:t[p],issues:[]},r);g instanceof Promise?e.push(g.then(y=>fd(y,n,p,t,m))):fd(g,n,p,t,m)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:t,inst:o}),e.length?Promise.all(e).then(()=>n):n}const s6=le("$ZodObject",(e,t)=>{if(Jt.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const c=t.shape;Object.defineProperty(t,"shape",{get:()=>{const f={...c};return Object.defineProperty(t,"shape",{value:f}),f}})}const r=H0(()=>iA(t));bt(e._zod,"propValues",()=>{const c=t.shape,f={};for(const d in c){const m=c[d]._zod;if(m.values){f[d]??(f[d]=new Set);for(const p of m.values)f[d].add(p)}}return f});const i=cd,o=t.catchall;let l;e._zod.parse=(c,f)=>{l??(l=r.value);const d=c.value;if(!i(d))return c.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),c;c.value={};const m=[],p=l.shape;for(const g of l.keys){const y=p[g],S=y._zod.optout==="optional",w=y._zod.run({value:d[g],issues:[]},f);w instanceof Promise?m.push(w.then(C=>fd(C,c,g,d,S))):fd(w,c,g,d,S)}return o?sA(m,d,c,f,r.value,e):m.length?Promise.all(m).then(()=>c):c}}),o6=le("$ZodObjectJIT",(e,t)=>{s6.init(e,t);const n=e._zod.parse,r=H0(()=>iA(t)),i=g=>{const y=new TB(["shape","payload","ctx"]),S=r.value,w=k=>{const I=OC(k);return`shape[${I}]._zod.run({ value: input[${I}], issues: [] }, ctx)`};y.write("const input = payload.value;");const C=Object.create(null);let x=0;for(const k of S.keys)C[k]=`key_${x++}`;y.write("const newResult = {};");for(const k of S.keys){const I=C[k],P=OC(k),M=g[k]?._zod?.optout==="optional";y.write(`const ${I} = ${w(k)};`),M?y.write(`
        if (${I}.issues.length) {
          if (${P} in input) {
            payload.issues = payload.issues.concat(${I}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${P}, ...iss.path] : [${P}]
            })));
          }
        }
        
        if (${I}.value === undefined) {
          if (${P} in input) {
            newResult[${P}] = undefined;
          }
        } else {
          newResult[${P}] = ${I}.value;
        }
        
      `):y.write(`
        if (${I}.issues.length) {
          payload.issues = payload.issues.concat(${I}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${P}, ...iss.path] : [${P}]
          })));
        }
        
        if (${I}.value === undefined) {
          if (${P} in input) {
            newResult[${P}] = undefined;
          }
        } else {
          newResult[${P}] = ${I}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");const E=y.compile();return(k,I)=>E(g,k,I)};let o;const l=cd,c=!Kk.jitless,d=c&&A$.value,m=t.catchall;let p;e._zod.parse=(g,y)=>{p??(p=r.value);const S=g.value;return l(S)?c&&d&&y?.async===!1&&y.jitless!==!0?(o||(o=i(t.shape)),g=o(g,y),m?sA([],S,g,y,p,e):g):n(g,y):(g.issues.push({expected:"object",code:"invalid_type",input:S,inst:e}),g)}});function NC(e,t,n,r){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;const i=e.filter(o=>!sa(o));return i.length===1?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(o=>o.issues.map(l=>Xs(l,r,Js())))}),t)}const a6=le("$ZodUnion",(e,t)=>{Jt.init(e,t),bt(e._zod,"optin",()=>t.options.some(i=>i._zod.optin==="optional")?"optional":void 0),bt(e._zod,"optout",()=>t.options.some(i=>i._zod.optout==="optional")?"optional":void 0),bt(e._zod,"values",()=>{if(t.options.every(i=>i._zod.values))return new Set(t.options.flatMap(i=>Array.from(i._zod.values)))}),bt(e._zod,"pattern",()=>{if(t.options.every(i=>i._zod.pattern)){const i=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${i.map(o=>K0(o.source)).join("|")})$`)}});const n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(i,o)=>{if(n)return r(i,o);let l=!1;const c=[];for(const f of t.options){const d=f._zod.run({value:i.value,issues:[]},o);if(d instanceof Promise)c.push(d),l=!0;else{if(d.issues.length===0)return d;c.push(d)}}return l?Promise.all(c).then(f=>NC(f,i,e,o)):NC(c,i,e,o)}}),l6=le("$ZodIntersection",(e,t)=>{Jt.init(e,t),e._zod.parse=(n,r)=>{const i=n.value,o=t.left._zod.run({value:i,issues:[]},r),l=t.right._zod.run({value:i,issues:[]},r);return o instanceof Promise||l instanceof Promise?Promise.all([o,l]).then(([f,d])=>DC(n,f,d)):DC(n,o,l)}});function _y(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(du(e)&&du(t)){const n=Object.keys(t),r=Object.keys(e).filter(o=>n.indexOf(o)!==-1),i={...e,...t};for(const o of r){const l=_y(e[o],t[o]);if(!l.valid)return{valid:!1,mergeErrorPath:[o,...l.mergeErrorPath]};i[o]=l.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const i=e[r],o=t[r],l=_y(i,o);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function DC(e,t,n){const r=new Map;let i;for(const c of t.issues)if(c.code==="unrecognized_keys"){i??(i=c);for(const f of c.keys)r.has(f)||r.set(f,{}),r.get(f).l=!0}else e.issues.push(c);for(const c of n.issues)if(c.code==="unrecognized_keys")for(const f of c.keys)r.has(f)||r.set(f,{}),r.get(f).r=!0;else e.issues.push(c);const o=[...r].filter(([,c])=>c.l&&c.r).map(([c])=>c);if(o.length&&i&&e.issues.push({...i,keys:o}),sa(e))return e;const l=_y(t.value,n.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return e.value=l.data,e}const u6=le("$ZodEnum",(e,t)=>{Jt.init(e,t);const n=Gk(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(i=>T$.has(typeof i)).map(i=>typeof i=="string"?Bd(i):i.toString()).join("|")})$`),e._zod.parse=(i,o)=>{const l=i.value;return r.has(l)||i.issues.push({code:"invalid_value",values:n,input:l,inst:e}),i}}),c6=le("$ZodTransform",(e,t)=>{Jt.init(e,t),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Vk(e.constructor.name);const i=t.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(l=>(n.value=l,n));if(i instanceof Promise)throw new ua;return n.value=i,n}});function zC(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const oA=le("$ZodOptional",(e,t)=>{Jt.init(e,t),e._zod.optin="optional",e._zod.optout="optional",bt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),bt(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${K0(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>{if(t.innerType._zod.optin==="optional"){const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>zC(o,n.value)):zC(i,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,r)}}),f6=le("$ZodExactOptional",(e,t)=>{oA.init(e,t),bt(e._zod,"values",()=>t.innerType._zod.values),bt(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(n,r)=>t.innerType._zod.run(n,r)}),d6=le("$ZodNullable",(e,t)=>{Jt.init(e,t),bt(e._zod,"optin",()=>t.innerType._zod.optin),bt(e._zod,"optout",()=>t.innerType._zod.optout),bt(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${K0(n.source)}|null)$`):void 0}),bt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),h6=le("$ZodDefault",(e,t)=>{Jt.init(e,t),e._zod.optin="optional",bt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);if(n.value===void 0)return n.value=t.defaultValue,n;const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>LC(o,t)):LC(i,t)}});function LC(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const p6=le("$ZodPrefault",(e,t)=>{Jt.init(e,t),e._zod.optin="optional",bt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),m6=le("$ZodNonOptional",(e,t)=>{Jt.init(e,t),bt(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>PC(o,e)):PC(i,e)}});function PC(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const g6=le("$ZodCatch",(e,t)=>{Jt.init(e,t),bt(e._zod,"optin",()=>t.innerType._zod.optin),bt(e._zod,"optout",()=>t.innerType._zod.optout),bt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(l=>Xs(l,r,Js()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(o=>Xs(o,r,Js()))},input:n.value}),n.issues=[]),n)}}),y6=le("$ZodPipe",(e,t)=>{Jt.init(e,t),bt(e._zod,"values",()=>t.in._zod.values),bt(e._zod,"optin",()=>t.in._zod.optin),bt(e._zod,"optout",()=>t.out._zod.optout),bt(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{if(r.direction==="backward"){const o=t.out._zod.run(n,r);return o instanceof Promise?o.then(l=>cf(l,t.in,r)):cf(o,t.in,r)}const i=t.in._zod.run(n,r);return i instanceof Promise?i.then(o=>cf(o,t.out,r)):cf(i,t.out,r)}});function cf(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const v6=le("$ZodReadonly",(e,t)=>{Jt.init(e,t),bt(e._zod,"propValues",()=>t.innerType._zod.propValues),bt(e._zod,"values",()=>t.innerType._zod.values),bt(e._zod,"optin",()=>t.innerType?._zod?.optin),bt(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(n,r)=>{if(r.direction==="backward")return t.innerType._zod.run(n,r);const i=t.innerType._zod.run(n,r);return i instanceof Promise?i.then(jC):jC(i)}});function jC(e){return e.value=Object.freeze(e.value),e}const b6=le("$ZodCustom",(e,t)=>{Zr.init(e,t),Jt.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,i=t.fn(r);if(i instanceof Promise)return i.then(o=>FC(o,n,r,e));FC(i,n,r,e)}});function FC(e,t,n,r){if(!e){const i={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),t.issues.push(hu(i))}}var $C;class S6{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const r=n[0];return this._map.set(t,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const i={...r,...this._map.get(t)};return Object.keys(i).length?i:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function w6(){return new S6}($C=globalThis).__zod_globalRegistry??($C.__zod_globalRegistry=w6());const ql=globalThis.__zod_globalRegistry;function _6(e,t){return new e({type:"string",...$e(t)})}function x6(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...$e(t)})}function BC(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...$e(t)})}function C6(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...$e(t)})}function E6(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...$e(t)})}function R6(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...$e(t)})}function k6(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...$e(t)})}function A6(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...$e(t)})}function T6(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...$e(t)})}function O6(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...$e(t)})}function M6(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...$e(t)})}function I6(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...$e(t)})}function N6(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...$e(t)})}function D6(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...$e(t)})}function z6(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...$e(t)})}function L6(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...$e(t)})}function P6(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...$e(t)})}function j6(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...$e(t)})}function F6(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...$e(t)})}function $6(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...$e(t)})}function B6(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...$e(t)})}function U6(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...$e(t)})}function q6(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...$e(t)})}function H6(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...$e(t)})}function V6(e,t){return new e({type:"string",format:"date",check:"string_format",...$e(t)})}function K6(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...$e(t)})}function G6(e,t){return new e({type:"string",format:"duration",check:"string_format",...$e(t)})}function Q6(e){return new e({type:"unknown"})}function Z6(e,t){return new e({type:"never",...$e(t)})}function aA(e,t){return new bB({check:"max_length",...$e(t),maximum:e})}function dd(e,t){return new SB({check:"min_length",...$e(t),minimum:e})}function lA(e,t){return new wB({check:"length_equals",...$e(t),length:e})}function Y6(e,t){return new _B({check:"string_format",format:"regex",...$e(t),pattern:e})}function J6(e){return new xB({check:"string_format",format:"lowercase",...$e(e)})}function X6(e){return new CB({check:"string_format",format:"uppercase",...$e(e)})}function W6(e,t){return new EB({check:"string_format",format:"includes",...$e(t),includes:e})}function eU(e,t){return new RB({check:"string_format",format:"starts_with",...$e(t),prefix:e})}function tU(e,t){return new kB({check:"string_format",format:"ends_with",...$e(t),suffix:e})}function _a(e){return new AB({check:"overwrite",tx:e})}function nU(e){return _a(t=>t.normalize(e))}function rU(){return _a(e=>e.trim())}function iU(){return _a(e=>e.toLowerCase())}function sU(){return _a(e=>e.toUpperCase())}function oU(){return _a(e=>k$(e))}function aU(e,t,n){return new e({type:"array",element:t,...$e(n)})}function lU(e,t,n){return new e({type:"custom",check:"custom",fn:t,...$e(n)})}function uU(e){const t=cU(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(hu(r,n.value,t._zod.def));else{const i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=t),i.continue??(i.continue=!t._zod.def.abort),n.issues.push(hu(i))}},e(n.value,n)));return t}function cU(e,t){const n=new Zr({check:"custom",...$e(t)});return n._zod.check=e,n}function uA(e){let t=e?.target??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??ql,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function hn(e,t,n={path:[],schemaPath:[]}){var r;const i=e._zod.def,o=t.seen.get(e);if(o)return o.count++,n.schemaPath.includes(e)&&(o.cycle=n.path),o.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};t.seen.set(e,l);const c=e._zod.toJSONSchema?.();if(c)l.schema=c;else{const m={...n,schemaPath:[...n.schemaPath,e],path:n.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,l.schema,m);else{const g=l.schema,y=t.processors[i.type];if(!y)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${i.type}`);y(e,t,g,m)}const p=e._zod.parent;p&&(l.ref||(l.ref=p),hn(p,t,m),t.seen.get(p).isParent=!0)}const f=t.metadataRegistry.get(e);return f&&Object.assign(l.schema,f),t.io==="input"&&_n(e)&&(delete l.schema.examples,delete l.schema.default),t.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,t.seen.get(e).schema}function cA(e,t){const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const l of e.seen.entries()){const c=e.metadataRegistry.get(l[0])?.id;if(c){const f=r.get(c);if(f&&f!==l[0])throw new Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(c,l[0])}}const i=l=>{const c=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const p=e.external.registry.get(l[0])?.id,g=e.external.uri??(S=>S);if(p)return{ref:g(p)};const y=l[1].defId??l[1].schema.id??`schema${e.counter++}`;return l[1].defId=y,{defId:y,ref:`${g("__shared")}#/${c}/${y}`}}if(l[1]===n)return{ref:"#"};const d=`#/${c}/`,m=l[1].schema.id??`__schema${e.counter++}`;return{defId:m,ref:d+m}},o=l=>{if(l[1].schema.$ref)return;const c=l[1],{ref:f,defId:d}=i(l);c.def={...c.schema},d&&(c.defId=d);const m=c.schema;for(const p in m)delete m[p];m.$ref=f};if(e.cycles==="throw")for(const l of e.seen.entries()){const c=l[1];if(c.cycle)throw new Error(`Cycle detected: #/${c.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of e.seen.entries()){const c=l[1];if(t===l[0]){o(l);continue}if(e.external){const d=e.external.registry.get(l[0])?.id;if(t!==l[0]&&d){o(l);continue}}if(e.metadataRegistry.get(l[0])?.id){o(l);continue}if(c.cycle){o(l);continue}if(c.count>1&&e.reused==="ref"){o(l);continue}}}function fA(e,t){const n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{const c=e.seen.get(l);if(c.ref===null)return;const f=c.def??c.schema,d={...f},m=c.ref;if(c.ref=null,m){r(m);const g=e.seen.get(m),y=g.schema;if(y.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(y)):Object.assign(f,y),Object.assign(f,d),l._zod.parent===m)for(const w in f)w==="$ref"||w==="allOf"||w in d||delete f[w];if(y.$ref)for(const w in f)w==="$ref"||w==="allOf"||w in g.def&&JSON.stringify(f[w])===JSON.stringify(g.def[w])&&delete f[w]}const p=l._zod.parent;if(p&&p!==m){r(p);const g=e.seen.get(p);if(g?.schema.$ref&&(f.$ref=g.schema.$ref,g.def))for(const y in f)y==="$ref"||y==="allOf"||y in g.def&&JSON.stringify(f[y])===JSON.stringify(g.def[y])&&delete f[y]}e.override({zodSchema:l,jsonSchema:f,path:c.path??[]})};for(const l of[...e.seen.entries()].reverse())r(l[0]);const i={};if(e.target==="draft-2020-12"?i.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?i.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?i.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const l=e.external.registry.get(t)?.id;if(!l)throw new Error("Schema is missing an `id` property");i.$id=e.external.uri(l)}Object.assign(i,n.def??n.schema);const o=e.external?.defs??{};for(const l of e.seen.entries()){const c=l[1];c.def&&c.defId&&(o[c.defId]=c.def)}e.external||Object.keys(o).length>0&&(e.target==="draft-2020-12"?i.$defs=o:i.definitions=o);try{const l=JSON.parse(JSON.stringify(i));return Object.defineProperty(l,"~standard",{value:{...t["~standard"],jsonSchema:{input:hd(t,"input",e.processors),output:hd(t,"output",e.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function _n(e,t){const n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);const r=e._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return _n(r.element,n);if(r.type==="set")return _n(r.valueType,n);if(r.type==="lazy")return _n(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return _n(r.innerType,n);if(r.type==="intersection")return _n(r.left,n)||_n(r.right,n);if(r.type==="record"||r.type==="map")return _n(r.keyType,n)||_n(r.valueType,n);if(r.type==="pipe")return _n(r.in,n)||_n(r.out,n);if(r.type==="object"){for(const i in r.shape)if(_n(r.shape[i],n))return!0;return!1}if(r.type==="union"){for(const i of r.options)if(_n(i,n))return!0;return!1}if(r.type==="tuple"){for(const i of r.items)if(_n(i,n))return!0;return!!(r.rest&&_n(r.rest,n))}return!1}const fU=(e,t={})=>n=>{const r=uA({...n,processors:t});return hn(e,r),cA(r,e),fA(r,e)},hd=(e,t,n={})=>r=>{const{libraryOptions:i,target:o}=r??{},l=uA({...i??{},target:o,io:t,processors:n});return hn(e,l),cA(l,e),fA(l,e)},dU={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},hU=(e,t,n,r)=>{const i=n;i.type="string";const{minimum:o,maximum:l,format:c,patterns:f,contentEncoding:d}=e._zod.bag;if(typeof o=="number"&&(i.minLength=o),typeof l=="number"&&(i.maxLength=l),c&&(i.format=dU[c]??c,i.format===""&&delete i.format,c==="time"&&delete i.format),d&&(i.contentEncoding=d),f&&f.size>0){const m=[...f];m.length===1?i.pattern=m[0].source:m.length>1&&(i.allOf=[...m.map(p=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},pU=(e,t,n,r)=>{n.not={}},mU=(e,t,n,r)=>{},gU=(e,t,n,r)=>{const i=e._zod.def,o=Gk(i.entries);o.every(l=>typeof l=="number")&&(n.type="number"),o.every(l=>typeof l=="string")&&(n.type="string"),n.enum=o},yU=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},vU=(e,t,n,r)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},bU=(e,t,n,r)=>{const i=n,o=e._zod.def,{minimum:l,maximum:c}=e._zod.bag;typeof l=="number"&&(i.minItems=l),typeof c=="number"&&(i.maxItems=c),i.type="array",i.items=hn(o.element,t,{...r,path:[...r.path,"items"]})},SU=(e,t,n,r)=>{const i=n,o=e._zod.def;i.type="object",i.properties={};const l=o.shape;for(const d in l)i.properties[d]=hn(l[d],t,{...r,path:[...r.path,"properties",d]});const c=new Set(Object.keys(l)),f=new Set([...c].filter(d=>{const m=o.shape[d]._zod;return t.io==="input"?m.optin===void 0:m.optout===void 0}));f.size>0&&(i.required=Array.from(f)),o.catchall?._zod.def.type==="never"?i.additionalProperties=!1:o.catchall?o.catchall&&(i.additionalProperties=hn(o.catchall,t,{...r,path:[...r.path,"additionalProperties"]})):t.io==="output"&&(i.additionalProperties=!1)},wU=(e,t,n,r)=>{const i=e._zod.def,o=i.inclusive===!1,l=i.options.map((c,f)=>hn(c,t,{...r,path:[...r.path,o?"oneOf":"anyOf",f]}));o?n.oneOf=l:n.anyOf=l},_U=(e,t,n,r)=>{const i=e._zod.def,o=hn(i.left,t,{...r,path:[...r.path,"allOf",0]}),l=hn(i.right,t,{...r,path:[...r.path,"allOf",1]}),c=d=>"allOf"in d&&Object.keys(d).length===1,f=[...c(o)?o.allOf:[o],...c(l)?l.allOf:[l]];n.allOf=f},xU=(e,t,n,r)=>{const i=e._zod.def,o=hn(i.innerType,t,r),l=t.seen.get(e);t.target==="openapi-3.0"?(l.ref=i.innerType,n.nullable=!0):n.anyOf=[o,{type:"null"}]},CU=(e,t,n,r)=>{const i=e._zod.def;hn(i.innerType,t,r);const o=t.seen.get(e);o.ref=i.innerType},EU=(e,t,n,r)=>{const i=e._zod.def;hn(i.innerType,t,r);const o=t.seen.get(e);o.ref=i.innerType,n.default=JSON.parse(JSON.stringify(i.defaultValue))},RU=(e,t,n,r)=>{const i=e._zod.def;hn(i.innerType,t,r);const o=t.seen.get(e);o.ref=i.innerType,t.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(i.defaultValue)))},kU=(e,t,n,r)=>{const i=e._zod.def;hn(i.innerType,t,r);const o=t.seen.get(e);o.ref=i.innerType;let l;try{l=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},AU=(e,t,n,r)=>{const i=e._zod.def,o=t.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;hn(o,t,r);const l=t.seen.get(e);l.ref=o},TU=(e,t,n,r)=>{const i=e._zod.def;hn(i.innerType,t,r);const o=t.seen.get(e);o.ref=i.innerType,n.readOnly=!0},dA=(e,t,n,r)=>{const i=e._zod.def;hn(i.innerType,t,r);const o=t.seen.get(e);o.ref=i.innerType},OU=le("ZodISODateTime",(e,t)=>{UB.init(e,t),Mt.init(e,t)});function MU(e){return H6(OU,e)}const IU=le("ZodISODate",(e,t)=>{qB.init(e,t),Mt.init(e,t)});function NU(e){return V6(IU,e)}const DU=le("ZodISOTime",(e,t)=>{HB.init(e,t),Mt.init(e,t)});function zU(e){return K6(DU,e)}const LU=le("ZodISODuration",(e,t)=>{VB.init(e,t),Mt.init(e,t)});function PU(e){return G6(LU,e)}const jU=(e,t)=>{Xk.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>F$(e,n)},flatten:{value:n=>j$(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,wy,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,wy,2)}},isEmpty:{get(){return e.issues.length===0}}})},Rr=le("ZodError",jU,{Parent:Error}),FU=Q0(Rr),$U=Z0(Rr),BU=Ud(Rr),UU=qd(Rr),qU=U$(Rr),HU=q$(Rr),VU=H$(Rr),KU=V$(Rr),GU=K$(Rr),QU=G$(Rr),ZU=Q$(Rr),YU=Z$(Rr),Xt=le("ZodType",(e,t)=>(Jt.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:hd(e,"input"),output:hd(e,"output")}}),e.toJSONSchema=fU(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(ds(t,{checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),e.with=e.check,e.clone=(n,r)=>hs(e,n,r),e.brand=()=>e,e.register=((n,r)=>(n.add(e,r),e)),e.parse=(n,r)=>FU(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>BU(e,n,r),e.parseAsync=async(n,r)=>$U(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>UU(e,n,r),e.spa=e.safeParseAsync,e.encode=(n,r)=>qU(e,n,r),e.decode=(n,r)=>HU(e,n,r),e.encodeAsync=async(n,r)=>VU(e,n,r),e.decodeAsync=async(n,r)=>KU(e,n,r),e.safeEncode=(n,r)=>GU(e,n,r),e.safeDecode=(n,r)=>QU(e,n,r),e.safeEncodeAsync=async(n,r)=>ZU(e,n,r),e.safeDecodeAsync=async(n,r)=>YU(e,n,r),e.refine=(n,r)=>e.check(Uq(n,r)),e.superRefine=n=>e.check(qq(n)),e.overwrite=n=>e.check(_a(n)),e.optional=()=>HC(e),e.exactOptional=()=>Tq(e),e.nullable=()=>VC(e),e.nullish=()=>HC(VC(e)),e.nonoptional=n=>zq(e,n),e.array=()=>bq(e),e.or=n=>_q([e,n]),e.and=n=>Cq(e,n),e.transform=n=>KC(e,kq(n)),e.default=n=>Iq(e,n),e.prefault=n=>Dq(e,n),e.catch=n=>Pq(e,n),e.pipe=n=>KC(e,n),e.readonly=()=>$q(e),e.describe=n=>{const r=e.clone();return ql.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){return ql.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return ql.get(e);const r=e.clone();return ql.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=n=>n(e),e)),hA=le("_ZodString",(e,t)=>{Y0.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(r,i,o)=>hU(e,r,i);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(Y6(...r)),e.includes=(...r)=>e.check(W6(...r)),e.startsWith=(...r)=>e.check(eU(...r)),e.endsWith=(...r)=>e.check(tU(...r)),e.min=(...r)=>e.check(dd(...r)),e.max=(...r)=>e.check(aA(...r)),e.length=(...r)=>e.check(lA(...r)),e.nonempty=(...r)=>e.check(dd(1,...r)),e.lowercase=r=>e.check(J6(r)),e.uppercase=r=>e.check(X6(r)),e.trim=()=>e.check(rU()),e.normalize=(...r)=>e.check(nU(...r)),e.toLowerCase=()=>e.check(iU()),e.toUpperCase=()=>e.check(sU()),e.slugify=()=>e.check(oU())}),JU=le("ZodString",(e,t)=>{Y0.init(e,t),hA.init(e,t),e.email=n=>e.check(x6(XU,n)),e.url=n=>e.check(A6(WU,n)),e.jwt=n=>e.check(q6(pq,n)),e.emoji=n=>e.check(T6(eq,n)),e.guid=n=>e.check(BC(UC,n)),e.uuid=n=>e.check(C6(ff,n)),e.uuidv4=n=>e.check(E6(ff,n)),e.uuidv6=n=>e.check(R6(ff,n)),e.uuidv7=n=>e.check(k6(ff,n)),e.nanoid=n=>e.check(O6(tq,n)),e.guid=n=>e.check(BC(UC,n)),e.cuid=n=>e.check(M6(nq,n)),e.cuid2=n=>e.check(I6(rq,n)),e.ulid=n=>e.check(N6(iq,n)),e.base64=n=>e.check($6(fq,n)),e.base64url=n=>e.check(B6(dq,n)),e.xid=n=>e.check(D6(sq,n)),e.ksuid=n=>e.check(z6(oq,n)),e.ipv4=n=>e.check(L6(aq,n)),e.ipv6=n=>e.check(P6(lq,n)),e.cidrv4=n=>e.check(j6(uq,n)),e.cidrv6=n=>e.check(F6(cq,n)),e.e164=n=>e.check(U6(hq,n)),e.datetime=n=>e.check(MU(n)),e.date=n=>e.check(NU(n)),e.time=n=>e.check(zU(n)),e.duration=n=>e.check(PU(n))});function J0(e){return _6(JU,e)}const Mt=le("ZodStringFormat",(e,t)=>{Ot.init(e,t),hA.init(e,t)}),XU=le("ZodEmail",(e,t)=>{NB.init(e,t),Mt.init(e,t)}),UC=le("ZodGUID",(e,t)=>{MB.init(e,t),Mt.init(e,t)}),ff=le("ZodUUID",(e,t)=>{IB.init(e,t),Mt.init(e,t)}),WU=le("ZodURL",(e,t)=>{DB.init(e,t),Mt.init(e,t)}),eq=le("ZodEmoji",(e,t)=>{zB.init(e,t),Mt.init(e,t)}),tq=le("ZodNanoID",(e,t)=>{LB.init(e,t),Mt.init(e,t)}),nq=le("ZodCUID",(e,t)=>{PB.init(e,t),Mt.init(e,t)}),rq=le("ZodCUID2",(e,t)=>{jB.init(e,t),Mt.init(e,t)}),iq=le("ZodULID",(e,t)=>{FB.init(e,t),Mt.init(e,t)}),sq=le("ZodXID",(e,t)=>{$B.init(e,t),Mt.init(e,t)}),oq=le("ZodKSUID",(e,t)=>{BB.init(e,t),Mt.init(e,t)}),aq=le("ZodIPv4",(e,t)=>{KB.init(e,t),Mt.init(e,t)}),lq=le("ZodIPv6",(e,t)=>{GB.init(e,t),Mt.init(e,t)}),uq=le("ZodCIDRv4",(e,t)=>{QB.init(e,t),Mt.init(e,t)}),cq=le("ZodCIDRv6",(e,t)=>{ZB.init(e,t),Mt.init(e,t)}),fq=le("ZodBase64",(e,t)=>{YB.init(e,t),Mt.init(e,t)}),dq=le("ZodBase64URL",(e,t)=>{XB.init(e,t),Mt.init(e,t)}),hq=le("ZodE164",(e,t)=>{WB.init(e,t),Mt.init(e,t)}),pq=le("ZodJWT",(e,t)=>{t6.init(e,t),Mt.init(e,t)}),mq=le("ZodUnknown",(e,t)=>{n6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>mU()});function qC(){return Q6(mq)}const gq=le("ZodNever",(e,t)=>{r6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>pU(e,n,r)});function yq(e){return Z6(gq,e)}const vq=le("ZodArray",(e,t)=>{i6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>bU(e,n,r,i),e.element=t.element,e.min=(n,r)=>e.check(dd(n,r)),e.nonempty=n=>e.check(dd(1,n)),e.max=(n,r)=>e.check(aA(n,r)),e.length=(n,r)=>e.check(lA(n,r)),e.unwrap=()=>e.element});function bq(e,t){return aU(vq,e,t)}const Sq=le("ZodObject",(e,t)=>{o6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>SU(e,n,r,i),bt(e,"shape",()=>t.shape),e.keyof=()=>Eq(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:qC()}),e.loose=()=>e.clone({...e._zod.def,catchall:qC()}),e.strict=()=>e.clone({...e._zod.def,catchall:yq()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>N$(e,n),e.safeExtend=n=>D$(e,n),e.merge=n=>z$(e,n),e.pick=n=>M$(e,n),e.omit=n=>I$(e,n),e.partial=(...n)=>L$(pA,e,n[0]),e.required=(...n)=>P$(mA,e,n[0])});function Vd(e,t){const n={type:"object",shape:e??{},...$e(t)};return new Sq(n)}const wq=le("ZodUnion",(e,t)=>{a6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>wU(e,n,r,i),e.options=t.options});function _q(e,t){return new wq({type:"union",options:e,...$e(t)})}const xq=le("ZodIntersection",(e,t)=>{l6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>_U(e,n,r,i)});function Cq(e,t){return new xq({type:"intersection",left:e,right:t})}const xy=le("ZodEnum",(e,t)=>{u6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(r,i,o)=>gU(e,r,i),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,i)=>{const o={};for(const l of r)if(n.has(l))o[l]=t.entries[l];else throw new Error(`Key ${l} not found in enum`);return new xy({...t,checks:[],...$e(i),entries:o})},e.exclude=(r,i)=>{const o={...t.entries};for(const l of r)if(n.has(l))delete o[l];else throw new Error(`Key ${l} not found in enum`);return new xy({...t,checks:[],...$e(i),entries:o})}});function Eq(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new xy({type:"enum",entries:n,...$e(t)})}const Rq=le("ZodTransform",(e,t)=>{c6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>vU(e,n),e._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Vk(e.constructor.name);n.addIssue=o=>{if(typeof o=="string")n.issues.push(hu(o,n.value,t));else{const l=o;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=e),n.issues.push(hu(l))}};const i=t.transform(n.value,n);return i instanceof Promise?i.then(o=>(n.value=o,n)):(n.value=i,n)}});function kq(e){return new Rq({type:"transform",transform:e})}const pA=le("ZodOptional",(e,t)=>{oA.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>dA(e,n,r,i),e.unwrap=()=>e._zod.def.innerType});function HC(e){return new pA({type:"optional",innerType:e})}const Aq=le("ZodExactOptional",(e,t)=>{f6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>dA(e,n,r,i),e.unwrap=()=>e._zod.def.innerType});function Tq(e){return new Aq({type:"optional",innerType:e})}const Oq=le("ZodNullable",(e,t)=>{d6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>xU(e,n,r,i),e.unwrap=()=>e._zod.def.innerType});function VC(e){return new Oq({type:"nullable",innerType:e})}const Mq=le("ZodDefault",(e,t)=>{h6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>EU(e,n,r,i),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Iq(e,t){return new Mq({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Zk(t)}})}const Nq=le("ZodPrefault",(e,t)=>{p6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>RU(e,n,r,i),e.unwrap=()=>e._zod.def.innerType});function Dq(e,t){return new Nq({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Zk(t)}})}const mA=le("ZodNonOptional",(e,t)=>{m6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>CU(e,n,r,i),e.unwrap=()=>e._zod.def.innerType});function zq(e,t){return new mA({type:"nonoptional",innerType:e,...$e(t)})}const Lq=le("ZodCatch",(e,t)=>{g6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>kU(e,n,r,i),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Pq(e,t){return new Lq({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const jq=le("ZodPipe",(e,t)=>{y6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>AU(e,n,r,i),e.in=t.in,e.out=t.out});function KC(e,t){return new jq({type:"pipe",in:e,out:t})}const Fq=le("ZodReadonly",(e,t)=>{v6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>TU(e,n,r,i),e.unwrap=()=>e._zod.def.innerType});function $q(e){return new Fq({type:"readonly",innerType:e})}const Bq=le("ZodCustom",(e,t)=>{b6.init(e,t),Xt.init(e,t),e._zod.processJSONSchema=(n,r,i)=>yU(e,n)});function Uq(e,t={}){return lU(Bq,e,t)}function qq(e){return uU(e)}const Cy=50;function Hq(e){return e?e.length<=Cy?e:e.slice(0,Cy):[]}function sg(e){return e.error?{error:e.error}:{columns:e.columns,rowCount:e.rows?.length??0,rows:Hq(e.rows),rowsAffected:e.rows_affected,truncated:(e.rows?.length??0)>Cy}}const Vq=Vd({}),Kq=Vd({query:J0().describe("The SQL query to set in the editor")}),Gq=Vd({query:J0().describe("The SQL query to execute")}),Qq=Vd({query:J0().describe("The SQL query to run silently")}),Zq=Od({name:"get_query_result",description:"Get the result of the last executed query that was shown in the UI, including columns, rows, and any errors",inputSchema:Vq}),Yq=Od({name:"set_query",description:"Set the SQL query in the editor without executing it. The user will see the query appear in their editor immediately.",inputSchema:Kq}),Jq=Od({name:"execute_query",description:"Execute a SQL query and show results in the UI. The query will be set in the editor and executed, with results displayed to the user. Returns the query results directly.",inputSchema:Gq}),Xq=Od({name:"run_query",description:"Run a SQL query silently WITHOUT changing the UI or query editor. Use this for exploratory queries, checking data, or gathering information without disrupting what the user is currently working on. Results are returned but not shown in the UI.",inputSchema:Qq});function Wq(e){const{queryResult:t,setters:n}=e,r=Zq.client(async()=>t?sg(t):{error:"No query has been executed yet."}),i=Yq.client(async c=>{const f=c;return n.setQuery(f.query),{success:!0,query:f.query}}),o=Jq.client(async c=>{const f=c;try{const d=await n.executeQuery(f.query);return sg(d)}catch(d){return{error:d instanceof Error?d.message:"Query execution failed"}}}),l=Xq.client(async c=>{const f=c;try{const d=await n.executeQuerySilent(f.query);return sg(d)}catch(d){return{error:d instanceof Error?d.message:"Query execution failed"}}});return Q5(r,i,o,l)}function e9(e){const{connection:t,database:n,table:r,currentQuery:i,schema:o}=e,l=[];t?(l.push(`- **Driver**: ${t.driver}`),l.push(`- **Database**: ${n||"(none selected)"}`),l.push(`- **Table**: ${r||"(none selected)"}`)):l.push("- Not connected to a database");const c=l.join(`
`),f=i?.trim()?`\`\`\`sql
${i}
\`\`\``:"(empty)";let d="";return o?.tables?.length&&(d=`

## Schema

${o.tables.map(p=>{const g=o.columns[p];if(g?.length){const y=g.map(S=>`${S.name} (${S.type})`).join(", ");return`- **${p}**: ${y}`}return`- **${p}**`}).join(`
`)}`),`You are an AI assistant embedded in a database management tool. You help users write, understand, and debug SQL queries.

## Current Environment

${c}

## Current Query

${f}${d}

## Tools

- \`get_query_result\`: Get results of the last executed query
- \`set_query\`: Put a query in the editor (user sees it immediately)
- \`execute_query\`: Run a query and show results in UI
- \`run_query\`: Run a query silently without changing UI (for exploration)

## Guidelines

- **Writing queries**: Use \`set_query\` to show it in the editor for review
- **Running queries**: Use \`execute_query\` - results return directly
- **Exploring data**: Use \`run_query\` to check data without disrupting the UI
- **Query format**: One query at a time. For Oracle, omit trailing semicolon
- **Response format**: Use Markdown. Be concise.`}const GC={name:"SQL Assistant",placeholder:"Ask about your query or data..."};function t9(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const n9=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,r9=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,i9={};function QC(e,t){return(i9.jsx?r9:n9).test(e)}const s9=/[ \t\n\f\r]/g;function o9(e){return typeof e=="object"?e.type==="text"?ZC(e.value):!1:ZC(e)}function ZC(e){return e.replace(s9,"")===""}class Eu{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Eu.prototype.normal={};Eu.prototype.property={};Eu.prototype.space=void 0;function gA(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Eu(n,r,t)}function Ey(e){return e.toLowerCase()}class Un{constructor(t,n){this.attribute=n,this.property=t}}Un.prototype.attribute="";Un.prototype.booleanish=!1;Un.prototype.boolean=!1;Un.prototype.commaOrSpaceSeparated=!1;Un.prototype.commaSeparated=!1;Un.prototype.defined=!1;Un.prototype.mustUseProperty=!1;Un.prototype.number=!1;Un.prototype.overloadedBoolean=!1;Un.prototype.property="";Un.prototype.spaceSeparated=!1;Un.prototype.space=void 0;let a9=0;const Ge=no(),qt=no(),Ry=no(),pe=no(),Rt=no(),ca=no(),Wn=no();function no(){return 2**++a9}const ky=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ge,booleanish:qt,commaOrSpaceSeparated:Wn,commaSeparated:ca,number:pe,overloadedBoolean:Ry,spaceSeparated:Rt},Symbol.toStringTag,{value:"Module"})),og=Object.keys(ky);class X0 extends Un{constructor(t,n,r,i){let o=-1;if(super(t,n),YC(this,"space",i),typeof r=="number")for(;++o<og.length;){const l=og[o];YC(this,og[o],(r&ky[l])===ky[l])}}}X0.prototype.defined=!0;function YC(e,t,n){n&&(e[t]=n)}function xa(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new X0(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[Ey(r)]=r,n[Ey(o.attribute)]=r}return new Eu(t,n,e.space)}const yA=xa({properties:{ariaActiveDescendant:null,ariaAtomic:qt,ariaAutoComplete:null,ariaBusy:qt,ariaChecked:qt,ariaColCount:pe,ariaColIndex:pe,ariaColSpan:pe,ariaControls:Rt,ariaCurrent:null,ariaDescribedBy:Rt,ariaDetails:null,ariaDisabled:qt,ariaDropEffect:Rt,ariaErrorMessage:null,ariaExpanded:qt,ariaFlowTo:Rt,ariaGrabbed:qt,ariaHasPopup:null,ariaHidden:qt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Rt,ariaLevel:pe,ariaLive:null,ariaModal:qt,ariaMultiLine:qt,ariaMultiSelectable:qt,ariaOrientation:null,ariaOwns:Rt,ariaPlaceholder:null,ariaPosInSet:pe,ariaPressed:qt,ariaReadOnly:qt,ariaRelevant:null,ariaRequired:qt,ariaRoleDescription:Rt,ariaRowCount:pe,ariaRowIndex:pe,ariaRowSpan:pe,ariaSelected:qt,ariaSetSize:pe,ariaSort:null,ariaValueMax:pe,ariaValueMin:pe,ariaValueNow:pe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function vA(e,t){return t in e?e[t]:t}function bA(e,t){return vA(e,t.toLowerCase())}const l9=xa({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ca,acceptCharset:Rt,accessKey:Rt,action:null,allow:null,allowFullScreen:Ge,allowPaymentRequest:Ge,allowUserMedia:Ge,alt:null,as:null,async:Ge,autoCapitalize:null,autoComplete:Rt,autoFocus:Ge,autoPlay:Ge,blocking:Rt,capture:null,charSet:null,checked:Ge,cite:null,className:Rt,cols:pe,colSpan:null,content:null,contentEditable:qt,controls:Ge,controlsList:Rt,coords:pe|ca,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ge,defer:Ge,dir:null,dirName:null,disabled:Ge,download:Ry,draggable:qt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ge,formTarget:null,headers:Rt,height:pe,hidden:Ry,high:pe,href:null,hrefLang:null,htmlFor:Rt,httpEquiv:Rt,id:null,imageSizes:null,imageSrcSet:null,inert:Ge,inputMode:null,integrity:null,is:null,isMap:Ge,itemId:null,itemProp:Rt,itemRef:Rt,itemScope:Ge,itemType:Rt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ge,low:pe,manifest:null,max:null,maxLength:pe,media:null,method:null,min:null,minLength:pe,multiple:Ge,muted:Ge,name:null,nonce:null,noModule:Ge,noValidate:Ge,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ge,optimum:pe,pattern:null,ping:Rt,placeholder:null,playsInline:Ge,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ge,referrerPolicy:null,rel:Rt,required:Ge,reversed:Ge,rows:pe,rowSpan:pe,sandbox:Rt,scope:null,scoped:Ge,seamless:Ge,selected:Ge,shadowRootClonable:Ge,shadowRootDelegatesFocus:Ge,shadowRootMode:null,shape:null,size:pe,sizes:null,slot:null,span:pe,spellCheck:qt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:pe,step:null,style:null,tabIndex:pe,target:null,title:null,translate:null,type:null,typeMustMatch:Ge,useMap:null,value:qt,width:pe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Rt,axis:null,background:null,bgColor:null,border:pe,borderColor:null,bottomMargin:pe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ge,declare:Ge,event:null,face:null,frame:null,frameBorder:null,hSpace:pe,leftMargin:pe,link:null,longDesc:null,lowSrc:null,marginHeight:pe,marginWidth:pe,noResize:Ge,noHref:Ge,noShade:Ge,noWrap:Ge,object:null,profile:null,prompt:null,rev:null,rightMargin:pe,rules:null,scheme:null,scrolling:qt,standby:null,summary:null,text:null,topMargin:pe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:pe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ge,disableRemotePlayback:Ge,prefix:null,property:null,results:pe,security:null,unselectable:null},space:"html",transform:bA}),u9=xa({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Wn,accentHeight:pe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:pe,amplitude:pe,arabicForm:null,ascent:pe,attributeName:null,attributeType:null,azimuth:pe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:pe,by:null,calcMode:null,capHeight:pe,className:Rt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:pe,diffuseConstant:pe,direction:null,display:null,dur:null,divisor:pe,dominantBaseline:null,download:Ge,dx:null,dy:null,edgeMode:null,editable:null,elevation:pe,enableBackground:null,end:null,event:null,exponent:pe,externalResourcesRequired:null,fill:null,fillOpacity:pe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ca,g2:ca,glyphName:ca,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:pe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:pe,horizOriginX:pe,horizOriginY:pe,id:null,ideographic:pe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:pe,k:pe,k1:pe,k2:pe,k3:pe,k4:pe,kernelMatrix:Wn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:pe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:pe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:pe,overlineThickness:pe,paintOrder:null,panose1:null,path:null,pathLength:pe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Rt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:pe,pointsAtY:pe,pointsAtZ:pe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Wn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Wn,rev:Wn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Wn,requiredFeatures:Wn,requiredFonts:Wn,requiredFormats:Wn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:pe,specularExponent:pe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:pe,strikethroughThickness:pe,string:null,stroke:null,strokeDashArray:Wn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:pe,strokeOpacity:pe,strokeWidth:null,style:null,surfaceScale:pe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Wn,tabIndex:pe,tableValues:null,target:null,targetX:pe,targetY:pe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Wn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:pe,underlineThickness:pe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:pe,values:null,vAlphabetic:pe,vMathematical:pe,vectorEffect:null,vHanging:pe,vIdeographic:pe,version:null,vertAdvY:pe,vertOriginX:pe,vertOriginY:pe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:pe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:vA}),SA=xa({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),wA=xa({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:bA}),_A=xa({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),c9={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},f9=/[A-Z]/g,JC=/-[a-z]/g,d9=/^data[-\w.:]+$/i;function h9(e,t){const n=Ey(t);let r=t,i=Un;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&d9.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(JC,m9);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!JC.test(o)){let l=o.replace(f9,p9);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}i=X0}return new i(r,t)}function p9(e){return"-"+e.toLowerCase()}function m9(e){return e.charAt(1).toUpperCase()}const g9=gA([yA,l9,SA,wA,_A],"html"),W0=gA([yA,u9,SA,wA,_A],"svg");function y9(e){return e.join(" ").trim()}var Ko={},ag,XC;function v9(){if(XC)return ag;XC=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,c=/^\s+|\s+$/g,f=`
`,d="/",m="*",p="",g="comment",y="declaration";function S(C,x){if(typeof C!="string")throw new TypeError("First argument must be a string");if(!C)return[];x=x||{};var E=1,k=1;function I(re){var K=re.match(t);K&&(E+=K.length);var $=re.lastIndexOf(f);k=~$?re.length-$:k+re.length}function P(){var re={line:E,column:k};return function(K){return K.position=new R(re),j(),K}}function R(re){this.start=re,this.end={line:E,column:k},this.source=x.source}R.prototype.content=C;function M(re){var K=new Error(x.source+":"+E+":"+k+": "+re);if(K.reason=re,K.filename=x.source,K.line=E,K.column=k,K.source=C,!x.silent)throw K}function L(re){var K=re.exec(C);if(K){var $=K[0];return I($),C=C.slice($.length),K}}function j(){L(n)}function N(re){var K;for(re=re||[];K=U();)K!==!1&&re.push(K);return re}function U(){var re=P();if(!(d!=C.charAt(0)||m!=C.charAt(1))){for(var K=2;p!=C.charAt(K)&&(m!=C.charAt(K)||d!=C.charAt(K+1));)++K;if(K+=2,p===C.charAt(K-1))return M("End of comment missing");var $=C.slice(2,K-2);return k+=2,I($),C=C.slice(K),k+=2,re({type:g,comment:$})}}function Z(){var re=P(),K=L(r);if(K){if(U(),!L(i))return M("property missing ':'");var $=L(o),te=re({type:y,property:w(K[0].replace(e,p)),value:$?w($[0].replace(e,p)):p});return L(l),te}}function ee(){var re=[];N(re);for(var K;K=Z();)K!==!1&&(re.push(K),N(re));return re}return j(),ee()}function w(C){return C?C.replace(c,p):p}return ag=S,ag}var WC;function b9(){if(WC)return Ko;WC=1;var e=Ko&&Ko.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.default=n;const t=e(v9());function n(r,i){let o=null;if(!r||typeof r!="string")return o;const l=(0,t.default)(r),c=typeof i=="function";return l.forEach(f=>{if(f.type!=="declaration")return;const{property:d,value:m}=f;c?i(d,m,f):m&&(o=o||{},o[d]=m)}),o}return Ko}var Cl={},e1;function S9(){if(e1)return Cl;e1=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,o=function(d){return!d||n.test(d)||e.test(d)},l=function(d,m){return m.toUpperCase()},c=function(d,m){return"".concat(m,"-")},f=function(d,m){return m===void 0&&(m={}),o(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(i,c):d=d.replace(r,c),d.replace(t,l))};return Cl.camelCase=f,Cl}var El,t1;function w9(){if(t1)return El;t1=1;var e=El&&El.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(b9()),n=S9();function r(i,o){var l={};return!i||typeof i!="string"||(0,t.default)(i,function(c,f){c&&f&&(l[(0,n.camelCase)(c,o)]=f)}),l}return r.default=r,El=r,El}var _9=w9();const x9=Ly(_9),xA=CA("end"),ev=CA("start");function CA(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function C9(e){const t=ev(e),n=xA(e);if(t&&n)return{start:t,end:n}}function tu(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?n1(e.position):"start"in e||"end"in e?n1(e):"line"in e||"column"in e?Ay(e):""}function Ay(e){return r1(e&&e.line)+":"+r1(e&&e.column)}function n1(e){return Ay(e&&e.start)+"-"+Ay(e&&e.end)}function r1(e){return e&&typeof e=="number"?e:1}class bn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},l=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(l=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?o.ruleId=r:(o.source=r.slice(0,f),o.ruleId=r.slice(f+1))}if(!o.place&&o.ancestors&&o.ancestors){const f=o.ancestors[o.ancestors.length-1];f&&(o.place=f.position)}const c=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=c?c.line:void 0,this.name=tu(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=l&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}bn.prototype.file="";bn.prototype.name="";bn.prototype.reason="";bn.prototype.message="";bn.prototype.stack="";bn.prototype.column=void 0;bn.prototype.line=void 0;bn.prototype.ancestors=void 0;bn.prototype.cause=void 0;bn.prototype.fatal=void 0;bn.prototype.place=void 0;bn.prototype.ruleId=void 0;bn.prototype.source=void 0;const tv={}.hasOwnProperty,E9=new Map,R9=/[A-Z]/g,k9=new Set(["table","tbody","thead","tfoot","tr"]),A9=new Set(["td","th"]),EA="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function T9(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=P9(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=L9(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?W0:g9,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=RA(i,e,void 0);return o&&typeof o!="string"?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function RA(e,t,n){if(t.type==="element")return O9(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return M9(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return N9(e,t,n);if(t.type==="mdxjsEsm")return I9(e,t);if(t.type==="root")return D9(e,t,n);if(t.type==="text")return z9(e,t)}function O9(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=W0,e.schema=i),e.ancestors.push(t);const o=AA(e,t.tagName,!1),l=j9(e,t);let c=rv(e,t);return k9.has(t.tagName)&&(c=c.filter(function(f){return typeof f=="string"?!o9(f):!0})),kA(e,l,o,t),nv(l,c),e.ancestors.pop(),e.schema=r,e.create(t,o,l,n)}function M9(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}pu(e,t.position)}function I9(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);pu(e,t.position)}function N9(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=W0,e.schema=i),e.ancestors.push(t);const o=t.name===null?e.Fragment:AA(e,t.name,!0),l=F9(e,t),c=rv(e,t);return kA(e,l,o,t),nv(l,c),e.ancestors.pop(),e.schema=r,e.create(t,o,l,n)}function D9(e,t,n){const r={};return nv(r,rv(e,t)),e.create(t,e.Fragment,r,n)}function z9(e,t){return t.value}function kA(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function nv(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function L9(e,t,n){return r;function r(i,o,l,c){const d=Array.isArray(l.children)?n:t;return c?d(o,l,c):d(o,l)}}function P9(e,t){return n;function n(r,i,o,l){const c=Array.isArray(o.children),f=ev(r);return t(i,o,l,c,{columnNumber:f?f.column-1:void 0,fileName:e,lineNumber:f?f.line:void 0},void 0)}}function j9(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&tv.call(t.properties,i)){const o=$9(e,i,t.properties[i]);if(o){const[l,c]=o;e.tableCellAlignToStyle&&l==="align"&&typeof c=="string"&&A9.has(t.tagName)?r=c:n[l]=c}}if(r){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function F9(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const o=r.data.estree.body[0];o.type;const l=o.expression;l.type;const c=l.properties[0];c.type,Object.assign(n,e.evaluater.evaluateExpression(c.argument))}else pu(e,t.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const c=r.value.data.estree.body[0];c.type,o=e.evaluater.evaluateExpression(c.expression)}else pu(e,t.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function rv(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:E9;for(;++r<t.children.length;){const o=t.children[r];let l;if(e.passKeys){const f=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(f){const d=i.get(f)||0;l=f+"-"+d,i.set(f,d+1)}}const c=RA(e,o,l);c!==void 0&&n.push(c)}return n}function $9(e,t,n){const r=h9(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?t9(n):y9(n)),r.property==="style"){let i=typeof n=="object"?n:B9(e,String(n));return e.stylePropertyNameCase==="css"&&(i=U9(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?c9[r.property]||r.property:r.attribute,n]}}function B9(e,t){try{return x9(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new bn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=EA+"#cannot-parse-style-attribute",i}}function AA(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let o=-1,l;for(;++o<i.length;){const c=QC(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};l=l?{type:"MemberExpression",object:l,property:c,computed:!!(o&&c.type==="Literal"),optional:!1}:c}r=l}else r=QC(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return tv.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);pu(e)}function pu(e,t){const n=new bn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=EA+"#cannot-handle-mdx-estrees-without-createevaluater",n}function U9(e){const t={};let n;for(n in e)tv.call(e,n)&&(t[q9(n)]=e[n]);return t}function q9(e){let t=e.replace(R9,H9);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function H9(e){return"-"+e.toLowerCase()}const lg={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},V9={};function iv(e,t){const n=V9,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return TA(e,r,i)}function TA(e,t,n){if(K9(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return i1(e.children,t,n)}return Array.isArray(e)?i1(e,t,n):""}function i1(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=TA(e[i],t,n);return r.join("")}function K9(e){return!!(e&&typeof e=="object")}const s1=document.createElement("i");function sv(e){const t="&"+e+";";s1.innerHTML=t;const n=s1.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ir(e,t,n,r){const i=e.length;let o=0,l;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(t,n),e.splice(...l);else for(n&&e.splice(t,n);o<r.length;)l=r.slice(o,o+1e4),l.unshift(t,0),e.splice(...l),o+=1e4,t+=1e4}function wr(e,t){return e.length>0?(ir(e,e.length,0,t),e):t}const o1={}.hasOwnProperty;function OA(e){const t={};let n=-1;for(;++n<e.length;)G9(t,e[n]);return t}function G9(e,t){let n;for(n in t){const i=(o1.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let l;if(o)for(l in o){o1.call(i,l)||(i[l]=[]);const c=o[l];Q9(i[l],Array.isArray(c)?c:c?[c]:[])}}}function Q9(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);ir(e,0,0,r)}function MA(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function zr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const kn=ps(/[A-Za-z]/),vn=ps(/[\dA-Za-z]/),Z9=ps(/[#-'*+\--9=?A-Z^-~]/);function pd(e){return e!==null&&(e<32||e===127)}const Ty=ps(/\d/),Y9=ps(/[\dA-Fa-f]/),J9=ps(/[!-/:-@[-`{-~]/);function Ie(e){return e!==null&&e<-2}function Et(e){return e!==null&&(e<0||e===32)}function nt(e){return e===-2||e===-1||e===32}const Kd=ps(new RegExp("\\p{P}|\\p{S}","u")),Ws=ps(/\s/);function ps(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Ca(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let l="";if(o===37&&vn(e.charCodeAt(n+1))&&vn(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(l=String.fromCharCode(o));else if(o>55295&&o<57344){const c=e.charCodeAt(n+1);o<56320&&c>56319&&c<57344?(l=String.fromCharCode(o,c),i=1):l=""}else l=String.fromCharCode(o);l&&(t.push(e.slice(r,n),encodeURIComponent(l)),r=n+i+1,l=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ut(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return l;function l(f){return nt(f)?(e.enter(n),c(f)):t(f)}function c(f){return nt(f)&&o++<i?(e.consume(f),c):(e.exit(n),t(f))}}const X9={tokenize:W9};function W9(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(c){if(c===null){e.consume(c);return}return e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),ut(e,t,"linePrefix")}function i(c){return e.enter("paragraph"),o(c)}function o(c){const f=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(c)}function l(c){if(c===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(c);return}return Ie(c)?(e.consume(c),e.exit("chunkText"),o):(e.consume(c),l)}}const e8={tokenize:t8},a1={tokenize:n8};function t8(e){const t=this,n=[];let r=0,i,o,l;return c;function c(k){if(r<n.length){const I=n[r];return t.containerState=I[1],e.attempt(I[0].continuation,f,d)(k)}return d(k)}function f(k){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&E();const I=t.events.length;let P=I,R;for(;P--;)if(t.events[P][0]==="exit"&&t.events[P][1].type==="chunkFlow"){R=t.events[P][1].end;break}x(r);let M=I;for(;M<t.events.length;)t.events[M][1].end={...R},M++;return ir(t.events,P+1,0,t.events.slice(I)),t.events.length=M,d(k)}return c(k)}function d(k){if(r===n.length){if(!i)return g(k);if(i.currentConstruct&&i.currentConstruct.concrete)return S(k);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(a1,m,p)(k)}function m(k){return i&&E(),x(r),g(k)}function p(k){return t.parser.lazy[t.now().line]=r!==n.length,l=t.now().offset,S(k)}function g(k){return t.containerState={},e.attempt(a1,y,S)(k)}function y(k){return r++,n.push([t.currentConstruct,t.containerState]),g(k)}function S(k){if(k===null){i&&E(),x(0),e.consume(k);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),w(k)}function w(k){if(k===null){C(e.exit("chunkFlow"),!0),x(0),e.consume(k);return}return Ie(k)?(e.consume(k),C(e.exit("chunkFlow")),r=0,t.interrupt=void 0,c):(e.consume(k),w)}function C(k,I){const P=t.sliceStream(k);if(I&&P.push(null),k.previous=o,o&&(o.next=k),o=k,i.defineSkip(k.start),i.write(P),t.parser.lazy[k.start.line]){let R=i.events.length;for(;R--;)if(i.events[R][1].start.offset<l&&(!i.events[R][1].end||i.events[R][1].end.offset>l))return;const M=t.events.length;let L=M,j,N;for(;L--;)if(t.events[L][0]==="exit"&&t.events[L][1].type==="chunkFlow"){if(j){N=t.events[L][1].end;break}j=!0}for(x(r),R=M;R<t.events.length;)t.events[R][1].end={...N},R++;ir(t.events,L+1,0,t.events.slice(M)),t.events.length=R}}function x(k){let I=n.length;for(;I-- >k;){const P=n[I];t.containerState=P[1],P[0].exit.call(t,e)}n.length=k}function E(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function n8(e,t,n){return ut(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function pa(e){if(e===null||Et(e)||Ws(e))return 1;if(Kd(e))return 2}function Gd(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const Oy={name:"attention",resolveAll:r8,tokenize:i8};function r8(e,t){let n=-1,r,i,o,l,c,f,d,m;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;f=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const p={...e[r][1].end},g={...e[n][1].start};l1(p,-f),l1(g,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...e[r][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:g},o={type:f>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:f>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},e[r][1].end={...l.start},e[n][1].start={...c.end},d=[],e[r][1].end.offset-e[r][1].start.offset&&(d=wr(d,[["enter",e[r][1],t],["exit",e[r][1],t]])),d=wr(d,[["enter",i,t],["enter",l,t],["exit",l,t],["enter",o,t]]),d=wr(d,Gd(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),d=wr(d,[["exit",o,t],["enter",c,t],["exit",c,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(m=2,d=wr(d,[["enter",e[n][1],t],["exit",e[n][1],t]])):m=0,ir(e,r-1,n-r+3,d),n=r+d.length-m-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function i8(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=pa(r);let o;return l;function l(f){return o=f,e.enter("attentionSequence"),c(f)}function c(f){if(f===o)return e.consume(f),c;const d=e.exit("attentionSequence"),m=pa(f),p=!m||m===2&&i||n.includes(f),g=!i||i===2&&m||n.includes(r);return d._open=!!(o===42?p:p&&(i||!g)),d._close=!!(o===42?g:g&&(m||!p)),t(f)}}function l1(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const s8={name:"autolink",tokenize:o8};function o8(e,t,n){let r=0;return i;function i(y){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(y){return kn(y)?(e.consume(y),l):y===64?n(y):d(y)}function l(y){return y===43||y===45||y===46||vn(y)?(r=1,c(y)):d(y)}function c(y){return y===58?(e.consume(y),r=0,f):(y===43||y===45||y===46||vn(y))&&r++<32?(e.consume(y),c):(r=0,d(y))}function f(y){return y===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):y===null||y===32||y===60||pd(y)?n(y):(e.consume(y),f)}function d(y){return y===64?(e.consume(y),m):Z9(y)?(e.consume(y),d):n(y)}function m(y){return vn(y)?p(y):n(y)}function p(y){return y===46?(e.consume(y),r=0,m):y===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(y),e.exit("autolinkMarker"),e.exit("autolink"),t):g(y)}function g(y){if((y===45||vn(y))&&r++<63){const S=y===45?g:p;return e.consume(y),S}return n(y)}}const Ru={partial:!0,tokenize:a8};function a8(e,t,n){return r;function r(o){return nt(o)?ut(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||Ie(o)?t(o):n(o)}}const IA={continuation:{tokenize:u8},exit:c8,name:"blockQuote",tokenize:l8};function l8(e,t,n){const r=this;return i;function i(l){if(l===62){const c=r.containerState;return c.open||(e.enter("blockQuote",{_container:!0}),c.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),o}return n(l)}function o(l){return nt(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function u8(e,t,n){const r=this;return i;function i(l){return nt(l)?ut(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):o(l)}function o(l){return e.attempt(IA,t,n)(l)}}function c8(e){e.exit("blockQuote")}const NA={name:"characterEscape",tokenize:f8};function f8(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return J9(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const DA={name:"characterReference",tokenize:d8};function d8(e,t,n){const r=this;let i=0,o,l;return c;function c(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),f}function f(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),o=31,l=vn,m(p))}function d(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,l=Y9,m):(e.enter("characterReferenceValue"),o=7,l=Ty,m(p))}function m(p){if(p===59&&i){const g=e.exit("characterReferenceValue");return l===vn&&!sv(r.sliceSerialize(g))?n(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(p)&&i++<o?(e.consume(p),m):n(p)}}const u1={partial:!0,tokenize:p8},c1={concrete:!0,name:"codeFenced",tokenize:h8};function h8(e,t,n){const r=this,i={partial:!0,tokenize:P};let o=0,l=0,c;return f;function f(R){return d(R)}function d(R){const M=r.events[r.events.length-1];return o=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,c=R,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),m(R)}function m(R){return R===c?(l++,e.consume(R),m):l<3?n(R):(e.exit("codeFencedFenceSequence"),nt(R)?ut(e,p,"whitespace")(R):p(R))}function p(R){return R===null||Ie(R)?(e.exit("codeFencedFence"),r.interrupt?t(R):e.check(u1,w,I)(R)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(R))}function g(R){return R===null||Ie(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(R)):nt(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ut(e,y,"whitespace")(R)):R===96&&R===c?n(R):(e.consume(R),g)}function y(R){return R===null||Ie(R)?p(R):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),S(R))}function S(R){return R===null||Ie(R)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(R)):R===96&&R===c?n(R):(e.consume(R),S)}function w(R){return e.attempt(i,I,C)(R)}function C(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),x}function x(R){return o>0&&nt(R)?ut(e,E,"linePrefix",o+1)(R):E(R)}function E(R){return R===null||Ie(R)?e.check(u1,w,I)(R):(e.enter("codeFlowValue"),k(R))}function k(R){return R===null||Ie(R)?(e.exit("codeFlowValue"),E(R)):(e.consume(R),k)}function I(R){return e.exit("codeFenced"),t(R)}function P(R,M,L){let j=0;return N;function N(K){return R.enter("lineEnding"),R.consume(K),R.exit("lineEnding"),U}function U(K){return R.enter("codeFencedFence"),nt(K)?ut(R,Z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):Z(K)}function Z(K){return K===c?(R.enter("codeFencedFenceSequence"),ee(K)):L(K)}function ee(K){return K===c?(j++,R.consume(K),ee):j>=l?(R.exit("codeFencedFenceSequence"),nt(K)?ut(R,re,"whitespace")(K):re(K)):L(K)}function re(K){return K===null||Ie(K)?(R.exit("codeFencedFence"),M(K)):L(K)}}}function p8(e,t,n){const r=this;return i;function i(l){return l===null?n(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o)}function o(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}const ug={name:"codeIndented",tokenize:g8},m8={partial:!0,tokenize:y8};function g8(e,t,n){const r=this;return i;function i(d){return e.enter("codeIndented"),ut(e,o,"linePrefix",5)(d)}function o(d){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(d):n(d)}function l(d){return d===null?f(d):Ie(d)?e.attempt(m8,l,f)(d):(e.enter("codeFlowValue"),c(d))}function c(d){return d===null||Ie(d)?(e.exit("codeFlowValue"),l(d)):(e.consume(d),c)}function f(d){return e.exit("codeIndented"),t(d)}}function y8(e,t,n){const r=this;return i;function i(l){return r.parser.lazy[r.now().line]?n(l):Ie(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i):ut(e,o,"linePrefix",5)(l)}function o(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(l):Ie(l)?i(l):n(l)}}const v8={name:"codeText",previous:S8,resolve:b8,tokenize:w8};function b8(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function S8(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function w8(e,t,n){let r=0,i,o;return l;function l(p){return e.enter("codeText"),e.enter("codeTextSequence"),c(p)}function c(p){return p===96?(e.consume(p),r++,c):(e.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),f):p===96?(o=e.enter("codeTextSequence"),i=0,m(p)):Ie(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),f):(e.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||Ie(p)?(e.exit("codeTextData"),f(p)):(e.consume(p),d)}function m(p){return p===96?(e.consume(p),i++,m):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(o.type="codeTextData",d(p))}}class _8{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Rl(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Rl(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Rl(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Rl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Rl(this.left,n.reverse())}}}function Rl(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function zA(e){const t={};let n=-1,r,i,o,l,c,f,d;const m=new _8(e);for(;++n<m.length;){for(;n in t;)n=t[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,o=0,o<f.length&&f[o][1].type==="lineEndingBlank"&&(o+=2),o<f.length&&f[o][1].type==="content"))for(;++o<f.length&&f[o][1].type!=="content";)f[o][1].type==="chunkText"&&(f[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,x8(m,n)),n=t[n],d=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(l=m.get(o),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(i&&(m.get(i)[1].type="lineEndingBlank"),l[1].type="lineEnding",i=o);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;i&&(r[1].end={...m.get(i)[1].start},c=m.slice(i,n),c.unshift(r),m.splice(i,n-i+1,c))}}return ir(e,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function x8(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,f=[],d={};let m,p,g=-1,y=n,S=0,w=0;const C=[w];for(;y;){for(;e.get(++i)[1]!==y;);o.push(i),y._tokenizer||(m=r.sliceStream(y),y.next||m.push(null),p&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++g<c.length;)c[g][0]==="exit"&&c[g-1][0]==="enter"&&c[g][1].type===c[g-1][1].type&&c[g][1].start.line!==c[g][1].end.line&&(w=g+1,C.push(w),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):C.pop(),g=C.length;g--;){const x=c.slice(C[g],C[g+1]),E=o.pop();f.push([E,E+x.length-1]),e.splice(E,2,x)}for(f.reverse(),g=-1;++g<f.length;)d[S+f[g][0]]=S+f[g][1],S+=f[g][1]-f[g][0]-1;return d}const C8={resolve:R8,tokenize:k8},E8={partial:!0,tokenize:A8};function R8(e){return zA(e),e}function k8(e,t){let n;return r;function r(c){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(c)}function i(c){return c===null?o(c):Ie(c)?e.check(E8,l,o)(c):(e.consume(c),i)}function o(c){return e.exit("chunkContent"),e.exit("content"),t(c)}function l(c){return e.consume(c),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function A8(e,t,n){const r=this;return i;function i(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),ut(e,o,"linePrefix")}function o(l){if(l===null||Ie(l))return n(l);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(l):e.interrupt(r.parser.constructs.flow,n,t)(l)}}function LA(e,t,n,r,i,o,l,c,f){const d=f||Number.POSITIVE_INFINITY;let m=0;return p;function p(x){return x===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(x),e.exit(o),g):x===null||x===32||x===41||pd(x)?n(x):(e.enter(r),e.enter(l),e.enter(c),e.enter("chunkString",{contentType:"string"}),w(x))}function g(x){return x===62?(e.enter(o),e.consume(x),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(c),e.enter("chunkString",{contentType:"string"}),y(x))}function y(x){return x===62?(e.exit("chunkString"),e.exit(c),g(x)):x===null||x===60||Ie(x)?n(x):(e.consume(x),x===92?S:y)}function S(x){return x===60||x===62||x===92?(e.consume(x),y):y(x)}function w(x){return!m&&(x===null||x===41||Et(x))?(e.exit("chunkString"),e.exit(c),e.exit(l),e.exit(r),t(x)):m<d&&x===40?(e.consume(x),m++,w):x===41?(e.consume(x),m--,w):x===null||x===32||x===40||pd(x)?n(x):(e.consume(x),x===92?C:w)}function C(x){return x===40||x===41||x===92?(e.consume(x),w):w(x)}}function PA(e,t,n,r,i,o){const l=this;let c=0,f;return d;function d(y){return e.enter(r),e.enter(i),e.consume(y),e.exit(i),e.enter(o),m}function m(y){return c>999||y===null||y===91||y===93&&!f||y===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(e.exit(o),e.enter(i),e.consume(y),e.exit(i),e.exit(r),t):Ie(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),m):(e.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||Ie(y)||c++>999?(e.exit("chunkString"),m(y)):(e.consume(y),f||(f=!nt(y)),y===92?g:p)}function g(y){return y===91||y===92||y===93?(e.consume(y),c++,p):p(y)}}function jA(e,t,n,r,i,o){let l;return c;function c(g){return g===34||g===39||g===40?(e.enter(r),e.enter(i),e.consume(g),e.exit(i),l=g===40?41:g,f):n(g)}function f(g){return g===l?(e.enter(i),e.consume(g),e.exit(i),e.exit(r),t):(e.enter(o),d(g))}function d(g){return g===l?(e.exit(o),f(l)):g===null?n(g):Ie(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),ut(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===l||g===null||Ie(g)?(e.exit("chunkString"),d(g)):(e.consume(g),g===92?p:m)}function p(g){return g===l||g===92?(e.consume(g),m):m(g)}}function nu(e,t){let n;return r;function r(i){return Ie(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):nt(i)?ut(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const T8={name:"definition",tokenize:M8},O8={partial:!0,tokenize:I8};function M8(e,t,n){const r=this;let i;return o;function o(y){return e.enter("definition"),l(y)}function l(y){return PA.call(r,e,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return i=zr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),f):n(y)}function f(y){return Et(y)?nu(e,d)(y):d(y)}function d(y){return LA(e,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function m(y){return e.attempt(O8,p,p)(y)}function p(y){return nt(y)?ut(e,g,"whitespace")(y):g(y)}function g(y){return y===null||Ie(y)?(e.exit("definition"),r.parser.defined.push(i),t(y)):n(y)}}function I8(e,t,n){return r;function r(c){return Et(c)?nu(e,i)(c):n(c)}function i(c){return jA(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function o(c){return nt(c)?ut(e,l,"whitespace")(c):l(c)}function l(c){return c===null||Ie(c)?t(c):n(c)}}const N8={name:"hardBreakEscape",tokenize:D8};function D8(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return Ie(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const z8={name:"headingAtx",resolve:L8,tokenize:P8};function L8(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},ir(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function P8(e,t,n){let r=0;return i;function i(m){return e.enter("atxHeading"),o(m)}function o(m){return e.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&r++<6?(e.consume(m),l):m===null||Et(m)?(e.exit("atxHeadingSequence"),c(m)):n(m)}function c(m){return m===35?(e.enter("atxHeadingSequence"),f(m)):m===null||Ie(m)?(e.exit("atxHeading"),t(m)):nt(m)?ut(e,c,"whitespace")(m):(e.enter("atxHeadingText"),d(m))}function f(m){return m===35?(e.consume(m),f):(e.exit("atxHeadingSequence"),c(m))}function d(m){return m===null||m===35||Et(m)?(e.exit("atxHeadingText"),c(m)):(e.consume(m),d)}}const j8=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],f1=["pre","script","style","textarea"],F8={concrete:!0,name:"htmlFlow",resolveTo:U8,tokenize:q8},$8={partial:!0,tokenize:V8},B8={partial:!0,tokenize:H8};function U8(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function q8(e,t,n){const r=this;let i,o,l,c,f;return d;function d(T){return m(T)}function m(T){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(T),p}function p(T){return T===33?(e.consume(T),g):T===47?(e.consume(T),o=!0,w):T===63?(e.consume(T),i=3,r.interrupt?t:z):kn(T)?(e.consume(T),l=String.fromCharCode(T),C):n(T)}function g(T){return T===45?(e.consume(T),i=2,y):T===91?(e.consume(T),i=5,c=0,S):kn(T)?(e.consume(T),i=4,r.interrupt?t:z):n(T)}function y(T){return T===45?(e.consume(T),r.interrupt?t:z):n(T)}function S(T){const ae="CDATA[";return T===ae.charCodeAt(c++)?(e.consume(T),c===ae.length?r.interrupt?t:Z:S):n(T)}function w(T){return kn(T)?(e.consume(T),l=String.fromCharCode(T),C):n(T)}function C(T){if(T===null||T===47||T===62||Et(T)){const ae=T===47,ce=l.toLowerCase();return!ae&&!o&&f1.includes(ce)?(i=1,r.interrupt?t(T):Z(T)):j8.includes(l.toLowerCase())?(i=6,ae?(e.consume(T),x):r.interrupt?t(T):Z(T)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(T):o?E(T):k(T))}return T===45||vn(T)?(e.consume(T),l+=String.fromCharCode(T),C):n(T)}function x(T){return T===62?(e.consume(T),r.interrupt?t:Z):n(T)}function E(T){return nt(T)?(e.consume(T),E):N(T)}function k(T){return T===47?(e.consume(T),N):T===58||T===95||kn(T)?(e.consume(T),I):nt(T)?(e.consume(T),k):N(T)}function I(T){return T===45||T===46||T===58||T===95||vn(T)?(e.consume(T),I):P(T)}function P(T){return T===61?(e.consume(T),R):nt(T)?(e.consume(T),P):k(T)}function R(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(e.consume(T),f=T,M):nt(T)?(e.consume(T),R):L(T)}function M(T){return T===f?(e.consume(T),f=null,j):T===null||Ie(T)?n(T):(e.consume(T),M)}function L(T){return T===null||T===34||T===39||T===47||T===60||T===61||T===62||T===96||Et(T)?P(T):(e.consume(T),L)}function j(T){return T===47||T===62||nt(T)?k(T):n(T)}function N(T){return T===62?(e.consume(T),U):n(T)}function U(T){return T===null||Ie(T)?Z(T):nt(T)?(e.consume(T),U):n(T)}function Z(T){return T===45&&i===2?(e.consume(T),$):T===60&&i===1?(e.consume(T),te):T===62&&i===4?(e.consume(T),D):T===63&&i===3?(e.consume(T),z):T===93&&i===5?(e.consume(T),se):Ie(T)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check($8,V,ee)(T)):T===null||Ie(T)?(e.exit("htmlFlowData"),ee(T)):(e.consume(T),Z)}function ee(T){return e.check(B8,re,V)(T)}function re(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),K}function K(T){return T===null||Ie(T)?ee(T):(e.enter("htmlFlowData"),Z(T))}function $(T){return T===45?(e.consume(T),z):Z(T)}function te(T){return T===47?(e.consume(T),l="",de):Z(T)}function de(T){if(T===62){const ae=l.toLowerCase();return f1.includes(ae)?(e.consume(T),D):Z(T)}return kn(T)&&l.length<8?(e.consume(T),l+=String.fromCharCode(T),de):Z(T)}function se(T){return T===93?(e.consume(T),z):Z(T)}function z(T){return T===62?(e.consume(T),D):T===45&&i===2?(e.consume(T),z):Z(T)}function D(T){return T===null||Ie(T)?(e.exit("htmlFlowData"),V(T)):(e.consume(T),D)}function V(T){return e.exit("htmlFlow"),t(T)}}function H8(e,t,n){const r=this;return i;function i(l){return Ie(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o):n(l)}function o(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}function V8(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Ru,t,n)}}const K8={name:"htmlText",tokenize:G8};function G8(e,t,n){const r=this;let i,o,l;return c;function c(z){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(z),f}function f(z){return z===33?(e.consume(z),d):z===47?(e.consume(z),P):z===63?(e.consume(z),k):kn(z)?(e.consume(z),L):n(z)}function d(z){return z===45?(e.consume(z),m):z===91?(e.consume(z),o=0,S):kn(z)?(e.consume(z),E):n(z)}function m(z){return z===45?(e.consume(z),y):n(z)}function p(z){return z===null?n(z):z===45?(e.consume(z),g):Ie(z)?(l=p,te(z)):(e.consume(z),p)}function g(z){return z===45?(e.consume(z),y):p(z)}function y(z){return z===62?$(z):z===45?g(z):p(z)}function S(z){const D="CDATA[";return z===D.charCodeAt(o++)?(e.consume(z),o===D.length?w:S):n(z)}function w(z){return z===null?n(z):z===93?(e.consume(z),C):Ie(z)?(l=w,te(z)):(e.consume(z),w)}function C(z){return z===93?(e.consume(z),x):w(z)}function x(z){return z===62?$(z):z===93?(e.consume(z),x):w(z)}function E(z){return z===null||z===62?$(z):Ie(z)?(l=E,te(z)):(e.consume(z),E)}function k(z){return z===null?n(z):z===63?(e.consume(z),I):Ie(z)?(l=k,te(z)):(e.consume(z),k)}function I(z){return z===62?$(z):k(z)}function P(z){return kn(z)?(e.consume(z),R):n(z)}function R(z){return z===45||vn(z)?(e.consume(z),R):M(z)}function M(z){return Ie(z)?(l=M,te(z)):nt(z)?(e.consume(z),M):$(z)}function L(z){return z===45||vn(z)?(e.consume(z),L):z===47||z===62||Et(z)?j(z):n(z)}function j(z){return z===47?(e.consume(z),$):z===58||z===95||kn(z)?(e.consume(z),N):Ie(z)?(l=j,te(z)):nt(z)?(e.consume(z),j):$(z)}function N(z){return z===45||z===46||z===58||z===95||vn(z)?(e.consume(z),N):U(z)}function U(z){return z===61?(e.consume(z),Z):Ie(z)?(l=U,te(z)):nt(z)?(e.consume(z),U):j(z)}function Z(z){return z===null||z===60||z===61||z===62||z===96?n(z):z===34||z===39?(e.consume(z),i=z,ee):Ie(z)?(l=Z,te(z)):nt(z)?(e.consume(z),Z):(e.consume(z),re)}function ee(z){return z===i?(e.consume(z),i=void 0,K):z===null?n(z):Ie(z)?(l=ee,te(z)):(e.consume(z),ee)}function re(z){return z===null||z===34||z===39||z===60||z===61||z===96?n(z):z===47||z===62||Et(z)?j(z):(e.consume(z),re)}function K(z){return z===47||z===62||Et(z)?j(z):n(z)}function $(z){return z===62?(e.consume(z),e.exit("htmlTextData"),e.exit("htmlText"),t):n(z)}function te(z){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(z),e.exit("lineEnding"),de}function de(z){return nt(z)?ut(e,se,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):se(z)}function se(z){return e.enter("htmlTextData"),l(z)}}const ov={name:"labelEnd",resolveAll:J8,resolveTo:X8,tokenize:W8},Q8={tokenize:eH},Z8={tokenize:tH},Y8={tokenize:nH};function J8(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&ir(e,0,e.length,n),e}function X8(e,t){let n=e.length,r=0,i,o,l,c;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(l=n);const f={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[o][1].start},end:{...e[l][1].end}},m={type:"labelText",start:{...e[o+r+2][1].end},end:{...e[l-2][1].start}};return c=[["enter",f,t],["enter",d,t]],c=wr(c,e.slice(o+1,o+r+3)),c=wr(c,[["enter",m,t]]),c=wr(c,Gd(t.parser.constructs.insideSpan.null,e.slice(o+r+4,l-3),t)),c=wr(c,[["exit",m,t],e[l-2],e[l-1],["exit",d,t]]),c=wr(c,e.slice(l+1)),c=wr(c,[["exit",f,t]]),ir(e,o,e.length,c),e}function W8(e,t,n){const r=this;let i=r.events.length,o,l;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return c;function c(g){return o?o._inactive?p(g):(l=r.parser.defined.includes(zr(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),f):n(g)}function f(g){return g===40?e.attempt(Q8,m,l?m:p)(g):g===91?e.attempt(Z8,m,l?d:p)(g):l?m(g):p(g)}function d(g){return e.attempt(Y8,m,p)(g)}function m(g){return t(g)}function p(g){return o._balanced=!0,n(g)}}function eH(e,t,n){return r;function r(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),i}function i(p){return Et(p)?nu(e,o)(p):o(p)}function o(p){return p===41?m(p):LA(e,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return Et(p)?nu(e,f)(p):m(p)}function c(p){return n(p)}function f(p){return p===34||p===39||p===40?jA(e,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function d(p){return Et(p)?nu(e,m)(p):m(p)}function m(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):n(p)}}function tH(e,t,n){const r=this;return i;function i(c){return PA.call(r,e,o,l,"reference","referenceMarker","referenceString")(c)}function o(c){return r.parser.defined.includes(zr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(c):n(c)}function l(c){return n(c)}}function nH(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const rH={name:"labelStartImage",resolveAll:ov.resolveAll,tokenize:iH};function iH(e,t,n){const r=this;return i;function i(c){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(c),e.exit("labelImageMarker"),o}function o(c){return c===91?(e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):t(c)}}const sH={name:"labelStartLink",resolveAll:ov.resolveAll,tokenize:oH};function oH(e,t,n){const r=this;return i;function i(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),o}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const cg={name:"lineEnding",tokenize:aH};function aH(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ut(e,t,"linePrefix")}}const Of={name:"thematicBreak",tokenize:lH};function lH(e,t,n){let r=0,i;return o;function o(d){return e.enter("thematicBreak"),l(d)}function l(d){return i=d,c(d)}function c(d){return d===i?(e.enter("thematicBreakSequence"),f(d)):r>=3&&(d===null||Ie(d))?(e.exit("thematicBreak"),t(d)):n(d)}function f(d){return d===i?(e.consume(d),r++,f):(e.exit("thematicBreakSequence"),nt(d)?ut(e,c,"whitespace")(d):c(d))}}const Ln={continuation:{tokenize:dH},exit:pH,name:"list",tokenize:fH},uH={partial:!0,tokenize:mH},cH={partial:!0,tokenize:hH};function fH(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return c;function c(y){const S=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:Ty(y)){if(r.containerState.type||(r.containerState.type=S,e.enter(S,{_container:!0})),S==="listUnordered")return e.enter("listItemPrefix"),y===42||y===45?e.check(Of,n,d)(y):d(y);if(!r.interrupt||y===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),f(y)}return n(y)}function f(y){return Ty(y)&&++l<10?(e.consume(y),f):(!r.interrupt||l<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(e.exit("listItemValue"),d(y)):n(y)}function d(y){return e.enter("listItemMarker"),e.consume(y),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,e.check(Ru,r.interrupt?n:m,e.attempt(uH,g,p))}function m(y){return r.containerState.initialBlankLine=!0,o++,g(y)}function p(y){return nt(y)?(e.enter("listItemPrefixWhitespace"),e.consume(y),e.exit("listItemPrefixWhitespace"),g):n(y)}function g(y){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(y)}}function dH(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Ru,i,o);function i(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ut(e,t,"listItemIndent",r.containerState.size+1)(c)}function o(c){return r.containerState.furtherBlankLines||!nt(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(cH,t,l)(c))}function l(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,ut(e,e.attempt(Ln,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function hH(e,t,n){const r=this;return ut(e,i,"listItemIndent",r.containerState.size+1);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?t(o):n(o)}}function pH(e){e.exit(this.containerState.type)}function mH(e,t,n){const r=this;return ut(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const l=r.events[r.events.length-1];return!nt(o)&&l&&l[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const d1={name:"setextUnderline",resolveTo:gH,tokenize:yH};function gH(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const l={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",l,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end={...e[o][1].end}):e[r][1]=l,e.push(["exit",l,t]),e}function yH(e,t,n){const r=this;let i;return o;function o(d){let m=r.events.length,p;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){p=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(e.enter("setextHeadingLine"),i=d,l(d)):n(d)}function l(d){return e.enter("setextHeadingLineSequence"),c(d)}function c(d){return d===i?(e.consume(d),c):(e.exit("setextHeadingLineSequence"),nt(d)?ut(e,f,"lineSuffix")(d):f(d))}function f(d){return d===null||Ie(d)?(e.exit("setextHeadingLine"),t(d)):n(d)}}const vH={tokenize:bH};function bH(e){const t=this,n=e.attempt(Ru,r,e.attempt(this.parser.constructs.flowInitial,i,ut(e,e.attempt(this.parser.constructs.flow,i,e.attempt(C8,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const SH={resolveAll:$A()},wH=FA("string"),_H=FA("text");function FA(e){return{resolveAll:$A(e==="text"?xH:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,l,c);return l;function l(m){return d(m)?o(m):c(m)}function c(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),f}function f(m){return d(m)?(n.exit("data"),o(m)):(n.consume(m),f)}function d(m){if(m===null)return!0;const p=i[m];let g=-1;if(p)for(;++g<p.length;){const y=p[g];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function $A(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function xH(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,l=-1,c=0,f;for(;o--;){const d=i[o];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(d===-2)f=!0,c++;else if(d!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(c=0),c){const d={type:n===e.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:r.start._bufferIndex+l,_index:r.start._index+o,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(e.splice(n,0,["enter",d,t],["exit",d,t]),n+=2)}n++}return e}const CH={42:Ln,43:Ln,45:Ln,48:Ln,49:Ln,50:Ln,51:Ln,52:Ln,53:Ln,54:Ln,55:Ln,56:Ln,57:Ln,62:IA},EH={91:T8},RH={[-2]:ug,[-1]:ug,32:ug},kH={35:z8,42:Of,45:[d1,Of],60:F8,61:d1,95:Of,96:c1,126:c1},AH={38:DA,92:NA},TH={[-5]:cg,[-4]:cg,[-3]:cg,33:rH,38:DA,42:Oy,60:[s8,K8],91:sH,92:[N8,NA],93:ov,95:Oy,96:v8},OH={null:[Oy,SH]},MH={null:[42,95]},IH={null:[]},NH=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:MH,contentInitial:EH,disable:IH,document:CH,flow:kH,flowInitial:RH,insideSpan:OH,string:AH,text:TH},Symbol.toStringTag,{value:"Module"}));function DH(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let l=[],c=[];const f={attempt:M(P),check:M(R),consume:E,enter:k,exit:I,interrupt:M(R,{interrupt:!0})},d={code:null,containerState:{},defineSkip:w,events:[],now:S,parser:e,previous:null,sliceSerialize:g,sliceStream:y,write:p};let m=t.tokenize.call(d,f);return t.resolveAll&&o.push(t),d;function p(U){return l=wr(l,U),C(),l[l.length-1]!==null?[]:(L(t,0),d.events=Gd(o,d.events,d),d.events)}function g(U,Z){return LH(y(U),Z)}function y(U){return zH(l,U)}function S(){const{_bufferIndex:U,_index:Z,line:ee,column:re,offset:K}=r;return{_bufferIndex:U,_index:Z,line:ee,column:re,offset:K}}function w(U){i[U.line]=U.column,N()}function C(){let U;for(;r._index<l.length;){const Z=l[r._index];if(typeof Z=="string")for(U=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===U&&r._bufferIndex<Z.length;)x(Z.charCodeAt(r._bufferIndex));else x(Z)}}function x(U){m=m(U)}function E(U){Ie(U)?(r.line++,r.column=1,r.offset+=U===-3?2:1,N()):U!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=U}function k(U,Z){const ee=Z||{};return ee.type=U,ee.start=S(),d.events.push(["enter",ee,d]),c.push(ee),ee}function I(U){const Z=c.pop();return Z.end=S(),d.events.push(["exit",Z,d]),Z}function P(U,Z){L(U,Z.from)}function R(U,Z){Z.restore()}function M(U,Z){return ee;function ee(re,K,$){let te,de,se,z;return Array.isArray(re)?V(re):"tokenize"in re?V([re]):D(re);function D(he){return ye;function ye(Re){const we=Re!==null&&he[Re],qe=Re!==null&&he.null,Je=[...Array.isArray(we)?we:we?[we]:[],...Array.isArray(qe)?qe:qe?[qe]:[]];return V(Je)(Re)}}function V(he){return te=he,de=0,he.length===0?$:T(he[de])}function T(he){return ye;function ye(Re){return z=j(),se=he,he.partial||(d.currentConstruct=he),he.name&&d.parser.constructs.disable.null.includes(he.name)?ce():he.tokenize.call(Z?Object.assign(Object.create(d),Z):d,f,ae,ce)(Re)}}function ae(he){return U(se,z),K}function ce(he){return z.restore(),++de<te.length?T(te[de]):$}}}function L(U,Z){U.resolveAll&&!o.includes(U)&&o.push(U),U.resolve&&ir(d.events,Z,d.events.length-Z,U.resolve(d.events.slice(Z),d)),U.resolveTo&&(d.events=U.resolveTo(d.events,d))}function j(){const U=S(),Z=d.previous,ee=d.currentConstruct,re=d.events.length,K=Array.from(c);return{from:re,restore:$};function $(){r=U,d.previous=Z,d.currentConstruct=ee,d.events.length=re,c=K,N()}}function N(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function zH(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let l;if(n===i)l=[e[n].slice(r,o)];else{if(l=e.slice(n,i),r>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(r):l.shift()}o>0&&l.push(e[i].slice(0,o))}return l}function LH(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&i)continue;l=" ";break}default:l=String.fromCharCode(o)}i=o===-2,r.push(l)}return r.join("")}function PH(e){const r={constructs:OA([NH,...(e||{}).extensions||[]]),content:i(X9),defined:[],document:i(e8),flow:i(vH),lazy:{},string:i(wH),text:i(_H)};return r;function i(o){return l;function l(c){return DH(r,o,c)}}}function jH(e){for(;!zA(e););return e}const h1=/[\0\t\n\r]/g;function FH(){let e=1,t="",n=!0,r;return i;function i(o,l,c){const f=[];let d,m,p,g,y;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(l||void 0).decode(o)),p=0,t="",n&&(o.charCodeAt(0)===65279&&p++,n=void 0);p<o.length;){if(h1.lastIndex=p,d=h1.exec(o),g=d&&d.index!==void 0?d.index:o.length,y=o.charCodeAt(g),!d){t=o.slice(p);break}if(y===10&&p===g&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),p<g&&(f.push(o.slice(p,g)),e+=g-p),y){case 0:{f.push(65533),e++;break}case 9:{for(m=Math.ceil(e/4)*4,f.push(-2);e++<m;)f.push(-1);break}case 10:{f.push(-4),e=1;break}default:r=!0,e=1}p=g+1}return c&&(r&&f.push(-5),t&&f.push(t),f.push(null)),f}}const $H=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function BH(e){return e.replace($H,UH)}function UH(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return MA(n.slice(o?2:1),o?16:10)}return sv(n)||e}const BA={}.hasOwnProperty;function qH(e,t,n){return typeof t!="string"&&(n=t,t=void 0),HH(n)(jH(PH(n).document().write(FH()(e,t,!0))))}function HH(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(gt),autolinkProtocol:j,autolinkEmail:j,atxHeading:o(Xe),blockQuote:o(qe),characterEscape:j,characterReference:j,codeFenced:o(Je),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o(Je,l),codeText:o(Ue,l),codeTextData:j,data:j,codeFlowValue:j,definition:o(ot),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(Qe),hardBreakEscape:o(ct),hardBreakTrailing:o(ct),htmlFlow:o(je,l),htmlFlowData:j,htmlText:o(je,l),htmlTextData:j,image:o(Ve),label:l,link:o(gt),listItem:o(ge),listItemValue:g,listOrdered:o(ft,p),listUnordered:o(ft),paragraph:o(Fe),reference:T,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(Xe),strong:o(be),thematicBreak:o(De)},exit:{atxHeading:f(),atxHeadingSequence:P,autolink:f(),autolinkEmail:we,autolinkProtocol:Re,blockQuote:f(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:ce,characterReferenceMarkerNumeric:ce,characterReferenceValue:he,characterReference:ye,codeFenced:f(C),codeFencedFence:w,codeFencedFenceInfo:y,codeFencedFenceMeta:S,codeFlowValue:N,codeIndented:f(x),codeText:f(K),codeTextData:N,data:N,definition:f(),definitionDestinationString:I,definitionLabelString:E,definitionTitleString:k,emphasis:f(),hardBreakEscape:f(Z),hardBreakTrailing:f(Z),htmlFlow:f(ee),htmlFlowData:N,htmlText:f(re),htmlTextData:N,image:f(te),label:se,labelText:de,lineEnding:U,link:f($),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:ae,resourceDestinationString:z,resourceTitleString:D,resource:V,setextHeading:f(L),setextHeadingLineSequence:M,setextHeadingText:R,strong:f(),thematicBreak:f()}};UA(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(X){let ue={type:"root",children:[]};const Se={stack:[ue],tokenStack:[],config:t,enter:c,exit:d,buffer:l,resume:m,data:n},_e=[];let ve=-1;for(;++ve<X.length;)if(X[ve][1].type==="listOrdered"||X[ve][1].type==="listUnordered")if(X[ve][0]==="enter")_e.push(ve);else{const Me=_e.pop();ve=i(X,Me,ve)}for(ve=-1;++ve<X.length;){const Me=t[X[ve][0]];BA.call(Me,X[ve][1].type)&&Me[X[ve][1].type].call(Object.assign({sliceSerialize:X[ve][2].sliceSerialize},Se),X[ve][1])}if(Se.tokenStack.length>0){const Me=Se.tokenStack[Se.tokenStack.length-1];(Me[1]||p1).call(Se,void 0,Me[0])}for(ue.position={start:Ji(X.length>0?X[0][1].start:{line:1,column:1,offset:0}),end:Ji(X.length>0?X[X.length-2][1].end:{line:1,column:1,offset:0})},ve=-1;++ve<t.transforms.length;)ue=t.transforms[ve](ue)||ue;return ue}function i(X,ue,Se){let _e=ue-1,ve=-1,Me=!1,dt,We,Ze,zt;for(;++_e<=Se;){const lt=X[_e];switch(lt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{lt[0]==="enter"?ve++:ve--,zt=void 0;break}case"lineEndingBlank":{lt[0]==="enter"&&(dt&&!zt&&!ve&&!Ze&&(Ze=_e),zt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:zt=void 0}if(!ve&&lt[0]==="enter"&&lt[1].type==="listItemPrefix"||ve===-1&&lt[0]==="exit"&&(lt[1].type==="listUnordered"||lt[1].type==="listOrdered")){if(dt){let qn=_e;for(We=void 0;qn--;){const ke=X[qn];if(ke[1].type==="lineEnding"||ke[1].type==="lineEndingBlank"){if(ke[0]==="exit")continue;We&&(X[We][1].type="lineEndingBlank",Me=!0),ke[1].type="lineEnding",We=qn}else if(!(ke[1].type==="linePrefix"||ke[1].type==="blockQuotePrefix"||ke[1].type==="blockQuotePrefixWhitespace"||ke[1].type==="blockQuoteMarker"||ke[1].type==="listItemIndent"))break}Ze&&(!We||Ze<We)&&(dt._spread=!0),dt.end=Object.assign({},We?X[We][1].start:lt[1].end),X.splice(We||_e,0,["exit",dt,lt[2]]),_e++,Se++}if(lt[1].type==="listItemPrefix"){const qn={type:"listItem",_spread:!1,start:Object.assign({},lt[1].start),end:void 0};dt=qn,X.splice(_e,0,["enter",qn,lt[2]]),_e++,Se++,Ze=void 0,zt=!0}}}return X[ue][1]._spread=Me,Se}function o(X,ue){return Se;function Se(_e){c.call(this,X(_e),_e),ue&&ue.call(this,_e)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(X,ue,Se){this.stack[this.stack.length-1].children.push(X),this.stack.push(X),this.tokenStack.push([ue,Se||void 0]),X.position={start:Ji(ue.start),end:void 0}}function f(X){return ue;function ue(Se){X&&X.call(this,Se),d.call(this,Se)}}function d(X,ue){const Se=this.stack.pop(),_e=this.tokenStack.pop();if(_e)_e[0].type!==X.type&&(ue?ue.call(this,X,_e[0]):(_e[1]||p1).call(this,X,_e[0]));else throw new Error("Cannot close `"+X.type+"` ("+tu({start:X.start,end:X.end})+"): its not open");Se.position.end=Ji(X.end)}function m(){return iv(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(X){if(this.data.expectingFirstListItemValue){const ue=this.stack[this.stack.length-2];ue.start=Number.parseInt(this.sliceSerialize(X),10),this.data.expectingFirstListItemValue=void 0}}function y(){const X=this.resume(),ue=this.stack[this.stack.length-1];ue.lang=X}function S(){const X=this.resume(),ue=this.stack[this.stack.length-1];ue.meta=X}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const X=this.resume(),ue=this.stack[this.stack.length-1];ue.value=X.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const X=this.resume(),ue=this.stack[this.stack.length-1];ue.value=X.replace(/(\r?\n|\r)$/g,"")}function E(X){const ue=this.resume(),Se=this.stack[this.stack.length-1];Se.label=ue,Se.identifier=zr(this.sliceSerialize(X)).toLowerCase()}function k(){const X=this.resume(),ue=this.stack[this.stack.length-1];ue.title=X}function I(){const X=this.resume(),ue=this.stack[this.stack.length-1];ue.url=X}function P(X){const ue=this.stack[this.stack.length-1];if(!ue.depth){const Se=this.sliceSerialize(X).length;ue.depth=Se}}function R(){this.data.setextHeadingSlurpLineEnding=!0}function M(X){const ue=this.stack[this.stack.length-1];ue.depth=this.sliceSerialize(X).codePointAt(0)===61?1:2}function L(){this.data.setextHeadingSlurpLineEnding=void 0}function j(X){const Se=this.stack[this.stack.length-1].children;let _e=Se[Se.length-1];(!_e||_e.type!=="text")&&(_e=me(),_e.position={start:Ji(X.start),end:void 0},Se.push(_e)),this.stack.push(_e)}function N(X){const ue=this.stack.pop();ue.value+=this.sliceSerialize(X),ue.position.end=Ji(X.end)}function U(X){const ue=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Se=ue.children[ue.children.length-1];Se.position.end=Ji(X.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ue.type)&&(j.call(this,X),N.call(this,X))}function Z(){this.data.atHardBreak=!0}function ee(){const X=this.resume(),ue=this.stack[this.stack.length-1];ue.value=X}function re(){const X=this.resume(),ue=this.stack[this.stack.length-1];ue.value=X}function K(){const X=this.resume(),ue=this.stack[this.stack.length-1];ue.value=X}function $(){const X=this.stack[this.stack.length-1];if(this.data.inReference){const ue=this.data.referenceType||"shortcut";X.type+="Reference",X.referenceType=ue,delete X.url,delete X.title}else delete X.identifier,delete X.label;this.data.referenceType=void 0}function te(){const X=this.stack[this.stack.length-1];if(this.data.inReference){const ue=this.data.referenceType||"shortcut";X.type+="Reference",X.referenceType=ue,delete X.url,delete X.title}else delete X.identifier,delete X.label;this.data.referenceType=void 0}function de(X){const ue=this.sliceSerialize(X),Se=this.stack[this.stack.length-2];Se.label=BH(ue),Se.identifier=zr(ue).toLowerCase()}function se(){const X=this.stack[this.stack.length-1],ue=this.resume(),Se=this.stack[this.stack.length-1];if(this.data.inReference=!0,Se.type==="link"){const _e=X.children;Se.children=_e}else Se.alt=ue}function z(){const X=this.resume(),ue=this.stack[this.stack.length-1];ue.url=X}function D(){const X=this.resume(),ue=this.stack[this.stack.length-1];ue.title=X}function V(){this.data.inReference=void 0}function T(){this.data.referenceType="collapsed"}function ae(X){const ue=this.resume(),Se=this.stack[this.stack.length-1];Se.label=ue,Se.identifier=zr(this.sliceSerialize(X)).toLowerCase(),this.data.referenceType="full"}function ce(X){this.data.characterReferenceType=X.type}function he(X){const ue=this.sliceSerialize(X),Se=this.data.characterReferenceType;let _e;Se?(_e=MA(ue,Se==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):_e=sv(ue);const ve=this.stack[this.stack.length-1];ve.value+=_e}function ye(X){const ue=this.stack.pop();ue.position.end=Ji(X.end)}function Re(X){N.call(this,X);const ue=this.stack[this.stack.length-1];ue.url=this.sliceSerialize(X)}function we(X){N.call(this,X);const ue=this.stack[this.stack.length-1];ue.url="mailto:"+this.sliceSerialize(X)}function qe(){return{type:"blockquote",children:[]}}function Je(){return{type:"code",lang:null,meta:null,value:""}}function Ue(){return{type:"inlineCode",value:""}}function ot(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Qe(){return{type:"emphasis",children:[]}}function Xe(){return{type:"heading",depth:0,children:[]}}function ct(){return{type:"break"}}function je(){return{type:"html",value:""}}function Ve(){return{type:"image",title:null,url:"",alt:null}}function gt(){return{type:"link",title:null,url:"",children:[]}}function ft(X){return{type:"list",ordered:X.type==="listOrdered",start:null,spread:X._spread,children:[]}}function ge(X){return{type:"listItem",spread:X._spread,checked:null,children:[]}}function Fe(){return{type:"paragraph",children:[]}}function be(){return{type:"strong",children:[]}}function me(){return{type:"text",value:""}}function De(){return{type:"thematicBreak"}}}function Ji(e){return{line:e.line,column:e.column,offset:e.offset}}function UA(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?UA(e,r):VH(e,r)}}function VH(e,t){let n;for(n in t)if(BA.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function p1(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+tu({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+tu({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+tu({start:t.start,end:t.end})+") is still open")}function KH(e){const t=this;t.parser=n;function n(r){return qH(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function GH(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function QH(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function ZH(e,t){const n=t.value?t.value+`
`:"",r={},i=t.lang?t.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}function YH(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function JH(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function XH(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Ca(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let l,c=e.footnoteCounts.get(r);c===void 0?(c=0,e.footnoteOrder.push(r),l=e.footnoteOrder.length):l=o+1,c+=1,e.footnoteCounts.set(r,c);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,f);const d={type:"element",tagName:"sup",properties:{},children:[f]};return e.patch(t,d),e.applyData(t,d)}function WH(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function eV(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function qA(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const l=i[i.length-1];return l&&l.type==="text"?l.value+=r:i.push({type:"text",value:r}),i}function tV(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return qA(e,t);const i={src:Ca(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function nV(e,t){const n={src:Ca(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function rV(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function iV(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return qA(e,t);const i={href:Ca(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function sV(e,t){const n={href:Ca(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function oV(e,t,n){const r=e.all(t),i=n?aV(n):HA(t),o={},l=[];if(typeof t.checked=="boolean"){const m=r[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const m=r[c];(i||c!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!i?l.push(...m.children):l.push(m)}const f=r[r.length-1];f&&(i||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:o,children:l};return e.patch(t,d),e.applyData(t,d)}function aV(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=HA(n[r])}return t}function HA(e){const t=e.spread;return t??e.children.length>1}function lV(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const l=r[i];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function uV(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function cV(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function fV(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function dV(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],l),i.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},c=ev(t.children[1]),f=xA(t.children[t.children.length-1]);c&&f&&(l.position={start:c,end:f}),i.push(l)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function hV(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,c=l?l.length:t.children.length;let f=-1;const d=[];for(;++f<c;){const p=t.children[f],g={},y=l?l[f]:void 0;y&&(g.align=y);let S={type:"element",tagName:o,properties:g,children:[]};p&&(S.children=e.all(p),e.patch(p,S),S=e.applyData(p,S)),d.push(S)}const m={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(t,m),e.applyData(t,m)}function pV(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const m1=9,g1=32;function mV(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(y1(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(y1(t.slice(i),i>0,!1)),o.join("")}function y1(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===m1||o===g1;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===m1||o===g1;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function gV(e,t){const n={type:"text",value:mV(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function yV(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const vV={blockquote:GH,break:QH,code:ZH,delete:YH,emphasis:JH,footnoteReference:XH,heading:WH,html:eV,imageReference:tV,image:nV,inlineCode:rV,linkReference:iV,link:sV,listItem:oV,list:lV,paragraph:uV,root:cV,strong:fV,table:dV,tableCell:pV,tableRow:hV,text:gV,thematicBreak:yV,toml:df,yaml:df,definition:df,footnoteDefinition:df};function df(){}const VA=-1,Qd=0,ru=1,md=2,av=3,lv=4,uv=5,cv=6,KA=7,GA=8,v1=typeof self=="object"?self:globalThis,bV=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,l]=t[i];switch(o){case Qd:case VA:return n(l,i);case ru:{const c=n([],i);for(const f of l)c.push(r(f));return c}case md:{const c=n({},i);for(const[f,d]of l)c[r(f)]=r(d);return c}case av:return n(new Date(l),i);case lv:{const{source:c,flags:f}=l;return n(new RegExp(c,f),i)}case uv:{const c=n(new Map,i);for(const[f,d]of l)c.set(r(f),r(d));return c}case cv:{const c=n(new Set,i);for(const f of l)c.add(r(f));return c}case KA:{const{name:c,message:f}=l;return n(new v1[c](f),i)}case GA:return n(BigInt(l),i);case"BigInt":return n(Object(BigInt(l)),i);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:c}=new Uint8Array(l);return n(new DataView(c),l)}}return n(new v1[o](l),i)};return r},b1=e=>bV(new Map,e)(0),Go="",{toString:SV}={},{keys:wV}=Object,kl=e=>{const t=typeof e;if(t!=="object"||!e)return[Qd,t];const n=SV.call(e).slice(8,-1);switch(n){case"Array":return[ru,Go];case"Object":return[md,Go];case"Date":return[av,Go];case"RegExp":return[lv,Go];case"Map":return[uv,Go];case"Set":return[cv,Go];case"DataView":return[ru,n]}return n.includes("Array")?[ru,n]:n.includes("Error")?[KA,n]:[md,n]},hf=([e,t])=>e===Qd&&(t==="function"||t==="symbol"),_V=(e,t,n,r)=>{const i=(l,c)=>{const f=r.push(l)-1;return n.set(c,f),f},o=l=>{if(n.has(l))return n.get(l);let[c,f]=kl(l);switch(c){case Qd:{let m=l;switch(f){case"bigint":c=GA,m=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+f);m=null;break;case"undefined":return i([VA],l)}return i([c,m],l)}case ru:{if(f){let g=l;return f==="DataView"?g=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(g=new Uint8Array(l)),i([f,[...g]],l)}const m=[],p=i([c,m],l);for(const g of l)m.push(o(g));return p}case md:{if(f)switch(f){case"BigInt":return i([f,l.toString()],l);case"Boolean":case"Number":case"String":return i([f,l.valueOf()],l)}if(t&&"toJSON"in l)return o(l.toJSON());const m=[],p=i([c,m],l);for(const g of wV(l))(e||!hf(kl(l[g])))&&m.push([o(g),o(l[g])]);return p}case av:return i([c,l.toISOString()],l);case lv:{const{source:m,flags:p}=l;return i([c,{source:m,flags:p}],l)}case uv:{const m=[],p=i([c,m],l);for(const[g,y]of l)(e||!(hf(kl(g))||hf(kl(y))))&&m.push([o(g),o(y)]);return p}case cv:{const m=[],p=i([c,m],l);for(const g of l)(e||!hf(kl(g)))&&m.push(o(g));return p}}const{message:d}=l;return i([c,{name:f,message:d}],l)};return o},S1=(e,{json:t,lossy:n}={})=>{const r=[];return _V(!(t||n),!!t,new Map,r)(e),r},gd=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?b1(S1(e,t)):structuredClone(e):(e,t)=>b1(S1(e,t));function xV(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function CV(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function EV(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||xV,r=e.options.footnoteBackLabel||CV,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let f=-1;for(;++f<e.footnoteOrder.length;){const d=e.footnoteById.get(e.footnoteOrder[f]);if(!d)continue;const m=e.all(d),p=String(d.identifier).toUpperCase(),g=Ca(p.toLowerCase());let y=0;const S=[],w=e.footnoteCounts.get(p);for(;w!==void 0&&++y<=w;){S.length>0&&S.push({type:"text",value:" "});let E=typeof n=="string"?n:n(f,y);typeof E=="string"&&(E={type:"text",value:E}),S.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+g+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,y),className:["data-footnote-backref"]},children:Array.isArray(E)?E:[E]})}const C=m[m.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const E=C.children[C.children.length-1];E&&E.type==="text"?E.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...S)}else m.push(...S);const x={type:"element",tagName:"li",properties:{id:t+"fn-"+g},children:e.wrap(m,!0)};e.patch(d,x),c.push(x)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...gd(l),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(c,!0)},{type:"text",value:`
`}]}}const Zd=(function(e){if(e==null)return TV;if(typeof e=="function")return Yd(e);if(typeof e=="object")return Array.isArray(e)?RV(e):kV(e);if(typeof e=="string")return AV(e);throw new Error("Expected function, string, or object as test")});function RV(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Zd(e[n]);return Yd(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function kV(e){const t=e;return Yd(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function AV(e){return Yd(t);function t(n){return n&&n.type===e}}function Yd(e){return t;function t(n,r,i){return!!(OV(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function TV(){return!0}function OV(e){return e!==null&&typeof e=="object"&&"type"in e}const QA=[],MV=!0,My=!1,IV="skip";function ZA(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=Zd(i),l=r?-1:1;c(e,void 0,[])();function c(f,d,m){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(f.type+(y?"<"+y+">":""))+")"})}return g;function g(){let y=QA,S,w,C;if((!t||o(f,d,m[m.length-1]||void 0))&&(y=NV(n(f,m)),y[0]===My))return y;if("children"in f&&f.children){const x=f;if(x.children&&y[0]!==IV)for(w=(r?x.children.length:-1)+l,C=m.concat(x);w>-1&&w<x.children.length;){const E=x.children[w];if(S=c(E,w,C)(),S[0]===My)return S;w=typeof S[1]=="number"?S[1]:w+l}}return y}}}function NV(e){return Array.isArray(e)?e:typeof e=="number"?[MV,e]:e==null?QA:[e]}function fv(e,t,n,r){let i,o,l;typeof t=="function"&&typeof n!="function"?(o=void 0,l=t,i=n):(o=t,l=n,i=r),ZA(e,o,c,i);function c(f,d){const m=d[d.length-1],p=m?m.children.indexOf(f):void 0;return l(f,p,m)}}const Iy={}.hasOwnProperty,DV={};function zV(e,t){const n=t||DV,r=new Map,i=new Map,o=new Map,l={...vV,...n.handlers},c={all:d,applyData:PV,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:l,one:f,options:n,patch:LV,wrap:FV};return fv(e,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?r:i,g=String(m.identifier).toUpperCase();p.has(g)||p.set(g,m)}}),c;function f(m,p){const g=m.type,y=c.handlers[g];if(Iy.call(c.handlers,g)&&y)return y(c,m,p);if(c.options.passThrough&&c.options.passThrough.includes(g)){if("children"in m){const{children:w,...C}=m,x=gd(C);return x.children=c.all(m),x}return gd(m)}return(c.options.unknownHandler||jV)(c,m,p)}function d(m){const p=[];if("children"in m){const g=m.children;let y=-1;for(;++y<g.length;){const S=c.one(g[y],m);if(S){if(y&&g[y-1].type==="break"&&(!Array.isArray(S)&&S.type==="text"&&(S.value=w1(S.value)),!Array.isArray(S)&&S.type==="element")){const w=S.children[0];w&&w.type==="text"&&(w.value=w1(w.value))}Array.isArray(S)?p.push(...S):p.push(S)}}}return p}}function LV(e,t){e.position&&(t.position=C9(e))}function PV(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&o&&Object.assign(n.properties,gd(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function jV(e,t){const n=t.data||{},r="value"in t&&!(Iy.call(n,"hProperties")||Iy.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function FV(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function w1(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function _1(e,t){const n=zV(e,t),r=n.one(e,void 0),i=EV(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function $V(e,t){return e&&"run"in e?async function(n,r){const i=_1(n,{file:r,...t});await e.run(i,r)}:function(n,r){return _1(n,{file:r,...e||t})}}function x1(e){if(e)throw e}var fg,C1;function BV(){if(C1)return fg;C1=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(d){return typeof Array.isArray=="function"?Array.isArray(d):t.call(d)==="[object Array]"},o=function(d){if(!d||t.call(d)!=="[object Object]")return!1;var m=e.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&e.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!p)return!1;var g;for(g in d);return typeof g>"u"||e.call(d,g)},l=function(d,m){n&&m.name==="__proto__"?n(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},c=function(d,m){if(m==="__proto__")if(e.call(d,m)){if(r)return r(d,m).value}else return;return d[m]};return fg=function f(){var d,m,p,g,y,S,w=arguments[0],C=1,x=arguments.length,E=!1;for(typeof w=="boolean"&&(E=w,w=arguments[1]||{},C=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});C<x;++C)if(d=arguments[C],d!=null)for(m in d)p=c(w,m),g=c(d,m),w!==g&&(E&&g&&(o(g)||(y=i(g)))?(y?(y=!1,S=p&&i(p)?p:[]):S=p&&o(p)?p:{},l(w,{name:m,newValue:f(E,S,g)})):typeof g<"u"&&l(w,{name:m,newValue:g}));return w},fg}var UV=BV();const dg=Ly(UV);function Ny(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function qV(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const l=i.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...i);function c(f,...d){const m=e[++o];let p=-1;if(f){l(f);return}for(;++p<i.length;)(d[p]===null||d[p]===void 0)&&(d[p]=i[p]);i=d,m?HV(m,c)(...d):l(null,...d)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function HV(e,t){let n;return r;function r(...l){const c=e.length>l.length;let f;c&&l.push(i);try{f=e.apply(this,l)}catch(d){const m=d;if(c&&n)throw m;return i(m)}c||(f&&f.then&&typeof f.then=="function"?f.then(o,i):f instanceof Error?i(f):o(f))}function i(l,...c){n||(n=!0,t(l,...c))}function o(l){i(null,l)}}const Ur={basename:VV,dirname:KV,extname:GV,join:QV,sep:"/"};function VV(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');ku(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let l=-1,c=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else l<0&&(o=!0,l=i+1),c>-1&&(e.codePointAt(i)===t.codePointAt(c--)?c<0&&(r=i):(c=-1,r=l));return n===r?r=l:r<0&&(r=e.length),e.slice(n,r)}function KV(e){if(ku(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function GV(e){ku(e);let t=e.length,n=-1,r=0,i=-1,o=0,l;for(;t--;){const c=e.codePointAt(t);if(c===47){if(l){r=t+1;break}continue}n<0&&(l=!0,n=t+1),c===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function QV(...e){let t=-1,n;for(;++t<e.length;)ku(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":ZV(n)}function ZV(e){ku(e);const t=e.codePointAt(0)===47;let n=YV(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function YV(e,t){let n="",r=0,i=-1,o=0,l=-1,c,f;for(;++l<=e.length;){if(l<e.length)c=e.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(i===l-1||o===1))if(i!==l-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),i=l,o=0;continue}}else if(n.length>0){n="",r=0,i=l,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,l):n=e.slice(i+1,l),r=l-i-1;i=l,o=0}else c===46&&o>-1?o++:o=-1}return n}function ku(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const JV={cwd:XV};function XV(){return"/"}function Dy(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function WV(e){if(typeof e=="string")e=new URL(e);else if(!Dy(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return e7(e)}function e7(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const hg=["history","path","basename","stem","extname","dirname"];class YA{constructor(t){let n;t?Dy(t)?n={path:t}:typeof t=="string"||t7(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":JV.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<hg.length;){const o=hg[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)hg.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Ur.basename(this.path):void 0}set basename(t){mg(t,"basename"),pg(t,"basename"),this.path=Ur.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Ur.dirname(this.path):void 0}set dirname(t){E1(this.basename,"dirname"),this.path=Ur.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Ur.extname(this.path):void 0}set extname(t){if(pg(t,"extname"),E1(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ur.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Dy(t)&&(t=WV(t)),mg(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Ur.basename(this.path,this.extname):void 0}set stem(t){mg(t,"stem"),pg(t,"stem"),this.path=Ur.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new bn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function pg(e,t){if(e&&e.includes(Ur.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ur.sep+"`")}function mg(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function E1(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function t7(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const n7=(function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),r7={}.hasOwnProperty;class dv extends n7{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=qV()}copy(){const t=new dv;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(dg(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(vg("data",this.frozen),this.namespace[t]=n,this):r7.call(this.namespace,t)&&this.namespace[t]||void 0:t?(vg("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=pf(t),r=this.parser||this.Parser;return gg("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),gg("process",this.parser||this.Parser),yg("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,l){const c=pf(t),f=r.parse(c);r.run(f,c,function(m,p,g){if(m||!p||!g)return d(m);const y=p,S=r.stringify(y,g);o7(S)?g.value=S:g.result=S,d(m,g)});function d(m,p){m||!p?l(m):o?o(p):n(void 0,p)}}}processSync(t){let n=!1,r;return this.freeze(),gg("processSync",this.parser||this.Parser),yg("processSync",this.compiler||this.Compiler),this.process(t,i),k1("processSync","process",n),r;function i(o,l){n=!0,x1(o),r=l}}run(t,n,r){R1(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(l,c){const f=pf(n);i.run(t,f,d);function d(m,p,g){const y=p||t;m?c(m):l?l(y):r(void 0,y,g)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),k1("runSync","run",r),i;function o(l,c){x1(l),i=c,r=!0}}stringify(t,n){this.freeze();const r=pf(n),i=this.compiler||this.Compiler;return yg("stringify",i),R1(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(vg("use",this.frozen),t!=null)if(typeof t=="function")f(t,n);else if(typeof t=="object")Array.isArray(t)?c(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...p]=d;f(m,p)}else l(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function l(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(d.plugins),d.settings&&(i.settings=dg(!0,i.settings,d.settings))}function c(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const p=d[m];o(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,m){let p=-1,g=-1;for(;++p<r.length;)if(r[p][0]===d){g=p;break}if(g===-1)r.push([d,...m]);else if(m.length>0){let[y,...S]=m;const w=r[g][1];Ny(w)&&Ny(y)&&(y=dg(!0,w,y)),r[g]=[d,y,...S]}}}}const i7=new dv().freeze();function gg(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function yg(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function vg(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function R1(e){if(!Ny(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function k1(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function pf(e){return s7(e)?e:new YA(e)}function s7(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function o7(e){return typeof e=="string"||a7(e)}function a7(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const l7="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",A1=[],T1={allowDangerousHtml:!0},u7=/^(https?|ircs?|mailto|xmpp)$/i,c7=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function f7(e){const t=d7(e),n=h7(e);return p7(t.runSync(t.parse(n),n),e)}function d7(e){const t=e.rehypePlugins||A1,n=e.remarkPlugins||A1,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...T1}:T1;return i7().use(KH).use(n).use($V,r).use(t)}function h7(e){const t=e.children||"",n=new YA;return typeof t=="string"&&(n.value=t),n}function p7(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,o=t.disallowedElements,l=t.skipHtml,c=t.unwrapDisallowed,f=t.urlTransform||m7;for(const m of c7)Object.hasOwn(t,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+l7+m.id,void 0);return fv(e,d),T9(e,{Fragment:O.Fragment,components:i,ignoreInvalidStyle:!0,jsx:O.jsx,jsxs:O.jsxs,passKeys:!0,passNode:!0});function d(m,p,g){if(m.type==="raw"&&g&&typeof p=="number")return l?g.children.splice(p,1):g.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let y;for(y in lg)if(Object.hasOwn(lg,y)&&Object.hasOwn(m.properties,y)){const S=m.properties[y],w=lg[y];(w===null||w.includes(m.tagName))&&(m.properties[y]=f(String(S||""),y,m))}}if(m.type==="element"){let y=n?!n.includes(m.tagName):o?o.includes(m.tagName):!1;if(!y&&r&&typeof p=="number"&&(y=!r(m,p,g)),y&&g&&typeof p=="number")return c&&m.children?g.children.splice(p,1,...m.children):g.children.splice(p,1),p}}}function m7(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||u7.test(e.slice(0,t))?e:""}function O1(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function g7(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function JA(e,t,n){const i=Zd((n||{}).ignore||[]),o=y7(t);let l=-1;for(;++l<o.length;)ZA(e,"text",c);function c(d,m){let p=-1,g;for(;++p<m.length;){const y=m[p],S=g?g.children:void 0;if(i(y,S?S.indexOf(y):void 0,g))return;g=y}if(g)return f(d,m)}function f(d,m){const p=m[m.length-1],g=o[l][0],y=o[l][1];let S=0;const C=p.children.indexOf(d);let x=!1,E=[];g.lastIndex=0;let k=g.exec(d.value);for(;k;){const I=k.index,P={index:k.index,input:k.input,stack:[...m,d]};let R=y(...k,P);if(typeof R=="string"&&(R=R.length>0?{type:"text",value:R}:void 0),R===!1?g.lastIndex=I+1:(S!==I&&E.push({type:"text",value:d.value.slice(S,I)}),Array.isArray(R)?E.push(...R):R&&E.push(R),S=I+k[0].length,x=!0),!g.global)break;k=g.exec(d.value)}return x?(S<d.value.length&&E.push({type:"text",value:d.value.slice(S)}),p.children.splice(C,1,...E)):E=[d],C+E.length}}function y7(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([v7(i[0]),b7(i[1])])}return t}function v7(e){return typeof e=="string"?new RegExp(g7(e),"g"):e}function b7(e){return typeof e=="function"?e:function(){return e}}const bg="phrasing",Sg=["autolink","link","image","label"];function S7(){return{transforms:[k7],enter:{literalAutolink:_7,literalAutolinkEmail:wg,literalAutolinkHttp:wg,literalAutolinkWww:wg},exit:{literalAutolink:R7,literalAutolinkEmail:E7,literalAutolinkHttp:x7,literalAutolinkWww:C7}}}function w7(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:bg,notInConstruct:Sg},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:bg,notInConstruct:Sg},{character:":",before:"[ps]",after:"\\/",inConstruct:bg,notInConstruct:Sg}]}}function _7(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function wg(e){this.config.enter.autolinkProtocol.call(this,e)}function x7(e){this.config.exit.autolinkProtocol.call(this,e)}function C7(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function E7(e){this.config.exit.autolinkEmail.call(this,e)}function R7(e){this.exit(e)}function k7(e){JA(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,A7],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),T7]],{ignore:["link","linkReference"]})}function A7(e,t,n,r,i){let o="";if(!XA(i)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!O7(n)))return!1;const l=M7(n+r);if(!l[0])return!1;const c={type:"link",title:null,url:o+t+l[0],children:[{type:"text",value:t+l[0]}]};return l[1]?[c,{type:"text",value:l[1]}]:c}function T7(e,t,n,r){return!XA(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function O7(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function M7(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=O1(e,"(");let o=O1(e,")");for(;r!==-1&&i>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}function XA(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Ws(n)||Kd(n))&&(!t||n!==47)}WA.peek=$7;function I7(){this.buffer()}function N7(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function D7(){this.buffer()}function z7(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function L7(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function P7(e){this.exit(e)}function j7(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function F7(e){this.exit(e)}function $7(){return"["}function WA(e,t,n,r){const i=n.createTracker(r);let o=i.move("[^");const l=n.enter("footnoteReference"),c=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),c(),l(),o+=i.move("]"),o}function B7(){return{enter:{gfmFootnoteCallString:I7,gfmFootnoteCall:N7,gfmFootnoteDefinitionLabelString:D7,gfmFootnoteDefinition:z7},exit:{gfmFootnoteCallString:L7,gfmFootnoteCall:P7,gfmFootnoteDefinitionLabelString:j7,gfmFootnoteDefinition:F7}}}function U7(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:WA},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,l){const c=o.createTracker(l);let f=c.move("[^");const d=o.enter("footnoteDefinition"),m=o.enter("label");return f+=c.move(o.safe(o.associationId(r),{before:f,after:"]"})),m(),f+=c.move("]:"),r.children&&r.children.length>0&&(c.shift(4),f+=c.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,c.current()),t?eT:q7))),d(),f}}function q7(e,t,n){return t===0?e:eT(e,t,n)}function eT(e,t,n){return(n?"":"    ")+e}const H7=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];tT.peek=Z7;function V7(){return{canContainEols:["delete"],enter:{strikethrough:G7},exit:{strikethrough:Q7}}}function K7(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:H7}],handlers:{delete:tT}}}function G7(e){this.enter({type:"delete",children:[]},e)}function Q7(e){this.exit(e)}function tT(e,t,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let l=i.move("~~");return l+=n.containerPhrasing(e,{...i.current(),before:l,after:"~"}),l+=i.move("~~"),o(),l}function Z7(){return"~"}function Y7(e){return e.length}function J7(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||Y7,o=[],l=[],c=[],f=[];let d=0,m=-1;for(;++m<e.length;){const w=[],C=[];let x=-1;for(e[m].length>d&&(d=e[m].length);++x<e[m].length;){const E=X7(e[m][x]);if(n.alignDelimiters!==!1){const k=i(E);C[x]=k,(f[x]===void 0||k>f[x])&&(f[x]=k)}w.push(E)}l[m]=w,c[m]=C}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<d;)o[p]=M1(r[p]);else{const w=M1(r);for(;++p<d;)o[p]=w}p=-1;const g=[],y=[];for(;++p<d;){const w=o[p];let C="",x="";w===99?(C=":",x=":"):w===108?C=":":w===114&&(x=":");let E=n.alignDelimiters===!1?1:Math.max(1,f[p]-C.length-x.length);const k=C+"-".repeat(E)+x;n.alignDelimiters!==!1&&(E=C.length+E+x.length,E>f[p]&&(f[p]=E),y[p]=E),g[p]=k}l.splice(1,0,g),c.splice(1,0,y),m=-1;const S=[];for(;++m<l.length;){const w=l[m],C=c[m];p=-1;const x=[];for(;++p<d;){const E=w[p]||"";let k="",I="";if(n.alignDelimiters!==!1){const P=f[p]-(C[p]||0),R=o[p];R===114?k=" ".repeat(P):R===99?P%2?(k=" ".repeat(P/2+.5),I=" ".repeat(P/2-.5)):(k=" ".repeat(P/2),I=k):I=" ".repeat(P)}n.delimiterStart!==!1&&!p&&x.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&E==="")&&(n.delimiterStart!==!1||p)&&x.push(" "),n.alignDelimiters!==!1&&x.push(k),x.push(E),n.alignDelimiters!==!1&&x.push(I),n.padding!==!1&&x.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&x.push("|")}S.push(n.delimiterEnd===!1?x.join("").replace(/ +$/,""):x.join(""))}return S.join(`
`)}function X7(e){return e==null?"":String(e)}function M1(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function W7(e,t,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const l=n.indentLines(n.containerFlow(e,o.current()),eK);return i(),l}function eK(e,t,n){return">"+(n?"":" ")+e}function tK(e,t){return I1(e,t.inConstruct,!0)&&!I1(e,t.notInConstruct,!1)}function I1(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function N1(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&tK(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function nK(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,l=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>l&&(l=o):o=1,i=r+t.length,r=n.indexOf(t,i);return l}function rK(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function iK(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function sK(e,t,n,r){const i=iK(n),o=e.value||"",l=i==="`"?"GraveAccent":"Tilde";if(rK(e,n)){const p=n.enter("codeIndented"),g=n.indentLines(o,oK);return p(),g}const c=n.createTracker(r),f=i.repeat(Math.max(nK(o,i)+1,3)),d=n.enter("codeFenced");let m=c.move(f);if(e.lang){const p=n.enter(`codeFencedLang${l}`);m+=c.move(n.safe(e.lang,{before:m,after:" ",encode:["`"],...c.current()})),p()}if(e.lang&&e.meta){const p=n.enter(`codeFencedMeta${l}`);m+=c.move(" "),m+=c.move(n.safe(e.meta,{before:m,after:`
`,encode:["`"],...c.current()})),p()}return m+=c.move(`
`),o&&(m+=c.move(o+`
`)),m+=c.move(f),d(),m}function oK(e,t,n){return(n?"":"    ")+e}function hv(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function aK(e,t,n,r){const i=hv(n),o=i==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const f=n.createTracker(r);let d=f.move("[");return d+=f.move(n.safe(n.associationId(e),{before:d,after:"]",...f.current()})),d+=f.move("]: "),c(),!e.url||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(e.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=n.enter("destinationRaw"),d+=f.move(n.safe(e.url,{before:d,after:e.title?" ":`
`,...f.current()}))),c(),e.title&&(c=n.enter(`title${o}`),d+=f.move(" "+i),d+=f.move(n.safe(e.title,{before:d,after:i,...f.current()})),d+=f.move(i),c()),l(),d}function lK(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function mu(e){return"&#x"+e.toString(16).toUpperCase()+";"}function yd(e,t,n){const r=pa(e),i=pa(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}nT.peek=uK;function nT(e,t,n,r){const i=lK(n),o=n.enter("emphasis"),l=n.createTracker(r),c=l.move(i);let f=l.move(n.containerPhrasing(e,{after:i,before:c,...l.current()}));const d=f.charCodeAt(0),m=yd(r.before.charCodeAt(r.before.length-1),d,i);m.inside&&(f=mu(d)+f.slice(1));const p=f.charCodeAt(f.length-1),g=yd(r.after.charCodeAt(0),p,i);g.inside&&(f=f.slice(0,-1)+mu(p));const y=l.move(i);return o(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},c+f+y}function uK(e,t,n){return n.options.emphasis||"*"}function cK(e,t){let n=!1;return fv(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,My}),!!((!e.depth||e.depth<3)&&iv(e)&&(t.options.setext||n))}function fK(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(cK(e,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),g=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return p(),m(),g+`
`+(i===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const l="#".repeat(i),c=n.enter("headingAtx"),f=n.enter("phrasing");o.move(l+" ");let d=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(d)&&(d=mu(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,n.options.closeAtx&&(d+=" "+l),f(),c(),d}rT.peek=dK;function rT(e){return e.value||""}function dK(){return"<"}iT.peek=hK;function iT(e,t,n,r){const i=hv(n),o=i==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const f=n.createTracker(r);let d=f.move("![");return d+=f.move(n.safe(e.alt,{before:d,after:"]",...f.current()})),d+=f.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(e.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=n.enter("destinationRaw"),d+=f.move(n.safe(e.url,{before:d,after:e.title?" ":")",...f.current()}))),c(),e.title&&(c=n.enter(`title${o}`),d+=f.move(" "+i),d+=f.move(n.safe(e.title,{before:d,after:i,...f.current()})),d+=f.move(i),c()),d+=f.move(")"),l(),d}function hK(){return"!"}sT.peek=pK;function sT(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(r);let f=c.move("![");const d=n.safe(e.alt,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(e),{before:f,after:"]",...c.current()});return l(),n.stack=m,o(),i==="full"||!d||d!==p?f+=c.move(p+"]"):i==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function pK(){return"!"}oT.peek=mK;function oT(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const l=n.unsafe[o],c=n.compilePattern(l);let f;if(l.atBreak)for(;f=c.exec(r);){let d=f.index;r.charCodeAt(d)===10&&r.charCodeAt(d-1)===13&&d--,r=r.slice(0,d)+" "+r.slice(f.index+1)}}return i+r+i}function mK(){return"`"}function aT(e,t){const n=iv(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}lT.peek=gK;function lT(e,t,n,r){const i=hv(n),o=i==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let c,f;if(aT(e,n)){const m=n.stack;n.stack=[],c=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(e,{before:p,after:">",...l.current()})),p+=l.move(">"),c(),n.stack=m,p}c=n.enter("link"),f=n.enter("label");let d=l.move("[");return d+=l.move(n.containerPhrasing(e,{before:d,after:"](",...l.current()})),d+=l.move("]("),f(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(f=n.enter("destinationLiteral"),d+=l.move("<"),d+=l.move(n.safe(e.url,{before:d,after:">",...l.current()})),d+=l.move(">")):(f=n.enter("destinationRaw"),d+=l.move(n.safe(e.url,{before:d,after:e.title?" ":")",...l.current()}))),f(),e.title&&(f=n.enter(`title${o}`),d+=l.move(" "+i),d+=l.move(n.safe(e.title,{before:d,after:i,...l.current()})),d+=l.move(i),f()),d+=l.move(")"),c(),d}function gK(e,t,n){return aT(e,n)?"<":"["}uT.peek=yK;function uT(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(r);let f=c.move("[");const d=n.containerPhrasing(e,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(e),{before:f,after:"]",...c.current()});return l(),n.stack=m,o(),i==="full"||!d||d!==p?f+=c.move(p+"]"):i==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function yK(){return"["}function pv(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function vK(e){const t=pv(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function bK(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function cT(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function SK(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let l=e.ordered?bK(n):pv(n);const c=e.ordered?l==="."?")":".":vK(n);let f=t&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!e.ordered){const m=e.children?e.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),cT(n)===l&&m){let p=-1;for(;++p<e.children.length;){const g=e.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=c),n.bulletCurrent=l;const d=n.containerFlow(e,r);return n.bulletLastUsed=l,n.bulletCurrent=o,i(),d}function wK(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function _K(e,t,n,r){const i=wK(n);let o=n.bulletCurrent||pv(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let l=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(r);c.move(o+" ".repeat(l-o.length)),c.shift(l);const f=n.enter("listItem"),d=n.indentLines(n.containerFlow(e,c.current()),m);return f(),d;function m(p,g,y){return g?(y?"":" ".repeat(l))+p:(y?o:o+" ".repeat(l-o.length))+p}}function xK(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),l=n.containerPhrasing(e,r);return o(),i(),l}const CK=Zd(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function EK(e,t,n,r){return(e.children.some(function(l){return CK(l)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function RK(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}fT.peek=kK;function fT(e,t,n,r){const i=RK(n),o=n.enter("strong"),l=n.createTracker(r),c=l.move(i+i);let f=l.move(n.containerPhrasing(e,{after:i,before:c,...l.current()}));const d=f.charCodeAt(0),m=yd(r.before.charCodeAt(r.before.length-1),d,i);m.inside&&(f=mu(d)+f.slice(1));const p=f.charCodeAt(f.length-1),g=yd(r.after.charCodeAt(0),p,i);g.inside&&(f=f.slice(0,-1)+mu(p));const y=l.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},c+f+y}function kK(e,t,n){return n.options.strong||"*"}function AK(e,t,n,r){return n.safe(e.value,r)}function TK(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function OK(e,t,n){const r=(cT(n)+(n.options.ruleSpaces?" ":"")).repeat(TK(n));return n.options.ruleSpaces?r.slice(0,-1):r}const dT={blockquote:W7,break:N1,code:sK,definition:aK,emphasis:nT,hardBreak:N1,heading:fK,html:rT,image:iT,imageReference:sT,inlineCode:oT,link:lT,linkReference:uT,list:SK,listItem:_K,paragraph:xK,root:EK,strong:fT,text:AK,thematicBreak:OK};function MK(){return{enter:{table:IK,tableData:D1,tableHeader:D1,tableRow:DK},exit:{codeText:zK,table:NK,tableData:_g,tableHeader:_g,tableRow:_g}}}function IK(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function NK(e){this.exit(e),this.data.inTable=void 0}function DK(e){this.enter({type:"tableRow",children:[]},e)}function _g(e){this.exit(e)}function D1(e){this.enter({type:"tableCell",children:[]},e)}function zK(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,LK));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function LK(e,t){return t==="|"?t:e}function PK(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:l,tableCell:f,tableRow:c}};function l(y,S,w,C){return d(m(y,w,C),y.align)}function c(y,S,w,C){const x=p(y,w,C),E=d([x]);return E.slice(0,E.indexOf(`
`))}function f(y,S,w,C){const x=w.enter("tableCell"),E=w.enter("phrasing"),k=w.containerPhrasing(y,{...C,before:o,after:o});return E(),x(),k}function d(y,S){return J7(y,{align:S,alignDelimiters:r,padding:n,stringLength:i})}function m(y,S,w){const C=y.children;let x=-1;const E=[],k=S.enter("table");for(;++x<C.length;)E[x]=p(C[x],S,w);return k(),E}function p(y,S,w){const C=y.children;let x=-1;const E=[],k=S.enter("tableRow");for(;++x<C.length;)E[x]=f(C[x],y,S,w);return k(),E}function g(y,S,w){let C=dT.inlineCode(y,S,w);return w.stack.includes("tableCell")&&(C=C.replace(/\|/g,"\\$&")),C}}function jK(){return{exit:{taskListCheckValueChecked:z1,taskListCheckValueUnchecked:z1,paragraph:$K}}}function FK(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:BK}}}function z1(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function $K(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let o=-1,l;for(;++o<i.length;){const c=i[o];if(c.type==="paragraph"){l=c;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function BK(e,t,n,r){const i=e.children[0],o=typeof e.checked=="boolean"&&i&&i.type==="paragraph",l="["+(e.checked?"x":" ")+"] ",c=n.createTracker(r);o&&c.move(l);let f=dT.listItem(e,t,n,{...r,...c.current()});return o&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),f;function d(m){return m+l}}function UK(){return[S7(),B7(),V7(),MK(),jK()]}function qK(e){return{extensions:[w7(),U7(e),K7(),PK(e),FK()]}}const HK={tokenize:YK,partial:!0},hT={tokenize:JK,partial:!0},pT={tokenize:XK,partial:!0},mT={tokenize:WK,partial:!0},VK={tokenize:eG,partial:!0},gT={name:"wwwAutolink",tokenize:QK,previous:vT},yT={name:"protocolAutolink",tokenize:ZK,previous:bT},xi={name:"emailAutolink",tokenize:GK,previous:ST},Yr={};function KK(){return{text:Yr}}let Ls=48;for(;Ls<123;)Yr[Ls]=xi,Ls++,Ls===58?Ls=65:Ls===91&&(Ls=97);Yr[43]=xi;Yr[45]=xi;Yr[46]=xi;Yr[95]=xi;Yr[72]=[xi,yT];Yr[104]=[xi,yT];Yr[87]=[xi,gT];Yr[119]=[xi,gT];function GK(e,t,n){const r=this;let i,o;return l;function l(p){return!zy(p)||!ST.call(r,r.previous)||mv(r.events)?n(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),c(p))}function c(p){return zy(p)?(e.consume(p),c):p===64?(e.consume(p),f):n(p)}function f(p){return p===46?e.check(VK,m,d)(p):p===45||p===95||vn(p)?(o=!0,e.consume(p),f):m(p)}function d(p){return e.consume(p),i=!0,f}function m(p){return o&&i&&kn(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):n(p)}}function QK(e,t,n){const r=this;return i;function i(l){return l!==87&&l!==119||!vT.call(r,r.previous)||mv(r.events)?n(l):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(HK,e.attempt(hT,e.attempt(pT,o),n),n)(l))}function o(l){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(l)}}function ZK(e,t,n){const r=this;let i="",o=!1;return l;function l(p){return(p===72||p===104)&&bT.call(r,r.previous)&&!mv(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(p),e.consume(p),c):n(p)}function c(p){if(kn(p)&&i.length<5)return i+=String.fromCodePoint(p),e.consume(p),c;if(p===58){const g=i.toLowerCase();if(g==="http"||g==="https")return e.consume(p),f}return n(p)}function f(p){return p===47?(e.consume(p),o?d:(o=!0,f)):n(p)}function d(p){return p===null||pd(p)||Et(p)||Ws(p)||Kd(p)?n(p):e.attempt(hT,e.attempt(pT,m),n)(p)}function m(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function YK(e,t,n){let r=0;return i;function i(l){return(l===87||l===119)&&r<3?(r++,e.consume(l),i):l===46&&r===3?(e.consume(l),o):n(l)}function o(l){return l===null?n(l):t(l)}}function JK(e,t,n){let r,i,o;return l;function l(d){return d===46||d===95?e.check(mT,f,c)(d):d===null||Et(d)||Ws(d)||d!==45&&Kd(d)?f(d):(o=!0,e.consume(d),l)}function c(d){return d===95?r=!0:(i=r,r=void 0),e.consume(d),l}function f(d){return i||r||!o?n(d):t(d)}}function XK(e,t){let n=0,r=0;return i;function i(l){return l===40?(n++,e.consume(l),i):l===41&&r<n?o(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?e.check(mT,t,o)(l):l===null||Et(l)||Ws(l)?t(l):(e.consume(l),i)}function o(l){return l===41&&r++,e.consume(l),i}}function WK(e,t,n){return r;function r(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(e.consume(c),r):c===38?(e.consume(c),o):c===93?(e.consume(c),i):c===60||c===null||Et(c)||Ws(c)?t(c):n(c)}function i(c){return c===null||c===40||c===91||Et(c)||Ws(c)?t(c):r(c)}function o(c){return kn(c)?l(c):n(c)}function l(c){return c===59?(e.consume(c),r):kn(c)?(e.consume(c),l):n(c)}}function eG(e,t,n){return r;function r(o){return e.consume(o),i}function i(o){return vn(o)?n(o):t(o)}}function vT(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Et(e)}function bT(e){return!kn(e)}function ST(e){return!(e===47||zy(e))}function zy(e){return e===43||e===45||e===46||e===95||vn(e)}function mv(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const tG={tokenize:uG,partial:!0};function nG(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:oG,continuation:{tokenize:aG},exit:lG}},text:{91:{name:"gfmFootnoteCall",tokenize:sG},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:rG,resolveTo:iG}}}}function rG(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;i--;){const f=r.events[i][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return c;function c(f){if(!l||!l._balanced)return n(f);const d=zr(r.sliceSerialize({start:l.end,end:r.now()}));return d.codePointAt(0)!==94||!o.includes(d.slice(1))?n(f):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),t(f))}}function iG(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},c=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",l,t],["exit",l,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...c),e}function sG(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,l;return c;function c(p){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(e.enter("gfmFootnoteCallMarker"),e.consume(p),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",d)}function d(p){if(o>999||p===93&&!l||p===null||p===91||Et(p))return n(p);if(p===93){e.exit("chunkString");const g=e.exit("gfmFootnoteCallString");return i.includes(zr(r.sliceSerialize(g)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(p)}return Et(p)||(l=!0),o++,e.consume(p),p===92?m:d}function m(p){return p===91||p===92||p===93?(e.consume(p),o++,d):d(p)}}function oG(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,l=0,c;return f;function f(S){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(S),e.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(S){return S===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(S),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",m):n(S)}function m(S){if(l>999||S===93&&!c||S===null||S===91||Et(S))return n(S);if(S===93){e.exit("chunkString");const w=e.exit("gfmFootnoteDefinitionLabelString");return o=zr(r.sliceSerialize(w)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(S),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),g}return Et(S)||(c=!0),l++,e.consume(S),S===92?p:m}function p(S){return S===91||S===92||S===93?(e.consume(S),l++,m):m(S)}function g(S){return S===58?(e.enter("definitionMarker"),e.consume(S),e.exit("definitionMarker"),i.includes(o)||i.push(o),ut(e,y,"gfmFootnoteDefinitionWhitespace")):n(S)}function y(S){return t(S)}}function aG(e,t,n){return e.check(Ru,t,e.attempt(tG,t,n))}function lG(e){e.exit("gfmFootnoteDefinition")}function uG(e,t,n){const r=this;return ut(e,i,"gfmFootnoteDefinitionIndent",5);function i(o){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?t(o):n(o)}}function cG(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(l,c){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let d=f;for(;d--;)if(l[d][0]==="exit"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[d][1].end.offset-l[d][1].start.offset){l[f][1].type="strikethroughSequence",l[d][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[d][1].start),end:Object.assign({},l[f][1].end)},p={type:"strikethroughText",start:Object.assign({},l[d][1].end),end:Object.assign({},l[f][1].start)},g=[["enter",m,c],["enter",l[d][1],c],["exit",l[d][1],c],["enter",p,c]],y=c.parser.constructs.insideSpan.null;y&&ir(g,g.length,0,Gd(y,l.slice(d+1,f),c)),ir(g,g.length,0,[["exit",p,c],["enter",l[f][1],c],["exit",l[f][1],c],["exit",m,c]]),ir(l,d-1,f-d+3,g),f=d+g.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function o(l,c,f){const d=this.previous,m=this.events;let p=0;return g;function g(S){return d===126&&m[m.length-1][1].type!=="characterEscape"?f(S):(l.enter("strikethroughSequenceTemporary"),y(S))}function y(S){const w=pa(d);if(S===126)return p>1?f(S):(l.consume(S),p++,y);if(p<2&&!n)return f(S);const C=l.exit("strikethroughSequenceTemporary"),x=pa(S);return C._open=!x||x===2&&!!w,C._close=!w||w===2&&!!x,c(S)}}}class fG{constructor(){this.map=[]}add(t,n,r){dG(this,t,n,r)}consume(t){if(this.map.sort(function(o,l){return o[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const o of i)t.push(o);i=r.pop()}this.map.length=0}}function dG(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function hG(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function pG(){return{flow:{null:{name:"table",tokenize:mG,resolveAll:gG}}}}function mG(e,t,n){const r=this;let i=0,o=0,l;return c;function c(N){let U=r.events.length-1;for(;U>-1;){const re=r.events[U][1].type;if(re==="lineEnding"||re==="linePrefix")U--;else break}const Z=U>-1?r.events[U][1].type:null,ee=Z==="tableHead"||Z==="tableRow"?R:f;return ee===R&&r.parser.lazy[r.now().line]?n(N):ee(N)}function f(N){return e.enter("tableHead"),e.enter("tableRow"),d(N)}function d(N){return N===124||(l=!0,o+=1),m(N)}function m(N){return N===null?n(N):Ie(N)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),y):n(N):nt(N)?ut(e,m,"whitespace")(N):(o+=1,l&&(l=!1,i+=1),N===124?(e.enter("tableCellDivider"),e.consume(N),e.exit("tableCellDivider"),l=!0,m):(e.enter("data"),p(N)))}function p(N){return N===null||N===124||Et(N)?(e.exit("data"),m(N)):(e.consume(N),N===92?g:p)}function g(N){return N===92||N===124?(e.consume(N),p):p(N)}function y(N){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(N):(e.enter("tableDelimiterRow"),l=!1,nt(N)?ut(e,S,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):S(N))}function S(N){return N===45||N===58?C(N):N===124?(l=!0,e.enter("tableCellDivider"),e.consume(N),e.exit("tableCellDivider"),w):P(N)}function w(N){return nt(N)?ut(e,C,"whitespace")(N):C(N)}function C(N){return N===58?(o+=1,l=!0,e.enter("tableDelimiterMarker"),e.consume(N),e.exit("tableDelimiterMarker"),x):N===45?(o+=1,x(N)):N===null||Ie(N)?I(N):P(N)}function x(N){return N===45?(e.enter("tableDelimiterFiller"),E(N)):P(N)}function E(N){return N===45?(e.consume(N),E):N===58?(l=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(N),e.exit("tableDelimiterMarker"),k):(e.exit("tableDelimiterFiller"),k(N))}function k(N){return nt(N)?ut(e,I,"whitespace")(N):I(N)}function I(N){return N===124?S(N):N===null||Ie(N)?!l||i!==o?P(N):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(N)):P(N)}function P(N){return n(N)}function R(N){return e.enter("tableRow"),M(N)}function M(N){return N===124?(e.enter("tableCellDivider"),e.consume(N),e.exit("tableCellDivider"),M):N===null||Ie(N)?(e.exit("tableRow"),t(N)):nt(N)?ut(e,M,"whitespace")(N):(e.enter("data"),L(N))}function L(N){return N===null||N===124||Et(N)?(e.exit("data"),M(N)):(e.consume(N),N===92?j:L)}function j(N){return N===92||N===124?(e.consume(N),L):L(N)}}function gG(e,t){let n=-1,r=!0,i=0,o=[0,0,0,0],l=[0,0,0,0],c=!1,f=0,d,m,p;const g=new fG;for(;++n<e.length;){const y=e[n],S=y[1];y[0]==="enter"?S.type==="tableHead"?(c=!1,f!==0&&(L1(g,t,f,d,m),m=void 0,f=0),d={type:"table",start:Object.assign({},S.start),end:Object.assign({},S.end)},g.add(n,0,[["enter",d,t]])):S.type==="tableRow"||S.type==="tableDelimiterRow"?(r=!0,p=void 0,o=[0,0,0,0],l=[0,n+1,0,0],c&&(c=!1,m={type:"tableBody",start:Object.assign({},S.start),end:Object.assign({},S.end)},g.add(n,0,[["enter",m,t]])),i=S.type==="tableDelimiterRow"?2:m?3:1):i&&(S.type==="data"||S.type==="tableDelimiterMarker"||S.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(o[1]!==0&&(l[0]=l[1],p=mf(g,t,o,i,void 0,p),o=[0,0,0,0]),l[2]=n)):S.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(l[0]=l[1],p=mf(g,t,o,i,void 0,p)),o=l,l=[o[1],n,0,0])):S.type==="tableHead"?(c=!0,f=n):S.type==="tableRow"||S.type==="tableDelimiterRow"?(f=n,o[1]!==0?(l[0]=l[1],p=mf(g,t,o,i,n,p)):l[1]!==0&&(p=mf(g,t,l,i,n,p)),i=0):i&&(S.type==="data"||S.type==="tableDelimiterMarker"||S.type==="tableDelimiterFiller")&&(l[3]=n)}for(f!==0&&L1(g,t,f,d,m),g.consume(t.events),n=-1;++n<t.events.length;){const y=t.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=hG(t.events,n))}return e}function mf(e,t,n,r,i,o){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(o.end=Object.assign({},Xo(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const f=Xo(t.events,n[1]);if(o={type:l,start:Object.assign({},f),end:Object.assign({},f)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const d=Xo(t.events,n[2]),m=Xo(t.events,n[3]),p={type:c,start:Object.assign({},d),end:Object.assign({},m)};if(e.add(n[2],0,[["enter",p,t]]),r!==2){const g=t.events[n[2]],y=t.events[n[3]];if(g[1].end=Object.assign({},y[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const S=n[2]+1,w=n[3]-n[2]-1;e.add(S,w,[])}}e.add(n[3]+1,0,[["exit",p,t]])}return i!==void 0&&(o.end=Object.assign({},Xo(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function L1(e,t,n,r,i){const o=[],l=Xo(t.events,n);i&&(i.end=Object.assign({},l),o.push(["exit",i,t])),r.end=Object.assign({},l),o.push(["exit",r,t]),e.add(n+1,0,o)}function Xo(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const yG={name:"tasklistCheck",tokenize:bG};function vG(){return{text:{91:yG}}}function bG(e,t,n){const r=this;return i;function i(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(f):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(f),e.exit("taskListCheckMarker"),o)}function o(f){return Et(f)?(e.enter("taskListCheckValueUnchecked"),e.consume(f),e.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(e.enter("taskListCheckValueChecked"),e.consume(f),e.exit("taskListCheckValueChecked"),l):n(f)}function l(f){return f===93?(e.enter("taskListCheckMarker"),e.consume(f),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),c):n(f)}function c(f){return Ie(f)?t(f):nt(f)?e.check({tokenize:SG},t,n)(f):n(f)}}function SG(e,t,n){return ut(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function wG(e){return OA([KK(),nG(),cG(e),pG(),vG()])}const _G={};function xG(e){const t=this,n=e||_G,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(wG(n)),o.push(UK()),l.push(qK(n))}function CG(e){JA(e,[/\r?\n|\r/g,EG])}function EG(){return{type:"break"}}function RG(){return function(e){CG(e)}}const kG={pre:({children:e})=>O.jsx(O.Fragment,{children:e}),li:({children:e,...t})=>O.jsx("li",{className:"py-0.5 ml-0",...t,children:e}),ul:({children:e,...t})=>O.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...t,children:e}),ol:({children:e,...t})=>O.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...t,children:e}),strong:({children:e,...t})=>O.jsx("span",{className:"font-semibold",...t,children:e}),a:({children:e,href:t,...n})=>{let r=t||"";return r&&!r.startsWith("http")&&!r.startsWith("#")&&(r=`https://${r}`),O.jsx("a",{className:"text-sky-400 hover:underline",href:r,target:"_blank",rel:"noreferrer noopener",...n,children:e})},h1:({children:e,...t})=>O.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...t,children:e}),h2:({children:e,...t})=>O.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...t,children:e}),h3:({children:e,...t})=>O.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...t,children:e}),h4:({children:e,...t})=>O.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...t,children:e}),h5:({children:e,...t})=>O.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...t,children:e}),h6:({children:e,...t})=>O.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...t,children:e}),p:({children:e,...t})=>O.jsx("p",{className:"my-2 leading-relaxed",...t,children:e}),table:({children:e,...t})=>O.jsx("div",{className:"overflow-x-auto my-3",children:O.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...t,children:e})}),thead:({children:e,...t})=>O.jsx("thead",{className:"bg-neutral-700",...t,children:e}),tbody:({children:e,...t})=>O.jsx("tbody",{...t,children:e}),tr:({children:e,...t})=>O.jsx("tr",{className:"border-b border-neutral-600",...t,children:e}),th:({children:e,...t})=>O.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...t,children:e}),td:({children:e,...t})=>O.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...t,children:e}),blockquote:({children:e,...t})=>O.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...t,children:e}),hr:({...e})=>O.jsx("hr",{className:"my-4 border-neutral-600",...e}),code({children:e,className:t,...n}){const r=/language-(\w+)/.exec(t||""),i=String(e).replace(/\n$/,""),o=i.includes(`
`);if(!r&&!o)return O.jsx("code",{...n,className:`${t||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:e});const l=r?.[1]||"text";return O.jsxs("div",{className:"my-3",children:[O.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:O.jsx("span",{children:l})}),O.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:O.jsx("code",{className:"text-xs font-mono text-neutral-200",children:i})})]})}},AG=[xG,RG],TG=e=>{const t=_i.c(6),{children:n}=e;if(!n)return null;let r=n,i;if(t[0]!==r){r=r.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=/```\n(#{1,6}\s+)/gm,t[3]=l):l=t[3],i=r.replace(l,"```\n\n$1"),t[0]=r,t[1]=i,t[2]=r}else i=t[1],r=t[2];r=i;let o;return t[4]!==r?(o=O.jsx(f7,{remarkPlugins:AG,components:kG,children:r}),t[4]=r,t[5]=o):o=t[5],o},OG=H.memo(TG,(e,t)=>e.children===t.children);function MG(e){const t=_i.c(90),{isOpen:n,onClose:r,connection:i,database:o,table:l,currentQuery:c,queryResult:f,schema:d,setters:m}=e,[p,g]=H.useState(""),y=H.useRef(null),S=H.useRef(null),w=H.useRef(i?.id);let C;t[0]!==i||t[1]!==c||t[2]!==o||t[3]!==f||t[4]!==d||t[5]!==m||t[6]!==l?(C={connection:i,database:o,table:l,currentQuery:c,queryResult:f,schema:d,setters:m},t[0]=i,t[1]=c,t[2]=o,t[3]=f,t[4]=d,t[5]=m,t[6]=l,t[7]=C):C=t[7];const x=C;let E;t[8]!==x?(E=Wq(x),t[8]=x,t[9]=E):E=t[9];const k=E;let I;t[10]!==x?(I=e9(x),t[10]=x,t[11]=I):I=t[11];const P=I;let R;if(t[12]!==P||t[13]!==k){const ve=R$(),Me=E$(ve);R=Z5(dt=>A5({adapter:Me,messages:dt,tools:k,systemPrompts:[P],agentLoopStrategy:uR(10)})),t[12]=P,t[13]=k,t[14]=R}else R=t[14];const M=R;let L;t[15]!==M||t[16]!==k?(L={connection:M,tools:k},t[15]=M,t[16]=k,t[17]=L):L=t[17];const{messages:j,sendMessage:N,isLoading:U,stop:Z,clear:ee}=Y5(L);let re;t[18]!==ee||t[19]!==i?.id?(re=()=>{w.current!==i?.id&&(ee(),w.current=i?.id)},t[18]=ee,t[19]=i?.id,t[20]=re):re=t[20];const K=i?.id;let $;t[21]!==ee||t[22]!==K?($=[K,ee],t[21]=ee,t[22]=K,t[23]=$):$=t[23],H.useEffect(re,$);let te;t[24]===Symbol.for("react.memo_cache_sentinel")?(te=()=>{y.current?.scrollIntoView({behavior:"smooth"})},t[24]=te):te=t[24];let de;t[25]!==j?(de=[j],t[25]=j,t[26]=de):de=t[26],H.useEffect(te,de);let se,z;t[27]!==n?(se=()=>{n&&S.current?.focus()},z=[n],t[27]=n,t[28]=se,t[29]=z):(se=t[28],z=t[29]),H.useEffect(se,z);let D;t[30]!==p||t[31]!==U||t[32]!==N?(D=ve=>{ve.preventDefault(),!(!p.trim()||U)&&(N(p.trim()),g(""))},t[30]=p,t[31]=U,t[32]=N,t[33]=D):D=t[33];const V=D;let T;t[34]!==V?(T=ve=>{ve.key==="Enter"&&!ve.shiftKey&&(ve.preventDefault(),V(ve))},t[34]=V,t[35]=T):T=t[35];const ae=T,ce=IG;let he;t[36]!==U||t[37]!==j?(he=(ve,Me)=>U&&ve.role==="assistant"&&Me===j.length-1,t[36]=U,t[37]=j,t[38]=he):he=t[38];const ye=he;if(!n)return null;let Re;t[39]===Symbol.for("react.memo_cache_sentinel")?(Re=O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(Ng,{size:16,className:"text-amber-500"}),O.jsx("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:GC.name})]}),t[39]=Re):Re=t[39];let we;t[40]===Symbol.for("react.memo_cache_sentinel")?(we=O.jsx(qf,{size:16}),t[40]=we):we=t[40];let qe;t[41]!==ee?(qe=O.jsx("button",{onClick:ee,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",title:"Clear chat",children:we}),t[41]=ee,t[42]=qe):qe=t[42];let Je;t[43]===Symbol.for("react.memo_cache_sentinel")?(Je=O.jsx(bE,{size:16}),t[43]=Je):Je=t[43];let Ue;t[44]!==r?(Ue=O.jsx("button",{onClick:r,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",children:Je}),t[44]=r,t[45]=Ue):Ue=t[45];let ot;t[46]!==qe||t[47]!==Ue?(ot=O.jsxs("div",{className:"shrink-0 h-12 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[Re,O.jsxs("div",{className:"flex items-center gap-1",children:[qe,Ue]})]}),t[46]=qe,t[47]=Ue,t[48]=ot):ot=t[48];let Qe;t[49]!==j.length?(Qe=j.length===0&&O.jsxs("div",{className:"text-center text-neutral-500 dark:text-neutral-400 text-sm py-8",children:[O.jsx(Ng,{size:24,className:"mx-auto mb-3 text-amber-500/50"}),O.jsx("p",{className:"mb-2",children:"Ask me to help with your SQL queries"}),O.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:`Examples: "Write a query to find all users created this month" or "What's wrong with my query?"`})]}),t[49]=j.length,t[50]=Qe):Qe=t[50];let Xe;if(t[51]!==ye||t[52]!==j){let ve;t[54]!==ye?(ve=(Me,dt)=>{const We=ce(Me);return O.jsx("div",{className:"space-y-3",children:(We||ye(Me,dt))&&O.jsx("div",{className:`text-sm ${Me.role==="user"?"bg-neutral-100 dark:bg-neutral-800 rounded-lg px-3 py-2":""}`,children:O.jsx("div",{className:Me.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300",children:Me.role==="assistant"?We?O.jsx(OG,{children:We}):ye(Me,dt)?O.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[O.jsx(Ig,{size:14,className:"animate-spin"}),"Thinking..."]}):null:O.jsx("span",{className:"whitespace-pre-wrap",children:We})})})},Me.id)},t[54]=ye,t[55]=ve):ve=t[55],Xe=j.map(ve),t[51]=ye,t[52]=j,t[53]=Xe}else Xe=t[53];let ct;t[56]!==U||t[57]!==j?(ct=U&&(j.length===0||j[j.length-1]?.role==="user")&&O.jsx("div",{className:"text-sm",children:O.jsx("div",{className:"text-neutral-800 dark:text-neutral-200",children:O.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[O.jsx(Ig,{size:14,className:"animate-spin"}),"Thinking..."]})})}),t[56]=U,t[57]=j,t[58]=ct):ct=t[58];let je;t[59]===Symbol.for("react.memo_cache_sentinel")?(je=O.jsx("div",{ref:y}),t[59]=je):je=t[59];let Ve;t[60]!==Qe||t[61]!==Xe||t[62]!==ct?(Ve=O.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[Qe,Xe,ct,je]}),t[60]=Qe,t[61]=Xe,t[62]=ct,t[63]=Ve):Ve=t[63];let gt;t[64]===Symbol.for("react.memo_cache_sentinel")?(gt=ve=>g(ve.target.value),t[64]=gt):gt=t[64];let ft;t[65]===Symbol.for("react.memo_cache_sentinel")?(ft={maxHeight:"120px"},t[65]=ft):ft=t[65];let ge;t[66]!==ae||t[67]!==p||t[68]!==U?(ge=O.jsx("textarea",{ref:S,value:p,onChange:gt,onKeyDown:ae,placeholder:GC.placeholder,rows:1,disabled:U,className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 rounded-lg text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-400 resize-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 disabled:opacity-50",style:ft}),t[66]=ae,t[67]=p,t[68]=U,t[69]=ge):ge=t[69];const Fe=U?"button":"submit",be=U?Z:void 0;let me;t[70]!==p||t[71]!==U?(me=!U&&!p.trim(),t[70]=p,t[71]=U,t[72]=me):me=t[72];let De;t[73]!==U?(De=U?O.jsx(ZN,{size:16}):O.jsx(HN,{size:16}),t[73]=U,t[74]=De):De=t[74];let X;t[75]!==Fe||t[76]!==be||t[77]!==me||t[78]!==De?(X=O.jsx("button",{type:Fe,onClick:be,disabled:me,className:"p-2 bg-amber-500 hover:bg-amber-400 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-lg transition-colors",children:De}),t[75]=Fe,t[76]=be,t[77]=me,t[78]=De,t[79]=X):X=t[79];let ue;t[80]!==ge||t[81]!==X?(ue=O.jsxs("div",{className:"flex items-end gap-2",children:[ge,X]}),t[80]=ge,t[81]=X,t[82]=ue):ue=t[82];let Se;t[83]!==V||t[84]!==ue?(Se=O.jsx("form",{onSubmit:V,className:"shrink-0 p-3 border-t border-neutral-200 dark:border-neutral-800",children:ue}),t[83]=V,t[84]=ue,t[85]=Se):Se=t[85];let _e;return t[86]!==ot||t[87]!==Ve||t[88]!==Se?(_e=O.jsxs("div",{className:"w-96 shrink-0 bg-white border border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col rounded-xl overflow-hidden",children:[ot,Ve,Se]}),t[86]=ot,t[87]=Ve,t[88]=Se,t[89]=_e):_e=t[89],_e}function IG(e){return e.parts.filter(DG).map(NG).join("").replace(/^undefined/,"")}function NG(e){return e.content}function DG(e){return e.type==="text"&&!!e.content}const zG=new G1;function LG(){const e=_i.c(119);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={strict:!1},e[0]=t):t=e[0];const n=_d(t),r=xd(),i=n.connectionId,o=n.database,l=n.table,c=$E($G);let f;e[1]!==c?.data?(f=c?.data??[],e[1]=c?.data,e[2]=f):f=e[2];let d;if(e[3]!==i||e[4]!==f){let ke;e[6]!==i?(ke=xt=>xt.id===i,e[6]=i,e[7]=ke):ke=e[7],d=f.find(ke),e[3]=i,e[4]=f,e[5]=d}else d=e[5];const m=d;let p;e[8]!==i||e[9]!==o?(p=["tables",i,o],e[8]=i,e[9]=o,e[10]=p):p=e[10];let g;e[11]!==m||e[12]!==o?(g=()=>m&&o?VE(m.driver,m.dsn,o):[],e[11]=m,e[12]=o,e[13]=g):g=e[13];const y=!!m&&!!o;let S;e[14]!==p||e[15]!==g||e[16]!==y?(S={queryKey:p,queryFn:g,enabled:y},e[14]=p,e[15]=g,e[16]=y,e[17]=S):S=e[17];const{data:w}=Nf(S);let C;e[18]!==i||e[19]!==o||e[20]!==w?(C=["columns",i,o,w],e[18]=i,e[19]=o,e[20]=w,e[21]=C):C=e[21];let x;e[22]!==m||e[23]!==o||e[24]!==w?(x=async()=>{if(!m||!o||!w?.length)return{};const ke={},xt=w.slice(0,50);return await Promise.all(xt.map(async Sn=>{try{ke[Sn]=await i3(m.driver,m.dsn,Sn)}catch{ke[Sn]=[]}})),ke},e[22]=m,e[23]=o,e[24]=w,e[25]=x):x=e[25];const E=!!m&&!!o&&!!w?.length;let k;e[26]!==C||e[27]!==x||e[28]!==E?(k={queryKey:C,queryFn:x,enabled:E,staleTime:3e5},e[26]=C,e[27]=x,e[28]=E,e[29]=k):k=e[29];const{data:I}=Nf(k);let P;e:{if(!w){P=void 0;break e}let ke;e[30]!==I?(ke=I??{},e[30]=I,e[31]=ke):ke=e[31];let xt;e[32]!==ke||e[33]!==w?(xt={tables:w,columns:ke},e[32]=ke,e[33]=w,e[34]=xt):xt=e[34],P=xt}const R=P,[M,L]=H.useState(""),[j,N]=H.useState("records");let U;e:{if(!m){let xt;e[35]===Symbol.for("react.memo_cache_sentinel")?(xt=["records","columns"],e[35]=xt):xt=e[35],U=xt;break e}let ke;e[36]!==m.driver?(ke=a3(m.driver),e[36]=m.driver,e[37]=ke):ke=e[37],U=ke}const Z=U;let ee;e[38]===Symbol.for("react.memo_cache_sentinel")?(ee=()=>{N(null)},e[38]=ee):ee=e[38];const re=ee,[K,$]=H.useState(!1);let te;e[39]===Symbol.for("react.memo_cache_sentinel")?(te=()=>$(FG),e[39]=te):te=e[39];const de=te,[se,z]=H.useState(null);let D;e[40]!==m?(D=async ke=>{if(!m)throw new Error("No connection selected");const xt=performance.now(),Sn=await ns(m.driver,m.dsn,ke),Lr=performance.now()-xt;return{response:Sn,duration:Lr}},e[40]=m,e[41]=D):D=e[41];let V,T;e[42]===Symbol.for("react.memo_cache_sentinel")?(V=ke=>{z(ke)},T=ke=>{z({response:{error:ke instanceof Error?ke.message:"Unknown error"},duration:0})},e[42]=V,e[43]=T):(V=e[42],T=e[43]);let ae;e[44]!==D?(ae={mutationFn:D,onSuccess:V,onError:T},e[44]=D,e[45]=ae):ae=e[45];const ce=CI(ae);let he;e[46]!==ce?(he=async ke=>(L(ke),(await ce.mutateAsync(ke)).response),e[46]=ce,e[47]=he):he=e[47];const ye=he;let Re;e[48]!==m?(Re=async ke=>{if(!m)throw new Error("No connection selected");return ns(m.driver,m.dsn,ke)},e[48]=m,e[49]=Re):Re=e[49];const we=Re;let qe;e[50]!==r?(qe=ke=>{r(ke?{to:`/${ke}`}:{to:"/"})},e[50]=r,e[51]=qe):qe=e[51];const Je=qe;let Ue;e[52]!==i||e[53]!==r?(Ue=ke=>{i&&r({to:`/${i}/${ke}`})},e[52]=i,e[53]=r,e[54]=Ue):Ue=e[54];const ot=Ue;let Qe;e[55]!==m||e[56]!==i||e[57]!==o||e[58]!==ce||e[59]!==r?(Qe=ke=>{!i||!o||(r({to:`/${i}/${o}/${ke}`}),m&&(ce.mutate(Xg(ke,m.driver)),N("records")))},e[55]=m,e[56]=i,e[57]=o,e[58]=ce,e[59]=r,e[60]=Qe):Qe=e[60];const Xe=Qe;let ct;e[61]!==m||e[62]!==ce||e[63]!==l?(ct=ke=>{if(!m||!l)return;const xt=l3(m.driver,l,ke);xt&&(L(xt),ce.mutate(xt),N(ke))},e[61]=m,e[62]=ce,e[63]=l,e[64]=ct):ct=e[64];const je=ct;let Ve;e[65]!==m||e[66]!==se?.response?.columns?.[0]||e[67]!==l?(Ve=async(ke,xt,Sn)=>{if(!m||!l)return;const Lr=se?.response?.columns?.[0]??"id",Jr=ke[Lr];if(Jr===void 0){console.error("Cannot update: no primary key found");return}const lr=jG,ms=`UPDATE ${l} SET ${xt} = ${lr(Sn)} WHERE ${Lr} = ${lr(Jr)}`;try{await ns(m.driver,m.dsn,ms)}catch(gs){console.error("Update failed:",gs)}},e[65]=m,e[66]=se?.response?.columns?.[0],e[67]=l,e[68]=Ve):Ve=e[68],se?.response?.columns;const gt=Ve;let ft;e[69]!==m||e[70]!==ce||e[71]!==se?.response?.columns?.[0]||e[72]!==l?(ft=async ke=>{if(!m||!l)return;const xt=se?.response?.columns?.[0]??"id",Sn=ke[xt];if(Sn===void 0){console.error("Cannot delete: no primary key found");return}const Jr=`DELETE FROM ${l} WHERE ${xt} = ${PG(Sn)}`;try{await ns(m.driver,m.dsn,Jr),ce.mutate(Xg(l,m.driver))}catch(lr){console.error("Delete failed:",lr)}},e[69]=m,e[70]=ce,e[71]=se?.response?.columns?.[0],e[72]=l,e[73]=ft):ft=e[73],se?.response?.columns;const ge=ft;let Fe;e[74]!==ye||e[75]!==we?(Fe={setQuery:L,executeQuery:ye,executeQuerySilent:we},e[74]=ye,e[75]=we,e[76]=Fe):Fe=e[76];const be=Fe,me=i??null,De=o??null,X=l??null;let ue;e[77]!==Je||e[78]!==ot||e[79]!==Xe||e[80]!==me||e[81]!==De||e[82]!==X?(ue=O.jsx(p3,{activeConnectionId:me,activeDatabase:De,activeTable:X,onSelectConnection:Je,onSelectDatabase:ot,onSelectTable:Xe}),e[77]=Je,e[78]=ot,e[79]=Xe,e[80]=me,e[81]=De,e[82]=X,e[83]=ue):ue=e[83];const Se=m??null,_e=l??null;let ve;e[84]===Symbol.for("react.memo_cache_sentinel")?(ve=Sy().ai?.model?de:void 0,e[84]=ve):ve=e[84];let Me;e[85]!==j||e[86]!==K||e[87]!==ye||e[88]!==je||e[89]!==ce.isPending||e[90]!==R||e[91]!==M||e[92]!==Z||e[93]!==Se||e[94]!==_e?(Me=O.jsx("div",{className:"shrink-0",children:O.jsx(Rj,{connection:Se,selectedTable:_e,onExecute:ye,isLoading:ce.isPending,schema:R,value:M,onChange:L,onToggleAI:ve,aiPanelOpen:K,supportedViews:Z,onSelectView:je,activeView:j,onExpandEditor:re})}),e[85]=j,e[86]=K,e[87]=ye,e[88]=je,e[89]=ce.isPending,e[90]=R,e[91]=M,e[92]=Z,e[93]=Se,e[94]=_e,e[95]=Me):Me=e[95];const dt=se?.response??null,We=se?.duration??0;let Ze;e[96]!==ge||e[97]!==gt||e[98]!==ce.isPending||e[99]!==dt||e[100]!==We||e[101]!==l?(Ze=O.jsx("div",{className:"flex-1 min-h-0",children:O.jsx(_5,{response:dt,duration:We,isLoading:ce.isPending,tableName:l,onUpdateCell:gt,onDeleteRow:ge})}),e[96]=ge,e[97]=gt,e[98]=ce.isPending,e[99]=dt,e[100]=We,e[101]=l,e[102]=Ze):Ze=e[102];let zt;e[103]!==Me||e[104]!==Ze?(zt=O.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden gap-2 min-w-0",children:[Me,Ze]}),e[103]=Me,e[104]=Ze,e[105]=zt):zt=e[105];let lt;e[106]!==m||e[107]!==K||e[108]!==o||e[109]!==se?.response||e[110]!==be||e[111]!==R||e[112]!==M||e[113]!==l?(lt=K&&Sy().ai?.model&&O.jsx(MG,{isOpen:K,onClose:de,connection:m??null,database:o??null,table:l??null,currentQuery:M,queryResult:se?.response??null,schema:R,setters:be}),e[106]=m,e[107]=K,e[108]=o,e[109]=se?.response,e[110]=be,e[111]=R,e[112]=M,e[113]=l,e[114]=lt):lt=e[114];let qn;return e[115]!==ue||e[116]!==zt||e[117]!==lt?(qn=O.jsxs("div",{className:"h-screen flex bg-neutral-50 dark:bg-[#0d0d0d] py-2 pr-2 pl-1 gap-2",children:[ue,zt,lt]}),e[115]=ue,e[116]=zt,e[117]=lt,e[118]=qn):qn=e[118],qn}function PG(e){return e===null?"NULL":typeof e=="number"?String(e):typeof e=="boolean"?e?"TRUE":"FALSE":`'${String(e).replace(/'/g,"''")}'`}function jG(e){return e===null?"NULL":typeof e=="number"?String(e):typeof e=="boolean"?e?"TRUE":"FALSE":`'${String(e).replace(/'/g,"''")}'`}function FG(e){return!e}function $G(e){return e.from({connections:Il}).orderBy(BG,"desc")}function BG(e){const{connections:t}=e;return t.createdAt}function UG(){const e=_i.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=O.jsx(dI,{client:zG,children:O.jsx(LG,{})}),e[0]=t):t=e[0],t}mE.options.defaultComponent=UG;function qG(){const e=_i.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=O.jsx(lN,{router:mE}),e[0]=t):t=e[0],t}BM.createRoot(document.getElementById("root")).render(O.jsx(H.StrictMode,{children:O.jsx(qG,{})}));
