(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Wy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rm={exports:{}},yl={};var Aw;function cM(){if(Aw)return yl;Aw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:a}}return yl.Fragment=e,yl.jsx=n,yl.jsxs=n,yl}var Tw;function fM(){return Tw||(Tw=1,Rm.exports=cM()),Rm.exports}var w=fM(),Am={exports:{}},Be={};var Ow;function dM(){if(Ow)return Be;Ow=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(D){return D===null||typeof D!="object"?null:(D=g&&D[g]||D["@@iterator"],typeof D=="function"?D:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function _(D,$,T){this.props=D,this.context=$,this.refs=E,this.updater=T||x}_.prototype.isReactComponent={},_.prototype.setState=function(D,$){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,$,"setState")},_.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function k(){}k.prototype=_.prototype;function R(D,$,T){this.props=D,this.context=$,this.refs=E,this.updater=T||x}var N=R.prototype=new k;N.constructor=R,S(N,_.prototype),N.isPureReactComponent=!0;var L=Array.isArray;function A(){}var I={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function P(D,$,T){var K=T.ref;return{$$typeof:t,type:D,key:$,ref:K!==void 0?K:null,props:T}}function M(D,$){return P(D.type,$,D.props)}function B(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function Q(D){var $={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(T){return $[T]})}var Z=/\/+/g;function te(D,$){return typeof D=="object"&&D!==null&&D.key!=null?Q(""+D.key):$.toString(36)}function V(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(A,A):(D.status="pending",D.then(function($){D.status==="pending"&&(D.status="fulfilled",D.value=$)},function($){D.status==="pending"&&(D.status="rejected",D.reason=$)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function F(D,$,T,K,se){var ce=typeof D;(ce==="undefined"||ce==="boolean")&&(D=null);var ye=!1;if(D===null)ye=!0;else switch(ce){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(D.$$typeof){case t:case e:ye=!0;break;case m:return ye=D._init,F(ye(D._payload),$,T,K,se)}}if(ye)return se=se(D),ye=K===""?"."+te(D,0):K,L(se)?(T="",ye!=null&&(T=ye.replace(Z,"$&/")+"/"),F(se,$,T,"",function(Ue){return Ue})):se!=null&&(B(se)&&(se=M(se,T+(se.key==null||D&&D.key===se.key?"":(""+se.key).replace(Z,"$&/")+"/")+ye)),$.push(se)),1;ye=0;var ke=K===""?".":K+":";if(L(D))for(var ve=0;ve<D.length;ve++)K=D[ve],ce=ke+te(K,ve),ye+=F(K,$,T,ce,se);else if(ve=y(D),typeof ve=="function")for(D=ve.call(D),ve=0;!(K=D.next()).done;)K=K.value,ce=ke+te(K,ve++),ye+=F(K,$,T,ce,se);else if(ce==="object"){if(typeof D.then=="function")return F(V(D),$,T,K,se);throw $=String(D),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ye}function X(D,$,T){if(D==null)return D;var K=[],se=0;return F(D,K,"","",function(ce){return $.call(T,ce,se++)}),K}function oe(D){if(D._status===-1){var $=D._result;$=$(),$.then(function(T){(D._status===0||D._status===-1)&&(D._status=1,D._result=T)},function(T){(D._status===0||D._status===-1)&&(D._status=2,D._result=T)}),D._status===-1&&(D._status=0,D._result=$)}if(D._status===1)return D._result.default;throw D._result}var ae=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},z={map:X,forEach:function(D,$,T){X(D,function(){$.apply(this,arguments)},T)},count:function(D){var $=0;return X(D,function(){$++}),$},toArray:function(D){return X(D,function($){return $})||[]},only:function(D){if(!B(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Be.Activity=p,Be.Children=z,Be.Component=_,Be.Fragment=n,Be.Profiler=s,Be.PureComponent=R,Be.StrictMode=r,Be.Suspense=f,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Be.__COMPILER_RUNTIME={__proto__:null,c:function(D){return I.H.useMemoCache(D)}},Be.cache=function(D){return function(){return D.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(D,$,T){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var K=S({},D.props),se=D.key;if($!=null)for(ce in $.key!==void 0&&(se=""+$.key),$)!j.call($,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&$.ref===void 0||(K[ce]=$[ce]);var ce=arguments.length-2;if(ce===1)K.children=T;else if(1<ce){for(var ye=Array(ce),ke=0;ke<ce;ke++)ye[ke]=arguments[ke+2];K.children=ye}return P(D.type,se,K)},Be.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:a,_context:D},D},Be.createElement=function(D,$,T){var K,se={},ce=null;if($!=null)for(K in $.key!==void 0&&(ce=""+$.key),$)j.call($,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(se[K]=$[K]);var ye=arguments.length-2;if(ye===1)se.children=T;else if(1<ye){for(var ke=Array(ye),ve=0;ve<ye;ve++)ke[ve]=arguments[ve+2];se.children=ke}if(D&&D.defaultProps)for(K in ye=D.defaultProps,ye)se[K]===void 0&&(se[K]=ye[K]);return P(D,ce,se)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(D){return{$$typeof:c,render:D}},Be.isValidElement=B,Be.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:oe}},Be.memo=function(D,$){return{$$typeof:d,type:D,compare:$===void 0?null:$}},Be.startTransition=function(D){var $=I.T,T={};I.T=T;try{var K=D(),se=I.S;se!==null&&se(T,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(A,ae)}catch(ce){ae(ce)}finally{$!==null&&T.types!==null&&($.types=T.types),I.T=$}},Be.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Be.use=function(D){return I.H.use(D)},Be.useActionState=function(D,$,T){return I.H.useActionState(D,$,T)},Be.useCallback=function(D,$){return I.H.useCallback(D,$)},Be.useContext=function(D){return I.H.useContext(D)},Be.useDebugValue=function(){},Be.useDeferredValue=function(D,$){return I.H.useDeferredValue(D,$)},Be.useEffect=function(D,$){return I.H.useEffect(D,$)},Be.useEffectEvent=function(D){return I.H.useEffectEvent(D)},Be.useId=function(){return I.H.useId()},Be.useImperativeHandle=function(D,$,T){return I.H.useImperativeHandle(D,$,T)},Be.useInsertionEffect=function(D,$){return I.H.useInsertionEffect(D,$)},Be.useLayoutEffect=function(D,$){return I.H.useLayoutEffect(D,$)},Be.useMemo=function(D,$){return I.H.useMemo(D,$)},Be.useOptimistic=function(D,$){return I.H.useOptimistic(D,$)},Be.useReducer=function(D,$,T){return I.H.useReducer(D,$,T)},Be.useRef=function(D){return I.H.useRef(D)},Be.useState=function(D){return I.H.useState(D)},Be.useSyncExternalStore=function(D,$,T){return I.H.useSyncExternalStore(D,$,T)},Be.useTransition=function(){return I.H.useTransition()},Be.version="19.2.3",Be}var Mw;function fo(){return Mw||(Mw=1,Am.exports=dM()),Am.exports}var q=fo();const Or=Wy(q);var Tm={exports:{}},vl={},Om={exports:{}},Mm={};var Iw;function hM(){return Iw||(Iw=1,(function(t){function e(F,X){var oe=F.length;F.push(X);e:for(;0<oe;){var ae=oe-1>>>1,z=F[ae];if(0<s(z,X))F[ae]=X,F[oe]=z,oe=ae;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var X=F[0],oe=F.pop();if(oe!==X){F[0]=oe;e:for(var ae=0,z=F.length,D=z>>>1;ae<D;){var $=2*(ae+1)-1,T=F[$],K=$+1,se=F[K];if(0>s(T,oe))K<z&&0>s(se,T)?(F[ae]=se,F[K]=oe,ae=K):(F[ae]=T,F[$]=oe,ae=$);else if(K<z&&0>s(se,oe))F[ae]=se,F[K]=oe,ae=K;else break e}}return X}function s(F,X){var oe=F.sortIndex-X.sortIndex;return oe!==0?oe:F.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],d=[],m=1,p=null,g=3,y=!1,x=!1,S=!1,E=!1,_=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function N(F){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=F)r(d),X.sortIndex=X.expirationTime,e(f,X);else break;X=n(d)}}function L(F){if(S=!1,N(F),!x)if(n(f)!==null)x=!0,A||(A=!0,Q());else{var X=n(d);X!==null&&V(L,X.startTime-F)}}var A=!1,I=-1,j=5,P=-1;function M(){return E?!0:!(t.unstable_now()-P<j)}function B(){if(E=!1,A){var F=t.unstable_now();P=F;var X=!0;try{e:{x=!1,S&&(S=!1,k(I),I=-1),y=!0;var oe=g;try{t:{for(N(F),p=n(f);p!==null&&!(p.expirationTime>F&&M());){var ae=p.callback;if(typeof ae=="function"){p.callback=null,g=p.priorityLevel;var z=ae(p.expirationTime<=F);if(F=t.unstable_now(),typeof z=="function"){p.callback=z,N(F),X=!0;break t}p===n(f)&&r(f),N(F)}else r(f);p=n(f)}if(p!==null)X=!0;else{var D=n(d);D!==null&&V(L,D.startTime-F),X=!1}}break e}finally{p=null,g=oe,y=!1}X=void 0}}finally{X?Q():A=!1}}}var Q;if(typeof R=="function")Q=function(){R(B)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,te=Z.port2;Z.port1.onmessage=B,Q=function(){te.postMessage(null)}}else Q=function(){_(B,0)};function V(F,X){I=_(function(){F(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(F){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var oe=g;g=X;try{return F()}finally{g=oe}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var oe=g;g=F;try{return X()}finally{g=oe}},t.unstable_scheduleCallback=function(F,X,oe){var ae=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ae+oe:ae):oe=ae,F){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=oe+z,F={id:m++,callback:X,priorityLevel:F,startTime:oe,expirationTime:z,sortIndex:-1},oe>ae?(F.sortIndex=oe,e(d,F),n(f)===null&&F===n(d)&&(S?(k(I),I=-1):S=!0,V(L,oe-ae))):(F.sortIndex=z,e(f,F),x||y||(x=!0,A||(A=!0,Q()))),F},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(F){var X=g;return function(){var oe=g;g=X;try{return F.apply(this,arguments)}finally{g=oe}}}})(Mm)),Mm}var Nw;function pM(){return Nw||(Nw=1,Om.exports=hM()),Om.exports}var Im={exports:{}},hn={};var Dw;function mM(){if(Dw)return hn;Dw=1;var t=fo();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,d,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:f,containerInfo:d,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hn.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,m)},hn.flushSync=function(f){var d=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=d,r.p=m,r.d.f()}},hn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},hn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},hn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,p=c(m,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):m==="script"&&r.d.X(f,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},hn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},hn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,p=c(m,d.crossOrigin);r.d.L(f,m,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},hn.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=c(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},hn.requestFormReset=function(f){r.d.r(f)},hn.unstable_batchedUpdates=function(f,d){return f(d)},hn.useFormState=function(f,d,m){return l.H.useFormState(f,d,m)},hn.useFormStatus=function(){return l.H.useHostTransitionStatus()},hn.version="19.2.3",hn}var zw;function XC(){if(zw)return Im.exports;zw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Im.exports=mM(),Im.exports}var jw;function gM(){if(jw)return vl;jw=1;var t=pM(),e=fo(),n=XC();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function c(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(a(i)!==i)throw Error(r(188))}function d(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var u=i,h=o;;){var v=u.return;if(v===null)break;var b=v.alternate;if(b===null){if(h=v.return,h!==null){u=h;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===u)return f(v),i;if(b===h)return f(v),o;b=b.sibling}throw Error(r(188))}if(u.return!==h.return)u=v,h=b;else{for(var C=!1,O=v.child;O;){if(O===u){C=!0,u=v,h=b;break}if(O===h){C=!0,h=v,u=b;break}O=O.sibling}if(!C){for(O=b.child;O;){if(O===u){C=!0,u=b,h=v;break}if(O===h){C=!0,h=b,u=v;break}O=O.sibling}if(!C)throw Error(r(189))}}if(u.alternate!==h)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),R=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function Q(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var Z=Symbol.for("react.client.reference");function te(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Z?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case _:return"Profiler";case E:return"StrictMode";case L:return"Suspense";case A:return"SuspenseList";case P:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case x:return"Portal";case R:return i.displayName||"Context";case k:return(i._context.displayName||"Context")+".Consumer";case N:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case I:return o=i.displayName||null,o!==null?o:te(i.type)||"Memo";case j:o=i._payload,i=i._init;try{return te(i(o))}catch{}}return null}var V=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},ae=[],z=-1;function D(i){return{current:i}}function $(i){0>z||(i.current=ae[z],ae[z]=null,z--)}function T(i,o){z++,ae[z]=i.current,i.current=o}var K=D(null),se=D(null),ce=D(null),ye=D(null);function ke(i,o){switch(T(ce,o),T(se,i),T(K,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?JS(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=JS(o),i=XS(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}$(K),T(K,i)}function ve(){$(K),$(se),$(ce)}function Ue(i){i.memoizedState!==null&&T(ye,i);var o=K.current,u=XS(o,i.type);o!==u&&(T(se,i),T(K,u))}function Fe(i){se.current===i&&($(K),$(se)),ye.current===i&&($(ye),hl._currentValue=oe)}var Ge,yt;function lt(i){if(Ge===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Ge=o&&o[1]||"",yt=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ge+i+yt}var it=!1;function ht(i,o){if(!i||it)return"";it=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(re){var ee=re}Reflect.construct(i,[],ue)}else{try{ue.call()}catch(re){ee=re}i.call(ue.prototype)}}else{try{throw Error()}catch(re){ee=re}(ue=i())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(re){if(re&&ee&&typeof re.stack=="string")return[re.stack,ee.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),C=b[0],O=b[1];if(C&&O){var U=C.split(`
`),J=O.split(`
`);for(v=h=0;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;for(;v<J.length&&!J[v].includes("DetermineComponentFrameRoot");)v++;if(h===U.length||v===J.length)for(h=U.length-1,v=J.length-1;1<=h&&0<=v&&U[h]!==J[v];)v--;for(;1<=h&&0<=v;h--,v--)if(U[h]!==J[v]){if(h!==1||v!==1)do if(h--,v--,0>v||U[h]!==J[v]){var ie=`
`+U[h].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=h&&0<=v);break}}}finally{it=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?lt(u):""}function Xe(i,o){switch(i.tag){case 26:case 27:case 5:return lt(i.type);case 16:return lt("Lazy");case 13:return i.child!==o&&o!==null?lt("Suspense Fallback"):lt("Suspense");case 19:return lt("SuspenseList");case 0:case 15:return ht(i.type,!1);case 11:return ht(i.type.render,!1);case 1:return ht(i.type,!0);case 31:return lt("Activity");default:return""}}function rt(i){try{var o="",u=null;do o+=Xe(i,u),u=i,i=i.return;while(i);return o}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var ft=Object.prototype.hasOwnProperty,Ae=t.unstable_scheduleCallback,me=t.unstable_cancelCallback,Ne=t.unstable_shouldYield,be=t.unstable_requestPaint,ge=t.unstable_now,$e=t.unstable_getCurrentPriorityLevel,ne=t.unstable_ImmediatePriority,de=t.unstable_UserBlockingPriority,_e=t.unstable_NormalPriority,Ce=t.unstable_LowPriority,xe=t.unstable_IdlePriority,Pe=t.log,vt=t.unstable_setDisableYieldValue,at=null,ot=null;function kn(i){if(typeof Pe=="function"&&vt(i),ot&&typeof ot.setStrictMode=="function")try{ot.setStrictMode(at,i)}catch{}}var wt=Math.clz32?Math.clz32:YT,xs=Math.log,_r=Math.LN2;function YT(i){return i>>>=0,i===0?32:31-(xs(i)/_r|0)|0}var Pu=256,Fu=262144,$u=4194304;function fi(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Bu(i,o,u){var h=i.pendingLanes;if(h===0)return 0;var v=0,b=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var O=h&134217727;return O!==0?(h=O&~b,h!==0?v=fi(h):(C&=O,C!==0?v=fi(C):u||(u=O&~i,u!==0&&(v=fi(u))))):(O=h&~b,O!==0?v=fi(O):C!==0?v=fi(C):u||(u=h&~i,u!==0&&(v=fi(u)))),v===0?0:o!==0&&o!==v&&(o&b)===0&&(b=v&-v,u=o&-o,b>=u||b===32&&(u&4194048)!==0)?o:v}function ko(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function JT(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iv(){var i=$u;return $u<<=1,($u&62914560)===0&&($u=4194304),i}function mh(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Ro(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function XT(i,o,u,h,v,b){var C=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var O=i.entanglements,U=i.expirationTimes,J=i.hiddenUpdates;for(u=C&~u;0<u;){var ie=31-wt(u),ue=1<<ie;O[ie]=0,U[ie]=-1;var ee=J[ie];if(ee!==null)for(J[ie]=null,ie=0;ie<ee.length;ie++){var re=ee[ie];re!==null&&(re.lane&=-536870913)}u&=~ue}h!==0&&Nv(i,h,0),b!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=b&~(C&~o))}function Nv(i,o,u){i.pendingLanes|=o,i.suspendedLanes&=~o;var h=31-wt(o);i.entangledLanes|=o,i.entanglements[h]=i.entanglements[h]|1073741824|u&261930}function Dv(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var h=31-wt(u),v=1<<h;v&o|i[h]&o&&(i[h]|=o),u&=~v}}function zv(i,o){var u=o&-o;return u=(u&42)!==0?1:gh(u),(u&(i.suspendedLanes|o))!==0?0:u}function gh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function yh(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function jv(){var i=X.p;return i!==0?i:(i=window.event,i===void 0?32:Sw(i.type))}function Lv(i,o){var u=X.p;try{return X.p=i,o()}finally{X.p=u}}var Ss=Math.random().toString(36).slice(2),nn="__reactFiber$"+Ss,Rn="__reactProps$"+Ss,ea="__reactContainer$"+Ss,vh="__reactEvents$"+Ss,WT="__reactListeners$"+Ss,eO="__reactHandles$"+Ss,Pv="__reactResources$"+Ss,Ao="__reactMarker$"+Ss;function bh(i){delete i[nn],delete i[Rn],delete i[vh],delete i[WT],delete i[eO]}function ta(i){var o=i[nn];if(o)return o;for(var u=i.parentNode;u;){if(o=u[ea]||u[nn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=iw(i);i!==null;){if(u=i[nn])return u;i=iw(i)}return o}i=u,u=i.parentNode}return null}function na(i){if(i=i[nn]||i[ea]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function To(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function ra(i){var o=i[Pv];return o||(o=i[Pv]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Yt(i){i[Ao]=!0}var Fv=new Set,$v={};function di(i,o){sa(i,o),sa(i+"Capture",o)}function sa(i,o){for($v[i]=o,i=0;i<o.length;i++)Fv.add(o[i])}var tO=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bv={},Uv={};function nO(i){return ft.call(Uv,i)?!0:ft.call(Bv,i)?!1:tO.test(i)?Uv[i]=!0:(Bv[i]=!0,!1)}function Uu(i,o,u){if(nO(o))if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+u)}}function qu(i,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+u)}}function Gr(i,o,u,h){if(h===null)i.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(o,u,""+h)}}function ir(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function qv(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function rO(i,o,u){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,b=h.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return v.call(this)},set:function(C){u=""+C,b.call(this,C)}}),Object.defineProperty(i,o,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function xh(i){if(!i._valueTracker){var o=qv(i)?"checked":"value";i._valueTracker=rO(i,o,""+i[o])}}function Hv(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return i&&(h=qv(i)?i.checked?"true":"false":i.value),i=h,i!==u?(o.setValue(i),!0):!1}function Hu(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var sO=/[\n"\\]/g;function ar(i){return i.replace(sO,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Sh(i,o,u,h,v,b,C,O){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),o!=null?C==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+ir(o)):i.value!==""+ir(o)&&(i.value=""+ir(o)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),o!=null?wh(i,C,ir(o)):u!=null?wh(i,C,ir(u)):h!=null&&i.removeAttribute("value"),v==null&&b!=null&&(i.defaultChecked=!!b),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?i.name=""+ir(O):i.removeAttribute("name")}function Vv(i,o,u,h,v,b,C,O){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),o!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){xh(i);return}u=u!=null?""+ir(u):"",o=o!=null?""+ir(o):u,O||o===i.value||(i.value=o),i.defaultValue=o}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=O?i.checked:!!h,i.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),xh(i)}function wh(i,o,u){o==="number"&&Hu(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function ia(i,o,u,h){if(i=i.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<i.length;u++)v=o.hasOwnProperty("$"+i[u].value),i[u].selected!==v&&(i[u].selected=v),v&&h&&(i[u].defaultSelected=!0)}else{for(u=""+ir(u),o=null,v=0;v<i.length;v++){if(i[v].value===u){i[v].selected=!0,h&&(i[v].defaultSelected=!0);return}o!==null||i[v].disabled||(o=i[v])}o!==null&&(o.selected=!0)}}function Kv(i,o,u){if(o!=null&&(o=""+ir(o),o!==i.value&&(i.value=o),u==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=u!=null?""+ir(u):""}function Gv(i,o,u,h){if(o==null){if(h!=null){if(u!=null)throw Error(r(92));if(V(h)){if(1<h.length)throw Error(r(93));h=h[0]}u=h}u==null&&(u=""),o=u}u=ir(o),i.defaultValue=u,h=i.textContent,h===u&&h!==""&&h!==null&&(i.value=h),xh(i)}function aa(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var iO=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qv(i,o,u){var h=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":h?i.setProperty(o,u):typeof u!="number"||u===0||iO.has(o)?o==="float"?i.cssFloat=u:i[o]=(""+u).trim():i[o]=u+"px"}function Zv(i,o,u){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var v in o)h=o[v],o.hasOwnProperty(v)&&u[v]!==h&&Qv(i,v,h)}else for(var b in o)o.hasOwnProperty(b)&&Qv(i,b,o[b])}function _h(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vu(i){return oO.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Qr(){}var Ch=null;function Eh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var oa=null,la=null;function Yv(i){var o=na(i);if(o&&(i=o.stateNode)){var u=i[Rn]||null;e:switch(i=o.stateNode,o.type){case"input":if(Sh(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ar(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==i&&h.form===i.form){var v=h[Rn]||null;if(!v)throw Error(r(90));Sh(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)h=u[o],h.form===i.form&&Hv(h)}break e;case"textarea":Kv(i,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&ia(i,!!u.multiple,o,!1)}}}var kh=!1;function Jv(i,o,u){if(kh)return i(o,u);kh=!0;try{var h=i(o);return h}finally{if(kh=!1,(oa!==null||la!==null)&&(Ic(),oa&&(o=oa,i=la,la=oa=null,Yv(o),i)))for(o=0;o<i.length;o++)Yv(i[o])}}function Oo(i,o){var u=i.stateNode;if(u===null)return null;var h=u[Rn]||null;if(h===null)return null;u=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,o,typeof u));return u}var Zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rh=!1;if(Zr)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){Rh=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{Rh=!1}var ws=null,Ah=null,Ku=null;function Xv(){if(Ku)return Ku;var i,o=Ah,u=o.length,h,v="value"in ws?ws.value:ws.textContent,b=v.length;for(i=0;i<u&&o[i]===v[i];i++);var C=u-i;for(h=1;h<=C&&o[u-h]===v[b-h];h++);return Ku=v.slice(i,1<h?1-h:void 0)}function Gu(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Qu(){return!0}function Wv(){return!1}function An(i){function o(u,h,v,b,C){this._reactName=u,this._targetInst=v,this.type=h,this.nativeEvent=b,this.target=C,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(u=i[O],this[O]=u?u(b):b[O]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Qu:Wv,this.isPropagationStopped=Wv,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Qu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Qu)},persist:function(){},isPersistent:Qu}),o}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zu=An(hi),Io=p({},hi,{view:0,detail:0}),lO=An(Io),Th,Oh,No,Yu=p({},Io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ih,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==No&&(No&&i.type==="mousemove"?(Th=i.screenX-No.screenX,Oh=i.screenY-No.screenY):Oh=Th=0,No=i),Th)},movementY:function(i){return"movementY"in i?i.movementY:Oh}}),eb=An(Yu),uO=p({},Yu,{dataTransfer:0}),cO=An(uO),fO=p({},Io,{relatedTarget:0}),Mh=An(fO),dO=p({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),hO=An(dO),pO=p({},hi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),mO=An(pO),gO=p({},hi,{data:0}),tb=An(gO),yO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xO(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=bO[i])?!!o[i]:!1}function Ih(){return xO}var SO=p({},Io,{key:function(i){if(i.key){var o=yO[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Gu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vO[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ih,charCode:function(i){return i.type==="keypress"?Gu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Gu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),wO=An(SO),_O=p({},Yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nb=An(_O),CO=p({},Io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ih}),EO=An(CO),kO=p({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),RO=An(kO),AO=p({},Yu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),TO=An(AO),OO=p({},hi,{newState:0,oldState:0}),MO=An(OO),IO=[9,13,27,32],Nh=Zr&&"CompositionEvent"in window,Do=null;Zr&&"documentMode"in document&&(Do=document.documentMode);var NO=Zr&&"TextEvent"in window&&!Do,rb=Zr&&(!Nh||Do&&8<Do&&11>=Do),sb=" ",ib=!1;function ab(i,o){switch(i){case"keyup":return IO.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ob(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ua=!1;function DO(i,o){switch(i){case"compositionend":return ob(o);case"keypress":return o.which!==32?null:(ib=!0,sb);case"textInput":return i=o.data,i===sb&&ib?null:i;default:return null}}function zO(i,o){if(ua)return i==="compositionend"||!Nh&&ab(i,o)?(i=Xv(),Ku=Ah=ws=null,ua=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return rb&&o.locale!=="ko"?null:o.data;default:return null}}var jO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lb(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!jO[i.type]:o==="textarea"}function ub(i,o,u,h){oa?la?la.push(h):la=[h]:oa=h,o=Fc(o,"onChange"),0<o.length&&(u=new Zu("onChange","change",null,u,h),i.push({event:u,listeners:o}))}var zo=null,jo=null;function LO(i){VS(i,0)}function Ju(i){var o=To(i);if(Hv(o))return i}function cb(i,o){if(i==="change")return o}var fb=!1;if(Zr){var Dh;if(Zr){var zh="oninput"in document;if(!zh){var db=document.createElement("div");db.setAttribute("oninput","return;"),zh=typeof db.oninput=="function"}Dh=zh}else Dh=!1;fb=Dh&&(!document.documentMode||9<document.documentMode)}function hb(){zo&&(zo.detachEvent("onpropertychange",pb),jo=zo=null)}function pb(i){if(i.propertyName==="value"&&Ju(jo)){var o=[];ub(o,jo,i,Eh(i)),Jv(LO,o)}}function PO(i,o,u){i==="focusin"?(hb(),zo=o,jo=u,zo.attachEvent("onpropertychange",pb)):i==="focusout"&&hb()}function FO(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ju(jo)}function $O(i,o){if(i==="click")return Ju(o)}function BO(i,o){if(i==="input"||i==="change")return Ju(o)}function UO(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Bn=typeof Object.is=="function"?Object.is:UO;function Lo(i,o){if(Bn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var v=u[h];if(!ft.call(o,v)||!Bn(i[v],o[v]))return!1}return!0}function mb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function gb(i,o){var u=mb(i);i=0;for(var h;u;){if(u.nodeType===3){if(h=i+u.textContent.length,i<=o&&h>=o)return{node:u,offset:o-i};i=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=mb(u)}}function yb(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?yb(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function vb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Hu(i.document);o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Hu(i.document)}return o}function jh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var qO=Zr&&"documentMode"in document&&11>=document.documentMode,ca=null,Lh=null,Po=null,Ph=!1;function bb(i,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ph||ca==null||ca!==Hu(h)||(h=ca,"selectionStart"in h&&jh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Po&&Lo(Po,h)||(Po=h,h=Fc(Lh,"onSelect"),0<h.length&&(o=new Zu("onSelect","select",null,o,u),i.push({event:o,listeners:h}),o.target=ca)))}function pi(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var fa={animationend:pi("Animation","AnimationEnd"),animationiteration:pi("Animation","AnimationIteration"),animationstart:pi("Animation","AnimationStart"),transitionrun:pi("Transition","TransitionRun"),transitionstart:pi("Transition","TransitionStart"),transitioncancel:pi("Transition","TransitionCancel"),transitionend:pi("Transition","TransitionEnd")},Fh={},xb={};Zr&&(xb=document.createElement("div").style,"AnimationEvent"in window||(delete fa.animationend.animation,delete fa.animationiteration.animation,delete fa.animationstart.animation),"TransitionEvent"in window||delete fa.transitionend.transition);function mi(i){if(Fh[i])return Fh[i];if(!fa[i])return i;var o=fa[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in xb)return Fh[i]=o[u];return i}var Sb=mi("animationend"),wb=mi("animationiteration"),_b=mi("animationstart"),HO=mi("transitionrun"),VO=mi("transitionstart"),KO=mi("transitioncancel"),Cb=mi("transitionend"),Eb=new Map,$h="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$h.push("scrollEnd");function Cr(i,o){Eb.set(i,o),di(o,[i])}var Xu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},or=[],da=0,Bh=0;function Wu(){for(var i=da,o=Bh=da=0;o<i;){var u=or[o];or[o++]=null;var h=or[o];or[o++]=null;var v=or[o];or[o++]=null;var b=or[o];if(or[o++]=null,h!==null&&v!==null){var C=h.pending;C===null?v.next=v:(v.next=C.next,C.next=v),h.pending=v}b!==0&&kb(u,v,b)}}function ec(i,o,u,h){or[da++]=i,or[da++]=o,or[da++]=u,or[da++]=h,Bh|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Uh(i,o,u,h){return ec(i,o,u,h),tc(i)}function gi(i,o){return ec(i,null,null,o),tc(i)}function kb(i,o,u){i.lanes|=u;var h=i.alternate;h!==null&&(h.lanes|=u);for(var v=!1,b=i.return;b!==null;)b.childLanes|=u,h=b.alternate,h!==null&&(h.childLanes|=u),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(v=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,v&&o!==null&&(v=31-wt(u),i=b.hiddenUpdates,h=i[v],h===null?i[v]=[o]:h.push(o),o.lane=u|536870912),b):null}function tc(i){if(50<al)throw al=0,Jp=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var ha={};function GO(i,o,u,h){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(i,o,u,h){return new GO(i,o,u,h)}function qh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Yr(i,o){var u=i.alternate;return u===null?(u=Un(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function Rb(i,o){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,o=u.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function nc(i,o,u,h,v,b){var C=0;if(h=i,typeof i=="function")qh(i)&&(C=1);else if(typeof i=="string")C=X2(i,u,K.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case P:return i=Un(31,u,o,v),i.elementType=P,i.lanes=b,i;case S:return yi(u.children,v,b,o);case E:C=8,v|=24;break;case _:return i=Un(12,u,o,v|2),i.elementType=_,i.lanes=b,i;case L:return i=Un(13,u,o,v),i.elementType=L,i.lanes=b,i;case A:return i=Un(19,u,o,v),i.elementType=A,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:C=10;break e;case k:C=9;break e;case N:C=11;break e;case I:C=14;break e;case j:C=16,h=null;break e}C=29,u=Error(r(130,i===null?"null":typeof i,"")),h=null}return o=Un(C,u,o,v),o.elementType=i,o.type=h,o.lanes=b,o}function yi(i,o,u,h){return i=Un(7,i,h,o),i.lanes=u,i}function Hh(i,o,u){return i=Un(6,i,null,o),i.lanes=u,i}function Ab(i){var o=Un(18,null,null,0);return o.stateNode=i,o}function Vh(i,o,u){return o=Un(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Tb=new WeakMap;function lr(i,o){if(typeof i=="object"&&i!==null){var u=Tb.get(i);return u!==void 0?u:(o={value:i,source:o,stack:rt(o)},Tb.set(i,o),o)}return{value:i,source:o,stack:rt(o)}}var pa=[],ma=0,rc=null,Fo=0,ur=[],cr=0,_s=null,Nr=1,Dr="";function Jr(i,o){pa[ma++]=Fo,pa[ma++]=rc,rc=i,Fo=o}function Ob(i,o,u){ur[cr++]=Nr,ur[cr++]=Dr,ur[cr++]=_s,_s=i;var h=Nr;i=Dr;var v=32-wt(h)-1;h&=~(1<<v),u+=1;var b=32-wt(o)+v;if(30<b){var C=v-v%5;b=(h&(1<<C)-1).toString(32),h>>=C,v-=C,Nr=1<<32-wt(o)+v|u<<v|h,Dr=b+i}else Nr=1<<b|u<<v|h,Dr=i}function Kh(i){i.return!==null&&(Jr(i,1),Ob(i,1,0))}function Gh(i){for(;i===rc;)rc=pa[--ma],pa[ma]=null,Fo=pa[--ma],pa[ma]=null;for(;i===_s;)_s=ur[--cr],ur[cr]=null,Dr=ur[--cr],ur[cr]=null,Nr=ur[--cr],ur[cr]=null}function Mb(i,o){ur[cr++]=Nr,ur[cr++]=Dr,ur[cr++]=_s,Nr=o.id,Dr=o.overflow,_s=i}var rn=null,kt=null,nt=!1,Cs=null,fr=!1,Qh=Error(r(519));function Es(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $o(lr(o,i)),Qh}function Ib(i){var o=i.stateNode,u=i.type,h=i.memoizedProps;switch(o[nn]=i,o[Rn]=h,u){case"dialog":Ze("cancel",o),Ze("close",o);break;case"iframe":case"object":case"embed":Ze("load",o);break;case"video":case"audio":for(u=0;u<ll.length;u++)Ze(ll[u],o);break;case"source":Ze("error",o);break;case"img":case"image":case"link":Ze("error",o),Ze("load",o);break;case"details":Ze("toggle",o);break;case"input":Ze("invalid",o),Vv(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ze("invalid",o);break;case"textarea":Ze("invalid",o),Gv(o,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||h.suppressHydrationWarning===!0||ZS(o.textContent,u)?(h.popover!=null&&(Ze("beforetoggle",o),Ze("toggle",o)),h.onScroll!=null&&Ze("scroll",o),h.onScrollEnd!=null&&Ze("scrollend",o),h.onClick!=null&&(o.onclick=Qr),o=!0):o=!1,o||Es(i,!0)}function Nb(i){for(rn=i.return;rn;)switch(rn.tag){case 5:case 31:case 13:fr=!1;return;case 27:case 3:fr=!0;return;default:rn=rn.return}}function ga(i){if(i!==rn)return!1;if(!nt)return Nb(i),nt=!0,!1;var o=i.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||dm(i.type,i.memoizedProps)),u=!u),u&&kt&&Es(i),Nb(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));kt=sw(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));kt=sw(i)}else o===27?(o=kt,Fs(i.type)?(i=ym,ym=null,kt=i):kt=o):kt=rn?hr(i.stateNode.nextSibling):null;return!0}function vi(){kt=rn=null,nt=!1}function Zh(){var i=Cs;return i!==null&&(In===null?In=i:In.push.apply(In,i),Cs=null),i}function $o(i){Cs===null?Cs=[i]:Cs.push(i)}var Yh=D(null),bi=null,Xr=null;function ks(i,o,u){T(Yh,o._currentValue),o._currentValue=u}function Wr(i){i._currentValue=Yh.current,$(Yh)}function Jh(i,o,u){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===u)break;i=i.return}}function Xh(i,o,u,h){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var b=v.dependencies;if(b!==null){var C=v.child;b=b.firstContext;e:for(;b!==null;){var O=b;b=v;for(var U=0;U<o.length;U++)if(O.context===o[U]){b.lanes|=u,O=b.alternate,O!==null&&(O.lanes|=u),Jh(b.return,u,i),h||(C=null);break e}b=O.next}}else if(v.tag===18){if(C=v.return,C===null)throw Error(r(341));C.lanes|=u,b=C.alternate,b!==null&&(b.lanes|=u),Jh(C,u,i),C=null}else C=v.child;if(C!==null)C.return=v;else for(C=v;C!==null;){if(C===i){C=null;break}if(v=C.sibling,v!==null){v.return=C.return,C=v;break}C=C.return}v=C}}function ya(i,o,u,h){i=null;for(var v=o,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var C=v.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var O=v.type;Bn(v.pendingProps.value,C.value)||(i!==null?i.push(O):i=[O])}}else if(v===ye.current){if(C=v.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(hl):i=[hl])}v=v.return}i!==null&&Xh(o,i,u,h),o.flags|=262144}function sc(i){for(i=i.firstContext;i!==null;){if(!Bn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function xi(i){bi=i,Xr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function sn(i){return Db(bi,i)}function ic(i,o){return bi===null&&xi(i),Db(i,o)}function Db(i,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Xr===null){if(i===null)throw Error(r(308));Xr=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Xr=Xr.next=o;return u}var QO=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(u,h){i.push(h)}};this.abort=function(){o.aborted=!0,i.forEach(function(u){return u()})}},ZO=t.unstable_scheduleCallback,YO=t.unstable_NormalPriority,zt={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wh(){return{controller:new QO,data:new Map,refCount:0}}function Bo(i){i.refCount--,i.refCount===0&&ZO(YO,function(){i.controller.abort()})}var Uo=null,ep=0,va=0,ba=null;function JO(i,o){if(Uo===null){var u=Uo=[];ep=0,va=rm(),ba={status:"pending",value:void 0,then:function(h){u.push(h)}}}return ep++,o.then(zb,zb),o}function zb(){if(--ep===0&&Uo!==null){ba!==null&&(ba.status="fulfilled");var i=Uo;Uo=null,va=0,ba=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function XO(i,o){var u=[],h={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return i.then(function(){h.status="fulfilled",h.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(h.status="rejected",h.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),h}var jb=F.S;F.S=function(i,o){bS=ge(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&JO(i,o),jb!==null&&jb(i,o)};var Si=D(null);function tp(){var i=Si.current;return i!==null?i:_t.pooledCache}function ac(i,o){o===null?T(Si,Si.current):T(Si,o.pool)}function Lb(){var i=tp();return i===null?null:{parent:zt._currentValue,pool:i}}var xa=Error(r(460)),np=Error(r(474)),oc=Error(r(542)),lc={then:function(){}};function Pb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Fb(i,o,u){switch(u=i[u],u===void 0?i.push(o):u!==o&&(o.then(Qr,Qr),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Bb(i),i;default:if(typeof o.status=="string")o.then(Qr,Qr);else{if(i=_t,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(h){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=h}},function(h){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Bb(i),i}throw _i=o,xa}}function wi(i){try{var o=i._init;return o(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(_i=u,xa):u}}var _i=null;function $b(){if(_i===null)throw Error(r(459));var i=_i;return _i=null,i}function Bb(i){if(i===xa||i===oc)throw Error(r(483))}var Sa=null,qo=0;function uc(i){var o=qo;return qo+=1,Sa===null&&(Sa=[]),Fb(Sa,i,o)}function Ho(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function cc(i,o){throw o.$$typeof===g?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Ub(i){function o(G,H){if(i){var Y=G.deletions;Y===null?(G.deletions=[H],G.flags|=16):Y.push(H)}}function u(G,H){if(!i)return null;for(;H!==null;)o(G,H),H=H.sibling;return null}function h(G){for(var H=new Map;G!==null;)G.key!==null?H.set(G.key,G):H.set(G.index,G),G=G.sibling;return H}function v(G,H){return G=Yr(G,H),G.index=0,G.sibling=null,G}function b(G,H,Y){return G.index=Y,i?(Y=G.alternate,Y!==null?(Y=Y.index,Y<H?(G.flags|=67108866,H):Y):(G.flags|=67108866,H)):(G.flags|=1048576,H)}function C(G){return i&&G.alternate===null&&(G.flags|=67108866),G}function O(G,H,Y,le){return H===null||H.tag!==6?(H=Hh(Y,G.mode,le),H.return=G,H):(H=v(H,Y),H.return=G,H)}function U(G,H,Y,le){var Te=Y.type;return Te===S?ie(G,H,Y.props.children,le,Y.key):H!==null&&(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===j&&wi(Te)===H.type)?(H=v(H,Y.props),Ho(H,Y),H.return=G,H):(H=nc(Y.type,Y.key,Y.props,null,G.mode,le),Ho(H,Y),H.return=G,H)}function J(G,H,Y,le){return H===null||H.tag!==4||H.stateNode.containerInfo!==Y.containerInfo||H.stateNode.implementation!==Y.implementation?(H=Vh(Y,G.mode,le),H.return=G,H):(H=v(H,Y.children||[]),H.return=G,H)}function ie(G,H,Y,le,Te){return H===null||H.tag!==7?(H=yi(Y,G.mode,le,Te),H.return=G,H):(H=v(H,Y),H.return=G,H)}function ue(G,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Hh(""+H,G.mode,Y),H.return=G,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case y:return Y=nc(H.type,H.key,H.props,null,G.mode,Y),Ho(Y,H),Y.return=G,Y;case x:return H=Vh(H,G.mode,Y),H.return=G,H;case j:return H=wi(H),ue(G,H,Y)}if(V(H)||Q(H))return H=yi(H,G.mode,Y,null),H.return=G,H;if(typeof H.then=="function")return ue(G,uc(H),Y);if(H.$$typeof===R)return ue(G,ic(G,H),Y);cc(G,H)}return null}function ee(G,H,Y,le){var Te=H!==null?H.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Te!==null?null:O(G,H,""+Y,le);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case y:return Y.key===Te?U(G,H,Y,le):null;case x:return Y.key===Te?J(G,H,Y,le):null;case j:return Y=wi(Y),ee(G,H,Y,le)}if(V(Y)||Q(Y))return Te!==null?null:ie(G,H,Y,le,null);if(typeof Y.then=="function")return ee(G,H,uc(Y),le);if(Y.$$typeof===R)return ee(G,H,ic(G,Y),le);cc(G,Y)}return null}function re(G,H,Y,le,Te){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return G=G.get(Y)||null,O(H,G,""+le,Te);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case y:return G=G.get(le.key===null?Y:le.key)||null,U(H,G,le,Te);case x:return G=G.get(le.key===null?Y:le.key)||null,J(H,G,le,Te);case j:return le=wi(le),re(G,H,Y,le,Te)}if(V(le)||Q(le))return G=G.get(Y)||null,ie(H,G,le,Te,null);if(typeof le.then=="function")return re(G,H,Y,uc(le),Te);if(le.$$typeof===R)return re(G,H,Y,ic(H,le),Te);cc(H,le)}return null}function Se(G,H,Y,le){for(var Te=null,ut=null,Ee=H,He=H=0,et=null;Ee!==null&&He<Y.length;He++){Ee.index>He?(et=Ee,Ee=null):et=Ee.sibling;var ct=ee(G,Ee,Y[He],le);if(ct===null){Ee===null&&(Ee=et);break}i&&Ee&&ct.alternate===null&&o(G,Ee),H=b(ct,H,He),ut===null?Te=ct:ut.sibling=ct,ut=ct,Ee=et}if(He===Y.length)return u(G,Ee),nt&&Jr(G,He),Te;if(Ee===null){for(;He<Y.length;He++)Ee=ue(G,Y[He],le),Ee!==null&&(H=b(Ee,H,He),ut===null?Te=Ee:ut.sibling=Ee,ut=Ee);return nt&&Jr(G,He),Te}for(Ee=h(Ee);He<Y.length;He++)et=re(Ee,G,He,Y[He],le),et!==null&&(i&&et.alternate!==null&&Ee.delete(et.key===null?He:et.key),H=b(et,H,He),ut===null?Te=et:ut.sibling=et,ut=et);return i&&Ee.forEach(function(Hs){return o(G,Hs)}),nt&&Jr(G,He),Te}function Ie(G,H,Y,le){if(Y==null)throw Error(r(151));for(var Te=null,ut=null,Ee=H,He=H=0,et=null,ct=Y.next();Ee!==null&&!ct.done;He++,ct=Y.next()){Ee.index>He?(et=Ee,Ee=null):et=Ee.sibling;var Hs=ee(G,Ee,ct.value,le);if(Hs===null){Ee===null&&(Ee=et);break}i&&Ee&&Hs.alternate===null&&o(G,Ee),H=b(Hs,H,He),ut===null?Te=Hs:ut.sibling=Hs,ut=Hs,Ee=et}if(ct.done)return u(G,Ee),nt&&Jr(G,He),Te;if(Ee===null){for(;!ct.done;He++,ct=Y.next())ct=ue(G,ct.value,le),ct!==null&&(H=b(ct,H,He),ut===null?Te=ct:ut.sibling=ct,ut=ct);return nt&&Jr(G,He),Te}for(Ee=h(Ee);!ct.done;He++,ct=Y.next())ct=re(Ee,G,He,ct.value,le),ct!==null&&(i&&ct.alternate!==null&&Ee.delete(ct.key===null?He:ct.key),H=b(ct,H,He),ut===null?Te=ct:ut.sibling=ct,ut=ct);return i&&Ee.forEach(function(uM){return o(G,uM)}),nt&&Jr(G,He),Te}function St(G,H,Y,le){if(typeof Y=="object"&&Y!==null&&Y.type===S&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case y:e:{for(var Te=Y.key;H!==null;){if(H.key===Te){if(Te=Y.type,Te===S){if(H.tag===7){u(G,H.sibling),le=v(H,Y.props.children),le.return=G,G=le;break e}}else if(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===j&&wi(Te)===H.type){u(G,H.sibling),le=v(H,Y.props),Ho(le,Y),le.return=G,G=le;break e}u(G,H);break}else o(G,H);H=H.sibling}Y.type===S?(le=yi(Y.props.children,G.mode,le,Y.key),le.return=G,G=le):(le=nc(Y.type,Y.key,Y.props,null,G.mode,le),Ho(le,Y),le.return=G,G=le)}return C(G);case x:e:{for(Te=Y.key;H!==null;){if(H.key===Te)if(H.tag===4&&H.stateNode.containerInfo===Y.containerInfo&&H.stateNode.implementation===Y.implementation){u(G,H.sibling),le=v(H,Y.children||[]),le.return=G,G=le;break e}else{u(G,H);break}else o(G,H);H=H.sibling}le=Vh(Y,G.mode,le),le.return=G,G=le}return C(G);case j:return Y=wi(Y),St(G,H,Y,le)}if(V(Y))return Se(G,H,Y,le);if(Q(Y)){if(Te=Q(Y),typeof Te!="function")throw Error(r(150));return Y=Te.call(Y),Ie(G,H,Y,le)}if(typeof Y.then=="function")return St(G,H,uc(Y),le);if(Y.$$typeof===R)return St(G,H,ic(G,Y),le);cc(G,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,H!==null&&H.tag===6?(u(G,H.sibling),le=v(H,Y),le.return=G,G=le):(u(G,H),le=Hh(Y,G.mode,le),le.return=G,G=le),C(G)):u(G,H)}return function(G,H,Y,le){try{qo=0;var Te=St(G,H,Y,le);return Sa=null,Te}catch(Ee){if(Ee===xa||Ee===oc)throw Ee;var ut=Un(29,Ee,null,G.mode);return ut.lanes=le,ut.return=G,ut}}}var Ci=Ub(!0),qb=Ub(!1),Rs=!1;function rp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sp(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function As(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ts(i,o,u){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(dt&2)!==0){var v=h.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),h.pending=o,o=tc(i),kb(i,null,u),o}return ec(i,h,o,u),tc(i)}function Vo(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,Dv(i,u)}}function ip(i,o){var u=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var v=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?v=b=C:b=b.next=C,u=u.next}while(u!==null);b===null?v=b=o:b=b.next=o}else v=b=o;u={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}var ap=!1;function Ko(){if(ap){var i=ba;if(i!==null)throw i}}function Go(i,o,u,h){ap=!1;var v=i.updateQueue;Rs=!1;var b=v.firstBaseUpdate,C=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var U=O,J=U.next;U.next=null,C===null?b=J:C.next=J,C=U;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,O=ie.lastBaseUpdate,O!==C&&(O===null?ie.firstBaseUpdate=J:O.next=J,ie.lastBaseUpdate=U))}if(b!==null){var ue=v.baseState;C=0,ie=J=U=null,O=b;do{var ee=O.lane&-536870913,re=ee!==O.lane;if(re?(We&ee)===ee:(h&ee)===ee){ee!==0&&ee===va&&(ap=!0),ie!==null&&(ie=ie.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Se=i,Ie=O;ee=o;var St=u;switch(Ie.tag){case 1:if(Se=Ie.payload,typeof Se=="function"){ue=Se.call(St,ue,ee);break e}ue=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ie.payload,ee=typeof Se=="function"?Se.call(St,ue,ee):Se,ee==null)break e;ue=p({},ue,ee);break e;case 2:Rs=!0}}ee=O.callback,ee!==null&&(i.flags|=64,re&&(i.flags|=8192),re=v.callbacks,re===null?v.callbacks=[ee]:re.push(ee))}else re={lane:ee,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ie===null?(J=ie=re,U=ue):ie=ie.next=re,C|=ee;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;re=O,O=re.next,re.next=null,v.lastBaseUpdate=re,v.shared.pending=null}}while(!0);ie===null&&(U=ue),v.baseState=U,v.firstBaseUpdate=J,v.lastBaseUpdate=ie,b===null&&(v.shared.lanes=0),Ds|=C,i.lanes=C,i.memoizedState=ue}}function Hb(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function Vb(i,o){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)Hb(u[i],o)}var wa=D(null),fc=D(0);function Kb(i,o){i=ls,T(fc,i),T(wa,o),ls=i|o.baseLanes}function op(){T(fc,ls),T(wa,wa.current)}function lp(){ls=fc.current,$(wa),$(fc)}var qn=D(null),dr=null;function Os(i){var o=i.alternate;T(Nt,Nt.current&1),T(qn,i),dr===null&&(o===null||wa.current!==null||o.memoizedState!==null)&&(dr=i)}function up(i){T(Nt,Nt.current),T(qn,i),dr===null&&(dr=i)}function Gb(i){i.tag===22?(T(Nt,Nt.current),T(qn,i),dr===null&&(dr=i)):Ms()}function Ms(){T(Nt,Nt.current),T(qn,qn.current)}function Hn(i){$(qn),dr===i&&(dr=null),$(Nt)}var Nt=D(0);function dc(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||mm(u)||gm(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var es=0,qe=null,bt=null,jt=null,hc=!1,_a=!1,Ei=!1,pc=0,Qo=0,Ca=null,WO=0;function Mt(){throw Error(r(321))}function cp(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Bn(i[u],o[u]))return!1;return!0}function fp(i,o,u,h,v,b){return es=b,qe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,F.H=i===null||i.memoizedState===null?Ox:kp,Ei=!1,b=u(h,v),Ei=!1,_a&&(b=Zb(o,u,h,v)),Qb(i),b}function Qb(i){F.H=Jo;var o=bt!==null&&bt.next!==null;if(es=0,jt=bt=qe=null,hc=!1,Qo=0,Ca=null,o)throw Error(r(300));i===null||Lt||(i=i.dependencies,i!==null&&sc(i)&&(Lt=!0))}function Zb(i,o,u,h){qe=i;var v=0;do{if(_a&&(Ca=null),Qo=0,_a=!1,25<=v)throw Error(r(301));if(v+=1,jt=bt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}F.H=Mx,b=o(u,h)}while(_a);return b}function e2(){var i=F.H,o=i.useState()[0];return o=typeof o.then=="function"?Zo(o):o,i=i.useState()[0],(bt!==null?bt.memoizedState:null)!==i&&(qe.flags|=1024),o}function dp(){var i=pc!==0;return pc=0,i}function hp(i,o,u){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~u}function pp(i){if(hc){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}hc=!1}es=0,jt=bt=qe=null,_a=!1,Qo=pc=0,Ca=null}function vn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?qe.memoizedState=jt=i:jt=jt.next=i,jt}function Dt(){if(bt===null){var i=qe.alternate;i=i!==null?i.memoizedState:null}else i=bt.next;var o=jt===null?qe.memoizedState:jt.next;if(o!==null)jt=o,bt=i;else{if(i===null)throw qe.alternate===null?Error(r(467)):Error(r(310));bt=i,i={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},jt===null?qe.memoizedState=jt=i:jt=jt.next=i}return jt}function mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zo(i){var o=Qo;return Qo+=1,Ca===null&&(Ca=[]),i=Fb(Ca,i,o),o=qe,(jt===null?o.memoizedState:jt.next)===null&&(o=o.alternate,F.H=o===null||o.memoizedState===null?Ox:kp),i}function gc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Zo(i);if(i.$$typeof===R)return sn(i)}throw Error(r(438,String(i)))}function mp(i){var o=null,u=qe.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var h=qe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=mc(),qe.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(i),h=0;h<i;h++)u[h]=M;return o.index++,u}function ts(i,o){return typeof o=="function"?o(i):o}function yc(i){var o=Dt();return gp(o,bt,i)}function gp(i,o,u){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=u;var v=i.baseQueue,b=h.pending;if(b!==null){if(v!==null){var C=v.next;v.next=b.next,b.next=C}o.baseQueue=v=b,h.pending=null}if(b=i.baseState,v===null)i.memoizedState=b;else{o=v.next;var O=C=null,U=null,J=o,ie=!1;do{var ue=J.lane&-536870913;if(ue!==J.lane?(We&ue)===ue:(es&ue)===ue){var ee=J.revertLane;if(ee===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ue===va&&(ie=!0);else if((es&ee)===ee){J=J.next,ee===va&&(ie=!0);continue}else ue={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(O=U=ue,C=b):U=U.next=ue,qe.lanes|=ee,Ds|=ee;ue=J.action,Ei&&u(b,ue),b=J.hasEagerState?J.eagerState:u(b,ue)}else ee={lane:ue,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(O=U=ee,C=b):U=U.next=ee,qe.lanes|=ue,Ds|=ue;J=J.next}while(J!==null&&J!==o);if(U===null?C=b:U.next=O,!Bn(b,i.memoizedState)&&(Lt=!0,ie&&(u=ba,u!==null)))throw u;i.memoizedState=b,i.baseState=C,i.baseQueue=U,h.lastRenderedState=b}return v===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function yp(i){var o=Dt(),u=o.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var h=u.dispatch,v=u.pending,b=o.memoizedState;if(v!==null){u.pending=null;var C=v=v.next;do b=i(b,C.action),C=C.next;while(C!==v);Bn(b,o.memoizedState)||(Lt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),u.lastRenderedState=b}return[b,h]}function Yb(i,o,u){var h=qe,v=Dt(),b=nt;if(b){if(u===void 0)throw Error(r(407));u=u()}else u=o();var C=!Bn((bt||v).memoizedState,u);if(C&&(v.memoizedState=u,Lt=!0),v=v.queue,xp(Wb.bind(null,h,v,i),[i]),v.getSnapshot!==o||C||jt!==null&&jt.memoizedState.tag&1){if(h.flags|=2048,Ea(9,{destroy:void 0},Xb.bind(null,h,v,u,o),null),_t===null)throw Error(r(349));b||(es&127)!==0||Jb(h,o,u)}return u}function Jb(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=qe.updateQueue,o===null?(o=mc(),qe.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function Xb(i,o,u,h){o.value=u,o.getSnapshot=h,ex(o)&&tx(i)}function Wb(i,o,u){return u(function(){ex(o)&&tx(i)})}function ex(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Bn(i,u)}catch{return!0}}function tx(i){var o=gi(i,2);o!==null&&Nn(o,i,2)}function vp(i){var o=vn();if(typeof i=="function"){var u=i;if(i=u(),Ei){kn(!0);try{u()}finally{kn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:i},o}function nx(i,o,u,h){return i.baseState=u,gp(i,bt,typeof h=="function"?h:ts)}function t2(i,o,u,h,v){if(xc(i))throw Error(r(485));if(i=o.action,i!==null){var b={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){b.listeners.push(C)}};F.T!==null?u(!0):b.isTransition=!1,h(b),u=o.pending,u===null?(b.next=o.pending=b,rx(o,b)):(b.next=u.next,o.pending=u.next=b)}}function rx(i,o){var u=o.action,h=o.payload,v=i.state;if(o.isTransition){var b=F.T,C={};F.T=C;try{var O=u(v,h),U=F.S;U!==null&&U(C,O),sx(i,o,O)}catch(J){bp(i,o,J)}finally{b!==null&&C.types!==null&&(b.types=C.types),F.T=b}}else try{b=u(v,h),sx(i,o,b)}catch(J){bp(i,o,J)}}function sx(i,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){ix(i,o,h)},function(h){return bp(i,o,h)}):ix(i,o,u)}function ix(i,o,u){o.status="fulfilled",o.value=u,ax(o),i.state=u,o=i.pending,o!==null&&(u=o.next,u===o?i.pending=null:(u=u.next,o.next=u,rx(i,u)))}function bp(i,o,u){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=u,ax(o),o=o.next;while(o!==h)}i.action=null}function ax(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function ox(i,o){return o}function lx(i,o){if(nt){var u=_t.formState;if(u!==null){e:{var h=qe;if(nt){if(kt){t:{for(var v=kt,b=fr;v.nodeType!==8;){if(!b){v=null;break t}if(v=hr(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){kt=hr(v.nextSibling),h=v.data==="F!";break e}}Es(h)}h=!1}h&&(o=u[0])}}return u=vn(),u.memoizedState=u.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ox,lastRenderedState:o},u.queue=h,u=Rx.bind(null,qe,h),h.dispatch=u,h=vp(!1),b=Ep.bind(null,qe,!1,h.queue),h=vn(),v={state:o,dispatch:null,action:i,pending:null},h.queue=v,u=t2.bind(null,qe,v,b,u),v.dispatch=u,h.memoizedState=i,[o,u,!1]}function ux(i){var o=Dt();return cx(o,bt,i)}function cx(i,o,u){if(o=gp(i,o,ox)[0],i=yc(ts)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=Zo(o)}catch(C){throw C===xa?oc:C}else h=o;o=Dt();var v=o.queue,b=v.dispatch;return u!==o.memoizedState&&(qe.flags|=2048,Ea(9,{destroy:void 0},n2.bind(null,v,u),null)),[h,b,i]}function n2(i,o){i.action=o}function fx(i){var o=Dt(),u=bt;if(u!==null)return cx(o,u,i);Dt(),o=o.memoizedState,u=Dt();var h=u.queue.dispatch;return u.memoizedState=i,[o,h,!1]}function Ea(i,o,u,h){return i={tag:i,create:u,deps:h,inst:o,next:null},o=qe.updateQueue,o===null&&(o=mc(),qe.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=i.next=i:(h=u.next,u.next=i,i.next=h,o.lastEffect=i),i}function dx(){return Dt().memoizedState}function vc(i,o,u,h){var v=vn();qe.flags|=i,v.memoizedState=Ea(1|o,{destroy:void 0},u,h===void 0?null:h)}function bc(i,o,u,h){var v=Dt();h=h===void 0?null:h;var b=v.memoizedState.inst;bt!==null&&h!==null&&cp(h,bt.memoizedState.deps)?v.memoizedState=Ea(o,b,u,h):(qe.flags|=i,v.memoizedState=Ea(1|o,b,u,h))}function hx(i,o){vc(8390656,8,i,o)}function xp(i,o){bc(2048,8,i,o)}function r2(i){qe.flags|=4;var o=qe.updateQueue;if(o===null)o=mc(),qe.updateQueue=o,o.events=[i];else{var u=o.events;u===null?o.events=[i]:u.push(i)}}function px(i){var o=Dt().memoizedState;return r2({ref:o,nextImpl:i}),function(){if((dt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function mx(i,o){return bc(4,2,i,o)}function gx(i,o){return bc(4,4,i,o)}function yx(i,o){if(typeof o=="function"){i=i();var u=o(i);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function vx(i,o,u){u=u!=null?u.concat([i]):null,bc(4,4,yx.bind(null,o,i),u)}function Sp(){}function bx(i,o){var u=Dt();o=o===void 0?null:o;var h=u.memoizedState;return o!==null&&cp(o,h[1])?h[0]:(u.memoizedState=[i,o],i)}function xx(i,o){var u=Dt();o=o===void 0?null:o;var h=u.memoizedState;if(o!==null&&cp(o,h[1]))return h[0];if(h=i(),Ei){kn(!0);try{i()}finally{kn(!1)}}return u.memoizedState=[h,o],h}function wp(i,o,u){return u===void 0||(es&1073741824)!==0&&(We&261930)===0?i.memoizedState=o:(i.memoizedState=u,i=SS(),qe.lanes|=i,Ds|=i,u)}function Sx(i,o,u,h){return Bn(u,o)?u:wa.current!==null?(i=wp(i,u,h),Bn(i,o)||(Lt=!0),i):(es&42)===0||(es&1073741824)!==0&&(We&261930)===0?(Lt=!0,i.memoizedState=u):(i=SS(),qe.lanes|=i,Ds|=i,o)}function wx(i,o,u,h,v){var b=X.p;X.p=b!==0&&8>b?b:8;var C=F.T,O={};F.T=O,Ep(i,!1,o,u);try{var U=v(),J=F.S;if(J!==null&&J(O,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ie=XO(U,h);Yo(i,o,ie,Gn(i))}else Yo(i,o,h,Gn(i))}catch(ue){Yo(i,o,{then:function(){},status:"rejected",reason:ue},Gn())}finally{X.p=b,C!==null&&O.types!==null&&(C.types=O.types),F.T=C}}function s2(){}function _p(i,o,u,h){if(i.tag!==5)throw Error(r(476));var v=_x(i).queue;wx(i,v,o,oe,u===null?s2:function(){return Cx(i),u(h)})}function _x(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:oe},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:u},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Cx(i){var o=_x(i);o.next===null&&(o=i.alternate.memoizedState),Yo(i,o.next.queue,{},Gn())}function Cp(){return sn(hl)}function Ex(){return Dt().memoizedState}function kx(){return Dt().memoizedState}function i2(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var u=Gn();i=As(u);var h=Ts(o,i,u);h!==null&&(Nn(h,o,u),Vo(h,o,u)),o={cache:Wh()},i.payload=o;return}o=o.return}}function a2(i,o,u){var h=Gn();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},xc(i)?Ax(o,u):(u=Uh(i,o,u,h),u!==null&&(Nn(u,i,h),Tx(u,o,h)))}function Rx(i,o,u){var h=Gn();Yo(i,o,u,h)}function Yo(i,o,u,h){var v={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(xc(i))Ax(o,v);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var C=o.lastRenderedState,O=b(C,u);if(v.hasEagerState=!0,v.eagerState=O,Bn(O,C))return ec(i,o,v,0),_t===null&&Wu(),!1}catch{}if(u=Uh(i,o,v,h),u!==null)return Nn(u,i,h),Tx(u,o,h),!0}return!1}function Ep(i,o,u,h){if(h={lane:2,revertLane:rm(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},xc(i)){if(o)throw Error(r(479))}else o=Uh(i,u,h,2),o!==null&&Nn(o,i,2)}function xc(i){var o=i.alternate;return i===qe||o!==null&&o===qe}function Ax(i,o){_a=hc=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Tx(i,o,u){if((u&4194048)!==0){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,Dv(i,u)}}var Jo={readContext:sn,use:gc,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};Jo.useEffectEvent=Mt;var Ox={readContext:sn,use:gc,useCallback:function(i,o){return vn().memoizedState=[i,o===void 0?null:o],i},useContext:sn,useEffect:hx,useImperativeHandle:function(i,o,u){u=u!=null?u.concat([i]):null,vc(4194308,4,yx.bind(null,o,i),u)},useLayoutEffect:function(i,o){return vc(4194308,4,i,o)},useInsertionEffect:function(i,o){vc(4,2,i,o)},useMemo:function(i,o){var u=vn();o=o===void 0?null:o;var h=i();if(Ei){kn(!0);try{i()}finally{kn(!1)}}return u.memoizedState=[h,o],h},useReducer:function(i,o,u){var h=vn();if(u!==void 0){var v=u(o);if(Ei){kn(!0);try{u(o)}finally{kn(!1)}}}else v=o;return h.memoizedState=h.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},h.queue=i,i=i.dispatch=a2.bind(null,qe,i),[h.memoizedState,i]},useRef:function(i){var o=vn();return i={current:i},o.memoizedState=i},useState:function(i){i=vp(i);var o=i.queue,u=Rx.bind(null,qe,o);return o.dispatch=u,[i.memoizedState,u]},useDebugValue:Sp,useDeferredValue:function(i,o){var u=vn();return wp(u,i,o)},useTransition:function(){var i=vp(!1);return i=wx.bind(null,qe,i.queue,!0,!1),vn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,u){var h=qe,v=vn();if(nt){if(u===void 0)throw Error(r(407));u=u()}else{if(u=o(),_t===null)throw Error(r(349));(We&127)!==0||Jb(h,o,u)}v.memoizedState=u;var b={value:u,getSnapshot:o};return v.queue=b,hx(Wb.bind(null,h,b,i),[i]),h.flags|=2048,Ea(9,{destroy:void 0},Xb.bind(null,h,b,u,o),null),u},useId:function(){var i=vn(),o=_t.identifierPrefix;if(nt){var u=Dr,h=Nr;u=(h&~(1<<32-wt(h)-1)).toString(32)+u,o="_"+o+"R_"+u,u=pc++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=WO++,o="_"+o+"r_"+u.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Cp,useFormState:lx,useActionState:lx,useOptimistic:function(i){var o=vn();o.memoizedState=o.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Ep.bind(null,qe,!0,u),u.dispatch=o,[i,o]},useMemoCache:mp,useCacheRefresh:function(){return vn().memoizedState=i2.bind(null,qe)},useEffectEvent:function(i){var o=vn(),u={impl:i};return o.memoizedState=u,function(){if((dt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},kp={readContext:sn,use:gc,useCallback:bx,useContext:sn,useEffect:xp,useImperativeHandle:vx,useInsertionEffect:mx,useLayoutEffect:gx,useMemo:xx,useReducer:yc,useRef:dx,useState:function(){return yc(ts)},useDebugValue:Sp,useDeferredValue:function(i,o){var u=Dt();return Sx(u,bt.memoizedState,i,o)},useTransition:function(){var i=yc(ts)[0],o=Dt().memoizedState;return[typeof i=="boolean"?i:Zo(i),o]},useSyncExternalStore:Yb,useId:Ex,useHostTransitionStatus:Cp,useFormState:ux,useActionState:ux,useOptimistic:function(i,o){var u=Dt();return nx(u,bt,i,o)},useMemoCache:mp,useCacheRefresh:kx};kp.useEffectEvent=px;var Mx={readContext:sn,use:gc,useCallback:bx,useContext:sn,useEffect:xp,useImperativeHandle:vx,useInsertionEffect:mx,useLayoutEffect:gx,useMemo:xx,useReducer:yp,useRef:dx,useState:function(){return yp(ts)},useDebugValue:Sp,useDeferredValue:function(i,o){var u=Dt();return bt===null?wp(u,i,o):Sx(u,bt.memoizedState,i,o)},useTransition:function(){var i=yp(ts)[0],o=Dt().memoizedState;return[typeof i=="boolean"?i:Zo(i),o]},useSyncExternalStore:Yb,useId:Ex,useHostTransitionStatus:Cp,useFormState:fx,useActionState:fx,useOptimistic:function(i,o){var u=Dt();return bt!==null?nx(u,bt,i,o):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:mp,useCacheRefresh:kx};Mx.useEffectEvent=px;function Rp(i,o,u,h){o=i.memoizedState,u=u(h,o),u=u==null?o:p({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Ap={enqueueSetState:function(i,o,u){i=i._reactInternals;var h=Gn(),v=As(h);v.payload=o,u!=null&&(v.callback=u),o=Ts(i,v,h),o!==null&&(Nn(o,i,h),Vo(o,i,h))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var h=Gn(),v=As(h);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=Ts(i,v,h),o!==null&&(Nn(o,i,h),Vo(o,i,h))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Gn(),h=As(u);h.tag=2,o!=null&&(h.callback=o),o=Ts(i,h,u),o!==null&&(Nn(o,i,u),Vo(o,i,u))}};function Ix(i,o,u,h,v,b,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,b,C):o.prototype&&o.prototype.isPureReactComponent?!Lo(u,h)||!Lo(v,b):!0}function Nx(i,o,u,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==i&&Ap.enqueueReplaceState(o,o.state,null)}function ki(i,o){var u=o;if("ref"in o){u={};for(var h in o)h!=="ref"&&(u[h]=o[h])}if(i=i.defaultProps){u===o&&(u=p({},u));for(var v in i)u[v]===void 0&&(u[v]=i[v])}return u}function Dx(i){Xu(i)}function zx(i){console.error(i)}function jx(i){Xu(i)}function Sc(i,o){try{var u=i.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function Lx(i,o,u){try{var h=i.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Tp(i,o,u){return u=As(u),u.tag=3,u.payload={element:null},u.callback=function(){Sc(i,o)},u}function Px(i){return i=As(i),i.tag=3,i}function Fx(i,o,u,h){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var b=h.value;i.payload=function(){return v(b)},i.callback=function(){Lx(o,u,h)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){Lx(o,u,h),typeof v!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var O=h.stack;this.componentDidCatch(h.value,{componentStack:O!==null?O:""})})}function o2(i,o,u,h,v){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=u.alternate,o!==null&&ya(o,u,v,!0),u=qn.current,u!==null){switch(u.tag){case 31:case 13:return dr===null?Nc():u.alternate===null&&It===0&&(It=3),u.flags&=-257,u.flags|=65536,u.lanes=v,h===lc?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([h]):o.add(h),em(i,h,v)),!1;case 22:return u.flags|=65536,h===lc?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([h]):u.add(h)),em(i,h,v)),!1}throw Error(r(435,u.tag))}return em(i,h,v),Nc(),!1}if(nt)return o=qn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,h!==Qh&&(i=Error(r(422),{cause:h}),$o(lr(i,u)))):(h!==Qh&&(o=Error(r(423),{cause:h}),$o(lr(o,u))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,h=lr(h,u),v=Tp(i.stateNode,h,v),ip(i,v),It!==4&&(It=2)),!1;var b=Error(r(520),{cause:h});if(b=lr(b,u),il===null?il=[b]:il.push(b),It!==4&&(It=2),o===null)return!0;h=lr(h,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,i=v&-v,u.lanes|=i,i=Tp(u.stateNode,h,i),ip(u,i),!1;case 1:if(o=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(zs===null||!zs.has(b))))return u.flags|=65536,v&=-v,u.lanes|=v,v=Px(v),Fx(v,i,u,h),ip(u,v),!1}u=u.return}while(u!==null);return!1}var Op=Error(r(461)),Lt=!1;function an(i,o,u,h){o.child=i===null?qb(o,null,u,h):Ci(o,i.child,u,h)}function $x(i,o,u,h,v){u=u.render;var b=o.ref;if("ref"in h){var C={};for(var O in h)O!=="ref"&&(C[O]=h[O])}else C=h;return xi(o),h=fp(i,o,u,C,b,v),O=dp(),i!==null&&!Lt?(hp(i,o,v),ns(i,o,v)):(nt&&O&&Kh(o),o.flags|=1,an(i,o,h,v),o.child)}function Bx(i,o,u,h,v){if(i===null){var b=u.type;return typeof b=="function"&&!qh(b)&&b.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=b,Ux(i,o,b,h,v)):(i=nc(u.type,null,h,o,o.mode,v),i.ref=o.ref,i.return=o,o.child=i)}if(b=i.child,!Pp(i,v)){var C=b.memoizedProps;if(u=u.compare,u=u!==null?u:Lo,u(C,h)&&i.ref===o.ref)return ns(i,o,v)}return o.flags|=1,i=Yr(b,h),i.ref=o.ref,i.return=o,o.child=i}function Ux(i,o,u,h,v){if(i!==null){var b=i.memoizedProps;if(Lo(b,h)&&i.ref===o.ref)if(Lt=!1,o.pendingProps=h=b,Pp(i,v))(i.flags&131072)!==0&&(Lt=!0);else return o.lanes=i.lanes,ns(i,o,v)}return Mp(i,o,u,h,v)}function qx(i,o,u,h){var v=h.children,b=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,i!==null){for(h=o.child=i.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~b}else h=0,o.child=null;return Hx(i,o,b,u,h)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&ac(o,b!==null?b.cachePool:null),b!==null?Kb(o,b):op(),Gb(o);else return h=o.lanes=536870912,Hx(i,o,b!==null?b.baseLanes|u:u,u,h)}else b!==null?(ac(o,b.cachePool),Kb(o,b),Ms(),o.memoizedState=null):(i!==null&&ac(o,null),op(),Ms());return an(i,o,v,u),o.child}function Xo(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Hx(i,o,u,h,v){var b=tp();return b=b===null?null:{parent:zt._currentValue,pool:b},o.memoizedState={baseLanes:u,cachePool:b},i!==null&&ac(o,null),op(),Gb(o),i!==null&&ya(i,o,h,!0),o.childLanes=v,null}function wc(i,o){return o=Cc({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Vx(i,o,u){return Ci(o,i.child,null,u),i=wc(o,o.pendingProps),i.flags|=2,Hn(o),o.memoizedState=null,i}function l2(i,o,u){var h=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(nt){if(h.mode==="hidden")return i=wc(o,h),o.lanes=536870912,Xo(null,i);if(up(o),(i=kt)?(i=rw(i,fr),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:_s!==null?{id:Nr,overflow:Dr}:null,retryLane:536870912,hydrationErrors:null},u=Ab(i),u.return=o,o.child=u,rn=o,kt=null)):i=null,i===null)throw Es(o);return o.lanes=536870912,null}return wc(o,h)}var b=i.memoizedState;if(b!==null){var C=b.dehydrated;if(up(o),v)if(o.flags&256)o.flags&=-257,o=Vx(i,o,u);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(Lt||ya(i,o,u,!1),v=(u&i.childLanes)!==0,Lt||v){if(h=_t,h!==null&&(C=zv(h,u),C!==0&&C!==b.retryLane))throw b.retryLane=C,gi(i,C),Nn(h,i,C),Op;Nc(),o=Vx(i,o,u)}else i=b.treeContext,kt=hr(C.nextSibling),rn=o,nt=!0,Cs=null,fr=!1,i!==null&&Mb(o,i),o=wc(o,h),o.flags|=4096;return o}return i=Yr(i.child,{mode:h.mode,children:h.children}),i.ref=o.ref,o.child=i,i.return=o,i}function _c(i,o){var u=o.ref;if(u===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(o.flags|=4194816)}}function Mp(i,o,u,h,v){return xi(o),u=fp(i,o,u,h,void 0,v),h=dp(),i!==null&&!Lt?(hp(i,o,v),ns(i,o,v)):(nt&&h&&Kh(o),o.flags|=1,an(i,o,u,v),o.child)}function Kx(i,o,u,h,v,b){return xi(o),o.updateQueue=null,u=Zb(o,h,u,v),Qb(i),h=dp(),i!==null&&!Lt?(hp(i,o,b),ns(i,o,b)):(nt&&h&&Kh(o),o.flags|=1,an(i,o,u,b),o.child)}function Gx(i,o,u,h,v){if(xi(o),o.stateNode===null){var b=ha,C=u.contextType;typeof C=="object"&&C!==null&&(b=sn(C)),b=new u(h,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Ap,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=h,b.state=o.memoizedState,b.refs={},rp(o),C=u.contextType,b.context=typeof C=="object"&&C!==null?sn(C):ha,b.state=o.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(Rp(o,u,C,h),b.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(C=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),C!==b.state&&Ap.enqueueReplaceState(b,b.state,null),Go(o,h,b,v),Ko(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(i===null){b=o.stateNode;var O=o.memoizedProps,U=ki(u,O);b.props=U;var J=b.context,ie=u.contextType;C=ha,typeof ie=="object"&&ie!==null&&(C=sn(ie));var ue=u.getDerivedStateFromProps;ie=typeof ue=="function"||typeof b.getSnapshotBeforeUpdate=="function",O=o.pendingProps!==O,ie||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(O||J!==C)&&Nx(o,b,h,C),Rs=!1;var ee=o.memoizedState;b.state=ee,Go(o,h,b,v),Ko(),J=o.memoizedState,O||ee!==J||Rs?(typeof ue=="function"&&(Rp(o,u,ue,h),J=o.memoizedState),(U=Rs||Ix(o,u,U,h,ee,J,C))?(ie||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=J),b.props=h,b.state=J,b.context=C,h=U):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{b=o.stateNode,sp(i,o),C=o.memoizedProps,ie=ki(u,C),b.props=ie,ue=o.pendingProps,ee=b.context,J=u.contextType,U=ha,typeof J=="object"&&J!==null&&(U=sn(J)),O=u.getDerivedStateFromProps,(J=typeof O=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C!==ue||ee!==U)&&Nx(o,b,h,U),Rs=!1,ee=o.memoizedState,b.state=ee,Go(o,h,b,v),Ko();var re=o.memoizedState;C!==ue||ee!==re||Rs||i!==null&&i.dependencies!==null&&sc(i.dependencies)?(typeof O=="function"&&(Rp(o,u,O,h),re=o.memoizedState),(ie=Rs||Ix(o,u,ie,h,ee,re,U)||i!==null&&i.dependencies!==null&&sc(i.dependencies))?(J||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,re,U),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,re,U)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||C===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=re),b.props=h,b.state=re,b.context=U,h=ie):(typeof b.componentDidUpdate!="function"||C===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),h=!1)}return b=h,_c(i,o),h=(o.flags&128)!==0,b||h?(b=o.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,i!==null&&h?(o.child=Ci(o,i.child,null,v),o.child=Ci(o,null,u,v)):an(i,o,u,v),o.memoizedState=b.state,i=o.child):i=ns(i,o,v),i}function Qx(i,o,u,h){return vi(),o.flags|=256,an(i,o,u,h),o.child}var Ip={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Np(i){return{baseLanes:i,cachePool:Lb()}}function Dp(i,o,u){return i=i!==null?i.childLanes&~u:0,o&&(i|=Kn),i}function Zx(i,o,u){var h=o.pendingProps,v=!1,b=(o.flags&128)!==0,C;if((C=b)||(C=i!==null&&i.memoizedState===null?!1:(Nt.current&2)!==0),C&&(v=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,i===null){if(nt){if(v?Os(o):Ms(),(i=kt)?(i=rw(i,fr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:_s!==null?{id:Nr,overflow:Dr}:null,retryLane:536870912,hydrationErrors:null},u=Ab(i),u.return=o,o.child=u,rn=o,kt=null)):i=null,i===null)throw Es(o);return gm(i)?o.lanes=32:o.lanes=536870912,null}var O=h.children;return h=h.fallback,v?(Ms(),v=o.mode,O=Cc({mode:"hidden",children:O},v),h=yi(h,v,u,null),O.return=o,h.return=o,O.sibling=h,o.child=O,h=o.child,h.memoizedState=Np(u),h.childLanes=Dp(i,C,u),o.memoizedState=Ip,Xo(null,h)):(Os(o),zp(o,O))}var U=i.memoizedState;if(U!==null&&(O=U.dehydrated,O!==null)){if(b)o.flags&256?(Os(o),o.flags&=-257,o=jp(i,o,u)):o.memoizedState!==null?(Ms(),o.child=i.child,o.flags|=128,o=null):(Ms(),O=h.fallback,v=o.mode,h=Cc({mode:"visible",children:h.children},v),O=yi(O,v,u,null),O.flags|=2,h.return=o,O.return=o,h.sibling=O,o.child=h,Ci(o,i.child,null,u),h=o.child,h.memoizedState=Np(u),h.childLanes=Dp(i,C,u),o.memoizedState=Ip,o=Xo(null,h));else if(Os(o),gm(O)){if(C=O.nextSibling&&O.nextSibling.dataset,C)var J=C.dgst;C=J,h=Error(r(419)),h.stack="",h.digest=C,$o({value:h,source:null,stack:null}),o=jp(i,o,u)}else if(Lt||ya(i,o,u,!1),C=(u&i.childLanes)!==0,Lt||C){if(C=_t,C!==null&&(h=zv(C,u),h!==0&&h!==U.retryLane))throw U.retryLane=h,gi(i,h),Nn(C,i,h),Op;mm(O)||Nc(),o=jp(i,o,u)}else mm(O)?(o.flags|=192,o.child=i.child,o=null):(i=U.treeContext,kt=hr(O.nextSibling),rn=o,nt=!0,Cs=null,fr=!1,i!==null&&Mb(o,i),o=zp(o,h.children),o.flags|=4096);return o}return v?(Ms(),O=h.fallback,v=o.mode,U=i.child,J=U.sibling,h=Yr(U,{mode:"hidden",children:h.children}),h.subtreeFlags=U.subtreeFlags&65011712,J!==null?O=Yr(J,O):(O=yi(O,v,u,null),O.flags|=2),O.return=o,h.return=o,h.sibling=O,o.child=h,Xo(null,h),h=o.child,O=i.child.memoizedState,O===null?O=Np(u):(v=O.cachePool,v!==null?(U=zt._currentValue,v=v.parent!==U?{parent:U,pool:U}:v):v=Lb(),O={baseLanes:O.baseLanes|u,cachePool:v}),h.memoizedState=O,h.childLanes=Dp(i,C,u),o.memoizedState=Ip,Xo(i.child,h)):(Os(o),u=i.child,i=u.sibling,u=Yr(u,{mode:"visible",children:h.children}),u.return=o,u.sibling=null,i!==null&&(C=o.deletions,C===null?(o.deletions=[i],o.flags|=16):C.push(i)),o.child=u,o.memoizedState=null,u)}function zp(i,o){return o=Cc({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Cc(i,o){return i=Un(22,i,null,o),i.lanes=0,i}function jp(i,o,u){return Ci(o,i.child,null,u),i=zp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Yx(i,o,u){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),Jh(i.return,o,u)}function Lp(i,o,u,h,v,b){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:v,treeForkCount:b}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=h,C.tail=u,C.tailMode=v,C.treeForkCount=b)}function Jx(i,o,u){var h=o.pendingProps,v=h.revealOrder,b=h.tail;h=h.children;var C=Nt.current,O=(C&2)!==0;if(O?(C=C&1|2,o.flags|=128):C&=1,T(Nt,C),an(i,o,h,u),h=nt?Fo:0,!O&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Yx(i,u,o);else if(i.tag===19)Yx(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(u=o.child,v=null;u!==null;)i=u.alternate,i!==null&&dc(i)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),Lp(o,!1,v,u,b,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(i=v.alternate,i!==null&&dc(i)===null){o.child=v;break}i=v.sibling,v.sibling=u,u=v,v=i}Lp(o,!0,u,null,b,h);break;case"together":Lp(o,!1,null,null,void 0,h);break;default:o.memoizedState=null}return o.child}function ns(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Ds|=o.lanes,(u&o.childLanes)===0)if(i!==null){if(ya(i,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,u=Yr(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Yr(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function Pp(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&sc(i)))}function u2(i,o,u){switch(o.tag){case 3:ke(o,o.stateNode.containerInfo),ks(o,zt,i.memoizedState.cache),vi();break;case 27:case 5:Ue(o);break;case 4:ke(o,o.stateNode.containerInfo);break;case 10:ks(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,up(o),null;break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(Os(o),o.flags|=128,null):(u&o.child.childLanes)!==0?Zx(i,o,u):(Os(o),i=ns(i,o,u),i!==null?i.sibling:null);Os(o);break;case 19:var v=(i.flags&128)!==0;if(h=(u&o.childLanes)!==0,h||(ya(i,o,u,!1),h=(u&o.childLanes)!==0),v){if(h)return Jx(i,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),T(Nt,Nt.current),h)break;return null;case 22:return o.lanes=0,qx(i,o,u,o.pendingProps);case 24:ks(o,zt,i.memoizedState.cache)}return ns(i,o,u)}function Xx(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps)Lt=!0;else{if(!Pp(i,u)&&(o.flags&128)===0)return Lt=!1,u2(i,o,u);Lt=(i.flags&131072)!==0}else Lt=!1,nt&&(o.flags&1048576)!==0&&Ob(o,Fo,o.index);switch(o.lanes=0,o.tag){case 16:e:{var h=o.pendingProps;if(i=wi(o.elementType),o.type=i,typeof i=="function")qh(i)?(h=ki(i,h),o.tag=1,o=Gx(null,o,i,h,u)):(o.tag=0,o=Mp(null,o,i,h,u));else{if(i!=null){var v=i.$$typeof;if(v===N){o.tag=11,o=$x(null,o,i,h,u);break e}else if(v===I){o.tag=14,o=Bx(null,o,i,h,u);break e}}throw o=te(i)||i,Error(r(306,o,""))}}return o;case 0:return Mp(i,o,o.type,o.pendingProps,u);case 1:return h=o.type,v=ki(h,o.pendingProps),Gx(i,o,h,v,u);case 3:e:{if(ke(o,o.stateNode.containerInfo),i===null)throw Error(r(387));h=o.pendingProps;var b=o.memoizedState;v=b.element,sp(i,o),Go(o,h,null,u);var C=o.memoizedState;if(h=C.cache,ks(o,zt,h),h!==b.cache&&Xh(o,[zt],u,!0),Ko(),h=C.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Qx(i,o,h,u);break e}else if(h!==v){v=lr(Error(r(424)),o),$o(v),o=Qx(i,o,h,u);break e}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,kt=hr(i.firstChild),rn=o,nt=!0,Cs=null,fr=!0,u=qb(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(vi(),h===v){o=ns(i,o,u);break e}an(i,o,h,u)}o=o.child}return o;case 26:return _c(i,o),i===null?(u=uw(o.type,null,o.pendingProps,null))?o.memoizedState=u:nt||(u=o.type,i=o.pendingProps,h=$c(ce.current).createElement(u),h[nn]=o,h[Rn]=i,on(h,u,i),Yt(h),o.stateNode=h):o.memoizedState=uw(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Ue(o),i===null&&nt&&(h=o.stateNode=aw(o.type,o.pendingProps,ce.current),rn=o,fr=!0,v=kt,Fs(o.type)?(ym=v,kt=hr(h.firstChild)):kt=v),an(i,o,o.pendingProps.children,u),_c(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&nt&&((v=h=kt)&&(h=F2(h,o.type,o.pendingProps,fr),h!==null?(o.stateNode=h,rn=o,kt=hr(h.firstChild),fr=!1,v=!0):v=!1),v||Es(o)),Ue(o),v=o.type,b=o.pendingProps,C=i!==null?i.memoizedProps:null,h=b.children,dm(v,b)?h=null:C!==null&&dm(v,C)&&(o.flags|=32),o.memoizedState!==null&&(v=fp(i,o,e2,null,null,u),hl._currentValue=v),_c(i,o),an(i,o,h,u),o.child;case 6:return i===null&&nt&&((i=u=kt)&&(u=$2(u,o.pendingProps,fr),u!==null?(o.stateNode=u,rn=o,kt=null,i=!0):i=!1),i||Es(o)),null;case 13:return Zx(i,o,u);case 4:return ke(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=Ci(o,null,h,u):an(i,o,h,u),o.child;case 11:return $x(i,o,o.type,o.pendingProps,u);case 7:return an(i,o,o.pendingProps,u),o.child;case 8:return an(i,o,o.pendingProps.children,u),o.child;case 12:return an(i,o,o.pendingProps.children,u),o.child;case 10:return h=o.pendingProps,ks(o,o.type,h.value),an(i,o,h.children,u),o.child;case 9:return v=o.type._context,h=o.pendingProps.children,xi(o),v=sn(v),h=h(v),o.flags|=1,an(i,o,h,u),o.child;case 14:return Bx(i,o,o.type,o.pendingProps,u);case 15:return Ux(i,o,o.type,o.pendingProps,u);case 19:return Jx(i,o,u);case 31:return l2(i,o,u);case 22:return qx(i,o,u,o.pendingProps);case 24:return xi(o),h=sn(zt),i===null?(v=tp(),v===null&&(v=_t,b=Wh(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=u),v=b),o.memoizedState={parent:h,cache:v},rp(o),ks(o,zt,v)):((i.lanes&u)!==0&&(sp(i,o),Go(o,null,null,u),Ko()),v=i.memoizedState,b=o.memoizedState,v.parent!==h?(v={parent:h,cache:h},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),ks(o,zt,h)):(h=b.cache,ks(o,zt,h),h!==v.cache&&Xh(o,[zt],u,!0))),an(i,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function rs(i){i.flags|=4}function Fp(i,o,u,h,v){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(ES())i.flags|=8192;else throw _i=lc,np}else i.flags&=-16777217}function Wx(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!pw(o))if(ES())i.flags|=8192;else throw _i=lc,np}function Ec(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Iv():536870912,i.lanes|=o,Ta|=o)}function Wo(i,o){if(!nt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Rt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,h=0;if(o)for(var v=i.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=h,i.childLanes=u,o}function c2(i,o,u){var h=o.pendingProps;switch(Gh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(o),null;case 1:return Rt(o),null;case 3:return u=o.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Wr(zt),ve(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(ga(o)?rs(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Zh())),Rt(o),null;case 26:var v=o.type,b=o.memoizedState;return i===null?(rs(o),b!==null?(Rt(o),Wx(o,b)):(Rt(o),Fp(o,v,null,h,u))):b?b!==i.memoizedState?(rs(o),Rt(o),Wx(o,b)):(Rt(o),o.flags&=-16777217):(i=i.memoizedProps,i!==h&&rs(o),Rt(o),Fp(o,v,i,h,u)),null;case 27:if(Fe(o),u=ce.current,v=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&rs(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return Rt(o),null}i=K.current,ga(o)?Ib(o):(i=aw(v,h,u),o.stateNode=i,rs(o))}return Rt(o),null;case 5:if(Fe(o),v=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&rs(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return Rt(o),null}if(b=K.current,ga(o))Ib(o);else{var C=$c(ce.current);switch(b){case 1:b=C.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=C.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=C.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof h.is=="string"?C.createElement("select",{is:h.is}):C.createElement("select"),h.multiple?b.multiple=!0:h.size&&(b.size=h.size);break;default:b=typeof h.is=="string"?C.createElement(v,{is:h.is}):C.createElement(v)}}b[nn]=o,b[Rn]=h;e:for(C=o.child;C!==null;){if(C.tag===5||C.tag===6)b.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===o)break e;for(;C.sibling===null;){if(C.return===null||C.return===o)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}o.stateNode=b;e:switch(on(b,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&rs(o)}}return Rt(o),Fp(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,u),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==h&&rs(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(i=ce.current,ga(o)){if(i=o.stateNode,u=o.memoizedProps,h=null,v=rn,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}i[nn]=o,i=!!(i.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||ZS(i.nodeValue,u)),i||Es(o,!0)}else i=$c(i).createTextNode(h),i[nn]=o,o.stateNode=i}return Rt(o),null;case 31:if(u=o.memoizedState,i===null||i.memoizedState!==null){if(h=ga(o),u!==null){if(i===null){if(!h)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[nn]=o}else vi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),i=!1}else u=Zh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return o.flags&256?(Hn(o),o):(Hn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Rt(o),null;case 13:if(h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=ga(o),h!==null&&h.dehydrated!==null){if(i===null){if(!v)throw Error(r(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[nn]=o}else vi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),v=!1}else v=Zh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(Hn(o),o):(Hn(o),null)}return Hn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=h!==null,i=i!==null&&i.memoizedState!==null,u&&(h=o.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==v&&(h.flags|=2048)),u!==i&&u&&(o.child.flags|=8192),Ec(o,o.updateQueue),Rt(o),null);case 4:return ve(),i===null&&om(o.stateNode.containerInfo),Rt(o),null;case 10:return Wr(o.type),Rt(o),null;case 19:if($(Nt),h=o.memoizedState,h===null)return Rt(o),null;if(v=(o.flags&128)!==0,b=h.rendering,b===null)if(v)Wo(h,!1);else{if(It!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(b=dc(i),b!==null){for(o.flags|=128,Wo(h,!1),i=b.updateQueue,o.updateQueue=i,Ec(o,i),o.subtreeFlags=0,i=u,u=o.child;u!==null;)Rb(u,i),u=u.sibling;return T(Nt,Nt.current&1|2),nt&&Jr(o,h.treeForkCount),o.child}i=i.sibling}h.tail!==null&&ge()>Oc&&(o.flags|=128,v=!0,Wo(h,!1),o.lanes=4194304)}else{if(!v)if(i=dc(b),i!==null){if(o.flags|=128,v=!0,i=i.updateQueue,o.updateQueue=i,Ec(o,i),Wo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!b.alternate&&!nt)return Rt(o),null}else 2*ge()-h.renderingStartTime>Oc&&u!==536870912&&(o.flags|=128,v=!0,Wo(h,!1),o.lanes=4194304);h.isBackwards?(b.sibling=o.child,o.child=b):(i=h.last,i!==null?i.sibling=b:o.child=b,h.last=b)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=ge(),i.sibling=null,u=Nt.current,T(Nt,v?u&1|2:u&1),nt&&Jr(o,h.treeForkCount),i):(Rt(o),null);case 22:case 23:return Hn(o),lp(),h=o.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(u&536870912)!==0&&(o.flags&128)===0&&(Rt(o),o.subtreeFlags&6&&(o.flags|=8192)):Rt(o),u=o.updateQueue,u!==null&&Ec(o,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==u&&(o.flags|=2048),i!==null&&$(Si),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Wr(zt),Rt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function f2(i,o){switch(Gh(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Wr(zt),ve(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Fe(o),null;case 31:if(o.memoizedState!==null){if(Hn(o),o.alternate===null)throw Error(r(340));vi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Hn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));vi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return $(Nt),null;case 4:return ve(),null;case 10:return Wr(o.type),null;case 22:case 23:return Hn(o),lp(),i!==null&&$(Si),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Wr(zt),null;case 25:return null;default:return null}}function eS(i,o){switch(Gh(o),o.tag){case 3:Wr(zt),ve();break;case 26:case 27:case 5:Fe(o);break;case 4:ve();break;case 31:o.memoizedState!==null&&Hn(o);break;case 13:Hn(o);break;case 19:$(Nt);break;case 10:Wr(o.type);break;case 22:case 23:Hn(o),lp(),i!==null&&$(Si);break;case 24:Wr(zt)}}function el(i,o){try{var u=o.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var v=h.next;u=v;do{if((u.tag&i)===i){h=void 0;var b=u.create,C=u.inst;h=b(),C.destroy=h}u=u.next}while(u!==v)}}catch(O){mt(o,o.return,O)}}function Is(i,o,u){try{var h=o.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var b=v.next;h=b;do{if((h.tag&i)===i){var C=h.inst,O=C.destroy;if(O!==void 0){C.destroy=void 0,v=o;var U=u,J=O;try{J()}catch(ie){mt(v,U,ie)}}}h=h.next}while(h!==b)}}catch(ie){mt(o,o.return,ie)}}function tS(i){var o=i.updateQueue;if(o!==null){var u=i.stateNode;try{Vb(o,u)}catch(h){mt(i,i.return,h)}}}function nS(i,o,u){u.props=ki(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(h){mt(i,o,h)}}function tl(i,o){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof u=="function"?i.refCleanup=u(h):u.current=h}}catch(v){mt(i,o,v)}}function zr(i,o){var u=i.ref,h=i.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(v){mt(i,o,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){mt(i,o,v)}else u.current=null}function rS(i){var o=i.type,u=i.memoizedProps,h=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(v){mt(i,i.return,v)}}function $p(i,o,u){try{var h=i.stateNode;N2(h,i.type,u,o),h[Rn]=o}catch(v){mt(i,i.return,v)}}function sS(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Fs(i.type)||i.tag===4}function Bp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||sS(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Fs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Up(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(i),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Qr));else if(h!==4&&(h===27&&Fs(i.type)&&(u=i.stateNode,o=null),i=i.child,i!==null))for(Up(i,o,u),i=i.sibling;i!==null;)Up(i,o,u),i=i.sibling}function kc(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(h!==4&&(h===27&&Fs(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(kc(i,o,u),i=i.sibling;i!==null;)kc(i,o,u),i=i.sibling}function iS(i){var o=i.stateNode,u=i.memoizedProps;try{for(var h=i.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);on(o,h,u),o[nn]=i,o[Rn]=u}catch(b){mt(i,i.return,b)}}var ss=!1,Pt=!1,qp=!1,aS=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function d2(i,o){if(i=i.containerInfo,cm=Gc,i=vb(i),jh(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var v=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var C=0,O=-1,U=-1,J=0,ie=0,ue=i,ee=null;t:for(;;){for(var re;ue!==u||v!==0&&ue.nodeType!==3||(O=C+v),ue!==b||h!==0&&ue.nodeType!==3||(U=C+h),ue.nodeType===3&&(C+=ue.nodeValue.length),(re=ue.firstChild)!==null;)ee=ue,ue=re;for(;;){if(ue===i)break t;if(ee===u&&++J===v&&(O=C),ee===b&&++ie===h&&(U=C),(re=ue.nextSibling)!==null)break;ue=ee,ee=ue.parentNode}ue=re}u=O===-1||U===-1?null:{start:O,end:U}}else u=null}u=u||{start:0,end:0}}else u=null;for(fm={focusedElem:i,selectionRange:u},Gc=!1,Jt=o;Jt!==null;)if(o=Jt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Jt=i;else for(;Jt!==null;){switch(o=Jt,b=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)v=i[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,u=o,v=b.memoizedProps,b=b.memoizedState,h=u.stateNode;try{var Se=ki(u.type,v);i=h.getSnapshotBeforeUpdate(Se,b),h.__reactInternalSnapshotBeforeUpdate=i}catch(Ie){mt(u,u.return,Ie)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,u=i.nodeType,u===9)pm(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":pm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,Jt=i;break}Jt=o.return}}function oS(i,o,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:as(i,u),h&4&&el(5,u);break;case 1:if(as(i,u),h&4)if(i=u.stateNode,o===null)try{i.componentDidMount()}catch(C){mt(u,u.return,C)}else{var v=ki(u.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(v,o,i.__reactInternalSnapshotBeforeUpdate)}catch(C){mt(u,u.return,C)}}h&64&&tS(u),h&512&&tl(u,u.return);break;case 3:if(as(i,u),h&64&&(i=u.updateQueue,i!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{Vb(i,o)}catch(C){mt(u,u.return,C)}}break;case 27:o===null&&h&4&&iS(u);case 26:case 5:as(i,u),o===null&&h&4&&rS(u),h&512&&tl(u,u.return);break;case 12:as(i,u);break;case 31:as(i,u),h&4&&cS(i,u);break;case 13:as(i,u),h&4&&fS(i,u),h&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=S2.bind(null,u),B2(i,u))));break;case 22:if(h=u.memoizedState!==null||ss,!h){o=o!==null&&o.memoizedState!==null||Pt,v=ss;var b=Pt;ss=h,(Pt=o)&&!b?os(i,u,(u.subtreeFlags&8772)!==0):as(i,u),ss=v,Pt=b}break;case 30:break;default:as(i,u)}}function lS(i){var o=i.alternate;o!==null&&(i.alternate=null,lS(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&bh(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var At=null,Tn=!1;function is(i,o,u){for(u=u.child;u!==null;)uS(i,o,u),u=u.sibling}function uS(i,o,u){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(at,u)}catch{}switch(u.tag){case 26:Pt||zr(u,o),is(i,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Pt||zr(u,o);var h=At,v=Tn;Fs(u.type)&&(At=u.stateNode,Tn=!1),is(i,o,u),cl(u.stateNode),At=h,Tn=v;break;case 5:Pt||zr(u,o);case 6:if(h=At,v=Tn,At=null,is(i,o,u),At=h,Tn=v,At!==null)if(Tn)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(u.stateNode)}catch(b){mt(u,o,b)}else try{At.removeChild(u.stateNode)}catch(b){mt(u,o,b)}break;case 18:At!==null&&(Tn?(i=At,tw(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),La(i)):tw(At,u.stateNode));break;case 4:h=At,v=Tn,At=u.stateNode.containerInfo,Tn=!0,is(i,o,u),At=h,Tn=v;break;case 0:case 11:case 14:case 15:Is(2,u,o),Pt||Is(4,u,o),is(i,o,u);break;case 1:Pt||(zr(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"&&nS(u,o,h)),is(i,o,u);break;case 21:is(i,o,u);break;case 22:Pt=(h=Pt)||u.memoizedState!==null,is(i,o,u),Pt=h;break;default:is(i,o,u)}}function cS(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{La(i)}catch(u){mt(o,o.return,u)}}}function fS(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{La(i)}catch(u){mt(o,o.return,u)}}function h2(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new aS),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new aS),o;default:throw Error(r(435,i.tag))}}function Rc(i,o){var u=h2(i);o.forEach(function(h){if(!u.has(h)){u.add(h);var v=w2.bind(null,i,h);h.then(v,v)}})}function On(i,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var v=u[h],b=i,C=o,O=C;e:for(;O!==null;){switch(O.tag){case 27:if(Fs(O.type)){At=O.stateNode,Tn=!1;break e}break;case 5:At=O.stateNode,Tn=!1;break e;case 3:case 4:At=O.stateNode.containerInfo,Tn=!0;break e}O=O.return}if(At===null)throw Error(r(160));uS(b,C,v),At=null,Tn=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)dS(o,i),o=o.sibling}var Er=null;function dS(i,o){var u=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:On(o,i),Mn(i),h&4&&(Is(3,i,i.return),el(3,i),Is(5,i,i.return));break;case 1:On(o,i),Mn(i),h&512&&(Pt||u===null||zr(u,u.return)),h&64&&ss&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var v=Er;if(On(o,i),Mn(i),h&512&&(Pt||u===null||zr(u,u.return)),h&4){var b=u!==null?u.memoizedState:null;if(h=i.memoizedState,u===null)if(h===null)if(i.stateNode===null){e:{h=i.type,u=i.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Ao]||b[nn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(h),v.head.insertBefore(b,v.querySelector("head > title"))),on(b,h,u),b[nn]=i,Yt(b),h=b;break e;case"link":var C=dw("link","href",v).get(h+(u.href||""));if(C){for(var O=0;O<C.length;O++)if(b=C[O],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(O,1);break t}}b=v.createElement(h),on(b,h,u),v.head.appendChild(b);break;case"meta":if(C=dw("meta","content",v).get(h+(u.content||""))){for(O=0;O<C.length;O++)if(b=C[O],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(O,1);break t}}b=v.createElement(h),on(b,h,u),v.head.appendChild(b);break;default:throw Error(r(468,h))}b[nn]=i,Yt(b),h=b}i.stateNode=h}else hw(v,i.type,i.stateNode);else i.stateNode=fw(v,h,i.memoizedProps);else b!==h?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,h===null?hw(v,i.type,i.stateNode):fw(v,h,i.memoizedProps)):h===null&&i.stateNode!==null&&$p(i,i.memoizedProps,u.memoizedProps)}break;case 27:On(o,i),Mn(i),h&512&&(Pt||u===null||zr(u,u.return)),u!==null&&h&4&&$p(i,i.memoizedProps,u.memoizedProps);break;case 5:if(On(o,i),Mn(i),h&512&&(Pt||u===null||zr(u,u.return)),i.flags&32){v=i.stateNode;try{aa(v,"")}catch(Se){mt(i,i.return,Se)}}h&4&&i.stateNode!=null&&(v=i.memoizedProps,$p(i,v,u!==null?u.memoizedProps:v)),h&1024&&(qp=!0);break;case 6:if(On(o,i),Mn(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,u=i.stateNode;try{u.nodeValue=h}catch(Se){mt(i,i.return,Se)}}break;case 3:if(qc=null,v=Er,Er=Bc(o.containerInfo),On(o,i),Er=v,Mn(i),h&4&&u!==null&&u.memoizedState.isDehydrated)try{La(o.containerInfo)}catch(Se){mt(i,i.return,Se)}qp&&(qp=!1,hS(i));break;case 4:h=Er,Er=Bc(i.stateNode.containerInfo),On(o,i),Mn(i),Er=h;break;case 12:On(o,i),Mn(i);break;case 31:On(o,i),Mn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Rc(i,h)));break;case 13:On(o,i),Mn(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Tc=ge()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Rc(i,h)));break;case 22:v=i.memoizedState!==null;var U=u!==null&&u.memoizedState!==null,J=ss,ie=Pt;if(ss=J||v,Pt=ie||U,On(o,i),Pt=ie,ss=J,Mn(i),h&8192)e:for(o=i.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||U||ss||Pt||Ri(i)),u=null,o=i;;){if(o.tag===5||o.tag===26){if(u===null){U=u=o;try{if(b=U.stateNode,v)C=b.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{O=U.stateNode;var ue=U.memoizedProps.style,ee=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;O.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Se){mt(U,U.return,Se)}}}else if(o.tag===6){if(u===null){U=o;try{U.stateNode.nodeValue=v?"":U.memoizedProps}catch(Se){mt(U,U.return,Se)}}}else if(o.tag===18){if(u===null){U=o;try{var re=U.stateNode;v?nw(re,!0):nw(U.stateNode,!1)}catch(Se){mt(U,U.return,Se)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=i.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,Rc(i,u))));break;case 19:On(o,i),Mn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Rc(i,h)));break;case 30:break;case 21:break;default:On(o,i),Mn(i)}}function Mn(i){var o=i.flags;if(o&2){try{for(var u,h=i.return;h!==null;){if(sS(h)){u=h;break}h=h.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var v=u.stateNode,b=Bp(i);kc(i,b,v);break;case 5:var C=u.stateNode;u.flags&32&&(aa(C,""),u.flags&=-33);var O=Bp(i);kc(i,O,C);break;case 3:case 4:var U=u.stateNode.containerInfo,J=Bp(i);Up(i,J,U);break;default:throw Error(r(161))}}catch(ie){mt(i,i.return,ie)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function hS(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;hS(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function as(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)oS(i,o.alternate,o),o=o.sibling}function Ri(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Is(4,o,o.return),Ri(o);break;case 1:zr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&nS(o,o.return,u),Ri(o);break;case 27:cl(o.stateNode);case 26:case 5:zr(o,o.return),Ri(o);break;case 22:o.memoizedState===null&&Ri(o);break;case 30:Ri(o);break;default:Ri(o)}i=i.sibling}}function os(i,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,v=i,b=o,C=b.flags;switch(b.tag){case 0:case 11:case 15:os(v,b,u),el(4,b);break;case 1:if(os(v,b,u),h=b,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(J){mt(h,h.return,J)}if(h=b,v=h.updateQueue,v!==null){var O=h.stateNode;try{var U=v.shared.hiddenCallbacks;if(U!==null)for(v.shared.hiddenCallbacks=null,v=0;v<U.length;v++)Hb(U[v],O)}catch(J){mt(h,h.return,J)}}u&&C&64&&tS(b),tl(b,b.return);break;case 27:iS(b);case 26:case 5:os(v,b,u),u&&h===null&&C&4&&rS(b),tl(b,b.return);break;case 12:os(v,b,u);break;case 31:os(v,b,u),u&&C&4&&cS(v,b);break;case 13:os(v,b,u),u&&C&4&&fS(v,b);break;case 22:b.memoizedState===null&&os(v,b,u),tl(b,b.return);break;case 30:break;default:os(v,b,u)}o=o.sibling}}function Hp(i,o){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&Bo(u))}function Vp(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Bo(i))}function kr(i,o,u,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)pS(i,o,u,h),o=o.sibling}function pS(i,o,u,h){var v=o.flags;switch(o.tag){case 0:case 11:case 15:kr(i,o,u,h),v&2048&&el(9,o);break;case 1:kr(i,o,u,h);break;case 3:kr(i,o,u,h),v&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Bo(i)));break;case 12:if(v&2048){kr(i,o,u,h),i=o.stateNode;try{var b=o.memoizedProps,C=b.id,O=b.onPostCommit;typeof O=="function"&&O(C,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(U){mt(o,o.return,U)}}else kr(i,o,u,h);break;case 31:kr(i,o,u,h);break;case 13:kr(i,o,u,h);break;case 23:break;case 22:b=o.stateNode,C=o.alternate,o.memoizedState!==null?b._visibility&2?kr(i,o,u,h):nl(i,o):b._visibility&2?kr(i,o,u,h):(b._visibility|=2,ka(i,o,u,h,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Hp(C,o);break;case 24:kr(i,o,u,h),v&2048&&Vp(o.alternate,o);break;default:kr(i,o,u,h)}}function ka(i,o,u,h,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=i,C=o,O=u,U=h,J=C.flags;switch(C.tag){case 0:case 11:case 15:ka(b,C,O,U,v),el(8,C);break;case 23:break;case 22:var ie=C.stateNode;C.memoizedState!==null?ie._visibility&2?ka(b,C,O,U,v):nl(b,C):(ie._visibility|=2,ka(b,C,O,U,v)),v&&J&2048&&Hp(C.alternate,C);break;case 24:ka(b,C,O,U,v),v&&J&2048&&Vp(C.alternate,C);break;default:ka(b,C,O,U,v)}o=o.sibling}}function nl(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=i,h=o,v=h.flags;switch(h.tag){case 22:nl(u,h),v&2048&&Hp(h.alternate,h);break;case 24:nl(u,h),v&2048&&Vp(h.alternate,h);break;default:nl(u,h)}o=o.sibling}}var rl=8192;function Ra(i,o,u){if(i.subtreeFlags&rl)for(i=i.child;i!==null;)mS(i,o,u),i=i.sibling}function mS(i,o,u){switch(i.tag){case 26:Ra(i,o,u),i.flags&rl&&i.memoizedState!==null&&W2(u,Er,i.memoizedState,i.memoizedProps);break;case 5:Ra(i,o,u);break;case 3:case 4:var h=Er;Er=Bc(i.stateNode.containerInfo),Ra(i,o,u),Er=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=rl,rl=16777216,Ra(i,o,u),rl=h):Ra(i,o,u));break;default:Ra(i,o,u)}}function gS(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function sl(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];Jt=h,vS(h,i)}gS(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)yS(i),i=i.sibling}function yS(i){switch(i.tag){case 0:case 11:case 15:sl(i),i.flags&2048&&Is(9,i,i.return);break;case 3:sl(i);break;case 12:sl(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Ac(i)):sl(i);break;default:sl(i)}}function Ac(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];Jt=h,vS(h,i)}gS(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Is(8,o,o.return),Ac(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Ac(o));break;default:Ac(o)}i=i.sibling}}function vS(i,o){for(;Jt!==null;){var u=Jt;switch(u.tag){case 0:case 11:case 15:Is(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Bo(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Jt=h;else e:for(u=i;Jt!==null;){h=Jt;var v=h.sibling,b=h.return;if(lS(h),h===u){Jt=null;break e}if(v!==null){v.return=b,Jt=v;break e}Jt=b}}}var p2={getCacheForType:function(i){var o=sn(zt),u=o.data.get(i);return u===void 0&&(u=i(),o.data.set(i,u)),u},cacheSignal:function(){return sn(zt).controller.signal}},m2=typeof WeakMap=="function"?WeakMap:Map,dt=0,_t=null,Qe=null,We=0,pt=0,Vn=null,Ns=!1,Aa=!1,Kp=!1,ls=0,It=0,Ds=0,Ai=0,Gp=0,Kn=0,Ta=0,il=null,In=null,Qp=!1,Tc=0,bS=0,Oc=1/0,Mc=null,zs=null,Ut=0,js=null,Oa=null,us=0,Zp=0,Yp=null,xS=null,al=0,Jp=null;function Gn(){return(dt&2)!==0&&We!==0?We&-We:F.T!==null?rm():jv()}function SS(){if(Kn===0)if((We&536870912)===0||nt){var i=Fu;Fu<<=1,(Fu&3932160)===0&&(Fu=262144),Kn=i}else Kn=536870912;return i=qn.current,i!==null&&(i.flags|=32),Kn}function Nn(i,o,u){(i===_t&&(pt===2||pt===9)||i.cancelPendingCommit!==null)&&(Ma(i,0),Ls(i,We,Kn,!1)),Ro(i,u),((dt&2)===0||i!==_t)&&(i===_t&&((dt&2)===0&&(Ai|=u),It===4&&Ls(i,We,Kn,!1)),jr(i))}function wS(i,o,u){if((dt&6)!==0)throw Error(r(327));var h=!u&&(o&127)===0&&(o&i.expiredLanes)===0||ko(i,o),v=h?v2(i,o):Wp(i,o,!0),b=h;do{if(v===0){Aa&&!h&&Ls(i,o,0,!1);break}else{if(u=i.current.alternate,b&&!g2(u)){v=Wp(i,o,!1),b=!1;continue}if(v===2){if(b=o,i.errorRecoveryDisabledLanes&b)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var O=i;v=il;var U=O.current.memoizedState.isDehydrated;if(U&&(Ma(O,C).flags|=256),C=Wp(O,C,!1),C!==2){if(Kp&&!U){O.errorRecoveryDisabledLanes|=b,Ai|=b,v=4;break e}b=In,In=v,b!==null&&(In===null?In=b:In.push.apply(In,b))}v=C}if(b=!1,v!==2)continue}}if(v===1){Ma(i,0),Ls(i,o,0,!0);break}e:{switch(h=i,b=v,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ls(h,o,Kn,!Ns);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(v=Tc+300-ge(),10<v)){if(Ls(h,o,Kn,!Ns),Bu(h,0,!0)!==0)break e;us=o,h.timeoutHandle=WS(_S.bind(null,h,u,In,Mc,Qp,o,Kn,Ai,Ta,Ns,b,"Throttled",-0,0),v);break e}_S(h,u,In,Mc,Qp,o,Kn,Ai,Ta,Ns,b,null,-0,0)}}break}while(!0);jr(i)}function _S(i,o,u,h,v,b,C,O,U,J,ie,ue,ee,re){if(i.timeoutHandle=-1,ue=o.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qr},mS(o,b,ue);var Se=(b&62914560)===b?Tc-ge():(b&4194048)===b?bS-ge():0;if(Se=eM(ue,Se),Se!==null){us=b,i.cancelPendingCommit=Se(MS.bind(null,i,o,b,u,h,v,C,O,U,ie,ue,null,ee,re)),Ls(i,b,C,!J);return}}MS(i,o,b,u,h,v,C,O,U)}function g2(i){for(var o=i;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var v=u[h],b=v.getSnapshot;v=v.value;try{if(!Bn(b(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ls(i,o,u,h){o&=~Gp,o&=~Ai,i.suspendedLanes|=o,i.pingedLanes&=~o,h&&(i.warmLanes|=o),h=i.expirationTimes;for(var v=o;0<v;){var b=31-wt(v),C=1<<b;h[b]=-1,v&=~C}u!==0&&Nv(i,u,o)}function Ic(){return(dt&6)===0?(ol(0),!1):!0}function Xp(){if(Qe!==null){if(pt===0)var i=Qe.return;else i=Qe,Xr=bi=null,pp(i),Sa=null,qo=0,i=Qe;for(;i!==null;)eS(i.alternate,i),i=i.return;Qe=null}}function Ma(i,o){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,j2(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),us=0,Xp(),_t=i,Qe=u=Yr(i.current,null),We=o,pt=0,Vn=null,Ns=!1,Aa=ko(i,o),Kp=!1,Ta=Kn=Gp=Ai=Ds=It=0,In=il=null,Qp=!1,(o&8)!==0&&(o|=o&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=o;0<h;){var v=31-wt(h),b=1<<v;o|=i[v],h&=~b}return ls=o,Wu(),u}function CS(i,o){qe=null,F.H=Jo,o===xa||o===oc?(o=$b(),pt=3):o===np?(o=$b(),pt=4):pt=o===Op?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Vn=o,Qe===null&&(It=1,Sc(i,lr(o,i.current)))}function ES(){var i=qn.current;return i===null?!0:(We&4194048)===We?dr===null:(We&62914560)===We||(We&536870912)!==0?i===dr:!1}function kS(){var i=F.H;return F.H=Jo,i===null?Jo:i}function RS(){var i=F.A;return F.A=p2,i}function Nc(){It=4,Ns||(We&4194048)!==We&&qn.current!==null||(Aa=!0),(Ds&134217727)===0&&(Ai&134217727)===0||_t===null||Ls(_t,We,Kn,!1)}function Wp(i,o,u){var h=dt;dt|=2;var v=kS(),b=RS();(_t!==i||We!==o)&&(Mc=null,Ma(i,o)),o=!1;var C=It;e:do try{if(pt!==0&&Qe!==null){var O=Qe,U=Vn;switch(pt){case 8:Xp(),C=6;break e;case 3:case 2:case 9:case 6:qn.current===null&&(o=!0);var J=pt;if(pt=0,Vn=null,Ia(i,O,U,J),u&&Aa){C=0;break e}break;default:J=pt,pt=0,Vn=null,Ia(i,O,U,J)}}y2(),C=It;break}catch(ie){CS(i,ie)}while(!0);return o&&i.shellSuspendCounter++,Xr=bi=null,dt=h,F.H=v,F.A=b,Qe===null&&(_t=null,We=0,Wu()),C}function y2(){for(;Qe!==null;)AS(Qe)}function v2(i,o){var u=dt;dt|=2;var h=kS(),v=RS();_t!==i||We!==o?(Mc=null,Oc=ge()+500,Ma(i,o)):Aa=ko(i,o);e:do try{if(pt!==0&&Qe!==null){o=Qe;var b=Vn;t:switch(pt){case 1:pt=0,Vn=null,Ia(i,o,b,1);break;case 2:case 9:if(Pb(b)){pt=0,Vn=null,TS(o);break}o=function(){pt!==2&&pt!==9||_t!==i||(pt=7),jr(i)},b.then(o,o);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:Pb(b)?(pt=0,Vn=null,TS(o)):(pt=0,Vn=null,Ia(i,o,b,7));break;case 5:var C=null;switch(Qe.tag){case 26:C=Qe.memoizedState;case 5:case 27:var O=Qe;if(C?pw(C):O.stateNode.complete){pt=0,Vn=null;var U=O.sibling;if(U!==null)Qe=U;else{var J=O.return;J!==null?(Qe=J,Dc(J)):Qe=null}break t}}pt=0,Vn=null,Ia(i,o,b,5);break;case 6:pt=0,Vn=null,Ia(i,o,b,6);break;case 8:Xp(),It=6;break e;default:throw Error(r(462))}}b2();break}catch(ie){CS(i,ie)}while(!0);return Xr=bi=null,F.H=h,F.A=v,dt=u,Qe!==null?0:(_t=null,We=0,Wu(),It)}function b2(){for(;Qe!==null&&!Ne();)AS(Qe)}function AS(i){var o=Xx(i.alternate,i,ls);i.memoizedProps=i.pendingProps,o===null?Dc(i):Qe=o}function TS(i){var o=i,u=o.alternate;switch(o.tag){case 15:case 0:o=Kx(u,o,o.pendingProps,o.type,void 0,We);break;case 11:o=Kx(u,o,o.pendingProps,o.type.render,o.ref,We);break;case 5:pp(o);default:eS(u,o),o=Qe=Rb(o,ls),o=Xx(u,o,ls)}i.memoizedProps=i.pendingProps,o===null?Dc(i):Qe=o}function Ia(i,o,u,h){Xr=bi=null,pp(o),Sa=null,qo=0;var v=o.return;try{if(o2(i,v,o,u,We)){It=1,Sc(i,lr(u,i.current)),Qe=null;return}}catch(b){if(v!==null)throw Qe=v,b;It=1,Sc(i,lr(u,i.current)),Qe=null;return}o.flags&32768?(nt||h===1?i=!0:Aa||(We&536870912)!==0?i=!1:(Ns=i=!0,(h===2||h===9||h===3||h===6)&&(h=qn.current,h!==null&&h.tag===13&&(h.flags|=16384))),OS(o,i)):Dc(o)}function Dc(i){var o=i;do{if((o.flags&32768)!==0){OS(o,Ns);return}i=o.return;var u=c2(o.alternate,o,ls);if(u!==null){Qe=u;return}if(o=o.sibling,o!==null){Qe=o;return}Qe=o=i}while(o!==null);It===0&&(It=5)}function OS(i,o){do{var u=f2(i.alternate,i);if(u!==null){u.flags&=32767,Qe=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(i=i.sibling,i!==null)){Qe=i;return}Qe=i=u}while(i!==null);It=6,Qe=null}function MS(i,o,u,h,v,b,C,O,U){i.cancelPendingCommit=null;do zc();while(Ut!==0);if((dt&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=Bh,XT(i,u,b,C,O,U),i===_t&&(Qe=_t=null,We=0),Oa=o,js=i,us=u,Zp=b,Yp=v,xS=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_2(_e,function(){return jS(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=F.T,F.T=null,v=X.p,X.p=2,C=dt,dt|=4;try{d2(i,o,u)}finally{dt=C,X.p=v,F.T=h}}Ut=1,IS(),NS(),DS()}}function IS(){if(Ut===1){Ut=0;var i=js,o=Oa,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=F.T,F.T=null;var h=X.p;X.p=2;var v=dt;dt|=4;try{dS(o,i);var b=fm,C=vb(i.containerInfo),O=b.focusedElem,U=b.selectionRange;if(C!==O&&O&&O.ownerDocument&&yb(O.ownerDocument.documentElement,O)){if(U!==null&&jh(O)){var J=U.start,ie=U.end;if(ie===void 0&&(ie=J),"selectionStart"in O)O.selectionStart=J,O.selectionEnd=Math.min(ie,O.value.length);else{var ue=O.ownerDocument||document,ee=ue&&ue.defaultView||window;if(ee.getSelection){var re=ee.getSelection(),Se=O.textContent.length,Ie=Math.min(U.start,Se),St=U.end===void 0?Ie:Math.min(U.end,Se);!re.extend&&Ie>St&&(C=St,St=Ie,Ie=C);var G=gb(O,Ie),H=gb(O,St);if(G&&H&&(re.rangeCount!==1||re.anchorNode!==G.node||re.anchorOffset!==G.offset||re.focusNode!==H.node||re.focusOffset!==H.offset)){var Y=ue.createRange();Y.setStart(G.node,G.offset),re.removeAllRanges(),Ie>St?(re.addRange(Y),re.extend(H.node,H.offset)):(Y.setEnd(H.node,H.offset),re.addRange(Y))}}}}for(ue=[],re=O;re=re.parentNode;)re.nodeType===1&&ue.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ue.length;O++){var le=ue[O];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Gc=!!cm,fm=cm=null}finally{dt=v,X.p=h,F.T=u}}i.current=o,Ut=2}}function NS(){if(Ut===2){Ut=0;var i=js,o=Oa,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=F.T,F.T=null;var h=X.p;X.p=2;var v=dt;dt|=4;try{oS(i,o.alternate,o)}finally{dt=v,X.p=h,F.T=u}}Ut=3}}function DS(){if(Ut===4||Ut===3){Ut=0,be();var i=js,o=Oa,u=us,h=xS;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ut=5:(Ut=0,Oa=js=null,zS(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(zs=null),yh(u),o=o.stateNode,ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(at,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=F.T,v=X.p,X.p=2,F.T=null;try{for(var b=i.onRecoverableError,C=0;C<h.length;C++){var O=h[C];b(O.value,{componentStack:O.stack})}}finally{F.T=o,X.p=v}}(us&3)!==0&&zc(),jr(i),v=i.pendingLanes,(u&261930)!==0&&(v&42)!==0?i===Jp?al++:(al=0,Jp=i):al=0,ol(0)}}function zS(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Bo(o)))}function zc(){return IS(),NS(),DS(),jS()}function jS(){if(Ut!==5)return!1;var i=js,o=Zp;Zp=0;var u=yh(us),h=F.T,v=X.p;try{X.p=32>u?32:u,F.T=null,u=Yp,Yp=null;var b=js,C=us;if(Ut=0,Oa=js=null,us=0,(dt&6)!==0)throw Error(r(331));var O=dt;if(dt|=4,yS(b.current),pS(b,b.current,C,u),dt=O,ol(0,!1),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(at,b)}catch{}return!0}finally{X.p=v,F.T=h,zS(i,o)}}function LS(i,o,u){o=lr(u,o),o=Tp(i.stateNode,o,2),i=Ts(i,o,2),i!==null&&(Ro(i,2),jr(i))}function mt(i,o,u){if(i.tag===3)LS(i,i,u);else for(;o!==null;){if(o.tag===3){LS(o,i,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(zs===null||!zs.has(h))){i=lr(u,i),u=Px(2),h=Ts(o,u,2),h!==null&&(Fx(u,h,o,i),Ro(h,2),jr(h));break}}o=o.return}}function em(i,o,u){var h=i.pingCache;if(h===null){h=i.pingCache=new m2;var v=new Set;h.set(o,v)}else v=h.get(o),v===void 0&&(v=new Set,h.set(o,v));v.has(u)||(Kp=!0,v.add(u),i=x2.bind(null,i,o,u),o.then(i,i))}function x2(i,o,u){var h=i.pingCache;h!==null&&h.delete(o),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,_t===i&&(We&u)===u&&(It===4||It===3&&(We&62914560)===We&&300>ge()-Tc?(dt&2)===0&&Ma(i,0):Gp|=u,Ta===We&&(Ta=0)),jr(i)}function PS(i,o){o===0&&(o=Iv()),i=gi(i,o),i!==null&&(Ro(i,o),jr(i))}function S2(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),PS(i,u)}function w2(i,o){var u=0;switch(i.tag){case 31:case 13:var h=i.stateNode,v=i.memoizedState;v!==null&&(u=v.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),PS(i,u)}function _2(i,o){return Ae(i,o)}var jc=null,Na=null,tm=!1,Lc=!1,nm=!1,Ps=0;function jr(i){i!==Na&&i.next===null&&(Na===null?jc=Na=i:Na=Na.next=i),Lc=!0,tm||(tm=!0,E2())}function ol(i,o){if(!nm&&Lc){nm=!0;do for(var u=!1,h=jc;h!==null;){if(i!==0){var v=h.pendingLanes;if(v===0)var b=0;else{var C=h.suspendedLanes,O=h.pingedLanes;b=(1<<31-wt(42|i)+1)-1,b&=v&~(C&~O),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,US(h,b))}else b=We,b=Bu(h,h===_t?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||ko(h,b)||(u=!0,US(h,b));h=h.next}while(u);nm=!1}}function C2(){FS()}function FS(){Lc=tm=!1;var i=0;Ps!==0&&z2()&&(i=Ps);for(var o=ge(),u=null,h=jc;h!==null;){var v=h.next,b=$S(h,o);b===0?(h.next=null,u===null?jc=v:u.next=v,v===null&&(Na=u)):(u=h,(i!==0||(b&3)!==0)&&(Lc=!0)),h=v}Ut!==0&&Ut!==5||ol(i),Ps!==0&&(Ps=0)}function $S(i,o){for(var u=i.suspendedLanes,h=i.pingedLanes,v=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var C=31-wt(b),O=1<<C,U=v[C];U===-1?((O&u)===0||(O&h)!==0)&&(v[C]=JT(O,o)):U<=o&&(i.expiredLanes|=O),b&=~O}if(o=_t,u=We,u=Bu(i,i===o?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,u===0||i===o&&(pt===2||pt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&me(h),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||ko(i,u)){if(o=u&-u,o===i.callbackPriority)return o;switch(h!==null&&me(h),yh(u)){case 2:case 8:u=de;break;case 32:u=_e;break;case 268435456:u=xe;break;default:u=_e}return h=BS.bind(null,i),u=Ae(u,h),i.callbackPriority=o,i.callbackNode=u,o}return h!==null&&h!==null&&me(h),i.callbackPriority=2,i.callbackNode=null,2}function BS(i,o){if(Ut!==0&&Ut!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(zc()&&i.callbackNode!==u)return null;var h=We;return h=Bu(i,i===_t?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(wS(i,h,o),$S(i,ge()),i.callbackNode!=null&&i.callbackNode===u?BS.bind(null,i):null)}function US(i,o){if(zc())return null;wS(i,o,!0)}function E2(){L2(function(){(dt&6)!==0?Ae(ne,C2):FS()})}function rm(){if(Ps===0){var i=va;i===0&&(i=Pu,Pu<<=1,(Pu&261888)===0&&(Pu=256)),Ps=i}return Ps}function qS(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Vu(""+i)}function HS(i,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,i.id&&u.setAttribute("form",i.id),o.parentNode.insertBefore(u,o),i=new FormData(i),u.parentNode.removeChild(u),i}function k2(i,o,u,h,v){if(o==="submit"&&u&&u.stateNode===v){var b=qS((v[Rn]||null).action),C=h.submitter;C&&(o=(o=C[Rn]||null)?qS(o.formAction):C.getAttribute("formAction"),o!==null&&(b=o,C=null));var O=new Zu("action","action",null,h,v);i.push({event:O,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ps!==0){var U=C?HS(v,C):new FormData(v);_p(u,{pending:!0,data:U,method:v.method,action:b},null,U)}}else typeof b=="function"&&(O.preventDefault(),U=C?HS(v,C):new FormData(v),_p(u,{pending:!0,data:U,method:v.method,action:b},b,U))},currentTarget:v}]})}}for(var sm=0;sm<$h.length;sm++){var im=$h[sm],R2=im.toLowerCase(),A2=im[0].toUpperCase()+im.slice(1);Cr(R2,"on"+A2)}Cr(Sb,"onAnimationEnd"),Cr(wb,"onAnimationIteration"),Cr(_b,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(HO,"onTransitionRun"),Cr(VO,"onTransitionStart"),Cr(KO,"onTransitionCancel"),Cr(Cb,"onTransitionEnd"),sa("onMouseEnter",["mouseout","mouseover"]),sa("onMouseLeave",["mouseout","mouseover"]),sa("onPointerEnter",["pointerout","pointerover"]),sa("onPointerLeave",["pointerout","pointerover"]),di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),di("onBeforeInput",["compositionend","keypress","textInput","paste"]),di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ll));function VS(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var h=i[u],v=h.event;h=h.listeners;e:{var b=void 0;if(o)for(var C=h.length-1;0<=C;C--){var O=h[C],U=O.instance,J=O.currentTarget;if(O=O.listener,U!==b&&v.isPropagationStopped())break e;b=O,v.currentTarget=J;try{b(v)}catch(ie){Xu(ie)}v.currentTarget=null,b=U}else for(C=0;C<h.length;C++){if(O=h[C],U=O.instance,J=O.currentTarget,O=O.listener,U!==b&&v.isPropagationStopped())break e;b=O,v.currentTarget=J;try{b(v)}catch(ie){Xu(ie)}v.currentTarget=null,b=U}}}}function Ze(i,o){var u=o[vh];u===void 0&&(u=o[vh]=new Set);var h=i+"__bubble";u.has(h)||(KS(o,i,2,!1),u.add(h))}function am(i,o,u){var h=0;o&&(h|=4),KS(u,i,h,o)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function om(i){if(!i[Pc]){i[Pc]=!0,Fv.forEach(function(u){u!=="selectionchange"&&(T2.has(u)||am(u,!1,i),am(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Pc]||(o[Pc]=!0,am("selectionchange",!1,o))}}function KS(i,o,u,h){switch(Sw(o)){case 2:var v=rM;break;case 8:v=sM;break;default:v=wm}u=v.bind(null,o,u,i),v=void 0,!Rh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),h?v!==void 0?i.addEventListener(o,u,{capture:!0,passive:v}):i.addEventListener(o,u,!0):v!==void 0?i.addEventListener(o,u,{passive:v}):i.addEventListener(o,u,!1)}function lm(i,o,u,h,v){var b=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var O=h.stateNode.containerInfo;if(O===v)break;if(C===4)for(C=h.return;C!==null;){var U=C.tag;if((U===3||U===4)&&C.stateNode.containerInfo===v)return;C=C.return}for(;O!==null;){if(C=ta(O),C===null)return;if(U=C.tag,U===5||U===6||U===26||U===27){h=b=C;continue e}O=O.parentNode}}h=h.return}Jv(function(){var J=b,ie=Eh(u),ue=[];e:{var ee=Eb.get(i);if(ee!==void 0){var re=Zu,Se=i;switch(i){case"keypress":if(Gu(u)===0)break e;case"keydown":case"keyup":re=wO;break;case"focusin":Se="focus",re=Mh;break;case"focusout":Se="blur",re=Mh;break;case"beforeblur":case"afterblur":re=Mh;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=eb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=cO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=EO;break;case Sb:case wb:case _b:re=hO;break;case Cb:re=RO;break;case"scroll":case"scrollend":re=lO;break;case"wheel":re=TO;break;case"copy":case"cut":case"paste":re=mO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=nb;break;case"toggle":case"beforetoggle":re=MO}var Ie=(o&4)!==0,St=!Ie&&(i==="scroll"||i==="scrollend"),G=Ie?ee!==null?ee+"Capture":null:ee;Ie=[];for(var H=J,Y;H!==null;){var le=H;if(Y=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Y===null||G===null||(le=Oo(H,G),le!=null&&Ie.push(ul(H,le,Y))),St)break;H=H.return}0<Ie.length&&(ee=new re(ee,Se,null,u,ie),ue.push({event:ee,listeners:Ie}))}}if((o&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",re=i==="mouseout"||i==="pointerout",ee&&u!==Ch&&(Se=u.relatedTarget||u.fromElement)&&(ta(Se)||Se[ea]))break e;if((re||ee)&&(ee=ie.window===ie?ie:(ee=ie.ownerDocument)?ee.defaultView||ee.parentWindow:window,re?(Se=u.relatedTarget||u.toElement,re=J,Se=Se?ta(Se):null,Se!==null&&(St=a(Se),Ie=Se.tag,Se!==St||Ie!==5&&Ie!==27&&Ie!==6)&&(Se=null)):(re=null,Se=J),re!==Se)){if(Ie=eb,le="onMouseLeave",G="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(Ie=nb,le="onPointerLeave",G="onPointerEnter",H="pointer"),St=re==null?ee:To(re),Y=Se==null?ee:To(Se),ee=new Ie(le,H+"leave",re,u,ie),ee.target=St,ee.relatedTarget=Y,le=null,ta(ie)===J&&(Ie=new Ie(G,H+"enter",Se,u,ie),Ie.target=Y,Ie.relatedTarget=St,le=Ie),St=le,re&&Se)t:{for(Ie=O2,G=re,H=Se,Y=0,le=G;le;le=Ie(le))Y++;le=0;for(var Te=H;Te;Te=Ie(Te))le++;for(;0<Y-le;)G=Ie(G),Y--;for(;0<le-Y;)H=Ie(H),le--;for(;Y--;){if(G===H||H!==null&&G===H.alternate){Ie=G;break t}G=Ie(G),H=Ie(H)}Ie=null}else Ie=null;re!==null&&GS(ue,ee,re,Ie,!1),Se!==null&&St!==null&&GS(ue,St,Se,Ie,!0)}}e:{if(ee=J?To(J):window,re=ee.nodeName&&ee.nodeName.toLowerCase(),re==="select"||re==="input"&&ee.type==="file")var ut=cb;else if(lb(ee))if(fb)ut=BO;else{ut=FO;var Ee=PO}else re=ee.nodeName,!re||re.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&_h(J.elementType)&&(ut=cb):ut=$O;if(ut&&(ut=ut(i,J))){ub(ue,ut,u,ie);break e}Ee&&Ee(i,ee,J),i==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&wh(ee,"number",ee.value)}switch(Ee=J?To(J):window,i){case"focusin":(lb(Ee)||Ee.contentEditable==="true")&&(ca=Ee,Lh=J,Po=null);break;case"focusout":Po=Lh=ca=null;break;case"mousedown":Ph=!0;break;case"contextmenu":case"mouseup":case"dragend":Ph=!1,bb(ue,u,ie);break;case"selectionchange":if(qO)break;case"keydown":case"keyup":bb(ue,u,ie)}var He;if(Nh)e:{switch(i){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else ua?ab(i,u)&&(et="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(et="onCompositionStart");et&&(rb&&u.locale!=="ko"&&(ua||et!=="onCompositionStart"?et==="onCompositionEnd"&&ua&&(He=Xv()):(ws=ie,Ah="value"in ws?ws.value:ws.textContent,ua=!0)),Ee=Fc(J,et),0<Ee.length&&(et=new tb(et,i,null,u,ie),ue.push({event:et,listeners:Ee}),He?et.data=He:(He=ob(u),He!==null&&(et.data=He)))),(He=NO?DO(i,u):zO(i,u))&&(et=Fc(J,"onBeforeInput"),0<et.length&&(Ee=new tb("onBeforeInput","beforeinput",null,u,ie),ue.push({event:Ee,listeners:et}),Ee.data=He)),k2(ue,i,J,u,ie)}VS(ue,o)})}function ul(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Fc(i,o){for(var u=o+"Capture",h=[];i!==null;){var v=i,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=Oo(i,u),v!=null&&h.unshift(ul(i,v,b)),v=Oo(i,o),v!=null&&h.push(ul(i,v,b))),i.tag===3)return h;i=i.return}return[]}function O2(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function GS(i,o,u,h,v){for(var b=o._reactName,C=[];u!==null&&u!==h;){var O=u,U=O.alternate,J=O.stateNode;if(O=O.tag,U!==null&&U===h)break;O!==5&&O!==26&&O!==27||J===null||(U=J,v?(J=Oo(u,b),J!=null&&C.unshift(ul(u,J,U))):v||(J=Oo(u,b),J!=null&&C.push(ul(u,J,U)))),u=u.return}C.length!==0&&i.push({event:o,listeners:C})}var M2=/\r\n?/g,I2=/\u0000|\uFFFD/g;function QS(i){return(typeof i=="string"?i:""+i).replace(M2,`
`).replace(I2,"")}function ZS(i,o){return o=QS(o),QS(i)===o}function xt(i,o,u,h,v,b){switch(u){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||aa(i,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&aa(i,""+h);break;case"className":qu(i,"class",h);break;case"tabIndex":qu(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":qu(i,u,h);break;case"style":Zv(i,h,b);break;case"data":if(o!=="object"){qu(i,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||u!=="href")){i.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(u);break}h=Vu(""+h),i.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(o!=="input"&&xt(i,o,"name",v.name,v,null),xt(i,o,"formEncType",v.formEncType,v,null),xt(i,o,"formMethod",v.formMethod,v,null),xt(i,o,"formTarget",v.formTarget,v,null)):(xt(i,o,"encType",v.encType,v,null),xt(i,o,"method",v.method,v,null),xt(i,o,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(u);break}h=Vu(""+h),i.setAttribute(u,h);break;case"onClick":h!=null&&(i.onclick=Qr);break;case"onScroll":h!=null&&Ze("scroll",i);break;case"onScrollEnd":h!=null&&Ze("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}u=Vu(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(u,""+h):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":h===!0?i.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(u,h):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(u,h):i.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(u):i.setAttribute(u,h);break;case"popover":Ze("beforetoggle",i),Ze("toggle",i),Uu(i,"popover",h);break;case"xlinkActuate":Gr(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Gr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Gr(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Gr(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Gr(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Gr(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Gr(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Gr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Gr(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Uu(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=aO.get(u)||u,Uu(i,u,h))}}function um(i,o,u,h,v,b){switch(u){case"style":Zv(i,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof h=="string"?aa(i,h):(typeof h=="number"||typeof h=="bigint")&&aa(i,""+h);break;case"onScroll":h!=null&&Ze("scroll",i);break;case"onScrollEnd":h!=null&&Ze("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$v.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),b=i[Rn]||null,b=b!=null?b[u]:null,typeof b=="function"&&i.removeEventListener(o,b,v),typeof h=="function")){typeof b!="function"&&b!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(o,h,v);break e}u in i?i[u]=h:h===!0?i.setAttribute(u,""):Uu(i,u,h)}}}function on(i,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",i),Ze("load",i);var h=!1,v=!1,b;for(b in u)if(u.hasOwnProperty(b)){var C=u[b];if(C!=null)switch(b){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:xt(i,o,b,C,u,null)}}v&&xt(i,o,"srcSet",u.srcSet,u,null),h&&xt(i,o,"src",u.src,u,null);return;case"input":Ze("invalid",i);var O=b=C=v=null,U=null,J=null;for(h in u)if(u.hasOwnProperty(h)){var ie=u[h];if(ie!=null)switch(h){case"name":v=ie;break;case"type":C=ie;break;case"checked":U=ie;break;case"defaultChecked":J=ie;break;case"value":b=ie;break;case"defaultValue":O=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,o));break;default:xt(i,o,h,ie,u,null)}}Vv(i,b,O,U,J,C,v,!1);return;case"select":Ze("invalid",i),h=C=b=null;for(v in u)if(u.hasOwnProperty(v)&&(O=u[v],O!=null))switch(v){case"value":b=O;break;case"defaultValue":C=O;break;case"multiple":h=O;default:xt(i,o,v,O,u,null)}o=b,u=C,i.multiple=!!h,o!=null?ia(i,!!h,o,!1):u!=null&&ia(i,!!h,u,!0);return;case"textarea":Ze("invalid",i),b=v=h=null;for(C in u)if(u.hasOwnProperty(C)&&(O=u[C],O!=null))switch(C){case"value":h=O;break;case"defaultValue":v=O;break;case"children":b=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:xt(i,o,C,O,u,null)}Gv(i,h,v,b);return;case"option":for(U in u)u.hasOwnProperty(U)&&(h=u[U],h!=null)&&(U==="selected"?i.selected=h&&typeof h!="function"&&typeof h!="symbol":xt(i,o,U,h,u,null));return;case"dialog":Ze("beforetoggle",i),Ze("toggle",i),Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":Ze("load",i);break;case"video":case"audio":for(h=0;h<ll.length;h++)Ze(ll[h],i);break;case"image":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"embed":case"source":case"link":Ze("error",i),Ze("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in u)if(u.hasOwnProperty(J)&&(h=u[J],h!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:xt(i,o,J,h,u,null)}return;default:if(_h(o)){for(ie in u)u.hasOwnProperty(ie)&&(h=u[ie],h!==void 0&&um(i,o,ie,h,u,void 0));return}}for(O in u)u.hasOwnProperty(O)&&(h=u[O],h!=null&&xt(i,o,O,h,u,null))}function N2(i,o,u,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,C=null,O=null,U=null,J=null,ie=null;for(re in u){var ue=u[re];if(u.hasOwnProperty(re)&&ue!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":U=ue;default:h.hasOwnProperty(re)||xt(i,o,re,null,h,ue)}}for(var ee in h){var re=h[ee];if(ue=u[ee],h.hasOwnProperty(ee)&&(re!=null||ue!=null))switch(ee){case"type":b=re;break;case"name":v=re;break;case"checked":J=re;break;case"defaultChecked":ie=re;break;case"value":C=re;break;case"defaultValue":O=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,o));break;default:re!==ue&&xt(i,o,ee,re,h,ue)}}Sh(i,C,O,U,J,ie,b,v);return;case"select":re=C=O=ee=null;for(b in u)if(U=u[b],u.hasOwnProperty(b)&&U!=null)switch(b){case"value":break;case"multiple":re=U;default:h.hasOwnProperty(b)||xt(i,o,b,null,h,U)}for(v in h)if(b=h[v],U=u[v],h.hasOwnProperty(v)&&(b!=null||U!=null))switch(v){case"value":ee=b;break;case"defaultValue":O=b;break;case"multiple":C=b;default:b!==U&&xt(i,o,v,b,h,U)}o=O,u=C,h=re,ee!=null?ia(i,!!u,ee,!1):!!h!=!!u&&(o!=null?ia(i,!!u,o,!0):ia(i,!!u,u?[]:"",!1));return;case"textarea":re=ee=null;for(O in u)if(v=u[O],u.hasOwnProperty(O)&&v!=null&&!h.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:xt(i,o,O,null,h,v)}for(C in h)if(v=h[C],b=u[C],h.hasOwnProperty(C)&&(v!=null||b!=null))switch(C){case"value":ee=v;break;case"defaultValue":re=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==b&&xt(i,o,C,v,h,b)}Kv(i,ee,re);return;case"option":for(var Se in u)ee=u[Se],u.hasOwnProperty(Se)&&ee!=null&&!h.hasOwnProperty(Se)&&(Se==="selected"?i.selected=!1:xt(i,o,Se,null,h,ee));for(U in h)ee=h[U],re=u[U],h.hasOwnProperty(U)&&ee!==re&&(ee!=null||re!=null)&&(U==="selected"?i.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":xt(i,o,U,ee,h,re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in u)ee=u[Ie],u.hasOwnProperty(Ie)&&ee!=null&&!h.hasOwnProperty(Ie)&&xt(i,o,Ie,null,h,ee);for(J in h)if(ee=h[J],re=u[J],h.hasOwnProperty(J)&&ee!==re&&(ee!=null||re!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,o));break;default:xt(i,o,J,ee,h,re)}return;default:if(_h(o)){for(var St in u)ee=u[St],u.hasOwnProperty(St)&&ee!==void 0&&!h.hasOwnProperty(St)&&um(i,o,St,void 0,h,ee);for(ie in h)ee=h[ie],re=u[ie],!h.hasOwnProperty(ie)||ee===re||ee===void 0&&re===void 0||um(i,o,ie,ee,h,re);return}}for(var G in u)ee=u[G],u.hasOwnProperty(G)&&ee!=null&&!h.hasOwnProperty(G)&&xt(i,o,G,null,h,ee);for(ue in h)ee=h[ue],re=u[ue],!h.hasOwnProperty(ue)||ee===re||ee==null&&re==null||xt(i,o,ue,ee,h,re)}function YS(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function D2(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var v=u[h],b=v.transferSize,C=v.initiatorType,O=v.duration;if(b&&O&&YS(C)){for(C=0,O=v.responseEnd,h+=1;h<u.length;h++){var U=u[h],J=U.startTime;if(J>O)break;var ie=U.transferSize,ue=U.initiatorType;ie&&YS(ue)&&(U=U.responseEnd,C+=ie*(U<O?1:(O-J)/(U-J)))}if(--h,o+=8*(b+C)/(v.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var cm=null,fm=null;function $c(i){return i.nodeType===9?i:i.ownerDocument}function JS(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function XS(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function dm(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var hm=null;function z2(){var i=window.event;return i&&i.type==="popstate"?i===hm?!1:(hm=i,!0):(hm=null,!1)}var WS=typeof setTimeout=="function"?setTimeout:void 0,j2=typeof clearTimeout=="function"?clearTimeout:void 0,ew=typeof Promise=="function"?Promise:void 0,L2=typeof queueMicrotask=="function"?queueMicrotask:typeof ew<"u"?function(i){return ew.resolve(null).then(i).catch(P2)}:WS;function P2(i){setTimeout(function(){throw i})}function Fs(i){return i==="head"}function tw(i,o){var u=o,h=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(h===0){i.removeChild(v),La(o);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")cl(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,cl(u);for(var b=u.firstChild;b;){var C=b.nextSibling,O=b.nodeName;b[Ao]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=C}}else u==="body"&&cl(i.ownerDocument.body);u=v}while(u);La(o)}function nw(i,o){var u=i;i=0;do{var h=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=h}while(u)}function pm(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":pm(u),bh(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function F2(i,o,u,h){for(;i.nodeType===1;){var v=u;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Ao])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=hr(i.nextSibling),i===null)break}return null}function $2(i,o,u){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=hr(i.nextSibling),i===null))return null;return i}function rw(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=hr(i.nextSibling),i===null))return null;return i}function mm(i){return i.data==="$?"||i.data==="$~"}function gm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function B2(i,o){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||u.readyState!=="loading")o();else{var h=function(){o(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function hr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var ym=null;function sw(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(o===0)return hr(i.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}i=i.nextSibling}return null}function iw(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return i;o--}else u!=="/$"&&u!=="/&"||o++}i=i.previousSibling}return null}function aw(i,o,u){switch(o=$c(u),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function cl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);bh(i)}var pr=new Map,ow=new Set;function Bc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var cs=X.d;X.d={f:U2,r:q2,D:H2,C:V2,L:K2,m:G2,X:Z2,S:Q2,M:Y2};function U2(){var i=cs.f(),o=Ic();return i||o}function q2(i){var o=na(i);o!==null&&o.tag===5&&o.type==="form"?Cx(o):cs.r(i)}var Da=typeof document>"u"?null:document;function lw(i,o,u){var h=Da;if(h&&typeof o=="string"&&o){var v=ar(o);v='link[rel="'+i+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),ow.has(v)||(ow.add(v),i={rel:i,crossOrigin:u,href:o},h.querySelector(v)===null&&(o=h.createElement("link"),on(o,"link",i),Yt(o),h.head.appendChild(o)))}}function H2(i){cs.D(i),lw("dns-prefetch",i,null)}function V2(i,o){cs.C(i,o),lw("preconnect",i,o)}function K2(i,o,u){cs.L(i,o,u);var h=Da;if(h&&i&&o){var v='link[rel="preload"][as="'+ar(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+ar(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+ar(u.imageSizes)+'"]')):v+='[href="'+ar(i)+'"]';var b=v;switch(o){case"style":b=za(i);break;case"script":b=ja(i)}pr.has(b)||(i=p({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:i,as:o},u),pr.set(b,i),h.querySelector(v)!==null||o==="style"&&h.querySelector(fl(b))||o==="script"&&h.querySelector(dl(b))||(o=h.createElement("link"),on(o,"link",i),Yt(o),h.head.appendChild(o)))}}function G2(i,o){cs.m(i,o);var u=Da;if(u&&i){var h=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+ar(h)+'"][href="'+ar(i)+'"]',b=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ja(i)}if(!pr.has(b)&&(i=p({rel:"modulepreload",href:i},o),pr.set(b,i),u.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(dl(b)))return}h=u.createElement("link"),on(h,"link",i),Yt(h),u.head.appendChild(h)}}}function Q2(i,o,u){cs.S(i,o,u);var h=Da;if(h&&i){var v=ra(h).hoistableStyles,b=za(i);o=o||"default";var C=v.get(b);if(!C){var O={loading:0,preload:null};if(C=h.querySelector(fl(b)))O.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},u),(u=pr.get(b))&&vm(i,u);var U=C=h.createElement("link");Yt(U),on(U,"link",i),U._p=new Promise(function(J,ie){U.onload=J,U.onerror=ie}),U.addEventListener("load",function(){O.loading|=1}),U.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Uc(C,o,h)}C={type:"stylesheet",instance:C,count:1,state:O},v.set(b,C)}}}function Z2(i,o){cs.X(i,o);var u=Da;if(u&&i){var h=ra(u).hoistableScripts,v=ja(i),b=h.get(v);b||(b=u.querySelector(dl(v)),b||(i=p({src:i,async:!0},o),(o=pr.get(v))&&bm(i,o),b=u.createElement("script"),Yt(b),on(b,"link",i),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(v,b))}}function Y2(i,o){cs.M(i,o);var u=Da;if(u&&i){var h=ra(u).hoistableScripts,v=ja(i),b=h.get(v);b||(b=u.querySelector(dl(v)),b||(i=p({src:i,async:!0,type:"module"},o),(o=pr.get(v))&&bm(i,o),b=u.createElement("script"),Yt(b),on(b,"link",i),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(v,b))}}function uw(i,o,u,h){var v=(v=ce.current)?Bc(v):null;if(!v)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=za(u.href),u=ra(v).hoistableStyles,h=u.get(o),h||(h={type:"style",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=za(u.href);var b=ra(v).hoistableStyles,C=b.get(i);if(C||(v=v.ownerDocument||v,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,C),(b=v.querySelector(fl(i)))&&!b._p&&(C.instance=b,C.state.loading=5),pr.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},pr.set(i,u),b||J2(v,i,u,C.state))),o&&h===null)throw Error(r(528,""));return C}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ja(u),u=ra(v).hoistableScripts,h=u.get(o),h||(h={type:"script",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function za(i){return'href="'+ar(i)+'"'}function fl(i){return'link[rel="stylesheet"]['+i+"]"}function cw(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function J2(i,o,u,h){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=i.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),on(o,"link",u),Yt(o),i.head.appendChild(o))}function ja(i){return'[src="'+ar(i)+'"]'}function dl(i){return"script[async]"+i}function fw(i,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var h=i.querySelector('style[data-href~="'+ar(u.href)+'"]');if(h)return o.instance=h,Yt(h),h;var v=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Yt(h),on(h,"style",v),Uc(h,u.precedence,i),o.instance=h;case"stylesheet":v=za(u.href);var b=i.querySelector(fl(v));if(b)return o.state.loading|=4,o.instance=b,Yt(b),b;h=cw(u),(v=pr.get(v))&&vm(h,v),b=(i.ownerDocument||i).createElement("link"),Yt(b);var C=b;return C._p=new Promise(function(O,U){C.onload=O,C.onerror=U}),on(b,"link",h),o.state.loading|=4,Uc(b,u.precedence,i),o.instance=b;case"script":return b=ja(u.src),(v=i.querySelector(dl(b)))?(o.instance=v,Yt(v),v):(h=u,(v=pr.get(b))&&(h=p({},u),bm(h,v)),i=i.ownerDocument||i,v=i.createElement("script"),Yt(v),on(v,"link",h),i.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,Uc(h,u.precedence,i));return o.instance}function Uc(i,o,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,b=v,C=0;C<h.length;C++){var O=h[C];if(O.dataset.precedence===o)b=O;else if(b!==v)break}b?b.parentNode.insertBefore(i,b.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(i,o.firstChild))}function vm(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function bm(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var qc=null;function dw(i,o,u){if(qc===null){var h=new Map,v=qc=new Map;v.set(u,h)}else v=qc,h=v.get(u),h||(h=new Map,v.set(u,h));if(h.has(i))return h;for(h.set(i,null),u=u.getElementsByTagName(i),v=0;v<u.length;v++){var b=u[v];if(!(b[Ao]||b[nn]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var C=b.getAttribute(o)||"";C=i+C;var O=h.get(C);O?O.push(b):h.set(C,[b])}}return h}function hw(i,o,u){i=i.ownerDocument||i,i.head.insertBefore(u,o==="title"?i.querySelector("head > title"):null)}function X2(i,o,u){if(u===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function pw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function W2(i,o,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=za(h.href),b=o.querySelector(fl(v));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Hc.bind(i),o.then(i,i)),u.state.loading|=4,u.instance=b,Yt(b);return}b=o.ownerDocument||o,h=cw(h),(v=pr.get(v))&&vm(h,v),b=b.createElement("link"),Yt(b);var C=b;C._p=new Promise(function(O,U){C.onload=O,C.onerror=U}),on(b,"link",h),u.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=Hc.bind(i),o.addEventListener("load",u),o.addEventListener("error",u))}}var xm=0;function eM(i,o){return i.stylesheets&&i.count===0&&Kc(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var h=setTimeout(function(){if(i.stylesheets&&Kc(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+o);0<i.imgBytes&&xm===0&&(xm=62500*D2());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Kc(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>xm?50:800)+o);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function Hc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Vc=null;function Kc(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Vc=new Map,o.forEach(tM,i),Vc=null,Hc.call(i))}function tM(i,o){if(!(o.state.loading&4)){var u=Vc.get(i);if(u)var h=u.get(null);else{u=new Map,Vc.set(i,u);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var C=v[b];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),h=C)}h&&u.set(null,h)}v=o.instance,C=v.getAttribute("data-precedence"),b=u.get(C)||h,b===h&&u.set(null,v),u.set(C,v),this.count++,h=Hc.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),b?b.parentNode.insertBefore(v,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),o.state.loading|=4}}var hl={$$typeof:R,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function nM(i,o,u,h,v,b,C,O,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mh(0),this.hiddenUpdates=mh(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function mw(i,o,u,h,v,b,C,O,U,J,ie,ue){return i=new nM(i,o,u,C,U,J,ie,ue,O),o=1,b===!0&&(o|=24),b=Un(3,null,null,o),i.current=b,b.stateNode=i,o=Wh(),o.refCount++,i.pooledCache=o,o.refCount++,b.memoizedState={element:h,isDehydrated:u,cache:o},rp(b),i}function gw(i){return i?(i=ha,i):ha}function yw(i,o,u,h,v,b){v=gw(v),h.context===null?h.context=v:h.pendingContext=v,h=As(o),h.payload={element:u},b=b===void 0?null:b,b!==null&&(h.callback=b),u=Ts(i,h,o),u!==null&&(Nn(u,i,o),Vo(u,i,o))}function vw(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Sm(i,o){vw(i,o),(i=i.alternate)&&vw(i,o)}function bw(i){if(i.tag===13||i.tag===31){var o=gi(i,67108864);o!==null&&Nn(o,i,67108864),Sm(i,67108864)}}function xw(i){if(i.tag===13||i.tag===31){var o=Gn();o=gh(o);var u=gi(i,o);u!==null&&Nn(u,i,o),Sm(i,o)}}var Gc=!0;function rM(i,o,u,h){var v=F.T;F.T=null;var b=X.p;try{X.p=2,wm(i,o,u,h)}finally{X.p=b,F.T=v}}function sM(i,o,u,h){var v=F.T;F.T=null;var b=X.p;try{X.p=8,wm(i,o,u,h)}finally{X.p=b,F.T=v}}function wm(i,o,u,h){if(Gc){var v=_m(h);if(v===null)lm(i,o,h,Qc,u),ww(i,h);else if(aM(v,i,o,u,h))h.stopPropagation();else if(ww(i,h),o&4&&-1<iM.indexOf(i)){for(;v!==null;){var b=na(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var C=fi(b.pendingLanes);if(C!==0){var O=b;for(O.pendingLanes|=2,O.entangledLanes|=2;C;){var U=1<<31-wt(C);O.entanglements[1]|=U,C&=~U}jr(b),(dt&6)===0&&(Oc=ge()+500,ol(0))}}break;case 31:case 13:O=gi(b,2),O!==null&&Nn(O,b,2),Ic(),Sm(b,2)}if(b=_m(h),b===null&&lm(i,o,h,Qc,u),b===v)break;v=b}v!==null&&h.stopPropagation()}else lm(i,o,h,null,u)}}function _m(i){return i=Eh(i),Cm(i)}var Qc=null;function Cm(i){if(Qc=null,i=ta(i),i!==null){var o=a(i);if(o===null)i=null;else{var u=o.tag;if(u===13){if(i=l(o),i!==null)return i;i=null}else if(u===31){if(i=c(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Qc=i,null}function Sw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($e()){case ne:return 2;case de:return 8;case _e:case Ce:return 32;case xe:return 268435456;default:return 32}default:return 32}}var Em=!1,$s=null,Bs=null,Us=null,pl=new Map,ml=new Map,qs=[],iM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ww(i,o){switch(i){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":pl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ml.delete(o.pointerId)}}function gl(i,o,u,h,v,b){return i===null||i.nativeEvent!==b?(i={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:b,targetContainers:[v]},o!==null&&(o=na(o),o!==null&&bw(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),i)}function aM(i,o,u,h,v){switch(o){case"focusin":return $s=gl($s,i,o,u,h,v),!0;case"dragenter":return Bs=gl(Bs,i,o,u,h,v),!0;case"mouseover":return Us=gl(Us,i,o,u,h,v),!0;case"pointerover":var b=v.pointerId;return pl.set(b,gl(pl.get(b)||null,i,o,u,h,v)),!0;case"gotpointercapture":return b=v.pointerId,ml.set(b,gl(ml.get(b)||null,i,o,u,h,v)),!0}return!1}function _w(i){var o=ta(i.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){i.blockedOn=o,Lv(i.priority,function(){xw(u)});return}}else if(o===31){if(o=c(u),o!==null){i.blockedOn=o,Lv(i.priority,function(){xw(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Zc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=_m(i.nativeEvent);if(u===null){u=i.nativeEvent;var h=new u.constructor(u.type,u);Ch=h,u.target.dispatchEvent(h),Ch=null}else return o=na(u),o!==null&&bw(o),i.blockedOn=u,!1;o.shift()}return!0}function Cw(i,o,u){Zc(i)&&u.delete(o)}function oM(){Em=!1,$s!==null&&Zc($s)&&($s=null),Bs!==null&&Zc(Bs)&&(Bs=null),Us!==null&&Zc(Us)&&(Us=null),pl.forEach(Cw),ml.forEach(Cw)}function Yc(i,o){i.blockedOn===o&&(i.blockedOn=null,Em||(Em=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oM)))}var Jc=null;function Ew(i){Jc!==i&&(Jc=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Jc===i&&(Jc=null);for(var o=0;o<i.length;o+=3){var u=i[o],h=i[o+1],v=i[o+2];if(typeof h!="function"){if(Cm(h||u)===null)continue;break}var b=na(u);b!==null&&(i.splice(o,3),o-=3,_p(b,{pending:!0,data:v,method:u.method,action:h},h,v))}}))}function La(i){function o(U){return Yc(U,i)}$s!==null&&Yc($s,i),Bs!==null&&Yc(Bs,i),Us!==null&&Yc(Us,i),pl.forEach(o),ml.forEach(o);for(var u=0;u<qs.length;u++){var h=qs[u];h.blockedOn===i&&(h.blockedOn=null)}for(;0<qs.length&&(u=qs[0],u.blockedOn===null);)_w(u),u.blockedOn===null&&qs.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var v=u[h],b=u[h+1],C=v[Rn]||null;if(typeof b=="function")C||Ew(u);else if(C){var O=null;if(b&&b.hasAttribute("formAction")){if(v=b,C=b[Rn]||null)O=C.formAction;else if(Cm(v)!==null)continue}else O=C.action;typeof O=="function"?u[h+1]=O:(u.splice(h,3),h-=3),Ew(u)}}}function kw(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(C){return v=C})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function km(i){this._internalRoot=i}Xc.prototype.render=km.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var u=o.current,h=Gn();yw(u,h,i,o,null,null)},Xc.prototype.unmount=km.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;yw(i.current,2,null,i,null,null),Ic(),o[ea]=null}};function Xc(i){this._internalRoot=i}Xc.prototype.unstable_scheduleHydration=function(i){if(i){var o=jv();i={blockedOn:null,target:i,priority:o};for(var u=0;u<qs.length&&o!==0&&o<qs[u].priority;u++);qs.splice(u,0,i),u===0&&_w(i)}};var Rw=e.version;if(Rw!=="19.2.3")throw Error(r(527,Rw,"19.2.3"));X.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var lM={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{at=Wc.inject(lM),ot=Wc}catch{}}return vl.createRoot=function(i,o){if(!s(i))throw Error(r(299));var u=!1,h="",v=Dx,b=zx,C=jx;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError)),o=mw(i,1,!1,null,null,u,h,null,v,b,C,kw),i[ea]=o.current,om(i),new km(o)},vl.hydrateRoot=function(i,o,u){if(!s(i))throw Error(r(299));var h=!1,v="",b=Dx,C=zx,O=jx,U=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(O=u.onRecoverableError),u.formState!==void 0&&(U=u.formState)),o=mw(i,1,!0,o,u??null,h,v,U,b,C,O,kw),o.context=gw(null),u=o.current,h=Gn(),h=gh(h),v=As(h),v.callback=null,Ts(u,v,h),u=h,o.current.lanes=u,Ro(o,u),jr(o),i[ea]=o.current,om(i),new Xc(o)},vl.version="19.2.3",vl}var Lw;function yM(){if(Lw)return Tm.exports;Lw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Tm.exports=gM(),Tm.exports}var vM=yM(),Nm={exports:{}},Dm={};var Pw;function bM(){if(Pw)return Dm;Pw=1;var t=fo().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Dm.c=function(e){return t.H.useMemoCache(e)},Dm}var Fw;function xM(){return Fw||(Fw=1,Nm.exports=bM()),Nm.exports}var tn=xM(),ho=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},SM={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},wM=class{#e=SM;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},zi=new wM;function _M(t){setTimeout(t,0)}var qi=typeof window>"u"||"Deno"in globalThis;function Sn(){}function CM(t,e){return typeof t=="function"?t(e):t}function Bg(t){return typeof t=="number"&&t>=0&&t!==1/0}function WC(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ei(t,e){return typeof t=="function"?t(e):t}function gr(t,e){return typeof t=="function"?t(e):t}function $w(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:c}=t;if(l){if(r){if(e.queryHash!==e0(l,e.options))return!1}else if(!lu(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||s&&s!==e.state.fetchStatus||a&&!a(e))}function Bw(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Ar(e.options.mutationKey)!==Ar(a))return!1}else if(!lu(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function e0(t,e){return(e?.queryKeyHashFn||Ar)(t)}function Ar(t){return JSON.stringify(t,(e,n)=>Ug(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function lu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>lu(t[n],e[n])):!1}var EM=Object.prototype.hasOwnProperty;function eE(t,e){if(t===e)return t;const n=Uw(t)&&Uw(e);if(!n&&!(Ug(t)&&Ug(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,c=n?new Array(l):{};let f=0;for(let d=0;d<l;d++){const m=n?d:a[d],p=t[m],g=e[m];if(p===g){c[m]=p,(n?d<s:EM.call(t,m))&&f++;continue}if(p===null||g===null||typeof p!="object"||typeof g!="object"){c[m]=g;continue}const y=eE(p,g);c[m]=y,y===p&&f++}return s===l&&f===s?t:c}function Gf(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Uw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ug(t){if(!qw(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!qw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function qw(t){return Object.prototype.toString.call(t)==="[object Object]"}function kM(t){return new Promise(e=>{zi.setTimeout(e,t)})}function qg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?eE(t,e):e}function RM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function AM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var t0=Symbol();function tE(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===t0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function n0(t,e){return typeof t=="function"?t(...e):!!t}function TM(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var OM=class extends ho{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!qi&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},r0=new OM;function Hg(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var MM=_M;function IM(){let t=[],e=0,n=c=>{c()},r=c=>{c()},s=MM;const a=c=>{e?t.push(c):s(()=>{n(c)})},l=()=>{const c=t;t=[],c.length&&s(()=>{r(()=>{c.forEach(f=>{n(f)})})})};return{batch:c=>{let f;e++;try{f=c()}finally{e--,e||l()}return f},batchCalls:c=>(...f)=>{a(()=>{c(...f)})},schedule:a,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{s=c}}}var Gt=IM(),NM=class extends ho{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!qi&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Qf=new NM;function DM(t){return Math.min(1e3*2**t,3e4)}function nE(t){return(t??"online")==="online"?Qf.isOnline():!0}var Vg=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function rE(t){let e=!1,n=0,r;const s=Hg(),a=()=>s.status!=="pending",l=S=>{if(!a()){const E=new Vg(S);g(E),t.onCancel?.(E)}},c=()=>{e=!0},f=()=>{e=!1},d=()=>r0.isFocused()&&(t.networkMode==="always"||Qf.isOnline())&&t.canRun(),m=()=>nE(t.networkMode)&&t.canRun(),p=S=>{a()||(r?.(),s.resolve(S))},g=S=>{a()||(r?.(),s.reject(S))},y=()=>new Promise(S=>{r=E=>{(a()||d())&&S(E)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),x=()=>{if(a())return;let S;const E=n===0?t.initialPromise:void 0;try{S=E??t.fn()}catch(_){S=Promise.reject(_)}Promise.resolve(S).then(p).catch(_=>{if(a())return;const k=t.retry??(qi?0:3),R=t.retryDelay??DM,N=typeof R=="function"?R(n,_):R,L=k===!0||typeof k=="number"&&n<k||typeof k=="function"&&k(n,_);if(e||!L){g(_);return}n++,t.onFail?.(n,_),kM(N).then(()=>d()?void 0:y()).then(()=>{e?g(_):x()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r?.(),s),cancelRetry:c,continueRetry:f,canStart:m,start:()=>(m()?x():y().then(x),s)}}var sE=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Bg(this.gcTime)&&(this.#e=zi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(qi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(zi.clearTimeout(this.#e),this.#e=void 0)}},zM=class extends sE{#e;#t;#n;#r;#s;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Vw(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=Vw(this.options);e.data!==void 0&&(this.setState(Hw(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=qg(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(Sn).catch(Sn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>gr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===t0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ei(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!WC(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(f=>f.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},s=()=>{const c=tE(this.options,e),d=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#i=!1,this.options.persister?this.options.persister(c,d,this):c(d)},l=(()=>{const c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:s};return r(c),c})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#s=rE({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof Vg&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(c,f)=>{this.#a({type:"failed",failureCount:c,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const c=await this.#s.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof Vg){if(c.silent)return this.#s.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#a({type:"error",error:c}),this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...iE(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...Hw(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Gt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function iE(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:nE(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Hw(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Vw(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var aE=class extends ho{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#i=Hg(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#i;#a;#p;#m;#u;#c;#l;#f;#d=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Kw(this.#t,this.options)?this.#h():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Kg(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Kg(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#S(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!Gf(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Gw(this.#t,n,this.options,e)&&this.#h(),this.updateResult(),r&&(this.#t!==n||gr(this.options.enabled,this.#t)!==gr(e.enabled,this.#t)||ei(this.options.staleTime,this.#t)!==ei(e.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==n||gr(this.options.enabled,this.#t)!==gr(e.enabled,this.#t)||s!==this.#f)&&this.#v(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return LM(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#d.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Sn)),e}#g(){this.#x();const t=ei(this.options.staleTime,this.#t);if(qi||this.#r.isStale||!Bg(t))return;const n=WC(this.#r.dataUpdatedAt,t)+1;this.#c=zi.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#S(),this.#f=t,!(qi||gr(this.options.enabled,this.#t)===!1||!Bg(this.#f)||this.#f===0)&&(this.#l=zi.setInterval(()=>{(this.options.refetchIntervalInBackground||r0.isFocused())&&this.#h()},this.#f))}#b(){this.#g(),this.#v(this.#y())}#x(){this.#c&&(zi.clearTimeout(this.#c),this.#c=void 0)}#S(){this.#l&&(zi.clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const n=this.#t,r=this.options,s=this.#r,a=this.#s,l=this.#o,f=t!==n?t.state:this.#n,{state:d}=t;let m={...d},p=!1,g;if(e._optimisticResults){const j=this.hasListeners(),P=!j&&Kw(t,e),M=j&&Gw(t,n,e,r);(P||M)&&(m={...m,...iE(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:y,errorUpdatedAt:x,status:S}=m;g=m.data;let E=!1;if(e.placeholderData!==void 0&&g===void 0&&S==="pending"){let j;s?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(j=s.data,E=!0):j=typeof e.placeholderData=="function"?e.placeholderData(this.#u?.state.data,this.#u):e.placeholderData,j!==void 0&&(S="success",g=qg(s?.data,j,e),p=!0)}if(e.select&&g!==void 0&&!E)if(s&&g===a?.data&&e.select===this.#p)g=this.#m;else try{this.#p=e.select,g=e.select(g),g=qg(s?.data,g,e),this.#m=g,this.#a=null}catch(j){this.#a=j}this.#a&&(y=this.#a,g=this.#m,x=Date.now(),S="error");const _=m.fetchStatus==="fetching",k=S==="pending",R=S==="error",N=k&&_,L=g!==void 0,I={status:S,fetchStatus:m.fetchStatus,isPending:k,isSuccess:S==="success",isError:R,isInitialLoading:N,isLoading:N,data:g,dataUpdatedAt:m.dataUpdatedAt,error:y,errorUpdatedAt:x,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:_,isRefetching:_&&!k,isLoadingError:R&&!L,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:R&&L,isStale:s0(t,e),refetch:this.refetch,promise:this.#i,isEnabled:gr(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const j=B=>{I.status==="error"?B.reject(I.error):I.data!==void 0&&B.resolve(I.data)},P=()=>{const B=this.#i=I.promise=Hg();j(B)},M=this.#i;switch(M.status){case"pending":t.queryHash===n.queryHash&&j(M);break;case"fulfilled":(I.status==="error"||I.data!==M.value)&&P();break;case"rejected":(I.status!=="error"||I.error!==M.reason)&&P();break}}return I}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#u=this.#t),Gf(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#d.size)return!0;const a=new Set(s??this.#d);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const c=l;return this.#r[c]!==t[c]&&a.has(c)})};this.#_({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#_(t){Gt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function jM(t,e){return gr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Kw(t,e){return jM(t,e)||t.state.data!==void 0&&Kg(t,e,e.refetchOnMount)}function Kg(t,e,n){if(gr(e.enabled,t)!==!1&&ei(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&s0(t,e)}return!1}function Gw(t,e,n,r){return(t!==e||gr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&s0(t,n)}function s0(t,e){return gr(e.enabled,t)!==!1&&t.isStaleByTime(ei(e.staleTime,t))}function LM(t,e){return!Gf(t.getCurrentResult(),e)}function Qw(t){return{onFetch:(e,n)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},f=0;const d=async()=>{let m=!1;const p=x=>{TM(x,()=>e.signal,()=>m=!0)},g=tE(e.options,e.fetchOptions),y=async(x,S,E)=>{if(m)return Promise.reject();if(S==null&&x.pages.length)return Promise.resolve(x);const k=(()=>{const A={client:e.client,queryKey:e.queryKey,pageParam:S,direction:E?"backward":"forward",meta:e.options.meta};return p(A),A})(),R=await g(k),{maxPages:N}=e.options,L=E?AM:RM;return{pages:L(x.pages,R,N),pageParams:L(x.pageParams,S,N)}};if(s&&a.length){const x=s==="backward",S=x?PM:Zw,E={pages:a,pageParams:l},_=S(r,E);c=await y(E,_,x)}else{const x=t??a.length;do{const S=f===0?l[0]??r.initialPageParam:Zw(r,c);if(f>0&&S==null)break;c=await y(c,S),f++}while(f<x)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function Zw(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function PM(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var FM=class extends sE{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||oE(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=rE({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#s({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#r.canStart();try{if(r)e();else{this.#s({type:"pending",variables:t,isPaused:s}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#s({type:"pending",context:l,variables:t,isPaused:s})}const a=await this.#r.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#s({type:"success",data:a}),a}catch(a){try{await this.#n.config.onError?.(a,t,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(a,t,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,a,t,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#s({type:"error",error:a}),a}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Gt.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function oE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $M=class extends ho{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new FM({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=ef(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=ef(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=ef(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=ef(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Gt.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Bw(e,n))}findAll(t={}){return this.getAll().filter(e=>Bw(t,e))}notify(t){Gt.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Gt.batch(()=>Promise.all(t.map(e=>e.continue().catch(Sn))))}};function ef(t){return t.options.scope?.id}var BM=class extends ho{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),Gf(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Ar(n.mutationKey)!==Ar(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#s(),this.#o(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#o()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#s(){const e=this.#n?.state??oE();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#o(e){Gt.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#r.onSuccess?.(e.data,n,r,s)}catch(a){Promise.reject(a)}try{this.#r.onSettled?.(e.data,null,n,r,s)}catch(a){Promise.reject(a)}}else if(e?.type==="error"){try{this.#r.onError?.(e.error,n,r,s)}catch(a){Promise.reject(a)}try{this.#r.onSettled?.(void 0,e.error,n,r,s)}catch(a){Promise.reject(a)}}}this.listeners.forEach(n=>{n(this.#t)})})}},UM=class extends ho{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,s=e.queryHash??e0(r,e);let a=this.get(s);return a||(a=new zM({client:t,queryKey:r,queryHash:s,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Gt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>$w(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>$w(t,n)):e}notify(t){Gt.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Gt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Gt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},lE=class{#e;#t;#n;#r;#s;#o;#i;#a;constructor(t={}){this.#e=t.queryCache||new UM,this.#t=t.mutationCache||new $M,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=r0.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Qf.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ei(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,l=CM(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return Gt.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Gt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return Gt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Gt.batch(()=>this.#e.findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Sn).catch(Sn)}invalidateQueries(t,e={}){return Gt.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Gt.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Sn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Sn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(ei(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Sn).catch(Sn)}fetchInfiniteQuery(t){return t.behavior=Qw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Sn).catch(Sn)}ensureInfiniteQueryData(t){return t.behavior=Qw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Qf.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Ar(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{lu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(Ar(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{lu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=e0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===t0&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},uE=q.createContext(void 0),po=t=>{const e=q.useContext(uE);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},qM=({client:t,children:e})=>(q.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),w.jsx(uE.Provider,{value:t,children:e})),cE=q.createContext(!1),HM=()=>q.useContext(cE);cE.Provider;function VM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var KM=q.createContext(VM()),GM=()=>q.useContext(KM),QM=(t,e,n)=>{const r=n?.state.error&&typeof t.throwOnError=="function"?n0(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||r)&&(e.isReset()||(t.retryOnMount=!1))},ZM=t=>{q.useEffect(()=>{t.clearReset()},[t])},YM=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||n0(n,[t.error,r])),JM=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},XM=(t,e)=>t.isLoading&&t.isFetching&&!e,WM=(t,e)=>t?.suspense&&e.isPending,Yw=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function eI(t,e,n){const r=HM(),s=GM(),a=po(),l=a.defaultQueryOptions(t);a.getDefaultOptions().queries?._experimental_beforeQuery?.(l);const c=a.getQueryCache().get(l.queryHash);l._optimisticResults=r?"isRestoring":"optimistic",JM(l),QM(l,s,c),ZM(s);const f=!a.getQueryCache().get(l.queryHash),[d]=q.useState(()=>new e(a,l)),m=d.getOptimisticResult(l),p=!r&&t.subscribed!==!1;if(q.useSyncExternalStore(q.useCallback(g=>{const y=p?d.subscribe(Gt.batchCalls(g)):Sn;return d.updateResult(),y},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),q.useEffect(()=>{d.setOptions(l)},[l,d]),WM(l,m))throw Yw(l,d,s);if(YM({result:m,errorResetBoundary:s,throwOnError:l.throwOnError,query:c,suspense:l.suspense}))throw m.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(l,m),l.experimental_prefetchInRender&&!qi&&XM(m,r)&&(f?Yw(l,d,s):c?.promise)?.catch(Sn).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?m:d.trackResult(m)}function ys(t,e){return eI(t,aE)}function uu(t,e){const n=po(),[r]=q.useState(()=>new BM(n,t));q.useEffect(()=>{r.setOptions(t)},[r,t]);const s=q.useSyncExternalStore(q.useCallback(l=>r.subscribe(Gt.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=q.useCallback((l,c)=>{r.mutate(l,c).catch(Sn)},[r]);if(s.error&&n0(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}const Gg=new WeakMap,tI=new WeakMap,Zf={current:[]};let zm=!1,Vl=0;const Ol=new Set,tf=new Map;function fE(t){for(const e of t){if(Zf.current.includes(e))continue;Zf.current.push(e),e.recompute();const n=tI.get(e);if(n)for(const r of n){const s=Gg.get(r);s?.length&&fE(s)}}}function nI(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function rI(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function dE(t){if(Vl>0&&!tf.has(t)&&tf.set(t,t.prevState),Ol.add(t),!(Vl>0)&&!zm)try{for(zm=!0;Ol.size>0;){const e=Array.from(Ol);Ol.clear();for(const n of e){const r=tf.get(n)??n.prevState;n.prevState=r,nI(n)}for(const n of e){const r=Gg.get(n);r&&(Zf.current.push(n),fE(r))}for(const n of e){const r=Gg.get(n);if(r)for(const s of r)rI(s)}}}finally{zm=!1,Zf.current=[],tf.clear()}}function Kl(t){Vl++;try{t()}finally{if(Vl--,Vl===0){const e=Ol.values().next().value;e&&dE(e)}}}function sI(t){return typeof t=="function"}class iI{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var s,a;this.listeners.add(r);const l=(a=(s=this.options)==null?void 0:s.onSubscribe)==null?void 0:a.call(s,r,this);return()=>{this.listeners.delete(r),l?.()}},this.prevState=e,this.state=e,this.options=n}setState(e){var n,r,s;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(e):sI(e)?this.state=e(this.prevState):this.state=e,(s=(r=this.options)==null?void 0:r.onUpdate)==null||s.call(r),dE(this)}}const ti="__TSR_index",Jw="popstate",Xw="beforeunload";function aI(t){let e=t.getLocation();const n=new Set,r=l=>{e=t.getLocation(),n.forEach(c=>c({location:e,action:l}))},s=l=>{t.notifyOnIndexChange??!0?r(l):e=t.getLocation()},a=async({task:l,navigateOpts:c,...f})=>{if(c?.ignoreBlocker??!1){l();return}const m=t.getBlockers?.()??[],p=f.type==="PUSH"||f.type==="REPLACE";if(typeof document<"u"&&m.length&&p)for(const g of m){const y=Yf(f.path,f.state);if(await g.blockerFn({currentLocation:e,nextLocation:y,action:f.type})){t.onBlocked?.();return}}l()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:l=>(n.add(l),()=>{n.delete(l)}),push:(l,c,f)=>{const d=e.state[ti];c=Ww(d+1,c),a({task:()=>{t.pushState(l,c),r({type:"PUSH"})},navigateOpts:f,type:"PUSH",path:l,state:c})},replace:(l,c,f)=>{const d=e.state[ti];c=Ww(d,c),a({task:()=>{t.replaceState(l,c),r({type:"REPLACE"})},navigateOpts:f,type:"REPLACE",path:l,state:c})},go:(l,c)=>{a({task:()=>{t.go(l),s({type:"GO",index:l})},navigateOpts:c,type:"GO"})},back:l=>{a({task:()=>{t.back(l?.ignoreBlocker??!1),s({type:"BACK"})},navigateOpts:l,type:"BACK"})},forward:l=>{a({task:()=>{t.forward(l?.ignoreBlocker??!1),s({type:"FORWARD"})},navigateOpts:l,type:"FORWARD"})},canGoBack:()=>e.state[ti]!==0,createHref:l=>t.createHref(l),block:l=>{if(!t.setBlockers)return()=>{};const c=t.getBlockers?.()??[];return t.setBlockers([...c,l]),()=>{const f=t.getBlockers?.()??[];t.setBlockers?.(f.filter(d=>d!==l))}},flush:()=>t.flush?.(),destroy:()=>t.destroy?.(),notify:r}}function Ww(t,e){e||(e={});const n=i0();return{...e,key:n,__TSR_key:n,[ti]:t}}function oI(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,r=e.history.replaceState;let s=[];const a=()=>s,l=j=>s=j,c=(j=>j),f=(()=>Yf(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state));if(!e.history.state?.__TSR_key&&!e.history.state?.key){const j=i0();e.history.replaceState({[ti]:0,key:j,__TSR_key:j},"")}let d=f(),m,p=!1,g=!1,y=!1,x=!1;const S=()=>d;let E,_;const k=()=>{E&&(I._ignoreSubscribers=!0,(E.isPush?e.history.pushState:e.history.replaceState)(E.state,"",E.href),I._ignoreSubscribers=!1,E=void 0,_=void 0,m=void 0)},R=(j,P,M)=>{const B=c(P);_||(m=d),d=Yf(P,M),E={href:B,state:M,isPush:E?.isPush||j==="push"},_||(_=Promise.resolve().then(()=>k()))},N=j=>{d=f(),I.notify({type:j})},L=async()=>{if(g){g=!1;return}const j=f(),P=j.state[ti]-d.state[ti],M=P===1,B=P===-1,Q=!M&&!B||p;p=!1;const Z=Q?"GO":B?"BACK":"FORWARD",te=Q?{type:"GO",index:P}:{type:B?"BACK":"FORWARD"};if(y)y=!1;else{const V=a();if(typeof document<"u"&&V.length){for(const F of V)if(await F.blockerFn({currentLocation:d,nextLocation:j,action:Z})){g=!0,e.history.go(1),I.notify(te);return}}}d=f(),I.notify(te)},A=j=>{if(x){x=!1;return}let P=!1;const M=a();if(typeof document<"u"&&M.length)for(const B of M){const Q=B.enableBeforeUnload??!0;if(Q===!0){P=!0;break}if(typeof Q=="function"&&Q()===!0){P=!0;break}}if(P)return j.preventDefault(),j.returnValue=""},I=aI({getLocation:S,getLength:()=>e.history.length,pushState:(j,P)=>R("push",j,P),replaceState:(j,P)=>R("replace",j,P),back:j=>(j&&(y=!0),x=!0,e.history.back()),forward:j=>{j&&(y=!0),x=!0,e.history.forward()},go:j=>{p=!0,e.history.go(j)},createHref:j=>c(j),flush:k,destroy:()=>{e.history.pushState=n,e.history.replaceState=r,e.removeEventListener(Xw,A,{capture:!0}),e.removeEventListener(Jw,L)},onBlocked:()=>{m&&d!==m&&(d=m)},getBlockers:a,setBlockers:l,notifyOnIndexChange:!1});return e.addEventListener(Xw,A,{capture:!0}),e.addEventListener(Jw,L),e.history.pushState=function(...j){const P=n.apply(e.history,j);return I._ignoreSubscribers||N("PUSH"),P},e.history.replaceState=function(...j){const P=r.apply(e.history,j);return I._ignoreSubscribers||N("REPLACE"),P},I}function Yf(t,e){const n=t.indexOf("#"),r=t.indexOf("?"),s=i0();return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{[ti]:0,key:s,__TSR_key:s}}}function i0(){return(Math.random()+1).toString(36).substring(7)}function Jf(t){return t[t.length-1]}function lI(t){return typeof t=="function"}function Zs(t,e){return lI(t)?t(e):t}const uI=Object.prototype.hasOwnProperty;function mr(t,e){if(t===e)return t;const n=e,r=n_(t)&&n_(n);if(!r&&!(Xf(t)&&Xf(n)))return n;const s=r?t:e_(t);if(!s)return n;const a=r?n:e_(n);if(!a)return n;const l=s.length,c=a.length,f=r?new Array(c):{};let d=0;for(let m=0;m<c;m++){const p=r?m:a[m],g=t[p],y=n[p];if(g===y){f[p]=g,(r?m<l:uI.call(t,p))&&d++;continue}if(g===null||y===null||typeof g!="object"||typeof y!="object"){f[p]=y;continue}const x=mr(g,y);f[p]=x,x===g&&d++}return l===c&&d===l?t:f}function e_(t){const e=[],n=Object.getOwnPropertyNames(t);for(const s of n){if(!Object.prototype.propertyIsEnumerable.call(t,s))return!1;e.push(s)}const r=Object.getOwnPropertySymbols(t);for(const s of r){if(!Object.prototype.propertyIsEnumerable.call(t,s))return!1;e.push(s)}return e}function Xf(t){if(!t_(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!t_(n)||!n.hasOwnProperty("isPrototypeOf"))}function t_(t){return Object.prototype.toString.call(t)==="[object Object]"}function n_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Pi(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let r=0,s=t.length;r<s;r++)if(!Pi(t[r],e[r],n))return!1;return!0}if(Xf(t)&&Xf(e)){const r=n?.ignoreUndefined??!0;if(n?.partial){for(const l in e)if((!r||e[l]!==void 0)&&!Pi(t[l],e[l],n))return!1;return!0}let s=0;if(!r)s=Object.keys(t).length;else for(const l in t)t[l]!==void 0&&s++;let a=0;for(const l in e)if((!r||e[l]!==void 0)&&(a++,a>s||!Pi(t[l],e[l],n)))return!1;return s===a}return!1}function oo(t){let e,n;const r=new Promise((s,a)=>{e=s,n=a});return r.status="pending",r.resolve=s=>{r.status="resolved",r.value=s,e(s),t?.(s)},r.reject=s=>{r.status="rejected",n(s)},r}function ni(t){return!!(t&&typeof t=="object"&&typeof t.then=="function")}function r_(t){try{return decodeURI(t)}catch{return t.replaceAll(/%[0-9A-F]{2}/gi,e=>{try{return decodeURI(e)}catch{return e}})}}function s_(t,e){if(!t)return t;const n=/%25|%5C/gi;let r=0,s="",a;for(;(a=n.exec(t))!==null;)s+=r_(t.slice(r,a.index))+a[0],r=n.lastIndex;return s+r_(r?t.slice(r):t)}var cI="Invariant failed";function vs(t,e){if(!t)throw new Error(cI)}function Wf(t){const e=new Map;let n,r;const s=a=>{a.next&&(a.prev?(a.prev.next=a.next,a.next.prev=a.prev,a.next=void 0,r&&(r.next=a,a.prev=r)):(a.next.prev=void 0,n=a.next,a.next=void 0,r&&(a.prev=r,r.next=a)),r=a)};return{get(a){const l=e.get(a);if(l)return s(l),l.value},set(a,l){if(e.size>=t&&n){const f=n;e.delete(f.key),f.next&&(n=f.next,f.next.prev=void 0),f===r&&(r=void 0)}const c=e.get(a);if(c)c.value=l,s(c);else{const f={key:a,value:l,prev:r};r&&(r.next=f),r=f,n||(n=f),e.set(a,f)}},clear(){e.clear(),n=void 0,r=void 0}}}const lo=0,Hi=1,Vi=2,cu=3,Za=4,fI=/^([^{]*)\{\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,dI=/^([^{]*)\{-\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,hI=/^([^{]*)\{\$\}([^}]*)$/;function a0(t,e,n=new Uint16Array(6)){const r=t.indexOf("/",e),s=r===-1?t.length:r,a=t.substring(e,s);if(!a||!a.includes("$"))return n[0]=lo,n[1]=e,n[2]=e,n[3]=s,n[4]=s,n[5]=s,n;if(a==="$"){const d=t.length;return n[0]=Vi,n[1]=e,n[2]=e,n[3]=d,n[4]=d,n[5]=d,n}if(a.charCodeAt(0)===36)return n[0]=Hi,n[1]=e,n[2]=e+1,n[3]=s,n[4]=s,n[5]=s,n;const l=a.match(hI);if(l){const m=l[1].length;return n[0]=Vi,n[1]=e+m,n[2]=e+m+1,n[3]=e+m+2,n[4]=e+m+3,n[5]=t.length,n}const c=a.match(dI);if(c){const d=c[1],m=c[2],p=c[3],g=d.length;return n[0]=cu,n[1]=e+g,n[2]=e+g+3,n[3]=e+g+3+m.length,n[4]=s-p.length,n[5]=s,n}const f=a.match(fI);if(f){const d=f[1],m=f[2],p=f[3],g=d.length;return n[0]=Hi,n[1]=e+g,n[2]=e+g+2,n[3]=e+g+2+m.length,n[4]=s-p.length,n[5]=s,n}return n[0]=lo,n[1]=e,n[2]=e,n[3]=s,n[4]=s,n[5]=s,n}function Dd(t,e,n,r,s,a,l){l?.(n);let c=r;{const f=n.fullPath??n.from,d=f.length,m=n.options?.caseSensitive??t;for(;c<d;){const g=a0(f,c,e);let y;const x=c,S=g[5];switch(c=S+1,a++,g[0]){case lo:{const _=f.substring(g[2],g[3]);if(m){const k=s.static?.get(_);if(k)y=k;else{s.static??=new Map;const R=no(n.fullPath??n.from);R.parent=s,R.depth=a,y=R,s.static.set(_,R)}}else{const k=_.toLowerCase(),R=s.staticInsensitive?.get(k);if(R)y=R;else{s.staticInsensitive??=new Map;const N=no(n.fullPath??n.from);N.parent=s,N.depth=a,y=N,s.staticInsensitive.set(k,N)}}break}case Hi:{const _=f.substring(x,g[1]),k=f.substring(g[4],S),R=m&&!!(_||k),N=_?R?_:_.toLowerCase():void 0,L=k?R?k:k.toLowerCase():void 0,A=s.dynamic?.find(I=>I.caseSensitive===R&&I.prefix===N&&I.suffix===L);if(A)y=A;else{const I=Lm(Hi,n.fullPath??n.from,R,N,L);y=I,I.depth=a,I.parent=s,s.dynamic??=[],s.dynamic.push(I)}break}case cu:{const _=f.substring(x,g[1]),k=f.substring(g[4],S),R=m&&!!(_||k),N=_?R?_:_.toLowerCase():void 0,L=k?R?k:k.toLowerCase():void 0,A=s.optional?.find(I=>I.caseSensitive===R&&I.prefix===N&&I.suffix===L);if(A)y=A;else{const I=Lm(cu,n.fullPath??n.from,R,N,L);y=I,I.parent=s,I.depth=a,s.optional??=[],s.optional.push(I)}break}case Vi:{const _=f.substring(x,g[1]),k=f.substring(g[4],S),R=m&&!!(_||k),N=_?R?_:_.toLowerCase():void 0,L=k?R?k:k.toLowerCase():void 0,A=Lm(Vi,n.fullPath??n.from,R,N,L);y=A,A.parent=s,A.depth=a,s.wildcard??=[],s.wildcard.push(A)}}s=y}const p=(n.path||!n.children)&&!n.isRoot;if(p&&f.endsWith("/")){const g=no(n.fullPath??n.from);g.kind=Za,g.parent=s,a++,g.depth=a,s.index=g,s=g}p&&!s.route&&(s.route=n,s.fullPath=n.fullPath??n.from)}if(n.children)for(const f of n.children)Dd(t,e,f,c,s,a,l)}function jm(t,e){if(t.prefix&&e.prefix&&t.prefix!==e.prefix){if(t.prefix.startsWith(e.prefix))return-1;if(e.prefix.startsWith(t.prefix))return 1}if(t.suffix&&e.suffix&&t.suffix!==e.suffix){if(t.suffix.endsWith(e.suffix))return-1;if(e.suffix.endsWith(t.suffix))return 1}return t.prefix&&!e.prefix?-1:!t.prefix&&e.prefix?1:t.suffix&&!e.suffix?-1:!t.suffix&&e.suffix?1:t.caseSensitive&&!e.caseSensitive?-1:!t.caseSensitive&&e.caseSensitive?1:0}function Ni(t){if(t.static)for(const e of t.static.values())Ni(e);if(t.staticInsensitive)for(const e of t.staticInsensitive.values())Ni(e);if(t.dynamic?.length){t.dynamic.sort(jm);for(const e of t.dynamic)Ni(e)}if(t.optional?.length){t.optional.sort(jm);for(const e of t.optional)Ni(e)}if(t.wildcard?.length){t.wildcard.sort(jm);for(const e of t.wildcard)Ni(e)}}function no(t){return{kind:lo,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null}}function Lm(t,e,n,r,s){return{kind:t,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null,caseSensitive:n,prefix:r,suffix:s}}function pI(t,e){const n=no("/"),r=new Uint16Array(6);for(const s of t)Dd(!1,r,s,1,n,0);Ni(n),e.masksTree=n,e.flatCache=Wf(1e3)}function mI(t,e){t||="/";const n=e.flatCache.get(t);if(n)return n;const r=o0(t,e.masksTree);return e.flatCache.set(t,r),r}function gI(t,e,n,r,s){t||="/",r||="/";const a=e?`case\0${t}`:t;let l=s.singleCache.get(a);if(!l){l=no("/");const c=new Uint16Array(6);Dd(e,c,{from:t},1,l,0),s.singleCache.set(a,l)}return o0(r,l,n)}function yI(t,e,n=!1){const r=n?t:`nofuzz\0${t}`,s=e.matchCache.get(r);if(s!==void 0)return s;t||="/";const a=o0(t,e.segmentTree,n);return a&&(a.branch=SI(a.route)),e.matchCache.set(r,a),a}function vI(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function bI(t,e=!1,n){const r=no(t.fullPath),s=new Uint16Array(6),a={},l={};let c=0;return Dd(e,s,t,1,r,0,d=>{if(n?.(d,c),vs(!(d.id in a),`Duplicate routes found with id: ${String(d.id)}`),a[d.id]=d,c!==0&&d.path){const m=vI(d.fullPath);(!l[m]||d.fullPath.endsWith("/"))&&(l[m]=d)}c++}),Ni(r),{processedTree:{segmentTree:r,singleCache:Wf(1e3),matchCache:Wf(1e3),flatCache:null,masksTree:null},routesById:a,routesByPath:l}}function o0(t,e,n=!1){const r=t.split("/"),s=_I(t,r,e,n);if(!s)return null;const a=xI(t,r,s);return"**"in s&&(a["**"]=s["**"]),{route:s.node.route,params:a}}function xI(t,e,n){const r=wI(n.node);let s=null;const a={};for(let l=0,c=0,f=0;c<r.length;l++,c++,f++){const d=r[c],m=e[l],p=f;if(m&&(f+=m.length),d.kind===Hi){s??=n.node.fullPath.split("/");const g=s[c],y=d.prefix?.length??0;if(g.charCodeAt(y)===123){const S=d.suffix?.length??0,E=g.substring(y+2,g.length-S-1),_=m.substring(y,m.length-S);a[E]=decodeURIComponent(_)}else{const S=g.substring(1);a[S]=decodeURIComponent(m)}}else if(d.kind===cu){if(n.skipped&1<<c){l--;continue}s??=n.node.fullPath.split("/");const g=s[c],y=d.prefix?.length??0,x=d.suffix?.length??0,S=g.substring(y+3,g.length-x-1),E=d.suffix||d.prefix?m.substring(y,m.length-x):m;E&&(a[S]=decodeURIComponent(E))}else if(d.kind===Vi){const g=d,y=t.substring(p+(g.prefix?.length??0),t.length-(g.suffix?.length??0)),x=decodeURIComponent(y);a["*"]=x,a._splat=x;break}}return a}function SI(t){const e=[t];for(;t.parentRoute;)t=t.parentRoute,e.push(t);return e.reverse(),e}function wI(t){const e=Array(t.depth+1);do e[t.depth]=t,t=t.parent;while(t);return e}function _I(t,e,n,r){if(t==="/"&&n.index)return{node:n.index,skipped:0};const s=!Jf(e),a=s&&t!=="/",l=e.length-(s?1:0),c=[{node:n,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let f=null,d=null,m=null;for(;c.length;){const p=c.pop();let{node:g,index:y,skipped:x,depth:S,statics:E,dynamics:_,optionals:k}=p;r&&g.route&&g.kind!==Za&&bl(d,p)&&(d=p);const R=y===l;if(R&&(g.route&&!a&&bl(m,p)&&(m=p),!g.optional&&!g.wildcard&&!g.index))continue;const N=R?void 0:e[y];let L;if(R&&g.index){const A={node:g.index,index:y,skipped:x,depth:S+1,statics:E,dynamics:_,optionals:k};if(E===l&&!_&&!k&&!x)return A;bl(m,A)&&(m=A)}if(g.wildcard&&bl(f,p))for(const A of g.wildcard){const{prefix:I,suffix:j}=A;if(!(I&&(R||!(A.caseSensitive?N:L??=N.toLowerCase()).startsWith(I)))){if(j){if(R)continue;const P=e.slice(y).join("/").slice(-j.length);if((A.caseSensitive?P:P.toLowerCase())!==j)continue}f={node:A,index:l,skipped:x,depth:S,statics:E,dynamics:_,optionals:k};break}}if(g.optional){const A=x|1<<S,I=S+1;for(let j=g.optional.length-1;j>=0;j--){const P=g.optional[j];c.push({node:P,index:y,skipped:A,depth:I,statics:E,dynamics:_,optionals:k})}if(!R)for(let j=g.optional.length-1;j>=0;j--){const P=g.optional[j],{prefix:M,suffix:B}=P;if(M||B){const Q=P.caseSensitive?N:L??=N.toLowerCase();if(M&&!Q.startsWith(M)||B&&!Q.endsWith(B))continue}c.push({node:P,index:y+1,skipped:x,depth:I,statics:E,dynamics:_,optionals:k+1})}}if(!R&&g.dynamic&&N)for(let A=g.dynamic.length-1;A>=0;A--){const I=g.dynamic[A],{prefix:j,suffix:P}=I;if(j||P){const M=I.caseSensitive?N:L??=N.toLowerCase();if(j&&!M.startsWith(j)||P&&!M.endsWith(P))continue}c.push({node:I,index:y+1,skipped:x,depth:S+1,statics:E,dynamics:_+1,optionals:k})}if(!R&&g.staticInsensitive){const A=g.staticInsensitive.get(L??=N.toLowerCase());A&&c.push({node:A,index:y+1,skipped:x,depth:S+1,statics:E+1,dynamics:_,optionals:k})}if(!R&&g.static){const A=g.static.get(N);A&&c.push({node:A,index:y+1,skipped:x,depth:S+1,statics:E+1,dynamics:_,optionals:k})}}if(m&&f)return bl(f,m)?m:f;if(m)return m;if(f)return f;if(r&&d){let p=d.index;for(let y=0;y<d.index;y++)p+=e[y].length;const g=p===t.length?"/":t.slice(p);return{node:d.node,skipped:d.skipped,"**":decodeURIComponent(g)}}return null}function bl(t,e){return t?e.statics>t.statics||e.statics===t.statics&&(e.dynamics>t.dynamics||e.dynamics===t.dynamics&&(e.optionals>t.optionals||e.optionals===t.optionals&&((e.node.kind===Za)>(t.node.kind===Za)||e.node.kind===Za==(t.node.kind===Za)&&e.depth>t.depth))):!0}function Mf(t){return l0(t.filter(e=>e!==void 0).join("/"))}function l0(t){return t.replace(/\/{2,}/g,"/")}function hE(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function Fi(t){const e=t.length;return e>1&&t[e-1]==="/"?t.replace(/\/{1,}$/,""):t}function pE(t){return Fi(hE(t))}function ed(t,e){return t?.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function CI(t,e,n){return ed(t,n)===ed(e,n)}function EI({base:t,to:e,trailingSlash:n="never",cache:r}){const s=e.startsWith("/"),a=!s&&e===".";let l;if(r){l=s?e:a?t:t+"\0"+e;const p=r.get(l);if(p)return p}let c;if(a)c=t.split("/");else if(s)c=e.split("/");else{for(c=t.split("/");c.length>1&&Jf(c)==="";)c.pop();const p=e.split("/");for(let g=0,y=p.length;g<y;g++){const x=p[g];x===""?g?g===y-1&&c.push(x):c=[x]:x===".."?c.pop():x==="."||c.push(x)}}c.length>1&&(Jf(c)===""?n==="never"&&c.pop():n==="always"&&c.push(""));let f,d="";for(let p=0;p<c.length;p++){p>0&&(d+="/");const g=c[p];if(!g)continue;f=a0(g,0,f);const y=f[0];if(y===lo){d+=g;continue}const x=f[5],S=g.substring(0,f[1]),E=g.substring(f[4],x),_=g.substring(f[2],f[3]);y===Hi?d+=S||E?`${S}{$${_}}${E}`:`$${_}`:y===Vi?d+=S||E?`${S}{$}${E}`:"$":d+=`${S}{-$${_}}${E}`}d=l0(d);const m=d||"/";return l&&r&&r.set(l,m),m}function Pm(t,e,n){const r=e[t];return typeof r!="string"?r:t==="_splat"?encodeURI(r):kI(r,n)}function Fm({path:t,params:e,decodeCharMap:n}){let r=!1;const s={};if(!t||t==="/")return{interpolatedPath:"/",usedParams:s,isMissingParams:r};if(!t.includes("$"))return{interpolatedPath:t,usedParams:s,isMissingParams:r};const a=t.length;let l=0,c,f="";for(;l<a;){const m=l;c=a0(t,m,c);const p=c[5];if(l=p+1,m===p)continue;const g=c[0];if(g===lo){f+="/"+t.substring(m,p);continue}if(g===Vi){const y=e._splat;s._splat=y,s["*"]=y;const x=t.substring(m,c[1]),S=t.substring(c[4],p);if(!y){r=!0,(x||S)&&(f+="/"+x+S);continue}const E=Pm("_splat",e,n);f+="/"+x+E+S;continue}if(g===Hi){const y=t.substring(c[2],c[3]);!r&&!(y in e)&&(r=!0),s[y]=e[y];const x=t.substring(m,c[1]),S=t.substring(c[4],p),E=Pm(y,e,n)??"undefined";f+="/"+x+E+S;continue}if(g===cu){const y=t.substring(c[2],c[3]),x=e[y];if(x==null)continue;s[y]=x;const S=t.substring(m,c[1]),E=t.substring(c[4],p),_=Pm(y,e,n)??"";f+="/"+S+_+E;continue}}return t.endsWith("/")&&(f+="/"),{usedParams:s,interpolatedPath:f||"/",isMissingParams:r}}function kI(t,e){let n=encodeURIComponent(t);if(e)for(const[r,s]of e)n=n.replaceAll(r,s);return n}function er(t){return!!t?.isNotFound}function RI(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const td="tsr-scroll-restoration-v1_3",AI=(t,e)=>{let n;return(...r)=>{n||(n=setTimeout(()=>{t(...r),n=null},e))}};function TI(){const t=RI();if(!t)return null;const e=t.getItem(td);let n=e?JSON.parse(e):{};return{state:n,set:r=>(n=Zs(r,n)||n,t.setItem(td,JSON.stringify(n)))}}const nf=TI(),Qg=t=>t.state.__TSR_key||t.href;function OI(t){const e=[];let n;for(;n=t.parentNode;)e.push(`${t.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,t)+1})`),t=n;return`${e.reverse().join(" > ")}`.toLowerCase()}let nd=!1;function mE({storageKey:t,key:e,behavior:n,shouldScrollRestoration:r,scrollToTopSelectors:s,location:a}){let l;try{l=JSON.parse(sessionStorage.getItem(t)||"{}")}catch(d){console.error(d);return}const c=e||window.history.state?.__TSR_key,f=l[c];nd=!0;e:{if(r&&f&&Object.keys(f).length>0){for(const p in f){const g=f[p];if(p==="window")window.scrollTo({top:g.scrollY,left:g.scrollX,behavior:n});else if(p){const y=document.querySelector(p);y&&(y.scrollLeft=g.scrollX,y.scrollTop=g.scrollY)}}break e}const d=(a??window.location).hash.split("#",2)[1];if(d){const p=window.history.state?.__hashScrollIntoViewOptions??!0;if(p){const g=document.getElementById(d);g&&g.scrollIntoView(p)}break e}const m={top:0,left:0,behavior:n};if(window.scrollTo(m),s)for(const p of s){if(p==="window")continue;const g=typeof p=="function"?p():document.querySelector(p);g&&g.scrollTo(m)}}nd=!1}function MI(t,e){if(!nf&&!t.isServer||((t.options.scrollRestoration??!1)&&(t.isScrollRestoring=!0),t.isServer||t.isScrollRestorationSetup||!nf))return;t.isScrollRestorationSetup=!0,nd=!1;const r=t.options.getScrollRestorationKey||Qg;window.history.scrollRestoration="manual";const s=a=>{if(nd||!t.isScrollRestoring)return;let l="";if(a.target===document||a.target===window)l="window";else{const f=a.target.getAttribute("data-scroll-restoration-id");f?l=`[data-scroll-restoration-id="${f}"]`:l=OI(a.target)}const c=r(t.state.location);nf.set(f=>{const d=f[c]||={},m=d[l]||={};if(l==="window")m.scrollX=window.scrollX||0,m.scrollY=window.scrollY||0;else if(l){const p=document.querySelector(l);p&&(m.scrollX=p.scrollLeft||0,m.scrollY=p.scrollTop||0)}return f})};typeof document<"u"&&document.addEventListener("scroll",AI(s,100),!0),t.subscribe("onRendered",a=>{const l=r(a.toLocation);if(!t.resetNextScroll){t.resetNextScroll=!0;return}typeof t.options.scrollRestoration=="function"&&!t.options.scrollRestoration({location:t.latestLocation})||(mE({storageKey:td,key:l,behavior:t.options.scrollRestorationBehavior,shouldScrollRestoration:t.isScrollRestoring,scrollToTopSelectors:t.options.scrollToTopSelectors,location:t.history.location}),t.isScrollRestoring&&nf.set(c=>(c[l]||={},c)))})}function II(t){if(typeof document<"u"&&document.querySelector){const e=t.state.location.state.__hashScrollIntoViewOptions??!0;if(e&&t.state.location.hash!==""){const n=document.getElementById(t.state.location.hash);n&&n.scrollIntoView(e)}}}function NI(t,e=String){const n=new URLSearchParams;for(const r in t){const s=t[r];s!==void 0&&n.set(r,e(s))}return n.toString()}function $m(t){return t?t==="false"?!1:t==="true"?!0:+t*0===0&&+t+""===t?+t:t:""}function DI(t){const e=new URLSearchParams(t),n={};for(const[r,s]of e.entries()){const a=n[r];a==null?n[r]=$m(s):Array.isArray(a)?a.push($m(s)):n[r]=[a,$m(s)]}return n}const zI=LI(JSON.parse),jI=PI(JSON.stringify,JSON.parse);function LI(t){return e=>{e[0]==="?"&&(e=e.substring(1));const n=DI(e);for(const r in n){const s=n[r];if(typeof s=="string")try{n[r]=t(s)}catch{}}return n}}function PI(t,e){const n=typeof e=="function";function r(s){if(typeof s=="object"&&s!==null)try{return t(s)}catch{}else if(n&&typeof s=="string")try{return e(s),t(s)}catch{}return s}return s=>{const a=NI(s,r);return a?`?${a}`:""}}const Xn="__root__";function FI(t){if(t.statusCode=t.statusCode||t.code||307,!t.reloadDocument&&typeof t.href=="string")try{new URL(t.href),t.reloadDocument=!0}catch{}const e=new Headers(t.headers);t.href&&e.get("Location")===null&&e.set("Location",t.href);const n=new Response(null,{status:t.statusCode,headers:e});if(n.options=t,t.throw)throw n;return n}function br(t){return t instanceof Response&&!!t.options}const If=t=>{if(!t.rendered)return t.rendered=!0,t.onReady?.()},zd=(t,e)=>!!(t.preload&&!t.router.state.matches.some(n=>n.id===e)),u0=(t,e,n=!0)=>{const r={...t.router.options.context??{}},s=n?e:e-1;for(let a=0;a<=s;a++){const l=t.matches[a];if(!l)continue;const c=t.router.getMatch(l.id);c&&Object.assign(r,c.__routeContext,c.__beforeLoadContext)}return r},gE=(t,e)=>{const n=t.router.routesById[e.routeId??""]??t.router.routeTree;!n.options.notFoundComponent&&t.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=t.router.options.defaultNotFoundComponent),vs(n.options.notFoundComponent);const r=t.matches.find(s=>s.routeId===n.id);vs(r,"Could not find match for route: "+n.id),t.updateMatch(r.id,s=>({...s,status:"notFound",error:e,isFetching:!1})),e.routerCode==="BEFORE_LOAD"&&n.parentRoute&&(e.routeId=n.parentRoute.id,gE(t,e))},Ys=(t,e,n)=>{if(!(!br(n)&&!er(n))){if(br(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(e){e._nonReactive.beforeLoadPromise?.resolve(),e._nonReactive.loaderPromise?.resolve(),e._nonReactive.beforeLoadPromise=void 0,e._nonReactive.loaderPromise=void 0;const r=br(n)?"redirected":"notFound";e._nonReactive.error=n,t.updateMatch(e.id,s=>({...s,status:r,isFetching:!1,error:n})),er(n)&&!n.routeId&&(n.routeId=e.routeId),e._nonReactive.loadPromise?.resolve()}throw br(n)?(t.rendered=!0,n.options._fromLocation=t.location,n.redirectHandled=!0,n=t.router.resolveRedirect(n),n):(gE(t,n),n)}},yE=(t,e)=>{const n=t.router.getMatch(e);return!!(!t.router.isServer&&n._nonReactive.dehydrated||t.router.isServer&&n.ssr===!1)},xl=(t,e,n,r)=>{const{id:s,routeId:a}=t.matches[e],l=t.router.looseRoutesById[a];if(n instanceof Promise)throw n;n.routerCode=r,t.firstBadMatchIndex??=e,Ys(t,t.router.getMatch(s),n);try{l.options.onError?.(n)}catch(c){n=c,Ys(t,t.router.getMatch(s),n)}t.updateMatch(s,c=>(c._nonReactive.beforeLoadPromise?.resolve(),c._nonReactive.beforeLoadPromise=void 0,c._nonReactive.loadPromise?.resolve(),{...c,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},$I=(t,e,n,r)=>{const s=t.router.getMatch(e),a=t.matches[n-1]?.id,l=a?t.router.getMatch(a):void 0;if(t.router.isShell()){s.ssr=r.id===Xn;return}if(l?.ssr===!1){s.ssr=!1;return}const c=y=>y===!0&&l?.ssr==="data-only"?"data-only":y,f=t.router.options.defaultSsr??!0;if(r.options.ssr===void 0){s.ssr=c(f);return}if(typeof r.options.ssr!="function"){s.ssr=c(r.options.ssr);return}const{search:d,params:m}=s,p={search:rf(d,s.searchError),params:rf(m,s.paramsError),location:t.location,matches:t.matches.map(y=>({index:y.index,pathname:y.pathname,fullPath:y.fullPath,staticData:y.staticData,id:y.id,routeId:y.routeId,search:rf(y.search,y.searchError),params:rf(y.params,y.paramsError),ssr:y.ssr}))},g=r.options.ssr(p);if(ni(g))return g.then(y=>{s.ssr=c(y??f)});s.ssr=c(g??f)},vE=(t,e,n,r)=>{if(r._nonReactive.pendingTimeout!==void 0)return;const s=n.options.pendingMs??t.router.options.defaultPendingMs;if(!!(t.onReady&&!t.router.isServer&&!zd(t,e)&&(n.options.loader||n.options.beforeLoad||SE(n))&&typeof s=="number"&&s!==1/0&&(n.options.pendingComponent??t.router.options?.defaultPendingComponent))){const l=setTimeout(()=>{If(t)},s);r._nonReactive.pendingTimeout=l}},BI=(t,e,n)=>{const r=t.router.getMatch(e);if(!r._nonReactive.beforeLoadPromise&&!r._nonReactive.loaderPromise)return;vE(t,e,n,r);const s=()=>{const a=t.router.getMatch(e);a.preload&&(a.status==="redirected"||a.status==="notFound")&&Ys(t,a,a.error)};return r._nonReactive.beforeLoadPromise?r._nonReactive.beforeLoadPromise.then(s):s()},UI=(t,e,n,r)=>{const s=t.router.getMatch(e),a=s._nonReactive.loadPromise;s._nonReactive.loadPromise=oo(()=>{a?.resolve()});const{paramsError:l,searchError:c}=s;l&&xl(t,n,l,"PARSE_PARAMS"),c&&xl(t,n,c,"VALIDATE_SEARCH"),vE(t,e,r,s);const f=new AbortController,d=t.matches[n-1]?.id;(d?t.router.getMatch(d):void 0)?.context??t.router.options.context;let p=!1;const g=()=>{p||(p=!0,t.updateMatch(e,A=>({...A,isFetching:"beforeLoad",fetchCount:A.fetchCount+1,abortController:f})))},y=()=>{s._nonReactive.beforeLoadPromise?.resolve(),s._nonReactive.beforeLoadPromise=void 0,t.updateMatch(e,A=>({...A,isFetching:!1}))};if(!r.options.beforeLoad){Kl(()=>{g(),y()});return}s._nonReactive.beforeLoadPromise=oo();const x={...u0(t,n,!1),...s.__routeContext},{search:S,params:E,cause:_}=s,k=zd(t,e),R={search:S,abortController:f,params:E,preload:k,context:x,location:t.location,navigate:A=>t.router.navigate({...A,_fromLocation:t.location}),buildLocation:t.router.buildLocation,cause:k?"preload":_,matches:t.matches,...t.router.options.additionalContext},N=A=>{if(A===void 0){Kl(()=>{g(),y()});return}(br(A)||er(A))&&(g(),xl(t,n,A,"BEFORE_LOAD")),Kl(()=>{g(),t.updateMatch(e,I=>({...I,__beforeLoadContext:A})),y()})};let L;try{if(L=r.options.beforeLoad(R),ni(L))return g(),L.catch(A=>{xl(t,n,A,"BEFORE_LOAD")}).then(N)}catch(A){g(),xl(t,n,A,"BEFORE_LOAD")}N(L)},qI=(t,e)=>{const{id:n,routeId:r}=t.matches[e],s=t.router.looseRoutesById[r],a=()=>{if(t.router.isServer){const f=$I(t,n,e,s);if(ni(f))return f.then(c)}return c()},l=()=>UI(t,n,e,s),c=()=>{if(yE(t,n))return;const f=BI(t,n,s);return ni(f)?f.then(l):l()};return a()},HI=(t,e,n)=>{const r=t.router.getMatch(e);if(!r||!n.options.head&&!n.options.scripts&&!n.options.headers)return;const s={matches:t.matches,match:r,params:r.params,loaderData:r.loaderData};return Promise.all([n.options.head?.(s),n.options.scripts?.(s),n.options.headers?.(s)]).then(([a,l,c])=>{const f=a?.meta,d=a?.links,m=a?.scripts,p=a?.styles;return{meta:f,links:d,headScripts:m,headers:c,scripts:l,styles:p}})},bE=(t,e,n,r)=>{const s=t.matchPromises[n-1],{params:a,loaderDeps:l,abortController:c,cause:f}=t.router.getMatch(e),d=u0(t,n),m=zd(t,e);return{params:a,deps:l,preload:!!m,parentMatchPromise:s,abortController:c,context:d,location:t.location,navigate:p=>t.router.navigate({...p,_fromLocation:t.location}),cause:m?"preload":f,route:r,...t.router.options.additionalContext}},i_=async(t,e,n,r)=>{try{const s=t.router.getMatch(e);try{(!t.router.isServer||s.ssr===!0)&&xE(r);const a=r.options.loader?.(bE(t,e,n,r)),l=r.options.loader&&ni(a);if((l||r._lazyPromise||r._componentsPromise||r.options.head||r.options.scripts||r.options.headers||s._nonReactive.minPendingPromise)&&t.updateMatch(e,d=>({...d,isFetching:"loader"})),r.options.loader){const d=l?await a:a;Ys(t,t.router.getMatch(e),d),d!==void 0&&t.updateMatch(e,m=>({...m,loaderData:d}))}r._lazyPromise&&await r._lazyPromise;const f=s._nonReactive.minPendingPromise;f&&await f,r._componentsPromise&&await r._componentsPromise,t.updateMatch(e,d=>({...d,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(a){let l=a;const c=s._nonReactive.minPendingPromise;c&&await c,er(a)&&await r.options.notFoundComponent?.preload?.(),Ys(t,t.router.getMatch(e),a);try{r.options.onError?.(a)}catch(f){l=f,Ys(t,t.router.getMatch(e),f)}t.updateMatch(e,f=>({...f,error:l,status:"error",isFetching:!1}))}}catch(s){const a=t.router.getMatch(e);a&&(a._nonReactive.loaderPromise=void 0),Ys(t,a,s)}},VI=async(t,e)=>{const{id:n,routeId:r}=t.matches[e];let s=!1,a=!1;const l=t.router.looseRoutesById[r],c=()=>{t.updateMatch(n,m=>({...m,context:u0(t,e)}))};if(yE(t,n)){if(t.router.isServer)return t.router.getMatch(n)}else{const m=t.router.getMatch(n);if(m._nonReactive.loaderPromise){if(m.status==="success"&&!t.sync&&!m.preload)return m;await m._nonReactive.loaderPromise;const p=t.router.getMatch(n),g=p._nonReactive.error||p.error;g&&Ys(t,p,g)}else{const p=Date.now()-m.updatedAt,g=zd(t,n),y=g?l.options.preloadStaleTime??t.router.options.defaultPreloadStaleTime??3e4:l.options.staleTime??t.router.options.defaultStaleTime??0,x=l.options.shouldReload,S=typeof x=="function"?x(bE(t,n,e,l)):x,E=!!g&&!t.router.state.matches.some(N=>N.id===n),_=t.router.getMatch(n);_._nonReactive.loaderPromise=oo(),E!==_.preload&&t.updateMatch(n,N=>({...N,preload:E}));const{status:k,invalid:R}=_;s=k==="success"&&(R||(S??p>y)),g&&l.options.preload===!1||(s&&!t.sync?(a=!0,(async()=>{try{await i_(t,n,e,l),c();const N=t.router.getMatch(n);N._nonReactive.loaderPromise?.resolve(),N._nonReactive.loadPromise?.resolve(),N._nonReactive.loaderPromise=void 0}catch(N){br(N)&&await t.router.navigate(N.options)}})()):(k!=="success"||s&&t.sync)&&await i_(t,n,e,l))}}const f=t.router.getMatch(n);a||(f._nonReactive.loaderPromise?.resolve(),f._nonReactive.loadPromise?.resolve()),clearTimeout(f._nonReactive.pendingTimeout),f._nonReactive.pendingTimeout=void 0,a||(f._nonReactive.loaderPromise=void 0),f._nonReactive.dehydrated=void 0,a||c();const d=a?f.isFetching:!1;return d!==f.isFetching||f.invalid!==!1?(t.updateMatch(n,m=>({...m,isFetching:d,invalid:!1})),t.router.getMatch(n)):f};async function a_(t){const e=Object.assign(t,{matchPromises:[]});!e.router.isServer&&e.router.state.matches.some(n=>n._forcePending)&&If(e);try{for(let c=0;c<e.matches.length;c++){const f=qI(e,c);ni(f)&&await f}const n=e.firstBadMatchIndex??e.matches.length;for(let c=0;c<n;c++)e.matchPromises.push(VI(e,c));const s=(await Promise.allSettled(e.matchPromises)).filter(c=>c.status==="rejected").map(c=>c.reason);let a;for(const c of s){if(br(c))throw c;!a&&er(c)&&(a=c)}for(const c of e.matches){const{id:f,routeId:d}=c,m=e.router.looseRoutesById[d];try{const p=HI(e,f,m);if(p){const g=await p;e.updateMatch(f,y=>({...y,...g}))}}catch(p){console.error(`Error executing head for route ${d}:`,p)}}if(a)throw a;const l=If(e);ni(l)&&await l}catch(n){if(er(n)&&!e.preload){const r=If(e);throw ni(r)&&await r,n}if(br(n))throw n}return e.matches}async function xE(t){if(!t._lazyLoaded&&t._lazyPromise===void 0&&(t.lazyFn?t._lazyPromise=t.lazyFn().then(e=>{const{id:n,...r}=e.options;Object.assign(t.options,r),t._lazyLoaded=!0,t._lazyPromise=void 0}):t._lazyLoaded=!0),!t._componentsLoaded&&t._componentsPromise===void 0){const e=()=>{const n=[];for(const r of wE){const s=t.options[r]?.preload;s&&n.push(s())}if(n.length)return Promise.all(n).then(()=>{t._componentsLoaded=!0,t._componentsPromise=void 0});t._componentsLoaded=!0,t._componentsPromise=void 0};t._componentsPromise=t._lazyPromise?t._lazyPromise.then(e):e()}return t._componentsPromise}function rf(t,e){return e?{status:"error",error:e}:{status:"success",value:t}}function SE(t){for(const e of wE)if(t.options[e]?.preload)return!0;return!1}const wE=["component","errorComponent","pendingComponent","notFoundComponent"];function KI(t){return{input:({url:e})=>{for(const n of t)e=_E(n,e);return e},output:({url:e})=>{for(let n=t.length-1;n>=0;n--)e=CE(t[n],e);return e}}}function GI(t){const e=pE(t.basepath),n=`/${e}`,r=`${n}/`,s=t.caseSensitive?n:n.toLowerCase(),a=t.caseSensitive?r:r.toLowerCase();return{input:({url:l})=>{const c=t.caseSensitive?l.pathname:l.pathname.toLowerCase();return c===s?l.pathname="/":c.startsWith(a)&&(l.pathname=l.pathname.slice(n.length)),l},output:({url:l})=>(l.pathname=Mf(["/",e,l.pathname]),l)}}function _E(t,e){const n=t?.input?.({url:e});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return e}function CE(t,e){const n=t?.output?.({url:e});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return e}function $i(t){const e=t.resolvedLocation,n=t.location,r=e?.pathname!==n.pathname,s=e?.href!==n.href,a=e?.hash!==n.hash;return{fromLocation:e,toLocation:n,pathChanged:r,hrefChanged:s,hashChanged:a}}class QI{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=n=>n(),this.update=n=>{n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const r=this.options,s=this.basepath??r?.basepath??"/",a=this.basepath===void 0,l=r?.rewrite;this.options={...r,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(g=>[encodeURIComponent(g),g])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=oI())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new iI(YI(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(g=>!["redirected"].includes(g.status))}}}),MI(this));let c=!1;const f=this.options.basepath??"/",d=this.options.rewrite;if(a||s!==f||l!==d){this.basepath=f;const g=[];pE(f)!==""&&g.push(GI({basepath:f})),d&&g.push(d),this.rewrite=g.length===0?void 0:g.length===1?g[0]:KI(g),this.history&&this.updateLatestLocation(),c=!0}c&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:n,routesByPath:r,processedTree:s}=bI(this.routeTree,this.options.caseSensitive,(l,c)=>{l.init({originalIndex:c})});this.options.routeMasks&&pI(this.options.routeMasks,s),this.routesById=n,this.routesByPath=r,this.processedTree=s;const a=this.options.notFoundRoute;a&&(a.init({originalIndex:99999999999}),this.routesById[a.id]=a)},this.subscribe=(n,r)=>{const s={eventType:n,fn:r};return this.subscribers.add(s),()=>{this.subscribers.delete(s)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const s=({href:f,state:d})=>{const m=new URL(f,this.origin),p=_E(this.rewrite,m),g=this.options.parseSearch(p.search),y=this.options.stringifySearch(g);return p.search=y,{href:p.href.replace(p.origin,""),publicHref:f,url:p,pathname:s_(p.pathname),searchStr:y,search:mr(r?.search,g),hash:p.hash.split("#").reverse()[0]??"",state:mr(r?.state,d)}},a=s(n),{__tempLocation:l,__tempKey:c}=a.state;if(l&&(!c||c===this.tempLocationKey)){const f=s(l);return f.state.key=a.state.key,f.state.__TSR_key=a.state.__TSR_key,delete f.state.__tempLocation,{...f,maskedLocation:a}}return a},this.resolvePathCache=Wf(1e3),this.resolvePathWithBase=(n,r)=>EI({base:n,to:l0(r),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(n,r,s)=>typeof n=="string"?this.matchRoutesInternal({pathname:n,search:r},s):this.matchRoutesInternal(n,r),this.getMatchedRoutes=n=>JI({pathname:n,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r._nonReactive.pendingTimeout),r._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const n=this.state.matches.filter(a=>a.status==="pending"),r=this.state.matches.filter(a=>a.isFetching==="loader");new Set([...this.state.pendingMatches??[],...n,...r]).forEach(a=>{this.cancelMatch(a.id)})},this.buildLocation=n=>{const r=(a={})=>{const l=a._fromLocation||this.pendingBuiltLocation||this.latestLocation,c=this.matchRoutes(l,{_buildLocation:!0}),f=Jf(c);a.from;const d=a.unsafeRelative==="path"?l.pathname:a.from??f.fullPath,m=this.resolvePathWithBase(d,"."),p=f.search,g={...f.params},y=a.to?this.resolvePathWithBase(m,`${a.to}`):this.resolvePathWithBase(m,"."),x=a.params===!1||a.params===null?{}:(a.params??!0)===!0?g:Object.assign(g,Zs(a.params,g)),S=Fm({path:y,params:x}).interpolatedPath,E=this.matchRoutes(S,void 0,{_buildLocation:!0}).map(M=>this.looseRoutesById[M.routeId]);if(Object.keys(x).length>0)for(const M of E){const B=M.options.params?.stringify??M.options.stringifyParams;B&&Object.assign(x,B(x))}const _=n.leaveParams?y:s_(Fm({path:y,params:x,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath);let k=p;if(n._includeValidateSearch&&this.options.search?.strict){const M={};E.forEach(B=>{if(B.options.validateSearch)try{Object.assign(M,Zg(B.options.validateSearch,{...M,...k}))}catch{}}),k=M}k=XI({search:k,dest:a,destRoutes:E,_includeValidateSearch:n._includeValidateSearch}),k=mr(p,k);const R=this.options.stringifySearch(k),N=a.hash===!0?l.hash:a.hash?Zs(a.hash,l.hash):void 0,L=N?`#${N}`:"";let A=a.state===!0?l.state:a.state?Zs(a.state,l.state):{};A=mr(l.state,A);const I=`${_}${R}${L}`,j=new URL(I,this.origin),P=CE(this.rewrite,j);return{publicHref:P.pathname+P.search+P.hash,href:I,url:P,pathname:_,search:k,searchStr:R,state:A,hash:N??"",unmaskOnReload:a.unmaskOnReload}},s=(a={},l)=>{const c=r(a);let f=l?r(l):void 0;if(!f){const d={};if(this.options.routeMasks){const m=mI(c.pathname,this.processedTree);if(m){Object.assign(d,m.params);const{from:p,params:g,...y}=m.route,x=g===!1||g===null?{}:(g??!0)===!0?d:Object.assign(d,Zs(g,d));l={from:n.from,...y,params:x},f=r(l)}}}return f&&(c.maskedLocation=f),c};return n.mask?s(n,{from:n.from,...n.mask}):s(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...s})=>{const a=()=>{const f=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];f.forEach(m=>{s.state[m]=this.latestLocation.state[m]});const d=Pi(s.state,this.latestLocation.state);return f.forEach(m=>{delete s.state[m]}),d},l=Fi(this.latestLocation.href)===Fi(s.href),c=this.commitLocationPromise;if(this.commitLocationPromise=oo(()=>{c?.resolve()}),l&&a())this.load();else{let{maskedLocation:f,hashScrollIntoView:d,url:m,...p}=s;f&&(p={...f,state:{...f.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=d??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[s.replace?"replace":"push"](p.publicHref,p.state,{ignoreBlocker:r})}return this.resetNextScroll=s.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:s,viewTransition:a,ignoreBlocker:l,href:c,...f}={})=>{if(c){const p=this.history.location.state.__TSR_index,g=Yf(c,{__TSR_index:n?p:p+1});f.to=g.pathname,f.search=this.options.parseSearch(g.search),f.hash=g.hash.slice(1)}const d=this.buildLocation({...f,_includeValidateSearch:!0});this.pendingBuiltLocation=d;const m=this.commitLocation({...d,viewTransition:a,replace:n,resetScroll:r,hashScrollIntoView:s,ignoreBlocker:l});return Promise.resolve().then(()=>{this.pendingBuiltLocation===d&&(this.pendingBuiltLocation=void 0)}),m},this.navigate=async({to:n,reloadDocument:r,href:s,publicHref:a,...l})=>{let c=!1;if(s)try{new URL(`${s}`),c=!0}catch{}if(c&&!r&&(r=!0),r){if(!s||!a&&!c){const d=this.buildLocation({to:n,...l});s=s??d.url.href,a=a??d.url.href}const f=!c&&a?a:s;if(!l.ignoreBlocker){const m=this.history.getBlockers?.()??[];for(const p of m)if(p?.blockerFn&&await p.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}return l.replace?window.location.replace(f):window.location.href=f,Promise.resolve()}return this.buildAndCommitLocation({...l,href:s,to:n,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const r=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});if(this.latestLocation.publicHref!==r.publicHref||r.url.origin!==this.origin){const s=this.getParsedLocationHref(r);throw FI({href:s})}}const n=this.matchRoutes(this.latestLocation);this.__store.setState(r=>({...r,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:n,cachedMatches:r.cachedMatches.filter(s=>!n.some(a=>a.id===s.id))}))},this.load=async n=>{let r,s,a;for(a=new Promise(c=>{this.startTransition(async()=>{try{this.beforeLoad();const f=this.latestLocation,d=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...$i({resolvedLocation:d,location:f})}),this.emit({type:"onBeforeLoad",...$i({resolvedLocation:d,location:f})}),await a_({router:this,sync:n?.sync,matches:this.state.pendingMatches,location:f,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let m=[],p=[],g=[];Kl(()=>{this.__store.setState(y=>{const x=y.matches,S=y.pendingMatches||y.matches;return m=x.filter(E=>!S.some(_=>_.id===E.id)),p=S.filter(E=>!x.some(_=>_.id===E.id)),g=S.filter(E=>x.some(_=>_.id===E.id)),{...y,isLoading:!1,loadedAt:Date.now(),matches:S,pendingMatches:void 0,cachedMatches:[...y.cachedMatches,...m.filter(E=>E.status!=="error"&&E.status!=="notFound")]}}),this.clearExpiredCache()}),[[m,"onLeave"],[p,"onEnter"],[g,"onStay"]].forEach(([y,x])=>{y.forEach(S=>{this.looseRoutesById[S.routeId].options[x]?.(S)})})})})}})}catch(f){br(f)?(r=f,this.isServer||this.navigate({...r.options,replace:!0,ignoreBlocker:!0})):er(f)&&(s=f),this.__store.setState(d=>({...d,statusCode:r?r.status:s?404:d.matches.some(m=>m.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===a&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),c()})}),this.latestLoadPromise=a,await a;this.latestLoadPromise&&a!==this.latestLoadPromise;)await this.latestLoadPromise;let l;this.hasNotFoundMatch()?l=404:this.__store.state.matches.some(c=>c.status==="error")&&(l=500),l!==void 0&&this.__store.setState(c=>({...c,statusCode:l}))},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let s;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const a=this.latestLocation,l=this.state.resolvedLocation,c=typeof r.types=="function"?r.types($i({resolvedLocation:l,location:a})):r.types;if(c===!1){n();return}s={update:n,types:c}}else s=n;document.startViewTransition(s)}else n()},this.updateMatch=(n,r)=>{this.startTransition(()=>{const s=this.state.pendingMatches?.some(a=>a.id===n)?"pendingMatches":this.state.matches.some(a=>a.id===n)?"matches":this.state.cachedMatches.some(a=>a.id===n)?"cachedMatches":"";s&&this.__store.setState(a=>({...a,[s]:a[s]?.map(l=>l.id===n?r(l):l)}))})},this.getMatch=n=>{const r=s=>s.id===n;return this.state.cachedMatches.find(r)??this.state.pendingMatches?.find(r)??this.state.matches.find(r)},this.invalidate=n=>{const r=s=>n?.filter?.(s)??!0?{...s,invalid:!0,...n?.forcePending||s.status==="error"||s.status==="notFound"?{status:"pending",error:void 0}:void 0}:s;return this.__store.setState(s=>({...s,matches:s.matches.map(r),cachedMatches:s.cachedMatches.map(r),pendingMatches:s.pendingMatches?.map(r)})),this.shouldViewTransition=!1,this.load({sync:n?.sync})},this.getParsedLocationHref=n=>{let r=n.url.href;return this.origin&&n.url.origin===this.origin&&(r=r.replace(this.origin,"")||"/"),r},this.resolveRedirect=n=>{if(!n.options.href){const r=this.buildLocation(n.options),s=this.getParsedLocationHref(r);n.options.href=r.href,n.headers.set("Location",s)}return n.headers.get("Location")||n.headers.set("Location",n.options.href),n},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(s=>({...s,cachedMatches:s.cachedMatches.filter(a=>!r(a))})):this.__store.setState(s=>({...s,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const s=this.looseRoutesById[r.routeId];if(!s.options.loader)return!0;const a=(r.preload?s.options.preloadGcTime??this.options.defaultPreloadGcTime:s.options.gcTime??this.options.defaultGcTime)??300*1e3;return r.status==="error"?!0:Date.now()-r.updatedAt>=a};this.clearCache({filter:n})},this.loadRouteChunk=xE,this.preloadRoute=async n=>{const r=this.buildLocation(n);let s=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const a=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(c=>c.id)),l=new Set([...a,...this.state.cachedMatches.map(c=>c.id)]);Kl(()=>{s.forEach(c=>{l.has(c.id)||this.__store.setState(f=>({...f,cachedMatches:[...f.cachedMatches,c]}))})});try{return s=await a_({router:this,matches:s,location:r,preload:!0,updateMatch:(c,f)=>{a.has(c)?s=s.map(d=>d.id===c?f(d):d):this.updateMatch(c,f)}}),s}catch(c){if(br(c))return c.options.reloadDocument?void 0:await this.preloadRoute({...c.options,_fromLocation:r});er(c)||console.error(c);return}},this.matchRoute=(n,r)=>{const s={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},a=this.buildLocation(s);if(r?.pending&&this.state.status!=="pending")return!1;const c=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,f=gI(a.pathname,r?.caseSensitive??!1,r?.fuzzy??!1,c.pathname,this.processedTree);return!f||n.params&&!Pi(f.params,n.params,{partial:!0})?!1:r?.includeSearch??!0?Pi(c.search,a.search,{partial:!0})?f.params:!1:f.params},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??jI,parseSearch:e.parseSearch??zI}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,n){const r=this.getMatchedRoutes(e.pathname),{foundRoute:s,routeParams:a}=r;let{matchedRoutes:l}=r,c=!1;(s?s.path!=="/"&&a["**"]:Fi(e.pathname))&&(this.options.notFoundRoute?l=[...l,this.options.notFoundRoute]:c=!0);const f=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let p=l.length-1;p>=0;p--){const g=l[p];if(g.children)return g.id}return Xn}})(),d=[],m=p=>p?.id?p.context??this.options.context??void 0:this.options.context??void 0;return l.forEach((p,g)=>{const y=d[g-1],[x,S,E]=(()=>{const Z=y?.search??e.search,te=y?._strictSearch??void 0;try{const V=Zg(p.options.validateSearch,{...Z})??void 0;return[{...Z,...V},{...te,...V},void 0]}catch(V){let F=V;if(V instanceof rd||(F=new rd(V.message,{cause:V})),n?.throwOnError)throw F;return[Z,{},F]}})(),_=p.options.loaderDeps?.({search:x})??"",k=_?JSON.stringify(_):"",{interpolatedPath:R,usedParams:N}=Fm({path:p.fullPath,params:a,decodeCharMap:this.pathParamsDecodeCharMap}),L=p.id+R+k,A=this.getMatch(L),I=this.state.matches.find(Z=>Z.routeId===p.id),j=A?._strictParams??N;let P;if(!A){const Z=p.options.params?.parse??p.options.parseParams;if(Z)try{Object.assign(j,Z(j))}catch(te){if(er(te)||br(te)?P=te:P=new ZI(te.message,{cause:te}),n?.throwOnError)throw P}}Object.assign(a,j);const M=I?"stay":"enter";let B;if(A)B={...A,cause:M,params:I?mr(I.params,a):a,_strictParams:j,search:mr(I?I.search:A.search,x),_strictSearch:S};else{const Z=p.options.loader||p.options.beforeLoad||p.lazyFn||SE(p)?"pending":"success";B={id:L,ssr:this.isServer?void 0:p.options.ssr,index:g,routeId:p.id,params:I?mr(I.params,a):a,_strictParams:j,pathname:R,updatedAt:Date.now(),search:I?mr(I.search,x):x,_strictSearch:S,searchError:void 0,status:Z,isFetching:!1,error:void 0,paramsError:P,__routeContext:void 0,_nonReactive:{loadPromise:oo()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:M,loaderDeps:I?mr(I.loaderDeps,_):_,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:p.options.staticData||{},fullPath:p.fullPath}}n?.preload||(B.globalNotFound=f===p.id),B.searchError=E;const Q=m(y);B.context={...Q,...B.__routeContext,...B.__beforeLoadContext},d.push(B)}),d.forEach((p,g)=>{const y=this.looseRoutesById[p.routeId];if(!this.getMatch(p.id)&&n?._buildLocation!==!0){const S=d[g-1],E=m(S);if(y.options.context){const _={deps:p.loaderDeps,params:p.params,context:E??{},location:e,navigate:k=>this.navigate({...k,_fromLocation:e}),buildLocation:this.buildLocation,cause:p.cause,abortController:p.abortController,preload:!!p.preload,matches:d};p.__routeContext=y.options.context(_)??void 0}p.context={...E,...p.__routeContext,...p.__beforeLoadContext}}}),d}}class rd extends Error{}class ZI extends Error{}function YI(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Zg(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new rd("Async validation not supported");if(n.issues)throw new rd(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function JI({pathname:t,routesById:e,processedTree:n}){const r={},s=Fi(t);let a;const l=yI(s,n,!0);return l&&(a=l.route,Object.assign(r,l.params)),{matchedRoutes:l?.branch||[e[Xn]],routeParams:r,foundRoute:a}}function XI({search:t,dest:e,destRoutes:n,_includeValidateSearch:r}){const s=n.reduce((c,f)=>{const d=[];if("search"in f.options)f.options.search?.middlewares&&d.push(...f.options.search.middlewares);else if(f.options.preSearchFilters||f.options.postSearchFilters){const m=({search:p,next:g})=>{let y=p;"preSearchFilters"in f.options&&f.options.preSearchFilters&&(y=f.options.preSearchFilters.reduce((S,E)=>E(S),p));const x=g(y);return"postSearchFilters"in f.options&&f.options.postSearchFilters?f.options.postSearchFilters.reduce((S,E)=>E(S),x):x};d.push(m)}if(r&&f.options.validateSearch){const m=({search:p,next:g})=>{const y=g(p);try{return{...y,...Zg(f.options.validateSearch,y)??void 0}}catch{return y}};d.push(m)}return c.concat(d)},[])??[],a=({search:c})=>e.search?e.search===!0?c:Zs(e.search,c):{};s.push(a);const l=(c,f)=>{if(c>=s.length)return f;const d=s[c];return d({search:f,next:p=>l(c+1,p)})};return l(0,t)}const WI="Error preloading route! ";class EE{constructor(e){if(this.init=n=>{this.originalIndex=n.originalIndex;const r=this.options,s=!r?.path&&!r?.id;this.parentRoute=this.options.getParentRoute?.(),s?this._path=Xn:this.parentRoute||vs(!1);let a=s?Xn:r?.path;a&&a!=="/"&&(a=hE(a));const l=r?.id||a;let c=s?Xn:Mf([this.parentRoute.id===Xn?"":this.parentRoute.id,l]);a===Xn&&(a="/"),c!==Xn&&(c=Mf(["/",c]));const f=c===Xn?"/":Mf([this.parentRoute.fullPath,a]);this._path=a,this._id=c,this._fullPath=f,this._to=f},this.addChildren=n=>this._addFileChildren(n),this._addFileChildren=n=>(Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this),this._addFileTypes=()=>this,this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.options=e||{},this.isRoot=!e?.getParentRoute,e?.id&&e?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class eN extends EE{constructor(e){super(e)}}function c0(t){const e=t.errorComponent??jd;return w.jsx(tN,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?q.createElement(e,{error:n,reset:r}):t.children})}class tN extends q.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function jd({error:t}){const[e,n]=q.useState(!1);return w.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[w.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),w.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),w.jsx("div",{style:{height:".25rem"}}),e?w.jsx("div",{children:w.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?w.jsx("code",{children:t.message}):null})}):null]})}function nN({children:t,fallback:e=null}){return rN()?w.jsx(Or.Fragment,{children:t}):w.jsx(Or.Fragment,{children:e})}function rN(){return Or.useSyncExternalStore(sN,()=>!0,()=>!1)}function sN(){return()=>{}}var Bm={exports:{}},Um={},qm={exports:{}},Hm={};var o_;function iN(){if(o_)return Hm;o_=1;var t=fo();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function c(p,g){var y=g(),x=r({inst:{value:y,getSnapshot:g}}),S=x[0].inst,E=x[1];return a(function(){S.value=y,S.getSnapshot=g,f(S)&&E({inst:S})},[p,y,g]),s(function(){return f(S)&&E({inst:S}),p(function(){f(S)&&E({inst:S})})},[p]),l(y),y}function f(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function d(p,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return Hm.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,Hm}var l_;function aN(){return l_||(l_=1,qm.exports=iN()),qm.exports}var u_;function oN(){if(u_)return Um;u_=1;var t=fo(),e=aN();function n(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=t.useRef,l=t.useEffect,c=t.useMemo,f=t.useDebugValue;return Um.useSyncExternalStoreWithSelector=function(d,m,p,g,y){var x=a(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=c(function(){function _(A){if(!k){if(k=!0,R=A,A=g(A),y!==void 0&&S.hasValue){var I=S.value;if(y(I,A))return N=I}return N=A}if(I=N,r(R,A))return I;var j=g(A);return y!==void 0&&y(I,j)?(R=A,I):(R=A,N=j)}var k=!1,R,N,L=p===void 0?null:p;return[function(){return _(m())},L===null?void 0:function(){return _(L())}]},[m,p,g,y]);var E=s(d,x[0],x[1]);return l(function(){S.hasValue=!0,S.value=E},[E]),f(E),E},Um}var c_;function lN(){return c_||(c_=1,Bm.exports=oN()),Bm.exports}var uN=lN();function cN(t,e=r=>r,n={}){const r=n.equal??fN;return uN.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,r)}function fN(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!e.has(r)||!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();const n=f_(t);if(n.length!==f_(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}function f_(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}const Vm=q.createContext(null);function kE(){return typeof document>"u"?Vm:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Vm,Vm)}function rr(t){const e=q.useContext(kE());return t?.warn,e}function Pn(t){const e=rr({warn:t?.router===void 0}),n=t?.router||e,r=q.useRef(void 0);return cN(n.__store,s=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const a=mr(r.current,t.select(s));return r.current=a,a}return t.select(s)}return s})}const Ld=q.createContext(void 0),dN=q.createContext(void 0);function Br(t){const e=q.useContext(t.from?dN:Ld);return Pn({select:r=>{const s=r.matches.find(a=>t.from?t.from===a.routeId:a.id===e);if(vs(!((t.shouldThrow??!0)&&!s),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),s!==void 0)return t.select?t.select(s):s},structuralSharing:t.structuralSharing})}function f0(t){return Br({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function d0(t){const{select:e,...n}=t;return Br({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function Pd(t){return Br({from:t.from,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,strict:t.strict,select:e=>{const n=t.strict===!1?e.params:e._strictParams;return t.select?t.select(n):n}})}function h0(t){return Br({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}const sf=typeof window<"u"?q.useLayoutEffect:q.useEffect;function Km(t){const e=q.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function hN(t,e,n={},r={}){q.useEffect(()=>{if(!t.current||r.disabled||typeof IntersectionObserver!="function")return;const s=new IntersectionObserver(([a])=>{e(a)},n);return s.observe(t.current),()=>{s.disconnect()}},[e,n,r.disabled,t])}function pN(t){const e=q.useRef(null);return q.useImperativeHandle(t,()=>e.current,[]),e}function Fd(t){const e=rr();return q.useCallback(n=>e.navigate({...n,from:n.from??t?.from}),[t?.from,e])}var mN=XC();function gN(t,e){const n=rr(),[r,s]=q.useState(!1),a=q.useRef(!1),l=pN(e),{activeProps:c,inactiveProps:f,activeOptions:d,to:m,preload:p,preloadDelay:g,hashScrollIntoView:y,replace:x,startTransition:S,resetScroll:E,viewTransition:_,children:k,target:R,disabled:N,style:L,className:A,onClick:I,onFocus:j,onMouseEnter:P,onMouseLeave:M,onTouchStart:B,ignoreBlocker:Q,params:Z,search:te,hash:V,state:F,mask:X,reloadDocument:oe,unsafeRelative:ae,from:z,_fromLocation:D,...$}=t,T=Pn({select:be=>be.location.search,structuralSharing:!0}),K=t.from,se=q.useMemo(()=>({...t,from:K}),[n,T,K,t._fromLocation,t.hash,t.to,t.search,t.params,t.state,t.mask,t.unsafeRelative]),ce=q.useMemo(()=>n.buildLocation({...se}),[n,se]),ye=q.useMemo(()=>{if(N)return;let be=ce.maskedLocation?ce.maskedLocation.url.href:ce.url.href,ge=!1;return n.origin&&(be.startsWith(n.origin)?be=n.history.createHref(be.replace(n.origin,""))||"/":ge=!0),{href:be,external:ge}},[N,ce.maskedLocation,ce.url,n.origin,n.history]),ke=q.useMemo(()=>{if(ye?.external)return ye.href;try{return new URL(m),m}catch{}},[m,ye]),ve=t.reloadDocument||ke?!1:p??n.options.defaultPreload,Ue=g??n.options.defaultPreloadDelay??0,Fe=Pn({select:be=>{if(ke)return!1;if(d?.exact){if(!CI(be.location.pathname,ce.pathname,n.basepath))return!1}else{const ge=ed(be.location.pathname,n.basepath),$e=ed(ce.pathname,n.basepath);if(!(ge.startsWith($e)&&(ge.length===$e.length||ge[$e.length]==="/")))return!1}return(d?.includeSearch??!0)&&!Pi(be.location.search,ce.search,{partial:!d?.exact,ignoreUndefined:!d?.explicitUndefined})?!1:d?.includeHash?be.location.hash===ce.hash:!0}}),Ge=q.useCallback(()=>{n.preloadRoute({...se}).catch(be=>{console.warn(be),console.warn(WI)})},[n,se]),yt=q.useCallback(be=>{be?.isIntersecting&&Ge()},[Ge]);hN(l,yt,SN,{disabled:!!N||ve!=="viewport"}),q.useEffect(()=>{a.current||!N&&ve==="render"&&(Ge(),a.current=!0)},[N,Ge,ve]);const lt=be=>{const ge=be.currentTarget.getAttribute("target"),$e=R!==void 0?R:ge;if(!N&&!wN(be)&&!be.defaultPrevented&&(!$e||$e==="_self")&&be.button===0){be.preventDefault(),mN.flushSync(()=>{s(!0)});const ne=n.subscribe("onResolved",()=>{ne(),s(!1)});n.navigate({...se,replace:x,resetScroll:E,hashScrollIntoView:y,startTransition:S,viewTransition:_,ignoreBlocker:Q})}};if(ke)return{...$,ref:l,href:ke,...k&&{children:k},...R&&{target:R},...N&&{disabled:N},...L&&{style:L},...A&&{className:A},...I&&{onClick:I},...j&&{onFocus:j},...P&&{onMouseEnter:P},...M&&{onMouseLeave:M},...B&&{onTouchStart:B}};const it=be=>{N||ve&&Ge()},ht=it,Xe=be=>{if(!(N||!ve))if(!Ue)Ge();else{const ge=be.target;if(Sl.has(ge))return;const $e=setTimeout(()=>{Sl.delete(ge),Ge()},Ue);Sl.set(ge,$e)}},rt=be=>{if(N||!ve||!Ue)return;const ge=be.target,$e=Sl.get(ge);$e&&(clearTimeout($e),Sl.delete(ge))},ft=Fe?Zs(c,{})??yN:Gm,Ae=Fe?Gm:Zs(f,{})??Gm,me=[A,ft.className,Ae.className].filter(Boolean).join(" "),Ne=(L||ft.style||Ae.style)&&{...L,...ft.style,...Ae.style};return{...$,...ft,...Ae,href:ye?.href,ref:l,onClick:wl([I,lt]),onFocus:wl([j,it]),onMouseEnter:wl([P,Xe]),onMouseLeave:wl([M,rt]),onTouchStart:wl([B,ht]),disabled:!!N,target:R,...Ne&&{style:Ne},...me&&{className:me},...N&&vN,...Fe&&bN,...r&&xN}}const Gm={},yN={className:"active"},vN={role:"link","aria-disabled":!0},bN={"data-status":"active","aria-current":"page"},xN={"data-transitioning":"transitioning"},Sl=new WeakMap,SN={rootMargin:"100px"},wl=t=>e=>{for(const n of t)if(n){if(e.defaultPrevented)return;n(e)}},RE=q.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:s,ref:a,...l}=gN(r,e),c=typeof r.children=="function"?r.children({isActive:l["data-status"]==="active"}):r.children;return n===void 0&&delete l.disabled,q.createElement(n||"a",{...l,ref:a},c)});function wN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}class _N extends EE{constructor(e){super(e),this.useMatch=n=>Br({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Br({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>h0({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>Pd({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>d0({...n,from:this.id}),this.useLoaderData=n=>f0({...n,from:this.id}),this.useNavigate=()=>Fd({from:this.fullPath}),this.Link=Or.forwardRef((n,r)=>w.jsx(RE,{ref:r,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function mo(t){return new _N(t)}class CN extends eN{constructor(e){super(e),this.useMatch=n=>Br({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Br({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>h0({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>Pd({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>d0({...n,from:this.id}),this.useLoaderData=n=>f0({...n,from:this.id}),this.useNavigate=()=>Fd({from:this.fullPath}),this.Link=Or.forwardRef((n,r)=>w.jsx(RE,{ref:r,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function EN(t){return new CN(t)}function d_(t){return typeof t=="object"?new h_(t,{silent:!0}).createRoute(t):new h_(t,{silent:!0}).createRoute}class h_{constructor(e,n){this.path=e,this.createRoute=r=>{this.silent;const s=mo(r);return s.isRoot=!1,s},this.silent=n?.silent}}class p_{constructor(e){this.useMatch=n=>Br({select:n?.select,from:this.options.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Br({from:this.options.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>h0({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useParams=n=>Pd({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useLoaderDeps=n=>d0({...n,from:this.options.id}),this.useLoaderData=n=>f0({...n,from:this.options.id}),this.useNavigate=()=>{const n=rr();return Fd({from:n.routesById[this.options.id].fullPath})},this.options=e,this.$$typeof=Symbol.for("react.memo")}}function m_(t){return typeof t=="object"?new p_(t):e=>new p_({id:t,...e})}function kN(){const t=rr(),e=q.useRef({router:t,mounted:!1}),[n,r]=q.useState(!1),{hasPendingMatches:s,isLoading:a}=Pn({select:p=>({isLoading:p.isLoading,hasPendingMatches:p.matches.some(g=>g.status==="pending")}),structuralSharing:!0}),l=Km(a),c=a||n||s,f=Km(c),d=a||s,m=Km(d);return t.startTransition=p=>{r(!0),q.startTransition(()=>{p(),r(!1)})},q.useEffect(()=>{const p=t.history.subscribe(t.load),g=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Fi(t.latestLocation.publicHref)!==Fi(g.publicHref)&&t.commitLocation({...g,replace:!0}),()=>{p()}},[t,t.history]),sf(()=>{if(typeof window<"u"&&t.ssr||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(g){console.error(g)}})()},[t]),sf(()=>{l&&!a&&t.emit({type:"onLoad",...$i(t.state)})},[l,t,a]),sf(()=>{m&&!d&&t.emit({type:"onBeforeRouteMount",...$i(t.state)})},[d,m,t]),sf(()=>{if(f&&!c){const p=$i(t.state);t.emit({type:"onResolved",...p}),t.__store.setState(g=>({...g,status:"idle",resolvedLocation:g.location})),p.hrefChanged&&II(t)}},[c,f,t]),null}function RN(t){const e=Pn({select:n=>`not-found-${n.location.pathname}-${n.status}`});return w.jsx(c0,{getResetKey:()=>e,onCatch:(n,r)=>{if(er(n))t.onCatch?.(n,r);else throw n},errorComponent:({error:n})=>{if(er(n))return t.fallback?.(n);throw n},children:t.children})}function AN(){return w.jsx("p",{children:"Not Found"})}function Ha(t){return w.jsx(w.Fragment,{children:t.children})}function AE(t,e,n){return e.options.notFoundComponent?w.jsx(e.options.notFoundComponent,{...n}):t.options.defaultNotFoundComponent?w.jsx(t.options.defaultNotFoundComponent,{...n}):w.jsx(AN,{})}function TN({children:t}){const e=rr();return e.isServer?w.jsx("script",{nonce:e.options.ssr?.nonce,dangerouslySetInnerHTML:{__html:t+";document.currentScript.remove()"}}):null}function ON(){const t=rr();if(!t.isScrollRestoring||!t.isServer||typeof t.options.scrollRestoration=="function"&&!t.options.scrollRestoration({location:t.latestLocation}))return null;const n=(t.options.getScrollRestorationKey||Qg)(t.latestLocation),r=n!==Qg(t.latestLocation)?n:void 0,s={storageKey:td,shouldScrollRestoration:!0};return r&&(s.key=r),w.jsx(TN,{children:`(${mE.toString()})(${JSON.stringify(s)})`})}const TE=q.memo(function({matchId:e}){const n=rr(),r=Pn({select:_=>{const k=_.matches.find(R=>R.id===e);return vs(k),{routeId:k.routeId,ssr:k.ssr,_displayPending:k._displayPending}},structuralSharing:!0}),s=n.routesById[r.routeId],a=s.options.pendingComponent??n.options.defaultPendingComponent,l=a?w.jsx(a,{}):null,c=s.options.errorComponent??n.options.defaultErrorComponent,f=s.options.onCatch??n.options.defaultOnCatch,d=s.isRoot?s.options.notFoundComponent??n.options.notFoundRoute?.options.component:s.options.notFoundComponent,m=r.ssr===!1||r.ssr==="data-only",p=(!s.isRoot||s.options.wrapInSuspense||m)&&(s.options.wrapInSuspense??a??(s.options.errorComponent?.preload||m))?q.Suspense:Ha,g=c?c0:Ha,y=d?RN:Ha,x=Pn({select:_=>_.loadedAt}),S=Pn({select:_=>{const k=_.matches.findIndex(R=>R.id===e);return _.matches[k-1]?.routeId}}),E=s.isRoot?s.options.shellComponent??Ha:Ha;return w.jsxs(E,{children:[w.jsx(Ld.Provider,{value:e,children:w.jsx(p,{fallback:l,children:w.jsx(g,{getResetKey:()=>x,errorComponent:c||jd,onCatch:(_,k)=>{if(er(_))throw _;f?.(_,k)},children:w.jsx(y,{fallback:_=>{if(!d||_.routeId&&_.routeId!==r.routeId||!_.routeId&&!s.isRoot)throw _;return q.createElement(d,_)},children:m||r._displayPending?w.jsx(nN,{fallback:l,children:w.jsx(g_,{matchId:e})}):w.jsx(g_,{matchId:e})})})})}),S===Xn&&n.options.scrollRestoration?w.jsxs(w.Fragment,{children:[w.jsx(MN,{}),w.jsx(ON,{})]}):null]})});function MN(){const t=rr(),e=q.useRef(void 0);return w.jsx("script",{suppressHydrationWarning:!0,ref:n=>{n&&(e.current===void 0||e.current.href!==t.latestLocation.href)&&(t.emit({type:"onRendered",...$i(t.state)}),e.current=t.latestLocation)}},t.latestLocation.state.__TSR_key)}const g_=q.memo(function({matchId:e}){const n=rr(),{match:r,key:s,routeId:a}=Pn({select:f=>{const d=f.matches.find(x=>x.id===e),m=d.routeId,g=(n.routesById[m].options.remountDeps??n.options.defaultRemountDeps)?.({routeId:m,loaderDeps:d.loaderDeps,params:d._strictParams,search:d._strictSearch});return{key:g?JSON.stringify(g):void 0,routeId:m,match:{id:d.id,status:d.status,error:d.error,invalid:d.invalid,_forcePending:d._forcePending,_displayPending:d._displayPending}}},structuralSharing:!0}),l=n.routesById[a],c=q.useMemo(()=>{const f=l.options.component??n.options.defaultComponent;return f?w.jsx(f,{},s):w.jsx(IN,{})},[s,l.options.component,n.options.defaultComponent]);if(r._displayPending)throw n.getMatch(r.id)?._nonReactive.displayPendingPromise;if(r._forcePending)throw n.getMatch(r.id)?._nonReactive.minPendingPromise;if(r.status==="pending"){const f=l.options.pendingMinMs??n.options.defaultPendingMinMs;if(f){const d=n.getMatch(r.id);if(d&&!d._nonReactive.minPendingPromise&&!n.isServer){const m=oo();d._nonReactive.minPendingPromise=m,setTimeout(()=>{m.resolve(),d._nonReactive.minPendingPromise=void 0},f)}}throw n.getMatch(r.id)?._nonReactive.loadPromise}if(r.status==="notFound")return vs(er(r.error)),AE(n,l,r.error);if(r.status==="redirected")throw vs(br(r.error)),n.getMatch(r.id)?._nonReactive.loadPromise;if(r.status==="error"){if(n.isServer){const f=(l.options.errorComponent??n.options.defaultErrorComponent)||jd;return w.jsx(f,{error:r.error,reset:void 0,info:{componentStack:""}})}throw r.error}return c}),IN=q.memo(function(){const e=rr(),n=q.useContext(Ld),r=Pn({select:d=>d.matches.find(m=>m.id===n)?.routeId}),s=e.routesById[r],a=Pn({select:d=>{const p=d.matches.find(g=>g.id===n);return vs(p),p.globalNotFound}}),l=Pn({select:d=>{const m=d.matches,p=m.findIndex(g=>g.id===n);return m[p+1]?.id}}),c=e.options.defaultPendingComponent?w.jsx(e.options.defaultPendingComponent,{}):null;if(a)return AE(e,s,void 0);if(!l)return null;const f=w.jsx(TE,{matchId:l});return r===Xn?w.jsx(q.Suspense,{fallback:c,children:f}):f});function NN(){const t=rr(),n=t.routesById[Xn].options.pendingComponent??t.options.defaultPendingComponent,r=n?w.jsx(n,{}):null,s=t.isServer||typeof document<"u"&&t.ssr?Ha:q.Suspense,a=w.jsxs(s,{fallback:r,children:[!t.isServer&&w.jsx(kN,{}),w.jsx(DN,{})]});return t.options.InnerWrap?w.jsx(t.options.InnerWrap,{children:a}):a}function DN(){const t=rr(),e=Pn({select:s=>s.matches[0]?.id}),n=Pn({select:s=>s.loadedAt}),r=e?w.jsx(TE,{matchId:e}):null;return w.jsx(Ld.Provider,{value:e,children:t.options.disableGlobalCatchBoundary?r:w.jsx(c0,{getResetKey:()=>n,errorComponent:jd,onCatch:s=>{s.message||s.toString()},children:r})})}const zN=t=>new jN(t);class jN extends QI{constructor(e){super(e)}}typeof globalThis<"u"?(globalThis.createFileRoute=d_,globalThis.createLazyFileRoute=m_):typeof window<"u"&&(window.createFileRoute=d_,window.createLazyFileRoute=m_);function LN({router:t,children:e,...n}){Object.keys(n).length>0&&t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=kE(),s=w.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?w.jsx(t.options.Wrap,{children:s}):s}function PN({router:t,...e}){return w.jsx(LN,{router:t,...e,children:w.jsx(NN,{})})}const go=EN(),FN=mo({getParentRoute:()=>go,path:"/"}),$N=mo({getParentRoute:()=>go,path:"$connectionId"}),BN=mo({getParentRoute:()=>go,path:"$connectionId/$database"}),UN=mo({getParentRoute:()=>go,path:"$connectionId/$database/$table"}),qN=mo({getParentRoute:()=>go,path:"$connectionId/container/$container/$"}),HN=go.addChildren([FN,$N,BN,UN,qN]),OE=zN({routeTree:HN});const VN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),KN=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),y_=t=>{const e=KN(t);return e.charAt(0).toUpperCase()+e.slice(1)},ME=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),GN=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var QN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ZN=q.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...c},f)=>q.createElement("svg",{ref:f,...QN,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:ME("lucide",s),...!a&&!GN(c)&&{"aria-hidden":"true"},...c},[...l.map(([d,m])=>q.createElement(d,m)),...Array.isArray(a)?a:[a]]));const Je=(t,e)=>{const n=q.forwardRef(({className:r,...s},a)=>q.createElement(ZN,{ref:a,iconNode:e,className:ME(`lucide-${VN(y_(t))}`,`lucide-${t}`,r),...s}));return n.displayName=y_(t),n};const YN=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],IE=Je("archive",YN);const JN=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],XN=Je("arrow-up",JN);const WN=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],NE=Je("box",WN);const eD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Bi=Je("chevron-down",eD);const tD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],p0=Je("chevron-right",tD);const nD=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Gl=Je("chevron-up",nD);const rD=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Nf=Je("chevrons-up-down",rD);const sD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],iD=Je("circle-check",sD);const aD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],oD=Je("circle-x",aD);const lD=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],uD=Je("cloud",lD);const cD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],fD=Je("columns-3",cD);const dD=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],fu=Je("database",dD);const hD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],pD=Je("download",hD);const mD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],DE=Je("file-code",mD);const gD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],zE=Je("file-text",gD);const yD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],vD=Je("file-up",yD);const bD=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],sd=Je("file",bD);const xD=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],jE=Je("folder",xD);const SD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],LE=Je("image",SD);const wD=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],_D=Je("link",wD);const CD=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],ED=Je("list-ordered",CD);const kD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ki=Je("loader-circle",kD);const RD=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],PE=Je("package",RD);const AD=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],TD=Je("pencil",AD);const OD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],MD=Je("play",OD);const ID=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],ND=Je("plug",ID);const DD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$d=Je("plus",DD);const zD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],jD=Je("send",zD);const LD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],PD=Je("shield-check",LD);const FD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Yg=Je("sparkles",FD);const $D=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],BD=Je("square",$D);const UD=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],qD=Je("table-2",UD);const HD=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],VD=Je("table",HD);const KD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],du=Je("trash-2",KD);const GD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],QD=Je("triangle-alert",GD);const ZD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],FE=Je("upload",ZD);const YD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Cu=Je("x",YD);class yo{}class uo extends yo{constructor(e,n){super(),this.collection=e,this.alias=n,this.type="collectionRef"}}class vr extends yo{constructor(e,n){super(),this.query=e,this.alias=n,this.type="queryRef"}}class En extends yo{constructor(e){super(),this.path=e,this.type="ref"}}class jn extends yo{constructor(e){super(),this.value=e,this.type="val"}}class Sr extends yo{constructor(e,n){super(),this.name=e,this.args=n,this.type="func"}}class $E extends yo{constructor(e,n){super(),this.name=e,this.args=n,this.type="agg"}}function m0(t){return t instanceof $E||t instanceof Sr||t instanceof En||t instanceof jn}function g0(t){return typeof t=="object"&&"expression"in t?t.expression:t}function v_(t){return typeof t=="object"&&"expression"in t?t.expression:t}function b_(t){return typeof t=="object"&&"expression"in t&&t.residual===!0}function JD(t){return{expression:t,residual:!0}}function XD(t,e){if(t.from.alias===e)return t.from;for(const n of t.join||[])if(n.from.alias===e)return n.from}function hu(t,e,n){if(e.path.length!==0){if(e.path.length===1){const r=e.path[0];if(t.select){const s=t.select[r];if(s&&s.type==="ref")return hu(t,s,n)}return{collection:n,path:[r]}}if(e.path.length>1){const[r,...s]=e.path,a=XD(t,r);return a?a.type==="queryRef"?hu(a.query,new En(s),n):{collection:a.collection,path:s}:void 0}}}class Fn extends Error{constructor(e){super(e),this.name="TanStackDBError"}}class x_ extends Fn{constructor(e,n,r){const s=`${e==="insert"?"Insert":"Update"} validation failed: ${n.map(a=>`
- ${a.message} - path: ${a.path}`).join("")}`;super(r||s),this.name="SchemaValidationError",this.type=e,this.issues=n}}class Eu extends Fn{constructor(e){super(e),this.name="CollectionConfigurationError"}}class WD extends Eu{constructor(){super("Collection requires a config")}}class ez extends Eu{constructor(){super("Collection requires a sync config")}}class tz extends Eu{constructor(){super("Schema must implement the standard-schema interface")}}class S_ extends Eu{constructor(){super("Schema validation must be synchronous")}}class ku extends Fn{constructor(e){super(e),this.name="CollectionStateError"}}class nz extends ku{constructor(e,n){super(`Cannot perform ${e} on collection "${n}" - collection is in error state. Try calling cleanup() and restarting the collection.`)}}class rz extends ku{constructor(e,n,r){super(`Invalid collection status transition from "${e}" to "${n}" for collection "${r}"`)}}class sz extends ku{constructor(){super("Collection is in error state")}}class iz extends ku{constructor(){super("Active subscribers count is negative - this should never happen")}}class Ur extends Fn{constructor(e){super(e),this.name="CollectionOperationError"}}class az extends Ur{constructor(e){super(`An object was created without a defined key: ${JSON.stringify(e)}`)}}class oz extends Ur{constructor(e,n){const r=e===null?"null":typeof e;super(`getKey returned an invalid key type. Expected string or number, but got ${r}: ${JSON.stringify(e)}. Item: ${JSON.stringify(n)}`)}}class lz extends Ur{constructor(e){super(`Cannot insert document with ID "${e}" because it already exists in the collection`)}}class uz extends Ur{constructor(e,n,r){const s=`Cannot insert document with key "${e}" from sync because it already exists in the collection "${n}"`;r?.hasCustomGetKey&&r.hasJoins?super(`${s}. This collection uses a custom getKey with joined queries. Joined queries can produce multiple rows with the same key when relationships are not 1:1. Consider: (1) using a composite key in your getKey function (e.g., \`\${item.key1}-\${item.key2}\`), (2) ensuring your join produces unique rows per key, or (3) removing the custom getKey to use the default composite key behavior.`):super(s)}}class cz extends Ur{constructor(){super("The first argument to update is missing")}}class fz extends Ur{constructor(){super("No keys were passed to update")}}class dz extends Ur{constructor(e){super(`The key "${e}" was passed to update but an object for this key was not found in the collection`)}}class hz extends Ur{constructor(e,n){super(`Updating the key of an item is not allowed. Original key: "${e}", Attempted new key: "${n}". Please delete the old item and create a new one if a key change is necessary.`)}}class pz extends Ur{constructor(){super("No keys were passed to delete")}}class mz extends Ur{constructor(e){super(`Collection.delete was called with key '${e}' but there is no item in the collection with this key`)}}class y0 extends Fn{constructor(e){super(e),this.name="MissingHandlerError"}}class gz extends y0{constructor(){super("Collection.insert called directly (not within an explicit transaction) but no 'onInsert' handler is configured.")}}class yz extends y0{constructor(){super("Collection.update called directly (not within an explicit transaction) but no 'onUpdate' handler is configured.")}}class vz extends y0{constructor(){super("Collection.delete called directly (not within an explicit transaction) but no 'onDelete' handler is configured.")}}class ii extends Fn{constructor(e){super(e),this.name="TransactionError"}}class bz extends ii{constructor(){super("mutationFn is required when creating a transaction")}}class xz extends ii{constructor(){super("You can no longer call .mutate() as the transaction is no longer pending")}}class Sz extends ii{constructor(){super("You can no longer call .rollback() as the transaction is already completed")}}class wz extends ii{constructor(){super("You can no longer call .commit() as the transaction is no longer pending")}}class w_ extends ii{constructor(){super("No pending sync transaction to write to")}}class __ extends ii{constructor(){super("The pending sync transaction is already committed, you can't still write to it.")}}class _z extends ii{constructor(){super("No pending sync transaction to commit")}}class Cz extends ii{constructor(){super("The pending sync transaction is already committed, you can't commit it again.")}}class vo extends Fn{constructor(e){super(e),this.name="QueryBuilderError"}}class Ez extends vo{constructor(e){super(`Only one source is allowed in the ${e}`)}}class kz extends vo{constructor(e){super(`A sub query passed to a ${e} must have a from clause itself`)}}class Rz extends vo{constructor(e){super(`Invalid source for live query: The value provided for alias "${e}" is not a Collection or subquery. Live queries only accept Collection instances or subqueries. Please ensure you're passing a valid Collection or QueryBuilder, not a plain array or other data type.`)}}class af extends vo{constructor(e,n){super(`Invalid source for ${e}: Expected an object with a single key-value pair like { alias: collection }. For example: .from({ todos: todosCollection }). Got: ${n}`)}}class Az extends vo{constructor(){super("Join condition must be an equality expression")}}class Tz extends vo{constructor(){super("Query must have a from clause")}}class sr extends Fn{constructor(e){super(e),this.name="QueryCompilationError"}}class Oz extends sr{constructor(){super("DISTINCT requires a SELECT clause.")}}class Mz extends sr{constructor(){super("HAVING clause requires GROUP BY clause")}}class Iz extends sr{constructor(){super("LIMIT and OFFSET require an ORDER BY clause to ensure deterministic results")}}class BE extends sr{constructor(e,n,r){const s=n?`alias "${e}" (collection "${n}")`:`collection "${e}"`,a=r?.length?`. Available keys: ${r.join(", ")}`:"";super(`Input for ${s} not found in inputs map${a}`)}}class Nz extends sr{constructor(e,n){super(`Subquery uses alias "${e}" which is already used in the parent query. Each alias must be unique across parent and subquery contexts. Parent query aliases: ${n.join(", ")}. Please rename "${e}" in either the parent query or subquery to avoid conflicts.`)}}class Dz extends sr{constructor(e){super(`Unsupported FROM type: ${e}`)}}class zz extends sr{constructor(e){super(`Unknown expression type: ${e}`)}}class jz extends sr{constructor(){super("Reference path cannot be empty")}}class Lz extends sr{constructor(e){super(`Unknown function: ${e}`)}}class C_ extends sr{constructor(e){super(`Collection "${e}" not found during compilation of join`)}}class Ji extends Fn{constructor(e){super(e),this.name="JoinError"}}class Pz extends Ji{constructor(e){super(`Unsupported join type: ${e}`)}}class Fz extends Ji{constructor(e){super(`Invalid join condition: both expressions refer to the same source "${e}"`)}}class $z extends Ji{constructor(){super("Invalid join condition: expressions must reference source aliases")}}class Bz extends Ji{constructor(e){super(`Invalid join condition: left expression refers to an unavailable source "${e}"`)}}class Uz extends Ji{constructor(e){super(`Invalid join condition: right expression does not refer to the joined source "${e}"`)}}class qz extends Ji{constructor(){super("Invalid join condition")}}class Hz extends Ji{constructor(e){super(`Unsupported join source type: ${e}`)}}class Bd extends Fn{constructor(e){super(e),this.name="GroupByError"}}class Vz extends Bd{constructor(e){super(`Non-aggregate expression '${e}' in SELECT must also appear in GROUP BY clause`)}}class Kz extends Bd{constructor(e){super(`Unsupported aggregate function: ${e}`)}}class Gz extends Bd{constructor(e){super(`Aggregate function in HAVING clause must also be in SELECT clause: ${e}`)}}class Qz extends Bd{constructor(e){super(`Unknown expression type in HAVING clause: ${e}`)}}class UE extends Fn{constructor(e){super(e),this.name="StorageError"}}class Zz extends UE{constructor(e,n){super(`Cannot ${e} item because it cannot be JSON serialized: ${n}`)}}class v0 extends UE{constructor(e){super(e),this.name="LocalStorageCollectionError"}}class Yz extends v0{constructor(){super("[LocalStorageCollection] storageKey must be provided.")}}class Jz extends v0{constructor(e,n){super(`[LocalStorageCollection] Invalid data format in storage key "${e}" for key "${n}".`)}}class Xz extends v0{constructor(e){super(`[LocalStorageCollection] Invalid data format in storage key "${e}". Expected object format.`)}}class E_ extends Fn{constructor(e,n){const r=n instanceof Error?n.message:String(n);super(`Collection "${e}" sync cleanup function threw an error: ${r}`),this.name="SyncCleanupError"}}class Wz extends Fn{constructor(e){super(e),this.name="QueryOptimizerError"}}class e4 extends Wz{constructor(){super("Cannot combine empty expression list")}}class t4 extends sr{constructor(e,n,r,s){super(`Internal error: subscription for alias '${e}' (remapped from '${n}', collection '${r}') is missing in join pipeline. Available aliases: ${s.join(", ")}. This indicates a bug in alias tracking.`)}}class n4 extends sr{constructor(e){super(`Internal error: compiler returned aliases without inputs: ${e.join(", ")}. This indicates a bug in query compilation. Please report this issue.`)}}class r4 extends sr{constructor(){super("setWindow() can only be called on collections with an ORDER BY clause. Add .orderBy() to your query to enable window movement.")}}const Qm=new WeakMap;let s4=1;function k_(t){if(Qm.has(t))return Qm.get(t);const e=s4++;return Qm.set(t,e),e}const b0=(t,e,n)=>{const{nulls:r}=n;if(t==null&&e==null)return 0;if(t==null)return r==="first"?-1:1;if(e==null)return r==="first"?1:-1;if(typeof t=="string"&&typeof e=="string"&&n.stringSort==="locale")return t.localeCompare(e,n.locale,n.localeOptions);if(Array.isArray(t)&&Array.isArray(e)){for(let l=0;l<Math.min(t.length,e.length);l++){const c=b0(t[l],e[l],n);if(c!==0)return c}return t.length-e.length}if(t instanceof Date&&e instanceof Date)return t.getTime()-e.getTime();const s=typeof t=="object",a=typeof e=="object";if(s||a){if(s&&a){const l=k_(t),c=k_(e);return l-c}if(s)return 1;if(a)return-1}return t<e?-1:t>e?1:0},i4=(t,e,n)=>b0(e,t,{...n,nulls:n.nulls==="first"?"last":"first"});function id(t){return(e,n)=>t.direction==="asc"?b0(e,n,t):i4(e,n,t)}const Jg=id({direction:"asc",nulls:"first",stringSort:"locale"});function a4(t,e){if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const o4=128;function ps(t){return t instanceof Date?t.getTime():(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)&&t.byteLength<=o4?`__u8__${Array.from(t).join(",")}`:t}function l4(t,e){if(t===e)return!0;const n=typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array,r=typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array;return n&&r?a4(t,e):!1}function Xt(t){return t==null}function ro(t){return t===!0}function Ln(t,e=!1){return S0(t,e)}function x0(t){return S0(t,!0)}function S0(t,e){switch(t.type){case"val":{const n=t.value;return()=>n}case"ref":return e?c4(t):u4(t);case"func":return f4(t,e);default:throw new zz(t.type)}}function u4(t){const[e,...n]=t.path;if(!e)throw new jz;if(n.length===0)return r=>r[e];if(n.length===1){const r=n[0];return s=>s[e]?.[r]}else return r=>{const s=r[e];if(s===void 0)return;let a=s;for(const l of n){if(a==null)return a;a=a[l]}return a}}function c4(t){const e=t.path;return n=>{let r=n;for(const s of e){if(r==null)return r;r=r[s]}return r}}function f4(t,e){const n=t.args.map(r=>S0(r,e));switch(t.name){case"eq":{const r=n[0],s=n[1];return a=>{const l=ps(r(a)),c=ps(s(a));return Xt(l)||Xt(c)?null:l4(l,c)}}case"gt":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:l>c}}case"gte":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:l>=c}}case"lt":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:l<c}}case"lte":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:l<=c}}case"and":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!1)return!1;Xt(l)&&(s=!0)}return s?null:!0};case"or":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!0)return!0;Xt(l)&&(s=!0)}return s?null:!1};case"not":{const r=n[0];return s=>{const a=r(s);return Xt(a)?null:!a}}case"in":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)?null:Array.isArray(c)?c.includes(l):!1}}case"like":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:R_(l,c,!1)}}case"ilike":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Xt(l)||Xt(c)?null:R_(l,c,!0)}}case"upper":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toUpperCase():a}}case"lower":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toLowerCase():a}}case"length":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"||Array.isArray(a)?a.length:0}}case"concat":return r=>n.map(s=>{const a=s(r);try{return String(a??"")}catch{try{return JSON.stringify(a)||""}catch{return"[object]"}}}).join("");case"coalesce":return r=>{for(const s of n){const a=s(r);if(a!=null)return a}return null};case"add":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return(l??0)+(c??0)}}case"subtract":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return(l??0)-(c??0)}}case"multiply":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return(l??0)*(c??0)}}case"divide":{const r=n[0],s=n[1];return a=>{const l=r(a),f=s(a)??0;return f!==0?(l??0)/f:null}}case"isUndefined":{const r=n[0];return s=>r(s)===void 0}case"isNull":{const r=n[0];return s=>r(s)===null}default:throw new Lz(t.name)}}function R_(t,e,n){if(typeof t!="string"||typeof e!="string")return!1;const r=n?t.toLowerCase():t;let a=(n?e.toLowerCase():e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return a=a.replace(/%/g,".*"),a=a.replace(/_/g,"."),new RegExp(`^${a}$`).test(r)}function Tr(t,e){return Df(t,e,new Map)}function Df(t,e,n){if(t===e)return!0;if(t==null||e==null||typeof t!=typeof e)return!1;if(t instanceof Date)return e instanceof Date?t.getTime()===e.getTime():!1;if(t instanceof RegExp)return e instanceof RegExp?t.source===e.source&&t.flags===e.flags:!1;if(t instanceof Map){if(!(e instanceof Map)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const s=Array.from(t.entries()).every(([a,l])=>e.has(a)&&Df(l,e.get(a),n));return n.delete(t),s}if(t instanceof Set){if(!(e instanceof Set)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Array.from(t),s=Array.from(e);if(r.every(l=>typeof l!="object"))return n.delete(t),r.every(l=>e.has(l));const a=r.length===s.length;return n.delete(t),a}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)&&!(t instanceof DataView)&&!(e instanceof DataView)){const r=t,s=e;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}if(ad(t)&&ad(e)){const r=Xg(t),s=Xg(e);return r!==s?!1:typeof t.equals=="function"?t.equals(e):t.toString()===e.toString()}if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=t.every((s,a)=>Df(s,e[a],n));return n.delete(t),r}if(typeof t=="object"){if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return n.delete(t),!1;const a=r.every(l=>l in e&&Df(t[l],e[l],n));return n.delete(t),a}return!1}const d4=["Temporal.Duration","Temporal.Instant","Temporal.PlainDate","Temporal.PlainDateTime","Temporal.PlainMonthDay","Temporal.PlainTime","Temporal.PlainYearMonth","Temporal.ZonedDateTime"];function Xg(t){return t[Symbol.toStringTag]}function ad(t){const e=Xg(t);return typeof e=="string"&&d4.includes(e)}const w0={direction:"asc",nulls:"first",stringSort:"locale"};class h4{constructor(e){this.originalIndex=e}lookup(e,n){const r=e==="gt"?"lt":e==="gte"?"lte":e==="lt"?"gt":e==="lte"?"gte":e;return this.originalIndex.lookup(r,n)}rangeQuery(e={}){return this.originalIndex.rangeQueryReversed(e)}rangeQueryReversed(e={}){return this.originalIndex.rangeQuery(e)}take(e,n,r){return this.originalIndex.takeReversed(e,n,r)}takeReversed(e,n,r){return this.originalIndex.take(e,n,r)}get orderedEntriesArray(){return this.originalIndex.orderedEntriesArrayReversed}get orderedEntriesArrayReversed(){return this.originalIndex.orderedEntriesArray}supports(e){return this.originalIndex.supports(e)}matchesField(e){return this.originalIndex.matchesField(e)}matchesCompareOptions(e){return this.originalIndex.matchesCompareOptions(e)}matchesDirection(e){return this.originalIndex.matchesDirection(e)}getStats(){return this.originalIndex.getStats()}add(e,n){this.originalIndex.add(e,n)}remove(e,n){this.originalIndex.remove(e,n)}update(e,n,r){this.originalIndex.update(e,n,r)}build(e){this.originalIndex.build(e)}clear(){this.originalIndex.clear()}get keyCount(){return this.originalIndex.keyCount}equalityLookup(e){return this.originalIndex.equalityLookup(e)}inArrayLookup(e){return this.originalIndex.inArrayLookup(e)}get indexedKeysSet(){return this.originalIndex.indexedKeysSet}get valueMapData(){return this.originalIndex.valueMapData}}function Ru(t,e,n){const r=n??{...w0,...t.compareOptions};for(const s of t.indexes.values())if(s.matchesField(e)&&s.matchesCompareOptions(r))return s.matchesDirection(r.direction)?s:new h4(s)}function p4(t){if(t.length===0)return new Set;if(t.length===1)return new Set(t[0]);let e=new Set(t[0]);for(let n=1;n<t.length;n++){const r=new Set;for(const s of e)t[n].has(s)&&r.add(s);e=r}return e}function m4(t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}function g4(t,e){return _0(t,e)}function _0(t,e){if(t.type==="func")switch(t.name){case"eq":case"gt":case"gte":case"lt":case"lte":return v4(t,e);case"and":return b4(t,e);case"or":return x4(t,e);case"in":return S4(t,e)}return{canOptimize:!1,matchingKeys:new Set}}function y4(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=new Map;for(const r of t.args)if(r.type==="func"&&["gt","gte","lt","lte"].includes(r.name)){const s=r;if(s.args.length===2){const a=s.args[0],l=s.args[1];let c=null,f=null,d=s.name;if(a.type==="ref"&&l.type==="val")c=a,f=l;else if(a.type==="val"&&l.type==="ref")switch(c=l,f=a,d){case"gt":d="lt";break;case"gte":d="lte";break;case"lt":d="gt";break;case"lte":d="gte";break}if(c&&f){const p=c.path.join("."),g=f.value;n.has(p)||n.set(p,[]),n.get(p).push({operation:d,value:g})}}}for(const[r,s]of n)if(s.length>=2){const a=r.split("."),l=Ru(e,a);if(l&&l.supports("gt")&&l.supports("lt")){let c,f,d=!0,m=!0;for(const{operation:g,value:y}of s)switch(g){case"gt":(c===void 0||y>c)&&(c=y,d=!1);break;case"gte":(c===void 0||y>c)&&(c=y,d=!0);break;case"lt":(f===void 0||y<f)&&(f=y,m=!1);break;case"lte":(f===void 0||y<f)&&(f=y,m=!0);break}return{canOptimize:!0,matchingKeys:l.rangeQuery({from:c,to:f,fromInclusive:d,toInclusive:m})}}}return{canOptimize:!1,matchingKeys:new Set}}function v4(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];let s=null,a=null,l=t.name;if(n.type==="ref"&&r.type==="val")s=n,a=r;else if(n.type==="val"&&r.type==="ref")switch(s=r,a=n,l){case"gt":l="lt";break;case"gte":l="lte";break;case"lt":l="gt";break;case"lte":l="gte";break}if(s&&a){const c=s.path,f=Ru(e,c);if(f){const d=a.value,m=l;return f.supports(m)?{canOptimize:!0,matchingKeys:f.lookup(m,d)}:{canOptimize:!1,matchingKeys:new Set}}}return{canOptimize:!1,matchingKeys:new Set}}function b4(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=y4(t,e);if(n.canOptimize)return n;const r=[];for(const s of t.args){const a=_0(s,e);a.canOptimize&&r.push(a)}if(r.length>0){const s=r.map(l=>l.matchingKeys);return{canOptimize:!0,matchingKeys:p4(s)}}return{canOptimize:!1,matchingKeys:new Set}}function x4(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=[];for(const r of t.args){const s=_0(r,e);s.canOptimize&&n.push(s)}if(n.length>0){const r=n.map(a=>a.matchingKeys);return{canOptimize:!0,matchingKeys:m4(r)}}return{canOptimize:!1,matchingKeys:new Set}}function S4(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];if(n.type==="ref"&&r.type==="val"&&Array.isArray(r.value)){const s=n.path,a=r.value,l=Ru(e,s);if(l){if(l.supports("in"))return{canOptimize:!0,matchingKeys:l.lookup("in",a)};if(l.supports("eq")){const c=new Set;for(const f of a){const d=l.lookup("eq",f);for(const m of d)c.add(m)}return{canOptimize:!0,matchingKeys:c}}}}return{canOptimize:!1,matchingKeys:new Set}}class w4 extends Map{constructor(e,n){super(n),this.defaultValue=e}get(e){return this.has(e)?super.get(e):this.defaultValue()}update(e,n){const r=this.get(e),s=n(r);return this.set(e,s),s}}const Zm=3e4;function Ym(t,e){if(e.length<=Zm)t.push(...e);else for(let n=0;n<e.length;n+=Zm){const r=e.slice(n,n+Zm);t.push(...r)}}function _4(t,e,n){let r=0,s=t.length;for(;r<s;){const a=Math.floor((r+s)/2),l=n(t[a],e);if(l<0)r=a+1;else if(l>0)s=a;else return a}return r}class C4{constructor(){this.objectIds=new WeakMap,this.nextId=0}getId(e){if(typeof e!="object"||e===null){const n=String(e);let r=0;for(let s=0;s<n.length;s++){const a=n.charCodeAt(s);r=(r<<5)-r+a,r=r&r}return r}return this.objectIds.has(e)||this.objectIds.set(e,this.nextId++),this.objectIds.get(e)}getStringId(e){return e===null?"null":e===void 0?"undefined":typeof e!="object"?`str_${String(e)}`:`obj_${this.getId(e)}`}}const Jm=new C4;function E4(t,e){const[n,r]=t,[s,a]=e,l=[...of(n,Math.min(r,s)),...of(Math.max(n,a),r)],c=[...of(s,Math.min(a,n)),...of(Math.max(s,r),a)];return{onlyInA:l,onlyInB:c}}function of(t,e){const n=[];for(let r=t;r<e;r++)n.push(r);return n}function od(t,e){return typeof t==typeof e?t<e?-1:t>e?1:0:typeof t=="string"?-1:1}const k4=dn(),R4=dn(),A4=dn(),T4=dn(),O4=dn();function dn(){return Math.random()*(2**31-1)>>>0}const qE=new ArrayBuffer(8),M4=new DataView(qE),Vs=new Uint8Array(qE);class Ud{constructor(){this.hash=k4,this.length=0,this.carry=0,this.carryBytes=0}_mix(e){e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e,this.hash=this.hash<<13|this.hash>>>19,this.hash=Math.imul(this.hash,5)+3864292196}writeByte(e){this.carry|=(e&255)<<8*this.carryBytes,this.carryBytes++,this.length++,this.carryBytes===4&&(this._mix(this.carry>>>0),this.carry=0,this.carryBytes=0)}update(e){switch(typeof e){case"symbol":{this.update(O4);const n=e.description;if(!n)return;for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);this.writeByte(s&255),this.writeByte(s>>>8&255)}return}case"string":this.update(R4);for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);this.writeByte(r&255),this.writeByte(r>>>8&255)}return;case"number":M4.setFloat64(0,e,!0),this.writeByte(Vs[0]),this.writeByte(Vs[1]),this.writeByte(Vs[2]),this.writeByte(Vs[3]),this.writeByte(Vs[4]),this.writeByte(Vs[5]),this.writeByte(Vs[6]),this.writeByte(Vs[7]);return;case"bigint":{let n=e;for(n<0n?(n=-n,this.update(T4)):this.update(A4);n>0n;)this.writeByte(Number(n&0xffn)),n>>=8n;e===0n&&this.writeByte(0);return}default:throw new TypeError(`Unsupported input type: ${typeof e}`)}}digest(){if(this.carryBytes>0){let e=this.carry>>>0;e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e}return this.hash^=this.length,this.hash^=this.hash>>>16,this.hash=Math.imul(this.hash,2246822507),this.hash^=this.hash>>>13,this.hash=Math.imul(this.hash,3266489909),this.hash^=this.hash>>>16,this.hash>>>0}}const I4=dn(),N4=dn(),D4=dn(),z4=dn(),j4=dn(),L4=dn(),P4=dn(),F4=dn(),$4=dn(),B4=dn(),U4=dn(),q4=dn(),H4=128,pu=new WeakMap;function wn(t){const e=new Ud;return HE(e,t),e.digest()}function V4(t){const e=pu.get(t);if(e!==void 0)return e;let n;if(t instanceof Date)n=K4(t);else if(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)if(t.byteLength<=H4)n=G4(t);else return Wg(t);else{if(t instanceof File)return Wg(t);{let r=t,s=F4;t instanceof Array&&(s=$4),t instanceof Map&&(s=B4,r=[...t.entries()]),t instanceof Set&&(s=U4,r=[...t.entries()]),n=Q4(r,s)}}return pu.set(t,n),n}function K4(t){const e=new Ud;return e.update(P4),e.update(t.getTime()),e.digest()}function G4(t){const e=new Ud;e.update(q4),e.update(t.byteLength);for(let n=0;n<t.byteLength;n++)e.writeByte(t[n]);return e.digest()}function Q4(t,e){const n=new Ud;n.update(e);const r=Object.keys(t);r.sort(Y4);for(const s of r)n.update(j4),n.update(s),HE(n,t[s]);return n.digest()}function HE(t,e){if(e===null){t.update(D4);return}switch(typeof e){case"undefined":t.update(z4);return;case"boolean":t.update(e?I4:N4);return;case"number":t.update(isNaN(e)?NaN:e===0?0:e);return;case"bigint":case"string":case"symbol":t.update(e);return;case"object":t.update(Z4(e));return;case"function":t.update(Wg(e));return;default:console.warn(`Ignored input during hashing because it is of type ${typeof e} which is not supported`)}}function Z4(t){let e=pu.get(t);return e===void 0&&(e=V4(t)),e}let A_=1;function Wg(t){let e=pu.get(t);return e===void 0&&(e=A_^L4,A_++,pu.set(t,e)),e}function Y4(t,e){return t.localeCompare(e)}class Kt{#e;constructor(e=[]){this.#e=e}toString(e=!1){return`MultiSet(${JSON.stringify(this.#e,null,e?2:void 0)})`}toJSON(){return JSON.stringify(Array.from(this.getInner()))}static fromJSON(e){return new Kt(JSON.parse(e))}map(e){return new Kt(this.#e.map(([n,r])=>[e(n),r]))}filter(e){return new Kt(this.#e.filter(([n,r])=>e(n)))}negate(){return new Kt(this.#e.map(([e,n])=>[e,-n]))}concat(e){const n=[];return Ym(n,this.#e),Ym(n,e.getInner()),new Kt(n)}consolidate(){if(this.#e.length>0){const e=this.#e[0]?.[0];if(Array.isArray(e)&&e.length===2)return this.#t()}return this.#n()}#t(){const e=new Map,n=new Map,r=a=>{if(a.length!==2)throw new Error("Expected tuple of length 2");const[l,c]=a;return`${Jm.getStringId(l)}|${Jm.getStringId(c)}`};for(const[a,l]of this.#e){if(!Array.isArray(a)||a.length!==2)return this.#n();const[c,f]=a;if(typeof c!="string"&&typeof c!="number")return this.#n();let d;Array.isArray(f)&&f.length===2?d=r(f):d=Jm.getStringId(f);const m=c+"|"+d;e.set(m,(e.get(m)||0)+l),n.has(m)||n.set(m,a)}const s=[];for(const[a,l]of e)l!==0&&s.push([n.get(a),l]);return new Kt(s)}#n(){const e=new w4(()=>0),n=new Map;let r=!1,s=!1,a=!1;for(const[f,d]of this.#e)if(typeof f=="string")r=!0;else if(typeof f=="number")s=!0;else{a=!0;break}const l=a||r&&s;for(const[f,d]of this.#e){const m=l?wn(f):f;l&&!n.has(m)&&n.set(m,f),e.update(m,p=>p+d)}const c=[];for(const[f,d]of e.entries())if(d!==0){const m=l?n.get(f):f;c.push([m,d])}return new Kt(c)}extend(e){const n=e instanceof Kt?e.getInner():e;Ym(this.#e,n)}add(e,n){n!==0&&this.#e.push([e,n])}getInner(){return this.#e}}class J4{#e;constructor(e){this.#e=e}drain(){const e=[...this.#e].reverse();return this.#e.length=0,e}isEmpty(){return this.#e.length===0}}class qr{#e=[];sendData(e){e instanceof Kt||(e=new Kt(e));for(const n of this.#e)n.unshift(e)}newReader(){const e=[];return this.#e.push(e),new J4(e)}}class VE{constructor(e,n,r){this.id=e,this.inputs=n,this.output=r}hasPendingWork(){return this.inputs.some(e=>!e.isEmpty())}}class bo extends VE{constructor(e,n,r){super(e,[n],r),this.id=e}inputMessages(){return this.inputs[0].drain()}}class X4 extends VE{constructor(e,n,r,s){super(e,[n,r],s),this.id=e}inputAMessages(){return this.inputs[0].drain()}inputBMessages(){return this.inputs[1].drain()}}class C0 extends bo{run(){for(const e of this.inputMessages())this.output.sendData(this.inner(e))}}class W4{#e=[];#t=0;#n=!1;constructor(){}#r(){if(this.#n)throw new Error("Graph already finalized")}getNextOperatorId(){return this.#r(),this.#t++}newInput(){this.#r();const e=new qr;return new ej(this,e)}addOperator(e){this.#r(),this.#e.push(e)}finalize(){this.#r(),this.#n=!0}step(){if(!this.#n)throw new Error("Graph not finalized");for(const e of this.#e)e.run()}pendingWork(){return this.#e.some(e=>e.hasPendingWork())}run(){for(;this.pendingWork();)this.step()}}class Hr{#e;#t;constructor(e,n){this.#e=e,this.#t=n}connectReader(){return this.#t.newReader()}get writer(){return this.#t}get graph(){return this.#e}pipe(...e){return e.reduce((n,r)=>r(n),this)}}class ej extends Hr{sendData(e){this.writer.sendData(e)}}class tj extends C0{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.map(this.#e)}}function _n(t){return e=>{const n=new Hr(e.graph,new qr),r=new tj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const Ml=Symbol("NO_PREFIX");class T_ extends Map{addValue(e,n){if(n===0)return this.size===0;const r=Ql(e),s=this.get(r);if(zf(s)){const[a,l]=s;if(Ql(a)!==r)throw new Error("Mismatching prefixes, this should never happen");if(a===e||wn(a)===wn(e)){const f=l+n;f===0?this.delete(r):this.set(r,[e,f])}else{const f=new Il;f.set(wn(a),s),f.set(wn(e),[e,n]),this.set(r,f)}}else s===void 0?this.set(r,[e,n]):s.addValue(e,n)&&this.delete(r);return this.size===0}}class Il extends Map{addValue(e,n){if(n===0)return this.size===0;const r=wn(e),s=this.get(r);if(s){const[,a]=s,l=a+n;l===0?this.delete(r):this.set(r,[e,l])}else this.set(r,[e,n]);return this.size===0}}class Js{#e;#t=new Map;constructor(){this.#e=new Map}static fromMultiSets(e){const n=new Js;for(const r of e)for(const[s,a]of r.getInner()){const[l,c]=s;n.addValue(l,[c,a])}return n}toString(e=!1){return`Index(${JSON.stringify([...this.entries()],void 0,e?2:void 0)})`}get size(){return this.#e.size}has(e){return this.#e.has(e)}hasPresence(e){return(this.#t.get(e)||0)!==0}getConsolidatedMultiplicity(e){return this.#t.get(e)||0}getPresenceKeys(){return this.#t.keys()}get(e){return[...this.getIterator(e)]}*getIterator(e){const n=this.#e.get(e);if(zf(n))yield n;else{if(n===void 0)return;if(n instanceof Il)for(const r of n.values())yield r;else for(const r of n.values())if(zf(r))yield r;else for(const s of r.values())yield s}}*entries(){for(const e of this.#e.keys())for(const n of this.getIterator(e))yield[e,n]}*entriesIterators(){for(const e of this.#e.keys())yield[e,this.getIterator(e)]}addValue(e,n){const[r,s]=n;if(s===0)return;const a=(this.#t.get(e)||0)+s;a===0?this.#t.delete(e):this.#t.set(e,a);const l=this.#e.get(e);if(l===void 0){this.#e.set(e,n);return}if(zf(l)){this.#n(e,l,r,s);return}if(l instanceof Il){const c=Ql(r);if(c!==Ml){const f=new T_;f.set(Ml,l),f.set(c,n),this.#e.set(e,f)}else l.addValue(r,s)&&this.#e.delete(e)}else l.addValue(r,s)&&this.#e.delete(e)}#n(e,n,r,s){const[a,l]=n;if(a===r){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}const c=Ql(r),f=Ql(a);if(f===c&&(a===r||wn(a)===wn(r))){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}if(f===Ml&&c===Ml){const d=new Il;d.set(wn(a),n),d.set(wn(r),[r,s]),this.#e.set(e,d)}else{const d=new T_;if(f===c){const m=new Il;m.set(wn(a),n),m.set(wn(r),[r,s]),d.set(f,m)}else d.set(f,n),d.set(c,[r,s]);this.#e.set(e,d)}}append(e){for(const[n,r]of e.entries())this.addValue(n,r)}join(e){const n=[];if(this.size<=e.size)for(const[r,s]of this.entriesIterators()){if(!e.has(r))continue;const a=e.get(r);for(const[l,c]of s)for(const[f,d]of a)c!==0&&d!==0&&n.push([[r,[l,f]],c*d])}else for(const[r,s]of e.entriesIterators()){if(!this.has(r))continue;const a=this.get(r);for(const[l,c]of s)for(const[f,d]of a)d!==0&&c!==0&&n.push([[r,[f,l]],d*c])}return new Kt(n)}}function Ql(t){return Array.isArray(t)&&(typeof t[0]=="string"||typeof t[0]=="number"||typeof t[0]=="bigint")?t[0]:Ml}function zf(t){return Array.isArray(t)}class nj extends bo{#e=new Js;#t=new Js;#n;constructor(e,n,r,s){super(e,n,r),this.#n=s}run(){const e=new Set;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const[l,c]=s;this.#e.addValue(l,[c,a]),e.add(l)}const n=[];for(const r of e){const s=this.#e.get(r),a=this.#t.get(r),l=this.#n(s),c=new Map,f=new Map;for(const[d,m]of l){const p=c.get(d)??0;c.set(d,p+m)}for(const[d,m]of a){const p=f.get(d)??0;f.set(d,p+m)}for(const[d,m]of f)c.has(d)||(n.push([[r,d],-m]),this.#t.addValue(r,[d,-m]));for(const[d,m]of c)f.has(d)||m!==0&&(n.push([[r,d],m]),this.#t.addValue(r,[d,m]));for(const[d,m]of c){const p=f.get(d);if(p!==void 0){const g=m-p;g!==0&&(n.push([[r,d],g]),this.#t.addValue(r,[d,g]))}}}n.length>0&&this.output.sendData(new Kt(n))}}function rj(t){return e=>{const n=new Hr(e.graph,new qr),r=new nj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}function O_(t){return"pipe"in t}function M_(t,e={}){const n=Object.fromEntries(Object.entries(e).filter(([r,s])=>!O_(s)));return Object.fromEntries(Object.entries(e).filter(([r,s])=>O_(s))),r=>{const s="__original_key__";return r.pipe(_n(c=>{const f=t(c),d=JSON.stringify(f),m={};m[s]=f;for(const[p,g]of Object.entries(n))m[p]=g.preMap(c);return[d,m]})).pipe(rj(c=>{let f=0;for(const[p,g]of c)f+=g;if(f<=0)return[];const d={},m=c[0]?.[0]?.[s];d[s]=m;for(const[p,g]of Object.entries(n)){const y=c.map(([x,S])=>[x[p],S]);d[p]=g.reduce(y)}return[[d,1]]})).pipe(_n(([c,f])=>{const d=f[s],m={};Object.assign(m,d);for(const[p,g]of Object.entries(n))g.postMap?m[p]=g.postMap(f[p]):m[p]=f[p];return[c,m]}))}}function sj(t=e=>e){return{preMap:e=>t(e),reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function ij(t=e=>e){return{preMap:e=>t(e)==null?0:1,reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function aj(t=e=>e){return{preMap:e=>({sum:t(e),count:0}),reduce:e=>{let n=0,r=0;for(const[s,a]of e)n+=s.sum*a,r+=a;return{sum:n,count:r}},postMap:e=>e.sum/e.count}}function oj(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s<r)&&(r=s);return r}}}function lj(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s>r)&&(r=s);return r}}}const uj={sum:sj,count:ij,avg:aj,min:oj,max:lj};class cj extends C0{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return this.#e(e),e}}function fj(t){return e=>{const n=new Hr(e.graph,new qr),r=new cj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class dj extends C0{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.filter(this.#e)}}function Xs(t){return e=>{const n=new Hr(e.graph,new qr),r=new dj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class hj extends bo{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}run(){for(const e of this.inputMessages())this.#e(e),this.output.sendData(e)}}function pj(t){return e=>{const n=new Hr(e.graph,new qr),r=new hj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class mj extends bo{run(){const e=this.inputMessages();if(e.length===0)return;const n=new Kt;for(const s of e)n.extend(s);const r=n.consolidate();r.getInner().length>0&&this.output.sendData(r)}}function gj(){return t=>{const e=new Hr(t.graph,new qr),n=new mj(t.graph.getNextOperatorId(),t.connectReader(),e.writer);return t.graph.addOperator(n),e}}class yj extends X4{#e=new Js;#t=new Js;#n;constructor(e,n,r,s,a="inner"){super(e,n,r,s),this.#n=a}run(){const e=Js.fromMultiSets(this.inputAMessages()),n=Js.fromMultiSets(this.inputBMessages());if(e.size===0&&n.size===0)return;const r=new Kt;this.#n!=="anti"&&this.emitInnerResults(e,n,r),(this.#n==="left"||this.#n==="full"||this.#n==="anti")&&this.emitLeftOuterResults(e,n,r),(this.#n==="right"||this.#n==="full")&&this.emitRightOuterResults(e,n,r),this.#e.append(e),this.#t.append(n),r.getInner().length>0&&this.output.sendData(r)}emitInnerResults(e,n,r){e.size>0&&r.extend(e.join(this.#t)),n.size>0&&r.extend(this.#e.join(n)),e.size>0&&n.size>0&&r.extend(e.join(n))}emitLeftOuterResults(e,n,r){if(e.size>0)for(const[s,a]of e.entriesIterators()){const l=this.#t.getConsolidatedMultiplicity(s),c=n.getConsolidatedMultiplicity(s);if(l+c===0)for(const[d,m]of a)m!==0&&r.add([s,[d,null]],m)}if(n.size>0)for(const s of n.getPresenceKeys()){const a=this.#t.getConsolidatedMultiplicity(s),l=n.getConsolidatedMultiplicity(s);if(l===0)continue;const c=a+l;if(a===0==(c===0))continue;const f=a===0;for(const[d,m]of this.#e.getIterator(s))m!==0&&r.add([s,[d,null]],f?-m:+m)}}emitRightOuterResults(e,n,r){if(n.size>0)for(const[s,a]of n.entriesIterators()){const l=this.#e.getConsolidatedMultiplicity(s),c=e.getConsolidatedMultiplicity(s);if(l+c===0)for(const[d,m]of a)m!==0&&r.add([s,[null,d]],m)}if(e.size>0)for(const s of e.getPresenceKeys()){const a=this.#e.getConsolidatedMultiplicity(s),l=e.getConsolidatedMultiplicity(s);if(l===0)continue;const c=a+l;if(a===0==(c===0))continue;const f=a===0;for(const[d,m]of this.#t.getIterator(s))m!==0&&r.add([s,[null,d]],f?-m:+m)}}}function vj(t,e="inner"){return n=>{if(n.graph!==t.graph)throw new Error("Cannot join streams from different graphs");const r=new Hr(n.graph,new qr),s=new yj(n.graph.getNextOperatorId(),n.connectReader(),t.connectReader(),r.writer,e);return n.graph.addOperator(s),r}}class bj extends bo{#e;#t;constructor(e,n,r,s=a=>a){super(e,n,r),this.#e=s,this.#t=new Map}run(){const e=new Map;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const l=wn(this.#e(s)),f=(e.get(l)?.[0]??this.#t.get(l)??0)+a;e.set(l,[f,s])}const n=[];for(const[r,[s,a]]of e.entries()){const l=this.#t.get(r)??0;s===0?this.#t.delete(r):this.#t.set(r,s),l<=0&&s>0?n.push([[wn(this.#e(a)),a[1]],1]):l>0&&s<=0&&n.push([[wn(this.#e(a)),a[1]],-1])}n.length>0&&this.output.sendData(new Kt(n))}}function xj(t=e=>e){return e=>{const n=new Hr(e.graph,new qr),r=new bj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const Sj="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Ya(t,e,n){const r=n[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let l=0;for(;(t[l]||r)===e[l];)l++;if(l>0)return e.slice(0,l)+Ya(t.slice(l),e.slice(l),n)}const s=t?n.indexOf(t[0]):0,a=e!=null?n.indexOf(e[0]):n.length;if(a-s>1){const l=Math.round(.5*(s+a));return n[l]}else return e&&e.length>1?e.slice(0,1):n[s]+Ya(t.slice(1),null,n)}function KE(t){if(t.length!==GE(t[0]))throw new Error("invalid integer part of order key: "+t)}function GE(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function Nl(t){const e=GE(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function I_(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const n=Nl(t);if(t.slice(n.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function N_(t,e){KE(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])+1;l===e.length?r[a]=e[0]:(r[a]=e[l],s=!1)}if(s){if(n==="Z")return"a"+e[0];if(n==="z")return null;const a=String.fromCharCode(n.charCodeAt(0)+1);return a>"a"?r.push(e[0]):r.pop(),a+r.join("")}else return n+r.join("")}function wj(t,e){KE(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])-1;l===-1?r[a]=e.slice(-1):(r[a]=e[l],s=!1)}if(s){if(n==="a")return"Z"+e.slice(-1);if(n==="A")return null;const a=String.fromCharCode(n.charCodeAt(0)-1);return a<"Z"?r.push(e.slice(-1)):r.pop(),a+r.join("")}else return n+r.join("")}function _j(t,e,n=Sj){if(t!=null&&I_(t,n),e!=null&&I_(e,n),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+n[0];const f=Nl(e),d=e.slice(f.length);if(f==="A"+n[0].repeat(26))return f+Ya("",d,n);if(f<e)return f;const m=wj(f,n);if(m==null)throw new Error("cannot decrement any more");return m}if(e==null){const f=Nl(t),d=t.slice(f.length),m=N_(f,n);return m??f+Ya(d,null,n)}const r=Nl(t),s=t.slice(r.length),a=Nl(e),l=e.slice(a.length);if(r===a)return r+Ya(s,l,n);const c=N_(r,n);if(c==null)throw new Error("cannot increment any more");return c<e?c:r+Ya(s,null,n)}class D_{#e=[];#t;#n;#r;constructor(e,n,r){this.#n=e,this.#r=e+n,this.#t=r}get size(){const e=this.#n,n=this.#r-this.#n,r=this.#e.length-e;return Math.max(0,Math.min(n,r))}move({offset:e,limit:n}){const r=this.#n,s=this.#r-this.#n,a=[this.#n,this.#r===1/0?this.#n+this.size:this.#r];this.#n=e??r,this.#r=this.#n+(n??s);const l=[this.#n,this.#r===1/0?Math.max(this.#n+this.size,a[1]):this.#r],{onlyInA:c,onlyInB:f}=E4(a,l),d=[];f.forEach(p=>{const g=this.#e[p];g&&d.push(g)});const m=[];return c.forEach(p=>{const g=this.#e[p];g&&m.push(g)}),{moveIns:d,moveOuts:m,changes:c.length+f.length>0}}insert(e){const n={moveIn:null,moveOut:null},r=this.#s(e),s=r===0?null:L_(this.#e[r-1]),a=r===this.#e.length?null:L_(this.#e[r]),l=_j(s,a),c=z_(e,l);if(this.#e.splice(r,0,c),r<this.#r){const f=Math.max(r,this.#n);f<this.#e.length&&(n.moveIn=this.#e[f],this.#r<this.#e.length&&(n.moveOut=this.#e[this.#r]))}return n}delete(e){const n={moveIn:null,moveOut:null},r=this.#s(e),[s]=this.#e.splice(r,1);if(r<this.#r){if(n.moveOut=s,r<this.#n){const l=this.#n-1;l<this.#e.length?n.moveOut=this.#e[l]:n.moveOut=null}const a=this.#r-1;a<this.#e.length&&(n.moveIn=this.#e[a])}return n}#s(e){return _4(this.#e,z_(e,""),(n,r)=>this.#t(j_(n),j_(r)))}}class Cj extends bo{#e=new Map;#t;constructor(e,n,r,s,a){super(e,n,r);const l=a.limit??1/0,c=a.offset??0;this.#t=this.createTopK(c,l,kj(s)),a.setSizeCallback?.(()=>this.#t.size),a.setWindowFn?.(this.moveTopK.bind(this))}createTopK(e,n,r){return new D_(e,n,r)}moveTopK({offset:e,limit:n}){if(!(this.#t instanceof D_))throw new Error("Cannot move B+-tree implementation of TopK with fractional index");const r=[],s=this.#t.move({offset:e,limit:n});s.moveIns.forEach(a=>this.handleMoveIn(a,r)),s.moveOuts.forEach(a=>this.handleMoveOut(a,r)),s.changes&&this.output.sendData(new Kt(r))}run(){const e=[];for(const n of this.inputMessages())for(const[r,s]of n.getInner()){const[a,l]=r;this.processElement(a,l,s,e)}e.length>0&&this.output.sendData(new Kt(e))}processElement(e,n,r,s){const{oldMultiplicity:a,newMultiplicity:l}=this.addKey(e,r);let c={moveIn:null,moveOut:null};a<=0&&l>0?c=this.#t.insert([e,n]):a>0&&l<=0&&(c=this.#t.delete([e,n])),this.handleMoveIn(c.moveIn,s),this.handleMoveOut(c.moveOut,s)}handleMoveIn(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],1])}}handleMoveOut(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],-1])}}getMultiplicity(e){return this.#e.get(e)??0}addKey(e,n){const r=this.getMultiplicity(e),s=r+n;return s===0?this.#e.delete(e):this.#e.set(e,s),{oldMultiplicity:r,newMultiplicity:s}}}function Ej(t,e){const n=e||{};return r=>{const s=new Hr(r.graph,new qr),a=new Cj(r.graph.getNextOperatorId(),r.connectReader(),s.writer,t,n);return r.graph.addOperator(a),s}}function z_(t,e){return[t,e]}function j_(t){return t[0]}function L_(t){return t[1]}function kj(t){return([e,n],[r,s])=>{const a=t(n,s);return a!==0?a:od(e,r)}}function Rj(t,e,n){const r=n?.limit??1/0,s=n?.offset??0,a=n?.setSizeCallback,l=n?.setWindowFn,c=n?.comparator??((f,d)=>f===d?0:f<d?-1:1);return f=>f.pipe(t((d,m)=>c(e(d),e(m)),{limit:r,offset:s,setSizeCallback:a,setWindowFn:l}),gj())}function Aj(t,e){return Rj(Ej,t,e)}class Tj{constructor(e,n,r){this._root=Xm,this._size=0,this._maxNodeSize=r>=4?Math.min(r,256):32,this._compare=e,n&&this.setPairs(n)}get size(){return this._size}get length(){return this._size}get isEmpty(){return this._size===0}clear(){this._root=Xm,this._size=0}get(e,n){return this._root.get(e,n,this)}set(e,n,r){this._root.isShared&&(this._root=this._root.clone());const s=this._root.set(e,n,r,this);return s===!0||s===!1?s:(this._root=new E0([this._root,s]),!0)}has(e){return this.forRange(e,e,!0,void 0)!==0}delete(e){return this.editRange(e,e,!0,Mj)!==0}get maxNodeSize(){return this._maxNodeSize}minKey(){return this._root.minKey()}maxKey(){return this._root.maxKey()}keysArray(){const e=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,(n,r)=>{e.push(n)}),e}nextHigherPair(e,n){return n=n||[],e===void 0?this._root.minPair(n):this._root.getPairOrNextHigher(e,this._compare,!1,n)}nextHigherKey(e){const n=this.nextHigherPair(e,P_);return n&&n[0]}nextLowerPair(e,n){return n=n||[],e===void 0?this._root.maxPair(n):this._root.getPairOrNextLower(e,this._compare,!1,n)}nextLowerKey(e){const n=this.nextLowerPair(e,P_);return n&&n[0]}setPairs(e,n){let r=0;for(const s of e)this.set(s[0],s[1],n)&&r++;return r}forRange(e,n,r,s,a){const l=this._root.forRange(e,n,r,!1,this,a||0,s);return typeof l=="number"?l:l.break}editRange(e,n,r,s,a){let l=this._root;l.isShared&&(this._root=l=l.clone());try{const c=l.forRange(e,n,r,!0,this,a||0,s);return typeof c=="number"?c:c.break}finally{let c;for(;l.keys.length<=1&&!l.isLeaf;)c||=l.isShared,this._root=l=l.keys.length===0?Xm:l.children[0];c&&(l.isShared=!0)}}}class mu{get isLeaf(){return this.children===void 0}constructor(e=[],n){this.keys=e,this.values=n||pn,this.isShared=void 0}maxKey(){return this.keys[this.keys.length-1]}indexOf(e,n,r){const s=this.keys;let a=0,l=s.length,c=l>>1;for(;a<l;){const f=r(s[c],e);if(f<0)a=c+1;else if(f>0)l=c;else{if(f===0)return c;if(e===e)return s.length;throw new Error("BTree: NaN was used as a key")}c=a+l>>1}return c^n}minKey(){return this.keys[0]}minPair(e){if(this.keys.length!==0)return e[0]=this.keys[0],e[1]=this.values[0],e}maxPair(e){if(this.keys.length===0)return;const n=this.keys.length-1;return e[0]=this.keys[n],e[1]=this.values[n],e}clone(){const e=this.values;return new mu(this.keys.slice(0),e===pn?e:e.slice(0))}get(e,n,r){const s=this.indexOf(e,-1,r._compare);return s<0?n:this.values[s]}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a-1:r?a:a-1;if(l>=0)return s[0]=this.keys[l],s[1]=this.values[l],s}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a:r?a:a+1,c=this.keys;if(l<c.length)return s[0]=c[l],s[1]=this.values[l],s}set(e,n,r,s){let a=this.indexOf(e,-1,s._compare);if(a<0){if(a=~a,s._size++,this.keys.length<s._maxNodeSize)return this.insertInLeaf(a,e,n,s);{const l=this.splitOffRightSide();let c=this;return a>this.keys.length&&(a-=this.keys.length,c=l),c.insertInLeaf(a,e,n,s),l}}else return r!==!1&&(n!==void 0&&this.reifyValues(),this.keys[a]=e,this.values[a]=n),!1}reifyValues(){return this.values===pn?this.values=this.values.slice(0,this.keys.length):this.values}insertInLeaf(e,n,r,s){if(this.keys.splice(e,0,n),this.values===pn){for(;pn.length<s._maxNodeSize;)pn.push(void 0);if(r===void 0)return!0;this.values=pn.slice(0,this.keys.length-1)}return this.values.splice(e,0,r),!0}takeFromRight(e){let n=this.values;e.values===pn?n!==pn&&n.push(void 0):(n=this.reifyValues(),n.push(e.values.shift())),this.keys.push(e.keys.shift())}takeFromLeft(e){let n=this.values;e.values===pn?n!==pn&&n.unshift(void 0):(n=this.reifyValues(),n.unshift(e.values.pop())),this.keys.unshift(e.keys.pop())}splitOffRightSide(){const e=this.keys.length>>1,n=this.keys.splice(e),r=this.values===pn?pn:this.values.splice(e);return new mu(n,r)}forRange(e,n,r,s,a,l,c){const f=a._compare;let d,m;if(n===e){if(!r||(m=(d=this.indexOf(e,-1,f))+1,d<0))return l}else d=this.indexOf(e,0,f),m=this.indexOf(n,-1,f),m<0?m=~m:r===!0&&m++;const p=this.keys,g=this.values;if(c!==void 0)for(let y=d;y<m;y++){const x=p[y],S=c(x,g[y],l++);if(S!==void 0){if(s===!0){if(x!==p[y]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");S.delete?(this.keys.splice(y,1),this.values!==pn&&this.values.splice(y,1),a._size--,y--,m--):S.hasOwnProperty("value")&&(g[y]=S.value)}if(S.break!==void 0)return S}}else l+=m-d;return l}mergeSibling(e,n){if(this.keys.push.apply(this.keys,e.keys),this.values===pn){if(e.values===pn)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,e.reifyValues())}}class E0 extends mu{constructor(e,n){if(!n){n=[];for(let r=0;r<e.length;r++)n[r]=e[r].maxKey()}super(n),this.children=e}minKey(){return this.children[0].minKey()}minPair(e){return this.children[0].minPair(e)}maxPair(e){return this.children[this.children.length-1].maxPair(e)}get(e,n,r){const s=this.indexOf(e,0,r._compare),a=this.children;return s<a.length?a[s].get(e,n,r):void 0}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children;if(a>=l.length)return this.maxPair(s);const c=l[a].getPairOrNextLower(e,n,r,s);return c===void 0&&a>0?l[a-1].maxPair(s):c}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children,c=l.length;if(a>=c)return;const f=l[a].getPairOrNextHigher(e,n,r,s);return f===void 0&&a<c-1?l[a+1].minPair(s):f}set(e,n,r,s){const a=this.children,l=s._maxNodeSize,c=s._compare;let f=Math.min(this.indexOf(e,0,c),a.length-1),d=a[f];if(d.isShared&&(a[f]=d=d.clone()),d.keys.length>=l){let p;f>0&&(p=a[f-1]).keys.length<l&&c(d.keys[0],e)<0?(p.isShared&&(a[f-1]=p=p.clone()),p.takeFromRight(d),this.keys[f-1]=p.maxKey()):(p=a[f+1])!==void 0&&p.keys.length<l&&c(d.maxKey(),e)<0&&(p.isShared&&(a[f+1]=p=p.clone()),p.takeFromLeft(d),this.keys[f]=a[f].maxKey())}const m=d.set(e,n,r,s);if(m===!1)return!1;if(this.keys[f]=d.maxKey(),m===!0)return!0;if(this.keys.length<l)return this.insert(f+1,m),!0;{const p=this.splitOffRightSide();let g=this;return c(m.maxKey(),this.maxKey())>0&&(g=p,f-=this.keys.length),g.insert(f+1,m),p}}insert(e,n){this.children.splice(e,0,n),this.keys.splice(e,0,n.maxKey())}splitOffRightSide(){const e=this.children.length>>1;return new E0(this.children.splice(e),this.keys.splice(e))}takeFromRight(e){this.keys.push(e.keys.shift()),this.children.push(e.children.shift())}takeFromLeft(e){this.keys.unshift(e.keys.pop()),this.children.unshift(e.children.pop())}forRange(e,n,r,s,a,l,c){const f=a._compare,d=this.keys,m=this.children;let p=this.indexOf(e,0,f),g=p;const y=Math.min(n===e?p:this.indexOf(n,0,f),d.length-1);if(s){if(g<=y)try{for(;g<=y;g++){m[g].isShared&&(m[g]=m[g].clone());const x=m[g].forRange(e,n,r,s,a,l,c);if(d[g]=m[g].maxKey(),typeof x!="number")return x;l=x}}finally{const x=a._maxNodeSize>>1;for(p>0&&p--,g=y;g>=p;g--)m[g].keys.length<=x&&(m[g].keys.length!==0?this.tryMerge(g,a._maxNodeSize):(d.splice(g,1),m.splice(g,1)));m.length!==0&&m[0].keys.length===0&&Ij(!1,"emptiness bug")}}else for(;g<=y;g++){const x=m[g].forRange(e,n,r,s,a,l,c);if(typeof x!="number")return x;l=x}return l}tryMerge(e,n){const r=this.children;return e>=0&&e+1<r.length&&r[e].keys.length+r[e+1].keys.length<=n?(r[e].isShared&&(r[e]=r[e].clone()),r[e].mergeSibling(r[e+1],n),r.splice(e+1,1),this.keys.splice(e+1,1),this.keys[e]=r[e].maxKey(),!0):!1}mergeSibling(e,n){const r=this.keys.length;this.keys.push.apply(this.keys,e.keys);const s=e.children;if(this.children.push.apply(this.children,s),e.isShared&&!this.isShared)for(const a of s)a.isShared=!0;this.tryMerge(r-1,n)}}const pn=[],Oj={delete:!0},Mj=()=>Oj,Xm=(function(){const t=new mu;return t.isShared=!0,t})(),P_=[];function Ij(t,...e){throw e.unshift("B+ tree"),new Error(e.join(" "))}function Nj(){const t=new Map;function e(n){const r=n.join(".");if(t.has(r))return t.get(r);const s=new Proxy({},{get(a,l,c){if(l==="__refProxy")return!0;if(l==="__path")return n;if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,c);const f=[...n,String(l)];return e(f)},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?!0:Reflect.has(a,l)},ownKeys(a){return Reflect.ownKeys(a)},getOwnPropertyDescriptor(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(a,l)}});return t.set(r,s),s}return e([])}function Pa(t){const e=new Map;let n=0;function r(a){const l=a.join(".");if(e.has(l))return e.get(l);const c=new Proxy({},{get(f,d,m){if(d==="__refProxy")return!0;if(d==="__path")return a;if(d==="__type")return;if(typeof d=="symbol")return Reflect.get(f,d,m);const p=[...a,String(d)];return r(p)},has(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?!0:Reflect.has(f,d)},ownKeys(f){const d=++n,m=`__SPREAD_SENTINEL__${a.join(".")}__${d}`;return Object.prototype.hasOwnProperty.call(f,m)||Object.defineProperty(f,m,{enumerable:!0,configurable:!0,value:!0}),Reflect.ownKeys(f)},getOwnPropertyDescriptor(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(f,d)}});return e.set(l,c),c}return new Proxy({},{get(a,l,c){if(l==="__refProxy")return!0;if(l==="__path")return[];if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,c);const f=String(l);if(t.includes(f))return r([f])},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"||typeof l=="string"&&t.includes(l)?!0:Reflect.has(a,l)},ownKeys(a){return[...t,"__refProxy","__path","__type"]},getOwnPropertyDescriptor(a,l){if(l==="__refProxy"||l==="__path"||l==="__type")return{enumerable:!1,configurable:!0};if(typeof l=="string"&&t.includes(l))return{enumerable:!0,configurable:!0}}})}function en(t){return Dj(t)?new En(t.__path):t&&typeof t=="object"&&"type"in t&&(t.type==="func"||t.type==="ref"||t.type==="val"||t.type==="agg")?t:new jn(t)}function Dj(t){return t&&typeof t=="object"&&t.__refProxy===!0}function ey(t,e){return new Sr("eq",[en(t),en(e)])}function F_(t,e){return new Sr("gt",[en(t),en(e)])}function zj(t,e){return new Sr("gte",[en(t),en(e)])}function ty(t,e){return new Sr("lt",[en(t),en(e)])}function ny(t,e,...n){const r=[t,e,...n];return new Sr("and",r.map(s=>en(s)))}function jj(t,e,...n){const r=[t,e,...n];return new Sr("or",r.map(s=>en(s)))}function Lj(t,e){return new Sr("in",[en(t),en(e)])}class Pj{constructor(e,n,r,s){this.lookupCount=0,this.totalLookupTime=0,this.lastUpdated=new Date,this.id=e,this.expression=n,this.compareOptions=w0,this.name=r,this.initialize(s)}supports(e){return this.supportedOperations.has(e)}matchesField(e){return this.expression.type==="ref"&&this.expression.path.length===e.length&&this.expression.path.every((n,r)=>n===e[r])}matchesCompareOptions(e){const n={...this.compareOptions,direction:void 0},r={...e,direction:void 0};return Tr(n,r)}matchesDirection(e){return this.compareOptions.direction===e}getStats(){return{entryCount:this.keyCount,lookupCount:this.lookupCount,averageLookupTime:this.lookupCount>0?this.totalLookupTime/this.lookupCount:0,lastUpdated:this.lastUpdated}}evaluateIndexExpression(e){return x0(this.expression)(e)}trackLookup(e){const n=performance.now()-e;this.lookupCount++,this.totalLookupTime+=n}updateTimestamp(){this.lastUpdated=new Date}}class ry extends Pj{constructor(e,n,r,s){super(e,n,r,s),this.supportedOperations=new Set(["eq","gt","gte","lt","lte","in"]),this.valueMap=new Map,this.indexedKeys=new Set,this.compareFn=Jg,this.compareFn=s?.compareFn??Jg,s?.compareOptions&&(this.compareOptions=s.compareOptions),this.orderedEntries=new Tj(this.compareFn)}initialize(e){}add(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){throw new Error(`Failed to evaluate index expression for key ${e}: ${a}`)}const s=ps(r);if(this.valueMap.has(s))this.valueMap.get(s).add(e);else{const a=new Set([e]);this.valueMap.set(s,a),this.orderedEntries.set(s,void 0)}this.indexedKeys.add(e),this.updateTimestamp()}remove(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){console.warn(`Failed to evaluate index expression for key ${e} during removal:`,a);return}const s=ps(r);if(this.valueMap.has(s)){const a=this.valueMap.get(s);a.delete(e),a.size===0&&(this.valueMap.delete(s),this.orderedEntries.delete(s))}this.indexedKeys.delete(e),this.updateTimestamp()}update(e,n,r){this.remove(e,n),this.add(e,r)}build(e){this.clear();for(const[n,r]of e)this.add(n,r)}clear(){this.orderedEntries.clear(),this.valueMap.clear(),this.indexedKeys.clear(),this.updateTimestamp()}lookup(e,n){const r=performance.now();let s;switch(e){case"eq":s=this.equalityLookup(n);break;case"gt":s=this.rangeQuery({from:n,fromInclusive:!1});break;case"gte":s=this.rangeQuery({from:n,fromInclusive:!0});break;case"lt":s=this.rangeQuery({to:n,toInclusive:!1});break;case"lte":s=this.rangeQuery({to:n,toInclusive:!0});break;case"in":s=this.inArrayLookup(n);break;default:throw new Error(`Operation ${e} not supported by BTreeIndex`)}return this.trackLookup(r),s}get keyCount(){return this.indexedKeys.size}equalityLookup(e){const n=ps(e);return new Set(this.valueMap.get(n)??[])}rangeQuery(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e,l=new Set,c=ps(n),f=ps(r),d=c??this.orderedEntries.minKey(),m=f??this.orderedEntries.maxKey();return this.orderedEntries.forRange(d,m,a,(p,g)=>{if(!s&&this.compareFn(p,n)===0)return;const y=this.valueMap.get(p);y&&y.forEach(x=>l.add(x))}),l}rangeQueryReversed(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e;return this.rangeQuery({from:r??this.orderedEntries.maxKey(),to:n??this.orderedEntries.minKey(),fromInclusive:a,toInclusive:s})}takeInternal(e,n,r,s,a=!1){const l=new Set,c=[];let f,d=ps(r);for(;(f=n(d))!==void 0&&c.length<e;){d=f[0];const m=this.valueMap.get(d);if(m&&m.size>0){const p=Array.from(m).sort(od);a&&p.reverse();for(const g of p){if(c.length>=e)break;!l.has(g)&&(s?.(g)??!0)&&(c.push(g),l.add(g))}}}return c}take(e,n,r){const s=a=>this.orderedEntries.nextHigherPair(a);return this.takeInternal(e,s,n,r)}takeReversed(e,n,r){const s=a=>this.orderedEntries.nextLowerPair(a);return this.takeInternal(e,s,n,r,!0)}inArrayLookup(e){const n=new Set;for(const r of e){const s=ps(r),a=this.valueMap.get(s);a&&a.forEach(l=>n.add(l))}return n}get indexedKeysSet(){return this.indexedKeys}get orderedEntriesArray(){return this.orderedEntries.keysArray().map(e=>[e,this.valueMap.get(e)??new Set])}get orderedEntriesArrayReversed(){return this.takeReversed(this.orderedEntries.size).map(e=>[e,this.valueMap.get(e)??new Set])}get valueMapData(){return this.valueMap}}function QE(t){return t.config.autoIndex==="eager"}function qd(t,e,n,r,s){if(!QE(n))return;const a=r??{...w0,...n.compareOptions};if(!Array.from(n.indexes.values()).find(c=>c.matchesField(e)&&c.matchesCompareOptions(a)))try{n.createIndex(c=>{let f=c;for(const d of e)f=f[d];return f},{name:`auto:${e.join(".")}`,indexType:ry,options:s?{compareFn:s,compareOptions:a}:{}})}catch(c){console.warn(`${n.id?`[${n.id}] `:""}Failed to create auto-index for field path "${e.join(".")}":`,c)}}function Fj(t,e){if(!QE(e))return;const n=$j(t);for(const{fieldName:r,fieldPath:s}of n)qd(r,s,e)}function $j(t){const e=[];function n(r){if(r.type!=="func")return;const s=r;if(s.name==="and"){for(const d of s.args)n(d);return}if(!["eq","gt","gte","lt","lte","in"].includes(s.name)||s.args.length<1||s.args[0].type!=="ref")return;const c=s.args[0].path;if(c.length===0)return;const f=c.join("_");e.push({fieldName:f,fieldPath:c})}return n(t),e}const{sum:Bj,count:Uj,avg:qj,min:Hj,max:Vj}=uj;function Kj(t,e){const n=new Map,r=[...t];if(!e)return{selectToGroupByIndex:n,groupByExpressions:r};for(const[s,a]of Object.entries(e)){if(a.type==="agg")continue;const l=r.findIndex(c=>ld(a,c));if(l===-1)throw new Vz(s);n.set(s,l)}return{selectToGroupByIndex:n,groupByExpressions:r}}function $_(t,e,n,r,s){if(e.length===0){const d={};if(r){for(const[p,g]of Object.entries(r))if(g.type==="agg"){const y=g;d[p]=B_(y)}}const m=()=>({__singleGroup:!0});if(t=t.pipe(M_(m,d)),t=t.pipe(_n(([,p])=>{const y={...p.__select_results||{}};if(r)for(const[x,S]of Object.entries(r))S.type==="agg"&&(y[x]=p[x]);return["single_group",{...p,__select_results:y}]})),n&&n.length>0)for(const p of n){const g=v_(p),y=ud(g,r||{}),x=Ln(y);t=t.pipe(Xs(([,S])=>{const E={result:S.__select_results};return ro(x(E))}))}if(s&&s.length>0)for(const p of s)t=t.pipe(Xs(([,g])=>{const y={result:g.__select_results};return ro(p(y))}));return t}const a=Kj(e,r),l=e.map(d=>Ln(d)),c=([,d])=>{const m={...d};delete m.__select_results;const p={};for(let g=0;g<e.length;g++){const y=l[g],x=y(m);p[`__key_${g}`]=x}return p},f={};if(r){for(const[d,m]of Object.entries(r))if(m.type==="agg"){const p=m;f[d]=B_(p)}}if(t=t.pipe(M_(c,f)),t=t.pipe(_n(([,d])=>{const m=d.__select_results||{},p={};if(r)for(const[y,x]of Object.entries(r))if(x.type!=="agg"){const S=a.selectToGroupByIndex.get(y);S!==void 0?p[y]=d[`__key_${S}`]:p[y]=m[y]}else p[y]=d[y];else for(let y=0;y<e.length;y++)p[`__key_${y}`]=d[`__key_${y}`];let g;if(e.length===1)g=d.__key_0;else{const y=[];for(let x=0;x<e.length;x++)y.push(d[`__key_${x}`]);g=JSON.stringify(y)}return[g,{...d,__select_results:p}]})),n&&n.length>0)for(const d of n){const m=v_(d),p=ud(m,r||{}),g=Ln(p);t=t.pipe(Xs(([,y])=>{const x={result:y.__select_results};return g(x)}))}if(s&&s.length>0)for(const d of s)t=t.pipe(Xs(([,m])=>{const p={result:m.__select_results};return ro(d(p))}));return t}function ld(t,e){if(!t||!e||t.type!==e.type)return!1;switch(t.type){case"ref":return!t.path||!e.path||t.path.length!==e.path.length?!1:t.path.every((n,r)=>n===e.path[r]);case"val":return t.value===e.value;case"func":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>ld(n,e.args[r]));case"agg":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>ld(n,e.args[r]));default:return!1}}function B_(t){const e=Ln(t.args[0]),n=([,a])=>{const l=e(a);return typeof l=="number"?l:l!=null?Number(l):0},r=([,a])=>{const l=e(a);return typeof l=="number"||l instanceof Date?l:l!=null?Number(l):0},s=([,a])=>e(a);switch(t.name.toLowerCase()){case"sum":return Bj(n);case"count":return Uj(s);case"avg":return qj(n);case"min":return Hj(r);case"max":return Vj(r);default:throw new Kz(t.name)}}function ud(t,e,n="result"){switch(t.type){case"agg":{const r=t;for(const[s,a]of Object.entries(e))if(a.type==="agg"&&Gj(r,a))return new En([n,s]);throw new Gz(r.name)}case"func":{const r=t,s=r.args.map(a=>ud(a,e));return new Sr(r.name,s)}case"ref":return t;case"val":return t;default:throw new Qz(t.type)}}function Gj(t,e){return t.name===e.name&&t.args.length===e.args.length&&t.args.every((n,r)=>ld(n,e.args[r]))}function Qj(t,e,n,r,s,a,l,c,f){const d=n.map(x=>{const S=ud(x.expression,r,"__select_results");return{compiledExpression:Ln(S),compareOptions:sy(x,s)}}),m=x=>{const S=x;return n.length>1?d.map(E=>E.compiledExpression(S)):n.length===1?d[0].compiledExpression(S):null},p=(x,S)=>{if(n.length>1){const E=x,_=S;for(let k=0;k<n.length;k++){const R=d[k],L=id(R.compareOptions)(E[k],_[k]);if(L!==0)return L}return E.length-_.length}if(n.length===1){const E=d[0];return id(E.compareOptions)(x,S)}return Jg(x,S)};let g,y;if(c){let x,S,E,_=t.from.alias;const k=n[0],R=k.expression;if(R.type==="ref"){const N=hu(t,R,s);if(N){S=N.collection;const L=N.path[0],A=sy(k,S);L&&qd(L,N.path,S,A,p),E=Ln(new En(N.path),!0),x=Ru(S,N.path,A),x?.supports("gt")||(x=void 0),_=R.path.length>1?String(R.path[0]):t.from.alias}}if(E){const L=n.every(P=>P.expression.type==="ref")?n.map(P=>{const M=P.expression,B=hu(t,M,s);return Ln(B?new En(B.path):P.expression,!0)}):void 0;y={alias:_,offset:f??0,limit:c,comparator:(P,M)=>{if(n.length===1){const B=P&&E(P),Q=M&&E(M);return p(B,Q)}if(L){const B=Q=>Q&&L.map(Z=>Z(Q));return p(B(P),B(M))}return 0},valueExtractorForRawRow:P=>{if(n.length===1)return E(P);if(L)return L.map(M=>M(P))},firstColumnValueExtractor:E,index:x,orderBy:n};const j=S?.id??s.id;a[j]=y,x&&(g=P=>{a[j].dataNeeded=()=>{const M=P();return Math.max(0,y.limit-M)}})}}return e.pipe(Aj(m,{limit:c,offset:f,comparator:p,setSizeCallback:g,setWindowFn:x=>{l(S=>{x(S),y&&(y.offset=S.offset??y.offset,y.limit=S.limit??y.limit)})}}))}function sy(t,e){return t.compareOptions.stringSort!==void 0?t.compareOptions:{...e.compareOptions,direction:t.compareOptions.direction,nulls:t.compareOptions.nulls}}function Zj(t,e={}){const n=r=>{const s=[];for(const[a,l]of t.entries())(r?.(l)??!0)&&s.push({type:"insert",key:a,value:l});return s};if(e.limit!==void 0&&!e.orderBy)throw new Error("limit cannot be used without orderBy");if(e.orderBy){const r=e.where?Zl(e.where):void 0,s=Jj(t,e.orderBy,e.limit,r,e.optimizedOnly);if(s===void 0)return;const a=[];for(const l of s){const c=t.get(l);c!==void 0&&a.push({type:"insert",key:l,value:c})}return a}if(!e.where)return n();try{const r=e.where,s=g4(r,t);if(s.canOptimize){const a=[];for(const l of s.matchingKeys){const c=t.get(l);c!==void 0&&a.push({type:"insert",key:l,value:c})}return a}else{if(e.optimizedOnly)return;const a=Zl(r);return n(a)}}catch(r){console.warn(`${t.id?`[${t.id}] `:""}Error processing where clause, falling back to full scan:`,r);const s=Zl(e.where);return e.optimizedOnly?void 0:n(s)}}function Zl(t){const e=x0(t);return n=>{try{const r=e(n);return ro(r)}catch{return!1}}}function Yj(t,e){const n=Zl(e.whereExpression);return r=>{const s=[];for(const a of r)if(a.type==="insert")n(a.value)&&s.push(a);else if(a.type==="update"){const l=n(a.value),c=a.previousValue?n(a.previousValue):!1;l&&c?s.push(a):l&&!c?s.push({...a,type:"insert"}):!l&&c&&s.push({...a,type:"delete",value:a.previousValue})}else n(a.value)&&s.push(a);(s.length>0||r.length===0)&&t(s)}}function Jj(t,e,n,r,s){if(e.length===1){const f=e[0],d=f.expression;if(d.type==="ref"){const p=d.path,g=sy(f,t);qd(p[0],p,t,g);const y=Ru(t,p,g);if(y&&y.supports("gt")){const x=S=>{const E=t.get(S);return E===void 0?!1:r?.(E)??!0};return y.take(n??y.keyCount,void 0,x)}}}if(s)return;const a=[];for(const[f,d]of t.entries())(r?.(d)??!0)&&a.push({key:f,value:d});const l=(f,d)=>{for(const m of e){const p=id(m.compareOptions),g=U_(f.value,m.expression),y=U_(d.value,m.expression),x=p(g,y);if(x!==0)return x}return 0};a.sort(l);const c=a.map(f=>f.key);return n!==void 0?c.slice(0,n):c}function U_(t,e){if(e.type==="ref"){const n=e;let r=t;for(const s of n.path)r=r?.[s];return r}else return e.type==="val"?e.value:x0(e)(t)}class q_{constructor(e){this.map=new Map,this.sortedKeys=[],this.comparator=e}indexOf(e,n){let r=0,s=this.sortedKeys.length;if(!this.comparator){for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],c=od(e,l);if(c<0)s=a;else if(c>0)r=a+1;else return a}return r}for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],c=this.map.get(l),f=this.comparator(n,c);if(f<0)s=a;else if(f>0)r=a+1;else{const d=od(e,l);if(d<0)s=a;else if(d>0)r=a+1;else return a}}return r}set(e,n){if(this.map.has(e)){const s=this.map.get(e),a=this.indexOf(e,s);this.sortedKeys.splice(a,1)}const r=this.indexOf(e,n);return this.sortedKeys.splice(r,0,e),this.map.set(e,n),this}get(e){return this.map.get(e)}delete(e){if(this.map.has(e)){const n=this.map.get(e),r=this.indexOf(e,n);return this.sortedKeys.splice(r,1),this.map.delete(e)}return!1}has(e){return this.map.has(e)}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}*[Symbol.iterator](){for(const e of this.sortedKeys)yield[e,this.map.get(e)]}entries(){return this[Symbol.iterator]()}keys(){return this.sortedKeys[Symbol.iterator]()}values(){return(function*(){for(const e of this.sortedKeys)yield this.map.get(e)}).call(this)}forEach(e){for(const n of this.sortedKeys)e(this.map.get(n),n,this.map)}}class Xj{constructor(e){this.pendingSyncedTransactions=[],this.syncedMetadata=new Map,this.optimisticUpserts=new Map,this.optimisticDeletes=new Set,this.size=0,this.syncedKeys=new Set,this.preSyncVisibleState=new Map,this.recentlySyncedKeys=new Set,this.hasReceivedFirstCommit=!1,this.isCommittingSyncTransactions=!1,this.commitPendingTransactions=()=>{let n=!1;for(const l of this.transactions.values())if(l.state==="persisting"){n=!0;break}const{committedSyncedTransactions:r,uncommittedSyncedTransactions:s,hasTruncateSync:a}=this.pendingSyncedTransactions.reduce((l,c)=>(c.committed?(l.committedSyncedTransactions.push(c),c.truncate===!0&&(l.hasTruncateSync=!0)):l.uncommittedSyncedTransactions.push(c),l),{committedSyncedTransactions:[],uncommittedSyncedTransactions:[],hasTruncateSync:!1});if(!n||a){this.isCommittingSyncTransactions=!0;const l=a?r.find(g=>g.truncate)?.optimisticSnapshot:null,c=new Set;for(const g of r)for(const y of g.operations)c.add(y.key);let f=this.preSyncVisibleState;if(f.size===0){f=new Map;for(const g of c){const y=this.get(g);y!==void 0&&f.set(g,y)}}const d=[],m=this.config.sync.rowUpdateMode||"partial";for(const g of r){if(g.truncate){const y=new Set([...this.syncedData.keys(),...l?.upserts.keys()||[]]);for(const x of y){if(l?.deletes.has(x))continue;const S=l?.upserts.get(x)||this.syncedData.get(x);S!==void 0&&d.push({type:"delete",key:x,value:S})}this.syncedData.clear(),this.syncedMetadata.clear(),this.syncedKeys.clear();for(const x of c)f.delete(x);this._events.emit("truncate",{type:"truncate",collection:this.collection})}for(const y of g.operations){const x=y.key;switch(this.syncedKeys.add(x),y.type){case"insert":this.syncedMetadata.set(x,y.metadata);break;case"update":this.syncedMetadata.set(x,Object.assign({},this.syncedMetadata.get(x),y.metadata));break;case"delete":this.syncedMetadata.delete(x);break}switch(y.type){case"insert":this.syncedData.set(x,y.value);break;case"update":{if(m==="partial"){const S=Object.assign({},this.syncedData.get(x),y.value);this.syncedData.set(x,S)}else this.syncedData.set(x,y.value);break}case"delete":this.syncedData.delete(x);break}}}if(a){const g=new Set;for(const S of r)for(const E of S.operations)(E.type==="insert"||E.type==="update")&&g.add(E.key);const y=new Map(l.upserts),x=new Set(l.deletes);for(const[S,E]of y)if(!x.has(S))if(g.has(S)){let _=!1;for(let k=d.length-1;k>=0;k--){const R=d[k];if(R.key===S&&R.type==="insert"){R.value=E,_=!0;break}}_||d.push({type:"insert",key:S,value:E})}else d.push({type:"insert",key:S,value:E});if(d.length>0&&x.size>0){const S=[];for(const E of d)E.type==="insert"&&x.has(E.key)||S.push(E);d.length=0,d.push(...S)}this.lifecycle.status!=="ready"&&this.lifecycle.markReady()}if(this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.isCommittingSyncTransactions=!1,a&&l){for(const[g,y]of l.upserts)this.optimisticUpserts.set(g,y);for(const g of l.deletes)this.optimisticDeletes.add(g)}for(const g of this.transactions.values())if(!["completed","failed"].includes(g.state)){for(const y of g.mutations)if(this.isThisCollection(y.collection)&&y.optimistic)switch(y.type){case"insert":case"update":this.optimisticUpserts.set(y.key,y.modified),this.optimisticDeletes.delete(y.key);break;case"delete":this.optimisticUpserts.delete(y.key),this.optimisticDeletes.add(y.key);break}}const p=new Map;for(const g of this.transactions.values())if(g.state==="completed")for(const y of g.mutations)y.optimistic&&this.isThisCollection(y.collection)&&c.has(y.key)&&p.set(y.key,{type:y.type,value:y.modified});for(const g of c){const y=f.get(g),x=this.get(g),S=p.get(g);let E=!1;S&&(S.type==="delete"&&y!==void 0&&x===void 0&&Tr(S.value,y)||x!==void 0&&Tr(S.value,x))&&(E=!0),E||(y===void 0&&x!==void 0?d.push({type:"insert",key:g,value:x}):y!==void 0&&x===void 0?d.push({type:"delete",key:g,value:y}):y!==void 0&&x!==void 0&&!Tr(y,x)&&d.push({type:"update",key:g,value:x,previousValue:y}))}this.size=this.calculateSize(),d.length>0&&this.indexes.updateIndexes(d),this.changes.emitEvents(d,!0),this.pendingSyncedTransactions=s,this.preSyncVisibleState.clear(),Promise.resolve().then(()=>{this.recentlySyncedKeys.clear()}),this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0)}},this.config=e,this.transactions=new q_((n,r)=>n.compareCreatedAt(r)),this.syncedData=new q_(e.compare)}setDeps(e){this.collection=e.collection,this.lifecycle=e.lifecycle,this.changes=e.changes,this.indexes=e.indexes,this._events=e.events}get(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;if(!n.has(e))return r.has(e)?r.get(e):s.get(e)}has(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;return n.has(e)?!1:r.has(e)?!0:s.has(e)}*keys(){const{syncedData:e,optimisticDeletes:n,optimisticUpserts:r}=this;for(const s of e.keys())n.has(s)||(yield s);for(const s of r.keys())!e.has(s)&&!n.has(s)&&(yield s)}*values(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield n)}}*entries(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield[e,n])}}*[Symbol.iterator](){for(const[e,n]of this.entries())yield[e,n]}forEach(e){let n=0;for(const[r,s]of this.entries())e(s,r,n++)}map(e){const n=[];let r=0;for(const[s,a]of this.entries())n.push(e(a,s,r++));return n}isThisCollection(e){return e===this.collection}recomputeOptimisticState(e=!1){if(this.isCommittingSyncTransactions&&!e)return;const n=new Map(this.optimisticUpserts),r=new Set(this.optimisticDeletes);this.optimisticUpserts.clear(),this.optimisticDeletes.clear();const s=[];for(const c of this.transactions.values())["completed","failed"].includes(c.state)||s.push(c);for(const c of s)for(const f of c.mutations)if(this.isThisCollection(f.collection)&&f.optimistic)switch(f.type){case"insert":case"update":this.optimisticUpserts.set(f.key,f.modified),this.optimisticDeletes.delete(f.key);break;case"delete":this.optimisticUpserts.delete(f.key),this.optimisticDeletes.add(f.key);break}this.size=this.calculateSize();const a=[];this.collectOptimisticChanges(n,r,a);const l=a.filter(c=>!!(!this.recentlySyncedKeys.has(c.key)||e));if(this.pendingSyncedTransactions.length>0&&!e){const c=new Set;for(const d of this.pendingSyncedTransactions)for(const m of d.operations)c.add(m.key);const f=l.filter(d=>!(d.type==="delete"&&c.has(d.key)&&!s.some(p=>p.mutations.some(g=>this.isThisCollection(g.collection)&&g.key===d.key))));f.length>0&&this.indexes.updateIndexes(f),this.changes.emitEvents(f,e)}else l.length>0&&this.indexes.updateIndexes(l),this.changes.emitEvents(l,e)}calculateSize(){const e=this.syncedData.size,n=Array.from(this.optimisticDeletes).filter(s=>this.syncedData.has(s)&&!this.optimisticUpserts.has(s)).length,r=Array.from(this.optimisticUpserts.keys()).filter(s=>!this.syncedData.has(s)).length;return e-n+r}collectOptimisticChanges(e,n,r){const s=new Set([...e.keys(),...this.optimisticUpserts.keys(),...n,...this.optimisticDeletes]);for(const a of s){const l=this.get(a),c=this.getPreviousValue(a,e,n);c!==void 0&&l===void 0?r.push({type:"delete",key:a,value:c}):c===void 0&&l!==void 0?r.push({type:"insert",key:a,value:l}):c!==void 0&&l!==void 0&&c!==l&&r.push({type:"update",key:a,value:l,previousValue:c})}}getPreviousValue(e,n,r){if(!r.has(e))return n.has(e)?n.get(e):this.syncedData.get(e)}scheduleTransactionCleanup(e){if(e.state==="completed"){this.transactions.delete(e.id);return}e.isPersisted.promise.then(()=>{this.transactions.delete(e.id)}).catch(()=>{})}capturePreSyncVisibleState(){if(this.pendingSyncedTransactions.length===0)return;const e=new Set;for(const n of this.pendingSyncedTransactions)for(const r of n.operations)e.add(r.key);for(const n of e)this.recentlySyncedKeys.add(n);for(const n of e)if(!this.preSyncVisibleState.has(n)){const r=this.get(n);r!==void 0&&this.preSyncVisibleState.set(n,r)}}onTransactionStateChange(){this.changes.shouldBatchEvents=this.pendingSyncedTransactions.length>0,this.capturePreSyncVisibleState(),this.recomputeOptimisticState(!1)}cleanup(){this.syncedData.clear(),this.syncedMetadata.clear(),this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.size=0,this.pendingSyncedTransactions=[],this.syncedKeys.clear(),this.hasReceivedFirstCommit=!1}}class ZE{constructor(){this.listeners=new Map}on(e,n){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n),()=>{this.listeners.get(e)?.delete(n)}}once(e,n){const r=this.on(e,s=>{n(s),r()});return r}off(e,n){this.listeners.get(e)?.delete(n)}waitFor(e,n){return new Promise((r,s)=>{let a;const l=this.on(e,c=>{a&&(clearTimeout(a),a=void 0),r(c),l()});n&&(a=setTimeout(()=>{a=void 0,l(),s(new Error(`Timeout waiting for event ${String(e)}`))},n))})}emitInner(e,n){this.listeners.get(e)?.forEach(r=>{try{r(n)}catch(s){queueMicrotask(()=>{throw s})}})}clearListeners(){this.listeners.clear()}}function Wj(t,e){if(e.length===0||t.length===0)return;if(t.length===1){const{expression:r,compareOptions:s}=t[0];return(s.direction==="asc"?F_:ty)(r,new jn(e[0]))}const n=[];for(let r=0;r<t.length&&r<e.length;r++){const s=t[r],a=e[r],l=[];for(let d=0;d<r;d++){const m=t[d],p=e[d];l.push(ey(m.expression,new jn(p)))}const f=(s.compareOptions.direction==="asc"?F_:ty)(s.expression,new jn(a));if(l.length===0)n.push(f);else{const d=[...l,f];n.push(d.reduce((m,p)=>ny(m,p)))}}return n.length===1?n[0]:n.reduce((r,s)=>jj(r,s))}class eL extends ZE{constructor(e,n,r){super(),this.collection=e,this.callback=n,this.options=r,this.loadedInitialState=!1,this.skipFiltering=!1,this.snapshotSent=!1,this.loadedSubsets=[],this.sentKeys=new Set,this.limitedSnapshotRowCount=0,this._status="ready",this.pendingLoadSubsetPromises=new Set,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches=new Set,r.onUnsubscribe&&this.on("unsubscribed",a=>r.onUnsubscribe(a)),r.whereExpression&&Fj(r.whereExpression,this.collection);const s=a=>{n(a),this.trackSentKeys(a)};this.callback=s,this.filteredCallback=r.whereExpression?Yj(this.callback,r):this.callback,this.truncateCleanup=this.collection.on("truncate",()=>{this.handleTruncate()})}get status(){return this._status}handleTruncate(){const e=[...this.loadedSubsets],n=this.collection._sync.syncLoadSubsetFn!==null;if(e.length===0||!n){this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[];return}this.isBufferingForTruncate=!0,this.truncateBuffer=[],this.pendingTruncateRefetches.clear(),this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[],queueMicrotask(()=>{if(this.isBufferingForTruncate){for(const r of e){const s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),this.trackLoadSubsetPromise(s),s instanceof Promise&&(this.pendingTruncateRefetches.add(s),s.catch(()=>{}).finally(()=>{this.pendingTruncateRefetches.delete(s),this.checkTruncateRefetchComplete()}))}this.pendingTruncateRefetches.size===0&&this.flushTruncateBuffer()}})}checkTruncateRefetchComplete(){this.pendingTruncateRefetches.size===0&&this.isBufferingForTruncate&&this.flushTruncateBuffer()}flushTruncateBuffer(){this.isBufferingForTruncate=!1;const e=this.truncateBuffer.flat();e.length>0&&this.filteredCallback(e),this.truncateBuffer=[]}setOrderByIndex(e){this.orderByIndex=e}setStatus(e){if(this._status===e)return;const n=this._status;this._status=e,this.emitInner("status:change",{type:"status:change",subscription:this,previousStatus:n,status:e});const r=`status:${e}`;this.emitInner(r,{type:r,subscription:this,previousStatus:n,status:e})}trackLoadSubsetPromise(e){e instanceof Promise&&(this.pendingLoadSubsetPromises.add(e),this.setStatus("loadingSubset"),e.finally(()=>{this.pendingLoadSubsetPromises.delete(e),this.pendingLoadSubsetPromises.size===0&&this.setStatus("ready")}))}hasLoadedInitialState(){return this.loadedInitialState}hasSentAtLeastOneSnapshot(){return this.snapshotSent}emitEvents(e){const n=this.filterAndFlipChanges(e);this.isBufferingForTruncate?n.length>0&&this.truncateBuffer.push(n):this.filteredCallback(n)}requestSnapshot(e){if(this.loadedInitialState)return!1;const n={where:this.options.whereExpression,optimizedOnly:e?.optimizedOnly??!1};if(e){if("where"in e){const f=e.where;if(n.where){const d=n.where,m=ny(d,f);n.where=m}else n.where=f}}else this.loadedInitialState=!0;const r={where:n.where,subscription:this,orderBy:e?.orderBy,limit:e?.limit},s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),(e?.trackLoadSubsetPromise??!0)&&this.trackLoadSubsetPromise(s);const l=this.collection.currentStateAsChanges(n);if(l===void 0)return!1;const c=l.filter(f=>!this.sentKeys.has(f.key));for(const f of c)this.sentKeys.add(f.key);return this.snapshotSent=!0,this.callback(c),!0}requestLimitedSnapshot({orderBy:e,limit:n,minValues:r,offset:s}){if(!n)throw new Error("limit is required");if(!this.orderByIndex)throw new Error("Ordered snapshot was requested but no index was found. You have to call setOrderByIndex before requesting an ordered snapshot.");const l=r?.[0],c=this.orderByIndex,f=this.options.whereExpression,d=f?Zl(f):void 0,m=A=>{if(this.sentKeys.has(A))return!1;const I=this.collection.get(A);return I===void 0?!1:d?.(I)??!0};let p=l;const g=[];let y=[];if(l!==void 0){const{expression:A}=e[0],I=this.collection.currentStateAsChanges({where:ey(A,new jn(l))});if(I){const j=I.map(M=>M.key).filter(M=>!this.sentKeys.has(M)&&m(M));y.push(...j);const P=c.take(n-y.length,l,m);y.push(...P)}else y=c.take(n,l,m)}else y=c.take(n,l,m);const x=()=>Math.max(n-g.length,0),S=()=>y.length===0,E=e[0].expression,_=E.type==="ref"?Ln(new En(E.path),!0):null;for(;x()>0&&!S();){const A=new Set;for(const I of y){const j=this.collection.get(I);g.push({type:"insert",key:I,value:j}),p=_?_(j):j,A.add(I)}y=c.take(x(),p,m)}const k=this.limitedSnapshotRowCount;for(const A of g)this.sentKeys.add(A.key);this.callback(g),this.limitedSnapshotRowCount+=g.length,g.length>0&&(this.lastSentKey=g[g.length-1].key);let R;if(r!==void 0&&r.length>0){const A=Wj(e,r);if(A){const{expression:I}=e[0],j=r[0];let P;if(j instanceof Date){const M=new Date(j.getTime()+1);P=ny(zj(I,new jn(j)),ty(I,new jn(M)))}else P=ey(I,new jn(j));R={whereFrom:A,whereCurrent:P,lastKey:this.lastSentKey}}}const N={where:f,limit:n,orderBy:e,cursor:R,offset:s??k,subscription:this},L=this.collection._sync.loadSubset(N);this.loadedSubsets.push(N),this.trackLoadSubsetPromise(L)}filterAndFlipChanges(e){if(this.loadedInitialState||this.skipFiltering)return e;const n=this.isBufferingForTruncate,r=[];for(const s of e){let a=s;if(this.sentKeys.has(s.key)){if(s.type==="insert")continue;s.type==="delete"&&this.sentKeys.delete(s.key)}else{if(s.type==="update")a={...s,type:"insert",previousValue:void 0};else if(s.type==="delete"&&!n)continue;this.sentKeys.add(s.key)}r.push(a)}return r}trackSentKeys(e){if(!(this.loadedInitialState||this.skipFiltering))for(const n of e)n.type==="delete"?this.sentKeys.delete(n.key):this.sentKeys.add(n.key)}markAllStateAsSeen(){this.skipFiltering=!0}unsubscribe(){this.truncateCleanup?.(),this.truncateCleanup=void 0,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches.clear();for(const e of this.loadedSubsets)this.collection._sync.unloadSubset(e);this.loadedSubsets=[],this.emitInner("unsubscribed",{type:"unsubscribed",subscription:this}),this.clearListeners()}}class tL{constructor(){this.activeSubscribersCount=0,this.changeSubscriptions=new Set,this.batchedEvents=[],this.shouldBatchEvents=!1}setDeps(e){this.lifecycle=e.lifecycle,this.sync=e.sync,this.events=e.events,this.collection=e.collection}emitEmptyReadyEvent(){for(const e of this.changeSubscriptions)e.emitEvents([])}emitEvents(e,n=!1){if(this.shouldBatchEvents&&!n){this.batchedEvents.push(...e);return}let r=e;if(n&&(this.batchedEvents.length>0&&(r=[...this.batchedEvents,...e]),this.batchedEvents=[],this.shouldBatchEvents=!1),r.length!==0)for(const s of this.changeSubscriptions)s.emitEvents(r)}subscribeChanges(e,n={}){this.addSubscriber();const r=new eL(this.collection,e,{...n,onUnsubscribe:()=>{this.removeSubscriber(),this.changeSubscriptions.delete(r)}});return n.includeInitialState?r.requestSnapshot({trackLoadSubsetPromise:!1}):n.includeInitialState===!1&&r.markAllStateAsSeen(),this.changeSubscriptions.add(r),r}addSubscriber(){const e=this.activeSubscribersCount;this.activeSubscribersCount++,this.lifecycle.cancelGCTimer(),(this.lifecycle.status==="cleaned-up"||this.lifecycle.status==="idle")&&this.sync.startSync(),this.events.emitSubscribersChange(this.activeSubscribersCount,e)}removeSubscriber(){const e=this.activeSubscribersCount;if(this.activeSubscribersCount--,this.activeSubscribersCount===0)this.lifecycle.startGCTimer();else if(this.activeSubscribersCount<0)throw new iz;this.events.emitSubscribersChange(this.activeSubscribersCount,e)}cleanup(){this.batchedEvents=[],this.shouldBatchEvents=!1}}const nL=t=>setTimeout(()=>{t({didTimeout:!0,timeRemaining:()=>50})},0),rL=t=>{clearTimeout(t)},sL=typeof window<"u"&&"requestIdleCallback"in window?(t,e)=>window.requestIdleCallback(t,e):(t,e)=>nL(t),Wm=typeof window<"u"&&"cancelIdleCallback"in window?t=>window.cancelIdleCallback(t):rL;class iL{constructor(e,n){this.status="idle",this.hasBeenReady=!1,this.hasReceivedFirstCommit=!1,this.onFirstReadyCallbacks=[],this.gcTimeoutId=null,this.idleCallbackId=null,this.config=e,this.id=n}setDeps(e){this.indexes=e.indexes,this.events=e.events,this.changes=e.changes,this.sync=e.sync,this.state=e.state}validateStatusTransition(e,n){if(e===n)return;if(!{idle:["loading","error","cleaned-up"],loading:["ready","error","cleaned-up"],ready:["cleaned-up","error"],error:["cleaned-up","idle"],"cleaned-up":["loading","error"]}[e].includes(n))throw new rz(e,n,this.id)}setStatus(e,n=!1){if(e==="ready"&&!n)throw new ku(`You can't directly call "setStatus('ready'). You must use markReady instead.`);this.validateStatusTransition(this.status,e);const r=this.status;this.status=e,e==="ready"&&!this.indexes.isIndexesResolved&&this.indexes.resolveAllIndexes().catch(s=>{console.warn(`${this.config.id?`[${this.config.id}] `:""}Failed to resolve indexes:`,s)}),this.events.emitStatusChange(e,r)}validateCollectionUsable(e){switch(this.status){case"error":throw new nz(e,this.id);case"cleaned-up":this.sync.startSync();break}}markReady(){if(this.validateStatusTransition(this.status,"ready"),this.status==="loading"){if(this.setStatus("ready",!0),!this.hasBeenReady){this.hasBeenReady=!0,this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0);const e=[...this.onFirstReadyCallbacks];this.onFirstReadyCallbacks=[],e.forEach(n=>n())}this.changes.changeSubscriptions.size>0&&this.changes.emitEmptyReadyEvent()}}startGCTimer(){this.gcTimeoutId&&clearTimeout(this.gcTimeoutId);const e=this.config.gcTime??3e5;e!==0&&(this.gcTimeoutId=setTimeout(()=>{this.changes.activeSubscribersCount===0&&this.scheduleIdleCleanup()},e))}cancelGCTimer(){this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.idleCallbackId!==null&&(Wm(this.idleCallbackId),this.idleCallbackId=null)}scheduleIdleCleanup(){this.idleCallbackId!==null&&Wm(this.idleCallbackId),this.idleCallbackId=sL(e=>{this.changes.activeSubscribersCount===0?this.performCleanup(e)&&(this.idleCallbackId=null):this.idleCallbackId=null},{timeout:1e3})}performCleanup(e){return!e||e.timeRemaining()>0||e.didTimeout?(this.sync.cleanup(),this.state.cleanup(),this.changes.cleanup(),this.indexes.cleanup(),this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.hasBeenReady=!1,this.onFirstReadyCallbacks=[],this.setStatus("cleaned-up"),this.events.cleanup(),!0):(this.scheduleIdleCleanup(),!1)}onFirstReady(e){if(this.hasBeenReady){e();return}this.onFirstReadyCallbacks.push(e)}cleanup(){this.idleCallbackId!==null&&(Wm(this.idleCallbackId),this.idleCallbackId=null),this.performCleanup()}}const k0=Symbol("liveQueryInternal");class aL{constructor(e,n){this.preloadPromise=null,this.syncCleanupFn=null,this.syncLoadSubsetFn=null,this.syncUnloadSubsetFn=null,this.pendingLoadSubsetPromises=new Set,this.config=e,this.id=n,this.syncMode=e.syncMode??"eager"}setDeps(e){this.collection=e.collection,this.state=e.state,this.lifecycle=e.lifecycle,this._events=e.events}startSync(){if(!(this.lifecycle.status!=="idle"&&this.lifecycle.status!=="cleaned-up")){this.lifecycle.setStatus("loading");try{const e=oL(this.config.sync.sync({collection:this.collection,begin:()=>{this.state.pendingSyncedTransactions.push({committed:!1,operations:[],deletedKeys:new Set})},write:n=>{const r=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!r)throw new w_;if(r.committed)throw new __;let s;"key"in n?s=n.key:s=this.config.getKey(n.value);let a=n.type;if(n.type==="insert"){const c=this.state.syncedData.has(s),f=r.deletedKeys.has(s),d=r.truncate===!0;if(c&&!f&&!d){const m=this.state.syncedData.get(s);if(m!==void 0&&Tr(m,n.value))a="update";else{const g=this.config.utils[k0];throw new uz(s,this.id,{hasCustomGetKey:g?.hasCustomGetKey??!1,hasJoins:g?.hasJoins??!1})}}}const l={...n,type:a,key:s};r.operations.push(l),a==="delete"&&r.deletedKeys.add(s)},commit:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new _z;if(n.committed)throw new Cz;n.committed=!0,this.state.commitPendingTransactions()},markReady:()=>{this.lifecycle.markReady()},truncate:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new w_;if(n.committed)throw new __;n.operations=[],n.deletedKeys.clear(),n.truncate=!0,n.optimisticSnapshot={upserts:new Map(this.state.optimisticUpserts),deletes:new Set(this.state.optimisticDeletes)}}}));if(this.syncCleanupFn=e?.cleanup??null,this.syncLoadSubsetFn=e?.loadSubset??null,this.syncUnloadSubsetFn=e?.unloadSubset??null,this.syncMode==="on-demand"&&!this.syncLoadSubsetFn)throw new Eu(`Collection "${this.id}" is configured with syncMode "on-demand" but the sync function did not return a loadSubset handler. Either provide a loadSubset handler or use syncMode "eager".`)}catch(e){throw this.lifecycle.setStatus("error"),e}}}preload(){return this.preloadPromise?this.preloadPromise:(this.syncMode==="on-demand"&&console.warn(`${this.id?`[${this.id}] `:""}Calling .preload() on a collection with syncMode "on-demand" is a no-op. In on-demand mode, data is only loaded when queries request it. Instead, create a live query and call .preload() on that to load the specific data you need. See https://tanstack.com/blog/tanstack-db-0.5-query-driven-sync for more details.`),this.preloadPromise=new Promise((e,n)=>{if(this.lifecycle.status==="ready"){e();return}if(this.lifecycle.status==="error"){n(new sz);return}if(this.lifecycle.onFirstReady(()=>{e()}),this.lifecycle.status==="idle"||this.lifecycle.status==="cleaned-up")try{this.startSync()}catch(r){n(r);return}}),this.preloadPromise)}get isLoadingSubset(){return this.pendingLoadSubsetPromises.size>0}trackLoadPromise(e){const n=!this.isLoadingSubset;this.pendingLoadSubsetPromises.add(e),n&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!0,previousIsLoadingSubset:!1,loadingSubsetTransition:"start"}),e.finally(()=>{const r=this.pendingLoadSubsetPromises.size===1&&this.pendingLoadSubsetPromises.has(e);this.pendingLoadSubsetPromises.delete(e),r&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!1,previousIsLoadingSubset:!0,loadingSubsetTransition:"end"})})}loadSubset(e){if(this.syncMode==="eager")return!0;if(this.syncLoadSubsetFn){const n=this.syncLoadSubsetFn(e);if(n instanceof Promise)return this.trackLoadPromise(n),n}return!0}unloadSubset(e){this.syncUnloadSubsetFn&&this.syncUnloadSubsetFn(e)}cleanup(){try{this.syncCleanupFn&&(this.syncCleanupFn(),this.syncCleanupFn=null)}catch(e){queueMicrotask(()=>{if(e instanceof Error){const n=new E_(this.id,e);throw n.cause=e,n.stack=e.stack,n}else throw new E_(this.id,e)})}this.preloadPromise=null}}function oL(t){if(typeof t=="function")return{cleanup:t};if(typeof t=="object")return t}function YE(t){return typeof t=="function"&&t.prototype!==void 0&&t.prototype.constructor===t}async function lL(t){return YE(t)?t:await t()}class uL{constructor(e,n,r,s,a,l){this.id=e,this.expression=n,this.name=r,this.resolver=s,this.options=a,this.collectionEntries=l,this.indexPromise=null,this.resolvedIndex=null,YE(this.resolver)&&(this.resolvedIndex=new this.resolver(this.id,this.expression,this.name,this.options),this.collectionEntries&&this.resolvedIndex.build(this.collectionEntries))}async resolve(){return this.resolvedIndex?this.resolvedIndex:(this.indexPromise||(this.indexPromise=this.createIndex()),this.resolvedIndex=await this.indexPromise,this.resolvedIndex)}isResolved(){return this.resolvedIndex!==null}getResolved(){if(!this.resolvedIndex)throw new Error(`Index ${this.id} has not been resolved yet. Ensure collection is synced.`);return this.resolvedIndex}getId(){return this.id}getName(){return this.name}getExpression(){return this.expression}async createIndex(){const e=await lL(this.resolver);return new e(this.id,this.expression,this.name,this.options)}}class cL{constructor(e,n){this.indexId=e,this.lazyIndex=n}get index(){return this.lazyIndex.getResolved()}get isReady(){return this.lazyIndex.isResolved()}async whenReady(){return await this.lazyIndex.resolve()}get id(){return this.indexId}get name(){return this.isReady?this.index.name:this.lazyIndex.getName()}get expression(){return this.lazyIndex.getExpression()}supports(e){return this.index.supports(e)}getStats(){return this.index.getStats()}matchesField(e){const n=this.expression;return n.type==="ref"&&n.path.length===e.length&&n.path.every((r,s)=>r===e[s])}get keyCount(){return this.index.keyCount}get indexedKeysSet(){return this.index.indexedKeysSet}get orderedEntriesArray(){return this.index.orderedEntriesArray}get valueMapData(){return this.index.valueMapData}equalityLookup(e){return this.index.equalityLookup?.(e)??new Set}rangeQuery(e){return this.index.rangeQuery?.(e)??new Set}inArrayLookup(e){return this.index.inArrayLookup?.(e)??new Set}_getLazyWrapper(){return this.lazyIndex}}class fL{constructor(){this.lazyIndexes=new Map,this.resolvedIndexes=new Map,this.isIndexesResolved=!1,this.indexCounter=0}setDeps(e){this.state=e.state,this.lifecycle=e.lifecycle}createIndex(e,n={}){this.lifecycle.validateCollectionUsable("createIndex");const r=++this.indexCounter,s=Nj(),a=e(s),l=en(a),c=n.indexType??ry,f=new uL(r,l,n.name,c,n.options,this.state.entries());if(this.lazyIndexes.set(r,f),c===ry)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch(d){console.warn("Failed to resolve BTreeIndex:",d)}else if(typeof c=="function"&&c.prototype)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch{this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)})}else this.isIndexesResolved&&this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)});return new cL(r,f)}async resolveAllIndexes(){if(this.isIndexesResolved)return;const e=Array.from(this.lazyIndexes.entries()).map(async([n,r])=>{const s=await r.resolve();return s.build(this.state.entries()),this.resolvedIndexes.set(n,s),{indexId:n,resolvedIndex:s}});await Promise.all(e),this.isIndexesResolved=!0}async resolveSingleIndex(e,n){const r=await n.resolve();return r.build(this.state.entries()),this.resolvedIndexes.set(e,r),r}get indexes(){return this.resolvedIndexes}updateIndexes(e){for(const n of this.resolvedIndexes.values())for(const r of e)switch(r.type){case"insert":n.add(r.key,r.value);break;case"update":r.previousValue?n.update(r.key,r.previousValue,r.value):n.add(r.key,r.value);break;case"delete":n.remove(r.key,r.value);break}}cleanup(){this.lazyIndexes.clear(),this.resolvedIndexes.clear()}}var dL={};const hL=new Set(["find","findLast","findIndex","findLastIndex","filter","map","flatMap","forEach","some","every","reduce","reduceRight"]),pL=new Set(["pop","push","shift","unshift","splice","sort","reverse","fill","copyWithin"]),mL=new Set(["set","delete","clear","add"]),gL=new Set(["entries","keys","values","forEach"]);function R0(t){return t!==null&&typeof t=="object"&&!(t instanceof Date)&&!(t instanceof RegExp)&&!ad(t)}function yL(t,e,n,r){if(hL.has(t))return function(...s){const a=s[0];if(typeof a!="function")return e.apply(n.copy_,s);const l=(d,m)=>{if(R0(d)){const p={tracker:n,prop:String(m)},{proxy:g}=r(d,p);return g}return d},c=function(d,m,p){const g=l(d,m);return a.call(this,g,m,p)};if(t==="reduce"||t==="reduceRight"){const d=function(m,p,g,y){const x=l(p,g);return a.call(this,m,x,g,y)};return e.apply(n.copy_,[d,...s.slice(1)])}const f=e.apply(n.copy_,[c,...s.slice(1)]);if((t==="find"||t==="findLast")&&f&&typeof f=="object"){const d=n.copy_.indexOf(f);if(d!==-1)return l(f,d)}return t==="filter"&&Array.isArray(f)?f.map(d=>{const m=n.copy_.indexOf(d);return m!==-1?l(d,m):d}):f}}function vL(t,e){return function(){const n=t.copy_;let r=0;return{next(){if(r>=n.length)return{done:!0,value:void 0};const s=n[r];let a=s;if(R0(s)){const l={tracker:t,prop:String(r)},{proxy:c}=e(s,l);a=c}return r++,{done:!1,value:a}},[Symbol.iterator](){return this}}}}function H_(t,e,n){return function(...r){const s=t.apply(e.copy_,r);return n(e),s}}function bL(t,e,n,r,s,a,l){if(gL.has(t)||e===Symbol.iterator)return function(...f){const d=n.apply(s.copy_,f);if(t==="forEach"){const p=f[0];if(typeof p=="function"){const g=function(y,x,S){const E=p.call(this,y,x,S);return l(s),E};return n.apply(r,[g,...f.slice(1)])}}if(t==="entries"||t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator){const p=d,g=new Map;if(t==="values"&&r instanceof Map)for(const[x,S]of s.copy_.entries())g.set(S,x);const y=new Map;if(r instanceof Set)for(const x of s.copy_.values())y.set(x,x);return{next(){const x=p.next();if(!x.done&&x.value&&typeof x.value=="object"){if(t==="entries"&&Array.isArray(x.value)&&x.value.length===2){if(x.value[1]&&typeof x.value[1]=="object"){const S=x.value[0],E={tracker:s,prop:S,updateMap:k=>{s.copy_ instanceof Map&&s.copy_.set(S,k)}},{proxy:_}=a(x.value[1],E);x.value[1]=_}}else if(t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator)if(t==="values"&&r instanceof Map){const S=g.get(x.value);if(S!==void 0){const E={tracker:s,prop:S,updateMap:k=>{s.copy_ instanceof Map&&s.copy_.set(S,k)}},{proxy:_}=a(x.value,E);x.value=_}}else if(r instanceof Set){const S=x.value,E={tracker:s,prop:S,updateSet:k=>{s.copy_ instanceof Set&&(s.copy_.delete(S),s.copy_.add(k),y.set(S,k))}},{proxy:_}=a(x.value,E);x.value=_}else{const S=Symbol("iterator-value"),{proxy:E}=a(x.value,{tracker:s,prop:S});x.value=E}}return x},[Symbol.iterator](){return this}}}return d}}function tt(...t){const e=typeof window<"u"&&typeof localStorage<"u";e&&localStorage.getItem("DEBUG")==="true"?console.log("[proxy]",...t):!e&&typeof process<"u"&&dL.DEBUG==="true"&&console.log("[proxy]",...t)}function gs(t,e=new WeakMap){if(t==null||typeof t!="object")return t;if(e.has(t))return e.get(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t.source,t.flags);if(Array.isArray(t)){const s=[];return e.set(t,s),t.forEach((a,l)=>{s[l]=gs(a,e)}),s}if(ArrayBuffer.isView(t)&&!(t instanceof DataView)){const s=Object.getPrototypeOf(t).constructor,a=new s(t.length);e.set(t,a);for(let l=0;l<t.length;l++)a[l]=t[l];return a}if(t instanceof Map){const s=new Map;return e.set(t,s),t.forEach((a,l)=>{s.set(l,gs(a,e))}),s}if(t instanceof Set){const s=new Set;return e.set(t,s),t.forEach(a=>{s.add(gs(a,e))}),s}if(ad(t))return t;const n={};e.set(t,n);for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=gs(t[s],e));const r=Object.getOwnPropertySymbols(t);for(const s of r)n[s]=gs(t[s],e);return n}let V_=0;function xL(){return V_+=1,V_}function A0(t,e){const n=new Map;function r(p,g){if(tt("Object ID:",p.constructor.name),n.has(p))return n.get(p);{const y=A0(p,g);return n.set(p,y),y}}const s=new Map,a={copy_:gs(t),originalObject:gs(t),proxyCount:xL(),modified:!1,assigned_:{},parent:e,target:t};tt("createChangeProxy called for target",t,a.proxyCount);function l(p){p.modified||(p.modified=!0),p.parent&&(tt("propagating change to parent"),"updateMap"in p.parent?p.parent.updateMap(p.copy_):"updateSet"in p.parent?p.parent.updateSet(p.copy_):(p.parent.tracker.copy_[p.parent.prop]=p.copy_,p.parent.tracker.assigned_[p.parent.prop]=!0),l(p.parent.tracker))}function c(p){if(tt("checkIfReverted called with assigned keys:",Object.keys(p.assigned_)),Object.keys(p.assigned_).length===0&&Object.getOwnPropertySymbols(p.assigned_).length===0)return tt("No assigned properties, returning true"),!0;for(const y in p.assigned_)if(p.assigned_[y]===!0){const x=p.copy_[y],S=p.originalObject[y];if(tt(`Checking property ${String(y)}, current:`,x,"original:",S),!Tr(x,S))return tt(`Property ${String(y)} is different, returning false`),!1}else if(p.assigned_[y]===!1)return tt(`Property ${String(y)} was deleted, returning false`),!1;const g=Object.getOwnPropertySymbols(p.assigned_);for(const y of g)if(p.assigned_[y]===!0){const x=p.copy_[y],S=p.originalObject[y];if(!Tr(x,S))return tt("Symbol property is different, returning false"),!1}else if(p.assigned_[y]===!1)return tt("Symbol property was deleted, returning false"),!1;return tt("All properties match original values, returning true"),!0}function f(p,g){tt("checkParentStatus called for child prop:",g);const y=c(p);tt("Parent checkIfReverted returned:",y),y&&(tt("Parent is fully reverted, clearing tracking"),p.modified=!1,p.assigned_={},p.parent&&(tt("Continuing up the parent chain"),f(p.parent.tracker,p.parent.prop)))}function d(p){if(tt("createObjectProxy",p),s.has(p))return tt("proxyCache found match"),s.get(p);const g=new Proxy(p,{get(y,x){tt("get",y,x);const S=a.copy_[x]??a.originalObject[x],E=a.originalObject[x];if(tt("value (at top of proxy get)",S),Object.getOwnPropertyDescriptor(y,x)?.get)return S;if(typeof S=="function"){if(Array.isArray(y)){const k=x.toString();if(pL.has(k))return H_(S,a,l);const R=yL(k,S,a,r);if(R)return R;if(x===Symbol.iterator)return vL(a,r)}if(y instanceof Map||y instanceof Set){const k=x.toString();if(mL.has(k))return H_(S,a,l);const R=bL(k,x,S,y,a,r,l);if(R)return R}return S.bind(y)}if(R0(S)){const k={tracker:a,prop:String(x)},{proxy:R}=r(E,k);return s.set(S,R),R}return S},set(y,x,S){const E=a.copy_[x];if(tt(`set called for property ${String(x)}, current:`,E,"new:",S),Tr(E,S))tt("Value unchanged, not tracking");else{const _=a.originalObject[x],k=Tr(S,_);if(tt("value:",S,"original:",_,"isRevertToOriginal:",k),k){tt(`Reverting property ${String(x)} to original value`),delete a.assigned_[x.toString()],tt(`Updating copy with original value for ${String(x)}`),a.copy_[x]=gs(_),tt("Checking if all properties reverted");const R=c(a);tt("All reverted:",R),R?(tt("All properties reverted, clearing tracking"),a.modified=!1,a.assigned_={},e&&(tt("Updating parent for property:",e.prop),f(e.tracker,e.prop))):(tt("Some properties still changed, keeping modified flag"),a.modified=!0)}else tt(`Setting new value for property ${String(x)}`),a.copy_[x]=S,a.assigned_[x.toString()]=!0,tt("Marking object and ancestors as modified",a),l(a)}return!0},defineProperty(y,x,S){const E=Reflect.defineProperty(y,x,S);return E&&"value"in S&&(a.copy_[x]=gs(S.value),a.assigned_[x.toString()]=!0,l(a)),E},getOwnPropertyDescriptor(y,x){return Reflect.getOwnPropertyDescriptor(y,x)},preventExtensions(y){return Reflect.preventExtensions(y)},isExtensible(y){return Reflect.isExtensible(y)},deleteProperty(y,x){tt("deleteProperty",y,x);const S=typeof x=="symbol"?x.toString():x;if(S in y){const E=S in a.originalObject,_=Reflect.deleteProperty(y,x);return _&&(E?(a.assigned_[S]=!1,l(a)):(delete a.assigned_[S],Object.keys(a.assigned_).length===0&&Object.getOwnPropertySymbols(a.assigned_).length===0?a.modified=!1:a.modified=!0)),_}return!0}});return s.set(p,g),g}return{proxy:d(a.copy_),getChanges:()=>{if(tt("getChanges called, modified:",a.modified),tt(a),!a.modified)return tt("Object not modified, returning empty object"),{};if(typeof a.copy_!="object"||Array.isArray(a.copy_)||Object.keys(a.assigned_).length===0)return a.copy_;const p={};for(const g in a.copy_)a.assigned_[g]===!0&&g in a.copy_&&(p[g]=a.copy_[g]);return tt("Returning copy:",p),p}}}function SL(t){const e=t.map(n=>A0(n));return{proxies:e.map(n=>n.proxy),getChanges:()=>e.map(n=>n.getChanges())}}function wL(t,e){const{proxy:n,getChanges:r}=A0(t);return e(n),r()}function _L(t,e){const{proxies:n,getChanges:r}=SL(t);return e(n),r()}function CL(){let t,e,n=!0;return{promise:new Promise((s,a)=>{t=l=>{n=!1,s(l)},e=l=>{n=!1,a(l)}}),resolve:t,reject:e,isPending:()=>n}}function EL(t){return typeof t=="object"&&t!==null&&typeof t.hasPendingGraphRun=="function"}class kL{constructor(){this.contexts=new Map,this.clearListeners=new Set}getOrCreateContext(e){let n=this.contexts.get(e);return n||(n={queue:[],jobs:new Map,dependencies:new Map,completed:new Set},this.contexts.set(e,n)),n}schedule({contextId:e,jobId:n,dependencies:r,run:s}){if(typeof e>"u"){s();return}const a=this.getOrCreateContext(e);if(a.jobs.has(n)||a.queue.push(n),a.jobs.set(n,s),r){const l=new Set(r);l.delete(n),a.dependencies.set(n,l)}else a.dependencies.has(n)||a.dependencies.set(n,new Set);a.completed.delete(n)}flush(e){const n=this.contexts.get(e);if(!n)return;const{queue:r,jobs:s,dependencies:a,completed:l}=n;for(;r.length>0;){let c=!1;const f=r.length;for(let d=0;d<f;d++){const m=r.shift(),p=s.get(m);if(!p){a.delete(m),l.delete(m);continue}const g=a.get(m);let y=!g;if(g){y=!0;for(const x of g){if(x===m)continue;const S=EL(x)&&x.hasPendingGraphRun(e);if(s.has(x)&&!l.has(x)||!s.has(x)&&S){y=!1;break}}}y?(s.delete(m),a.delete(m),p(),l.add(m),c=!0):r.push(m)}if(!c)throw new Error(`Scheduler detected unresolved dependencies for context ${String(e)}.`)}this.contexts.delete(e)}flushAll(){for(const e of Array.from(this.contexts.keys()))this.flush(e)}clear(e){this.contexts.delete(e),this.clearListeners.forEach(n=>n(e))}onClear(e){return this.clearListeners.add(e),()=>this.clearListeners.delete(e)}hasPendingJobs(e){const n=this.contexts.get(e);return!!n&&n.jobs.size>0}clearJob(e,n){const r=this.contexts.get(e);r&&(r.jobs.delete(n),r.dependencies.delete(n),r.completed.delete(n),r.queue=r.queue.filter(s=>s!==n),r.jobs.size===0&&this.contexts.delete(e))}}const cd=new kL,fd=[];let gu=[],RL=0;function AL(t,e){switch(`${t.type}-${e.type}`){case"insert-update":return{...t,type:"insert",original:{},modified:e.modified,changes:{...t.changes,...e.changes},key:t.key,globalKey:t.globalKey,metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata},mutationId:e.mutationId,updatedAt:e.updatedAt};case"insert-delete":return null;case"update-delete":return e;case"update-update":return{...e,original:t.original,changes:{...t.changes,...e.changes},metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata}};case"delete-delete":case"insert-insert":return e;default:{const n=`${t.type}-${e.type}`;throw new Error(`Unhandled mutation combination: ${n}`)}}}function lf(t){const e=new IL(t);return fd.push(e),e}function jf(){if(gu.length>0)return gu.slice(-1)[0]}function TL(t){cd.clear(t.id),gu.push(t)}function OL(t){try{cd.flush(t.id)}finally{gu=gu.filter(e=>e.id!==t.id)}}function ML(t){const e=fd.findIndex(n=>n.id===t.id);e!==-1&&fd.splice(e,1)}class IL{constructor(e){if(typeof e.mutationFn>"u")throw new bz;this.id=e.id??crypto.randomUUID(),this.mutationFn=e.mutationFn,this.state="pending",this.mutations=[],this.isPersisted=CL(),this.autoCommit=e.autoCommit??!0,this.createdAt=new Date,this.sequenceNumber=RL++,this.metadata=e.metadata??{}}setState(e){this.state=e,(e==="completed"||e==="failed")&&ML(this)}mutate(e){if(this.state!=="pending")throw new xz;TL(this);try{e()}finally{OL(this)}return this.autoCommit&&this.commit().catch(()=>{}),this}applyMutations(e){for(const n of e){const r=this.mutations.findIndex(s=>s.globalKey===n.globalKey);if(r>=0){const s=this.mutations[r],a=AL(s,n);a===null?this.mutations.splice(r,1):this.mutations[r]=a}else this.mutations.push(n)}}rollback(e){const n=e?.isSecondaryRollback??!1;if(this.state==="completed")throw new Sz;if(this.setState("failed"),!n){const r=new Set;this.mutations.forEach(s=>r.add(s.globalKey));for(const s of fd)s.state==="pending"&&s.mutations.some(a=>r.has(a.globalKey))&&s.rollback({isSecondaryRollback:!0})}return this.isPersisted.reject(this.error?.error),this.touchCollection(),this}touchCollection(){const e=new Set;for(const n of this.mutations)e.has(n.collection.id)||(n.collection._state.onTransactionStateChange(),n.collection._state.pendingSyncedTransactions.length>0&&n.collection._state.commitPendingTransactions(),e.add(n.collection.id))}async commit(){if(this.state!=="pending")throw new wz;if(this.setState("persisting"),this.mutations.length===0)return this.setState("completed"),this.isPersisted.resolve(this),this;try{await this.mutationFn({transaction:this}),this.setState("completed"),this.touchCollection(),this.isPersisted.resolve(this)}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.error={message:n.message,error:n},this.rollback(),n}return this}compareCreatedAt(e){const n=this.createdAt.getTime()-e.createdAt.getTime();return n!==0?n:this.sequenceNumber-e.sequenceNumber}}class NL{constructor(e,n){this.insert=(r,s)=>{this.lifecycle.validateCollectionUsable("insert");const a=this.state,l=jf();if(!l&&!this.config.onInsert)throw new gz;const c=Array.isArray(r)?r:[r],f=[],d=new Set;if(c.forEach(m=>{const p=this.validateData(m,"insert"),g=this.config.getKey(p);if(this.state.has(g)||d.has(g))throw new lz(g);d.add(g);const y=this.generateGlobalKey(g,m),x={mutationId:crypto.randomUUID(),original:{},modified:p,changes:Object.fromEntries(Object.keys(m).map(S=>[S,p[S]])),globalKey:y,key:g,metadata:s?.metadata,syncMetadata:this.config.sync.getSyncMetadata?.()||{},optimistic:s?.optimistic??!0,type:"insert",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(x)}),l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;{const m=lf({mutationFn:async p=>await this.config.onInsert({transaction:p.transaction,collection:this.collection})});return m.applyMutations(f),m.commit().catch(()=>{}),a.transactions.set(m.id,m),a.scheduleTransactionCleanup(m),a.recomputeOptimisticState(!0),m}},this.delete=(r,s)=>{const a=this.state;this.lifecycle.validateCollectionUsable("delete");const l=jf();if(!l&&!this.config.onDelete)throw new vz;if(Array.isArray(r)&&r.length===0)throw new pz;const c=Array.isArray(r)?r:[r],f=[];for(const m of c){if(!this.state.has(m))throw new mz(m);const p=this.generateGlobalKey(m,this.state.get(m)),g={mutationId:crypto.randomUUID(),original:this.state.get(m),modified:this.state.get(m),changes:this.state.get(m),globalKey:p,key:m,metadata:s?.metadata,syncMetadata:a.syncedMetadata.get(m)||{},optimistic:s?.optimistic??!0,type:"delete",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(g)}if(l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;const d=lf({autoCommit:!0,mutationFn:async m=>this.config.onDelete({transaction:m.transaction,collection:this.collection})});return d.applyMutations(f),d.commit().catch(()=>{}),a.transactions.set(d.id,d),a.scheduleTransactionCleanup(d),a.recomputeOptimisticState(!0),d},this.id=n,this.config=e}setDeps(e){this.lifecycle=e.lifecycle,this.state=e.state,this.collection=e.collection}ensureStandardSchema(e){if(e&&"~standard"in e)return e;throw new tz}validateData(e,n,r){if(!this.config.schema)return e;const s=this.ensureStandardSchema(this.config.schema);if(n==="update"&&r){const l=this.state.get(r);if(l&&e&&typeof e=="object"&&typeof l=="object"){const c=Object.assign({},l,e),f=s["~standard"].validate(c);if(f instanceof Promise)throw new S_;if("issues"in f&&f.issues){const g=f.issues.map(y=>({message:y.message,path:y.path?.map(x=>String(x))}));throw new x_(n,g)}const d=f.value,m=Object.keys(e);return Object.fromEntries(m.map(g=>[g,d[g]]))}}const a=s["~standard"].validate(e);if(a instanceof Promise)throw new S_;if("issues"in a&&a.issues){const l=a.issues.map(c=>({message:c.message,path:c.path?.map(f=>String(f))}));throw new x_(n,l)}return a.value}generateGlobalKey(e,n){if(typeof e!="string"&&typeof e!="number")throw typeof e>"u"?new az(n):new oz(e,n);return`KEY::${this.id}/${e}`}update(e,n,r){if(typeof e>"u")throw new cz;const s=this.state;this.lifecycle.validateCollectionUsable("update");const a=jf();if(!a&&!this.config.onUpdate)throw new yz;const l=Array.isArray(e),c=l?e:[e];if(l&&c.length===0)throw new fz;const f=typeof n=="function"?n:r,d=typeof n=="function"?{}:n,m=c.map(x=>{const S=this.state.get(x);if(!S)throw new dz(x);return S});let p;l?p=_L(m,f):p=[wL(m[0],f)];const g=c.map((x,S)=>{const E=p[S];if(!E||Object.keys(E).length===0)return null;const _=m[S],k=this.validateData(E,"update",x),R=Object.assign({},_,k),N=this.config.getKey(_),L=this.config.getKey(R);if(N!==L)throw new hz(N,L);const A=this.generateGlobalKey(L,R);return{mutationId:crypto.randomUUID(),original:_,modified:R,changes:Object.fromEntries(Object.keys(E).map(I=>[I,R[I]])),globalKey:A,key:x,metadata:d.metadata,syncMetadata:s.syncedMetadata.get(x)||{},optimistic:d.optimistic??!0,type:"update",createdAt:new Date,updatedAt:new Date,collection:this.collection}}).filter(Boolean);if(g.length===0){const x=lf({mutationFn:async()=>{}});return x.commit().catch(()=>{}),s.scheduleTransactionCleanup(x),x}if(a)return a.applyMutations(g),s.transactions.set(a.id,a),s.scheduleTransactionCleanup(a),s.recomputeOptimisticState(!0),a;const y=lf({mutationFn:async x=>this.config.onUpdate({transaction:x.transaction,collection:this.collection})});return y.applyMutations(g),y.commit().catch(()=>{}),s.transactions.set(y.id,y),s.scheduleTransactionCleanup(y),s.recomputeOptimisticState(!0),y}}class DL extends ZE{constructor(){super()}setDeps(e){this.collection=e.collection}emit(e,n){this.emitInner(e,n)}emitStatusChange(e,n){this.emit("status:change",{type:"status:change",collection:this.collection,previousStatus:n,status:e});const r=`status:${e}`;this.emit(r,{type:r,collection:this.collection,previousStatus:n,status:e})}emitSubscribersChange(e,n){this.emit("subscribers:change",{type:"subscribers:change",collection:this.collection,previousSubscriberCount:n,subscriberCount:e})}cleanup(){this.clearListeners()}}function Hd(t){const e=new T0(t);return t.utils?e.utils=t.utils:e.utils={},e}class T0{constructor(e){if(this.utils={},this.insert=(n,r)=>this._mutations.insert(n,r),this.delete=(n,r)=>this._mutations.delete(n,r),!e)throw new WD;if(!e.sync)throw new ez;e.id?this.id=e.id:this.id=crypto.randomUUID(),this.config={...e,autoIndex:e.autoIndex??"eager"},this._changes=new tL,this._events=new DL,this._indexes=new fL,this._lifecycle=new iL(e,this.id),this._mutations=new NL(e,this.id),this._state=new Xj(e),this._sync=new aL(e,this.id),this.comparisonOpts=zL(e),this._changes.setDeps({collection:this,lifecycle:this._lifecycle,sync:this._sync,events:this._events}),this._events.setDeps({collection:this}),this._indexes.setDeps({state:this._state,lifecycle:this._lifecycle}),this._lifecycle.setDeps({changes:this._changes,events:this._events,indexes:this._indexes,state:this._state,sync:this._sync}),this._mutations.setDeps({collection:this,lifecycle:this._lifecycle,state:this._state}),this._state.setDeps({collection:this,lifecycle:this._lifecycle,changes:this._changes,indexes:this._indexes,events:this._events}),this._sync.setDeps({collection:this,state:this._state,lifecycle:this._lifecycle,events:this._events}),e.startSync===!0&&this._sync.startSync()}get status(){return this._lifecycle.status}get subscriberCount(){return this._changes.activeSubscribersCount}onFirstReady(e){return this._lifecycle.onFirstReady(e)}isReady(){return this._lifecycle.status==="ready"}get isLoadingSubset(){return this._sync.isLoadingSubset}startSyncImmediate(){this._sync.startSync()}preload(){return this._sync.preload()}get(e){return this._state.get(e)}has(e){return this._state.has(e)}get size(){return this._state.size}*keys(){yield*this._state.keys()}*values(){yield*this._state.values()}*entries(){yield*this._state.entries()}*[Symbol.iterator](){yield*this._state[Symbol.iterator]()}forEach(e){return this._state.forEach(e)}map(e){return this._state.map(e)}getKeyFromItem(e){return this.config.getKey(e)}createIndex(e,n={}){return this._indexes.createIndex(e,n)}get indexes(){return this._indexes.indexes}validateData(e,n,r){return this._mutations.validateData(e,n,r)}get compareOptions(){return{...this.comparisonOpts}}update(e,n,r){return this._mutations.update(e,n,r)}get state(){const e=new Map;for(const[n,r]of this.entries())e.set(n,r);return e}stateWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.state):this.preload().then(()=>this.state)}get toArray(){return Array.from(this.values())}toArrayWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.toArray):this.preload().then(()=>this.toArray)}currentStateAsChanges(e={}){return Zj(this,e)}subscribeChanges(e,n={}){return this._changes.subscribeChanges(e,n)}on(e,n){return this._events.on(e,n)}once(e,n){return this._events.once(e,n)}off(e,n){this._events.off(e,n)}waitFor(e,n){return this._events.waitFor(e,n)}async cleanup(){return this._lifecycle.cleanup(),Promise.resolve()}}function zL(t){if(t.defaultStringCollation){const e=t.defaultStringCollation;return{stringSort:e.stringSort??"locale",locale:e.stringSort==="locale"?e.locale:void 0,localeOptions:e.stringSort==="locale"?e.localeOptions:void 0}}else return{stringSort:"locale"}}function Ja(t,e,n){try{t.stringify(e)}catch(r){throw new Zz(n,r instanceof Error?r.message:String(r))}}function eg(){return crypto.randomUUID()}function jL(t){return typeof t=="number"?`n:${t}`:`s:${t}`}function LL(t){return t.startsWith("n:")?Number(t.slice(2)):t.startsWith("s:")?t.slice(2):t}function PL(){const t=new Map;return{getItem(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},removeItem(e){t.delete(e)}}}function FL(){return{addEventListener:()=>{},removeEventListener:()=>{}}}function $L(t){if(!t.storageKey)throw new Yz;const e=t.storage||(typeof window<"u"?window.localStorage:null)||PL(),n=t.storageEventApi||(typeof window<"u"?window:null)||FL(),r=t.parser||JSON,s=new Map,a=BL(t.storageKey,e,n,r,t.getKey,s),l=A=>{try{const I={};A.forEach((P,M)=>{I[jL(M)]=P});const j=r.stringify(I);e.setItem(t.storageKey,j)}catch(I){throw console.error(`[LocalStorageCollection] Error saving data to storage key "${t.storageKey}":`,I),I}},c=()=>{e.removeItem(t.storageKey)},f=()=>{const A=e.getItem(t.storageKey);return A?new Blob([A]).size:0},d=async A=>{A.transaction.mutations.forEach(j=>{Ja(r,j.modified,"insert")});let I={};return t.onInsert&&(I=await t.onInsert(A)??{}),A.transaction.mutations.forEach(j=>{const P={versionKey:eg(),data:j.modified};s.set(j.key,P)}),l(s),a.confirmOperationsSync(A.transaction.mutations),I},m=async A=>{A.transaction.mutations.forEach(j=>{Ja(r,j.modified,"update")});let I={};return t.onUpdate&&(I=await t.onUpdate(A)??{}),A.transaction.mutations.forEach(j=>{const P={versionKey:eg(),data:j.modified};s.set(j.key,P)}),l(s),a.confirmOperationsSync(A.transaction.mutations),I},p=async A=>{let I={};return t.onDelete&&(I=await t.onDelete(A)??{}),A.transaction.mutations.forEach(j=>{s.delete(j.key)}),l(s),a.confirmOperationsSync(A.transaction.mutations),I},{storageKey:g,storage:y,storageEventApi:x,onInsert:S,onUpdate:E,onDelete:_,id:k,...R}=t,N=k??`local-collection:${t.storageKey}`;return{...R,id:N,sync:a,onInsert:d,onUpdate:m,onDelete:p,utils:{clearStorage:c,getStorageSize:f,acceptMutations:A=>{const I=A.mutations.filter(j=>a.collection&&j.collection===a.collection?!0:j.collection.id===N);if(I.length!==0){for(const j of I)switch(j.type){case"insert":case"update":Ja(r,j.modified,j.type);break;case"delete":Ja(r,j.original,j.type);break}for(const j of I)switch(j.type){case"insert":case"update":{const P={versionKey:eg(),data:j.modified};s.set(j.key,P);break}case"delete":{s.delete(j.key);break}}l(s),a.confirmOperationsSync(I)}}}}}function K_(t,e,n){try{const r=e.getItem(t);if(!r)return new Map;const s=n.parse(r),a=new Map;if(typeof s=="object"&&s!==null&&!Array.isArray(s))Object.entries(s).forEach(([l,c])=>{if(c&&typeof c=="object"&&"versionKey"in c&&"data"in c){const f=c,d=LL(l);a.set(d,f)}else throw new Jz(t,l)});else throw new Xz(t);return a}catch(r){return console.warn(`[LocalStorageCollection] Error loading data from storage key "${t}":`,r),new Map}}function BL(t,e,n,r,s,a){let l=null,c=null;const f=(g,y)=>{const x=[];return g.forEach((S,E)=>{const _=y.get(E);_?S.versionKey!==_.versionKey&&x.push({type:"update",key:E,value:_.data}):x.push({type:"delete",key:E,value:S.data})}),y.forEach((S,E)=>{g.has(E)||x.push({type:"insert",key:E,value:S.data})}),x},d=()=>{if(!l)return;const{begin:g,write:y,commit:x}=l,S=K_(t,e,r),E=f(a,S);E.length>0&&(g(),E.forEach(({type:_,value:k})=>{k&&(Ja(r,k,_),y({type:_,value:k}))}),x(),a.clear(),S.forEach((_,k)=>{a.set(k,_)}))};return{...{sync:g=>{const{begin:y,write:x,commit:S,markReady:E}=g;l=g,c=g.collection;const _=K_(t,e,r);_.size>0&&(y(),_.forEach(R=>{Ja(r,R.data,"load"),x({type:"insert",value:R.data})}),S()),a.clear(),_.forEach((R,N)=>{a.set(N,R)}),E();const k=R=>{R.key!==t||R.storageArea!==e||d()};n.addEventListener("storage",k)},getSyncMetadata:()=>({storageKey:t,storageType:e===(typeof window<"u"?window.localStorage:null)?"localStorage":"custom"}),manualTrigger:d,collection:c},confirmOperationsSync:g=>{if(!l)return;const{begin:y,write:x,commit:S}=l;y(),g.forEach(E=>{x({type:E.type,value:E.type==="delete"?E.original:E.modified})}),S()}}}class Vt{constructor(e={}){this.query={},this.query={...e}}_createRefForSource(e,n){let r;try{r=Object.keys(e)}catch{const c=e===null?"null":"undefined";throw new af(n,c)}if(Array.isArray(e))throw new af(n,"array");if(r.length!==1)throw r.length===0?new af(n,"empty object"):r.every(c=>!isNaN(Number(c)))?new af(n,"string"):new Ez(n);const s=r[0],a=e[s];let l;if(a instanceof T0)l=new uo(a,s);else if(a instanceof Vt){const c=a._getQuery();if(!c.from)throw new kz(n);l=new vr(c,s)}else throw new Rz(s);return[s,l]}from(e){const[,n]=this._createRefForSource(e,"from clause");return new Vt({...this.query,from:n})}join(e,n,r="left"){const[s,a]=this._createRefForSource(e,"join clause"),c=[...this._getCurrentAliases(),s],f=Pa(c),d=n(f);let m,p;if(d.type==="func"&&d.name==="eq"&&d.args.length===2)m=d.args[0],p=d.args[1];else throw new Az;const g={from:a,type:r,left:m,right:p},y=this.query.join||[];return new Vt({...this.query,join:[...y,g]})}leftJoin(e,n){return this.join(e,n,"left")}rightJoin(e,n){return this.join(e,n,"right")}innerJoin(e,n){return this.join(e,n,"inner")}fullJoin(e,n){return this.join(e,n,"full")}where(e){const n=this._getCurrentAliases(),r=Pa(n),s=e(r),a=this.query.where||[];return new Vt({...this.query,where:[...a,s]})}having(e){const n=this._getCurrentAliases(),r=Pa(n),s=e(r),a=this.query.having||[];return new Vt({...this.query,having:[...a,s]})}select(e){const n=this._getCurrentAliases(),r=Pa(n),s=e(r),a=JE(s);return new Vt({...this.query,select:a,fnSelect:void 0})}orderBy(e,n="asc"){const r=this._getCurrentAliases(),s=Pa(r),a=e(s),l=typeof n=="string"?{direction:n,nulls:"first"}:{direction:n.direction??"asc",nulls:n.nulls??"first",stringSort:n.stringSort,locale:n.stringSort==="locale"?n.locale:void 0,localeOptions:n.stringSort==="locale"?n.localeOptions:void 0},c=m=>({expression:en(m),compareOptions:l}),f=Array.isArray(a)?a.map(m=>c(m)):[c(a)],d=this.query.orderBy||[];return new Vt({...this.query,orderBy:[...d,...f]})}groupBy(e){const n=this._getCurrentAliases(),r=Pa(n),s=e(r),a=Array.isArray(s)?s.map(c=>en(c)):[en(s)],l=this.query.groupBy||[];return new Vt({...this.query,groupBy:[...l,...a]})}limit(e){return new Vt({...this.query,limit:e})}offset(e){return new Vt({...this.query,offset:e})}distinct(){return new Vt({...this.query,distinct:!0})}findOne(){return new Vt({...this.query,singleResult:!0})}_getCurrentAliases(){const e=[];if(this.query.from&&e.push(this.query.from.alias),this.query.join)for(const n of this.query.join)e.push(n.from.alias);return e}get fn(){const e=this;return{select(n){return new Vt({...e.query,select:void 0,fnSelect:n})},where(n){return new Vt({...e.query,fnWhere:[...e.query.fnWhere||[],n]})},having(n){return new Vt({...e.query,fnHaving:[...e.query.fnHaving||[],n]})}}}_getQuery(){if(!this.query.from)throw new Tz;return this.query}}function UL(t){return t===void 0?en(null):t instanceof $E||t instanceof Sr||t instanceof En||t instanceof jn?t:en(t)}function qL(t){return t!==null&&typeof t=="object"&&!m0(t)&&!t.__refProxy}function JE(t){if(!qL(t))return UL(t);const e={};for(const[n,r]of Object.entries(t)){if(typeof n=="string"&&n.startsWith("__SPREAD_SENTINEL__")){e[n]=r;continue}e[n]=JE(r)}return e}function HL(t){const e=t(new Vt);return XE(e)}function XE(t){return t._getQuery()}function VL(t){const e=KL(t);let n=t,r,s=0;const a=10;for(;s<a&&!Tr(n,r);)r=n,n=iy(n),s++;return{optimizedQuery:WE(n),sourceWhereClauses:e}}function KL(t){const e=new Map;if(!t.where||t.where.length===0)return e;const r=oy(t.where).map(a=>ek(a)),s=tk(r);for(const[a,l]of s.singleSource)GL(t,a)&&e.set(a,l);return e}function GL(t,e){if(t.from.alias===e)return t.from.type==="collectionRef";if(t.join){for(const n of t.join)if(n.from.alias===e)return n.from.type==="collectionRef"}return!1}function iy(t){const e={...t,from:t.from.type==="queryRef"?new vr(iy(t.from.query),t.from.alias):t.from,join:t.join?.map(n=>({...n,from:n.from.type==="queryRef"?new vr(iy(n.from.query),n.from.alias):n.from}))};return QL(e)}function QL(t){if(!t.where||t.where.length===0)return t;if(!t.join||t.join.length===0){if(t.where.length>1){const c=oy(t.where),f=dd(c);return{...t,where:[f]}}return t}const e=t.where.filter(c=>!b_(c)),r=oy(e).map(c=>ek(c)),s=tk(r),a=YL(t,s),l=t.where.filter(c=>b_(c));return l.length>0&&(a.where=[...a.where||[],...l]),a}function WE(t){return{...t,from:ay(t.from),join:t.join?.map(e=>({...e,from:ay(e.from)}))}}function ay(t){if(t.type==="collectionRef")return t;const e=WE(t.query);if(ZL(e)){const n=ay(e.from);return n.type==="collectionRef"?new uo(n.collection,t.alias):new vr(n.query,t.alias)}return new vr(e,t.alias)}function ZL(t){return(!t.where||t.where.length===0)&&!t.select&&(!t.groupBy||t.groupBy.length===0)&&(!t.having||t.having.length===0)&&(!t.orderBy||t.orderBy.length===0)&&(!t.join||t.join.length===0)&&t.limit===void 0&&t.offset===void 0&&!t.fnSelect&&(!t.fnWhere||t.fnWhere.length===0)&&(!t.fnHaving||t.fnHaving.length===0)}function oy(t){const e=[];for(const n of t){const r=g0(n);e.push(...O0(r))}return e}function O0(t){if(t.type==="func"&&t.name==="and"){const e=[];for(const n of t.args)e.push(...O0(n));return e}else return[t]}function ek(t){const e=new Set;let n=!1;function r(s){switch(s.type){case"ref":if(s.path&&s.path.length>0){const a=s.path[0];a&&(e.add(a),s.path.length===1&&(n=!0))}break;case"func":s.args&&s.args.forEach(r);break;case"val":break;case"agg":s.args&&s.args.forEach(r);break}}return r(t),{expression:t,touchedSources:e,hasNamespaceOnlyRef:n}}function tk(t){const e=new Map,n=[];for(const a of t)if(a.touchedSources.size===1&&!a.hasNamespaceOnlyRef){const l=Array.from(a.touchedSources)[0];e.has(l)||e.set(l,[]),e.get(l).push(a.expression)}else(a.touchedSources.size>1||a.hasNamespaceOnlyRef)&&n.push(a.expression);const r=new Map;for(const[a,l]of e)r.set(a,dd(l));const s=n.length>0?dd(n):void 0;return{singleSource:r,multiSource:s}}function YL(t,e){const n=new Set,r=G_(t.from,e.singleSource,n),s=t.join?t.join.map(d=>({...d,from:G_(d.from,e.singleSource,n)})):void 0,a=[];e.multiSource&&a.push(e.multiSource);const l=t.join&&t.join.some(d=>d.type==="left"||d.type==="right"||d.type==="full");for(const[d,m]of e.singleSource)n.has(d)?l&&a.push(JD(m)):a.push(m);const c=a.length>1?[dd(a.flatMap(d=>O0(g0(d))))]:a;return{select:t.select,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,distinct:t.distinct,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0,from:r,join:s,where:c.length>0?c:[]}}function Xa(t){return{from:t.from.type==="collectionRef"?new uo(t.from.collection,t.from.alias):new vr(Xa(t.from.query),t.from.alias),select:t.select,join:t.join?t.join.map(e=>({type:e.type,left:e.left,right:e.right,from:e.from.type==="collectionRef"?new uo(e.from.collection,e.from.alias):new vr(Xa(e.from.query),e.from.alias)})):void 0,where:t.where?[...t.where]:void 0,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0}}function G_(t,e,n){const r=e.get(t.alias);if(!r)return t.type==="collectionRef"?new uo(t.collection,t.alias):new vr(Xa(t.query),t.alias);if(t.type==="collectionRef"){const l={from:new uo(t.collection,t.alias),where:[r]};return n.add(t.alias),new vr(l,t.alias)}if(!n3(t.query,r,t.alias))return new vr(Xa(t.query),t.alias);if(s3(t.query,r,t.alias))return new vr(Xa(t.query),t.alias);const s=t.query.where||[],a={...Xa(t.query),where:[...s,r]};return n.add(t.alias),new vr(a,t.alias)}function JL(t,e,n){return t.select?nk(t.select)||r3(t.select,e,n):!1}function XL(t){return t.groupBy&&t.groupBy.length>0}function WL(t){return t.having&&t.having.length>0}function e3(t){return t.orderBy&&t.orderBy.length>0&&(t.limit!==void 0||t.offset!==void 0)}function t3(t){return t.fnSelect||t.fnWhere&&t.fnWhere.length>0||t.fnHaving&&t.fnHaving.length>0}function n3(t,e,n){return!(JL(t,e,n)||XL(t)||WL(t)||e3(t)||t3(t))}function nk(t){for(const e of Object.values(t))if(typeof e=="object"){const n=e;if(n.type==="agg"||!("type"in n)&&nk(n))return!0}return!1}function M0(t){const e=[];if(t==null||typeof t!="object")return e;switch(t.type){case"ref":e.push(t);break;case"func":case"agg":for(const n of t.args??[])e.push(...M0(n));break}return e}function r3(t,e,n){const r=new Set;for(const[a,l]of Object.entries(t))a.startsWith("__SPREAD_SENTINEL__")||l instanceof En||r.add(a);const s=M0(e);for(const a of s){const l=a.path;if(!Array.isArray(l)||l.length<2)continue;const c=l[0],f=l[1];if(c===n&&r.has(f))return!0}return!1}function s3(t,e,n){const r=M0(e);if(r.every(a=>a.path[0]!==n))return!1;if(t.fnSelect)return!0;const s=t.select;if(!s)return!1;for(const a of r){const l=a.path;if(l.length<2||l[0]!==n)continue;const c=s[l[1]];if(!c)continue;if(!(c instanceof En)||c.path.length<2)return!0;const[f,d]=c.path;if(f!==n&&f!==t.from.alias||d!==l[1])return!0}return!1}function dd(t){if(t.length===0)throw new e4;return t.length===1?t[0]:new Sr("and",t)}function i3(t,e,n,r,s,a,l,c,f,d,m,p,g,y,x,S,E,_){let k=t;for(const R of e)k=a3(k,R,n,r,s,a,l,c,f,d,m,p,g,y,x,S,E,_);return k}function a3(t,e,n,r,s,a,l,c,f,d,m,p,g,y,x,S,E,_){const k=e.from.type==="collectionRef",{alias:R,input:N,collectionId:L}=l3(e.from,a,f,d,m,p,g,y,l,c,S,E,_);n[R]=N,k&&(E[R]=L);const A=f[r],I=f[L];if(!A)throw new C_(r);if(!I)throw new C_(L);const{activeSource:j,lazySource:P}=c3(e.type,A,I),M=Object.keys(n),{mainExpr:B,joinedExpr:Q}=o3(e.left,e.right,M,R),Z=Ln(B),te=Ln(Q);let V=t.pipe(_n(([X,oe])=>[Z(oe),[X,oe]])),F=N.pipe(_n(([X,oe])=>{const ae={[R]:oe};return[te(ae),[X,ae]]}));if(!["inner","left","right","full"].includes(e.type))throw new Pz(e.type);if(j){const X=j==="main"?e.from:x.from,oe=X.type==="queryRef"&&(X.query.limit||X.query.offset),ae=B.type==="func"||Q.type==="func";if(!oe&&!ae){const z=j==="main"?R:s;p.add(z);const D=j==="main"?V:F,T=hu(x,j==="main"?Q:B,P),K=T.collection,se=T.path[0];se&&qd(se,T.path,K);const ce=D.pipe(fj(ye=>{const ke=_[z]||z,ve=d[ke];if(!ve)throw new t4(ke,z,P.id,Object.keys(d));if(ve.hasLoadedInitialState())return;const Ue=ye.getInner().map(([[yt]])=>yt),Fe=new En(T.path);ve.requestSnapshot({where:Lj(Fe,Ue),optimizedOnly:!0})||ve.requestSnapshot()}));j==="main"?V=ce:F=ce}}return V.pipe(vj(F,e.type),u3(e.type))}function o3(t,e,n,r){const s=n.filter(c=>c!==r),a=ly(t),l=ly(e);if(a&&s.includes(a)&&l===r)return{mainExpr:t,joinedExpr:e};if(a===r&&l&&s.includes(l))return{mainExpr:e,joinedExpr:t};throw!a||!l?new $z:a===l?new Fz(a):s.includes(a)?l!==r?new Uz(r):new qz:new Bz(a)}function ly(t){switch(t.type){case"ref":return t.path[0]||null;case"func":{const e=new Set;for(const n of t.args){const r=ly(n);r&&e.add(r)}return e.size===1?Array.from(e)[0]:null}default:return null}}function l3(t,e,n,r,s,a,l,c,f,d,m,p,g){switch(t.type){case"collectionRef":{const y=e[t.alias];if(!y)throw new BE(t.alias,t.collection.id,Object.keys(e));return p[t.alias]=t.collection.id,{alias:t.alias,input:y,collectionId:t.collection.id}}case"queryRef":{const y=d.get(t.query)||t.query,x=m(y,e,n,r,s,a,l,c,f,d);Object.assign(p,x.aliasToCollectionId),Object.assign(g,x.aliasRemapping);const S=Object.keys(x.aliasToCollectionId).find(k=>x.aliasToCollectionId[k]===x.collectionId);S&&S!==t.alias&&(g[t.alias]=S);const _=x.pipeline.pipe(_n(k=>{const[R,[N,L]]=k;return[R,N]}));return{alias:t.alias,input:_,collectionId:x.collectionId}}default:throw new Hz(t.type)}}function u3(t){return function(e){return e.pipe(Xs(n=>{const[r,[s,a]]=n,l=s?.[1],c=a?.[1];return t==="inner"?!!(l&&c):t==="left"?!!l:t==="right"?!!c:!0}),_n(n=>{const[r,[s,a]]=n,l=s?.[0],c=s?.[1],f=a?.[0],d=a?.[1],m={};return c&&Object.assign(m,c),d&&Object.assign(m,d),[`[${l},${f}]`,m]}))}}function c3(t,e,n){switch(t){case"left":return{activeSource:"main",lazySource:n};case"right":return{activeSource:"joined",lazySource:e};case"inner":return e.size<n.size?{activeSource:"main",lazySource:n}:{activeSource:"joined",lazySource:e};default:return{activeSource:void 0,lazySource:void 0}}}function uy(t){return t instanceof jn?t.value:t}function f3(t,e,n){const r=t.source(e);if(r&&typeof r=="object"){let s=n;const a=t.targetPath;if(a.length===0)for(const[l,c]of Object.entries(r))n[l]=uy(c);else for(let l=0;l<a.length;l++){const c=a[l];if(l===a.length-1){const f=s[c]??={};if(typeof f=="object")for(const[d,m]of Object.entries(r))f[d]=uy(m)}else{const f=s[c];(f==null||typeof f!="object")&&(s[c]={}),s=s[c]}}}}function d3(t,e,n){const r=t.alias.split(".");if(r.length===1)n[t.alias]=t.compiled(e);else{let s=n;for(let a=0;a<r.length-1;a++){const l=r[a],c=s[l];(c==null||typeof c!="object")&&(s[l]={}),s=s[l]}s[r[r.length-1]]=uy(t.compiled(e))}}function h3([t,e],n){const r={};for(const s of n)s.kind==="merge"?f3(s,e,r):d3(s,e,r);return[t,{...e,__select_results:r}]}function p3(t,e,n){const r=[];return rk([],e,r),t.pipe(_n(s=>h3(s,r)))}function m3(t){return t.type==="agg"}function g3(t){return t&&typeof t=="object"&&!m0(t)}function rk(t,e,n){for(const[r,s]of Object.entries(e)){if(r.startsWith("__SPREAD_SENTINEL__")){const l=r.slice(19),c=l.lastIndexOf("__"),f=c>=0?l.slice(0,c):l,d=s&&typeof s=="object"&&"type"in s&&s.type==="ref";if(f.includes(".")||d){const m=[...t],p=d?s:new En(f.split(".")),g=Ln(p);n.push({kind:"merge",targetPath:m,source:g})}else{const m=f,p=[...t];n.push({kind:"merge",targetPath:p,source:g=>g[m]})}continue}const a=s;if(g3(a)){rk([...t,r],a,n);continue}if(m3(a))n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>null});else{if(a===void 0||!m0(a)){n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>a});continue}if(a instanceof jn){const l=a.value;n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>l})}else n.push({kind:"field",alias:[...t,r].join("."),compiled:Ln(a)})}}}function I0(t,e,n,r,s,a,l,c,f=new WeakMap,d=new WeakMap){const m=f.get(t);if(m)return m;cy(t);const{optimizedQuery:p,sourceWhereClauses:g}=VL(t);d.set(p,t),dy(p,t,d);const y={...e},x={},S={},E={},{alias:_,input:k,collectionId:R}=v3(p.from,y,n,r,s,a,l,c,f,d,x,S);E[_]=k;let N=k.pipe(_n(([j,P])=>[j,{[_]:P}]));if(p.join&&p.join.length>0&&(N=i3(N,p.join,E,R,_,y,f,d,n,r,s,a,l,c,t,I0,x,S)),p.where&&p.where.length>0)for(const j of p.where){const P=g0(j),M=Ln(P);N=N.pipe(Xs(([B,Q])=>ro(M(Q))))}if(p.fnWhere&&p.fnWhere.length>0)for(const j of p.fnWhere)N=N.pipe(Xs(([P,M])=>ro(j(M))));if(p.distinct&&!p.fnSelect&&!p.select)throw new Oz;if(p.fnSelect?N=N.pipe(_n(([j,P])=>{const M=p.fnSelect(P);return[j,{...P,__select_results:M}]})):p.select?N=p3(N,p.select):N=N.pipe(_n(([j,P])=>{const M=!p.join&&!p.groupBy?P[_]:P;return[j,{...P,__select_results:M}]})),p.groupBy&&p.groupBy.length>0?N=$_(N,p.groupBy,p.having,p.select,p.fnHaving):p.select&&Object.values(p.select).some(P=>P.type==="agg")&&(N=$_(N,[],p.having,p.select,p.fnHaving)),p.having&&(!p.groupBy||p.groupBy.length===0)&&!(p.select?Object.values(p.select).some(P=>P.type==="agg"):!1))throw new Mz;if(p.fnHaving&&p.fnHaving.length>0&&(!p.groupBy||p.groupBy.length===0))for(const j of p.fnHaving)N=N.pipe(Xs(([P,M])=>j(M)));if(p.distinct&&(N=N.pipe(xj(([j,P])=>P.__select_results))),p.orderBy&&p.orderBy.length>0){const M=Qj(t,N,p.orderBy,p.select||{},n[R],l,c,p.limit,p.offset).pipe(_n(([Q,[Z,te]])=>{const V=Z.__select_results,F=fy(V);return[Q,[F,te]]})),B={collectionId:R,pipeline:M,sourceWhereClauses:g,aliasToCollectionId:x,aliasRemapping:S};return f.set(t,B),B}else if(p.limit!==void 0||p.offset!==void 0)throw new Iz;const A=N.pipe(_n(([j,P])=>{const M=P.__select_results,B=fy(M);return[j,[B,void 0]]})),I={collectionId:R,pipeline:A,sourceWhereClauses:g,aliasToCollectionId:x,aliasRemapping:S};return f.set(t,I),I}function y3(t){const e=new Set;if(t.from.type==="collectionRef"&&e.add(t.from.alias),t.join)for(const n of t.join)n.from.type==="collectionRef"&&e.add(n.from.alias);return e}function cy(t,e=new Set){const n=y3(t);for(const s of n)if(e.has(s))throw new Nz(s,Array.from(e));const r=new Set([...e,...n]);if(t.from.type==="queryRef"&&cy(t.from.query,r),t.join)for(const s of t.join)s.from.type==="queryRef"&&cy(s.from.query,r)}function v3(t,e,n,r,s,a,l,c,f,d,m,p){switch(t.type){case"collectionRef":{const g=e[t.alias];if(!g)throw new BE(t.alias,t.collection.id,Object.keys(e));return m[t.alias]=t.collection.id,{alias:t.alias,input:g,collectionId:t.collection.id}}case"queryRef":{const g=d.get(t.query)||t.query,y=I0(g,e,n,r,s,a,l,c,f,d);Object.assign(m,y.aliasToCollectionId),Object.assign(p,y.aliasRemapping);const x=Object.keys(y.aliasToCollectionId).find(_=>y.aliasToCollectionId[_]===y.collectionId);x&&x!==t.alias&&(p[t.alias]=x);const E=y.pipeline.pipe(_n(_=>{const[k,[R,N]]=_,L=fy(R);return[k,L]}));return{alias:t.alias,input:E,collectionId:y.collectionId}}default:throw new Dz(t.type)}}function b3(t){return t instanceof jn||t&&typeof t=="object"&&"type"in t&&t.type==="val"}function fy(t){return b3(t)?t.value:t}function dy(t,e,n){if(t.from.type==="queryRef"&&e.from.type==="queryRef"&&(n.set(t.from.query,e.from.query),dy(t.from.query,e.from.query,n)),t.join&&e.join)for(let r=0;r<t.join.length&&r<e.join.length;r++){const s=t.join[r],a=e.join[r];s.from.type==="queryRef"&&a.from.type==="queryRef"&&(n.set(s.from.query,a.from.query),dy(s.from.query,a.from.query,n))}}function N0(t,e){const n=t.type;if(n==="val")return new jn(t.value);if(n==="ref"){const r=t.path;if(Array.isArray(r)){if(r[0]===e&&r.length>1)return new En(r.slice(1));if(r.length===1&&r[0]!==void 0)return new En([r[0]])}return new En(Array.isArray(r)?r:[String(r)])}else{const r=[];for(const s of t.args){const a=N0(s,e);r.push(a)}return new Sr(t.name,r)}}function Q_(t,e){return t.map(r=>{const s=N0(r.expression,e);return{...r,expression:s}})}const Z_=Symbol.for("@tanstack/db.collection-config-builder");class x3{constructor(e,n,r,s){this.alias=e,this.collectionId=n,this.collection=r,this.collectionConfigBuilder=s,this.biggest=void 0,this.subscriptionLoadingPromises=new Map,this.sentToD2Keys=new Set}subscribe(){const e=this.getWhereClauseForAlias();if(e){const n=N0(e,this.alias);return this.subscribeToChanges(n)}return this.subscribeToChanges()}subscribeToChanges(e){let n;const r=this.getOrderByInfo();if(r)n=this.subscribeToOrderedChanges(e,r);else{const c=!this.collectionConfigBuilder.isLazyAlias(this.alias);n=this.subscribeToMatchingChanges(e,c)}const s=()=>{if(!this.subscriptionLoadingPromises.has(n)){let c;const f=new Promise(d=>{c=d});this.subscriptionLoadingPromises.set(n,{resolve:c}),this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(f)}};n.status==="loadingSubset"&&s();const a=n.on("status:change",c=>{if(c.status==="loadingSubset")s();else{const f=this.subscriptionLoadingPromises.get(n);f&&(this.subscriptionLoadingPromises.delete(n),f.resolve())}}),l=()=>{const c=this.subscriptionLoadingPromises.get(n);c&&(this.subscriptionLoadingPromises.delete(n),c.resolve()),a(),n.unsubscribe()};return this.collectionConfigBuilder.currentSyncState.unsubscribeCallbacks.add(l),n}sendChangesToPipeline(e,n){const r=Array.isArray(e)?e:[...e],s=[];for(const f of r){if(f.type==="insert"){if(this.sentToD2Keys.has(f.key))continue;this.sentToD2Keys.add(f.key)}else f.type==="delete"&&this.sentToD2Keys.delete(f.key);s.push(f)}const a=this.collectionConfigBuilder.currentSyncState.inputs[this.alias],c=S3(a,s,this.collection.config.getKey)>0?n:void 0;this.collectionConfigBuilder.scheduleGraphRun(c,{alias:this.alias})}subscribeToMatchingChanges(e,n=!1){const r=a=>{this.sendChangesToPipeline(a)};return this.collection.subscribeChanges(r,{...n&&{includeInitialState:n},whereExpression:e})}subscribeToOrderedChanges(e,n){const{orderBy:r,offset:s,limit:a,index:l}=n,c=p=>{const g=w3(p);this.sendChangesToPipelineWithTracking(g,f)},f=this.collection.subscribeChanges(c,{whereExpression:e}),d=this.collection.on("truncate",()=>{this.biggest=void 0,this.sentToD2Keys.clear()});f.on("unsubscribed",()=>{d()});const m=Q_(r,this.alias);return l?(f.setOrderByIndex(l),f.requestLimitedSnapshot({limit:s+a,orderBy:m})):f.requestSnapshot({orderBy:m,limit:s+a}),f}loadMoreIfNeeded(e){const n=this.getOrderByInfo();if(!n)return!0;const{dataNeeded:r}=n;if(!r)return!0;const s=r();return s>0&&this.loadNextItems(s,e),!0}sendChangesToPipelineWithTracking(e,n){const r=this.getOrderByInfo();if(!r){this.sendChangesToPipeline(e);return}const s=this.trackSentValues(e,r.comparator),a=n;a[Z_]??=this.loadMoreIfNeeded.bind(this,n),this.sendChangesToPipeline(s,a[Z_])}loadNextItems(e,n){const r=this.getOrderByInfo();if(!r)return;const{orderBy:s,valueExtractorForRawRow:a,offset:l}=r,c=this.biggest,f=c?a(c):void 0,d=f!==void 0?Array.isArray(f)?f:[f]:void 0,m=Q_(s,this.alias);n.requestLimitedSnapshot({orderBy:m,limit:e,minValues:d,offset:l})}getWhereClauseForAlias(){const e=this.collectionConfigBuilder.sourceWhereClausesCache;if(e)return e.get(this.alias)}getOrderByInfo(){const e=this.collectionConfigBuilder.optimizableOrderByCollections[this.collectionId];if(e&&e.alias===this.alias)return e}*trackSentValues(e,n){for(const r of e)r.type!=="delete"&&(this.biggest?n(this.biggest,r.value)<0&&(this.biggest=r.value):this.biggest=r.value),yield r}}function S3(t,e,n){const r=[];for(const s of e){const a=n(s.value);s.type==="insert"?r.push([[a,s.value],1]):s.type==="update"?(r.push([[a,s.previousValue],-1]),r.push([[a,s.value],1])):r.push([[a,s.value],-1])}return r.length!==0&&t.sendData(new Kt(r)),r.length}function*w3(t){for(const e of t)e.type==="update"?(yield{type:"delete",key:e.key,value:e.previousValue},yield{type:"insert",key:e.key,value:e.value}):yield e}const sk=new WeakMap;function _3(t){return t.utils?.[k0]?.getBuilder?.()}function C3(t,e){sk.set(t,e)}function E3(t){return sk.get(t)}let k3=0;class R3{constructor(e){this.config=e,this.compiledAliasToCollectionId={},this.resultKeys=new WeakMap,this.orderByIndices=new WeakMap,this.isGraphRunning=!1,this.runCount=0,this.isInErrorState=!1,this.aliasDependencies={},this.builderDependencies=new Set,this.pendingGraphRuns=new Map,this.subscriptions={},this.lazySourcesCallbacks={},this.lazySources=new Set,this.optimizableOrderByCollections={},this.id=e.id||`live-query-${++k3}`,this.query=A3(e),this.collections=O3(this.query);const n=M3(this.query);this.collectionByAlias={};for(const[r,s]of n.entries()){const a=this.collections[r];if(a)for(const l of s)this.collectionByAlias[l]=a}this.query.orderBy&&this.query.orderBy.length>0&&(this.compare=T3(this.orderByIndices)),this.compareOptions=this.config.defaultStringCollation??ik(this.query).compareOptions,this.compileBasePipeline()}hasJoins(e){return!!(e.join&&e.join.length>0||e.from.type==="queryRef"&&this.hasJoins(e.from.query))}getConfig(){return{id:this.id,getKey:this.config.getKey||(e=>this.resultKeys.get(e)),sync:this.getSyncConfig(),compare:this.compare,defaultStringCollation:this.compareOptions,gcTime:this.config.gcTime||5e3,schema:this.config.schema,onInsert:this.config.onInsert,onUpdate:this.config.onUpdate,onDelete:this.config.onDelete,startSync:this.config.startSync,singleResult:this.query.singleResult,utils:{getRunCount:this.getRunCount.bind(this),setWindow:this.setWindow.bind(this),getWindow:this.getWindow.bind(this),[k0]:{getBuilder:()=>this,hasCustomGetKey:!!this.config.getKey,hasJoins:this.hasJoins(this.query)}}}}setWindow(e){if(!this.windowFn)throw new r4;return this.currentWindow=e,this.windowFn(e),this.maybeRunGraphFn?.(),this.liveQueryCollection?.isLoadingSubset?new Promise(n=>{const r=this.liveQueryCollection.on("loadingSubset:change",s=>{s.isLoadingSubset||(r(),n())})}):!0}getWindow(){if(!(!this.windowFn||!this.currentWindow))return{offset:this.currentWindow.offset??0,limit:this.currentWindow.limit??0}}getCollectionIdForAlias(e){const n=this.compiledAliasToCollectionId[e];if(n)return n;const r=this.collectionByAlias[e];if(r)return r.id;throw new Error(`Unknown source alias "${e}"`)}isLazyAlias(e){return this.lazySources.has(e)}maybeRunGraph(e){if(!this.isGraphRunning){if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("maybeRunGraph called without active sync session. This should not happen.");this.isGraphRunning=!0;try{const{begin:n,commit:r}=this.currentSyncConfig,s=this.currentSyncState;if(this.isInErrorState)return;if(s.subscribedToAllCollections){for(;s.graph.pendingWork();)s.graph.run(),e?.();s.messagesCount===0&&(n(),r(),this.updateLiveQueryStatus(this.currentSyncConfig))}}finally{this.isGraphRunning=!1}}}scheduleGraphRun(e,n){const r=n?.contextId??jf()?.id,s=n?.jobId??this,a=(()=>{if(n?.dependencies)return n.dependencies;const f=new Set(this.builderDependencies);if(n?.alias){const d=this.aliasDependencies[n.alias];if(d)for(const m of d)f.add(m)}return f.delete(this),Array.from(f)})();if(r)for(const f of a)typeof f.scheduleGraphRun=="function"&&f.scheduleGraphRun(void 0,{contextId:r});if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("scheduleGraphRun called without active sync session. This should not happen.");let l=r?this.pendingGraphRuns.get(r):void 0;l||(l={loadCallbacks:new Set},r&&this.pendingGraphRuns.set(r,l)),e&&l.loadCallbacks.add(e);const c=r?void 0:l;cd.schedule({contextId:r,jobId:s,dependencies:a,run:()=>this.executeGraphRun(r,c)})}clearPendingGraphRun(e){this.pendingGraphRuns.delete(e)}hasPendingGraphRun(e){return this.pendingGraphRuns.has(e)}executeGraphRun(e,n){const r=n??(e?this.pendingGraphRuns.get(e):void 0);if(e&&this.pendingGraphRuns.delete(e),!r||!this.currentSyncConfig||!this.currentSyncState)return;this.incrementRunCount();const s=()=>{let a=!0,l;if(r.loadCallbacks.forEach(c=>{try{a=c()&&a}catch(f){a=!1,l??=f}}),l)throw l;return a};this.maybeRunGraph(s)}getSyncConfig(){return{rowUpdateMode:"full",sync:this.syncFn.bind(this)}}incrementRunCount(){this.runCount++}getRunCount(){return this.runCount}syncFn(e){this.liveQueryCollection=e.collection,this.currentSyncConfig=e;const n={messagesCount:0,subscribedToAllCollections:!1,unsubscribeCallbacks:new Set},r=this.extendPipelineWithChangeProcessing(e,n);this.currentSyncState=r,this.unsubscribeFromSchedulerClears=cd.onClear(a=>{this.clearPendingGraphRun(a)});const s=this.subscribeToAllCollections(e,r);return this.maybeRunGraphFn=()=>this.scheduleGraphRun(s),this.scheduleGraphRun(s),()=>{n.unsubscribeCallbacks.forEach(a=>a()),this.currentSyncConfig=void 0,this.currentSyncState=void 0,this.pendingGraphRuns.clear(),this.graphCache=void 0,this.inputsCache=void 0,this.pipelineCache=void 0,this.sourceWhereClausesCache=void 0,this.lazySources.clear(),this.optimizableOrderByCollections={},this.lazySourcesCallbacks={},Object.keys(this.subscriptions).forEach(a=>delete this.subscriptions[a]),this.compiledAliasToCollectionId={},this.unsubscribeFromSchedulerClears?.(),this.unsubscribeFromSchedulerClears=void 0}}compileBasePipeline(){this.graphCache=new W4,this.inputsCache=Object.fromEntries(Object.keys(this.collectionByAlias).map(r=>[r,this.graphCache.newInput()]));const e=I0(this.query,this.inputsCache,this.collections,this.subscriptions,this.lazySourcesCallbacks,this.lazySources,this.optimizableOrderByCollections,r=>{this.windowFn=r});this.pipelineCache=e.pipeline,this.sourceWhereClausesCache=e.sourceWhereClauses,this.compiledAliasToCollectionId=e.aliasToCollectionId;const n=Object.keys(this.compiledAliasToCollectionId).filter(r=>!Object.hasOwn(this.inputsCache,r));if(n.length>0)throw new n4(n)}maybeCompileBasePipeline(){return(!this.graphCache||!this.inputsCache||!this.pipelineCache)&&this.compileBasePipeline(),{graph:this.graphCache,inputs:this.inputsCache,pipeline:this.pipelineCache}}extendPipelineWithChangeProcessing(e,n){const{begin:r,commit:s}=e,{graph:a,inputs:l,pipeline:c}=this.maybeCompileBasePipeline();return c.pipe(pj(f=>{const d=f.getInner();n.messagesCount+=d.length,r(),d.reduce(I3,new Map).forEach(this.applyChanges.bind(this,e)),s()})),a.finalize(),n.graph=a,n.inputs=l,n.pipeline=c,n}applyChanges(e,n,r){const{write:s,collection:a}=e,{deletes:l,inserts:c,value:f,orderByIndex:d}=n;if(this.resultKeys.set(f,r),d!==void 0&&this.orderByIndices.set(f,d),c&&l===0)s({value:f,type:"insert"});else if(c>l||c===l&&a.has(a.getKeyFromItem(f)))s({value:f,type:"update"});else if(l>0)s({value:f,type:"delete"});else throw new Error(`Could not apply changes: ${JSON.stringify(n)}. This should never happen.`)}handleSourceStatusChange(e,n,r){const{status:s}=r;if(s==="error"){this.transitionToError(`Source collection '${n}' entered error state`);return}if(s==="cleaned-up"){this.transitionToError(`Source collection '${n}' was manually cleaned up while live query '${this.id}' depends on it. Live queries prevent automatic GC, so this was likely a manual cleanup() call.`);return}this.updateLiveQueryStatus(e)}updateLiveQueryStatus(e){const{markReady:n}=e;this.isInErrorState||this.allCollectionsReady()&&n()}transitionToError(e){this.isInErrorState=!0,console.error(`[Live Query Error] ${e}`),this.liveQueryCollection?._lifecycle.setStatus("error")}allCollectionsReady(){return Object.values(this.collections).every(e=>e.isReady())}subscribeToAllCollections(e,n){const r=Object.entries(this.compiledAliasToCollectionId);if(r.length===0)throw new Error(`Compiler returned no alias metadata for query '${this.id}'. This should not happen; please report.`);const s=r.map(([l,c])=>{const f=this.collectionByAlias[l]??this.collections[c],d=E3(f);d&&d!==this?(this.aliasDependencies[l]=[d],this.builderDependencies.add(d)):this.aliasDependencies[l]=[];const m=new x3(l,c,f,this),p=f.on("status:change",x=>{this.handleSourceStatusChange(e,c,x)});n.unsubscribeCallbacks.add(p);const g=m.subscribe();return this.subscriptions[l]=g,m.loadMoreIfNeeded.bind(m,g)}),a=()=>(s.map(l=>l()),!0);return n.subscribedToAllCollections=!0,this.updateLiveQueryStatus(e),a}}function A3(t){return typeof t.query=="function"?HL(t.query):XE(t.query)}function T3(t){return(e,n)=>{const r=t.get(e),s=t.get(n);return r&&s?r<s?-1:r>s?1:0:0}}function O3(t){const e={};function n(s){s.type==="collectionRef"?e[s.collection.id]=s.collection:s.type==="queryRef"&&r(s.query)}function r(s){if(s.from&&n(s.from),s.join&&Array.isArray(s.join))for(const a of s.join)a.from&&n(a.from)}return r(t),e}function ik(t){const e=t.from;if(e.type==="collectionRef")return e.collection;if(e.type==="queryRef")return ik(e.query);throw new Error(`Failed to extract collection. Invalid FROM clause: ${JSON.stringify(t)}`)}function M3(t){const e=new Map;function n(s){if(s)if(s.type==="collectionRef"){const{id:a}=s.collection,l=e.get(a);l?l.add(s.alias):e.set(a,new Set([s.alias]))}else s.type==="queryRef"&&r(s.query)}function r(s){if(s&&(n(s.from),s.join))for(const a of s.join)n(a.from)}return r(t),e}function I3(t,[[e,n],r]){const[s,a]=n,l=t.get(e)||{deletes:0,inserts:0,value:s,orderByIndex:a};return r<0?l.deletes+=Math.abs(r):r>0&&(l.inserts+=r,l.value=s,l.orderByIndex=a),t.set(e,l),t}function Y_(t){return new R3(t).getConfig()}function tg(t){if(typeof t=="function"){const n=Y_({query:t});return J_(n)}else{const e=t,n=Y_(e);return e.utils&&(n.utils={...n.utils,...e.utils}),J_(n)}}function J_(t){const e=Hd(t),n=_3(t);return n&&C3(e,n),e}const ng=1;function ak(t,e=[]){const n=t&&typeof t=="object"&&typeof t.subscribeChanges=="function"&&typeof t.startSyncImmediate=="function"&&typeof t.id=="string",r=q.useRef(null),s=q.useRef(null),a=q.useRef(null),l=q.useRef(0),c=q.useRef(null),f=!r.current||n&&a.current!==t||!n&&(s.current===null||s.current.length!==e.length||s.current.some((x,S)=>x!==e[S]));if(f)if(n)t.startSyncImmediate(),r.current=t,a.current=t;else if(typeof t=="function"){const x=new Vt,S=t(x);if(S==null)r.current=null;else if(S instanceof T0)S.startSyncImmediate(),r.current=S;else if(S instanceof Vt)r.current=tg({query:t,startSync:!0,gcTime:ng});else if(S&&typeof S=="object")r.current=tg({startSync:!0,gcTime:ng,...S});else throw new Error(`useLiveQuery callback must return a QueryBuilder, LiveQueryCollectionConfig, Collection, undefined, or null. Got: ${typeof S}`);s.current=[...e]}else r.current=tg({startSync:!0,gcTime:ng,...t}),s.current=[...e];f&&(l.current=0,c.current=null);const d=q.useRef(null);(!d.current||f)&&(d.current=x=>{if(!r.current)return()=>{};const S=r.current.subscribeChanges(()=>{l.current+=1,x()});return r.current.status==="ready"&&(l.current+=1,x()),()=>{S.unsubscribe()}});const m=q.useRef(null);(!m.current||f)&&(m.current=()=>{const x=l.current,S=r.current;return(!c.current||c.current.version!==x||c.current.collection!==S)&&(c.current={collection:S,version:x}),c.current});const p=q.useSyncExternalStore(d.current,m.current),g=q.useRef(null),y=q.useRef(null);if(!g.current||g.current.version!==p.version||g.current.collection!==p.collection){if(!p.collection)y.current={state:void 0,data:void 0,collection:void 0,status:"disabled",isLoading:!1,isReady:!0,isIdle:!1,isError:!1,isCleanedUp:!1,isEnabled:!1};else{const x=Array.from(p.collection.entries()),E=p.collection.config.singleResult;let _=null,k=null;y.current={get state(){return _||(_=new Map(x)),_},get data(){return k||(k=x.map(([,R])=>R)),E?k[0]:k},collection:p.collection,status:p.collection.status,isLoading:p.collection.status==="loading",isReady:p.collection.status==="ready",isIdle:p.collection.status==="idle",isError:p.collection.status==="error",isCleanedUp:p.collection.status==="cleaned-up",isEnabled:!0}}g.current=p}return y.current}class ai extends Fn{constructor(e){super(e),this.name="QueryCollectionError"}}class N3 extends ai{constructor(){super("[QueryCollection] queryKey must be provided."),this.name="QueryKeyRequiredError"}}class D3 extends ai{constructor(){super("[QueryCollection] queryFn must be provided."),this.name="QueryFnRequiredError"}}class z3 extends ai{constructor(){super("[QueryCollection] queryClient must be provided."),this.name="QueryClientRequiredError"}}class j3 extends ai{constructor(){super("[QueryCollection] getKey must be provided."),this.name="GetKeyRequiredError"}}class L3 extends ai{constructor(){super("Collection must be in 'ready' state for manual sync operations. Sync not initialized yet."),this.name="SyncNotInitializedError"}}class P3 extends ai{constructor(e){super(`Duplicate key '${e}' found within batch operations`),this.name="DuplicateKeyInBatchError"}}class F3 extends ai{constructor(e){super(`Update operation: Item with key '${e}' does not exist`),this.name="UpdateOperationItemNotFoundError"}}class $3 extends ai{constructor(e){super(`Delete operation: Item with key '${e}' does not exist`),this.name="DeleteOperationItemNotFoundError"}}const Ti=new WeakMap;function B3(t,e){const n=Array.isArray(t)?t:[t],r=[];for(const s of n)if(s.type==="delete"){const a=Array.isArray(s.key)?s.key:[s.key];for(const l of a)r.push({type:"delete",key:l})}else{const a=Array.isArray(s.data)?s.data:[s.data];for(const l of a){let c;if(s.type==="update")c=e.getKey(l);else{const f=e.collection.validateData(l,s.type==="upsert"?"insert":s.type);c=e.getKey(f)}r.push({type:s.type,key:c,data:l})}}return r}function U3(t,e){const n=new Set;for(const r of t){if(n.has(r.key))throw new P3(r.key);if(n.add(r.key),r.type==="update"){if(!e.collection._state.syncedData.has(r.key))throw new F3(r.key)}else if(r.type==="delete"&&!e.collection._state.syncedData.has(r.key))throw new $3(r.key)}}function _l(t,e){const n=B3(t,e);U3(n,e),e.begin();for(const s of n)switch(s.type){case"insert":{const a=e.collection.validateData(s.data,"insert");e.write({type:"insert",value:a});break}case"update":{const l={...e.collection._state.syncedData.get(s.key),...s.data},c=e.collection.validateData(l,"update",s.key);e.write({type:"update",value:c});break}case"delete":{const a=e.collection._state.syncedData.get(s.key);e.write({type:"delete",value:a});break}case"upsert":{const a=e.collection._state.syncedData.has(s.key),l=e.collection.validateData(s.data,a?"update":"insert",s.key);a?e.write({type:"update",value:l}):e.write({type:"insert",value:l});break}}e.commit();const r=Array.from(e.collection._state.syncedData.values());e.updateCacheData?e.updateCacheData(r):e.queryClient.setQueryData(e.queryKey,r)}function q3(t){function e(){const n=t();if(!n)throw new L3;return n}return{writeInsert(n){const r={type:"insert",data:n},s=e(),a=Ti.get(s);if(a?.isActive){a.operations.push(r);return}_l(r,s)},writeUpdate(n){const r={type:"update",data:n},s=e(),a=Ti.get(s);if(a?.isActive){a.operations.push(r);return}_l(r,s)},writeDelete(n){const r={type:"delete",key:n},s=e(),a=Ti.get(s);if(a?.isActive){a.operations.push(r);return}_l(r,s)},writeUpsert(n){const r={type:"upsert",data:n},s=e(),a=Ti.get(s);if(a?.isActive){a.operations.push(r);return}_l(r,s)},writeBatch(n){const r=e();if(Ti.get(r)?.isActive)throw new Error("Cannot nest writeBatch calls. Complete the current batch before starting a new one.");const a={operations:[],isActive:!0};Ti.set(r,a);try{const l=n();if(l&&typeof l=="object"&&"then"in l&&typeof l.then=="function")throw new Error("writeBatch does not support async callbacks. The callback must be synchronous.");a.operations.length>0&&_l(a.operations,r)}finally{a.isActive=!1,Ti.delete(r)}}}}function H3(t){if(!t)return;const e={};return t.where&&(e.where=hy(t.where)),t.orderBy?.length&&(e.orderBy=t.orderBy.map(n=>{const r={expression:hy(n.expression),direction:n.compareOptions.direction,nulls:n.compareOptions.nulls,stringSort:n.compareOptions.stringSort};return n.compareOptions.stringSort==="locale"?{...r,locale:n.compareOptions.locale,localeOptions:n.compareOptions.localeOptions}:r})),t.limit!==void 0&&(e.limit=t.limit),t.offset!==void 0&&(e.offset=t.offset),Object.keys(e).length===0?void 0:JSON.stringify(e)}function hy(t){if(!t)return null;switch(t.type){case"val":return{type:"val",value:py(t.value)};case"ref":return{type:"ref",path:[...t.path]};case"func":return{type:"func",name:t.name,args:t.args.map(e=>hy(e))};default:return null}}function py(t){if(t===void 0)return{__type:"undefined"};if(typeof t=="number"){if(Number.isNaN(t))return{__type:"nan"};if(t===Number.POSITIVE_INFINITY)return{__type:"infinity",sign:1};if(t===Number.NEGATIVE_INFINITY)return{__type:"infinity",sign:-1}}return t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"?t:t instanceof Date?{__type:"date",value:t.toJSON()}:Array.isArray(t)?t.map(e=>py(e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,py(n)])):t}class V3{constructor(e,n,r){this.state=e,this.refetchFn=n,this.refetch=n,this.writeInsert=r.writeInsert,this.writeUpdate=r.writeUpdate,this.writeDelete=r.writeDelete,this.writeUpsert=r.writeUpsert,this.writeBatch=r.writeBatch}async clearError(){this.state.lastError=void 0,this.state.errorCount=0,this.state.lastErrorUpdatedAt=0,await this.refetchFn({throwOnError:!0})}get lastError(){return this.state.lastError}get isError(){return!!this.state.lastError}get errorCount(){return this.state.errorCount}get isFetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isFetching)}get isRefetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isRefetching)}get isLoading(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isLoading)}get dataUpdatedAt(){return Math.max(0,...Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().dataUpdatedAt))}get fetchStatus(){return Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().fetchStatus)}}function ok(t){const{queryKey:e,queryFn:n,select:r,queryClient:s,enabled:a,refetchInterval:l,retry:c,retryDelay:f,staleTime:d,getKey:m,onInsert:p,onUpdate:g,onDelete:y,meta:x,...S}=t,E=S.syncMode??"eager";if(!e)throw new N3;if(!n)throw new D3;if(!s)throw new z3;if(!m)throw new j3;const _={lastError:void 0,errorCount:0,lastErrorUpdatedAt:0,observers:new Map},k=new Map,R=new Map,N=new Map,L=new Map,A=new Map,I=(ae,z)=>{const D=N.get(ae)||new Set;D.add(z),N.set(ae,D);const $=R.get(z)||new Set;$.add(ae),R.set(z,$)},j=(ae,z)=>{const D=N.get(ae)||new Set;D.delete(z),N.set(ae,D);const $=R.get(z)||new Set;return $.delete(ae),R.set(z,$),D.size===0},P=ae=>{const{begin:z,write:D,commit:$,markReady:T,collection:K}=ae;let se=!1;const ce=me=>{if(typeof e=="function")return e(me);if(E==="on-demand"){const Ne=H3(me);return Ne!==void 0?[...e,Ne]:e}else return e},ye=(me={},Ne=n)=>{const be=ce(me),ge=Ar(be),$e={...x,loadSubsetOptions:me};if(_.observers.has(ge)){A.set(ge,(A.get(ge)||0)+1);const Ce=_.observers.get(ge),xe=Ce.getCurrentResult();return xe.isSuccess?!0:xe.isError?Promise.reject(xe.error):new Promise((Pe,vt)=>{const at=Ce.subscribe(ot=>{ot.isSuccess?(at(),Pe()):ot.isError&&(at(),vt(ot.error))})})}const ne={queryKey:be,queryFn:Ne,meta:$e,structuralSharing:!0,notifyOnChangeProps:"all",...a!==void 0&&{enabled:a},...l!==void 0&&{refetchInterval:l},...c!==void 0&&{retry:c},...f!==void 0&&{retryDelay:f},...d!==void 0&&{staleTime:d}},de=new aE(s,ne);k.set(ge,be),_.observers.set(ge,de),A.set(ge,(A.get(ge)||0)+1);const _e=new Promise((Ce,xe)=>{const Pe=de.subscribe(vt=>{vt.isSuccess?(Pe(),Ce()):vt.isError&&(Pe(),xe(vt.error))})});return(se||K.subscriberCount>0)&&Ue(de,ge),_e},ke=me=>{const Ne=Ar(me);return ge=>{if(ge.isSuccess){_.lastError=void 0,_.errorCount=0;const $e=ge.data,ne=r?r($e):$e;if(!Array.isArray(ne)||ne.some(Ce=>typeof Ce!="object")){const Ce=r?`@tanstack/query-db-collection: select() must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(me)}`:`@tanstack/query-db-collection: queryFn must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(me)}`;console.error(Ce);return}const de=new Map(K._state.syncedData.entries()),_e=new Map;ne.forEach(Ce=>{const xe=m(Ce);_e.set(xe,Ce)}),z(),de.forEach((Ce,xe)=>{const Pe=_e.get(xe);Pe?Tr(Ce,Pe)||D({type:"update",value:Pe}):j(xe,Ne)&&D({type:"delete",value:Ce})}),_e.forEach((Ce,xe)=>{I(xe,Ne),de.has(xe)||D({type:"insert",value:Ce})}),$(),T()}else ge.isError&&(ge.errorUpdatedAt!==_.lastErrorUpdatedAt&&(_.lastError=ge.error,_.errorCount++,_.lastErrorUpdatedAt=ge.errorUpdatedAt),console.error(`[QueryCollection] Error observing query ${String(me)}:`,ge.error),T())}},ve=me=>L.has(me),Ue=(me,Ne)=>{if(!ve(Ne)){const be=k.get(Ne),ge=ke(be),$e=me.subscribe(ge);L.set(Ne,$e);const ne=me.getCurrentResult();(ne.isSuccess||ne.isError)&&ge(ne)}},Fe=()=>{_.observers.forEach(Ue)},Ge=()=>{L.forEach(me=>{me()}),L.clear()};se=!0;const yt=K.on("subscribers:change",({subscriberCount:me})=>{me>0?Fe():me===0&&Ge()});if(E==="eager"){const me=ye({});me instanceof Promise&&me.catch(()=>{})}else T();Fe(),_.observers.forEach((me,Ne)=>{const be=k.get(Ne);ke(be)(me.getCurrentResult())});const lt=me=>{L.get(me)?.(),L.delete(me);const Ne=R.get(me)??new Set,be=[];Ne.forEach(ge=>{const $e=N.get(ge);$e&&($e.delete(me),$e.size===0&&(N.delete(ge),K.has(ge)&&be.push(K.get(ge))))}),be.length>0&&(z(),be.forEach(ge=>{D({type:"delete",value:ge})}),$()),_.observers.delete(me),R.delete(me),k.delete(me),A.delete(me)},it=me=>{const Ne=A.get(me)||0,be=_.observers.get(me);if(Ne<=0&&(L.get(me)?.(),L.delete(me)),be?.hasListeners()??!1){A.set(me,0);return}Ne>0&&console.warn(`[cleanupQueryIfIdle] Invariant violation: refcount=${Ne} but no listeners. Cleaning up to prevent leak.`,{hashedQueryKey:me}),lt(me)},ht=me=>{lt(me)},Xe=s.getQueryCache().subscribe(me=>{const Ne=me.query.queryHash;me.type==="removed"&&k.has(Ne)&&it(Ne)});return{loadSubset:E==="eager"?void 0:ye,unloadSubset:E==="eager"?void 0:me=>{const Ne=ce(me),be=Ar(Ne),$e=(A.get(be)||0)-1;$e<=0?(A.set(be,0),it(be)):A.set(be,$e)},cleanup:async()=>{yt(),Ge();const me=[...k.values()],Ne=[..._.observers.keys()];for(const be of Ne)ht(be);Xe(),await Promise.all(me.map(async be=>{await s.cancelQueries({queryKey:be,exact:!0}),s.removeQueries({queryKey:be,exact:!0})}))}}},M=async ae=>{const D=[...k.values()].map($=>_.observers.get(Ar($)).refetch({throwOnError:ae?.throwOnError}));await Promise.all(D)},B=ae=>{const z=typeof e=="function"?e({}):e;r?s.setQueryData(z,D=>{if(!D||typeof D!="object")return D;if(Array.isArray(D))return ae;const $=r(D);if(Array.isArray($)){for(const T of Object.keys(D))if(D[T]===$)return{...D,[T]:ae}}if(Array.isArray(D.data))return{...D,data:ae};if(Array.isArray(D.items))return{...D,items:ae};if(Array.isArray(D.results))return{...D,results:ae};for(const T of Object.keys(D))if(Array.isArray(D[T]))return{...D,[T]:ae};return D}):s.setQueryData(z,ae)};let Q=null;const Z=ae=>{const{begin:z,write:D,commit:$,collection:T}=ae,K=typeof e=="function"?e({}):e;return Q={collection:T,queryClient:s,queryKey:K,getKey:m,begin:z,write:D,commit:$,updateCacheData:B},P(ae)},te=q3(()=>Q),V=p?async ae=>{const z=await p(ae)??{};return z.refetch!==!1&&await M(),z}:void 0,F=g?async ae=>{const z=await g(ae)??{};return z.refetch!==!1&&await M(),z}:void 0,X=y?async ae=>{const z=await y(ae)??{};return z.refetch!==!1&&await M(),z}:void 0,oe=new V3(_,M,te);return{...S,getKey:m,syncMode:E,sync:{sync:Z},onInsert:V,onUpdate:F,onDelete:X,utils:oe}}const lk=new lE({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}});async function uk(t){const e=await fetch(`/data/${t}`);if(!e.ok)throw new Error(`Failed to list entries: ${e.statusText}`);const n=await e.json(),r=[];for(const s of n){const a=await fetch(`/data/${t}/${encodeURIComponent(s.id)}`);if(a.ok){const l=await a.json();r.push(l)}}return r}async function hd(t,e){const n=await fetch(`/data/${t}/${encodeURIComponent(e.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error(`Failed to save item: ${n.statusText}`)}async function ck(t,e){const n=await fetch(`/data/${t}/${encodeURIComponent(e)}`,{method:"DELETE"});if(!n.ok&&n.status!==404)throw new Error(`Failed to delete item: ${n.statusText}`)}const uf="connections",Yl=Hd(ok({queryKey:["connections"],queryFn:async()=>uk(uf),getKey:t=>t.id,queryClient:lk,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await hd(uf,n)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await hd(uf,n)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await ck(uf,n.id)}))}})),cf="queries";Hd(ok({queryKey:["saved-queries"],queryFn:async()=>uk(cf),getKey:t=>t.id,queryClient:lk,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await hd(cf,n)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await hd(cf,n)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await ck(cf,n.id)}))}}));Hd($L({id:"preferences",storageKey:"granite-preferences",getKey:t=>t.id}));const X_={postgres:{label:"PostgreSQL",placeholder:"postgres://user:password@localhost:5432/database"},mysql:{label:"MySQL",placeholder:"user:password@tcp(localhost:3306)/database"},sqlite:{label:"SQLite",placeholder:"/path/to/database.db"},sqlserver:{label:"SQL Server",placeholder:"sqlserver://user:password@localhost:1433?database=mydb"},oracle:{label:"Oracle",placeholder:"oracle://user:password@localhost:1521/service_name"}},K3={postgres:{active:"bg-blue-500/10 border-blue-500/50 text-blue-600 dark:text-blue-400",label:"PG"},mysql:{active:"bg-yellow-500/10 border-yellow-500/50 text-yellow-600 dark:text-yellow-400",label:"MySQL"},sqlite:{active:"bg-purple-500/10 border-purple-500/50 text-purple-600 dark:text-purple-400",label:"SQLite"},sqlserver:{active:"bg-red-500/10 border-red-500/50 text-red-600 dark:text-red-400",label:"MSSQL"},oracle:{active:"bg-orange-500/10 border-orange-500/50 text-orange-600 dark:text-orange-400",label:"Oracle"}},W_={s3:{label:"Amazon S3",color:"bg-orange-500/10 border-orange-500/50 text-orange-600 dark:text-orange-400"},"azure-blob":{label:"Azure Blob",color:"bg-blue-500/10 border-blue-500/50 text-blue-600 dark:text-blue-400"}};function G3({connection:t,onSave:e,onClose:n}){const r=t?.type==="storage"?"storage":"database",[s,a]=q.useState(r),[l,c]=q.useState(t?.name??""),[f,d]=q.useState(t?.type==="database"?t.driver:"postgres"),[m,p]=q.useState(t?.type==="database"?t.dsn:""),[g,y]=q.useState(t?.type==="storage"?t.provider:"s3"),[x,S]=q.useState(t?.type==="storage"&&t.provider==="s3"?t.config.region:"us-east-1"),[E,_]=q.useState(t?.type==="storage"&&t.provider==="s3"?t.config.accessKeyId:""),[k,R]=q.useState(t?.type==="storage"&&t.provider==="s3"?t.config.secretAccessKey:""),[N,L]=q.useState(t?.type==="storage"&&t.provider==="s3"?t.config.endpoint??"":""),[A,I]=q.useState(t?.type==="storage"&&t.provider==="azure-blob"?t.config.accountName:""),[j,P]=q.useState(t?.type==="storage"&&t.provider==="azure-blob"?t.config.accountKey??"":""),[M,B]=q.useState(t?.type==="storage"&&t.provider==="azure-blob"?t.config.connectionString??"":""),[Q,Z]=q.useState("idle"),[te,V]=q.useState(null),F=!!t,X=async()=>{Z("testing"),V(null);try{if(s==="database"){if(!m)return;const T=await(await fetch("/sql/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({driver:f,dsn:m,query:"SELECT 1",params:[]})})).json();T.error?(Z("error"),V(T.error)):Z("success")}else{const $=oe(),T=await fetch("/storage/containers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:g,config:$})});if(T.ok)Z("success");else{const K=await T.json();Z("error"),V(K.message||"Connection failed")}}}catch($){Z("error"),V($ instanceof Error?$.message:"Connection failed")}},oe=()=>g==="s3"?{region:x,accessKeyId:E,secretAccessKey:k,...N&&{endpoint:N}}:{accountName:A,...j&&{accountKey:j},...M&&{connectionString:M}},ae=$=>{if($.preventDefault(),!!l)if(s==="database"){if(!m)return;e({type:"database",name:l,driver:f,dsn:m})}else{const T=oe();e({type:"storage",name:l,provider:g,config:T})}},z=()=>l?s==="database"?!!m:g==="s3"?!!x&&!!E&&!!k:!!A&&(!!j||!!M):!1,D=X_[f];return w.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[w.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:n}),w.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-[#1a1a1a] rounded-2xl shadow-2xl border border-neutral-200 dark:border-white/10 overflow-hidden",children:[w.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-neutral-200 dark:border-white/10",children:[w.jsx("h2",{className:"text-base font-semibold text-neutral-800 dark:text-neutral-100",children:F?"Edit Connection":"New Connection"}),w.jsx("button",{onClick:n,className:"p-1.5 -mr-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:w.jsx(Cu,{className:"w-4 h-4 text-neutral-500"})})]}),w.jsxs("form",{onSubmit:ae,className:"p-5 space-y-4",children:[!F&&w.jsxs("div",{className:"flex gap-2 p-1 bg-neutral-100 dark:bg-white/5 rounded-xl",children:[w.jsxs("button",{type:"button",onClick:()=>{a("database"),Z("idle"),V(null)},className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${s==="database"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:[w.jsx(fu,{className:"w-4 h-4"}),"Database"]}),w.jsxs("button",{type:"button",onClick:()=>{a("storage"),Z("idle"),V(null)},className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${s==="storage"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:[w.jsx(uD,{className:"w-4 h-4"}),"Storage"]})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Connection Name"}),w.jsx("input",{type:"text",placeholder:s==="database"?"My Database":"My Storage",value:l,onChange:$=>c($.target.value),className:"w-full px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-colors",autoFocus:!0})]}),s==="database"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Database Type"}),w.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:Object.keys(X_).map($=>{const T=K3[$];return w.jsx("button",{type:"button",onClick:()=>{d($),Z("idle"),V(null)},className:`px-2 py-2 text-[10px] font-semibold rounded-lg border transition-all ${f===$?T.active:"bg-neutral-50 dark:bg-white/5 border-neutral-200 dark:border-white/10 text-neutral-500 hover:bg-neutral-100 dark:hover:bg-white/10"}`,children:T.label},$)})})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Connection String"}),w.jsx("input",{type:"text",placeholder:D.placeholder,value:m,onChange:$=>{p($.target.value),Z("idle"),V(null)},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-colors"}),w.jsxs("p",{className:"text-[10px] text-neutral-400 dark:text-neutral-600",children:[D.label," connection string format"]})]})]}),s==="storage"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Storage Provider"}),w.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:Object.keys(W_).map($=>{const T=W_[$];return w.jsx("button",{type:"button",onClick:()=>{y($),Z("idle"),V(null)},className:`px-3 py-2 text-xs font-semibold rounded-lg border transition-all ${g===$?T.color:"bg-neutral-50 dark:bg-white/5 border-neutral-200 dark:border-white/10 text-neutral-500 hover:bg-neutral-100 dark:hover:bg-white/10"}`,children:T.label},$)})})]}),g==="s3"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Region"}),w.jsx("input",{type:"text",placeholder:"us-east-1",value:x,onChange:$=>{S($.target.value),Z("idle")},className:"w-full px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Access Key ID"}),w.jsx("input",{type:"text",placeholder:"AKIAIOSFODNN7EXAMPLE",value:E,onChange:$=>{_($.target.value),Z("idle")},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Secret Access Key"}),w.jsx("input",{type:"password",placeholder:"",value:k,onChange:$=>{R($.target.value),Z("idle")},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsxs("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:["Custom Endpoint ",w.jsx("span",{className:"text-neutral-400",children:"(optional)"})]}),w.jsx("input",{type:"text",placeholder:"https://s3.example.com",value:N,onChange:$=>{L($.target.value),Z("idle")},className:"w-full px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"}),w.jsx("p",{className:"text-[10px] text-neutral-400 dark:text-neutral-600",children:"For S3-compatible services like MinIO, Wasabi, etc."})]})]}),g==="azure-blob"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Storage Account Name"}),w.jsx("input",{type:"text",placeholder:"mystorageaccount",value:A,onChange:$=>{I($.target.value),Z("idle")},className:"w-full px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsxs("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:["Account Key ",w.jsx("span",{className:"text-neutral-400",children:"(or use connection string)"})]}),w.jsx("input",{type:"password",placeholder:"",value:j,onChange:$=>{P($.target.value),Z("idle")},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsxs("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:["Connection String ",w.jsx("span",{className:"text-neutral-400",children:"(alternative)"})]}),w.jsx("input",{type:"password",placeholder:"DefaultEndpointsProtocol=https;AccountName=...",value:M,onChange:$=>{B($.target.value),Z("idle")},className:"w-full px-3 py-2 text-sm font-mono text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-colors"})]})]})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsxs("button",{type:"button",onClick:X,disabled:!z()||Q==="testing",className:"flex items-center gap-2 px-3 py-2 text-xs font-medium text-neutral-700 dark:text-neutral-200 bg-neutral-100 dark:bg-white/5 hover:bg-neutral-200 dark:hover:bg-white/10 disabled:opacity-50 rounded-lg transition-colors",children:[Q==="testing"?w.jsx(Ki,{className:"w-3.5 h-3.5 animate-spin text-neutral-500 dark:text-neutral-400"}):Q==="success"?w.jsx(iD,{className:"w-3.5 h-3.5 text-blue-500"}):Q==="error"?w.jsx(oD,{className:"w-3.5 h-3.5 text-red-500"}):w.jsx(ND,{className:"w-3.5 h-3.5 text-neutral-500 dark:text-neutral-400"}),Q==="testing"?"Testing...":"Test Connection"]}),Q==="success"&&w.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:" Connection successful"}),Q==="error"&&te&&w.jsx("p",{className:"text-xs text-red-500 dark:text-red-400 break-all",children:te})]}),w.jsxs("div",{className:"flex gap-2 pt-2",children:[w.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2.5 text-sm font-medium text-neutral-600 dark:text-neutral-400 bg-neutral-100 dark:bg-white/5 hover:bg-neutral-200 dark:hover:bg-white/10 rounded-xl transition-colors",children:"Cancel"}),w.jsx("button",{type:"submit",disabled:!z(),className:"flex-1 px-4 py-2.5 text-sm font-medium bg-blue-500 text-white rounded-xl hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:F?"Save Changes":"Add Connection"})]})]})]})]})}function xo(t){return{provider:t.provider,config:t.config}}async function Q3(t){const e=await fetch("/storage/containers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xo(t))});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to list containers")}return e.json()}async function Z3(t,e){const n=await fetch("/storage/containers/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...xo(t),name:e})});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to create container")}}async function Vd(t,e,n={}){const r=await fetch("/storage/objects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...xo(t),container:e,prefix:n.prefix||"",delimiter:n.delimiter??"/",maxKeys:n.maxKeys||1e3,continuationToken:n.continuationToken})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to list objects")}return r.json()}async function Y3(t,e,n){const r=await fetch("/storage/object/details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...xo(t),container:e,key:n})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to get object details")}return r.json()}async function J3(t,e,n,r=3600){const s=await fetch("/storage/object/presign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...xo(t),container:e,key:n,expiresIn:r})});if(!s.ok){const l=await s.json();throw new Error(l.message||"Failed to generate presigned URL")}return(await s.json()).url}async function X3(t,e,n,r){const s=new FormData;s.append("file",r),s.append("provider",t.provider),s.append("config",JSON.stringify(t.config)),s.append("container",e),s.append("key",n);const a=await fetch("/storage/upload",{method:"POST",body:s});if(!a.ok){const l=await a.json();throw new Error(l.message||"Failed to upload file")}}async function fk(t,e,n){const r=await fetch("/storage/object/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...xo(t),container:e,keys:n})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to delete objects")}}async function dk(t,e,n){const r=await Vd(t,e,{prefix:n,delimiter:"",maxKeys:1e3});if(r.objects.length===0)return;const s=r.objects.map(a=>a.key);await fk(t,e,s),r.isTruncated&&await dk(t,e,n)}function W3(t){const e=t.split("/").filter(Boolean);return e.length<=1?"":e.slice(0,-1).join("/")}function yu(t){const e=t.split("/").filter(Boolean);return e[e.length-1]||t}function hk(t){if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB","TB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(2))} ${n[r]}`}function e5(t){const e=yu(t),n=e.lastIndexOf(".");return n>0?e.slice(n+1).toLowerCase():""}function pk(t){if(t.endsWith("/"))return"folder";const e=e5(t),n=["jpg","jpeg","png","gif","webp","svg","ico","bmp"],r=["pdf","doc","docx","xls","xlsx","ppt","pptx","txt","csv"],s=["js","ts","jsx","tsx","html","css","json","xml","yaml","yml","md","py","go","rs","java"],a=["zip","tar","gz","rar","7z","bz2"];return n.includes(e)?"image":r.includes(e)?"document":s.includes(e)?"code":a.includes(e)?"archive":"file"}function t5(t){return t?{"application/json":"JSON","application/xml":"XML","application/pdf":"PDF","application/zip":"ZIP Archive","application/gzip":"GZIP Archive","text/plain":"Plain Text","text/html":"HTML","text/css":"CSS","text/javascript":"JavaScript","image/jpeg":"JPEG Image","image/png":"PNG Image","image/gif":"GIF Image","image/webp":"WebP Image","image/svg+xml":"SVG Image"}[t]||t:"Unknown"}function n5(t){const e=tn.c(69),{connection:n,onClose:r}=t,s=po(),[a,l]=q.useState(""),c=n.provider==="s3"?"Bucket":"Container";let f;e[0]!==n?(f=$=>Z3(n,$),e[0]=n,e[1]=f):f=e[1];let d;e[2]!==n.id||e[3]!==r||e[4]!==s?(d=()=>{s.invalidateQueries({queryKey:["storage-containers",n.id]}),r()},e[2]=n.id,e[3]=r,e[4]=s,e[5]=d):d=e[5];let m;e[6]!==f||e[7]!==d?(m={mutationFn:f,onSuccess:d},e[6]=f,e[7]=d,e[8]=m):m=e[8];const p=uu(m);let g;e[9]!==p||e[10]!==a?(g=$=>{$.preventDefault(),a.trim()&&p.mutate(a.trim())},e[9]=p,e[10]=a,e[11]=g):g=e[11];const y=g;let x;e[12]!==r?(x=w.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:r}),e[12]=r,e[13]=x):x=e[13];let S;e[14]===Symbol.for("react.memo_cache_sentinel")?(S=w.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:w.jsx(NE,{className:"w-4 h-4 text-blue-500"})}),e[14]=S):S=e[14];let E;e[15]!==c?(E=w.jsxs("div",{className:"flex items-center gap-3",children:[S,w.jsxs("h2",{className:"text-base font-semibold text-neutral-900 dark:text-neutral-100",children:["Create ",c]})]}),e[15]=c,e[16]=E):E=e[16];let _;e[17]===Symbol.for("react.memo_cache_sentinel")?(_=w.jsx(Cu,{className:"w-4 h-4 text-neutral-500"}),e[17]=_):_=e[17];let k;e[18]!==r?(k=w.jsx("button",{onClick:r,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:_}),e[18]=r,e[19]=k):k=e[19];let R;e[20]!==E||e[21]!==k?(R=w.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-neutral-200 dark:border-neutral-800",children:[E,k]}),e[20]=E,e[21]=k,e[22]=R):R=e[22];let N;e[23]!==n.name?(N=w.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Creating in ",w.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:n.name})]}),e[23]=n.name,e[24]=N):N=e[24];let L;e[25]!==c?(L=w.jsxs("label",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:[c," Name"]}),e[25]=c,e[26]=L):L=e[26];let A;e[27]===Symbol.for("react.memo_cache_sentinel")?(A=$=>l($.target.value),e[27]=A):A=e[27];let I;e[28]!==c?(I=c.toLowerCase(),e[28]=c,e[29]=I):I=e[29];const j=`my-${I}`;let P;e[30]!==p.isPending||e[31]!==a||e[32]!==j?(P=w.jsx("input",{type:"text",value:a,onChange:A,placeholder:j,className:"w-full px-3 py-2 text-sm border border-neutral-200 dark:border-neutral-700 rounded-lg bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500",autoFocus:!0,disabled:p.isPending}),e[30]=p.isPending,e[31]=a,e[32]=j,e[33]=P):P=e[33];const M=n.provider==="s3"?"Bucket names must be globally unique and follow S3 naming rules":"Container names must be lowercase and can contain letters, numbers, and hyphens";let B;e[34]!==M?(B=w.jsx("p",{className:"text-[11px] text-neutral-400 dark:text-neutral-500",children:M}),e[34]=M,e[35]=B):B=e[35];let Q;e[36]!==L||e[37]!==P||e[38]!==B?(Q=w.jsxs("div",{className:"space-y-1.5",children:[L,P,B]}),e[36]=L,e[37]=P,e[38]=B,e[39]=Q):Q=e[39];let Z;e[40]!==p.error?(Z=p.error&&w.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:w.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:p.error instanceof Error?p.error.message:"Failed to create container"})}),e[40]=p.error,e[41]=Z):Z=e[41];let te;e[42]!==p.isPending||e[43]!==r?(te=w.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-lg transition-colors",disabled:p.isPending,children:"Cancel"}),e[42]=p.isPending,e[43]=r,e[44]=te):te=e[44];let V;e[45]!==p.isPending||e[46]!==a?(V=!a.trim()||p.isPending,e[45]=p.isPending,e[46]=a,e[47]=V):V=e[47];let F;e[48]!==p.isPending?(F=p.isPending&&w.jsx(Ki,{className:"w-3.5 h-3.5 animate-spin"}),e[48]=p.isPending,e[49]=F):F=e[49];let X;e[50]!==c||e[51]!==V||e[52]!==F?(X=w.jsxs("button",{type:"submit",disabled:V,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors flex items-center gap-2",children:[F,"Create ",c]}),e[50]=c,e[51]=V,e[52]=F,e[53]=X):X=e[53];let oe;e[54]!==te||e[55]!==X?(oe=w.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[te,X]}),e[54]=te,e[55]=X,e[56]=oe):oe=e[56];let ae;e[57]!==y||e[58]!==N||e[59]!==Q||e[60]!==Z||e[61]!==oe?(ae=w.jsxs("form",{onSubmit:y,className:"p-5 space-y-4",children:[N,Q,Z,oe]}),e[57]=y,e[58]=N,e[59]=Q,e[60]=Z,e[61]=oe,e[62]=ae):ae=e[62];let z;e[63]!==R||e[64]!==ae?(z=w.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-neutral-900 rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[R,ae]}),e[63]=R,e[64]=ae,e[65]=z):z=e[65];let D;return e[66]!==z||e[67]!==x?(D=w.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[x,z]}),e[66]=z,e[67]=x,e[68]=D):D=e[68],D}const r5={driver:"postgres",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT datname FROM pg_database WHERE datistemplate = false ORDER BY datname"},listTablesQuery(){return"SELECT tablename FROM pg_tables WHERE schemaname = 'public' ORDER BY tablename"},listColumnsQuery(t){return`
      SELECT 
        column_name as name,
        data_type as type,
        is_nullable = 'YES' as nullable,
        COALESCE(
          (SELECT true FROM information_schema.table_constraints tc
           JOIN information_schema.key_column_usage kcu ON tc.constraint_name = kcu.constraint_name
           WHERE tc.table_name = c.table_name AND kcu.column_name = c.column_name AND tc.constraint_type = 'PRIMARY KEY'),
          false
        ) as primary_key
      FROM information_schema.columns c
      WHERE table_name = '${t}' AND table_schema = 'public'
      ORDER BY ordinal_position
    `},selectAllQuery(t,e=100){return`SELECT * FROM ${t} LIMIT ${e}`},createDatabaseQuery(t){return`CREATE DATABASE "${t}"`},listConstraintsQuery(t){return`
      SELECT 
        tc.constraint_name,
        tc.constraint_type,
        kcu.column_name
      FROM information_schema.table_constraints tc
      LEFT JOIN information_schema.key_column_usage kcu 
        ON tc.constraint_name = kcu.constraint_name 
        AND tc.table_schema = kcu.table_schema
      WHERE tc.table_name = '${t}' 
        AND tc.table_schema = 'public'
      ORDER BY tc.constraint_name, kcu.ordinal_position
    `},listForeignKeysQuery(t){return`
      SELECT 
        tc.constraint_name,
        kcu.column_name,
        ccu.table_name AS foreign_table,
        ccu.column_name AS foreign_column
      FROM information_schema.table_constraints tc
      JOIN information_schema.key_column_usage kcu 
        ON tc.constraint_name = kcu.constraint_name
      JOIN information_schema.constraint_column_usage ccu 
        ON tc.constraint_name = ccu.constraint_name
      WHERE tc.table_name = '${t}' 
        AND tc.constraint_type = 'FOREIGN KEY'
        AND tc.table_schema = 'public'
      ORDER BY tc.constraint_name
    `},listIndexesQuery(t){return`
      SELECT 
        indexname AS index_name,
        indexdef AS definition
      FROM pg_indexes 
      WHERE tablename = '${t}'
        AND schemaname = 'public'
      ORDER BY indexname
    `},modifyDsnForDatabase(t,e){const n=new URL(t);return n.pathname=`/${e}`,n.toString()},parseDatabaseNames(t){return t.map(e=>String(e.datname))},parseTableNames(t){return t.map(e=>String(e.tablename))},parseColumns(t){return t.map(e=>({name:String(e.name),type:String(e.type),nullable:!!e.nullable,primaryKey:!!e.primary_key}))}},s5={driver:"mysql",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SHOW DATABASES"},listTablesQuery(){return"SHOW TABLES"},listColumnsQuery(t){return`DESCRIBE ${t}`},selectAllQuery(t,e=100){return`SELECT * FROM ${t} LIMIT ${e}`},createDatabaseQuery(t){return`CREATE DATABASE \`${t}\``},listConstraintsQuery(t){return`
      SELECT 
        tc.CONSTRAINT_NAME AS constraint_name,
        tc.CONSTRAINT_TYPE AS constraint_type,
        kcu.COLUMN_NAME AS column_name
      FROM information_schema.TABLE_CONSTRAINTS tc
      LEFT JOIN information_schema.KEY_COLUMN_USAGE kcu 
        ON tc.CONSTRAINT_NAME = kcu.CONSTRAINT_NAME 
        AND tc.TABLE_SCHEMA = kcu.TABLE_SCHEMA
        AND tc.TABLE_NAME = kcu.TABLE_NAME
      WHERE tc.TABLE_NAME = '${t}'
        AND tc.TABLE_SCHEMA = DATABASE()
      ORDER BY tc.CONSTRAINT_NAME, kcu.ORDINAL_POSITION
    `},listForeignKeysQuery(t){return`
      SELECT 
        kcu.CONSTRAINT_NAME AS constraint_name,
        kcu.COLUMN_NAME AS column_name,
        kcu.REFERENCED_TABLE_NAME AS foreign_table,
        kcu.REFERENCED_COLUMN_NAME AS foreign_column
      FROM information_schema.KEY_COLUMN_USAGE kcu
      WHERE kcu.TABLE_NAME = '${t}'
        AND kcu.TABLE_SCHEMA = DATABASE()
        AND kcu.REFERENCED_TABLE_NAME IS NOT NULL
      ORDER BY kcu.CONSTRAINT_NAME
    `},listIndexesQuery(t){return`SHOW INDEX FROM ${t}`},modifyDsnForDatabase(t,e){const n=t.split("/");return n.length>1?(n[n.length-1]=e,n.join("/")):`${t}/${e}`},parseDatabaseNames(t){return t.map(e=>String(e.Database||Object.values(e)[0]))},parseTableNames(t,e){return t.map(n=>{const r=n[`Tables_in_${e}`]||Object.values(n)[0];return String(r)})},parseColumns(t){return t.map(e=>({name:String(e.Field),type:String(e.Type),nullable:e.Null==="YES",primaryKey:e.Key==="PRI"}))}},i5={driver:"sqlite",supportedTableViews(){return["records","columns","indexes"]},listDatabasesQuery(){return"SELECT 'main' as name"},listTablesQuery(){return"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%' ORDER BY name"},listColumnsQuery(t){return`PRAGMA table_info(${t})`},selectAllQuery(t,e=100){return`SELECT * FROM ${t} LIMIT ${e}`},createDatabaseQuery(t){return null},listIndexesQuery(t){return`PRAGMA index_list(${t})`},modifyDsnForDatabase(t,e){return t},parseDatabaseNames(t){return t.map(e=>String(e.name))},parseTableNames(t){return t.map(e=>String(e.name))},parseColumns(t){return t.map(e=>({name:String(e.name),type:String(e.type||"TEXT"),nullable:e.notnull===0,primaryKey:e.pk===1}))}},a5={driver:"sqlserver",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT name FROM sys.databases WHERE name NOT IN ('tempdb', 'model') ORDER BY name"},listTablesQuery(){return"SELECT TABLE_NAME as name FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' ORDER BY TABLE_NAME"},listColumnsQuery(t){return`
      SELECT 
        c.COLUMN_NAME as name,
        c.DATA_TYPE as type,
        CASE WHEN c.IS_NULLABLE = 'YES' THEN 1 ELSE 0 END as nullable,
        CASE WHEN pk.COLUMN_NAME IS NOT NULL THEN 1 ELSE 0 END as primary_key
      FROM INFORMATION_SCHEMA.COLUMNS c
      LEFT JOIN (
        SELECT ku.COLUMN_NAME
        FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc
        JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE ku ON tc.CONSTRAINT_NAME = ku.CONSTRAINT_NAME
        WHERE tc.TABLE_NAME = '${t}' AND tc.CONSTRAINT_TYPE = 'PRIMARY KEY'
      ) pk ON c.COLUMN_NAME = pk.COLUMN_NAME
      WHERE c.TABLE_NAME = '${t}'
      ORDER BY c.ORDINAL_POSITION
    `},selectAllQuery(t,e=100){return`SELECT TOP ${e} * FROM ${t}`},createDatabaseQuery(t){return`CREATE DATABASE [${t}]`},listConstraintsQuery(t){return`
      SELECT 
        tc.CONSTRAINT_NAME AS constraint_name,
        tc.CONSTRAINT_TYPE AS constraint_type,
        kcu.COLUMN_NAME AS column_name
      FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc
      LEFT JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE kcu 
        ON tc.CONSTRAINT_NAME = kcu.CONSTRAINT_NAME
      WHERE tc.TABLE_NAME = '${t}'
      ORDER BY tc.CONSTRAINT_NAME, kcu.ORDINAL_POSITION
    `},listForeignKeysQuery(t){return`
      SELECT 
        fk.name AS constraint_name,
        COL_NAME(fkc.parent_object_id, fkc.parent_column_id) AS column_name,
        OBJECT_NAME(fkc.referenced_object_id) AS foreign_table,
        COL_NAME(fkc.referenced_object_id, fkc.referenced_column_id) AS foreign_column
      FROM sys.foreign_keys fk
      JOIN sys.foreign_key_columns fkc ON fk.object_id = fkc.constraint_object_id
      WHERE OBJECT_NAME(fk.parent_object_id) = '${t}'
      ORDER BY fk.name
    `},listIndexesQuery(t){return`
      SELECT 
        i.name AS index_name,
        i.type_desc AS index_type,
        i.is_unique,
        i.is_primary_key,
        STRING_AGG(c.name, ', ') AS columns
      FROM sys.indexes i
      JOIN sys.index_columns ic ON i.object_id = ic.object_id AND i.index_id = ic.index_id
      JOIN sys.columns c ON ic.object_id = c.object_id AND ic.column_id = c.column_id
      WHERE OBJECT_NAME(i.object_id) = '${t}' AND i.name IS NOT NULL
      GROUP BY i.name, i.type_desc, i.is_unique, i.is_primary_key
      ORDER BY i.name
    `},modifyDsnForDatabase(t,e){const n=new URL(t);return n.searchParams.set("database",e),n.toString()},parseDatabaseNames(t){return t.map(e=>String(e.name))},parseTableNames(t){return t.map(e=>String(e.name))},parseColumns(t){return t.map(e=>({name:String(e.name),type:String(e.type),nullable:!!e.nullable,primaryKey:!!e.primary_key}))}},o5={driver:"oracle",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT SYS_CONTEXT('USERENV', 'CON_NAME') as name FROM DUAL"},listTablesQuery(){return`
      SELECT table_name as name 
      FROM user_tables 
      WHERE table_name NOT LIKE 'LOGMNR%' 
        AND table_name NOT LIKE 'AQ$%'
        AND table_name NOT LIKE 'MVIEW$%'
        AND table_name NOT LIKE 'LOGSTDBY$%'
        AND table_name NOT LIKE 'ROLLING$%'
        AND table_name NOT LIKE 'SCHEDULER_%'
        AND table_name NOT IN ('OL$', 'OL$HINTS', 'OL$NODES', 'REDO_DB', 'REDO_LOG', 'HELP', 
                                'REPL_SUPPORT_MATRIX', 'REPL_VALID_COMPAT', 'SQLPLUS_PRODUCT_PROFILE')
      ORDER BY table_name
    `},listColumnsQuery(t){return`
      SELECT 
        c.column_name as name,
        c.data_type as type,
        CASE WHEN c.nullable = 'Y' THEN 1 ELSE 0 END as nullable,
        CASE WHEN cc.column_name IS NOT NULL THEN 1 ELSE 0 END as primary_key
      FROM user_tab_columns c
      LEFT JOIN (
        SELECT cc.column_name
        FROM user_constraints con
        JOIN user_cons_columns cc ON con.constraint_name = cc.constraint_name
        WHERE con.table_name = UPPER('${t}') AND con.constraint_type = 'P'
      ) cc ON c.column_name = cc.column_name
      WHERE c.table_name = UPPER('${t}')
      ORDER BY c.column_id
    `},selectAllQuery(t,e=100){return`SELECT * FROM ${t} FETCH FIRST ${e} ROWS ONLY`},createDatabaseQuery(t){return null},listConstraintsQuery(t){return`
      SELECT 
        con.constraint_name,
        con.constraint_type,
        col.column_name
      FROM user_constraints con
      LEFT JOIN user_cons_columns col 
        ON con.constraint_name = col.constraint_name
      WHERE con.table_name = UPPER('${t}')
      ORDER BY con.constraint_name, col.position
    `},listForeignKeysQuery(t){return`
      SELECT 
        a.constraint_name,
        a.column_name,
        c_pk.table_name AS foreign_table,
        b.column_name AS foreign_column
      FROM user_cons_columns a
      JOIN user_constraints c ON a.constraint_name = c.constraint_name
      JOIN user_constraints c_pk ON c.r_constraint_name = c_pk.constraint_name
      JOIN user_cons_columns b ON c_pk.constraint_name = b.constraint_name AND a.position = b.position
      WHERE c.constraint_type = 'R'
        AND c.table_name = UPPER('${t}')
      ORDER BY a.constraint_name
    `},listIndexesQuery(t){return`
      SELECT 
        index_name,
        uniqueness,
        index_type
      FROM user_indexes
      WHERE table_name = UPPER('${t}')
      ORDER BY index_name
    `},modifyDsnForDatabase(t,e){return t},parseDatabaseNames(t){return t.map(e=>{const n=e.name??e.NAME;return String(n??Object.values(e)[0])})},parseTableNames(t){return t.map(e=>{const n=e.name??e.NAME??e.TABLE_NAME;return String(n??Object.values(e)[0])})},parseColumns(t){return t.map(e=>({name:String(e.name??e.NAME),type:String(e.type??e.TYPE??e.DATA_TYPE),nullable:!!(e.nullable??e.NULLABLE),primaryKey:!!(e.primary_key??e.PRIMARY_KEY)}))}},l5={postgres:r5,mysql:s5,sqlite:i5,sqlserver:a5,oracle:o5};function oi(t){const e=l5[t];if(!e)throw new Error(`Unsupported driver: ${t}`);return e}async function Au(t,e,n){const r=await fetch("/sql/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({driver:t,dsn:e,query:n,params:[]})});if(!r.ok){const s=await r.json().catch(()=>({}));throw new Error(s.message||`HTTP error: ${r.status}`)}return r.json()}async function Jl(t,e,n){const r=await fetch("/sql/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({driver:t,dsn:e,query:n,params:[]})});if(!r.ok){const s=await r.json().catch(()=>({}));throw new Error(s.message||`HTTP error: ${r.status}`)}return r.json()}function u5(t){const e=t.trim().toUpperCase(),n=["SELECT","WITH","SHOW","DESCRIBE","EXPLAIN","PRAGMA"];for(const r of n)if(e.startsWith(r))return!0;return e.includes("RETURNING")}async function c5(t,e,n){return u5(n)?Au(t,e,n):Jl(t,e,n)}async function f5(t,e){const n=oi(t),r=n.listDatabasesQuery(),s=await Au(t,e,r);return n.parseDatabaseNames(s.rows||[])}async function mk(t,e,n){const r=oi(t),s=n?r.modifyDsnForDatabase(e,n):e,a=r.listTablesQuery(),l=await Au(t,s,a);return r.parseTableNames(l.rows||[],n)}async function d5(t,e,n){const r=oi(t),s=r.listColumnsQuery(n),a=await Au(t,e,s);return r.parseColumns(a.rows||[])}function my(t,e,n=100){return oi(e).selectAllQuery(t,n)}async function h5(t,e,n){const s=oi(t).createDatabaseQuery(n);if(!s)throw new Error(`Creating databases is not supported for ${t}`);await Jl(t,e,s)}function p5(t){return oi(t).createDatabaseQuery("test")!==null}function m5(t){return oi(t).supportedTableViews()}function g5(t,e,n){const r=oi(t);switch(n){case"records":return r.selectAllQuery(e);case"columns":return r.listColumnsQuery(e);case"constraints":return r.listConstraintsQuery?.(e)??null;case"foreignKeys":return r.listForeignKeysQuery?.(e)??null;case"indexes":return r.listIndexesQuery?.(e)??null;default:return null}}function y5({connection:t,activeDatabase:e,activeTable:n,expanded:r,onToggle:s,onSelectDatabase:a,onSelectTable:l}){const c=po(),[f,d]=q.useState({open:!1}),[m,p]=q.useState(""),[g,y]=q.useState(null),[x,S]=q.useState(!1),{data:E}=ys({queryKey:["databases",t.id],queryFn:()=>f5(t.driver,t.dsn),enabled:!!t}),{data:_}=ys({queryKey:["tables",t.id,e],queryFn:()=>e?mk(t.driver,t.dsn,e):[],enabled:!!t&&!!e}),k=async()=>{if(m.trim()){S(!0),y(null);try{await h5(t.driver,t.dsn,m.trim()),await c.invalidateQueries({queryKey:["databases",t.id]}),d({open:!1}),p("")}catch(R){y(R instanceof Error?R.message:"Failed to create database")}finally{S(!1)}}};return w.jsxs(w.Fragment,{children:[f.open&&w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:w.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] rounded-xl border border-neutral-200 dark:border-white/10 p-4 w-80 shadow-xl",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w.jsx(fu,{className:"w-5 h-5 text-blue-500"}),w.jsx("h2",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"Create Database"})]}),w.jsx("input",{type:"text",value:m,onChange:R=>p(R.target.value),placeholder:"Database name",className:"w-full px-3 py-2 text-sm rounded-lg border border-neutral-200 dark:border-white/10 bg-neutral-50 dark:bg-white/5 text-neutral-700 dark:text-neutral-200 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50",autoFocus:!0,onKeyDown:R=>{R.key==="Enter"&&m.trim()?k():R.key==="Escape"&&(d({open:!1}),p(""),y(null))}}),g&&w.jsx("p",{className:"mt-2 text-xs text-red-500",children:g}),w.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4",children:[w.jsx("button",{onClick:()=>{d({open:!1}),p(""),y(null)},className:"px-3 py-1.5 text-xs rounded-lg text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:"Cancel"}),w.jsx("button",{onClick:k,disabled:x||!m.trim(),className:"px-3 py-1.5 text-xs rounded-lg bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?"Creating...":"Create"})]})]})}),w.jsxs("div",{className:"space-y-0.5",children:[E?.map(R=>{const N=e===R,L=r.has(`${t.id}:${R}`);return w.jsxs("div",{children:[w.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>{s(`${t.id}:${R}`),a(R)},children:[w.jsx(fu,{className:`w-3.5 h-3.5 shrink-0 ${N?"text-blue-500":"text-neutral-400 dark:text-neutral-500"}`}),w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",children:R})]}),L&&N&&_&&w.jsxs("div",{className:"ml-4 space-y-0.5",children:[_.map(A=>w.jsxs("div",{className:`group flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-colors ${n===A?"bg-blue-500/10 dark:bg-blue-500/20":"hover:bg-neutral-100 dark:hover:bg-white/5"}`,onClick:()=>l(A),children:[w.jsx(VD,{className:`w-3.5 h-3.5 shrink-0 ${n===A?"text-blue-500":"text-neutral-400 dark:text-neutral-500"}`}),w.jsx("span",{className:`text-xs truncate flex-1 ${n===A?"text-blue-600 dark:text-blue-400":"text-neutral-500 dark:text-neutral-400"}`,children:A})]},A)),_.length===0&&w.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"No tables"})]})]},R)}),(!E||E.length===0)&&w.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"No databases"}),p5(t.driver)&&w.jsxs("button",{onClick:R=>{R.stopPropagation(),d({open:!0})},className:"flex items-center gap-2 px-3 py-1.5 w-full rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors text-left",children:[w.jsx($d,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500"}),w.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"New database"})]})]})]})}function v5(t){const e=tn.c(41),{connection:n,activeContainer:r,activePath:s,expanded:a,onToggle:l,onSelectContainer:c,onSelectPath:f,onCreateContainer:d}=t;let m;e[0]!==n.id?(m=["storage-containers",n.id],e[0]=n.id,e[1]=m):m=e[1];let p;e[2]!==n?(p=()=>Q3(n),e[2]=n,e[3]=p):p=e[3];const g=!!n;let y;e[4]!==m||e[5]!==p||e[6]!==g?(y={queryKey:m,queryFn:p,enabled:g},e[4]=m,e[5]=p,e[6]=g,e[7]=y):y=e[7];const{data:x,isLoading:S}=ys(y);let E;e[8]!==r||e[9]!==a?(E=r?a.has(`container:${r}`):!1,e[8]=r,e[9]=a,e[10]=E):E=e[10];const _=E;let k;e[11]!==r||e[12]!==n.id?(k=["storage-objects",n.id,r,""],e[11]=r,e[12]=n.id,e[13]=k):k=e[13];let R;e[14]!==r||e[15]!==n?(R=()=>Vd(n,r,{prefix:"",delimiter:"/"}),e[14]=r,e[15]=n,e[16]=R):R=e[16];const N=!!n&&!!r&&_;let L;e[17]!==k||e[18]!==R||e[19]!==N?(L={queryKey:k,queryFn:R,enabled:N},e[17]=k,e[18]=R,e[19]=N,e[20]=L):L=e[20];const{data:A}=ys(L);let I;e[21]!==r||e[22]!==s||e[23]!==n||e[24]!==x||e[25]!==S||e[26]!==a||e[27]!==c||e[28]!==f||e[29]!==l||e[30]!==A?(I=S?w.jsxs("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:["Loading ","Containers".toLowerCase(),"..."]}):x&&x.length>0?x.map(Z=>{const te=r===Z.name,V=a.has(`container:${Z.name}`);return w.jsxs("div",{children:[w.jsxs("div",{className:`group flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-colors ${te?"bg-blue-500/10 dark:bg-blue-500/20":"hover:bg-neutral-100 dark:hover:bg-white/5"}`,onClick:()=>{l(`container:${Z.name}`),c(Z.name)},children:[V?w.jsx(Bi,{className:"w-3 h-3 text-neutral-400 shrink-0"}):w.jsx(p0,{className:"w-3 h-3 text-neutral-400 shrink-0"}),w.jsx(NE,{className:`w-3.5 h-3.5 shrink-0 ${te?"text-blue-500":"text-neutral-400"}`}),w.jsx("span",{className:`text-xs truncate flex-1 ${te?"text-blue-600 dark:text-blue-400":"text-neutral-500 dark:text-neutral-400"}`,children:Z.name})]}),V&&te&&A&&w.jsx("div",{className:"ml-4",children:w.jsx(gk,{connection:n,container:Z.name,prefixes:A.prefixes,activePath:s,expanded:a,onToggle:l,onSelectPath:f,depth:0})})]},Z.name)}):w.jsxs("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:["No ","Containers".toLowerCase()," found"]}),e[21]=r,e[22]=s,e[23]=n,e[24]=x,e[25]=S,e[26]=a,e[27]=c,e[28]=f,e[29]=l,e[30]=A,e[31]=I):I=e[31];let j;e[32]!==d?(j=Z=>{Z.stopPropagation(),d()},e[32]=d,e[33]=j):j=e[33];let P;e[34]===Symbol.for("react.memo_cache_sentinel")?(P=w.jsx($d,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500"}),e[34]=P):P=e[34];let M;e[35]===Symbol.for("react.memo_cache_sentinel")?(M=w.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:["New ","Container".toLowerCase()]}),e[35]=M):M=e[35];let B;e[36]!==j?(B=w.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-3 py-1.5 w-full rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors text-left",children:[P,M]}),e[36]=j,e[37]=B):B=e[37];let Q;return e[38]!==I||e[39]!==B?(Q=w.jsxs("div",{className:"space-y-0.5",children:[I,B]}),e[38]=I,e[39]=B,e[40]=Q):Q=e[40],Q}function gk(t){const e=tn.c(19),{connection:n,container:r,prefixes:s,activePath:a,expanded:l,onToggle:c,onSelectPath:f,depth:d}=t;if(s.length===0)return null;let m;if(e[0]!==a||e[1]!==n||e[2]!==r||e[3]!==d||e[4]!==l||e[5]!==f||e[6]!==c||e[7]!==s){let g;e[9]!==a||e[10]!==n||e[11]!==r||e[12]!==d||e[13]!==l||e[14]!==f||e[15]!==c?(g=y=>w.jsx(b5,{connection:n,container:r,prefix:y,activePath:a,expanded:l,onToggle:c,onSelectPath:f,depth:d},y),e[9]=a,e[10]=n,e[11]=r,e[12]=d,e[13]=l,e[14]=f,e[15]=c,e[16]=g):g=e[16],m=s.map(g),e[0]=a,e[1]=n,e[2]=r,e[3]=d,e[4]=l,e[5]=f,e[6]=c,e[7]=s,e[8]=m}else m=e[8];let p;return e[17]!==m?(p=w.jsx("div",{className:"space-y-0.5",children:m}),e[17]=m,e[18]=p):p=e[18],p}function b5(t){const e=tn.c(49),{connection:n,container:r,prefix:s,activePath:a,expanded:l,onToggle:c,onSelectPath:f,depth:d}=t,m=`folder:${r}:${s}`;let p;e[0]!==l||e[1]!==m?(p=l.has(m),e[0]=l,e[1]=m,e[2]=p):p=e[2];const g=p,y=s.replace(/^\/+/,""),S=a.replace(/^\/+/,"")===y;let E;e[3]!==n.id||e[4]!==r||e[5]!==s?(E=["storage-objects",n.id,r,s],e[3]=n.id,e[4]=r,e[5]=s,e[6]=E):E=e[6];let _;e[7]!==n||e[8]!==r||e[9]!==s?(_=()=>Vd(n,r,{prefix:s,delimiter:"/"}),e[7]=n,e[8]=r,e[9]=s,e[10]=_):_=e[10];let k;e[11]!==g||e[12]!==E||e[13]!==_?(k={queryKey:E,queryFn:_,enabled:g},e[11]=g,e[12]=E,e[13]=_,e[14]=k):k=e[14];const{data:R}=ys(k);let N;e[15]!==s?(N=yu(s),e[15]=s,e[16]=N):N=e[16];const L=N,A=`group flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-colors ${S?"bg-blue-500/10 dark:bg-blue-500/20":"hover:bg-neutral-100 dark:hover:bg-white/5"}`;let I;e[17]!==r||e[18]!==m||e[19]!==f||e[20]!==c||e[21]!==s?(I=()=>{c(m),f(r,s)},e[17]=r,e[18]=m,e[19]=f,e[20]=c,e[21]=s,e[22]=I):I=e[22];let j;e[23]!==g?(j=g?w.jsx(Bi,{className:"w-3 h-3 text-neutral-400 shrink-0"}):w.jsx(p0,{className:"w-3 h-3 text-neutral-400 shrink-0"}),e[23]=g,e[24]=j):j=e[24];const P=`w-3.5 h-3.5 shrink-0 ${S?"text-blue-500":"text-neutral-400"}`;let M;e[25]!==P?(M=w.jsx(jE,{className:P}),e[25]=P,e[26]=M):M=e[26];const B=`text-xs truncate flex-1 ${S?"text-blue-600 dark:text-blue-400":"text-neutral-500 dark:text-neutral-400"}`;let Q;e[27]!==L||e[28]!==B?(Q=w.jsx("span",{className:B,children:L}),e[27]=L,e[28]=B,e[29]=Q):Q=e[29];let Z;e[30]!==M||e[31]!==Q||e[32]!==A||e[33]!==I||e[34]!==j?(Z=w.jsxs("div",{className:A,onClick:I,children:[j,M,Q]}),e[30]=M,e[31]=Q,e[32]=A,e[33]=I,e[34]=j,e[35]=Z):Z=e[35];let te;e[36]!==a||e[37]!==n||e[38]!==r||e[39]!==d||e[40]!==l||e[41]!==g||e[42]!==f||e[43]!==c||e[44]!==R?(te=g&&R&&R.prefixes.length>0&&w.jsx("div",{className:"ml-4",children:w.jsx(gk,{connection:n,container:r,prefixes:R.prefixes,activePath:a,expanded:l,onToggle:c,onSelectPath:f,depth:d+1})}),e[36]=a,e[37]=n,e[38]=r,e[39]=d,e[40]=l,e[41]=g,e[42]=f,e[43]=c,e[44]=R,e[45]=te):te=e[45];let V;return e[46]!==Z||e[47]!==te?(V=w.jsxs("div",{children:[Z,te]}),e[46]=Z,e[47]=te,e[48]=V):V=e[48],V}function Kd(t){return t.type==="database"}function yk(t){return t.type==="storage"}const e1={postgres:"text-blue-600 dark:text-blue-400",mysql:"text-yellow-600 dark:text-yellow-400",sqlite:"text-purple-600 dark:text-purple-400",sqlserver:"text-red-600 dark:text-red-400",oracle:"text-orange-600 dark:text-orange-400",s3:"text-orange-600 dark:text-orange-400","azure-blob":"text-blue-600 dark:text-blue-400"};function x5(t){const e=tn.c(37),{activeConnectionId:n,activeDatabase:r,activeTable:s,activeContainer:a,activePath:l,onSelectConnection:c,onSelectDatabase:f,onSelectTable:d,onSelectContainer:m,onSelectPath:p,showAddModal:g,onAddModalClose:y}=t,x=g===void 0?!1:g,S=ak(_5);let E;e[0]===Symbol.for("react.memo_cache_sentinel")?(E={open:!1},e[0]=E):E=e[0];const[_,k]=q.useState(E),[R,N]=q.useState(null);let L;e[1]===Symbol.for("react.memo_cache_sentinel")?(L=new Set,e[1]=L):L=e[1];const[A,I]=q.useState(L);let j;e[2]===Symbol.for("react.memo_cache_sentinel")?(j=T=>{I(K=>{const se=new Set(K);return se.has(T)?se.delete(T):se.add(T),se})},e[2]=j):j=e[2];const P=j;let M;e[3]!==_.connection||e[4]!==c?(M=T=>{if(_.connection)Yl.update(_.connection.id,K=>{Object.assign(K,T)});else{const K=crypto.randomUUID(),se={...T,id:K,createdAt:new Date().toISOString()};Yl.insert(se),c(K),I(ce=>new Set(ce).add(K))}k({open:!1})},e[3]=_.connection,e[4]=c,e[5]=M):M=e[5];const B=M;let Q;e[6]!==n||e[7]!==c?(Q=T=>{Yl.delete(T),n===T&&c(null)},e[6]=n,e[7]=c,e[8]=Q):Q=e[8];const Z=Q,te=w5,V=S5;let F;e[9]!==_.connection||e[10]!==_.open||e[11]!==y||e[12]!==B||e[13]!==x?(F=(_.open||x)&&w.jsx(G3,{connection:_.connection,onSave:B,onClose:()=>{k({open:!1}),y?.()}}),e[9]=_.connection,e[10]=_.open,e[11]=y,e[12]=B,e[13]=x,e[14]=F):F=e[14];let X;e[15]!==R?(X=R&&w.jsx(n5,{connection:R,onClose:()=>N(null)}),e[15]=R,e[16]=X):X=e[16];let oe;e[17]===Symbol.for("react.memo_cache_sentinel")?(oe=w.jsx("h1",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 pl-0.5",children:"Granite"}),e[17]=oe):oe=e[17];let ae;e[18]===Symbol.for("react.memo_cache_sentinel")?(ae=()=>k({open:!0,connection:null}),e[18]=ae):ae=e[18];let z;e[19]===Symbol.for("react.memo_cache_sentinel")?(z=w.jsxs("div",{className:"px-3 py-2.5 flex items-center justify-between gap-2",children:[oe,w.jsx("div",{className:"flex items-center gap-1",children:w.jsx("button",{onClick:ae,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Add connection",children:w.jsx($d,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"})})})]}),e[19]=z):z=e[19];let D;e[20]!==a||e[21]!==r||e[22]!==l||e[23]!==s||e[24]!==S?.data||e[25]!==Z||e[26]!==A||e[27]!==c||e[28]!==m||e[29]!==f||e[30]!==p||e[31]!==d?(D=w.jsxs("aside",{className:"w-64 bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl flex flex-col overflow-hidden dark:shadow-2xl",children:[z,w.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:(S?.data??[]).length===0?w.jsx("div",{className:"px-2 py-8 text-center text-neutral-400 dark:text-neutral-600 text-xs",children:"No connections yet"}):w.jsx("div",{className:"space-y-0.5 pb-2",children:(S?.data??[]).map(T=>{const K=A.has(T.id),se=Kd(T),ce=yk(T);return w.jsxs("div",{children:[w.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>{c(T.id),P(T.id)},children:[se?w.jsx(fu,{className:`w-3 h-3 shrink-0 ${V(T)}`}):w.jsx(PE,{className:`w-3 h-3 shrink-0 ${V(T)}`}),w.jsx("span",{className:`text-[10px] font-semibold shrink-0 uppercase ${V(T)}`,children:te(T)}),w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",children:T.name}),w.jsxs("div",{className:"flex items-center gap-0.5",children:[w.jsx("button",{onClick:ye=>{ye.stopPropagation(),k({open:!0,connection:T})},className:"inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-colors",title:"Edit",children:w.jsx(TD,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-blue-500 dark:hover:text-blue-400"})}),w.jsx("button",{onClick:ye=>{ye.stopPropagation(),Z(T.id)},className:"inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-colors",title:"Delete",children:w.jsx(du,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400"})})]})]}),K&&se&&w.jsx("div",{className:"ml-4",children:w.jsx(y5,{connection:T,activeDatabase:r,activeTable:s,expanded:A,onToggle:P,onSelectDatabase:f,onSelectTable:d})}),K&&ce&&w.jsx("div",{className:"ml-4",children:w.jsx(v5,{connection:T,activeContainer:a,activePath:l,expanded:A,onToggle:P,onSelectContainer:m,onSelectPath:p,onCreateContainer:()=>N(T)})})]},T.id)})})})]}),e[20]=a,e[21]=r,e[22]=l,e[23]=s,e[24]=S?.data,e[25]=Z,e[26]=A,e[27]=c,e[28]=m,e[29]=f,e[30]=p,e[31]=d,e[32]=D):D=e[32];let $;return e[33]!==D||e[34]!==F||e[35]!==X?($=w.jsxs(w.Fragment,{children:[F,X,D]}),e[33]=D,e[34]=F,e[35]=X,e[36]=$):$=e[36],$}function S5(t){return Kd(t)?e1[t.driver]||"text-neutral-500":e1[t.provider]||"text-neutral-500"}function w5(t){if(Kd(t))switch(t.driver){case"postgres":return"PG";case"mysql":return"MY";case"sqlserver":return"MS";case"oracle":return"OR";case"sqlite":return"SQ";default:return"DB"}else return t.provider==="s3"?"S3":"AZ"}function _5(t){return t.from({conn:Yl}).orderBy(C5,"desc")}function C5(t){const{conn:e}=t;return e.createdAt}function t1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function E5(t){if(Array.isArray(t))return t}function k5(t,e,n){return(e=N5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R5(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,l,c=[],f=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(f=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);f=!0);}catch(m){d=!0,s=m}finally{try{if(!f&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}}function A5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function r1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n1(Object(n),!0).forEach(function(r){k5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function T5(t,e){if(t==null)return{};var n,r,s=O5(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function O5(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function M5(t,e){return E5(t)||R5(t,e)||D5(t,e)||A5()}function I5(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N5(t){var e=I5(t,"string");return typeof e=="symbol"?e:e+""}function D5(t,e){if(t){if(typeof t=="string")return t1(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t1(t,e):void 0}}function z5(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function i1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s1(Object(n),!0).forEach(function(r){z5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j5(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(s,a){return a(s)},r)}}function Dl(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return s.length>=t.length?t.apply(this,s):function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return e.apply(n,[].concat(s,c))}}}function pd(t){return{}.toString.call(t).includes("Object")}function L5(t){return!Object.keys(t).length}function vu(t){return typeof t=="function"}function P5(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function F5(t,e){return pd(e)||ri("changeType"),Object.keys(e).some(function(n){return!P5(t,n)})&&ri("changeField"),e}function $5(t){vu(t)||ri("selectorType")}function B5(t){vu(t)||pd(t)||ri("handlerType"),pd(t)&&Object.values(t).some(function(e){return!vu(e)})&&ri("handlersType")}function U5(t){t||ri("initialIsRequired"),pd(t)||ri("initialType"),L5(t)&&ri("initialContent")}function q5(t,e){throw new Error(t[e]||t.default)}var H5={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},ri=Dl(q5)(H5),ff={changes:F5,selector:$5,handler:B5,initial:U5};function V5(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ff.initial(t),ff.handler(e);var n={current:t},r=Dl(Q5)(n,e),s=Dl(G5)(n),a=Dl(ff.changes)(t),l=Dl(K5)(n);function c(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(m){return m};return ff.selector(d),d(n.current)}function f(d){j5(r,s,a,l)(d)}return[c,f]}function K5(t,e){return vu(e)?e(t.current):e}function G5(t,e){return t.current=i1(i1({},t.current),e),e}function Q5(t,e,n){return vu(e)?e(t.current):Object.keys(n).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,t.current[r])}),n}var Z5={create:V5},Y5={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function J5(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return s.length>=t.length?t.apply(this,s):function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return e.apply(n,[].concat(s,c))}}}function X5(t){return{}.toString.call(t).includes("Object")}function W5(t){return t||a1("configIsRequired"),X5(t)||a1("configType"),t.urls?(eP(),{paths:{vs:t.urls.monacoBase}}):t}function eP(){console.warn(vk.deprecation)}function tP(t,e){throw new Error(t[e]||t.default)}var vk={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},a1=J5(tP)(vk),nP={config:W5},rP=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(s){return n.reduceRight(function(a,l){return l(a)},s)}};function bk(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],bk(t[n],e[n]))}),r1(r1({},t),e)}var sP={type:"cancelation",msg:"operation is manually canceled"};function rg(t){var e=!1,n=new Promise(function(r,s){t.then(function(a){return e?s(sP):r(a)}),t.catch(s)});return n.cancel=function(){return e=!0},n}var iP=["monaco"],aP=Z5.create({config:Y5,isInitialized:!1,resolve:null,reject:null,monaco:null}),xk=M5(aP,2),Tu=xk[0],Gd=xk[1];function oP(t){var e=nP.config(t),n=e.monaco,r=T5(e,iP);Gd(function(s){return{config:bk(s.config,r),monaco:n}})}function lP(){var t=Tu(function(e){var n=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:n,isInitialized:r,resolve:s}});if(!t.isInitialized){if(Gd({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),rg(sg);if(window.monaco&&window.monaco.editor)return Sk(window.monaco),t.resolve(window.monaco),rg(sg);rP(uP,fP)(dP)}return rg(sg)}function uP(t){return document.body.appendChild(t)}function cP(t){var e=document.createElement("script");return t&&(e.src=t),e}function fP(t){var e=Tu(function(r){var s=r.config,a=r.reject;return{config:s,reject:a}}),n=cP("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function dP(){var t=Tu(function(n){var r=n.config,s=n.resolve,a=n.reject;return{config:r,resolve:s,reject:a}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var r=n.m||n;Sk(r),t.resolve(r)},function(n){t.reject(n)})}function Sk(t){Tu().monaco||Gd({monaco:t})}function hP(){return Tu(function(t){var e=t.monaco;return e})}var sg=new Promise(function(t,e){return Gd({resolve:t,reject:e})}),wk={config:oP,init:lP,__getMonacoInstance:hP},pP={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ig=pP,mP={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},gP=mP;function yP({children:t}){return Or.createElement("div",{style:gP.container},t)}var vP=yP,bP=vP;function xP({width:t,height:e,isEditorReady:n,loading:r,_ref:s,className:a,wrapperProps:l}){return Or.createElement("section",{style:{...ig.wrapper,width:t,height:e},...l},!n&&Or.createElement(bP,null,r),Or.createElement("div",{ref:s,style:{...ig.fullWidth,...!n&&ig.hide},className:a}))}var SP=xP,_k=q.memo(SP);function wP(t){q.useEffect(t,[])}var Ck=wP;function _P(t,e,n=!0){let r=q.useRef(!0);q.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var Wn=_P;function Xl(){}function Wa(t,e,n,r){return CP(t,r)||EP(t,e,n,r)}function CP(t,e){return t.editor.getModel(Ek(t,e))}function EP(t,e,n,r){return t.editor.createModel(e,n,r?Ek(t,r):void 0)}function Ek(t,e){return t.Uri.parse(e)}function kP({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:s,originalModelPath:a,modifiedModelPath:l,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:f=!1,theme:d="light",loading:m="Loading...",options:p={},height:g="100%",width:y="100%",className:x,wrapperProps:S={},beforeMount:E=Xl,onMount:_=Xl}){let[k,R]=q.useState(!1),[N,L]=q.useState(!0),A=q.useRef(null),I=q.useRef(null),j=q.useRef(null),P=q.useRef(_),M=q.useRef(E),B=q.useRef(!1);Ck(()=>{let V=wk.init();return V.then(F=>(I.current=F)&&L(!1)).catch(F=>F?.type!=="cancelation"&&console.error("Monaco initialization: error:",F)),()=>A.current?te():V.cancel()}),Wn(()=>{if(A.current&&I.current){let V=A.current.getOriginalEditor(),F=Wa(I.current,t||"",r||n||"text",a||"");F!==V.getModel()&&V.setModel(F)}},[a],k),Wn(()=>{if(A.current&&I.current){let V=A.current.getModifiedEditor(),F=Wa(I.current,e||"",s||n||"text",l||"");F!==V.getModel()&&V.setModel(F)}},[l],k),Wn(()=>{let V=A.current.getModifiedEditor();V.getOption(I.current.editor.EditorOption.readOnly)?V.setValue(e||""):e!==V.getValue()&&(V.executeEdits("",[{range:V.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),V.pushUndoStop())},[e],k),Wn(()=>{A.current?.getModel()?.original.setValue(t||"")},[t],k),Wn(()=>{let{original:V,modified:F}=A.current.getModel();I.current.editor.setModelLanguage(V,r||n||"text"),I.current.editor.setModelLanguage(F,s||n||"text")},[n,r,s],k),Wn(()=>{I.current?.editor.setTheme(d)},[d],k),Wn(()=>{A.current?.updateOptions(p)},[p],k);let Q=q.useCallback(()=>{if(!I.current)return;M.current(I.current);let V=Wa(I.current,t||"",r||n||"text",a||""),F=Wa(I.current,e||"",s||n||"text",l||"");A.current?.setModel({original:V,modified:F})},[n,e,s,t,r,a,l]),Z=q.useCallback(()=>{!B.current&&j.current&&(A.current=I.current.editor.createDiffEditor(j.current,{automaticLayout:!0,...p}),Q(),I.current?.editor.setTheme(d),R(!0),B.current=!0)},[p,d,Q]);q.useEffect(()=>{k&&P.current(A.current,I.current)},[k]),q.useEffect(()=>{!N&&!k&&Z()},[N,k,Z]);function te(){let V=A.current?.getModel();c||V?.original?.dispose(),f||V?.modified?.dispose(),A.current?.dispose()}return Or.createElement(_k,{width:y,height:g,isEditorReady:k,loading:m,_ref:j,className:x,wrapperProps:S})}var RP=kP;q.memo(RP);function AP(t){let e=q.useRef();return q.useEffect(()=>{e.current=t},[t]),e.current}var TP=AP,df=new Map;function OP({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:s,path:a,theme:l="light",line:c,loading:f="Loading...",options:d={},overrideServices:m={},saveViewState:p=!0,keepCurrentModel:g=!1,width:y="100%",height:x="100%",className:S,wrapperProps:E={},beforeMount:_=Xl,onMount:k=Xl,onChange:R,onValidate:N=Xl}){let[L,A]=q.useState(!1),[I,j]=q.useState(!0),P=q.useRef(null),M=q.useRef(null),B=q.useRef(null),Q=q.useRef(k),Z=q.useRef(_),te=q.useRef(),V=q.useRef(r),F=TP(a),X=q.useRef(!1),oe=q.useRef(!1);Ck(()=>{let D=wk.init();return D.then($=>(P.current=$)&&j(!1)).catch($=>$?.type!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>M.current?z():D.cancel()}),Wn(()=>{let D=Wa(P.current,t||r||"",e||s||"",a||n||"");D!==M.current?.getModel()&&(p&&df.set(F,M.current?.saveViewState()),M.current?.setModel(D),p&&M.current?.restoreViewState(df.get(a)))},[a],L),Wn(()=>{M.current?.updateOptions(d)},[d],L),Wn(()=>{!M.current||r===void 0||(M.current.getOption(P.current.editor.EditorOption.readOnly)?M.current.setValue(r):r!==M.current.getValue()&&(oe.current=!0,M.current.executeEdits("",[{range:M.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),M.current.pushUndoStop(),oe.current=!1))},[r],L),Wn(()=>{let D=M.current?.getModel();D&&s&&P.current?.editor.setModelLanguage(D,s)},[s],L),Wn(()=>{c!==void 0&&M.current?.revealLine(c)},[c],L),Wn(()=>{P.current?.editor.setTheme(l)},[l],L);let ae=q.useCallback(()=>{if(!(!B.current||!P.current)&&!X.current){Z.current(P.current);let D=a||n,$=Wa(P.current,r||t||"",e||s||"",D||"");M.current=P.current?.editor.create(B.current,{model:$,automaticLayout:!0,...d},m),p&&M.current.restoreViewState(df.get(D)),P.current.editor.setTheme(l),c!==void 0&&M.current.revealLine(c),A(!0),X.current=!0}},[t,e,n,r,s,a,d,m,p,l,c]);q.useEffect(()=>{L&&Q.current(M.current,P.current)},[L]),q.useEffect(()=>{!I&&!L&&ae()},[I,L,ae]),V.current=r,q.useEffect(()=>{L&&R&&(te.current?.dispose(),te.current=M.current?.onDidChangeModelContent(D=>{oe.current||R(M.current.getValue(),D)}))},[L,R]),q.useEffect(()=>{if(L){let D=P.current.editor.onDidChangeMarkers($=>{let T=M.current.getModel()?.uri;if(T&&$.find(K=>K.path===T.path)){let K=P.current.editor.getModelMarkers({resource:T});N?.(K)}});return()=>{D?.dispose()}}return()=>{}},[L,N]);function z(){te.current?.dispose(),g?p&&df.set(a,M.current.saveViewState()):M.current.getModel()?.dispose(),M.current.dispose()}return Or.createElement(_k,{width:y,height:x,isEditorReady:L,loading:f,_ref:B,className:S,wrapperProps:E})}var MP=OP,IP=q.memo(MP),NP=IP;const DP={records:{icon:qD,label:"Records"},columns:{icon:fD,label:"Columns"},constraints:{icon:PD,label:"Constraints"},foreignKeys:{icon:_D,label:"Foreign Keys"},indexes:{icon:ED,label:"Indexes"}},zP=["SELECT","FROM","WHERE","AND","OR","NOT","IN","IS","NULL","LIKE","BETWEEN","ORDER BY","GROUP BY","HAVING","LIMIT","OFFSET","JOIN","LEFT JOIN","RIGHT JOIN","INNER JOIN","OUTER JOIN","ON","AS","DISTINCT","COUNT","SUM","AVG","MIN","MAX","INSERT INTO","VALUES","UPDATE","SET","DELETE FROM","CREATE TABLE","DROP TABLE","ALTER TABLE","ADD COLUMN","DROP COLUMN","INDEX","UNIQUE","PRIMARY KEY","FOREIGN KEY","REFERENCES","CASCADE","ASC","DESC","UNION","ALL","EXISTS","CASE","WHEN","THEN","ELSE","END","COALESCE","NULLIF","CAST","TRUE","FALSE"];function jP(t){const e=tn.c(61),{connection:n,selectedTable:r,onExecute:s,isLoading:a,schema:l,value:c,onChange:f,onToggleAI:d,aiPanelOpen:m,supportedViews:p,onSelectView:g,activeView:y,onExpandEditor:x}=t,[S,E]=q.useState(""),[_,k]=q.useState(!0),R=c!==void 0?c:S,N=f!==void 0?f:E,L=q.useRef(null),A=q.useRef(null),I=q.useRef(l),[j,P]=q.useState(LP);let M,B;e[0]===Symbol.for("react.memo_cache_sentinel")?(M=()=>{const Xe=window.matchMedia("(prefers-color-scheme: dark)"),rt=ft=>P(ft.matches);return Xe.addEventListener("change",rt),()=>Xe.removeEventListener("change",rt)},B=[],e[0]=M,e[1]=B):(M=e[0],B=e[1]),q.useEffect(M,B);let Q,Z;e[2]!==l?(Q=()=>{I.current=l},Z=[l],e[2]=l,e[3]=Q,e[4]=Z):(Q=e[3],Z=e[4]),q.useEffect(Q,Z);let te;e[5]!==n||e[6]!==r||e[7]!==N?(te=()=>{r&&n&&queueMicrotask(()=>N(my(r,n.driver)))},e[5]=n,e[6]=r,e[7]=N,e[8]=te):te=e[8];let V;e[9]!==n||e[10]!==r?(V=[r,n],e[9]=n,e[10]=r,e[11]=V):V=e[11],q.useEffect(te,V);let F;e[12]===Symbol.for("react.memo_cache_sentinel")?(F=(Xe,rt)=>{L.current=rt,A.current?.dispose(),A.current=rt.languages.registerCompletionItemProvider("sql",{triggerCharacters:[" ",".",",","("],provideCompletionItems:(ft,Ae)=>{const me=I.current,Ne=ft.getWordUntilPosition(Ae),be={startLineNumber:Ae.lineNumber,endLineNumber:Ae.lineNumber,startColumn:Ne.startColumn,endColumn:Ne.endColumn},ge=ft.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:Ae.lineNumber,endColumn:Ae.column}).toUpperCase(),$e=[],_e=ft.getLineContent(Ae.lineNumber).substring(0,Ae.column-1).match(/(\w+)\.$/);if(_e&&me?.columns){const Pe=_e[1].toLowerCase(),vt=Object.entries(me.columns).find(at=>{const[ot]=at;return ot.toLowerCase()===Pe})?.[1];return vt&&vt.forEach(at=>{$e.push({label:at.name,kind:rt.languages.CompletionItemKind.Field,detail:`${at.type}${at.primaryKey?" (PK)":""}${at.nullable?"":" NOT NULL"}`,insertText:at.name,range:be})}),{suggestions:$e}}const Ce=/\b(FROM|JOIN|INTO|UPDATE|TABLE)\s+$/i.test(ge)||/\b(FROM|JOIN|INTO|UPDATE|TABLE)\s+\w*$/i.test(ge),xe=/\bSELECT\s+(\w+\s*,\s*)*\w*$/i.test(ge)||/\bWHERE\s+.*$/i.test(ge)||/\bSET\s+.*$/i.test(ge)||/\bAND\s+\w*$/i.test(ge)||/\bOR\s+\w*$/i.test(ge)||/\bORDER BY\s+.*$/i.test(ge)||/\bGROUP BY\s+.*$/i.test(ge);return zP.forEach(Pe=>{Pe.toUpperCase().startsWith(Ne.word.toUpperCase())&&$e.push({label:Pe,kind:rt.languages.CompletionItemKind.Keyword,detail:"SQL keyword",insertText:Pe,range:be})}),me?.tables&&(Ce||!xe)&&me.tables.forEach(Pe=>{$e.push({label:Pe,kind:rt.languages.CompletionItemKind.Class,detail:"Table",insertText:Pe,range:be})}),me?.columns&&xe&&Object.entries(me.columns).forEach(Pe=>{const[vt,at]=Pe;at.forEach(ot=>{$e.push({label:ot.name,kind:rt.languages.CompletionItemKind.Field,detail:`${vt}.${ot.name} (${ot.type})`,insertText:ot.name,range:be}),$e.push({label:`${vt}.${ot.name}`,kind:rt.languages.CompletionItemKind.Field,detail:ot.type,insertText:`${vt}.${ot.name}`,range:be})})}),{suggestions:$e}}})},e[12]=F):F=e[12];const X=F;let oe,ae;e[13]===Symbol.for("react.memo_cache_sentinel")?(oe=()=>()=>{A.current?.dispose()},ae=[],e[13]=oe,e[14]=ae):(oe=e[13],ae=e[14]),q.useEffect(oe,ae);let z;e[15]!==n||e[16]!==s||e[17]!==R?(z=()=>{!n||!R.trim()||s(R)},e[15]=n,e[16]=s,e[17]=R,e[18]=z):z=e[18];const D=z;let $;e[19]!==D?($=Xe=>{(Xe.metaKey||Xe.ctrlKey)&&Xe.key==="Enter"&&(Xe.preventDefault(),D())},e[19]=D,e[20]=$):$=e[20];const T=$,K=`flex flex-col bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden dark:shadow-2xl transition-all ${_?"":"h-80"}`;let se;e[21]!==_||e[22]!==x?(se=()=>{_&&x&&x(),k(!_)},e[21]=_,e[22]=x,e[23]=se):se=e[23];const ce=_?"Expand editor":"Collapse editor";let ye;e[24]!==_?(ye=_?w.jsx(Bi,{className:"w-4 h-4"}):w.jsx(Gl,{className:"w-4 h-4"}),e[24]=_,e[25]=ye):ye=e[25];let ke;e[26]!==se||e[27]!==ce||e[28]!==ye?(ke=w.jsx("button",{onClick:se,className:"p-1.5 rounded-lg transition-colors text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/5",title:ce,children:ye}),e[26]=se,e[27]=ce,e[28]=ye,e[29]=ke):ke=e[29];let ve;e[30]!==y||e[31]!==g||e[32]!==r||e[33]!==p?(ve=r&&p&&g&&w.jsx("div",{className:"flex gap-0.5 p-1 bg-neutral-100 dark:bg-white/5 rounded-lg",children:p.map(Xe=>{const{icon:rt,label:ft}=DP[Xe],Ae=y===Xe;return w.jsxs("button",{type:"button",onClick:()=>{g(Xe),k(!0)},title:ft,className:`flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded-md transition-all whitespace-nowrap ${Ae?"bg-white dark:bg-neutral-700 text-neutral-900 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 hover:bg-white dark:hover:bg-neutral-700 hover:shadow-sm"}`,children:[w.jsx(rt,{className:"w-3.5 h-3.5"}),w.jsx("span",{className:"hidden lg:inline",children:ft})]},Xe)})}),e[30]=y,e[31]=g,e[32]=r,e[33]=p,e[34]=ve):ve=e[34];let Ue;e[35]===Symbol.for("react.memo_cache_sentinel")?(Ue=w.jsx("div",{className:"flex-1"}),e[35]=Ue):Ue=e[35];let Fe;e[36]!==n?(Fe=n?w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"font-medium text-neutral-600 dark:text-neutral-300",children:n.name}),w.jsx("span",{className:"mx-1.5",children:""}),w.jsx("span",{className:"uppercase",children:n.driver})]}):"No connection",e[36]=n,e[37]=Fe):Fe=e[37];let Ge;e[38]!==Fe?(Ge=w.jsx("span",{className:"text-[10px] text-neutral-400 dark:text-neutral-500",children:Fe}),e[38]=Fe,e[39]=Ge):Ge=e[39];let yt;e[40]!==m||e[41]!==d?(yt=d&&w.jsx("button",{onClick:d,className:`p-1.5 rounded-lg transition-colors ${m?"bg-amber-500/10 text-amber-500":"text-neutral-400 hover:text-amber-500 hover:bg-amber-500/10"}`,title:"Toggle AI Assistant",children:w.jsx(Yg,{className:"w-4 h-4"})}),e[40]=m,e[41]=d,e[42]=yt):yt=e[42];let lt;e[43]!==ke||e[44]!==ve||e[45]!==Ge||e[46]!==yt?(lt=w.jsxs("div",{className:"h-12 px-3 flex items-center gap-3 border-b border-neutral-200 dark:border-white/8",children:[ke,ve,Ue,Ge,yt]}),e[43]=ke,e[44]=ve,e[45]=Ge,e[46]=yt,e[47]=lt):lt=e[47];let it;e[48]!==n||e[49]!==D||e[50]!==_||e[51]!==j||e[52]!==a||e[53]!==N||e[54]!==R?(it=!_&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"flex-1 min-h-0",children:w.jsx(NP,{height:"100%",defaultLanguage:"sql",value:R,onChange:Xe=>N(Xe||""),onMount:X,theme:j?"vs-dark":"vs",options:{quickSuggestions:!0,suggestOnTriggerCharacters:!0,minimap:{enabled:!1},fontSize:13,fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",padding:{top:12,bottom:12},renderLineHighlight:"none",overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,scrollbar:{vertical:"auto",horizontal:"auto",verticalScrollbarSize:8,horizontalScrollbarSize:8},lineNumbersMinChars:3,folding:!1}})}),w.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 border-t border-neutral-200 dark:border-white/8",children:[w.jsxs("button",{onClick:D,disabled:!n||!R.trim()||a,className:"flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-md disabled:opacity-50 transition-colors",children:[w.jsx(MD,{className:"w-3 h-3"}),a?"Running...":"Run"]}),w.jsx("span",{className:"text-[10px] text-neutral-400 dark:text-neutral-600",children:""})]})]}),e[48]=n,e[49]=D,e[50]=_,e[51]=j,e[52]=a,e[53]=N,e[54]=R,e[55]=it):it=e[55];let ht;return e[56]!==T||e[57]!==K||e[58]!==lt||e[59]!==it?(ht=w.jsxs("div",{className:K,onKeyDown:T,children:[lt,it]}),e[56]=T,e[57]=K,e[58]=lt,e[59]=it,e[60]=ht):ht=e[60],ht}function LP(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function Ws(t,e){return typeof t=="function"?t(e):t}function nr(t,e){return n=>{e.setState(r=>({...r,[t]:Ws(n,r[t])}))}}function Qd(t){return t instanceof Function}function PP(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function FP(t,e){const n=[],r=s=>{s.forEach(a=>{n.push(a);const l=e(a);l!=null&&l.length&&r(l)})};return r(t),n}function De(t,e,n){let r=[],s;return a=>{let l;n.key&&n.debug&&(l=Date.now());const c=t(a);if(!(c.length!==r.length||c.some((m,p)=>r[p]!==m)))return s;r=c;let d;if(n.key&&n.debug&&(d=Date.now()),s=e(...c),n==null||n.onChange==null||n.onChange(s),n.key&&n.debug&&n!=null&&n.debug()){const m=Math.round((Date.now()-l)*100)/100,p=Math.round((Date.now()-d)*100)/100,g=p/16,y=(x,S)=>{for(x=String(x);x.length<S;)x=" "+x;return x};console.info(`%c ${y(p,5)} /${y(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,n?.key)}return s}}function ze(t,e,n,r){return{debug:()=>{var s;return(s=t?.debugAll)!=null?s:t[e]},key:!1,onChange:r}}function $P(t,e,n,r){const s=()=>{var l;return(l=a.getValue())!=null?l:t.options.renderFallbackValue},a={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:s,getContext:De(()=>[t,n,e,a],(l,c,f,d)=>({table:l,column:c,row:f,cell:d,getValue:d.getValue,renderValue:d.renderValue}),ze(t.options,"debugCells"))};return t._features.forEach(l=>{l.createCell==null||l.createCell(a,n,e,t)},{}),a}function BP(t,e,n,r){var s,a;const c={...t._getDefaultColumnDef(),...e},f=c.accessorKey;let d=(s=(a=c.id)!=null?a:f?typeof String.prototype.replaceAll=="function"?f.replaceAll(".","_"):f.replace(/\./g,"_"):void 0)!=null?s:typeof c.header=="string"?c.header:void 0,m;if(c.accessorFn?m=c.accessorFn:f&&(f.includes(".")?m=g=>{let y=g;for(const S of f.split(".")){var x;y=(x=y)==null?void 0:x[S]}return y}:m=g=>g[c.accessorKey]),!d)throw new Error;let p={id:`${String(d)}`,accessorFn:m,parent:r,depth:n,columnDef:c,columns:[],getFlatColumns:De(()=>[!0],()=>{var g;return[p,...(g=p.columns)==null?void 0:g.flatMap(y=>y.getFlatColumns())]},ze(t.options,"debugColumns")),getLeafColumns:De(()=>[t._getOrderColumnsFn()],g=>{var y;if((y=p.columns)!=null&&y.length){let x=p.columns.flatMap(S=>S.getLeafColumns());return g(x)}return[p]},ze(t.options,"debugColumns"))};for(const g of t._features)g.createColumn==null||g.createColumn(p,t);return p}const mn="debugHeaders";function o1(t,e,n){var r;let a={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const l=[],c=f=>{f.subHeaders&&f.subHeaders.length&&f.subHeaders.map(c),l.push(f)};return c(a),l},getContext:()=>({table:t,header:a,column:e})};return t._features.forEach(l=>{l.createHeader==null||l.createHeader(a,t)}),a}const UP={createTable:t=>{t.getHeaderGroups=De(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>{var a,l;const c=(a=r?.map(p=>n.find(g=>g.id===p)).filter(Boolean))!=null?a:[],f=(l=s?.map(p=>n.find(g=>g.id===p)).filter(Boolean))!=null?l:[],d=n.filter(p=>!(r!=null&&r.includes(p.id))&&!(s!=null&&s.includes(p.id)));return hf(e,[...c,...d,...f],t)},ze(t.options,mn)),t.getCenterHeaderGroups=De(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>(n=n.filter(a=>!(r!=null&&r.includes(a.id))&&!(s!=null&&s.includes(a.id))),hf(e,n,t,"center")),ze(t.options,mn)),t.getLeftHeaderGroups=De(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var s;const a=(s=r?.map(l=>n.find(c=>c.id===l)).filter(Boolean))!=null?s:[];return hf(e,a,t,"left")},ze(t.options,mn)),t.getRightHeaderGroups=De(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var s;const a=(s=r?.map(l=>n.find(c=>c.id===l)).filter(Boolean))!=null?s:[];return hf(e,a,t,"right")},ze(t.options,mn)),t.getFooterGroups=De(()=>[t.getHeaderGroups()],e=>[...e].reverse(),ze(t.options,mn)),t.getLeftFooterGroups=De(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),ze(t.options,mn)),t.getCenterFooterGroups=De(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),ze(t.options,mn)),t.getRightFooterGroups=De(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),ze(t.options,mn)),t.getFlatHeaders=De(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),ze(t.options,mn)),t.getLeftFlatHeaders=De(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),ze(t.options,mn)),t.getCenterFlatHeaders=De(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),ze(t.options,mn)),t.getRightFlatHeaders=De(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),ze(t.options,mn)),t.getCenterLeafHeaders=De(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),ze(t.options,mn)),t.getLeftLeafHeaders=De(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),ze(t.options,mn)),t.getRightLeafHeaders=De(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),ze(t.options,mn)),t.getLeafHeaders=De(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var s,a,l,c,f,d;return[...(s=(a=e[0])==null?void 0:a.headers)!=null?s:[],...(l=(c=n[0])==null?void 0:c.headers)!=null?l:[],...(f=(d=r[0])==null?void 0:d.headers)!=null?f:[]].map(m=>m.getLeafHeaders()).flat()},ze(t.options,mn))}};function hf(t,e,n,r){var s,a;let l=0;const c=function(g,y){y===void 0&&(y=1),l=Math.max(l,y),g.filter(x=>x.getIsVisible()).forEach(x=>{var S;(S=x.columns)!=null&&S.length&&c(x.columns,y+1)},0)};c(t);let f=[];const d=(g,y)=>{const x={depth:y,id:[r,`${y}`].filter(Boolean).join("_"),headers:[]},S=[];g.forEach(E=>{const _=[...S].reverse()[0],k=E.column.depth===x.depth;let R,N=!1;if(k&&E.column.parent?R=E.column.parent:(R=E.column,N=!0),_&&_?.column===R)_.subHeaders.push(E);else{const L=o1(n,R,{id:[r,y,R.id,E?.id].filter(Boolean).join("_"),isPlaceholder:N,placeholderId:N?`${S.filter(A=>A.column===R).length}`:void 0,depth:y,index:S.length});L.subHeaders.push(E),S.push(L)}x.headers.push(E),E.headerGroup=x}),f.push(x),y>0&&d(S,y-1)},m=e.map((g,y)=>o1(n,g,{depth:l,index:y}));d(m,l-1),f.reverse();const p=g=>g.filter(x=>x.column.getIsVisible()).map(x=>{let S=0,E=0,_=[0];x.subHeaders&&x.subHeaders.length?(_=[],p(x.subHeaders).forEach(R=>{let{colSpan:N,rowSpan:L}=R;S+=N,_.push(L)})):S=1;const k=Math.min(..._);return E=E+k,x.colSpan=S,x.rowSpan=E,{colSpan:S,rowSpan:E}});return p((s=(a=f[0])==null?void 0:a.headers)!=null?s:[]),f}const qP=(t,e,n,r,s,a,l)=>{let c={id:e,index:r,original:n,depth:s,parentId:l,_valuesCache:{},_uniqueValuesCache:{},getValue:f=>{if(c._valuesCache.hasOwnProperty(f))return c._valuesCache[f];const d=t.getColumn(f);if(d!=null&&d.accessorFn)return c._valuesCache[f]=d.accessorFn(c.original,r),c._valuesCache[f]},getUniqueValues:f=>{if(c._uniqueValuesCache.hasOwnProperty(f))return c._uniqueValuesCache[f];const d=t.getColumn(f);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(c._uniqueValuesCache[f]=d.columnDef.getUniqueValues(c.original,r),c._uniqueValuesCache[f]):(c._uniqueValuesCache[f]=[c.getValue(f)],c._uniqueValuesCache[f])},renderValue:f=>{var d;return(d=c.getValue(f))!=null?d:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>FP(c.subRows,f=>f.subRows),getParentRow:()=>c.parentId?t.getRow(c.parentId,!0):void 0,getParentRows:()=>{let f=[],d=c;for(;;){const m=d.getParentRow();if(!m)break;f.push(m),d=m}return f.reverse()},getAllCells:De(()=>[t.getAllLeafColumns()],f=>f.map(d=>$P(t,c,d,d.id)),ze(t.options,"debugRows")),_getAllCellsByColumnId:De(()=>[c.getAllCells()],f=>f.reduce((d,m)=>(d[m.column.id]=m,d),{}),ze(t.options,"debugRows"))};for(let f=0;f<t._features.length;f++){const d=t._features[f];d==null||d.createRow==null||d.createRow(c,t)}return c},HP={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},kk=(t,e,n)=>{var r,s;const a=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((s=t.getValue(e))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(a))};kk.autoRemove=t=>Mr(t);const Rk=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};Rk.autoRemove=t=>Mr(t);const Ak=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===n?.toLowerCase()};Ak.autoRemove=t=>Mr(t);const Tk=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};Tk.autoRemove=t=>Mr(t);const Ok=(t,e,n)=>!n.some(r=>{var s;return!((s=t.getValue(e))!=null&&s.includes(r))});Ok.autoRemove=t=>Mr(t)||!(t!=null&&t.length);const Mk=(t,e,n)=>n.some(r=>{var s;return(s=t.getValue(e))==null?void 0:s.includes(r)});Mk.autoRemove=t=>Mr(t)||!(t!=null&&t.length);const Ik=(t,e,n)=>t.getValue(e)===n;Ik.autoRemove=t=>Mr(t);const Nk=(t,e,n)=>t.getValue(e)==n;Nk.autoRemove=t=>Mr(t);const D0=(t,e,n)=>{let[r,s]=n;const a=t.getValue(e);return a>=r&&a<=s};D0.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,s=typeof n!="number"?parseFloat(n):n,a=e===null||Number.isNaN(r)?-1/0:r,l=n===null||Number.isNaN(s)?1/0:s;if(a>l){const c=a;a=l,l=c}return[a,l]};D0.autoRemove=t=>Mr(t)||Mr(t[0])&&Mr(t[1]);const ms={includesString:kk,includesStringSensitive:Rk,equalsString:Ak,arrIncludes:Tk,arrIncludesAll:Ok,arrIncludesSome:Mk,equals:Ik,weakEquals:Nk,inNumberRange:D0};function Mr(t){return t==null||t===""}const VP={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:nr("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);return typeof r=="string"?ms.includesString:typeof r=="number"?ms.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?ms.equals:Array.isArray(r)?ms.arrIncludes:ms.weakEquals},t.getFilterFn=()=>{var n,r;return Qd(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:ms[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,s;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const s=t.getFilterFn(),a=r?.find(m=>m.id===t.id),l=Ws(n,a?a.value:void 0);if(l1(s,l,t)){var c;return(c=r?.filter(m=>m.id!==t.id))!=null?c:[]}const f={id:t.id,value:l};if(a){var d;return(d=r?.map(m=>m.id===t.id?f:m))!=null?d:[]}return r!=null&&r.length?[...r,f]:[f]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=s=>{var a;return(a=Ws(e,s))==null?void 0:a.filter(l=>{const c=n.find(f=>f.id===l.id);if(c){const f=c.getFilterFn();if(l1(f,l.value,c))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function l1(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const KP=(t,e,n)=>n.reduce((r,s)=>{const a=s.getValue(t);return r+(typeof a=="number"?a:0)},0),GP=(t,e,n)=>{let r;return n.forEach(s=>{const a=s.getValue(t);a!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}),r},QP=(t,e,n)=>{let r;return n.forEach(s=>{const a=s.getValue(t);a!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}),r},ZP=(t,e,n)=>{let r,s;return n.forEach(a=>{const l=a.getValue(t);l!=null&&(r===void 0?l>=l&&(r=s=l):(r>l&&(r=l),s<l&&(s=l)))}),[r,s]},YP=(t,e)=>{let n=0,r=0;if(e.forEach(s=>{let a=s.getValue(t);a!=null&&(a=+a)>=a&&(++n,r+=a)}),n)return r/n},JP=(t,e)=>{if(!e.length)return;const n=e.map(a=>a.getValue(t));if(!PP(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),s=n.sort((a,l)=>a-l);return n.length%2!==0?s[r]:(s[r-1]+s[r])/2},XP=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),WP=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,e6=(t,e)=>e.length,ag={sum:KP,min:GP,max:QP,extent:ZP,mean:YP,median:JP,unique:XP,uniqueCount:WP,count:e6},t6={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:nr("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);if(typeof r=="number")return ag.sum;if(Object.prototype.toString.call(r)==="[object Date]")return ag.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return Qd(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:ag[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var s;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((s=n.subRows)!=null&&s.length)}}};function n6(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(a=>!e.includes(a.id));return n==="remove"?r:[...e.map(a=>t.find(l=>l.id===a)).filter(Boolean),...r]}const r6={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:nr("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=De(n=>[Wl(e,n)],n=>n.findIndex(r=>r.id===t.id),ze(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=Wl(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const s=Wl(e,n);return((r=s[s.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=De(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>s=>{let a=[];if(!(e!=null&&e.length))a=s;else{const l=[...e],c=[...s];for(;c.length&&l.length;){const f=l.shift(),d=c.findIndex(m=>m.id===f);d>-1&&a.push(c.splice(d,1)[0])}a=[...a,...c]}return n6(a,n,r)},ze(t.options,"debugTable"))}},og=()=>({left:[],right:[]}),s6={getInitialState:t=>({columnPinning:og(),...t}),getDefaultOptions:t=>({onColumnPinningChange:nr("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(s=>s.id).filter(Boolean);e.setColumnPinning(s=>{var a,l;if(n==="right"){var c,f;return{left:((c=s?.left)!=null?c:[]).filter(p=>!(r!=null&&r.includes(p))),right:[...((f=s?.right)!=null?f:[]).filter(p=>!(r!=null&&r.includes(p))),...r]}}if(n==="left"){var d,m;return{left:[...((d=s?.left)!=null?d:[]).filter(p=>!(r!=null&&r.includes(p))),...r],right:((m=s?.right)!=null?m:[]).filter(p=>!(r!=null&&r.includes(p)))}}return{left:((a=s?.left)!=null?a:[]).filter(p=>!(r!=null&&r.includes(p))),right:((l=s?.right)!=null?l:[]).filter(p=>!(r!=null&&r.includes(p)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var s,a,l;return((s=r.columnDef.enablePinning)!=null?s:!0)&&((a=(l=e.options.enableColumnPinning)!=null?l:e.options.enablePinning)!=null?a:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(c=>c.id),{left:r,right:s}=e.getState().columnPinning,a=n.some(c=>r?.includes(c)),l=n.some(c=>s?.includes(c));return a?"left":l?"right":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();return s?(n=(r=e.getState().columnPinning)==null||(r=r[s])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=De(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,s)=>{const a=[...r??[],...s??[]];return n.filter(l=>!a.includes(l.column.id))},ze(e.options,"debugRows")),t.getLeftVisibleCells=De(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(a=>n.find(l=>l.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),ze(e.options,"debugRows")),t.getRightVisibleCells=De(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(a=>n.find(l=>l.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),ze(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?og():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:og())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var s,a;return!!((s=r.left)!=null&&s.length||(a=r.right)!=null&&a.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=De(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),ze(t.options,"debugColumns")),t.getRightLeafColumns=De(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),ze(t.options,"debugColumns")),t.getCenterLeafColumns=De(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const s=[...n??[],...r??[]];return e.filter(a=>!s.includes(a.id))},ze(t.options,"debugColumns"))}};function i6(t){return t||(typeof document<"u"?document:null)}const pf={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},lg=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),a6={getDefaultColumnDef:()=>pf,getInitialState:t=>({columnSizing:{},columnSizingInfo:lg(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:nr("columnSizing",t),onColumnSizingInfoChange:nr("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,s;const a=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:pf.minSize,(r=a??t.columnDef.size)!=null?r:pf.size),(s=t.columnDef.maxSize)!=null?s:pf.maxSize)},t.getStart=De(n=>[n,Wl(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((s,a)=>s+a.getSize(),0),ze(e.options,"debugColumns")),t.getAfter=De(n=>[n,Wl(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((s,a)=>s+a.getSize(),0),ze(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...s}=n;return s})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=s=>{if(s.subHeaders.length)s.subHeaders.forEach(r);else{var a;n+=(a=s.column.getSize())!=null?a:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),s=r?.getCanResize();return a=>{if(!r||!s||(a.persist==null||a.persist(),ug(a)&&a.touches&&a.touches.length>1))return;const l=t.getSize(),c=t?t.getLeafHeaders().map(_=>[_.column.id,_.column.getSize()]):[[r.id,r.getSize()]],f=ug(a)?Math.round(a.touches[0].clientX):a.clientX,d={},m=(_,k)=>{typeof k=="number"&&(e.setColumnSizingInfo(R=>{var N,L;const A=e.options.columnResizeDirection==="rtl"?-1:1,I=(k-((N=R?.startOffset)!=null?N:0))*A,j=Math.max(I/((L=R?.startSize)!=null?L:0),-.999999);return R.columnSizingStart.forEach(P=>{let[M,B]=P;d[M]=Math.round(Math.max(B+B*j,0)*100)/100}),{...R,deltaOffset:I,deltaPercentage:j}}),(e.options.columnResizeMode==="onChange"||_==="end")&&e.setColumnSizing(R=>({...R,...d})))},p=_=>m("move",_),g=_=>{m("end",_),e.setColumnSizingInfo(k=>({...k,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},y=i6(n),x={moveHandler:_=>p(_.clientX),upHandler:_=>{y?.removeEventListener("mousemove",x.moveHandler),y?.removeEventListener("mouseup",x.upHandler),g(_.clientX)}},S={moveHandler:_=>(_.cancelable&&(_.preventDefault(),_.stopPropagation()),p(_.touches[0].clientX),!1),upHandler:_=>{var k;y?.removeEventListener("touchmove",S.moveHandler),y?.removeEventListener("touchend",S.upHandler),_.cancelable&&(_.preventDefault(),_.stopPropagation()),g((k=_.touches[0])==null?void 0:k.clientX)}},E=o6()?{passive:!1}:!1;ug(a)?(y?.addEventListener("touchmove",S.moveHandler,E),y?.addEventListener("touchend",S.upHandler,E)):(y?.addEventListener("mousemove",x.moveHandler,E),y?.addEventListener("mouseup",x.upHandler,E)),e.setColumnSizingInfo(_=>({..._,startOffset:f,startSize:l,deltaOffset:0,deltaPercentage:0,columnSizingStart:c,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?lg():(n=t.initialState.columnSizingInfo)!=null?n:lg())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0}}};let mf=null;function o6(){if(typeof mf=="boolean")return mf;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return mf=t,mf}function ug(t){return t.type==="touchstart"}const l6={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:nr("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const s=t.columns;return(n=s.length?s.some(a=>a.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=De(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),ze(e.options,"debugRows")),t.getVisibleCells=De(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,s)=>[...n,...r,...s],ze(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>De(()=>[r(),r().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),ze(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((s,a)=>({...s,[a.id]:n||!(a.getCanHide!=null&&a.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function Wl(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const u6={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},c6={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:nr("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,s,a;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&((a=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?a:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>ms.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return Qd(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:ms[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},f6={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:nr("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var s,a;t.setExpanded(r?{}:(s=(a=t.initialState)==null?void 0:a.expanded)!=null?s:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(a=>{const l=a.split(".");r=Math.max(r,l.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var s;const a=r===!0?!0:!!(r!=null&&r[t.id]);let l={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(c=>{l[c]=!0}):l=r,n=(s=n)!=null?s:!a,!a&&n)return{...l,[t.id]:!0};if(a&&!n){const{[t.id]:c,...f}=l;return f}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r?.[t.id])},t.getCanExpand=()=>{var n,r,s;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((s=t.subRows)!=null&&s.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},gy=0,yy=10,cg=()=>({pageIndex:gy,pageSize:yy}),d6={getInitialState:t=>({...t,pagination:{...cg(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:nr("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const s=a=>Ws(r,a);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(s)},t.resetPagination=r=>{var s;t.setPagination(r?cg():(s=t.initialState.pagination)!=null?s:cg())},t.setPageIndex=r=>{t.setPagination(s=>{let a=Ws(r,s.pageIndex);const l=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return a=Math.max(0,Math.min(a,l)),{...s,pageIndex:a}})},t.resetPageIndex=r=>{var s,a;t.setPageIndex(r?gy:(s=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?s:gy)},t.resetPageSize=r=>{var s,a;t.setPageSize(r?yy:(s=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?s:yy)},t.setPageSize=r=>{t.setPagination(s=>{const a=Math.max(1,Ws(r,s.pageSize)),l=s.pageSize*s.pageIndex,c=Math.floor(l/a);return{...s,pageIndex:c,pageSize:a}})},t.setPageCount=r=>t.setPagination(s=>{var a;let l=Ws(r,(a=t.options.pageCount)!=null?a:-1);return typeof l=="number"&&(l=Math.max(-1,l)),{...s,pageCount:l}}),t.getPageOptions=De(()=>[t.getPageCount()],r=>{let s=[];return r&&r>0&&(s=[...new Array(r)].fill(null).map((a,l)=>l)),s},ze(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,s=t.getPageCount();return s===-1?!0:s===0?!1:r<s-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},fg=()=>({top:[],bottom:[]}),h6={getInitialState:t=>({rowPinning:fg(),...t}),getDefaultOptions:t=>({onRowPinningChange:nr("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,s)=>{const a=r?t.getLeafRows().map(f=>{let{id:d}=f;return d}):[],l=s?t.getParentRows().map(f=>{let{id:d}=f;return d}):[],c=new Set([...l,t.id,...a]);e.setRowPinning(f=>{var d,m;if(n==="bottom"){var p,g;return{top:((p=f?.top)!=null?p:[]).filter(S=>!(c!=null&&c.has(S))),bottom:[...((g=f?.bottom)!=null?g:[]).filter(S=>!(c!=null&&c.has(S))),...Array.from(c)]}}if(n==="top"){var y,x;return{top:[...((y=f?.top)!=null?y:[]).filter(S=>!(c!=null&&c.has(S))),...Array.from(c)],bottom:((x=f?.bottom)!=null?x:[]).filter(S=>!(c!=null&&c.has(S)))}}return{top:((d=f?.top)!=null?d:[]).filter(S=>!(c!=null&&c.has(S))),bottom:((m=f?.bottom)!=null?m:[]).filter(S=>!(c!=null&&c.has(S)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:s}=e.options;return typeof r=="function"?r(t):(n=r??s)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:s}=e.getState().rowPinning,a=n.some(c=>r?.includes(c)),l=n.some(c=>s?.includes(c));return a?"top":l?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();if(!s)return-1;const a=(n=s==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(l=>{let{id:c}=l;return c});return(r=a?.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?fg():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:fg())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var s,a;return!!((s=r.top)!=null&&s.length||(a=r.bottom)!=null&&a.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var s;return((s=t.options.keepPinnedRows)==null||s?(n??[]).map(l=>{const c=t.getRow(l,!0);return c.getIsAllParentsExpanded()?c:null}):(n??[]).map(l=>e.find(c=>c.id===l))).filter(Boolean).map(l=>({...l,position:r}))},t.getTopRows=De(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),ze(t.options,"debugRows")),t.getBottomRows=De(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),ze(t.options,"debugRows")),t.getCenterRows=De(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const s=new Set([...n??[],...r??[]]);return e.filter(a=>!s.has(a.id))},ze(t.options,"debugRows"))}},p6={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:nr("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},s=t.getPreGroupedRowModel().flatRows;return e?s.forEach(a=>{a.getCanSelect()&&(r[a.id]=!0)}):s.forEach(a=>{delete r[a.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),s={...n};return t.getRowModel().rows.forEach(a=>{vy(s,a.id,r,!0,t)}),s}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=De(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?dg(t,n):{rows:[],flatRows:[],rowsById:{}},ze(t.options,"debugTable")),t.getFilteredSelectedRowModel=De(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?dg(t,n):{rows:[],flatRows:[],rowsById:{}},ze(t.options,"debugTable")),t.getGroupedSelectedRowModel=De(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?dg(t,n):{rows:[],flatRows:[],rowsById:{}},ze(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(s=>s.getCanSelect()&&!n[s.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(s=>!n[s.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const s=t.getIsSelected();e.setRowSelection(a=>{var l;if(n=typeof n<"u"?n:!s,t.getCanSelect()&&s===n)return a;const c={...a};return vy(c,t.id,n,(l=r?.selectChildren)!=null?l:!0,e),c})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return z0(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return by(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return by(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var s;n&&t.toggleSelected((s=r.target)==null?void 0:s.checked)}}}},vy=(t,e,n,r,s)=>{var a;const l=s.getRow(e,!0);n?(l.getCanMultiSelect()||Object.keys(t).forEach(c=>delete t[c]),l.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(a=l.subRows)!=null&&a.length&&l.getCanSelectSubRows()&&l.subRows.forEach(c=>vy(t,c.id,n,r,s))};function dg(t,e){const n=t.getState().rowSelection,r=[],s={},a=function(l,c){return l.map(f=>{var d;const m=z0(f,n);if(m&&(r.push(f),s[f.id]=f),(d=f.subRows)!=null&&d.length&&(f={...f,subRows:a(f.subRows)}),m)return f}).filter(Boolean)};return{rows:a(e.rows),flatRows:r,rowsById:s}}function z0(t,e){var n;return(n=e[t.id])!=null?n:!1}function by(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let s=!0,a=!1;return t.subRows.forEach(l=>{if(!(a&&!s)&&(l.getCanSelect()&&(z0(l,e)?a=!0:s=!1),l.subRows&&l.subRows.length)){const c=by(l,e);c==="all"?a=!0:(c==="some"&&(a=!0),s=!1)}}),s?"all":a?"some":!1}const xy=/([0-9]+)/gm,m6=(t,e,n)=>Dk(si(t.getValue(n)).toLowerCase(),si(e.getValue(n)).toLowerCase()),g6=(t,e,n)=>Dk(si(t.getValue(n)),si(e.getValue(n))),y6=(t,e,n)=>j0(si(t.getValue(n)).toLowerCase(),si(e.getValue(n)).toLowerCase()),v6=(t,e,n)=>j0(si(t.getValue(n)),si(e.getValue(n))),b6=(t,e,n)=>{const r=t.getValue(n),s=e.getValue(n);return r>s?1:r<s?-1:0},x6=(t,e,n)=>j0(t.getValue(n),e.getValue(n));function j0(t,e){return t===e?0:t>e?1:-1}function si(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function Dk(t,e){const n=t.split(xy).filter(Boolean),r=e.split(xy).filter(Boolean);for(;n.length&&r.length;){const s=n.shift(),a=r.shift(),l=parseInt(s,10),c=parseInt(a,10),f=[l,c].sort();if(isNaN(f[0])){if(s>a)return 1;if(a>s)return-1;continue}if(isNaN(f[1]))return isNaN(l)?-1:1;if(l>c)return 1;if(c>l)return-1}return n.length-r.length}const Cl={alphanumeric:m6,alphanumericCaseSensitive:g6,text:y6,textCaseSensitive:v6,datetime:b6,basic:x6},S6={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:nr("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const s of n){const a=s?.getValue(t.id);if(Object.prototype.toString.call(a)==="[object Date]")return Cl.datetime;if(typeof a=="string"&&(r=!0,a.split(xy).length>1))return Cl.alphanumeric}return r?Cl.text:Cl.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return Qd(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:Cl[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const s=t.getNextSortingOrder(),a=typeof n<"u"&&n!==null;e.setSorting(l=>{const c=l?.find(y=>y.id===t.id),f=l?.findIndex(y=>y.id===t.id);let d=[],m,p=a?n:s==="desc";if(l!=null&&l.length&&t.getCanMultiSort()&&r?c?m="toggle":m="add":l!=null&&l.length&&f!==l.length-1?m="replace":c?m="toggle":m="replace",m==="toggle"&&(a||s||(m="remove")),m==="add"){var g;d=[...l,{id:t.id,desc:p}],d.splice(0,d.length-((g=e.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else m==="toggle"?d=l.map(y=>y.id===t.id?{...y,desc:p}:y):m==="remove"?d=l.filter(y=>y.id!==t.id):d=[{id:t.id,desc:p}];return d})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,s;const a=t.getFirstSortDir(),l=t.getIsSorted();return l?l!==a&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(s=e.options.enableMultiRemove)!=null)||s)?!1:l==="desc"?"asc":"desc":a},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(s=>s.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},w6=[UP,l6,r6,s6,HP,VP,u6,c6,S6,t6,f6,d6,h6,p6,a6];function _6(t){var e,n;const r=[...w6,...(e=t._features)!=null?e:[]];let s={_features:r};const a=s._features.reduce((g,y)=>Object.assign(g,y.getDefaultOptions==null?void 0:y.getDefaultOptions(s)),{}),l=g=>s.options.mergeOptions?s.options.mergeOptions(a,g):{...a,...g};let f={...{},...(n=t.initialState)!=null?n:{}};s._features.forEach(g=>{var y;f=(y=g.getInitialState==null?void 0:g.getInitialState(f))!=null?y:f});const d=[];let m=!1;const p={_features:r,options:{...a,...t},initialState:f,_queue:g=>{d.push(g),m||(m=!0,Promise.resolve().then(()=>{for(;d.length;)d.shift()();m=!1}).catch(y=>setTimeout(()=>{throw y})))},reset:()=>{s.setState(s.initialState)},setOptions:g=>{const y=Ws(g,s.options);s.options=l(y)},getState:()=>s.options.state,setState:g=>{s.options.onStateChange==null||s.options.onStateChange(g)},_getRowId:(g,y,x)=>{var S;return(S=s.options.getRowId==null?void 0:s.options.getRowId(g,y,x))!=null?S:`${x?[x.id,y].join("."):y}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(g,y)=>{let x=(y?s.getPrePaginationRowModel():s.getRowModel()).rowsById[g];if(!x&&(x=s.getCoreRowModel().rowsById[g],!x))throw new Error;return x},_getDefaultColumnDef:De(()=>[s.options.defaultColumn],g=>{var y;return g=(y=g)!=null?y:{},{header:x=>{const S=x.header.column.columnDef;return S.accessorKey?S.accessorKey:S.accessorFn?S.id:null},cell:x=>{var S,E;return(S=(E=x.renderValue())==null||E.toString==null?void 0:E.toString())!=null?S:null},...s._features.reduce((x,S)=>Object.assign(x,S.getDefaultColumnDef==null?void 0:S.getDefaultColumnDef()),{}),...g}},ze(t,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:De(()=>[s._getColumnDefs()],g=>{const y=function(x,S,E){return E===void 0&&(E=0),x.map(_=>{const k=BP(s,_,E,S),R=_;return k.columns=R.columns?y(R.columns,k,E+1):[],k})};return y(g)},ze(t,"debugColumns")),getAllFlatColumns:De(()=>[s.getAllColumns()],g=>g.flatMap(y=>y.getFlatColumns()),ze(t,"debugColumns")),_getAllFlatColumnsById:De(()=>[s.getAllFlatColumns()],g=>g.reduce((y,x)=>(y[x.id]=x,y),{}),ze(t,"debugColumns")),getAllLeafColumns:De(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(g,y)=>{let x=g.flatMap(S=>S.getLeafColumns());return y(x)},ze(t,"debugColumns")),getColumn:g=>s._getAllFlatColumnsById()[g]};Object.assign(s,p);for(let g=0;g<s._features.length;g++){const y=s._features[g];y==null||y.createTable==null||y.createTable(s)}return s}function zk(){return t=>De(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(s,a,l){a===void 0&&(a=0);const c=[];for(let d=0;d<s.length;d++){const m=qP(t,t._getRowId(s[d],d,l),s[d],d,a,void 0,l?.id);if(n.flatRows.push(m),n.rowsById[m.id]=m,c.push(m),t.options.getSubRows){var f;m.originalSubRows=t.options.getSubRows(s[d],d),(f=m.originalSubRows)!=null&&f.length&&(m.subRows=r(m.originalSubRows,a+1,m))}}return c};return n.rows=r(e),n},ze(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function jk(){return t=>De(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const r=t.getState().sorting,s=[],a=r.filter(f=>{var d;return(d=t.getColumn(f.id))==null?void 0:d.getCanSort()}),l={};a.forEach(f=>{const d=t.getColumn(f.id);d&&(l[f.id]={sortUndefined:d.columnDef.sortUndefined,invertSorting:d.columnDef.invertSorting,sortingFn:d.getSortingFn()})});const c=f=>{const d=f.map(m=>({...m}));return d.sort((m,p)=>{for(let y=0;y<a.length;y+=1){var g;const x=a[y],S=l[x.id],E=S.sortUndefined,_=(g=x?.desc)!=null?g:!1;let k=0;if(E){const R=m.getValue(x.id),N=p.getValue(x.id),L=R===void 0,A=N===void 0;if(L||A){if(E==="first")return L?-1:1;if(E==="last")return L?1:-1;k=L&&A?0:L?E:-E}}if(k===0&&(k=S.sortingFn(m,p,x.id)),k!==0)return _&&(k*=-1),S.invertSorting&&(k*=-1),k}return m.index-p.index}),d.forEach(m=>{var p;s.push(m),(p=m.subRows)!=null&&p.length&&(m.subRows=c(m.subRows))}),d};return{rows:c(n.rows),flatRows:s,rowsById:n.rowsById}},ze(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}function md(t,e){return t?C6(t)?q.createElement(t,e):t:null}function C6(t){return E6(t)||typeof t=="function"||k6(t)}function E6(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function k6(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function Lk(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=q.useState(()=>({current:_6(e)})),[r,s]=q.useState(()=>n.current.initialState);return n.current.setOptions(a=>({...a,...t,state:{...r,...t.state},onStateChange:l=>{s(l),t.onStateChange==null||t.onStateChange(l)}})),n.current}function R6(t){const e=tn.c(29),{getValue:n,row:r,column:s,table:a}=t,{index:l}=r,{id:c}=s;let f;e[0]!==n?(f=n(),e[0]=n,e[1]=f):f=e[1];const d=f,[m,p]=q.useState(d),[g,y]=q.useState(!1);let x,S;e[2]!==d?(x=()=>{p(d)},S=[d],e[2]=d,e[3]=x,e[4]=S):(x=e[3],S=e[4]),q.useEffect(x,S);let E;e[5]!==c||e[6]!==l||e[7]!==d||e[8]!==a||e[9]!==m?(E=()=>{y(!1),m!==d&&a.options.meta?.updateData(l,c,m)},e[5]=c,e[6]=l,e[7]=d,e[8]=a,e[9]=m,e[10]=E):E=e[10];const _=E;let k;e[11]!==d?(k=I=>{I.key==="Enter"&&I.target.blur(),I.key==="Escape"&&(p(d),y(!1))},e[11]=d,e[12]=k):k=e[12];const R=k;if(d===null&&!g){let I;return e[13]===Symbol.for("react.memo_cache_sentinel")?(I=w.jsx("span",{className:"text-neutral-400 dark:text-neutral-600 italic cursor-pointer",onClick:()=>y(!0),children:"NULL"}),e[13]=I):I=e[13],I}if(typeof d=="boolean"&&!g){let I;e[14]===Symbol.for("react.memo_cache_sentinel")?(I=()=>y(!0),e[14]=I):I=e[14];const j=d?"true":"false";let P;return e[15]!==j?(P=w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400 cursor-pointer",onClick:I,children:j}),e[15]=j,e[16]=P):P=e[16],P}if(typeof d=="object"&&d!==null){let I;e[17]!==d?(I=JSON.stringify(d),e[17]=d,e[18]=I):I=e[18];let j;return e[19]!==I?(j=w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:I}),e[19]=I,e[20]=j):j=e[20],j}if(g){const I=m===null?"":String(m);let j;e[21]===Symbol.for("react.memo_cache_sentinel")?(j=M=>p(M.target.value),e[21]=j):j=e[21];let P;return e[22]!==R||e[23]!==_||e[24]!==I?(P=w.jsx("input",{value:I,onChange:j,onBlur:_,onKeyDown:R,autoFocus:!0,className:"w-full bg-white dark:bg-neutral-800 border border-blue-500 dark:border-blue-400 rounded px-1 py-0.5 text-[12px] font-mono text-neutral-700 dark:text-neutral-200 outline-none"}),e[22]=R,e[23]=_,e[24]=I,e[25]=P):P=e[25],P}let N;e[26]===Symbol.for("react.memo_cache_sentinel")?(N=()=>y(!0),e[26]=N):N=e[26];const L=String(m);let A;return e[27]!==L?(A=w.jsx("span",{className:"text-neutral-600 dark:text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-200",onClick:N,children:L}),e[27]=L,e[28]=A):A=e[28],A}function A6(t){const e=tn.c(8),{getValue:n}=t;let r,s;if(e[0]!==n){r=Symbol.for("react.early_return_sentinel");e:{if(s=n(),s===null){let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=w.jsx("span",{className:"text-neutral-400 dark:text-neutral-600 italic",children:"NULL"}),e[3]=c):c=e[3],r=c;break e}if(typeof s=="boolean"){const c=s?"true":"false";let f;e[4]!==c?(f=w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:c}),e[4]=c,e[5]=f):f=e[5],r=f;break e}if(typeof s=="object"){r=w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:JSON.stringify(s)});break e}}e[0]=n,e[1]=r,e[2]=s}else r=e[1],s=e[2];if(r!==Symbol.for("react.early_return_sentinel"))return r;const a=String(s);let l;return e[6]!==a?(l=w.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:a}),e[6]=a,e[7]=l):l=e[7],l}function T6({response:t,duration:e,isLoading:n,tableName:r,onUpdateCell:s,onDeleteRow:a}){const[l,c]=q.useState([]),[f,d]=q.useState([]),[m,p]=q.useState(null),g=!!r&&!!s,y=!!r&&!!a;q.useEffect(()=>{d(t?.rows??[])},[t?.rows]);const x=q.useMemo(()=>{if(!t?.columns)return[];const E=t.columns.map(_=>({accessorKey:_,header:_,cell:g?R6:A6}));return y&&E.push({id:"actions",header:"",size:50,cell:({row:_})=>{const k=m===_.index;return w.jsx("div",{className:"flex items-center gap-1",children:k?w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>{a?.(_.original),p(null)},className:"p-1 text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300",title:"Confirm delete",children:w.jsx(du,{size:14})}),w.jsx("button",{onClick:()=>p(null),className:"p-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 text-xs",title:"Cancel",children:""})]}):w.jsx("button",{onClick:()=>p(_.index),className:"p-1 text-neutral-400 hover:text-red-500 dark:hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete row",children:w.jsx(du,{size:14})})})}}),E},[t?.columns,g,y,m,a]),S=Lk({data:f,columns:x,state:{sorting:l},onSortingChange:c,getCoreRowModel:zk(),getSortedRowModel:jk(),meta:{updateData:(E,_,k)=>{const R=f[E];d(N=>N.map((L,A)=>A===E?{...L,[_]:k}:L)),s?.(R,_,k)}}});return n?w.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:w.jsxs("div",{className:"flex flex-col items-center gap-3 text-neutral-400 dark:text-neutral-500",children:[w.jsx("div",{className:"w-6 h-6 border-2 border-neutral-200 border-t-neutral-400 dark:border-neutral-700 dark:border-t-neutral-500 rounded-full animate-spin"}),w.jsx("span",{className:"text-sm",children:"Running query..."})]})}):t?t.error?w.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:w.jsxs("div",{className:"flex items-center gap-3 text-red-500 dark:text-red-400",children:[w.jsx(QD,{size:18}),w.jsx("span",{className:"text-sm",children:t.error})]})}):t.rows_affected!==void 0&&!t.rows?w.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:w.jsxs("div",{className:"flex flex-col items-center gap-2",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-500/30",children:"OK"}),w.jsxs("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[w.jsx("span",{className:"font-medium",children:t.rows_affected})," row(s) affected"]})]}),w.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-600",children:[e.toFixed(0),"ms"]})]})}):w.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden dark:shadow-2xl",children:[w.jsx("div",{className:"flex-1 overflow-auto",children:w.jsxs("table",{className:"w-full text-[13px]",children:[w.jsx("thead",{className:"sticky top-0 z-10 bg-neutral-100 dark:bg-neutral-950",children:S.getHeaderGroups().map(E=>w.jsx("tr",{children:E.headers.map(_=>{const k=_.column.getIsSorted(),R=_.id==="actions";return w.jsx("th",{onClick:R?void 0:_.column.getToggleSortingHandler(),className:`text-left px-4 py-2 text-[11px] font-medium whitespace-nowrap transition-colors select-none group bg-neutral-100 dark:bg-neutral-950 ${R?"w-12":"cursor-pointer"} ${k?"text-neutral-900 dark:text-neutral-200":"text-neutral-500 dark:text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-400"}`,children:!R&&w.jsxs("div",{className:"flex items-center gap-1",children:[md(_.column.columnDef.header,_.getContext()),w.jsx("span",{className:`transition-opacity ${k?"opacity-100":"opacity-0 group-hover:opacity-40"}`,children:k==="asc"?w.jsx(Gl,{size:12}):k==="desc"?w.jsx(Bi,{size:12}):w.jsx(Nf,{size:12})})]})},_.id)})},E.id))}),w.jsx("tbody",{children:S.getRowModel().rows.map((E,_)=>{const k=_%2===1,R=E.getVisibleCells();return w.jsx("tr",{className:`group transition-colors ${k?"bg-neutral-200/40 dark:bg-neutral-800/30 hover:bg-neutral-200/70 dark:hover:bg-neutral-800/50":"hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30"}`,children:R.map((N,L)=>w.jsx("td",{className:`px-4 py-2 whitespace-nowrap font-mono text-[12px] ${L===0?"rounded-l-lg":""} ${L===R.length-1?"rounded-r-lg":""}`,children:md(N.column.columnDef.cell,N.getContext())},N.id))},E.id)})})]})}),w.jsxs("div",{className:"px-3 py-2 flex items-center gap-4 text-xs border-t border-neutral-200 dark:border-white/8 shrink-0",children:[w.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-500/30",children:"OK"}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Time:"}),w.jsxs("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:[e.toFixed(0),"ms"]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Rows:"}),w.jsx("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:f.length})]}),g&&w.jsx("div",{className:"ml-auto text-neutral-400 dark:text-neutral-600 text-[10px]",children:"Click a cell to edit"})]})]}):w.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:w.jsxs("div",{className:"flex flex-col items-center text-neutral-400 dark:text-neutral-500",children:[w.jsx("svg",{className:"w-8 h-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),w.jsx("span",{className:"text-sm",children:"Run a query to see results"})]})})}class O6{#e=!0;#t;#n;#r;#s;#o;#i;#a;#p=0;#m=5;#u=!1;#c=!1;#l=null;#f=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#u=!1,this.debugLog("Emitting queued events",this.#s),this.#s.forEach(e=>this.emitEventToBus(e)),this.#s=[],this.stopConnectLoop(),this.#n().removeEventListener("tanstack-connect-success",this.#f)};#d=()=>{if(this.#p<this.#m){this.#p++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#n().removeEventListener("tanstack-connect",this.#d),this.#c=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#h=()=>{this.#u||(this.#u=!0,this.#n().addEventListener("tanstack-connect-success",this.#f),this.#d())};constructor({pluginId:e,debug:n=!1,enabled:r=!0,reconnectEveryMs:s=300}){this.#t=e,this.#e=r,this.#n=this.getGlobalTarget,this.#r=n,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#s=[],this.#o=!1,this.#c=!1,this.#i=null,this.#a=s}startConnectLoop(){this.#i!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#a}ms)`),this.#i=setInterval(this.#d,this.#a))}stopConnectLoop(){this.#u=!1,this.#i!==null&&(clearInterval(this.#i),this.#i=null,this.#s=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#r&&console.log(` [tanstack-devtools:${this.#t}-plugin]`,...e)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const e=typeof EventTarget<"u"?new EventTarget:void 0;return typeof e>"u"||typeof e.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#t}dispatchCustomEventShim(e,n){try{const r=new Event(e,{detail:n});this.#n().dispatchEvent(r)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,n){try{this.#n().dispatchEvent(new CustomEvent(e,{detail:n}))}catch{this.dispatchCustomEventShim(e,n)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,n){return{type:`${this.#t}:${e}`,payload:n,pluginId:this.#t}}emit(e,n){if(!this.#e){this.debugLog("Event bus client is disabled, not emitting event",e,n);return}if(this.#l&&(this.debugLog("Emitting event to internal event target",e,n),this.#l.dispatchEvent(new CustomEvent(`${this.#t}:${e}`,{detail:this.createEventPayload(e,n)}))),this.#c){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#s.push(this.createEventPayload(e,n)),typeof CustomEvent<"u"&&!this.#u&&(this.#h(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,n))}on(e,n,r){const s=r?.withEventTarget??!1,a=`${this.#t}:${e}`;if(s&&(this.#l||(this.#l=new EventTarget),this.#l.addEventListener(a,c=>{n(c.detail)})),!this.#e)return this.debugLog("Event bus client is disabled, not registering event",a),()=>{};const l=c=>{this.debugLog("Received event from bus",c.detail),n(c.detail)};return this.#n().addEventListener(a,l),this.debugLog("Registered event to bus",a),()=>{s&&this.#l?.removeEventListener(a,l),this.#n().removeEventListener(a,l)}}onAll(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;this.#t&&s.pluginId!==this.#t||e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}}class M6 extends O6{constructor(){super({pluginId:"tanstack-ai-devtools"})}}const Ft=new M6;async function I6(t){let e="";for await(const n of t)n.type==="content"&&n.delta&&(e+=n.delta);return e}function N6(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"].version===1&&typeof t["~standard"].jsonSchema=="object"&&typeof t["~standard"].jsonSchema.input=="function"}function Ui(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t!==null&&t["~standard"]!==null&&"version"in t["~standard"]&&t["~standard"].version===1&&"validate"in t["~standard"]&&typeof t["~standard"].validate=="function"}function eu(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],c=!e.includes(a);l.type==="object"&&l.properties?r[a]=eu(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:eu(l.items,l.items.required||[])}:c&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=eu(n.items,n.items.required||[])),n}function Sy(t,e={}){if(!t)return;const{forStructuredOutput:n=!1}=e;if(N6(t)){let s=t["~standard"].jsonSchema.input({target:"draft-07"});if(typeof s=="object"&&"$schema"in s){const{$schema:a,...l}=s;s=l}return typeof s=="object"&&("properties"in s&&!s.type&&(s.type="object"),s.type==="object"&&!("properties"in s)&&(s.properties={}),s.type==="object"&&!("required"in s)&&(s.required=[]),n&&(s=eu(s,s.required||[]))),s}return n&&typeof t=="object"?eu(t,t.required||[]):t}function so(t,e){if(!Ui(t))return e;const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Error("Schema validation returned a Promise. Use validateWithStandardSchema for async validation.");if(!n.issues)return n.value;const r=n.issues.map(s=>s.message||"Validation failed").join(", ");throw new Error(`Validation failed: ${r}`)}class D6{constructor(e){this.toolCallsMap=new Map,this.tools=e}addToolCallChunk(e){const n=e.index,r=this.toolCallsMap.get(n);r?(e.toolCall.function.name&&!r.function.name&&(r.function.name=e.toolCall.function.name),e.toolCall.function.arguments&&(r.function.arguments+=e.toolCall.function.arguments)):e.toolCall.id&&e.toolCall.function.name&&this.toolCallsMap.set(n,{id:e.toolCall.id,type:"function",function:{name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||""}})}hasToolCalls(){return this.getToolCalls().length>0}getToolCalls(){return Array.from(this.toolCallsMap.values()).filter(e=>e.id&&e.function.name&&e.function.name.trim().length>0)}async*executeTools(e){const n=this.getToolCalls(),r=[];for(const s of n){const a=this.tools.find(c=>c.name===s.function.name);let l;if(a?.execute)try{let c;try{c=JSON.parse(s.function.arguments)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${s.function.arguments}`)}if(a.inputSchema&&Ui(a.inputSchema))try{c=so(a.inputSchema,c)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Input validation failed for tool ${a.name}: ${m}`)}let f=await a.execute(c);if(a.outputSchema&&Ui(a.outputSchema)&&f!==void 0&&f!==null)try{f=so(a.outputSchema,f)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Output validation failed for tool ${a.name}: ${m}`)}l=typeof f=="string"?f:JSON.stringify(f)}catch(c){l=`Error executing tool: ${c instanceof Error?c.message:"Unknown error"}`}else l=`Tool ${s.function.name} does not have an execute function`;yield{type:"tool_result",id:e.id,model:e.model,timestamp:Date.now(),toolCallId:s.id,content:l},r.push({role:"tool",content:l,toolCallId:s.id})}return r}clear(){this.toolCallsMap.clear()}}async function u1(t,e,n=new Map,r=new Map){const s=[],a=[],l=[],c=new Map;for(const f of e)c.set(f.name,f);for(const f of t){const d=c.get(f.function.name),m=f.function.name;if(!d){s.push({toolCallId:f.id,toolName:m,result:{error:`Unknown tool: ${m}`},state:"output-error"});continue}let p={};const g=f.function.arguments.trim()||"{}";try{p=JSON.parse(g)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${g}`)}if(d.inputSchema&&Ui(d.inputSchema))try{p=so(d.inputSchema,p)}catch(x){const S=x instanceof Error?x.message:"Validation failed";s.push({toolCallId:f.id,toolName:m,result:{error:`Input validation failed for tool ${d.name}: ${S}`},state:"output-error"});continue}if(!d.execute){if(d.needsApproval){const x=`approval_${f.id}`;n.has(x)?n.get(x)?r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p}):s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"}):a.push({toolCallId:f.id,toolName:f.function.name,input:p,approvalId:x})}else r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p});continue}if(d.needsApproval){const x=`approval_${f.id}`;if(n.has(x))if(n.get(x)){const E=Date.now();try{let _=await d.execute(p);const k=Date.now()-E;d.outputSchema&&Ui(d.outputSchema)&&_!==void 0&&_!==null&&(_=so(d.outputSchema,_)),s.push({toolCallId:f.id,toolName:m,result:typeof _=="string"?JSON.parse(_):_||null,duration:k})}catch(_){const k=Date.now()-E,R=_ instanceof Error?_.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:R},state:"output-error",duration:k})}}else s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"});else a.push({toolCallId:f.id,toolName:m,input:p,approvalId:x});continue}const y=Date.now();try{let x=await d.execute(p);const S=Date.now()-y;d.outputSchema&&Ui(d.outputSchema)&&x!==void 0&&x!==null&&(x=so(d.outputSchema,x)),s.push({toolCallId:f.id,toolName:m,result:typeof x=="string"?JSON.parse(x):x||null,duration:S})}catch(x){const S=Date.now()-y,E=x instanceof Error?x.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:E},state:"output-error",duration:S})}}return{results:s,needsApproval:a,needsClientExecution:l}}function Pk(t){return({iterationCount:e})=>e<t}class Fk{constructor(e){this.iterationCount=0,this.lastFinishReason=null,this.streamStartTime=0,this.totalChunkCount=0,this.currentMessageId=null,this.accumulatedContent="",this.doneChunk=null,this.shouldEmitStreamEnd=!0,this.earlyTermination=!1,this.toolPhase="continue",this.cyclePhase="processText",this.adapter=e.adapter,this.params=e.params,this.systemPrompts=e.params.systemPrompts||[],this.tools=e.params.tools||[],this.loopStrategy=e.params.agentLoopStrategy||Pk(5),this.toolCallManager=new D6(this.tools),this.initialMessageCount=e.params.messages.length,this.messages=e.params.messages,this.requestId=this.createId("chat"),this.streamId=this.createId("stream"),this.effectiveRequest=e.params.abortController?{signal:e.params.abortController.signal}:void 0,this.effectiveSignal=e.params.abortController?.signal}getAccumulatedContent(){return this.accumulatedContent}getMessages(){return this.messages}async*run(){this.beforeRun();try{if((yield*this.checkForPendingToolCalls())==="wait")return;do{if(this.earlyTermination||this.isAborted())return;this.beginCycle(),this.cyclePhase==="processText"?yield*this.streamModelResponse():yield*this.processToolCalls(),this.endCycle()}while(this.shouldContinue())}finally{this.afterRun()}}beforeRun(){this.streamStartTime=Date.now();const{model:e,tools:n,temperature:r,topP:s,maxTokens:a,metadata:l,modelOptions:c,conversationId:f}=this.params,d={};r!==void 0&&(d.temperature=r),s!==void 0&&(d.topP=s),a!==void 0&&(d.maxTokens=a),l!==void 0&&(d.metadata=l),Ft.emit("text:started",{requestId:this.requestId,streamId:this.streamId,model:e,provider:this.adapter.name,messageCount:this.initialMessageCount,hasTools:!!n&&n.length>0,streaming:!0,timestamp:Date.now(),clientId:f,toolNames:n?.map(m=>m.name),options:Object.keys(d).length>0?d:void 0,modelOptions:c}),Ft.emit("stream:started",{streamId:this.streamId,model:e,provider:this.adapter.name,timestamp:Date.now()})}afterRun(){if(!this.shouldEmitStreamEnd)return;const e=Date.now();Ft.emit("text:completed",{requestId:this.requestId,streamId:this.streamId,model:this.params.model,content:this.accumulatedContent,messageId:this.currentMessageId||void 0,finishReason:this.lastFinishReason||void 0,usage:this.doneChunk?.usage,timestamp:e}),Ft.emit("stream:ended",{requestId:this.requestId,streamId:this.streamId,totalChunks:this.totalChunkCount,duration:e-this.streamStartTime,timestamp:e})}beginCycle(){this.cyclePhase==="processText"&&this.beginIteration()}endCycle(){if(this.cyclePhase==="processText"){this.cyclePhase="executeToolCalls";return}this.cyclePhase="processText",this.iterationCount++}beginIteration(){this.currentMessageId=this.createId("msg"),this.accumulatedContent="",this.doneChunk=null}async*streamModelResponse(){const{temperature:e,topP:n,maxTokens:r,metadata:s,modelOptions:a}=this.params,c=this.params.tools?.map(f=>({...f,inputSchema:f.inputSchema?Sy(f.inputSchema):void 0,outputSchema:f.outputSchema?Sy(f.outputSchema):void 0}));for await(const f of this.adapter.chatStream({model:this.params.model,messages:this.messages,tools:c,temperature:e,topP:n,maxTokens:r,metadata:s,request:this.effectiveRequest,modelOptions:a,systemPrompts:this.systemPrompts}))if(this.isAborted()||(this.totalChunkCount++,yield f,this.handleStreamChunk(f),this.earlyTermination))break}handleStreamChunk(e){switch(e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break}}handleContentChunk(e){this.accumulatedContent=e.content,Ft.emit("stream:chunk:content",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}handleToolCallChunk(e){this.toolCallManager.addToolCallChunk(e),Ft.emit("stream:chunk:tool-call",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCall.id,toolName:e.toolCall.function.name,index:e.index,arguments:e.toolCall.function.arguments,timestamp:Date.now()})}handleToolResultChunk(e){Ft.emit("stream:chunk:tool-result",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCallId,result:e.content,timestamp:Date.now()})}handleDoneChunk(e){if(this.doneChunk?.finishReason==="tool_calls"&&e.finishReason==="stop"){this.lastFinishReason=e.finishReason,Ft.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Ft.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()});return}this.doneChunk=e,this.lastFinishReason=e.finishReason,Ft.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Ft.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()})}handleErrorChunk(e){Ft.emit("stream:chunk:error",{streamId:this.streamId,messageId:this.currentMessageId||void 0,error:e.error.message,timestamp:Date.now()}),this.earlyTermination=!0,this.shouldEmitStreamEnd=!1}handleThinkingChunk(e){Ft.emit("stream:chunk:thinking",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}async*checkForPendingToolCalls(){const e=this.getPendingToolCallsFromMessages();if(e.length===0)return"continue";const n=this.createSyntheticDoneChunk();Ft.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()});const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await u1(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const c of this.emitApprovalRequests(a.needsApproval,n))yield c;for(const c of this.emitClientToolInputs(a.needsClientExecution,n))yield c;return this.shouldEmitStreamEnd=!1,"wait"}const l=this.emitToolResults(a.results,n);for(const c of l)yield c;return"continue"}async*processToolCalls(){if(!this.shouldExecuteToolPhase()){this.setToolPhase("stop");return}const e=this.toolCallManager.getToolCalls(),n=this.doneChunk;if(!n||e.length===0){this.setToolPhase("stop");return}Ft.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()}),this.addAssistantToolCallMessage(e);const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await u1(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const c of this.emitApprovalRequests(a.needsApproval,n))yield c;for(const c of this.emitClientToolInputs(a.needsClientExecution,n))yield c;this.setToolPhase("wait");return}const l=this.emitToolResults(a.results,n);for(const c of l)yield c;this.toolCallManager.clear(),this.setToolPhase("continue")}shouldExecuteToolPhase(){return this.doneChunk?.finishReason==="tool_calls"&&this.tools.length>0&&this.toolCallManager.hasToolCalls()}addAssistantToolCallMessage(e){this.messages=[...this.messages,{role:"assistant",content:this.accumulatedContent||null,toolCalls:e}]}collectClientState(){const e=new Map,n=new Map;for(const r of this.messages)if(r.role==="assistant"&&r.parts){const s=r.parts;for(const a of s)a.type==="tool-call"&&a.state==="approval-responded"&&a.approval&&e.set(a.approval.id,a.approval.approved),a.type==="tool-call"&&a.output!==void 0&&!a.approval&&n.set(a.id,a.output)}return{approvals:e,clientToolResults:n}}emitApprovalRequests(e,n){const r=[];for(const s of e)Ft.emit("stream:approval-requested",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approvalId:s.approvalId,timestamp:Date.now()}),r.push({type:"approval-requested",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approval:{id:s.approvalId,needsApproval:!0}});return r}emitClientToolInputs(e,n){const r=[];for(const s of e)Ft.emit("stream:tool-input-available",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,timestamp:Date.now()}),r.push({type:"tool-input-available",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input});return r}emitToolResults(e,n){const r=[];for(const s of e){Ft.emit("tool:call-completed",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,result:s.result,duration:s.duration??0,timestamp:Date.now()});const a=JSON.stringify(s.result),l={type:"tool_result",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,content:a};r.push(l),this.messages=[...this.messages,{role:"tool",content:a,toolCallId:s.toolCallId}]}return r}getPendingToolCallsFromMessages(){const e=new Set(this.messages.filter(r=>r.role==="tool"&&r.toolCallId).map(r=>r.toolCallId)),n=[];for(const r of this.messages)if(r.role==="assistant"&&r.toolCalls)for(const s of r.toolCalls)e.has(s.id)||n.push(s);return n}createSyntheticDoneChunk(){return{type:"done",id:this.createId("pending"),model:this.params.model,timestamp:Date.now(),finishReason:"tool_calls"}}shouldContinue(){return this.cyclePhase==="executeToolCalls"?!0:this.loopStrategy({iterationCount:this.iterationCount,messages:this.messages,finishReason:this.lastFinishReason})&&this.toolPhase==="continue"}isAborted(){return!!this.effectiveSignal?.aborted}setToolPhase(e){this.toolPhase=e,e==="wait"&&(this.shouldEmitStreamEnd=!1)}createId(e){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}}function z6(t){const{outputSchema:e,stream:n}=t;return e?L6(t):n===!1?j6(t):$k(t)}async function*$k(t){const{adapter:e,...n}=t,r=e.model,s=new Fk({adapter:e,params:{...n,model:r}});for await(const a of s.run())yield a}function j6(t){const e=$k(t);return I6(e)}async function L6(t){const{adapter:e,outputSchema:n,...r}=t,s=e.model;if(!n)throw new Error("outputSchema is required for structured output");const a=new Fk({adapter:e,params:{...r,model:s}});for await(const g of a.run());const l=a.getMessages(),{tools:c,agentLoopStrategy:f,...d}=r,m=Sy(n);if(!m)throw new Error("Failed to convert output schema to JSON Schema");const p=await e.structuredOutput({chatOptions:{...d,model:s,messages:l},outputSchema:m});return Ui(n)?so(n,p.data):p.data}function Ou(t){return{__toolSide:"definition",...t,server(n){return{__toolSide:"server",...t,execute:n}},client(n){return{__toolSide:"client",...t,execute:n}}}}function c1(t){return t===null?"":typeof t=="string"?t:t.filter(e=>e.type==="text").map(e=>e.content).join("")}function P6(t){const e=[];for(const n of t)"parts"in n?e.push(...Bk(n)):e.push(n);return e}function Bk(t){const e=[];if(t.role==="system")return e;const n=[],r=[],s=[];for(const c of t.parts)c.type==="text"?n.push(c):c.type==="tool-call"?r.push(c):c.type==="tool-result"&&s.push(c);const a=n.map(c=>c.content).join("")||null,l=r.length>0?r.filter(c=>c.state==="input-complete"||c.state==="approval-responded"||c.output!==void 0).map(c=>({id:c.id,type:"function",function:{name:c.name,arguments:c.arguments}})):void 0;t.role!=="assistant"||a||!l?e.push({role:t.role,content:a,...l&&l.length>0&&{toolCalls:l}}):l.length>0&&e.push({role:"assistant",content:a,toolCalls:l});for(const c of s)(c.state==="complete"||c.state==="error")&&e.push({role:"tool",content:c.content,toolCallId:c.toolCallId});return e}function F6(t,e){const n=[],r=c1(t.content);if(r&&n.push({type:"text",content:r}),t.toolCalls&&t.toolCalls.length>0)for(const s of t.toolCalls)n.push({type:"tool-call",id:s.id,name:s.function.name,arguments:s.function.arguments,state:"input-complete"});return t.role==="tool"&&t.toolCallId&&n.push({type:"tool-result",toolCallId:t.toolCallId,content:c1(t.content),state:"complete"}),{id:e||gd(),role:t.role==="tool"?"assistant":t.role,parts:n}}function $6(t,e){return"parts"in t?{...t,id:t.id||e(),createdAt:t.createdAt||new Date}:{...F6(t,e()),createdAt:new Date}}function gd(){return`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`}var Oi={},hg={},f1;function d1(){return f1||(f1=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(hg)),hg}var h1;function B6(){return h1||(h1=1,(function(t){var e=Oi&&Oi.__createBinding||(Object.create?(function(d,m,p,g){g===void 0&&(g=p);var y=Object.getOwnPropertyDescriptor(m,p);(!y||("get"in y?!m.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(d,g,y)}):(function(d,m,p,g){g===void 0&&(g=p),d[g]=m[p]})),n=Oi&&Oi.__exportStar||function(d,m){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&e(m,d,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=d1();Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(d1(),t);class s extends Error{}t.PartialJSON=s;class a extends Error{}t.MalformedJSON=a;function l(d,m=r.Allow.ALL){if(typeof d!="string")throw new TypeError(`expecting str, got ${typeof d}`);if(!d.trim())throw new Error(`${d} is empty`);return c(d.trim(),m)}t.parseJSON=l;const c=(d,m)=>{const p=d.length;let g=0;const y=L=>{throw new s(`${L} at position ${g}`)},x=L=>{throw new a(`${L} at position ${g}`)},S=()=>(N(),g>=p&&y("Unexpected end of input"),d[g]==='"'?E():d[g]==="{"?_():d[g]==="["?k():d.substring(g,g+4)==="null"||r.Allow.NULL&m&&p-g<4&&"null".startsWith(d.substring(g))?(g+=4,null):d.substring(g,g+4)==="true"||r.Allow.BOOL&m&&p-g<4&&"true".startsWith(d.substring(g))?(g+=4,!0):d.substring(g,g+5)==="false"||r.Allow.BOOL&m&&p-g<5&&"false".startsWith(d.substring(g))?(g+=5,!1):d.substring(g,g+8)==="Infinity"||r.Allow.INFINITY&m&&p-g<8&&"Infinity".startsWith(d.substring(g))?(g+=8,1/0):d.substring(g,g+9)==="-Infinity"||r.Allow._INFINITY&m&&1<p-g&&p-g<9&&"-Infinity".startsWith(d.substring(g))?(g+=9,-1/0):d.substring(g,g+3)==="NaN"||r.Allow.NAN&m&&p-g<3&&"NaN".startsWith(d.substring(g))?(g+=3,NaN):R()),E=()=>{const L=g;let A=!1;for(g++;g<p&&(d[g]!=='"'||A&&d[g-1]==="\\");)A=d[g]==="\\"?!A:!1,g++;if(d.charAt(g)=='"')try{return JSON.parse(d.substring(L,++g-Number(A)))}catch(I){x(String(I))}else if(r.Allow.STR&m)try{return JSON.parse(d.substring(L,g-Number(A))+'"')}catch{return JSON.parse(d.substring(L,d.lastIndexOf("\\"))+'"')}y("Unterminated string literal")},_=()=>{g++,N();const L={};try{for(;d[g]!=="}";){if(N(),g>=p&&r.Allow.OBJ&m)return L;const A=E();N(),g++;try{const I=S();L[A]=I}catch(I){if(r.Allow.OBJ&m)return L;throw I}N(),d[g]===","&&g++}}catch{if(r.Allow.OBJ&m)return L;y("Expected '}' at end of object")}return g++,L},k=()=>{g++;const L=[];try{for(;d[g]!=="]";)L.push(S()),N(),d[g]===","&&g++}catch{if(r.Allow.ARR&m)return L;y("Expected ']' at end of array")}return g++,L},R=()=>{if(g===0){d==="-"&&x("Not sure what '-' is");try{return JSON.parse(d)}catch(A){if(r.Allow.NUM&m)try{return JSON.parse(d.substring(0,d.lastIndexOf("e")))}catch{}x(String(A))}}const L=g;for(d[g]==="-"&&g++;d[g]&&",]}".indexOf(d[g])===-1;)g++;g==p&&!(r.Allow.NUM&m)&&y("Unterminated number literal");try{return JSON.parse(d.substring(L,g))}catch{d.substring(L,g)==="-"&&y("Not sure what '-' is");try{return JSON.parse(d.substring(L,d.lastIndexOf("e")))}catch(I){x(String(I))}}},N=()=>{for(;g<p&&` 
\r	`.includes(d[g]);)g++};return S()},f=l;t.parse=f})(Oi)),Oi}var U6=B6();class q6{parse(e){if(!(!e||e.trim()===""))try{return U6.parse(e)}catch{return}}}const H6=new q6;function V6(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.length>0?s[s.length-1]:null;return a&&a.type==="text"?s[s.length-1]={type:"text",content:n}:s.push({type:"text",content:n}),{...r,parts:s}})}function pg(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(c=>c.type==="tool-call"&&c.id===n.id),l={type:"tool-call",id:n.id,name:n.name,arguments:n.arguments,state:n.state};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}function p1(t,e,n,r,s,a){return t.map(l=>{if(l.id!==e)return l;const c=[...l.parts],f=c.findIndex(m=>m.type==="tool-result"&&m.toolCallId===n),d={type:"tool-result",toolCallId:n,content:r,state:s,...a&&{error:a}};return f>=0?c[f]=d:c.push(d),{...l,parts:c}})}function K6(t,e,n,r){return t.map(s=>{if(s.id!==e)return s;const a=[...s.parts],l=a.find(c=>c.type==="tool-call"&&c.id===n);return l&&(l.state="approval-requested",l.approval={id:r,needsApproval:!0}),{...s,parts:a}})}function G6(t,e,n,r,s){return t.map(a=>{const l=[...a.parts],c=l.find(f=>f.type==="tool-call"&&f.id===e);return c&&(c.output=s?{error:s}:n,r?c.state=r:c.state="input-complete"),{...a,parts:l}})}function Q6(t,e,n){return t.map(r=>{const s=[...r.parts],a=s.find(l=>l.type==="tool-call"&&l.approval?.id===e);return a&&a.approval&&(a.approval.approved=n,a.state="approval-responded"),{...r,parts:s}})}function Z6(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(c=>c.type==="thinking"),l={type:"thinking",content:n};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}class Y6{shouldEmit(e,n){return!0}}class L0{constructor(e={}){this.messages=[],this.currentAssistantMessageId=null,this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls=new Map,this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.recording=null,this.recordingStartTime=0,this.chunkStrategy=e.chunkStrategy||new Y6,this.events=e.events||{},this.handlers=e.handlers||{},this.jsonParser=e.jsonParser||H6,this.recordingEnabled=e.recording??!1,e.initialMessages&&(this.messages=[...e.initialMessages])}setMessages(e){this.messages=[...e],this.emitMessagesChange()}addUserMessage(e){const n={id:gd(),role:"user",parts:[{type:"text",content:e}],createdAt:new Date};return this.messages=[...this.messages,n],this.emitMessagesChange(),n}startAssistantMessage(){this.resetStreamState();const e={id:gd(),role:"assistant",parts:[],createdAt:new Date};return this.currentAssistantMessageId=e.id,this.messages=[...this.messages,e],this.events.onStreamStart?.(),this.emitMessagesChange(),e.id}addToolResult(e,n,r){const s=this.messages.find(f=>f.parts.some(d=>d.type==="tool-call"&&d.id===e));if(!s){console.warn(`[StreamProcessor] Could not find message with tool call ${e}`);return}let a=G6(this.messages,e,n,r?"input-complete":void 0,r);const l=typeof n=="string"?n:JSON.stringify(n),c=r?"error":"complete";a=p1(a,s.id,e,l,c,r),this.messages=a,this.emitMessagesChange()}addToolApprovalResponse(e,n){this.messages=Q6(this.messages,e,n),this.emitMessagesChange()}toModelMessages(){const e=[];for(const n of this.messages)e.push(...Bk(n));return e}getMessages(){return this.messages}areAllToolsComplete(){const e=this.messages.findLast(r=>r.role==="assistant");if(!e)return!0;const n=e.parts.filter(r=>r.type==="tool-call");return n.length===0?!0:n.every(r=>r.state==="approval-responded"||r.output!==void 0&&!r.approval)}removeMessagesAfter(e){this.messages=this.messages.slice(0,e+1),this.emitMessagesChange()}clearMessages(){this.messages=[],this.currentAssistantMessageId=null,this.emitMessagesChange()}async process(e){this.resetStreamState(),this.recordingEnabled&&this.startRecording();for await(const n of e)this.processChunk(n);return this.finalizeStream(),this.recording&&(this.recording.result=this.getResult()),this.getResult()}processChunk(e){switch(this.recording&&this.recording.chunks.push({chunk:e,timestamp:Date.now(),index:this.recording.chunks.length}),e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break;case"approval-requested":this.handleApprovalRequestedChunk(e);break;case"tool-input-available":this.handleToolInputAvailableChunk(e);break}}handleContentChunk(e){this.completeAllToolCalls();const n=this.currentSegmentText;this.hasToolCallsSinceTextStart&&n.length>0&&this.isNewTextSegment(e,n)&&(n!==this.lastEmittedText&&this.emitTextUpdate(),this.currentSegmentText="",this.lastEmittedText="",this.hasToolCallsSinceTextStart=!1);const s=this.currentSegmentText;let a=s;e.delta!==""?a=s+e.delta:e.content!==""&&(e.content.startsWith(s)?a=e.content:s.startsWith(e.content)?a=s:a=s+e.content);const l=a.slice(s.length);this.currentSegmentText=a,this.totalTextContent+=l;const c=e.delta??e.content??"";this.chunkStrategy.shouldEmit(c,this.currentSegmentText)&&this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate()}handleToolCallChunk(e){this.hasToolCallsSinceTextStart=!0;const n=e.toolCall.id,r=this.toolCalls.get(n);if(r){const s=r.state==="awaiting-input";r.arguments+=e.toolCall.function.arguments||"",s&&e.toolCall.function.arguments&&(r.state="input-streaming"),r.parsedArguments=this.jsonParser.parse(r.arguments);const a=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStateChange?.(a,r.id,r.name,r.state,r.arguments,r.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(a,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=pg(this.messages,this.currentAssistantMessageId,{id:r.id,name:r.name,arguments:r.arguments,state:r.state}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,r.id,r.state,r.arguments))}else{const s=e.toolCall.function.arguments?"input-streaming":"awaiting-input",a={id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s,parsedArguments:void 0,index:e.index};e.toolCall.function.arguments&&(a.parsedArguments=this.jsonParser.parse(e.toolCall.function.arguments)),this.toolCalls.set(n,a),this.toolCallOrder.push(n);const l=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStart?.(l,e.toolCall.id,e.toolCall.function.name),this.handlers.onToolCallStateChange?.(l,e.toolCall.id,e.toolCall.function.name,s,e.toolCall.function.arguments||"",a.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(l,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=pg(this.messages,this.currentAssistantMessageId,{id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,e.toolCall.id,s,e.toolCall.function.arguments||""))}}handleToolResultChunk(e){const n="complete";this.handlers.onToolResultStateChange?.(e.toolCallId,e.content,n),this.currentAssistantMessageId&&(this.messages=p1(this.messages,this.currentAssistantMessageId,e.toolCallId,e.content,n),this.emitMessagesChange())}handleDoneChunk(e){this.finishReason=e.finishReason,this.isDone=!0,this.completeAllToolCalls()}handleErrorChunk(e){this.handlers.onError?.(e.error),this.events.onError?.(new Error(e.error.message))}handleThinkingChunk(e){const n=this.thinkingContent;let r=n;e.delta!==""?r=n+e.delta:e.content!==""&&(e.content.startsWith(n)?r=e.content:n.startsWith(e.content)?r=n:r=n+e.content),this.thinkingContent=r,this.handlers.onThinkingUpdate?.(this.thinkingContent),this.currentAssistantMessageId&&(this.messages=Z6(this.messages,this.currentAssistantMessageId,this.thinkingContent),this.emitMessagesChange(),this.events.onThinkingUpdate?.(this.currentAssistantMessageId,this.thinkingContent))}handleApprovalRequestedChunk(e){this.handlers.onApprovalRequested?.(e.toolCallId,e.toolName,e.input,e.approval.id),this.currentAssistantMessageId&&(this.messages=K6(this.messages,this.currentAssistantMessageId,e.toolCallId,e.approval.id),this.emitMessagesChange()),this.events.onApprovalRequest?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,approvalId:e.approval.id})}handleToolInputAvailableChunk(e){this.handlers.onToolInputAvailable?.(e.toolCallId,e.toolName,e.input),this.events.onToolCall?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input})}isNewTextSegment(e,n){return e.delta!==void 0&&e.content!==void 0&&(e.content.length<n.length||!e.content.startsWith(n)&&!n.startsWith(e.content))}completeAllToolCalls(){this.toolCalls.forEach((e,n)=>{if(e.state!=="input-complete"){const r=this.toolCallOrder.indexOf(n);this.completeToolCall(r,e)}})}completeToolCall(e,n){n.state="input-complete",n.parsedArguments=this.jsonParser.parse(n.arguments),this.handlers.onToolCallStateChange?.(e,n.id,n.name,"input-complete",n.arguments,n.parsedArguments),this.handlers.onToolCallComplete?.(e,n.id,n.name,n.arguments),this.currentAssistantMessageId&&(this.messages=pg(this.messages,this.currentAssistantMessageId,{id:n.id,name:n.name,arguments:n.arguments,state:"input-complete"}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,n.id,"input-complete",n.arguments))}emitTextUpdate(){this.lastEmittedText=this.currentSegmentText,this.handlers.onTextUpdate?.(this.currentSegmentText),this.currentAssistantMessageId&&(this.messages=V6(this.messages,this.currentAssistantMessageId,this.currentSegmentText),this.emitMessagesChange(),this.events.onTextUpdate?.(this.currentAssistantMessageId,this.currentSegmentText))}emitMessagesChange(){this.events.onMessagesChange?.([...this.messages])}finalizeStream(){this.completeAllToolCalls(),this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate();const e=this.getCompletedToolCalls();if(this.handlers.onStreamEnd?.(this.totalTextContent,e.length>0?e:void 0),this.currentAssistantMessageId){const n=this.messages.find(r=>r.id===this.currentAssistantMessageId);n&&this.events.onStreamEnd?.(n)}}getCompletedToolCalls(){return Array.from(this.toolCalls.values()).filter(e=>e.state==="input-complete").map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:e.arguments}}))}getResult(){const e=this.getCompletedToolCalls();return{content:this.totalTextContent,thinking:this.thinkingContent||void 0,toolCalls:e.length>0?e:void 0,finishReason:this.finishReason}}getState(){return{content:this.totalTextContent,thinking:this.thinkingContent,toolCalls:new Map(this.toolCalls),toolCallOrder:[...this.toolCallOrder],finishReason:this.finishReason,done:this.isDone}}startRecording(){this.recordingEnabled=!0,this.recordingStartTime=Date.now(),this.recording={version:"1.0",timestamp:this.recordingStartTime,chunks:[]}}getRecording(){return this.recording}resetStreamState(){this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls.clear(),this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.chunkStrategy.reset?.()}reset(){this.resetStreamState(),this.messages=[],this.currentAssistantMessageId=null}static async replay(e,n){return new L0(n).process(J6(e))}}function J6(t){return{async*[Symbol.asyncIterator](){for(const{chunk:e}of t.chunks)yield e}}}class X6{constructor(e){this.clientId=e}clientCreated(e){this.emitEvent("client:created",{initialMessageCount:e})}loadingChanged(e){this.emitEvent("client:loading-changed",{isLoading:e})}errorChanged(e){this.emitEvent("client:error-changed",{error:e})}textUpdated(e,n,r){this.emitEvent("processor:text-updated",{streamId:e,content:r}),this.emitEvent("client:assistant-message-updated",{messageId:n,content:r})}toolCallStateChanged(e,n,r,s,a,l){this.emitEvent("processor:tool-call-state-changed",{streamId:e,toolCallId:r,toolName:s,state:a,arguments:l}),this.emitEvent("client:tool-call-updated",{messageId:n,toolCallId:r,toolName:s,state:a,arguments:l})}toolResultStateChanged(e,n,r,s,a){this.emitEvent("processor:tool-result-state-changed",{streamId:e,toolCallId:n,content:r,state:s,error:a})}thinkingUpdated(e,n,r,s){this.emitEvent("stream:chunk:thinking",{streamId:e,messageId:n,content:r,delta:s})}approvalRequested(e,n,r,s,a){this.emitEvent("client:approval-requested",{messageId:e,toolCallId:n,toolName:r,input:s,approvalId:a})}messageAppended(e){const n=e.parts.filter(r=>r.type==="text").map(r=>r.content).join(" ").substring(0,100);this.emitEvent("client:message-appended",{messageId:e.id,role:e.role,contentPreview:n})}messageSent(e,n){this.emitEvent("client:message-sent",{messageId:e,content:n})}reloaded(e){this.emitEvent("client:reloaded",{fromMessageIndex:e})}stopped(){this.emitEvent("client:stopped")}messagesCleared(){this.emitEvent("client:messages-cleared")}toolResultAdded(e,n,r,s){this.emitEvent("tool:result-added",{toolCallId:e,toolName:n,output:r,state:s})}toolApprovalResponded(e,n,r){this.emitEvent("tool:approval-responded",{approvalId:e,toolCallId:n,approved:r})}}class W6 extends X6{emitEvent(e,n){e.startsWith("client:")||e.startsWith("tool:")?Ft.emit(e,{...n,clientId:this.clientId,timestamp:Date.now()}):Ft.emit(e,{...n,timestamp:Date.now()})}}class eF{constructor(e){if(this.body={},this.isLoading=!1,this.error=void 0,this.abortController=null,this.currentStreamId=null,this.currentMessageId=null,this.postStreamActions=[],this.uniqueId=e.id||this.generateUniqueId("chat"),this.body=e.body||{},this.connection=e.connection,this.events=new W6(this.uniqueId),this.clientToolsRef={current:new Map},e.tools)for(const n of e.tools)this.clientToolsRef.current.set(n.name,n);this.callbacksRef={current:{onResponse:e.onResponse||(()=>{}),onChunk:e.onChunk||(()=>{}),onFinish:e.onFinish||(()=>{}),onError:e.onError||(()=>{}),onMessagesChange:e.onMessagesChange||(()=>{}),onLoadingChange:e.onLoadingChange||(()=>{}),onErrorChange:e.onErrorChange||(()=>{})}},this.processor=new L0({chunkStrategy:e.streamProcessor?.chunkStrategy,initialMessages:e.initialMessages,events:{onMessagesChange:n=>{this.callbacksRef.current.onMessagesChange(n)},onStreamStart:()=>{},onStreamEnd:n=>{this.callbacksRef.current.onFinish(n)},onError:n=>{this.setError(n),this.callbacksRef.current.onError(n)},onTextUpdate:(n,r)=>{this.currentStreamId&&this.events.textUpdated(this.currentStreamId,n,r)},onThinkingUpdate:(n,r)=>{this.currentStreamId&&this.events.thinkingUpdated(this.currentStreamId,n,r)},onToolCallStateChange:(n,r,s,a)=>{const d=this.processor.getMessages().find(m=>m.id===n)?.parts.find(m=>m.type==="tool-call"&&m.id===r)?.name||"unknown";this.currentStreamId&&this.events.toolCallStateChanged(this.currentStreamId,n,r,d,s,a)},onToolCall:async n=>{const r=this.clientToolsRef.current.get(n.toolName);if(r?.execute)try{const s=await r.execute(n.input);await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:s,state:"output-available"})}catch(s){await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:null,state:"output-error",errorText:s.message})}},onApprovalRequest:n=>{this.events.approvalRequested(this.currentMessageId||"",n.toolCallId,n.toolName,n.input,n.approvalId)}}}),this.events.clientCreated(this.processor.getMessages().length)}generateUniqueId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substring(7)}`}setIsLoading(e){this.isLoading=e,this.callbacksRef.current.onLoadingChange(e),this.events.loadingChanged(e)}setError(e){this.error=e,this.callbacksRef.current.onErrorChange(e),this.events.errorChanged(e?.message||null)}async processStream(e){this.currentStreamId=this.generateUniqueId("stream");const n=this.processor.startAssistantMessage();this.currentMessageId=n;const r={id:n,role:"assistant",parts:[],createdAt:new Date};this.events.messageAppended(r);for await(const l of e)this.callbacksRef.current.onChunk(l),this.processor.processChunk(l),await new Promise(c=>setTimeout(c,0));return this.processor.finalizeStream(),this.currentStreamId=null,this.currentMessageId=null,this.processor.getMessages().find(l=>l.id===n)||{id:n,role:"assistant",parts:[],createdAt:new Date}}async sendMessage(e){if(!e.trim()||this.isLoading)return;const n=this.processor.addUserMessage(e.trim());this.events.messageSent(n.id,e.trim()),await this.streamResponse()}async append(e){const n=$6(e,gd);if(n.role==="system")return;const r=n;this.events.messageAppended(r);const s=this.processor.getMessages();this.processor.setMessages([...s,r]),await this.streamResponse()}async streamResponse(){this.setIsLoading(!0),this.setError(void 0),this.abortController=new AbortController;try{const e=this.processor.toModelMessages();await this.callbacksRef.current.onResponse();const n={...this.body,conversationId:this.uniqueId},r=this.connection.connect(e,n,this.abortController.signal);await this.processStream(r)}catch(e){if(e instanceof Error){if(e.name==="AbortError")return;this.setError(e),this.callbacksRef.current.onError(e)}}finally{this.abortController=null,this.setIsLoading(!1),await this.drainPostStreamActions()}}async reload(){const e=this.processor.getMessages();if(e.length===0)return;const n=e.findLastIndex(r=>r.role==="user");n!==-1&&(this.events.reloaded(n),this.processor.removeMessagesAfter(n),await this.streamResponse())}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.setIsLoading(!1),this.events.stopped()}clear(){this.processor.clearMessages(),this.setError(void 0),this.events.messagesCleared()}async addToolResult(e){if(this.events.toolResultAdded(e.toolCallId,e.tool,e.output,e.state||"output-available"),this.processor.addToolResult(e.toolCallId,e.output,e.errorText),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}async addToolApprovalResponse(e){const n=this.processor.getMessages();let r;for(const s of n){const a=s.parts.find(l=>l.type==="tool-call"&&l.approval?.id===e.id);if(a){r=a.id;break}}if(r&&this.events.toolApprovalResponded(e.id,r,e.approved),this.processor.addToolApprovalResponse(e.id,e.approved),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}queuePostStreamAction(e){this.postStreamActions.push(e)}async drainPostStreamActions(){for(;this.postStreamActions.length>0;)await this.postStreamActions.shift()()}async checkForContinuation(){this.shouldAutoSend()&&await this.streamResponse()}shouldAutoSend(){return this.processor.areAllToolsComplete()}getMessages(){return this.processor.getMessages()}getIsLoading(){return this.isLoading}getError(){return this.error}setMessagesManually(e){this.processor.setMessages(e)}updateOptions(e){if(e.connection!==void 0&&(this.connection=e.connection),e.body!==void 0&&(this.body=e.body),e.tools!==void 0){this.clientToolsRef.current=new Map;for(const n of e.tools)this.clientToolsRef.current.set(n.name,n)}e.onResponse!==void 0&&(this.callbacksRef.current.onResponse=e.onResponse),e.onChunk!==void 0&&(this.callbacksRef.current.onChunk=e.onChunk),e.onFinish!==void 0&&(this.callbacksRef.current.onFinish=e.onFinish),e.onError!==void 0&&(this.callbacksRef.current.onError=e.onError)}}function tF(...t){return t}function nF(t){return{async*connect(e,n){const r=P6(e);yield*t(r,n)}}}function rF(t){const e=q.useId(),n=t.id||e,[r,s]=q.useState(t.initialMessages||[]),[a,l]=q.useState(!1),[c,f]=q.useState(void 0),d=q.useRef(t.initialMessages||[]),m=q.useRef(!0);q.useEffect(()=>{d.current=r},[r]);const p=q.useRef(t);p.current=t;const g=q.useMemo(()=>{const L=m.current?t.initialMessages||[]:d.current;return m.current=!1,new eF({connection:p.current.connection,id:n,initialMessages:L,body:p.current.body,onResponse:p.current.onResponse,onChunk:p.current.onChunk,onFinish:p.current.onFinish,onError:p.current.onError,tools:p.current.tools,streamProcessor:t.streamProcessor,onMessagesChange:A=>{s(A)},onLoadingChange:A=>{l(A)},onErrorChange:A=>{f(A)}})},[n]);q.useEffect(()=>{t.initialMessages&&t.initialMessages.length>0&&r.length===0&&g.setMessagesManually(t.initialMessages)},[]),q.useEffect(()=>()=>{g.stop()},[g]);const y=q.useCallback(async L=>{await g.sendMessage(L)},[g]),x=q.useCallback(async L=>{await g.append(L)},[g]),S=q.useCallback(async()=>{await g.reload()},[g]),E=q.useCallback(()=>{g.stop()},[g]),_=q.useCallback(()=>{g.clear()},[g]),k=q.useCallback(L=>{g.setMessagesManually(L)},[g]),R=q.useCallback(async L=>{await g.addToolResult(L)},[g]),N=q.useCallback(async L=>{await g.addToolApprovalResponse(L)},[g]);return{messages:r,sendMessage:y,append:x,reload:S,stop:E,isLoading:a,error:c,setMessages:k,clear:_,addToolResult:R,addToolApprovalResponse:N}}class sF{constructor(e={},n){this.kind="text",this.config=e,this.model=n}generateId(){return`${this.name}-${Date.now()}-${Math.random().toString(36).substring(7)}`}}const iF=t=>{if(t.conversation&&t.previous_response_id)throw new Error("Cannot use both 'conversation' and 'previous_response_id' in the same request.")},aF=t=>{oF(t),iF(t)},oF=t=>{const e=t.metadata;if(e&&Object.keys(e).length>16)throw new Error("Metadata cannot have more than 16 key-value pairs.");if(e&&Object.keys(e).some(a=>a.length>64))throw new Error("Metadata keys cannot be longer than 64 characters.");if(e&&Object.values(e).some(a=>a.length>512))throw new Error("Metadata values cannot be longer than 512 characters.")};function wy(t){if(t!==null){if(Array.isArray(t))return t.map(e=>wy(e));if(typeof t=="object"){const e={};for(const[n,r]of Object.entries(t)){const s=wy(r);s!==void 0&&(e[n]=s)}return e}return t}}function tu(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],c=!e.includes(a);l.type==="object"&&l.properties?r[a]=tu(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:tu(l.items,l.items.required||[])}:c&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=tu(n.items,n.items.required||[])),n}function lF(t){return{type:"apply_patch"}}function uF(t){return{type:"code_interpreter",container:t.metadata.container}}function cF(t){const e=t.metadata;return{type:"computer_use_preview",display_height:e.display_height,display_width:e.display_width,environment:e.environment}}function fF(t){const e=t.metadata;return{type:"custom",name:e.name,description:e.description,format:e.format}}function dF(t){const e=t.metadata;return{type:"file_search",vector_store_ids:e.vector_store_ids,max_num_results:e.max_num_results,ranking_options:e.ranking_options,filters:e.filters}}function hF(t){const e=t.inputSchema??{type:"object",properties:{},required:[]},n=tu(e,e.required||[]);return n.additionalProperties=!1,{type:"function",name:t.name,description:t.description,parameters:n,strict:!0}}function pF(t){return{type:"image_generation",...t.metadata}}function mF(t){return{type:"local_shell"}}function gF(t){if(!t.server_url&&!t.connector_id)throw new Error("Either server_url or connector_id must be provided.");if(t.connector_id&&t.server_url)throw new Error("Only one of server_url or connector_id can be provided.")}function yF(t){const n={type:"mcp",...t.metadata};return gF(n),n}function vF(t){return{type:"shell"}}function bF(t){const e=t.metadata;return{type:e.type,search_context_size:e.search_context_size,user_location:e.user_location}}function xF(t){return t.metadata}function SF(t){return t.map(e=>{const n=new Set(["apply_patch","code_interpreter","computer_use_preview","file_search","image_generation","local_shell","mcp","shell","web_search_preview","web_search","custom"]),r=e.name;if(n.has(r))switch(r){case"apply_patch":return lF();case"code_interpreter":return uF(e);case"computer_use_preview":return cF(e);case"file_search":return dF(e);case"image_generation":return pF(e);case"local_shell":return mF();case"mcp":return yF(e);case"shell":return vF();case"web_search_preview":return bF(e);case"web_search":return xF(e);case"custom":return fF(e)}return hF(e)})}function je(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function W(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let Uk=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return Uk=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function _y(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Cy=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Oe extends Error{}class cn extends Oe{constructor(e,n,r,s){super(`${cn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new Zd({message:r,cause:Cy(n)});const a=n?.error;return e===400?new qk(e,a,r,s):e===401?new Hk(e,a,r,s):e===403?new Vk(e,a,r,s):e===404?new Kk(e,a,r,s):e===409?new Gk(e,a,r,s):e===422?new Qk(e,a,r,s):e===429?new Zk(e,a,r,s):e>=500?new Yk(e,a,r,s):new cn(e,a,r,s)}}class xr extends cn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Zd extends cn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class P0 extends Zd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class qk extends cn{}class Hk extends cn{}class Vk extends cn{}class Kk extends cn{}class Gk extends cn{}class Qk extends cn{}class Zk extends cn{}class Yk extends cn{}class Jk extends Oe{constructor(){super("Could not parse response content as the length limit was reached")}}class Xk extends Oe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class zl extends Error{constructor(e){super(e)}}const wF=/^[a-z][a-z0-9+.-]*:/i,_F=t=>wF.test(t);let zn=t=>(zn=Array.isArray,zn(t)),m1=zn;function Wk(t){return typeof t!="object"?{}:t??{}}function CF(t){if(!t)return!0;for(const e in t)return!1;return!0}function EF(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function mg(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const kF=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Oe(`${t} must be an integer`);if(e<0)throw new Oe(`${t} must be a positive integer`);return e},RF=t=>{try{return JSON.parse(t)}catch{return}},Mu=t=>new Promise(e=>setTimeout(e,t)),Va="6.15.0",AF=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function TF(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const OF=()=>{const t=TF();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":y1(Deno.build.os),"X-Stainless-Arch":g1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":y1(globalThis.process.platform??"unknown"),"X-Stainless-Arch":g1(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=MF();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function MF(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${s}.${a}.${l}`}}}return null}const g1=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",y1=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let v1;const IF=()=>v1??(v1=OF());function NF(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function eR(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function tR(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return eR({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){await e.return?.()}})}function nR(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function DF(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const zF=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),rR="RFC3986",sR=t=>String(t),b1={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:sR},jF="RFC1738";let Ey=(t,e)=>(Ey=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Ey(t,e));const Lr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),gg=1024,LF=(t,e,n,r,s)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let l="";for(let c=0;c<a.length;c+=gg){const f=a.length>=gg?a.slice(c,c+gg):a,d=[];for(let m=0;m<f.length;++m){let p=f.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===jF&&(p===40||p===41)){d[d.length]=f.charAt(m);continue}if(p<128){d[d.length]=Lr[p];continue}if(p<2048){d[d.length]=Lr[192|p>>6]+Lr[128|p&63];continue}if(p<55296||p>=57344){d[d.length]=Lr[224|p>>12]+Lr[128|p>>6&63]+Lr[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|f.charCodeAt(m)&1023),d[d.length]=Lr[240|p>>18]+Lr[128|p>>12&63]+Lr[128|p>>6&63]+Lr[128|p&63]}l+=d.join("")}return l};function PF(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function x1(t,e){if(zn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const iR={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},aR=function(t,e){Array.prototype.push.apply(t,zn(e)?e:[e])};let S1;const Ht={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:LF,encodeValuesOnly:!1,format:rR,formatter:sR,indices:!1,serializeDate(t){return(S1??(S1=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function FF(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const yg={};function oR(t,e,n,r,s,a,l,c,f,d,m,p,g,y,x,S,E,_){let k=t,R=_,N=0,L=!1;for(;(R=R.get(yg))!==void 0&&!L;){const M=R.get(t);if(N+=1,typeof M<"u"){if(M===N)throw new RangeError("Cyclic object value");L=!0}typeof R.get(yg)>"u"&&(N=0)}if(typeof d=="function"?k=d(e,k):k instanceof Date?k=g?.(k):n==="comma"&&zn(k)&&(k=x1(k,function(M){return M instanceof Date?g?.(M):M})),k===null){if(a)return f&&!S?f(e,Ht.encoder,E,"key",y):e;k=""}if(FF(k)||PF(k)){if(f){const M=S?e:f(e,Ht.encoder,E,"key",y);return[x?.(M)+"="+x?.(f(k,Ht.encoder,E,"value",y))]}return[x?.(e)+"="+x?.(String(k))]}const A=[];if(typeof k>"u")return A;let I;if(n==="comma"&&zn(k))S&&f&&(k=x1(k,f)),I=[{value:k.length>0?k.join(",")||null:void 0}];else if(zn(d))I=d;else{const M=Object.keys(k);I=m?M.sort(m):M}const j=c?String(e).replace(/\./g,"%2E"):String(e),P=r&&zn(k)&&k.length===1?j+"[]":j;if(s&&zn(k)&&k.length===0)return P+"[]";for(let M=0;M<I.length;++M){const B=I[M],Q=typeof B=="object"&&typeof B.value<"u"?B.value:k[B];if(l&&Q===null)continue;const Z=p&&c?B.replace(/\./g,"%2E"):B,te=zn(k)?typeof n=="function"?n(P,Z):P:P+(p?"."+Z:"["+Z+"]");_.set(t,N);const V=new WeakMap;V.set(yg,_),aR(A,oR(Q,te,n,r,s,a,l,c,n==="comma"&&S&&zn(k)?null:f,d,m,p,g,y,x,S,E,V))}return A}function $F(t=Ht){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ht.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=rR;if(typeof t.format<"u"){if(!Ey(b1,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=b1[n];let s=Ht.filter;(typeof t.filter=="function"||zn(t.filter))&&(s=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in iR?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Ht.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ht.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ht.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ht.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ht.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ht.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ht.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ht.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ht.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ht.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ht.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ht.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ht.strictNullHandling}}function BF(t,e={}){let n=t;const r=$F(e);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):zn(r.filter)&&(a=r.filter,s=a);const l=[];if(typeof n!="object"||n===null)return"";const c=iR[r.arrayFormat],f=c==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const d=new WeakMap;for(let g=0;g<s.length;++g){const y=s[g];r.skipNulls&&n[y]===null||aR(l,oR(n[y],y,c,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}const m=l.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function UF(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let w1;function F0(t){let e;return(w1??(e=new globalThis.TextEncoder,w1=e.encode.bind(e)))(t)}let _1;function C1(t){let e;return(_1??(e=new globalThis.TextDecoder,_1=e.decode.bind(e)))(t)}var Qn,Zn;class Yd{constructor(){Qn.set(this,void 0),Zn.set(this,void 0),je(this,Qn,new Uint8Array),je(this,Zn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?F0(e):e;je(this,Qn,UF([W(this,Qn,"f"),n]));const r=[];let s;for(;(s=qF(W(this,Qn,"f"),W(this,Zn,"f")))!=null;){if(s.carriage&&W(this,Zn,"f")==null){je(this,Zn,s.index);continue}if(W(this,Zn,"f")!=null&&(s.index!==W(this,Zn,"f")+1||s.carriage)){r.push(C1(W(this,Qn,"f").subarray(0,W(this,Zn,"f")-1))),je(this,Qn,W(this,Qn,"f").subarray(W(this,Zn,"f"))),je(this,Zn,null);continue}const a=W(this,Zn,"f")!==null?s.preceding-1:s.preceding,l=C1(W(this,Qn,"f").subarray(0,a));r.push(l),je(this,Qn,W(this,Qn,"f").subarray(s.index)),je(this,Zn,null)}return r}flush(){return W(this,Qn,"f").length?this.decode(`
`):[]}}Qn=new WeakMap,Zn=new WeakMap;Yd.NEWLINE_CHARS=new Set([`
`,"\r"]);Yd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function qF(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function HF(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const yd={off:0,error:200,warn:300,info:400,debug:500},E1=(t,e,n)=>{if(t){if(EF(yd,t))return t;ln(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(yd))}`)}};function jl(){}function gf(t,e,n){return!e||yd[t]>yd[n]?jl:e[t].bind(e)}const VF={error:jl,warn:jl,info:jl,debug:jl};let k1=new WeakMap;function ln(t){const e=t.logger,n=t.logLevel??"off";if(!e)return VF;const r=k1.get(e);if(r&&r[0]===n)return r[1];const s={error:gf("error",e,n),warn:gf("warn",e,n),info:gf("info",e,n),debug:gf("debug",e,n)};return k1.set(e,[n,s]),s}const Ii=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var El;class $r{constructor(e,n,r){this.iterator=e,El.set(this,void 0),this.controller=n,je(this,El,r)}static fromSSEResponse(e,n,r){let s=!1;const a=r?ln(r):console;async function*l(){if(s)throw new Oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let c=!1;try{for await(const f of KF(e,n))if(!c){if(f.data.startsWith("[DONE]")){c=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let d;try{d=JSON.parse(f.data)}catch(m){throw a.error("Could not parse message into JSON:",f.data),a.error("From chunk:",f.raw),m}if(d&&d.error)throw new cn(void 0,d.error,void 0,e.headers);yield d}else{let d;try{d=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new cn(void 0,d.error,d.message,void 0);yield{event:f.event,data:d}}}c=!0}catch(f){if(_y(f))return;throw f}finally{c||n.abort()}}return new $r(l,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*a(){const c=new Yd,f=nR(e);for await(const d of f)for(const m of c.decode(d))yield m;for(const d of c.flush())yield d}async function*l(){if(s)throw new Oe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let c=!1;try{for await(const f of a())c||f&&(yield JSON.parse(f));c=!0}catch(f){if(_y(f))return;throw f}finally{c||n.abort()}}return new $r(l,n,r)}[(El=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),n.push(l)}return a.shift()}});return[new $r(()=>s(e),this.controller,W(this,El,"f")),new $r(()=>s(n),this.controller,W(this,El,"f"))]}toReadableStream(){const e=this;let n;return eR({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const l=F0(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}}async function*KF(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Oe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Oe("Attempted to iterate over a response with no body");const n=new QF,r=new Yd,s=nR(t.body);for await(const a of GF(s))for(const l of r.decode(a)){const c=n.decode(l);c&&(yield c)}for(const a of r.flush()){const l=n.decode(a);l&&(yield l)}}async function*GF(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?F0(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let a;for(;(a=HF(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class QF{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=ZF(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function ZF(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function lR(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=e,l=await(async()=>{if(e.options.stream)return ln(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):$r.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return uR(p,n)}return await n.text()})();return ln(t).debug(`[${r}] response parsed`,Ii({retryOfRequestLogID:s,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}function uR(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Ll;class Jd extends Promise{constructor(e,n,r=lR){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,Ll.set(this,void 0),je(this,Ll,e)}_thenUnwrap(e){return new Jd(W(this,Ll,"f"),this.responsePromise,async(n,r)=>uR(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(W(this,Ll,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Ll=new WeakMap;var yf;class $0{constructor(e,n,r,s){yf.set(this,void 0),je(this,yf,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Oe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await W(this,yf,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(yf=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class YF extends Jd{constructor(e,n,r){super(e,n,async(s,a)=>new r(s,a.response,await lR(s,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Xd extends $0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Bt extends $0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...Wk(this.options.query),after:n}}:null}}class vd extends $0{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...Wk(this.options.query),after:e}}:null}}const cR=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function nu(t,e,n){return cR(),new File(t,e??"unknown_file",n)}function Lf(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const B0=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",R1=async(t,e)=>ky(t.body)?{...t,body:await fR(t.body,e)}:t,Gi=async(t,e)=>({...t,body:await fR(t.body,e)}),A1=new WeakMap;function JF(t){const e=typeof t=="function"?t:t.fetch,n=A1.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return A1.set(e,r),r}const fR=async(t,e)=>{if(!await JF(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>Ry(n,r,s))),n},dR=t=>t instanceof Blob&&"name"in t,XF=t=>typeof t=="object"&&t!==null&&(t instanceof Response||B0(t)||dR(t)),ky=t=>{if(XF(t))return!0;if(Array.isArray(t))return t.some(ky);if(t&&typeof t=="object"){for(const e in t)if(ky(t[e]))return!0}return!1},Ry=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,nu([await n.blob()],Lf(n)));else if(B0(n))t.append(e,nu([await new Response(tR(n)).blob()],Lf(n)));else if(dR(n))t.append(e,n,Lf(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Ry(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Ry(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},hR=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",WF=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&hR(t),e$=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function t$(t,e,n){if(cR(),t=await t,WF(t))return t instanceof File?t:nu([await t.arrayBuffer()],t.name);if(e$(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),nu(await Ay(s),e,n)}const r=await Ay(t);if(e||(e=Lf(t)),!n?.type){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n={...n,type:s})}return nu(r,e,n)}async function Ay(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(hR(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(B0(t))for await(const n of t)e.push(...await Ay(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${n$(t)}`)}return e}function n$(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Re{constructor(e){this._client=e}}function pR(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const T1=Object.freeze(Object.create(null)),r$=(t=pR)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],l=n.reduce((m,p,g)=>{/[?#]/.test(p)&&(s=!0);const y=r[g];let x=(s?encodeURIComponent:t)(""+y);return g!==r.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??T1)??T1)?.toString)&&(x=y+"",a.push({start:m.length+p.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),m+p+(g===r.length?"":x)},""),c=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=f.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,p)=>m.start-p.start),a.length>0){let m=0;const p=a.reduce((g,y)=>{const x=" ".repeat(y.start-m),S="^".repeat(y.length);return m=y.start+y.length,g+x+S},"");throw new Oe(`Path parameters result in path with invalid segments:
${a.map(g=>g.error).join(`
`)}
${l}
${p}`)}return l},he=r$(pR);let mR=class extends Re{list(e,n={},r){return this._client.getAPIList(he`/chat/completions/${e}/messages`,Bt,{query:n,...r})}};function bd(t){return t!==void 0&&"function"in t&&t.function!==void 0}function U0(t){return t?.$brand==="auto-parseable-response-format"}function Iu(t){return t?.$brand==="auto-parseable-tool"}function s$(t,e){return!e||!gR(e)?{...t,choices:t.choices.map(n=>(yR(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:q0(t,e)}function q0(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new Jk;if(r.finish_reason==="content_filter")throw new Xk;return yR(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(s=>a$(e,s))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?i$(e,r.message.content):null}}});return{...t,choices:n}}function i$(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function a$(t,e){const n=t.tools?.find(r=>bd(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Iu(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function o$(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>bd(r)&&r.function?.name===e.function.name);return bd(n)&&(Iu(n)||n?.function.strict||!1)}function gR(t){return U0(t.response_format)?!0:t.tools?.some(e=>Iu(e)||e.type==="function"&&e.function.strict===!0)??!1}function yR(t){for(const e of t||[])if(e.type!=="function")throw new Oe(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function l$(t){for(const e of t??[]){if(e.type!=="function")throw new Oe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Oe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const xd=t=>t?.role==="assistant",vR=t=>t?.role==="tool";var Ty,Pf,Ff,Pl,Fl,$f,$l,ds,Bl,Sd,wd,Ka,bR;class H0{constructor(){Ty.add(this),this.controller=new AbortController,Pf.set(this,void 0),Ff.set(this,()=>{}),Pl.set(this,()=>{}),Fl.set(this,void 0),$f.set(this,()=>{}),$l.set(this,()=>{}),ds.set(this,{}),Bl.set(this,!1),Sd.set(this,!1),wd.set(this,!1),Ka.set(this,!1),je(this,Pf,new Promise((e,n)=>{je(this,Ff,e,"f"),je(this,Pl,n,"f")})),je(this,Fl,new Promise((e,n)=>{je(this,$f,e,"f"),je(this,$l,n,"f")})),W(this,Pf,"f").catch(()=>{}),W(this,Fl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},W(this,Ty,"m",bR).bind(this))},0)}_connected(){this.ended||(W(this,Ff,"f").call(this),this._emit("connect"))}get ended(){return W(this,Bl,"f")}get errored(){return W(this,Sd,"f")}get aborted(){return W(this,wd,"f")}abort(){this.controller.abort()}on(e,n){return(W(this,ds,"f")[e]||(W(this,ds,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=W(this,ds,"f")[e];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(W(this,ds,"f")[e]||(W(this,ds,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{je(this,Ka,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){je(this,Ka,!0),await W(this,Fl,"f")}_emit(e,...n){if(W(this,Bl,"f"))return;e==="end"&&(je(this,Bl,!0),W(this,$f,"f").call(this));const r=W(this,ds,"f")[e];if(r&&(W(this,ds,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!W(this,Ka,"f")&&!r?.length&&Promise.reject(s),W(this,Pl,"f").call(this,s),W(this,$l,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!W(this,Ka,"f")&&!r?.length&&Promise.reject(s),W(this,Pl,"f").call(this,s),W(this,$l,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Pf=new WeakMap,Ff=new WeakMap,Pl=new WeakMap,Fl=new WeakMap,$f=new WeakMap,$l=new WeakMap,ds=new WeakMap,Bl=new WeakMap,Sd=new WeakMap,wd=new WeakMap,Ka=new WeakMap,Ty=new WeakSet,bR=function(e){if(je(this,Sd,!0),e instanceof Error&&e.name==="AbortError"&&(e=new xr),e instanceof xr)return je(this,wd,!0),this._emit("abort",e);if(e instanceof Oe)return this._emit("error",e);if(e instanceof Error){const n=new Oe(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Oe(String(e)))};function u$(t){return typeof t.parse=="function"}var xn,Oy,_d,My,Iy,Ny,xR,SR;const c$=10;class wR extends H0{constructor(){super(...arguments),xn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),vR(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(xd(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Oe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),W(this,xn,"m",Oy).call(this)}async finalMessage(){return await this.done(),W(this,xn,"m",_d).call(this)}async finalFunctionToolCall(){return await this.done(),W(this,xn,"m",My).call(this)}async finalFunctionToolCallResult(){return await this.done(),W(this,xn,"m",Iy).call(this)}async totalUsage(){return await this.done(),W(this,xn,"m",Ny).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=W(this,xn,"m",_d).call(this);n&&this._emit("finalMessage",n);const r=W(this,xn,"m",Oy).call(this);r&&this._emit("finalContent",r);const s=W(this,xn,"m",My).call(this);s&&this._emit("finalFunctionToolCall",s);const a=W(this,xn,"m",Iy).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",W(this,xn,"m",Ny).call(this))}async _createChatCompletion(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),W(this,xn,"m",xR).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(q0(a,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const s="tool",{tool_choice:a="auto",stream:l,...c}=n,f=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=c$}=r||{},m=n.tools.map(y=>{if(Iu(y)){if(!y.$callback)throw new Oe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),p={};for(const y of m)y.type==="function"&&(p[y.function.name||y.function.function.name]=y.function);const g="tools"in n?m.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<d;++y){const S=(await this._createChatCompletion(e,{...c,tool_choice:a,tools:g,messages:[...this.messages]},r)).choices[0]?.message;if(!S)throw new Oe("missing message in ChatCompletion response");if(!S.tool_calls?.length)return;for(const E of S.tool_calls){if(E.type!=="function")continue;const _=E.id,{name:k,arguments:R}=E.function,N=p[k];if(N){if(f&&f!==k){const j=`Invalid tool_call: ${JSON.stringify(k)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:s,tool_call_id:_,content:j});continue}}else{const j=`Invalid tool_call: ${JSON.stringify(k)}. Available options are: ${Object.keys(p).map(P=>JSON.stringify(P)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:_,content:j});continue}let L;try{L=u$(N)?await N.parse(R):R}catch(j){const P=j instanceof Error?j.message:String(j);this._addMessage({role:s,tool_call_id:_,content:P});continue}const A=await N.function(L,this),I=W(this,xn,"m",SR).call(this,A);if(this._addMessage({role:s,tool_call_id:_,content:I}),f)return}}}}xn=new WeakSet,Oy=function(){return W(this,xn,"m",_d).call(this).content??null},_d=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(xd(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Oe("stream ended without producing a ChatCompletionMessage with role=assistant")},My=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(xd(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},Iy=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(vR(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},Ny=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},xR=function(e){if(e.n!=null&&e.n>1)throw new Oe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},SR=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class V0 extends wR{static runTools(e,n,r){const s=new V0,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}_addMessage(e,n=!0){super._addMessage(e,n),xd(e)&&e.content&&this._emit("content",e.content)}}const _R=1,CR=2,ER=4,kR=8,RR=16,AR=32,TR=64,OR=128,MR=256,IR=OR|MR,NR=RR|AR|IR|TR,DR=_R|CR|NR,zR=ER|kR,f$=DR|zR,Wt={STR:_R,NUM:CR,ARR:ER,OBJ:kR,NULL:RR,BOOL:AR,NAN:TR,INFINITY:OR,MINUS_INFINITY:MR,INF:IR,SPECIAL:NR,ATOM:DR,COLLECTION:zR,ALL:f$};class d$ extends Error{}class h$ extends Error{}function p$(t,e=Wt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return m$(t.trim(),e)}const m$=(t,e)=>{const n=t.length;let r=0;const s=g=>{throw new d$(`${g} at position ${r}`)},a=g=>{throw new h$(`${g} at position ${r}`)},l=()=>(p(),r>=n&&s("Unexpected end of input"),t[r]==='"'?c():t[r]==="{"?f():t[r]==="["?d():t.substring(r,r+4)==="null"||Wt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Wt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Wt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Wt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Wt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Wt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):m()),c=()=>{const g=r;let y=!1;for(r++;r<n&&(t[r]!=='"'||y&&t[r-1]==="\\");)y=t[r]==="\\"?!y:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(g,++r-Number(y)))}catch(x){a(String(x))}else if(Wt.STR&e)try{return JSON.parse(t.substring(g,r-Number(y))+'"')}catch{return JSON.parse(t.substring(g,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},f=()=>{r++,p();const g={};try{for(;t[r]!=="}";){if(p(),r>=n&&Wt.OBJ&e)return g;const y=c();p(),r++;try{const x=l();Object.defineProperty(g,y,{value:x,writable:!0,enumerable:!0,configurable:!0})}catch(x){if(Wt.OBJ&e)return g;throw x}p(),t[r]===","&&r++}}catch{if(Wt.OBJ&e)return g;s("Expected '}' at end of object")}return r++,g},d=()=>{r++;const g=[];try{for(;t[r]!=="]";)g.push(l()),p(),t[r]===","&&r++}catch{if(Wt.ARR&e)return g;s("Expected ']' at end of array")}return r++,g},m=()=>{if(r===0){t==="-"&&Wt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(y){if(Wt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(y))}}const g=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Wt.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(g,r))}catch{t.substring(g,r)==="-"&&Wt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(g,t.lastIndexOf("e")))}catch(x){a(String(x))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return l()},O1=t=>p$(t,Wt.ALL^Wt.NUM);var qt,fs,Fa,Ks,vg,vf,bg,xg,Sg,bf,wg,M1;class bu extends wR{constructor(e){super(),qt.add(this),fs.set(this,void 0),Fa.set(this,void 0),Ks.set(this,void 0),je(this,fs,e),je(this,Fa,[])}get currentChatCompletionSnapshot(){return W(this,Ks,"f")}static fromReadableStream(e){const n=new bu(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new bu(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){super._createChatCompletion;const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),W(this,qt,"m",vg).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of a)W(this,qt,"m",bg).call(this,l);if(a.controller.signal?.aborted)throw new xr;return this._addChatCompletion(W(this,qt,"m",bf).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),W(this,qt,"m",vg).call(this),this._connected();const s=$r.fromReadableStream(e,this.controller);let a;for await(const l of s)a&&a!==l.id&&this._addChatCompletion(W(this,qt,"m",bf).call(this)),W(this,qt,"m",bg).call(this,l),a=l.id;if(s.controller.signal?.aborted)throw new xr;return this._addChatCompletion(W(this,qt,"m",bf).call(this))}[(fs=new WeakMap,Fa=new WeakMap,Ks=new WeakMap,qt=new WeakSet,vg=function(){this.ended||je(this,Ks,void 0)},vf=function(n){let r=W(this,Fa,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},W(this,Fa,"f")[n.index]=r,r)},bg=function(n){if(this.ended)return;const r=W(this,qt,"m",M1).call(this,n);this._emit("chunk",n,r);for(const s of n.choices){const a=r.choices[s.index];s.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",s.delta.content,a.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),s.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:a.message.refusal}),s.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:a.logprobs?.content??[]}),s.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const l=W(this,qt,"m",vf).call(this,a);a.finish_reason&&(W(this,qt,"m",Sg).call(this,a),l.current_tool_call_index!=null&&W(this,qt,"m",xg).call(this,a,l.current_tool_call_index));for(const c of s.delta.tool_calls??[])l.current_tool_call_index!==c.index&&(W(this,qt,"m",Sg).call(this,a),l.current_tool_call_index!=null&&W(this,qt,"m",xg).call(this,a,l.current_tool_call_index)),l.current_tool_call_index=c.index;for(const c of s.delta.tool_calls??[]){const f=a.message.tool_calls?.[c.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:c.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(f?.type,void 0))}}},xg=function(n,r){if(W(this,qt,"m",vf).call(this,n).done_tool_calls.has(r))return;const a=n.message.tool_calls?.[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=W(this,fs,"f")?.tools?.find(c=>bd(c)&&c.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:Iu(l)?l.$parseRaw(a.function.arguments):l?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Sg=function(n){const r=W(this,qt,"m",vf).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=W(this,qt,"m",wg).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},bf=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");const n=W(this,Ks,"f");if(!n)throw new Oe("request ended without sending any chunks");return je(this,Ks,void 0),je(this,Fa,[]),g$(n,W(this,fs,"f"))},wg=function(){const n=W(this,fs,"f")?.response_format;return U0(n)?n:null},M1=function(n){var r,s,a,l;let c=W(this,Ks,"f");const{choices:f,...d}=n;c?Object.assign(c,d):c=je(this,Ks,{...d,choices:[]});for(const{delta:m,finish_reason:p,index:g,logprobs:y=null,...x}of n.choices){let S=c.choices[g];if(S||(S=c.choices[g]={finish_reason:p,index:g,message:{},logprobs:y,...x}),y)if(!S.logprobs)S.logprobs=Object.assign({},y);else{const{content:A,refusal:I,...j}=y;Object.assign(S.logprobs,j),A&&((r=S.logprobs).content??(r.content=[]),S.logprobs.content.push(...A)),I&&((s=S.logprobs).refusal??(s.refusal=[]),S.logprobs.refusal.push(...I))}if(p&&(S.finish_reason=p,W(this,fs,"f")&&gR(W(this,fs,"f")))){if(p==="length")throw new Jk;if(p==="content_filter")throw new Xk}if(Object.assign(S,x),!m)continue;const{content:E,refusal:_,function_call:k,role:R,tool_calls:N,...L}=m;if(Object.assign(S.message,L),_&&(S.message.refusal=(S.message.refusal||"")+_),R&&(S.message.role=R),k&&(S.message.function_call?(k.name&&(S.message.function_call.name=k.name),k.arguments&&((a=S.message.function_call).arguments??(a.arguments=""),S.message.function_call.arguments+=k.arguments)):S.message.function_call=k),E&&(S.message.content=(S.message.content||"")+E,!S.message.refusal&&W(this,qt,"m",wg).call(this)&&(S.message.parsed=O1(S.message.content))),N){S.message.tool_calls||(S.message.tool_calls=[]);for(const{index:A,id:I,type:j,function:P,...M}of N){const B=(l=S.message.tool_calls)[A]??(l[A]={});Object.assign(B,M),I&&(B.id=I),j&&(B.type=j),P&&(B.function??(B.function={name:P.name??"",arguments:""})),P?.name&&(B.function.name=P.name),P?.arguments&&(B.function.arguments+=P.arguments,o$(W(this,fs,"f"),B)&&(B.function.parsed_arguments=O1(B.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new $r(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function g$(t,e){const{id:n,choices:r,created:s,model:a,system_fingerprint:l,...c}=t,f={...c,id:n,choices:r.map(({message:d,finish_reason:m,index:p,logprobs:g,...y})=>{if(!m)throw new Oe(`missing finish_reason for choice ${p}`);const{content:x=null,function_call:S,tool_calls:E,..._}=d,k=d.role;if(!k)throw new Oe(`missing role for choice ${p}`);if(S){const{arguments:R,name:N}=S;if(R==null)throw new Oe(`missing function_call.arguments for choice ${p}`);if(!N)throw new Oe(`missing function_call.name for choice ${p}`);return{...y,message:{content:x,function_call:{arguments:R,name:N},role:k,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:g}}return E?{...y,index:p,finish_reason:m,logprobs:g,message:{..._,role:k,content:x,refusal:d.refusal??null,tool_calls:E.map((R,N)=>{const{function:L,type:A,id:I,...j}=R,{arguments:P,name:M,...B}=L||{};if(I==null)throw new Oe(`missing choices[${p}].tool_calls[${N}].id
${xf(t)}`);if(A==null)throw new Oe(`missing choices[${p}].tool_calls[${N}].type
${xf(t)}`);if(M==null)throw new Oe(`missing choices[${p}].tool_calls[${N}].function.name
${xf(t)}`);if(P==null)throw new Oe(`missing choices[${p}].tool_calls[${N}].function.arguments
${xf(t)}`);return{...j,id:I,type:A,function:{...B,name:M,arguments:P}}})}}:{...y,message:{..._,content:x,role:k,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:g}}),created:s,model:a,object:"chat.completion",...l?{system_fingerprint:l}:{}};return s$(f,e)}function xf(t){return JSON.stringify(t)}class Cd extends bu{static fromReadableStream(e){const n=new Cd(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new Cd(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}}let K0=class extends Re{constructor(){super(...arguments),this.messages=new mR(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(he`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(he`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Bt,{query:e,...n})}delete(e,n){return this._client.delete(he`/chat/completions/${e}`,n)}parse(e,n){return l$(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>q0(r,e))}runTools(e,n){return e.stream?Cd.runTools(this._client,e,n):V0.runTools(this._client,e,n)}stream(e,n){return bu.createChatCompletion(this._client,e,n)}};K0.Messages=mR;class G0 extends Re{constructor(){super(...arguments),this.completions=new K0(this._client)}}G0.Completions=K0;const jR=Symbol("brand.privateNullableHeaders");function*y$(t){if(!t)return;if(jR in t){const{values:r,nulls:s}=t;yield*r.entries();for(const a of s)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():m1(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=m1(r[1])?r[1]:[r[1]];let l=!1;for(const c of a)c!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,c])}}const we=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[a,l]of y$(r)){const c=a.toLowerCase();s.has(c)||(e.delete(a),s.add(c)),l===null?(e.delete(a),n.add(c)):(e.append(a,l),n.delete(c))}}return{[jR]:!0,values:e,nulls:n}};class LR extends Re{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:we([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class PR extends Re{create(e,n){return this._client.post("/audio/transcriptions",Gi({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class FR extends Re{create(e,n){return this._client.post("/audio/translations",Gi({body:e,...n,__metadata:{model:e.model}},this._client))}}class Nu extends Re{constructor(){super(...arguments),this.transcriptions=new PR(this._client),this.translations=new FR(this._client),this.speech=new LR(this._client)}}Nu.Transcriptions=PR;Nu.Translations=FR;Nu.Speech=LR;class $R extends Re{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(he`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Bt,{query:e,...n})}cancel(e,n){return this._client.post(he`/batches/${e}/cancel`,n)}}class BR extends Re{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/assistants/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/assistants/${e}`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Bt,{query:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(he`/assistants/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let UR=class extends Re{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class qR extends Re{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Wd=class extends Re{constructor(){super(...arguments),this.sessions=new UR(this._client),this.transcriptionSessions=new qR(this._client)}};Wd.Sessions=UR;Wd.TranscriptionSessions=qR;class HR extends Re{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(he`/chatkit/sessions/${e}/cancel`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let VR=class extends Re{retrieve(e,n){return this._client.get(he`/chatkit/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",vd,{query:e,...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(he`/chatkit/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},r){return this._client.getAPIList(he`/chatkit/threads/${e}/items`,vd,{query:n,...r,headers:we([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class eh extends Re{constructor(){super(...arguments),this.sessions=new HR(this._client),this.threads=new VR(this._client)}}eh.Sessions=HR;eh.Threads=VR;class KR extends Re{create(e,n,r){return this._client.post(he`/threads/${e}/messages`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(he`/threads/${s}/messages/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(he`/threads/${s}/messages/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/threads/${e}/messages`,Bt,{query:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(he`/threads/${s}/messages/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class GR extends Re{retrieve(e,n,r){const{thread_id:s,run_id:a,...l}=n;return this._client.get(he`/threads/${s}/runs/${a}/steps/${e}`,{query:l,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:s,...a}=n;return this._client.getAPIList(he`/threads/${s}/runs/${e}/steps`,Bt,{query:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const v$=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var b$={};const $a=t=>{if(typeof globalThis.process<"u")return b$?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var un,ji,Dy,Fr,Bf,Rr,Li,eo,Di,Ed,Jn,Uf,qf,ru,Ul,ql,I1,N1,D1,z1,j1,L1,P1;class su extends H0{constructor(){super(...arguments),un.add(this),Dy.set(this,[]),Fr.set(this,{}),Bf.set(this,{}),Rr.set(this,void 0),Li.set(this,void 0),eo.set(this,void 0),Di.set(this,void 0),Ed.set(this,void 0),Jn.set(this,void 0),Uf.set(this,void 0),qf.set(this,void 0),ru.set(this,void 0)}[(Dy=new WeakMap,Fr=new WeakMap,Bf=new WeakMap,Rr=new WeakMap,Li=new WeakMap,eo=new WeakMap,Di=new WeakMap,Ed=new WeakMap,Jn=new WeakMap,Uf=new WeakMap,qf=new WeakMap,ru=new WeakMap,un=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new ji;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=$r.fromReadableStream(e,this.controller);for await(const a of s)W(this,un,"m",Ul).call(this,a);if(s.controller.signal?.aborted)throw new xr;return this._addRun(W(this,un,"m",ql).call(this))}toReadableStream(){return new $r(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const a=new ji;return a._run(()=>a._runToolAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},c=await e.submitToolOutputs(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of c)W(this,un,"m",Ul).call(this,f);if(c.controller.signal?.aborted)throw new xr;return this._addRun(W(this,un,"m",ql).call(this))}static createThreadAssistantStream(e,n,r){const s=new ji;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const a=new ji;return a._run(()=>a._runAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return W(this,Uf,"f")}currentRun(){return W(this,qf,"f")}currentMessageSnapshot(){return W(this,Rr,"f")}currentRunStepSnapshot(){return W(this,ru,"f")}async finalRunSteps(){return await this.done(),Object.values(W(this,Fr,"f"))}async finalMessages(){return await this.done(),Object.values(W(this,Bf,"f"))}async finalRun(){if(await this.done(),!W(this,Li,"f"))throw Error("Final run was not received.");return W(this,Li,"f")}async _createThreadAssistantStream(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},l=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const c of l)W(this,un,"m",Ul).call(this,c);if(l.controller.signal?.aborted)throw new xr;return this._addRun(W(this,un,"m",ql).call(this))}async _createAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},c=await e.create(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of c)W(this,un,"m",Ul).call(this,f);if(c.controller.signal?.aborted)throw new xr;return this._addRun(W(this,un,"m",ql).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let a=e[r];if(a==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(mg(a)&&mg(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(l=>typeof l=="string"||typeof l=="number")){a.push(...s);continue}for(const l of s){if(!mg(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const c=l.index;if(c==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const f=a[c];f==null?a.push(l):a[c]=this.accumulateDelta(f,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}ji=su,Ul=function(e){if(!this.ended)switch(je(this,Uf,e),W(this,un,"m",D1).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":W(this,un,"m",P1).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":W(this,un,"m",N1).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":W(this,un,"m",I1).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},ql=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");if(!W(this,Li,"f"))throw Error("Final run has not been received");return W(this,Li,"f")},I1=function(e){const[n,r]=W(this,un,"m",j1).call(this,e,W(this,Rr,"f"));je(this,Rr,n),W(this,Bf,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,l=n.content[s.index];if(l&&l.type=="text")this._emit("textDelta",a,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=W(this,eo,"f")){if(W(this,Di,"f"))switch(W(this,Di,"f").type){case"text":this._emit("textDone",W(this,Di,"f").text,W(this,Rr,"f"));break;case"image_file":this._emit("imageFileDone",W(this,Di,"f").image_file,W(this,Rr,"f"));break}je(this,eo,s.index)}je(this,Di,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(W(this,eo,"f")!==void 0){const s=e.data.content[W(this,eo,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,W(this,Rr,"f"));break;case"text":this._emit("textDone",s.text,W(this,Rr,"f"));break}}W(this,Rr,"f")&&this._emit("messageDone",e.data),je(this,Rr,void 0)}},N1=function(e){const n=W(this,un,"m",z1).call(this,e);switch(je(this,ru,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==W(this,Ed,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(W(this,Jn,"f")&&this._emit("toolCallDone",W(this,Jn,"f")),je(this,Ed,a.index),je(this,Jn,n.step_details.tool_calls[a.index]),W(this,Jn,"f")&&this._emit("toolCallCreated",W(this,Jn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":je(this,ru,void 0),e.data.step_details.type=="tool_calls"&&W(this,Jn,"f")&&(this._emit("toolCallDone",W(this,Jn,"f")),je(this,Jn,void 0)),this._emit("runStepDone",e.data,n);break}},D1=function(e){W(this,Dy,"f").push(e),this._emit("event",e)},z1=function(e){switch(e.event){case"thread.run.step.created":return W(this,Fr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=W(this,Fr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=ji.accumulateDelta(n,r.delta);W(this,Fr,"f")[e.data.id]=s}return W(this,Fr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":W(this,Fr,"f")[e.data.id]=e.data;break}if(W(this,Fr,"f")[e.data.id])return W(this,Fr,"f")[e.data.id];throw new Error("No snapshot available")},j1=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let l=n.content[a.index];n.content[a.index]=W(this,un,"m",L1).call(this,a,l)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},L1=function(e,n){return ji.accumulateDelta(n,e)},P1=function(e){switch(je(this,qf,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":je(this,Li,e.data),W(this,Jn,"f")&&(this._emit("toolCallDone",W(this,Jn,"f")),je(this,Jn,void 0));break}};let Q0=class extends Re{constructor(){super(...arguments),this.steps=new GR(this._client)}create(e,n,r){const{include:s,...a}=n;return this._client.post(he`/threads/${e}/runs`,{query:{include:s},body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(he`/threads/${s}/runs/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(he`/threads/${s}/runs/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/threads/${e}/runs`,Bt,{query:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(he`/threads/${s}/runs/${e}/cancel`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return su.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await Mu(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return su.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...a}=n;return this._client.post(he`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return su.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};Q0.Steps=GR;class th extends Re{constructor(){super(...arguments),this.runs=new Q0(this._client),this.messages=new KR(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/threads/${e}`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(he`/threads/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return su.createThreadAssistantStream(e,this._client.beta.threads,n)}}th.Runs=Q0;th.Messages=KR;class So extends Re{constructor(){super(...arguments),this.realtime=new Wd(this._client),this.chatkit=new eh(this._client),this.assistants=new BR(this._client),this.threads=new th(this._client)}}So.Realtime=Wd;So.ChatKit=eh;So.Assistants=BR;So.Threads=th;class QR extends Re{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class ZR extends Re{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(he`/containers/${s}/files/${e}/content`,{...r,headers:we([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let Z0=class extends Re{constructor(){super(...arguments),this.content=new ZR(this._client)}create(e,n,r){return this._client.post(he`/containers/${e}/files`,Gi({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(he`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(he`/containers/${e}/files`,Bt,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(he`/containers/${s}/files/${e}`,{...r,headers:we([{Accept:"*/*"},r?.headers])})}};Z0.Content=ZR;class Y0 extends Re{constructor(){super(...arguments),this.files=new Z0(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(he`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Bt,{query:e,...n})}delete(e,n){return this._client.delete(he`/containers/${e}`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}}Y0.Files=Z0;class YR extends Re{create(e,n,r){const{include:s,...a}=n;return this._client.post(he`/conversations/${e}/items`,{query:{include:s},body:a,...r})}retrieve(e,n,r){const{conversation_id:s,...a}=n;return this._client.get(he`/conversations/${s}/items/${e}`,{query:a,...r})}list(e,n={},r){return this._client.getAPIList(he`/conversations/${e}/items`,vd,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(he`/conversations/${s}/items/${e}`,r)}}class J0 extends Re{constructor(){super(...arguments),this.items=new YR(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(he`/conversations/${e}`,n)}update(e,n,r){return this._client.post(he`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(he`/conversations/${e}`,n)}}J0.Items=YR;class JR extends Re{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&ln(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?a:(ln(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(l=>(l&&l.data&&l.data.forEach(c=>{const f=c.embedding;c.embedding=v$(f)}),l)))}}class XR extends Re{retrieve(e,n,r){const{eval_id:s,run_id:a}=n;return this._client.get(he`/evals/${s}/runs/${a}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...a}=n;return this._client.getAPIList(he`/evals/${s}/runs/${e}/output_items`,Bt,{query:a,...r})}}class X0 extends Re{constructor(){super(...arguments),this.outputItems=new XR(this._client)}create(e,n,r){return this._client.post(he`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(he`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(he`/evals/${e}/runs`,Bt,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(he`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(he`/evals/${s}/runs/${e}`,r)}}X0.OutputItems=XR;class W0 extends Re{constructor(){super(...arguments),this.runs=new X0(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(he`/evals/${e}`,n)}update(e,n,r){return this._client.post(he`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Bt,{query:e,...n})}delete(e,n){return this._client.delete(he`/evals/${e}`,n)}}W0.Runs=X0;let WR=class extends Re{create(e,n){return this._client.post("/files",Gi({body:e,...n},this._client))}retrieve(e,n){return this._client.get(he`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Bt,{query:e,...n})}delete(e,n){return this._client.delete(he`/files/${e}`,n)}content(e,n){return this._client.get(he`/files/${e}/content`,{...n,headers:we([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let l=await this.retrieve(e);for(;!l.status||!s.has(l.status);)if(await Mu(n),l=await this.retrieve(e),Date.now()-a>r)throw new P0({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return l}};class eA extends Re{}let tA=class extends Re{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class ev extends Re{constructor(){super(...arguments),this.graders=new tA(this._client)}}ev.Graders=tA;class nA extends Re{create(e,n,r){return this._client.getAPIList(he`/fine_tuning/checkpoints/${e}/permissions`,Xd,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(he`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(he`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let tv=class extends Re{constructor(){super(...arguments),this.permissions=new nA(this._client)}};tv.Permissions=nA;class rA extends Re{list(e,n={},r){return this._client.getAPIList(he`/fine_tuning/jobs/${e}/checkpoints`,Bt,{query:n,...r})}}class nv extends Re{constructor(){super(...arguments),this.checkpoints=new rA(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(he`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Bt,{query:e,...n})}cancel(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(he`/fine_tuning/jobs/${e}/events`,Bt,{query:n,...r})}pause(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(he`/fine_tuning/jobs/${e}/resume`,n)}}nv.Checkpoints=rA;class wo extends Re{constructor(){super(...arguments),this.methods=new eA(this._client),this.jobs=new nv(this._client),this.checkpoints=new tv(this._client),this.alpha=new ev(this._client)}}wo.Methods=eA;wo.Jobs=nv;wo.Checkpoints=tv;wo.Alpha=ev;class sA extends Re{}class rv extends Re{constructor(){super(...arguments),this.graderModels=new sA(this._client)}}rv.GraderModels=sA;class iA extends Re{createVariation(e,n){return this._client.post("/images/variations",Gi({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Gi({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class aA extends Re{retrieve(e,n){return this._client.get(he`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Xd,e)}delete(e,n){return this._client.delete(he`/models/${e}`,n)}}class oA extends Re{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class lA extends Re{accept(e,n,r){return this._client.post(he`/realtime/calls/${e}/accept`,{body:n,...r,headers:we([{Accept:"*/*"},r?.headers])})}hangup(e,n){return this._client.post(he`/realtime/calls/${e}/hangup`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}refer(e,n,r){return this._client.post(he`/realtime/calls/${e}/refer`,{body:n,...r,headers:we([{Accept:"*/*"},r?.headers])})}reject(e,n={},r){return this._client.post(he`/realtime/calls/${e}/reject`,{body:n,...r,headers:we([{Accept:"*/*"},r?.headers])})}}class uA extends Re{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class nh extends Re{constructor(){super(...arguments),this.clientSecrets=new uA(this._client),this.calls=new lA(this._client)}}nh.ClientSecrets=uA;nh.Calls=lA;function x$(t,e){return!e||!w$(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:cA(t,e)}function cA(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:E$(e,s)};if(s.type==="message"){const a=s.content.map(l=>l.type==="output_text"?{...l,parsed:S$(e,l.text)}:l);return{...s,content:a}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||zy(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function S$(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function w$(t){return!!U0(t.text?.format)}function _$(t){return t?.$brand==="auto-parseable-tool"}function C$(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function E$(t,e){const n=C$(t.tools??[],e.name);return{...e,...e,parsed_arguments:_$(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function zy(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Ba,Sf,Gs,wf,F1,$1,B1,U1;class sv extends H0{constructor(e){super(),Ba.add(this),Sf.set(this,void 0),Gs.set(this,void 0),wf.set(this,void 0),je(this,Sf,e)}static createResponse(e,n,r){const s=new sv(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),W(this,Ba,"m",F1).call(this);let a,l=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const c of a)W(this,Ba,"m",$1).call(this,c,l);if(a.controller.signal?.aborted)throw new xr;return W(this,Ba,"m",B1).call(this)}[(Sf=new WeakMap,Gs=new WeakMap,wf=new WeakMap,Ba=new WeakSet,F1=function(){this.ended||je(this,Gs,void 0)},$1=function(n,r){if(this.ended)return;const s=(l,c)=>{(r==null||c.sequence_number>r)&&this._emit(l,c)},a=W(this,Ba,"m",U1).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const l=a.output[n.output_index];if(!l)throw new Oe(`missing output at index ${n.output_index}`);if(l.type==="message"){const c=l.content[n.content_index];if(!c)throw new Oe(`missing content at index ${n.content_index}`);if(c.type!=="output_text")throw new Oe(`expected content to be 'output_text', got ${c.type}`);s("response.output_text.delta",{...n,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const l=a.output[n.output_index];if(!l)throw new Oe(`missing output at index ${n.output_index}`);l.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:s(n.type,n);break}},B1=function(){if(this.ended)throw new Oe("stream has ended, this shouldn't happen");const n=W(this,Gs,"f");if(!n)throw new Oe("request ended without sending any events");je(this,Gs,void 0);const r=k$(n,W(this,Sf,"f"));return je(this,wf,r),r},U1=function(n){let r=W(this,Gs,"f");if(!r){if(n.type!=="response.created")throw new Oe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=je(this,Gs,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new Oe(`missing output at index ${n.output_index}`);const a=s.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?s.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(l));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new Oe(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new Oe(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Oe(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new Oe(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new Oe(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const a=s.content?.[n.content_index];if(!a)throw new Oe(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Oe(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{je(this,Gs,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=W(this,wf,"f");if(!e)throw new Oe("stream ended without producing a ChatCompletion");return e}}function k$(t,e){return x$(t,e)}class fA extends Re{list(e,n={},r){return this._client.getAPIList(he`/responses/${e}/input_items`,Bt,{query:n,...r})}}class dA extends Re{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class rh extends Re{constructor(){super(...arguments),this.inputItems=new fA(this._client),this.inputTokens=new dA(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&zy(r),r))}retrieve(e,n={},r){return this._client.get(he`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&zy(s),s))}delete(e,n){return this._client.delete(he`/responses/${e}`,{...n,headers:we([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>cA(r,e))}stream(e,n){return sv.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(he`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}rh.InputItems=fA;rh.InputTokens=dA;class hA extends Re{create(e,n,r){return this._client.post(he`/uploads/${e}/parts`,Gi({body:n,...r},this._client))}}class iv extends Re{constructor(){super(...arguments),this.parts=new hA(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(he`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(he`/uploads/${e}/complete`,{body:n,...r})}}iv.Parts=hA;const R$=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class pA extends Re{create(e,n,r){return this._client.post(he`/vector_stores/${e}/file_batches`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(he`/vector_stores/${s}/file_batches/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(he`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...a}=n;return this._client.getAPIList(he`/vector_stores/${s}/file_batches/${e}/files`,Bt,{query:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const s=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await Mu(c);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=s?.maxConcurrency??5,l=Math.min(a,n.length),c=this._client,f=n.values(),d=[...r];async function m(g){for(let y of g){const x=await c.files.create({file:y,purpose:"assistants"},s);d.push(x.id)}}const p=Array(l).fill(f).map(m);return await R$(p),await this.createAndPoll(e,{file_ids:d})}}class mA extends Re{create(e,n,r){return this._client.post(he`/vector_stores/${e}/files`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(he`/vector_stores/${s}/files/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:s,...a}=n;return this._client.post(he`/vector_stores/${s}/files/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(he`/vector_stores/${e}/files`,Bt,{query:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(he`/vector_stores/${s}/files/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),l=a.data;switch(l.status){case"in_progress":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=a.response.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await Mu(c);break;case"failed":case"completed":return l}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(he`/vector_stores/${s}/files/${e}/content`,Xd,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class sh extends Re{constructor(){super(...arguments),this.files=new mA(this._client),this.fileBatches=new pA(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(he`/vector_stores/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(he`/vector_stores/${e}`,{body:n,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Bt,{query:e,...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(he`/vector_stores/${e}`,{...n,headers:we([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(he`/vector_stores/${e}/search`,Xd,{body:n,method:"post",...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}sh.Files=mA;sh.FileBatches=pA;class gA extends Re{create(e,n){return this._client.post("/videos",R1({body:e,...n},this._client))}retrieve(e,n){return this._client.get(he`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",vd,{query:e,...n})}delete(e,n){return this._client.delete(he`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(he`/videos/${e}/content`,{query:n,...r,headers:we([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(he`/videos/${e}/remix`,R1({body:n,...r},this._client))}}var Ga,yA,Hf;class vA extends Re{constructor(){super(...arguments),Ga.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");W(this,Ga,"m",yA).call(this,r);const a=we([n]).values,l=W(this,Ga,"m",Hf).call(this,a,"webhook-signature"),c=W(this,Ga,"m",Hf).call(this,a,"webhook-timestamp"),f=W(this,Ga,"m",Hf).call(this,a,"webhook-id"),d=parseInt(c,10);if(isNaN(d))throw new zl("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-d>s)throw new zl("Webhook timestamp is too old");if(d>m+s)throw new zl("Webhook timestamp is too new");const p=l.split(" ").map(S=>S.startsWith("v1,")?S.substring(3):S),g=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),y=f?`${f}.${c}.${e}`:`${c}.${e}`,x=await crypto.subtle.importKey("raw",g,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const S of p)try{const E=Buffer.from(S,"base64");if(await crypto.subtle.verify("HMAC",x,E,new TextEncoder().encode(y)))return}catch{continue}throw new zl("The given webhook signature does not match the expected signature")}}Ga=new WeakSet,yA=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Hf=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var jy,av,Vf,bA;class Ke{constructor({baseURL:e=$a("OPENAI_BASE_URL"),apiKey:n=$a("OPENAI_API_KEY"),organization:r=$a("OPENAI_ORG_ID")??null,project:s=$a("OPENAI_PROJECT_ID")??null,webhookSecret:a=$a("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(jy.add(this),Vf.set(this,void 0),this.completions=new QR(this),this.chat=new G0(this),this.embeddings=new JR(this),this.files=new WR(this),this.images=new iA(this),this.audio=new Nu(this),this.moderations=new oA(this),this.models=new aA(this),this.fineTuning=new wo(this),this.graders=new rv(this),this.vectorStores=new sh(this),this.webhooks=new vA(this),this.beta=new So(this),this.batches=new $R(this),this.uploads=new iv(this),this.responses=new rh(this),this.realtime=new nh(this),this.conversations=new J0(this),this.evals=new W0(this),this.containers=new Y0(this),this.videos=new gA(this),n===void 0)throw new Oe("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:n,organization:r,project:s,webhookSecret:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&AF())throw new Oe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??av.DEFAULT_TIMEOUT,this.logger=c.logger??console;const f="warn";this.logLevel=f,this.logLevel=E1(c.logLevel,"ClientOptions.logLevel",this)??E1($a("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??NF(),je(this,Vf,zF),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return we([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return BF(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Va}`}defaultIdempotencyKey(){return`stainless-node-retry-${Uk()}`}makeStatusError(e,n,r,s){return cn.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Oe?r:new Oe(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Oe(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!W(this,jy,"m",bA).call(this)&&r||this.baseURL,a=_F(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return CF(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new Jd(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const s=await e,a=s.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(s);const{req:l,url:c,timeout:f}=await this.buildRequest(s,{retryCount:a-n});await this.prepareRequest(l,{url:c,options:s});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(ln(this).debug(`[${d}] sending request`,Ii({retryOfRequestLogID:r,method:s.method,url:c,options:s,headers:l.headers})),s.signal?.aborted)throw new xr;const g=new AbortController,y=await this.fetchWithTimeout(c,l,f,g).catch(Cy),x=Date.now();if(y instanceof globalThis.Error){const _=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new xr;const k=_y(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return ln(this).info(`[${d}] connection ${k?"timed out":"failed"} - ${_}`),ln(this).debug(`[${d}] connection ${k?"timed out":"failed"} (${_})`,Ii({retryOfRequestLogID:r,url:c,durationMs:x-p,message:y.message})),this.retryRequest(s,n,r??d);throw ln(this).info(`[${d}] connection ${k?"timed out":"failed"} - error; no more retries left`),ln(this).debug(`[${d}] connection ${k?"timed out":"failed"} (error; no more retries left)`,Ii({retryOfRequestLogID:r,url:c,durationMs:x-p,message:y.message})),k?new P0:new Zd({cause:y})}const S=[...y.headers.entries()].filter(([_])=>_==="x-request-id").map(([_,k])=>", "+_+": "+JSON.stringify(k)).join(""),E=`[${d}${m}${S}] ${l.method} ${c} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${x-p}ms`;if(!y.ok){const _=await this.shouldRetry(y);if(n&&_){const I=`retrying, ${n} attempts remaining`;return await DF(y.body),ln(this).info(`${E} - ${I}`),ln(this).debug(`[${d}] response error (${I})`,Ii({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:x-p})),this.retryRequest(s,n,r??d,y.headers)}const k=_?"error; no more retries left":"error; not retryable";ln(this).info(`${E} - ${k}`);const R=await y.text().catch(I=>Cy(I).message),N=RF(R),L=N?void 0:R;throw ln(this).debug(`[${d}] response error (${k})`,Ii({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,message:L,durationMs:Date.now()-p})),this.makeStatusError(y.status,N,L,y.headers)}return ln(this).info(E),ln(this).debug(`[${d}] response start`,Ii({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:x-p})),{response:y,options:s,controller:g,requestLogID:d,retryOfRequestLogID:r,startTime:p}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new YF(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:a,method:l,...c}=n||{};a&&a.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m={signal:s.signal,...d?{duplex:"half"}:{},method:"GET",...c};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let a;const l=s?.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(a=f)}const c=s?.get("retry-after");if(c&&!a){const f=parseFloat(c);Number.isNaN(f)?a=Date.parse(c)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,f)}return await Mu(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:a,query:l,defaultBaseURL:c}=r,f=this.buildURL(a,l,c);"timeout"in r&&kF("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:d,body:m}=this.buildBody({options:r}),p=await this.buildHeaders({options:e,method:s,bodyHeaders:d,retryCount:n});return{req:{method:s,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=we([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...IF(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=we([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:tR(e)}:W(this,Vf,"f").call(this,{body:e,headers:r})}}av=Ke,Vf=new WeakMap,jy=new WeakSet,bA=function(){return this.baseURL!=="https://api.openai.com/v1"};Ke.OpenAI=av;Ke.DEFAULT_TIMEOUT=6e5;Ke.OpenAIError=Oe;Ke.APIError=cn;Ke.APIConnectionError=Zd;Ke.APIConnectionTimeoutError=P0;Ke.APIUserAbortError=xr;Ke.NotFoundError=Kk;Ke.ConflictError=Gk;Ke.RateLimitError=Zk;Ke.BadRequestError=qk;Ke.AuthenticationError=Hk;Ke.InternalServerError=Yk;Ke.PermissionDeniedError=Vk;Ke.UnprocessableEntityError=Qk;Ke.InvalidWebhookSignatureError=zl;Ke.toFile=t$;Ke.Completions=QR;Ke.Chat=G0;Ke.Embeddings=JR;Ke.Files=WR;Ke.Images=iA;Ke.Audio=Nu;Ke.Moderations=oA;Ke.Models=aA;Ke.FineTuning=wo;Ke.Graders=rv;Ke.VectorStores=sh;Ke.Webhooks=vA;Ke.Beta=So;Ke.Batches=$R;Ke.Uploads=iv;Ke.Responses=rh;Ke.Realtime=nh;Ke.Conversations=J0;Ke.Evals=W0;Ke.Containers=Y0;Ke.Videos=gA;class A$ extends Ke{constructor(e){super({...e,dangerouslyAllowBrowser:!0})}}function T$(t){return new A$({apiKey:t.apiKey,organization:t.organization,baseURL:t.baseURL})}function O$(t){return`${t}-${Date.now()}-${Math.random().toString(36).substring(7)}`}class M$ extends sF{constructor(e,n){super({},n),this.kind="text",this.name="openai",this.client=T$(e)}async*chatStream(e){const n=new Map,r=this.mapTextOptionsToOpenAI(e);try{const s=await this.client.responses.create({...r,stream:!0},{headers:e.request?.headers,signal:e.request?.signal});yield*this.processOpenAIStreamChunks(s,n,e,()=>O$(this.name))}catch(s){const a=s;throw console.error(">>> chatStream: Fatal error during response creation <<<"),console.error(">>> Error message:",a.message),console.error(">>> Error stack:",a.stack),console.error(">>> Full error:",a),s}}async structuredOutput(e){const{chatOptions:n,outputSchema:r}=e,s=this.mapTextOptionsToOpenAI(n),a=tu(r,r.required||[]);try{const l=await this.client.responses.create({...s,stream:!1,text:{format:{type:"json_schema",name:"structured_output",schema:a,strict:!0}}},{headers:n.request?.headers,signal:n.request?.signal}),c=this.extractTextFromResponse(l);let f;try{f=JSON.parse(c)}catch{throw new Error(`Failed to parse structured output as JSON. Content: ${c.slice(0,200)}${c.length>200?"...":""}`)}return{data:wy(f),rawText:c}}catch(l){const c=l;throw console.error(">>> structuredOutput: Error during response creation <<<"),console.error(">>> Error message:",c.message),l}}extractTextFromResponse(e){let n="";for(const r of e.output)if(r.type==="message")for(const s of r.content)s.type==="output_text"&&(n+=s.text);return n}async*processOpenAIStreamChunks(e,n,r,s){let a="",l="";const c=Date.now();let f=0,d=!1,m=!1,p=null,g=r.model;try{for await(const y of e){f++;const x=S=>S.type==="output_text"?(a+=S.text,{type:"content",id:p||s(),model:g||r.model,timestamp:c,delta:S.text,content:a,role:"assistant"}):S.type==="reasoning_text"?(l+=S.text,{type:"thinking",id:p||s(),model:g||r.model,timestamp:c,delta:S.text,content:l}):{type:"error",id:p||s(),model:g||r.model,timestamp:c,error:{message:S.refusal}};if((y.type==="response.created"||y.type==="response.incomplete"||y.type==="response.failed")&&(p=y.response.id,g=y.response.model,d=!1,m=!1,a="",l="",y.response.error&&(yield{type:"error",id:y.response.id,model:y.response.model,timestamp:c,error:y.response.error}),y.response.incomplete_details&&(yield{type:"error",id:y.response.id,model:y.response.model,timestamp:c,error:{message:y.response.incomplete_details.reason??""}})),y.type==="response.output_text.delta"&&y.delta){const S=Array.isArray(y.delta)?y.delta.join(""):typeof y.delta=="string"?y.delta:"";S&&(a+=S,d=!0,yield{type:"content",id:p||s(),model:g||r.model,timestamp:c,delta:S,content:a,role:"assistant"})}if(y.type==="response.reasoning_text.delta"&&y.delta){const S=Array.isArray(y.delta)?y.delta.join(""):typeof y.delta=="string"?y.delta:"";S&&(l+=S,m=!0,yield{type:"thinking",id:p||s(),model:g||r.model,timestamp:c,delta:S,content:l})}if(y.type==="response.reasoning_summary_text.delta"&&y.delta){const S=typeof y.delta=="string"?y.delta:"";S&&(l+=S,m=!0,yield{type:"thinking",id:p||s(),model:g||r.model,timestamp:c,delta:S,content:l})}if(y.type==="response.content_part.added"){const S=y.part;yield x(S)}if(y.type==="response.content_part.done"){const S=y.part;if(S.type==="output_text"&&d||S.type==="reasoning_text"&&m)continue;yield x(S)}if(y.type==="response.output_item.added"){const S=y.item;S.type==="function_call"&&S.id&&(n.has(S.id)||n.set(S.id,{index:y.output_index,name:S.name||""}))}if(y.type==="response.function_call_arguments.done"){const{item_id:S,output_index:E}=y,k=n.get(S)?.name||"";yield{type:"tool_call",id:p||s(),model:g||r.model,timestamp:c,index:E,toolCall:{id:S,type:"function",function:{name:k,arguments:y.arguments}}}}if(y.type==="response.completed"){const S=y.response.output.some(E=>E.type==="function_call");yield{type:"done",id:p||s(),model:g||r.model,timestamp:c,usage:{promptTokens:y.response.usage?.input_tokens||0,completionTokens:y.response.usage?.output_tokens||0,totalTokens:y.response.usage?.total_tokens||0},finishReason:S?"tool_calls":"stop"}}y.type==="error"&&(yield{type:"error",id:p||s(),model:g||r.model,timestamp:c,error:{message:y.message,code:y.code??void 0}})}}catch(y){const x=y;console.log("[OpenAI Adapter] Stream ended with error. Event type summary:",{totalChunks:f,error:x.message}),yield{type:"error",id:s(),model:r.model,timestamp:c,error:{message:x.message||"Unknown error occurred",code:x.code}}}}mapTextOptionsToOpenAI(e){const n=e.modelOptions,r=this.convertMessagesToInput(e.messages);n&&aF({...n,model:e.model});const s=e.tools?SF(e.tools):void 0;return{model:e.model,temperature:e.temperature,max_output_tokens:e.maxTokens,top_p:e.topP,metadata:e.metadata,instructions:e.systemPrompts?.join(`
`),...n,input:r,tools:s}}convertMessagesToInput(e){const n=[];for(const r of e){if(r.role==="tool"){n.push({type:"function_call_output",call_id:r.toolCallId||"",output:typeof r.content=="string"?r.content:JSON.stringify(r.content)});continue}if(r.role==="assistant"){if(r.toolCalls&&r.toolCalls.length>0)for(const l of r.toolCalls){const c=typeof l.function.arguments=="string"?l.function.arguments:JSON.stringify(l.function.arguments);n.push({type:"function_call",call_id:l.id,name:l.function.name,arguments:c})}if(r.content){const l=this.extractTextContent(r.content);l&&n.push({type:"message",role:"assistant",content:l})}continue}const s=this.normalizeContent(r.content),a=[];for(const l of s)a.push(this.convertContentPartToOpenAI(l));a.length===0&&a.push({type:"input_text",text:""}),n.push({type:"message",role:"user",content:a})}return n}convertContentPartToOpenAI(e){switch(e.type){case"text":return{type:"input_text",text:e.content};case"image":{const n=e.metadata;return e.source.type==="url"?{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}:{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}}case"audio":return e.source.type==="url"?{type:"input_file",file_url:e.source.value}:{type:"input_file",file_data:e.source.value};default:throw new Error(`Unsupported content part type: ${e.type}`)}}normalizeContent(e){return e===null?[]:typeof e=="string"?[{type:"text",content:e}]:e}extractTextContent(e){return e===null?"":typeof e=="string"?e:e.filter(n=>n.type==="text").map(n=>n.content).join("")}}const q1={ai:{model:"gpt-4o"}};function Ly(){return typeof window<"u"&&window.__APP_CONFIG__?{...q1,...window.__APP_CONFIG__}:q1}function I$(t){const e=`${window.location.origin}/openai/v1`;return new M$({apiKey:"not-needed",baseURL:e},t)}function N$(){return Ly().ai?.model||"gpt-5.1"}function fe(t,e,n){function r(c,f){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:f,constr:l,traits:new Set},enumerable:!1}),c._zod.traits.has(t))return;c._zod.traits.add(t),e(c,f);const d=l.prototype,m=Object.keys(d);for(let p=0;p<m.length;p++){const g=m[p];g in c||(c[g]=d[g].bind(c))}}const s=n?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function l(c){var f;const d=n?.Parent?new a:this;r(d,c),(f=d._zod).deferred??(f.deferred=[]);for(const m of d._zod.deferred)m();return d}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:c=>n?.Parent&&c instanceof n.Parent?!0:c?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class io extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class xA extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const SA={};function Qi(t){return SA}function wA(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function Py(t,e){return typeof e=="bigint"?e.toString():e}function ov(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function lv(t){return t==null}function uv(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const H1=Symbol("evaluating");function gt(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==H1)return r===void 0&&(r=H1,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function Xi(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function li(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function V1(t){return JSON.stringify(t)}function D$(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const _A="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function kd(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const z$=ov(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function xu(t){if(kd(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(kd(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function CA(t){return xu(t)?{...t}:Array.isArray(t)?[...t]:t}const j$=new Set(["string","number","symbol"]);function ih(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ui(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function Le(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function L$(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function P$(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=li(t._zod.def,{get shape(){const l={};for(const c in e){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&(l[c]=n.shape[c])}return Xi(this,"shape",l),l},checks:[]});return ui(t,a)}function F$(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=li(t._zod.def,{get shape(){const l={...t._zod.def.shape};for(const c in e){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&delete l[c]}return Xi(this,"shape",l),l},checks:[]});return ui(t,a)}function $$(t,e){if(!xu(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const a=t._zod.def.shape;for(const l in e)if(Object.getOwnPropertyDescriptor(a,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=li(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return Xi(this,"shape",a),a}});return ui(t,s)}function B$(t,e){if(!xu(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=li(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return Xi(this,"shape",r),r}});return ui(t,n)}function U$(t,e){const n=li(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Xi(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return ui(t,n)}function q$(t,e,n){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=li(e._zod.def,{get shape(){const c=e._zod.def.shape,f={...c};if(n)for(const d in n){if(!(d in c))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(f[d]=t?new t({type:"optional",innerType:c[d]}):c[d])}else for(const d in c)f[d]=t?new t({type:"optional",innerType:c[d]}):c[d];return Xi(this,"shape",f),f},checks:[]});return ui(e,l)}function H$(t,e,n){const r=li(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new t({type:"nonoptional",innerType:s[l]});return Xi(this,"shape",a),a}});return ui(e,r)}function to(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function EA(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function _f(t){return typeof t=="string"?t:t?.message}function Zi(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const s=_f(t.inst?._zod.def?.error?.(t))??_f(e?.error?.(t))??_f(n.customError?.(t))??_f(n.localeError?.(t))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function cv(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Su(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const kA=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Py,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},RA=fe("$ZodError",kA),AA=fe("$ZodError",kA,{Parent:Error});function V$(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function K$(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,c=0;for(;c<a.path.length;){const f=a.path[c];c===a.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(a))):l[f]=l[f]||{_errors:[]},l=l[f],c++}}};return r(t),n}const fv=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new io;if(l.issues.length){const c=new(s?.Err??t)(l.issues.map(f=>Zi(f,a,Qi())));throw _A(c,s?.callee),c}return l.value},dv=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const c=new(s?.Err??t)(l.issues.map(f=>Zi(f,a,Qi())));throw _A(c,s?.callee),c}return l.value},ah=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new io;return a.issues.length?{success:!1,error:new(t??RA)(a.issues.map(l=>Zi(l,s,Qi())))}:{success:!0,data:a.value}},G$=ah(AA),oh=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>Zi(l,s,Qi())))}:{success:!0,data:a.value}},Q$=oh(AA),Z$=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return fv(t)(e,n,s)},Y$=t=>(e,n,r)=>fv(t)(e,n,r),J$=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return dv(t)(e,n,s)},X$=t=>async(e,n,r)=>dv(t)(e,n,r),W$=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return ah(t)(e,n,s)},eB=t=>(e,n,r)=>ah(t)(e,n,r),tB=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return oh(t)(e,n,s)},nB=t=>async(e,n,r)=>oh(t)(e,n,r),rB=/^[cC][^\s-]{8,}$/,sB=/^[0-9a-z]+$/,iB=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,aB=/^[0-9a-vA-V]{20}$/,oB=/^[A-Za-z0-9]{27}$/,lB=/^[a-zA-Z0-9_-]{21}$/,uB=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,cB=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,K1=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,fB=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,dB="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function hB(){return new RegExp(dB,"u")}const pB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,gB=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,yB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,vB=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,TA=/^[A-Za-z0-9_-]*$/,bB=/^\+[1-9]\d{6,14}$/,OA="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",xB=new RegExp(`^${OA}$`);function MA(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function SB(t){return new RegExp(`^${MA(t)}$`)}function wB(t){const e=MA({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${OA}T(?:${r})$`)}const _B=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},CB=/^[^A-Z]*$/,EB=/^[^a-z]*$/,Vr=fe("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),kB=fe("$ZodCheckMaxLength",(t,e)=>{var n;Vr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!lv(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=cv(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),RB=fe("$ZodCheckMinLength",(t,e)=>{var n;Vr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!lv(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=cv(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),AB=fe("$ZodCheckLengthEquals",(t,e)=>{var n;Vr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!lv(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const l=cv(s),c=a>e.length;r.issues.push({origin:l,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),lh=fe("$ZodCheckStringFormat",(t,e)=>{var n,r;Vr.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),TB=fe("$ZodCheckRegex",(t,e)=>{lh.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),OB=fe("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=CB),lh.init(t,e)}),MB=fe("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=EB),lh.init(t,e)}),IB=fe("$ZodCheckIncludes",(t,e)=>{Vr.init(t,e);const n=ih(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),NB=fe("$ZodCheckStartsWith",(t,e)=>{Vr.init(t,e);const n=new RegExp(`^${ih(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),DB=fe("$ZodCheckEndsWith",(t,e)=>{Vr.init(t,e);const n=new RegExp(`.*${ih(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),zB=fe("$ZodCheckOverwrite",(t,e)=>{Vr.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class jB{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const LB={major:4,minor:3,patch:4},Qt=fe("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=LB;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const a of s._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(l,c,f)=>{let d=to(l),m;for(const p of c){if(p._zod.def.when){if(!p._zod.def.when(l))continue}else if(d)continue;const g=l.issues.length,y=p._zod.check(l);if(y instanceof Promise&&f?.async===!1)throw new io;if(m||y instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await y,l.issues.length!==g&&(d||(d=to(l,g)))});else{if(l.issues.length===g)continue;d||(d=to(l,g))}}return m?m.then(()=>l):l},a=(l,c,f)=>{if(to(l))return l.aborted=!0,l;const d=s(c,r,f);if(d instanceof Promise){if(f.async===!1)throw new io;return d.then(m=>t._zod.parse(m,f))}return t._zod.parse(d,f)};t._zod.run=(l,c)=>{if(c.skipChecks)return t._zod.parse(l,c);if(c.direction==="backward"){const d=t._zod.parse({value:l.value,issues:[]},{...c,skipChecks:!0});return d instanceof Promise?d.then(m=>a(m,l,c)):a(d,l,c)}const f=t._zod.parse(l,c);if(f instanceof Promise){if(c.async===!1)throw new io;return f.then(d=>s(d,r,c))}return s(f,r,c)}}gt(t,"~standard",()=>({validate:s=>{try{const a=G$(t,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return Q$(t,s).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),hv=fe("$ZodString",(t,e)=>{Qt.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??_B(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),Tt=fe("$ZodStringFormat",(t,e)=>{lh.init(t,e),hv.init(t,e)}),PB=fe("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=cB),Tt.init(t,e)}),FB=fe("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=K1(r))}else e.pattern??(e.pattern=K1());Tt.init(t,e)}),$B=fe("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=fB),Tt.init(t,e)}),BB=fe("$ZodURL",(t,e)=>{Tt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),UB=fe("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=hB()),Tt.init(t,e)}),qB=fe("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=lB),Tt.init(t,e)}),HB=fe("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=rB),Tt.init(t,e)}),VB=fe("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=sB),Tt.init(t,e)}),KB=fe("$ZodULID",(t,e)=>{e.pattern??(e.pattern=iB),Tt.init(t,e)}),GB=fe("$ZodXID",(t,e)=>{e.pattern??(e.pattern=aB),Tt.init(t,e)}),QB=fe("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=oB),Tt.init(t,e)}),ZB=fe("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=wB(e)),Tt.init(t,e)}),YB=fe("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=xB),Tt.init(t,e)}),JB=fe("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=SB(e)),Tt.init(t,e)}),XB=fe("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=uB),Tt.init(t,e)}),WB=fe("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=pB),Tt.init(t,e),t._zod.bag.format="ipv4"}),eU=fe("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=mB),Tt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),tU=fe("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=gB),Tt.init(t,e)}),nU=fe("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=yB),Tt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function IA(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const rU=fe("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=vB),Tt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{IA(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function sU(t){if(!TA.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return IA(n)}const iU=fe("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=TA),Tt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{sU(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),aU=fe("$ZodE164",(t,e)=>{e.pattern??(e.pattern=bB),Tt.init(t,e)});function oU(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const lU=fe("$ZodJWT",(t,e)=>{Tt.init(t,e),t._zod.check=n=>{oU(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),uU=fe("$ZodUnknown",(t,e)=>{Qt.init(t,e),t._zod.parse=n=>n}),cU=fe("$ZodNever",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function G1(t,e,n){t.issues.length&&e.issues.push(...EA(n,t.issues)),e.value[n]=t.value}const fU=fe("$ZodArray",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const c=s[l],f=e.element._zod.run({value:c,issues:[]},r);f instanceof Promise?a.push(f.then(d=>G1(d,n,l))):G1(f,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function Rd(t,e,n,r,s){if(t.issues.length){if(s&&!(n in r))return;e.issues.push(...EA(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function NA(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=L$(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function DA(t,e,n,r,s,a){const l=[],c=s.keySet,f=s.catchall._zod,d=f.def.type,m=f.optout==="optional";for(const p in e){if(c.has(p))continue;if(d==="never"){l.push(p);continue}const g=f.run({value:e[p],issues:[]},r);g instanceof Promise?t.push(g.then(y=>Rd(y,n,p,e,m))):Rd(g,n,p,e,m)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const dU=fe("$ZodObject",(t,e)=>{if(Qt.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const c=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...c};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=ov(()=>NA(e));gt(t._zod,"propValues",()=>{const c=e.shape,f={};for(const d in c){const m=c[d]._zod;if(m.values){f[d]??(f[d]=new Set);for(const p of m.values)f[d].add(p)}}return f});const s=kd,a=e.catchall;let l;t._zod.parse=(c,f)=>{l??(l=r.value);const d=c.value;if(!s(d))return c.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),c;c.value={};const m=[],p=l.shape;for(const g of l.keys){const y=p[g],x=y._zod.optout==="optional",S=y._zod.run({value:d[g],issues:[]},f);S instanceof Promise?m.push(S.then(E=>Rd(E,c,g,d,x))):Rd(S,c,g,d,x)}return a?DA(m,d,c,f,r.value,t):m.length?Promise.all(m).then(()=>c):c}}),hU=fe("$ZodObjectJIT",(t,e)=>{dU.init(t,e);const n=t._zod.parse,r=ov(()=>NA(e)),s=g=>{const y=new jB(["shape","payload","ctx"]),x=r.value,S=R=>{const N=V1(R);return`shape[${N}]._zod.run({ value: input[${N}], issues: [] }, ctx)`};y.write("const input = payload.value;");const E=Object.create(null);let _=0;for(const R of x.keys)E[R]=`key_${_++}`;y.write("const newResult = {};");for(const R of x.keys){const N=E[R],L=V1(R),I=g[R]?._zod?.optout==="optional";y.write(`const ${N} = ${S(R)};`),I?y.write(`
        if (${N}.issues.length) {
          if (${L} in input) {
            payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${L}, ...iss.path] : [${L}]
            })));
          }
        }
        
        if (${N}.value === undefined) {
          if (${L} in input) {
            newResult[${L}] = undefined;
          }
        } else {
          newResult[${L}] = ${N}.value;
        }
        
      `):y.write(`
        if (${N}.issues.length) {
          payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${L}, ...iss.path] : [${L}]
          })));
        }
        
        if (${N}.value === undefined) {
          if (${L} in input) {
            newResult[${L}] = undefined;
          }
        } else {
          newResult[${L}] = ${N}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");const k=y.compile();return(R,N)=>k(g,R,N)};let a;const l=kd,c=!SA.jitless,d=c&&z$.value,m=e.catchall;let p;t._zod.parse=(g,y)=>{p??(p=r.value);const x=g.value;return l(x)?c&&d&&y?.async===!1&&y.jitless!==!0?(a||(a=s(e.shape)),g=a(g,y),m?DA([],x,g,y,p,t):g):n(g,y):(g.issues.push({expected:"object",code:"invalid_type",input:x,inst:t}),g)}});function Q1(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!to(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>Zi(l,r,Qi())))}),e)}const pU=fe("$ZodUnion",(t,e)=>{Qt.init(t,e),gt(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),gt(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),gt(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),gt(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>uv(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let l=!1;const c=[];for(const f of e.options){const d=f._zod.run({value:s.value,issues:[]},a);if(d instanceof Promise)c.push(d),l=!0;else{if(d.issues.length===0)return d;c.push(d)}}return l?Promise.all(c).then(f=>Q1(f,s,t,a)):Q1(c,s,t,a)}}),mU=fe("$ZodIntersection",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([f,d])=>Z1(n,f,d)):Z1(n,a,l)}});function Fy(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(xu(t)&&xu(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const l=Fy(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],l=Fy(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Z1(t,e,n){const r=new Map;let s;for(const c of e.issues)if(c.code==="unrecognized_keys"){s??(s=c);for(const f of c.keys)r.has(f)||r.set(f,{}),r.get(f).l=!0}else t.issues.push(c);for(const c of n.issues)if(c.code==="unrecognized_keys")for(const f of c.keys)r.has(f)||r.set(f,{}),r.get(f).r=!0;else t.issues.push(c);const a=[...r].filter(([,c])=>c.l&&c.r).map(([c])=>c);if(a.length&&s&&t.issues.push({...s,keys:a}),to(t))return t;const l=Fy(e.value,n.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return t.value=l.data,t}const gU=fe("$ZodEnum",(t,e)=>{Qt.init(t,e);const n=wA(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>j$.has(typeof s)).map(s=>typeof s=="string"?ih(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),yU=fe("$ZodTransform",(t,e)=>{Qt.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new xA(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new io;return n.value=s,n}});function Y1(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const zA=fe("$ZodOptional",(t,e)=>{Qt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",gt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),gt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${uv(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>Y1(a,n.value)):Y1(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),vU=fe("$ZodExactOptional",(t,e)=>{zA.init(t,e),gt(t._zod,"values",()=>e.innerType._zod.values),gt(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),bU=fe("$ZodNullable",(t,e)=>{Qt.init(t,e),gt(t._zod,"optin",()=>e.innerType._zod.optin),gt(t._zod,"optout",()=>e.innerType._zod.optout),gt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${uv(n.source)}|null)$`):void 0}),gt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),xU=fe("$ZodDefault",(t,e)=>{Qt.init(t,e),t._zod.optin="optional",gt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>J1(a,e)):J1(s,e)}});function J1(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const SU=fe("$ZodPrefault",(t,e)=>{Qt.init(t,e),t._zod.optin="optional",gt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),wU=fe("$ZodNonOptional",(t,e)=>{Qt.init(t,e),gt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>X1(a,t)):X1(s,t)}});function X1(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const _U=fe("$ZodCatch",(t,e)=>{Qt.init(t,e),gt(t._zod,"optin",()=>e.innerType._zod.optin),gt(t._zod,"optout",()=>e.innerType._zod.optout),gt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>Zi(l,r,Qi()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>Zi(a,r,Qi()))},input:n.value}),n.issues=[]),n)}}),CU=fe("$ZodPipe",(t,e)=>{Qt.init(t,e),gt(t._zod,"values",()=>e.in._zod.values),gt(t._zod,"optin",()=>e.in._zod.optin),gt(t._zod,"optout",()=>e.out._zod.optout),gt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>Cf(l,e.in,r)):Cf(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>Cf(a,e.out,r)):Cf(s,e.out,r)}});function Cf(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const EU=fe("$ZodReadonly",(t,e)=>{Qt.init(t,e),gt(t._zod,"propValues",()=>e.innerType._zod.propValues),gt(t._zod,"values",()=>e.innerType._zod.values),gt(t._zod,"optin",()=>e.innerType?._zod?.optin),gt(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(W1):W1(s)}});function W1(t){return t.value=Object.freeze(t.value),t}const kU=fe("$ZodCustom",(t,e)=>{Vr.init(t,e),Qt.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>eC(a,n,r,t));eC(s,n,r,t)}});function eC(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Su(s))}}var tC;class RU{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function AU(){return new RU}(tC=globalThis).__zod_globalRegistry??(tC.__zod_globalRegistry=AU());const Hl=globalThis.__zod_globalRegistry;function TU(t,e){return new t({type:"string",...Le(e)})}function OU(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Le(e)})}function nC(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Le(e)})}function MU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Le(e)})}function IU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Le(e)})}function NU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Le(e)})}function DU(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Le(e)})}function zU(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Le(e)})}function jU(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Le(e)})}function LU(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Le(e)})}function PU(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Le(e)})}function FU(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Le(e)})}function $U(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Le(e)})}function BU(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Le(e)})}function UU(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Le(e)})}function qU(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Le(e)})}function HU(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Le(e)})}function VU(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Le(e)})}function KU(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Le(e)})}function GU(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Le(e)})}function QU(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Le(e)})}function ZU(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Le(e)})}function YU(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Le(e)})}function JU(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Le(e)})}function XU(t,e){return new t({type:"string",format:"date",check:"string_format",...Le(e)})}function WU(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Le(e)})}function e8(t,e){return new t({type:"string",format:"duration",check:"string_format",...Le(e)})}function t8(t){return new t({type:"unknown"})}function n8(t,e){return new t({type:"never",...Le(e)})}function jA(t,e){return new kB({check:"max_length",...Le(e),maximum:t})}function Ad(t,e){return new RB({check:"min_length",...Le(e),minimum:t})}function LA(t,e){return new AB({check:"length_equals",...Le(e),length:t})}function r8(t,e){return new TB({check:"string_format",format:"regex",...Le(e),pattern:t})}function s8(t){return new OB({check:"string_format",format:"lowercase",...Le(t)})}function i8(t){return new MB({check:"string_format",format:"uppercase",...Le(t)})}function a8(t,e){return new IB({check:"string_format",format:"includes",...Le(e),includes:t})}function o8(t,e){return new NB({check:"string_format",format:"starts_with",...Le(e),prefix:t})}function l8(t,e){return new DB({check:"string_format",format:"ends_with",...Le(e),suffix:t})}function _o(t){return new zB({check:"overwrite",tx:t})}function u8(t){return _o(e=>e.normalize(t))}function c8(){return _o(t=>t.trim())}function f8(){return _o(t=>t.toLowerCase())}function d8(){return _o(t=>t.toUpperCase())}function h8(){return _o(t=>D$(t))}function p8(t,e,n){return new t({type:"array",element:e,...Le(n)})}function m8(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Le(n)})}function g8(t){const e=y8(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Su(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Su(s))}},t(n.value,n)));return e}function y8(t,e){const n=new Vr({check:"custom",...Le(e)});return n._zod.check=t,n}function PA(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??Hl,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function fn(t,e,n={path:[],schemaPath:[]}){var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const c=t._zod.toJSONSchema?.();if(c)l.schema=c;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,m);else{const g=l.schema,y=e.processors[s.type];if(!y)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);y(t,e,g,m)}const p=t._zod.parent;p&&(l.ref||(l.ref=p),fn(p,e,m),e.seen.get(p).isParent=!0)}const f=e.metadataRegistry.get(t);return f&&Object.assign(l.schema,f),e.io==="input"&&bn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function FA(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const l of t.seen.entries()){const c=t.metadataRegistry.get(l[0])?.id;if(c){const f=r.get(c);if(f&&f!==l[0])throw new Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(c,l[0])}}const s=l=>{const c=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(l[0])?.id,g=t.external.uri??(x=>x);if(p)return{ref:g(p)};const y=l[1].defId??l[1].schema.id??`schema${t.counter++}`;return l[1].defId=y,{defId:y,ref:`${g("__shared")}#/${c}/${y}`}}if(l[1]===n)return{ref:"#"};const d=`#/${c}/`,m=l[1].schema.id??`__schema${t.counter++}`;return{defId:m,ref:d+m}},a=l=>{if(l[1].schema.$ref)return;const c=l[1],{ref:f,defId:d}=s(l);c.def={...c.schema},d&&(c.defId=d);const m=c.schema;for(const p in m)delete m[p];m.$ref=f};if(t.cycles==="throw")for(const l of t.seen.entries()){const c=l[1];if(c.cycle)throw new Error(`Cycle detected: #/${c.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of t.seen.entries()){const c=l[1];if(e===l[0]){a(l);continue}if(t.external){const d=t.external.registry.get(l[0])?.id;if(e!==l[0]&&d){a(l);continue}}if(t.metadataRegistry.get(l[0])?.id){a(l);continue}if(c.cycle){a(l);continue}if(c.count>1&&t.reused==="ref"){a(l);continue}}}function $A(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{const c=t.seen.get(l);if(c.ref===null)return;const f=c.def??c.schema,d={...f},m=c.ref;if(c.ref=null,m){r(m);const g=t.seen.get(m),y=g.schema;if(y.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(y)):Object.assign(f,y),Object.assign(f,d),l._zod.parent===m)for(const S in f)S==="$ref"||S==="allOf"||S in d||delete f[S];if(y.$ref)for(const S in f)S==="$ref"||S==="allOf"||S in g.def&&JSON.stringify(f[S])===JSON.stringify(g.def[S])&&delete f[S]}const p=l._zod.parent;if(p&&p!==m){r(p);const g=t.seen.get(p);if(g?.schema.$ref&&(f.$ref=g.schema.$ref,g.def))for(const y in f)y==="$ref"||y==="allOf"||y in g.def&&JSON.stringify(f[y])===JSON.stringify(g.def[y])&&delete f[y]}t.override({zodSchema:l,jsonSchema:f,path:c.path??[]})};for(const l of[...t.seen.entries()].reverse())r(l[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const l=t.external.registry.get(e)?.id;if(!l)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(l)}Object.assign(s,n.def??n.schema);const a=t.external?.defs??{};for(const l of t.seen.entries()){const c=l[1];c.def&&c.defId&&(a[c.defId]=c.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const l=JSON.parse(JSON.stringify(s));return Object.defineProperty(l,"~standard",{value:{...e["~standard"],jsonSchema:{input:Td(e,"input",t.processors),output:Td(e,"output",t.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function bn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return bn(r.element,n);if(r.type==="set")return bn(r.valueType,n);if(r.type==="lazy")return bn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return bn(r.innerType,n);if(r.type==="intersection")return bn(r.left,n)||bn(r.right,n);if(r.type==="record"||r.type==="map")return bn(r.keyType,n)||bn(r.valueType,n);if(r.type==="pipe")return bn(r.in,n)||bn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(bn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(bn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(bn(s,n))return!0;return!!(r.rest&&bn(r.rest,n))}return!1}const v8=(t,e={})=>n=>{const r=PA({...n,processors:e});return fn(t,r),FA(r,t),$A(r,t)},Td=(t,e,n={})=>r=>{const{libraryOptions:s,target:a}=r??{},l=PA({...s??{},target:a,io:e,processors:n});return fn(t,l),FA(l,t),$A(l,t)},b8={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},x8=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:l,format:c,patterns:f,contentEncoding:d}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),c&&(s.format=b8[c]??c,s.format===""&&delete s.format,c==="time"&&delete s.format),d&&(s.contentEncoding=d),f&&f.size>0){const m=[...f];m.length===1?s.pattern=m[0].source:m.length>1&&(s.allOf=[...m.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},S8=(t,e,n,r)=>{n.not={}},w8=(t,e,n,r)=>{},_8=(t,e,n,r)=>{const s=t._zod.def,a=wA(s.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},C8=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},E8=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},k8=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:l,maximum:c}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof c=="number"&&(s.maxItems=c),s.type="array",s.items=fn(a.element,e,{...r,path:[...r.path,"items"]})},R8=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",s.properties={};const l=a.shape;for(const d in l)s.properties[d]=fn(l[d],e,{...r,path:[...r.path,"properties",d]});const c=new Set(Object.keys(l)),f=new Set([...c].filter(d=>{const m=a.shape[d]._zod;return e.io==="input"?m.optin===void 0:m.optout===void 0}));f.size>0&&(s.required=Array.from(f)),a.catchall?._zod.def.type==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=fn(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},A8=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,l=s.options.map((c,f)=>fn(c,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=l:n.anyOf=l},T8=(t,e,n,r)=>{const s=t._zod.def,a=fn(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=fn(s.right,e,{...r,path:[...r.path,"allOf",1]}),c=d=>"allOf"in d&&Object.keys(d).length===1,f=[...c(a)?a.allOf:[a],...c(l)?l.allOf:[l]];n.allOf=f},O8=(t,e,n,r)=>{const s=t._zod.def,a=fn(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},M8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},I8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},N8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},D8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},z8=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;fn(a,e,r);const l=e.seen.get(t);l.ref=a},j8=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},BA=(t,e,n,r)=>{const s=t._zod.def;fn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},L8=fe("ZodISODateTime",(t,e)=>{ZB.init(t,e),Ot.init(t,e)});function P8(t){return JU(L8,t)}const F8=fe("ZodISODate",(t,e)=>{YB.init(t,e),Ot.init(t,e)});function $8(t){return XU(F8,t)}const B8=fe("ZodISOTime",(t,e)=>{JB.init(t,e),Ot.init(t,e)});function U8(t){return WU(B8,t)}const q8=fe("ZodISODuration",(t,e)=>{XB.init(t,e),Ot.init(t,e)});function H8(t){return e8(q8,t)}const V8=(t,e)=>{RA.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>K$(t,n)},flatten:{value:n=>V$(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,Py,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,Py,2)}},isEmpty:{get(){return t.issues.length===0}}})},wr=fe("ZodError",V8,{Parent:Error}),K8=fv(wr),G8=dv(wr),Q8=ah(wr),Z8=oh(wr),Y8=Z$(wr),J8=Y$(wr),X8=J$(wr),W8=X$(wr),e9=W$(wr),t9=eB(wr),n9=tB(wr),r9=nB(wr),Zt=fe("ZodType",(t,e)=>(Qt.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:Td(t,"input"),output:Td(t,"output")}}),t.toJSONSchema=v8(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(li(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>ui(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>K8(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>Q8(t,n,r),t.parseAsync=async(n,r)=>G8(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>Z8(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>Y8(t,n,r),t.decode=(n,r)=>J8(t,n,r),t.encodeAsync=async(n,r)=>X8(t,n,r),t.decodeAsync=async(n,r)=>W8(t,n,r),t.safeEncode=(n,r)=>e9(t,n,r),t.safeDecode=(n,r)=>t9(t,n,r),t.safeEncodeAsync=async(n,r)=>n9(t,n,r),t.safeDecodeAsync=async(n,r)=>r9(t,n,r),t.refine=(n,r)=>t.check(Z9(n,r)),t.superRefine=n=>t.check(Y9(n)),t.overwrite=n=>t.check(_o(n)),t.optional=()=>iC(t),t.exactOptional=()=>j9(t),t.nullable=()=>aC(t),t.nullish=()=>iC(aC(t)),t.nonoptional=n=>U9(t,n),t.array=()=>k9(t),t.or=n=>T9([t,n]),t.and=n=>M9(t,n),t.transform=n=>oC(t,D9(n)),t.default=n=>F9(t,n),t.prefault=n=>B9(t,n),t.catch=n=>H9(t,n),t.pipe=n=>oC(t,n),t.readonly=()=>G9(t),t.describe=n=>{const r=t.clone();return Hl.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return Hl.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Hl.get(t);const r=t.clone();return Hl.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),UA=fe("_ZodString",(t,e)=>{hv.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>x8(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(r8(...r)),t.includes=(...r)=>t.check(a8(...r)),t.startsWith=(...r)=>t.check(o8(...r)),t.endsWith=(...r)=>t.check(l8(...r)),t.min=(...r)=>t.check(Ad(...r)),t.max=(...r)=>t.check(jA(...r)),t.length=(...r)=>t.check(LA(...r)),t.nonempty=(...r)=>t.check(Ad(1,...r)),t.lowercase=r=>t.check(s8(r)),t.uppercase=r=>t.check(i8(r)),t.trim=()=>t.check(c8()),t.normalize=(...r)=>t.check(u8(...r)),t.toLowerCase=()=>t.check(f8()),t.toUpperCase=()=>t.check(d8()),t.slugify=()=>t.check(h8())}),s9=fe("ZodString",(t,e)=>{hv.init(t,e),UA.init(t,e),t.email=n=>t.check(OU(i9,n)),t.url=n=>t.check(zU(a9,n)),t.jwt=n=>t.check(YU(S9,n)),t.emoji=n=>t.check(jU(o9,n)),t.guid=n=>t.check(nC(rC,n)),t.uuid=n=>t.check(MU(Ef,n)),t.uuidv4=n=>t.check(IU(Ef,n)),t.uuidv6=n=>t.check(NU(Ef,n)),t.uuidv7=n=>t.check(DU(Ef,n)),t.nanoid=n=>t.check(LU(l9,n)),t.guid=n=>t.check(nC(rC,n)),t.cuid=n=>t.check(PU(u9,n)),t.cuid2=n=>t.check(FU(c9,n)),t.ulid=n=>t.check($U(f9,n)),t.base64=n=>t.check(GU(v9,n)),t.base64url=n=>t.check(QU(b9,n)),t.xid=n=>t.check(BU(d9,n)),t.ksuid=n=>t.check(UU(h9,n)),t.ipv4=n=>t.check(qU(p9,n)),t.ipv6=n=>t.check(HU(m9,n)),t.cidrv4=n=>t.check(VU(g9,n)),t.cidrv6=n=>t.check(KU(y9,n)),t.e164=n=>t.check(ZU(x9,n)),t.datetime=n=>t.check(P8(n)),t.date=n=>t.check($8(n)),t.time=n=>t.check(U8(n)),t.duration=n=>t.check(H8(n))});function uh(t){return TU(s9,t)}const Ot=fe("ZodStringFormat",(t,e)=>{Tt.init(t,e),UA.init(t,e)}),i9=fe("ZodEmail",(t,e)=>{$B.init(t,e),Ot.init(t,e)}),rC=fe("ZodGUID",(t,e)=>{PB.init(t,e),Ot.init(t,e)}),Ef=fe("ZodUUID",(t,e)=>{FB.init(t,e),Ot.init(t,e)}),a9=fe("ZodURL",(t,e)=>{BB.init(t,e),Ot.init(t,e)}),o9=fe("ZodEmoji",(t,e)=>{UB.init(t,e),Ot.init(t,e)}),l9=fe("ZodNanoID",(t,e)=>{qB.init(t,e),Ot.init(t,e)}),u9=fe("ZodCUID",(t,e)=>{HB.init(t,e),Ot.init(t,e)}),c9=fe("ZodCUID2",(t,e)=>{VB.init(t,e),Ot.init(t,e)}),f9=fe("ZodULID",(t,e)=>{KB.init(t,e),Ot.init(t,e)}),d9=fe("ZodXID",(t,e)=>{GB.init(t,e),Ot.init(t,e)}),h9=fe("ZodKSUID",(t,e)=>{QB.init(t,e),Ot.init(t,e)}),p9=fe("ZodIPv4",(t,e)=>{WB.init(t,e),Ot.init(t,e)}),m9=fe("ZodIPv6",(t,e)=>{eU.init(t,e),Ot.init(t,e)}),g9=fe("ZodCIDRv4",(t,e)=>{tU.init(t,e),Ot.init(t,e)}),y9=fe("ZodCIDRv6",(t,e)=>{nU.init(t,e),Ot.init(t,e)}),v9=fe("ZodBase64",(t,e)=>{rU.init(t,e),Ot.init(t,e)}),b9=fe("ZodBase64URL",(t,e)=>{iU.init(t,e),Ot.init(t,e)}),x9=fe("ZodE164",(t,e)=>{aU.init(t,e),Ot.init(t,e)}),S9=fe("ZodJWT",(t,e)=>{lU.init(t,e),Ot.init(t,e)}),w9=fe("ZodUnknown",(t,e)=>{uU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>w8()});function sC(){return t8(w9)}const _9=fe("ZodNever",(t,e)=>{cU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>S8(t,n,r)});function C9(t){return n8(_9,t)}const E9=fe("ZodArray",(t,e)=>{fU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>k8(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(Ad(n,r)),t.nonempty=n=>t.check(Ad(1,n)),t.max=(n,r)=>t.check(jA(n,r)),t.length=(n,r)=>t.check(LA(n,r)),t.unwrap=()=>t.element});function k9(t,e){return p8(E9,t,e)}const R9=fe("ZodObject",(t,e)=>{hU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>R8(t,n,r,s),gt(t,"shape",()=>e.shape),t.keyof=()=>I9(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:sC()}),t.loose=()=>t.clone({...t._zod.def,catchall:sC()}),t.strict=()=>t.clone({...t._zod.def,catchall:C9()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>$$(t,n),t.safeExtend=n=>B$(t,n),t.merge=n=>U$(t,n),t.pick=n=>P$(t,n),t.omit=n=>F$(t,n),t.partial=(...n)=>q$(qA,t,n[0]),t.required=(...n)=>H$(HA,t,n[0])});function Du(t,e){const n={type:"object",shape:t??{},...Le(e)};return new R9(n)}const A9=fe("ZodUnion",(t,e)=>{pU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>A8(t,n,r,s),t.options=e.options});function T9(t,e){return new A9({type:"union",options:t,...Le(e)})}const O9=fe("ZodIntersection",(t,e)=>{mU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>T8(t,n,r,s)});function M9(t,e){return new O9({type:"intersection",left:t,right:e})}const $y=fe("ZodEnum",(t,e)=>{gU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>_8(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new $y({...e,checks:[],...Le(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new $y({...e,checks:[],...Le(s),entries:a})}});function I9(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new $y({type:"enum",entries:n,...Le(e)})}const N9=fe("ZodTransform",(t,e)=>{yU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>E8(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new xA(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(Su(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(Su(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function D9(t){return new N9({type:"transform",transform:t})}const qA=fe("ZodOptional",(t,e)=>{zA.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>BA(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function iC(t){return new qA({type:"optional",innerType:t})}const z9=fe("ZodExactOptional",(t,e)=>{vU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>BA(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function j9(t){return new z9({type:"optional",innerType:t})}const L9=fe("ZodNullable",(t,e)=>{bU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>O8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function aC(t){return new L9({type:"nullable",innerType:t})}const P9=fe("ZodDefault",(t,e)=>{xU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>I8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function F9(t,e){return new P9({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():CA(e)}})}const $9=fe("ZodPrefault",(t,e)=>{SU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>N8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function B9(t,e){return new $9({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():CA(e)}})}const HA=fe("ZodNonOptional",(t,e)=>{wU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>M8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function U9(t,e){return new HA({type:"nonoptional",innerType:t,...Le(e)})}const q9=fe("ZodCatch",(t,e)=>{_U.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>D8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function H9(t,e){return new q9({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const V9=fe("ZodPipe",(t,e)=>{CU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>z8(t,n,r,s),t.in=e.in,t.out=e.out});function oC(t,e){return new V9({type:"pipe",in:t,out:e})}const K9=fe("ZodReadonly",(t,e)=>{EU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>j8(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function G9(t){return new K9({type:"readonly",innerType:t})}const Q9=fe("ZodCustom",(t,e)=>{kU.init(t,e),Zt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>C8(t,n)});function Z9(t,e={}){return m8(Q9,t,e)}function Y9(t){return g8(t)}const By=50;function J9(t){return t?t.length<=By?t:t.slice(0,By):[]}function kf(t){return t.error?{error:t.error}:{columns:t.columns,rowCount:t.rows?.length??0,rows:J9(t.rows),rowsAffected:t.rows_affected,truncated:(t.rows?.length??0)>By}}const X9=Du({}),W9=Du({query:uh().describe("The SQL query to set in the editor")}),eq=Du({query:uh().describe("The SQL query to execute")}),tq=Du({query:uh().describe("The SQL SELECT query to run silently")}),nq=Du({query:uh().describe("The SQL statement (INSERT/UPDATE/DELETE) to execute silently")}),rq=Ou({name:"get_query_result",description:"Get the result of the last executed query that was shown in the UI, including columns, rows, and any errors",inputSchema:X9}),sq=Ou({name:"set_query",description:"Set the SQL query in the editor without executing it. The user will see the query appear in their editor immediately.",inputSchema:W9}),iq=Ou({name:"execute_query",description:"Execute a SQL query and show results in the UI. The query will be set in the editor and executed, with results displayed to the user. Returns the query results directly.",inputSchema:eq}),aq=Ou({name:"run_query",description:"Run a SELECT query silently WITHOUT changing the UI or query editor. Use this for exploratory queries, checking data, or gathering information without disrupting what the user is currently working on. Results are returned but not shown in the UI. Only use for SELECT, WITH, SHOW, DESCRIBE, EXPLAIN, or PRAGMA queries.",inputSchema:tq}),oq=Ou({name:"run_statement",description:"Execute an INSERT, UPDATE, or DELETE statement silently WITHOUT changing the UI. Use this for modifying data without disrupting what the user is currently working on. Returns rows_affected count.",inputSchema:nq});function lq(t){const{queryResult:e,setters:n}=t,r=rq.client(async()=>e?kf(e):{error:"No query has been executed yet."}),s=sq.client(async f=>{const d=f;return n.setQuery(d.query),{success:!0,query:d.query}}),a=iq.client(async f=>{const d=f;try{const m=await n.executeQuery(d.query);return kf(m)}catch(m){return{error:m instanceof Error?m.message:"Query execution failed"}}}),l=aq.client(async f=>{const d=f;try{const m=await n.runQuerySilent(d.query);return kf(m)}catch(m){return{error:m instanceof Error?m.message:"Query execution failed"}}}),c=oq.client(async f=>{const d=f;try{const m=await n.runStatementSilent(d.query);return kf(m)}catch(m){return{error:m instanceof Error?m.message:"Statement execution failed"}}});return tF(r,s,a,l,c)}function uq(t){const{connection:e,database:n,table:r,currentQuery:s,schema:a}=t,l=[];e&&"driver"in e?(l.push(`- **Driver**: ${e.driver}`),l.push(`- **Database**: ${n||"(none selected)"}`),l.push(`- **Table**: ${r||"(none selected)"}`)):l.push("- Not connected to a database");const c=l.join(`
`),f=s?.trim()?`\`\`\`sql
${s}
\`\`\``:"(empty)";let d="";return a?.tables?.length&&(d=`

## Schema

${a.tables.map(p=>{const g=a.columns[p];if(g?.length){const y=g.map(x=>`${x.name} (${x.type})`).join(", ");return`- **${p}**: ${y}`}return`- **${p}**`}).join(`
`)}`),`You are an AI assistant embedded in a database management tool. You help users write, understand, and debug SQL queries.

## Current Environment

${c}

## Current Query

${f}${d}

## Tools

- \`get_query_result\`: Get results of the last executed query
- \`set_query\`: Put a query in the editor (user sees it immediately)
- \`execute_query\`: Run a query and show results in UI
- \`run_query\`: Run a SELECT query silently without changing UI (for exploration)
- \`run_statement\`: Execute INSERT/UPDATE/DELETE silently without changing UI

## Guidelines

- **Writing queries**: Use \`set_query\` to show it in the editor for review
- **Running queries**: Use \`execute_query\` - results return directly
- **Exploring data**: Use \`run_query\` for SELECT queries without disrupting the UI
- **Modifying data**: Use \`run_statement\` for INSERT/UPDATE/DELETE operations silently
- **Query format**: One query at a time. For Oracle, omit trailing semicolon
- **Response format**: Use Markdown. Be concise.`}const lC={name:"SQL Assistant",placeholder:"Ask about your query or data..."};function cq(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const fq=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,dq=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,hq={};function uC(t,e){return(hq.jsx?dq:fq).test(t)}const pq=/[ \t\n\f\r]/g;function mq(t){return typeof t=="object"?t.type==="text"?cC(t.value):!1:cC(t)}function cC(t){return t.replace(pq,"")===""}class zu{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}zu.prototype.normal={};zu.prototype.property={};zu.prototype.space=void 0;function VA(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new zu(n,r,e)}function Uy(t){return t.toLowerCase()}class $n{constructor(e,n){this.attribute=n,this.property=e}}$n.prototype.attribute="";$n.prototype.booleanish=!1;$n.prototype.boolean=!1;$n.prototype.commaOrSpaceSeparated=!1;$n.prototype.commaSeparated=!1;$n.prototype.defined=!1;$n.prototype.mustUseProperty=!1;$n.prototype.number=!1;$n.prototype.overloadedBoolean=!1;$n.prototype.property="";$n.prototype.spaceSeparated=!1;$n.prototype.space=void 0;let gq=0;const Ve=Wi(),$t=Wi(),qy=Wi(),pe=Wi(),Et=Wi(),ao=Wi(),Yn=Wi();function Wi(){return 2**++gq}const Hy=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ve,booleanish:$t,commaOrSpaceSeparated:Yn,commaSeparated:ao,number:pe,overloadedBoolean:qy,spaceSeparated:Et},Symbol.toStringTag,{value:"Module"})),_g=Object.keys(Hy);class pv extends $n{constructor(e,n,r,s){let a=-1;if(super(e,n),fC(this,"space",s),typeof r=="number")for(;++a<_g.length;){const l=_g[a];fC(this,_g[a],(r&Hy[l])===Hy[l])}}}pv.prototype.defined=!0;function fC(t,e,n){n&&(t[e]=n)}function Co(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const a=new pv(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[Uy(r)]=r,n[Uy(a.attribute)]=r}return new zu(e,n,t.space)}const KA=Co({properties:{ariaActiveDescendant:null,ariaAtomic:$t,ariaAutoComplete:null,ariaBusy:$t,ariaChecked:$t,ariaColCount:pe,ariaColIndex:pe,ariaColSpan:pe,ariaControls:Et,ariaCurrent:null,ariaDescribedBy:Et,ariaDetails:null,ariaDisabled:$t,ariaDropEffect:Et,ariaErrorMessage:null,ariaExpanded:$t,ariaFlowTo:Et,ariaGrabbed:$t,ariaHasPopup:null,ariaHidden:$t,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Et,ariaLevel:pe,ariaLive:null,ariaModal:$t,ariaMultiLine:$t,ariaMultiSelectable:$t,ariaOrientation:null,ariaOwns:Et,ariaPlaceholder:null,ariaPosInSet:pe,ariaPressed:$t,ariaReadOnly:$t,ariaRelevant:null,ariaRequired:$t,ariaRoleDescription:Et,ariaRowCount:pe,ariaRowIndex:pe,ariaRowSpan:pe,ariaSelected:$t,ariaSetSize:pe,ariaSort:null,ariaValueMax:pe,ariaValueMin:pe,ariaValueNow:pe,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function GA(t,e){return e in t?t[e]:e}function QA(t,e){return GA(t,e.toLowerCase())}const yq=Co({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ao,acceptCharset:Et,accessKey:Et,action:null,allow:null,allowFullScreen:Ve,allowPaymentRequest:Ve,allowUserMedia:Ve,alt:null,as:null,async:Ve,autoCapitalize:null,autoComplete:Et,autoFocus:Ve,autoPlay:Ve,blocking:Et,capture:null,charSet:null,checked:Ve,cite:null,className:Et,cols:pe,colSpan:null,content:null,contentEditable:$t,controls:Ve,controlsList:Et,coords:pe|ao,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ve,defer:Ve,dir:null,dirName:null,disabled:Ve,download:qy,draggable:$t,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ve,formTarget:null,headers:Et,height:pe,hidden:qy,high:pe,href:null,hrefLang:null,htmlFor:Et,httpEquiv:Et,id:null,imageSizes:null,imageSrcSet:null,inert:Ve,inputMode:null,integrity:null,is:null,isMap:Ve,itemId:null,itemProp:Et,itemRef:Et,itemScope:Ve,itemType:Et,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ve,low:pe,manifest:null,max:null,maxLength:pe,media:null,method:null,min:null,minLength:pe,multiple:Ve,muted:Ve,name:null,nonce:null,noModule:Ve,noValidate:Ve,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ve,optimum:pe,pattern:null,ping:Et,placeholder:null,playsInline:Ve,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ve,referrerPolicy:null,rel:Et,required:Ve,reversed:Ve,rows:pe,rowSpan:pe,sandbox:Et,scope:null,scoped:Ve,seamless:Ve,selected:Ve,shadowRootClonable:Ve,shadowRootDelegatesFocus:Ve,shadowRootMode:null,shape:null,size:pe,sizes:null,slot:null,span:pe,spellCheck:$t,src:null,srcDoc:null,srcLang:null,srcSet:null,start:pe,step:null,style:null,tabIndex:pe,target:null,title:null,translate:null,type:null,typeMustMatch:Ve,useMap:null,value:$t,width:pe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Et,axis:null,background:null,bgColor:null,border:pe,borderColor:null,bottomMargin:pe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ve,declare:Ve,event:null,face:null,frame:null,frameBorder:null,hSpace:pe,leftMargin:pe,link:null,longDesc:null,lowSrc:null,marginHeight:pe,marginWidth:pe,noResize:Ve,noHref:Ve,noShade:Ve,noWrap:Ve,object:null,profile:null,prompt:null,rev:null,rightMargin:pe,rules:null,scheme:null,scrolling:$t,standby:null,summary:null,text:null,topMargin:pe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:pe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ve,disableRemotePlayback:Ve,prefix:null,property:null,results:pe,security:null,unselectable:null},space:"html",transform:QA}),vq=Co({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Yn,accentHeight:pe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:pe,amplitude:pe,arabicForm:null,ascent:pe,attributeName:null,attributeType:null,azimuth:pe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:pe,by:null,calcMode:null,capHeight:pe,className:Et,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:pe,diffuseConstant:pe,direction:null,display:null,dur:null,divisor:pe,dominantBaseline:null,download:Ve,dx:null,dy:null,edgeMode:null,editable:null,elevation:pe,enableBackground:null,end:null,event:null,exponent:pe,externalResourcesRequired:null,fill:null,fillOpacity:pe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ao,g2:ao,glyphName:ao,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:pe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:pe,horizOriginX:pe,horizOriginY:pe,id:null,ideographic:pe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:pe,k:pe,k1:pe,k2:pe,k3:pe,k4:pe,kernelMatrix:Yn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:pe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:pe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:pe,overlineThickness:pe,paintOrder:null,panose1:null,path:null,pathLength:pe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Et,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:pe,pointsAtY:pe,pointsAtZ:pe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Yn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Yn,rev:Yn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Yn,requiredFeatures:Yn,requiredFonts:Yn,requiredFormats:Yn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:pe,specularExponent:pe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:pe,strikethroughThickness:pe,string:null,stroke:null,strokeDashArray:Yn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:pe,strokeOpacity:pe,strokeWidth:null,style:null,surfaceScale:pe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Yn,tabIndex:pe,tableValues:null,target:null,targetX:pe,targetY:pe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Yn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:pe,underlineThickness:pe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:pe,values:null,vAlphabetic:pe,vMathematical:pe,vectorEffect:null,vHanging:pe,vIdeographic:pe,version:null,vertAdvY:pe,vertOriginX:pe,vertOriginY:pe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:pe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:GA}),ZA=Co({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),YA=Co({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:QA}),JA=Co({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),bq={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},xq=/[A-Z]/g,dC=/-[a-z]/g,Sq=/^data[-\w.:]+$/i;function wq(t,e){const n=Uy(e);let r=e,s=$n;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Sq.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(dC,Cq);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!dC.test(a)){let l=a.replace(xq,_q);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=pv}return new s(r,e)}function _q(t){return"-"+t.toLowerCase()}function Cq(t){return t.charAt(1).toUpperCase()}const Eq=VA([KA,yq,ZA,YA,JA],"html"),mv=VA([KA,vq,ZA,YA,JA],"svg");function kq(t){return t.join(" ").trim()}var Ua={},Cg,hC;function Rq(){if(hC)return Cg;hC=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,c=/^\s+|\s+$/g,f=`
`,d="/",m="*",p="",g="comment",y="declaration";function x(E,_){if(typeof E!="string")throw new TypeError("First argument must be a string");if(!E)return[];_=_||{};var k=1,R=1;function N(te){var V=te.match(e);V&&(k+=V.length);var F=te.lastIndexOf(f);R=~F?te.length-F:R+te.length}function L(){var te={line:k,column:R};return function(V){return V.position=new A(te),P(),V}}function A(te){this.start=te,this.end={line:k,column:R},this.source=_.source}A.prototype.content=E;function I(te){var V=new Error(_.source+":"+k+":"+R+": "+te);if(V.reason=te,V.filename=_.source,V.line=k,V.column=R,V.source=E,!_.silent)throw V}function j(te){var V=te.exec(E);if(V){var F=V[0];return N(F),E=E.slice(F.length),V}}function P(){j(n)}function M(te){var V;for(te=te||[];V=B();)V!==!1&&te.push(V);return te}function B(){var te=L();if(!(d!=E.charAt(0)||m!=E.charAt(1))){for(var V=2;p!=E.charAt(V)&&(m!=E.charAt(V)||d!=E.charAt(V+1));)++V;if(V+=2,p===E.charAt(V-1))return I("End of comment missing");var F=E.slice(2,V-2);return R+=2,N(F),E=E.slice(V),R+=2,te({type:g,comment:F})}}function Q(){var te=L(),V=j(r);if(V){if(B(),!j(s))return I("property missing ':'");var F=j(a),X=te({type:y,property:S(V[0].replace(t,p)),value:F?S(F[0].replace(t,p)):p});return j(l),X}}function Z(){var te=[];M(te);for(var V;V=Q();)V!==!1&&(te.push(V),M(te));return te}return P(),Z()}function S(E){return E?E.replace(c,p):p}return Cg=x,Cg}var pC;function Aq(){if(pC)return Ua;pC=1;var t=Ua&&Ua.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.default=n;const e=t(Rq());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),c=typeof s=="function";return l.forEach(f=>{if(f.type!=="declaration")return;const{property:d,value:m}=f;c?s(d,m,f):m&&(a=a||{},a[d]=m)}),a}return Ua}var kl={},mC;function Tq(){if(mC)return kl;mC=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(d){return!d||n.test(d)||t.test(d)},l=function(d,m){return m.toUpperCase()},c=function(d,m){return"".concat(m,"-")},f=function(d,m){return m===void 0&&(m={}),a(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(s,c):d=d.replace(r,c),d.replace(e,l))};return kl.camelCase=f,kl}var Rl,gC;function Oq(){if(gC)return Rl;gC=1;var t=Rl&&Rl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(Aq()),n=Tq();function r(s,a){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(c,f){c&&f&&(l[(0,n.camelCase)(c,a)]=f)}),l}return r.default=r,Rl=r,Rl}var Mq=Oq();const Iq=Wy(Mq),XA=WA("end"),gv=WA("start");function WA(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Nq(t){const e=gv(t),n=XA(t);if(e&&n)return{start:e,end:n}}function iu(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?yC(t.position):"start"in t||"end"in t?yC(t):"line"in t||"column"in t?Vy(t):""}function Vy(t){return vC(t&&t.line)+":"+vC(t&&t.column)}function yC(t){return Vy(t&&t.start)+"-"+Vy(t&&t.end)}function vC(t){return t&&typeof t=="number"?t:1}class yn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?s=e:!a.cause&&e&&(l=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?a.ruleId=r:(a.source=r.slice(0,f),a.ruleId=r.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const c=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=c?c.line:void 0,this.name=iu(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}yn.prototype.file="";yn.prototype.name="";yn.prototype.reason="";yn.prototype.message="";yn.prototype.stack="";yn.prototype.column=void 0;yn.prototype.line=void 0;yn.prototype.ancestors=void 0;yn.prototype.cause=void 0;yn.prototype.fatal=void 0;yn.prototype.place=void 0;yn.prototype.ruleId=void 0;yn.prototype.source=void 0;const yv={}.hasOwnProperty,Dq=new Map,zq=/[A-Z]/g,jq=new Set(["table","tbody","thead","tfoot","tr"]),Lq=new Set(["td","th"]),eT="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Pq(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Kq(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Vq(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?mv:Eq,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=tT(s,t,void 0);return a&&typeof a!="string"?a:s.create(t,s.Fragment,{children:a||void 0},void 0)}function tT(t,e,n){if(e.type==="element")return Fq(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return $q(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Uq(t,e,n);if(e.type==="mdxjsEsm")return Bq(t,e);if(e.type==="root")return qq(t,e,n);if(e.type==="text")return Hq(t,e)}function Fq(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=mv,t.schema=s),t.ancestors.push(e);const a=rT(t,e.tagName,!1),l=Gq(t,e);let c=bv(t,e);return jq.has(e.tagName)&&(c=c.filter(function(f){return typeof f=="string"?!mq(f):!0})),nT(t,l,a,e),vv(l,c),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function $q(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}wu(t,e.position)}function Bq(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);wu(t,e.position)}function Uq(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=mv,t.schema=s),t.ancestors.push(e);const a=e.name===null?t.Fragment:rT(t,e.name,!0),l=Qq(t,e),c=bv(t,e);return nT(t,l,a,e),vv(l,c),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function qq(t,e,n){const r={};return vv(r,bv(t,e)),t.create(e,t.Fragment,r,n)}function Hq(t,e){return e.value}function nT(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function vv(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Vq(t,e,n){return r;function r(s,a,l,c){const d=Array.isArray(l.children)?n:e;return c?d(a,l,c):d(a,l)}}function Kq(t,e){return n;function n(r,s,a,l){const c=Array.isArray(a.children),f=gv(r);return e(s,a,l,c,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function Gq(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&yv.call(e.properties,s)){const a=Zq(t,s,e.properties[s]);if(a){const[l,c]=a;t.tableCellAlignToStyle&&l==="align"&&typeof c=="string"&&Lq.has(e.tagName)?r=c:n[l]=c}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Qq(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const c=l.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else wu(t,e.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const c=r.value.data.estree.body[0];c.type,a=t.evaluater.evaluateExpression(c.expression)}else wu(t,e.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function bv(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:Dq;for(;++r<e.children.length;){const a=e.children[r];let l;if(t.passKeys){const f=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(f){const d=s.get(f)||0;l=f+"-"+d,s.set(f,d+1)}}const c=tT(t,a,l);c!==void 0&&n.push(c)}return n}function Zq(t,e,n){const r=wq(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?cq(n):kq(n)),r.property==="style"){let s=typeof n=="object"?n:Yq(t,String(n));return t.stylePropertyNameCase==="css"&&(s=Jq(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?bq[r.property]||r.property:r.attribute,n]}}function Yq(t,e){try{return Iq(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new yn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=eT+"#cannot-parse-style-attribute",s}}function rT(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let a=-1,l;for(;++a<s.length;){const c=uC(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};l=l?{type:"MemberExpression",object:l,property:c,computed:!!(a&&c.type==="Literal"),optional:!1}:c}r=l}else r=uC(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return yv.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);wu(t)}function wu(t,e){const n=new yn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=eT+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Jq(t){const e={};let n;for(n in t)yv.call(t,n)&&(e[Xq(n)]=t[n]);return e}function Xq(t){let e=t.replace(zq,Wq);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Wq(t){return"-"+t.toLowerCase()}const Eg={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},e7={};function xv(t,e){const n=e7,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return sT(t,r,s)}function sT(t,e,n){if(t7(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return bC(t.children,e,n)}return Array.isArray(t)?bC(t,e,n):""}function bC(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=sT(t[s],e,n);return r.join("")}function t7(t){return!!(t&&typeof t=="object")}const xC=document.createElement("i");function Sv(t){const e="&"+t+";";xC.innerHTML=e;const n=xC.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function tr(t,e,n,r){const s=t.length;let a=0,l;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function yr(t,e){return t.length>0?(tr(t,t.length,0,e),t):e}const SC={}.hasOwnProperty;function iT(t){const e={};let n=-1;for(;++n<t.length;)n7(e,t[n]);return e}function n7(t,e){let n;for(n in e){const s=(SC.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){SC.call(s,l)||(s[l]=[]);const c=a[l];r7(s[l],Array.isArray(c)?c:c?[c]:[])}}}function r7(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);tr(t,0,0,r)}function aT(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ir(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Cn=ci(/[A-Za-z]/),gn=ci(/[\dA-Za-z]/),s7=ci(/[#-'*+\--9=?A-Z^-~]/);function Od(t){return t!==null&&(t<32||t===127)}const Ky=ci(/\d/),i7=ci(/[\dA-Fa-f]/),a7=ci(/[!-/:-@[-`{-~]/);function Me(t){return t!==null&&t<-2}function Ct(t){return t!==null&&(t<0||t===32)}function Ye(t){return t===-2||t===-1||t===32}const ch=ci(new RegExp("\\p{P}|\\p{S}","u")),Yi=ci(/\s/);function ci(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Eo(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&gn(t.charCodeAt(n+1))&&gn(t.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const c=t.charCodeAt(n+1);a<56320&&c>56319&&c<57344?(l=String.fromCharCode(a,c),s=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+s+1,l=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function st(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(f){return Ye(f)?(t.enter(n),c(f)):e(f)}function c(f){return Ye(f)&&a++<s?(t.consume(f),c):(t.exit(n),e(f))}}const o7={tokenize:l7};function l7(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),st(t,e,"linePrefix")}function s(c){return t.enter("paragraph"),a(c)}function a(c){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(c)}function l(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return Me(c)?(t.consume(c),t.exit("chunkText"),a):(t.consume(c),l)}}const u7={tokenize:c7},wC={tokenize:f7};function c7(t){const e=this,n=[];let r=0,s,a,l;return c;function c(R){if(r<n.length){const N=n[r];return e.containerState=N[1],t.attempt(N[0].continuation,f,d)(R)}return d(R)}function f(R){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&k();const N=e.events.length;let L=N,A;for(;L--;)if(e.events[L][0]==="exit"&&e.events[L][1].type==="chunkFlow"){A=e.events[L][1].end;break}_(r);let I=N;for(;I<e.events.length;)e.events[I][1].end={...A},I++;return tr(e.events,L+1,0,e.events.slice(N)),e.events.length=I,d(R)}return c(R)}function d(R){if(r===n.length){if(!s)return g(R);if(s.currentConstruct&&s.currentConstruct.concrete)return x(R);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(wC,m,p)(R)}function m(R){return s&&k(),_(r),g(R)}function p(R){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,x(R)}function g(R){return e.containerState={},t.attempt(wC,y,x)(R)}function y(R){return r++,n.push([e.currentConstruct,e.containerState]),g(R)}function x(R){if(R===null){s&&k(),_(0),t.consume(R);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),S(R)}function S(R){if(R===null){E(t.exit("chunkFlow"),!0),_(0),t.consume(R);return}return Me(R)?(t.consume(R),E(t.exit("chunkFlow")),r=0,e.interrupt=void 0,c):(t.consume(R),S)}function E(R,N){const L=e.sliceStream(R);if(N&&L.push(null),R.previous=a,a&&(a.next=R),a=R,s.defineSkip(R.start),s.write(L),e.parser.lazy[R.start.line]){let A=s.events.length;for(;A--;)if(s.events[A][1].start.offset<l&&(!s.events[A][1].end||s.events[A][1].end.offset>l))return;const I=e.events.length;let j=I,P,M;for(;j--;)if(e.events[j][0]==="exit"&&e.events[j][1].type==="chunkFlow"){if(P){M=e.events[j][1].end;break}P=!0}for(_(r),A=I;A<e.events.length;)e.events[A][1].end={...M},A++;tr(e.events,j+1,0,e.events.slice(I)),e.events.length=A}}function _(R){let N=n.length;for(;N-- >R;){const L=n[N];e.containerState=L[1],L[0].exit.call(e,t)}n.length=R}function k(){s.write([null]),a=void 0,s=void 0,e.containerState._closeFlow=void 0}}function f7(t,e,n){return st(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function co(t){if(t===null||Ct(t)||Yi(t))return 1;if(ch(t))return 2}function fh(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const a=t[s].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const Gy={name:"attention",resolveAll:d7,tokenize:h7};function d7(t,e){let n=-1,r,s,a,l,c,f,d,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},g={...t[n][1].start};_C(p,-f),_C(g,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},a={type:f>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:f>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},t[r][1].end={...l.start},t[n][1].start={...c.end},d=[],t[r][1].end.offset-t[r][1].start.offset&&(d=yr(d,[["enter",t[r][1],e],["exit",t[r][1],e]])),d=yr(d,[["enter",s,e],["enter",l,e],["exit",l,e],["enter",a,e]]),d=yr(d,fh(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),d=yr(d,[["exit",a,e],["enter",c,e],["exit",c,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,d=yr(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,tr(t,r-1,n-r+3,d),n=r+d.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function h7(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=co(r);let a;return l;function l(f){return a=f,t.enter("attentionSequence"),c(f)}function c(f){if(f===a)return t.consume(f),c;const d=t.exit("attentionSequence"),m=co(f),p=!m||m===2&&s||n.includes(f),g=!s||s===2&&m||n.includes(r);return d._open=!!(a===42?p:p&&(s||!g)),d._close=!!(a===42?g:g&&(m||!p)),e(f)}}function _C(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const p7={name:"autolink",tokenize:m7};function m7(t,e,n){let r=0;return s;function s(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(y){return Cn(y)?(t.consume(y),l):y===64?n(y):d(y)}function l(y){return y===43||y===45||y===46||gn(y)?(r=1,c(y)):d(y)}function c(y){return y===58?(t.consume(y),r=0,f):(y===43||y===45||y===46||gn(y))&&r++<32?(t.consume(y),c):(r=0,d(y))}function f(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||Od(y)?n(y):(t.consume(y),f)}function d(y){return y===64?(t.consume(y),m):s7(y)?(t.consume(y),d):n(y)}function m(y){return gn(y)?p(y):n(y)}function p(y){return y===46?(t.consume(y),r=0,m):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):g(y)}function g(y){if((y===45||gn(y))&&r++<63){const x=y===45?g:p;return t.consume(y),x}return n(y)}}const ju={partial:!0,tokenize:g7};function g7(t,e,n){return r;function r(a){return Ye(a)?st(t,s,"linePrefix")(a):s(a)}function s(a){return a===null||Me(a)?e(a):n(a)}}const oT={continuation:{tokenize:v7},exit:b7,name:"blockQuote",tokenize:y7};function y7(t,e,n){const r=this;return s;function s(l){if(l===62){const c=r.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return Ye(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function v7(t,e,n){const r=this;return s;function s(l){return Ye(l)?st(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(oT,e,n)(l)}}function b7(t){t.exit("blockQuote")}const lT={name:"characterEscape",tokenize:x7};function x7(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),s}function s(a){return a7(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const uT={name:"characterReference",tokenize:S7};function S7(t,e,n){const r=this;let s=0,a,l;return c;function c(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),f}function f(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),a=31,l=gn,m(p))}function d(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=i7,m):(t.enter("characterReferenceValue"),a=7,l=Ky,m(p))}function m(p){if(p===59&&s){const g=t.exit("characterReferenceValue");return l===gn&&!Sv(r.sliceSerialize(g))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(p)&&s++<a?(t.consume(p),m):n(p)}}const CC={partial:!0,tokenize:_7},EC={concrete:!0,name:"codeFenced",tokenize:w7};function w7(t,e,n){const r=this,s={partial:!0,tokenize:L};let a=0,l=0,c;return f;function f(A){return d(A)}function d(A){const I=r.events[r.events.length-1];return a=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,c=A,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(A)}function m(A){return A===c?(l++,t.consume(A),m):l<3?n(A):(t.exit("codeFencedFenceSequence"),Ye(A)?st(t,p,"whitespace")(A):p(A))}function p(A){return A===null||Me(A)?(t.exit("codeFencedFence"),r.interrupt?e(A):t.check(CC,S,N)(A)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(A))}function g(A){return A===null||Me(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(A)):Ye(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),st(t,y,"whitespace")(A)):A===96&&A===c?n(A):(t.consume(A),g)}function y(A){return A===null||Me(A)?p(A):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x(A))}function x(A){return A===null||Me(A)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(A)):A===96&&A===c?n(A):(t.consume(A),x)}function S(A){return t.attempt(s,N,E)(A)}function E(A){return t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),_}function _(A){return a>0&&Ye(A)?st(t,k,"linePrefix",a+1)(A):k(A)}function k(A){return A===null||Me(A)?t.check(CC,S,N)(A):(t.enter("codeFlowValue"),R(A))}function R(A){return A===null||Me(A)?(t.exit("codeFlowValue"),k(A)):(t.consume(A),R)}function N(A){return t.exit("codeFenced"),e(A)}function L(A,I,j){let P=0;return M;function M(V){return A.enter("lineEnding"),A.consume(V),A.exit("lineEnding"),B}function B(V){return A.enter("codeFencedFence"),Ye(V)?st(A,Q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(V):Q(V)}function Q(V){return V===c?(A.enter("codeFencedFenceSequence"),Z(V)):j(V)}function Z(V){return V===c?(P++,A.consume(V),Z):P>=l?(A.exit("codeFencedFenceSequence"),Ye(V)?st(A,te,"whitespace")(V):te(V)):j(V)}function te(V){return V===null||Me(V)?(A.exit("codeFencedFence"),I(V)):j(V)}}}function _7(t,e,n){const r=this;return s;function s(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const kg={name:"codeIndented",tokenize:E7},C7={partial:!0,tokenize:k7};function E7(t,e,n){const r=this;return s;function s(d){return t.enter("codeIndented"),st(t,a,"linePrefix",5)(d)}function a(d){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(d):n(d)}function l(d){return d===null?f(d):Me(d)?t.attempt(C7,l,f)(d):(t.enter("codeFlowValue"),c(d))}function c(d){return d===null||Me(d)?(t.exit("codeFlowValue"),l(d)):(t.consume(d),c)}function f(d){return t.exit("codeIndented"),e(d)}}function k7(t,e,n){const r=this;return s;function s(l){return r.parser.lazy[r.now().line]?n(l):Me(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):st(t,a,"linePrefix",5)(l)}function a(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):Me(l)?s(l):n(l)}}const R7={name:"codeText",previous:T7,resolve:A7,tokenize:O7};function A7(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function T7(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function O7(t,e,n){let r=0,s,a;return l;function l(p){return t.enter("codeText"),t.enter("codeTextSequence"),c(p)}function c(p){return p===96?(t.consume(p),r++,c):(t.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),f):p===96?(a=t.enter("codeTextSequence"),s=0,m(p)):Me(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),f):(t.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||Me(p)?(t.exit("codeTextData"),f(p)):(t.consume(p),d)}function m(p){return p===96?(t.consume(p),s++,m):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(a.type="codeTextData",d(p))}}class M7{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Al(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Al(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Al(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Al(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Al(this.left,n.reverse())}}}function Al(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function cT(t){const e={};let n=-1,r,s,a,l,c,f,d;const m=new M7(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,I7(m,n)),n=e[n],d=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(l=m.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(r[1].end={...m.get(s)[1].start},c=m.slice(s,n),c.unshift(r),m.splice(s,n-s+1,c))}}return tr(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function I7(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,f=[],d={};let m,p,g=-1,y=n,x=0,S=0;const E=[S];for(;y;){for(;t.get(++s)[1]!==y;);a.push(s),y._tokenizer||(m=r.sliceStream(y),y.next||m.push(null),p&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++g<c.length;)c[g][0]==="exit"&&c[g-1][0]==="enter"&&c[g][1].type===c[g-1][1].type&&c[g][1].start.line!==c[g][1].end.line&&(S=g+1,E.push(S),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):E.pop(),g=E.length;g--;){const _=c.slice(E[g],E[g+1]),k=a.pop();f.push([k,k+_.length-1]),t.splice(k,2,_)}for(f.reverse(),g=-1;++g<f.length;)d[x+f[g][0]]=x+f[g][1],x+=f[g][1]-f[g][0]-1;return d}const N7={resolve:z7,tokenize:j7},D7={partial:!0,tokenize:L7};function z7(t){return cT(t),t}function j7(t,e){let n;return r;function r(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(c)}function s(c){return c===null?a(c):Me(c)?t.check(D7,l,a)(c):(t.consume(c),s)}function a(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function l(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function L7(t,e,n){const r=this;return s;function s(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),st(t,a,"linePrefix")}function a(l){if(l===null||Me(l))return n(l);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function fT(t,e,n,r,s,a,l,c,f){const d=f||Number.POSITIVE_INFINITY;let m=0;return p;function p(_){return _===60?(t.enter(r),t.enter(s),t.enter(a),t.consume(_),t.exit(a),g):_===null||_===32||_===41||Od(_)?n(_):(t.enter(r),t.enter(l),t.enter(c),t.enter("chunkString",{contentType:"string"}),S(_))}function g(_){return _===62?(t.enter(a),t.consume(_),t.exit(a),t.exit(s),t.exit(r),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),y(_))}function y(_){return _===62?(t.exit("chunkString"),t.exit(c),g(_)):_===null||_===60||Me(_)?n(_):(t.consume(_),_===92?x:y)}function x(_){return _===60||_===62||_===92?(t.consume(_),y):y(_)}function S(_){return!m&&(_===null||_===41||Ct(_))?(t.exit("chunkString"),t.exit(c),t.exit(l),t.exit(r),e(_)):m<d&&_===40?(t.consume(_),m++,S):_===41?(t.consume(_),m--,S):_===null||_===32||_===40||Od(_)?n(_):(t.consume(_),_===92?E:S)}function E(_){return _===40||_===41||_===92?(t.consume(_),S):S(_)}}function dT(t,e,n,r,s,a){const l=this;let c=0,f;return d;function d(y){return t.enter(r),t.enter(s),t.consume(y),t.exit(s),t.enter(a),m}function m(y){return c>999||y===null||y===91||y===93&&!f||y===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(t.exit(a),t.enter(s),t.consume(y),t.exit(s),t.exit(r),e):Me(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||Me(y)||c++>999?(t.exit("chunkString"),m(y)):(t.consume(y),f||(f=!Ye(y)),y===92?g:p)}function g(y){return y===91||y===92||y===93?(t.consume(y),c++,p):p(y)}}function hT(t,e,n,r,s,a){let l;return c;function c(g){return g===34||g===39||g===40?(t.enter(r),t.enter(s),t.consume(g),t.exit(s),l=g===40?41:g,f):n(g)}function f(g){return g===l?(t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):(t.enter(a),d(g))}function d(g){return g===l?(t.exit(a),f(l)):g===null?n(g):Me(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),st(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===l||g===null||Me(g)?(t.exit("chunkString"),d(g)):(t.consume(g),g===92?p:m)}function p(g){return g===l||g===92?(t.consume(g),m):m(g)}}function au(t,e){let n;return r;function r(s){return Me(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):Ye(s)?st(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const P7={name:"definition",tokenize:$7},F7={partial:!0,tokenize:B7};function $7(t,e,n){const r=this;let s;return a;function a(y){return t.enter("definition"),l(y)}function l(y){return dT.call(r,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return s=Ir(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),f):n(y)}function f(y){return Ct(y)?au(t,d)(y):d(y)}function d(y){return fT(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function m(y){return t.attempt(F7,p,p)(y)}function p(y){return Ye(y)?st(t,g,"whitespace")(y):g(y)}function g(y){return y===null||Me(y)?(t.exit("definition"),r.parser.defined.push(s),e(y)):n(y)}}function B7(t,e,n){return r;function r(c){return Ct(c)?au(t,s)(c):n(c)}function s(c){return hT(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function a(c){return Ye(c)?st(t,l,"whitespace")(c):l(c)}function l(c){return c===null||Me(c)?e(c):n(c)}}const U7={name:"hardBreakEscape",tokenize:q7};function q7(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),s}function s(a){return Me(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const H7={name:"headingAtx",resolve:V7,tokenize:K7};function V7(t,e){let n=t.length-2,r=3,s,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},tr(t,r,n-r+1,[["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e]])),t}function K7(t,e,n){let r=0;return s;function s(m){return t.enter("atxHeading"),a(m)}function a(m){return t.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&r++<6?(t.consume(m),l):m===null||Ct(m)?(t.exit("atxHeadingSequence"),c(m)):n(m)}function c(m){return m===35?(t.enter("atxHeadingSequence"),f(m)):m===null||Me(m)?(t.exit("atxHeading"),e(m)):Ye(m)?st(t,c,"whitespace")(m):(t.enter("atxHeadingText"),d(m))}function f(m){return m===35?(t.consume(m),f):(t.exit("atxHeadingSequence"),c(m))}function d(m){return m===null||m===35||Ct(m)?(t.exit("atxHeadingText"),c(m)):(t.consume(m),d)}}const G7=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],kC=["pre","script","style","textarea"],Q7={concrete:!0,name:"htmlFlow",resolveTo:J7,tokenize:X7},Z7={partial:!0,tokenize:eH},Y7={partial:!0,tokenize:W7};function J7(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function X7(t,e,n){const r=this;let s,a,l,c,f;return d;function d(T){return m(T)}function m(T){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(T),p}function p(T){return T===33?(t.consume(T),g):T===47?(t.consume(T),a=!0,S):T===63?(t.consume(T),s=3,r.interrupt?e:z):Cn(T)?(t.consume(T),l=String.fromCharCode(T),E):n(T)}function g(T){return T===45?(t.consume(T),s=2,y):T===91?(t.consume(T),s=5,c=0,x):Cn(T)?(t.consume(T),s=4,r.interrupt?e:z):n(T)}function y(T){return T===45?(t.consume(T),r.interrupt?e:z):n(T)}function x(T){const K="CDATA[";return T===K.charCodeAt(c++)?(t.consume(T),c===K.length?r.interrupt?e:Q:x):n(T)}function S(T){return Cn(T)?(t.consume(T),l=String.fromCharCode(T),E):n(T)}function E(T){if(T===null||T===47||T===62||Ct(T)){const K=T===47,se=l.toLowerCase();return!K&&!a&&kC.includes(se)?(s=1,r.interrupt?e(T):Q(T)):G7.includes(l.toLowerCase())?(s=6,K?(t.consume(T),_):r.interrupt?e(T):Q(T)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(T):a?k(T):R(T))}return T===45||gn(T)?(t.consume(T),l+=String.fromCharCode(T),E):n(T)}function _(T){return T===62?(t.consume(T),r.interrupt?e:Q):n(T)}function k(T){return Ye(T)?(t.consume(T),k):M(T)}function R(T){return T===47?(t.consume(T),M):T===58||T===95||Cn(T)?(t.consume(T),N):Ye(T)?(t.consume(T),R):M(T)}function N(T){return T===45||T===46||T===58||T===95||gn(T)?(t.consume(T),N):L(T)}function L(T){return T===61?(t.consume(T),A):Ye(T)?(t.consume(T),L):R(T)}function A(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(t.consume(T),f=T,I):Ye(T)?(t.consume(T),A):j(T)}function I(T){return T===f?(t.consume(T),f=null,P):T===null||Me(T)?n(T):(t.consume(T),I)}function j(T){return T===null||T===34||T===39||T===47||T===60||T===61||T===62||T===96||Ct(T)?L(T):(t.consume(T),j)}function P(T){return T===47||T===62||Ye(T)?R(T):n(T)}function M(T){return T===62?(t.consume(T),B):n(T)}function B(T){return T===null||Me(T)?Q(T):Ye(T)?(t.consume(T),B):n(T)}function Q(T){return T===45&&s===2?(t.consume(T),F):T===60&&s===1?(t.consume(T),X):T===62&&s===4?(t.consume(T),D):T===63&&s===3?(t.consume(T),z):T===93&&s===5?(t.consume(T),ae):Me(T)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(Z7,$,Z)(T)):T===null||Me(T)?(t.exit("htmlFlowData"),Z(T)):(t.consume(T),Q)}function Z(T){return t.check(Y7,te,$)(T)}function te(T){return t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),V}function V(T){return T===null||Me(T)?Z(T):(t.enter("htmlFlowData"),Q(T))}function F(T){return T===45?(t.consume(T),z):Q(T)}function X(T){return T===47?(t.consume(T),l="",oe):Q(T)}function oe(T){if(T===62){const K=l.toLowerCase();return kC.includes(K)?(t.consume(T),D):Q(T)}return Cn(T)&&l.length<8?(t.consume(T),l+=String.fromCharCode(T),oe):Q(T)}function ae(T){return T===93?(t.consume(T),z):Q(T)}function z(T){return T===62?(t.consume(T),D):T===45&&s===2?(t.consume(T),z):Q(T)}function D(T){return T===null||Me(T)?(t.exit("htmlFlowData"),$(T)):(t.consume(T),D)}function $(T){return t.exit("htmlFlow"),e(T)}}function W7(t,e,n){const r=this;return s;function s(l){return Me(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function eH(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(ju,e,n)}}const tH={name:"htmlText",tokenize:nH};function nH(t,e,n){const r=this;let s,a,l;return c;function c(z){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(z),f}function f(z){return z===33?(t.consume(z),d):z===47?(t.consume(z),L):z===63?(t.consume(z),R):Cn(z)?(t.consume(z),j):n(z)}function d(z){return z===45?(t.consume(z),m):z===91?(t.consume(z),a=0,x):Cn(z)?(t.consume(z),k):n(z)}function m(z){return z===45?(t.consume(z),y):n(z)}function p(z){return z===null?n(z):z===45?(t.consume(z),g):Me(z)?(l=p,X(z)):(t.consume(z),p)}function g(z){return z===45?(t.consume(z),y):p(z)}function y(z){return z===62?F(z):z===45?g(z):p(z)}function x(z){const D="CDATA[";return z===D.charCodeAt(a++)?(t.consume(z),a===D.length?S:x):n(z)}function S(z){return z===null?n(z):z===93?(t.consume(z),E):Me(z)?(l=S,X(z)):(t.consume(z),S)}function E(z){return z===93?(t.consume(z),_):S(z)}function _(z){return z===62?F(z):z===93?(t.consume(z),_):S(z)}function k(z){return z===null||z===62?F(z):Me(z)?(l=k,X(z)):(t.consume(z),k)}function R(z){return z===null?n(z):z===63?(t.consume(z),N):Me(z)?(l=R,X(z)):(t.consume(z),R)}function N(z){return z===62?F(z):R(z)}function L(z){return Cn(z)?(t.consume(z),A):n(z)}function A(z){return z===45||gn(z)?(t.consume(z),A):I(z)}function I(z){return Me(z)?(l=I,X(z)):Ye(z)?(t.consume(z),I):F(z)}function j(z){return z===45||gn(z)?(t.consume(z),j):z===47||z===62||Ct(z)?P(z):n(z)}function P(z){return z===47?(t.consume(z),F):z===58||z===95||Cn(z)?(t.consume(z),M):Me(z)?(l=P,X(z)):Ye(z)?(t.consume(z),P):F(z)}function M(z){return z===45||z===46||z===58||z===95||gn(z)?(t.consume(z),M):B(z)}function B(z){return z===61?(t.consume(z),Q):Me(z)?(l=B,X(z)):Ye(z)?(t.consume(z),B):P(z)}function Q(z){return z===null||z===60||z===61||z===62||z===96?n(z):z===34||z===39?(t.consume(z),s=z,Z):Me(z)?(l=Q,X(z)):Ye(z)?(t.consume(z),Q):(t.consume(z),te)}function Z(z){return z===s?(t.consume(z),s=void 0,V):z===null?n(z):Me(z)?(l=Z,X(z)):(t.consume(z),Z)}function te(z){return z===null||z===34||z===39||z===60||z===61||z===96?n(z):z===47||z===62||Ct(z)?P(z):(t.consume(z),te)}function V(z){return z===47||z===62||Ct(z)?P(z):n(z)}function F(z){return z===62?(t.consume(z),t.exit("htmlTextData"),t.exit("htmlText"),e):n(z)}function X(z){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(z),t.exit("lineEnding"),oe}function oe(z){return Ye(z)?st(t,ae,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):ae(z)}function ae(z){return t.enter("htmlTextData"),l(z)}}const wv={name:"labelEnd",resolveAll:aH,resolveTo:oH,tokenize:lH},rH={tokenize:uH},sH={tokenize:cH},iH={tokenize:fH};function aH(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&tr(t,0,t.length,n),t}function oH(t,e){let n=t.length,r=0,s,a,l,c;for(;n--;)if(s=t[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(l=n);const f={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},m={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return c=[["enter",f,e],["enter",d,e]],c=yr(c,t.slice(a+1,a+r+3)),c=yr(c,[["enter",m,e]]),c=yr(c,fh(e.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),e)),c=yr(c,[["exit",m,e],t[l-2],t[l-1],["exit",d,e]]),c=yr(c,t.slice(l+1)),c=yr(c,[["exit",f,e]]),tr(t,a,t.length,c),t}function lH(t,e,n){const r=this;let s=r.events.length,a,l;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return c;function c(g){return a?a._inactive?p(g):(l=r.parser.defined.includes(Ir(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),f):n(g)}function f(g){return g===40?t.attempt(rH,m,l?m:p)(g):g===91?t.attempt(sH,m,l?d:p)(g):l?m(g):p(g)}function d(g){return t.attempt(iH,m,p)(g)}function m(g){return e(g)}function p(g){return a._balanced=!0,n(g)}}function uH(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),s}function s(p){return Ct(p)?au(t,a)(p):a(p)}function a(p){return p===41?m(p):fT(t,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return Ct(p)?au(t,f)(p):m(p)}function c(p){return n(p)}function f(p){return p===34||p===39||p===40?hT(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function d(p){return Ct(p)?au(t,m)(p):m(p)}function m(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function cH(t,e,n){const r=this;return s;function s(c){return dT.call(r,t,a,l,"reference","referenceMarker","referenceString")(c)}function a(c){return r.parser.defined.includes(Ir(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function l(c){return n(c)}}function fH(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),s}function s(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const dH={name:"labelStartImage",resolveAll:wv.resolveAll,tokenize:hH};function hH(t,e,n){const r=this;return s;function s(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),a}function a(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):e(c)}}const pH={name:"labelStartLink",resolveAll:wv.resolveAll,tokenize:mH};function mH(t,e,n){const r=this;return s;function s(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const Rg={name:"lineEnding",tokenize:gH};function gH(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),st(t,e,"linePrefix")}}const Kf={name:"thematicBreak",tokenize:yH};function yH(t,e,n){let r=0,s;return a;function a(d){return t.enter("thematicBreak"),l(d)}function l(d){return s=d,c(d)}function c(d){return d===s?(t.enter("thematicBreakSequence"),f(d)):r>=3&&(d===null||Me(d))?(t.exit("thematicBreak"),e(d)):n(d)}function f(d){return d===s?(t.consume(d),r++,f):(t.exit("thematicBreakSequence"),Ye(d)?st(t,c,"whitespace")(d):c(d))}}const Dn={continuation:{tokenize:SH},exit:_H,name:"list",tokenize:xH},vH={partial:!0,tokenize:CH},bH={partial:!0,tokenize:wH};function xH(t,e,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return c;function c(y){const x=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:Ky(y)){if(r.containerState.type||(r.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(Kf,n,d)(y):d(y);if(!r.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(y)}return n(y)}function f(y){return Ky(y)&&++l<10?(t.consume(y),f):(!r.interrupt||l<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),d(y)):n(y)}function d(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,t.check(ju,r.interrupt?n:m,t.attempt(vH,g,p))}function m(y){return r.containerState.initialBlankLine=!0,a++,g(y)}function p(y){return Ye(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),g):n(y)}function g(y){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function SH(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(ju,s,a);function s(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,st(t,e,"listItemIndent",r.containerState.size+1)(c)}function a(c){return r.containerState.furtherBlankLines||!Ye(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(bH,e,l)(c))}function l(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,st(t,t.attempt(Dn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function wH(t,e,n){const r=this;return st(t,s,"listItemIndent",r.containerState.size+1);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(a):n(a)}}function _H(t){t.exit(this.containerState.type)}function CH(t,e,n){const r=this;return st(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const l=r.events[r.events.length-1];return!Ye(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const RC={name:"setextUnderline",resolveTo:EH,tokenize:kH};function EH(t,e){let n=t.length,r,s,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",a?(t.splice(s,0,["enter",l,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function kH(t,e,n){const r=this;let s;return a;function a(d){let m=r.events.length,p;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){p=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),s=d,l(d)):n(d)}function l(d){return t.enter("setextHeadingLineSequence"),c(d)}function c(d){return d===s?(t.consume(d),c):(t.exit("setextHeadingLineSequence"),Ye(d)?st(t,f,"lineSuffix")(d):f(d))}function f(d){return d===null||Me(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const RH={tokenize:AH};function AH(t){const e=this,n=t.attempt(ju,r,t.attempt(this.parser.constructs.flowInitial,s,st(t,t.attempt(this.parser.constructs.flow,s,t.attempt(N7,s)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const TH={resolveAll:mT()},OH=pT("string"),MH=pT("text");function pT(t){return{resolveAll:mT(t==="text"?IH:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],a=n.attempt(s,l,c);return l;function l(m){return d(m)?a(m):c(m)}function c(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),f}function f(m){return d(m)?(n.exit("data"),a(m)):(n.consume(m),f)}function d(m){if(m===null)return!0;const p=s[m];let g=-1;if(p)for(;++g<p.length;){const y=p[g];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function mT(t){return e;function e(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return t?t(n,r):n}}function IH(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let a=s.length,l=-1,c=0,f;for(;a--;){const d=s[a];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(d===-2)f=!0,c++;else if(d!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const d={type:n===t.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const NH={42:Dn,43:Dn,45:Dn,48:Dn,49:Dn,50:Dn,51:Dn,52:Dn,53:Dn,54:Dn,55:Dn,56:Dn,57:Dn,62:oT},DH={91:P7},zH={[-2]:kg,[-1]:kg,32:kg},jH={35:H7,42:Kf,45:[RC,Kf],60:Q7,61:RC,95:Kf,96:EC,126:EC},LH={38:uT,92:lT},PH={[-5]:Rg,[-4]:Rg,[-3]:Rg,33:dH,38:uT,42:Gy,60:[p7,tH],91:pH,92:[U7,lT],93:wv,95:Gy,96:R7},FH={null:[Gy,TH]},$H={null:[42,95]},BH={null:[]},UH=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:$H,contentInitial:DH,disable:BH,document:NH,flow:jH,flowInitial:zH,insideSpan:FH,string:LH,text:PH},Symbol.toStringTag,{value:"Module"}));function qH(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let l=[],c=[];const f={attempt:I(L),check:I(A),consume:k,enter:R,exit:N,interrupt:I(A,{interrupt:!0})},d={code:null,containerState:{},defineSkip:S,events:[],now:x,parser:t,previous:null,sliceSerialize:g,sliceStream:y,write:p};let m=e.tokenize.call(d,f);return e.resolveAll&&a.push(e),d;function p(B){return l=yr(l,B),E(),l[l.length-1]!==null?[]:(j(e,0),d.events=fh(a,d.events,d),d.events)}function g(B,Q){return VH(y(B),Q)}function y(B){return HH(l,B)}function x(){const{_bufferIndex:B,_index:Q,line:Z,column:te,offset:V}=r;return{_bufferIndex:B,_index:Q,line:Z,column:te,offset:V}}function S(B){s[B.line]=B.column,M()}function E(){let B;for(;r._index<l.length;){const Q=l[r._index];if(typeof Q=="string")for(B=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===B&&r._bufferIndex<Q.length;)_(Q.charCodeAt(r._bufferIndex));else _(Q)}}function _(B){m=m(B)}function k(B){Me(B)?(r.line++,r.column=1,r.offset+=B===-3?2:1,M()):B!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=B}function R(B,Q){const Z=Q||{};return Z.type=B,Z.start=x(),d.events.push(["enter",Z,d]),c.push(Z),Z}function N(B){const Q=c.pop();return Q.end=x(),d.events.push(["exit",Q,d]),Q}function L(B,Q){j(B,Q.from)}function A(B,Q){Q.restore()}function I(B,Q){return Z;function Z(te,V,F){let X,oe,ae,z;return Array.isArray(te)?$(te):"tokenize"in te?$([te]):D(te);function D(ce){return ye;function ye(ke){const ve=ke!==null&&ce[ke],Ue=ke!==null&&ce.null,Fe=[...Array.isArray(ve)?ve:ve?[ve]:[],...Array.isArray(Ue)?Ue:Ue?[Ue]:[]];return $(Fe)(ke)}}function $(ce){return X=ce,oe=0,ce.length===0?F:T(ce[oe])}function T(ce){return ye;function ye(ke){return z=P(),ae=ce,ce.partial||(d.currentConstruct=ce),ce.name&&d.parser.constructs.disable.null.includes(ce.name)?se():ce.tokenize.call(Q?Object.assign(Object.create(d),Q):d,f,K,se)(ke)}}function K(ce){return B(ae,z),V}function se(ce){return z.restore(),++oe<X.length?T(X[oe]):F}}}function j(B,Q){B.resolveAll&&!a.includes(B)&&a.push(B),B.resolve&&tr(d.events,Q,d.events.length-Q,B.resolve(d.events.slice(Q),d)),B.resolveTo&&(d.events=B.resolveTo(d.events,d))}function P(){const B=x(),Q=d.previous,Z=d.currentConstruct,te=d.events.length,V=Array.from(c);return{from:te,restore:F};function F(){r=B,d.previous=Q,d.currentConstruct=Z,d.events.length=te,c=V,M()}}function M(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function HH(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,a=e.end._bufferIndex;let l;if(n===s)l=[t[n].slice(r,a)];else{if(l=t.slice(n,s),r>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(r):l.shift()}a>0&&l.push(t[s].slice(0,a))}return l}function VH(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&s)continue;l=" ";break}default:l=String.fromCharCode(a)}s=a===-2,r.push(l)}return r.join("")}function KH(t){const r={constructs:iT([UH,...(t||{}).extensions||[]]),content:s(o7),defined:[],document:s(u7),flow:s(RH),lazy:{},string:s(OH),text:s(MH)};return r;function s(a){return l;function l(c){return qH(r,a,c)}}}function GH(t){for(;!cT(t););return t}const AC=/[\0\t\n\r]/g;function QH(){let t=1,e="",n=!0,r;return s;function s(a,l,c){const f=[];let d,m,p,g,y;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),p=0,e="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(AC.lastIndex=p,d=AC.exec(a),g=d&&d.index!==void 0?d.index:a.length,y=a.charCodeAt(g),!d){e=a.slice(p);break}if(y===10&&p===g&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),p<g&&(f.push(a.slice(p,g)),t+=g-p),y){case 0:{f.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,f.push(-2);t++<m;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:r=!0,t=1}p=g+1}return c&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const ZH=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function YH(t){return t.replace(ZH,JH)}function JH(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return aT(n.slice(a?2:1),a?16:10)}return Sv(n)||t}const gT={}.hasOwnProperty;function XH(t,e,n){return typeof e!="string"&&(n=e,e=void 0),WH(n)(GH(KH(n).document().write(QH()(t,e,!0))))}function WH(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(ft),autolinkProtocol:P,autolinkEmail:P,atxHeading:a(it),blockQuote:a(Ue),characterEscape:P,characterReference:P,codeFenced:a(Fe),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(Fe,l),codeText:a(Ge,l),codeTextData:P,data:P,codeFlowValue:P,definition:a(yt),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(lt),hardBreakEscape:a(ht),hardBreakTrailing:a(ht),htmlFlow:a(Xe,l),htmlFlowData:P,htmlText:a(Xe,l),htmlTextData:P,image:a(rt),label:l,link:a(ft),listItem:a(me),listItemValue:g,listOrdered:a(Ae,p),listUnordered:a(Ae),paragraph:a(Ne),reference:T,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(it),strong:a(be),thematicBreak:a($e)},exit:{atxHeading:f(),atxHeadingSequence:L,autolink:f(),autolinkEmail:ve,autolinkProtocol:ke,blockQuote:f(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:se,characterReferenceMarkerNumeric:se,characterReferenceValue:ce,characterReference:ye,codeFenced:f(E),codeFencedFence:S,codeFencedFenceInfo:y,codeFencedFenceMeta:x,codeFlowValue:M,codeIndented:f(_),codeText:f(V),codeTextData:M,data:M,definition:f(),definitionDestinationString:N,definitionLabelString:k,definitionTitleString:R,emphasis:f(),hardBreakEscape:f(Q),hardBreakTrailing:f(Q),htmlFlow:f(Z),htmlFlowData:M,htmlText:f(te),htmlTextData:M,image:f(X),label:ae,labelText:oe,lineEnding:B,link:f(F),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:K,resourceDestinationString:z,resourceTitleString:D,resource:$,setextHeading:f(j),setextHeadingLineSequence:I,setextHeadingText:A,strong:f(),thematicBreak:f()}};yT(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ne){let de={type:"root",children:[]};const _e={stack:[de],tokenStack:[],config:e,enter:c,exit:d,buffer:l,resume:m,data:n},Ce=[];let xe=-1;for(;++xe<ne.length;)if(ne[xe][1].type==="listOrdered"||ne[xe][1].type==="listUnordered")if(ne[xe][0]==="enter")Ce.push(xe);else{const Pe=Ce.pop();xe=s(ne,Pe,xe)}for(xe=-1;++xe<ne.length;){const Pe=e[ne[xe][0]];gT.call(Pe,ne[xe][1].type)&&Pe[ne[xe][1].type].call(Object.assign({sliceSerialize:ne[xe][2].sliceSerialize},_e),ne[xe][1])}if(_e.tokenStack.length>0){const Pe=_e.tokenStack[_e.tokenStack.length-1];(Pe[1]||TC).call(_e,void 0,Pe[0])}for(de.position={start:Qs(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:Qs(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},xe=-1;++xe<e.transforms.length;)de=e.transforms[xe](de)||de;return de}function s(ne,de,_e){let Ce=de-1,xe=-1,Pe=!1,vt,at,ot,kn;for(;++Ce<=_e;){const wt=ne[Ce];switch(wt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{wt[0]==="enter"?xe++:xe--,kn=void 0;break}case"lineEndingBlank":{wt[0]==="enter"&&(vt&&!kn&&!xe&&!ot&&(ot=Ce),kn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:kn=void 0}if(!xe&&wt[0]==="enter"&&wt[1].type==="listItemPrefix"||xe===-1&&wt[0]==="exit"&&(wt[1].type==="listUnordered"||wt[1].type==="listOrdered")){if(vt){let xs=Ce;for(at=void 0;xs--;){const _r=ne[xs];if(_r[1].type==="lineEnding"||_r[1].type==="lineEndingBlank"){if(_r[0]==="exit")continue;at&&(ne[at][1].type="lineEndingBlank",Pe=!0),_r[1].type="lineEnding",at=xs}else if(!(_r[1].type==="linePrefix"||_r[1].type==="blockQuotePrefix"||_r[1].type==="blockQuotePrefixWhitespace"||_r[1].type==="blockQuoteMarker"||_r[1].type==="listItemIndent"))break}ot&&(!at||ot<at)&&(vt._spread=!0),vt.end=Object.assign({},at?ne[at][1].start:wt[1].end),ne.splice(at||Ce,0,["exit",vt,wt[2]]),Ce++,_e++}if(wt[1].type==="listItemPrefix"){const xs={type:"listItem",_spread:!1,start:Object.assign({},wt[1].start),end:void 0};vt=xs,ne.splice(Ce,0,["enter",xs,wt[2]]),Ce++,_e++,ot=void 0,kn=!0}}}return ne[de][1]._spread=Pe,_e}function a(ne,de){return _e;function _e(Ce){c.call(this,ne(Ce),Ce),de&&de.call(this,Ce)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(ne,de,_e){this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([de,_e||void 0]),ne.position={start:Qs(de.start),end:void 0}}function f(ne){return de;function de(_e){ne&&ne.call(this,_e),d.call(this,_e)}}function d(ne,de){const _e=this.stack.pop(),Ce=this.tokenStack.pop();if(Ce)Ce[0].type!==ne.type&&(de?de.call(this,ne,Ce[0]):(Ce[1]||TC).call(this,ne,Ce[0]));else throw new Error("Cannot close `"+ne.type+"` ("+iu({start:ne.start,end:ne.end})+"): its not open");_e.position.end=Qs(ne.end)}function m(){return xv(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(ne){if(this.data.expectingFirstListItemValue){const de=this.stack[this.stack.length-2];de.start=Number.parseInt(this.sliceSerialize(ne),10),this.data.expectingFirstListItemValue=void 0}}function y(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.lang=ne}function x(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.meta=ne}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.value=ne.replace(/(\r?\n|\r)$/g,"")}function k(ne){const de=this.resume(),_e=this.stack[this.stack.length-1];_e.label=de,_e.identifier=Ir(this.sliceSerialize(ne)).toLowerCase()}function R(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.title=ne}function N(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.url=ne}function L(ne){const de=this.stack[this.stack.length-1];if(!de.depth){const _e=this.sliceSerialize(ne).length;de.depth=_e}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function I(ne){const de=this.stack[this.stack.length-1];de.depth=this.sliceSerialize(ne).codePointAt(0)===61?1:2}function j(){this.data.setextHeadingSlurpLineEnding=void 0}function P(ne){const _e=this.stack[this.stack.length-1].children;let Ce=_e[_e.length-1];(!Ce||Ce.type!=="text")&&(Ce=ge(),Ce.position={start:Qs(ne.start),end:void 0},_e.push(Ce)),this.stack.push(Ce)}function M(ne){const de=this.stack.pop();de.value+=this.sliceSerialize(ne),de.position.end=Qs(ne.end)}function B(ne){const de=this.stack[this.stack.length-1];if(this.data.atHardBreak){const _e=de.children[de.children.length-1];_e.position.end=Qs(ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(de.type)&&(P.call(this,ne),M.call(this,ne))}function Q(){this.data.atHardBreak=!0}function Z(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.value=ne}function te(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.value=ne}function V(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.value=ne}function F(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const de=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=de,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function X(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const de=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=de,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function oe(ne){const de=this.sliceSerialize(ne),_e=this.stack[this.stack.length-2];_e.label=YH(de),_e.identifier=Ir(de).toLowerCase()}function ae(){const ne=this.stack[this.stack.length-1],de=this.resume(),_e=this.stack[this.stack.length-1];if(this.data.inReference=!0,_e.type==="link"){const Ce=ne.children;_e.children=Ce}else _e.alt=de}function z(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.url=ne}function D(){const ne=this.resume(),de=this.stack[this.stack.length-1];de.title=ne}function $(){this.data.inReference=void 0}function T(){this.data.referenceType="collapsed"}function K(ne){const de=this.resume(),_e=this.stack[this.stack.length-1];_e.label=de,_e.identifier=Ir(this.sliceSerialize(ne)).toLowerCase(),this.data.referenceType="full"}function se(ne){this.data.characterReferenceType=ne.type}function ce(ne){const de=this.sliceSerialize(ne),_e=this.data.characterReferenceType;let Ce;_e?(Ce=aT(de,_e==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ce=Sv(de);const xe=this.stack[this.stack.length-1];xe.value+=Ce}function ye(ne){const de=this.stack.pop();de.position.end=Qs(ne.end)}function ke(ne){M.call(this,ne);const de=this.stack[this.stack.length-1];de.url=this.sliceSerialize(ne)}function ve(ne){M.call(this,ne);const de=this.stack[this.stack.length-1];de.url="mailto:"+this.sliceSerialize(ne)}function Ue(){return{type:"blockquote",children:[]}}function Fe(){return{type:"code",lang:null,meta:null,value:""}}function Ge(){return{type:"inlineCode",value:""}}function yt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function lt(){return{type:"emphasis",children:[]}}function it(){return{type:"heading",depth:0,children:[]}}function ht(){return{type:"break"}}function Xe(){return{type:"html",value:""}}function rt(){return{type:"image",title:null,url:"",alt:null}}function ft(){return{type:"link",title:null,url:"",children:[]}}function Ae(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function me(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function Ne(){return{type:"paragraph",children:[]}}function be(){return{type:"strong",children:[]}}function ge(){return{type:"text",value:""}}function $e(){return{type:"thematicBreak"}}}function Qs(t){return{line:t.line,column:t.column,offset:t.offset}}function yT(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?yT(t,r):eV(t,r)}}function eV(t,e){let n;for(n in e)if(gT.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function TC(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+iu({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+iu({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+iu({start:e.start,end:e.end})+") is still open")}function tV(t){const e=this;e.parser=n;function n(r){return XH(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function nV(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function rV(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function sV(t,e){const n=e.value?e.value+`
`:"",r={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function iV(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function aV(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function oV(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=Eo(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,c=t.footnoteCounts.get(r);c===void 0?(c=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,c+=1,t.footnoteCounts.set(r,c);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,f);const d={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,d),t.applyData(e,d)}function lV(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function uV(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function vT(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=r:s.push({type:"text",value:r}),s}function cV(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return vT(t,e);const s={src:Eo(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,a),t.applyData(e,a)}function fV(t,e){const n={src:Eo(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function dV(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function hV(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return vT(t,e);const s={href:Eo(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function pV(t,e){const n={href:Eo(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function mV(t,e,n){const r=t.all(e),s=n?gV(n):bT(e),a={},l=[];if(typeof e.checked=="boolean"){const m=r[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const m=r[c];(s||c!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?l.push(...m.children):l.push(m)}const f=r[r.length-1];f&&(s||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,d),t.applyData(e,d)}function gV(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=bT(n[r])}return e}function bT(t){const e=t.spread;return e??t.children.length>1}function yV(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const l=r[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function vV(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function bV(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function xV(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function SV(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=gv(e.children[1]),f=XA(e.children[e.children.length-1]);c&&f&&(l.position={start:c,end:f}),s.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function wV(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,c=l?l.length:e.children.length;let f=-1;const d=[];for(;++f<c;){const p=e.children[f],g={},y=l?l[f]:void 0;y&&(g.align=y);let x={type:"element",tagName:a,properties:g,children:[]};p&&(x.children=t.all(p),t.patch(p,x),x=t.applyData(p,x)),d.push(x)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,m),t.applyData(e,m)}function _V(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const OC=9,MC=32;function CV(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const a=[];for(;r;)a.push(IC(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return a.push(IC(e.slice(s),s>0,!1)),a.join("")}function IC(t,e,n){let r=0,s=t.length;if(e){let a=t.codePointAt(r);for(;a===OC||a===MC;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(s-1);for(;a===OC||a===MC;)s--,a=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function EV(t,e){const n={type:"text",value:CV(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function kV(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const RV={blockquote:nV,break:rV,code:sV,delete:iV,emphasis:aV,footnoteReference:oV,heading:lV,html:uV,imageReference:cV,image:fV,inlineCode:dV,linkReference:hV,link:pV,listItem:mV,list:yV,paragraph:vV,root:bV,strong:xV,table:SV,tableCell:_V,tableRow:wV,text:EV,thematicBreak:kV,toml:Rf,yaml:Rf,definition:Rf,footnoteDefinition:Rf};function Rf(){}const xT=-1,dh=0,ou=1,Md=2,_v=3,Cv=4,Ev=5,kv=6,ST=7,wT=8,NC=typeof self=="object"?self:globalThis,AV=(t,e)=>{const n=(s,a)=>(t.set(a,s),s),r=s=>{if(t.has(s))return t.get(s);const[a,l]=e[s];switch(a){case dh:case xT:return n(l,s);case ou:{const c=n([],s);for(const f of l)c.push(r(f));return c}case Md:{const c=n({},s);for(const[f,d]of l)c[r(f)]=r(d);return c}case _v:return n(new Date(l),s);case Cv:{const{source:c,flags:f}=l;return n(new RegExp(c,f),s)}case Ev:{const c=n(new Map,s);for(const[f,d]of l)c.set(r(f),r(d));return c}case kv:{const c=n(new Set,s);for(const f of l)c.add(r(f));return c}case ST:{const{name:c,message:f}=l;return n(new NC[c](f),s)}case wT:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:c}=new Uint8Array(l);return n(new DataView(c),l)}}return n(new NC[a](l),s)};return r},DC=t=>AV(new Map,t)(0),qa="",{toString:TV}={},{keys:OV}=Object,Tl=t=>{const e=typeof t;if(e!=="object"||!t)return[dh,e];const n=TV.call(t).slice(8,-1);switch(n){case"Array":return[ou,qa];case"Object":return[Md,qa];case"Date":return[_v,qa];case"RegExp":return[Cv,qa];case"Map":return[Ev,qa];case"Set":return[kv,qa];case"DataView":return[ou,n]}return n.includes("Array")?[ou,n]:n.includes("Error")?[ST,n]:[Md,n]},Af=([t,e])=>t===dh&&(e==="function"||e==="symbol"),MV=(t,e,n,r)=>{const s=(l,c)=>{const f=r.push(l)-1;return n.set(c,f),f},a=l=>{if(n.has(l))return n.get(l);let[c,f]=Tl(l);switch(c){case dh:{let m=l;switch(f){case"bigint":c=wT,m=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);m=null;break;case"undefined":return s([xT],l)}return s([c,m],l)}case ou:{if(f){let g=l;return f==="DataView"?g=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(g=new Uint8Array(l)),s([f,[...g]],l)}const m=[],p=s([c,m],l);for(const g of l)m.push(a(g));return p}case Md:{if(f)switch(f){case"BigInt":return s([f,l.toString()],l);case"Boolean":case"Number":case"String":return s([f,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const m=[],p=s([c,m],l);for(const g of OV(l))(t||!Af(Tl(l[g])))&&m.push([a(g),a(l[g])]);return p}case _v:return s([c,l.toISOString()],l);case Cv:{const{source:m,flags:p}=l;return s([c,{source:m,flags:p}],l)}case Ev:{const m=[],p=s([c,m],l);for(const[g,y]of l)(t||!(Af(Tl(g))||Af(Tl(y))))&&m.push([a(g),a(y)]);return p}case kv:{const m=[],p=s([c,m],l);for(const g of l)(t||!Af(Tl(g)))&&m.push(a(g));return p}}const{message:d}=l;return s([c,{name:f,message:d}],l)};return a},zC=(t,{json:e,lossy:n}={})=>{const r=[];return MV(!(e||n),!!e,new Map,r)(t),r},Id=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?DC(zC(t,e)):structuredClone(t):(t,e)=>DC(zC(t,e));function IV(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function NV(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function DV(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||IV,r=t.options.footnoteBackLabel||NV,s=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let f=-1;for(;++f<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[f]);if(!d)continue;const m=t.all(d),p=String(d.identifier).toUpperCase(),g=Eo(p.toLowerCase());let y=0;const x=[],S=t.footnoteCounts.get(p);for(;S!==void 0&&++y<=S;){x.length>0&&x.push({type:"text",value:" "});let k=typeof n=="string"?n:n(f,y);typeof k=="string"&&(k={type:"text",value:k}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,y),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const E=m[m.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const k=E.children[E.children.length-1];k&&k.type==="text"?k.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...x)}else m.push(...x);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(m,!0)};t.patch(d,_),c.push(_)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Id(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const hh=(function(t){if(t==null)return PV;if(typeof t=="function")return ph(t);if(typeof t=="object")return Array.isArray(t)?zV(t):jV(t);if(typeof t=="string")return LV(t);throw new Error("Expected function, string, or object as test")});function zV(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=hh(t[n]);return ph(r);function r(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function jV(t){const e=t;return ph(n);function n(r){const s=r;let a;for(a in t)if(s[a]!==e[a])return!1;return!0}}function LV(t){return ph(e);function e(n){return n&&n.type===t}}function ph(t){return e;function e(n,r,s){return!!(FV(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function PV(){return!0}function FV(t){return t!==null&&typeof t=="object"&&"type"in t}const _T=[],$V=!0,Qy=!1,BV="skip";function CT(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const a=hh(s),l=r?-1:1;c(t,void 0,[])();function c(f,d,m){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(f.type+(y?"<"+y+">":""))+")"})}return g;function g(){let y=_T,x,S,E;if((!e||a(f,d,m[m.length-1]||void 0))&&(y=UV(n(f,m)),y[0]===Qy))return y;if("children"in f&&f.children){const _=f;if(_.children&&y[0]!==BV)for(S=(r?_.children.length:-1)+l,E=m.concat(_);S>-1&&S<_.children.length;){const k=_.children[S];if(x=c(k,S,E)(),x[0]===Qy)return x;S=typeof x[1]=="number"?x[1]:S+l}}return y}}}function UV(t){return Array.isArray(t)?t:typeof t=="number"?[$V,t]:t==null?_T:[t]}function Rv(t,e,n,r){let s,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,s=n):(a=e,l=n,s=r),CT(t,a,c,s);function c(f,d){const m=d[d.length-1],p=m?m.children.indexOf(f):void 0;return l(f,p,m)}}const Zy={}.hasOwnProperty,qV={};function HV(t,e){const n=e||qV,r=new Map,s=new Map,a=new Map,l={...RV,...n.handlers},c={all:d,applyData:KV,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:l,one:f,options:n,patch:VV,wrap:QV};return Rv(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?r:s,g=String(m.identifier).toUpperCase();p.has(g)||p.set(g,m)}}),c;function f(m,p){const g=m.type,y=c.handlers[g];if(Zy.call(c.handlers,g)&&y)return y(c,m,p);if(c.options.passThrough&&c.options.passThrough.includes(g)){if("children"in m){const{children:S,...E}=m,_=Id(E);return _.children=c.all(m),_}return Id(m)}return(c.options.unknownHandler||GV)(c,m,p)}function d(m){const p=[];if("children"in m){const g=m.children;let y=-1;for(;++y<g.length;){const x=c.one(g[y],m);if(x){if(y&&g[y-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=jC(x.value)),!Array.isArray(x)&&x.type==="element")){const S=x.children[0];S&&S.type==="text"&&(S.value=jC(S.value))}Array.isArray(x)?p.push(...x):p.push(x)}}}return p}}function VV(t,e){t.position&&(e.position=Nq(t))}function KV(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,Id(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function GV(t,e){const n=e.data||{},r="value"in e&&!(Zy.call(n,"hProperties")||Zy.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function QV(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function jC(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function LC(t,e){const n=HV(t,e),r=n.one(t,void 0),s=DV(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function ZV(t,e){return t&&"run"in t?async function(n,r){const s=LC(n,{file:r,...e});await t.run(s,r)}:function(n,r){return LC(n,{file:r,...t||e})}}function PC(t){if(t)throw t}var Ag,FC;function YV(){if(FC)return Ag;FC=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},a=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var m=t.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!p)return!1;var g;for(g in d);return typeof g>"u"||t.call(d,g)},l=function(d,m){n&&m.name==="__proto__"?n(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},c=function(d,m){if(m==="__proto__")if(t.call(d,m)){if(r)return r(d,m).value}else return;return d[m]};return Ag=function f(){var d,m,p,g,y,x,S=arguments[0],E=1,_=arguments.length,k=!1;for(typeof S=="boolean"&&(k=S,S=arguments[1]||{},E=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});E<_;++E)if(d=arguments[E],d!=null)for(m in d)p=c(S,m),g=c(d,m),S!==g&&(k&&g&&(a(g)||(y=s(g)))?(y?(y=!1,x=p&&s(p)?p:[]):x=p&&a(p)?p:{},l(S,{name:m,newValue:f(k,x,g)})):typeof g<"u"&&l(S,{name:m,newValue:g}));return S},Ag}var JV=YV();const Tg=Wy(JV);function Yy(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function XV(){const t=[],e={run:n,use:r};return e;function n(...s){let a=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...s);function c(f,...d){const m=t[++a];let p=-1;if(f){l(f);return}for(;++p<s.length;)(d[p]===null||d[p]===void 0)&&(d[p]=s[p]);s=d,m?WV(m,c)(...d):l(null,...d)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function WV(t,e){let n;return r;function r(...l){const c=t.length>l.length;let f;c&&l.push(s);try{f=t.apply(this,l)}catch(d){const m=d;if(c&&n)throw m;return s(m)}c||(f&&f.then&&typeof f.then=="function"?f.then(a,s):f instanceof Error?s(f):a(f))}function s(l,...c){n||(n=!0,e(l,...c))}function a(l){s(null,l)}}const Pr={basename:eK,dirname:tK,extname:nK,join:rK,sep:"/"};function eK(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Lu(t);let n=0,r=-1,s=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,c=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else l<0&&(a=!0,l=s+1),c>-1&&(t.codePointAt(s)===e.codePointAt(c--)?c<0&&(r=s):(c=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function tK(t){if(Lu(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function nK(t){Lu(t);let e=t.length,n=-1,r=0,s=-1,a=0,l;for(;e--;){const c=t.codePointAt(e);if(c===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),c===46?s<0?s=e:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function rK(...t){let e=-1,n;for(;++e<t.length;)Lu(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":sK(n)}function sK(t){Lu(t);const e=t.codePointAt(0)===47;let n=iK(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function iK(t,e){let n="",r=0,s=-1,a=0,l=-1,c,f;for(;++l<=t.length;){if(l<t.length)c=t.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),s=l,a=0;continue}}else if(n.length>0){n="",r=0,s=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),r=l-s-1;s=l,a=0}else c===46&&a>-1?a++:a=-1}return n}function Lu(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const aK={cwd:oK};function oK(){return"/"}function Jy(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function lK(t){if(typeof t=="string")t=new URL(t);else if(!Jy(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return uK(t)}function uK(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Og=["history","path","basename","stem","extname","dirname"];class ET{constructor(e){let n;e?Jy(e)?n={path:e}:typeof e=="string"||cK(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":aK.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Og.length;){const a=Og[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)Og.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Pr.basename(this.path):void 0}set basename(e){Ig(e,"basename"),Mg(e,"basename"),this.path=Pr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Pr.dirname(this.path):void 0}set dirname(e){$C(this.basename,"dirname"),this.path=Pr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Pr.extname(this.path):void 0}set extname(e){if(Mg(e,"extname"),$C(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Pr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Jy(e)&&(e=lK(e)),Ig(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Pr.basename(this.path,this.extname):void 0}set stem(e){Ig(e,"stem"),Mg(e,"stem"),this.path=Pr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new yn(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Mg(t,e){if(t&&t.includes(Pr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Pr.sep+"`")}function Ig(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function $C(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function cK(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const fK=(function(t){const r=this.constructor.prototype,s=r[t],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),dK={}.hasOwnProperty;class Av extends fK{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=XV()}copy(){const e=new Av;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Tg(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(zg("data",this.frozen),this.namespace[e]=n,this):dK.call(this.namespace,e)&&this.namespace[e]||void 0:e?(zg("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Tf(e),r=this.parser||this.Parser;return Ng("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Ng("process",this.parser||this.Parser),Dg("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,l){const c=Tf(e),f=r.parse(c);r.run(f,c,function(m,p,g){if(m||!p||!g)return d(m);const y=p,x=r.stringify(y,g);mK(x)?g.value=x:g.result=x,d(m,g)});function d(m,p){m||!p?l(m):a?a(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),Ng("processSync",this.parser||this.Parser),Dg("processSync",this.compiler||this.Compiler),this.process(e,s),UC("processSync","process",n),r;function s(a,l){n=!0,PC(a),r=l}}run(e,n,r){BC(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,c){const f=Tf(n);s.run(e,f,d);function d(m,p,g){const y=p||e;m?c(m):l?l(y):r(void 0,y,g)}}}runSync(e,n){let r=!1,s;return this.run(e,n,a),UC("runSync","run",r),s;function a(l,c){PC(l),s=c,r=!0}}stringify(e,n){this.freeze();const r=Tf(n),s=this.compiler||this.Compiler;return Dg("stringify",s),BC(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(zg("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...p]=d;f(m,p)}else l(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function l(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(d.plugins),d.settings&&(s.settings=Tg(!0,s.settings,d.settings))}function c(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const p=d[m];a(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,m){let p=-1,g=-1;for(;++p<r.length;)if(r[p][0]===d){g=p;break}if(g===-1)r.push([d,...m]);else if(m.length>0){let[y,...x]=m;const S=r[g][1];Yy(S)&&Yy(y)&&(y=Tg(!0,S,y)),r[g]=[d,y,...x]}}}}const hK=new Av().freeze();function Ng(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Dg(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function zg(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function BC(t){if(!Yy(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function UC(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Tf(t){return pK(t)?t:new ET(t)}function pK(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function mK(t){return typeof t=="string"||gK(t)}function gK(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const yK="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",qC=[],HC={allowDangerousHtml:!0},vK=/^(https?|ircs?|mailto|xmpp)$/i,bK=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function xK(t){const e=SK(t),n=wK(t);return _K(e.runSync(e.parse(n),n),t)}function SK(t){const e=t.rehypePlugins||qC,n=t.remarkPlugins||qC,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...HC}:HC;return hK().use(tV).use(n).use(ZV,r).use(e)}function wK(t){const e=t.children||"",n=new ET;return typeof e=="string"&&(n.value=e),n}function _K(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,a=e.disallowedElements,l=e.skipHtml,c=e.unwrapDisallowed,f=e.urlTransform||CK;for(const m of bK)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+yK+m.id,void 0);return Rv(t,d),Pq(t,{Fragment:w.Fragment,components:s,ignoreInvalidStyle:!0,jsx:w.jsx,jsxs:w.jsxs,passKeys:!0,passNode:!0});function d(m,p,g){if(m.type==="raw"&&g&&typeof p=="number")return l?g.children.splice(p,1):g.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let y;for(y in Eg)if(Object.hasOwn(Eg,y)&&Object.hasOwn(m.properties,y)){const x=m.properties[y],S=Eg[y];(S===null||S.includes(m.tagName))&&(m.properties[y]=f(String(x||""),y,m))}}if(m.type==="element"){let y=n?!n.includes(m.tagName):a?a.includes(m.tagName):!1;if(!y&&r&&typeof p=="number"&&(y=!r(m,p,g)),y&&g&&typeof p=="number")return c&&m.children?g.children.splice(p,1,...m.children):g.children.splice(p,1),p}}}function CK(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||vK.test(t.slice(0,e))?t:""}function VC(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function EK(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function kT(t,e,n){const s=hh((n||{}).ignore||[]),a=kK(e);let l=-1;for(;++l<a.length;)CT(t,"text",c);function c(d,m){let p=-1,g;for(;++p<m.length;){const y=m[p],x=g?g.children:void 0;if(s(y,x?x.indexOf(y):void 0,g))return;g=y}if(g)return f(d,m)}function f(d,m){const p=m[m.length-1],g=a[l][0],y=a[l][1];let x=0;const E=p.children.indexOf(d);let _=!1,k=[];g.lastIndex=0;let R=g.exec(d.value);for(;R;){const N=R.index,L={index:R.index,input:R.input,stack:[...m,d]};let A=y(...R,L);if(typeof A=="string"&&(A=A.length>0?{type:"text",value:A}:void 0),A===!1?g.lastIndex=N+1:(x!==N&&k.push({type:"text",value:d.value.slice(x,N)}),Array.isArray(A)?k.push(...A):A&&k.push(A),x=N+R[0].length,_=!0),!g.global)break;R=g.exec(d.value)}return _?(x<d.value.length&&k.push({type:"text",value:d.value.slice(x)}),p.children.splice(E,1,...k)):k=[d],E+k.length}}function kK(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([RK(s[0]),AK(s[1])])}return e}function RK(t){return typeof t=="string"?new RegExp(EK(t),"g"):t}function AK(t){return typeof t=="function"?t:function(){return t}}const jg="phrasing",Lg=["autolink","link","image","label"];function TK(){return{transforms:[jK],enter:{literalAutolink:MK,literalAutolinkEmail:Pg,literalAutolinkHttp:Pg,literalAutolinkWww:Pg},exit:{literalAutolink:zK,literalAutolinkEmail:DK,literalAutolinkHttp:IK,literalAutolinkWww:NK}}}function OK(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:jg,notInConstruct:Lg},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:jg,notInConstruct:Lg},{character:":",before:"[ps]",after:"\\/",inConstruct:jg,notInConstruct:Lg}]}}function MK(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Pg(t){this.config.enter.autolinkProtocol.call(this,t)}function IK(t){this.config.exit.autolinkProtocol.call(this,t)}function NK(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function DK(t){this.config.exit.autolinkEmail.call(this,t)}function zK(t){this.exit(t)}function jK(t){kT(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,LK],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),PK]],{ignore:["link","linkReference"]})}function LK(t,e,n,r,s){let a="";if(!RT(s)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!FK(n)))return!1;const l=$K(n+r);if(!l[0])return!1;const c={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[c,{type:"text",value:l[1]}]:c}function PK(t,e,n,r){return!RT(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function FK(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function $K(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=VC(t,"(");let a=VC(t,")");for(;r!==-1&&s>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function RT(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Yi(n)||ch(n))&&(!e||n!==47)}AT.peek=ZK;function BK(){this.buffer()}function UK(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function qK(){this.buffer()}function HK(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function VK(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ir(this.sliceSerialize(t)).toLowerCase(),n.label=e}function KK(t){this.exit(t)}function GK(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ir(this.sliceSerialize(t)).toLowerCase(),n.label=e}function QK(t){this.exit(t)}function ZK(){return"["}function AT(t,e,n,r){const s=n.createTracker(r);let a=s.move("[^");const l=n.enter("footnoteReference"),c=n.enter("reference");return a+=s.move(n.safe(n.associationId(t),{after:"]",before:a})),c(),l(),a+=s.move("]"),a}function YK(){return{enter:{gfmFootnoteCallString:BK,gfmFootnoteCall:UK,gfmFootnoteDefinitionLabelString:qK,gfmFootnoteDefinition:HK},exit:{gfmFootnoteCallString:VK,gfmFootnoteCall:KK,gfmFootnoteDefinitionLabelString:GK,gfmFootnoteDefinition:QK}}}function JK(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:AT},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,l){const c=a.createTracker(l);let f=c.move("[^");const d=a.enter("footnoteDefinition"),m=a.enter("label");return f+=c.move(a.safe(a.associationId(r),{before:f,after:"]"})),m(),f+=c.move("]:"),r.children&&r.children.length>0&&(c.shift(4),f+=c.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,c.current()),e?TT:XK))),d(),f}}function XK(t,e,n){return e===0?t:TT(t,e,n)}function TT(t,e,n){return(n?"":"    ")+t}const WK=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];OT.peek=sG;function eG(){return{canContainEols:["delete"],enter:{strikethrough:nG},exit:{strikethrough:rG}}}function tG(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:WK}],handlers:{delete:OT}}}function nG(t){this.enter({type:"delete",children:[]},t)}function rG(t){this.exit(t)}function OT(t,e,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let l=s.move("~~");return l+=n.containerPhrasing(t,{...s.current(),before:l,after:"~"}),l+=s.move("~~"),a(),l}function sG(){return"~"}function iG(t){return t.length}function aG(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||iG,a=[],l=[],c=[],f=[];let d=0,m=-1;for(;++m<t.length;){const S=[],E=[];let _=-1;for(t[m].length>d&&(d=t[m].length);++_<t[m].length;){const k=oG(t[m][_]);if(n.alignDelimiters!==!1){const R=s(k);E[_]=R,(f[_]===void 0||R>f[_])&&(f[_]=R)}S.push(k)}l[m]=S,c[m]=E}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<d;)a[p]=KC(r[p]);else{const S=KC(r);for(;++p<d;)a[p]=S}p=-1;const g=[],y=[];for(;++p<d;){const S=a[p];let E="",_="";S===99?(E=":",_=":"):S===108?E=":":S===114&&(_=":");let k=n.alignDelimiters===!1?1:Math.max(1,f[p]-E.length-_.length);const R=E+"-".repeat(k)+_;n.alignDelimiters!==!1&&(k=E.length+k+_.length,k>f[p]&&(f[p]=k),y[p]=k),g[p]=R}l.splice(1,0,g),c.splice(1,0,y),m=-1;const x=[];for(;++m<l.length;){const S=l[m],E=c[m];p=-1;const _=[];for(;++p<d;){const k=S[p]||"";let R="",N="";if(n.alignDelimiters!==!1){const L=f[p]-(E[p]||0),A=a[p];A===114?R=" ".repeat(L):A===99?L%2?(R=" ".repeat(L/2+.5),N=" ".repeat(L/2-.5)):(R=" ".repeat(L/2),N=R):N=" ".repeat(L)}n.delimiterStart!==!1&&!p&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&k==="")&&(n.delimiterStart!==!1||p)&&_.push(" "),n.alignDelimiters!==!1&&_.push(R),_.push(k),n.alignDelimiters!==!1&&_.push(N),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&_.push("|")}x.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return x.join(`
`)}function oG(t){return t==null?"":String(t)}function KC(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function lG(t,e,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const l=n.indentLines(n.containerFlow(t,a.current()),uG);return s(),l}function uG(t,e,n){return">"+(n?"":" ")+t}function cG(t,e){return GC(t,e.inConstruct,!0)&&!GC(t,e.notInConstruct,!1)}function GC(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function QC(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&cG(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function fG(t,e){const n=String(t);let r=n.indexOf(e),s=r,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>l&&(l=a):a=1,s=r+e.length,r=n.indexOf(e,s);return l}function dG(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function hG(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function pG(t,e,n,r){const s=hG(n),a=t.value||"",l=s==="`"?"GraveAccent":"Tilde";if(dG(t,n)){const p=n.enter("codeIndented"),g=n.indentLines(a,mG);return p(),g}const c=n.createTracker(r),f=s.repeat(Math.max(fG(a,s)+1,3)),d=n.enter("codeFenced");let m=c.move(f);if(t.lang){const p=n.enter(`codeFencedLang${l}`);m+=c.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...c.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${l}`);m+=c.move(" "),m+=c.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...c.current()})),p()}return m+=c.move(`
`),a&&(m+=c.move(a+`
`)),m+=c.move(f),d(),m}function mG(t,e,n){return(n?"":"    ")+t}function Tv(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function gG(t,e,n,r){const s=Tv(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const f=n.createTracker(r);let d=f.move("[");return d+=f.move(n.safe(n.associationId(t),{before:d,after:"]",...f.current()})),d+=f.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...f.current()}))),c(),t.title&&(c=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),c()),l(),d}function yG(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function _u(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Nd(t,e,n){const r=co(t),s=co(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}MT.peek=vG;function MT(t,e,n,r){const s=yG(n),a=n.enter("emphasis"),l=n.createTracker(r),c=l.move(s);let f=l.move(n.containerPhrasing(t,{after:s,before:c,...l.current()}));const d=f.charCodeAt(0),m=Nd(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=_u(d)+f.slice(1));const p=f.charCodeAt(f.length-1),g=Nd(r.after.charCodeAt(0),p,s);g.inside&&(f=f.slice(0,-1)+_u(p));const y=l.move(s);return a(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},c+f+y}function vG(t,e,n){return n.options.emphasis||"*"}function bG(t,e){let n=!1;return Rv(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Qy}),!!((!t.depth||t.depth<3)&&xv(t)&&(e.options.setext||n))}function xG(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(bG(t,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),g=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return p(),m(),g+`
`+(s===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const l="#".repeat(s),c=n.enter("headingAtx"),f=n.enter("phrasing");a.move(l+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=_u(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,n.options.closeAtx&&(d+=" "+l),f(),c(),d}IT.peek=SG;function IT(t){return t.value||""}function SG(){return"<"}NT.peek=wG;function NT(t,e,n,r){const s=Tv(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const f=n.createTracker(r);let d=f.move("![");return d+=f.move(n.safe(t.alt,{before:d,after:"]",...f.current()})),d+=f.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":")",...f.current()}))),c(),t.title&&(c=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),c()),d+=f.move(")"),l(),d}function wG(){return"!"}DT.peek=_G;function DT(t,e,n,r){const s=t.referenceType,a=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(r);let f=c.move("![");const d=n.safe(t.alt,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=c.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function _G(){return"!"}zT.peek=CG;function zT(t,e,n){let r=t.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const l=n.unsafe[a],c=n.compilePattern(l);let f;if(l.atBreak)for(;f=c.exec(r);){let d=f.index;r.charCodeAt(d)===10&&r.charCodeAt(d-1)===13&&d--,r=r.slice(0,d)+" "+r.slice(f.index+1)}}return s+r+s}function CG(){return"`"}function jT(t,e){const n=xv(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}LT.peek=EG;function LT(t,e,n,r){const s=Tv(n),a=s==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let c,f;if(jT(t,n)){const m=n.stack;n.stack=[],c=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(t,{before:p,after:">",...l.current()})),p+=l.move(">"),c(),n.stack=m,p}c=n.enter("link"),f=n.enter("label");let d=l.move("[");return d+=l.move(n.containerPhrasing(t,{before:d,after:"](",...l.current()})),d+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),d+=l.move("<"),d+=l.move(n.safe(t.url,{before:d,after:">",...l.current()})),d+=l.move(">")):(f=n.enter("destinationRaw"),d+=l.move(n.safe(t.url,{before:d,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${a}`),d+=l.move(" "+s),d+=l.move(n.safe(t.title,{before:d,after:s,...l.current()})),d+=l.move(s),f()),d+=l.move(")"),c(),d}function EG(t,e,n){return jT(t,n)?"<":"["}PT.peek=kG;function PT(t,e,n,r){const s=t.referenceType,a=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(r);let f=c.move("[");const d=n.containerPhrasing(t,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=c.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function kG(){return"["}function Ov(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function RG(t){const e=Ov(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function AG(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function FT(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function TG(t,e,n,r){const s=n.enter("list"),a=n.bulletCurrent;let l=t.ordered?AG(n):Ov(n);const c=t.ordered?l==="."?")":".":RG(n);let f=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),FT(n)===l&&m){let p=-1;for(;++p<t.children.length;){const g=t.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=c),n.bulletCurrent=l;const d=n.containerFlow(t,r);return n.bulletLastUsed=l,n.bulletCurrent=a,s(),d}function OG(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function MG(t,e,n,r){const s=OG(n);let a=n.bulletCurrent||Ov(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let l=a.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(r);c.move(a+" ".repeat(l-a.length)),c.shift(l);const f=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,c.current()),m);return f(),d;function m(p,g,y){return g?(y?"":" ".repeat(l))+p:(y?a:a+" ".repeat(l-a.length))+p}}function IG(t,e,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),l=n.containerPhrasing(t,r);return a(),s(),l}const NG=hh(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function DG(t,e,n,r){return(t.children.some(function(l){return NG(l)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function zG(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}$T.peek=jG;function $T(t,e,n,r){const s=zG(n),a=n.enter("strong"),l=n.createTracker(r),c=l.move(s+s);let f=l.move(n.containerPhrasing(t,{after:s,before:c,...l.current()}));const d=f.charCodeAt(0),m=Nd(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=_u(d)+f.slice(1));const p=f.charCodeAt(f.length-1),g=Nd(r.after.charCodeAt(0),p,s);g.inside&&(f=f.slice(0,-1)+_u(p));const y=l.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},c+f+y}function jG(t,e,n){return n.options.strong||"*"}function LG(t,e,n,r){return n.safe(t.value,r)}function PG(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function FG(t,e,n){const r=(FT(n)+(n.options.ruleSpaces?" ":"")).repeat(PG(n));return n.options.ruleSpaces?r.slice(0,-1):r}const BT={blockquote:lG,break:QC,code:pG,definition:gG,emphasis:MT,hardBreak:QC,heading:xG,html:IT,image:NT,imageReference:DT,inlineCode:zT,link:LT,linkReference:PT,list:TG,listItem:MG,paragraph:IG,root:DG,strong:$T,text:LG,thematicBreak:FG};function $G(){return{enter:{table:BG,tableData:ZC,tableHeader:ZC,tableRow:qG},exit:{codeText:HG,table:UG,tableData:Fg,tableHeader:Fg,tableRow:Fg}}}function BG(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function UG(t){this.exit(t),this.data.inTable=void 0}function qG(t){this.enter({type:"tableRow",children:[]},t)}function Fg(t){this.exit(t)}function ZC(t){this.enter({type:"tableCell",children:[]},t)}function HG(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,VG));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function VG(t,e){return e==="|"?e:t}function KG(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:l,tableCell:f,tableRow:c}};function l(y,x,S,E){return d(m(y,S,E),y.align)}function c(y,x,S,E){const _=p(y,S,E),k=d([_]);return k.slice(0,k.indexOf(`
`))}function f(y,x,S,E){const _=S.enter("tableCell"),k=S.enter("phrasing"),R=S.containerPhrasing(y,{...E,before:a,after:a});return k(),_(),R}function d(y,x){return aG(y,{align:x,alignDelimiters:r,padding:n,stringLength:s})}function m(y,x,S){const E=y.children;let _=-1;const k=[],R=x.enter("table");for(;++_<E.length;)k[_]=p(E[_],x,S);return R(),k}function p(y,x,S){const E=y.children;let _=-1;const k=[],R=x.enter("tableRow");for(;++_<E.length;)k[_]=f(E[_],y,x,S);return R(),k}function g(y,x,S){let E=BT.inlineCode(y,x,S);return S.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function GG(){return{exit:{taskListCheckValueChecked:YC,taskListCheckValueUnchecked:YC,paragraph:ZG}}}function QG(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:YG}}}function YC(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function ZG(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let a=-1,l;for(;++a<s.length;){const c=s[a];if(c.type==="paragraph"){l=c;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function YG(t,e,n,r){const s=t.children[0],a=typeof t.checked=="boolean"&&s&&s.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",c=n.createTracker(r);a&&c.move(l);let f=BT.listItem(t,e,n,{...r,...c.current()});return a&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),f;function d(m){return m+l}}function JG(){return[TK(),YK(),eG(),$G(),GG()]}function XG(t){return{extensions:[OK(),JK(t),tG(),KG(t),QG()]}}const WG={tokenize:iQ,partial:!0},UT={tokenize:aQ,partial:!0},qT={tokenize:oQ,partial:!0},HT={tokenize:lQ,partial:!0},eQ={tokenize:uQ,partial:!0},VT={name:"wwwAutolink",tokenize:rQ,previous:GT},KT={name:"protocolAutolink",tokenize:sQ,previous:QT},bs={name:"emailAutolink",tokenize:nQ,previous:ZT},Kr={};function tQ(){return{text:Kr}}let Mi=48;for(;Mi<123;)Kr[Mi]=bs,Mi++,Mi===58?Mi=65:Mi===91&&(Mi=97);Kr[43]=bs;Kr[45]=bs;Kr[46]=bs;Kr[95]=bs;Kr[72]=[bs,KT];Kr[104]=[bs,KT];Kr[87]=[bs,VT];Kr[119]=[bs,VT];function nQ(t,e,n){const r=this;let s,a;return l;function l(p){return!Xy(p)||!ZT.call(r,r.previous)||Mv(r.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),c(p))}function c(p){return Xy(p)?(t.consume(p),c):p===64?(t.consume(p),f):n(p)}function f(p){return p===46?t.check(eQ,m,d)(p):p===45||p===95||gn(p)?(a=!0,t.consume(p),f):m(p)}function d(p){return t.consume(p),s=!0,f}function m(p){return a&&s&&Cn(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function rQ(t,e,n){const r=this;return s;function s(l){return l!==87&&l!==119||!GT.call(r,r.previous)||Mv(r.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(WG,t.attempt(UT,t.attempt(qT,a),n),n)(l))}function a(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function sQ(t,e,n){const r=this;let s="",a=!1;return l;function l(p){return(p===72||p===104)&&QT.call(r,r.previous)&&!Mv(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(p),t.consume(p),c):n(p)}function c(p){if(Cn(p)&&s.length<5)return s+=String.fromCodePoint(p),t.consume(p),c;if(p===58){const g=s.toLowerCase();if(g==="http"||g==="https")return t.consume(p),f}return n(p)}function f(p){return p===47?(t.consume(p),a?d:(a=!0,f)):n(p)}function d(p){return p===null||Od(p)||Ct(p)||Yi(p)||ch(p)?n(p):t.attempt(UT,t.attempt(qT,m),n)(p)}function m(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function iQ(t,e,n){let r=0;return s;function s(l){return(l===87||l===119)&&r<3?(r++,t.consume(l),s):l===46&&r===3?(t.consume(l),a):n(l)}function a(l){return l===null?n(l):e(l)}}function aQ(t,e,n){let r,s,a;return l;function l(d){return d===46||d===95?t.check(HT,f,c)(d):d===null||Ct(d)||Yi(d)||d!==45&&ch(d)?f(d):(a=!0,t.consume(d),l)}function c(d){return d===95?r=!0:(s=r,r=void 0),t.consume(d),l}function f(d){return s||r||!a?n(d):e(d)}}function oQ(t,e){let n=0,r=0;return s;function s(l){return l===40?(n++,t.consume(l),s):l===41&&r<n?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check(HT,e,a)(l):l===null||Ct(l)||Yi(l)?e(l):(t.consume(l),s)}function a(l){return l===41&&r++,t.consume(l),s}}function lQ(t,e,n){return r;function r(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(t.consume(c),r):c===38?(t.consume(c),a):c===93?(t.consume(c),s):c===60||c===null||Ct(c)||Yi(c)?e(c):n(c)}function s(c){return c===null||c===40||c===91||Ct(c)||Yi(c)?e(c):r(c)}function a(c){return Cn(c)?l(c):n(c)}function l(c){return c===59?(t.consume(c),r):Cn(c)?(t.consume(c),l):n(c)}}function uQ(t,e,n){return r;function r(a){return t.consume(a),s}function s(a){return gn(a)?n(a):e(a)}}function GT(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Ct(t)}function QT(t){return!Cn(t)}function ZT(t){return!(t===47||Xy(t))}function Xy(t){return t===43||t===45||t===46||t===95||gn(t)}function Mv(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const cQ={tokenize:vQ,partial:!0};function fQ(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:mQ,continuation:{tokenize:gQ},exit:yQ}},text:{91:{name:"gfmFootnoteCall",tokenize:pQ},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:dQ,resolveTo:hQ}}}}function dQ(t,e,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;s--;){const f=r.events[s][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return c;function c(f){if(!l||!l._balanced)return n(f);const d=Ir(r.sliceSerialize({start:l.end,end:r.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?n(f):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),e(f))}}function hQ(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},c=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...c),t}function pQ(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,l;return c;function c(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(p){if(a>999||p===93&&!l||p===null||p===91||Ct(p))return n(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteCallString");return s.includes(Ir(r.sliceSerialize(g)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return Ct(p)||(l=!0),a++,t.consume(p),p===92?m:d}function m(p){return p===91||p===92||p===93?(t.consume(p),a++,d):d(p)}}function mQ(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,l=0,c;return f;function f(x){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(x){return x===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(x)}function m(x){if(l>999||x===93&&!c||x===null||x===91||Ct(x))return n(x);if(x===93){t.exit("chunkString");const S=t.exit("gfmFootnoteDefinitionLabelString");return a=Ir(r.sliceSerialize(S)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),g}return Ct(x)||(c=!0),l++,t.consume(x),x===92?p:m}function p(x){return x===91||x===92||x===93?(t.consume(x),l++,m):m(x)}function g(x){return x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),s.includes(a)||s.push(a),st(t,y,"gfmFootnoteDefinitionWhitespace")):n(x)}function y(x){return e(x)}}function gQ(t,e,n){return t.check(ju,e,t.attempt(cQ,e,n))}function yQ(t){t.exit("gfmFootnoteDefinition")}function vQ(t,e,n){const r=this;return st(t,s,"gfmFootnoteDefinitionIndent",5);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):n(a)}}function bQ(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(l,c){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let d=f;for(;d--;)if(l[d][0]==="exit"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[d][1].end.offset-l[d][1].start.offset){l[f][1].type="strikethroughSequence",l[d][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[d][1].start),end:Object.assign({},l[f][1].end)},p={type:"strikethroughText",start:Object.assign({},l[d][1].end),end:Object.assign({},l[f][1].start)},g=[["enter",m,c],["enter",l[d][1],c],["exit",l[d][1],c],["enter",p,c]],y=c.parser.constructs.insideSpan.null;y&&tr(g,g.length,0,fh(y,l.slice(d+1,f),c)),tr(g,g.length,0,[["exit",p,c],["enter",l[f][1],c],["exit",l[f][1],c],["exit",m,c]]),tr(l,d-1,f-d+3,g),f=d+g.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function a(l,c,f){const d=this.previous,m=this.events;let p=0;return g;function g(x){return d===126&&m[m.length-1][1].type!=="characterEscape"?f(x):(l.enter("strikethroughSequenceTemporary"),y(x))}function y(x){const S=co(d);if(x===126)return p>1?f(x):(l.consume(x),p++,y);if(p<2&&!n)return f(x);const E=l.exit("strikethroughSequenceTemporary"),_=co(x);return E._open=!_||_===2&&!!S,E._close=!S||S===2&&!!_,c(x)}}}class xQ{constructor(){this.map=[]}add(e,n,r){SQ(this,e,n,r)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const a of s)e.push(a);s=r.pop()}this.map.length=0}}function SQ(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function wQ(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function _Q(){return{flow:{null:{name:"table",tokenize:CQ,resolveAll:EQ}}}}function CQ(t,e,n){const r=this;let s=0,a=0,l;return c;function c(M){let B=r.events.length-1;for(;B>-1;){const te=r.events[B][1].type;if(te==="lineEnding"||te==="linePrefix")B--;else break}const Q=B>-1?r.events[B][1].type:null,Z=Q==="tableHead"||Q==="tableRow"?A:f;return Z===A&&r.parser.lazy[r.now().line]?n(M):Z(M)}function f(M){return t.enter("tableHead"),t.enter("tableRow"),d(M)}function d(M){return M===124||(l=!0,a+=1),m(M)}function m(M){return M===null?n(M):Me(M)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),y):n(M):Ye(M)?st(t,m,"whitespace")(M):(a+=1,l&&(l=!1,s+=1),M===124?(t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),l=!0,m):(t.enter("data"),p(M)))}function p(M){return M===null||M===124||Ct(M)?(t.exit("data"),m(M)):(t.consume(M),M===92?g:p)}function g(M){return M===92||M===124?(t.consume(M),p):p(M)}function y(M){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(M):(t.enter("tableDelimiterRow"),l=!1,Ye(M)?st(t,x,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):x(M))}function x(M){return M===45||M===58?E(M):M===124?(l=!0,t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),S):L(M)}function S(M){return Ye(M)?st(t,E,"whitespace")(M):E(M)}function E(M){return M===58?(a+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(M),t.exit("tableDelimiterMarker"),_):M===45?(a+=1,_(M)):M===null||Me(M)?N(M):L(M)}function _(M){return M===45?(t.enter("tableDelimiterFiller"),k(M)):L(M)}function k(M){return M===45?(t.consume(M),k):M===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(M),t.exit("tableDelimiterMarker"),R):(t.exit("tableDelimiterFiller"),R(M))}function R(M){return Ye(M)?st(t,N,"whitespace")(M):N(M)}function N(M){return M===124?x(M):M===null||Me(M)?!l||s!==a?L(M):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(M)):L(M)}function L(M){return n(M)}function A(M){return t.enter("tableRow"),I(M)}function I(M){return M===124?(t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),I):M===null||Me(M)?(t.exit("tableRow"),e(M)):Ye(M)?st(t,I,"whitespace")(M):(t.enter("data"),j(M))}function j(M){return M===null||M===124||Ct(M)?(t.exit("data"),I(M)):(t.consume(M),M===92?P:j)}function P(M){return M===92||M===124?(t.consume(M),j):j(M)}}function EQ(t,e){let n=-1,r=!0,s=0,a=[0,0,0,0],l=[0,0,0,0],c=!1,f=0,d,m,p;const g=new xQ;for(;++n<t.length;){const y=t[n],x=y[1];y[0]==="enter"?x.type==="tableHead"?(c=!1,f!==0&&(JC(g,e,f,d,m),m=void 0,f=0),d={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},g.add(n,0,[["enter",d,e]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(r=!0,p=void 0,a=[0,0,0,0],l=[0,n+1,0,0],c&&(c=!1,m={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},g.add(n,0,[["enter",m,e]])),s=x.type==="tableDelimiterRow"?2:m?3:1):s&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],p=Of(g,e,a,s,void 0,p),a=[0,0,0,0]),l[2]=n)):x.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(l[0]=l[1],p=Of(g,e,a,s,void 0,p)),a=l,l=[a[1],n,0,0])):x.type==="tableHead"?(c=!0,f=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(f=n,a[1]!==0?(l[0]=l[1],p=Of(g,e,a,s,n,p)):l[1]!==0&&(p=Of(g,e,l,s,n,p)),s=0):s&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(l[3]=n)}for(f!==0&&JC(g,e,f,d,m),g.consume(e.events),n=-1;++n<e.events.length;){const y=e.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=wQ(e.events,n))}return t}function Of(t,e,n,r,s,a){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(a.end=Object.assign({},Qa(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const f=Qa(e.events,n[1]);if(a={type:l,start:Object.assign({},f),end:Object.assign({},f)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const d=Qa(e.events,n[2]),m=Qa(e.events,n[3]),p={type:c,start:Object.assign({},d),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",p,e]]),r!==2){const g=e.events[n[2]],y=e.events[n[3]];if(g[1].end=Object.assign({},y[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,S=n[3]-n[2]-1;t.add(x,S,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return s!==void 0&&(a.end=Object.assign({},Qa(e.events,s)),t.add(s,0,[["exit",a,e]]),a=void 0),a}function JC(t,e,n,r,s){const a=[],l=Qa(e.events,n);s&&(s.end=Object.assign({},l),a.push(["exit",s,e])),r.end=Object.assign({},l),a.push(["exit",r,e]),t.add(n+1,0,a)}function Qa(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const kQ={name:"tasklistCheck",tokenize:AQ};function RQ(){return{text:{91:kQ}}}function AQ(t,e,n){const r=this;return s;function s(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(f):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),a)}function a(f){return Ct(f)?(t.enter("taskListCheckValueUnchecked"),t.consume(f),t.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(t.enter("taskListCheckValueChecked"),t.consume(f),t.exit("taskListCheckValueChecked"),l):n(f)}function l(f){return f===93?(t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),c):n(f)}function c(f){return Me(f)?e(f):Ye(f)?t.check({tokenize:TQ},e,n)(f):n(f)}}function TQ(t,e,n){return st(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function OQ(t){return iT([tQ(),fQ(),bQ(t),_Q(),RQ()])}const MQ={};function IQ(t){const e=this,n=t||MQ,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(OQ(n)),a.push(JG()),l.push(XG(n))}function NQ(t){kT(t,[/\r?\n|\r/g,DQ])}function DQ(){return{type:"break"}}function zQ(){return function(t){NQ(t)}}const jQ={pre:({children:t})=>w.jsx(w.Fragment,{children:t}),li:({children:t,...e})=>w.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>w.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>w.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>w.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let r=e||"";return r&&!r.startsWith("http")&&!r.startsWith("#")&&(r=`https://${r}`),w.jsx("a",{className:"text-sky-400 hover:underline",href:r,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>w.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>w.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>w.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>w.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>w.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>w.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>w.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>w.jsx("div",{className:"overflow-x-auto my-3",children:w.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>w.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>w.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>w.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>w.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>w.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>w.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>w.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const r=/language-(\w+)/.exec(e||""),s=String(t).replace(/\n$/,""),a=s.includes(`
`);if(!r&&!a)return w.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const l=r?.[1]||"text";return w.jsxs("div",{className:"my-3",children:[w.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:w.jsx("span",{children:l})}),w.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:w.jsx("code",{className:"text-xs font-mono text-neutral-200",children:s})})]})}},LQ=[IQ,zQ],PQ=t=>{const e=tn.c(6),{children:n}=t;if(!n)return null;let r=n,s;if(e[0]!==r){r=r.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=/```\n(#{1,6}\s+)/gm,e[3]=l):l=e[3],s=r.replace(l,"```\n\n$1"),e[0]=r,e[1]=s,e[2]=r}else s=e[1],r=e[2];r=s;let a;return e[4]!==r?(a=w.jsx(xK,{remarkPlugins:LQ,components:jQ,children:r}),e[4]=r,e[5]=a):a=e[5],a},FQ=q.memo(PQ,(t,e)=>t.children===e.children);function $Q(t){const e=tn.c(90),{isOpen:n,onClose:r,connection:s,database:a,table:l,currentQuery:c,queryResult:f,schema:d,setters:m}=t,[p,g]=q.useState(""),y=q.useRef(null),x=q.useRef(null),S=q.useRef(s?.id);let E;e[0]!==s||e[1]!==c||e[2]!==a||e[3]!==f||e[4]!==d||e[5]!==m||e[6]!==l?(E={connection:s,database:a,table:l,currentQuery:c,queryResult:f,schema:d,setters:m},e[0]=s,e[1]=c,e[2]=a,e[3]=f,e[4]=d,e[5]=m,e[6]=l,e[7]=E):E=e[7];const _=E;let k;e[8]!==_?(k=lq(_),e[8]=_,e[9]=k):k=e[9];const R=k;let N;e[10]!==_?(N=uq(_),e[10]=_,e[11]=N):N=e[11];const L=N;let A;if(e[12]!==L||e[13]!==R){const xe=N$(),Pe=I$(xe);A=nF(vt=>z6({adapter:Pe,messages:vt,tools:R,systemPrompts:[L],agentLoopStrategy:Pk(10)})),e[12]=L,e[13]=R,e[14]=A}else A=e[14];const I=A;let j;e[15]!==I||e[16]!==R?(j={connection:I,tools:R},e[15]=I,e[16]=R,e[17]=j):j=e[17];const{messages:P,sendMessage:M,isLoading:B,stop:Q,clear:Z}=rF(j);let te;e[18]!==Z||e[19]!==s?.id?(te=()=>{S.current!==s?.id&&(Z(),S.current=s?.id)},e[18]=Z,e[19]=s?.id,e[20]=te):te=e[20];const V=s?.id;let F;e[21]!==Z||e[22]!==V?(F=[V,Z],e[21]=Z,e[22]=V,e[23]=F):F=e[23],q.useEffect(te,F);let X;e[24]===Symbol.for("react.memo_cache_sentinel")?(X=()=>{y.current?.scrollIntoView({behavior:"smooth"})},e[24]=X):X=e[24];let oe;e[25]!==P?(oe=[P],e[25]=P,e[26]=oe):oe=e[26],q.useEffect(X,oe);let ae,z;e[27]!==n?(ae=()=>{n&&x.current?.focus()},z=[n],e[27]=n,e[28]=ae,e[29]=z):(ae=e[28],z=e[29]),q.useEffect(ae,z);let D;e[30]!==p||e[31]!==B||e[32]!==M?(D=xe=>{xe.preventDefault(),!(!p.trim()||B)&&(M(p.trim()),g(""))},e[30]=p,e[31]=B,e[32]=M,e[33]=D):D=e[33];const $=D;let T;e[34]!==$?(T=xe=>{xe.key==="Enter"&&!xe.shiftKey&&(xe.preventDefault(),$(xe))},e[34]=$,e[35]=T):T=e[35];const K=T,se=BQ;let ce;e[36]!==B||e[37]!==P?(ce=(xe,Pe)=>B&&xe.role==="assistant"&&Pe===P.length-1,e[36]=B,e[37]=P,e[38]=ce):ce=e[38];const ye=ce;if(!n)return null;let ke;e[39]===Symbol.for("react.memo_cache_sentinel")?(ke=w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Yg,{size:16,className:"text-amber-500"}),w.jsx("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:lC.name})]}),e[39]=ke):ke=e[39];let ve;e[40]===Symbol.for("react.memo_cache_sentinel")?(ve=w.jsx(du,{size:16}),e[40]=ve):ve=e[40];let Ue;e[41]!==Z?(Ue=w.jsx("button",{onClick:Z,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",title:"Clear chat",children:ve}),e[41]=Z,e[42]=Ue):Ue=e[42];let Fe;e[43]===Symbol.for("react.memo_cache_sentinel")?(Fe=w.jsx(Cu,{size:16}),e[43]=Fe):Fe=e[43];let Ge;e[44]!==r?(Ge=w.jsx("button",{onClick:r,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",children:Fe}),e[44]=r,e[45]=Ge):Ge=e[45];let yt;e[46]!==Ue||e[47]!==Ge?(yt=w.jsxs("div",{className:"shrink-0 h-12 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[ke,w.jsxs("div",{className:"flex items-center gap-1",children:[Ue,Ge]})]}),e[46]=Ue,e[47]=Ge,e[48]=yt):yt=e[48];let lt;e[49]!==P.length?(lt=P.length===0&&w.jsxs("div",{className:"text-center text-neutral-500 dark:text-neutral-400 text-sm py-8",children:[w.jsx(Yg,{size:24,className:"mx-auto mb-3 text-amber-500/50"}),w.jsx("p",{className:"mb-2",children:"Ask me to help with your SQL queries"}),w.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:`Examples: "Write a query to find all users created this month" or "What's wrong with my query?"`})]}),e[49]=P.length,e[50]=lt):lt=e[50];let it;if(e[51]!==ye||e[52]!==P){let xe;e[54]!==ye?(xe=(Pe,vt)=>{const at=se(Pe);return w.jsx("div",{className:"space-y-3",children:(at||ye(Pe,vt))&&w.jsx("div",{className:`text-sm ${Pe.role==="user"?"bg-neutral-100 dark:bg-neutral-800 rounded-lg px-3 py-2":""}`,children:w.jsx("div",{className:Pe.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300",children:Pe.role==="assistant"?at?w.jsx(FQ,{children:at}):ye(Pe,vt)?w.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[w.jsx(Ki,{size:14,className:"animate-spin"}),"Thinking..."]}):null:w.jsx("span",{className:"whitespace-pre-wrap",children:at})})})},Pe.id)},e[54]=ye,e[55]=xe):xe=e[55],it=P.map(xe),e[51]=ye,e[52]=P,e[53]=it}else it=e[53];let ht;e[56]!==B||e[57]!==P?(ht=B&&(P.length===0||P[P.length-1]?.role==="user")&&w.jsx("div",{className:"text-sm",children:w.jsx("div",{className:"text-neutral-800 dark:text-neutral-200",children:w.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[w.jsx(Ki,{size:14,className:"animate-spin"}),"Thinking..."]})})}),e[56]=B,e[57]=P,e[58]=ht):ht=e[58];let Xe;e[59]===Symbol.for("react.memo_cache_sentinel")?(Xe=w.jsx("div",{ref:y}),e[59]=Xe):Xe=e[59];let rt;e[60]!==lt||e[61]!==it||e[62]!==ht?(rt=w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[lt,it,ht,Xe]}),e[60]=lt,e[61]=it,e[62]=ht,e[63]=rt):rt=e[63];let ft;e[64]===Symbol.for("react.memo_cache_sentinel")?(ft=xe=>g(xe.target.value),e[64]=ft):ft=e[64];let Ae;e[65]===Symbol.for("react.memo_cache_sentinel")?(Ae={maxHeight:"120px"},e[65]=Ae):Ae=e[65];let me;e[66]!==K||e[67]!==p||e[68]!==B?(me=w.jsx("textarea",{ref:x,value:p,onChange:ft,onKeyDown:K,placeholder:lC.placeholder,rows:1,disabled:B,className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 rounded-lg text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-400 resize-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 disabled:opacity-50",style:Ae}),e[66]=K,e[67]=p,e[68]=B,e[69]=me):me=e[69];const Ne=B?"button":"submit",be=B?Q:void 0;let ge;e[70]!==p||e[71]!==B?(ge=!B&&!p.trim(),e[70]=p,e[71]=B,e[72]=ge):ge=e[72];let $e;e[73]!==B?($e=B?w.jsx(BD,{size:16}):w.jsx(jD,{size:16}),e[73]=B,e[74]=$e):$e=e[74];let ne;e[75]!==Ne||e[76]!==be||e[77]!==ge||e[78]!==$e?(ne=w.jsx("button",{type:Ne,onClick:be,disabled:ge,className:"p-2 bg-amber-500 hover:bg-amber-400 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-lg transition-colors",children:$e}),e[75]=Ne,e[76]=be,e[77]=ge,e[78]=$e,e[79]=ne):ne=e[79];let de;e[80]!==me||e[81]!==ne?(de=w.jsxs("div",{className:"flex items-end gap-2",children:[me,ne]}),e[80]=me,e[81]=ne,e[82]=de):de=e[82];let _e;e[83]!==$||e[84]!==de?(_e=w.jsx("form",{onSubmit:$,className:"shrink-0 p-3 border-t border-neutral-200 dark:border-neutral-800",children:de}),e[83]=$,e[84]=de,e[85]=_e):_e=e[85];let Ce;return e[86]!==yt||e[87]!==rt||e[88]!==_e?(Ce=w.jsxs("div",{className:"w-96 shrink-0 bg-white border border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col rounded-xl overflow-hidden",children:[yt,rt,_e]}),e[86]=yt,e[87]=rt,e[88]=_e,e[89]=Ce):Ce=e[89],Ce}function BQ(t){return t.parts.filter(qQ).map(UQ).join("").replace(/^undefined/,"")}function UQ(t){return t.content}function qQ(t){return t.type==="text"&&!!t.content}const HQ={folder:sd,image:LE,document:zE,code:DE,archive:IE,file:sd};function VQ(t){const e=tn.c(75),{connection:n,container:r,objectKey:s,onClose:a}=t;let l;e[0]!==n.id||e[1]!==r||e[2]!==s?(l=["storage-object-details",n.id,r,s],e[0]=n.id,e[1]=r,e[2]=s,e[3]=l):l=e[3];let c;e[4]!==n||e[5]!==r||e[6]!==s?(c=()=>Y3(n,r,s),e[4]=n,e[5]=r,e[6]=s,e[7]=c):c=e[7];const f=!!n&&!!r&&!!s;let d;e[8]!==l||e[9]!==c||e[10]!==f?(d={queryKey:l,queryFn:c,enabled:f},e[8]=l,e[9]=c,e[10]=f,e[11]=d):d=e[11];const{data:m,isLoading:p,error:g}=ys(d);let y;e[12]!==n||e[13]!==r||e[14]!==s?(y=async()=>{try{const K=await J3(n,r,s),se=document.createElement("a");se.href=K,se.download=yu(s),se.target="_blank",se.style.display="none",document.body.appendChild(se),se.click(),document.body.removeChild(se)}catch(K){console.error("Failed to get download URL:",K)}},e[12]=n,e[13]=r,e[14]=s,e[15]=y):y=e[15];const x=y;if(p){let K;return e[16]===Symbol.for("react.memo_cache_sentinel")?(K=w.jsx("div",{className:"flex-1 flex items-center justify-center",children:w.jsx(Ki,{className:"w-6 h-6 text-neutral-400 animate-spin"})}),e[16]=K):K=e[16],K}if(g||!m){const K=g?"Failed to load object details":"Select an object to view details";let se;return e[17]!==K?(se=w.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-400 dark:text-neutral-600 text-sm",children:K}),e[17]=K,e[18]=se):se=e[18],se}const S=pk(s),E=HQ[S];let _;e[19]!==s?(_=yu(s),e[19]=s,e[20]=_):_=e[20];const k=_;let R;e[21]!==E?(R=w.jsx("div",{className:"w-10 h-10 rounded-lg bg-neutral-100 dark:bg-white/5 flex items-center justify-center",children:w.jsx(E,{className:"w-5 h-5 text-neutral-500 dark:text-neutral-400"})}),e[21]=E,e[22]=R):R=e[22];let N;e[23]!==k?(N=w.jsx("h2",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 truncate",children:k}),e[23]=k,e[24]=N):N=e[24];let L;e[25]!==r||e[26]!==s?(L=w.jsxs("p",{className:"text-xs text-neutral-400 dark:text-neutral-500 truncate",children:[r,"/",s]}),e[25]=r,e[26]=s,e[27]=L):L=e[27];let A;e[28]!==N||e[29]!==L?(A=w.jsxs("div",{className:"flex-1 min-w-0",children:[N,L]}),e[28]=N,e[29]=L,e[30]=A):A=e[30];let I;e[31]===Symbol.for("react.memo_cache_sentinel")?(I=w.jsx(pD,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),e[31]=I):I=e[31];let j;e[32]!==x?(j=w.jsx("button",{onClick:x,className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Download",children:I}),e[32]=x,e[33]=j):j=e[33];let P;e[34]===Symbol.for("react.memo_cache_sentinel")?(P=w.jsx(Cu,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),e[34]=P):P=e[34];let M;e[35]!==a?(M=w.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Close",children:P}),e[35]=a,e[36]=M):M=e[36];let B;e[37]!==j||e[38]!==M?(B=w.jsxs("div",{className:"flex items-center gap-1",children:[j,M]}),e[37]=j,e[38]=M,e[39]=B):B=e[39];let Q;e[40]!==A||e[41]!==B||e[42]!==R?(Q=w.jsx("div",{className:"px-4 py-3 border-b border-neutral-200 dark:border-white/8",children:w.jsxs("div",{className:"flex items-center gap-3",children:[R,A,B]})}),e[40]=A,e[41]=B,e[42]=R,e[43]=Q):Q=e[43];let Z;e[44]!==m.size?(Z=hk(m.size),e[44]=m.size,e[45]=Z):Z=e[45];let te;e[46]!==Z?(te=w.jsx(hs,{label:"Size",value:Z}),e[46]=Z,e[47]=te):te=e[47];let V;e[48]!==m.lastModified?(V=GQ(m.lastModified),e[48]=m.lastModified,e[49]=V):V=e[49];let F;e[50]!==V?(F=w.jsx(hs,{label:"Last Modified",value:V}),e[50]=V,e[51]=F):F=e[51];let X;e[52]!==m.contentType?(X=m.contentType&&w.jsx(hs,{label:"Content Type",value:t5(m.contentType)}),e[52]=m.contentType,e[53]=X):X=e[53];let oe;e[54]!==m.etag?(oe=m.etag&&w.jsx(hs,{label:"ETag",value:m.etag,mono:!0}),e[54]=m.etag,e[55]=oe):oe=e[55];let ae;e[56]!==te||e[57]!==F||e[58]!==X||e[59]!==oe?(ae=w.jsxs($g,{title:"Basic Information",children:[te,F,X,oe]}),e[56]=te,e[57]=F,e[58]=X,e[59]=oe,e[60]=ae):ae=e[60];let z;e[61]!==m.accessTier||e[62]!==m.blobType||e[63]!==m.storageClass||e[64]!==m.versionId?(z=(m.storageClass||m.accessTier||m.blobType)&&w.jsxs($g,{title:"Storage",children:[m.storageClass&&w.jsx(hs,{label:"Storage Class",value:m.storageClass}),m.accessTier&&w.jsx(hs,{label:"Access Tier",value:m.accessTier}),m.blobType&&w.jsx(hs,{label:"Blob Type",value:m.blobType}),m.versionId&&w.jsx(hs,{label:"Version ID",value:m.versionId,mono:!0})]}),e[61]=m.accessTier,e[62]=m.blobType,e[63]=m.storageClass,e[64]=m.versionId,e[65]=z):z=e[65];let D;e[66]!==m.metadata?(D=m.metadata&&Object.keys(m.metadata).length>0&&w.jsx($g,{title:"Metadata",children:Object.entries(m.metadata).map(KQ)}),e[66]=m.metadata,e[67]=D):D=e[67];let $;e[68]!==ae||e[69]!==z||e[70]!==D?($=w.jsx("div",{className:"flex-1 overflow-auto p-4",children:w.jsxs("div",{className:"space-y-4",children:[ae,z,D]})}),e[68]=ae,e[69]=z,e[70]=D,e[71]=$):$=e[71];let T;return e[72]!==Q||e[73]!==$?(T=w.jsxs("div",{className:"flex-1 bg-white dark:bg-[#1a1a1a]/60 border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden flex flex-col",children:[Q,$]}),e[72]=Q,e[73]=$,e[74]=T):T=e[74],T}function KQ(t){const[e,n]=t;return w.jsx(hs,{label:e,value:n},e)}function $g(t){const e=tn.c(7),{title:n,children:r}=t;let s;e[0]!==n?(s=w.jsx("h3",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400 uppercase tracking-wider mb-2",children:n}),e[0]=n,e[1]=s):s=e[1];let a;e[2]!==r?(a=w.jsx("div",{className:"bg-neutral-50 dark:bg-white/5 rounded-lg divide-y divide-neutral-200 dark:divide-white/5",children:r}),e[2]=r,e[3]=a):a=e[3];let l;return e[4]!==s||e[5]!==a?(l=w.jsxs("div",{children:[s,a]}),e[4]=s,e[5]=a,e[6]=l):l=e[6],l}function hs(t){const e=tn.c(8),{label:n,value:r,mono:s}=t;let a;e[0]!==n?(a=w.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:n}),e[0]=n,e[1]=a):a=e[1];const l=`text-xs text-neutral-700 dark:text-neutral-200 ${s?"font-mono":""} truncate max-w-50`;let c;e[2]!==l||e[3]!==r?(c=w.jsx("span",{className:l,children:r}),e[2]=l,e[3]=r,e[4]=c):c=e[4];let f;return e[5]!==a||e[6]!==c?(f=w.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[a,c]}),e[5]=a,e[6]=c,e[7]=f):f=e[7],f}function GQ(t){try{return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}}function QQ(t){const e=tn.c(70),{connection:n,container:r,currentPath:s,onClose:a}=t,l=po(),c=q.useRef(null),[f,d]=q.useState(null),[m,p]=q.useState("");let g;e[0]!==n||e[1]!==r?(g=se=>{const{file:ce,key:ye}=se;return X3(n,r,ye,ce)},e[0]=n,e[1]=r,e[2]=g):g=e[2];let y;e[3]!==n||e[4]!==r||e[5]!==a||e[6]!==l?(y=()=>{l.invalidateQueries({queryKey:["storage-objects",n.id,r]}),a()},e[3]=n,e[4]=r,e[5]=a,e[6]=l,e[7]=y):y=e[7];let x;e[8]!==g||e[9]!==y?(x={mutationFn:g,onSuccess:y},e[8]=g,e[9]=y,e[10]=x):x=e[10];const S=uu(x);let E;e[11]!==s?(E=se=>{const ce=se.target.files;if(!ce||ce.length===0)return;const ye=ce[0];d(ye),p(s+ye.name)},e[11]=s,e[12]=E):E=e[12];const _=E;let k;e[13]!==m||e[14]!==f||e[15]!==S?(k=se=>{if(se.preventDefault(),f&&m.trim()){const ce=m.trim().replace(/^\/+/,"");S.mutate({file:f,key:ce})}},e[13]=m,e[14]=f,e[15]=S,e[16]=k):k=e[16];const R=k,N=ZQ;let L;e[17]!==a?(L=w.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:a}),e[17]=a,e[18]=L):L=e[18];let A;e[19]===Symbol.for("react.memo_cache_sentinel")?(A=w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:w.jsx(FE,{className:"w-4 h-4 text-blue-500"})}),w.jsx("h2",{className:"text-base font-semibold text-neutral-900 dark:text-neutral-100",children:"Upload File"})]}),e[19]=A):A=e[19];let I;e[20]===Symbol.for("react.memo_cache_sentinel")?(I=w.jsx(Cu,{className:"w-4 h-4 text-neutral-500"}),e[20]=I):I=e[20];let j;e[21]!==a?(j=w.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-neutral-200 dark:border-neutral-800",children:[A,w.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:I})]}),e[21]=a,e[22]=j):j=e[22];let P;e[23]!==s?(P=s&&`/${s.replace(/\/$/,"")}`,e[23]=s,e[24]=P):P=e[24];let M;e[25]!==r||e[26]!==P?(M=w.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Uploading to"," ",w.jsxs("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:[r,P]})]}),e[25]=r,e[26]=P,e[27]=M):M=e[27];let B;e[28]===Symbol.for("react.memo_cache_sentinel")?(B=w.jsx("label",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Select File"}),e[28]=B):B=e[28];let Q;e[29]!==_?(Q=w.jsx("input",{ref:c,type:"file",onChange:_,className:"hidden"}),e[29]=_,e[30]=Q):Q=e[30];let Z;e[31]!==f?(Z=f?w.jsxs("div",{className:"flex items-center gap-3 p-3 border border-neutral-200 dark:border-neutral-700 rounded-lg bg-neutral-50 dark:bg-neutral-800/50",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center",children:w.jsx(sd,{className:"w-5 h-5 text-blue-500"})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",children:f.name}),w.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[N(f.size),"  ",f.type||"Unknown type"]})]}),w.jsx("button",{type:"button",onClick:()=>c.current?.click(),className:"px-3 py-1.5 text-xs font-medium text-blue-500 hover:bg-blue-500/10 rounded-lg transition-colors",children:"Change"})]}):w.jsx("button",{type:"button",onClick:()=>c.current?.click(),className:"w-full p-6 border-2 border-dashed border-neutral-200 dark:border-neutral-700 rounded-lg hover:border-blue-500/50 hover:bg-blue-500/5 transition-colors group",children:w.jsxs("div",{className:"flex flex-col items-center gap-2",children:[w.jsx(vD,{className:"w-8 h-8 text-neutral-400 group-hover:text-blue-500 transition-colors"}),w.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 group-hover:text-blue-500 transition-colors",children:"Click to select a file"})]})}),e[31]=f,e[32]=Z):Z=e[32];let te;e[33]!==Q||e[34]!==Z?(te=w.jsxs("div",{className:"space-y-1.5",children:[B,Q,Z]}),e[33]=Q,e[34]=Z,e[35]=te):te=e[35];let V;e[36]!==m||e[37]!==f||e[38]!==S.isPending?(V=f&&w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Object Key (Path)"}),w.jsx("input",{type:"text",value:m,onChange:se=>p(se.target.value),placeholder:"path/to/file.txt",className:"w-full px-3 py-2 text-sm font-mono border border-neutral-200 dark:border-neutral-700 rounded-lg bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500",disabled:S.isPending}),w.jsx("p",{className:"text-[11px] text-neutral-400 dark:text-neutral-500",children:"Use forward slashes to create a folder structure (e.g., folder/subfolder/file.pdf)"})]}),e[36]=m,e[37]=f,e[38]=S.isPending,e[39]=V):V=e[39];let F;e[40]!==S.error?(F=S.error&&w.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:w.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:S.error instanceof Error?S.error.message:"Failed to upload file"})}),e[40]=S.error,e[41]=F):F=e[41];let X;e[42]!==a||e[43]!==S.isPending?(X=w.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-lg transition-colors",disabled:S.isPending,children:"Cancel"}),e[42]=a,e[43]=S.isPending,e[44]=X):X=e[44];let oe;e[45]!==m||e[46]!==f||e[47]!==S.isPending?(oe=!f||!m.trim()||S.isPending,e[45]=m,e[46]=f,e[47]=S.isPending,e[48]=oe):oe=e[48];let ae;e[49]!==S.isPending?(ae=S.isPending&&w.jsx(Ki,{className:"w-3.5 h-3.5 animate-spin"}),e[49]=S.isPending,e[50]=ae):ae=e[50];let z;e[51]!==oe||e[52]!==ae?(z=w.jsxs("button",{type:"submit",disabled:oe,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors flex items-center gap-2",children:[ae,"Upload"]}),e[51]=oe,e[52]=ae,e[53]=z):z=e[53];let D;e[54]!==X||e[55]!==z?(D=w.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[X,z]}),e[54]=X,e[55]=z,e[56]=D):D=e[56];let $;e[57]!==R||e[58]!==M||e[59]!==te||e[60]!==V||e[61]!==F||e[62]!==D?($=w.jsxs("form",{onSubmit:R,className:"p-5 space-y-4",children:[M,te,V,F,D]}),e[57]=R,e[58]=M,e[59]=te,e[60]=V,e[61]=F,e[62]=D,e[63]=$):$=e[63];let T;e[64]!==$||e[65]!==j?(T=w.jsxs("div",{className:"relative w-full max-w-lg bg-white dark:bg-neutral-900 rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[j,$]}),e[64]=$,e[65]=j,e[66]=T):T=e[66];let K;return e[67]!==T||e[68]!==L?(K=w.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[L,T]}),e[67]=T,e[68]=L,e[69]=K):K=e[69],K}function ZQ(t){if(t===0)return"0 B";const e=["B","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,n)).toFixed(1))+" "+e[n]}const YQ={folder:jE,image:LE,document:zE,code:DE,archive:IE,file:sd};function JQ(t){const e=tn.c(98),{connection:n,container:r,path:s,onNavigate:a}=t,l=po(),[c,f]=q.useState(null),[d,m]=q.useState(!1);let p;e[0]!==s?(p=s&&!s.endsWith("/")?s+"/":s,e[0]=s,e[1]=p):p=e[1];const g=p;let y;e[2]!==n.id||e[3]!==r||e[4]!==g?(y=["storage-objects",n.id,r,g],e[2]=n.id,e[3]=r,e[4]=g,e[5]=y):y=e[5];let x;e[6]!==n||e[7]!==r||e[8]!==g?(x=()=>Vd(n,r,{prefix:g,delimiter:"/"}),e[6]=n,e[7]=r,e[8]=g,e[9]=x):x=e[9];const S=!!n&&!!r;let E;e[10]!==y||e[11]!==x||e[12]!==S?(E={queryKey:y,queryFn:x,enabled:S},e[10]=y,e[11]=x,e[12]=S,e[13]=E):E=e[13];const{data:_,isLoading:k,error:R}=ys(E);let N;e[14]!==n||e[15]!==r?(N=Ae=>fk(n,r,[Ae]),e[14]=n,e[15]=r,e[16]=N):N=e[16];let L;e[17]!==n.id||e[18]!==r||e[19]!==l?(L=()=>{l.invalidateQueries({queryKey:["storage-objects",n.id,r]}),f(null)},e[17]=n.id,e[18]=r,e[19]=l,e[20]=L):L=e[20];let A;e[21]!==N||e[22]!==L?(A={mutationFn:N,onSuccess:L},e[21]=N,e[22]=L,e[23]=A):A=e[23];const I=uu(A);let j;e[24]!==n||e[25]!==r?(j=Ae=>dk(n,r,Ae),e[24]=n,e[25]=r,e[26]=j):j=e[26];let P;e[27]!==n.id||e[28]!==r||e[29]!==l?(P=()=>{l.invalidateQueries({queryKey:["storage-objects",n.id,r]})},e[27]=n.id,e[28]=r,e[29]=l,e[30]=P):P=e[30];let M;e[31]!==P||e[32]!==j?(M={mutationFn:j,onSuccess:P},e[31]=P,e[32]=j,e[33]=M):M=e[33];const B=uu(M);let Q;e[34]!==I||e[35]!==B?(Q=(Ae,me)=>{me.stopPropagation();const Ne=Ae.name.replace(/\/$/,"")||"/",be=Ae.isFolder?`Delete folder "${Ne}" and all its contents?`:`Delete "${Ne}"?`;if(confirm(be))if(Ae.isFolder){const ge=Ae.key;ge==="/"||ge===""?I.mutate(ge||"/"):B.mutate(ge)}else I.mutate(Ae.key)},e[34]=I,e[35]=B,e[36]=Q):Q=e[36];const Z=Q,te=I.isPending||B.isPending;let V;e:{if(!_){let me;e[37]===Symbol.for("react.memo_cache_sentinel")?(me=[],e[37]=me):me=e[37],V=me;break e}let Ae;if(e[38]!==_.objects||e[39]!==_.prefixes){const me=_.prefixes.map(eZ),Ne=_.objects.filter(WQ).map(XQ);Ae=[...me,...Ne],e[38]=_.objects,e[39]=_.prefixes,e[40]=Ae}else Ae=e[40];V=Ae}const F=V;let X;e[41]!==r||e[42]!==a?(X=Ae=>{Ae.isFolder?(a(r,Ae.key),f(null)):f(Ae.key)},e[41]=r,e[42]=a,e[43]=X):X=e[43];const oe=X;let ae;e[44]!==r||e[45]!==a||e[46]!==s?(ae=()=>{const Ae=W3(s);a(r,Ae?Ae+"/":""),f(null)},e[44]=r,e[45]=a,e[46]=s,e[47]=ae):ae=e[47];const z=ae;let D;e[48]!==r?(D={label:r,path:""},e[48]=r,e[49]=D):D=e[49];let $;if(e[50]!==s||e[51]!==D){if($=[D],s){const Ae=s.split("/").filter(Boolean);let me="";for(const Ne of Ae)me=me+(Ne+"/"),$.push({label:Ne,path:me})}e[50]=s,e[51]=D,e[52]=$}else $=e[52];const T=$,K=n.provider==="s3"?"S3":"Azure Blob";let se;e[53]!==K?(se=w.jsxs("span",{className:"text-neutral-400 dark:text-neutral-500 shrink-0",children:[K,":"]}),e[53]=K,e[54]=se):se=e[54];let ce;e[55]!==r||e[56]!==a||e[57]!==T?(ce=T.map((Ae,me)=>w.jsxs("span",{className:"flex items-center shrink-0",children:[me>0&&w.jsx(p0,{className:"w-4 h-4 text-neutral-400 mx-1"}),w.jsx("button",{onClick:()=>a(r,Ae.path),className:`hover:text-blue-500 transition-colors ${me===T.length-1?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-500 dark:text-neutral-400"}`,children:Ae.label})]},Ae.path)),e[55]=r,e[56]=a,e[57]=T,e[58]=ce):ce=e[58];let ye;e[59]!==se||e[60]!==ce?(ye=w.jsxs("div",{className:"flex items-center gap-1 text-sm overflow-x-auto",children:[se,ce]}),e[59]=se,e[60]=ce,e[61]=ye):ye=e[61];let ke;e[62]===Symbol.for("react.memo_cache_sentinel")?(ke=()=>m(!0),e[62]=ke):ke=e[62];let ve;e[63]===Symbol.for("react.memo_cache_sentinel")?(ve=w.jsx("div",{className:"ml-4 shrink-0",children:w.jsxs("button",{onClick:ke,className:"px-3 py-1.5 rounded-lg bg-blue-500 hover:bg-blue-600 text-white text-xs font-medium flex items-center gap-2 transition-colors",title:"Upload file",children:[w.jsx(FE,{className:"w-3.5 h-3.5"}),"Upload"]})}),e[63]=ve):ve=e[63];let Ue;e[64]!==ye?(Ue=w.jsx("div",{className:"px-4 py-3 border-b border-neutral-200 dark:border-white/8",children:w.jsxs("div",{className:"flex items-center justify-between",children:[ye,ve]})}),e[64]=ye,e[65]=Ue):Ue=e[65];let Fe;e[66]===Symbol.for("react.memo_cache_sentinel")?(Fe=()=>f(null),e[66]=Fe):Fe=e[66];let Ge;e[67]!==R||e[68]!==Z||e[69]!==oe||e[70]!==z||e[71]!==te||e[72]!==k||e[73]!==F||e[74]!==s||e[75]!==c?(Ge=w.jsx("div",{className:"flex-1 overflow-auto",onClick:Fe,children:k?w.jsx("div",{className:"flex items-center justify-center h-full",children:w.jsx(Ki,{className:"w-6 h-6 text-neutral-400 animate-spin"})}):R?w.jsx("div",{className:"flex items-center justify-center h-full text-red-500 text-sm",children:"Failed to load objects"}):F.length===0?w.jsx("div",{className:"flex items-center justify-center h-full text-neutral-400 dark:text-neutral-600 text-sm",children:"This folder is empty"}):w.jsx(tZ,{items:F,selectedKey:c,path:s,onItemClick:oe,onNavigateUp:z,onDeleteItem:Z,isDeleting:te})}),e[67]=R,e[68]=Z,e[69]=oe,e[70]=z,e[71]=te,e[72]=k,e[73]=F,e[74]=s,e[75]=c,e[76]=Ge):Ge=e[76];const yt=F.length===1?"item":"items",lt=_?.isTruncated&&" (truncated)";let it;e[77]!==F.length||e[78]!==yt||e[79]!==lt?(it=w.jsxs("div",{className:"px-4 py-2 border-t border-neutral-200 dark:border-white/8 text-xs text-neutral-400 dark:text-neutral-500",children:[F.length," ",yt,lt]}),e[77]=F.length,e[78]=yt,e[79]=lt,e[80]=it):it=e[80];let ht;e[81]!==Ue||e[82]!==Ge||e[83]!==it?(ht=w.jsxs("div",{className:"flex-1 bg-white dark:bg-[#1a1a1a]/60 border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden flex flex-col min-w-0",children:[Ue,Ge,it]}),e[81]=Ue,e[82]=Ge,e[83]=it,e[84]=ht):ht=e[84];let Xe;e[85]!==n||e[86]!==r||e[87]!==c?(Xe=c&&w.jsx("div",{className:"w-80 shrink-0",children:w.jsx(VQ,{connection:n,container:r,objectKey:c,onClose:()=>f(null)})}),e[85]=n,e[86]=r,e[87]=c,e[88]=Xe):Xe=e[88];let rt;e[89]!==n||e[90]!==r||e[91]!==g||e[92]!==d?(rt=d&&w.jsx(QQ,{connection:n,container:r,currentPath:g,onClose:()=>m(!1)}),e[89]=n,e[90]=r,e[91]=g,e[92]=d,e[93]=rt):rt=e[93];let ft;return e[94]!==ht||e[95]!==Xe||e[96]!==rt?(ft=w.jsxs("div",{className:"flex-1 flex gap-2 min-h-0",children:[ht,Xe,rt]}),e[94]=ht,e[95]=Xe,e[96]=rt,e[97]=ft):ft=e[97],ft}function XQ(t){return{key:t.key,name:t.name,isFolder:!1,size:t.size,lastModified:t.lastModified,contentType:t.contentType}}function WQ(t){return!t.isFolder}function eZ(t){return{key:t,name:yu(t),isFolder:!0,size:0,lastModified:""}}function tZ({items:t,selectedKey:e,path:n,onItemClick:r,onNavigateUp:s,onDeleteItem:a,isDeleting:l}){const[c,f]=q.useState([]),d=q.useMemo(()=>[{accessorKey:"name",header:({column:p})=>w.jsxs("button",{className:"flex items-center gap-1 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors",onClick:()=>p.toggleSorting(p.getIsSorted()==="asc"),children:["Name",p.getIsSorted()==="asc"?w.jsx(Gl,{className:"w-3.5 h-3.5"}):p.getIsSorted()==="desc"?w.jsx(Bi,{className:"w-3.5 h-3.5"}):w.jsx(Nf,{className:"w-3.5 h-3.5 opacity-50"})]}),cell:({row:p})=>{const g=p.original,y=g.isFolder?"folder":pk(g.key),x=YQ[y],S=e===g.key;return w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(x,{className:`w-4 h-4 ${g.isFolder?"text-yellow-500":"text-neutral-400"}`}),w.jsx("span",{className:`truncate ${S?"text-blue-600 dark:text-blue-400":"text-neutral-700 dark:text-neutral-200"}`,children:g.name})]})}},{accessorKey:"size",header:({column:p})=>w.jsxs("button",{className:"flex items-center gap-1 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors ml-auto",onClick:()=>p.toggleSorting(p.getIsSorted()==="asc"),children:["Size",p.getIsSorted()==="asc"?w.jsx(Gl,{className:"w-3.5 h-3.5"}):p.getIsSorted()==="desc"?w.jsx(Bi,{className:"w-3.5 h-3.5"}):w.jsx(Nf,{className:"w-3.5 h-3.5 opacity-50"})]}),cell:({row:p})=>{const g=p.original;return w.jsx("div",{className:"text-right text-neutral-500 dark:text-neutral-400",children:g.isFolder?"-":hk(g.size)})},size:100},{accessorKey:"lastModified",header:({column:p})=>w.jsxs("button",{className:"flex items-center gap-1 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors ml-auto",onClick:()=>p.toggleSorting(p.getIsSorted()==="asc"),children:["Modified",p.getIsSorted()==="asc"?w.jsx(Gl,{className:"w-3.5 h-3.5"}):p.getIsSorted()==="desc"?w.jsx(Bi,{className:"w-3.5 h-3.5"}):w.jsx(Nf,{className:"w-3.5 h-3.5 opacity-50"})]}),cell:({row:p})=>{const g=p.original;return w.jsx("div",{className:"text-right text-neutral-500 dark:text-neutral-400",children:g.lastModified?nZ(g.lastModified):"-"})},size:160},{id:"actions",header:"",cell:({row:p})=>{const g=p.original;return w.jsx("button",{onClick:y=>a(g,y),disabled:l,className:"p-1 rounded opacity-0 group-hover:opacity-100 hover:bg-red-100 dark:hover:bg-red-500/10 transition-all disabled:opacity-50",title:"Delete",children:w.jsx(du,{className:"w-3.5 h-3.5 text-red-500"})})},size:40}],[e,a,l]),m=Lk({data:t,columns:d,state:{sorting:c},onSortingChange:f,getCoreRowModel:zk(),getSortedRowModel:jk()});return w.jsxs("table",{className:"w-full text-sm",children:[w.jsx("thead",{className:"sticky top-0 bg-neutral-50 dark:bg-[#1a1a1a] z-10",children:m.getHeaderGroups().map(p=>w.jsx("tr",{className:"border-b border-neutral-200 dark:border-white/8",children:p.headers.map(g=>w.jsx("th",{className:"px-4 py-2 text-left font-medium text-neutral-500 dark:text-neutral-400",style:{width:g.getSize()},children:g.isPlaceholder?null:md(g.column.columnDef.header,g.getContext())},g.id))},p.id))}),w.jsxs("tbody",{children:[n&&w.jsx("tr",{className:"hover:bg-neutral-50 dark:hover:bg-white/5 cursor-pointer border-b border-neutral-100 dark:border-white/5",onClick:p=>{p.stopPropagation(),s()},children:w.jsx("td",{className:"px-4 py-2",colSpan:4,children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(XN,{className:"w-4 h-4 text-neutral-400"}),w.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:".."})]})})}),m.getRowModel().rows.map(p=>{const g=e===p.original.key;return w.jsx("tr",{className:`group cursor-pointer border-b border-neutral-100 dark:border-white/5 ${g?"bg-blue-50 dark:bg-blue-500/10":"hover:bg-neutral-50 dark:hover:bg-white/5"}`,onClick:y=>{y.stopPropagation(),r(p.original)},children:p.getVisibleCells().map(y=>w.jsx("td",{className:"px-4 py-2",children:md(y.column.columnDef.cell,y.getContext())},y.id))},p.id)})]})]})}function nZ(t){try{return new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}catch{return t}}function rZ(t){const e=tn.c(9),{onAddConnection:n}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=w.jsxs("div",{className:"mb-6",children:[w.jsx("h1",{className:"text-2xl font-semibold text-neutral-700 dark:text-neutral-300 mb-2",children:"Welcome to Granite"}),w.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-500",children:"A unified interface for databases and object storage"})]}),e[0]=r):r=e[0];let s;e[1]===Symbol.for("react.memo_cache_sentinel")?(s=w.jsxs("div",{className:"p-4 rounded-lg bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/8",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/5 dark:bg-blue-500/10 flex items-center justify-center mx-auto mb-3",children:w.jsx(fu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),w.jsx("h3",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300 mb-1",children:"Database Connections"}),w.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:"PostgreSQL, MySQL, SQLite, SQL Server, and Oracle"})]}),e[1]=s):s=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=w.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[s,w.jsxs("div",{className:"p-4 rounded-lg bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/8",children:[w.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/5 dark:bg-orange-500/10 flex items-center justify-center mx-auto mb-3",children:w.jsx(PE,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),w.jsx("h3",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300 mb-1",children:"Object Storage"}),w.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:"Amazon S3 and Azure Blob Storage"})]})]}),e[2]=a):a=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=w.jsx($d,{className:"w-4 h-4"}),e[3]=l):l=e[3];let c;e[4]!==n?(c=w.jsxs("button",{onClick:n,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-neutral-100 hover:bg-neutral-200 dark:bg-white/5 dark:hover:bg-white/10 text-neutral-700 dark:text-neutral-300 text-sm font-medium transition-colors",children:[l,"Add Connection"]}),e[4]=n,e[5]=c):c=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=w.jsx("p",{className:"mt-6 text-xs text-neutral-400 dark:text-neutral-600",children:"You can have multiple connections open simultaneously"}),e[6]=f):f=e[6];let d;return e[7]!==c?(d=w.jsx("main",{className:"flex-1 flex items-center justify-center",children:w.jsxs("div",{className:"max-w-2xl px-8 text-center",children:[r,a,c,f]})}),e[7]=c,e[8]=d):d=e[8],d}const sZ=new lE;function iZ(){const t=Pd({strict:!1}),e=Fd(),n=t.connectionId,r=t.database,s=t.table,a=t.container,l=t._splat||"",f=(ak(K=>K.from({connections:Yl}).orderBy(({connections:se})=>se.createdAt,"desc"))?.data??[]).find(K=>K.id===n),d=f?Kd(f):!0,m=f?yk(f):!1,p=d?f:void 0,g=m?f:void 0,{data:y}=ys({queryKey:["tables",n,r],queryFn:()=>p&&r?mk(p.driver,p.dsn,r):[],enabled:!!p&&!!r}),{data:x}=ys({queryKey:["columns",n,r,y],queryFn:async()=>{if(!p||!r||!y?.length)return{};const K={},se=y.slice(0,50);return await Promise.all(se.map(async ce=>{try{K[ce]=await d5(p.driver,p.dsn,ce)}catch{K[ce]=[]}})),K},enabled:!!p&&!!r&&!!y?.length,staleTime:300*1e3}),S=q.useMemo(()=>{if(y)return{tables:y,columns:x??{}}},[y,x]),[E,_]=q.useState(""),[k,R]=q.useState("records"),N=q.useMemo(()=>p?m5(p.driver):["records","columns"],[p]),L=q.useCallback(()=>{R(null)},[]),[A,I]=q.useState(!1),j=q.useCallback(()=>I(K=>!K),[]),[P,M]=q.useState(!1),[B,Q]=q.useState(null),Z=uu({mutationFn:async K=>{if(!p)throw new Error("No database connection selected");const se=performance.now(),ce=await c5(p.driver,p.dsn,K),ye=performance.now()-se;return{response:ce,duration:ye}},onSuccess:K=>{Q(K)},onError:K=>{Q({response:{error:K instanceof Error?K.message:"Unknown error"},duration:0})}}),te=q.useCallback(async K=>(_(K),(await Z.mutateAsync(K)).response),[Z]),V=q.useCallback(K=>{e(K?{to:`/${K}`}:{to:"/"})},[e]),F=q.useCallback(K=>{n&&e({to:`/${n}/${K}`})},[e,n]),X=q.useCallback(K=>{!n||!r||(e({to:`/${n}/${r}/${K}`}),p&&(Z.mutate(my(K,p.driver)),R("records")))},[e,n,r,p,Z]),oe=q.useCallback(K=>{n&&e({to:`/${n}/container/${K}`})},[e,n]),ae=q.useCallback((K,se)=>{if(!n)return;const ce=se.replace(/^\/+/,"");e(ce?{to:`/${n}/container/${K}/${ce}`}:{to:`/${n}/container/${K}`})},[e,n]),z=q.useCallback(K=>{if(!p||!s)return;const se=g5(p.driver,s,K);se&&(_(se),Z.mutate(se),R(K))},[p,s,Z]),D=q.useCallback(async(K,se,ce)=>{if(!p||!s)return;const ye=B?.response?.columns?.[0]??"id",ke=K[ye];if(ke===void 0){console.error("Cannot update: no primary key found");return}const ve=Fe=>Fe===null?"NULL":typeof Fe=="number"?String(Fe):typeof Fe=="boolean"?Fe?"TRUE":"FALSE":`'${String(Fe).replace(/'/g,"''")}'`,Ue=`UPDATE ${s} SET ${se} = ${ve(ce)} WHERE ${ye} = ${ve(ke)}`;try{await Jl(p.driver,p.dsn,Ue)}catch(Fe){console.error("Update failed:",Fe)}},[p,s,B?.response?.columns]),$=q.useCallback(async K=>{if(!p||!s)return;const se=B?.response?.columns?.[0]??"id",ce=K[se];if(ce===void 0){console.error("Cannot delete: no primary key found");return}const ke=`DELETE FROM ${s} WHERE ${se} = ${(ve=>ve===null?"NULL":typeof ve=="number"?String(ve):typeof ve=="boolean"?ve?"TRUE":"FALSE":`'${String(ve).replace(/'/g,"''")}'`)(ce)}`;try{await Jl(p.driver,p.dsn,ke),Z.mutate(my(s,p.driver))}catch(ve){console.error("Delete failed:",ve)}},[f,s,B?.response?.columns,Z]),T=q.useMemo(()=>({setQuery:_,executeQuery:te,runQuerySilent:async K=>{if(!p)throw new Error("No database connection selected");return Au(p.driver,p.dsn,K)},runStatementSilent:async K=>{if(!p)throw new Error("No database connection selected");return Jl(p.driver,p.dsn,K)}}),[te,p]);return w.jsxs("div",{className:"h-screen flex bg-neutral-50 dark:bg-[#0d0d0d] py-2 pr-2 pl-1 gap-2",children:[w.jsx(x5,{activeConnectionId:n??null,activeDatabase:r??null,activeTable:s??null,onSelectConnection:V,onSelectDatabase:F,onSelectTable:X,activeContainer:a??null,activePath:l??null,onSelectContainer:oe,onSelectPath:ae,showAddModal:P,onAddModalClose:()=>M(!1)}),d&&f&&w.jsxs(w.Fragment,{children:[w.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden gap-2 min-w-0",children:[w.jsx("div",{className:"shrink-0",children:w.jsx(jP,{connection:p??null,selectedTable:s??null,onExecute:te,isLoading:Z.isPending,schema:S,value:E,onChange:_,onToggleAI:Ly().ai?.model?j:void 0,aiPanelOpen:A,supportedViews:N,onSelectView:z,activeView:k,onExpandEditor:L})}),w.jsx("div",{className:"flex-1 min-h-0",children:w.jsx(T6,{response:B?.response??null,duration:B?.duration??0,isLoading:Z.isPending,tableName:s,onUpdateCell:D,onDeleteRow:$})})]}),A&&Ly().ai?.model&&w.jsx($Q,{isOpen:A,onClose:j,connection:p??null,database:r??null,table:s??null,currentQuery:E,queryResult:B?.response??null,schema:S,setters:T})]}),m&&g&&a&&w.jsx(JQ,{connection:g,container:a,path:l,onNavigate:(K,se)=>{K!==a?oe(K):ae(K,se)}}),!f&&w.jsx(rZ,{onAddConnection:()=>M(!0)})]})}function aZ(){const t=tn.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=w.jsx(qM,{client:sZ,children:w.jsx(iZ,{})}),t[0]=e):e=t[0],e}OE.options.defaultComponent=aZ;function oZ(){const t=tn.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=w.jsx(PN,{router:OE}),t[0]=e):e=t[0],e}vM.createRoot(document.getElementById("root")).render(w.jsx(q.StrictMode,{children:w.jsx(oZ,{})}));
