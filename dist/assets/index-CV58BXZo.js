(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function D0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eg={exports:{}},Il={};var u_;function sI(){if(u_)return Il;u_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:a}}return Il.Fragment=e,Il.jsx=n,Il.jsxs=n,Il}var c_;function iI(){return c_||(c_=1,eg.exports=sI()),eg.exports}var x=iI(),tg={exports:{}},qe={};var f_;function aI(){if(f_)return qe;f_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(D){return D===null||typeof D!="object"?null:(D=g&&D[g]||D["@@iterator"],typeof D=="function"?D:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function _(D,q,M){this.props=D,this.context=q,this.refs=E,this.updater=M||S}_.prototype.isReactComponent={},_.prototype.setState=function(D,q){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,q,"setState")},_.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function k(){}k.prototype=_.prototype;function R(D,q,M){this.props=D,this.context=q,this.refs=E,this.updater=M||S}var O=R.prototype=new k;O.constructor=R,w(O,_.prototype),O.isPureReactComponent=!0;var L=Array.isArray;function A(){}var z={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function j(D,q,M){var se=M.ref;return{$$typeof:t,type:D,key:q,ref:se!==void 0?se:null,props:M}}function I(D,q){return j(D.type,q,D.props)}function F(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function G(D){var q={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(M){return q[M]})}var J=/\/+/g;function te(D,q){return typeof D=="object"&&D!==null&&D.key!=null?G(""+D.key):q.toString(36)}function H(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(A,A):(D.status="pending",D.then(function(q){D.status==="pending"&&(D.status="fulfilled",D.value=q)},function(q){D.status==="pending"&&(D.status="rejected",D.reason=q)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function $(D,q,M,se,ce){var he=typeof D;(he==="undefined"||he==="boolean")&&(D=null);var ve=!1;if(D===null)ve=!0;else switch(he){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(D.$$typeof){case t:case e:ve=!0;break;case m:return ve=D._init,$(ve(D._payload),q,M,se,ce)}}if(ve)return ce=ce(D),ve=se===""?"."+te(D,0):se,L(ce)?(M="",ve!=null&&(M=ve.replace(J,"$&/")+"/"),$(ce,q,M,"",function(pe){return pe})):ce!=null&&(F(ce)&&(ce=I(ce,M+(ce.key==null||D&&D.key===ce.key?"":(""+ce.key).replace(J,"$&/")+"/")+ve)),q.push(ce)),1;ve=0;var Ae=se===""?".":se+":";if(L(D))for(var _e=0;_e<D.length;_e++)se=D[_e],he=Ae+te(se,_e),ve+=$(se,q,M,he,ce);else if(_e=y(D),typeof _e=="function")for(D=_e.call(D),_e=0;!(se=D.next()).done;)se=se.value,he=Ae+te(se,_e++),ve+=$(se,q,M,he,ce);else if(he==="object"){if(typeof D.then=="function")return $(H(D),q,M,se,ce);throw q=String(D),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return ve}function W(D,q,M){if(D==null)return D;var se=[],ce=0;return $(D,se,"","",function(he){return q.call(M,he,ce++)}),se}function oe(D){if(D._status===-1){var q=D._result;q=q(),q.then(function(M){(D._status===0||D._status===-1)&&(D._status=1,D._result=M)},function(M){(D._status===0||D._status===-1)&&(D._status=2,D._result=M)}),D._status===-1&&(D._status=0,D._result=q)}if(D._status===1)return D._result.default;throw D._result}var Q=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},N={map:W,forEach:function(D,q,M){W(D,function(){q.apply(this,arguments)},M)},count:function(D){var q=0;return W(D,function(){q++}),q},toArray:function(D){return W(D,function(q){return q})||[]},only:function(D){if(!F(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return qe.Activity=p,qe.Children=N,qe.Component=_,qe.Fragment=n,qe.Profiler=s,qe.PureComponent=R,qe.StrictMode=r,qe.Suspense=f,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,qe.__COMPILER_RUNTIME={__proto__:null,c:function(D){return z.H.useMemoCache(D)}},qe.cache=function(D){return function(){return D.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(D,q,M){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var se=w({},D.props),ce=D.key;if(q!=null)for(he in q.key!==void 0&&(ce=""+q.key),q)!P.call(q,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&q.ref===void 0||(se[he]=q[he]);var he=arguments.length-2;if(he===1)se.children=M;else if(1<he){for(var ve=Array(he),Ae=0;Ae<he;Ae++)ve[Ae]=arguments[Ae+2];se.children=ve}return j(D.type,ce,se)},qe.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:a,_context:D},D},qe.createElement=function(D,q,M){var se,ce={},he=null;if(q!=null)for(se in q.key!==void 0&&(he=""+q.key),q)P.call(q,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ce[se]=q[se]);var ve=arguments.length-2;if(ve===1)ce.children=M;else if(1<ve){for(var Ae=Array(ve),_e=0;_e<ve;_e++)Ae[_e]=arguments[_e+2];ce.children=Ae}if(D&&D.defaultProps)for(se in ve=D.defaultProps,ve)ce[se]===void 0&&(ce[se]=ve[se]);return j(D,he,ce)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(D){return{$$typeof:c,render:D}},qe.isValidElement=F,qe.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:oe}},qe.memo=function(D,q){return{$$typeof:d,type:D,compare:q===void 0?null:q}},qe.startTransition=function(D){var q=z.T,M={};z.T=M;try{var se=D(),ce=z.S;ce!==null&&ce(M,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(A,Q)}catch(he){Q(he)}finally{q!==null&&M.types!==null&&(q.types=M.types),z.T=q}},qe.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},qe.use=function(D){return z.H.use(D)},qe.useActionState=function(D,q,M){return z.H.useActionState(D,q,M)},qe.useCallback=function(D,q){return z.H.useCallback(D,q)},qe.useContext=function(D){return z.H.useContext(D)},qe.useDebugValue=function(){},qe.useDeferredValue=function(D,q){return z.H.useDeferredValue(D,q)},qe.useEffect=function(D,q){return z.H.useEffect(D,q)},qe.useEffectEvent=function(D){return z.H.useEffectEvent(D)},qe.useId=function(){return z.H.useId()},qe.useImperativeHandle=function(D,q,M){return z.H.useImperativeHandle(D,q,M)},qe.useInsertionEffect=function(D,q){return z.H.useInsertionEffect(D,q)},qe.useLayoutEffect=function(D,q){return z.H.useLayoutEffect(D,q)},qe.useMemo=function(D,q){return z.H.useMemo(D,q)},qe.useOptimistic=function(D,q){return z.H.useOptimistic(D,q)},qe.useReducer=function(D,q,M){return z.H.useReducer(D,q,M)},qe.useRef=function(D){return z.H.useRef(D)},qe.useState=function(D){return z.H.useState(D)},qe.useSyncExternalStore=function(D,q,M){return z.H.useSyncExternalStore(D,q,M)},qe.useTransition=function(){return z.H.useTransition()},qe.version="19.2.3",qe}var d_;function Ao(){return d_||(d_=1,tg.exports=aI()),tg.exports}var U=Ao();const Nr=D0(U);var ng={exports:{}},Nl={},rg={exports:{}},sg={};var h_;function oI(){return h_||(h_=1,(function(t){function e($,W){var oe=$.length;$.push(W);e:for(;0<oe;){var Q=oe-1>>>1,N=$[Q];if(0<s(N,W))$[Q]=W,$[oe]=N,oe=Q;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var W=$[0],oe=$.pop();if(oe!==W){$[0]=oe;e:for(var Q=0,N=$.length,D=N>>>1;Q<D;){var q=2*(Q+1)-1,M=$[q],se=q+1,ce=$[se];if(0>s(M,oe))se<N&&0>s(ce,M)?($[Q]=ce,$[se]=oe,Q=se):($[Q]=M,$[q]=oe,Q=q);else if(se<N&&0>s(ce,oe))$[Q]=ce,$[se]=oe,Q=se;else break e}}return W}function s($,W){var oe=$.sortIndex-W.sortIndex;return oe!==0?oe:$.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],d=[],m=1,p=null,g=3,y=!1,S=!1,w=!1,E=!1,_=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function O($){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=$)r(d),W.sortIndex=W.expirationTime,e(f,W);else break;W=n(d)}}function L($){if(w=!1,O($),!S)if(n(f)!==null)S=!0,A||(A=!0,G());else{var W=n(d);W!==null&&H(L,W.startTime-$)}}var A=!1,z=-1,P=5,j=-1;function I(){return E?!0:!(t.unstable_now()-j<P)}function F(){if(E=!1,A){var $=t.unstable_now();j=$;var W=!0;try{e:{S=!1,w&&(w=!1,k(z),z=-1),y=!0;var oe=g;try{t:{for(O($),p=n(f);p!==null&&!(p.expirationTime>$&&I());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,g=p.priorityLevel;var N=Q(p.expirationTime<=$);if($=t.unstable_now(),typeof N=="function"){p.callback=N,O($),W=!0;break t}p===n(f)&&r(f),O($)}else r(f);p=n(f)}if(p!==null)W=!0;else{var D=n(d);D!==null&&H(L,D.startTime-$),W=!1}}break e}finally{p=null,g=oe,y=!1}W=void 0}}finally{W?G():A=!1}}}var G;if(typeof R=="function")G=function(){R(F)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,te=J.port2;J.port1.onmessage=F,G=function(){te.postMessage(null)}}else G=function(){_(F,0)};function H($,W){z=_(function(){$(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var oe=g;g=W;try{return $()}finally{g=oe}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function($,W){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var oe=g;g=$;try{return W()}finally{g=oe}},t.unstable_scheduleCallback=function($,W,oe){var Q=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Q+oe:Q):oe=Q,$){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=oe+N,$={id:m++,callback:W,priorityLevel:$,startTime:oe,expirationTime:N,sortIndex:-1},oe>Q?($.sortIndex=oe,e(d,$),n(f)===null&&$===n(d)&&(w?(k(z),z=-1):w=!0,H(L,oe-Q))):($.sortIndex=N,e(f,$),S||y||(S=!0,A||(A=!0,G()))),$},t.unstable_shouldYield=I,t.unstable_wrapCallback=function($){var W=g;return function(){var oe=g;g=W;try{return $.apply(this,arguments)}finally{g=oe}}}})(sg)),sg}var p_;function lI(){return p_||(p_=1,rg.exports=oI()),rg.exports}var ig={exports:{}},hn={};var m_;function uI(){if(m_)return hn;m_=1;var t=Ao();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,d,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:f,containerInfo:d,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hn.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,m)},hn.flushSync=function(f){var d=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=d,r.p=m,r.d.f()}},hn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},hn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},hn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,p=c(m,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):m==="script"&&r.d.X(f,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},hn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},hn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,p=c(m,d.crossOrigin);r.d.L(f,m,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},hn.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=c(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},hn.requestFormReset=function(f){r.d.r(f)},hn.unstable_batchedUpdates=function(f,d){return f(d)},hn.useFormState=function(f,d,m){return l.H.useFormState(f,d,m)},hn.useFormStatus=function(){return l.H.useHostTransitionStatus()},hn.version="19.2.3",hn}var g_;function FE(){if(g_)return ig.exports;g_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ig.exports=uI(),ig.exports}var y_;function cI(){if(y_)return Nl;y_=1;var t=lI(),e=Ao(),n=FE();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function c(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(a(i)!==i)throw Error(r(188))}function d(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var u=i,h=o;;){var v=u.return;if(v===null)break;var b=v.alternate;if(b===null){if(h=v.return,h!==null){u=h;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===u)return f(v),i;if(b===h)return f(v),o;b=b.sibling}throw Error(r(188))}if(u.return!==h.return)u=v,h=b;else{for(var C=!1,T=v.child;T;){if(T===u){C=!0,u=v,h=b;break}if(T===h){C=!0,h=v,u=b;break}T=T.sibling}if(!C){for(T=b.child;T;){if(T===u){C=!0,u=b,h=v;break}if(T===h){C=!0,h=b,u=v;break}T=T.sibling}if(!C)throw Error(r(189))}}if(u.alternate!==h)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),R=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=F&&i[F]||i["@@iterator"],typeof i=="function"?i:null)}var J=Symbol.for("react.client.reference");function te(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===J?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case _:return"Profiler";case E:return"StrictMode";case L:return"Suspense";case A:return"SuspenseList";case j:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case R:return i.displayName||"Context";case k:return(i._context.displayName||"Context")+".Consumer";case O:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case z:return o=i.displayName||null,o!==null?o:te(i.type)||"Memo";case P:o=i._payload,i=i._init;try{return te(i(o))}catch{}}return null}var H=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},Q=[],N=-1;function D(i){return{current:i}}function q(i){0>N||(i.current=Q[N],Q[N]=null,N--)}function M(i,o){N++,Q[N]=i.current,i.current=o}var se=D(null),ce=D(null),he=D(null),ve=D(null);function Ae(i,o){switch(M(he,o),M(ce,i),M(se,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?Ix(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=Ix(o),i=Nx(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(se),M(se,i)}function _e(){q(se),q(ce),q(he)}function pe(i){i.memoizedState!==null&&M(ve,i);var o=se.current,u=Nx(o,i.type);o!==u&&(M(ce,i),M(se,u))}function Ee(i){ce.current===i&&(q(se),q(ce)),ve.current===i&&(q(ve),Al._currentValue=oe)}var Me,Ze;function je(i){if(Me===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Me=o&&o[1]||"",Ze=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Me+i+Ze}var Ye=!1;function st(i,o){if(!i||Ye)return"";Ye=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(re){var ee=re}Reflect.construct(i,[],le)}else{try{le.call()}catch(re){ee=re}i.call(le.prototype)}}else{try{throw Error()}catch(re){ee=re}(le=i())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(re){if(re&&ee&&typeof re.stack=="string")return[re.stack,ee.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),C=b[0],T=b[1];if(C&&T){var B=C.split(`
`),Y=T.split(`
`);for(v=h=0;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;for(;v<Y.length&&!Y[v].includes("DetermineComponentFrameRoot");)v++;if(h===B.length||v===Y.length)for(h=B.length-1,v=Y.length-1;1<=h&&0<=v&&B[h]!==Y[v];)v--;for(;1<=h&&0<=v;h--,v--)if(B[h]!==Y[v]){if(h!==1||v!==1)do if(h--,v--,0>v||B[h]!==Y[v]){var ie=`
`+B[h].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=h&&0<=v);break}}}finally{Ye=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?je(u):""}function Je(i,o){switch(i.tag){case 26:case 27:case 5:return je(i.type);case 16:return je("Lazy");case 13:return i.child!==o&&o!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return st(i.type,!1);case 11:return st(i.type.render,!1);case 1:return st(i.type,!0);case 31:return je("Activity");default:return""}}function at(i){try{var o="",u=null;do o+=Je(i,u),u=i,i=i.return;while(i);return o}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var ht=Object.prototype.hasOwnProperty,Oe=t.unstable_scheduleCallback,ge=t.unstable_cancelCallback,Le=t.unstable_shouldYield,be=t.unstable_requestPaint,ye=t.unstable_now,Ve=t.unstable_getCurrentPriorityLevel,ne=t.unstable_ImmediatePriority,fe=t.unstable_UserBlockingPriority,Ce=t.unstable_NormalPriority,ke=t.unstable_LowPriority,Se=t.unstable_IdlePriority,Ue=t.log,vt=t.unstable_setDisableYieldValue,ut=null,ct=null;function Rn(i){if(typeof Ue=="function"&&vt(i),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(ut,i)}catch{}}var xt=Math.clz32?Math.clz32:qM,Rs=Math.log,kr=Math.LN2;function qM(i){return i>>>=0,i===0?32:31-(Rs(i)/kr|0)|0}var rc=256,sc=262144,ic=4194304;function Si(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ac(i,o,u){var h=i.pendingLanes;if(h===0)return 0;var v=0,b=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var T=h&134217727;return T!==0?(h=T&~b,h!==0?v=Si(h):(C&=T,C!==0?v=Si(C):u||(u=T&~i,u!==0&&(v=Si(u))))):(T=h&~b,T!==0?v=Si(T):C!==0?v=Si(C):u||(u=h&~i,u!==0&&(v=Si(u)))),v===0?0:o!==0&&o!==v&&(o&b)===0&&(b=v&-v,u=o&-o,b>=u||b===32&&(u&4194048)!==0)?o:v}function Bo(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function HM(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hb(){var i=ic;return ic<<=1,(ic&62914560)===0&&(ic=4194304),i}function Uh(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Uo(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function KM(i,o,u,h,v,b){var C=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var T=i.entanglements,B=i.expirationTimes,Y=i.hiddenUpdates;for(u=C&~u;0<u;){var ie=31-xt(u),le=1<<ie;T[ie]=0,B[ie]=-1;var ee=Y[ie];if(ee!==null)for(Y[ie]=null,ie=0;ie<ee.length;ie++){var re=ee[ie];re!==null&&(re.lane&=-536870913)}u&=~le}h!==0&&pb(i,h,0),b!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=b&~(C&~o))}function pb(i,o,u){i.pendingLanes|=o,i.suspendedLanes&=~o;var h=31-xt(o);i.entangledLanes|=o,i.entanglements[h]=i.entanglements[h]|1073741824|u&261930}function mb(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var h=31-xt(u),v=1<<h;v&o|i[h]&o&&(i[h]|=o),u&=~v}}function gb(i,o){var u=o&-o;return u=(u&42)!==0?1:Vh(u),(u&(i.suspendedLanes|o))!==0?0:u}function Vh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function qh(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function yb(){var i=W.p;return i!==0?i:(i=window.event,i===void 0?32:n_(i.type))}function vb(i,o){var u=W.p;try{return W.p=i,o()}finally{W.p=u}}var As=Math.random().toString(36).slice(2),nn="__reactFiber$"+As,An="__reactProps$"+As,fa="__reactContainer$"+As,Hh="__reactEvents$"+As,GM="__reactListeners$"+As,QM="__reactHandles$"+As,bb="__reactResources$"+As,Vo="__reactMarker$"+As;function Kh(i){delete i[nn],delete i[An],delete i[Hh],delete i[GM],delete i[QM]}function da(i){var o=i[nn];if(o)return o;for(var u=i.parentNode;u;){if(o=u[fa]||u[nn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=$x(i);i!==null;){if(u=i[nn])return u;i=$x(i)}return o}i=u,u=i.parentNode}return null}function ha(i){if(i=i[nn]||i[fa]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function qo(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function pa(i){var o=i[bb];return o||(o=i[bb]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Yt(i){i[Vo]=!0}var Sb=new Set,wb={};function wi(i,o){ma(i,o),ma(i+"Capture",o)}function ma(i,o){for(wb[i]=o,i=0;i<o.length;i++)Sb.add(o[i])}var ZM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xb={},_b={};function YM(i){return ht.call(_b,i)?!0:ht.call(xb,i)?!1:ZM.test(i)?_b[i]=!0:(xb[i]=!0,!1)}function oc(i,o,u){if(YM(o))if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+u)}}function lc(i,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+u)}}function Jr(i,o,u,h){if(h===null)i.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(o,u,""+h)}}function or(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Cb(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function JM(i,o,u){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,b=h.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return v.call(this)},set:function(C){u=""+C,b.call(this,C)}}),Object.defineProperty(i,o,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Gh(i){if(!i._valueTracker){var o=Cb(i)?"checked":"value";i._valueTracker=JM(i,o,""+i[o])}}function Eb(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return i&&(h=Cb(i)?i.checked?"true":"false":i.value),i=h,i!==u?(o.setValue(i),!0):!1}function uc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var WM=/[\n"\\]/g;function lr(i){return i.replace(WM,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Qh(i,o,u,h,v,b,C,T){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),o!=null?C==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+or(o)):i.value!==""+or(o)&&(i.value=""+or(o)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),o!=null?Zh(i,C,or(o)):u!=null?Zh(i,C,or(u)):h!=null&&i.removeAttribute("value"),v==null&&b!=null&&(i.defaultChecked=!!b),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.name=""+or(T):i.removeAttribute("name")}function kb(i,o,u,h,v,b,C,T){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),o!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){Gh(i);return}u=u!=null?""+or(u):"",o=o!=null?""+or(o):u,T||o===i.value||(i.value=o),i.defaultValue=o}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=T?i.checked:!!h,i.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),Gh(i)}function Zh(i,o,u){o==="number"&&uc(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function ga(i,o,u,h){if(i=i.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<i.length;u++)v=o.hasOwnProperty("$"+i[u].value),i[u].selected!==v&&(i[u].selected=v),v&&h&&(i[u].defaultSelected=!0)}else{for(u=""+or(u),o=null,v=0;v<i.length;v++){if(i[v].value===u){i[v].selected=!0,h&&(i[v].defaultSelected=!0);return}o!==null||i[v].disabled||(o=i[v])}o!==null&&(o.selected=!0)}}function Rb(i,o,u){if(o!=null&&(o=""+or(o),o!==i.value&&(i.value=o),u==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=u!=null?""+or(u):""}function Ab(i,o,u,h){if(o==null){if(h!=null){if(u!=null)throw Error(r(92));if(H(h)){if(1<h.length)throw Error(r(93));h=h[0]}u=h}u==null&&(u=""),o=u}u=or(o),i.defaultValue=u,h=i.textContent,h===u&&h!==""&&h!==null&&(i.value=h),Gh(i)}function ya(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var XM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tb(i,o,u){var h=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":h?i.setProperty(o,u):typeof u!="number"||u===0||XM.has(o)?o==="float"?i.cssFloat=u:i[o]=(""+u).trim():i[o]=u+"px"}function Mb(i,o,u){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var v in o)h=o[v],o.hasOwnProperty(v)&&u[v]!==h&&Tb(i,v,h)}else for(var b in o)o.hasOwnProperty(b)&&Tb(i,b,o[b])}function Yh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cc(i){return tO.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Wr(){}var Jh=null;function Wh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var va=null,ba=null;function Ob(i){var o=ha(i);if(o&&(i=o.stateNode)){var u=i[An]||null;e:switch(i=o.stateNode,o.type){case"input":if(Qh(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+lr(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==i&&h.form===i.form){var v=h[An]||null;if(!v)throw Error(r(90));Qh(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)h=u[o],h.form===i.form&&Eb(h)}break e;case"textarea":Rb(i,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&ga(i,!!u.multiple,o,!1)}}}var Xh=!1;function Ib(i,o,u){if(Xh)return i(o,u);Xh=!0;try{var h=i(o);return h}finally{if(Xh=!1,(va!==null||ba!==null)&&(Jc(),va&&(o=va,i=ba,ba=va=null,Ob(o),i)))for(o=0;o<i.length;o++)Ob(i[o])}}function Ho(i,o){var u=i.stateNode;if(u===null)return null;var h=u[An]||null;if(h===null)return null;u=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,o,typeof u));return u}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ep=!1;if(Xr)try{var Ko={};Object.defineProperty(Ko,"passive",{get:function(){ep=!0}}),window.addEventListener("test",Ko,Ko),window.removeEventListener("test",Ko,Ko)}catch{ep=!1}var Ts=null,tp=null,fc=null;function Nb(){if(fc)return fc;var i,o=tp,u=o.length,h,v="value"in Ts?Ts.value:Ts.textContent,b=v.length;for(i=0;i<u&&o[i]===v[i];i++);var C=u-i;for(h=1;h<=C&&o[u-h]===v[b-h];h++);return fc=v.slice(i,1<h?1-h:void 0)}function dc(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function hc(){return!0}function Db(){return!1}function Tn(i){function o(u,h,v,b,C){this._reactName=u,this._targetInst=v,this.type=h,this.nativeEvent=b,this.target=C,this.currentTarget=null;for(var T in i)i.hasOwnProperty(T)&&(u=i[T],this[T]=u?u(b):b[T]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?hc:Db,this.isPropagationStopped=Db,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=hc)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=hc)},persist:function(){},isPersistent:hc}),o}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pc=Tn(xi),Go=p({},xi,{view:0,detail:0}),nO=Tn(Go),np,rp,Qo,mc=p({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ip,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Qo&&(Qo&&i.type==="mousemove"?(np=i.screenX-Qo.screenX,rp=i.screenY-Qo.screenY):rp=np=0,Qo=i),np)},movementY:function(i){return"movementY"in i?i.movementY:rp}}),zb=Tn(mc),rO=p({},mc,{dataTransfer:0}),sO=Tn(rO),iO=p({},Go,{relatedTarget:0}),sp=Tn(iO),aO=p({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),oO=Tn(aO),lO=p({},xi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),uO=Tn(lO),cO=p({},xi,{data:0}),Lb=Tn(cO),fO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pO(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=hO[i])?!!o[i]:!1}function ip(){return pO}var mO=p({},Go,{key:function(i){if(i.key){var o=fO[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=dc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?dO[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ip,charCode:function(i){return i.type==="keypress"?dc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?dc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),gO=Tn(mO),yO=p({},mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jb=Tn(yO),vO=p({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ip}),bO=Tn(vO),SO=p({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),wO=Tn(SO),xO=p({},mc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),_O=Tn(xO),CO=p({},xi,{newState:0,oldState:0}),EO=Tn(CO),kO=[9,13,27,32],ap=Xr&&"CompositionEvent"in window,Zo=null;Xr&&"documentMode"in document&&(Zo=document.documentMode);var RO=Xr&&"TextEvent"in window&&!Zo,Pb=Xr&&(!ap||Zo&&8<Zo&&11>=Zo),Fb=" ",$b=!1;function Bb(i,o){switch(i){case"keyup":return kO.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ub(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Sa=!1;function AO(i,o){switch(i){case"compositionend":return Ub(o);case"keypress":return o.which!==32?null:($b=!0,Fb);case"textInput":return i=o.data,i===Fb&&$b?null:i;default:return null}}function TO(i,o){if(Sa)return i==="compositionend"||!ap&&Bb(i,o)?(i=Nb(),fc=tp=Ts=null,Sa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Pb&&o.locale!=="ko"?null:o.data;default:return null}}var MO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vb(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!MO[i.type]:o==="textarea"}function qb(i,o,u,h){va?ba?ba.push(h):ba=[h]:va=h,o=sf(o,"onChange"),0<o.length&&(u=new pc("onChange","change",null,u,h),i.push({event:u,listeners:o}))}var Yo=null,Jo=null;function OO(i){kx(i,0)}function gc(i){var o=qo(i);if(Eb(o))return i}function Hb(i,o){if(i==="change")return o}var Kb=!1;if(Xr){var op;if(Xr){var lp="oninput"in document;if(!lp){var Gb=document.createElement("div");Gb.setAttribute("oninput","return;"),lp=typeof Gb.oninput=="function"}op=lp}else op=!1;Kb=op&&(!document.documentMode||9<document.documentMode)}function Qb(){Yo&&(Yo.detachEvent("onpropertychange",Zb),Jo=Yo=null)}function Zb(i){if(i.propertyName==="value"&&gc(Jo)){var o=[];qb(o,Jo,i,Wh(i)),Ib(OO,o)}}function IO(i,o,u){i==="focusin"?(Qb(),Yo=o,Jo=u,Yo.attachEvent("onpropertychange",Zb)):i==="focusout"&&Qb()}function NO(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return gc(Jo)}function DO(i,o){if(i==="click")return gc(o)}function zO(i,o){if(i==="input"||i==="change")return gc(o)}function LO(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Un=typeof Object.is=="function"?Object.is:LO;function Wo(i,o){if(Un(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var v=u[h];if(!ht.call(o,v)||!Un(i[v],o[v]))return!1}return!0}function Yb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Jb(i,o){var u=Yb(i);i=0;for(var h;u;){if(u.nodeType===3){if(h=i+u.textContent.length,i<=o&&h>=o)return{node:u,offset:o-i};i=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Yb(u)}}function Wb(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Wb(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Xb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=uc(i.document);o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=uc(i.document)}return o}function up(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var jO=Xr&&"documentMode"in document&&11>=document.documentMode,wa=null,cp=null,Xo=null,fp=!1;function eS(i,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;fp||wa==null||wa!==uc(h)||(h=wa,"selectionStart"in h&&up(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Xo&&Wo(Xo,h)||(Xo=h,h=sf(cp,"onSelect"),0<h.length&&(o=new pc("onSelect","select",null,o,u),i.push({event:o,listeners:h}),o.target=wa)))}function _i(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var xa={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionrun:_i("Transition","TransitionRun"),transitionstart:_i("Transition","TransitionStart"),transitioncancel:_i("Transition","TransitionCancel"),transitionend:_i("Transition","TransitionEnd")},dp={},tS={};Xr&&(tS=document.createElement("div").style,"AnimationEvent"in window||(delete xa.animationend.animation,delete xa.animationiteration.animation,delete xa.animationstart.animation),"TransitionEvent"in window||delete xa.transitionend.transition);function Ci(i){if(dp[i])return dp[i];if(!xa[i])return i;var o=xa[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in tS)return dp[i]=o[u];return i}var nS=Ci("animationend"),rS=Ci("animationiteration"),sS=Ci("animationstart"),PO=Ci("transitionrun"),FO=Ci("transitionstart"),$O=Ci("transitioncancel"),iS=Ci("transitionend"),aS=new Map,hp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hp.push("scrollEnd");function Rr(i,o){aS.set(i,o),wi(o,[i])}var yc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ur=[],_a=0,pp=0;function vc(){for(var i=_a,o=pp=_a=0;o<i;){var u=ur[o];ur[o++]=null;var h=ur[o];ur[o++]=null;var v=ur[o];ur[o++]=null;var b=ur[o];if(ur[o++]=null,h!==null&&v!==null){var C=h.pending;C===null?v.next=v:(v.next=C.next,C.next=v),h.pending=v}b!==0&&oS(u,v,b)}}function bc(i,o,u,h){ur[_a++]=i,ur[_a++]=o,ur[_a++]=u,ur[_a++]=h,pp|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function mp(i,o,u,h){return bc(i,o,u,h),Sc(i)}function Ei(i,o){return bc(i,null,null,o),Sc(i)}function oS(i,o,u){i.lanes|=u;var h=i.alternate;h!==null&&(h.lanes|=u);for(var v=!1,b=i.return;b!==null;)b.childLanes|=u,h=b.alternate,h!==null&&(h.childLanes|=u),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(v=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,v&&o!==null&&(v=31-xt(u),i=b.hiddenUpdates,h=i[v],h===null?i[v]=[o]:h.push(o),o.lane=u|536870912),b):null}function Sc(i){if(50<wl)throw wl=0,Cm=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Ca={};function BO(i,o,u,h){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(i,o,u,h){return new BO(i,o,u,h)}function gp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function es(i,o){var u=i.alternate;return u===null?(u=Vn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function lS(i,o){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,o=u.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function wc(i,o,u,h,v,b){var C=0;if(h=i,typeof i=="function")gp(i)&&(C=1);else if(typeof i=="string")C=K2(i,u,se.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case j:return i=Vn(31,u,o,v),i.elementType=j,i.lanes=b,i;case w:return ki(u.children,v,b,o);case E:C=8,v|=24;break;case _:return i=Vn(12,u,o,v|2),i.elementType=_,i.lanes=b,i;case L:return i=Vn(13,u,o,v),i.elementType=L,i.lanes=b,i;case A:return i=Vn(19,u,o,v),i.elementType=A,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:C=10;break e;case k:C=9;break e;case O:C=11;break e;case z:C=14;break e;case P:C=16,h=null;break e}C=29,u=Error(r(130,i===null?"null":typeof i,"")),h=null}return o=Vn(C,u,o,v),o.elementType=i,o.type=h,o.lanes=b,o}function ki(i,o,u,h){return i=Vn(7,i,h,o),i.lanes=u,i}function yp(i,o,u){return i=Vn(6,i,null,o),i.lanes=u,i}function uS(i){var o=Vn(18,null,null,0);return o.stateNode=i,o}function vp(i,o,u){return o=Vn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var cS=new WeakMap;function cr(i,o){if(typeof i=="object"&&i!==null){var u=cS.get(i);return u!==void 0?u:(o={value:i,source:o,stack:at(o)},cS.set(i,o),o)}return{value:i,source:o,stack:at(o)}}var Ea=[],ka=0,xc=null,el=0,fr=[],dr=0,Ms=null,Lr=1,jr="";function ts(i,o){Ea[ka++]=el,Ea[ka++]=xc,xc=i,el=o}function fS(i,o,u){fr[dr++]=Lr,fr[dr++]=jr,fr[dr++]=Ms,Ms=i;var h=Lr;i=jr;var v=32-xt(h)-1;h&=~(1<<v),u+=1;var b=32-xt(o)+v;if(30<b){var C=v-v%5;b=(h&(1<<C)-1).toString(32),h>>=C,v-=C,Lr=1<<32-xt(o)+v|u<<v|h,jr=b+i}else Lr=1<<b|u<<v|h,jr=i}function bp(i){i.return!==null&&(ts(i,1),fS(i,1,0))}function Sp(i){for(;i===xc;)xc=Ea[--ka],Ea[ka]=null,el=Ea[--ka],Ea[ka]=null;for(;i===Ms;)Ms=fr[--dr],fr[dr]=null,jr=fr[--dr],fr[dr]=null,Lr=fr[--dr],fr[dr]=null}function dS(i,o){fr[dr++]=Lr,fr[dr++]=jr,fr[dr++]=Ms,Lr=o.id,jr=o.overflow,Ms=i}var rn=null,kt=null,it=!1,Os=null,hr=!1,wp=Error(r(519));function Is(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tl(cr(o,i)),wp}function hS(i){var o=i.stateNode,u=i.type,h=i.memoizedProps;switch(o[nn]=i,o[An]=h,u){case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":case"embed":Xe("load",o);break;case"video":case"audio":for(u=0;u<_l.length;u++)Xe(_l[u],o);break;case"source":Xe("error",o);break;case"img":case"image":case"link":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"input":Xe("invalid",o),kb(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Xe("invalid",o);break;case"textarea":Xe("invalid",o),Ab(o,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||h.suppressHydrationWarning===!0||Mx(o.textContent,u)?(h.popover!=null&&(Xe("beforetoggle",o),Xe("toggle",o)),h.onScroll!=null&&Xe("scroll",o),h.onScrollEnd!=null&&Xe("scrollend",o),h.onClick!=null&&(o.onclick=Wr),o=!0):o=!1,o||Is(i,!0)}function pS(i){for(rn=i.return;rn;)switch(rn.tag){case 5:case 31:case 13:hr=!1;return;case 27:case 3:hr=!0;return;default:rn=rn.return}}function Ra(i){if(i!==rn)return!1;if(!it)return pS(i),it=!0,!1;var o=i.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Fm(i.type,i.memoizedProps)),u=!u),u&&kt&&Is(i),pS(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));kt=Fx(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));kt=Fx(i)}else o===27?(o=kt,Ks(i.type)?(i=qm,qm=null,kt=i):kt=o):kt=rn?mr(i.stateNode.nextSibling):null;return!0}function Ri(){kt=rn=null,it=!1}function xp(){var i=Os;return i!==null&&(Nn===null?Nn=i:Nn.push.apply(Nn,i),Os=null),i}function tl(i){Os===null?Os=[i]:Os.push(i)}var _p=D(null),Ai=null,ns=null;function Ns(i,o,u){M(_p,o._currentValue),o._currentValue=u}function rs(i){i._currentValue=_p.current,q(_p)}function Cp(i,o,u){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===u)break;i=i.return}}function Ep(i,o,u,h){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var b=v.dependencies;if(b!==null){var C=v.child;b=b.firstContext;e:for(;b!==null;){var T=b;b=v;for(var B=0;B<o.length;B++)if(T.context===o[B]){b.lanes|=u,T=b.alternate,T!==null&&(T.lanes|=u),Cp(b.return,u,i),h||(C=null);break e}b=T.next}}else if(v.tag===18){if(C=v.return,C===null)throw Error(r(341));C.lanes|=u,b=C.alternate,b!==null&&(b.lanes|=u),Cp(C,u,i),C=null}else C=v.child;if(C!==null)C.return=v;else for(C=v;C!==null;){if(C===i){C=null;break}if(v=C.sibling,v!==null){v.return=C.return,C=v;break}C=C.return}v=C}}function Aa(i,o,u,h){i=null;for(var v=o,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var C=v.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var T=v.type;Un(v.pendingProps.value,C.value)||(i!==null?i.push(T):i=[T])}}else if(v===ve.current){if(C=v.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(Al):i=[Al])}v=v.return}i!==null&&Ep(o,i,u,h),o.flags|=262144}function _c(i){for(i=i.firstContext;i!==null;){if(!Un(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ti(i){Ai=i,ns=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function sn(i){return mS(Ai,i)}function Cc(i,o){return Ai===null&&Ti(i),mS(i,o)}function mS(i,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},ns===null){if(i===null)throw Error(r(308));ns=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else ns=ns.next=o;return u}var UO=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(u,h){i.push(h)}};this.abort=function(){o.aborted=!0,i.forEach(function(u){return u()})}},VO=t.unstable_scheduleCallback,qO=t.unstable_NormalPriority,zt={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kp(){return{controller:new UO,data:new Map,refCount:0}}function nl(i){i.refCount--,i.refCount===0&&VO(qO,function(){i.controller.abort()})}var rl=null,Rp=0,Ta=0,Ma=null;function HO(i,o){if(rl===null){var u=rl=[];Rp=0,Ta=Mm(),Ma={status:"pending",value:void 0,then:function(h){u.push(h)}}}return Rp++,o.then(gS,gS),o}function gS(){if(--Rp===0&&rl!==null){Ma!==null&&(Ma.status="fulfilled");var i=rl;rl=null,Ta=0,Ma=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function KO(i,o){var u=[],h={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return i.then(function(){h.status="fulfilled",h.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(h.status="rejected",h.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),h}var yS=$.S;$.S=function(i,o){ex=ye(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&HO(i,o),yS!==null&&yS(i,o)};var Mi=D(null);function Ap(){var i=Mi.current;return i!==null?i:_t.pooledCache}function Ec(i,o){o===null?M(Mi,Mi.current):M(Mi,o.pool)}function vS(){var i=Ap();return i===null?null:{parent:zt._currentValue,pool:i}}var Oa=Error(r(460)),Tp=Error(r(474)),kc=Error(r(542)),Rc={then:function(){}};function bS(i){return i=i.status,i==="fulfilled"||i==="rejected"}function SS(i,o,u){switch(u=i[u],u===void 0?i.push(o):u!==o&&(o.then(Wr,Wr),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,xS(i),i;default:if(typeof o.status=="string")o.then(Wr,Wr);else{if(i=_t,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(h){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=h}},function(h){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,xS(i),i}throw Ii=o,Oa}}function Oi(i){try{var o=i._init;return o(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Ii=u,Oa):u}}var Ii=null;function wS(){if(Ii===null)throw Error(r(459));var i=Ii;return Ii=null,i}function xS(i){if(i===Oa||i===kc)throw Error(r(483))}var Ia=null,sl=0;function Ac(i){var o=sl;return sl+=1,Ia===null&&(Ia=[]),SS(Ia,i,o)}function il(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Tc(i,o){throw o.$$typeof===g?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function _S(i){function o(K,V){if(i){var Z=K.deletions;Z===null?(K.deletions=[V],K.flags|=16):Z.push(V)}}function u(K,V){if(!i)return null;for(;V!==null;)o(K,V),V=V.sibling;return null}function h(K){for(var V=new Map;K!==null;)K.key!==null?V.set(K.key,K):V.set(K.index,K),K=K.sibling;return V}function v(K,V){return K=es(K,V),K.index=0,K.sibling=null,K}function b(K,V,Z){return K.index=Z,i?(Z=K.alternate,Z!==null?(Z=Z.index,Z<V?(K.flags|=67108866,V):Z):(K.flags|=67108866,V)):(K.flags|=1048576,V)}function C(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function T(K,V,Z,ae){return V===null||V.tag!==6?(V=yp(Z,K.mode,ae),V.return=K,V):(V=v(V,Z),V.return=K,V)}function B(K,V,Z,ae){var Ie=Z.type;return Ie===w?ie(K,V,Z.props.children,ae,Z.key):V!==null&&(V.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===P&&Oi(Ie)===V.type)?(V=v(V,Z.props),il(V,Z),V.return=K,V):(V=wc(Z.type,Z.key,Z.props,null,K.mode,ae),il(V,Z),V.return=K,V)}function Y(K,V,Z,ae){return V===null||V.tag!==4||V.stateNode.containerInfo!==Z.containerInfo||V.stateNode.implementation!==Z.implementation?(V=vp(Z,K.mode,ae),V.return=K,V):(V=v(V,Z.children||[]),V.return=K,V)}function ie(K,V,Z,ae,Ie){return V===null||V.tag!==7?(V=ki(Z,K.mode,ae,Ie),V.return=K,V):(V=v(V,Z),V.return=K,V)}function le(K,V,Z){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=yp(""+V,K.mode,Z),V.return=K,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case y:return Z=wc(V.type,V.key,V.props,null,K.mode,Z),il(Z,V),Z.return=K,Z;case S:return V=vp(V,K.mode,Z),V.return=K,V;case P:return V=Oi(V),le(K,V,Z)}if(H(V)||G(V))return V=ki(V,K.mode,Z,null),V.return=K,V;if(typeof V.then=="function")return le(K,Ac(V),Z);if(V.$$typeof===R)return le(K,Cc(K,V),Z);Tc(K,V)}return null}function ee(K,V,Z,ae){var Ie=V!==null?V.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ie!==null?null:T(K,V,""+Z,ae);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return Z.key===Ie?B(K,V,Z,ae):null;case S:return Z.key===Ie?Y(K,V,Z,ae):null;case P:return Z=Oi(Z),ee(K,V,Z,ae)}if(H(Z)||G(Z))return Ie!==null?null:ie(K,V,Z,ae,null);if(typeof Z.then=="function")return ee(K,V,Ac(Z),ae);if(Z.$$typeof===R)return ee(K,V,Cc(K,Z),ae);Tc(K,Z)}return null}function re(K,V,Z,ae,Ie){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return K=K.get(Z)||null,T(V,K,""+ae,Ie);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case y:return K=K.get(ae.key===null?Z:ae.key)||null,B(V,K,ae,Ie);case S:return K=K.get(ae.key===null?Z:ae.key)||null,Y(V,K,ae,Ie);case P:return ae=Oi(ae),re(K,V,Z,ae,Ie)}if(H(ae)||G(ae))return K=K.get(Z)||null,ie(V,K,ae,Ie,null);if(typeof ae.then=="function")return re(K,V,Z,Ac(ae),Ie);if(ae.$$typeof===R)return re(K,V,Z,Cc(V,ae),Ie);Tc(V,ae)}return null}function we(K,V,Z,ae){for(var Ie=null,ft=null,Re=V,Ke=V=0,nt=null;Re!==null&&Ke<Z.length;Ke++){Re.index>Ke?(nt=Re,Re=null):nt=Re.sibling;var dt=ee(K,Re,Z[Ke],ae);if(dt===null){Re===null&&(Re=nt);break}i&&Re&&dt.alternate===null&&o(K,Re),V=b(dt,V,Ke),ft===null?Ie=dt:ft.sibling=dt,ft=dt,Re=nt}if(Ke===Z.length)return u(K,Re),it&&ts(K,Ke),Ie;if(Re===null){for(;Ke<Z.length;Ke++)Re=le(K,Z[Ke],ae),Re!==null&&(V=b(Re,V,Ke),ft===null?Ie=Re:ft.sibling=Re,ft=Re);return it&&ts(K,Ke),Ie}for(Re=h(Re);Ke<Z.length;Ke++)nt=re(Re,K,Ke,Z[Ke],ae),nt!==null&&(i&&nt.alternate!==null&&Re.delete(nt.key===null?Ke:nt.key),V=b(nt,V,Ke),ft===null?Ie=nt:ft.sibling=nt,ft=nt);return i&&Re.forEach(function(Js){return o(K,Js)}),it&&ts(K,Ke),Ie}function ze(K,V,Z,ae){if(Z==null)throw Error(r(151));for(var Ie=null,ft=null,Re=V,Ke=V=0,nt=null,dt=Z.next();Re!==null&&!dt.done;Ke++,dt=Z.next()){Re.index>Ke?(nt=Re,Re=null):nt=Re.sibling;var Js=ee(K,Re,dt.value,ae);if(Js===null){Re===null&&(Re=nt);break}i&&Re&&Js.alternate===null&&o(K,Re),V=b(Js,V,Ke),ft===null?Ie=Js:ft.sibling=Js,ft=Js,Re=nt}if(dt.done)return u(K,Re),it&&ts(K,Ke),Ie;if(Re===null){for(;!dt.done;Ke++,dt=Z.next())dt=le(K,dt.value,ae),dt!==null&&(V=b(dt,V,Ke),ft===null?Ie=dt:ft.sibling=dt,ft=dt);return it&&ts(K,Ke),Ie}for(Re=h(Re);!dt.done;Ke++,dt=Z.next())dt=re(Re,K,Ke,dt.value,ae),dt!==null&&(i&&dt.alternate!==null&&Re.delete(dt.key===null?Ke:dt.key),V=b(dt,V,Ke),ft===null?Ie=dt:ft.sibling=dt,ft=dt);return i&&Re.forEach(function(rI){return o(K,rI)}),it&&ts(K,Ke),Ie}function wt(K,V,Z,ae){if(typeof Z=="object"&&Z!==null&&Z.type===w&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:e:{for(var Ie=Z.key;V!==null;){if(V.key===Ie){if(Ie=Z.type,Ie===w){if(V.tag===7){u(K,V.sibling),ae=v(V,Z.props.children),ae.return=K,K=ae;break e}}else if(V.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===P&&Oi(Ie)===V.type){u(K,V.sibling),ae=v(V,Z.props),il(ae,Z),ae.return=K,K=ae;break e}u(K,V);break}else o(K,V);V=V.sibling}Z.type===w?(ae=ki(Z.props.children,K.mode,ae,Z.key),ae.return=K,K=ae):(ae=wc(Z.type,Z.key,Z.props,null,K.mode,ae),il(ae,Z),ae.return=K,K=ae)}return C(K);case S:e:{for(Ie=Z.key;V!==null;){if(V.key===Ie)if(V.tag===4&&V.stateNode.containerInfo===Z.containerInfo&&V.stateNode.implementation===Z.implementation){u(K,V.sibling),ae=v(V,Z.children||[]),ae.return=K,K=ae;break e}else{u(K,V);break}else o(K,V);V=V.sibling}ae=vp(Z,K.mode,ae),ae.return=K,K=ae}return C(K);case P:return Z=Oi(Z),wt(K,V,Z,ae)}if(H(Z))return we(K,V,Z,ae);if(G(Z)){if(Ie=G(Z),typeof Ie!="function")throw Error(r(150));return Z=Ie.call(Z),ze(K,V,Z,ae)}if(typeof Z.then=="function")return wt(K,V,Ac(Z),ae);if(Z.$$typeof===R)return wt(K,V,Cc(K,Z),ae);Tc(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,V!==null&&V.tag===6?(u(K,V.sibling),ae=v(V,Z),ae.return=K,K=ae):(u(K,V),ae=yp(Z,K.mode,ae),ae.return=K,K=ae),C(K)):u(K,V)}return function(K,V,Z,ae){try{sl=0;var Ie=wt(K,V,Z,ae);return Ia=null,Ie}catch(Re){if(Re===Oa||Re===kc)throw Re;var ft=Vn(29,Re,null,K.mode);return ft.lanes=ae,ft.return=K,ft}}}var Ni=_S(!0),CS=_S(!1),Ds=!1;function Mp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Op(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function zs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ls(i,o,u){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(pt&2)!==0){var v=h.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),h.pending=o,o=Sc(i),oS(i,null,u),o}return bc(i,h,o,u),Sc(i)}function al(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,mb(i,u)}}function Ip(i,o){var u=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var v=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?v=b=C:b=b.next=C,u=u.next}while(u!==null);b===null?v=b=o:b=b.next=o}else v=b=o;u={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}var Np=!1;function ol(){if(Np){var i=Ma;if(i!==null)throw i}}function ll(i,o,u,h){Np=!1;var v=i.updateQueue;Ds=!1;var b=v.firstBaseUpdate,C=v.lastBaseUpdate,T=v.shared.pending;if(T!==null){v.shared.pending=null;var B=T,Y=B.next;B.next=null,C===null?b=Y:C.next=Y,C=B;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,T=ie.lastBaseUpdate,T!==C&&(T===null?ie.firstBaseUpdate=Y:T.next=Y,ie.lastBaseUpdate=B))}if(b!==null){var le=v.baseState;C=0,ie=Y=B=null,T=b;do{var ee=T.lane&-536870913,re=ee!==T.lane;if(re?(tt&ee)===ee:(h&ee)===ee){ee!==0&&ee===Ta&&(Np=!0),ie!==null&&(ie=ie.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var we=i,ze=T;ee=o;var wt=u;switch(ze.tag){case 1:if(we=ze.payload,typeof we=="function"){le=we.call(wt,le,ee);break e}le=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=ze.payload,ee=typeof we=="function"?we.call(wt,le,ee):we,ee==null)break e;le=p({},le,ee);break e;case 2:Ds=!0}}ee=T.callback,ee!==null&&(i.flags|=64,re&&(i.flags|=8192),re=v.callbacks,re===null?v.callbacks=[ee]:re.push(ee))}else re={lane:ee,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ie===null?(Y=ie=re,B=le):ie=ie.next=re,C|=ee;if(T=T.next,T===null){if(T=v.shared.pending,T===null)break;re=T,T=re.next,re.next=null,v.lastBaseUpdate=re,v.shared.pending=null}}while(!0);ie===null&&(B=le),v.baseState=B,v.firstBaseUpdate=Y,v.lastBaseUpdate=ie,b===null&&(v.shared.lanes=0),Bs|=C,i.lanes=C,i.memoizedState=le}}function ES(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function kS(i,o){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)ES(u[i],o)}var Na=D(null),Mc=D(0);function RS(i,o){i=ds,M(Mc,i),M(Na,o),ds=i|o.baseLanes}function Dp(){M(Mc,ds),M(Na,Na.current)}function zp(){ds=Mc.current,q(Na),q(Mc)}var qn=D(null),pr=null;function js(i){var o=i.alternate;M(Nt,Nt.current&1),M(qn,i),pr===null&&(o===null||Na.current!==null||o.memoizedState!==null)&&(pr=i)}function Lp(i){M(Nt,Nt.current),M(qn,i),pr===null&&(pr=i)}function AS(i){i.tag===22?(M(Nt,Nt.current),M(qn,i),pr===null&&(pr=i)):Ps()}function Ps(){M(Nt,Nt.current),M(qn,qn.current)}function Hn(i){q(qn),pr===i&&(pr=null),q(Nt)}var Nt=D(0);function Oc(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Um(u)||Vm(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ss=0,He=null,bt=null,Lt=null,Ic=!1,Da=!1,Di=!1,Nc=0,ul=0,za=null,GO=0;function Ot(){throw Error(r(321))}function jp(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Un(i[u],o[u]))return!1;return!0}function Pp(i,o,u,h,v,b){return ss=b,He=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,$.H=i===null||i.memoizedState===null?fw:Xp,Di=!1,b=u(h,v),Di=!1,Da&&(b=MS(o,u,h,v)),TS(i),b}function TS(i){$.H=dl;var o=bt!==null&&bt.next!==null;if(ss=0,Lt=bt=He=null,Ic=!1,ul=0,za=null,o)throw Error(r(300));i===null||jt||(i=i.dependencies,i!==null&&_c(i)&&(jt=!0))}function MS(i,o,u,h){He=i;var v=0;do{if(Da&&(za=null),ul=0,Da=!1,25<=v)throw Error(r(301));if(v+=1,Lt=bt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}$.H=dw,b=o(u,h)}while(Da);return b}function QO(){var i=$.H,o=i.useState()[0];return o=typeof o.then=="function"?cl(o):o,i=i.useState()[0],(bt!==null?bt.memoizedState:null)!==i&&(He.flags|=1024),o}function Fp(){var i=Nc!==0;return Nc=0,i}function $p(i,o,u){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~u}function Bp(i){if(Ic){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Ic=!1}ss=0,Lt=bt=He=null,Da=!1,ul=Nc=0,za=null}function vn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?He.memoizedState=Lt=i:Lt=Lt.next=i,Lt}function Dt(){if(bt===null){var i=He.alternate;i=i!==null?i.memoizedState:null}else i=bt.next;var o=Lt===null?He.memoizedState:Lt.next;if(o!==null)Lt=o,bt=i;else{if(i===null)throw He.alternate===null?Error(r(467)):Error(r(310));bt=i,i={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Lt===null?He.memoizedState=Lt=i:Lt=Lt.next=i}return Lt}function Dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cl(i){var o=ul;return ul+=1,za===null&&(za=[]),i=SS(za,i,o),o=He,(Lt===null?o.memoizedState:Lt.next)===null&&(o=o.alternate,$.H=o===null||o.memoizedState===null?fw:Xp),i}function zc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return cl(i);if(i.$$typeof===R)return sn(i)}throw Error(r(438,String(i)))}function Up(i){var o=null,u=He.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var h=He.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Dc(),He.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(i),h=0;h<i;h++)u[h]=I;return o.index++,u}function is(i,o){return typeof o=="function"?o(i):o}function Lc(i){var o=Dt();return Vp(o,bt,i)}function Vp(i,o,u){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=u;var v=i.baseQueue,b=h.pending;if(b!==null){if(v!==null){var C=v.next;v.next=b.next,b.next=C}o.baseQueue=v=b,h.pending=null}if(b=i.baseState,v===null)i.memoizedState=b;else{o=v.next;var T=C=null,B=null,Y=o,ie=!1;do{var le=Y.lane&-536870913;if(le!==Y.lane?(tt&le)===le:(ss&le)===le){var ee=Y.revertLane;if(ee===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),le===Ta&&(ie=!0);else if((ss&ee)===ee){Y=Y.next,ee===Ta&&(ie=!0);continue}else le={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},B===null?(T=B=le,C=b):B=B.next=le,He.lanes|=ee,Bs|=ee;le=Y.action,Di&&u(b,le),b=Y.hasEagerState?Y.eagerState:u(b,le)}else ee={lane:le,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},B===null?(T=B=ee,C=b):B=B.next=ee,He.lanes|=le,Bs|=le;Y=Y.next}while(Y!==null&&Y!==o);if(B===null?C=b:B.next=T,!Un(b,i.memoizedState)&&(jt=!0,ie&&(u=Ma,u!==null)))throw u;i.memoizedState=b,i.baseState=C,i.baseQueue=B,h.lastRenderedState=b}return v===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function qp(i){var o=Dt(),u=o.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var h=u.dispatch,v=u.pending,b=o.memoizedState;if(v!==null){u.pending=null;var C=v=v.next;do b=i(b,C.action),C=C.next;while(C!==v);Un(b,o.memoizedState)||(jt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),u.lastRenderedState=b}return[b,h]}function OS(i,o,u){var h=He,v=Dt(),b=it;if(b){if(u===void 0)throw Error(r(407));u=u()}else u=o();var C=!Un((bt||v).memoizedState,u);if(C&&(v.memoizedState=u,jt=!0),v=v.queue,Gp(DS.bind(null,h,v,i),[i]),v.getSnapshot!==o||C||Lt!==null&&Lt.memoizedState.tag&1){if(h.flags|=2048,La(9,{destroy:void 0},NS.bind(null,h,v,u,o),null),_t===null)throw Error(r(349));b||(ss&127)!==0||IS(h,o,u)}return u}function IS(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=He.updateQueue,o===null?(o=Dc(),He.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function NS(i,o,u,h){o.value=u,o.getSnapshot=h,zS(o)&&LS(i)}function DS(i,o,u){return u(function(){zS(o)&&LS(i)})}function zS(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Un(i,u)}catch{return!0}}function LS(i){var o=Ei(i,2);o!==null&&Dn(o,i,2)}function Hp(i){var o=vn();if(typeof i=="function"){var u=i;if(i=u(),Di){Rn(!0);try{u()}finally{Rn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:i},o}function jS(i,o,u,h){return i.baseState=u,Vp(i,bt,typeof h=="function"?h:is)}function ZO(i,o,u,h,v){if(Fc(i))throw Error(r(485));if(i=o.action,i!==null){var b={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){b.listeners.push(C)}};$.T!==null?u(!0):b.isTransition=!1,h(b),u=o.pending,u===null?(b.next=o.pending=b,PS(o,b)):(b.next=u.next,o.pending=u.next=b)}}function PS(i,o){var u=o.action,h=o.payload,v=i.state;if(o.isTransition){var b=$.T,C={};$.T=C;try{var T=u(v,h),B=$.S;B!==null&&B(C,T),FS(i,o,T)}catch(Y){Kp(i,o,Y)}finally{b!==null&&C.types!==null&&(b.types=C.types),$.T=b}}else try{b=u(v,h),FS(i,o,b)}catch(Y){Kp(i,o,Y)}}function FS(i,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){$S(i,o,h)},function(h){return Kp(i,o,h)}):$S(i,o,u)}function $S(i,o,u){o.status="fulfilled",o.value=u,BS(o),i.state=u,o=i.pending,o!==null&&(u=o.next,u===o?i.pending=null:(u=u.next,o.next=u,PS(i,u)))}function Kp(i,o,u){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=u,BS(o),o=o.next;while(o!==h)}i.action=null}function BS(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function US(i,o){return o}function VS(i,o){if(it){var u=_t.formState;if(u!==null){e:{var h=He;if(it){if(kt){t:{for(var v=kt,b=hr;v.nodeType!==8;){if(!b){v=null;break t}if(v=mr(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){kt=mr(v.nextSibling),h=v.data==="F!";break e}}Is(h)}h=!1}h&&(o=u[0])}}return u=vn(),u.memoizedState=u.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:US,lastRenderedState:o},u.queue=h,u=lw.bind(null,He,h),h.dispatch=u,h=Hp(!1),b=Wp.bind(null,He,!1,h.queue),h=vn(),v={state:o,dispatch:null,action:i,pending:null},h.queue=v,u=ZO.bind(null,He,v,b,u),v.dispatch=u,h.memoizedState=i,[o,u,!1]}function qS(i){var o=Dt();return HS(o,bt,i)}function HS(i,o,u){if(o=Vp(i,o,US)[0],i=Lc(is)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=cl(o)}catch(C){throw C===Oa?kc:C}else h=o;o=Dt();var v=o.queue,b=v.dispatch;return u!==o.memoizedState&&(He.flags|=2048,La(9,{destroy:void 0},YO.bind(null,v,u),null)),[h,b,i]}function YO(i,o){i.action=o}function KS(i){var o=Dt(),u=bt;if(u!==null)return HS(o,u,i);Dt(),o=o.memoizedState,u=Dt();var h=u.queue.dispatch;return u.memoizedState=i,[o,h,!1]}function La(i,o,u,h){return i={tag:i,create:u,deps:h,inst:o,next:null},o=He.updateQueue,o===null&&(o=Dc(),He.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=i.next=i:(h=u.next,u.next=i,i.next=h,o.lastEffect=i),i}function GS(){return Dt().memoizedState}function jc(i,o,u,h){var v=vn();He.flags|=i,v.memoizedState=La(1|o,{destroy:void 0},u,h===void 0?null:h)}function Pc(i,o,u,h){var v=Dt();h=h===void 0?null:h;var b=v.memoizedState.inst;bt!==null&&h!==null&&jp(h,bt.memoizedState.deps)?v.memoizedState=La(o,b,u,h):(He.flags|=i,v.memoizedState=La(1|o,b,u,h))}function QS(i,o){jc(8390656,8,i,o)}function Gp(i,o){Pc(2048,8,i,o)}function JO(i){He.flags|=4;var o=He.updateQueue;if(o===null)o=Dc(),He.updateQueue=o,o.events=[i];else{var u=o.events;u===null?o.events=[i]:u.push(i)}}function ZS(i){var o=Dt().memoizedState;return JO({ref:o,nextImpl:i}),function(){if((pt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function YS(i,o){return Pc(4,2,i,o)}function JS(i,o){return Pc(4,4,i,o)}function WS(i,o){if(typeof o=="function"){i=i();var u=o(i);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function XS(i,o,u){u=u!=null?u.concat([i]):null,Pc(4,4,WS.bind(null,o,i),u)}function Qp(){}function ew(i,o){var u=Dt();o=o===void 0?null:o;var h=u.memoizedState;return o!==null&&jp(o,h[1])?h[0]:(u.memoizedState=[i,o],i)}function tw(i,o){var u=Dt();o=o===void 0?null:o;var h=u.memoizedState;if(o!==null&&jp(o,h[1]))return h[0];if(h=i(),Di){Rn(!0);try{i()}finally{Rn(!1)}}return u.memoizedState=[h,o],h}function Zp(i,o,u){return u===void 0||(ss&1073741824)!==0&&(tt&261930)===0?i.memoizedState=o:(i.memoizedState=u,i=nx(),He.lanes|=i,Bs|=i,u)}function nw(i,o,u,h){return Un(u,o)?u:Na.current!==null?(i=Zp(i,u,h),Un(i,o)||(jt=!0),i):(ss&42)===0||(ss&1073741824)!==0&&(tt&261930)===0?(jt=!0,i.memoizedState=u):(i=nx(),He.lanes|=i,Bs|=i,o)}function rw(i,o,u,h,v){var b=W.p;W.p=b!==0&&8>b?b:8;var C=$.T,T={};$.T=T,Wp(i,!1,o,u);try{var B=v(),Y=$.S;if(Y!==null&&Y(T,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ie=KO(B,h);fl(i,o,ie,Qn(i))}else fl(i,o,h,Qn(i))}catch(le){fl(i,o,{then:function(){},status:"rejected",reason:le},Qn())}finally{W.p=b,C!==null&&T.types!==null&&(C.types=T.types),$.T=C}}function WO(){}function Yp(i,o,u,h){if(i.tag!==5)throw Error(r(476));var v=sw(i).queue;rw(i,v,o,oe,u===null?WO:function(){return iw(i),u(h)})}function sw(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:oe},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:u},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function iw(i){var o=sw(i);o.next===null&&(o=i.alternate.memoizedState),fl(i,o.next.queue,{},Qn())}function Jp(){return sn(Al)}function aw(){return Dt().memoizedState}function ow(){return Dt().memoizedState}function XO(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var u=Qn();i=zs(u);var h=Ls(o,i,u);h!==null&&(Dn(h,o,u),al(h,o,u)),o={cache:kp()},i.payload=o;return}o=o.return}}function e2(i,o,u){var h=Qn();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Fc(i)?uw(o,u):(u=mp(i,o,u,h),u!==null&&(Dn(u,i,h),cw(u,o,h)))}function lw(i,o,u){var h=Qn();fl(i,o,u,h)}function fl(i,o,u,h){var v={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Fc(i))uw(o,v);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var C=o.lastRenderedState,T=b(C,u);if(v.hasEagerState=!0,v.eagerState=T,Un(T,C))return bc(i,o,v,0),_t===null&&vc(),!1}catch{}if(u=mp(i,o,v,h),u!==null)return Dn(u,i,h),cw(u,o,h),!0}return!1}function Wp(i,o,u,h){if(h={lane:2,revertLane:Mm(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Fc(i)){if(o)throw Error(r(479))}else o=mp(i,u,h,2),o!==null&&Dn(o,i,2)}function Fc(i){var o=i.alternate;return i===He||o!==null&&o===He}function uw(i,o){Da=Ic=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function cw(i,o,u){if((u&4194048)!==0){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,mb(i,u)}}var dl={readContext:sn,use:zc,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};dl.useEffectEvent=Ot;var fw={readContext:sn,use:zc,useCallback:function(i,o){return vn().memoizedState=[i,o===void 0?null:o],i},useContext:sn,useEffect:QS,useImperativeHandle:function(i,o,u){u=u!=null?u.concat([i]):null,jc(4194308,4,WS.bind(null,o,i),u)},useLayoutEffect:function(i,o){return jc(4194308,4,i,o)},useInsertionEffect:function(i,o){jc(4,2,i,o)},useMemo:function(i,o){var u=vn();o=o===void 0?null:o;var h=i();if(Di){Rn(!0);try{i()}finally{Rn(!1)}}return u.memoizedState=[h,o],h},useReducer:function(i,o,u){var h=vn();if(u!==void 0){var v=u(o);if(Di){Rn(!0);try{u(o)}finally{Rn(!1)}}}else v=o;return h.memoizedState=h.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},h.queue=i,i=i.dispatch=e2.bind(null,He,i),[h.memoizedState,i]},useRef:function(i){var o=vn();return i={current:i},o.memoizedState=i},useState:function(i){i=Hp(i);var o=i.queue,u=lw.bind(null,He,o);return o.dispatch=u,[i.memoizedState,u]},useDebugValue:Qp,useDeferredValue:function(i,o){var u=vn();return Zp(u,i,o)},useTransition:function(){var i=Hp(!1);return i=rw.bind(null,He,i.queue,!0,!1),vn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,u){var h=He,v=vn();if(it){if(u===void 0)throw Error(r(407));u=u()}else{if(u=o(),_t===null)throw Error(r(349));(tt&127)!==0||IS(h,o,u)}v.memoizedState=u;var b={value:u,getSnapshot:o};return v.queue=b,QS(DS.bind(null,h,b,i),[i]),h.flags|=2048,La(9,{destroy:void 0},NS.bind(null,h,b,u,o),null),u},useId:function(){var i=vn(),o=_t.identifierPrefix;if(it){var u=jr,h=Lr;u=(h&~(1<<32-xt(h)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Nc++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=GO++,o="_"+o+"r_"+u.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Jp,useFormState:VS,useActionState:VS,useOptimistic:function(i){var o=vn();o.memoizedState=o.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Wp.bind(null,He,!0,u),u.dispatch=o,[i,o]},useMemoCache:Up,useCacheRefresh:function(){return vn().memoizedState=XO.bind(null,He)},useEffectEvent:function(i){var o=vn(),u={impl:i};return o.memoizedState=u,function(){if((pt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},Xp={readContext:sn,use:zc,useCallback:ew,useContext:sn,useEffect:Gp,useImperativeHandle:XS,useInsertionEffect:YS,useLayoutEffect:JS,useMemo:tw,useReducer:Lc,useRef:GS,useState:function(){return Lc(is)},useDebugValue:Qp,useDeferredValue:function(i,o){var u=Dt();return nw(u,bt.memoizedState,i,o)},useTransition:function(){var i=Lc(is)[0],o=Dt().memoizedState;return[typeof i=="boolean"?i:cl(i),o]},useSyncExternalStore:OS,useId:aw,useHostTransitionStatus:Jp,useFormState:qS,useActionState:qS,useOptimistic:function(i,o){var u=Dt();return jS(u,bt,i,o)},useMemoCache:Up,useCacheRefresh:ow};Xp.useEffectEvent=ZS;var dw={readContext:sn,use:zc,useCallback:ew,useContext:sn,useEffect:Gp,useImperativeHandle:XS,useInsertionEffect:YS,useLayoutEffect:JS,useMemo:tw,useReducer:qp,useRef:GS,useState:function(){return qp(is)},useDebugValue:Qp,useDeferredValue:function(i,o){var u=Dt();return bt===null?Zp(u,i,o):nw(u,bt.memoizedState,i,o)},useTransition:function(){var i=qp(is)[0],o=Dt().memoizedState;return[typeof i=="boolean"?i:cl(i),o]},useSyncExternalStore:OS,useId:aw,useHostTransitionStatus:Jp,useFormState:KS,useActionState:KS,useOptimistic:function(i,o){var u=Dt();return bt!==null?jS(u,bt,i,o):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:Up,useCacheRefresh:ow};dw.useEffectEvent=ZS;function em(i,o,u,h){o=i.memoizedState,u=u(h,o),u=u==null?o:p({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var tm={enqueueSetState:function(i,o,u){i=i._reactInternals;var h=Qn(),v=zs(h);v.payload=o,u!=null&&(v.callback=u),o=Ls(i,v,h),o!==null&&(Dn(o,i,h),al(o,i,h))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var h=Qn(),v=zs(h);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=Ls(i,v,h),o!==null&&(Dn(o,i,h),al(o,i,h))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Qn(),h=zs(u);h.tag=2,o!=null&&(h.callback=o),o=Ls(i,h,u),o!==null&&(Dn(o,i,u),al(o,i,u))}};function hw(i,o,u,h,v,b,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,b,C):o.prototype&&o.prototype.isPureReactComponent?!Wo(u,h)||!Wo(v,b):!0}function pw(i,o,u,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==i&&tm.enqueueReplaceState(o,o.state,null)}function zi(i,o){var u=o;if("ref"in o){u={};for(var h in o)h!=="ref"&&(u[h]=o[h])}if(i=i.defaultProps){u===o&&(u=p({},u));for(var v in i)u[v]===void 0&&(u[v]=i[v])}return u}function mw(i){yc(i)}function gw(i){console.error(i)}function yw(i){yc(i)}function $c(i,o){try{var u=i.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function vw(i,o,u){try{var h=i.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function nm(i,o,u){return u=zs(u),u.tag=3,u.payload={element:null},u.callback=function(){$c(i,o)},u}function bw(i){return i=zs(i),i.tag=3,i}function Sw(i,o,u,h){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var b=h.value;i.payload=function(){return v(b)},i.callback=function(){vw(o,u,h)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){vw(o,u,h),typeof v!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var T=h.stack;this.componentDidCatch(h.value,{componentStack:T!==null?T:""})})}function t2(i,o,u,h,v){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=u.alternate,o!==null&&Aa(o,u,v,!0),u=qn.current,u!==null){switch(u.tag){case 31:case 13:return pr===null?Wc():u.alternate===null&&It===0&&(It=3),u.flags&=-257,u.flags|=65536,u.lanes=v,h===Rc?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([h]):o.add(h),Rm(i,h,v)),!1;case 22:return u.flags|=65536,h===Rc?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([h]):u.add(h)),Rm(i,h,v)),!1}throw Error(r(435,u.tag))}return Rm(i,h,v),Wc(),!1}if(it)return o=qn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,h!==wp&&(i=Error(r(422),{cause:h}),tl(cr(i,u)))):(h!==wp&&(o=Error(r(423),{cause:h}),tl(cr(o,u))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,h=cr(h,u),v=nm(i.stateNode,h,v),Ip(i,v),It!==4&&(It=2)),!1;var b=Error(r(520),{cause:h});if(b=cr(b,u),Sl===null?Sl=[b]:Sl.push(b),It!==4&&(It=2),o===null)return!0;h=cr(h,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,i=v&-v,u.lanes|=i,i=nm(u.stateNode,h,i),Ip(u,i),!1;case 1:if(o=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Us===null||!Us.has(b))))return u.flags|=65536,v&=-v,u.lanes|=v,v=bw(v),Sw(v,i,u,h),Ip(u,v),!1}u=u.return}while(u!==null);return!1}var rm=Error(r(461)),jt=!1;function an(i,o,u,h){o.child=i===null?CS(o,null,u,h):Ni(o,i.child,u,h)}function ww(i,o,u,h,v){u=u.render;var b=o.ref;if("ref"in h){var C={};for(var T in h)T!=="ref"&&(C[T]=h[T])}else C=h;return Ti(o),h=Pp(i,o,u,C,b,v),T=Fp(),i!==null&&!jt?($p(i,o,v),as(i,o,v)):(it&&T&&bp(o),o.flags|=1,an(i,o,h,v),o.child)}function xw(i,o,u,h,v){if(i===null){var b=u.type;return typeof b=="function"&&!gp(b)&&b.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=b,_w(i,o,b,h,v)):(i=wc(u.type,null,h,o,o.mode,v),i.ref=o.ref,i.return=o,o.child=i)}if(b=i.child,!fm(i,v)){var C=b.memoizedProps;if(u=u.compare,u=u!==null?u:Wo,u(C,h)&&i.ref===o.ref)return as(i,o,v)}return o.flags|=1,i=es(b,h),i.ref=o.ref,i.return=o,o.child=i}function _w(i,o,u,h,v){if(i!==null){var b=i.memoizedProps;if(Wo(b,h)&&i.ref===o.ref)if(jt=!1,o.pendingProps=h=b,fm(i,v))(i.flags&131072)!==0&&(jt=!0);else return o.lanes=i.lanes,as(i,o,v)}return sm(i,o,u,h,v)}function Cw(i,o,u,h){var v=h.children,b=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,i!==null){for(h=o.child=i.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~b}else h=0,o.child=null;return Ew(i,o,b,u,h)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ec(o,b!==null?b.cachePool:null),b!==null?RS(o,b):Dp(),AS(o);else return h=o.lanes=536870912,Ew(i,o,b!==null?b.baseLanes|u:u,u,h)}else b!==null?(Ec(o,b.cachePool),RS(o,b),Ps(),o.memoizedState=null):(i!==null&&Ec(o,null),Dp(),Ps());return an(i,o,v,u),o.child}function hl(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Ew(i,o,u,h,v){var b=Ap();return b=b===null?null:{parent:zt._currentValue,pool:b},o.memoizedState={baseLanes:u,cachePool:b},i!==null&&Ec(o,null),Dp(),AS(o),i!==null&&Aa(i,o,h,!0),o.childLanes=v,null}function Bc(i,o){return o=Vc({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function kw(i,o,u){return Ni(o,i.child,null,u),i=Bc(o,o.pendingProps),i.flags|=2,Hn(o),o.memoizedState=null,i}function n2(i,o,u){var h=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(it){if(h.mode==="hidden")return i=Bc(o,h),o.lanes=536870912,hl(null,i);if(Lp(o),(i=kt)?(i=Px(i,hr),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ms!==null?{id:Lr,overflow:jr}:null,retryLane:536870912,hydrationErrors:null},u=uS(i),u.return=o,o.child=u,rn=o,kt=null)):i=null,i===null)throw Is(o);return o.lanes=536870912,null}return Bc(o,h)}var b=i.memoizedState;if(b!==null){var C=b.dehydrated;if(Lp(o),v)if(o.flags&256)o.flags&=-257,o=kw(i,o,u);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(jt||Aa(i,o,u,!1),v=(u&i.childLanes)!==0,jt||v){if(h=_t,h!==null&&(C=gb(h,u),C!==0&&C!==b.retryLane))throw b.retryLane=C,Ei(i,C),Dn(h,i,C),rm;Wc(),o=kw(i,o,u)}else i=b.treeContext,kt=mr(C.nextSibling),rn=o,it=!0,Os=null,hr=!1,i!==null&&dS(o,i),o=Bc(o,h),o.flags|=4096;return o}return i=es(i.child,{mode:h.mode,children:h.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Uc(i,o){var u=o.ref;if(u===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(o.flags|=4194816)}}function sm(i,o,u,h,v){return Ti(o),u=Pp(i,o,u,h,void 0,v),h=Fp(),i!==null&&!jt?($p(i,o,v),as(i,o,v)):(it&&h&&bp(o),o.flags|=1,an(i,o,u,v),o.child)}function Rw(i,o,u,h,v,b){return Ti(o),o.updateQueue=null,u=MS(o,h,u,v),TS(i),h=Fp(),i!==null&&!jt?($p(i,o,b),as(i,o,b)):(it&&h&&bp(o),o.flags|=1,an(i,o,u,b),o.child)}function Aw(i,o,u,h,v){if(Ti(o),o.stateNode===null){var b=Ca,C=u.contextType;typeof C=="object"&&C!==null&&(b=sn(C)),b=new u(h,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=tm,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=h,b.state=o.memoizedState,b.refs={},Mp(o),C=u.contextType,b.context=typeof C=="object"&&C!==null?sn(C):Ca,b.state=o.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(em(o,u,C,h),b.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(C=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),C!==b.state&&tm.enqueueReplaceState(b,b.state,null),ll(o,h,b,v),ol(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(i===null){b=o.stateNode;var T=o.memoizedProps,B=zi(u,T);b.props=B;var Y=b.context,ie=u.contextType;C=Ca,typeof ie=="object"&&ie!==null&&(C=sn(ie));var le=u.getDerivedStateFromProps;ie=typeof le=="function"||typeof b.getSnapshotBeforeUpdate=="function",T=o.pendingProps!==T,ie||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T||Y!==C)&&pw(o,b,h,C),Ds=!1;var ee=o.memoizedState;b.state=ee,ll(o,h,b,v),ol(),Y=o.memoizedState,T||ee!==Y||Ds?(typeof le=="function"&&(em(o,u,le,h),Y=o.memoizedState),(B=Ds||hw(o,u,B,h,ee,Y,C))?(ie||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=Y),b.props=h,b.state=Y,b.context=C,h=B):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{b=o.stateNode,Op(i,o),C=o.memoizedProps,ie=zi(u,C),b.props=ie,le=o.pendingProps,ee=b.context,Y=u.contextType,B=Ca,typeof Y=="object"&&Y!==null&&(B=sn(Y)),T=u.getDerivedStateFromProps,(Y=typeof T=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C!==le||ee!==B)&&pw(o,b,h,B),Ds=!1,ee=o.memoizedState,b.state=ee,ll(o,h,b,v),ol();var re=o.memoizedState;C!==le||ee!==re||Ds||i!==null&&i.dependencies!==null&&_c(i.dependencies)?(typeof T=="function"&&(em(o,u,T,h),re=o.memoizedState),(ie=Ds||hw(o,u,ie,h,ee,re,B)||i!==null&&i.dependencies!==null&&_c(i.dependencies))?(Y||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,re,B),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,re,B)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||C===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=re),b.props=h,b.state=re,b.context=B,h=ie):(typeof b.componentDidUpdate!="function"||C===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),h=!1)}return b=h,Uc(i,o),h=(o.flags&128)!==0,b||h?(b=o.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,i!==null&&h?(o.child=Ni(o,i.child,null,v),o.child=Ni(o,null,u,v)):an(i,o,u,v),o.memoizedState=b.state,i=o.child):i=as(i,o,v),i}function Tw(i,o,u,h){return Ri(),o.flags|=256,an(i,o,u,h),o.child}var im={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function am(i){return{baseLanes:i,cachePool:vS()}}function om(i,o,u){return i=i!==null?i.childLanes&~u:0,o&&(i|=Gn),i}function Mw(i,o,u){var h=o.pendingProps,v=!1,b=(o.flags&128)!==0,C;if((C=b)||(C=i!==null&&i.memoizedState===null?!1:(Nt.current&2)!==0),C&&(v=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,i===null){if(it){if(v?js(o):Ps(),(i=kt)?(i=Px(i,hr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ms!==null?{id:Lr,overflow:jr}:null,retryLane:536870912,hydrationErrors:null},u=uS(i),u.return=o,o.child=u,rn=o,kt=null)):i=null,i===null)throw Is(o);return Vm(i)?o.lanes=32:o.lanes=536870912,null}var T=h.children;return h=h.fallback,v?(Ps(),v=o.mode,T=Vc({mode:"hidden",children:T},v),h=ki(h,v,u,null),T.return=o,h.return=o,T.sibling=h,o.child=T,h=o.child,h.memoizedState=am(u),h.childLanes=om(i,C,u),o.memoizedState=im,hl(null,h)):(js(o),lm(o,T))}var B=i.memoizedState;if(B!==null&&(T=B.dehydrated,T!==null)){if(b)o.flags&256?(js(o),o.flags&=-257,o=um(i,o,u)):o.memoizedState!==null?(Ps(),o.child=i.child,o.flags|=128,o=null):(Ps(),T=h.fallback,v=o.mode,h=Vc({mode:"visible",children:h.children},v),T=ki(T,v,u,null),T.flags|=2,h.return=o,T.return=o,h.sibling=T,o.child=h,Ni(o,i.child,null,u),h=o.child,h.memoizedState=am(u),h.childLanes=om(i,C,u),o.memoizedState=im,o=hl(null,h));else if(js(o),Vm(T)){if(C=T.nextSibling&&T.nextSibling.dataset,C)var Y=C.dgst;C=Y,h=Error(r(419)),h.stack="",h.digest=C,tl({value:h,source:null,stack:null}),o=um(i,o,u)}else if(jt||Aa(i,o,u,!1),C=(u&i.childLanes)!==0,jt||C){if(C=_t,C!==null&&(h=gb(C,u),h!==0&&h!==B.retryLane))throw B.retryLane=h,Ei(i,h),Dn(C,i,h),rm;Um(T)||Wc(),o=um(i,o,u)}else Um(T)?(o.flags|=192,o.child=i.child,o=null):(i=B.treeContext,kt=mr(T.nextSibling),rn=o,it=!0,Os=null,hr=!1,i!==null&&dS(o,i),o=lm(o,h.children),o.flags|=4096);return o}return v?(Ps(),T=h.fallback,v=o.mode,B=i.child,Y=B.sibling,h=es(B,{mode:"hidden",children:h.children}),h.subtreeFlags=B.subtreeFlags&65011712,Y!==null?T=es(Y,T):(T=ki(T,v,u,null),T.flags|=2),T.return=o,h.return=o,h.sibling=T,o.child=h,hl(null,h),h=o.child,T=i.child.memoizedState,T===null?T=am(u):(v=T.cachePool,v!==null?(B=zt._currentValue,v=v.parent!==B?{parent:B,pool:B}:v):v=vS(),T={baseLanes:T.baseLanes|u,cachePool:v}),h.memoizedState=T,h.childLanes=om(i,C,u),o.memoizedState=im,hl(i.child,h)):(js(o),u=i.child,i=u.sibling,u=es(u,{mode:"visible",children:h.children}),u.return=o,u.sibling=null,i!==null&&(C=o.deletions,C===null?(o.deletions=[i],o.flags|=16):C.push(i)),o.child=u,o.memoizedState=null,u)}function lm(i,o){return o=Vc({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Vc(i,o){return i=Vn(22,i,null,o),i.lanes=0,i}function um(i,o,u){return Ni(o,i.child,null,u),i=lm(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Ow(i,o,u){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),Cp(i.return,o,u)}function cm(i,o,u,h,v,b){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:v,treeForkCount:b}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=h,C.tail=u,C.tailMode=v,C.treeForkCount=b)}function Iw(i,o,u){var h=o.pendingProps,v=h.revealOrder,b=h.tail;h=h.children;var C=Nt.current,T=(C&2)!==0;if(T?(C=C&1|2,o.flags|=128):C&=1,M(Nt,C),an(i,o,h,u),h=it?el:0,!T&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ow(i,u,o);else if(i.tag===19)Ow(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(u=o.child,v=null;u!==null;)i=u.alternate,i!==null&&Oc(i)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),cm(o,!1,v,u,b,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(i=v.alternate,i!==null&&Oc(i)===null){o.child=v;break}i=v.sibling,v.sibling=u,u=v,v=i}cm(o,!0,u,null,b,h);break;case"together":cm(o,!1,null,null,void 0,h);break;default:o.memoizedState=null}return o.child}function as(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Bs|=o.lanes,(u&o.childLanes)===0)if(i!==null){if(Aa(i,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,u=es(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=es(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function fm(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&_c(i)))}function r2(i,o,u){switch(o.tag){case 3:Ae(o,o.stateNode.containerInfo),Ns(o,zt,i.memoizedState.cache),Ri();break;case 27:case 5:pe(o);break;case 4:Ae(o,o.stateNode.containerInfo);break;case 10:Ns(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Lp(o),null;break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(js(o),o.flags|=128,null):(u&o.child.childLanes)!==0?Mw(i,o,u):(js(o),i=as(i,o,u),i!==null?i.sibling:null);js(o);break;case 19:var v=(i.flags&128)!==0;if(h=(u&o.childLanes)!==0,h||(Aa(i,o,u,!1),h=(u&o.childLanes)!==0),v){if(h)return Iw(i,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),M(Nt,Nt.current),h)break;return null;case 22:return o.lanes=0,Cw(i,o,u,o.pendingProps);case 24:Ns(o,zt,i.memoizedState.cache)}return as(i,o,u)}function Nw(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps)jt=!0;else{if(!fm(i,u)&&(o.flags&128)===0)return jt=!1,r2(i,o,u);jt=(i.flags&131072)!==0}else jt=!1,it&&(o.flags&1048576)!==0&&fS(o,el,o.index);switch(o.lanes=0,o.tag){case 16:e:{var h=o.pendingProps;if(i=Oi(o.elementType),o.type=i,typeof i=="function")gp(i)?(h=zi(i,h),o.tag=1,o=Aw(null,o,i,h,u)):(o.tag=0,o=sm(null,o,i,h,u));else{if(i!=null){var v=i.$$typeof;if(v===O){o.tag=11,o=ww(null,o,i,h,u);break e}else if(v===z){o.tag=14,o=xw(null,o,i,h,u);break e}}throw o=te(i)||i,Error(r(306,o,""))}}return o;case 0:return sm(i,o,o.type,o.pendingProps,u);case 1:return h=o.type,v=zi(h,o.pendingProps),Aw(i,o,h,v,u);case 3:e:{if(Ae(o,o.stateNode.containerInfo),i===null)throw Error(r(387));h=o.pendingProps;var b=o.memoizedState;v=b.element,Op(i,o),ll(o,h,null,u);var C=o.memoizedState;if(h=C.cache,Ns(o,zt,h),h!==b.cache&&Ep(o,[zt],u,!0),ol(),h=C.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Tw(i,o,h,u);break e}else if(h!==v){v=cr(Error(r(424)),o),tl(v),o=Tw(i,o,h,u);break e}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,kt=mr(i.firstChild),rn=o,it=!0,Os=null,hr=!0,u=CS(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ri(),h===v){o=as(i,o,u);break e}an(i,o,h,u)}o=o.child}return o;case 26:return Uc(i,o),i===null?(u=qx(o.type,null,o.pendingProps,null))?o.memoizedState=u:it||(u=o.type,i=o.pendingProps,h=af(he.current).createElement(u),h[nn]=o,h[An]=i,on(h,u,i),Yt(h),o.stateNode=h):o.memoizedState=qx(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return pe(o),i===null&&it&&(h=o.stateNode=Bx(o.type,o.pendingProps,he.current),rn=o,hr=!0,v=kt,Ks(o.type)?(qm=v,kt=mr(h.firstChild)):kt=v),an(i,o,o.pendingProps.children,u),Uc(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&it&&((v=h=kt)&&(h=N2(h,o.type,o.pendingProps,hr),h!==null?(o.stateNode=h,rn=o,kt=mr(h.firstChild),hr=!1,v=!0):v=!1),v||Is(o)),pe(o),v=o.type,b=o.pendingProps,C=i!==null?i.memoizedProps:null,h=b.children,Fm(v,b)?h=null:C!==null&&Fm(v,C)&&(o.flags|=32),o.memoizedState!==null&&(v=Pp(i,o,QO,null,null,u),Al._currentValue=v),Uc(i,o),an(i,o,h,u),o.child;case 6:return i===null&&it&&((i=u=kt)&&(u=D2(u,o.pendingProps,hr),u!==null?(o.stateNode=u,rn=o,kt=null,i=!0):i=!1),i||Is(o)),null;case 13:return Mw(i,o,u);case 4:return Ae(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=Ni(o,null,h,u):an(i,o,h,u),o.child;case 11:return ww(i,o,o.type,o.pendingProps,u);case 7:return an(i,o,o.pendingProps,u),o.child;case 8:return an(i,o,o.pendingProps.children,u),o.child;case 12:return an(i,o,o.pendingProps.children,u),o.child;case 10:return h=o.pendingProps,Ns(o,o.type,h.value),an(i,o,h.children,u),o.child;case 9:return v=o.type._context,h=o.pendingProps.children,Ti(o),v=sn(v),h=h(v),o.flags|=1,an(i,o,h,u),o.child;case 14:return xw(i,o,o.type,o.pendingProps,u);case 15:return _w(i,o,o.type,o.pendingProps,u);case 19:return Iw(i,o,u);case 31:return n2(i,o,u);case 22:return Cw(i,o,u,o.pendingProps);case 24:return Ti(o),h=sn(zt),i===null?(v=Ap(),v===null&&(v=_t,b=kp(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=u),v=b),o.memoizedState={parent:h,cache:v},Mp(o),Ns(o,zt,v)):((i.lanes&u)!==0&&(Op(i,o),ll(o,null,null,u),ol()),v=i.memoizedState,b=o.memoizedState,v.parent!==h?(v={parent:h,cache:h},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),Ns(o,zt,h)):(h=b.cache,Ns(o,zt,h),h!==v.cache&&Ep(o,[zt],u,!0))),an(i,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function os(i){i.flags|=4}function dm(i,o,u,h,v){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(ax())i.flags|=8192;else throw Ii=Rc,Tp}else i.flags&=-16777217}function Dw(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Zx(o))if(ax())i.flags|=8192;else throw Ii=Rc,Tp}function qc(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?hb():536870912,i.lanes|=o,$a|=o)}function pl(i,o){if(!it)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Rt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,h=0;if(o)for(var v=i.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)u|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=h,i.childLanes=u,o}function s2(i,o,u){var h=o.pendingProps;switch(Sp(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(o),null;case 1:return Rt(o),null;case 3:return u=o.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),rs(zt),_e(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Ra(o)?os(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,xp())),Rt(o),null;case 26:var v=o.type,b=o.memoizedState;return i===null?(os(o),b!==null?(Rt(o),Dw(o,b)):(Rt(o),dm(o,v,null,h,u))):b?b!==i.memoizedState?(os(o),Rt(o),Dw(o,b)):(Rt(o),o.flags&=-16777217):(i=i.memoizedProps,i!==h&&os(o),Rt(o),dm(o,v,i,h,u)),null;case 27:if(Ee(o),u=he.current,v=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&os(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return Rt(o),null}i=se.current,Ra(o)?hS(o):(i=Bx(v,h,u),o.stateNode=i,os(o))}return Rt(o),null;case 5:if(Ee(o),v=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&os(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return Rt(o),null}if(b=se.current,Ra(o))hS(o);else{var C=af(he.current);switch(b){case 1:b=C.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=C.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=C.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof h.is=="string"?C.createElement("select",{is:h.is}):C.createElement("select"),h.multiple?b.multiple=!0:h.size&&(b.size=h.size);break;default:b=typeof h.is=="string"?C.createElement(v,{is:h.is}):C.createElement(v)}}b[nn]=o,b[An]=h;e:for(C=o.child;C!==null;){if(C.tag===5||C.tag===6)b.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===o)break e;for(;C.sibling===null;){if(C.return===null||C.return===o)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}o.stateNode=b;e:switch(on(b,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&os(o)}}return Rt(o),dm(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,u),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==h&&os(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(i=he.current,Ra(o)){if(i=o.stateNode,u=o.memoizedProps,h=null,v=rn,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}i[nn]=o,i=!!(i.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||Mx(i.nodeValue,u)),i||Is(o,!0)}else i=af(i).createTextNode(h),i[nn]=o,o.stateNode=i}return Rt(o),null;case 31:if(u=o.memoizedState,i===null||i.memoizedState!==null){if(h=Ra(o),u!==null){if(i===null){if(!h)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[nn]=o}else Ri(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),i=!1}else u=xp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return o.flags&256?(Hn(o),o):(Hn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Rt(o),null;case 13:if(h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=Ra(o),h!==null&&h.dehydrated!==null){if(i===null){if(!v)throw Error(r(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[nn]=o}else Ri(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),v=!1}else v=xp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(Hn(o),o):(Hn(o),null)}return Hn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=h!==null,i=i!==null&&i.memoizedState!==null,u&&(h=o.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==v&&(h.flags|=2048)),u!==i&&u&&(o.child.flags|=8192),qc(o,o.updateQueue),Rt(o),null);case 4:return _e(),i===null&&Dm(o.stateNode.containerInfo),Rt(o),null;case 10:return rs(o.type),Rt(o),null;case 19:if(q(Nt),h=o.memoizedState,h===null)return Rt(o),null;if(v=(o.flags&128)!==0,b=h.rendering,b===null)if(v)pl(h,!1);else{if(It!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(b=Oc(i),b!==null){for(o.flags|=128,pl(h,!1),i=b.updateQueue,o.updateQueue=i,qc(o,i),o.subtreeFlags=0,i=u,u=o.child;u!==null;)lS(u,i),u=u.sibling;return M(Nt,Nt.current&1|2),it&&ts(o,h.treeForkCount),o.child}i=i.sibling}h.tail!==null&&ye()>Zc&&(o.flags|=128,v=!0,pl(h,!1),o.lanes=4194304)}else{if(!v)if(i=Oc(b),i!==null){if(o.flags|=128,v=!0,i=i.updateQueue,o.updateQueue=i,qc(o,i),pl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!b.alternate&&!it)return Rt(o),null}else 2*ye()-h.renderingStartTime>Zc&&u!==536870912&&(o.flags|=128,v=!0,pl(h,!1),o.lanes=4194304);h.isBackwards?(b.sibling=o.child,o.child=b):(i=h.last,i!==null?i.sibling=b:o.child=b,h.last=b)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=ye(),i.sibling=null,u=Nt.current,M(Nt,v?u&1|2:u&1),it&&ts(o,h.treeForkCount),i):(Rt(o),null);case 22:case 23:return Hn(o),zp(),h=o.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(u&536870912)!==0&&(o.flags&128)===0&&(Rt(o),o.subtreeFlags&6&&(o.flags|=8192)):Rt(o),u=o.updateQueue,u!==null&&qc(o,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==u&&(o.flags|=2048),i!==null&&q(Mi),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),rs(zt),Rt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function i2(i,o){switch(Sp(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return rs(zt),_e(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Ee(o),null;case 31:if(o.memoizedState!==null){if(Hn(o),o.alternate===null)throw Error(r(340));Ri()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Hn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Ri()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return q(Nt),null;case 4:return _e(),null;case 10:return rs(o.type),null;case 22:case 23:return Hn(o),zp(),i!==null&&q(Mi),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return rs(zt),null;case 25:return null;default:return null}}function zw(i,o){switch(Sp(o),o.tag){case 3:rs(zt),_e();break;case 26:case 27:case 5:Ee(o);break;case 4:_e();break;case 31:o.memoizedState!==null&&Hn(o);break;case 13:Hn(o);break;case 19:q(Nt);break;case 10:rs(o.type);break;case 22:case 23:Hn(o),zp(),i!==null&&q(Mi);break;case 24:rs(zt)}}function ml(i,o){try{var u=o.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var v=h.next;u=v;do{if((u.tag&i)===i){h=void 0;var b=u.create,C=u.inst;h=b(),C.destroy=h}u=u.next}while(u!==v)}}catch(T){yt(o,o.return,T)}}function Fs(i,o,u){try{var h=o.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var b=v.next;h=b;do{if((h.tag&i)===i){var C=h.inst,T=C.destroy;if(T!==void 0){C.destroy=void 0,v=o;var B=u,Y=T;try{Y()}catch(ie){yt(v,B,ie)}}}h=h.next}while(h!==b)}}catch(ie){yt(o,o.return,ie)}}function Lw(i){var o=i.updateQueue;if(o!==null){var u=i.stateNode;try{kS(o,u)}catch(h){yt(i,i.return,h)}}}function jw(i,o,u){u.props=zi(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(h){yt(i,o,h)}}function gl(i,o){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof u=="function"?i.refCleanup=u(h):u.current=h}}catch(v){yt(i,o,v)}}function Pr(i,o){var u=i.ref,h=i.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(v){yt(i,o,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){yt(i,o,v)}else u.current=null}function Pw(i){var o=i.type,u=i.memoizedProps,h=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(v){yt(i,i.return,v)}}function hm(i,o,u){try{var h=i.stateNode;R2(h,i.type,u,o),h[An]=o}catch(v){yt(i,i.return,v)}}function Fw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ks(i.type)||i.tag===4}function pm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Fw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ks(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function mm(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(i),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Wr));else if(h!==4&&(h===27&&Ks(i.type)&&(u=i.stateNode,o=null),i=i.child,i!==null))for(mm(i,o,u),i=i.sibling;i!==null;)mm(i,o,u),i=i.sibling}function Hc(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(h!==4&&(h===27&&Ks(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Hc(i,o,u),i=i.sibling;i!==null;)Hc(i,o,u),i=i.sibling}function $w(i){var o=i.stateNode,u=i.memoizedProps;try{for(var h=i.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);on(o,h,u),o[nn]=i,o[An]=u}catch(b){yt(i,i.return,b)}}var ls=!1,Pt=!1,gm=!1,Bw=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function a2(i,o){if(i=i.containerInfo,jm=hf,i=Xb(i),up(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var v=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var C=0,T=-1,B=-1,Y=0,ie=0,le=i,ee=null;t:for(;;){for(var re;le!==u||v!==0&&le.nodeType!==3||(T=C+v),le!==b||h!==0&&le.nodeType!==3||(B=C+h),le.nodeType===3&&(C+=le.nodeValue.length),(re=le.firstChild)!==null;)ee=le,le=re;for(;;){if(le===i)break t;if(ee===u&&++Y===v&&(T=C),ee===b&&++ie===h&&(B=C),(re=le.nextSibling)!==null)break;le=ee,ee=le.parentNode}le=re}u=T===-1||B===-1?null:{start:T,end:B}}else u=null}u=u||{start:0,end:0}}else u=null;for(Pm={focusedElem:i,selectionRange:u},hf=!1,Jt=o;Jt!==null;)if(o=Jt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Jt=i;else for(;Jt!==null;){switch(o=Jt,b=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)v=i[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,u=o,v=b.memoizedProps,b=b.memoizedState,h=u.stateNode;try{var we=zi(u.type,v);i=h.getSnapshotBeforeUpdate(we,b),h.__reactInternalSnapshotBeforeUpdate=i}catch(ze){yt(u,u.return,ze)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,u=i.nodeType,u===9)Bm(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Bm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,Jt=i;break}Jt=o.return}}function Uw(i,o,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:cs(i,u),h&4&&ml(5,u);break;case 1:if(cs(i,u),h&4)if(i=u.stateNode,o===null)try{i.componentDidMount()}catch(C){yt(u,u.return,C)}else{var v=zi(u.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(v,o,i.__reactInternalSnapshotBeforeUpdate)}catch(C){yt(u,u.return,C)}}h&64&&Lw(u),h&512&&gl(u,u.return);break;case 3:if(cs(i,u),h&64&&(i=u.updateQueue,i!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{kS(i,o)}catch(C){yt(u,u.return,C)}}break;case 27:o===null&&h&4&&$w(u);case 26:case 5:cs(i,u),o===null&&h&4&&Pw(u),h&512&&gl(u,u.return);break;case 12:cs(i,u);break;case 31:cs(i,u),h&4&&Hw(i,u);break;case 13:cs(i,u),h&4&&Kw(i,u),h&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=m2.bind(null,u),z2(i,u))));break;case 22:if(h=u.memoizedState!==null||ls,!h){o=o!==null&&o.memoizedState!==null||Pt,v=ls;var b=Pt;ls=h,(Pt=o)&&!b?fs(i,u,(u.subtreeFlags&8772)!==0):cs(i,u),ls=v,Pt=b}break;case 30:break;default:cs(i,u)}}function Vw(i){var o=i.alternate;o!==null&&(i.alternate=null,Vw(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Kh(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var At=null,Mn=!1;function us(i,o,u){for(u=u.child;u!==null;)qw(i,o,u),u=u.sibling}function qw(i,o,u){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(ut,u)}catch{}switch(u.tag){case 26:Pt||Pr(u,o),us(i,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Pt||Pr(u,o);var h=At,v=Mn;Ks(u.type)&&(At=u.stateNode,Mn=!1),us(i,o,u),El(u.stateNode),At=h,Mn=v;break;case 5:Pt||Pr(u,o);case 6:if(h=At,v=Mn,At=null,us(i,o,u),At=h,Mn=v,At!==null)if(Mn)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(u.stateNode)}catch(b){yt(u,o,b)}else try{At.removeChild(u.stateNode)}catch(b){yt(u,o,b)}break;case 18:At!==null&&(Mn?(i=At,Lx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Qa(i)):Lx(At,u.stateNode));break;case 4:h=At,v=Mn,At=u.stateNode.containerInfo,Mn=!0,us(i,o,u),At=h,Mn=v;break;case 0:case 11:case 14:case 15:Fs(2,u,o),Pt||Fs(4,u,o),us(i,o,u);break;case 1:Pt||(Pr(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"&&jw(u,o,h)),us(i,o,u);break;case 21:us(i,o,u);break;case 22:Pt=(h=Pt)||u.memoizedState!==null,us(i,o,u),Pt=h;break;default:us(i,o,u)}}function Hw(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Qa(i)}catch(u){yt(o,o.return,u)}}}function Kw(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Qa(i)}catch(u){yt(o,o.return,u)}}function o2(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Bw),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Bw),o;default:throw Error(r(435,i.tag))}}function Kc(i,o){var u=o2(i);o.forEach(function(h){if(!u.has(h)){u.add(h);var v=g2.bind(null,i,h);h.then(v,v)}})}function On(i,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var v=u[h],b=i,C=o,T=C;e:for(;T!==null;){switch(T.tag){case 27:if(Ks(T.type)){At=T.stateNode,Mn=!1;break e}break;case 5:At=T.stateNode,Mn=!1;break e;case 3:case 4:At=T.stateNode.containerInfo,Mn=!0;break e}T=T.return}if(At===null)throw Error(r(160));qw(b,C,v),At=null,Mn=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Gw(o,i),o=o.sibling}var Ar=null;function Gw(i,o){var u=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:On(o,i),In(i),h&4&&(Fs(3,i,i.return),ml(3,i),Fs(5,i,i.return));break;case 1:On(o,i),In(i),h&512&&(Pt||u===null||Pr(u,u.return)),h&64&&ls&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var v=Ar;if(On(o,i),In(i),h&512&&(Pt||u===null||Pr(u,u.return)),h&4){var b=u!==null?u.memoizedState:null;if(h=i.memoizedState,u===null)if(h===null)if(i.stateNode===null){e:{h=i.type,u=i.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Vo]||b[nn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(h),v.head.insertBefore(b,v.querySelector("head > title"))),on(b,h,u),b[nn]=i,Yt(b),h=b;break e;case"link":var C=Gx("link","href",v).get(h+(u.href||""));if(C){for(var T=0;T<C.length;T++)if(b=C[T],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(T,1);break t}}b=v.createElement(h),on(b,h,u),v.head.appendChild(b);break;case"meta":if(C=Gx("meta","content",v).get(h+(u.content||""))){for(T=0;T<C.length;T++)if(b=C[T],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(T,1);break t}}b=v.createElement(h),on(b,h,u),v.head.appendChild(b);break;default:throw Error(r(468,h))}b[nn]=i,Yt(b),h=b}i.stateNode=h}else Qx(v,i.type,i.stateNode);else i.stateNode=Kx(v,h,i.memoizedProps);else b!==h?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,h===null?Qx(v,i.type,i.stateNode):Kx(v,h,i.memoizedProps)):h===null&&i.stateNode!==null&&hm(i,i.memoizedProps,u.memoizedProps)}break;case 27:On(o,i),In(i),h&512&&(Pt||u===null||Pr(u,u.return)),u!==null&&h&4&&hm(i,i.memoizedProps,u.memoizedProps);break;case 5:if(On(o,i),In(i),h&512&&(Pt||u===null||Pr(u,u.return)),i.flags&32){v=i.stateNode;try{ya(v,"")}catch(we){yt(i,i.return,we)}}h&4&&i.stateNode!=null&&(v=i.memoizedProps,hm(i,v,u!==null?u.memoizedProps:v)),h&1024&&(gm=!0);break;case 6:if(On(o,i),In(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,u=i.stateNode;try{u.nodeValue=h}catch(we){yt(i,i.return,we)}}break;case 3:if(uf=null,v=Ar,Ar=of(o.containerInfo),On(o,i),Ar=v,In(i),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Qa(o.containerInfo)}catch(we){yt(i,i.return,we)}gm&&(gm=!1,Qw(i));break;case 4:h=Ar,Ar=of(i.stateNode.containerInfo),On(o,i),In(i),Ar=h;break;case 12:On(o,i),In(i);break;case 31:On(o,i),In(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Kc(i,h)));break;case 13:On(o,i),In(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Qc=ye()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Kc(i,h)));break;case 22:v=i.memoizedState!==null;var B=u!==null&&u.memoizedState!==null,Y=ls,ie=Pt;if(ls=Y||v,Pt=ie||B,On(o,i),Pt=ie,ls=Y,In(i),h&8192)e:for(o=i.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||B||ls||Pt||Li(i)),u=null,o=i;;){if(o.tag===5||o.tag===26){if(u===null){B=u=o;try{if(b=B.stateNode,v)C=b.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{T=B.stateNode;var le=B.memoizedProps.style,ee=le!=null&&le.hasOwnProperty("display")?le.display:null;T.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(we){yt(B,B.return,we)}}}else if(o.tag===6){if(u===null){B=o;try{B.stateNode.nodeValue=v?"":B.memoizedProps}catch(we){yt(B,B.return,we)}}}else if(o.tag===18){if(u===null){B=o;try{var re=B.stateNode;v?jx(re,!0):jx(B.stateNode,!1)}catch(we){yt(B,B.return,we)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=i.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,Kc(i,u))));break;case 19:On(o,i),In(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Kc(i,h)));break;case 30:break;case 21:break;default:On(o,i),In(i)}}function In(i){var o=i.flags;if(o&2){try{for(var u,h=i.return;h!==null;){if(Fw(h)){u=h;break}h=h.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var v=u.stateNode,b=pm(i);Hc(i,b,v);break;case 5:var C=u.stateNode;u.flags&32&&(ya(C,""),u.flags&=-33);var T=pm(i);Hc(i,T,C);break;case 3:case 4:var B=u.stateNode.containerInfo,Y=pm(i);mm(i,Y,B);break;default:throw Error(r(161))}}catch(ie){yt(i,i.return,ie)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Qw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;Qw(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function cs(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Uw(i,o.alternate,o),o=o.sibling}function Li(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Fs(4,o,o.return),Li(o);break;case 1:Pr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&jw(o,o.return,u),Li(o);break;case 27:El(o.stateNode);case 26:case 5:Pr(o,o.return),Li(o);break;case 22:o.memoizedState===null&&Li(o);break;case 30:Li(o);break;default:Li(o)}i=i.sibling}}function fs(i,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,v=i,b=o,C=b.flags;switch(b.tag){case 0:case 11:case 15:fs(v,b,u),ml(4,b);break;case 1:if(fs(v,b,u),h=b,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Y){yt(h,h.return,Y)}if(h=b,v=h.updateQueue,v!==null){var T=h.stateNode;try{var B=v.shared.hiddenCallbacks;if(B!==null)for(v.shared.hiddenCallbacks=null,v=0;v<B.length;v++)ES(B[v],T)}catch(Y){yt(h,h.return,Y)}}u&&C&64&&Lw(b),gl(b,b.return);break;case 27:$w(b);case 26:case 5:fs(v,b,u),u&&h===null&&C&4&&Pw(b),gl(b,b.return);break;case 12:fs(v,b,u);break;case 31:fs(v,b,u),u&&C&4&&Hw(v,b);break;case 13:fs(v,b,u),u&&C&4&&Kw(v,b);break;case 22:b.memoizedState===null&&fs(v,b,u),gl(b,b.return);break;case 30:break;default:fs(v,b,u)}o=o.sibling}}function ym(i,o){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&nl(u))}function vm(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&nl(i))}function Tr(i,o,u,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Zw(i,o,u,h),o=o.sibling}function Zw(i,o,u,h){var v=o.flags;switch(o.tag){case 0:case 11:case 15:Tr(i,o,u,h),v&2048&&ml(9,o);break;case 1:Tr(i,o,u,h);break;case 3:Tr(i,o,u,h),v&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&nl(i)));break;case 12:if(v&2048){Tr(i,o,u,h),i=o.stateNode;try{var b=o.memoizedProps,C=b.id,T=b.onPostCommit;typeof T=="function"&&T(C,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(B){yt(o,o.return,B)}}else Tr(i,o,u,h);break;case 31:Tr(i,o,u,h);break;case 13:Tr(i,o,u,h);break;case 23:break;case 22:b=o.stateNode,C=o.alternate,o.memoizedState!==null?b._visibility&2?Tr(i,o,u,h):yl(i,o):b._visibility&2?Tr(i,o,u,h):(b._visibility|=2,ja(i,o,u,h,(o.subtreeFlags&10256)!==0||!1)),v&2048&&ym(C,o);break;case 24:Tr(i,o,u,h),v&2048&&vm(o.alternate,o);break;default:Tr(i,o,u,h)}}function ja(i,o,u,h,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=i,C=o,T=u,B=h,Y=C.flags;switch(C.tag){case 0:case 11:case 15:ja(b,C,T,B,v),ml(8,C);break;case 23:break;case 22:var ie=C.stateNode;C.memoizedState!==null?ie._visibility&2?ja(b,C,T,B,v):yl(b,C):(ie._visibility|=2,ja(b,C,T,B,v)),v&&Y&2048&&ym(C.alternate,C);break;case 24:ja(b,C,T,B,v),v&&Y&2048&&vm(C.alternate,C);break;default:ja(b,C,T,B,v)}o=o.sibling}}function yl(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=i,h=o,v=h.flags;switch(h.tag){case 22:yl(u,h),v&2048&&ym(h.alternate,h);break;case 24:yl(u,h),v&2048&&vm(h.alternate,h);break;default:yl(u,h)}o=o.sibling}}var vl=8192;function Pa(i,o,u){if(i.subtreeFlags&vl)for(i=i.child;i!==null;)Yw(i,o,u),i=i.sibling}function Yw(i,o,u){switch(i.tag){case 26:Pa(i,o,u),i.flags&vl&&i.memoizedState!==null&&G2(u,Ar,i.memoizedState,i.memoizedProps);break;case 5:Pa(i,o,u);break;case 3:case 4:var h=Ar;Ar=of(i.stateNode.containerInfo),Pa(i,o,u),Ar=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=vl,vl=16777216,Pa(i,o,u),vl=h):Pa(i,o,u));break;default:Pa(i,o,u)}}function Jw(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function bl(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];Jt=h,Xw(h,i)}Jw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ww(i),i=i.sibling}function Ww(i){switch(i.tag){case 0:case 11:case 15:bl(i),i.flags&2048&&Fs(9,i,i.return);break;case 3:bl(i);break;case 12:bl(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Gc(i)):bl(i);break;default:bl(i)}}function Gc(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];Jt=h,Xw(h,i)}Jw(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Fs(8,o,o.return),Gc(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Gc(o));break;default:Gc(o)}i=i.sibling}}function Xw(i,o){for(;Jt!==null;){var u=Jt;switch(u.tag){case 0:case 11:case 15:Fs(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:nl(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Jt=h;else e:for(u=i;Jt!==null;){h=Jt;var v=h.sibling,b=h.return;if(Vw(h),h===u){Jt=null;break e}if(v!==null){v.return=b,Jt=v;break e}Jt=b}}}var l2={getCacheForType:function(i){var o=sn(zt),u=o.data.get(i);return u===void 0&&(u=i(),o.data.set(i,u)),u},cacheSignal:function(){return sn(zt).controller.signal}},u2=typeof WeakMap=="function"?WeakMap:Map,pt=0,_t=null,We=null,tt=0,gt=0,Kn=null,$s=!1,Fa=!1,bm=!1,ds=0,It=0,Bs=0,ji=0,Sm=0,Gn=0,$a=0,Sl=null,Nn=null,wm=!1,Qc=0,ex=0,Zc=1/0,Yc=null,Us=null,qt=0,Vs=null,Ba=null,hs=0,xm=0,_m=null,tx=null,wl=0,Cm=null;function Qn(){return(pt&2)!==0&&tt!==0?tt&-tt:$.T!==null?Mm():yb()}function nx(){if(Gn===0)if((tt&536870912)===0||it){var i=sc;sc<<=1,(sc&3932160)===0&&(sc=262144),Gn=i}else Gn=536870912;return i=qn.current,i!==null&&(i.flags|=32),Gn}function Dn(i,o,u){(i===_t&&(gt===2||gt===9)||i.cancelPendingCommit!==null)&&(Ua(i,0),qs(i,tt,Gn,!1)),Uo(i,u),((pt&2)===0||i!==_t)&&(i===_t&&((pt&2)===0&&(ji|=u),It===4&&qs(i,tt,Gn,!1)),Fr(i))}function rx(i,o,u){if((pt&6)!==0)throw Error(r(327));var h=!u&&(o&127)===0&&(o&i.expiredLanes)===0||Bo(i,o),v=h?d2(i,o):km(i,o,!0),b=h;do{if(v===0){Fa&&!h&&qs(i,o,0,!1);break}else{if(u=i.current.alternate,b&&!c2(u)){v=km(i,o,!1),b=!1;continue}if(v===2){if(b=o,i.errorRecoveryDisabledLanes&b)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var T=i;v=Sl;var B=T.current.memoizedState.isDehydrated;if(B&&(Ua(T,C).flags|=256),C=km(T,C,!1),C!==2){if(bm&&!B){T.errorRecoveryDisabledLanes|=b,ji|=b,v=4;break e}b=Nn,Nn=v,b!==null&&(Nn===null?Nn=b:Nn.push.apply(Nn,b))}v=C}if(b=!1,v!==2)continue}}if(v===1){Ua(i,0),qs(i,o,0,!0);break}e:{switch(h=i,b=v,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:qs(h,o,Gn,!$s);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(v=Qc+300-ye(),10<v)){if(qs(h,o,Gn,!$s),ac(h,0,!0)!==0)break e;hs=o,h.timeoutHandle=Dx(sx.bind(null,h,u,Nn,Yc,wm,o,Gn,ji,$a,$s,b,"Throttled",-0,0),v);break e}sx(h,u,Nn,Yc,wm,o,Gn,ji,$a,$s,b,null,-0,0)}}break}while(!0);Fr(i)}function sx(i,o,u,h,v,b,C,T,B,Y,ie,le,ee,re){if(i.timeoutHandle=-1,le=o.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wr},Yw(o,b,le);var we=(b&62914560)===b?Qc-ye():(b&4194048)===b?ex-ye():0;if(we=Q2(le,we),we!==null){hs=b,i.cancelPendingCommit=we(dx.bind(null,i,o,b,u,h,v,C,T,B,ie,le,null,ee,re)),qs(i,b,C,!Y);return}}dx(i,o,b,u,h,v,C,T,B)}function c2(i){for(var o=i;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var v=u[h],b=v.getSnapshot;v=v.value;try{if(!Un(b(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function qs(i,o,u,h){o&=~Sm,o&=~ji,i.suspendedLanes|=o,i.pingedLanes&=~o,h&&(i.warmLanes|=o),h=i.expirationTimes;for(var v=o;0<v;){var b=31-xt(v),C=1<<b;h[b]=-1,v&=~C}u!==0&&pb(i,u,o)}function Jc(){return(pt&6)===0?(xl(0),!1):!0}function Em(){if(We!==null){if(gt===0)var i=We.return;else i=We,ns=Ai=null,Bp(i),Ia=null,sl=0,i=We;for(;i!==null;)zw(i.alternate,i),i=i.return;We=null}}function Ua(i,o){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,M2(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),hs=0,Em(),_t=i,We=u=es(i.current,null),tt=o,gt=0,Kn=null,$s=!1,Fa=Bo(i,o),bm=!1,$a=Gn=Sm=ji=Bs=It=0,Nn=Sl=null,wm=!1,(o&8)!==0&&(o|=o&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=o;0<h;){var v=31-xt(h),b=1<<v;o|=i[v],h&=~b}return ds=o,vc(),u}function ix(i,o){He=null,$.H=dl,o===Oa||o===kc?(o=wS(),gt=3):o===Tp?(o=wS(),gt=4):gt=o===rm?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Kn=o,We===null&&(It=1,$c(i,cr(o,i.current)))}function ax(){var i=qn.current;return i===null?!0:(tt&4194048)===tt?pr===null:(tt&62914560)===tt||(tt&536870912)!==0?i===pr:!1}function ox(){var i=$.H;return $.H=dl,i===null?dl:i}function lx(){var i=$.A;return $.A=l2,i}function Wc(){It=4,$s||(tt&4194048)!==tt&&qn.current!==null||(Fa=!0),(Bs&134217727)===0&&(ji&134217727)===0||_t===null||qs(_t,tt,Gn,!1)}function km(i,o,u){var h=pt;pt|=2;var v=ox(),b=lx();(_t!==i||tt!==o)&&(Yc=null,Ua(i,o)),o=!1;var C=It;e:do try{if(gt!==0&&We!==null){var T=We,B=Kn;switch(gt){case 8:Em(),C=6;break e;case 3:case 2:case 9:case 6:qn.current===null&&(o=!0);var Y=gt;if(gt=0,Kn=null,Va(i,T,B,Y),u&&Fa){C=0;break e}break;default:Y=gt,gt=0,Kn=null,Va(i,T,B,Y)}}f2(),C=It;break}catch(ie){ix(i,ie)}while(!0);return o&&i.shellSuspendCounter++,ns=Ai=null,pt=h,$.H=v,$.A=b,We===null&&(_t=null,tt=0,vc()),C}function f2(){for(;We!==null;)ux(We)}function d2(i,o){var u=pt;pt|=2;var h=ox(),v=lx();_t!==i||tt!==o?(Yc=null,Zc=ye()+500,Ua(i,o)):Fa=Bo(i,o);e:do try{if(gt!==0&&We!==null){o=We;var b=Kn;t:switch(gt){case 1:gt=0,Kn=null,Va(i,o,b,1);break;case 2:case 9:if(bS(b)){gt=0,Kn=null,cx(o);break}o=function(){gt!==2&&gt!==9||_t!==i||(gt=7),Fr(i)},b.then(o,o);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:bS(b)?(gt=0,Kn=null,cx(o)):(gt=0,Kn=null,Va(i,o,b,7));break;case 5:var C=null;switch(We.tag){case 26:C=We.memoizedState;case 5:case 27:var T=We;if(C?Zx(C):T.stateNode.complete){gt=0,Kn=null;var B=T.sibling;if(B!==null)We=B;else{var Y=T.return;Y!==null?(We=Y,Xc(Y)):We=null}break t}}gt=0,Kn=null,Va(i,o,b,5);break;case 6:gt=0,Kn=null,Va(i,o,b,6);break;case 8:Em(),It=6;break e;default:throw Error(r(462))}}h2();break}catch(ie){ix(i,ie)}while(!0);return ns=Ai=null,$.H=h,$.A=v,pt=u,We!==null?0:(_t=null,tt=0,vc(),It)}function h2(){for(;We!==null&&!Le();)ux(We)}function ux(i){var o=Nw(i.alternate,i,ds);i.memoizedProps=i.pendingProps,o===null?Xc(i):We=o}function cx(i){var o=i,u=o.alternate;switch(o.tag){case 15:case 0:o=Rw(u,o,o.pendingProps,o.type,void 0,tt);break;case 11:o=Rw(u,o,o.pendingProps,o.type.render,o.ref,tt);break;case 5:Bp(o);default:zw(u,o),o=We=lS(o,ds),o=Nw(u,o,ds)}i.memoizedProps=i.pendingProps,o===null?Xc(i):We=o}function Va(i,o,u,h){ns=Ai=null,Bp(o),Ia=null,sl=0;var v=o.return;try{if(t2(i,v,o,u,tt)){It=1,$c(i,cr(u,i.current)),We=null;return}}catch(b){if(v!==null)throw We=v,b;It=1,$c(i,cr(u,i.current)),We=null;return}o.flags&32768?(it||h===1?i=!0:Fa||(tt&536870912)!==0?i=!1:($s=i=!0,(h===2||h===9||h===3||h===6)&&(h=qn.current,h!==null&&h.tag===13&&(h.flags|=16384))),fx(o,i)):Xc(o)}function Xc(i){var o=i;do{if((o.flags&32768)!==0){fx(o,$s);return}i=o.return;var u=s2(o.alternate,o,ds);if(u!==null){We=u;return}if(o=o.sibling,o!==null){We=o;return}We=o=i}while(o!==null);It===0&&(It=5)}function fx(i,o){do{var u=i2(i.alternate,i);if(u!==null){u.flags&=32767,We=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(i=i.sibling,i!==null)){We=i;return}We=i=u}while(i!==null);It=6,We=null}function dx(i,o,u,h,v,b,C,T,B){i.cancelPendingCommit=null;do ef();while(qt!==0);if((pt&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=pp,KM(i,u,b,C,T,B),i===_t&&(We=_t=null,tt=0),Ba=o,Vs=i,hs=u,xm=b,_m=v,tx=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,y2(Ce,function(){return yx(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=$.T,$.T=null,v=W.p,W.p=2,C=pt,pt|=4;try{a2(i,o,u)}finally{pt=C,W.p=v,$.T=h}}qt=1,hx(),px(),mx()}}function hx(){if(qt===1){qt=0;var i=Vs,o=Ba,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=$.T,$.T=null;var h=W.p;W.p=2;var v=pt;pt|=4;try{Gw(o,i);var b=Pm,C=Xb(i.containerInfo),T=b.focusedElem,B=b.selectionRange;if(C!==T&&T&&T.ownerDocument&&Wb(T.ownerDocument.documentElement,T)){if(B!==null&&up(T)){var Y=B.start,ie=B.end;if(ie===void 0&&(ie=Y),"selectionStart"in T)T.selectionStart=Y,T.selectionEnd=Math.min(ie,T.value.length);else{var le=T.ownerDocument||document,ee=le&&le.defaultView||window;if(ee.getSelection){var re=ee.getSelection(),we=T.textContent.length,ze=Math.min(B.start,we),wt=B.end===void 0?ze:Math.min(B.end,we);!re.extend&&ze>wt&&(C=wt,wt=ze,ze=C);var K=Jb(T,ze),V=Jb(T,wt);if(K&&V&&(re.rangeCount!==1||re.anchorNode!==K.node||re.anchorOffset!==K.offset||re.focusNode!==V.node||re.focusOffset!==V.offset)){var Z=le.createRange();Z.setStart(K.node,K.offset),re.removeAllRanges(),ze>wt?(re.addRange(Z),re.extend(V.node,V.offset)):(Z.setEnd(V.node,V.offset),re.addRange(Z))}}}}for(le=[],re=T;re=re.parentNode;)re.nodeType===1&&le.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<le.length;T++){var ae=le[T];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}hf=!!jm,Pm=jm=null}finally{pt=v,W.p=h,$.T=u}}i.current=o,qt=2}}function px(){if(qt===2){qt=0;var i=Vs,o=Ba,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=$.T,$.T=null;var h=W.p;W.p=2;var v=pt;pt|=4;try{Uw(i,o.alternate,o)}finally{pt=v,W.p=h,$.T=u}}qt=3}}function mx(){if(qt===4||qt===3){qt=0,be();var i=Vs,o=Ba,u=hs,h=tx;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?qt=5:(qt=0,Ba=Vs=null,gx(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(Us=null),qh(u),o=o.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(ut,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=$.T,v=W.p,W.p=2,$.T=null;try{for(var b=i.onRecoverableError,C=0;C<h.length;C++){var T=h[C];b(T.value,{componentStack:T.stack})}}finally{$.T=o,W.p=v}}(hs&3)!==0&&ef(),Fr(i),v=i.pendingLanes,(u&261930)!==0&&(v&42)!==0?i===Cm?wl++:(wl=0,Cm=i):wl=0,xl(0)}}function gx(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,nl(o)))}function ef(){return hx(),px(),mx(),yx()}function yx(){if(qt!==5)return!1;var i=Vs,o=xm;xm=0;var u=qh(hs),h=$.T,v=W.p;try{W.p=32>u?32:u,$.T=null,u=_m,_m=null;var b=Vs,C=hs;if(qt=0,Ba=Vs=null,hs=0,(pt&6)!==0)throw Error(r(331));var T=pt;if(pt|=4,Ww(b.current),Zw(b,b.current,C,u),pt=T,xl(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(ut,b)}catch{}return!0}finally{W.p=v,$.T=h,gx(i,o)}}function vx(i,o,u){o=cr(u,o),o=nm(i.stateNode,o,2),i=Ls(i,o,2),i!==null&&(Uo(i,2),Fr(i))}function yt(i,o,u){if(i.tag===3)vx(i,i,u);else for(;o!==null;){if(o.tag===3){vx(o,i,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Us===null||!Us.has(h))){i=cr(u,i),u=bw(2),h=Ls(o,u,2),h!==null&&(Sw(u,h,o,i),Uo(h,2),Fr(h));break}}o=o.return}}function Rm(i,o,u){var h=i.pingCache;if(h===null){h=i.pingCache=new u2;var v=new Set;h.set(o,v)}else v=h.get(o),v===void 0&&(v=new Set,h.set(o,v));v.has(u)||(bm=!0,v.add(u),i=p2.bind(null,i,o,u),o.then(i,i))}function p2(i,o,u){var h=i.pingCache;h!==null&&h.delete(o),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,_t===i&&(tt&u)===u&&(It===4||It===3&&(tt&62914560)===tt&&300>ye()-Qc?(pt&2)===0&&Ua(i,0):Sm|=u,$a===tt&&($a=0)),Fr(i)}function bx(i,o){o===0&&(o=hb()),i=Ei(i,o),i!==null&&(Uo(i,o),Fr(i))}function m2(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),bx(i,u)}function g2(i,o){var u=0;switch(i.tag){case 31:case 13:var h=i.stateNode,v=i.memoizedState;v!==null&&(u=v.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),bx(i,u)}function y2(i,o){return Oe(i,o)}var tf=null,qa=null,Am=!1,nf=!1,Tm=!1,Hs=0;function Fr(i){i!==qa&&i.next===null&&(qa===null?tf=qa=i:qa=qa.next=i),nf=!0,Am||(Am=!0,b2())}function xl(i,o){if(!Tm&&nf){Tm=!0;do for(var u=!1,h=tf;h!==null;){if(i!==0){var v=h.pendingLanes;if(v===0)var b=0;else{var C=h.suspendedLanes,T=h.pingedLanes;b=(1<<31-xt(42|i)+1)-1,b&=v&~(C&~T),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,_x(h,b))}else b=tt,b=ac(h,h===_t?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||Bo(h,b)||(u=!0,_x(h,b));h=h.next}while(u);Tm=!1}}function v2(){Sx()}function Sx(){nf=Am=!1;var i=0;Hs!==0&&T2()&&(i=Hs);for(var o=ye(),u=null,h=tf;h!==null;){var v=h.next,b=wx(h,o);b===0?(h.next=null,u===null?tf=v:u.next=v,v===null&&(qa=u)):(u=h,(i!==0||(b&3)!==0)&&(nf=!0)),h=v}qt!==0&&qt!==5||xl(i),Hs!==0&&(Hs=0)}function wx(i,o){for(var u=i.suspendedLanes,h=i.pingedLanes,v=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var C=31-xt(b),T=1<<C,B=v[C];B===-1?((T&u)===0||(T&h)!==0)&&(v[C]=HM(T,o)):B<=o&&(i.expiredLanes|=T),b&=~T}if(o=_t,u=tt,u=ac(i,i===o?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,u===0||i===o&&(gt===2||gt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&ge(h),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||Bo(i,u)){if(o=u&-u,o===i.callbackPriority)return o;switch(h!==null&&ge(h),qh(u)){case 2:case 8:u=fe;break;case 32:u=Ce;break;case 268435456:u=Se;break;default:u=Ce}return h=xx.bind(null,i),u=Oe(u,h),i.callbackPriority=o,i.callbackNode=u,o}return h!==null&&h!==null&&ge(h),i.callbackPriority=2,i.callbackNode=null,2}function xx(i,o){if(qt!==0&&qt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(ef()&&i.callbackNode!==u)return null;var h=tt;return h=ac(i,i===_t?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(rx(i,h,o),wx(i,ye()),i.callbackNode!=null&&i.callbackNode===u?xx.bind(null,i):null)}function _x(i,o){if(ef())return null;rx(i,o,!0)}function b2(){O2(function(){(pt&6)!==0?Oe(ne,v2):Sx()})}function Mm(){if(Hs===0){var i=Ta;i===0&&(i=rc,rc<<=1,(rc&261888)===0&&(rc=256)),Hs=i}return Hs}function Cx(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:cc(""+i)}function Ex(i,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,i.id&&u.setAttribute("form",i.id),o.parentNode.insertBefore(u,o),i=new FormData(i),u.parentNode.removeChild(u),i}function S2(i,o,u,h,v){if(o==="submit"&&u&&u.stateNode===v){var b=Cx((v[An]||null).action),C=h.submitter;C&&(o=(o=C[An]||null)?Cx(o.formAction):C.getAttribute("formAction"),o!==null&&(b=o,C=null));var T=new pc("action","action",null,h,v);i.push({event:T,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Hs!==0){var B=C?Ex(v,C):new FormData(v);Yp(u,{pending:!0,data:B,method:v.method,action:b},null,B)}}else typeof b=="function"&&(T.preventDefault(),B=C?Ex(v,C):new FormData(v),Yp(u,{pending:!0,data:B,method:v.method,action:b},b,B))},currentTarget:v}]})}}for(var Om=0;Om<hp.length;Om++){var Im=hp[Om],w2=Im.toLowerCase(),x2=Im[0].toUpperCase()+Im.slice(1);Rr(w2,"on"+x2)}Rr(nS,"onAnimationEnd"),Rr(rS,"onAnimationIteration"),Rr(sS,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(PO,"onTransitionRun"),Rr(FO,"onTransitionStart"),Rr($O,"onTransitionCancel"),Rr(iS,"onTransitionEnd"),ma("onMouseEnter",["mouseout","mouseover"]),ma("onMouseLeave",["mouseout","mouseover"]),ma("onPointerEnter",["pointerout","pointerover"]),ma("onPointerLeave",["pointerout","pointerover"]),wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function kx(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var h=i[u],v=h.event;h=h.listeners;e:{var b=void 0;if(o)for(var C=h.length-1;0<=C;C--){var T=h[C],B=T.instance,Y=T.currentTarget;if(T=T.listener,B!==b&&v.isPropagationStopped())break e;b=T,v.currentTarget=Y;try{b(v)}catch(ie){yc(ie)}v.currentTarget=null,b=B}else for(C=0;C<h.length;C++){if(T=h[C],B=T.instance,Y=T.currentTarget,T=T.listener,B!==b&&v.isPropagationStopped())break e;b=T,v.currentTarget=Y;try{b(v)}catch(ie){yc(ie)}v.currentTarget=null,b=B}}}}function Xe(i,o){var u=o[Hh];u===void 0&&(u=o[Hh]=new Set);var h=i+"__bubble";u.has(h)||(Rx(o,i,2,!1),u.add(h))}function Nm(i,o,u){var h=0;o&&(h|=4),Rx(u,i,h,o)}var rf="_reactListening"+Math.random().toString(36).slice(2);function Dm(i){if(!i[rf]){i[rf]=!0,Sb.forEach(function(u){u!=="selectionchange"&&(_2.has(u)||Nm(u,!1,i),Nm(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[rf]||(o[rf]=!0,Nm("selectionchange",!1,o))}}function Rx(i,o,u,h){switch(n_(o)){case 2:var v=J2;break;case 8:v=W2;break;default:v=Zm}u=v.bind(null,o,u,i),v=void 0,!ep||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),h?v!==void 0?i.addEventListener(o,u,{capture:!0,passive:v}):i.addEventListener(o,u,!0):v!==void 0?i.addEventListener(o,u,{passive:v}):i.addEventListener(o,u,!1)}function zm(i,o,u,h,v){var b=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var T=h.stateNode.containerInfo;if(T===v)break;if(C===4)for(C=h.return;C!==null;){var B=C.tag;if((B===3||B===4)&&C.stateNode.containerInfo===v)return;C=C.return}for(;T!==null;){if(C=da(T),C===null)return;if(B=C.tag,B===5||B===6||B===26||B===27){h=b=C;continue e}T=T.parentNode}}h=h.return}Ib(function(){var Y=b,ie=Wh(u),le=[];e:{var ee=aS.get(i);if(ee!==void 0){var re=pc,we=i;switch(i){case"keypress":if(dc(u)===0)break e;case"keydown":case"keyup":re=gO;break;case"focusin":we="focus",re=sp;break;case"focusout":we="blur",re=sp;break;case"beforeblur":case"afterblur":re=sp;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=zb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=sO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=bO;break;case nS:case rS:case sS:re=oO;break;case iS:re=wO;break;case"scroll":case"scrollend":re=nO;break;case"wheel":re=_O;break;case"copy":case"cut":case"paste":re=uO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=jb;break;case"toggle":case"beforetoggle":re=EO}var ze=(o&4)!==0,wt=!ze&&(i==="scroll"||i==="scrollend"),K=ze?ee!==null?ee+"Capture":null:ee;ze=[];for(var V=Y,Z;V!==null;){var ae=V;if(Z=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Z===null||K===null||(ae=Ho(V,K),ae!=null&&ze.push(Cl(V,ae,Z))),wt)break;V=V.return}0<ze.length&&(ee=new re(ee,we,null,u,ie),le.push({event:ee,listeners:ze}))}}if((o&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",re=i==="mouseout"||i==="pointerout",ee&&u!==Jh&&(we=u.relatedTarget||u.fromElement)&&(da(we)||we[fa]))break e;if((re||ee)&&(ee=ie.window===ie?ie:(ee=ie.ownerDocument)?ee.defaultView||ee.parentWindow:window,re?(we=u.relatedTarget||u.toElement,re=Y,we=we?da(we):null,we!==null&&(wt=a(we),ze=we.tag,we!==wt||ze!==5&&ze!==27&&ze!==6)&&(we=null)):(re=null,we=Y),re!==we)){if(ze=zb,ae="onMouseLeave",K="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(ze=jb,ae="onPointerLeave",K="onPointerEnter",V="pointer"),wt=re==null?ee:qo(re),Z=we==null?ee:qo(we),ee=new ze(ae,V+"leave",re,u,ie),ee.target=wt,ee.relatedTarget=Z,ae=null,da(ie)===Y&&(ze=new ze(K,V+"enter",we,u,ie),ze.target=Z,ze.relatedTarget=wt,ae=ze),wt=ae,re&&we)t:{for(ze=C2,K=re,V=we,Z=0,ae=K;ae;ae=ze(ae))Z++;ae=0;for(var Ie=V;Ie;Ie=ze(Ie))ae++;for(;0<Z-ae;)K=ze(K),Z--;for(;0<ae-Z;)V=ze(V),ae--;for(;Z--;){if(K===V||V!==null&&K===V.alternate){ze=K;break t}K=ze(K),V=ze(V)}ze=null}else ze=null;re!==null&&Ax(le,ee,re,ze,!1),we!==null&&wt!==null&&Ax(le,wt,we,ze,!0)}}e:{if(ee=Y?qo(Y):window,re=ee.nodeName&&ee.nodeName.toLowerCase(),re==="select"||re==="input"&&ee.type==="file")var ft=Hb;else if(Vb(ee))if(Kb)ft=zO;else{ft=NO;var Re=IO}else re=ee.nodeName,!re||re.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Y&&Yh(Y.elementType)&&(ft=Hb):ft=DO;if(ft&&(ft=ft(i,Y))){qb(le,ft,u,ie);break e}Re&&Re(i,ee,Y),i==="focusout"&&Y&&ee.type==="number"&&Y.memoizedProps.value!=null&&Zh(ee,"number",ee.value)}switch(Re=Y?qo(Y):window,i){case"focusin":(Vb(Re)||Re.contentEditable==="true")&&(wa=Re,cp=Y,Xo=null);break;case"focusout":Xo=cp=wa=null;break;case"mousedown":fp=!0;break;case"contextmenu":case"mouseup":case"dragend":fp=!1,eS(le,u,ie);break;case"selectionchange":if(jO)break;case"keydown":case"keyup":eS(le,u,ie)}var Ke;if(ap)e:{switch(i){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else Sa?Bb(i,u)&&(nt="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(nt="onCompositionStart");nt&&(Pb&&u.locale!=="ko"&&(Sa||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&Sa&&(Ke=Nb()):(Ts=ie,tp="value"in Ts?Ts.value:Ts.textContent,Sa=!0)),Re=sf(Y,nt),0<Re.length&&(nt=new Lb(nt,i,null,u,ie),le.push({event:nt,listeners:Re}),Ke?nt.data=Ke:(Ke=Ub(u),Ke!==null&&(nt.data=Ke)))),(Ke=RO?AO(i,u):TO(i,u))&&(nt=sf(Y,"onBeforeInput"),0<nt.length&&(Re=new Lb("onBeforeInput","beforeinput",null,u,ie),le.push({event:Re,listeners:nt}),Re.data=Ke)),S2(le,i,Y,u,ie)}kx(le,o)})}function Cl(i,o,u){return{instance:i,listener:o,currentTarget:u}}function sf(i,o){for(var u=o+"Capture",h=[];i!==null;){var v=i,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=Ho(i,u),v!=null&&h.unshift(Cl(i,v,b)),v=Ho(i,o),v!=null&&h.push(Cl(i,v,b))),i.tag===3)return h;i=i.return}return[]}function C2(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Ax(i,o,u,h,v){for(var b=o._reactName,C=[];u!==null&&u!==h;){var T=u,B=T.alternate,Y=T.stateNode;if(T=T.tag,B!==null&&B===h)break;T!==5&&T!==26&&T!==27||Y===null||(B=Y,v?(Y=Ho(u,b),Y!=null&&C.unshift(Cl(u,Y,B))):v||(Y=Ho(u,b),Y!=null&&C.push(Cl(u,Y,B)))),u=u.return}C.length!==0&&i.push({event:o,listeners:C})}var E2=/\r\n?/g,k2=/\u0000|\uFFFD/g;function Tx(i){return(typeof i=="string"?i:""+i).replace(E2,`
`).replace(k2,"")}function Mx(i,o){return o=Tx(o),Tx(i)===o}function St(i,o,u,h,v,b){switch(u){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||ya(i,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&ya(i,""+h);break;case"className":lc(i,"class",h);break;case"tabIndex":lc(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":lc(i,u,h);break;case"style":Mb(i,h,b);break;case"data":if(o!=="object"){lc(i,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||u!=="href")){i.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(u);break}h=cc(""+h),i.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(o!=="input"&&St(i,o,"name",v.name,v,null),St(i,o,"formEncType",v.formEncType,v,null),St(i,o,"formMethod",v.formMethod,v,null),St(i,o,"formTarget",v.formTarget,v,null)):(St(i,o,"encType",v.encType,v,null),St(i,o,"method",v.method,v,null),St(i,o,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(u);break}h=cc(""+h),i.setAttribute(u,h);break;case"onClick":h!=null&&(i.onclick=Wr);break;case"onScroll":h!=null&&Xe("scroll",i);break;case"onScrollEnd":h!=null&&Xe("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}u=cc(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(u,""+h):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":h===!0?i.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(u,h):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(u,h):i.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(u):i.setAttribute(u,h);break;case"popover":Xe("beforetoggle",i),Xe("toggle",i),oc(i,"popover",h);break;case"xlinkActuate":Jr(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Jr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Jr(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Jr(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Jr(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Jr(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Jr(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Jr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Jr(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":oc(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=eO.get(u)||u,oc(i,u,h))}}function Lm(i,o,u,h,v,b){switch(u){case"style":Mb(i,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(u=h.__html,u!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof h=="string"?ya(i,h):(typeof h=="number"||typeof h=="bigint")&&ya(i,""+h);break;case"onScroll":h!=null&&Xe("scroll",i);break;case"onScrollEnd":h!=null&&Xe("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Wr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wb.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),b=i[An]||null,b=b!=null?b[u]:null,typeof b=="function"&&i.removeEventListener(o,b,v),typeof h=="function")){typeof b!="function"&&b!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(o,h,v);break e}u in i?i[u]=h:h===!0?i.setAttribute(u,""):oc(i,u,h)}}}function on(i,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",i),Xe("load",i);var h=!1,v=!1,b;for(b in u)if(u.hasOwnProperty(b)){var C=u[b];if(C!=null)switch(b){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:St(i,o,b,C,u,null)}}v&&St(i,o,"srcSet",u.srcSet,u,null),h&&St(i,o,"src",u.src,u,null);return;case"input":Xe("invalid",i);var T=b=C=v=null,B=null,Y=null;for(h in u)if(u.hasOwnProperty(h)){var ie=u[h];if(ie!=null)switch(h){case"name":v=ie;break;case"type":C=ie;break;case"checked":B=ie;break;case"defaultChecked":Y=ie;break;case"value":b=ie;break;case"defaultValue":T=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,o));break;default:St(i,o,h,ie,u,null)}}kb(i,b,T,B,Y,C,v,!1);return;case"select":Xe("invalid",i),h=C=b=null;for(v in u)if(u.hasOwnProperty(v)&&(T=u[v],T!=null))switch(v){case"value":b=T;break;case"defaultValue":C=T;break;case"multiple":h=T;default:St(i,o,v,T,u,null)}o=b,u=C,i.multiple=!!h,o!=null?ga(i,!!h,o,!1):u!=null&&ga(i,!!h,u,!0);return;case"textarea":Xe("invalid",i),b=v=h=null;for(C in u)if(u.hasOwnProperty(C)&&(T=u[C],T!=null))switch(C){case"value":h=T;break;case"defaultValue":v=T;break;case"children":b=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:St(i,o,C,T,u,null)}Ab(i,h,v,b);return;case"option":for(B in u)u.hasOwnProperty(B)&&(h=u[B],h!=null)&&(B==="selected"?i.selected=h&&typeof h!="function"&&typeof h!="symbol":St(i,o,B,h,u,null));return;case"dialog":Xe("beforetoggle",i),Xe("toggle",i),Xe("cancel",i),Xe("close",i);break;case"iframe":case"object":Xe("load",i);break;case"video":case"audio":for(h=0;h<_l.length;h++)Xe(_l[h],i);break;case"image":Xe("error",i),Xe("load",i);break;case"details":Xe("toggle",i);break;case"embed":case"source":case"link":Xe("error",i),Xe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in u)if(u.hasOwnProperty(Y)&&(h=u[Y],h!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:St(i,o,Y,h,u,null)}return;default:if(Yh(o)){for(ie in u)u.hasOwnProperty(ie)&&(h=u[ie],h!==void 0&&Lm(i,o,ie,h,u,void 0));return}}for(T in u)u.hasOwnProperty(T)&&(h=u[T],h!=null&&St(i,o,T,h,u,null))}function R2(i,o,u,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,C=null,T=null,B=null,Y=null,ie=null;for(re in u){var le=u[re];if(u.hasOwnProperty(re)&&le!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":B=le;default:h.hasOwnProperty(re)||St(i,o,re,null,h,le)}}for(var ee in h){var re=h[ee];if(le=u[ee],h.hasOwnProperty(ee)&&(re!=null||le!=null))switch(ee){case"type":b=re;break;case"name":v=re;break;case"checked":Y=re;break;case"defaultChecked":ie=re;break;case"value":C=re;break;case"defaultValue":T=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,o));break;default:re!==le&&St(i,o,ee,re,h,le)}}Qh(i,C,T,B,Y,ie,b,v);return;case"select":re=C=T=ee=null;for(b in u)if(B=u[b],u.hasOwnProperty(b)&&B!=null)switch(b){case"value":break;case"multiple":re=B;default:h.hasOwnProperty(b)||St(i,o,b,null,h,B)}for(v in h)if(b=h[v],B=u[v],h.hasOwnProperty(v)&&(b!=null||B!=null))switch(v){case"value":ee=b;break;case"defaultValue":T=b;break;case"multiple":C=b;default:b!==B&&St(i,o,v,b,h,B)}o=T,u=C,h=re,ee!=null?ga(i,!!u,ee,!1):!!h!=!!u&&(o!=null?ga(i,!!u,o,!0):ga(i,!!u,u?[]:"",!1));return;case"textarea":re=ee=null;for(T in u)if(v=u[T],u.hasOwnProperty(T)&&v!=null&&!h.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:St(i,o,T,null,h,v)}for(C in h)if(v=h[C],b=u[C],h.hasOwnProperty(C)&&(v!=null||b!=null))switch(C){case"value":ee=v;break;case"defaultValue":re=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==b&&St(i,o,C,v,h,b)}Rb(i,ee,re);return;case"option":for(var we in u)ee=u[we],u.hasOwnProperty(we)&&ee!=null&&!h.hasOwnProperty(we)&&(we==="selected"?i.selected=!1:St(i,o,we,null,h,ee));for(B in h)ee=h[B],re=u[B],h.hasOwnProperty(B)&&ee!==re&&(ee!=null||re!=null)&&(B==="selected"?i.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":St(i,o,B,ee,h,re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in u)ee=u[ze],u.hasOwnProperty(ze)&&ee!=null&&!h.hasOwnProperty(ze)&&St(i,o,ze,null,h,ee);for(Y in h)if(ee=h[Y],re=u[Y],h.hasOwnProperty(Y)&&ee!==re&&(ee!=null||re!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,o));break;default:St(i,o,Y,ee,h,re)}return;default:if(Yh(o)){for(var wt in u)ee=u[wt],u.hasOwnProperty(wt)&&ee!==void 0&&!h.hasOwnProperty(wt)&&Lm(i,o,wt,void 0,h,ee);for(ie in h)ee=h[ie],re=u[ie],!h.hasOwnProperty(ie)||ee===re||ee===void 0&&re===void 0||Lm(i,o,ie,ee,h,re);return}}for(var K in u)ee=u[K],u.hasOwnProperty(K)&&ee!=null&&!h.hasOwnProperty(K)&&St(i,o,K,null,h,ee);for(le in h)ee=h[le],re=u[le],!h.hasOwnProperty(le)||ee===re||ee==null&&re==null||St(i,o,le,ee,h,re)}function Ox(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function A2(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var v=u[h],b=v.transferSize,C=v.initiatorType,T=v.duration;if(b&&T&&Ox(C)){for(C=0,T=v.responseEnd,h+=1;h<u.length;h++){var B=u[h],Y=B.startTime;if(Y>T)break;var ie=B.transferSize,le=B.initiatorType;ie&&Ox(le)&&(B=B.responseEnd,C+=ie*(B<T?1:(T-Y)/(B-Y)))}if(--h,o+=8*(b+C)/(v.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var jm=null,Pm=null;function af(i){return i.nodeType===9?i:i.ownerDocument}function Ix(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nx(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Fm(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var $m=null;function T2(){var i=window.event;return i&&i.type==="popstate"?i===$m?!1:($m=i,!0):($m=null,!1)}var Dx=typeof setTimeout=="function"?setTimeout:void 0,M2=typeof clearTimeout=="function"?clearTimeout:void 0,zx=typeof Promise=="function"?Promise:void 0,O2=typeof queueMicrotask=="function"?queueMicrotask:typeof zx<"u"?function(i){return zx.resolve(null).then(i).catch(I2)}:Dx;function I2(i){setTimeout(function(){throw i})}function Ks(i){return i==="head"}function Lx(i,o){var u=o,h=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(h===0){i.removeChild(v),Qa(o);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")El(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,El(u);for(var b=u.firstChild;b;){var C=b.nextSibling,T=b.nodeName;b[Vo]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=C}}else u==="body"&&El(i.ownerDocument.body);u=v}while(u);Qa(o)}function jx(i,o){var u=i;i=0;do{var h=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=h}while(u)}function Bm(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Bm(u),Kh(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function N2(i,o,u,h){for(;i.nodeType===1;){var v=u;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Vo])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=mr(i.nextSibling),i===null)break}return null}function D2(i,o,u){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=mr(i.nextSibling),i===null))return null;return i}function Px(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=mr(i.nextSibling),i===null))return null;return i}function Um(i){return i.data==="$?"||i.data==="$~"}function Vm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function z2(i,o){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||u.readyState!=="loading")o();else{var h=function(){o(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function mr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var qm=null;function Fx(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(o===0)return mr(i.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}i=i.nextSibling}return null}function $x(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return i;o--}else u!=="/$"&&u!=="/&"||o++}i=i.previousSibling}return null}function Bx(i,o,u){switch(o=af(u),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function El(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Kh(i)}var gr=new Map,Ux=new Set;function of(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ps=W.d;W.d={f:L2,r:j2,D:P2,C:F2,L:$2,m:B2,X:V2,S:U2,M:q2};function L2(){var i=ps.f(),o=Jc();return i||o}function j2(i){var o=ha(i);o!==null&&o.tag===5&&o.type==="form"?iw(o):ps.r(i)}var Ha=typeof document>"u"?null:document;function Vx(i,o,u){var h=Ha;if(h&&typeof o=="string"&&o){var v=lr(o);v='link[rel="'+i+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),Ux.has(v)||(Ux.add(v),i={rel:i,crossOrigin:u,href:o},h.querySelector(v)===null&&(o=h.createElement("link"),on(o,"link",i),Yt(o),h.head.appendChild(o)))}}function P2(i){ps.D(i),Vx("dns-prefetch",i,null)}function F2(i,o){ps.C(i,o),Vx("preconnect",i,o)}function $2(i,o,u){ps.L(i,o,u);var h=Ha;if(h&&i&&o){var v='link[rel="preload"][as="'+lr(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+lr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+lr(u.imageSizes)+'"]')):v+='[href="'+lr(i)+'"]';var b=v;switch(o){case"style":b=Ka(i);break;case"script":b=Ga(i)}gr.has(b)||(i=p({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:i,as:o},u),gr.set(b,i),h.querySelector(v)!==null||o==="style"&&h.querySelector(kl(b))||o==="script"&&h.querySelector(Rl(b))||(o=h.createElement("link"),on(o,"link",i),Yt(o),h.head.appendChild(o)))}}function B2(i,o){ps.m(i,o);var u=Ha;if(u&&i){var h=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+lr(h)+'"][href="'+lr(i)+'"]',b=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Ga(i)}if(!gr.has(b)&&(i=p({rel:"modulepreload",href:i},o),gr.set(b,i),u.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Rl(b)))return}h=u.createElement("link"),on(h,"link",i),Yt(h),u.head.appendChild(h)}}}function U2(i,o,u){ps.S(i,o,u);var h=Ha;if(h&&i){var v=pa(h).hoistableStyles,b=Ka(i);o=o||"default";var C=v.get(b);if(!C){var T={loading:0,preload:null};if(C=h.querySelector(kl(b)))T.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},u),(u=gr.get(b))&&Hm(i,u);var B=C=h.createElement("link");Yt(B),on(B,"link",i),B._p=new Promise(function(Y,ie){B.onload=Y,B.onerror=ie}),B.addEventListener("load",function(){T.loading|=1}),B.addEventListener("error",function(){T.loading|=2}),T.loading|=4,lf(C,o,h)}C={type:"stylesheet",instance:C,count:1,state:T},v.set(b,C)}}}function V2(i,o){ps.X(i,o);var u=Ha;if(u&&i){var h=pa(u).hoistableScripts,v=Ga(i),b=h.get(v);b||(b=u.querySelector(Rl(v)),b||(i=p({src:i,async:!0},o),(o=gr.get(v))&&Km(i,o),b=u.createElement("script"),Yt(b),on(b,"link",i),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(v,b))}}function q2(i,o){ps.M(i,o);var u=Ha;if(u&&i){var h=pa(u).hoistableScripts,v=Ga(i),b=h.get(v);b||(b=u.querySelector(Rl(v)),b||(i=p({src:i,async:!0,type:"module"},o),(o=gr.get(v))&&Km(i,o),b=u.createElement("script"),Yt(b),on(b,"link",i),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(v,b))}}function qx(i,o,u,h){var v=(v=he.current)?of(v):null;if(!v)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Ka(u.href),u=pa(v).hoistableStyles,h=u.get(o),h||(h={type:"style",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=Ka(u.href);var b=pa(v).hoistableStyles,C=b.get(i);if(C||(v=v.ownerDocument||v,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,C),(b=v.querySelector(kl(i)))&&!b._p&&(C.instance=b,C.state.loading=5),gr.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},gr.set(i,u),b||H2(v,i,u,C.state))),o&&h===null)throw Error(r(528,""));return C}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ga(u),u=pa(v).hoistableScripts,h=u.get(o),h||(h={type:"script",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ka(i){return'href="'+lr(i)+'"'}function kl(i){return'link[rel="stylesheet"]['+i+"]"}function Hx(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function H2(i,o,u,h){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=i.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),on(o,"link",u),Yt(o),i.head.appendChild(o))}function Ga(i){return'[src="'+lr(i)+'"]'}function Rl(i){return"script[async]"+i}function Kx(i,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var h=i.querySelector('style[data-href~="'+lr(u.href)+'"]');if(h)return o.instance=h,Yt(h),h;var v=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Yt(h),on(h,"style",v),lf(h,u.precedence,i),o.instance=h;case"stylesheet":v=Ka(u.href);var b=i.querySelector(kl(v));if(b)return o.state.loading|=4,o.instance=b,Yt(b),b;h=Hx(u),(v=gr.get(v))&&Hm(h,v),b=(i.ownerDocument||i).createElement("link"),Yt(b);var C=b;return C._p=new Promise(function(T,B){C.onload=T,C.onerror=B}),on(b,"link",h),o.state.loading|=4,lf(b,u.precedence,i),o.instance=b;case"script":return b=Ga(u.src),(v=i.querySelector(Rl(b)))?(o.instance=v,Yt(v),v):(h=u,(v=gr.get(b))&&(h=p({},u),Km(h,v)),i=i.ownerDocument||i,v=i.createElement("script"),Yt(v),on(v,"link",h),i.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,lf(h,u.precedence,i));return o.instance}function lf(i,o,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,b=v,C=0;C<h.length;C++){var T=h[C];if(T.dataset.precedence===o)b=T;else if(b!==v)break}b?b.parentNode.insertBefore(i,b.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(i,o.firstChild))}function Hm(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Km(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var uf=null;function Gx(i,o,u){if(uf===null){var h=new Map,v=uf=new Map;v.set(u,h)}else v=uf,h=v.get(u),h||(h=new Map,v.set(u,h));if(h.has(i))return h;for(h.set(i,null),u=u.getElementsByTagName(i),v=0;v<u.length;v++){var b=u[v];if(!(b[Vo]||b[nn]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var C=b.getAttribute(o)||"";C=i+C;var T=h.get(C);T?T.push(b):h.set(C,[b])}}return h}function Qx(i,o,u){i=i.ownerDocument||i,i.head.insertBefore(u,o==="title"?i.querySelector("head > title"):null)}function K2(i,o,u){if(u===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Zx(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function G2(i,o,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=Ka(h.href),b=o.querySelector(kl(v));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=cf.bind(i),o.then(i,i)),u.state.loading|=4,u.instance=b,Yt(b);return}b=o.ownerDocument||o,h=Hx(h),(v=gr.get(v))&&Hm(h,v),b=b.createElement("link"),Yt(b);var C=b;C._p=new Promise(function(T,B){C.onload=T,C.onerror=B}),on(b,"link",h),u.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=cf.bind(i),o.addEventListener("load",u),o.addEventListener("error",u))}}var Gm=0;function Q2(i,o){return i.stylesheets&&i.count===0&&df(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var h=setTimeout(function(){if(i.stylesheets&&df(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+o);0<i.imgBytes&&Gm===0&&(Gm=62500*A2());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&df(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>Gm?50:800)+o);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function cf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)df(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ff=null;function df(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ff=new Map,o.forEach(Z2,i),ff=null,cf.call(i))}function Z2(i,o){if(!(o.state.loading&4)){var u=ff.get(i);if(u)var h=u.get(null);else{u=new Map,ff.set(i,u);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var C=v[b];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),h=C)}h&&u.set(null,h)}v=o.instance,C=v.getAttribute("data-precedence"),b=u.get(C)||h,b===h&&u.set(null,v),u.set(C,v),this.count++,h=cf.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),b?b.parentNode.insertBefore(v,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),o.state.loading|=4}}var Al={$$typeof:R,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function Y2(i,o,u,h,v,b,C,T,B){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Uh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uh(0),this.hiddenUpdates=Uh(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Yx(i,o,u,h,v,b,C,T,B,Y,ie,le){return i=new Y2(i,o,u,C,B,Y,ie,le,T),o=1,b===!0&&(o|=24),b=Vn(3,null,null,o),i.current=b,b.stateNode=i,o=kp(),o.refCount++,i.pooledCache=o,o.refCount++,b.memoizedState={element:h,isDehydrated:u,cache:o},Mp(b),i}function Jx(i){return i?(i=Ca,i):Ca}function Wx(i,o,u,h,v,b){v=Jx(v),h.context===null?h.context=v:h.pendingContext=v,h=zs(o),h.payload={element:u},b=b===void 0?null:b,b!==null&&(h.callback=b),u=Ls(i,h,o),u!==null&&(Dn(u,i,o),al(u,i,o))}function Xx(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Qm(i,o){Xx(i,o),(i=i.alternate)&&Xx(i,o)}function e_(i){if(i.tag===13||i.tag===31){var o=Ei(i,67108864);o!==null&&Dn(o,i,67108864),Qm(i,67108864)}}function t_(i){if(i.tag===13||i.tag===31){var o=Qn();o=Vh(o);var u=Ei(i,o);u!==null&&Dn(u,i,o),Qm(i,o)}}var hf=!0;function J2(i,o,u,h){var v=$.T;$.T=null;var b=W.p;try{W.p=2,Zm(i,o,u,h)}finally{W.p=b,$.T=v}}function W2(i,o,u,h){var v=$.T;$.T=null;var b=W.p;try{W.p=8,Zm(i,o,u,h)}finally{W.p=b,$.T=v}}function Zm(i,o,u,h){if(hf){var v=Ym(h);if(v===null)zm(i,o,h,pf,u),r_(i,h);else if(eI(v,i,o,u,h))h.stopPropagation();else if(r_(i,h),o&4&&-1<X2.indexOf(i)){for(;v!==null;){var b=ha(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var C=Si(b.pendingLanes);if(C!==0){var T=b;for(T.pendingLanes|=2,T.entangledLanes|=2;C;){var B=1<<31-xt(C);T.entanglements[1]|=B,C&=~B}Fr(b),(pt&6)===0&&(Zc=ye()+500,xl(0))}}break;case 31:case 13:T=Ei(b,2),T!==null&&Dn(T,b,2),Jc(),Qm(b,2)}if(b=Ym(h),b===null&&zm(i,o,h,pf,u),b===v)break;v=b}v!==null&&h.stopPropagation()}else zm(i,o,h,null,u)}}function Ym(i){return i=Wh(i),Jm(i)}var pf=null;function Jm(i){if(pf=null,i=da(i),i!==null){var o=a(i);if(o===null)i=null;else{var u=o.tag;if(u===13){if(i=l(o),i!==null)return i;i=null}else if(u===31){if(i=c(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return pf=i,null}function n_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ve()){case ne:return 2;case fe:return 8;case Ce:case ke:return 32;case Se:return 268435456;default:return 32}default:return 32}}var Wm=!1,Gs=null,Qs=null,Zs=null,Tl=new Map,Ml=new Map,Ys=[],X2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function r_(i,o){switch(i){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":Tl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(o.pointerId)}}function Ol(i,o,u,h,v,b){return i===null||i.nativeEvent!==b?(i={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:b,targetContainers:[v]},o!==null&&(o=ha(o),o!==null&&e_(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),i)}function eI(i,o,u,h,v){switch(o){case"focusin":return Gs=Ol(Gs,i,o,u,h,v),!0;case"dragenter":return Qs=Ol(Qs,i,o,u,h,v),!0;case"mouseover":return Zs=Ol(Zs,i,o,u,h,v),!0;case"pointerover":var b=v.pointerId;return Tl.set(b,Ol(Tl.get(b)||null,i,o,u,h,v)),!0;case"gotpointercapture":return b=v.pointerId,Ml.set(b,Ol(Ml.get(b)||null,i,o,u,h,v)),!0}return!1}function s_(i){var o=da(i.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){i.blockedOn=o,vb(i.priority,function(){t_(u)});return}}else if(o===31){if(o=c(u),o!==null){i.blockedOn=o,vb(i.priority,function(){t_(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function mf(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Ym(i.nativeEvent);if(u===null){u=i.nativeEvent;var h=new u.constructor(u.type,u);Jh=h,u.target.dispatchEvent(h),Jh=null}else return o=ha(u),o!==null&&e_(o),i.blockedOn=u,!1;o.shift()}return!0}function i_(i,o,u){mf(i)&&u.delete(o)}function tI(){Wm=!1,Gs!==null&&mf(Gs)&&(Gs=null),Qs!==null&&mf(Qs)&&(Qs=null),Zs!==null&&mf(Zs)&&(Zs=null),Tl.forEach(i_),Ml.forEach(i_)}function gf(i,o){i.blockedOn===o&&(i.blockedOn=null,Wm||(Wm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,tI)))}var yf=null;function a_(i){yf!==i&&(yf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){yf===i&&(yf=null);for(var o=0;o<i.length;o+=3){var u=i[o],h=i[o+1],v=i[o+2];if(typeof h!="function"){if(Jm(h||u)===null)continue;break}var b=ha(u);b!==null&&(i.splice(o,3),o-=3,Yp(b,{pending:!0,data:v,method:u.method,action:h},h,v))}}))}function Qa(i){function o(B){return gf(B,i)}Gs!==null&&gf(Gs,i),Qs!==null&&gf(Qs,i),Zs!==null&&gf(Zs,i),Tl.forEach(o),Ml.forEach(o);for(var u=0;u<Ys.length;u++){var h=Ys[u];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Ys.length&&(u=Ys[0],u.blockedOn===null);)s_(u),u.blockedOn===null&&Ys.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var v=u[h],b=u[h+1],C=v[An]||null;if(typeof b=="function")C||a_(u);else if(C){var T=null;if(b&&b.hasAttribute("formAction")){if(v=b,C=b[An]||null)T=C.formAction;else if(Jm(v)!==null)continue}else T=C.action;typeof T=="function"?u[h+1]=T:(u.splice(h,3),h-=3),a_(u)}}}function o_(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(C){return v=C})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function Xm(i){this._internalRoot=i}vf.prototype.render=Xm.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var u=o.current,h=Qn();Wx(u,h,i,o,null,null)},vf.prototype.unmount=Xm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Wx(i.current,2,null,i,null,null),Jc(),o[fa]=null}};function vf(i){this._internalRoot=i}vf.prototype.unstable_scheduleHydration=function(i){if(i){var o=yb();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Ys.length&&o!==0&&o<Ys[u].priority;u++);Ys.splice(u,0,i),u===0&&s_(i)}};var l_=e.version;if(l_!=="19.2.3")throw Error(r(527,l_,"19.2.3"));W.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var nI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bf.isDisabled&&bf.supportsFiber)try{ut=bf.inject(nI),ct=bf}catch{}}return Nl.createRoot=function(i,o){if(!s(i))throw Error(r(299));var u=!1,h="",v=mw,b=gw,C=yw;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError)),o=Yx(i,1,!1,null,null,u,h,null,v,b,C,o_),i[fa]=o.current,Dm(i),new Xm(o)},Nl.hydrateRoot=function(i,o,u){if(!s(i))throw Error(r(299));var h=!1,v="",b=mw,C=gw,T=yw,B=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(T=u.onRecoverableError),u.formState!==void 0&&(B=u.formState)),o=Yx(i,1,!0,o,u??null,h,v,B,b,C,T,o_),o.context=Jx(null),u=o.current,h=Qn(),h=Vh(h),v=zs(h),v.callback=null,Ls(u,v,h),u=h,o.current.lanes=u,Uo(o,u),Fr(o),i[fa]=o.current,Dm(i),new vf(o)},Nl.version="19.2.3",Nl}var v_;function fI(){if(v_)return ng.exports;v_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ng.exports=cI(),ng.exports}var dI=fI(),ag={exports:{}},og={};var b_;function hI(){if(b_)return og;b_=1;var t=Ao().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return og.c=function(e){return t.H.useMemoCache(e)},og}var S_;function pI(){return S_||(S_=1,ag.exports=hI()),ag.exports}var tn=pI(),To=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},mI={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},gI=class{#e=mI;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},qi=new gI;function yI(t){setTimeout(t,0)}var Xi=typeof window>"u"||"Deno"in globalThis;function wn(){}function vI(t,e){return typeof t=="function"?t(e):t}function yy(t){return typeof t=="number"&&t>=0&&t!==1/0}function $E(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ui(t,e){return typeof t=="function"?t(e):t}function br(t,e){return typeof t=="function"?t(e):t}function w_(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:c}=t;if(l){if(r){if(e.queryHash!==z0(l,e.options))return!1}else if(!Ru(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||s&&s!==e.state.fetchStatus||a&&!a(e))}function x_(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Or(e.options.mutationKey)!==Or(a))return!1}else if(!Ru(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function z0(t,e){return(e?.queryKeyHashFn||Or)(t)}function Or(t){return JSON.stringify(t,(e,n)=>vy(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ru(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Ru(t[n],e[n])):!1}var bI=Object.prototype.hasOwnProperty;function BE(t,e){if(t===e)return t;const n=__(t)&&__(e);if(!n&&!(vy(t)&&vy(e)))return e;const s=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,c=n?new Array(l):{};let f=0;for(let d=0;d<l;d++){const m=n?d:a[d],p=t[m],g=e[m];if(p===g){c[m]=p,(n?d<s:bI.call(t,m))&&f++;continue}if(p===null||g===null||typeof p!="object"||typeof g!="object"){c[m]=g;continue}const y=BE(p,g);c[m]=y,y===p&&f++}return s===l&&f===s?t:c}function wd(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function __(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function vy(t){if(!C_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!C_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function C_(t){return Object.prototype.toString.call(t)==="[object Object]"}function SI(t){return new Promise(e=>{qi.setTimeout(e,t)})}function by(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?BE(t,e):e}function wI(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function xI(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var L0=Symbol();function UE(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===L0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function j0(t,e){return typeof t=="function"?t(...e):!!t}function _I(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var CI=class extends To{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Xi&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},P0=new CI;function Sy(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var EI=yI;function kI(){let t=[],e=0,n=c=>{c()},r=c=>{c()},s=EI;const a=c=>{e?t.push(c):s(()=>{n(c)})},l=()=>{const c=t;t=[],c.length&&s(()=>{r(()=>{c.forEach(f=>{n(f)})})})};return{batch:c=>{let f;e++;try{f=c()}finally{e--,e||l()}return f},batchCalls:c=>(...f)=>{a(()=>{c(...f)})},schedule:a,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{s=c}}}var Zt=kI(),RI=class extends To{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Xi&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},xd=new RI;function AI(t){return Math.min(1e3*2**t,3e4)}function VE(t){return(t??"online")==="online"?xd.isOnline():!0}var wy=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function qE(t){let e=!1,n=0,r;const s=Sy(),a=()=>s.status!=="pending",l=w=>{if(!a()){const E=new wy(w);g(E),t.onCancel?.(E)}},c=()=>{e=!0},f=()=>{e=!1},d=()=>P0.isFocused()&&(t.networkMode==="always"||xd.isOnline())&&t.canRun(),m=()=>VE(t.networkMode)&&t.canRun(),p=w=>{a()||(r?.(),s.resolve(w))},g=w=>{a()||(r?.(),s.reject(w))},y=()=>new Promise(w=>{r=E=>{(a()||d())&&w(E)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),S=()=>{if(a())return;let w;const E=n===0?t.initialPromise:void 0;try{w=E??t.fn()}catch(_){w=Promise.reject(_)}Promise.resolve(w).then(p).catch(_=>{if(a())return;const k=t.retry??(Xi?0:3),R=t.retryDelay??AI,O=typeof R=="function"?R(n,_):R,L=k===!0||typeof k=="number"&&n<k||typeof k=="function"&&k(n,_);if(e||!L){g(_);return}n++,t.onFail?.(n,_),SI(O).then(()=>d()?void 0:y()).then(()=>{e?g(_):S()})})};return{promise:s,status:()=>s.status,cancel:l,continue:()=>(r?.(),s),cancelRetry:c,continueRetry:f,canStart:m,start:()=>(m()?S():y().then(S),s)}}var HE=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),yy(this.gcTime)&&(this.#e=qi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Xi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(qi.clearTimeout(this.#e),this.#e=void 0)}},TI=class extends HE{#e;#t;#n;#r;#s;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=k_(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=k_(this.options);e.data!==void 0&&(this.setState(E_(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=by(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(wn).catch(wn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>br(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===L0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ui(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!$E(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(f=>f.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},s=()=>{const c=UE(this.options,e),d=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#i=!1,this.options.persister?this.options.persister(c,d,this):c(d)},l=(()=>{const c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:s};return r(c),c})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#s=qE({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof wy&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(c,f)=>{this.#a({type:"failed",failureCount:c,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const c=await this.#s.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof wy){if(c.silent)return this.#s.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#a({type:"error",error:c}),this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...KE(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...E_(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Zt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function KE(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:VE(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function E_(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function k_(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var GE=class extends To{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#i=Sy(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#i;#a;#p;#m;#u;#c;#l;#f;#d=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),R_(this.#t,this.options)?this.#h():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return xy(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return xy(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#S(),this.#w(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof br(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#t.setOptions(this.options),e._defaulted&&!wd(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&A_(this.#t,n,this.options,e)&&this.#h(),this.updateResult(),r&&(this.#t!==n||br(this.options.enabled,this.#t)!==br(e.enabled,this.#t)||ui(this.options.staleTime,this.#t)!==ui(e.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==n||br(this.options.enabled,this.#t)!==br(e.enabled,this.#t)||s!==this.#f)&&this.#v(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return OI(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#d.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#x();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(wn)),e}#g(){this.#S();const t=ui(this.options.staleTime,this.#t);if(Xi||this.#r.isStale||!yy(t))return;const n=$E(this.#r.dataUpdatedAt,t)+1;this.#c=qi.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#w(),this.#f=t,!(Xi||br(this.options.enabled,this.#t)===!1||!yy(this.#f)||this.#f===0)&&(this.#l=qi.setInterval(()=>{(this.options.refetchIntervalInBackground||P0.isFocused())&&this.#h()},this.#f))}#b(){this.#g(),this.#v(this.#y())}#S(){this.#c&&(qi.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#l&&(qi.clearInterval(this.#l),this.#l=void 0)}createResult(t,e){const n=this.#t,r=this.options,s=this.#r,a=this.#s,l=this.#o,f=t!==n?t.state:this.#n,{state:d}=t;let m={...d},p=!1,g;if(e._optimisticResults){const P=this.hasListeners(),j=!P&&R_(t,e),I=P&&A_(t,n,e,r);(j||I)&&(m={...m,...KE(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:y,errorUpdatedAt:S,status:w}=m;g=m.data;let E=!1;if(e.placeholderData!==void 0&&g===void 0&&w==="pending"){let P;s?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(P=s.data,E=!0):P=typeof e.placeholderData=="function"?e.placeholderData(this.#u?.state.data,this.#u):e.placeholderData,P!==void 0&&(w="success",g=by(s?.data,P,e),p=!0)}if(e.select&&g!==void 0&&!E)if(s&&g===a?.data&&e.select===this.#p)g=this.#m;else try{this.#p=e.select,g=e.select(g),g=by(s?.data,g,e),this.#m=g,this.#a=null}catch(P){this.#a=P}this.#a&&(y=this.#a,g=this.#m,S=Date.now(),w="error");const _=m.fetchStatus==="fetching",k=w==="pending",R=w==="error",O=k&&_,L=g!==void 0,z={status:w,fetchStatus:m.fetchStatus,isPending:k,isSuccess:w==="success",isError:R,isInitialLoading:O,isLoading:O,data:g,dataUpdatedAt:m.dataUpdatedAt,error:y,errorUpdatedAt:S,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:_,isRefetching:_&&!k,isLoadingError:R&&!L,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:R&&L,isStale:F0(t,e),refetch:this.refetch,promise:this.#i,isEnabled:br(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=F=>{z.status==="error"?F.reject(z.error):z.data!==void 0&&F.resolve(z.data)},j=()=>{const F=this.#i=z.promise=Sy();P(F)},I=this.#i;switch(I.status){case"pending":t.queryHash===n.queryHash&&P(I);break;case"fulfilled":(z.status==="error"||z.data!==I.value)&&j();break;case"rejected":(z.status!=="error"||z.error!==I.reason)&&j();break}}return z}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#u=this.#t),wd(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#d.size)return!0;const a=new Set(s??this.#d);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const c=l;return this.#r[c]!==t[c]&&a.has(c)})};this.#_({listeners:n()})}#x(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#_(t){Zt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function MI(t,e){return br(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function R_(t,e){return MI(t,e)||t.state.data!==void 0&&xy(t,e,e.refetchOnMount)}function xy(t,e,n){if(br(e.enabled,t)!==!1&&ui(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&F0(t,e)}return!1}function A_(t,e,n,r){return(t!==e||br(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&F0(t,n)}function F0(t,e){return br(e.enabled,t)!==!1&&t.isStaleByTime(ui(e.staleTime,t))}function OI(t,e){return!wd(t.getCurrentResult(),e)}function T_(t){return{onFetch:(e,n)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},f=0;const d=async()=>{let m=!1;const p=S=>{_I(S,()=>e.signal,()=>m=!0)},g=UE(e.options,e.fetchOptions),y=async(S,w,E)=>{if(m)return Promise.reject();if(w==null&&S.pages.length)return Promise.resolve(S);const k=(()=>{const A={client:e.client,queryKey:e.queryKey,pageParam:w,direction:E?"backward":"forward",meta:e.options.meta};return p(A),A})(),R=await g(k),{maxPages:O}=e.options,L=E?xI:wI;return{pages:L(S.pages,R,O),pageParams:L(S.pageParams,w,O)}};if(s&&a.length){const S=s==="backward",w=S?II:M_,E={pages:a,pageParams:l},_=w(r,E);c=await y(E,_,S)}else{const S=t??a.length;do{const w=f===0?l[0]??r.initialPageParam:M_(r,c);if(f>0&&w==null)break;c=await y(c,w),f++}while(f<S)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function M_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function II(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var NI=class extends HE{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||QE(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=qE({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#s({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#r.canStart();try{if(r)e();else{this.#s({type:"pending",variables:t,isPaused:s}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#s({type:"pending",context:l,variables:t,isPaused:s})}const a=await this.#r.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#s({type:"success",data:a}),a}catch(a){try{await this.#n.config.onError?.(a,t,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(a,t,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,a,t,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#s({type:"error",error:a}),a}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Zt.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function QE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var DI=class extends To{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new NI({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Sf(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Sf(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Sf(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Sf(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Zt.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>x_(e,n))}findAll(t={}){return this.getAll().filter(e=>x_(t,e))}notify(t){Zt.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Zt.batch(()=>Promise.all(t.map(e=>e.continue().catch(wn))))}};function Sf(t){return t.options.scope?.id}var zI=class extends To{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),wd(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Or(n.mutationKey)!==Or(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#s(),this.#o(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#o()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#s(){const e=this.#n?.state??QE();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#o(e){Zt.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#r.onSuccess?.(e.data,n,r,s)}catch(a){Promise.reject(a)}try{this.#r.onSettled?.(e.data,null,n,r,s)}catch(a){Promise.reject(a)}}else if(e?.type==="error"){try{this.#r.onError?.(e.error,n,r,s)}catch(a){Promise.reject(a)}try{this.#r.onSettled?.(void 0,e.error,n,r,s)}catch(a){Promise.reject(a)}}}this.listeners.forEach(n=>{n(this.#t)})})}},LI=class extends To{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,s=e.queryHash??z0(r,e);let a=this.get(s);return a||(a=new TI({client:t,queryKey:r,queryHash:s,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Zt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>w_(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>w_(t,n)):e}notify(t){Zt.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Zt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Zt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ZE=class{#e;#t;#n;#r;#s;#o;#i;#a;constructor(t={}){this.#e=t.queryCache||new LI,this.#t=t.mutationCache||new DI,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=P0.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=xd.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ui(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,l=vI(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return Zt.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Zt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return Zt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Zt.batch(()=>this.#e.findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(wn).catch(wn)}invalidateQueries(t,e={}){return Zt.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Zt.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(wn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(wn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(ui(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(wn).catch(wn)}fetchInfiniteQuery(t){return t.behavior=T_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(wn).catch(wn)}ensureInfiniteQueryData(t){return t.behavior=T_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return xd.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Or(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Ru(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(Or(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{Ru(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=z0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===L0&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},YE=U.createContext(void 0),Mo=t=>{const e=U.useContext(YE);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},jI=({client:t,children:e})=>(U.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),x.jsx(YE.Provider,{value:t,children:e})),JE=U.createContext(!1),PI=()=>U.useContext(JE);JE.Provider;function FI(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var $I=U.createContext(FI()),BI=()=>U.useContext($I),UI=(t,e,n)=>{const r=n?.state.error&&typeof t.throwOnError=="function"?j0(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||r)&&(e.isReset()||(t.retryOnMount=!1))},VI=t=>{U.useEffect(()=>{t.clearReset()},[t])},qI=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||j0(n,[t.error,r])),HI=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},KI=(t,e)=>t.isLoading&&t.isFetching&&!e,GI=(t,e)=>t?.suspense&&e.isPending,O_=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function QI(t,e,n){const r=PI(),s=BI(),a=Mo(),l=a.defaultQueryOptions(t);a.getDefaultOptions().queries?._experimental_beforeQuery?.(l);const c=a.getQueryCache().get(l.queryHash);l._optimisticResults=r?"isRestoring":"optimistic",HI(l),UI(l,s,c),VI(s);const f=!a.getQueryCache().get(l.queryHash),[d]=U.useState(()=>new e(a,l)),m=d.getOptimisticResult(l),p=!r&&t.subscribed!==!1;if(U.useSyncExternalStore(U.useCallback(g=>{const y=p?d.subscribe(Zt.batchCalls(g)):wn;return d.updateResult(),y},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),U.useEffect(()=>{d.setOptions(l)},[l,d]),GI(l,m))throw O_(l,d,s);if(qI({result:m,errorResetBoundary:s,throwOnError:l.throwOnError,query:c,suspense:l.suspense}))throw m.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(l,m),l.experimental_prefetchInRender&&!Xi&&KI(m,r)&&(f?O_(l,d,s):c?.promise)?.catch(wn).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?m:d.trackResult(m)}function _s(t,e){return QI(t,GE)}function Au(t,e){const n=Mo(),[r]=U.useState(()=>new zI(n,t));U.useEffect(()=>{r.setOptions(t)},[r,t]);const s=U.useSyncExternalStore(U.useCallback(l=>r.subscribe(Zt.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=U.useCallback((l,c)=>{r.mutate(l,c).catch(wn)},[r]);if(s.error&&j0(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}const _y=new WeakMap,ZI=new WeakMap,_d={current:[]};let lg=!1,uu=0;const Gl=new Set,wf=new Map;function WE(t){for(const e of t){if(_d.current.includes(e))continue;_d.current.push(e),e.recompute();const n=ZI.get(e);if(n)for(const r of n){const s=_y.get(r);s?.length&&WE(s)}}}function YI(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function JI(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function XE(t){if(uu>0&&!wf.has(t)&&wf.set(t,t.prevState),Gl.add(t),!(uu>0)&&!lg)try{for(lg=!0;Gl.size>0;){const e=Array.from(Gl);Gl.clear();for(const n of e){const r=wf.get(n)??n.prevState;n.prevState=r,YI(n)}for(const n of e){const r=_y.get(n);r&&(_d.current.push(n),WE(r))}for(const n of e){const r=_y.get(n);if(r)for(const s of r)JI(s)}}}finally{lg=!1,_d.current=[],wf.clear()}}function cu(t){uu++;try{t()}finally{if(uu--,uu===0){const e=Gl.values().next().value;e&&XE(e)}}}function WI(t){return typeof t=="function"}let XI=class{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var s,a;this.listeners.add(r);const l=(a=(s=this.options)==null?void 0:s.onSubscribe)==null?void 0:a.call(s,r,this);return()=>{this.listeners.delete(r),l?.()}},this.prevState=e,this.state=e,this.options=n}setState(e){var n,r,s;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(e):WI(e)?this.state=e(this.prevState):this.state=e,(s=(r=this.options)==null?void 0:r.onUpdate)==null||s.call(r),XE(this)}};const ci="__TSR_index",I_="popstate",N_="beforeunload";function eN(t){let e=t.getLocation();const n=new Set,r=l=>{e=t.getLocation(),n.forEach(c=>c({location:e,action:l}))},s=l=>{t.notifyOnIndexChange??!0?r(l):e=t.getLocation()},a=async({task:l,navigateOpts:c,...f})=>{if(c?.ignoreBlocker??!1){l();return}const m=t.getBlockers?.()??[],p=f.type==="PUSH"||f.type==="REPLACE";if(typeof document<"u"&&m.length&&p)for(const g of m){const y=Cd(f.path,f.state);if(await g.blockerFn({currentLocation:e,nextLocation:y,action:f.type})){t.onBlocked?.();return}}l()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:l=>(n.add(l),()=>{n.delete(l)}),push:(l,c,f)=>{const d=e.state[ci];c=D_(d+1,c),a({task:()=>{t.pushState(l,c),r({type:"PUSH"})},navigateOpts:f,type:"PUSH",path:l,state:c})},replace:(l,c,f)=>{const d=e.state[ci];c=D_(d,c),a({task:()=>{t.replaceState(l,c),r({type:"REPLACE"})},navigateOpts:f,type:"REPLACE",path:l,state:c})},go:(l,c)=>{a({task:()=>{t.go(l),s({type:"GO",index:l})},navigateOpts:c,type:"GO"})},back:l=>{a({task:()=>{t.back(l?.ignoreBlocker??!1),s({type:"BACK"})},navigateOpts:l,type:"BACK"})},forward:l=>{a({task:()=>{t.forward(l?.ignoreBlocker??!1),s({type:"FORWARD"})},navigateOpts:l,type:"FORWARD"})},canGoBack:()=>e.state[ci]!==0,createHref:l=>t.createHref(l),block:l=>{if(!t.setBlockers)return()=>{};const c=t.getBlockers?.()??[];return t.setBlockers([...c,l]),()=>{const f=t.getBlockers?.()??[];t.setBlockers?.(f.filter(d=>d!==l))}},flush:()=>t.flush?.(),destroy:()=>t.destroy?.(),notify:r}}function D_(t,e){e||(e={});const n=$0();return{...e,key:n,__TSR_key:n,[ci]:t}}function tN(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,r=e.history.replaceState;let s=[];const a=()=>s,l=P=>s=P,c=(P=>P),f=(()=>Cd(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state));if(!e.history.state?.__TSR_key&&!e.history.state?.key){const P=$0();e.history.replaceState({[ci]:0,key:P,__TSR_key:P},"")}let d=f(),m,p=!1,g=!1,y=!1,S=!1;const w=()=>d;let E,_;const k=()=>{E&&(z._ignoreSubscribers=!0,(E.isPush?e.history.pushState:e.history.replaceState)(E.state,"",E.href),z._ignoreSubscribers=!1,E=void 0,_=void 0,m=void 0)},R=(P,j,I)=>{const F=c(j);_||(m=d),d=Cd(j,I),E={href:F,state:I,isPush:E?.isPush||P==="push"},_||(_=Promise.resolve().then(()=>k()))},O=P=>{d=f(),z.notify({type:P})},L=async()=>{if(g){g=!1;return}const P=f(),j=P.state[ci]-d.state[ci],I=j===1,F=j===-1,G=!I&&!F||p;p=!1;const J=G?"GO":F?"BACK":"FORWARD",te=G?{type:"GO",index:j}:{type:F?"BACK":"FORWARD"};if(y)y=!1;else{const H=a();if(typeof document<"u"&&H.length){for(const $ of H)if(await $.blockerFn({currentLocation:d,nextLocation:P,action:J})){g=!0,e.history.go(1),z.notify(te);return}}}d=f(),z.notify(te)},A=P=>{if(S){S=!1;return}let j=!1;const I=a();if(typeof document<"u"&&I.length)for(const F of I){const G=F.enableBeforeUnload??!0;if(G===!0){j=!0;break}if(typeof G=="function"&&G()===!0){j=!0;break}}if(j)return P.preventDefault(),P.returnValue=""},z=eN({getLocation:w,getLength:()=>e.history.length,pushState:(P,j)=>R("push",P,j),replaceState:(P,j)=>R("replace",P,j),back:P=>(P&&(y=!0),S=!0,e.history.back()),forward:P=>{P&&(y=!0),S=!0,e.history.forward()},go:P=>{p=!0,e.history.go(P)},createHref:P=>c(P),flush:k,destroy:()=>{e.history.pushState=n,e.history.replaceState=r,e.removeEventListener(N_,A,{capture:!0}),e.removeEventListener(I_,L)},onBlocked:()=>{m&&d!==m&&(d=m)},getBlockers:a,setBlockers:l,notifyOnIndexChange:!1});return e.addEventListener(N_,A,{capture:!0}),e.addEventListener(I_,L),e.history.pushState=function(...P){const j=n.apply(e.history,P);return z._ignoreSubscribers||O("PUSH"),j},e.history.replaceState=function(...P){const j=r.apply(e.history,P);return z._ignoreSubscribers||O("REPLACE"),j},z}function Cd(t,e){const n=t.indexOf("#"),r=t.indexOf("?"),s=$0();return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{[ci]:0,key:s,__TSR_key:s}}}function $0(){return(Math.random()+1).toString(36).substring(7)}function Ed(t){return t[t.length-1]}function nN(t){return typeof t=="function"}function si(t,e){return nN(t)?t(e):t}const rN=Object.prototype.hasOwnProperty;function vr(t,e){if(t===e)return t;const n=e,r=j_(t)&&j_(n);if(!r&&!(kd(t)&&kd(n)))return n;const s=r?t:z_(t);if(!s)return n;const a=r?n:z_(n);if(!a)return n;const l=s.length,c=a.length,f=r?new Array(c):{};let d=0;for(let m=0;m<c;m++){const p=r?m:a[m],g=t[p],y=n[p];if(g===y){f[p]=g,(r?m<l:rN.call(t,p))&&d++;continue}if(g===null||y===null||typeof g!="object"||typeof y!="object"){f[p]=y;continue}const S=vr(g,y);f[p]=S,S===g&&d++}return l===c&&d===l?t:f}function z_(t){const e=[],n=Object.getOwnPropertyNames(t);for(const s of n){if(!Object.prototype.propertyIsEnumerable.call(t,s))return!1;e.push(s)}const r=Object.getOwnPropertySymbols(t);for(const s of r){if(!Object.prototype.propertyIsEnumerable.call(t,s))return!1;e.push(s)}return e}function kd(t){if(!L_(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!L_(n)||!n.hasOwnProperty("isPrototypeOf"))}function L_(t){return Object.prototype.toString.call(t)==="[object Object]"}function j_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Qi(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let r=0,s=t.length;r<s;r++)if(!Qi(t[r],e[r],n))return!1;return!0}if(kd(t)&&kd(e)){const r=n?.ignoreUndefined??!0;if(n?.partial){for(const l in e)if((!r||e[l]!==void 0)&&!Qi(t[l],e[l],n))return!1;return!0}let s=0;if(!r)s=Object.keys(t).length;else for(const l in t)t[l]!==void 0&&s++;let a=0;for(const l in e)if((!r||e[l]!==void 0)&&(a++,a>s||!Qi(t[l],e[l],n)))return!1;return s===a}return!1}function _o(t){let e,n;const r=new Promise((s,a)=>{e=s,n=a});return r.status="pending",r.resolve=s=>{r.status="resolved",r.value=s,e(s),t?.(s)},r.reject=s=>{r.status="rejected",n(s)},r}function fi(t){return!!(t&&typeof t=="object"&&typeof t.then=="function")}function P_(t){try{return decodeURI(t)}catch{return t.replaceAll(/%[0-9A-F]{2}/gi,e=>{try{return decodeURI(e)}catch{return e}})}}function F_(t,e){if(!t)return t;const n=/%25|%5C/gi;let r=0,s="",a;for(;(a=n.exec(t))!==null;)s+=P_(t.slice(r,a.index))+a[0],r=n.lastIndex;return s+P_(r?t.slice(r):t)}var sN="Invariant failed";function Cs(t,e){if(!t)throw new Error(sN)}function Rd(t){const e=new Map;let n,r;const s=a=>{a.next&&(a.prev?(a.prev.next=a.next,a.next.prev=a.prev,a.next=void 0,r&&(r.next=a,a.prev=r)):(a.next.prev=void 0,n=a.next,a.next=void 0,r&&(a.prev=r,r.next=a)),r=a)};return{get(a){const l=e.get(a);if(l)return s(l),l.value},set(a,l){if(e.size>=t&&n){const f=n;e.delete(f.key),f.next&&(n=f.next,f.next.prev=void 0),f===r&&(r=void 0)}const c=e.get(a);if(c)c.value=l,s(c);else{const f={key:a,value:l,prev:r};r&&(r.next=f),r=f,n||(n=f),e.set(a,f)}},clear(){e.clear(),n=void 0,r=void 0}}}const Co=0,ea=1,ta=2,Tu=3,oo=4,iN=/^([^{]*)\{\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,aN=/^([^{]*)\{-\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,oN=/^([^{]*)\{\$\}([^}]*)$/;function B0(t,e,n=new Uint16Array(6)){const r=t.indexOf("/",e),s=r===-1?t.length:r,a=t.substring(e,s);if(!a||!a.includes("$"))return n[0]=Co,n[1]=e,n[2]=e,n[3]=s,n[4]=s,n[5]=s,n;if(a==="$"){const d=t.length;return n[0]=ta,n[1]=e,n[2]=e,n[3]=d,n[4]=d,n[5]=d,n}if(a.charCodeAt(0)===36)return n[0]=ea,n[1]=e,n[2]=e+1,n[3]=s,n[4]=s,n[5]=s,n;const l=a.match(oN);if(l){const m=l[1].length;return n[0]=ta,n[1]=e+m,n[2]=e+m+1,n[3]=e+m+2,n[4]=e+m+3,n[5]=t.length,n}const c=a.match(aN);if(c){const d=c[1],m=c[2],p=c[3],g=d.length;return n[0]=Tu,n[1]=e+g,n[2]=e+g+3,n[3]=e+g+3+m.length,n[4]=s-p.length,n[5]=s,n}const f=a.match(iN);if(f){const d=f[1],m=f[2],p=f[3],g=d.length;return n[0]=ea,n[1]=e+g,n[2]=e+g+2,n[3]=e+g+2+m.length,n[4]=s-p.length,n[5]=s,n}return n[0]=Co,n[1]=e,n[2]=e,n[3]=s,n[4]=s,n[5]=s,n}function lh(t,e,n,r,s,a,l){l?.(n);let c=r;{const f=n.fullPath??n.from,d=f.length,m=n.options?.caseSensitive??t;for(;c<d;){const g=B0(f,c,e);let y;const S=c,w=g[5];switch(c=w+1,a++,g[0]){case Co:{const _=f.substring(g[2],g[3]);if(m){const k=s.static?.get(_);if(k)y=k;else{s.static??=new Map;const R=go(n.fullPath??n.from);R.parent=s,R.depth=a,y=R,s.static.set(_,R)}}else{const k=_.toLowerCase(),R=s.staticInsensitive?.get(k);if(R)y=R;else{s.staticInsensitive??=new Map;const O=go(n.fullPath??n.from);O.parent=s,O.depth=a,y=O,s.staticInsensitive.set(k,O)}}break}case ea:{const _=f.substring(S,g[1]),k=f.substring(g[4],w),R=m&&!!(_||k),O=_?R?_:_.toLowerCase():void 0,L=k?R?k:k.toLowerCase():void 0,A=s.dynamic?.find(z=>z.caseSensitive===R&&z.prefix===O&&z.suffix===L);if(A)y=A;else{const z=cg(ea,n.fullPath??n.from,R,O,L);y=z,z.depth=a,z.parent=s,s.dynamic??=[],s.dynamic.push(z)}break}case Tu:{const _=f.substring(S,g[1]),k=f.substring(g[4],w),R=m&&!!(_||k),O=_?R?_:_.toLowerCase():void 0,L=k?R?k:k.toLowerCase():void 0,A=s.optional?.find(z=>z.caseSensitive===R&&z.prefix===O&&z.suffix===L);if(A)y=A;else{const z=cg(Tu,n.fullPath??n.from,R,O,L);y=z,z.parent=s,z.depth=a,s.optional??=[],s.optional.push(z)}break}case ta:{const _=f.substring(S,g[1]),k=f.substring(g[4],w),R=m&&!!(_||k),O=_?R?_:_.toLowerCase():void 0,L=k?R?k:k.toLowerCase():void 0,A=cg(ta,n.fullPath??n.from,R,O,L);y=A,A.parent=s,A.depth=a,s.wildcard??=[],s.wildcard.push(A)}}s=y}const p=(n.path||!n.children)&&!n.isRoot;if(p&&f.endsWith("/")){const g=go(n.fullPath??n.from);g.kind=oo,g.parent=s,a++,g.depth=a,s.index=g,s=g}p&&!s.route&&(s.route=n,s.fullPath=n.fullPath??n.from)}if(n.children)for(const f of n.children)lh(t,e,f,c,s,a,l)}function ug(t,e){if(t.prefix&&e.prefix&&t.prefix!==e.prefix){if(t.prefix.startsWith(e.prefix))return-1;if(e.prefix.startsWith(t.prefix))return 1}if(t.suffix&&e.suffix&&t.suffix!==e.suffix){if(t.suffix.endsWith(e.suffix))return-1;if(e.suffix.endsWith(t.suffix))return 1}return t.prefix&&!e.prefix?-1:!t.prefix&&e.prefix?1:t.suffix&&!e.suffix?-1:!t.suffix&&e.suffix?1:t.caseSensitive&&!e.caseSensitive?-1:!t.caseSensitive&&e.caseSensitive?1:0}function Ui(t){if(t.static)for(const e of t.static.values())Ui(e);if(t.staticInsensitive)for(const e of t.staticInsensitive.values())Ui(e);if(t.dynamic?.length){t.dynamic.sort(ug);for(const e of t.dynamic)Ui(e)}if(t.optional?.length){t.optional.sort(ug);for(const e of t.optional)Ui(e)}if(t.wildcard?.length){t.wildcard.sort(ug);for(const e of t.wildcard)Ui(e)}}function go(t){return{kind:Co,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null}}function cg(t,e,n,r,s){return{kind:t,depth:0,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null,caseSensitive:n,prefix:r,suffix:s}}function lN(t,e){const n=go("/"),r=new Uint16Array(6);for(const s of t)lh(!1,r,s,1,n,0);Ui(n),e.masksTree=n,e.flatCache=Rd(1e3)}function uN(t,e){t||="/";const n=e.flatCache.get(t);if(n)return n;const r=U0(t,e.masksTree);return e.flatCache.set(t,r),r}function cN(t,e,n,r,s){t||="/",r||="/";const a=e?`case\0${t}`:t;let l=s.singleCache.get(a);if(!l){l=go("/");const c=new Uint16Array(6);lh(e,c,{from:t},1,l,0),s.singleCache.set(a,l)}return U0(r,l,n)}function fN(t,e,n=!1){const r=n?t:`nofuzz\0${t}`,s=e.matchCache.get(r);if(s!==void 0)return s;t||="/";const a=U0(t,e.segmentTree,n);return a&&(a.branch=mN(a.route)),e.matchCache.set(r,a),a}function dN(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function hN(t,e=!1,n){const r=go(t.fullPath),s=new Uint16Array(6),a={},l={};let c=0;return lh(e,s,t,1,r,0,d=>{if(n?.(d,c),Cs(!(d.id in a),`Duplicate routes found with id: ${String(d.id)}`),a[d.id]=d,c!==0&&d.path){const m=dN(d.fullPath);(!l[m]||d.fullPath.endsWith("/"))&&(l[m]=d)}c++}),Ui(r),{processedTree:{segmentTree:r,singleCache:Rd(1e3),matchCache:Rd(1e3),flatCache:null,masksTree:null},routesById:a,routesByPath:l}}function U0(t,e,n=!1){const r=t.split("/"),s=yN(t,r,e,n);if(!s)return null;const a=pN(t,r,s);return"**"in s&&(a["**"]=s["**"]),{route:s.node.route,params:a}}function pN(t,e,n){const r=gN(n.node);let s=null;const a={};for(let l=0,c=0,f=0;c<r.length;l++,c++,f++){const d=r[c],m=e[l],p=f;if(m&&(f+=m.length),d.kind===ea){s??=n.node.fullPath.split("/");const g=s[c],y=d.prefix?.length??0;if(g.charCodeAt(y)===123){const w=d.suffix?.length??0,E=g.substring(y+2,g.length-w-1),_=m.substring(y,m.length-w);a[E]=decodeURIComponent(_)}else{const w=g.substring(1);a[w]=decodeURIComponent(m)}}else if(d.kind===Tu){if(n.skipped&1<<c){l--;continue}s??=n.node.fullPath.split("/");const g=s[c],y=d.prefix?.length??0,S=d.suffix?.length??0,w=g.substring(y+3,g.length-S-1),E=d.suffix||d.prefix?m.substring(y,m.length-S):m;E&&(a[w]=decodeURIComponent(E))}else if(d.kind===ta){const g=d,y=t.substring(p+(g.prefix?.length??0),t.length-(g.suffix?.length??0)),S=decodeURIComponent(y);a["*"]=S,a._splat=S;break}}return a}function mN(t){const e=[t];for(;t.parentRoute;)t=t.parentRoute,e.push(t);return e.reverse(),e}function gN(t){const e=Array(t.depth+1);do e[t.depth]=t,t=t.parent;while(t);return e}function yN(t,e,n,r){if(t==="/"&&n.index)return{node:n.index,skipped:0};const s=!Ed(e),a=s&&t!=="/",l=e.length-(s?1:0),c=[{node:n,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let f=null,d=null,m=null;for(;c.length;){const p=c.pop();let{node:g,index:y,skipped:S,depth:w,statics:E,dynamics:_,optionals:k}=p;r&&g.route&&g.kind!==oo&&Dl(d,p)&&(d=p);const R=y===l;if(R&&(g.route&&!a&&Dl(m,p)&&(m=p),!g.optional&&!g.wildcard&&!g.index))continue;const O=R?void 0:e[y];let L;if(R&&g.index){const A={node:g.index,index:y,skipped:S,depth:w+1,statics:E,dynamics:_,optionals:k};if(E===l&&!_&&!k&&!S)return A;Dl(m,A)&&(m=A)}if(g.wildcard&&Dl(f,p))for(const A of g.wildcard){const{prefix:z,suffix:P}=A;if(!(z&&(R||!(A.caseSensitive?O:L??=O.toLowerCase()).startsWith(z)))){if(P){if(R)continue;const j=e.slice(y).join("/").slice(-P.length);if((A.caseSensitive?j:j.toLowerCase())!==P)continue}f={node:A,index:l,skipped:S,depth:w,statics:E,dynamics:_,optionals:k};break}}if(g.optional){const A=S|1<<w,z=w+1;for(let P=g.optional.length-1;P>=0;P--){const j=g.optional[P];c.push({node:j,index:y,skipped:A,depth:z,statics:E,dynamics:_,optionals:k})}if(!R)for(let P=g.optional.length-1;P>=0;P--){const j=g.optional[P],{prefix:I,suffix:F}=j;if(I||F){const G=j.caseSensitive?O:L??=O.toLowerCase();if(I&&!G.startsWith(I)||F&&!G.endsWith(F))continue}c.push({node:j,index:y+1,skipped:S,depth:z,statics:E,dynamics:_,optionals:k+1})}}if(!R&&g.dynamic&&O)for(let A=g.dynamic.length-1;A>=0;A--){const z=g.dynamic[A],{prefix:P,suffix:j}=z;if(P||j){const I=z.caseSensitive?O:L??=O.toLowerCase();if(P&&!I.startsWith(P)||j&&!I.endsWith(j))continue}c.push({node:z,index:y+1,skipped:S,depth:w+1,statics:E,dynamics:_+1,optionals:k})}if(!R&&g.staticInsensitive){const A=g.staticInsensitive.get(L??=O.toLowerCase());A&&c.push({node:A,index:y+1,skipped:S,depth:w+1,statics:E+1,dynamics:_,optionals:k})}if(!R&&g.static){const A=g.static.get(O);A&&c.push({node:A,index:y+1,skipped:S,depth:w+1,statics:E+1,dynamics:_,optionals:k})}}if(m&&f)return Dl(f,m)?m:f;if(m)return m;if(f)return f;if(r&&d){let p=d.index;for(let y=0;y<d.index;y++)p+=e[y].length;const g=p===t.length?"/":t.slice(p);return{node:d.node,skipped:d.skipped,"**":decodeURIComponent(g)}}return null}function Dl(t,e){return t?e.statics>t.statics||e.statics===t.statics&&(e.dynamics>t.dynamics||e.dynamics===t.dynamics&&(e.optionals>t.optionals||e.optionals===t.optionals&&((e.node.kind===oo)>(t.node.kind===oo)||e.node.kind===oo==(t.node.kind===oo)&&e.depth>t.depth))):!0}function nd(t){return V0(t.filter(e=>e!==void 0).join("/"))}function V0(t){return t.replace(/\/{2,}/g,"/")}function ek(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function Zi(t){const e=t.length;return e>1&&t[e-1]==="/"?t.replace(/\/{1,}$/,""):t}function tk(t){return Zi(ek(t))}function Ad(t,e){return t?.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function vN(t,e,n){return Ad(t,n)===Ad(e,n)}function bN({base:t,to:e,trailingSlash:n="never",cache:r}){const s=e.startsWith("/"),a=!s&&e===".";let l;if(r){l=s?e:a?t:t+"\0"+e;const p=r.get(l);if(p)return p}let c;if(a)c=t.split("/");else if(s)c=e.split("/");else{for(c=t.split("/");c.length>1&&Ed(c)==="";)c.pop();const p=e.split("/");for(let g=0,y=p.length;g<y;g++){const S=p[g];S===""?g?g===y-1&&c.push(S):c=[S]:S===".."?c.pop():S==="."||c.push(S)}}c.length>1&&(Ed(c)===""?n==="never"&&c.pop():n==="always"&&c.push(""));let f,d="";for(let p=0;p<c.length;p++){p>0&&(d+="/");const g=c[p];if(!g)continue;f=B0(g,0,f);const y=f[0];if(y===Co){d+=g;continue}const S=f[5],w=g.substring(0,f[1]),E=g.substring(f[4],S),_=g.substring(f[2],f[3]);y===ea?d+=w||E?`${w}{$${_}}${E}`:`$${_}`:y===ta?d+=w||E?`${w}{$}${E}`:"$":d+=`${w}{-$${_}}${E}`}d=V0(d);const m=d||"/";return l&&r&&r.set(l,m),m}function fg(t,e,n){const r=e[t];return typeof r!="string"?r:t==="_splat"?encodeURI(r):SN(r,n)}function dg({path:t,params:e,decodeCharMap:n}){let r=!1;const s={};if(!t||t==="/")return{interpolatedPath:"/",usedParams:s,isMissingParams:r};if(!t.includes("$"))return{interpolatedPath:t,usedParams:s,isMissingParams:r};const a=t.length;let l=0,c,f="";for(;l<a;){const m=l;c=B0(t,m,c);const p=c[5];if(l=p+1,m===p)continue;const g=c[0];if(g===Co){f+="/"+t.substring(m,p);continue}if(g===ta){const y=e._splat;s._splat=y,s["*"]=y;const S=t.substring(m,c[1]),w=t.substring(c[4],p);if(!y){r=!0,(S||w)&&(f+="/"+S+w);continue}const E=fg("_splat",e,n);f+="/"+S+E+w;continue}if(g===ea){const y=t.substring(c[2],c[3]);!r&&!(y in e)&&(r=!0),s[y]=e[y];const S=t.substring(m,c[1]),w=t.substring(c[4],p),E=fg(y,e,n)??"undefined";f+="/"+S+E+w;continue}if(g===Tu){const y=t.substring(c[2],c[3]),S=e[y];if(S==null)continue;s[y]=S;const w=t.substring(m,c[1]),E=t.substring(c[4],p),_=fg(y,e,n)??"";f+="/"+w+_+E;continue}}return t.endsWith("/")&&(f+="/"),{usedParams:s,interpolatedPath:f||"/",isMissingParams:r}}function SN(t,e){let n=encodeURIComponent(t);if(e)for(const[r,s]of e)n=n.replaceAll(r,s);return n}function tr(t){return!!t?.isNotFound}function wN(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const Td="tsr-scroll-restoration-v1_3",xN=(t,e)=>{let n;return(...r)=>{n||(n=setTimeout(()=>{t(...r),n=null},e))}};function _N(){const t=wN();if(!t)return null;const e=t.getItem(Td);let n=e?JSON.parse(e):{};return{state:n,set:r=>(n=si(r,n)||n,t.setItem(Td,JSON.stringify(n)))}}const xf=_N(),Cy=t=>t.state.__TSR_key||t.href;function CN(t){const e=[];let n;for(;n=t.parentNode;)e.push(`${t.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,t)+1})`),t=n;return`${e.reverse().join(" > ")}`.toLowerCase()}let Md=!1;function nk({storageKey:t,key:e,behavior:n,shouldScrollRestoration:r,scrollToTopSelectors:s,location:a}){let l;try{l=JSON.parse(sessionStorage.getItem(t)||"{}")}catch(d){console.error(d);return}const c=e||window.history.state?.__TSR_key,f=l[c];Md=!0;e:{if(r&&f&&Object.keys(f).length>0){for(const p in f){const g=f[p];if(p==="window")window.scrollTo({top:g.scrollY,left:g.scrollX,behavior:n});else if(p){const y=document.querySelector(p);y&&(y.scrollLeft=g.scrollX,y.scrollTop=g.scrollY)}}break e}const d=(a??window.location).hash.split("#",2)[1];if(d){const p=window.history.state?.__hashScrollIntoViewOptions??!0;if(p){const g=document.getElementById(d);g&&g.scrollIntoView(p)}break e}const m={top:0,left:0,behavior:n};if(window.scrollTo(m),s)for(const p of s){if(p==="window")continue;const g=typeof p=="function"?p():document.querySelector(p);g&&g.scrollTo(m)}}Md=!1}function EN(t,e){if(!xf&&!t.isServer||((t.options.scrollRestoration??!1)&&(t.isScrollRestoring=!0),t.isServer||t.isScrollRestorationSetup||!xf))return;t.isScrollRestorationSetup=!0,Md=!1;const r=t.options.getScrollRestorationKey||Cy;window.history.scrollRestoration="manual";const s=a=>{if(Md||!t.isScrollRestoring)return;let l="";if(a.target===document||a.target===window)l="window";else{const f=a.target.getAttribute("data-scroll-restoration-id");f?l=`[data-scroll-restoration-id="${f}"]`:l=CN(a.target)}const c=r(t.state.location);xf.set(f=>{const d=f[c]||={},m=d[l]||={};if(l==="window")m.scrollX=window.scrollX||0,m.scrollY=window.scrollY||0;else if(l){const p=document.querySelector(l);p&&(m.scrollX=p.scrollLeft||0,m.scrollY=p.scrollTop||0)}return f})};typeof document<"u"&&document.addEventListener("scroll",xN(s,100),!0),t.subscribe("onRendered",a=>{const l=r(a.toLocation);if(!t.resetNextScroll){t.resetNextScroll=!0;return}typeof t.options.scrollRestoration=="function"&&!t.options.scrollRestoration({location:t.latestLocation})||(nk({storageKey:Td,key:l,behavior:t.options.scrollRestorationBehavior,shouldScrollRestoration:t.isScrollRestoring,scrollToTopSelectors:t.options.scrollToTopSelectors,location:t.history.location}),t.isScrollRestoring&&xf.set(c=>(c[l]||={},c)))})}function kN(t){if(typeof document<"u"&&document.querySelector){const e=t.state.location.state.__hashScrollIntoViewOptions??!0;if(e&&t.state.location.hash!==""){const n=document.getElementById(t.state.location.hash);n&&n.scrollIntoView(e)}}}function RN(t,e=String){const n=new URLSearchParams;for(const r in t){const s=t[r];s!==void 0&&n.set(r,e(s))}return n.toString()}function hg(t){return t?t==="false"?!1:t==="true"?!0:+t*0===0&&+t+""===t?+t:t:""}function AN(t){const e=new URLSearchParams(t),n={};for(const[r,s]of e.entries()){const a=n[r];a==null?n[r]=hg(s):Array.isArray(a)?a.push(hg(s)):n[r]=[a,hg(s)]}return n}const TN=ON(JSON.parse),MN=IN(JSON.stringify,JSON.parse);function ON(t){return e=>{e[0]==="?"&&(e=e.substring(1));const n=AN(e);for(const r in n){const s=n[r];if(typeof s=="string")try{n[r]=t(s)}catch{}}return n}}function IN(t,e){const n=typeof e=="function";function r(s){if(typeof s=="object"&&s!==null)try{return t(s)}catch{}else if(n&&typeof s=="string")try{return e(s),t(s)}catch{}return s}return s=>{const a=RN(s,r);return a?`?${a}`:""}}const Xn="__root__";function NN(t){if(t.statusCode=t.statusCode||t.code||307,!t.reloadDocument&&typeof t.href=="string")try{new URL(t.href),t.reloadDocument=!0}catch{}const e=new Headers(t.headers);t.href&&e.get("Location")===null&&e.set("Location",t.href);const n=new Response(null,{status:t.statusCode,headers:e});if(n.options=t,t.throw)throw n;return n}function xr(t){return t instanceof Response&&!!t.options}const rd=t=>{if(!t.rendered)return t.rendered=!0,t.onReady?.()},uh=(t,e)=>!!(t.preload&&!t.router.state.matches.some(n=>n.id===e)),q0=(t,e,n=!0)=>{const r={...t.router.options.context??{}},s=n?e:e-1;for(let a=0;a<=s;a++){const l=t.matches[a];if(!l)continue;const c=t.router.getMatch(l.id);c&&Object.assign(r,c.__routeContext,c.__beforeLoadContext)}return r},rk=(t,e)=>{const n=t.router.routesById[e.routeId??""]??t.router.routeTree;!n.options.notFoundComponent&&t.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=t.router.options.defaultNotFoundComponent),Cs(n.options.notFoundComponent);const r=t.matches.find(s=>s.routeId===n.id);Cs(r,"Could not find match for route: "+n.id),t.updateMatch(r.id,s=>({...s,status:"notFound",error:e,isFetching:!1})),e.routerCode==="BEFORE_LOAD"&&n.parentRoute&&(e.routeId=n.parentRoute.id,rk(t,e))},ii=(t,e,n)=>{if(!(!xr(n)&&!tr(n))){if(xr(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(e){e._nonReactive.beforeLoadPromise?.resolve(),e._nonReactive.loaderPromise?.resolve(),e._nonReactive.beforeLoadPromise=void 0,e._nonReactive.loaderPromise=void 0;const r=xr(n)?"redirected":"notFound";e._nonReactive.error=n,t.updateMatch(e.id,s=>({...s,status:r,isFetching:!1,error:n})),tr(n)&&!n.routeId&&(n.routeId=e.routeId),e._nonReactive.loadPromise?.resolve()}throw xr(n)?(t.rendered=!0,n.options._fromLocation=t.location,n.redirectHandled=!0,n=t.router.resolveRedirect(n),n):(rk(t,n),n)}},sk=(t,e)=>{const n=t.router.getMatch(e);return!!(!t.router.isServer&&n._nonReactive.dehydrated||t.router.isServer&&n.ssr===!1)},zl=(t,e,n,r)=>{const{id:s,routeId:a}=t.matches[e],l=t.router.looseRoutesById[a];if(n instanceof Promise)throw n;n.routerCode=r,t.firstBadMatchIndex??=e,ii(t,t.router.getMatch(s),n);try{l.options.onError?.(n)}catch(c){n=c,ii(t,t.router.getMatch(s),n)}t.updateMatch(s,c=>(c._nonReactive.beforeLoadPromise?.resolve(),c._nonReactive.beforeLoadPromise=void 0,c._nonReactive.loadPromise?.resolve(),{...c,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},DN=(t,e,n,r)=>{const s=t.router.getMatch(e),a=t.matches[n-1]?.id,l=a?t.router.getMatch(a):void 0;if(t.router.isShell()){s.ssr=r.id===Xn;return}if(l?.ssr===!1){s.ssr=!1;return}const c=y=>y===!0&&l?.ssr==="data-only"?"data-only":y,f=t.router.options.defaultSsr??!0;if(r.options.ssr===void 0){s.ssr=c(f);return}if(typeof r.options.ssr!="function"){s.ssr=c(r.options.ssr);return}const{search:d,params:m}=s,p={search:_f(d,s.searchError),params:_f(m,s.paramsError),location:t.location,matches:t.matches.map(y=>({index:y.index,pathname:y.pathname,fullPath:y.fullPath,staticData:y.staticData,id:y.id,routeId:y.routeId,search:_f(y.search,y.searchError),params:_f(y.params,y.paramsError),ssr:y.ssr}))},g=r.options.ssr(p);if(fi(g))return g.then(y=>{s.ssr=c(y??f)});s.ssr=c(g??f)},ik=(t,e,n,r)=>{if(r._nonReactive.pendingTimeout!==void 0)return;const s=n.options.pendingMs??t.router.options.defaultPendingMs;if(!!(t.onReady&&!t.router.isServer&&!uh(t,e)&&(n.options.loader||n.options.beforeLoad||lk(n))&&typeof s=="number"&&s!==1/0&&(n.options.pendingComponent??t.router.options?.defaultPendingComponent))){const l=setTimeout(()=>{rd(t)},s);r._nonReactive.pendingTimeout=l}},zN=(t,e,n)=>{const r=t.router.getMatch(e);if(!r._nonReactive.beforeLoadPromise&&!r._nonReactive.loaderPromise)return;ik(t,e,n,r);const s=()=>{const a=t.router.getMatch(e);a.preload&&(a.status==="redirected"||a.status==="notFound")&&ii(t,a,a.error)};return r._nonReactive.beforeLoadPromise?r._nonReactive.beforeLoadPromise.then(s):s()},LN=(t,e,n,r)=>{const s=t.router.getMatch(e),a=s._nonReactive.loadPromise;s._nonReactive.loadPromise=_o(()=>{a?.resolve()});const{paramsError:l,searchError:c}=s;l&&zl(t,n,l,"PARSE_PARAMS"),c&&zl(t,n,c,"VALIDATE_SEARCH"),ik(t,e,r,s);const f=new AbortController,d=t.matches[n-1]?.id;(d?t.router.getMatch(d):void 0)?.context??t.router.options.context;let p=!1;const g=()=>{p||(p=!0,t.updateMatch(e,A=>({...A,isFetching:"beforeLoad",fetchCount:A.fetchCount+1,abortController:f})))},y=()=>{s._nonReactive.beforeLoadPromise?.resolve(),s._nonReactive.beforeLoadPromise=void 0,t.updateMatch(e,A=>({...A,isFetching:!1}))};if(!r.options.beforeLoad){cu(()=>{g(),y()});return}s._nonReactive.beforeLoadPromise=_o();const S={...q0(t,n,!1),...s.__routeContext},{search:w,params:E,cause:_}=s,k=uh(t,e),R={search:w,abortController:f,params:E,preload:k,context:S,location:t.location,navigate:A=>t.router.navigate({...A,_fromLocation:t.location}),buildLocation:t.router.buildLocation,cause:k?"preload":_,matches:t.matches,...t.router.options.additionalContext},O=A=>{if(A===void 0){cu(()=>{g(),y()});return}(xr(A)||tr(A))&&(g(),zl(t,n,A,"BEFORE_LOAD")),cu(()=>{g(),t.updateMatch(e,z=>({...z,__beforeLoadContext:A})),y()})};let L;try{if(L=r.options.beforeLoad(R),fi(L))return g(),L.catch(A=>{zl(t,n,A,"BEFORE_LOAD")}).then(O)}catch(A){g(),zl(t,n,A,"BEFORE_LOAD")}O(L)},jN=(t,e)=>{const{id:n,routeId:r}=t.matches[e],s=t.router.looseRoutesById[r],a=()=>{if(t.router.isServer){const f=DN(t,n,e,s);if(fi(f))return f.then(c)}return c()},l=()=>LN(t,n,e,s),c=()=>{if(sk(t,n))return;const f=zN(t,n,s);return fi(f)?f.then(l):l()};return a()},PN=(t,e,n)=>{const r=t.router.getMatch(e);if(!r||!n.options.head&&!n.options.scripts&&!n.options.headers)return;const s={matches:t.matches,match:r,params:r.params,loaderData:r.loaderData};return Promise.all([n.options.head?.(s),n.options.scripts?.(s),n.options.headers?.(s)]).then(([a,l,c])=>{const f=a?.meta,d=a?.links,m=a?.scripts,p=a?.styles;return{meta:f,links:d,headScripts:m,headers:c,scripts:l,styles:p}})},ak=(t,e,n,r)=>{const s=t.matchPromises[n-1],{params:a,loaderDeps:l,abortController:c,cause:f}=t.router.getMatch(e),d=q0(t,n),m=uh(t,e);return{params:a,deps:l,preload:!!m,parentMatchPromise:s,abortController:c,context:d,location:t.location,navigate:p=>t.router.navigate({...p,_fromLocation:t.location}),cause:m?"preload":f,route:r,...t.router.options.additionalContext}},$_=async(t,e,n,r)=>{try{const s=t.router.getMatch(e);try{(!t.router.isServer||s.ssr===!0)&&ok(r);const a=r.options.loader?.(ak(t,e,n,r)),l=r.options.loader&&fi(a);if((l||r._lazyPromise||r._componentsPromise||r.options.head||r.options.scripts||r.options.headers||s._nonReactive.minPendingPromise)&&t.updateMatch(e,d=>({...d,isFetching:"loader"})),r.options.loader){const d=l?await a:a;ii(t,t.router.getMatch(e),d),d!==void 0&&t.updateMatch(e,m=>({...m,loaderData:d}))}r._lazyPromise&&await r._lazyPromise;const f=s._nonReactive.minPendingPromise;f&&await f,r._componentsPromise&&await r._componentsPromise,t.updateMatch(e,d=>({...d,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(a){let l=a;const c=s._nonReactive.minPendingPromise;c&&await c,tr(a)&&await r.options.notFoundComponent?.preload?.(),ii(t,t.router.getMatch(e),a);try{r.options.onError?.(a)}catch(f){l=f,ii(t,t.router.getMatch(e),f)}t.updateMatch(e,f=>({...f,error:l,status:"error",isFetching:!1}))}}catch(s){const a=t.router.getMatch(e);a&&(a._nonReactive.loaderPromise=void 0),ii(t,a,s)}},FN=async(t,e)=>{const{id:n,routeId:r}=t.matches[e];let s=!1,a=!1;const l=t.router.looseRoutesById[r],c=()=>{t.updateMatch(n,m=>({...m,context:q0(t,e)}))};if(sk(t,n)){if(t.router.isServer)return t.router.getMatch(n)}else{const m=t.router.getMatch(n);if(m._nonReactive.loaderPromise){if(m.status==="success"&&!t.sync&&!m.preload)return m;await m._nonReactive.loaderPromise;const p=t.router.getMatch(n),g=p._nonReactive.error||p.error;g&&ii(t,p,g)}else{const p=Date.now()-m.updatedAt,g=uh(t,n),y=g?l.options.preloadStaleTime??t.router.options.defaultPreloadStaleTime??3e4:l.options.staleTime??t.router.options.defaultStaleTime??0,S=l.options.shouldReload,w=typeof S=="function"?S(ak(t,n,e,l)):S,E=!!g&&!t.router.state.matches.some(O=>O.id===n),_=t.router.getMatch(n);_._nonReactive.loaderPromise=_o(),E!==_.preload&&t.updateMatch(n,O=>({...O,preload:E}));const{status:k,invalid:R}=_;s=k==="success"&&(R||(w??p>y)),g&&l.options.preload===!1||(s&&!t.sync?(a=!0,(async()=>{try{await $_(t,n,e,l),c();const O=t.router.getMatch(n);O._nonReactive.loaderPromise?.resolve(),O._nonReactive.loadPromise?.resolve(),O._nonReactive.loaderPromise=void 0}catch(O){xr(O)&&await t.router.navigate(O.options)}})()):(k!=="success"||s&&t.sync)&&await $_(t,n,e,l))}}const f=t.router.getMatch(n);a||(f._nonReactive.loaderPromise?.resolve(),f._nonReactive.loadPromise?.resolve()),clearTimeout(f._nonReactive.pendingTimeout),f._nonReactive.pendingTimeout=void 0,a||(f._nonReactive.loaderPromise=void 0),f._nonReactive.dehydrated=void 0,a||c();const d=a?f.isFetching:!1;return d!==f.isFetching||f.invalid!==!1?(t.updateMatch(n,m=>({...m,isFetching:d,invalid:!1})),t.router.getMatch(n)):f};async function B_(t){const e=Object.assign(t,{matchPromises:[]});!e.router.isServer&&e.router.state.matches.some(n=>n._forcePending)&&rd(e);try{for(let c=0;c<e.matches.length;c++){const f=jN(e,c);fi(f)&&await f}const n=e.firstBadMatchIndex??e.matches.length;for(let c=0;c<n;c++)e.matchPromises.push(FN(e,c));const s=(await Promise.allSettled(e.matchPromises)).filter(c=>c.status==="rejected").map(c=>c.reason);let a;for(const c of s){if(xr(c))throw c;!a&&tr(c)&&(a=c)}for(const c of e.matches){const{id:f,routeId:d}=c,m=e.router.looseRoutesById[d];try{const p=PN(e,f,m);if(p){const g=await p;e.updateMatch(f,y=>({...y,...g}))}}catch(p){console.error(`Error executing head for route ${d}:`,p)}}if(a)throw a;const l=rd(e);fi(l)&&await l}catch(n){if(tr(n)&&!e.preload){const r=rd(e);throw fi(r)&&await r,n}if(xr(n))throw n}return e.matches}async function ok(t){if(!t._lazyLoaded&&t._lazyPromise===void 0&&(t.lazyFn?t._lazyPromise=t.lazyFn().then(e=>{const{id:n,...r}=e.options;Object.assign(t.options,r),t._lazyLoaded=!0,t._lazyPromise=void 0}):t._lazyLoaded=!0),!t._componentsLoaded&&t._componentsPromise===void 0){const e=()=>{const n=[];for(const r of uk){const s=t.options[r]?.preload;s&&n.push(s())}if(n.length)return Promise.all(n).then(()=>{t._componentsLoaded=!0,t._componentsPromise=void 0});t._componentsLoaded=!0,t._componentsPromise=void 0};t._componentsPromise=t._lazyPromise?t._lazyPromise.then(e):e()}return t._componentsPromise}function _f(t,e){return e?{status:"error",error:e}:{status:"success",value:t}}function lk(t){for(const e of uk)if(t.options[e]?.preload)return!0;return!1}const uk=["component","errorComponent","pendingComponent","notFoundComponent"];function $N(t){return{input:({url:e})=>{for(const n of t)e=ck(n,e);return e},output:({url:e})=>{for(let n=t.length-1;n>=0;n--)e=fk(t[n],e);return e}}}function BN(t){const e=tk(t.basepath),n=`/${e}`,r=`${n}/`,s=t.caseSensitive?n:n.toLowerCase(),a=t.caseSensitive?r:r.toLowerCase();return{input:({url:l})=>{const c=t.caseSensitive?l.pathname:l.pathname.toLowerCase();return c===s?l.pathname="/":c.startsWith(a)&&(l.pathname=l.pathname.slice(n.length)),l},output:({url:l})=>(l.pathname=nd(["/",e,l.pathname]),l)}}function ck(t,e){const n=t?.input?.({url:e});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return e}function fk(t,e){const n=t?.output?.({url:e});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return e}function Yi(t){const e=t.resolvedLocation,n=t.location,r=e?.pathname!==n.pathname,s=e?.href!==n.href,a=e?.hash!==n.hash;return{fromLocation:e,toLocation:n,pathChanged:r,hrefChanged:s,hashChanged:a}}class UN{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=n=>n(),this.update=n=>{n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const r=this.options,s=this.basepath??r?.basepath??"/",a=this.basepath===void 0,l=r?.rewrite;this.options={...r,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(g=>[encodeURIComponent(g),g])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=tN())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new XI(qN(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(g=>!["redirected"].includes(g.status))}}}),EN(this));let c=!1;const f=this.options.basepath??"/",d=this.options.rewrite;if(a||s!==f||l!==d){this.basepath=f;const g=[];tk(f)!==""&&g.push(BN({basepath:f})),d&&g.push(d),this.rewrite=g.length===0?void 0:g.length===1?g[0]:$N(g),this.history&&this.updateLatestLocation(),c=!0}c&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:n,routesByPath:r,processedTree:s}=hN(this.routeTree,this.options.caseSensitive,(l,c)=>{l.init({originalIndex:c})});this.options.routeMasks&&lN(this.options.routeMasks,s),this.routesById=n,this.routesByPath=r,this.processedTree=s;const a=this.options.notFoundRoute;a&&(a.init({originalIndex:99999999999}),this.routesById[a.id]=a)},this.subscribe=(n,r)=>{const s={eventType:n,fn:r};return this.subscribers.add(s),()=>{this.subscribers.delete(s)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const s=({href:f,state:d})=>{const m=new URL(f,this.origin),p=ck(this.rewrite,m),g=this.options.parseSearch(p.search),y=this.options.stringifySearch(g);return p.search=y,{href:p.href.replace(p.origin,""),publicHref:f,url:p,pathname:F_(p.pathname),searchStr:y,search:vr(r?.search,g),hash:p.hash.split("#").reverse()[0]??"",state:vr(r?.state,d)}},a=s(n),{__tempLocation:l,__tempKey:c}=a.state;if(l&&(!c||c===this.tempLocationKey)){const f=s(l);return f.state.key=a.state.key,f.state.__TSR_key=a.state.__TSR_key,delete f.state.__tempLocation,{...f,maskedLocation:a}}return a},this.resolvePathCache=Rd(1e3),this.resolvePathWithBase=(n,r)=>bN({base:n,to:V0(r),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(n,r,s)=>typeof n=="string"?this.matchRoutesInternal({pathname:n,search:r},s):this.matchRoutesInternal(n,r),this.getMatchedRoutes=n=>HN({pathname:n,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r._nonReactive.pendingTimeout),r._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const n=this.state.matches.filter(a=>a.status==="pending"),r=this.state.matches.filter(a=>a.isFetching==="loader");new Set([...this.state.pendingMatches??[],...n,...r]).forEach(a=>{this.cancelMatch(a.id)})},this.buildLocation=n=>{const r=(a={})=>{const l=a._fromLocation||this.pendingBuiltLocation||this.latestLocation,c=this.matchRoutes(l,{_buildLocation:!0}),f=Ed(c);a.from;const d=a.unsafeRelative==="path"?l.pathname:a.from??f.fullPath,m=this.resolvePathWithBase(d,"."),p=f.search,g={...f.params},y=a.to?this.resolvePathWithBase(m,`${a.to}`):this.resolvePathWithBase(m,"."),S=a.params===!1||a.params===null?{}:(a.params??!0)===!0?g:Object.assign(g,si(a.params,g)),w=dg({path:y,params:S}).interpolatedPath,E=this.matchRoutes(w,void 0,{_buildLocation:!0}).map(I=>this.looseRoutesById[I.routeId]);if(Object.keys(S).length>0)for(const I of E){const F=I.options.params?.stringify??I.options.stringifyParams;F&&Object.assign(S,F(S))}const _=n.leaveParams?y:F_(dg({path:y,params:S,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath);let k=p;if(n._includeValidateSearch&&this.options.search?.strict){const I={};E.forEach(F=>{if(F.options.validateSearch)try{Object.assign(I,Ey(F.options.validateSearch,{...I,...k}))}catch{}}),k=I}k=KN({search:k,dest:a,destRoutes:E,_includeValidateSearch:n._includeValidateSearch}),k=vr(p,k);const R=this.options.stringifySearch(k),O=a.hash===!0?l.hash:a.hash?si(a.hash,l.hash):void 0,L=O?`#${O}`:"";let A=a.state===!0?l.state:a.state?si(a.state,l.state):{};A=vr(l.state,A);const z=`${_}${R}${L}`,P=new URL(z,this.origin),j=fk(this.rewrite,P);return{publicHref:j.pathname+j.search+j.hash,href:z,url:j,pathname:_,search:k,searchStr:R,state:A,hash:O??"",unmaskOnReload:a.unmaskOnReload}},s=(a={},l)=>{const c=r(a);let f=l?r(l):void 0;if(!f){const d={};if(this.options.routeMasks){const m=uN(c.pathname,this.processedTree);if(m){Object.assign(d,m.params);const{from:p,params:g,...y}=m.route,S=g===!1||g===null?{}:(g??!0)===!0?d:Object.assign(d,si(g,d));l={from:n.from,...y,params:S},f=r(l)}}}return f&&(c.maskedLocation=f),c};return n.mask?s(n,{from:n.from,...n.mask}):s(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...s})=>{const a=()=>{const f=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];f.forEach(m=>{s.state[m]=this.latestLocation.state[m]});const d=Qi(s.state,this.latestLocation.state);return f.forEach(m=>{delete s.state[m]}),d},l=Zi(this.latestLocation.href)===Zi(s.href),c=this.commitLocationPromise;if(this.commitLocationPromise=_o(()=>{c?.resolve()}),l&&a())this.load();else{let{maskedLocation:f,hashScrollIntoView:d,url:m,...p}=s;f&&(p={...f,state:{...f.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=d??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[s.replace?"replace":"push"](p.publicHref,p.state,{ignoreBlocker:r})}return this.resetNextScroll=s.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:s,viewTransition:a,ignoreBlocker:l,href:c,...f}={})=>{if(c){const p=this.history.location.state.__TSR_index,g=Cd(c,{__TSR_index:n?p:p+1});f.to=g.pathname,f.search=this.options.parseSearch(g.search),f.hash=g.hash.slice(1)}const d=this.buildLocation({...f,_includeValidateSearch:!0});this.pendingBuiltLocation=d;const m=this.commitLocation({...d,viewTransition:a,replace:n,resetScroll:r,hashScrollIntoView:s,ignoreBlocker:l});return Promise.resolve().then(()=>{this.pendingBuiltLocation===d&&(this.pendingBuiltLocation=void 0)}),m},this.navigate=async({to:n,reloadDocument:r,href:s,publicHref:a,...l})=>{let c=!1;if(s)try{new URL(`${s}`),c=!0}catch{}if(c&&!r&&(r=!0),r){if(!s||!a&&!c){const d=this.buildLocation({to:n,...l});s=s??d.url.href,a=a??d.url.href}const f=!c&&a?a:s;if(!l.ignoreBlocker){const m=this.history.getBlockers?.()??[];for(const p of m)if(p?.blockerFn&&await p.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}return l.replace?window.location.replace(f):window.location.href=f,Promise.resolve()}return this.buildAndCommitLocation({...l,href:s,to:n,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const r=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});if(this.latestLocation.publicHref!==r.publicHref||r.url.origin!==this.origin){const s=this.getParsedLocationHref(r);throw NN({href:s})}}const n=this.matchRoutes(this.latestLocation);this.__store.setState(r=>({...r,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:n,cachedMatches:r.cachedMatches.filter(s=>!n.some(a=>a.id===s.id))}))},this.load=async n=>{let r,s,a;for(a=new Promise(c=>{this.startTransition(async()=>{try{this.beforeLoad();const f=this.latestLocation,d=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...Yi({resolvedLocation:d,location:f})}),this.emit({type:"onBeforeLoad",...Yi({resolvedLocation:d,location:f})}),await B_({router:this,sync:n?.sync,matches:this.state.pendingMatches,location:f,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let m=[],p=[],g=[];cu(()=>{this.__store.setState(y=>{const S=y.matches,w=y.pendingMatches||y.matches;return m=S.filter(E=>!w.some(_=>_.id===E.id)),p=w.filter(E=>!S.some(_=>_.id===E.id)),g=w.filter(E=>S.some(_=>_.id===E.id)),{...y,isLoading:!1,loadedAt:Date.now(),matches:w,pendingMatches:void 0,cachedMatches:[...y.cachedMatches,...m.filter(E=>E.status!=="error"&&E.status!=="notFound")]}}),this.clearExpiredCache()}),[[m,"onLeave"],[p,"onEnter"],[g,"onStay"]].forEach(([y,S])=>{y.forEach(w=>{this.looseRoutesById[w.routeId].options[S]?.(w)})})})})}})}catch(f){xr(f)?(r=f,this.isServer||this.navigate({...r.options,replace:!0,ignoreBlocker:!0})):tr(f)&&(s=f),this.__store.setState(d=>({...d,statusCode:r?r.status:s?404:d.matches.some(m=>m.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===a&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),c()})}),this.latestLoadPromise=a,await a;this.latestLoadPromise&&a!==this.latestLoadPromise;)await this.latestLoadPromise;let l;this.hasNotFoundMatch()?l=404:this.__store.state.matches.some(c=>c.status==="error")&&(l=500),l!==void 0&&this.__store.setState(c=>({...c,statusCode:l}))},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let s;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const a=this.latestLocation,l=this.state.resolvedLocation,c=typeof r.types=="function"?r.types(Yi({resolvedLocation:l,location:a})):r.types;if(c===!1){n();return}s={update:n,types:c}}else s=n;document.startViewTransition(s)}else n()},this.updateMatch=(n,r)=>{this.startTransition(()=>{const s=this.state.pendingMatches?.some(a=>a.id===n)?"pendingMatches":this.state.matches.some(a=>a.id===n)?"matches":this.state.cachedMatches.some(a=>a.id===n)?"cachedMatches":"";s&&this.__store.setState(a=>({...a,[s]:a[s]?.map(l=>l.id===n?r(l):l)}))})},this.getMatch=n=>{const r=s=>s.id===n;return this.state.cachedMatches.find(r)??this.state.pendingMatches?.find(r)??this.state.matches.find(r)},this.invalidate=n=>{const r=s=>n?.filter?.(s)??!0?{...s,invalid:!0,...n?.forcePending||s.status==="error"||s.status==="notFound"?{status:"pending",error:void 0}:void 0}:s;return this.__store.setState(s=>({...s,matches:s.matches.map(r),cachedMatches:s.cachedMatches.map(r),pendingMatches:s.pendingMatches?.map(r)})),this.shouldViewTransition=!1,this.load({sync:n?.sync})},this.getParsedLocationHref=n=>{let r=n.url.href;return this.origin&&n.url.origin===this.origin&&(r=r.replace(this.origin,"")||"/"),r},this.resolveRedirect=n=>{if(!n.options.href){const r=this.buildLocation(n.options),s=this.getParsedLocationHref(r);n.options.href=r.href,n.headers.set("Location",s)}return n.headers.get("Location")||n.headers.set("Location",n.options.href),n},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(s=>({...s,cachedMatches:s.cachedMatches.filter(a=>!r(a))})):this.__store.setState(s=>({...s,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const s=this.looseRoutesById[r.routeId];if(!s.options.loader)return!0;const a=(r.preload?s.options.preloadGcTime??this.options.defaultPreloadGcTime:s.options.gcTime??this.options.defaultGcTime)??300*1e3;return r.status==="error"?!0:Date.now()-r.updatedAt>=a};this.clearCache({filter:n})},this.loadRouteChunk=ok,this.preloadRoute=async n=>{const r=this.buildLocation(n);let s=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const a=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(c=>c.id)),l=new Set([...a,...this.state.cachedMatches.map(c=>c.id)]);cu(()=>{s.forEach(c=>{l.has(c.id)||this.__store.setState(f=>({...f,cachedMatches:[...f.cachedMatches,c]}))})});try{return s=await B_({router:this,matches:s,location:r,preload:!0,updateMatch:(c,f)=>{a.has(c)?s=s.map(d=>d.id===c?f(d):d):this.updateMatch(c,f)}}),s}catch(c){if(xr(c))return c.options.reloadDocument?void 0:await this.preloadRoute({...c.options,_fromLocation:r});tr(c)||console.error(c);return}},this.matchRoute=(n,r)=>{const s={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},a=this.buildLocation(s);if(r?.pending&&this.state.status!=="pending")return!1;const c=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,f=cN(a.pathname,r?.caseSensitive??!1,r?.fuzzy??!1,c.pathname,this.processedTree);return!f||n.params&&!Qi(f.params,n.params,{partial:!0})?!1:r?.includeSearch??!0?Qi(c.search,a.search,{partial:!0})?f.params:!1:f.params},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??MN,parseSearch:e.parseSearch??TN}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,n){const r=this.getMatchedRoutes(e.pathname),{foundRoute:s,routeParams:a}=r;let{matchedRoutes:l}=r,c=!1;(s?s.path!=="/"&&a["**"]:Zi(e.pathname))&&(this.options.notFoundRoute?l=[...l,this.options.notFoundRoute]:c=!0);const f=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let p=l.length-1;p>=0;p--){const g=l[p];if(g.children)return g.id}return Xn}})(),d=[],m=p=>p?.id?p.context??this.options.context??void 0:this.options.context??void 0;return l.forEach((p,g)=>{const y=d[g-1],[S,w,E]=(()=>{const J=y?.search??e.search,te=y?._strictSearch??void 0;try{const H=Ey(p.options.validateSearch,{...J})??void 0;return[{...J,...H},{...te,...H},void 0]}catch(H){let $=H;if(H instanceof Od||($=new Od(H.message,{cause:H})),n?.throwOnError)throw $;return[J,{},$]}})(),_=p.options.loaderDeps?.({search:S})??"",k=_?JSON.stringify(_):"",{interpolatedPath:R,usedParams:O}=dg({path:p.fullPath,params:a,decodeCharMap:this.pathParamsDecodeCharMap}),L=p.id+R+k,A=this.getMatch(L),z=this.state.matches.find(J=>J.routeId===p.id),P=A?._strictParams??O;let j;if(!A){const J=p.options.params?.parse??p.options.parseParams;if(J)try{Object.assign(P,J(P))}catch(te){if(tr(te)||xr(te)?j=te:j=new VN(te.message,{cause:te}),n?.throwOnError)throw j}}Object.assign(a,P);const I=z?"stay":"enter";let F;if(A)F={...A,cause:I,params:z?vr(z.params,a):a,_strictParams:P,search:vr(z?z.search:A.search,S),_strictSearch:w};else{const J=p.options.loader||p.options.beforeLoad||p.lazyFn||lk(p)?"pending":"success";F={id:L,ssr:this.isServer?void 0:p.options.ssr,index:g,routeId:p.id,params:z?vr(z.params,a):a,_strictParams:P,pathname:R,updatedAt:Date.now(),search:z?vr(z.search,S):S,_strictSearch:w,searchError:void 0,status:J,isFetching:!1,error:void 0,paramsError:j,__routeContext:void 0,_nonReactive:{loadPromise:_o()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:I,loaderDeps:z?vr(z.loaderDeps,_):_,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:p.options.staticData||{},fullPath:p.fullPath}}n?.preload||(F.globalNotFound=f===p.id),F.searchError=E;const G=m(y);F.context={...G,...F.__routeContext,...F.__beforeLoadContext},d.push(F)}),d.forEach((p,g)=>{const y=this.looseRoutesById[p.routeId];if(!this.getMatch(p.id)&&n?._buildLocation!==!0){const w=d[g-1],E=m(w);if(y.options.context){const _={deps:p.loaderDeps,params:p.params,context:E??{},location:e,navigate:k=>this.navigate({...k,_fromLocation:e}),buildLocation:this.buildLocation,cause:p.cause,abortController:p.abortController,preload:!!p.preload,matches:d};p.__routeContext=y.options.context(_)??void 0}p.context={...E,...p.__routeContext,...p.__beforeLoadContext}}}),d}}class Od extends Error{}class VN extends Error{}function qN(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Ey(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Od("Async validation not supported");if(n.issues)throw new Od(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function HN({pathname:t,routesById:e,processedTree:n}){const r={},s=Zi(t);let a;const l=fN(s,n,!0);return l&&(a=l.route,Object.assign(r,l.params)),{matchedRoutes:l?.branch||[e[Xn]],routeParams:r,foundRoute:a}}function KN({search:t,dest:e,destRoutes:n,_includeValidateSearch:r}){const s=n.reduce((c,f)=>{const d=[];if("search"in f.options)f.options.search?.middlewares&&d.push(...f.options.search.middlewares);else if(f.options.preSearchFilters||f.options.postSearchFilters){const m=({search:p,next:g})=>{let y=p;"preSearchFilters"in f.options&&f.options.preSearchFilters&&(y=f.options.preSearchFilters.reduce((w,E)=>E(w),p));const S=g(y);return"postSearchFilters"in f.options&&f.options.postSearchFilters?f.options.postSearchFilters.reduce((w,E)=>E(w),S):S};d.push(m)}if(r&&f.options.validateSearch){const m=({search:p,next:g})=>{const y=g(p);try{return{...y,...Ey(f.options.validateSearch,y)??void 0}}catch{return y}};d.push(m)}return c.concat(d)},[])??[],a=({search:c})=>e.search?e.search===!0?c:si(e.search,c):{};s.push(a);const l=(c,f)=>{if(c>=s.length)return f;const d=s[c];return d({search:f,next:p=>l(c+1,p)})};return l(0,t)}const GN="Error preloading route! ";class dk{constructor(e){if(this.init=n=>{this.originalIndex=n.originalIndex;const r=this.options,s=!r?.path&&!r?.id;this.parentRoute=this.options.getParentRoute?.(),s?this._path=Xn:this.parentRoute||Cs(!1);let a=s?Xn:r?.path;a&&a!=="/"&&(a=ek(a));const l=r?.id||a;let c=s?Xn:nd([this.parentRoute.id===Xn?"":this.parentRoute.id,l]);a===Xn&&(a="/"),c!==Xn&&(c=nd(["/",c]));const f=c===Xn?"/":nd([this.parentRoute.fullPath,a]);this._path=a,this._id=c,this._fullPath=f,this._to=f},this.addChildren=n=>this._addFileChildren(n),this._addFileChildren=n=>(Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this),this._addFileTypes=()=>this,this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.options=e||{},this.isRoot=!e?.getParentRoute,e?.id&&e?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class QN extends dk{constructor(e){super(e)}}function H0(t){const e=t.errorComponent??ch;return x.jsx(ZN,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?U.createElement(e,{error:n,reset:r}):t.children})}class ZN extends U.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function ch({error:t}){const[e,n]=U.useState(!1);return x.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[x.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),x.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),x.jsx("div",{style:{height:".25rem"}}),e?x.jsx("div",{children:x.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?x.jsx("code",{children:t.message}):null})}):null]})}function YN({children:t,fallback:e=null}){return JN()?x.jsx(Nr.Fragment,{children:t}):x.jsx(Nr.Fragment,{children:e})}function JN(){return Nr.useSyncExternalStore(WN,()=>!0,()=>!1)}function WN(){return()=>{}}var pg={exports:{}},mg={},gg={exports:{}},yg={};var U_;function XN(){if(U_)return yg;U_=1;var t=Ao();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function c(p,g){var y=g(),S=r({inst:{value:y,getSnapshot:g}}),w=S[0].inst,E=S[1];return a(function(){w.value=y,w.getSnapshot=g,f(w)&&E({inst:w})},[p,y,g]),s(function(){return f(w)&&E({inst:w}),p(function(){f(w)&&E({inst:w})})},[p]),l(y),y}function f(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function d(p,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return yg.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,yg}var V_;function eD(){return V_||(V_=1,gg.exports=XN()),gg.exports}var q_;function tD(){if(q_)return mg;q_=1;var t=Ao(),e=eD();function n(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=t.useRef,l=t.useEffect,c=t.useMemo,f=t.useDebugValue;return mg.useSyncExternalStoreWithSelector=function(d,m,p,g,y){var S=a(null);if(S.current===null){var w={hasValue:!1,value:null};S.current=w}else w=S.current;S=c(function(){function _(A){if(!k){if(k=!0,R=A,A=g(A),y!==void 0&&w.hasValue){var z=w.value;if(y(z,A))return O=z}return O=A}if(z=O,r(R,A))return z;var P=g(A);return y!==void 0&&y(z,P)?(R=A,z):(R=A,O=P)}var k=!1,R,O,L=p===void 0?null:p;return[function(){return _(m())},L===null?void 0:function(){return _(L())}]},[m,p,g,y]);var E=s(d,S[0],S[1]);return l(function(){w.hasValue=!0,w.value=E},[E]),f(E),E},mg}var H_;function nD(){return H_||(H_=1,pg.exports=tD()),pg.exports}var rD=nD();function vs(t,e=r=>r,n={}){const r=n.equal??sD;return rD.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,r)}function sD(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!e.has(r)||!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();const n=K_(t);if(n.length!==K_(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}function K_(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}const vg=U.createContext(null);function hk(){return typeof document>"u"?vg:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=vg,vg)}function sr(t){const e=U.useContext(hk());return t?.warn,e}function $n(t){const e=sr({warn:t?.router===void 0}),n=t?.router||e,r=U.useRef(void 0);return vs(n.__store,s=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const a=vr(r.current,t.select(s));return r.current=a,a}return t.select(s)}return s})}const fh=U.createContext(void 0),iD=U.createContext(void 0);function Hr(t){const e=U.useContext(t.from?iD:fh);return $n({select:r=>{const s=r.matches.find(a=>t.from?t.from===a.routeId:a.id===e);if(Cs(!((t.shouldThrow??!0)&&!s),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),s!==void 0)return t.select?t.select(s):s},structuralSharing:t.structuralSharing})}function K0(t){return Hr({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function G0(t){const{select:e,...n}=t;return Hr({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function oa(t){return Hr({from:t.from,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,strict:t.strict,select:e=>{const n=t.strict===!1?e.params:e._strictParams;return t.select?t.select(n):n}})}function Q0(t){return Hr({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}const Cf=typeof window<"u"?U.useLayoutEffect:U.useEffect;function bg(t){const e=U.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function aD(t,e,n={},r={}){U.useEffect(()=>{if(!t.current||r.disabled||typeof IntersectionObserver!="function")return;const s=new IntersectionObserver(([a])=>{e(a)},n);return s.observe(t.current),()=>{s.disconnect()}},[e,n,r.disabled,t])}function oD(t){const e=U.useRef(null);return U.useImperativeHandle(t,()=>e.current,[]),e}function qu(t){const e=sr();return U.useCallback(n=>e.navigate({...n,from:n.from??t?.from}),[t?.from,e])}var lD=FE();function uD(t,e){const n=sr(),[r,s]=U.useState(!1),a=U.useRef(!1),l=oD(e),{activeProps:c,inactiveProps:f,activeOptions:d,to:m,preload:p,preloadDelay:g,hashScrollIntoView:y,replace:S,startTransition:w,resetScroll:E,viewTransition:_,children:k,target:R,disabled:O,style:L,className:A,onClick:z,onFocus:P,onMouseEnter:j,onMouseLeave:I,onTouchStart:F,ignoreBlocker:G,params:J,search:te,hash:H,state:$,mask:W,reloadDocument:oe,unsafeRelative:Q,from:N,_fromLocation:D,...q}=t,M=$n({select:be=>be.location.search,structuralSharing:!0}),se=t.from,ce=U.useMemo(()=>({...t,from:se}),[n,M,se,t._fromLocation,t.hash,t.to,t.search,t.params,t.state,t.mask,t.unsafeRelative]),he=U.useMemo(()=>n.buildLocation({...ce}),[n,ce]),ve=U.useMemo(()=>{if(O)return;let be=he.maskedLocation?he.maskedLocation.url.href:he.url.href,ye=!1;return n.origin&&(be.startsWith(n.origin)?be=n.history.createHref(be.replace(n.origin,""))||"/":ye=!0),{href:be,external:ye}},[O,he.maskedLocation,he.url,n.origin,n.history]),Ae=U.useMemo(()=>{if(ve?.external)return ve.href;try{return new URL(m),m}catch{}},[m,ve]),_e=t.reloadDocument||Ae?!1:p??n.options.defaultPreload,pe=g??n.options.defaultPreloadDelay??0,Ee=$n({select:be=>{if(Ae)return!1;if(d?.exact){if(!vN(be.location.pathname,he.pathname,n.basepath))return!1}else{const ye=Ad(be.location.pathname,n.basepath),Ve=Ad(he.pathname,n.basepath);if(!(ye.startsWith(Ve)&&(ye.length===Ve.length||ye[Ve.length]==="/")))return!1}return(d?.includeSearch??!0)&&!Qi(be.location.search,he.search,{partial:!d?.exact,ignoreUndefined:!d?.explicitUndefined})?!1:d?.includeHash?be.location.hash===he.hash:!0}}),Me=U.useCallback(()=>{n.preloadRoute({...ce}).catch(be=>{console.warn(be),console.warn(GN)})},[n,ce]),Ze=U.useCallback(be=>{be?.isIntersecting&&Me()},[Me]);aD(l,Ze,pD,{disabled:!!O||_e!=="viewport"}),U.useEffect(()=>{a.current||!O&&_e==="render"&&(Me(),a.current=!0)},[O,Me,_e]);const je=be=>{const ye=be.currentTarget.getAttribute("target"),Ve=R!==void 0?R:ye;if(!O&&!mD(be)&&!be.defaultPrevented&&(!Ve||Ve==="_self")&&be.button===0){be.preventDefault(),lD.flushSync(()=>{s(!0)});const ne=n.subscribe("onResolved",()=>{ne(),s(!1)});n.navigate({...ce,replace:S,resetScroll:E,hashScrollIntoView:y,startTransition:w,viewTransition:_,ignoreBlocker:G})}};if(Ae)return{...q,ref:l,href:Ae,...k&&{children:k},...R&&{target:R},...O&&{disabled:O},...L&&{style:L},...A&&{className:A},...z&&{onClick:z},...P&&{onFocus:P},...j&&{onMouseEnter:j},...I&&{onMouseLeave:I},...F&&{onTouchStart:F}};const Ye=be=>{O||_e&&Me()},st=Ye,Je=be=>{if(!(O||!_e))if(!pe)Me();else{const ye=be.target;if(Ll.has(ye))return;const Ve=setTimeout(()=>{Ll.delete(ye),Me()},pe);Ll.set(ye,Ve)}},at=be=>{if(O||!_e||!pe)return;const ye=be.target,Ve=Ll.get(ye);Ve&&(clearTimeout(Ve),Ll.delete(ye))},ht=Ee?si(c,{})??cD:Sg,Oe=Ee?Sg:si(f,{})??Sg,ge=[A,ht.className,Oe.className].filter(Boolean).join(" "),Le=(L||ht.style||Oe.style)&&{...L,...ht.style,...Oe.style};return{...q,...ht,...Oe,href:ve?.href,ref:l,onClick:jl([z,je]),onFocus:jl([P,Ye]),onMouseEnter:jl([j,Je]),onMouseLeave:jl([I,at]),onTouchStart:jl([F,st]),disabled:!!O,target:R,...Le&&{style:Le},...ge&&{className:ge},...O&&fD,...Ee&&dD,...r&&hD}}const Sg={},cD={className:"active"},fD={role:"link","aria-disabled":!0},dD={"data-status":"active","aria-current":"page"},hD={"data-transitioning":"transitioning"},Ll=new WeakMap,pD={rootMargin:"100px"},jl=t=>e=>{for(const n of t)if(n){if(e.defaultPrevented)return;n(e)}},pk=U.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:s,ref:a,...l}=uD(r,e),c=typeof r.children=="function"?r.children({isActive:l["data-status"]==="active"}):r.children;return n===void 0&&delete l.disabled,U.createElement(n||"a",{...l,ref:a},c)});function mD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}class gD extends dk{constructor(e){super(e),this.useMatch=n=>Hr({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Hr({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Q0({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>oa({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>G0({...n,from:this.id}),this.useLoaderData=n=>K0({...n,from:this.id}),this.useNavigate=()=>qu({from:this.fullPath}),this.Link=Nr.forwardRef((n,r)=>x.jsx(pk,{ref:r,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function Oo(t){return new gD(t)}class yD extends QN{constructor(e){super(e),this.useMatch=n=>Hr({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Hr({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Q0({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>oa({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>G0({...n,from:this.id}),this.useLoaderData=n=>K0({...n,from:this.id}),this.useNavigate=()=>qu({from:this.fullPath}),this.Link=Nr.forwardRef((n,r)=>x.jsx(pk,{ref:r,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function vD(t){return new yD(t)}function G_(t){return typeof t=="object"?new Q_(t,{silent:!0}).createRoute(t):new Q_(t,{silent:!0}).createRoute}class Q_{constructor(e,n){this.path=e,this.createRoute=r=>{this.silent;const s=Oo(r);return s.isRoot=!1,s},this.silent=n?.silent}}class Z_{constructor(e){this.useMatch=n=>Hr({select:n?.select,from:this.options.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Hr({from:this.options.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Q0({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useParams=n=>oa({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useLoaderDeps=n=>G0({...n,from:this.options.id}),this.useLoaderData=n=>K0({...n,from:this.options.id}),this.useNavigate=()=>{const n=sr();return qu({from:n.routesById[this.options.id].fullPath})},this.options=e,this.$$typeof=Symbol.for("react.memo")}}function Y_(t){return typeof t=="object"?new Z_(t):e=>new Z_({id:t,...e})}function bD(){const t=sr(),e=U.useRef({router:t,mounted:!1}),[n,r]=U.useState(!1),{hasPendingMatches:s,isLoading:a}=$n({select:p=>({isLoading:p.isLoading,hasPendingMatches:p.matches.some(g=>g.status==="pending")}),structuralSharing:!0}),l=bg(a),c=a||n||s,f=bg(c),d=a||s,m=bg(d);return t.startTransition=p=>{r(!0),U.startTransition(()=>{p(),r(!1)})},U.useEffect(()=>{const p=t.history.subscribe(t.load),g=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Zi(t.latestLocation.publicHref)!==Zi(g.publicHref)&&t.commitLocation({...g,replace:!0}),()=>{p()}},[t,t.history]),Cf(()=>{if(typeof window<"u"&&t.ssr||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(g){console.error(g)}})()},[t]),Cf(()=>{l&&!a&&t.emit({type:"onLoad",...Yi(t.state)})},[l,t,a]),Cf(()=>{m&&!d&&t.emit({type:"onBeforeRouteMount",...Yi(t.state)})},[d,m,t]),Cf(()=>{if(f&&!c){const p=Yi(t.state);t.emit({type:"onResolved",...p}),t.__store.setState(g=>({...g,status:"idle",resolvedLocation:g.location})),p.hrefChanged&&kN(t)}},[c,f,t]),null}function SD(t){const e=$n({select:n=>`not-found-${n.location.pathname}-${n.status}`});return x.jsx(H0,{getResetKey:()=>e,onCatch:(n,r)=>{if(tr(n))t.onCatch?.(n,r);else throw n},errorComponent:({error:n})=>{if(tr(n))return t.fallback?.(n);throw n},children:t.children})}function wD(){return x.jsx("p",{children:"Not Found"})}function to(t){return x.jsx(x.Fragment,{children:t.children})}function mk(t,e,n){return e.options.notFoundComponent?x.jsx(e.options.notFoundComponent,{...n}):t.options.defaultNotFoundComponent?x.jsx(t.options.defaultNotFoundComponent,{...n}):x.jsx(wD,{})}function xD({children:t}){const e=sr();return e.isServer?x.jsx("script",{nonce:e.options.ssr?.nonce,dangerouslySetInnerHTML:{__html:t+";document.currentScript.remove()"}}):null}function _D(){const t=sr();if(!t.isScrollRestoring||!t.isServer||typeof t.options.scrollRestoration=="function"&&!t.options.scrollRestoration({location:t.latestLocation}))return null;const n=(t.options.getScrollRestorationKey||Cy)(t.latestLocation),r=n!==Cy(t.latestLocation)?n:void 0,s={storageKey:Td,shouldScrollRestoration:!0};return r&&(s.key=r),x.jsx(xD,{children:`(${nk.toString()})(${JSON.stringify(s)})`})}const gk=U.memo(function({matchId:e}){const n=sr(),r=$n({select:_=>{const k=_.matches.find(R=>R.id===e);return Cs(k),{routeId:k.routeId,ssr:k.ssr,_displayPending:k._displayPending}},structuralSharing:!0}),s=n.routesById[r.routeId],a=s.options.pendingComponent??n.options.defaultPendingComponent,l=a?x.jsx(a,{}):null,c=s.options.errorComponent??n.options.defaultErrorComponent,f=s.options.onCatch??n.options.defaultOnCatch,d=s.isRoot?s.options.notFoundComponent??n.options.notFoundRoute?.options.component:s.options.notFoundComponent,m=r.ssr===!1||r.ssr==="data-only",p=(!s.isRoot||s.options.wrapInSuspense||m)&&(s.options.wrapInSuspense??a??(s.options.errorComponent?.preload||m))?U.Suspense:to,g=c?H0:to,y=d?SD:to,S=$n({select:_=>_.loadedAt}),w=$n({select:_=>{const k=_.matches.findIndex(R=>R.id===e);return _.matches[k-1]?.routeId}}),E=s.isRoot?s.options.shellComponent??to:to;return x.jsxs(E,{children:[x.jsx(fh.Provider,{value:e,children:x.jsx(p,{fallback:l,children:x.jsx(g,{getResetKey:()=>S,errorComponent:c||ch,onCatch:(_,k)=>{if(tr(_))throw _;f?.(_,k)},children:x.jsx(y,{fallback:_=>{if(!d||_.routeId&&_.routeId!==r.routeId||!_.routeId&&!s.isRoot)throw _;return U.createElement(d,_)},children:m||r._displayPending?x.jsx(YN,{fallback:l,children:x.jsx(J_,{matchId:e})}):x.jsx(J_,{matchId:e})})})})}),w===Xn&&n.options.scrollRestoration?x.jsxs(x.Fragment,{children:[x.jsx(CD,{}),x.jsx(_D,{})]}):null]})});function CD(){const t=sr(),e=U.useRef(void 0);return x.jsx("script",{suppressHydrationWarning:!0,ref:n=>{n&&(e.current===void 0||e.current.href!==t.latestLocation.href)&&(t.emit({type:"onRendered",...Yi(t.state)}),e.current=t.latestLocation)}},t.latestLocation.state.__TSR_key)}const J_=U.memo(function({matchId:e}){const n=sr(),{match:r,key:s,routeId:a}=$n({select:f=>{const d=f.matches.find(S=>S.id===e),m=d.routeId,g=(n.routesById[m].options.remountDeps??n.options.defaultRemountDeps)?.({routeId:m,loaderDeps:d.loaderDeps,params:d._strictParams,search:d._strictSearch});return{key:g?JSON.stringify(g):void 0,routeId:m,match:{id:d.id,status:d.status,error:d.error,invalid:d.invalid,_forcePending:d._forcePending,_displayPending:d._displayPending}}},structuralSharing:!0}),l=n.routesById[a],c=U.useMemo(()=>{const f=l.options.component??n.options.defaultComponent;return f?x.jsx(f,{},s):x.jsx(ED,{})},[s,l.options.component,n.options.defaultComponent]);if(r._displayPending)throw n.getMatch(r.id)?._nonReactive.displayPendingPromise;if(r._forcePending)throw n.getMatch(r.id)?._nonReactive.minPendingPromise;if(r.status==="pending"){const f=l.options.pendingMinMs??n.options.defaultPendingMinMs;if(f){const d=n.getMatch(r.id);if(d&&!d._nonReactive.minPendingPromise&&!n.isServer){const m=_o();d._nonReactive.minPendingPromise=m,setTimeout(()=>{m.resolve(),d._nonReactive.minPendingPromise=void 0},f)}}throw n.getMatch(r.id)?._nonReactive.loadPromise}if(r.status==="notFound")return Cs(tr(r.error)),mk(n,l,r.error);if(r.status==="redirected")throw Cs(xr(r.error)),n.getMatch(r.id)?._nonReactive.loadPromise;if(r.status==="error"){if(n.isServer){const f=(l.options.errorComponent??n.options.defaultErrorComponent)||ch;return x.jsx(f,{error:r.error,reset:void 0,info:{componentStack:""}})}throw r.error}return c}),ED=U.memo(function(){const e=sr(),n=U.useContext(fh),r=$n({select:d=>d.matches.find(m=>m.id===n)?.routeId}),s=e.routesById[r],a=$n({select:d=>{const p=d.matches.find(g=>g.id===n);return Cs(p),p.globalNotFound}}),l=$n({select:d=>{const m=d.matches,p=m.findIndex(g=>g.id===n);return m[p+1]?.id}}),c=e.options.defaultPendingComponent?x.jsx(e.options.defaultPendingComponent,{}):null;if(a)return mk(e,s,void 0);if(!l)return null;const f=x.jsx(gk,{matchId:l});return r===Xn?x.jsx(U.Suspense,{fallback:c,children:f}):f});function kD(){const t=sr(),n=t.routesById[Xn].options.pendingComponent??t.options.defaultPendingComponent,r=n?x.jsx(n,{}):null,s=t.isServer||typeof document<"u"&&t.ssr?to:U.Suspense,a=x.jsxs(s,{fallback:r,children:[!t.isServer&&x.jsx(bD,{}),x.jsx(RD,{})]});return t.options.InnerWrap?x.jsx(t.options.InnerWrap,{children:a}):a}function RD(){const t=sr(),e=$n({select:s=>s.matches[0]?.id}),n=$n({select:s=>s.loadedAt}),r=e?x.jsx(gk,{matchId:e}):null;return x.jsx(fh.Provider,{value:e,children:t.options.disableGlobalCatchBoundary?r:x.jsx(H0,{getResetKey:()=>n,errorComponent:ch,onCatch:s=>{s.message||s.toString()},children:r})})}const AD=t=>new TD(t);class TD extends UN{constructor(e){super(e)}}typeof globalThis<"u"?(globalThis.createFileRoute=G_,globalThis.createLazyFileRoute=Y_):typeof window<"u"&&(window.createFileRoute=G_,window.createLazyFileRoute=Y_);function MD({router:t,children:e,...n}){Object.keys(n).length>0&&t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=hk(),s=x.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?x.jsx(t.options.Wrap,{children:s}):s}function OD({router:t,...e}){return x.jsx(MD,{router:t,...e,children:x.jsx(kD,{})})}const Io=vD(),ID=Oo({getParentRoute:()=>Io,path:"/"}),ND=Oo({getParentRoute:()=>Io,path:"$connectionId"}),DD=Oo({getParentRoute:()=>Io,path:"$connectionId/container/$container/$"}),zD=Oo({getParentRoute:()=>Io,path:"$connectionId/$database"}),LD=Oo({getParentRoute:()=>Io,path:"$connectionId/$database/$table"}),jD=Io.addChildren([ID,DD,LD,zD,ND]),yk=AD({routeTree:jD});const PD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),W_=t=>{const e=FD(t);return e.charAt(0).toUpperCase()+e.slice(1)},vk=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),$D=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var BD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const UD=U.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...c},f)=>U.createElement("svg",{ref:f,...BD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:vk("lucide",s),...!a&&!$D(c)&&{"aria-hidden":"true"},...c},[...l.map(([d,m])=>U.createElement(d,m)),...Array.isArray(a)?a:[a]]));const lt=(t,e)=>{const n=U.forwardRef(({className:r,...s},a)=>U.createElement(UD,{ref:a,iconNode:e,className:vk(`lucide-${PD(W_(t))}`,`lucide-${t}`,r),...s}));return n.displayName=W_(t),n};const VD=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],bk=lt("archive",VD);const qD=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],HD=lt("arrow-up",qD);const KD=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Sk=lt("box",KD);const GD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ji=lt("chevron-down",GD);const QD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Z0=lt("chevron-right",QD);const ZD=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],fu=lt("chevron-up",ZD);const YD=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],sd=lt("chevrons-up-down",YD);const JD=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],WD=lt("cloud",JD);const XD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],ez=lt("columns-3",XD);const tz=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Mu=lt("database",tz);const nz=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],rz=lt("download",nz);const sz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],wk=lt("file-code",sz);const iz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xk=lt("file-text",iz);const az=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],oz=lt("file-up",az);const lz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Id=lt("file",lz);const uz=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],_k=lt("folder",uz);const cz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ck=lt("image",cz);const fz=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],dz=lt("link",fz);const hz=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],pz=lt("list-ordered",hz);const mz=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],na=lt("loader-circle",mz);const gz=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ek=lt("package",gz);const yz=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],vz=lt("pencil",yz);const bz=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Sz=lt("play",bz);const wz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dh=lt("plus",wz);const xz=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_z=lt("send",xz);const Cz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ez=lt("shield-check",Cz);const kz=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ky=lt("sparkles",kz);const Rz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Az=lt("square",Rz);const Tz=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],Mz=lt("table-2",Tz);const Oz=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Iz=lt("table",Oz);const Nz=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ou=lt("trash-2",Nz);const Dz=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],zz=lt("triangle-alert",Dz);const Lz=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],kk=lt("upload",Lz);const jz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hh=lt("x",jz);class No{}class Eo extends No{constructor(e,n){super(),this.collection=e,this.alias=n,this.type="collectionRef"}}class wr extends No{constructor(e,n){super(),this.query=e,this.alias=n,this.type="queryRef"}}class kn extends No{constructor(e){super(),this.path=e,this.type="ref"}}class Pn extends No{constructor(e){super(),this.value=e,this.type="val"}}class Cr extends No{constructor(e,n){super(),this.name=e,this.args=n,this.type="func"}}class Rk extends No{constructor(e,n){super(),this.name=e,this.args=n,this.type="agg"}}function Y0(t){return t instanceof Rk||t instanceof Cr||t instanceof kn||t instanceof Pn}function J0(t){return typeof t=="object"&&"expression"in t?t.expression:t}function X_(t){return typeof t=="object"&&"expression"in t?t.expression:t}function e1(t){return typeof t=="object"&&"expression"in t&&t.residual===!0}function Pz(t){return{expression:t,residual:!0}}function Fz(t,e){if(t.from.alias===e)return t.from;for(const n of t.join||[])if(n.from.alias===e)return n.from}function Iu(t,e,n){if(e.path.length!==0){if(e.path.length===1){const r=e.path[0];if(t.select){const s=t.select[r];if(s&&s.type==="ref")return Iu(t,s,n)}return{collection:n,path:[r]}}if(e.path.length>1){const[r,...s]=e.path,a=Fz(t,r);return a?a.type==="queryRef"?Iu(a.query,new kn(s),n):{collection:a.collection,path:s}:void 0}}}class ir extends Error{constructor(e){super(e),this.name="TanStackDBError"}}class t1 extends ir{constructor(e,n,r){const s=`${e==="insert"?"Insert":"Update"} validation failed: ${n.map(a=>`
- ${a.message} - path: ${a.path}`).join("")}`;super(r||s),this.name="SchemaValidationError",this.type=e,this.issues=n}}class Hu extends ir{constructor(e){super(e),this.name="CollectionConfigurationError"}}class $z extends Hu{constructor(){super("Collection requires a config")}}class Bz extends Hu{constructor(){super("Collection requires a sync config")}}class Uz extends Hu{constructor(){super("Schema must implement the standard-schema interface")}}class n1 extends Hu{constructor(){super("Schema validation must be synchronous")}}class Ku extends ir{constructor(e){super(e),this.name="CollectionStateError"}}class Vz extends Ku{constructor(e,n){super(`Cannot perform ${e} on collection "${n}" - collection is in error state. Try calling cleanup() and restarting the collection.`)}}class qz extends Ku{constructor(e,n,r){super(`Invalid collection status transition from "${e}" to "${n}" for collection "${r}"`)}}class Hz extends Ku{constructor(){super("Collection is in error state")}}class Kz extends Ku{constructor(){super("Active subscribers count is negative - this should never happen")}}class Kr extends ir{constructor(e){super(e),this.name="CollectionOperationError"}}class Gz extends Kr{constructor(e){super(`An object was created without a defined key: ${JSON.stringify(e)}`)}}class Qz extends Kr{constructor(e,n){const r=e===null?"null":typeof e;super(`getKey returned an invalid key type. Expected string or number, but got ${r}: ${JSON.stringify(e)}. Item: ${JSON.stringify(n)}`)}}class Zz extends Kr{constructor(e){super(`Cannot insert document with ID "${e}" because it already exists in the collection`)}}class Yz extends Kr{constructor(e,n,r){const s=`Cannot insert document with key "${e}" from sync because it already exists in the collection "${n}"`;r?.hasCustomGetKey&&r.hasJoins?super(`${s}. This collection uses a custom getKey with joined queries. Joined queries can produce multiple rows with the same key when relationships are not 1:1. Consider: (1) using a composite key in your getKey function (e.g., \`\${item.key1}-\${item.key2}\`), (2) ensuring your join produces unique rows per key, or (3) removing the custom getKey to use the default composite key behavior.`):super(s)}}class Jz extends Kr{constructor(){super("The first argument to update is missing")}}class Wz extends Kr{constructor(){super("No keys were passed to update")}}class Xz extends Kr{constructor(e){super(`The key "${e}" was passed to update but an object for this key was not found in the collection`)}}class eL extends Kr{constructor(e,n){super(`Updating the key of an item is not allowed. Original key: "${e}", Attempted new key: "${n}". Please delete the old item and create a new one if a key change is necessary.`)}}class tL extends Kr{constructor(){super("No keys were passed to delete")}}class nL extends Kr{constructor(e){super(`Collection.delete was called with key '${e}' but there is no item in the collection with this key`)}}class W0 extends ir{constructor(e){super(e),this.name="MissingHandlerError"}}class rL extends W0{constructor(){super("Collection.insert called directly (not within an explicit transaction) but no 'onInsert' handler is configured.")}}class sL extends W0{constructor(){super("Collection.update called directly (not within an explicit transaction) but no 'onUpdate' handler is configured.")}}class iL extends W0{constructor(){super("Collection.delete called directly (not within an explicit transaction) but no 'onDelete' handler is configured.")}}class pi extends ir{constructor(e){super(e),this.name="TransactionError"}}class aL extends pi{constructor(){super("mutationFn is required when creating a transaction")}}class oL extends pi{constructor(){super("You can no longer call .mutate() as the transaction is no longer pending")}}class lL extends pi{constructor(){super("You can no longer call .rollback() as the transaction is already completed")}}class uL extends pi{constructor(){super("You can no longer call .commit() as the transaction is no longer pending")}}class r1 extends pi{constructor(){super("No pending sync transaction to write to")}}class s1 extends pi{constructor(){super("The pending sync transaction is already committed, you can't still write to it.")}}class cL extends pi{constructor(){super("No pending sync transaction to commit")}}class fL extends pi{constructor(){super("The pending sync transaction is already committed, you can't commit it again.")}}class Do extends ir{constructor(e){super(e),this.name="QueryBuilderError"}}class dL extends Do{constructor(e){super(`Only one source is allowed in the ${e}`)}}class hL extends Do{constructor(e){super(`A sub query passed to a ${e} must have a from clause itself`)}}class pL extends Do{constructor(e){super(`Invalid source for live query: The value provided for alias "${e}" is not a Collection or subquery. Live queries only accept Collection instances or subqueries. Please ensure you're passing a valid Collection or QueryBuilder, not a plain array or other data type.`)}}class Ef extends Do{constructor(e,n){super(`Invalid source for ${e}: Expected an object with a single key-value pair like { alias: collection }. For example: .from({ todos: todosCollection }). Got: ${n}`)}}class mL extends Do{constructor(){super("Join condition must be an equality expression")}}class gL extends Do{constructor(){super("Query must have a from clause")}}class ar extends ir{constructor(e){super(e),this.name="QueryCompilationError"}}class yL extends ar{constructor(){super("DISTINCT requires a SELECT clause.")}}class vL extends ar{constructor(){super("HAVING clause requires GROUP BY clause")}}class bL extends ar{constructor(){super("LIMIT and OFFSET require an ORDER BY clause to ensure deterministic results")}}class Ak extends ar{constructor(e,n,r){const s=n?`alias "${e}" (collection "${n}")`:`collection "${e}"`,a=r?.length?`. Available keys: ${r.join(", ")}`:"";super(`Input for ${s} not found in inputs map${a}`)}}class SL extends ar{constructor(e,n){super(`Subquery uses alias "${e}" which is already used in the parent query. Each alias must be unique across parent and subquery contexts. Parent query aliases: ${n.join(", ")}. Please rename "${e}" in either the parent query or subquery to avoid conflicts.`)}}class wL extends ar{constructor(e){super(`Unsupported FROM type: ${e}`)}}class xL extends ar{constructor(e){super(`Unknown expression type: ${e}`)}}class _L extends ar{constructor(){super("Reference path cannot be empty")}}class CL extends ar{constructor(e){super(`Unknown function: ${e}`)}}class i1 extends ar{constructor(e){super(`Collection "${e}" not found during compilation of join`)}}class la extends ir{constructor(e){super(e),this.name="JoinError"}}class EL extends la{constructor(e){super(`Unsupported join type: ${e}`)}}class kL extends la{constructor(e){super(`Invalid join condition: both expressions refer to the same source "${e}"`)}}class RL extends la{constructor(){super("Invalid join condition: expressions must reference source aliases")}}class AL extends la{constructor(e){super(`Invalid join condition: left expression refers to an unavailable source "${e}"`)}}class TL extends la{constructor(e){super(`Invalid join condition: right expression does not refer to the joined source "${e}"`)}}class ML extends la{constructor(){super("Invalid join condition")}}class OL extends la{constructor(e){super(`Unsupported join source type: ${e}`)}}class ph extends ir{constructor(e){super(e),this.name="GroupByError"}}class IL extends ph{constructor(e){super(`Non-aggregate expression '${e}' in SELECT must also appear in GROUP BY clause`)}}class NL extends ph{constructor(e){super(`Unsupported aggregate function: ${e}`)}}class DL extends ph{constructor(e){super(`Aggregate function in HAVING clause must also be in SELECT clause: ${e}`)}}class zL extends ph{constructor(e){super(`Unknown expression type in HAVING clause: ${e}`)}}class a1 extends ir{constructor(e,n){const r=n instanceof Error?n.message:String(n);super(`Collection "${e}" sync cleanup function threw an error: ${r}`),this.name="SyncCleanupError"}}class LL extends ir{constructor(e){super(e),this.name="QueryOptimizerError"}}class jL extends LL{constructor(){super("Cannot combine empty expression list")}}class PL extends ar{constructor(e,n,r,s){super(`Internal error: subscription for alias '${e}' (remapped from '${n}', collection '${r}') is missing in join pipeline. Available aliases: ${s.join(", ")}. This indicates a bug in alias tracking.`)}}class FL extends ar{constructor(e){super(`Internal error: compiler returned aliases without inputs: ${e.join(", ")}. This indicates a bug in query compilation. Please report this issue.`)}}class $L extends ar{constructor(){super("setWindow() can only be called on collections with an ORDER BY clause. Add .orderBy() to your query to enable window movement.")}}const wg=new WeakMap;let BL=1;function o1(t){if(wg.has(t))return wg.get(t);const e=BL++;return wg.set(t,e),e}const X0=(t,e,n)=>{const{nulls:r}=n;if(t==null&&e==null)return 0;if(t==null)return r==="first"?-1:1;if(e==null)return r==="first"?1:-1;if(typeof t=="string"&&typeof e=="string"&&n.stringSort==="locale")return t.localeCompare(e,n.locale,n.localeOptions);if(Array.isArray(t)&&Array.isArray(e)){for(let l=0;l<Math.min(t.length,e.length);l++){const c=X0(t[l],e[l],n);if(c!==0)return c}return t.length-e.length}if(t instanceof Date&&e instanceof Date)return t.getTime()-e.getTime();const s=typeof t=="object",a=typeof e=="object";if(s||a){if(s&&a){const l=o1(t),c=o1(e);return l-c}if(s)return 1;if(a)return-1}return t<e?-1:t>e?1:0},UL=(t,e,n)=>X0(e,t,{...n,nulls:n.nulls==="first"?"last":"first"});function Nd(t){return(e,n)=>t.direction==="asc"?X0(e,n,t):UL(e,n,t)}const Ry=Nd({direction:"asc",nulls:"first",stringSort:"locale"});function VL(t,e){if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const qL=128;function bs(t){return t instanceof Date?t.getTime():(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)&&t.byteLength<=qL?`__u8__${Array.from(t).join(",")}`:t}function HL(t,e){if(t===e)return!0;const n=typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array,r=typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array;return n&&r?VL(t,e):!1}function Wt(t){return t==null}function yo(t){return t===!0}function Fn(t,e=!1){return tv(t,e)}function ev(t){return tv(t,!0)}function tv(t,e){switch(t.type){case"val":{const n=t.value;return()=>n}case"ref":return e?GL(t):KL(t);case"func":return QL(t,e);default:throw new xL(t.type)}}function KL(t){const[e,...n]=t.path;if(!e)throw new _L;if(n.length===0)return r=>r[e];if(n.length===1){const r=n[0];return s=>s[e]?.[r]}else return r=>{const s=r[e];if(s===void 0)return;let a=s;for(const l of n){if(a==null)return a;a=a[l]}return a}}function GL(t){const e=t.path;return n=>{let r=n;for(const s of e){if(r==null)return r;r=r[s]}return r}}function QL(t,e){const n=t.args.map(r=>tv(r,e));switch(t.name){case"eq":{const r=n[0],s=n[1];return a=>{const l=bs(r(a)),c=bs(s(a));return Wt(l)||Wt(c)?null:HL(l,c)}}case"gt":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Wt(l)||Wt(c)?null:l>c}}case"gte":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Wt(l)||Wt(c)?null:l>=c}}case"lt":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Wt(l)||Wt(c)?null:l<c}}case"lte":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Wt(l)||Wt(c)?null:l<=c}}case"and":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!1)return!1;Wt(l)&&(s=!0)}return s?null:!0};case"or":return r=>{let s=!1;for(const a of n){const l=a(r);if(l===!0)return!0;Wt(l)&&(s=!0)}return s?null:!1};case"not":{const r=n[0];return s=>{const a=r(s);return Wt(a)?null:!a}}case"in":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Wt(l)?null:Array.isArray(c)?c.includes(l):!1}}case"like":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Wt(l)||Wt(c)?null:l1(l,c,!1)}}case"ilike":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return Wt(l)||Wt(c)?null:l1(l,c,!0)}}case"upper":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toUpperCase():a}}case"lower":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"?a.toLowerCase():a}}case"length":{const r=n[0];return s=>{const a=r(s);return typeof a=="string"||Array.isArray(a)?a.length:0}}case"concat":return r=>n.map(s=>{const a=s(r);try{return String(a??"")}catch{try{return JSON.stringify(a)||""}catch{return"[object]"}}}).join("");case"coalesce":return r=>{for(const s of n){const a=s(r);if(a!=null)return a}return null};case"add":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return(l??0)+(c??0)}}case"subtract":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return(l??0)-(c??0)}}case"multiply":{const r=n[0],s=n[1];return a=>{const l=r(a),c=s(a);return(l??0)*(c??0)}}case"divide":{const r=n[0],s=n[1];return a=>{const l=r(a),f=s(a)??0;return f!==0?(l??0)/f:null}}case"isUndefined":{const r=n[0];return s=>r(s)===void 0}case"isNull":{const r=n[0];return s=>r(s)===null}default:throw new CL(t.name)}}function l1(t,e,n){if(typeof t!="string"||typeof e!="string")return!1;const r=n?t.toLowerCase():t;let a=(n?e.toLowerCase():e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return a=a.replace(/%/g,".*"),a=a.replace(/_/g,"."),new RegExp(`^${a}$`).test(r)}function Ir(t,e){return id(t,e,new Map)}function id(t,e,n){if(t===e)return!0;if(t==null||e==null||typeof t!=typeof e)return!1;if(t instanceof Date)return e instanceof Date?t.getTime()===e.getTime():!1;if(t instanceof RegExp)return e instanceof RegExp?t.source===e.source&&t.flags===e.flags:!1;if(t instanceof Map){if(!(e instanceof Map)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const s=Array.from(t.entries()).every(([a,l])=>e.has(a)&&id(l,e.get(a),n));return n.delete(t),s}if(t instanceof Set){if(!(e instanceof Set)||t.size!==e.size)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Array.from(t),s=Array.from(e);if(r.every(l=>typeof l!="object"))return n.delete(t),r.every(l=>e.has(l));const a=r.length===s.length;return n.delete(t),a}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)&&!(t instanceof DataView)&&!(e instanceof DataView)){const r=t,s=e;if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;return!0}if(Dd(t)&&Dd(e)){const r=Ay(t),s=Ay(e);return r!==s?!1:typeof t.equals=="function"?t.equals(e):t.toString()===e.toString()}if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;if(n.has(t))return n.get(t)===e;n.set(t,e);const r=t.every((s,a)=>id(s,e[a],n));return n.delete(t),r}if(typeof t=="object"){if(n.has(t))return n.get(t)===e;n.set(t,e);const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return n.delete(t),!1;const a=r.every(l=>l in e&&id(t[l],e[l],n));return n.delete(t),a}return!1}const ZL=["Temporal.Duration","Temporal.Instant","Temporal.PlainDate","Temporal.PlainDateTime","Temporal.PlainMonthDay","Temporal.PlainTime","Temporal.PlainYearMonth","Temporal.ZonedDateTime"];function Ay(t){return t[Symbol.toStringTag]}function Dd(t){const e=Ay(t);return typeof e=="string"&&ZL.includes(e)}const nv={direction:"asc",nulls:"first",stringSort:"locale"};class YL{constructor(e){this.originalIndex=e}lookup(e,n){const r=e==="gt"?"lt":e==="gte"?"lte":e==="lt"?"gt":e==="lte"?"gte":e;return this.originalIndex.lookup(r,n)}rangeQuery(e={}){return this.originalIndex.rangeQueryReversed(e)}rangeQueryReversed(e={}){return this.originalIndex.rangeQuery(e)}take(e,n,r){return this.originalIndex.takeReversed(e,n,r)}takeReversed(e,n,r){return this.originalIndex.take(e,n,r)}get orderedEntriesArray(){return this.originalIndex.orderedEntriesArrayReversed}get orderedEntriesArrayReversed(){return this.originalIndex.orderedEntriesArray}supports(e){return this.originalIndex.supports(e)}matchesField(e){return this.originalIndex.matchesField(e)}matchesCompareOptions(e){return this.originalIndex.matchesCompareOptions(e)}matchesDirection(e){return this.originalIndex.matchesDirection(e)}getStats(){return this.originalIndex.getStats()}add(e,n){this.originalIndex.add(e,n)}remove(e,n){this.originalIndex.remove(e,n)}update(e,n,r){this.originalIndex.update(e,n,r)}build(e){this.originalIndex.build(e)}clear(){this.originalIndex.clear()}get keyCount(){return this.originalIndex.keyCount}equalityLookup(e){return this.originalIndex.equalityLookup(e)}inArrayLookup(e){return this.originalIndex.inArrayLookup(e)}get indexedKeysSet(){return this.originalIndex.indexedKeysSet}get valueMapData(){return this.originalIndex.valueMapData}}function Gu(t,e,n){const r=n??{...nv,...t.compareOptions};for(const s of t.indexes.values())if(s.matchesField(e)&&s.matchesCompareOptions(r))return s.matchesDirection(r.direction)?s:new YL(s)}function JL(t){if(t.length===0)return new Set;if(t.length===1)return new Set(t[0]);let e=new Set(t[0]);for(let n=1;n<t.length;n++){const r=new Set;for(const s of e)t[n].has(s)&&r.add(s);e=r}return e}function WL(t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}function XL(t,e){return rv(t,e)}function rv(t,e){if(t.type==="func")switch(t.name){case"eq":case"gt":case"gte":case"lt":case"lte":return tj(t,e);case"and":return nj(t,e);case"or":return rj(t,e);case"in":return sj(t,e)}return{canOptimize:!1,matchingKeys:new Set}}function ej(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=new Map;for(const r of t.args)if(r.type==="func"&&["gt","gte","lt","lte"].includes(r.name)){const s=r;if(s.args.length===2){const a=s.args[0],l=s.args[1];let c=null,f=null,d=s.name;if(a.type==="ref"&&l.type==="val")c=a,f=l;else if(a.type==="val"&&l.type==="ref")switch(c=l,f=a,d){case"gt":d="lt";break;case"gte":d="lte";break;case"lt":d="gt";break;case"lte":d="gte";break}if(c&&f){const p=c.path.join("."),g=f.value;n.has(p)||n.set(p,[]),n.get(p).push({operation:d,value:g})}}}for(const[r,s]of n)if(s.length>=2){const a=r.split("."),l=Gu(e,a);if(l&&l.supports("gt")&&l.supports("lt")){let c,f,d=!0,m=!0;for(const{operation:g,value:y}of s)switch(g){case"gt":(c===void 0||y>c)&&(c=y,d=!1);break;case"gte":(c===void 0||y>c)&&(c=y,d=!0);break;case"lt":(f===void 0||y<f)&&(f=y,m=!1);break;case"lte":(f===void 0||y<f)&&(f=y,m=!0);break}return{canOptimize:!0,matchingKeys:l.rangeQuery({from:c,to:f,fromInclusive:d,toInclusive:m})}}}return{canOptimize:!1,matchingKeys:new Set}}function tj(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];let s=null,a=null,l=t.name;if(n.type==="ref"&&r.type==="val")s=n,a=r;else if(n.type==="val"&&r.type==="ref")switch(s=r,a=n,l){case"gt":l="lt";break;case"gte":l="lte";break;case"lt":l="gt";break;case"lte":l="gte";break}if(s&&a){const c=s.path,f=Gu(e,c);if(f){const d=a.value,m=l;return f.supports(m)?{canOptimize:!0,matchingKeys:f.lookup(m,d)}:{canOptimize:!1,matchingKeys:new Set}}}return{canOptimize:!1,matchingKeys:new Set}}function nj(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=ej(t,e);if(n.canOptimize)return n;const r=[];for(const s of t.args){const a=rv(s,e);a.canOptimize&&r.push(a)}if(r.length>0){const s=r.map(l=>l.matchingKeys);return{canOptimize:!0,matchingKeys:JL(s)}}return{canOptimize:!1,matchingKeys:new Set}}function rj(t,e){if(t.type!=="func"||t.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=[];for(const r of t.args){const s=rv(r,e);s.canOptimize&&n.push(s)}if(n.length>0){const r=n.map(a=>a.matchingKeys);return{canOptimize:!0,matchingKeys:WL(r)}}return{canOptimize:!1,matchingKeys:new Set}}function sj(t,e){if(t.type!=="func"||t.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=t.args[0],r=t.args[1];if(n.type==="ref"&&r.type==="val"&&Array.isArray(r.value)){const s=n.path,a=r.value,l=Gu(e,s);if(l){if(l.supports("in"))return{canOptimize:!0,matchingKeys:l.lookup("in",a)};if(l.supports("eq")){const c=new Set;for(const f of a){const d=l.lookup("eq",f);for(const m of d)c.add(m)}return{canOptimize:!0,matchingKeys:c}}}}return{canOptimize:!1,matchingKeys:new Set}}class ij extends Map{constructor(e,n){super(n),this.defaultValue=e}get(e){return this.has(e)?super.get(e):this.defaultValue()}update(e,n){const r=this.get(e),s=n(r);return this.set(e,s),s}}const xg=3e4;function _g(t,e){if(e.length<=xg)t.push(...e);else for(let n=0;n<e.length;n+=xg){const r=e.slice(n,n+xg);t.push(...r)}}function aj(t,e,n){let r=0,s=t.length;for(;r<s;){const a=Math.floor((r+s)/2),l=n(t[a],e);if(l<0)r=a+1;else if(l>0)s=a;else return a}return r}class oj{constructor(){this.objectIds=new WeakMap,this.nextId=0}getId(e){if(typeof e!="object"||e===null){const n=String(e);let r=0;for(let s=0;s<n.length;s++){const a=n.charCodeAt(s);r=(r<<5)-r+a,r=r&r}return r}return this.objectIds.has(e)||this.objectIds.set(e,this.nextId++),this.objectIds.get(e)}getStringId(e){return e===null?"null":e===void 0?"undefined":typeof e!="object"?`str_${String(e)}`:`obj_${this.getId(e)}`}}const Cg=new oj;function lj(t,e){const[n,r]=t,[s,a]=e,l=[...kf(n,Math.min(r,s)),...kf(Math.max(n,a),r)],c=[...kf(s,Math.min(a,n)),...kf(Math.max(s,r),a)];return{onlyInA:l,onlyInB:c}}function kf(t,e){const n=[];for(let r=t;r<e;r++)n.push(r);return n}function zd(t,e){return typeof t==typeof e?t<e?-1:t>e?1:0:typeof t=="string"?-1:1}const uj=dn(),cj=dn(),fj=dn(),dj=dn(),hj=dn();function dn(){return Math.random()*(2**31-1)>>>0}const Tk=new ArrayBuffer(8),pj=new DataView(Tk),Ws=new Uint8Array(Tk);class mh{constructor(){this.hash=uj,this.length=0,this.carry=0,this.carryBytes=0}_mix(e){e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e,this.hash=this.hash<<13|this.hash>>>19,this.hash=Math.imul(this.hash,5)+3864292196}writeByte(e){this.carry|=(e&255)<<8*this.carryBytes,this.carryBytes++,this.length++,this.carryBytes===4&&(this._mix(this.carry>>>0),this.carry=0,this.carryBytes=0)}update(e){switch(typeof e){case"symbol":{this.update(hj);const n=e.description;if(!n)return;for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);this.writeByte(s&255),this.writeByte(s>>>8&255)}return}case"string":this.update(cj);for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);this.writeByte(r&255),this.writeByte(r>>>8&255)}return;case"number":pj.setFloat64(0,e,!0),this.writeByte(Ws[0]),this.writeByte(Ws[1]),this.writeByte(Ws[2]),this.writeByte(Ws[3]),this.writeByte(Ws[4]),this.writeByte(Ws[5]),this.writeByte(Ws[6]),this.writeByte(Ws[7]);return;case"bigint":{let n=e;for(n<0n?(n=-n,this.update(dj)):this.update(fj);n>0n;)this.writeByte(Number(n&0xffn)),n>>=8n;e===0n&&this.writeByte(0);return}default:throw new TypeError(`Unsupported input type: ${typeof e}`)}}digest(){if(this.carryBytes>0){let e=this.carry>>>0;e=Math.imul(e,3432918353),e=e<<15|e>>>17,e=Math.imul(e,461845907),this.hash^=e}return this.hash^=this.length,this.hash^=this.hash>>>16,this.hash=Math.imul(this.hash,2246822507),this.hash^=this.hash>>>13,this.hash=Math.imul(this.hash,3266489909),this.hash^=this.hash>>>16,this.hash>>>0}}const mj=dn(),gj=dn(),yj=dn(),vj=dn(),bj=dn(),Sj=dn(),wj=dn(),xj=dn(),_j=dn(),Cj=dn(),Ej=dn(),kj=dn(),Rj=128,Nu=new WeakMap;function xn(t){const e=new mh;return Mk(e,t),e.digest()}function Aj(t){const e=Nu.get(t);if(e!==void 0)return e;let n;if(t instanceof Date)n=Tj(t);else if(typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array)if(t.byteLength<=Rj)n=Mj(t);else return Ty(t);else{if(t instanceof File)return Ty(t);{let r=t,s=xj;t instanceof Array&&(s=_j),t instanceof Map&&(s=Cj,r=[...t.entries()]),t instanceof Set&&(s=Ej,r=[...t.entries()]),n=Oj(r,s)}}return Nu.set(t,n),n}function Tj(t){const e=new mh;return e.update(wj),e.update(t.getTime()),e.digest()}function Mj(t){const e=new mh;e.update(kj),e.update(t.byteLength);for(let n=0;n<t.byteLength;n++)e.writeByte(t[n]);return e.digest()}function Oj(t,e){const n=new mh;n.update(e);const r=Object.keys(t);r.sort(Nj);for(const s of r)n.update(bj),n.update(s),Mk(n,t[s]);return n.digest()}function Mk(t,e){if(e===null){t.update(yj);return}switch(typeof e){case"undefined":t.update(vj);return;case"boolean":t.update(e?mj:gj);return;case"number":t.update(isNaN(e)?NaN:e===0?0:e);return;case"bigint":case"string":case"symbol":t.update(e);return;case"object":t.update(Ij(e));return;case"function":t.update(Ty(e));return;default:console.warn(`Ignored input during hashing because it is of type ${typeof e} which is not supported`)}}function Ij(t){let e=Nu.get(t);return e===void 0&&(e=Aj(t)),e}let u1=1;function Ty(t){let e=Nu.get(t);return e===void 0&&(e=u1^Sj,u1++,Nu.set(t,e)),e}function Nj(t,e){return t.localeCompare(e)}class Qt{#e;constructor(e=[]){this.#e=e}toString(e=!1){return`MultiSet(${JSON.stringify(this.#e,null,e?2:void 0)})`}toJSON(){return JSON.stringify(Array.from(this.getInner()))}static fromJSON(e){return new Qt(JSON.parse(e))}map(e){return new Qt(this.#e.map(([n,r])=>[e(n),r]))}filter(e){return new Qt(this.#e.filter(([n,r])=>e(n)))}negate(){return new Qt(this.#e.map(([e,n])=>[e,-n]))}concat(e){const n=[];return _g(n,this.#e),_g(n,e.getInner()),new Qt(n)}consolidate(){if(this.#e.length>0){const e=this.#e[0]?.[0];if(Array.isArray(e)&&e.length===2)return this.#t()}return this.#n()}#t(){const e=new Map,n=new Map,r=a=>{if(a.length!==2)throw new Error("Expected tuple of length 2");const[l,c]=a;return`${Cg.getStringId(l)}|${Cg.getStringId(c)}`};for(const[a,l]of this.#e){if(!Array.isArray(a)||a.length!==2)return this.#n();const[c,f]=a;if(typeof c!="string"&&typeof c!="number")return this.#n();let d;Array.isArray(f)&&f.length===2?d=r(f):d=Cg.getStringId(f);const m=c+"|"+d;e.set(m,(e.get(m)||0)+l),n.has(m)||n.set(m,a)}const s=[];for(const[a,l]of e)l!==0&&s.push([n.get(a),l]);return new Qt(s)}#n(){const e=new ij(()=>0),n=new Map;let r=!1,s=!1,a=!1;for(const[f,d]of this.#e)if(typeof f=="string")r=!0;else if(typeof f=="number")s=!0;else{a=!0;break}const l=a||r&&s;for(const[f,d]of this.#e){const m=l?xn(f):f;l&&!n.has(m)&&n.set(m,f),e.update(m,p=>p+d)}const c=[];for(const[f,d]of e.entries())if(d!==0){const m=l?n.get(f):f;c.push([m,d])}return new Qt(c)}extend(e){const n=e instanceof Qt?e.getInner():e;_g(this.#e,n)}add(e,n){n!==0&&this.#e.push([e,n])}getInner(){return this.#e}}class Dj{#e;constructor(e){this.#e=e}drain(){const e=[...this.#e].reverse();return this.#e.length=0,e}isEmpty(){return this.#e.length===0}}class Gr{#e=[];sendData(e){e instanceof Qt||(e=new Qt(e));for(const n of this.#e)n.unshift(e)}newReader(){const e=[];return this.#e.push(e),new Dj(e)}}class Ok{constructor(e,n,r){this.id=e,this.inputs=n,this.output=r}hasPendingWork(){return this.inputs.some(e=>!e.isEmpty())}}class zo extends Ok{constructor(e,n,r){super(e,[n],r),this.id=e}inputMessages(){return this.inputs[0].drain()}}class zj extends Ok{constructor(e,n,r,s){super(e,[n,r],s),this.id=e}inputAMessages(){return this.inputs[0].drain()}inputBMessages(){return this.inputs[1].drain()}}class sv extends zo{run(){for(const e of this.inputMessages())this.output.sendData(this.inner(e))}}class Lj{#e=[];#t=0;#n=!1;constructor(){}#r(){if(this.#n)throw new Error("Graph already finalized")}getNextOperatorId(){return this.#r(),this.#t++}newInput(){this.#r();const e=new Gr;return new jj(this,e)}addOperator(e){this.#r(),this.#e.push(e)}finalize(){this.#r(),this.#n=!0}step(){if(!this.#n)throw new Error("Graph not finalized");for(const e of this.#e)e.run()}pendingWork(){return this.#e.some(e=>e.hasPendingWork())}run(){for(;this.pendingWork();)this.step()}}class Qr{#e;#t;constructor(e,n){this.#e=e,this.#t=n}connectReader(){return this.#t.newReader()}get writer(){return this.#t}get graph(){return this.#e}pipe(...e){return e.reduce((n,r)=>r(n),this)}}class jj extends Qr{sendData(e){this.writer.sendData(e)}}class Pj extends sv{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.map(this.#e)}}function _n(t){return e=>{const n=new Qr(e.graph,new Gr),r=new Pj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const Ql=Symbol("NO_PREFIX");class c1 extends Map{addValue(e,n){if(n===0)return this.size===0;const r=du(e),s=this.get(r);if(ad(s)){const[a,l]=s;if(du(a)!==r)throw new Error("Mismatching prefixes, this should never happen");if(a===e||xn(a)===xn(e)){const f=l+n;f===0?this.delete(r):this.set(r,[e,f])}else{const f=new Zl;f.set(xn(a),s),f.set(xn(e),[e,n]),this.set(r,f)}}else s===void 0?this.set(r,[e,n]):s.addValue(e,n)&&this.delete(r);return this.size===0}}class Zl extends Map{addValue(e,n){if(n===0)return this.size===0;const r=xn(e),s=this.get(r);if(s){const[,a]=s,l=a+n;l===0?this.delete(r):this.set(r,[e,l])}else this.set(r,[e,n]);return this.size===0}}class ai{#e;#t=new Map;constructor(){this.#e=new Map}static fromMultiSets(e){const n=new ai;for(const r of e)for(const[s,a]of r.getInner()){const[l,c]=s;n.addValue(l,[c,a])}return n}toString(e=!1){return`Index(${JSON.stringify([...this.entries()],void 0,e?2:void 0)})`}get size(){return this.#e.size}has(e){return this.#e.has(e)}hasPresence(e){return(this.#t.get(e)||0)!==0}getConsolidatedMultiplicity(e){return this.#t.get(e)||0}getPresenceKeys(){return this.#t.keys()}get(e){return[...this.getIterator(e)]}*getIterator(e){const n=this.#e.get(e);if(ad(n))yield n;else{if(n===void 0)return;if(n instanceof Zl)for(const r of n.values())yield r;else for(const r of n.values())if(ad(r))yield r;else for(const s of r.values())yield s}}*entries(){for(const e of this.#e.keys())for(const n of this.getIterator(e))yield[e,n]}*entriesIterators(){for(const e of this.#e.keys())yield[e,this.getIterator(e)]}addValue(e,n){const[r,s]=n;if(s===0)return;const a=(this.#t.get(e)||0)+s;a===0?this.#t.delete(e):this.#t.set(e,a);const l=this.#e.get(e);if(l===void 0){this.#e.set(e,n);return}if(ad(l)){this.#n(e,l,r,s);return}if(l instanceof Zl){const c=du(r);if(c!==Ql){const f=new c1;f.set(Ql,l),f.set(c,n),this.#e.set(e,f)}else l.addValue(r,s)&&this.#e.delete(e)}else l.addValue(r,s)&&this.#e.delete(e)}#n(e,n,r,s){const[a,l]=n;if(a===r){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}const c=du(r),f=du(a);if(f===c&&(a===r||xn(a)===xn(r))){const d=l+s;d===0?this.#e.delete(e):this.#e.set(e,[r,d]);return}if(f===Ql&&c===Ql){const d=new Zl;d.set(xn(a),n),d.set(xn(r),[r,s]),this.#e.set(e,d)}else{const d=new c1;if(f===c){const m=new Zl;m.set(xn(a),n),m.set(xn(r),[r,s]),d.set(f,m)}else d.set(f,n),d.set(c,[r,s]);this.#e.set(e,d)}}append(e){for(const[n,r]of e.entries())this.addValue(n,r)}join(e){const n=[];if(this.size<=e.size)for(const[r,s]of this.entriesIterators()){if(!e.has(r))continue;const a=e.get(r);for(const[l,c]of s)for(const[f,d]of a)c!==0&&d!==0&&n.push([[r,[l,f]],c*d])}else for(const[r,s]of e.entriesIterators()){if(!this.has(r))continue;const a=this.get(r);for(const[l,c]of s)for(const[f,d]of a)d!==0&&c!==0&&n.push([[r,[f,l]],d*c])}return new Qt(n)}}function du(t){return Array.isArray(t)&&(typeof t[0]=="string"||typeof t[0]=="number"||typeof t[0]=="bigint")?t[0]:Ql}function ad(t){return Array.isArray(t)}class Fj extends zo{#e=new ai;#t=new ai;#n;constructor(e,n,r,s){super(e,n,r),this.#n=s}run(){const e=new Set;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const[l,c]=s;this.#e.addValue(l,[c,a]),e.add(l)}const n=[];for(const r of e){const s=this.#e.get(r),a=this.#t.get(r),l=this.#n(s),c=new Map,f=new Map;for(const[d,m]of l){const p=c.get(d)??0;c.set(d,p+m)}for(const[d,m]of a){const p=f.get(d)??0;f.set(d,p+m)}for(const[d,m]of f)c.has(d)||(n.push([[r,d],-m]),this.#t.addValue(r,[d,-m]));for(const[d,m]of c)f.has(d)||m!==0&&(n.push([[r,d],m]),this.#t.addValue(r,[d,m]));for(const[d,m]of c){const p=f.get(d);if(p!==void 0){const g=m-p;g!==0&&(n.push([[r,d],g]),this.#t.addValue(r,[d,g]))}}}n.length>0&&this.output.sendData(new Qt(n))}}function $j(t){return e=>{const n=new Qr(e.graph,new Gr),r=new Fj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}function f1(t){return"pipe"in t}function d1(t,e={}){const n=Object.fromEntries(Object.entries(e).filter(([r,s])=>!f1(s)));return Object.fromEntries(Object.entries(e).filter(([r,s])=>f1(s))),r=>{const s="__original_key__";return r.pipe(_n(c=>{const f=t(c),d=JSON.stringify(f),m={};m[s]=f;for(const[p,g]of Object.entries(n))m[p]=g.preMap(c);return[d,m]})).pipe($j(c=>{let f=0;for(const[p,g]of c)f+=g;if(f<=0)return[];const d={},m=c[0]?.[0]?.[s];d[s]=m;for(const[p,g]of Object.entries(n)){const y=c.map(([S,w])=>[S[p],w]);d[p]=g.reduce(y)}return[[d,1]]})).pipe(_n(([c,f])=>{const d=f[s],m={};Object.assign(m,d);for(const[p,g]of Object.entries(n))g.postMap?m[p]=g.postMap(f[p]):m[p]=f[p];return[c,m]}))}}function Bj(t=e=>e){return{preMap:e=>t(e),reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function Uj(t=e=>e){return{preMap:e=>t(e)==null?0:1,reduce:e=>{let n=0;for(const[r,s]of e)n+=r*s;return n}}}function Vj(t=e=>e){return{preMap:e=>({sum:t(e),count:0}),reduce:e=>{let n=0,r=0;for(const[s,a]of e)n+=s.sum*a,r+=a;return{sum:n,count:r}},postMap:e=>e.sum/e.count}}function qj(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s<r)&&(r=s);return r}}}function Hj(t){const e=t??(n=>n);return{preMap:n=>e(n),reduce:n=>{let r;for(const[s,a]of n)(!r||s&&s>r)&&(r=s);return r}}}const Kj={sum:Bj,count:Uj,avg:Vj,min:qj,max:Hj};class Gj extends sv{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return this.#e(e),e}}function Qj(t){return e=>{const n=new Qr(e.graph,new Gr),r=new Gj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class Zj extends sv{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}inner(e){return e.filter(this.#e)}}function oi(t){return e=>{const n=new Qr(e.graph,new Gr),r=new Zj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class Yj extends zo{#e;constructor(e,n,r,s){super(e,n,r),this.#e=s}run(){for(const e of this.inputMessages())this.#e(e),this.output.sendData(e)}}function Jj(t){return e=>{const n=new Qr(e.graph,new Gr),r=new Yj(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}class Wj extends zo{run(){const e=this.inputMessages();if(e.length===0)return;const n=new Qt;for(const s of e)n.extend(s);const r=n.consolidate();r.getInner().length>0&&this.output.sendData(r)}}function Xj(){return t=>{const e=new Qr(t.graph,new Gr),n=new Wj(t.graph.getNextOperatorId(),t.connectReader(),e.writer);return t.graph.addOperator(n),e}}class e4 extends zj{#e=new ai;#t=new ai;#n;constructor(e,n,r,s,a="inner"){super(e,n,r,s),this.#n=a}run(){const e=ai.fromMultiSets(this.inputAMessages()),n=ai.fromMultiSets(this.inputBMessages());if(e.size===0&&n.size===0)return;const r=new Qt;this.#n!=="anti"&&this.emitInnerResults(e,n,r),(this.#n==="left"||this.#n==="full"||this.#n==="anti")&&this.emitLeftOuterResults(e,n,r),(this.#n==="right"||this.#n==="full")&&this.emitRightOuterResults(e,n,r),this.#e.append(e),this.#t.append(n),r.getInner().length>0&&this.output.sendData(r)}emitInnerResults(e,n,r){e.size>0&&r.extend(e.join(this.#t)),n.size>0&&r.extend(this.#e.join(n)),e.size>0&&n.size>0&&r.extend(e.join(n))}emitLeftOuterResults(e,n,r){if(e.size>0)for(const[s,a]of e.entriesIterators()){const l=this.#t.getConsolidatedMultiplicity(s),c=n.getConsolidatedMultiplicity(s);if(l+c===0)for(const[d,m]of a)m!==0&&r.add([s,[d,null]],m)}if(n.size>0)for(const s of n.getPresenceKeys()){const a=this.#t.getConsolidatedMultiplicity(s),l=n.getConsolidatedMultiplicity(s);if(l===0)continue;const c=a+l;if(a===0==(c===0))continue;const f=a===0;for(const[d,m]of this.#e.getIterator(s))m!==0&&r.add([s,[d,null]],f?-m:+m)}}emitRightOuterResults(e,n,r){if(n.size>0)for(const[s,a]of n.entriesIterators()){const l=this.#e.getConsolidatedMultiplicity(s),c=e.getConsolidatedMultiplicity(s);if(l+c===0)for(const[d,m]of a)m!==0&&r.add([s,[null,d]],m)}if(e.size>0)for(const s of e.getPresenceKeys()){const a=this.#e.getConsolidatedMultiplicity(s),l=e.getConsolidatedMultiplicity(s);if(l===0)continue;const c=a+l;if(a===0==(c===0))continue;const f=a===0;for(const[d,m]of this.#t.getIterator(s))m!==0&&r.add([s,[null,d]],f?-m:+m)}}}function t4(t,e="inner"){return n=>{if(n.graph!==t.graph)throw new Error("Cannot join streams from different graphs");const r=new Qr(n.graph,new Gr),s=new e4(n.graph.getNextOperatorId(),n.connectReader(),t.connectReader(),r.writer,e);return n.graph.addOperator(s),r}}class n4 extends zo{#e;#t;constructor(e,n,r,s=a=>a){super(e,n,r),this.#e=s,this.#t=new Map}run(){const e=new Map;for(const r of this.inputMessages())for(const[s,a]of r.getInner()){const l=xn(this.#e(s)),f=(e.get(l)?.[0]??this.#t.get(l)??0)+a;e.set(l,[f,s])}const n=[];for(const[r,[s,a]]of e.entries()){const l=this.#t.get(r)??0;s===0?this.#t.delete(r):this.#t.set(r,s),l<=0&&s>0?n.push([[xn(this.#e(a)),a[1]],1]):l>0&&s<=0&&n.push([[xn(this.#e(a)),a[1]],-1])}n.length>0&&this.output.sendData(new Qt(n))}}function r4(t=e=>e){return e=>{const n=new Qr(e.graph,new Gr),r=new n4(e.graph.getNextOperatorId(),e.connectReader(),n.writer,t);return e.graph.addOperator(r),n}}const s4="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function lo(t,e,n){const r=n[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let l=0;for(;(t[l]||r)===e[l];)l++;if(l>0)return e.slice(0,l)+lo(t.slice(l),e.slice(l),n)}const s=t?n.indexOf(t[0]):0,a=e!=null?n.indexOf(e[0]):n.length;if(a-s>1){const l=Math.round(.5*(s+a));return n[l]}else return e&&e.length>1?e.slice(0,1):n[s]+lo(t.slice(1),null,n)}function Ik(t){if(t.length!==Nk(t[0]))throw new Error("invalid integer part of order key: "+t)}function Nk(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function Yl(t){const e=Nk(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function h1(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const n=Yl(t);if(t.slice(n.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function p1(t,e){Ik(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])+1;l===e.length?r[a]=e[0]:(r[a]=e[l],s=!1)}if(s){if(n==="Z")return"a"+e[0];if(n==="z")return null;const a=String.fromCharCode(n.charCodeAt(0)+1);return a>"a"?r.push(e[0]):r.pop(),a+r.join("")}else return n+r.join("")}function i4(t,e){Ik(t);const[n,...r]=t.split("");let s=!0;for(let a=r.length-1;s&&a>=0;a--){const l=e.indexOf(r[a])-1;l===-1?r[a]=e.slice(-1):(r[a]=e[l],s=!1)}if(s){if(n==="a")return"Z"+e.slice(-1);if(n==="A")return null;const a=String.fromCharCode(n.charCodeAt(0)-1);return a<"Z"?r.push(e.slice(-1)):r.pop(),a+r.join("")}else return n+r.join("")}function a4(t,e,n=s4){if(t!=null&&h1(t,n),e!=null&&h1(e,n),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+n[0];const f=Yl(e),d=e.slice(f.length);if(f==="A"+n[0].repeat(26))return f+lo("",d,n);if(f<e)return f;const m=i4(f,n);if(m==null)throw new Error("cannot decrement any more");return m}if(e==null){const f=Yl(t),d=t.slice(f.length),m=p1(f,n);return m??f+lo(d,null,n)}const r=Yl(t),s=t.slice(r.length),a=Yl(e),l=e.slice(a.length);if(r===a)return r+lo(s,l,n);const c=p1(r,n);if(c==null)throw new Error("cannot increment any more");return c<e?c:r+lo(s,null,n)}class m1{#e=[];#t;#n;#r;constructor(e,n,r){this.#n=e,this.#r=e+n,this.#t=r}get size(){const e=this.#n,n=this.#r-this.#n,r=this.#e.length-e;return Math.max(0,Math.min(n,r))}move({offset:e,limit:n}){const r=this.#n,s=this.#r-this.#n,a=[this.#n,this.#r===1/0?this.#n+this.size:this.#r];this.#n=e??r,this.#r=this.#n+(n??s);const l=[this.#n,this.#r===1/0?Math.max(this.#n+this.size,a[1]):this.#r],{onlyInA:c,onlyInB:f}=lj(a,l),d=[];f.forEach(p=>{const g=this.#e[p];g&&d.push(g)});const m=[];return c.forEach(p=>{const g=this.#e[p];g&&m.push(g)}),{moveIns:d,moveOuts:m,changes:c.length+f.length>0}}insert(e){const n={moveIn:null,moveOut:null},r=this.#s(e),s=r===0?null:v1(this.#e[r-1]),a=r===this.#e.length?null:v1(this.#e[r]),l=a4(s,a),c=g1(e,l);if(this.#e.splice(r,0,c),r<this.#r){const f=Math.max(r,this.#n);f<this.#e.length&&(n.moveIn=this.#e[f],this.#r<this.#e.length&&(n.moveOut=this.#e[this.#r]))}return n}delete(e){const n={moveIn:null,moveOut:null},r=this.#s(e),[s]=this.#e.splice(r,1);if(r<this.#r){if(n.moveOut=s,r<this.#n){const l=this.#n-1;l<this.#e.length?n.moveOut=this.#e[l]:n.moveOut=null}const a=this.#r-1;a<this.#e.length&&(n.moveIn=this.#e[a])}return n}#s(e){return aj(this.#e,g1(e,""),(n,r)=>this.#t(y1(n),y1(r)))}}class o4 extends zo{#e=new Map;#t;constructor(e,n,r,s,a){super(e,n,r);const l=a.limit??1/0,c=a.offset??0;this.#t=this.createTopK(c,l,u4(s)),a.setSizeCallback?.(()=>this.#t.size),a.setWindowFn?.(this.moveTopK.bind(this))}createTopK(e,n,r){return new m1(e,n,r)}moveTopK({offset:e,limit:n}){if(!(this.#t instanceof m1))throw new Error("Cannot move B+-tree implementation of TopK with fractional index");const r=[],s=this.#t.move({offset:e,limit:n});s.moveIns.forEach(a=>this.handleMoveIn(a,r)),s.moveOuts.forEach(a=>this.handleMoveOut(a,r)),s.changes&&this.output.sendData(new Qt(r))}run(){const e=[];for(const n of this.inputMessages())for(const[r,s]of n.getInner()){const[a,l]=r;this.processElement(a,l,s,e)}e.length>0&&this.output.sendData(new Qt(e))}processElement(e,n,r,s){const{oldMultiplicity:a,newMultiplicity:l}=this.addKey(e,r);let c={moveIn:null,moveOut:null};a<=0&&l>0?c=this.#t.insert([e,n]):a>0&&l<=0&&(c=this.#t.delete([e,n])),this.handleMoveIn(c.moveIn,s),this.handleMoveOut(c.moveOut,s)}handleMoveIn(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],1])}}handleMoveOut(e,n){if(e){const[[r,s],a]=e;n.push([[r,[s,a]],-1])}}getMultiplicity(e){return this.#e.get(e)??0}addKey(e,n){const r=this.getMultiplicity(e),s=r+n;return s===0?this.#e.delete(e):this.#e.set(e,s),{oldMultiplicity:r,newMultiplicity:s}}}function l4(t,e){const n=e||{};return r=>{const s=new Qr(r.graph,new Gr),a=new o4(r.graph.getNextOperatorId(),r.connectReader(),s.writer,t,n);return r.graph.addOperator(a),s}}function g1(t,e){return[t,e]}function y1(t){return t[0]}function v1(t){return t[1]}function u4(t){return([e,n],[r,s])=>{const a=t(n,s);return a!==0?a:zd(e,r)}}function c4(t,e,n){const r=n?.limit??1/0,s=n?.offset??0,a=n?.setSizeCallback,l=n?.setWindowFn,c=n?.comparator??((f,d)=>f===d?0:f<d?-1:1);return f=>f.pipe(t((d,m)=>c(e(d),e(m)),{limit:r,offset:s,setSizeCallback:a,setWindowFn:l}),Xj())}function f4(t,e){return c4(l4,t,e)}class d4{constructor(e,n,r){this._root=Eg,this._size=0,this._maxNodeSize=r>=4?Math.min(r,256):32,this._compare=e,n&&this.setPairs(n)}get size(){return this._size}get length(){return this._size}get isEmpty(){return this._size===0}clear(){this._root=Eg,this._size=0}get(e,n){return this._root.get(e,n,this)}set(e,n,r){this._root.isShared&&(this._root=this._root.clone());const s=this._root.set(e,n,r,this);return s===!0||s===!1?s:(this._root=new iv([this._root,s]),!0)}has(e){return this.forRange(e,e,!0,void 0)!==0}delete(e){return this.editRange(e,e,!0,p4)!==0}get maxNodeSize(){return this._maxNodeSize}minKey(){return this._root.minKey()}maxKey(){return this._root.maxKey()}keysArray(){const e=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,(n,r)=>{e.push(n)}),e}nextHigherPair(e,n){return n=n||[],e===void 0?this._root.minPair(n):this._root.getPairOrNextHigher(e,this._compare,!1,n)}nextHigherKey(e){const n=this.nextHigherPair(e,b1);return n&&n[0]}nextLowerPair(e,n){return n=n||[],e===void 0?this._root.maxPair(n):this._root.getPairOrNextLower(e,this._compare,!1,n)}nextLowerKey(e){const n=this.nextLowerPair(e,b1);return n&&n[0]}setPairs(e,n){let r=0;for(const s of e)this.set(s[0],s[1],n)&&r++;return r}forRange(e,n,r,s,a){const l=this._root.forRange(e,n,r,!1,this,a||0,s);return typeof l=="number"?l:l.break}editRange(e,n,r,s,a){let l=this._root;l.isShared&&(this._root=l=l.clone());try{const c=l.forRange(e,n,r,!0,this,a||0,s);return typeof c=="number"?c:c.break}finally{let c;for(;l.keys.length<=1&&!l.isLeaf;)c||=l.isShared,this._root=l=l.keys.length===0?Eg:l.children[0];c&&(l.isShared=!0)}}}class Du{get isLeaf(){return this.children===void 0}constructor(e=[],n){this.keys=e,this.values=n||pn,this.isShared=void 0}maxKey(){return this.keys[this.keys.length-1]}indexOf(e,n,r){const s=this.keys;let a=0,l=s.length,c=l>>1;for(;a<l;){const f=r(s[c],e);if(f<0)a=c+1;else if(f>0)l=c;else{if(f===0)return c;if(e===e)return s.length;throw new Error("BTree: NaN was used as a key")}c=a+l>>1}return c^n}minKey(){return this.keys[0]}minPair(e){if(this.keys.length!==0)return e[0]=this.keys[0],e[1]=this.values[0],e}maxPair(e){if(this.keys.length===0)return;const n=this.keys.length-1;return e[0]=this.keys[n],e[1]=this.values[n],e}clone(){const e=this.values;return new Du(this.keys.slice(0),e===pn?e:e.slice(0))}get(e,n,r){const s=this.indexOf(e,-1,r._compare);return s<0?n:this.values[s]}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a-1:r?a:a-1;if(l>=0)return s[0]=this.keys[l],s[1]=this.values[l],s}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,-1,n),l=a<0?~a:r?a:a+1,c=this.keys;if(l<c.length)return s[0]=c[l],s[1]=this.values[l],s}set(e,n,r,s){let a=this.indexOf(e,-1,s._compare);if(a<0){if(a=~a,s._size++,this.keys.length<s._maxNodeSize)return this.insertInLeaf(a,e,n,s);{const l=this.splitOffRightSide();let c=this;return a>this.keys.length&&(a-=this.keys.length,c=l),c.insertInLeaf(a,e,n,s),l}}else return r!==!1&&(n!==void 0&&this.reifyValues(),this.keys[a]=e,this.values[a]=n),!1}reifyValues(){return this.values===pn?this.values=this.values.slice(0,this.keys.length):this.values}insertInLeaf(e,n,r,s){if(this.keys.splice(e,0,n),this.values===pn){for(;pn.length<s._maxNodeSize;)pn.push(void 0);if(r===void 0)return!0;this.values=pn.slice(0,this.keys.length-1)}return this.values.splice(e,0,r),!0}takeFromRight(e){let n=this.values;e.values===pn?n!==pn&&n.push(void 0):(n=this.reifyValues(),n.push(e.values.shift())),this.keys.push(e.keys.shift())}takeFromLeft(e){let n=this.values;e.values===pn?n!==pn&&n.unshift(void 0):(n=this.reifyValues(),n.unshift(e.values.pop())),this.keys.unshift(e.keys.pop())}splitOffRightSide(){const e=this.keys.length>>1,n=this.keys.splice(e),r=this.values===pn?pn:this.values.splice(e);return new Du(n,r)}forRange(e,n,r,s,a,l,c){const f=a._compare;let d,m;if(n===e){if(!r||(m=(d=this.indexOf(e,-1,f))+1,d<0))return l}else d=this.indexOf(e,0,f),m=this.indexOf(n,-1,f),m<0?m=~m:r===!0&&m++;const p=this.keys,g=this.values;if(c!==void 0)for(let y=d;y<m;y++){const S=p[y],w=c(S,g[y],l++);if(w!==void 0){if(s===!0){if(S!==p[y]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");w.delete?(this.keys.splice(y,1),this.values!==pn&&this.values.splice(y,1),a._size--,y--,m--):w.hasOwnProperty("value")&&(g[y]=w.value)}if(w.break!==void 0)return w}}else l+=m-d;return l}mergeSibling(e,n){if(this.keys.push.apply(this.keys,e.keys),this.values===pn){if(e.values===pn)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,e.reifyValues())}}class iv extends Du{constructor(e,n){if(!n){n=[];for(let r=0;r<e.length;r++)n[r]=e[r].maxKey()}super(n),this.children=e}minKey(){return this.children[0].minKey()}minPair(e){return this.children[0].minPair(e)}maxPair(e){return this.children[this.children.length-1].maxPair(e)}get(e,n,r){const s=this.indexOf(e,0,r._compare),a=this.children;return s<a.length?a[s].get(e,n,r):void 0}getPairOrNextLower(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children;if(a>=l.length)return this.maxPair(s);const c=l[a].getPairOrNextLower(e,n,r,s);return c===void 0&&a>0?l[a-1].maxPair(s):c}getPairOrNextHigher(e,n,r,s){const a=this.indexOf(e,0,n),l=this.children,c=l.length;if(a>=c)return;const f=l[a].getPairOrNextHigher(e,n,r,s);return f===void 0&&a<c-1?l[a+1].minPair(s):f}set(e,n,r,s){const a=this.children,l=s._maxNodeSize,c=s._compare;let f=Math.min(this.indexOf(e,0,c),a.length-1),d=a[f];if(d.isShared&&(a[f]=d=d.clone()),d.keys.length>=l){let p;f>0&&(p=a[f-1]).keys.length<l&&c(d.keys[0],e)<0?(p.isShared&&(a[f-1]=p=p.clone()),p.takeFromRight(d),this.keys[f-1]=p.maxKey()):(p=a[f+1])!==void 0&&p.keys.length<l&&c(d.maxKey(),e)<0&&(p.isShared&&(a[f+1]=p=p.clone()),p.takeFromLeft(d),this.keys[f]=a[f].maxKey())}const m=d.set(e,n,r,s);if(m===!1)return!1;if(this.keys[f]=d.maxKey(),m===!0)return!0;if(this.keys.length<l)return this.insert(f+1,m),!0;{const p=this.splitOffRightSide();let g=this;return c(m.maxKey(),this.maxKey())>0&&(g=p,f-=this.keys.length),g.insert(f+1,m),p}}insert(e,n){this.children.splice(e,0,n),this.keys.splice(e,0,n.maxKey())}splitOffRightSide(){const e=this.children.length>>1;return new iv(this.children.splice(e),this.keys.splice(e))}takeFromRight(e){this.keys.push(e.keys.shift()),this.children.push(e.children.shift())}takeFromLeft(e){this.keys.unshift(e.keys.pop()),this.children.unshift(e.children.pop())}forRange(e,n,r,s,a,l,c){const f=a._compare,d=this.keys,m=this.children;let p=this.indexOf(e,0,f),g=p;const y=Math.min(n===e?p:this.indexOf(n,0,f),d.length-1);if(s){if(g<=y)try{for(;g<=y;g++){m[g].isShared&&(m[g]=m[g].clone());const S=m[g].forRange(e,n,r,s,a,l,c);if(d[g]=m[g].maxKey(),typeof S!="number")return S;l=S}}finally{const S=a._maxNodeSize>>1;for(p>0&&p--,g=y;g>=p;g--)m[g].keys.length<=S&&(m[g].keys.length!==0?this.tryMerge(g,a._maxNodeSize):(d.splice(g,1),m.splice(g,1)));m.length!==0&&m[0].keys.length===0&&m4(!1,"emptiness bug")}}else for(;g<=y;g++){const S=m[g].forRange(e,n,r,s,a,l,c);if(typeof S!="number")return S;l=S}return l}tryMerge(e,n){const r=this.children;return e>=0&&e+1<r.length&&r[e].keys.length+r[e+1].keys.length<=n?(r[e].isShared&&(r[e]=r[e].clone()),r[e].mergeSibling(r[e+1],n),r.splice(e+1,1),this.keys.splice(e+1,1),this.keys[e]=r[e].maxKey(),!0):!1}mergeSibling(e,n){const r=this.keys.length;this.keys.push.apply(this.keys,e.keys);const s=e.children;if(this.children.push.apply(this.children,s),e.isShared&&!this.isShared)for(const a of s)a.isShared=!0;this.tryMerge(r-1,n)}}const pn=[],h4={delete:!0},p4=()=>h4,Eg=(function(){const t=new Du;return t.isShared=!0,t})(),b1=[];function m4(t,...e){throw e.unshift("B+ tree"),new Error(e.join(" "))}function g4(){const t=new Map;function e(n){const r=n.join(".");if(t.has(r))return t.get(r);const s=new Proxy({},{get(a,l,c){if(l==="__refProxy")return!0;if(l==="__path")return n;if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,c);const f=[...n,String(l)];return e(f)},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?!0:Reflect.has(a,l)},ownKeys(a){return Reflect.ownKeys(a)},getOwnPropertyDescriptor(a,l){return l==="__refProxy"||l==="__path"||l==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(a,l)}});return t.set(r,s),s}return e([])}function Za(t){const e=new Map;let n=0;function r(a){const l=a.join(".");if(e.has(l))return e.get(l);const c=new Proxy({},{get(f,d,m){if(d==="__refProxy")return!0;if(d==="__path")return a;if(d==="__type")return;if(typeof d=="symbol")return Reflect.get(f,d,m);const p=[...a,String(d)];return r(p)},has(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?!0:Reflect.has(f,d)},ownKeys(f){const d=++n,m=`__SPREAD_SENTINEL__${a.join(".")}__${d}`;return Object.prototype.hasOwnProperty.call(f,m)||Object.defineProperty(f,m,{enumerable:!0,configurable:!0,value:!0}),Reflect.ownKeys(f)},getOwnPropertyDescriptor(f,d){return d==="__refProxy"||d==="__path"||d==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(f,d)}});return e.set(l,c),c}return new Proxy({},{get(a,l,c){if(l==="__refProxy")return!0;if(l==="__path")return[];if(l==="__type")return;if(typeof l=="symbol")return Reflect.get(a,l,c);const f=String(l);if(t.includes(f))return r([f])},has(a,l){return l==="__refProxy"||l==="__path"||l==="__type"||typeof l=="string"&&t.includes(l)?!0:Reflect.has(a,l)},ownKeys(a){return[...t,"__refProxy","__path","__type"]},getOwnPropertyDescriptor(a,l){if(l==="__refProxy"||l==="__path"||l==="__type")return{enumerable:!1,configurable:!0};if(typeof l=="string"&&t.includes(l))return{enumerable:!0,configurable:!0}}})}function en(t){return y4(t)?new kn(t.__path):t&&typeof t=="object"&&"type"in t&&(t.type==="func"||t.type==="ref"||t.type==="val"||t.type==="agg")?t:new Pn(t)}function y4(t){return t&&typeof t=="object"&&t.__refProxy===!0}function My(t,e){return new Cr("eq",[en(t),en(e)])}function S1(t,e){return new Cr("gt",[en(t),en(e)])}function v4(t,e){return new Cr("gte",[en(t),en(e)])}function Oy(t,e){return new Cr("lt",[en(t),en(e)])}function Iy(t,e,...n){const r=[t,e,...n];return new Cr("and",r.map(s=>en(s)))}function b4(t,e,...n){const r=[t,e,...n];return new Cr("or",r.map(s=>en(s)))}function S4(t,e){return new Cr("in",[en(t),en(e)])}class w4{constructor(e,n,r,s){this.lookupCount=0,this.totalLookupTime=0,this.lastUpdated=new Date,this.id=e,this.expression=n,this.compareOptions=nv,this.name=r,this.initialize(s)}supports(e){return this.supportedOperations.has(e)}matchesField(e){return this.expression.type==="ref"&&this.expression.path.length===e.length&&this.expression.path.every((n,r)=>n===e[r])}matchesCompareOptions(e){const n={...this.compareOptions,direction:void 0},r={...e,direction:void 0};return Ir(n,r)}matchesDirection(e){return this.compareOptions.direction===e}getStats(){return{entryCount:this.keyCount,lookupCount:this.lookupCount,averageLookupTime:this.lookupCount>0?this.totalLookupTime/this.lookupCount:0,lastUpdated:this.lastUpdated}}evaluateIndexExpression(e){return ev(this.expression)(e)}trackLookup(e){const n=performance.now()-e;this.lookupCount++,this.totalLookupTime+=n}updateTimestamp(){this.lastUpdated=new Date}}class Ny extends w4{constructor(e,n,r,s){super(e,n,r,s),this.supportedOperations=new Set(["eq","gt","gte","lt","lte","in"]),this.valueMap=new Map,this.indexedKeys=new Set,this.compareFn=Ry,this.compareFn=s?.compareFn??Ry,s?.compareOptions&&(this.compareOptions=s.compareOptions),this.orderedEntries=new d4(this.compareFn)}initialize(e){}add(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){throw new Error(`Failed to evaluate index expression for key ${e}: ${a}`)}const s=bs(r);if(this.valueMap.has(s))this.valueMap.get(s).add(e);else{const a=new Set([e]);this.valueMap.set(s,a),this.orderedEntries.set(s,void 0)}this.indexedKeys.add(e),this.updateTimestamp()}remove(e,n){let r;try{r=this.evaluateIndexExpression(n)}catch(a){console.warn(`Failed to evaluate index expression for key ${e} during removal:`,a);return}const s=bs(r);if(this.valueMap.has(s)){const a=this.valueMap.get(s);a.delete(e),a.size===0&&(this.valueMap.delete(s),this.orderedEntries.delete(s))}this.indexedKeys.delete(e),this.updateTimestamp()}update(e,n,r){this.remove(e,n),this.add(e,r)}build(e){this.clear();for(const[n,r]of e)this.add(n,r)}clear(){this.orderedEntries.clear(),this.valueMap.clear(),this.indexedKeys.clear(),this.updateTimestamp()}lookup(e,n){const r=performance.now();let s;switch(e){case"eq":s=this.equalityLookup(n);break;case"gt":s=this.rangeQuery({from:n,fromInclusive:!1});break;case"gte":s=this.rangeQuery({from:n,fromInclusive:!0});break;case"lt":s=this.rangeQuery({to:n,toInclusive:!1});break;case"lte":s=this.rangeQuery({to:n,toInclusive:!0});break;case"in":s=this.inArrayLookup(n);break;default:throw new Error(`Operation ${e} not supported by BTreeIndex`)}return this.trackLookup(r),s}get keyCount(){return this.indexedKeys.size}equalityLookup(e){const n=bs(e);return new Set(this.valueMap.get(n)??[])}rangeQuery(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e,l=new Set,c=bs(n),f=bs(r),d=c??this.orderedEntries.minKey(),m=f??this.orderedEntries.maxKey();return this.orderedEntries.forRange(d,m,a,(p,g)=>{if(!s&&this.compareFn(p,n)===0)return;const y=this.valueMap.get(p);y&&y.forEach(S=>l.add(S))}),l}rangeQueryReversed(e={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:a=!0}=e;return this.rangeQuery({from:r??this.orderedEntries.maxKey(),to:n??this.orderedEntries.minKey(),fromInclusive:a,toInclusive:s})}takeInternal(e,n,r,s,a=!1){const l=new Set,c=[];let f,d=bs(r);for(;(f=n(d))!==void 0&&c.length<e;){d=f[0];const m=this.valueMap.get(d);if(m&&m.size>0){const p=Array.from(m).sort(zd);a&&p.reverse();for(const g of p){if(c.length>=e)break;!l.has(g)&&(s?.(g)??!0)&&(c.push(g),l.add(g))}}}return c}take(e,n,r){const s=a=>this.orderedEntries.nextHigherPair(a);return this.takeInternal(e,s,n,r)}takeReversed(e,n,r){const s=a=>this.orderedEntries.nextLowerPair(a);return this.takeInternal(e,s,n,r,!0)}inArrayLookup(e){const n=new Set;for(const r of e){const s=bs(r),a=this.valueMap.get(s);a&&a.forEach(l=>n.add(l))}return n}get indexedKeysSet(){return this.indexedKeys}get orderedEntriesArray(){return this.orderedEntries.keysArray().map(e=>[e,this.valueMap.get(e)??new Set])}get orderedEntriesArrayReversed(){return this.takeReversed(this.orderedEntries.size).map(e=>[e,this.valueMap.get(e)??new Set])}get valueMapData(){return this.valueMap}}function Dk(t){return t.config.autoIndex==="eager"}function gh(t,e,n,r,s){if(!Dk(n))return;const a=r??{...nv,...n.compareOptions};if(!Array.from(n.indexes.values()).find(c=>c.matchesField(e)&&c.matchesCompareOptions(a)))try{n.createIndex(c=>{let f=c;for(const d of e)f=f[d];return f},{name:`auto:${e.join(".")}`,indexType:Ny,options:s?{compareFn:s,compareOptions:a}:{}})}catch(c){console.warn(`${n.id?`[${n.id}] `:""}Failed to create auto-index for field path "${e.join(".")}":`,c)}}function x4(t,e){if(!Dk(e))return;const n=_4(t);for(const{fieldName:r,fieldPath:s}of n)gh(r,s,e)}function _4(t){const e=[];function n(r){if(r.type!=="func")return;const s=r;if(s.name==="and"){for(const d of s.args)n(d);return}if(!["eq","gt","gte","lt","lte","in"].includes(s.name)||s.args.length<1||s.args[0].type!=="ref")return;const c=s.args[0].path;if(c.length===0)return;const f=c.join("_");e.push({fieldName:f,fieldPath:c})}return n(t),e}const{sum:C4,count:E4,avg:k4,min:R4,max:A4}=Kj;function T4(t,e){const n=new Map,r=[...t];if(!e)return{selectToGroupByIndex:n,groupByExpressions:r};for(const[s,a]of Object.entries(e)){if(a.type==="agg")continue;const l=r.findIndex(c=>Ld(a,c));if(l===-1)throw new IL(s);n.set(s,l)}return{selectToGroupByIndex:n,groupByExpressions:r}}function w1(t,e,n,r,s){if(e.length===0){const d={};if(r){for(const[p,g]of Object.entries(r))if(g.type==="agg"){const y=g;d[p]=x1(y)}}const m=()=>({__singleGroup:!0});if(t=t.pipe(d1(m,d)),t=t.pipe(_n(([,p])=>{const y={...p.__select_results||{}};if(r)for(const[S,w]of Object.entries(r))w.type==="agg"&&(y[S]=p[S]);return["single_group",{...p,__select_results:y}]})),n&&n.length>0)for(const p of n){const g=X_(p),y=jd(g,r||{}),S=Fn(y);t=t.pipe(oi(([,w])=>{const E={result:w.__select_results};return yo(S(E))}))}if(s&&s.length>0)for(const p of s)t=t.pipe(oi(([,g])=>{const y={result:g.__select_results};return yo(p(y))}));return t}const a=T4(e,r),l=e.map(d=>Fn(d)),c=([,d])=>{const m={...d};delete m.__select_results;const p={};for(let g=0;g<e.length;g++){const y=l[g],S=y(m);p[`__key_${g}`]=S}return p},f={};if(r){for(const[d,m]of Object.entries(r))if(m.type==="agg"){const p=m;f[d]=x1(p)}}if(t=t.pipe(d1(c,f)),t=t.pipe(_n(([,d])=>{const m=d.__select_results||{},p={};if(r)for(const[y,S]of Object.entries(r))if(S.type!=="agg"){const w=a.selectToGroupByIndex.get(y);w!==void 0?p[y]=d[`__key_${w}`]:p[y]=m[y]}else p[y]=d[y];else for(let y=0;y<e.length;y++)p[`__key_${y}`]=d[`__key_${y}`];let g;if(e.length===1)g=d.__key_0;else{const y=[];for(let S=0;S<e.length;S++)y.push(d[`__key_${S}`]);g=JSON.stringify(y)}return[g,{...d,__select_results:p}]})),n&&n.length>0)for(const d of n){const m=X_(d),p=jd(m,r||{}),g=Fn(p);t=t.pipe(oi(([,y])=>{const S={result:y.__select_results};return g(S)}))}if(s&&s.length>0)for(const d of s)t=t.pipe(oi(([,m])=>{const p={result:m.__select_results};return yo(d(p))}));return t}function Ld(t,e){if(!t||!e||t.type!==e.type)return!1;switch(t.type){case"ref":return!t.path||!e.path||t.path.length!==e.path.length?!1:t.path.every((n,r)=>n===e.path[r]);case"val":return t.value===e.value;case"func":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>Ld(n,e.args[r]));case"agg":return t.name===e.name&&t.args?.length===e.args?.length&&(t.args||[]).every((n,r)=>Ld(n,e.args[r]));default:return!1}}function x1(t){const e=Fn(t.args[0]),n=([,a])=>{const l=e(a);return typeof l=="number"?l:l!=null?Number(l):0},r=([,a])=>{const l=e(a);return typeof l=="number"||l instanceof Date?l:l!=null?Number(l):0},s=([,a])=>e(a);switch(t.name.toLowerCase()){case"sum":return C4(n);case"count":return E4(s);case"avg":return k4(n);case"min":return R4(r);case"max":return A4(r);default:throw new NL(t.name)}}function jd(t,e,n="result"){switch(t.type){case"agg":{const r=t;for(const[s,a]of Object.entries(e))if(a.type==="agg"&&M4(r,a))return new kn([n,s]);throw new DL(r.name)}case"func":{const r=t,s=r.args.map(a=>jd(a,e));return new Cr(r.name,s)}case"ref":return t;case"val":return t;default:throw new zL(t.type)}}function M4(t,e){return t.name===e.name&&t.args.length===e.args.length&&t.args.every((n,r)=>Ld(n,e.args[r]))}function O4(t,e,n,r,s,a,l,c,f){const d=n.map(S=>{const w=jd(S.expression,r,"__select_results");return{compiledExpression:Fn(w),compareOptions:Dy(S,s)}}),m=S=>{const w=S;return n.length>1?d.map(E=>E.compiledExpression(w)):n.length===1?d[0].compiledExpression(w):null},p=(S,w)=>{if(n.length>1){const E=S,_=w;for(let k=0;k<n.length;k++){const R=d[k],L=Nd(R.compareOptions)(E[k],_[k]);if(L!==0)return L}return E.length-_.length}if(n.length===1){const E=d[0];return Nd(E.compareOptions)(S,w)}return Ry(S,w)};let g,y;if(c){let S,w,E,_=t.from.alias;const k=n[0],R=k.expression;if(R.type==="ref"){const O=Iu(t,R,s);if(O){w=O.collection;const L=O.path[0],A=Dy(k,w);L&&gh(L,O.path,w,A,p),E=Fn(new kn(O.path),!0),S=Gu(w,O.path,A),S?.supports("gt")||(S=void 0),_=R.path.length>1?String(R.path[0]):t.from.alias}}if(E){const L=n.every(j=>j.expression.type==="ref")?n.map(j=>{const I=j.expression,F=Iu(t,I,s);return Fn(F?new kn(F.path):j.expression,!0)}):void 0;y={alias:_,offset:f??0,limit:c,comparator:(j,I)=>{if(n.length===1){const F=j&&E(j),G=I&&E(I);return p(F,G)}if(L){const F=G=>G&&L.map(J=>J(G));return p(F(j),F(I))}return 0},valueExtractorForRawRow:j=>{if(n.length===1)return E(j);if(L)return L.map(I=>I(j))},firstColumnValueExtractor:E,index:S,orderBy:n};const P=w?.id??s.id;a[P]=y,S&&(g=j=>{a[P].dataNeeded=()=>{const I=j();return Math.max(0,y.limit-I)}})}}return e.pipe(f4(m,{limit:c,offset:f,comparator:p,setSizeCallback:g,setWindowFn:S=>{l(w=>{S(w),y&&(y.offset=w.offset??y.offset,y.limit=w.limit??y.limit)})}}))}function Dy(t,e){return t.compareOptions.stringSort!==void 0?t.compareOptions:{...e.compareOptions,direction:t.compareOptions.direction,nulls:t.compareOptions.nulls}}function I4(t,e={}){const n=r=>{const s=[];for(const[a,l]of t.entries())(r?.(l)??!0)&&s.push({type:"insert",key:a,value:l});return s};if(e.limit!==void 0&&!e.orderBy)throw new Error("limit cannot be used without orderBy");if(e.orderBy){const r=e.where?hu(e.where):void 0,s=D4(t,e.orderBy,e.limit,r,e.optimizedOnly);if(s===void 0)return;const a=[];for(const l of s){const c=t.get(l);c!==void 0&&a.push({type:"insert",key:l,value:c})}return a}if(!e.where)return n();try{const r=e.where,s=XL(r,t);if(s.canOptimize){const a=[];for(const l of s.matchingKeys){const c=t.get(l);c!==void 0&&a.push({type:"insert",key:l,value:c})}return a}else{if(e.optimizedOnly)return;const a=hu(r);return n(a)}}catch(r){console.warn(`${t.id?`[${t.id}] `:""}Error processing where clause, falling back to full scan:`,r);const s=hu(e.where);return e.optimizedOnly?void 0:n(s)}}function hu(t){const e=ev(t);return n=>{try{const r=e(n);return yo(r)}catch{return!1}}}function N4(t,e){const n=hu(e.whereExpression);return r=>{const s=[];for(const a of r)if(a.type==="insert")n(a.value)&&s.push(a);else if(a.type==="update"){const l=n(a.value),c=a.previousValue?n(a.previousValue):!1;l&&c?s.push(a):l&&!c?s.push({...a,type:"insert"}):!l&&c&&s.push({...a,type:"delete",value:a.previousValue})}else n(a.value)&&s.push(a);(s.length>0||r.length===0)&&t(s)}}function D4(t,e,n,r,s){if(e.length===1){const f=e[0],d=f.expression;if(d.type==="ref"){const p=d.path,g=Dy(f,t);gh(p[0],p,t,g);const y=Gu(t,p,g);if(y&&y.supports("gt")){const S=w=>{const E=t.get(w);return E===void 0?!1:r?.(E)??!0};return y.take(n??y.keyCount,void 0,S)}}}if(s)return;const a=[];for(const[f,d]of t.entries())(r?.(d)??!0)&&a.push({key:f,value:d});const l=(f,d)=>{for(const m of e){const p=Nd(m.compareOptions),g=_1(f.value,m.expression),y=_1(d.value,m.expression),S=p(g,y);if(S!==0)return S}return 0};a.sort(l);const c=a.map(f=>f.key);return n!==void 0?c.slice(0,n):c}function _1(t,e){if(e.type==="ref"){const n=e;let r=t;for(const s of n.path)r=r?.[s];return r}else return e.type==="val"?e.value:ev(e)(t)}class C1{constructor(e){this.map=new Map,this.sortedKeys=[],this.comparator=e}indexOf(e,n){let r=0,s=this.sortedKeys.length;if(!this.comparator){for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],c=zd(e,l);if(c<0)s=a;else if(c>0)r=a+1;else return a}return r}for(;r<s;){const a=Math.floor((r+s)/2),l=this.sortedKeys[a],c=this.map.get(l),f=this.comparator(n,c);if(f<0)s=a;else if(f>0)r=a+1;else{const d=zd(e,l);if(d<0)s=a;else if(d>0)r=a+1;else return a}}return r}set(e,n){if(this.map.has(e)){const s=this.map.get(e),a=this.indexOf(e,s);this.sortedKeys.splice(a,1)}const r=this.indexOf(e,n);return this.sortedKeys.splice(r,0,e),this.map.set(e,n),this}get(e){return this.map.get(e)}delete(e){if(this.map.has(e)){const n=this.map.get(e),r=this.indexOf(e,n);return this.sortedKeys.splice(r,1),this.map.delete(e)}return!1}has(e){return this.map.has(e)}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}*[Symbol.iterator](){for(const e of this.sortedKeys)yield[e,this.map.get(e)]}entries(){return this[Symbol.iterator]()}keys(){return this.sortedKeys[Symbol.iterator]()}values(){return(function*(){for(const e of this.sortedKeys)yield this.map.get(e)}).call(this)}forEach(e){for(const n of this.sortedKeys)e(this.map.get(n),n,this.map)}}class z4{constructor(e){this.pendingSyncedTransactions=[],this.syncedMetadata=new Map,this.optimisticUpserts=new Map,this.optimisticDeletes=new Set,this.size=0,this.syncedKeys=new Set,this.preSyncVisibleState=new Map,this.recentlySyncedKeys=new Set,this.hasReceivedFirstCommit=!1,this.isCommittingSyncTransactions=!1,this.commitPendingTransactions=()=>{let n=!1;for(const l of this.transactions.values())if(l.state==="persisting"){n=!0;break}const{committedSyncedTransactions:r,uncommittedSyncedTransactions:s,hasTruncateSync:a}=this.pendingSyncedTransactions.reduce((l,c)=>(c.committed?(l.committedSyncedTransactions.push(c),c.truncate===!0&&(l.hasTruncateSync=!0)):l.uncommittedSyncedTransactions.push(c),l),{committedSyncedTransactions:[],uncommittedSyncedTransactions:[],hasTruncateSync:!1});if(!n||a){this.isCommittingSyncTransactions=!0;const l=a?r.find(g=>g.truncate)?.optimisticSnapshot:null,c=new Set;for(const g of r)for(const y of g.operations)c.add(y.key);let f=this.preSyncVisibleState;if(f.size===0){f=new Map;for(const g of c){const y=this.get(g);y!==void 0&&f.set(g,y)}}const d=[],m=this.config.sync.rowUpdateMode||"partial";for(const g of r){if(g.truncate){const y=new Set([...this.syncedData.keys(),...l?.upserts.keys()||[]]);for(const S of y){if(l?.deletes.has(S))continue;const w=l?.upserts.get(S)||this.syncedData.get(S);w!==void 0&&d.push({type:"delete",key:S,value:w})}this.syncedData.clear(),this.syncedMetadata.clear(),this.syncedKeys.clear();for(const S of c)f.delete(S);this._events.emit("truncate",{type:"truncate",collection:this.collection})}for(const y of g.operations){const S=y.key;switch(this.syncedKeys.add(S),y.type){case"insert":this.syncedMetadata.set(S,y.metadata);break;case"update":this.syncedMetadata.set(S,Object.assign({},this.syncedMetadata.get(S),y.metadata));break;case"delete":this.syncedMetadata.delete(S);break}switch(y.type){case"insert":this.syncedData.set(S,y.value);break;case"update":{if(m==="partial"){const w=Object.assign({},this.syncedData.get(S),y.value);this.syncedData.set(S,w)}else this.syncedData.set(S,y.value);break}case"delete":this.syncedData.delete(S);break}}}if(a){const g=new Set;for(const w of r)for(const E of w.operations)(E.type==="insert"||E.type==="update")&&g.add(E.key);const y=new Map(l.upserts),S=new Set(l.deletes);for(const[w,E]of y)if(!S.has(w))if(g.has(w)){let _=!1;for(let k=d.length-1;k>=0;k--){const R=d[k];if(R.key===w&&R.type==="insert"){R.value=E,_=!0;break}}_||d.push({type:"insert",key:w,value:E})}else d.push({type:"insert",key:w,value:E});if(d.length>0&&S.size>0){const w=[];for(const E of d)E.type==="insert"&&S.has(E.key)||w.push(E);d.length=0,d.push(...w)}this.lifecycle.status!=="ready"&&this.lifecycle.markReady()}if(this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.isCommittingSyncTransactions=!1,a&&l){for(const[g,y]of l.upserts)this.optimisticUpserts.set(g,y);for(const g of l.deletes)this.optimisticDeletes.add(g)}for(const g of this.transactions.values())if(!["completed","failed"].includes(g.state)){for(const y of g.mutations)if(this.isThisCollection(y.collection)&&y.optimistic)switch(y.type){case"insert":case"update":this.optimisticUpserts.set(y.key,y.modified),this.optimisticDeletes.delete(y.key);break;case"delete":this.optimisticUpserts.delete(y.key),this.optimisticDeletes.add(y.key);break}}const p=new Map;for(const g of this.transactions.values())if(g.state==="completed")for(const y of g.mutations)y.optimistic&&this.isThisCollection(y.collection)&&c.has(y.key)&&p.set(y.key,{type:y.type,value:y.modified});for(const g of c){const y=f.get(g),S=this.get(g),w=p.get(g);let E=!1;w&&(w.type==="delete"&&y!==void 0&&S===void 0&&Ir(w.value,y)||S!==void 0&&Ir(w.value,S))&&(E=!0),E||(y===void 0&&S!==void 0?d.push({type:"insert",key:g,value:S}):y!==void 0&&S===void 0?d.push({type:"delete",key:g,value:y}):y!==void 0&&S!==void 0&&!Ir(y,S)&&d.push({type:"update",key:g,value:S,previousValue:y}))}this.size=this.calculateSize(),d.length>0&&this.indexes.updateIndexes(d),this.changes.emitEvents(d,!0),this.pendingSyncedTransactions=s,this.preSyncVisibleState.clear(),Promise.resolve().then(()=>{this.recentlySyncedKeys.clear()}),this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0)}},this.config=e,this.transactions=new C1((n,r)=>n.compareCreatedAt(r)),this.syncedData=new C1(e.compare)}setDeps(e){this.collection=e.collection,this.lifecycle=e.lifecycle,this.changes=e.changes,this.indexes=e.indexes,this._events=e.events}get(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;if(!n.has(e))return r.has(e)?r.get(e):s.get(e)}has(e){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;return n.has(e)?!1:r.has(e)?!0:s.has(e)}*keys(){const{syncedData:e,optimisticDeletes:n,optimisticUpserts:r}=this;for(const s of e.keys())n.has(s)||(yield s);for(const s of r.keys())!e.has(s)&&!n.has(s)&&(yield s)}*values(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield n)}}*entries(){for(const e of this.keys()){const n=this.get(e);n!==void 0&&(yield[e,n])}}*[Symbol.iterator](){for(const[e,n]of this.entries())yield[e,n]}forEach(e){let n=0;for(const[r,s]of this.entries())e(s,r,n++)}map(e){const n=[];let r=0;for(const[s,a]of this.entries())n.push(e(a,s,r++));return n}isThisCollection(e){return e===this.collection}recomputeOptimisticState(e=!1){if(this.isCommittingSyncTransactions&&!e)return;const n=new Map(this.optimisticUpserts),r=new Set(this.optimisticDeletes);this.optimisticUpserts.clear(),this.optimisticDeletes.clear();const s=[];for(const c of this.transactions.values())["completed","failed"].includes(c.state)||s.push(c);for(const c of s)for(const f of c.mutations)if(this.isThisCollection(f.collection)&&f.optimistic)switch(f.type){case"insert":case"update":this.optimisticUpserts.set(f.key,f.modified),this.optimisticDeletes.delete(f.key);break;case"delete":this.optimisticUpserts.delete(f.key),this.optimisticDeletes.add(f.key);break}this.size=this.calculateSize();const a=[];this.collectOptimisticChanges(n,r,a);const l=a.filter(c=>!!(!this.recentlySyncedKeys.has(c.key)||e));if(this.pendingSyncedTransactions.length>0&&!e){const c=new Set;for(const d of this.pendingSyncedTransactions)for(const m of d.operations)c.add(m.key);const f=l.filter(d=>!(d.type==="delete"&&c.has(d.key)&&!s.some(p=>p.mutations.some(g=>this.isThisCollection(g.collection)&&g.key===d.key))));f.length>0&&this.indexes.updateIndexes(f),this.changes.emitEvents(f,e)}else l.length>0&&this.indexes.updateIndexes(l),this.changes.emitEvents(l,e)}calculateSize(){const e=this.syncedData.size,n=Array.from(this.optimisticDeletes).filter(s=>this.syncedData.has(s)&&!this.optimisticUpserts.has(s)).length,r=Array.from(this.optimisticUpserts.keys()).filter(s=>!this.syncedData.has(s)).length;return e-n+r}collectOptimisticChanges(e,n,r){const s=new Set([...e.keys(),...this.optimisticUpserts.keys(),...n,...this.optimisticDeletes]);for(const a of s){const l=this.get(a),c=this.getPreviousValue(a,e,n);c!==void 0&&l===void 0?r.push({type:"delete",key:a,value:c}):c===void 0&&l!==void 0?r.push({type:"insert",key:a,value:l}):c!==void 0&&l!==void 0&&c!==l&&r.push({type:"update",key:a,value:l,previousValue:c})}}getPreviousValue(e,n,r){if(!r.has(e))return n.has(e)?n.get(e):this.syncedData.get(e)}scheduleTransactionCleanup(e){if(e.state==="completed"){this.transactions.delete(e.id);return}e.isPersisted.promise.then(()=>{this.transactions.delete(e.id)}).catch(()=>{})}capturePreSyncVisibleState(){if(this.pendingSyncedTransactions.length===0)return;const e=new Set;for(const n of this.pendingSyncedTransactions)for(const r of n.operations)e.add(r.key);for(const n of e)this.recentlySyncedKeys.add(n);for(const n of e)if(!this.preSyncVisibleState.has(n)){const r=this.get(n);r!==void 0&&this.preSyncVisibleState.set(n,r)}}onTransactionStateChange(){this.changes.shouldBatchEvents=this.pendingSyncedTransactions.length>0,this.capturePreSyncVisibleState(),this.recomputeOptimisticState(!1)}cleanup(){this.syncedData.clear(),this.syncedMetadata.clear(),this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.size=0,this.pendingSyncedTransactions=[],this.syncedKeys.clear(),this.hasReceivedFirstCommit=!1}}class zk{constructor(){this.listeners=new Map}on(e,n){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n),()=>{this.listeners.get(e)?.delete(n)}}once(e,n){const r=this.on(e,s=>{n(s),r()});return r}off(e,n){this.listeners.get(e)?.delete(n)}waitFor(e,n){return new Promise((r,s)=>{let a;const l=this.on(e,c=>{a&&(clearTimeout(a),a=void 0),r(c),l()});n&&(a=setTimeout(()=>{a=void 0,l(),s(new Error(`Timeout waiting for event ${String(e)}`))},n))})}emitInner(e,n){this.listeners.get(e)?.forEach(r=>{try{r(n)}catch(s){queueMicrotask(()=>{throw s})}})}clearListeners(){this.listeners.clear()}}function L4(t,e){if(e.length===0||t.length===0)return;if(t.length===1){const{expression:r,compareOptions:s}=t[0];return(s.direction==="asc"?S1:Oy)(r,new Pn(e[0]))}const n=[];for(let r=0;r<t.length&&r<e.length;r++){const s=t[r],a=e[r],l=[];for(let d=0;d<r;d++){const m=t[d],p=e[d];l.push(My(m.expression,new Pn(p)))}const f=(s.compareOptions.direction==="asc"?S1:Oy)(s.expression,new Pn(a));if(l.length===0)n.push(f);else{const d=[...l,f];n.push(d.reduce((m,p)=>Iy(m,p)))}}return n.length===1?n[0]:n.reduce((r,s)=>b4(r,s))}class j4 extends zk{constructor(e,n,r){super(),this.collection=e,this.callback=n,this.options=r,this.loadedInitialState=!1,this.skipFiltering=!1,this.snapshotSent=!1,this.loadedSubsets=[],this.sentKeys=new Set,this.limitedSnapshotRowCount=0,this._status="ready",this.pendingLoadSubsetPromises=new Set,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches=new Set,r.onUnsubscribe&&this.on("unsubscribed",a=>r.onUnsubscribe(a)),r.whereExpression&&x4(r.whereExpression,this.collection);const s=a=>{n(a),this.trackSentKeys(a)};this.callback=s,this.filteredCallback=r.whereExpression?N4(this.callback,r):this.callback,this.truncateCleanup=this.collection.on("truncate",()=>{this.handleTruncate()})}get status(){return this._status}handleTruncate(){const e=[...this.loadedSubsets],n=this.collection._sync.syncLoadSubsetFn!==null;if(e.length===0||!n){this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[];return}this.isBufferingForTruncate=!0,this.truncateBuffer=[],this.pendingTruncateRefetches.clear(),this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[],queueMicrotask(()=>{if(this.isBufferingForTruncate){for(const r of e){const s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),this.trackLoadSubsetPromise(s),s instanceof Promise&&(this.pendingTruncateRefetches.add(s),s.catch(()=>{}).finally(()=>{this.pendingTruncateRefetches.delete(s),this.checkTruncateRefetchComplete()}))}this.pendingTruncateRefetches.size===0&&this.flushTruncateBuffer()}})}checkTruncateRefetchComplete(){this.pendingTruncateRefetches.size===0&&this.isBufferingForTruncate&&this.flushTruncateBuffer()}flushTruncateBuffer(){this.isBufferingForTruncate=!1;const e=this.truncateBuffer.flat();e.length>0&&this.filteredCallback(e),this.truncateBuffer=[]}setOrderByIndex(e){this.orderByIndex=e}setStatus(e){if(this._status===e)return;const n=this._status;this._status=e,this.emitInner("status:change",{type:"status:change",subscription:this,previousStatus:n,status:e});const r=`status:${e}`;this.emitInner(r,{type:r,subscription:this,previousStatus:n,status:e})}trackLoadSubsetPromise(e){e instanceof Promise&&(this.pendingLoadSubsetPromises.add(e),this.setStatus("loadingSubset"),e.finally(()=>{this.pendingLoadSubsetPromises.delete(e),this.pendingLoadSubsetPromises.size===0&&this.setStatus("ready")}))}hasLoadedInitialState(){return this.loadedInitialState}hasSentAtLeastOneSnapshot(){return this.snapshotSent}emitEvents(e){const n=this.filterAndFlipChanges(e);this.isBufferingForTruncate?n.length>0&&this.truncateBuffer.push(n):this.filteredCallback(n)}requestSnapshot(e){if(this.loadedInitialState)return!1;const n={where:this.options.whereExpression,optimizedOnly:e?.optimizedOnly??!1};if(e){if("where"in e){const f=e.where;if(n.where){const d=n.where,m=Iy(d,f);n.where=m}else n.where=f}}else this.loadedInitialState=!0;const r={where:n.where,subscription:this,orderBy:e?.orderBy,limit:e?.limit},s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),(e?.trackLoadSubsetPromise??!0)&&this.trackLoadSubsetPromise(s);const l=this.collection.currentStateAsChanges(n);if(l===void 0)return!1;const c=l.filter(f=>!this.sentKeys.has(f.key));for(const f of c)this.sentKeys.add(f.key);return this.snapshotSent=!0,this.callback(c),!0}requestLimitedSnapshot({orderBy:e,limit:n,minValues:r,offset:s}){if(!n)throw new Error("limit is required");if(!this.orderByIndex)throw new Error("Ordered snapshot was requested but no index was found. You have to call setOrderByIndex before requesting an ordered snapshot.");const l=r?.[0],c=this.orderByIndex,f=this.options.whereExpression,d=f?hu(f):void 0,m=A=>{if(this.sentKeys.has(A))return!1;const z=this.collection.get(A);return z===void 0?!1:d?.(z)??!0};let p=l;const g=[];let y=[];if(l!==void 0){const{expression:A}=e[0],z=this.collection.currentStateAsChanges({where:My(A,new Pn(l))});if(z){const P=z.map(I=>I.key).filter(I=>!this.sentKeys.has(I)&&m(I));y.push(...P);const j=c.take(n-y.length,l,m);y.push(...j)}else y=c.take(n,l,m)}else y=c.take(n,l,m);const S=()=>Math.max(n-g.length,0),w=()=>y.length===0,E=e[0].expression,_=E.type==="ref"?Fn(new kn(E.path),!0):null;for(;S()>0&&!w();){const A=new Set;for(const z of y){const P=this.collection.get(z);g.push({type:"insert",key:z,value:P}),p=_?_(P):P,A.add(z)}y=c.take(S(),p,m)}const k=this.limitedSnapshotRowCount;for(const A of g)this.sentKeys.add(A.key);this.callback(g),this.limitedSnapshotRowCount+=g.length,g.length>0&&(this.lastSentKey=g[g.length-1].key);let R;if(r!==void 0&&r.length>0){const A=L4(e,r);if(A){const{expression:z}=e[0],P=r[0];let j;if(P instanceof Date){const I=new Date(P.getTime()+1);j=Iy(v4(z,new Pn(P)),Oy(z,new Pn(I)))}else j=My(z,new Pn(P));R={whereFrom:A,whereCurrent:j,lastKey:this.lastSentKey}}}const O={where:f,limit:n,orderBy:e,cursor:R,offset:s??k,subscription:this},L=this.collection._sync.loadSubset(O);this.loadedSubsets.push(O),this.trackLoadSubsetPromise(L)}filterAndFlipChanges(e){if(this.loadedInitialState||this.skipFiltering)return e;const n=this.isBufferingForTruncate,r=[];for(const s of e){let a=s;if(this.sentKeys.has(s.key)){if(s.type==="insert")continue;s.type==="delete"&&this.sentKeys.delete(s.key)}else{if(s.type==="update")a={...s,type:"insert",previousValue:void 0};else if(s.type==="delete"&&!n)continue;this.sentKeys.add(s.key)}r.push(a)}return r}trackSentKeys(e){if(!(this.loadedInitialState||this.skipFiltering))for(const n of e)n.type==="delete"?this.sentKeys.delete(n.key):this.sentKeys.add(n.key)}markAllStateAsSeen(){this.skipFiltering=!0}unsubscribe(){this.truncateCleanup?.(),this.truncateCleanup=void 0,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches.clear();for(const e of this.loadedSubsets)this.collection._sync.unloadSubset(e);this.loadedSubsets=[],this.emitInner("unsubscribed",{type:"unsubscribed",subscription:this}),this.clearListeners()}}class P4{constructor(){this.activeSubscribersCount=0,this.changeSubscriptions=new Set,this.batchedEvents=[],this.shouldBatchEvents=!1}setDeps(e){this.lifecycle=e.lifecycle,this.sync=e.sync,this.events=e.events,this.collection=e.collection}emitEmptyReadyEvent(){for(const e of this.changeSubscriptions)e.emitEvents([])}emitEvents(e,n=!1){if(this.shouldBatchEvents&&!n){this.batchedEvents.push(...e);return}let r=e;if(n&&(this.batchedEvents.length>0&&(r=[...this.batchedEvents,...e]),this.batchedEvents=[],this.shouldBatchEvents=!1),r.length!==0)for(const s of this.changeSubscriptions)s.emitEvents(r)}subscribeChanges(e,n={}){this.addSubscriber();const r=new j4(this.collection,e,{...n,onUnsubscribe:()=>{this.removeSubscriber(),this.changeSubscriptions.delete(r)}});return n.includeInitialState?r.requestSnapshot({trackLoadSubsetPromise:!1}):n.includeInitialState===!1&&r.markAllStateAsSeen(),this.changeSubscriptions.add(r),r}addSubscriber(){const e=this.activeSubscribersCount;this.activeSubscribersCount++,this.lifecycle.cancelGCTimer(),(this.lifecycle.status==="cleaned-up"||this.lifecycle.status==="idle")&&this.sync.startSync(),this.events.emitSubscribersChange(this.activeSubscribersCount,e)}removeSubscriber(){const e=this.activeSubscribersCount;if(this.activeSubscribersCount--,this.activeSubscribersCount===0)this.lifecycle.startGCTimer();else if(this.activeSubscribersCount<0)throw new Kz;this.events.emitSubscribersChange(this.activeSubscribersCount,e)}cleanup(){this.batchedEvents=[],this.shouldBatchEvents=!1}}const F4=t=>setTimeout(()=>{t({didTimeout:!0,timeRemaining:()=>50})},0),$4=t=>{clearTimeout(t)},B4=typeof window<"u"&&"requestIdleCallback"in window?(t,e)=>window.requestIdleCallback(t,e):(t,e)=>F4(t),kg=typeof window<"u"&&"cancelIdleCallback"in window?t=>window.cancelIdleCallback(t):$4;class U4{constructor(e,n){this.status="idle",this.hasBeenReady=!1,this.hasReceivedFirstCommit=!1,this.onFirstReadyCallbacks=[],this.gcTimeoutId=null,this.idleCallbackId=null,this.config=e,this.id=n}setDeps(e){this.indexes=e.indexes,this.events=e.events,this.changes=e.changes,this.sync=e.sync,this.state=e.state}validateStatusTransition(e,n){if(e===n)return;if(!{idle:["loading","error","cleaned-up"],loading:["ready","error","cleaned-up"],ready:["cleaned-up","error"],error:["cleaned-up","idle"],"cleaned-up":["loading","error"]}[e].includes(n))throw new qz(e,n,this.id)}setStatus(e,n=!1){if(e==="ready"&&!n)throw new Ku(`You can't directly call "setStatus('ready'). You must use markReady instead.`);this.validateStatusTransition(this.status,e);const r=this.status;this.status=e,e==="ready"&&!this.indexes.isIndexesResolved&&this.indexes.resolveAllIndexes().catch(s=>{console.warn(`${this.config.id?`[${this.config.id}] `:""}Failed to resolve indexes:`,s)}),this.events.emitStatusChange(e,r)}validateCollectionUsable(e){switch(this.status){case"error":throw new Vz(e,this.id);case"cleaned-up":this.sync.startSync();break}}markReady(){if(this.validateStatusTransition(this.status,"ready"),this.status==="loading"){if(this.setStatus("ready",!0),!this.hasBeenReady){this.hasBeenReady=!0,this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0);const e=[...this.onFirstReadyCallbacks];this.onFirstReadyCallbacks=[],e.forEach(n=>n())}this.changes.changeSubscriptions.size>0&&this.changes.emitEmptyReadyEvent()}}startGCTimer(){this.gcTimeoutId&&clearTimeout(this.gcTimeoutId);const e=this.config.gcTime??3e5;e!==0&&(this.gcTimeoutId=setTimeout(()=>{this.changes.activeSubscribersCount===0&&this.scheduleIdleCleanup()},e))}cancelGCTimer(){this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.idleCallbackId!==null&&(kg(this.idleCallbackId),this.idleCallbackId=null)}scheduleIdleCleanup(){this.idleCallbackId!==null&&kg(this.idleCallbackId),this.idleCallbackId=B4(e=>{this.changes.activeSubscribersCount===0?this.performCleanup(e)&&(this.idleCallbackId=null):this.idleCallbackId=null},{timeout:1e3})}performCleanup(e){return!e||e.timeRemaining()>0||e.didTimeout?(this.sync.cleanup(),this.state.cleanup(),this.changes.cleanup(),this.indexes.cleanup(),this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.hasBeenReady=!1,this.onFirstReadyCallbacks=[],this.setStatus("cleaned-up"),this.events.cleanup(),!0):(this.scheduleIdleCleanup(),!1)}onFirstReady(e){if(this.hasBeenReady){e();return}this.onFirstReadyCallbacks.push(e)}cleanup(){this.idleCallbackId!==null&&(kg(this.idleCallbackId),this.idleCallbackId=null),this.performCleanup()}}const av=Symbol("liveQueryInternal");class V4{constructor(e,n){this.preloadPromise=null,this.syncCleanupFn=null,this.syncLoadSubsetFn=null,this.syncUnloadSubsetFn=null,this.pendingLoadSubsetPromises=new Set,this.config=e,this.id=n,this.syncMode=e.syncMode??"eager"}setDeps(e){this.collection=e.collection,this.state=e.state,this.lifecycle=e.lifecycle,this._events=e.events}startSync(){if(!(this.lifecycle.status!=="idle"&&this.lifecycle.status!=="cleaned-up")){this.lifecycle.setStatus("loading");try{const e=q4(this.config.sync.sync({collection:this.collection,begin:()=>{this.state.pendingSyncedTransactions.push({committed:!1,operations:[],deletedKeys:new Set})},write:n=>{const r=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!r)throw new r1;if(r.committed)throw new s1;let s;"key"in n?s=n.key:s=this.config.getKey(n.value);let a=n.type;if(n.type==="insert"){const c=this.state.syncedData.has(s),f=r.deletedKeys.has(s),d=r.truncate===!0;if(c&&!f&&!d){const m=this.state.syncedData.get(s);if(m!==void 0&&Ir(m,n.value))a="update";else{const g=this.config.utils[av];throw new Yz(s,this.id,{hasCustomGetKey:g?.hasCustomGetKey??!1,hasJoins:g?.hasJoins??!1})}}}const l={...n,type:a,key:s};r.operations.push(l),a==="delete"&&r.deletedKeys.add(s)},commit:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new cL;if(n.committed)throw new fL;n.committed=!0,this.state.commitPendingTransactions()},markReady:()=>{this.lifecycle.markReady()},truncate:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new r1;if(n.committed)throw new s1;n.operations=[],n.deletedKeys.clear(),n.truncate=!0,n.optimisticSnapshot={upserts:new Map(this.state.optimisticUpserts),deletes:new Set(this.state.optimisticDeletes)}}}));if(this.syncCleanupFn=e?.cleanup??null,this.syncLoadSubsetFn=e?.loadSubset??null,this.syncUnloadSubsetFn=e?.unloadSubset??null,this.syncMode==="on-demand"&&!this.syncLoadSubsetFn)throw new Hu(`Collection "${this.id}" is configured with syncMode "on-demand" but the sync function did not return a loadSubset handler. Either provide a loadSubset handler or use syncMode "eager".`)}catch(e){throw this.lifecycle.setStatus("error"),e}}}preload(){return this.preloadPromise?this.preloadPromise:(this.syncMode==="on-demand"&&console.warn(`${this.id?`[${this.id}] `:""}Calling .preload() on a collection with syncMode "on-demand" is a no-op. In on-demand mode, data is only loaded when queries request it. Instead, create a live query and call .preload() on that to load the specific data you need. See https://tanstack.com/blog/tanstack-db-0.5-query-driven-sync for more details.`),this.preloadPromise=new Promise((e,n)=>{if(this.lifecycle.status==="ready"){e();return}if(this.lifecycle.status==="error"){n(new Hz);return}if(this.lifecycle.onFirstReady(()=>{e()}),this.lifecycle.status==="idle"||this.lifecycle.status==="cleaned-up")try{this.startSync()}catch(r){n(r);return}}),this.preloadPromise)}get isLoadingSubset(){return this.pendingLoadSubsetPromises.size>0}trackLoadPromise(e){const n=!this.isLoadingSubset;this.pendingLoadSubsetPromises.add(e),n&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!0,previousIsLoadingSubset:!1,loadingSubsetTransition:"start"}),e.finally(()=>{const r=this.pendingLoadSubsetPromises.size===1&&this.pendingLoadSubsetPromises.has(e);this.pendingLoadSubsetPromises.delete(e),r&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!1,previousIsLoadingSubset:!0,loadingSubsetTransition:"end"})})}loadSubset(e){if(this.syncMode==="eager")return!0;if(this.syncLoadSubsetFn){const n=this.syncLoadSubsetFn(e);if(n instanceof Promise)return this.trackLoadPromise(n),n}return!0}unloadSubset(e){this.syncUnloadSubsetFn&&this.syncUnloadSubsetFn(e)}cleanup(){try{this.syncCleanupFn&&(this.syncCleanupFn(),this.syncCleanupFn=null)}catch(e){queueMicrotask(()=>{if(e instanceof Error){const n=new a1(this.id,e);throw n.cause=e,n.stack=e.stack,n}else throw new a1(this.id,e)})}this.preloadPromise=null}}function q4(t){if(typeof t=="function")return{cleanup:t};if(typeof t=="object")return t}function Lk(t){return typeof t=="function"&&t.prototype!==void 0&&t.prototype.constructor===t}async function H4(t){return Lk(t)?t:await t()}class K4{constructor(e,n,r,s,a,l){this.id=e,this.expression=n,this.name=r,this.resolver=s,this.options=a,this.collectionEntries=l,this.indexPromise=null,this.resolvedIndex=null,Lk(this.resolver)&&(this.resolvedIndex=new this.resolver(this.id,this.expression,this.name,this.options),this.collectionEntries&&this.resolvedIndex.build(this.collectionEntries))}async resolve(){return this.resolvedIndex?this.resolvedIndex:(this.indexPromise||(this.indexPromise=this.createIndex()),this.resolvedIndex=await this.indexPromise,this.resolvedIndex)}isResolved(){return this.resolvedIndex!==null}getResolved(){if(!this.resolvedIndex)throw new Error(`Index ${this.id} has not been resolved yet. Ensure collection is synced.`);return this.resolvedIndex}getId(){return this.id}getName(){return this.name}getExpression(){return this.expression}async createIndex(){const e=await H4(this.resolver);return new e(this.id,this.expression,this.name,this.options)}}class G4{constructor(e,n){this.indexId=e,this.lazyIndex=n}get index(){return this.lazyIndex.getResolved()}get isReady(){return this.lazyIndex.isResolved()}async whenReady(){return await this.lazyIndex.resolve()}get id(){return this.indexId}get name(){return this.isReady?this.index.name:this.lazyIndex.getName()}get expression(){return this.lazyIndex.getExpression()}supports(e){return this.index.supports(e)}getStats(){return this.index.getStats()}matchesField(e){const n=this.expression;return n.type==="ref"&&n.path.length===e.length&&n.path.every((r,s)=>r===e[s])}get keyCount(){return this.index.keyCount}get indexedKeysSet(){return this.index.indexedKeysSet}get orderedEntriesArray(){return this.index.orderedEntriesArray}get valueMapData(){return this.index.valueMapData}equalityLookup(e){return this.index.equalityLookup?.(e)??new Set}rangeQuery(e){return this.index.rangeQuery?.(e)??new Set}inArrayLookup(e){return this.index.inArrayLookup?.(e)??new Set}_getLazyWrapper(){return this.lazyIndex}}class Q4{constructor(){this.lazyIndexes=new Map,this.resolvedIndexes=new Map,this.isIndexesResolved=!1,this.indexCounter=0}setDeps(e){this.state=e.state,this.lifecycle=e.lifecycle}createIndex(e,n={}){this.lifecycle.validateCollectionUsable("createIndex");const r=++this.indexCounter,s=g4(),a=e(s),l=en(a),c=n.indexType??Ny,f=new K4(r,l,n.name,c,n.options,this.state.entries());if(this.lazyIndexes.set(r,f),c===Ny)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch(d){console.warn("Failed to resolve BTreeIndex:",d)}else if(typeof c=="function"&&c.prototype)try{const d=f.getResolved();this.resolvedIndexes.set(r,d)}catch{this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)})}else this.isIndexesResolved&&this.resolveSingleIndex(r,f).catch(d=>{console.warn("Failed to resolve single index:",d)});return new G4(r,f)}async resolveAllIndexes(){if(this.isIndexesResolved)return;const e=Array.from(this.lazyIndexes.entries()).map(async([n,r])=>{const s=await r.resolve();return s.build(this.state.entries()),this.resolvedIndexes.set(n,s),{indexId:n,resolvedIndex:s}});await Promise.all(e),this.isIndexesResolved=!0}async resolveSingleIndex(e,n){const r=await n.resolve();return r.build(this.state.entries()),this.resolvedIndexes.set(e,r),r}get indexes(){return this.resolvedIndexes}updateIndexes(e){for(const n of this.resolvedIndexes.values())for(const r of e)switch(r.type){case"insert":n.add(r.key,r.value);break;case"update":r.previousValue?n.update(r.key,r.previousValue,r.value):n.add(r.key,r.value);break;case"delete":n.remove(r.key,r.value);break}}cleanup(){this.lazyIndexes.clear(),this.resolvedIndexes.clear()}}var Z4={};const Y4=new Set(["find","findLast","findIndex","findLastIndex","filter","map","flatMap","forEach","some","every","reduce","reduceRight"]),J4=new Set(["pop","push","shift","unshift","splice","sort","reverse","fill","copyWithin"]),W4=new Set(["set","delete","clear","add"]),X4=new Set(["entries","keys","values","forEach"]);function ov(t){return t!==null&&typeof t=="object"&&!(t instanceof Date)&&!(t instanceof RegExp)&&!Dd(t)}function e3(t,e,n,r){if(Y4.has(t))return function(...s){const a=s[0];if(typeof a!="function")return e.apply(n.copy_,s);const l=(d,m)=>{if(ov(d)){const p={tracker:n,prop:String(m)},{proxy:g}=r(d,p);return g}return d},c=function(d,m,p){const g=l(d,m);return a.call(this,g,m,p)};if(t==="reduce"||t==="reduceRight"){const d=function(m,p,g,y){const S=l(p,g);return a.call(this,m,S,g,y)};return e.apply(n.copy_,[d,...s.slice(1)])}const f=e.apply(n.copy_,[c,...s.slice(1)]);if((t==="find"||t==="findLast")&&f&&typeof f=="object"){const d=n.copy_.indexOf(f);if(d!==-1)return l(f,d)}return t==="filter"&&Array.isArray(f)?f.map(d=>{const m=n.copy_.indexOf(d);return m!==-1?l(d,m):d}):f}}function t3(t,e){return function(){const n=t.copy_;let r=0;return{next(){if(r>=n.length)return{done:!0,value:void 0};const s=n[r];let a=s;if(ov(s)){const l={tracker:t,prop:String(r)},{proxy:c}=e(s,l);a=c}return r++,{done:!1,value:a}},[Symbol.iterator](){return this}}}}function E1(t,e,n){return function(...r){const s=t.apply(e.copy_,r);return n(e),s}}function n3(t,e,n,r,s,a,l){if(X4.has(t)||e===Symbol.iterator)return function(...f){const d=n.apply(s.copy_,f);if(t==="forEach"){const p=f[0];if(typeof p=="function"){const g=function(y,S,w){const E=p.call(this,y,S,w);return l(s),E};return n.apply(r,[g,...f.slice(1)])}}if(t==="entries"||t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator){const p=d,g=new Map;if(t==="values"&&r instanceof Map)for(const[S,w]of s.copy_.entries())g.set(w,S);const y=new Map;if(r instanceof Set)for(const S of s.copy_.values())y.set(S,S);return{next(){const S=p.next();if(!S.done&&S.value&&typeof S.value=="object"){if(t==="entries"&&Array.isArray(S.value)&&S.value.length===2){if(S.value[1]&&typeof S.value[1]=="object"){const w=S.value[0],E={tracker:s,prop:w,updateMap:k=>{s.copy_ instanceof Map&&s.copy_.set(w,k)}},{proxy:_}=a(S.value[1],E);S.value[1]=_}}else if(t==="values"||t===Symbol.iterator.toString()||e===Symbol.iterator)if(t==="values"&&r instanceof Map){const w=g.get(S.value);if(w!==void 0){const E={tracker:s,prop:w,updateMap:k=>{s.copy_ instanceof Map&&s.copy_.set(w,k)}},{proxy:_}=a(S.value,E);S.value=_}}else if(r instanceof Set){const w=S.value,E={tracker:s,prop:w,updateSet:k=>{s.copy_ instanceof Set&&(s.copy_.delete(w),s.copy_.add(k),y.set(w,k))}},{proxy:_}=a(S.value,E);S.value=_}else{const w=Symbol("iterator-value"),{proxy:E}=a(S.value,{tracker:s,prop:w});S.value=E}}return S},[Symbol.iterator](){return this}}}return d}}function rt(...t){const e=typeof window<"u"&&typeof localStorage<"u";e&&localStorage.getItem("DEBUG")==="true"?console.log("[proxy]",...t):!e&&typeof process<"u"&&Z4.DEBUG==="true"&&console.log("[proxy]",...t)}function ws(t,e=new WeakMap){if(t==null||typeof t!="object")return t;if(e.has(t))return e.get(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t.source,t.flags);if(Array.isArray(t)){const s=[];return e.set(t,s),t.forEach((a,l)=>{s[l]=ws(a,e)}),s}if(ArrayBuffer.isView(t)&&!(t instanceof DataView)){const s=Object.getPrototypeOf(t).constructor,a=new s(t.length);e.set(t,a);for(let l=0;l<t.length;l++)a[l]=t[l];return a}if(t instanceof Map){const s=new Map;return e.set(t,s),t.forEach((a,l)=>{s.set(l,ws(a,e))}),s}if(t instanceof Set){const s=new Set;return e.set(t,s),t.forEach(a=>{s.add(ws(a,e))}),s}if(Dd(t))return t;const n={};e.set(t,n);for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=ws(t[s],e));const r=Object.getOwnPropertySymbols(t);for(const s of r)n[s]=ws(t[s],e);return n}let k1=0;function r3(){return k1+=1,k1}function lv(t,e){const n=new Map;function r(p,g){if(rt("Object ID:",p.constructor.name),n.has(p))return n.get(p);{const y=lv(p,g);return n.set(p,y),y}}const s=new Map,a={copy_:ws(t),originalObject:ws(t),proxyCount:r3(),modified:!1,assigned_:{},parent:e,target:t};rt("createChangeProxy called for target",t,a.proxyCount);function l(p){p.modified||(p.modified=!0),p.parent&&(rt("propagating change to parent"),"updateMap"in p.parent?p.parent.updateMap(p.copy_):"updateSet"in p.parent?p.parent.updateSet(p.copy_):(p.parent.tracker.copy_[p.parent.prop]=p.copy_,p.parent.tracker.assigned_[p.parent.prop]=!0),l(p.parent.tracker))}function c(p){if(rt("checkIfReverted called with assigned keys:",Object.keys(p.assigned_)),Object.keys(p.assigned_).length===0&&Object.getOwnPropertySymbols(p.assigned_).length===0)return rt("No assigned properties, returning true"),!0;for(const y in p.assigned_)if(p.assigned_[y]===!0){const S=p.copy_[y],w=p.originalObject[y];if(rt(`Checking property ${String(y)}, current:`,S,"original:",w),!Ir(S,w))return rt(`Property ${String(y)} is different, returning false`),!1}else if(p.assigned_[y]===!1)return rt(`Property ${String(y)} was deleted, returning false`),!1;const g=Object.getOwnPropertySymbols(p.assigned_);for(const y of g)if(p.assigned_[y]===!0){const S=p.copy_[y],w=p.originalObject[y];if(!Ir(S,w))return rt("Symbol property is different, returning false"),!1}else if(p.assigned_[y]===!1)return rt("Symbol property was deleted, returning false"),!1;return rt("All properties match original values, returning true"),!0}function f(p,g){rt("checkParentStatus called for child prop:",g);const y=c(p);rt("Parent checkIfReverted returned:",y),y&&(rt("Parent is fully reverted, clearing tracking"),p.modified=!1,p.assigned_={},p.parent&&(rt("Continuing up the parent chain"),f(p.parent.tracker,p.parent.prop)))}function d(p){if(rt("createObjectProxy",p),s.has(p))return rt("proxyCache found match"),s.get(p);const g=new Proxy(p,{get(y,S){rt("get",y,S);const w=a.copy_[S]??a.originalObject[S],E=a.originalObject[S];if(rt("value (at top of proxy get)",w),Object.getOwnPropertyDescriptor(y,S)?.get)return w;if(typeof w=="function"){if(Array.isArray(y)){const k=S.toString();if(J4.has(k))return E1(w,a,l);const R=e3(k,w,a,r);if(R)return R;if(S===Symbol.iterator)return t3(a,r)}if(y instanceof Map||y instanceof Set){const k=S.toString();if(W4.has(k))return E1(w,a,l);const R=n3(k,S,w,y,a,r,l);if(R)return R}return w.bind(y)}if(ov(w)){const k={tracker:a,prop:String(S)},{proxy:R}=r(E,k);return s.set(w,R),R}return w},set(y,S,w){const E=a.copy_[S];if(rt(`set called for property ${String(S)}, current:`,E,"new:",w),Ir(E,w))rt("Value unchanged, not tracking");else{const _=a.originalObject[S],k=Ir(w,_);if(rt("value:",w,"original:",_,"isRevertToOriginal:",k),k){rt(`Reverting property ${String(S)} to original value`),delete a.assigned_[S.toString()],rt(`Updating copy with original value for ${String(S)}`),a.copy_[S]=ws(_),rt("Checking if all properties reverted");const R=c(a);rt("All reverted:",R),R?(rt("All properties reverted, clearing tracking"),a.modified=!1,a.assigned_={},e&&(rt("Updating parent for property:",e.prop),f(e.tracker,e.prop))):(rt("Some properties still changed, keeping modified flag"),a.modified=!0)}else rt(`Setting new value for property ${String(S)}`),a.copy_[S]=w,a.assigned_[S.toString()]=!0,rt("Marking object and ancestors as modified",a),l(a)}return!0},defineProperty(y,S,w){const E=Reflect.defineProperty(y,S,w);return E&&"value"in w&&(a.copy_[S]=ws(w.value),a.assigned_[S.toString()]=!0,l(a)),E},getOwnPropertyDescriptor(y,S){return Reflect.getOwnPropertyDescriptor(y,S)},preventExtensions(y){return Reflect.preventExtensions(y)},isExtensible(y){return Reflect.isExtensible(y)},deleteProperty(y,S){rt("deleteProperty",y,S);const w=typeof S=="symbol"?S.toString():S;if(w in y){const E=w in a.originalObject,_=Reflect.deleteProperty(y,S);return _&&(E?(a.assigned_[w]=!1,l(a)):(delete a.assigned_[w],Object.keys(a.assigned_).length===0&&Object.getOwnPropertySymbols(a.assigned_).length===0?a.modified=!1:a.modified=!0)),_}return!0}});return s.set(p,g),g}return{proxy:d(a.copy_),getChanges:()=>{if(rt("getChanges called, modified:",a.modified),rt(a),!a.modified)return rt("Object not modified, returning empty object"),{};if(typeof a.copy_!="object"||Array.isArray(a.copy_)||Object.keys(a.assigned_).length===0)return a.copy_;const p={};for(const g in a.copy_)a.assigned_[g]===!0&&g in a.copy_&&(p[g]=a.copy_[g]);return rt("Returning copy:",p),p}}}function s3(t){const e=t.map(n=>lv(n));return{proxies:e.map(n=>n.proxy),getChanges:()=>e.map(n=>n.getChanges())}}function i3(t,e){const{proxy:n,getChanges:r}=lv(t);return e(n),r()}function a3(t,e){const{proxies:n,getChanges:r}=s3(t);return e(n),r()}function o3(){let t,e,n=!0;return{promise:new Promise((s,a)=>{t=l=>{n=!1,s(l)},e=l=>{n=!1,a(l)}}),resolve:t,reject:e,isPending:()=>n}}function l3(t){return typeof t=="object"&&t!==null&&typeof t.hasPendingGraphRun=="function"}class u3{constructor(){this.contexts=new Map,this.clearListeners=new Set}getOrCreateContext(e){let n=this.contexts.get(e);return n||(n={queue:[],jobs:new Map,dependencies:new Map,completed:new Set},this.contexts.set(e,n)),n}schedule({contextId:e,jobId:n,dependencies:r,run:s}){if(typeof e>"u"){s();return}const a=this.getOrCreateContext(e);if(a.jobs.has(n)||a.queue.push(n),a.jobs.set(n,s),r){const l=new Set(r);l.delete(n),a.dependencies.set(n,l)}else a.dependencies.has(n)||a.dependencies.set(n,new Set);a.completed.delete(n)}flush(e){const n=this.contexts.get(e);if(!n)return;const{queue:r,jobs:s,dependencies:a,completed:l}=n;for(;r.length>0;){let c=!1;const f=r.length;for(let d=0;d<f;d++){const m=r.shift(),p=s.get(m);if(!p){a.delete(m),l.delete(m);continue}const g=a.get(m);let y=!g;if(g){y=!0;for(const S of g){if(S===m)continue;const w=l3(S)&&S.hasPendingGraphRun(e);if(s.has(S)&&!l.has(S)||!s.has(S)&&w){y=!1;break}}}y?(s.delete(m),a.delete(m),p(),l.add(m),c=!0):r.push(m)}if(!c)throw new Error(`Scheduler detected unresolved dependencies for context ${String(e)}.`)}this.contexts.delete(e)}flushAll(){for(const e of Array.from(this.contexts.keys()))this.flush(e)}clear(e){this.contexts.delete(e),this.clearListeners.forEach(n=>n(e))}onClear(e){return this.clearListeners.add(e),()=>this.clearListeners.delete(e)}hasPendingJobs(e){const n=this.contexts.get(e);return!!n&&n.jobs.size>0}clearJob(e,n){const r=this.contexts.get(e);r&&(r.jobs.delete(n),r.dependencies.delete(n),r.completed.delete(n),r.queue=r.queue.filter(s=>s!==n),r.jobs.size===0&&this.contexts.delete(e))}}const Pd=new u3,Fd=[];let zu=[],c3=0;function f3(t,e){switch(`${t.type}-${e.type}`){case"insert-update":return{...t,type:"insert",original:{},modified:e.modified,changes:{...t.changes,...e.changes},key:t.key,globalKey:t.globalKey,metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata},mutationId:e.mutationId,updatedAt:e.updatedAt};case"insert-delete":return null;case"update-delete":return e;case"update-update":return{...e,original:t.original,changes:{...t.changes,...e.changes},metadata:e.metadata??t.metadata,syncMetadata:{...t.syncMetadata,...e.syncMetadata}};case"delete-delete":case"insert-insert":return e;default:{const n=`${t.type}-${e.type}`;throw new Error(`Unhandled mutation combination: ${n}`)}}}function Rf(t){const e=new m3(t);return Fd.push(e),e}function od(){if(zu.length>0)return zu.slice(-1)[0]}function d3(t){Pd.clear(t.id),zu.push(t)}function h3(t){try{Pd.flush(t.id)}finally{zu=zu.filter(e=>e.id!==t.id)}}function p3(t){const e=Fd.findIndex(n=>n.id===t.id);e!==-1&&Fd.splice(e,1)}class m3{constructor(e){if(typeof e.mutationFn>"u")throw new aL;this.id=e.id??crypto.randomUUID(),this.mutationFn=e.mutationFn,this.state="pending",this.mutations=[],this.isPersisted=o3(),this.autoCommit=e.autoCommit??!0,this.createdAt=new Date,this.sequenceNumber=c3++,this.metadata=e.metadata??{}}setState(e){this.state=e,(e==="completed"||e==="failed")&&p3(this)}mutate(e){if(this.state!=="pending")throw new oL;d3(this);try{e()}finally{h3(this)}return this.autoCommit&&this.commit().catch(()=>{}),this}applyMutations(e){for(const n of e){const r=this.mutations.findIndex(s=>s.globalKey===n.globalKey);if(r>=0){const s=this.mutations[r],a=f3(s,n);a===null?this.mutations.splice(r,1):this.mutations[r]=a}else this.mutations.push(n)}}rollback(e){const n=e?.isSecondaryRollback??!1;if(this.state==="completed")throw new lL;if(this.setState("failed"),!n){const r=new Set;this.mutations.forEach(s=>r.add(s.globalKey));for(const s of Fd)s.state==="pending"&&s.mutations.some(a=>r.has(a.globalKey))&&s.rollback({isSecondaryRollback:!0})}return this.isPersisted.reject(this.error?.error),this.touchCollection(),this}touchCollection(){const e=new Set;for(const n of this.mutations)e.has(n.collection.id)||(n.collection._state.onTransactionStateChange(),n.collection._state.pendingSyncedTransactions.length>0&&n.collection._state.commitPendingTransactions(),e.add(n.collection.id))}async commit(){if(this.state!=="pending")throw new uL;if(this.setState("persisting"),this.mutations.length===0)return this.setState("completed"),this.isPersisted.resolve(this),this;try{await this.mutationFn({transaction:this}),this.setState("completed"),this.touchCollection(),this.isPersisted.resolve(this)}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.error={message:n.message,error:n},this.rollback(),n}return this}compareCreatedAt(e){const n=this.createdAt.getTime()-e.createdAt.getTime();return n!==0?n:this.sequenceNumber-e.sequenceNumber}}class g3{constructor(e,n){this.insert=(r,s)=>{this.lifecycle.validateCollectionUsable("insert");const a=this.state,l=od();if(!l&&!this.config.onInsert)throw new rL;const c=Array.isArray(r)?r:[r],f=[],d=new Set;if(c.forEach(m=>{const p=this.validateData(m,"insert"),g=this.config.getKey(p);if(this.state.has(g)||d.has(g))throw new Zz(g);d.add(g);const y=this.generateGlobalKey(g,m),S={mutationId:crypto.randomUUID(),original:{},modified:p,changes:Object.fromEntries(Object.keys(m).map(w=>[w,p[w]])),globalKey:y,key:g,metadata:s?.metadata,syncMetadata:this.config.sync.getSyncMetadata?.()||{},optimistic:s?.optimistic??!0,type:"insert",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(S)}),l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;{const m=Rf({mutationFn:async p=>await this.config.onInsert({transaction:p.transaction,collection:this.collection})});return m.applyMutations(f),m.commit().catch(()=>{}),a.transactions.set(m.id,m),a.scheduleTransactionCleanup(m),a.recomputeOptimisticState(!0),m}},this.delete=(r,s)=>{const a=this.state;this.lifecycle.validateCollectionUsable("delete");const l=od();if(!l&&!this.config.onDelete)throw new iL;if(Array.isArray(r)&&r.length===0)throw new tL;const c=Array.isArray(r)?r:[r],f=[];for(const m of c){if(!this.state.has(m))throw new nL(m);const p=this.generateGlobalKey(m,this.state.get(m)),g={mutationId:crypto.randomUUID(),original:this.state.get(m),modified:this.state.get(m),changes:this.state.get(m),globalKey:p,key:m,metadata:s?.metadata,syncMetadata:a.syncedMetadata.get(m)||{},optimistic:s?.optimistic??!0,type:"delete",createdAt:new Date,updatedAt:new Date,collection:this.collection};f.push(g)}if(l)return l.applyMutations(f),a.transactions.set(l.id,l),a.scheduleTransactionCleanup(l),a.recomputeOptimisticState(!0),l;const d=Rf({autoCommit:!0,mutationFn:async m=>this.config.onDelete({transaction:m.transaction,collection:this.collection})});return d.applyMutations(f),d.commit().catch(()=>{}),a.transactions.set(d.id,d),a.scheduleTransactionCleanup(d),a.recomputeOptimisticState(!0),d},this.id=n,this.config=e}setDeps(e){this.lifecycle=e.lifecycle,this.state=e.state,this.collection=e.collection}ensureStandardSchema(e){if(e&&"~standard"in e)return e;throw new Uz}validateData(e,n,r){if(!this.config.schema)return e;const s=this.ensureStandardSchema(this.config.schema);if(n==="update"&&r){const l=this.state.get(r);if(l&&e&&typeof e=="object"&&typeof l=="object"){const c=Object.assign({},l,e),f=s["~standard"].validate(c);if(f instanceof Promise)throw new n1;if("issues"in f&&f.issues){const g=f.issues.map(y=>({message:y.message,path:y.path?.map(S=>String(S))}));throw new t1(n,g)}const d=f.value,m=Object.keys(e);return Object.fromEntries(m.map(g=>[g,d[g]]))}}const a=s["~standard"].validate(e);if(a instanceof Promise)throw new n1;if("issues"in a&&a.issues){const l=a.issues.map(c=>({message:c.message,path:c.path?.map(f=>String(f))}));throw new t1(n,l)}return a.value}generateGlobalKey(e,n){if(typeof e!="string"&&typeof e!="number")throw typeof e>"u"?new Gz(n):new Qz(e,n);return`KEY::${this.id}/${e}`}update(e,n,r){if(typeof e>"u")throw new Jz;const s=this.state;this.lifecycle.validateCollectionUsable("update");const a=od();if(!a&&!this.config.onUpdate)throw new sL;const l=Array.isArray(e),c=l?e:[e];if(l&&c.length===0)throw new Wz;const f=typeof n=="function"?n:r,d=typeof n=="function"?{}:n,m=c.map(S=>{const w=this.state.get(S);if(!w)throw new Xz(S);return w});let p;l?p=a3(m,f):p=[i3(m[0],f)];const g=c.map((S,w)=>{const E=p[w];if(!E||Object.keys(E).length===0)return null;const _=m[w],k=this.validateData(E,"update",S),R=Object.assign({},_,k),O=this.config.getKey(_),L=this.config.getKey(R);if(O!==L)throw new eL(O,L);const A=this.generateGlobalKey(L,R);return{mutationId:crypto.randomUUID(),original:_,modified:R,changes:Object.fromEntries(Object.keys(E).map(z=>[z,R[z]])),globalKey:A,key:S,metadata:d.metadata,syncMetadata:s.syncedMetadata.get(S)||{},optimistic:d.optimistic??!0,type:"update",createdAt:new Date,updatedAt:new Date,collection:this.collection}}).filter(Boolean);if(g.length===0){const S=Rf({mutationFn:async()=>{}});return S.commit().catch(()=>{}),s.scheduleTransactionCleanup(S),S}if(a)return a.applyMutations(g),s.transactions.set(a.id,a),s.scheduleTransactionCleanup(a),s.recomputeOptimisticState(!0),a;const y=Rf({mutationFn:async S=>this.config.onUpdate({transaction:S.transaction,collection:this.collection})});return y.applyMutations(g),y.commit().catch(()=>{}),s.transactions.set(y.id,y),s.scheduleTransactionCleanup(y),s.recomputeOptimisticState(!0),y}}class y3 extends zk{constructor(){super()}setDeps(e){this.collection=e.collection}emit(e,n){this.emitInner(e,n)}emitStatusChange(e,n){this.emit("status:change",{type:"status:change",collection:this.collection,previousStatus:n,status:e});const r=`status:${e}`;this.emit(r,{type:r,collection:this.collection,previousStatus:n,status:e})}emitSubscribersChange(e,n){this.emit("subscribers:change",{type:"subscribers:change",collection:this.collection,previousSubscriberCount:n,subscriberCount:e})}cleanup(){this.clearListeners()}}function uv(t){const e=new cv(t);return t.utils?e.utils=t.utils:e.utils={},e}class cv{constructor(e){if(this.utils={},this.insert=(n,r)=>this._mutations.insert(n,r),this.delete=(n,r)=>this._mutations.delete(n,r),!e)throw new $z;if(!e.sync)throw new Bz;e.id?this.id=e.id:this.id=crypto.randomUUID(),this.config={...e,autoIndex:e.autoIndex??"eager"},this._changes=new P4,this._events=new y3,this._indexes=new Q4,this._lifecycle=new U4(e,this.id),this._mutations=new g3(e,this.id),this._state=new z4(e),this._sync=new V4(e,this.id),this.comparisonOpts=v3(e),this._changes.setDeps({collection:this,lifecycle:this._lifecycle,sync:this._sync,events:this._events}),this._events.setDeps({collection:this}),this._indexes.setDeps({state:this._state,lifecycle:this._lifecycle}),this._lifecycle.setDeps({changes:this._changes,events:this._events,indexes:this._indexes,state:this._state,sync:this._sync}),this._mutations.setDeps({collection:this,lifecycle:this._lifecycle,state:this._state}),this._state.setDeps({collection:this,lifecycle:this._lifecycle,changes:this._changes,indexes:this._indexes,events:this._events}),this._sync.setDeps({collection:this,state:this._state,lifecycle:this._lifecycle,events:this._events}),e.startSync===!0&&this._sync.startSync()}get status(){return this._lifecycle.status}get subscriberCount(){return this._changes.activeSubscribersCount}onFirstReady(e){return this._lifecycle.onFirstReady(e)}isReady(){return this._lifecycle.status==="ready"}get isLoadingSubset(){return this._sync.isLoadingSubset}startSyncImmediate(){this._sync.startSync()}preload(){return this._sync.preload()}get(e){return this._state.get(e)}has(e){return this._state.has(e)}get size(){return this._state.size}*keys(){yield*this._state.keys()}*values(){yield*this._state.values()}*entries(){yield*this._state.entries()}*[Symbol.iterator](){yield*this._state[Symbol.iterator]()}forEach(e){return this._state.forEach(e)}map(e){return this._state.map(e)}getKeyFromItem(e){return this.config.getKey(e)}createIndex(e,n={}){return this._indexes.createIndex(e,n)}get indexes(){return this._indexes.indexes}validateData(e,n,r){return this._mutations.validateData(e,n,r)}get compareOptions(){return{...this.comparisonOpts}}update(e,n,r){return this._mutations.update(e,n,r)}get state(){const e=new Map;for(const[n,r]of this.entries())e.set(n,r);return e}stateWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.state):this.preload().then(()=>this.state)}get toArray(){return Array.from(this.values())}toArrayWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.toArray):this.preload().then(()=>this.toArray)}currentStateAsChanges(e={}){return I4(this,e)}subscribeChanges(e,n={}){return this._changes.subscribeChanges(e,n)}on(e,n){return this._events.on(e,n)}once(e,n){return this._events.once(e,n)}off(e,n){this._events.off(e,n)}waitFor(e,n){return this._events.waitFor(e,n)}async cleanup(){return this._lifecycle.cleanup(),Promise.resolve()}}function v3(t){if(t.defaultStringCollation){const e=t.defaultStringCollation;return{stringSort:e.stringSort??"locale",locale:e.stringSort==="locale"?e.locale:void 0,localeOptions:e.stringSort==="locale"?e.localeOptions:void 0}}else return{stringSort:"locale"}}class Gt{constructor(e={}){this.query={},this.query={...e}}_createRefForSource(e,n){let r;try{r=Object.keys(e)}catch{const c=e===null?"null":"undefined";throw new Ef(n,c)}if(Array.isArray(e))throw new Ef(n,"array");if(r.length!==1)throw r.length===0?new Ef(n,"empty object"):r.every(c=>!isNaN(Number(c)))?new Ef(n,"string"):new dL(n);const s=r[0],a=e[s];let l;if(a instanceof cv)l=new Eo(a,s);else if(a instanceof Gt){const c=a._getQuery();if(!c.from)throw new hL(n);l=new wr(c,s)}else throw new pL(s);return[s,l]}from(e){const[,n]=this._createRefForSource(e,"from clause");return new Gt({...this.query,from:n})}join(e,n,r="left"){const[s,a]=this._createRefForSource(e,"join clause"),c=[...this._getCurrentAliases(),s],f=Za(c),d=n(f);let m,p;if(d.type==="func"&&d.name==="eq"&&d.args.length===2)m=d.args[0],p=d.args[1];else throw new mL;const g={from:a,type:r,left:m,right:p},y=this.query.join||[];return new Gt({...this.query,join:[...y,g]})}leftJoin(e,n){return this.join(e,n,"left")}rightJoin(e,n){return this.join(e,n,"right")}innerJoin(e,n){return this.join(e,n,"inner")}fullJoin(e,n){return this.join(e,n,"full")}where(e){const n=this._getCurrentAliases(),r=Za(n),s=e(r),a=this.query.where||[];return new Gt({...this.query,where:[...a,s]})}having(e){const n=this._getCurrentAliases(),r=Za(n),s=e(r),a=this.query.having||[];return new Gt({...this.query,having:[...a,s]})}select(e){const n=this._getCurrentAliases(),r=Za(n),s=e(r),a=jk(s);return new Gt({...this.query,select:a,fnSelect:void 0})}orderBy(e,n="asc"){const r=this._getCurrentAliases(),s=Za(r),a=e(s),l=typeof n=="string"?{direction:n,nulls:"first"}:{direction:n.direction??"asc",nulls:n.nulls??"first",stringSort:n.stringSort,locale:n.stringSort==="locale"?n.locale:void 0,localeOptions:n.stringSort==="locale"?n.localeOptions:void 0},c=m=>({expression:en(m),compareOptions:l}),f=Array.isArray(a)?a.map(m=>c(m)):[c(a)],d=this.query.orderBy||[];return new Gt({...this.query,orderBy:[...d,...f]})}groupBy(e){const n=this._getCurrentAliases(),r=Za(n),s=e(r),a=Array.isArray(s)?s.map(c=>en(c)):[en(s)],l=this.query.groupBy||[];return new Gt({...this.query,groupBy:[...l,...a]})}limit(e){return new Gt({...this.query,limit:e})}offset(e){return new Gt({...this.query,offset:e})}distinct(){return new Gt({...this.query,distinct:!0})}findOne(){return new Gt({...this.query,singleResult:!0})}_getCurrentAliases(){const e=[];if(this.query.from&&e.push(this.query.from.alias),this.query.join)for(const n of this.query.join)e.push(n.from.alias);return e}get fn(){const e=this;return{select(n){return new Gt({...e.query,select:void 0,fnSelect:n})},where(n){return new Gt({...e.query,fnWhere:[...e.query.fnWhere||[],n]})},having(n){return new Gt({...e.query,fnHaving:[...e.query.fnHaving||[],n]})}}}_getQuery(){if(!this.query.from)throw new gL;return this.query}}function b3(t){return t===void 0?en(null):t instanceof Rk||t instanceof Cr||t instanceof kn||t instanceof Pn?t:en(t)}function S3(t){return t!==null&&typeof t=="object"&&!Y0(t)&&!t.__refProxy}function jk(t){if(!S3(t))return b3(t);const e={};for(const[n,r]of Object.entries(t)){if(typeof n=="string"&&n.startsWith("__SPREAD_SENTINEL__")){e[n]=r;continue}e[n]=jk(r)}return e}function w3(t){const e=t(new Gt);return Pk(e)}function Pk(t){return t._getQuery()}function x3(t){const e=_3(t);let n=t,r,s=0;const a=10;for(;s<a&&!Ir(n,r);)r=n,n=zy(n),s++;return{optimizedQuery:Fk(n),sourceWhereClauses:e}}function _3(t){const e=new Map;if(!t.where||t.where.length===0)return e;const r=jy(t.where).map(a=>$k(a)),s=Bk(r);for(const[a,l]of s.singleSource)C3(t,a)&&e.set(a,l);return e}function C3(t,e){if(t.from.alias===e)return t.from.type==="collectionRef";if(t.join){for(const n of t.join)if(n.from.alias===e)return n.from.type==="collectionRef"}return!1}function zy(t){const e={...t,from:t.from.type==="queryRef"?new wr(zy(t.from.query),t.from.alias):t.from,join:t.join?.map(n=>({...n,from:n.from.type==="queryRef"?new wr(zy(n.from.query),n.from.alias):n.from}))};return E3(e)}function E3(t){if(!t.where||t.where.length===0)return t;if(!t.join||t.join.length===0){if(t.where.length>1){const c=jy(t.where),f=$d(c);return{...t,where:[f]}}return t}const e=t.where.filter(c=>!e1(c)),r=jy(e).map(c=>$k(c)),s=Bk(r),a=R3(t,s),l=t.where.filter(c=>e1(c));return l.length>0&&(a.where=[...a.where||[],...l]),a}function Fk(t){return{...t,from:Ly(t.from),join:t.join?.map(e=>({...e,from:Ly(e.from)}))}}function Ly(t){if(t.type==="collectionRef")return t;const e=Fk(t.query);if(k3(e)){const n=Ly(e.from);return n.type==="collectionRef"?new Eo(n.collection,t.alias):new wr(n.query,t.alias)}return new wr(e,t.alias)}function k3(t){return(!t.where||t.where.length===0)&&!t.select&&(!t.groupBy||t.groupBy.length===0)&&(!t.having||t.having.length===0)&&(!t.orderBy||t.orderBy.length===0)&&(!t.join||t.join.length===0)&&t.limit===void 0&&t.offset===void 0&&!t.fnSelect&&(!t.fnWhere||t.fnWhere.length===0)&&(!t.fnHaving||t.fnHaving.length===0)}function jy(t){const e=[];for(const n of t){const r=J0(n);e.push(...fv(r))}return e}function fv(t){if(t.type==="func"&&t.name==="and"){const e=[];for(const n of t.args)e.push(...fv(n));return e}else return[t]}function $k(t){const e=new Set;let n=!1;function r(s){switch(s.type){case"ref":if(s.path&&s.path.length>0){const a=s.path[0];a&&(e.add(a),s.path.length===1&&(n=!0))}break;case"func":s.args&&s.args.forEach(r);break;case"val":break;case"agg":s.args&&s.args.forEach(r);break}}return r(t),{expression:t,touchedSources:e,hasNamespaceOnlyRef:n}}function Bk(t){const e=new Map,n=[];for(const a of t)if(a.touchedSources.size===1&&!a.hasNamespaceOnlyRef){const l=Array.from(a.touchedSources)[0];e.has(l)||e.set(l,[]),e.get(l).push(a.expression)}else(a.touchedSources.size>1||a.hasNamespaceOnlyRef)&&n.push(a.expression);const r=new Map;for(const[a,l]of e)r.set(a,$d(l));const s=n.length>0?$d(n):void 0;return{singleSource:r,multiSource:s}}function R3(t,e){const n=new Set,r=R1(t.from,e.singleSource,n),s=t.join?t.join.map(d=>({...d,from:R1(d.from,e.singleSource,n)})):void 0,a=[];e.multiSource&&a.push(e.multiSource);const l=t.join&&t.join.some(d=>d.type==="left"||d.type==="right"||d.type==="full");for(const[d,m]of e.singleSource)n.has(d)?l&&a.push(Pz(m)):a.push(m);const c=a.length>1?[$d(a.flatMap(d=>fv(J0(d))))]:a;return{select:t.select,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,distinct:t.distinct,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0,from:r,join:s,where:c.length>0?c:[]}}function uo(t){return{from:t.from.type==="collectionRef"?new Eo(t.from.collection,t.from.alias):new wr(uo(t.from.query),t.from.alias),select:t.select,join:t.join?t.join.map(e=>({type:e.type,left:e.left,right:e.right,from:e.from.type==="collectionRef"?new Eo(e.from.collection,e.from.alias):new wr(uo(e.from.query),e.from.alias)})):void 0,where:t.where?[...t.where]:void 0,groupBy:t.groupBy?[...t.groupBy]:void 0,having:t.having?[...t.having]:void 0,orderBy:t.orderBy?[...t.orderBy]:void 0,limit:t.limit,offset:t.offset,fnSelect:t.fnSelect,fnWhere:t.fnWhere?[...t.fnWhere]:void 0,fnHaving:t.fnHaving?[...t.fnHaving]:void 0}}function R1(t,e,n){const r=e.get(t.alias);if(!r)return t.type==="collectionRef"?new Eo(t.collection,t.alias):new wr(uo(t.query),t.alias);if(t.type==="collectionRef"){const l={from:new Eo(t.collection,t.alias),where:[r]};return n.add(t.alias),new wr(l,t.alias)}if(!N3(t.query,r,t.alias))return new wr(uo(t.query),t.alias);if(z3(t.query,r,t.alias))return new wr(uo(t.query),t.alias);const s=t.query.where||[],a={...uo(t.query),where:[...s,r]};return n.add(t.alias),new wr(a,t.alias)}function A3(t,e,n){return t.select?Uk(t.select)||D3(t.select,e,n):!1}function T3(t){return t.groupBy&&t.groupBy.length>0}function M3(t){return t.having&&t.having.length>0}function O3(t){return t.orderBy&&t.orderBy.length>0&&(t.limit!==void 0||t.offset!==void 0)}function I3(t){return t.fnSelect||t.fnWhere&&t.fnWhere.length>0||t.fnHaving&&t.fnHaving.length>0}function N3(t,e,n){return!(A3(t,e,n)||T3(t)||M3(t)||O3(t)||I3(t))}function Uk(t){for(const e of Object.values(t))if(typeof e=="object"){const n=e;if(n.type==="agg"||!("type"in n)&&Uk(n))return!0}return!1}function dv(t){const e=[];if(t==null||typeof t!="object")return e;switch(t.type){case"ref":e.push(t);break;case"func":case"agg":for(const n of t.args??[])e.push(...dv(n));break}return e}function D3(t,e,n){const r=new Set;for(const[a,l]of Object.entries(t))a.startsWith("__SPREAD_SENTINEL__")||l instanceof kn||r.add(a);const s=dv(e);for(const a of s){const l=a.path;if(!Array.isArray(l)||l.length<2)continue;const c=l[0],f=l[1];if(c===n&&r.has(f))return!0}return!1}function z3(t,e,n){const r=dv(e);if(r.every(a=>a.path[0]!==n))return!1;if(t.fnSelect)return!0;const s=t.select;if(!s)return!1;for(const a of r){const l=a.path;if(l.length<2||l[0]!==n)continue;const c=s[l[1]];if(!c)continue;if(!(c instanceof kn)||c.path.length<2)return!0;const[f,d]=c.path;if(f!==n&&f!==t.from.alias||d!==l[1])return!0}return!1}function $d(t){if(t.length===0)throw new jL;return t.length===1?t[0]:new Cr("and",t)}function L3(t,e,n,r,s,a,l,c,f,d,m,p,g,y,S,w,E,_){let k=t;for(const R of e)k=j3(k,R,n,r,s,a,l,c,f,d,m,p,g,y,S,w,E,_);return k}function j3(t,e,n,r,s,a,l,c,f,d,m,p,g,y,S,w,E,_){const k=e.from.type==="collectionRef",{alias:R,input:O,collectionId:L}=F3(e.from,a,f,d,m,p,g,y,l,c,w,E,_);n[R]=O,k&&(E[R]=L);const A=f[r],z=f[L];if(!A)throw new i1(r);if(!z)throw new i1(L);const{activeSource:P,lazySource:j}=B3(e.type,A,z),I=Object.keys(n),{mainExpr:F,joinedExpr:G}=P3(e.left,e.right,I,R),J=Fn(F),te=Fn(G);let H=t.pipe(_n(([W,oe])=>[J(oe),[W,oe]])),$=O.pipe(_n(([W,oe])=>{const Q={[R]:oe};return[te(Q),[W,Q]]}));if(!["inner","left","right","full"].includes(e.type))throw new EL(e.type);if(P){const W=P==="main"?e.from:S.from,oe=W.type==="queryRef"&&(W.query.limit||W.query.offset),Q=F.type==="func"||G.type==="func";if(!oe&&!Q){const N=P==="main"?R:s;p.add(N);const D=P==="main"?H:$,M=Iu(S,P==="main"?G:F,j),se=M.collection,ce=M.path[0];ce&&gh(ce,M.path,se);const he=D.pipe(Qj(ve=>{const Ae=_[N]||N,_e=d[Ae];if(!_e)throw new PL(Ae,N,j.id,Object.keys(d));if(_e.hasLoadedInitialState())return;const pe=ve.getInner().map(([[Ze]])=>Ze),Ee=new kn(M.path);_e.requestSnapshot({where:S4(Ee,pe),optimizedOnly:!0})||_e.requestSnapshot()}));P==="main"?H=he:$=he}}return H.pipe(t4($,e.type),$3(e.type))}function P3(t,e,n,r){const s=n.filter(c=>c!==r),a=Py(t),l=Py(e);if(a&&s.includes(a)&&l===r)return{mainExpr:t,joinedExpr:e};if(a===r&&l&&s.includes(l))return{mainExpr:e,joinedExpr:t};throw!a||!l?new RL:a===l?new kL(a):s.includes(a)?l!==r?new TL(r):new ML:new AL(a)}function Py(t){switch(t.type){case"ref":return t.path[0]||null;case"func":{const e=new Set;for(const n of t.args){const r=Py(n);r&&e.add(r)}return e.size===1?Array.from(e)[0]:null}default:return null}}function F3(t,e,n,r,s,a,l,c,f,d,m,p,g){switch(t.type){case"collectionRef":{const y=e[t.alias];if(!y)throw new Ak(t.alias,t.collection.id,Object.keys(e));return p[t.alias]=t.collection.id,{alias:t.alias,input:y,collectionId:t.collection.id}}case"queryRef":{const y=d.get(t.query)||t.query,S=m(y,e,n,r,s,a,l,c,f,d);Object.assign(p,S.aliasToCollectionId),Object.assign(g,S.aliasRemapping);const w=Object.keys(S.aliasToCollectionId).find(k=>S.aliasToCollectionId[k]===S.collectionId);w&&w!==t.alias&&(g[t.alias]=w);const _=S.pipeline.pipe(_n(k=>{const[R,[O,L]]=k;return[R,O]}));return{alias:t.alias,input:_,collectionId:S.collectionId}}default:throw new OL(t.type)}}function $3(t){return function(e){return e.pipe(oi(n=>{const[r,[s,a]]=n,l=s?.[1],c=a?.[1];return t==="inner"?!!(l&&c):t==="left"?!!l:t==="right"?!!c:!0}),_n(n=>{const[r,[s,a]]=n,l=s?.[0],c=s?.[1],f=a?.[0],d=a?.[1],m={};return c&&Object.assign(m,c),d&&Object.assign(m,d),[`[${l},${f}]`,m]}))}}function B3(t,e,n){switch(t){case"left":return{activeSource:"main",lazySource:n};case"right":return{activeSource:"joined",lazySource:e};case"inner":return e.size<n.size?{activeSource:"main",lazySource:n}:{activeSource:"joined",lazySource:e};default:return{activeSource:void 0,lazySource:void 0}}}function Fy(t){return t instanceof Pn?t.value:t}function U3(t,e,n){const r=t.source(e);if(r&&typeof r=="object"){let s=n;const a=t.targetPath;if(a.length===0)for(const[l,c]of Object.entries(r))n[l]=Fy(c);else for(let l=0;l<a.length;l++){const c=a[l];if(l===a.length-1){const f=s[c]??={};if(typeof f=="object")for(const[d,m]of Object.entries(r))f[d]=Fy(m)}else{const f=s[c];(f==null||typeof f!="object")&&(s[c]={}),s=s[c]}}}}function V3(t,e,n){const r=t.alias.split(".");if(r.length===1)n[t.alias]=t.compiled(e);else{let s=n;for(let a=0;a<r.length-1;a++){const l=r[a],c=s[l];(c==null||typeof c!="object")&&(s[l]={}),s=s[l]}s[r[r.length-1]]=Fy(t.compiled(e))}}function q3([t,e],n){const r={};for(const s of n)s.kind==="merge"?U3(s,e,r):V3(s,e,r);return[t,{...e,__select_results:r}]}function H3(t,e,n){const r=[];return Vk([],e,r),t.pipe(_n(s=>q3(s,r)))}function K3(t){return t.type==="agg"}function G3(t){return t&&typeof t=="object"&&!Y0(t)}function Vk(t,e,n){for(const[r,s]of Object.entries(e)){if(r.startsWith("__SPREAD_SENTINEL__")){const l=r.slice(19),c=l.lastIndexOf("__"),f=c>=0?l.slice(0,c):l,d=s&&typeof s=="object"&&"type"in s&&s.type==="ref";if(f.includes(".")||d){const m=[...t],p=d?s:new kn(f.split(".")),g=Fn(p);n.push({kind:"merge",targetPath:m,source:g})}else{const m=f,p=[...t];n.push({kind:"merge",targetPath:p,source:g=>g[m]})}continue}const a=s;if(G3(a)){Vk([...t,r],a,n);continue}if(K3(a))n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>null});else{if(a===void 0||!Y0(a)){n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>a});continue}if(a instanceof Pn){const l=a.value;n.push({kind:"field",alias:[...t,r].join("."),compiled:()=>l})}else n.push({kind:"field",alias:[...t,r].join("."),compiled:Fn(a)})}}}function hv(t,e,n,r,s,a,l,c,f=new WeakMap,d=new WeakMap){const m=f.get(t);if(m)return m;$y(t);const{optimizedQuery:p,sourceWhereClauses:g}=x3(t);d.set(p,t),Uy(p,t,d);const y={...e},S={},w={},E={},{alias:_,input:k,collectionId:R}=Z3(p.from,y,n,r,s,a,l,c,f,d,S,w);E[_]=k;let O=k.pipe(_n(([P,j])=>[P,{[_]:j}]));if(p.join&&p.join.length>0&&(O=L3(O,p.join,E,R,_,y,f,d,n,r,s,a,l,c,t,hv,S,w)),p.where&&p.where.length>0)for(const P of p.where){const j=J0(P),I=Fn(j);O=O.pipe(oi(([F,G])=>yo(I(G))))}if(p.fnWhere&&p.fnWhere.length>0)for(const P of p.fnWhere)O=O.pipe(oi(([j,I])=>yo(P(I))));if(p.distinct&&!p.fnSelect&&!p.select)throw new yL;if(p.fnSelect?O=O.pipe(_n(([P,j])=>{const I=p.fnSelect(j);return[P,{...j,__select_results:I}]})):p.select?O=H3(O,p.select):O=O.pipe(_n(([P,j])=>{const I=!p.join&&!p.groupBy?j[_]:j;return[P,{...j,__select_results:I}]})),p.groupBy&&p.groupBy.length>0?O=w1(O,p.groupBy,p.having,p.select,p.fnHaving):p.select&&Object.values(p.select).some(j=>j.type==="agg")&&(O=w1(O,[],p.having,p.select,p.fnHaving)),p.having&&(!p.groupBy||p.groupBy.length===0)&&!(p.select?Object.values(p.select).some(j=>j.type==="agg"):!1))throw new vL;if(p.fnHaving&&p.fnHaving.length>0&&(!p.groupBy||p.groupBy.length===0))for(const P of p.fnHaving)O=O.pipe(oi(([j,I])=>P(I)));if(p.distinct&&(O=O.pipe(r4(([P,j])=>j.__select_results))),p.orderBy&&p.orderBy.length>0){const I=O4(t,O,p.orderBy,p.select||{},n[R],l,c,p.limit,p.offset).pipe(_n(([G,[J,te]])=>{const H=J.__select_results,$=By(H);return[G,[$,te]]})),F={collectionId:R,pipeline:I,sourceWhereClauses:g,aliasToCollectionId:S,aliasRemapping:w};return f.set(t,F),F}else if(p.limit!==void 0||p.offset!==void 0)throw new bL;const A=O.pipe(_n(([P,j])=>{const I=j.__select_results,F=By(I);return[P,[F,void 0]]})),z={collectionId:R,pipeline:A,sourceWhereClauses:g,aliasToCollectionId:S,aliasRemapping:w};return f.set(t,z),z}function Q3(t){const e=new Set;if(t.from.type==="collectionRef"&&e.add(t.from.alias),t.join)for(const n of t.join)n.from.type==="collectionRef"&&e.add(n.from.alias);return e}function $y(t,e=new Set){const n=Q3(t);for(const s of n)if(e.has(s))throw new SL(s,Array.from(e));const r=new Set([...e,...n]);if(t.from.type==="queryRef"&&$y(t.from.query,r),t.join)for(const s of t.join)s.from.type==="queryRef"&&$y(s.from.query,r)}function Z3(t,e,n,r,s,a,l,c,f,d,m,p){switch(t.type){case"collectionRef":{const g=e[t.alias];if(!g)throw new Ak(t.alias,t.collection.id,Object.keys(e));return m[t.alias]=t.collection.id,{alias:t.alias,input:g,collectionId:t.collection.id}}case"queryRef":{const g=d.get(t.query)||t.query,y=hv(g,e,n,r,s,a,l,c,f,d);Object.assign(m,y.aliasToCollectionId),Object.assign(p,y.aliasRemapping);const S=Object.keys(y.aliasToCollectionId).find(_=>y.aliasToCollectionId[_]===y.collectionId);S&&S!==t.alias&&(p[t.alias]=S);const E=y.pipeline.pipe(_n(_=>{const[k,[R,O]]=_,L=By(R);return[k,L]}));return{alias:t.alias,input:E,collectionId:y.collectionId}}default:throw new wL(t.type)}}function Y3(t){return t instanceof Pn||t&&typeof t=="object"&&"type"in t&&t.type==="val"}function By(t){return Y3(t)?t.value:t}function Uy(t,e,n){if(t.from.type==="queryRef"&&e.from.type==="queryRef"&&(n.set(t.from.query,e.from.query),Uy(t.from.query,e.from.query,n)),t.join&&e.join)for(let r=0;r<t.join.length&&r<e.join.length;r++){const s=t.join[r],a=e.join[r];s.from.type==="queryRef"&&a.from.type==="queryRef"&&(n.set(s.from.query,a.from.query),Uy(s.from.query,a.from.query,n))}}function pv(t,e){const n=t.type;if(n==="val")return new Pn(t.value);if(n==="ref"){const r=t.path;if(Array.isArray(r)){if(r[0]===e&&r.length>1)return new kn(r.slice(1));if(r.length===1&&r[0]!==void 0)return new kn([r[0]])}return new kn(Array.isArray(r)?r:[String(r)])}else{const r=[];for(const s of t.args){const a=pv(s,e);r.push(a)}return new Cr(t.name,r)}}function A1(t,e){return t.map(r=>{const s=pv(r.expression,e);return{...r,expression:s}})}const T1=Symbol.for("@tanstack/db.collection-config-builder");class J3{constructor(e,n,r,s){this.alias=e,this.collectionId=n,this.collection=r,this.collectionConfigBuilder=s,this.biggest=void 0,this.subscriptionLoadingPromises=new Map,this.sentToD2Keys=new Set}subscribe(){const e=this.getWhereClauseForAlias();if(e){const n=pv(e,this.alias);return this.subscribeToChanges(n)}return this.subscribeToChanges()}subscribeToChanges(e){let n;const r=this.getOrderByInfo();if(r)n=this.subscribeToOrderedChanges(e,r);else{const c=!this.collectionConfigBuilder.isLazyAlias(this.alias);n=this.subscribeToMatchingChanges(e,c)}const s=()=>{if(!this.subscriptionLoadingPromises.has(n)){let c;const f=new Promise(d=>{c=d});this.subscriptionLoadingPromises.set(n,{resolve:c}),this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(f)}};n.status==="loadingSubset"&&s();const a=n.on("status:change",c=>{if(c.status==="loadingSubset")s();else{const f=this.subscriptionLoadingPromises.get(n);f&&(this.subscriptionLoadingPromises.delete(n),f.resolve())}}),l=()=>{const c=this.subscriptionLoadingPromises.get(n);c&&(this.subscriptionLoadingPromises.delete(n),c.resolve()),a(),n.unsubscribe()};return this.collectionConfigBuilder.currentSyncState.unsubscribeCallbacks.add(l),n}sendChangesToPipeline(e,n){const r=Array.isArray(e)?e:[...e],s=[];for(const f of r){if(f.type==="insert"){if(this.sentToD2Keys.has(f.key))continue;this.sentToD2Keys.add(f.key)}else f.type==="delete"&&this.sentToD2Keys.delete(f.key);s.push(f)}const a=this.collectionConfigBuilder.currentSyncState.inputs[this.alias],c=W3(a,s,this.collection.config.getKey)>0?n:void 0;this.collectionConfigBuilder.scheduleGraphRun(c,{alias:this.alias})}subscribeToMatchingChanges(e,n=!1){const r=a=>{this.sendChangesToPipeline(a)};return this.collection.subscribeChanges(r,{...n&&{includeInitialState:n},whereExpression:e})}subscribeToOrderedChanges(e,n){const{orderBy:r,offset:s,limit:a,index:l}=n,c=p=>{const g=X3(p);this.sendChangesToPipelineWithTracking(g,f)},f=this.collection.subscribeChanges(c,{whereExpression:e}),d=this.collection.on("truncate",()=>{this.biggest=void 0,this.sentToD2Keys.clear()});f.on("unsubscribed",()=>{d()});const m=A1(r,this.alias);return l?(f.setOrderByIndex(l),f.requestLimitedSnapshot({limit:s+a,orderBy:m})):f.requestSnapshot({orderBy:m,limit:s+a}),f}loadMoreIfNeeded(e){const n=this.getOrderByInfo();if(!n)return!0;const{dataNeeded:r}=n;if(!r)return!0;const s=r();return s>0&&this.loadNextItems(s,e),!0}sendChangesToPipelineWithTracking(e,n){const r=this.getOrderByInfo();if(!r){this.sendChangesToPipeline(e);return}const s=this.trackSentValues(e,r.comparator),a=n;a[T1]??=this.loadMoreIfNeeded.bind(this,n),this.sendChangesToPipeline(s,a[T1])}loadNextItems(e,n){const r=this.getOrderByInfo();if(!r)return;const{orderBy:s,valueExtractorForRawRow:a,offset:l}=r,c=this.biggest,f=c?a(c):void 0,d=f!==void 0?Array.isArray(f)?f:[f]:void 0,m=A1(s,this.alias);n.requestLimitedSnapshot({orderBy:m,limit:e,minValues:d,offset:l})}getWhereClauseForAlias(){const e=this.collectionConfigBuilder.sourceWhereClausesCache;if(e)return e.get(this.alias)}getOrderByInfo(){const e=this.collectionConfigBuilder.optimizableOrderByCollections[this.collectionId];if(e&&e.alias===this.alias)return e}*trackSentValues(e,n){for(const r of e)r.type!=="delete"&&(this.biggest?n(this.biggest,r.value)<0&&(this.biggest=r.value):this.biggest=r.value),yield r}}function W3(t,e,n){const r=[];for(const s of e){const a=n(s.value);s.type==="insert"?r.push([[a,s.value],1]):s.type==="update"?(r.push([[a,s.previousValue],-1]),r.push([[a,s.value],1])):r.push([[a,s.value],-1])}return r.length!==0&&t.sendData(new Qt(r)),r.length}function*X3(t){for(const e of t)e.type==="update"?(yield{type:"delete",key:e.key,value:e.previousValue},yield{type:"insert",key:e.key,value:e.value}):yield e}const qk=new WeakMap;function eP(t){return t.utils?.[av]?.getBuilder?.()}function tP(t,e){qk.set(t,e)}function nP(t){return qk.get(t)}let rP=0;class sP{constructor(e){this.config=e,this.compiledAliasToCollectionId={},this.resultKeys=new WeakMap,this.orderByIndices=new WeakMap,this.isGraphRunning=!1,this.runCount=0,this.isInErrorState=!1,this.aliasDependencies={},this.builderDependencies=new Set,this.pendingGraphRuns=new Map,this.subscriptions={},this.lazySourcesCallbacks={},this.lazySources=new Set,this.optimizableOrderByCollections={},this.id=e.id||`live-query-${++rP}`,this.query=iP(e),this.collections=oP(this.query);const n=lP(this.query);this.collectionByAlias={};for(const[r,s]of n.entries()){const a=this.collections[r];if(a)for(const l of s)this.collectionByAlias[l]=a}this.query.orderBy&&this.query.orderBy.length>0&&(this.compare=aP(this.orderByIndices)),this.compareOptions=this.config.defaultStringCollation??Hk(this.query).compareOptions,this.compileBasePipeline()}hasJoins(e){return!!(e.join&&e.join.length>0||e.from.type==="queryRef"&&this.hasJoins(e.from.query))}getConfig(){return{id:this.id,getKey:this.config.getKey||(e=>this.resultKeys.get(e)),sync:this.getSyncConfig(),compare:this.compare,defaultStringCollation:this.compareOptions,gcTime:this.config.gcTime||5e3,schema:this.config.schema,onInsert:this.config.onInsert,onUpdate:this.config.onUpdate,onDelete:this.config.onDelete,startSync:this.config.startSync,singleResult:this.query.singleResult,utils:{getRunCount:this.getRunCount.bind(this),setWindow:this.setWindow.bind(this),getWindow:this.getWindow.bind(this),[av]:{getBuilder:()=>this,hasCustomGetKey:!!this.config.getKey,hasJoins:this.hasJoins(this.query)}}}}setWindow(e){if(!this.windowFn)throw new $L;return this.currentWindow=e,this.windowFn(e),this.maybeRunGraphFn?.(),this.liveQueryCollection?.isLoadingSubset?new Promise(n=>{const r=this.liveQueryCollection.on("loadingSubset:change",s=>{s.isLoadingSubset||(r(),n())})}):!0}getWindow(){if(!(!this.windowFn||!this.currentWindow))return{offset:this.currentWindow.offset??0,limit:this.currentWindow.limit??0}}getCollectionIdForAlias(e){const n=this.compiledAliasToCollectionId[e];if(n)return n;const r=this.collectionByAlias[e];if(r)return r.id;throw new Error(`Unknown source alias "${e}"`)}isLazyAlias(e){return this.lazySources.has(e)}maybeRunGraph(e){if(!this.isGraphRunning){if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("maybeRunGraph called without active sync session. This should not happen.");this.isGraphRunning=!0;try{const{begin:n,commit:r}=this.currentSyncConfig,s=this.currentSyncState;if(this.isInErrorState)return;if(s.subscribedToAllCollections){for(;s.graph.pendingWork();)s.graph.run(),e?.();s.messagesCount===0&&(n(),r(),this.updateLiveQueryStatus(this.currentSyncConfig))}}finally{this.isGraphRunning=!1}}}scheduleGraphRun(e,n){const r=n?.contextId??od()?.id,s=n?.jobId??this,a=(()=>{if(n?.dependencies)return n.dependencies;const f=new Set(this.builderDependencies);if(n?.alias){const d=this.aliasDependencies[n.alias];if(d)for(const m of d)f.add(m)}return f.delete(this),Array.from(f)})();if(r)for(const f of a)typeof f.scheduleGraphRun=="function"&&f.scheduleGraphRun(void 0,{contextId:r});if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("scheduleGraphRun called without active sync session. This should not happen.");let l=r?this.pendingGraphRuns.get(r):void 0;l||(l={loadCallbacks:new Set},r&&this.pendingGraphRuns.set(r,l)),e&&l.loadCallbacks.add(e);const c=r?void 0:l;Pd.schedule({contextId:r,jobId:s,dependencies:a,run:()=>this.executeGraphRun(r,c)})}clearPendingGraphRun(e){this.pendingGraphRuns.delete(e)}hasPendingGraphRun(e){return this.pendingGraphRuns.has(e)}executeGraphRun(e,n){const r=n??(e?this.pendingGraphRuns.get(e):void 0);if(e&&this.pendingGraphRuns.delete(e),!r||!this.currentSyncConfig||!this.currentSyncState)return;this.incrementRunCount();const s=()=>{let a=!0,l;if(r.loadCallbacks.forEach(c=>{try{a=c()&&a}catch(f){a=!1,l??=f}}),l)throw l;return a};this.maybeRunGraph(s)}getSyncConfig(){return{rowUpdateMode:"full",sync:this.syncFn.bind(this)}}incrementRunCount(){this.runCount++}getRunCount(){return this.runCount}syncFn(e){this.liveQueryCollection=e.collection,this.currentSyncConfig=e;const n={messagesCount:0,subscribedToAllCollections:!1,unsubscribeCallbacks:new Set},r=this.extendPipelineWithChangeProcessing(e,n);this.currentSyncState=r,this.unsubscribeFromSchedulerClears=Pd.onClear(a=>{this.clearPendingGraphRun(a)});const s=this.subscribeToAllCollections(e,r);return this.maybeRunGraphFn=()=>this.scheduleGraphRun(s),this.scheduleGraphRun(s),()=>{n.unsubscribeCallbacks.forEach(a=>a()),this.currentSyncConfig=void 0,this.currentSyncState=void 0,this.pendingGraphRuns.clear(),this.graphCache=void 0,this.inputsCache=void 0,this.pipelineCache=void 0,this.sourceWhereClausesCache=void 0,this.lazySources.clear(),this.optimizableOrderByCollections={},this.lazySourcesCallbacks={},Object.keys(this.subscriptions).forEach(a=>delete this.subscriptions[a]),this.compiledAliasToCollectionId={},this.unsubscribeFromSchedulerClears?.(),this.unsubscribeFromSchedulerClears=void 0}}compileBasePipeline(){this.graphCache=new Lj,this.inputsCache=Object.fromEntries(Object.keys(this.collectionByAlias).map(r=>[r,this.graphCache.newInput()]));const e=hv(this.query,this.inputsCache,this.collections,this.subscriptions,this.lazySourcesCallbacks,this.lazySources,this.optimizableOrderByCollections,r=>{this.windowFn=r});this.pipelineCache=e.pipeline,this.sourceWhereClausesCache=e.sourceWhereClauses,this.compiledAliasToCollectionId=e.aliasToCollectionId;const n=Object.keys(this.compiledAliasToCollectionId).filter(r=>!Object.hasOwn(this.inputsCache,r));if(n.length>0)throw new FL(n)}maybeCompileBasePipeline(){return(!this.graphCache||!this.inputsCache||!this.pipelineCache)&&this.compileBasePipeline(),{graph:this.graphCache,inputs:this.inputsCache,pipeline:this.pipelineCache}}extendPipelineWithChangeProcessing(e,n){const{begin:r,commit:s}=e,{graph:a,inputs:l,pipeline:c}=this.maybeCompileBasePipeline();return c.pipe(Jj(f=>{const d=f.getInner();n.messagesCount+=d.length,r(),d.reduce(uP,new Map).forEach(this.applyChanges.bind(this,e)),s()})),a.finalize(),n.graph=a,n.inputs=l,n.pipeline=c,n}applyChanges(e,n,r){const{write:s,collection:a}=e,{deletes:l,inserts:c,value:f,orderByIndex:d}=n;if(this.resultKeys.set(f,r),d!==void 0&&this.orderByIndices.set(f,d),c&&l===0)s({value:f,type:"insert"});else if(c>l||c===l&&a.has(a.getKeyFromItem(f)))s({value:f,type:"update"});else if(l>0)s({value:f,type:"delete"});else throw new Error(`Could not apply changes: ${JSON.stringify(n)}. This should never happen.`)}handleSourceStatusChange(e,n,r){const{status:s}=r;if(s==="error"){this.transitionToError(`Source collection '${n}' entered error state`);return}if(s==="cleaned-up"){this.transitionToError(`Source collection '${n}' was manually cleaned up while live query '${this.id}' depends on it. Live queries prevent automatic GC, so this was likely a manual cleanup() call.`);return}this.updateLiveQueryStatus(e)}updateLiveQueryStatus(e){const{markReady:n}=e;this.isInErrorState||this.allCollectionsReady()&&n()}transitionToError(e){this.isInErrorState=!0,console.error(`[Live Query Error] ${e}`),this.liveQueryCollection?._lifecycle.setStatus("error")}allCollectionsReady(){return Object.values(this.collections).every(e=>e.isReady())}subscribeToAllCollections(e,n){const r=Object.entries(this.compiledAliasToCollectionId);if(r.length===0)throw new Error(`Compiler returned no alias metadata for query '${this.id}'. This should not happen; please report.`);const s=r.map(([l,c])=>{const f=this.collectionByAlias[l]??this.collections[c],d=nP(f);d&&d!==this?(this.aliasDependencies[l]=[d],this.builderDependencies.add(d)):this.aliasDependencies[l]=[];const m=new J3(l,c,f,this),p=f.on("status:change",S=>{this.handleSourceStatusChange(e,c,S)});n.unsubscribeCallbacks.add(p);const g=m.subscribe();return this.subscriptions[l]=g,m.loadMoreIfNeeded.bind(m,g)}),a=()=>(s.map(l=>l()),!0);return n.subscribedToAllCollections=!0,this.updateLiveQueryStatus(e),a}}function iP(t){return typeof t.query=="function"?w3(t.query):Pk(t.query)}function aP(t){return(e,n)=>{const r=t.get(e),s=t.get(n);return r&&s?r<s?-1:r>s?1:0:0}}function oP(t){const e={};function n(s){s.type==="collectionRef"?e[s.collection.id]=s.collection:s.type==="queryRef"&&r(s.query)}function r(s){if(s.from&&n(s.from),s.join&&Array.isArray(s.join))for(const a of s.join)a.from&&n(a.from)}return r(t),e}function Hk(t){const e=t.from;if(e.type==="collectionRef")return e.collection;if(e.type==="queryRef")return Hk(e.query);throw new Error(`Failed to extract collection. Invalid FROM clause: ${JSON.stringify(t)}`)}function lP(t){const e=new Map;function n(s){if(s)if(s.type==="collectionRef"){const{id:a}=s.collection,l=e.get(a);l?l.add(s.alias):e.set(a,new Set([s.alias]))}else s.type==="queryRef"&&r(s.query)}function r(s){if(s&&(n(s.from),s.join))for(const a of s.join)n(a.from)}return r(t),e}function uP(t,[[e,n],r]){const[s,a]=n,l=t.get(e)||{deletes:0,inserts:0,value:s,orderByIndex:a};return r<0?l.deletes+=Math.abs(r):r>0&&(l.inserts+=r,l.value=s,l.orderByIndex=a),t.set(e,l),t}function M1(t){return new sP(t).getConfig()}function Rg(t){if(typeof t=="function"){const n=M1({query:t});return O1(n)}else{const e=t,n=M1(e);return e.utils&&(n.utils={...n.utils,...e.utils}),O1(n)}}function O1(t){const e=uv(t),n=eP(t);return n&&tP(e,n),e}var cP=class{constructor(t,e){this.fn=t,this.options=e,this.lastExecutionTime=0,this.isPending=!1,this.maybeExecute=(...n)=>{const r=Date.now()-this.lastExecutionTime;if(this.options.leading&&r>=this.options.wait)this.execute(...n);else if(this.lastArgs=n,!this.timeoutId&&this.options.trailing){const s=this.options.wait-r;this.isPending=!0,this.timeoutId=setTimeout(()=>{this.lastArgs!==void 0&&this.execute(...this.lastArgs)},s)}},this.execute=(...n)=>{this.fn(...n),this.options.onExecute?.(n,this),this.lastExecutionTime=Date.now(),this.clearTimeout(),this.lastArgs=void 0,this.isPending=!1},this.flush=()=>{this.isPending&&this.lastArgs&&this.execute(...this.lastArgs)},this.cancel=()=>{this.clearTimeout(),this.lastArgs=void 0,this.isPending=!1},this.clearTimeout=()=>{this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},this.options.leading===void 0&&this.options.trailing===void 0&&(this.options.leading=!0,this.options.trailing=!0)}};function fP(t,e){return new cP(t,e).maybeExecute}const Ag=1;function Kk(t,e=[]){const n=t&&typeof t=="object"&&typeof t.subscribeChanges=="function"&&typeof t.startSyncImmediate=="function"&&typeof t.id=="string",r=U.useRef(null),s=U.useRef(null),a=U.useRef(null),l=U.useRef(0),c=U.useRef(null),f=!r.current||n&&a.current!==t||!n&&(s.current===null||s.current.length!==e.length||s.current.some((S,w)=>S!==e[w]));if(f)if(n)t.startSyncImmediate(),r.current=t,a.current=t;else if(typeof t=="function"){const S=new Gt,w=t(S);if(w==null)r.current=null;else if(w instanceof cv)w.startSyncImmediate(),r.current=w;else if(w instanceof Gt)r.current=Rg({query:t,startSync:!0,gcTime:Ag});else if(w&&typeof w=="object")r.current=Rg({startSync:!0,gcTime:Ag,...w});else throw new Error(`useLiveQuery callback must return a QueryBuilder, LiveQueryCollectionConfig, Collection, undefined, or null. Got: ${typeof w}`);s.current=[...e]}else r.current=Rg({startSync:!0,gcTime:Ag,...t}),s.current=[...e];f&&(l.current=0,c.current=null);const d=U.useRef(null);(!d.current||f)&&(d.current=S=>{if(!r.current)return()=>{};const w=r.current.subscribeChanges(()=>{l.current+=1,S()});return r.current.status==="ready"&&(l.current+=1,S()),()=>{w.unsubscribe()}});const m=U.useRef(null);(!m.current||f)&&(m.current=()=>{const S=l.current,w=r.current;return(!c.current||c.current.version!==S||c.current.collection!==w)&&(c.current={collection:w,version:S}),c.current});const p=U.useSyncExternalStore(d.current,m.current),g=U.useRef(null),y=U.useRef(null);if(!g.current||g.current.version!==p.version||g.current.collection!==p.collection){if(!p.collection)y.current={state:void 0,data:void 0,collection:void 0,status:"disabled",isLoading:!1,isReady:!0,isIdle:!1,isError:!1,isCleanedUp:!1,isEnabled:!1};else{const S=Array.from(p.collection.entries()),E=p.collection.config.singleResult;let _=null,k=null;y.current={get state(){return _||(_=new Map(S)),_},get data(){return k||(k=S.map(([,R])=>R)),E?k[0]:k},collection:p.collection,status:p.collection.status,isLoading:p.collection.status==="loading",isReady:p.collection.status==="ready",isIdle:p.collection.status==="idle",isError:p.collection.status==="error",isCleanedUp:p.collection.status==="cleaned-up",isEnabled:!0}}g.current=p}return y.current}class mi extends ir{constructor(e){super(e),this.name="QueryCollectionError"}}class dP extends mi{constructor(){super("[QueryCollection] queryKey must be provided."),this.name="QueryKeyRequiredError"}}class hP extends mi{constructor(){super("[QueryCollection] queryFn must be provided."),this.name="QueryFnRequiredError"}}class pP extends mi{constructor(){super("[QueryCollection] queryClient must be provided."),this.name="QueryClientRequiredError"}}class mP extends mi{constructor(){super("[QueryCollection] getKey must be provided."),this.name="GetKeyRequiredError"}}class gP extends mi{constructor(){super("Collection must be in 'ready' state for manual sync operations. Sync not initialized yet."),this.name="SyncNotInitializedError"}}class yP extends mi{constructor(e){super(`Duplicate key '${e}' found within batch operations`),this.name="DuplicateKeyInBatchError"}}class vP extends mi{constructor(e){super(`Update operation: Item with key '${e}' does not exist`),this.name="UpdateOperationItemNotFoundError"}}class bP extends mi{constructor(e){super(`Delete operation: Item with key '${e}' does not exist`),this.name="DeleteOperationItemNotFoundError"}}const Pi=new WeakMap;function SP(t,e){const n=Array.isArray(t)?t:[t],r=[];for(const s of n)if(s.type==="delete"){const a=Array.isArray(s.key)?s.key:[s.key];for(const l of a)r.push({type:"delete",key:l})}else{const a=Array.isArray(s.data)?s.data:[s.data];for(const l of a){let c;if(s.type==="update")c=e.getKey(l);else{const f=e.collection.validateData(l,s.type==="upsert"?"insert":s.type);c=e.getKey(f)}r.push({type:s.type,key:c,data:l})}}return r}function wP(t,e){const n=new Set;for(const r of t){if(n.has(r.key))throw new yP(r.key);if(n.add(r.key),r.type==="update"){if(!e.collection._state.syncedData.has(r.key))throw new vP(r.key)}else if(r.type==="delete"&&!e.collection._state.syncedData.has(r.key))throw new bP(r.key)}}function Pl(t,e){const n=SP(t,e);wP(n,e),e.begin();for(const s of n)switch(s.type){case"insert":{const a=e.collection.validateData(s.data,"insert");e.write({type:"insert",value:a});break}case"update":{const l={...e.collection._state.syncedData.get(s.key),...s.data},c=e.collection.validateData(l,"update",s.key);e.write({type:"update",value:c});break}case"delete":{const a=e.collection._state.syncedData.get(s.key);e.write({type:"delete",value:a});break}case"upsert":{const a=e.collection._state.syncedData.has(s.key),l=e.collection.validateData(s.data,a?"update":"insert",s.key);a?e.write({type:"update",value:l}):e.write({type:"insert",value:l});break}}e.commit();const r=Array.from(e.collection._state.syncedData.values());e.updateCacheData?e.updateCacheData(r):e.queryClient.setQueryData(e.queryKey,r)}function xP(t){function e(){const n=t();if(!n)throw new gP;return n}return{writeInsert(n){const r={type:"insert",data:n},s=e(),a=Pi.get(s);if(a?.isActive){a.operations.push(r);return}Pl(r,s)},writeUpdate(n){const r={type:"update",data:n},s=e(),a=Pi.get(s);if(a?.isActive){a.operations.push(r);return}Pl(r,s)},writeDelete(n){const r={type:"delete",key:n},s=e(),a=Pi.get(s);if(a?.isActive){a.operations.push(r);return}Pl(r,s)},writeUpsert(n){const r={type:"upsert",data:n},s=e(),a=Pi.get(s);if(a?.isActive){a.operations.push(r);return}Pl(r,s)},writeBatch(n){const r=e();if(Pi.get(r)?.isActive)throw new Error("Cannot nest writeBatch calls. Complete the current batch before starting a new one.");const a={operations:[],isActive:!0};Pi.set(r,a);try{const l=n();if(l&&typeof l=="object"&&"then"in l&&typeof l.then=="function")throw new Error("writeBatch does not support async callbacks. The callback must be synchronous.");a.operations.length>0&&Pl(a.operations,r)}finally{a.isActive=!1,Pi.delete(r)}}}}function _P(t){if(!t)return;const e={};return t.where&&(e.where=Vy(t.where)),t.orderBy?.length&&(e.orderBy=t.orderBy.map(n=>{const r={expression:Vy(n.expression),direction:n.compareOptions.direction,nulls:n.compareOptions.nulls,stringSort:n.compareOptions.stringSort};return n.compareOptions.stringSort==="locale"?{...r,locale:n.compareOptions.locale,localeOptions:n.compareOptions.localeOptions}:r})),t.limit!==void 0&&(e.limit=t.limit),t.offset!==void 0&&(e.offset=t.offset),Object.keys(e).length===0?void 0:JSON.stringify(e)}function Vy(t){if(!t)return null;switch(t.type){case"val":return{type:"val",value:qy(t.value)};case"ref":return{type:"ref",path:[...t.path]};case"func":return{type:"func",name:t.name,args:t.args.map(e=>Vy(e))};default:return null}}function qy(t){if(t===void 0)return{__type:"undefined"};if(typeof t=="number"){if(Number.isNaN(t))return{__type:"nan"};if(t===Number.POSITIVE_INFINITY)return{__type:"infinity",sign:1};if(t===Number.NEGATIVE_INFINITY)return{__type:"infinity",sign:-1}}return t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"?t:t instanceof Date?{__type:"date",value:t.toJSON()}:Array.isArray(t)?t.map(e=>qy(e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,qy(n)])):t}class CP{constructor(e,n,r){this.state=e,this.refetchFn=n,this.refetch=n,this.writeInsert=r.writeInsert,this.writeUpdate=r.writeUpdate,this.writeDelete=r.writeDelete,this.writeUpsert=r.writeUpsert,this.writeBatch=r.writeBatch}async clearError(){this.state.lastError=void 0,this.state.errorCount=0,this.state.lastErrorUpdatedAt=0,await this.refetchFn({throwOnError:!0})}get lastError(){return this.state.lastError}get isError(){return!!this.state.lastError}get errorCount(){return this.state.errorCount}get isFetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isFetching)}get isRefetching(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isRefetching)}get isLoading(){return Array.from(this.state.observers.values()).some(e=>e.getCurrentResult().isLoading)}get dataUpdatedAt(){return Math.max(0,...Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().dataUpdatedAt))}get fetchStatus(){return Array.from(this.state.observers.values()).map(e=>e.getCurrentResult().fetchStatus)}}function Gk(t){const{queryKey:e,queryFn:n,select:r,queryClient:s,enabled:a,refetchInterval:l,retry:c,retryDelay:f,staleTime:d,getKey:m,onInsert:p,onUpdate:g,onDelete:y,meta:S,...w}=t,E=w.syncMode??"eager";if(!e)throw new dP;if(!n)throw new hP;if(!s)throw new pP;if(!m)throw new mP;const _={lastError:void 0,errorCount:0,lastErrorUpdatedAt:0,observers:new Map},k=new Map,R=new Map,O=new Map,L=new Map,A=new Map,z=(Q,N)=>{const D=O.get(Q)||new Set;D.add(N),O.set(Q,D);const q=R.get(N)||new Set;q.add(Q),R.set(N,q)},P=(Q,N)=>{const D=O.get(Q)||new Set;D.delete(N),O.set(Q,D);const q=R.get(N)||new Set;return q.delete(Q),R.set(N,q),D.size===0},j=Q=>{const{begin:N,write:D,commit:q,markReady:M,collection:se}=Q;let ce=!1;const he=ge=>{if(typeof e=="function")return e(ge);if(E==="on-demand"){const Le=_P(ge);return Le!==void 0?[...e,Le]:e}else return e},ve=(ge={},Le=n)=>{const be=he(ge),ye=Or(be),Ve={...S,loadSubsetOptions:ge};if(_.observers.has(ye)){A.set(ye,(A.get(ye)||0)+1);const ke=_.observers.get(ye),Se=ke.getCurrentResult();return Se.isSuccess?!0:Se.isError?Promise.reject(Se.error):new Promise((Ue,vt)=>{const ut=ke.subscribe(ct=>{ct.isSuccess?(ut(),Ue()):ct.isError&&(ut(),vt(ct.error))})})}const ne={queryKey:be,queryFn:Le,meta:Ve,structuralSharing:!0,notifyOnChangeProps:"all",...a!==void 0&&{enabled:a},...l!==void 0&&{refetchInterval:l},...c!==void 0&&{retry:c},...f!==void 0&&{retryDelay:f},...d!==void 0&&{staleTime:d}},fe=new GE(s,ne);k.set(ye,be),_.observers.set(ye,fe),A.set(ye,(A.get(ye)||0)+1);const Ce=new Promise((ke,Se)=>{const Ue=fe.subscribe(vt=>{vt.isSuccess?(Ue(),ke()):vt.isError&&(Ue(),Se(vt.error))})});return(ce||se.subscriberCount>0)&&pe(fe,ye),Ce},Ae=ge=>{const Le=Or(ge);return ye=>{if(ye.isSuccess){_.lastError=void 0,_.errorCount=0;const Ve=ye.data,ne=r?r(Ve):Ve;if(!Array.isArray(ne)||ne.some(ke=>typeof ke!="object")){const ke=r?`@tanstack/query-db-collection: select() must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(ge)}`:`@tanstack/query-db-collection: queryFn must return an array of objects. Got: ${typeof ne} for queryKey ${JSON.stringify(ge)}`;console.error(ke);return}const fe=new Map(se._state.syncedData.entries()),Ce=new Map;ne.forEach(ke=>{const Se=m(ke);Ce.set(Se,ke)}),N(),fe.forEach((ke,Se)=>{const Ue=Ce.get(Se);Ue?Ir(ke,Ue)||D({type:"update",value:Ue}):P(Se,Le)&&D({type:"delete",value:ke})}),Ce.forEach((ke,Se)=>{z(Se,Le),fe.has(Se)||D({type:"insert",value:ke})}),q(),M()}else ye.isError&&(ye.errorUpdatedAt!==_.lastErrorUpdatedAt&&(_.lastError=ye.error,_.errorCount++,_.lastErrorUpdatedAt=ye.errorUpdatedAt),console.error(`[QueryCollection] Error observing query ${String(ge)}:`,ye.error),M())}},_e=ge=>L.has(ge),pe=(ge,Le)=>{if(!_e(Le)){const be=k.get(Le),ye=Ae(be),Ve=ge.subscribe(ye);L.set(Le,Ve);const ne=ge.getCurrentResult();(ne.isSuccess||ne.isError)&&ye(ne)}},Ee=()=>{_.observers.forEach(pe)},Me=()=>{L.forEach(ge=>{ge()}),L.clear()};ce=!0;const Ze=se.on("subscribers:change",({subscriberCount:ge})=>{ge>0?Ee():ge===0&&Me()});if(E==="eager"){const ge=ve({});ge instanceof Promise&&ge.catch(()=>{})}else M();Ee(),_.observers.forEach((ge,Le)=>{const be=k.get(Le);Ae(be)(ge.getCurrentResult())});const je=ge=>{L.get(ge)?.(),L.delete(ge);const Le=R.get(ge)??new Set,be=[];Le.forEach(ye=>{const Ve=O.get(ye);Ve&&(Ve.delete(ge),Ve.size===0&&(O.delete(ye),se.has(ye)&&be.push(se.get(ye))))}),be.length>0&&(N(),be.forEach(ye=>{D({type:"delete",value:ye})}),q()),_.observers.delete(ge),R.delete(ge),k.delete(ge),A.delete(ge)},Ye=ge=>{const Le=A.get(ge)||0,be=_.observers.get(ge);if(Le<=0&&(L.get(ge)?.(),L.delete(ge)),be?.hasListeners()??!1){A.set(ge,0);return}Le>0&&console.warn(`[cleanupQueryIfIdle] Invariant violation: refcount=${Le} but no listeners. Cleaning up to prevent leak.`,{hashedQueryKey:ge}),je(ge)},st=ge=>{je(ge)},Je=s.getQueryCache().subscribe(ge=>{const Le=ge.query.queryHash;ge.type==="removed"&&k.has(Le)&&Ye(Le)});return{loadSubset:E==="eager"?void 0:ve,unloadSubset:E==="eager"?void 0:ge=>{const Le=he(ge),be=Or(Le),Ve=(A.get(be)||0)-1;Ve<=0?(A.set(be,0),Ye(be)):A.set(be,Ve)},cleanup:async()=>{Ze(),Me();const ge=[...k.values()],Le=[..._.observers.keys()];for(const be of Le)st(be);Je(),await Promise.all(ge.map(async be=>{await s.cancelQueries({queryKey:be,exact:!0}),s.removeQueries({queryKey:be,exact:!0})}))}}},I=async Q=>{const D=[...k.values()].map(q=>_.observers.get(Or(q)).refetch({throwOnError:Q?.throwOnError}));await Promise.all(D)},F=Q=>{const N=typeof e=="function"?e({}):e;r?s.setQueryData(N,D=>{if(!D||typeof D!="object")return D;if(Array.isArray(D))return Q;const q=r(D);if(Array.isArray(q)){for(const M of Object.keys(D))if(D[M]===q)return{...D,[M]:Q}}if(Array.isArray(D.data))return{...D,data:Q};if(Array.isArray(D.items))return{...D,items:Q};if(Array.isArray(D.results))return{...D,results:Q};for(const M of Object.keys(D))if(Array.isArray(D[M]))return{...D,[M]:Q};return D}):s.setQueryData(N,Q)};let G=null;const J=Q=>{const{begin:N,write:D,commit:q,collection:M}=Q,se=typeof e=="function"?e({}):e;return G={collection:M,queryClient:s,queryKey:se,getKey:m,begin:N,write:D,commit:q,updateCacheData:F},j(Q)},te=xP(()=>G),H=p?async Q=>{const N=await p(Q)??{};return N.refetch!==!1&&await I(),N}:void 0,$=g?async Q=>{const N=await g(Q)??{};return N.refetch!==!1&&await I(),N}:void 0,W=y?async Q=>{const N=await y(Q)??{};return N.refetch!==!1&&await I(),N}:void 0,oe=new CP(_,I,te);return{...w,getKey:m,syncMode:E,sync:{sync:J},onInsert:H,onUpdate:$,onDelete:W,utils:oe}}const Qk=new ZE({defaultOptions:{queries:{staleTime:1/0,refetchOnWindowFocus:!1}}});async function EP(){const t=await fetch("/connections");if(!t.ok)throw new Error(`Failed to list connections: ${t.statusText}`);return t.json()}async function I1(t){if(await fetch(`/connections/${encodeURIComponent(t.id)}`).then(n=>n.ok)){const n=await fetch(`/connections/${encodeURIComponent(t.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to update connection: ${n.statusText}`)}else{const n=await fetch("/connections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to create connection: ${n.statusText}`)}}async function kP(t){const e=await fetch(`/connections/${encodeURIComponent(t)}`,{method:"DELETE"});if(!e.ok&&e.status!==404)throw new Error(`Failed to delete connection: ${e.statusText}`)}async function RP(t){const e=await fetch(`/data/${t}`);if(!e.ok)throw new Error(`Failed to list entries: ${e.statusText}`);const n=await e.json(),r=[];for(const s of n){const a=await fetch(`/data/${t}/${encodeURIComponent(s.id)}`);if(a.ok){const l=await a.json();r.push(l)}}return r}async function N1(t,e){const n=await fetch(`/data/${t}/${encodeURIComponent(e.id)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error(`Failed to save item: ${n.statusText}`)}async function AP(t,e){const n=await fetch(`/data/${t}/${encodeURIComponent(e)}`,{method:"DELETE"});if(!n.ok&&n.status!==404)throw new Error(`Failed to delete item: ${n.statusText}`)}const pu=uv(Gk({queryKey:["connections"],queryFn:async()=>EP(),getKey:t=>t.id,queryClient:Qk,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await I1(n)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await I1(n)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await kP(n.id)}))}})),Af="queries";uv(Gk({queryKey:["saved-queries"],queryFn:async()=>RP(Af),getKey:t=>t.id,queryClient:Qk,onInsert:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await N1(Af,n)}))},onUpdate:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.modified;await N1(Af,n)}))},onDelete:async({transaction:t})=>{await Promise.all(t.mutations.map(async e=>{const n=e.original;await AP(Af,n.id)}))}}));const vo=new WeakMap,ld=new WeakMap,Bd={current:[]};let Tg=!1,mu=0;const Jl=new Set,Tf=new Map;function Zk(t){const e=Array.from(t).sort((n,r)=>n instanceof xs&&n.options.deps.includes(r)?1:r instanceof xs&&r.options.deps.includes(n)?-1:0);for(const n of e){if(Bd.current.includes(n))continue;Bd.current.push(n),n.recompute();const r=ld.get(n);if(r)for(const s of r){const a=vo.get(s);a&&Zk(a)}}}function TP(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function MP(t){const e={prevVal:t.prevState,currentVal:t.state};for(const n of t.listeners)n(e)}function Yk(t){if(mu>0&&!Tf.has(t)&&Tf.set(t,t.prevState),Jl.add(t),!(mu>0)&&!Tg)try{for(Tg=!0;Jl.size>0;){const e=Array.from(Jl);Jl.clear();for(const n of e){const r=Tf.get(n)??n.prevState;n.prevState=r,TP(n)}for(const n of e){const r=vo.get(n);r&&(Bd.current.push(n),Zk(r))}for(const n of e){const r=vo.get(n);if(r)for(const s of r)MP(s)}}}finally{Tg=!1,Bd.current=[],Tf.clear()}}function Br(t){mu++;try{t()}finally{if(mu--,mu===0){const e=Jl.values().next().value;e&&Yk(e)}}}function OP(t){return typeof t=="function"}class Hy{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var s,a;this.listeners.add(r);const l=(a=(s=this.options)==null?void 0:s.onSubscribe)==null?void 0:a.call(s,r,this);return()=>{this.listeners.delete(r),l?.()}},this.prevState=e,this.state=e,this.options=n}setState(e){var n,r,s;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(e):OP(e)?this.state=e(this.prevState):this.state=e,(s=(r=this.options)==null?void 0:r.onUpdate)==null||s.call(r),Yk(this)}}class xs{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=this.options.deps.length,r=new Array(n),s=new Array(n);for(let a=0;a<n;a++){const l=this.options.deps[a];r[a]=l.prevState,s[a]=l.state}return this.lastSeenDepValues=s,{prevDepVals:r,currDepVals:s,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const s=this.getDepVals();this.state=this.options.fn(s),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const a of this.options.deps)a instanceof xs&&a.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:s}=this.getDepVals();for(let a=0;a<s.length;a++)if(s[a]!==r[a]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,s;this.listeners.add(n);const a=(s=(r=this.options).onSubscribe)==null?void 0:s.call(r,n,this);return()=>{this.listeners.delete(n),a?.()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const n of e)if(n instanceof xs)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof Hy){let r=vo.get(n);r||(r=new Set,vo.set(n,r)),r.add(this);let s=ld.get(this);s||(s=new Set,ld.set(this,s)),s.add(n)}}unregisterFromGraph(e=this.options.deps){for(const n of e)if(n instanceof xs)this.unregisterFromGraph(n.options.deps);else if(n instanceof Hy){const r=vo.get(n);r&&r.delete(this);const s=ld.get(this);s&&s.delete(n)}}}class Jk{#e=!0;#t;#n;#r;#s;#o;#i;#a;#p=0;#m=5;#u=!1;#c=!1;#l=null;#f=()=>{this.debugLog("Connected to event bus"),this.#o=!0,this.#u=!1,this.debugLog("Emitting queued events",this.#s),this.#s.forEach(e=>this.emitEventToBus(e)),this.#s=[],this.stopConnectLoop(),this.#n().removeEventListener("tanstack-connect-success",this.#f)};#d=()=>{if(this.#p<this.#m){this.#p++,this.dispatchCustomEvent("tanstack-connect",{});return}this.#n().removeEventListener("tanstack-connect",this.#d),this.#c=!0,this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#h=()=>{this.#u||(this.#u=!0,this.#n().addEventListener("tanstack-connect-success",this.#f),this.#d())};constructor({pluginId:e,debug:n=!1,enabled:r=!0,reconnectEveryMs:s=300}){this.#t=e,this.#e=r,this.#n=this.getGlobalTarget,this.#r=n,this.debugLog(" Initializing event subscription for plugin",this.#t),this.#s=[],this.#o=!1,this.#c=!1,this.#i=null,this.#a=s}startConnectLoop(){this.#i!==null||this.#o||(this.debugLog(`Starting connect loop (every ${this.#a}ms)`),this.#i=setInterval(this.#d,this.#a))}stopConnectLoop(){this.#u=!1,this.#i!==null&&(clearInterval(this.#i),this.#i=null,this.#s=[],this.debugLog("Stopped connect loop"))}debugLog(...e){this.#r&&console.log(` [tanstack-devtools:${this.#t}-plugin]`,...e)}getGlobalTarget(){if(typeof globalThis<"u"&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if(typeof window<"u"&&typeof window.addEventListener<"u")return this.debugLog("Using window as event target"),window;const e=typeof EventTarget<"u"?new EventTarget:void 0;return typeof e>"u"||typeof e.addEventListener>"u"?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#t}dispatchCustomEventShim(e,n){try{const r=new Event(e,{detail:n});this.#n().dispatchEvent(r)}catch{this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,n){try{this.#n().dispatchEvent(new CustomEvent(e,{detail:n}))}catch{this.dispatchCustomEventShim(e,n)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}createEventPayload(e,n){return{type:`${this.#t}:${e}`,payload:n,pluginId:this.#t}}emit(e,n){if(!this.#e){this.debugLog("Event bus client is disabled, not emitting event",e,n);return}if(this.#l&&(this.debugLog("Emitting event to internal event target",e,n),this.#l.dispatchEvent(new CustomEvent(`${this.#t}:${e}`,{detail:this.createEventPayload(e,n)}))),this.#c){this.debugLog("Previously failed to connect, not emitting to bus");return}if(!this.#o){this.debugLog("Bus not available, will be pushed as soon as connected"),this.#s.push(this.createEventPayload(e,n)),typeof CustomEvent<"u"&&!this.#u&&(this.#h(),this.startConnectLoop());return}return this.emitEventToBus(this.createEventPayload(e,n))}on(e,n,r){const s=r?.withEventTarget??!1,a=`${this.#t}:${e}`;if(s&&(this.#l||(this.#l=new EventTarget),this.#l.addEventListener(a,c=>{n(c.detail)})),!this.#e)return this.debugLog("Event bus client is disabled, not registering event",a),()=>{};const l=c=>{this.debugLog("Received event from bus",c.detail),n(c.detail)};return this.#n().addEventListener(a,l),this.debugLog("Registered event to bus",a),()=>{s&&this.#l?.removeEventListener(a,l),this.#n().removeEventListener(a,l)}}onAll(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}onAllPluginEvents(e){if(!this.#e)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const n=r=>{const s=r.detail;this.#t&&s.pluginId!==this.#t||e(s)};return this.#n().addEventListener("tanstack-devtools-global",n),()=>this.#n().removeEventListener("tanstack-devtools-global",n)}}class IP extends Jk{constructor(){super({pluginId:"form-devtools",reconnectEveryMs:1e3})}}const yr=new IP;function yh(t,e){return typeof t=="function"?t(e):t}function Mf(t,e){return mv(e).reduce((r,s)=>{if(r===null)return null;if(typeof r<"u")return r[s]},t)}function Of(t,e,n){const r=mv(e);function s(a){if(!r.length)return yh(n,a);const l=r.shift();if(typeof l=="string"||typeof l=="number"&&!Array.isArray(a))return typeof a=="object"?(a===null&&(a={}),{...a,[l]:s(a[l])}):{[l]:s()};if(Array.isArray(a)&&typeof l=="number"){const c=a.slice(0,l);return[...c.length?c:new Array(l),s(a[l]),...a.slice(l+1)]}return[...new Array(l),s()]}return s(t)}function NP(t,e){const n=mv(e);function r(s){if(!s)return;if(n.length===1){const l=n[0];if(Array.isArray(s)&&typeof l=="number")return s.filter((d,m)=>m!==l);const{[l]:c,...f}=s;return f}const a=n.shift();if((typeof a=="string"||typeof a=="number"&&!Array.isArray(s))&&typeof s=="object")return{...s,[a]:r(s[a])};if(typeof a=="number"&&Array.isArray(s)){if(a>=s.length)return s;const l=s.slice(0,a);return[...l.length?l:new Array(a),r(s[a]),...s.slice(a+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return r(t)}const DP=/^(\d+)$/gm,zP=/\.(\d+)(?=\.)/gm,LP=/^(\d+)\./gm,jP=/\.(\d+$)/gm,PP=/\.{2,}/gm,Ky="__int__",If=`${Ky}$1`;function mv(t){if(Array.isArray(t))return[...t];if(typeof t!="string")throw new Error("Path must be a string.");return t.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(DP,If).replace(zP,`.${If}.`).replace(LP,`${If}.`).replace(jP,`.${If}`).replace(PP,".").split(".").map(e=>{if(e.startsWith(Ky)){const n=e.substring(Ky.length),r=parseInt(n,10);return String(r)===n?r:n}return e})}function FP(t){return!(Array.isArray(t)&&t.length===0)}function Gy(t,e){const n=r=>r.validators.filter(Boolean).map(s=>({cause:s.cause,validate:s.fn}));return e.validationLogic({form:e.form,validators:e.validators,event:{type:t,async:!1},runValidation:n})}function Qy(t,e){const{asyncDebounceMs:n}=e,{onBlurAsyncDebounceMs:r,onChangeAsyncDebounceMs:s,onDynamicAsyncDebounceMs:a}=e.validators||{},l=n??0,c=f=>f.validators.filter(Boolean).map(d=>{const m=d?.cause||t;let p=l;switch(m){case"change":p=s??l;break;case"blur":p=r??l;break;case"dynamic":p=a??l;break;case"submit":p=0;break}return t==="submit"&&(p=0),{cause:m,validate:d.fn,debounceMs:p}});return e.validationLogic({form:e.form,validators:e.validators,event:{type:t,async:!0},runValidation:c})}const Zy=t=>!!t&&typeof t=="object"&&"fields"in t;function ri(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[s,a]of t)if(!e.has(s)||!Object.is(a,e.get(s)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0}const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n)if(!r.includes(s)||!ri(t[s],e[s]))return!1;return!0}const D1=({newFormValidatorError:t,isPreviousErrorFromFormValidator:e,previousErrorValue:n})=>t?{newErrorValue:t,newSource:"form"}:e?{newErrorValue:void 0,newSource:void 0}:n?{newErrorValue:n,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},z1=({formLevelError:t,fieldLevelError:e})=>e?{newErrorValue:e,newSource:"field"}:t?{newErrorValue:t,newSource:"form"}:{newErrorValue:void 0,newSource:void 0};function Ln(t,e){return t==null?e:{...t,...e}}let Hi=256;const ud=[];let Nf;for(;Hi--;)ud[Hi]=(Hi+256).toString(16).substring(1);function Wk(){let t=0,e,n="";if(!Nf||Hi+16>256){for(Nf=new Array(256),t=256;t--;)Nf[t]=256*Math.random()|0;t=0,Hi=0}for(;t<16;t++)e=Nf[Hi+t],t===6?n+=ud[e&15|64]:t===8?n+=ud[e&63|128]:n+=ud[e],t&1&&t>1&&t<11&&(n+="-");return Hi++,n}const $P=fP(t=>yr.emit("form-state",{id:t.formId,state:t.store.state}),{wait:300}),co=t=>{if(!t.validators)return t.runValidation({validators:[],form:t.form});const e=t.event.async,n=e?void 0:{fn:t.validators.onMount,cause:"mount"},r={fn:e?t.validators.onChangeAsync:t.validators.onChange,cause:"change"},s={fn:e?t.validators.onBlurAsync:t.validators.onBlur,cause:"blur"},a={fn:e?t.validators.onSubmitAsync:t.validators.onSubmit,cause:"submit"},l=e?void 0:{fn:()=>{},cause:"server"};switch(t.event.type){case"mount":return t.runValidation({validators:[n],form:t.form});case"submit":return t.runValidation({validators:[r,s,a,l],form:t.form});case"server":return t.runValidation({validators:[],form:t.form});case"blur":return t.runValidation({validators:[s,l],form:t.form});case"change":return t.runValidation({validators:[r,l],form:t.form});default:throw new Error(`Unknown validation event type: ${t.event.type}`)}};function BP(t,e){const n=new Map;for(const r of t){const s=r.path??[];let a=e,l="";for(let c=0;c<s.length;c++){const f=s[c];if(f===void 0)continue;const d=typeof f=="object"?f.key:f,m=Number(d);Array.isArray(a)&&!Number.isNaN(m)?l+=`[${m}]`:l+=(c>0?".":"")+String(d),typeof a=="object"&&a!==null?a=a[d]:a=void 0}n.set(l,(n.get(l)??[]).concat(r))}return Object.fromEntries(n)}const L1=(t,e)=>{const n=BP(t,e);return{form:n,fields:n}},bo={validate({value:t,validationSource:e},n){const r=n["~standard"].validate(t);if(r instanceof Promise)throw new Error("async function passed to sync validator");if(r.issues)return e==="field"?r.issues:L1(r.issues,t)},async validateAsync({value:t,validationSource:e},n){const r=await n["~standard"].validate(t);if(r.issues)return e==="field"?r.issues:L1(r.issues,t)}},Xk=t=>!!t&&"~standard"in t,fo={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function Df(t){function e(m,p,g){const y=l(m,p,"move",g),S=Math.min(p,g),w=Math.max(p,g);for(let _=S;_<=w;_++)y.push(a(m,_));const E=Object.keys(t.fieldInfo).reduce((_,k)=>(k.startsWith(a(m,p))&&_.set(k,t.getFieldMeta(k)),_),new Map);f(y,p<g?"up":"down"),Object.keys(t.fieldInfo).filter(_=>_.startsWith(a(m,g))).forEach(_=>{const k=_.replace(a(m,g),a(m,p)),R=E.get(k);R&&t.setFieldMeta(_,R)})}function n(m,p){const g=l(m,p,"remove");f(g,"up")}function r(m,p,g){l(m,p,"swap",g).forEach(S=>{if(!S.toString().startsWith(a(m,p)))return;const w=S.toString().replace(a(m,p),a(m,g)),[E,_]=[t.getFieldMeta(S),t.getFieldMeta(w)];E&&t.setFieldMeta(w,E),_&&t.setFieldMeta(S,_)})}function s(m,p){const g=l(m,p,"insert");f(g,"down"),g.forEach(y=>{y.toString().startsWith(a(m,p))&&t.setFieldMeta(y,d())})}function a(m,p){return`${m}[${p}]`}function l(m,p,g,y){const S=[a(m,p)];switch(g){case"swap":S.push(a(m,y));break;case"move":{const[w,E]=[Math.min(p,y),Math.max(p,y)];for(let _=w;_<=E;_++)S.push(a(m,_));break}default:{const w=t.getFieldValue(m),E=Array.isArray(w)?w.length:0;for(let _=p+1;_<E;_++)S.push(a(m,_));break}}return Object.keys(t.fieldInfo).filter(w=>S.some(E=>w.startsWith(E)))}function c(m,p){return m.replace(/\[(\d+)\]/,(g,y)=>{const S=parseInt(y,10);return`[${p==="up"?S+1:Math.max(0,S-1)}]`})}function f(m,p){(p==="up"?m:[...m].reverse()).forEach(y=>{const S=c(y.toString(),p),w=t.getFieldMeta(S);w?t.setFieldMeta(y,w):t.setFieldMeta(y,d())})}const d=()=>fo;return{handleArrayMove:e,handleArrayRemove:n,handleArraySwap:r,handleArrayInsert:s}}function Mg(t){return{values:t.values??{},errorMap:t.errorMap??{},fieldMetaBase:t.fieldMetaBase??{},isSubmitted:t.isSubmitted??!1,isSubmitting:t.isSubmitting??!1,isValidating:t.isValidating??!1,submissionAttempts:t.submissionAttempts??0,isSubmitSuccessful:t.isSubmitSuccessful??!1,validationMetaMap:t.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}}}class j1{constructor(e){this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{const n=this.fieldMetaDerived.mount(),r=this.store.mount(),s=this.store.subscribe(()=>{$P(this)}),a=yr.on("request-form-state",m=>{m.payload.id===this._formId&&yr.emit("form-api",{id:this._formId,state:this.store.state,options:this.options})}),l=yr.on("request-form-reset",m=>{m.payload.id===this._formId&&this.reset()}),c=yr.on("request-form-force-submit",m=>{m.payload.id===this._formId&&(this._devtoolsSubmissionOverride=!0,this.handleSubmit(),this._devtoolsSubmissionOverride=!1)}),f=()=>{c(),l(),a(),s(),n(),r(),yr.emit("form-unmounted",{id:this._formId})};this.options.listeners?.onMount?.({formApi:this});const{onMount:d}=this.options.validators||{};return yr.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}),d&&this.validateSync("mount"),f},this.update=n=>{if(!n)return;const r=this.options;this.options=n;const s=!!n.transform?.deps?.some((c,f)=>c!==this.prevTransformArray[f]),a=n.defaultValues&&!ri(n.defaultValues,r.defaultValues)&&!this.state.isTouched,l=!ri(n.defaultState,r.defaultState)&&!this.state.isTouched;!a&&!l&&!s||(Br(()=>{this.baseStore.setState(()=>Mg(Object.assign({},this.state,l?n.defaultState:{},a?{values:n.defaultValues}:{},s?{_force_re_eval:!this.state._force_re_eval}:{})))}),yr.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}))},this.reset=(n,r)=>{const{fieldMeta:s}=this.state,a=this.resetFieldMeta(s);n&&!r?.keepDefaultValues&&(this.options={...this.options,defaultValues:n}),this.baseStore.setState(()=>Mg({...this.options.defaultState,values:n??this.options.defaultValues??this.options.defaultState?.values,fieldMetaBase:a}))},this.validateAllFields=async n=>{const r=[];return Br(()=>{Object.values(this.fieldInfo).forEach(a=>{if(!a.instance)return;const l=a.instance;r.push(Promise.resolve().then(()=>l.validate(n,{skipFormValidation:!0}))),a.instance.state.meta.isTouched||a.instance.setMeta(c=>({...c,isTouched:!0}))})}),(await Promise.all(r)).flat()},this.validateArrayFieldsStartingFrom=async(n,r,s)=>{const a=this.getFieldValue(n),l=Array.isArray(a)?Math.max(a.length-1,0):null,c=[`${n}[${r}]`];for(let p=r+1;p<=(l??0);p++)c.push(`${n}[${p}]`);const f=Object.keys(this.fieldInfo).filter(p=>c.some(g=>p.startsWith(g))),d=[];return Br(()=>{f.forEach(p=>{d.push(Promise.resolve().then(()=>this.validateField(p,s)))})}),(await Promise.all(d)).flat()},this.validateField=(n,r)=>{const s=this.fieldInfo[n]?.instance;return s?(s.state.meta.isTouched||s.setMeta(a=>({...a,isTouched:!0})),s.validate(r)):[]},this.validateSync=n=>{const r=Gy(n,{...this.options,form:this,validationLogic:this.options.validationLogic||co});let s=!1;const a={};return Br(()=>{for(const f of r){if(!f.validate)continue;const d=this.runValidator({validate:f.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:m,fieldErrors:p}=cd(d),g=Fl(f.cause),y=new Set([...Object.keys(this.state.fieldMeta),...Object.keys(p||{})]);for(const S of y){if(this.baseStore.state.fieldMetaBase[S]===void 0&&!p?.[S])continue;const w=this.getFieldMeta(S)??fo,{errorMap:E,errorSourceMap:_}=w,k=p?.[S],{newErrorValue:R,newSource:O}=D1({newFormValidatorError:k,isPreviousErrorFromFormValidator:_?.[g]==="form",previousErrorValue:E?.[g]});O==="form"&&(a[S]={...a[S],[g]:k}),E?.[g]!==R&&this.setFieldMeta(S,(L=fo)=>({...L,errorMap:{...L.errorMap,[g]:R},errorSourceMap:{...L.errorSourceMap,[g]:O}}))}this.state.errorMap?.[g]!==m&&this.baseStore.setState(S=>({...S,errorMap:{...S.errorMap,[g]:m}})),(m||p)&&(s=!0)}const l=Fl("submit");this.state.errorMap?.[l]&&n!=="submit"&&!s&&this.baseStore.setState(f=>({...f,errorMap:{...f.errorMap,[l]:void 0}}));const c=Fl("server");this.state.errorMap?.[c]&&n!=="server"&&!s&&this.baseStore.setState(f=>({...f,errorMap:{...f.errorMap,[c]:void 0}}))}),{hasErrored:s,fieldsErrorMap:a}},this.validateAsync=async n=>{const r=Qy(n,{...this.options,form:this,validationLogic:this.options.validationLogic||co});this.state.isFormValidating||this.baseStore.setState(f=>({...f,isFormValidating:!0}));const s=[];let a;for(const f of r){if(!f.validate)continue;const d=Fl(f.cause);this.state.validationMetaMap[d]?.lastAbortController.abort();const p=new AbortController;this.state.validationMetaMap[d]={lastAbortController:p},s.push(new Promise(async g=>{let y;try{y=await new Promise((_,k)=>{setTimeout(async()=>{if(p.signal.aborted)return _(void 0);try{_(await this.runValidator({validate:f.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:p.signal},type:"validateAsync"}))}catch(R){k(R)}},f.debounceMs)})}catch(_){y=_}const{formError:S,fieldErrors:w}=cd(y);w&&(a=a?{...a,...w}:w);const E=Fl(f.cause);for(const _ of Object.keys(this.state.fieldMeta)){if(this.baseStore.state.fieldMetaBase[_]===void 0)continue;const k=this.getFieldMeta(_);if(!k)continue;const{errorMap:R,errorSourceMap:O}=k,L=a?.[_],{newErrorValue:A,newSource:z}=D1({newFormValidatorError:L,isPreviousErrorFromFormValidator:O?.[E]==="form",previousErrorValue:R?.[E]});R?.[E]!==A&&this.setFieldMeta(_,P=>({...P,errorMap:{...P.errorMap,[E]:A},errorSourceMap:{...P.errorSourceMap,[E]:z}}))}this.baseStore.setState(_=>({..._,errorMap:{..._.errorMap,[E]:S}})),g(a?{fieldErrors:a,errorMapKey:E}:void 0)}))}let l=[];const c={};if(s.length){l=await Promise.all(s);for(const f of l)if(f?.fieldErrors){const{errorMapKey:d}=f;for(const[m,p]of Object.entries(f.fieldErrors)){const y={...c[m]||{},[d]:p};c[m]=y}}}return this.baseStore.setState(f=>({...f,isFormValidating:!1})),c},this.validate=n=>{const{hasErrored:r,fieldsErrorMap:s}=this.validateSync(n);return r&&!this.options.asyncAlways?s:this.validateAsync(n)},this._handleSubmit=async n=>{this.baseStore.setState(a=>({...a,isSubmitted:!1,submissionAttempts:a.submissionAttempts+1,isSubmitSuccessful:!1})),Br(()=>{Object.values(this.fieldInfo).forEach(a=>{a.instance&&(a.instance.state.meta.isTouched||a.instance.setMeta(l=>({...l,isTouched:!0})))})});const r=n??this.options.onSubmitMeta;if(!this.state.canSubmit&&!this._devtoolsSubmissionOverride){this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:r});return}this.baseStore.setState(a=>({...a,isSubmitting:!0}));const s=()=>{this.baseStore.setState(a=>({...a,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){s(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:r}),yr.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validateAllFields",errors:Object.values(this.state.fieldMeta).map(a=>a.errors).flat()});return}if(await this.validate("submit"),!this.state.isValid){s(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:r}),yr.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validate",errors:this.state.errors});return}Br(()=>{Object.values(this.fieldInfo).forEach(a=>{a.instance?.options.listeners?.onSubmit?.({value:a.instance.state.value,fieldApi:a.instance})})}),this.options.listeners?.onSubmit?.({formApi:this,meta:r});try{await this.options.onSubmit?.({value:this.state.values,formApi:this,meta:r}),Br(()=>{this.baseStore.setState(a=>({...a,isSubmitted:!0,isSubmitSuccessful:!0})),yr.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!0}),s()})}catch(a){throw this.baseStore.setState(l=>({...l,isSubmitSuccessful:!1})),yr.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"inflight",onError:a}),s(),a}},this.getFieldValue=n=>Mf(this.state.values,n),this.getFieldMeta=n=>this.state.fieldMeta[n],this.getFieldInfo=n=>this.fieldInfo[n]||={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}},this.setFieldMeta=(n,r)=>{this.baseStore.setState(s=>({...s,fieldMetaBase:{...s.fieldMetaBase,[n]:yh(r,s.fieldMetaBase[n])}}))},this.resetFieldMeta=n=>Object.keys(n).reduce((r,s)=>{const a=s;return r[a]=fo,r},{}),this.setFieldValue=(n,r,s)=>{const a=s?.dontUpdateMeta??!1,l=s?.dontRunListeners??!1,c=s?.dontValidate??!1;Br(()=>{a||this.setFieldMeta(n,f=>({...f,isTouched:!0,isDirty:!0,errorMap:{...f?.errorMap,onMount:void 0}})),this.baseStore.setState(f=>({...f,values:Of(f.values,n,r)}))}),l||this.getFieldInfo(n).instance?.triggerOnChangeListener(),c||this.validateField(n,"change")},this.deleteField=n=>{const s=[...Object.keys(this.fieldInfo).filter(a=>{const l=n.toString();return a!==l&&a.startsWith(l)}),n];this.baseStore.setState(a=>{const l={...a};return s.forEach(c=>{l.values=NP(l.values,c),delete this.fieldInfo[c],delete l.fieldMetaBase[c]}),l})},this.pushFieldValue=(n,r,s)=>{this.setFieldValue(n,a=>[...Array.isArray(a)?a:[],r],s)},this.insertFieldValue=async(n,r,s,a)=>{this.setFieldValue(n,c=>[...c.slice(0,r),s,...c.slice(r)],Ln(a,{dontValidate:!0}));const l=a?.dontValidate??!1;l||await this.validateField(n,"change"),Df(this).handleArrayInsert(n,r),l||await this.validateArrayFieldsStartingFrom(n,r,"change")},this.replaceFieldValue=async(n,r,s,a)=>{this.setFieldValue(n,c=>c.map((f,d)=>d===r?s:f),Ln(a,{dontValidate:!0})),(a?.dontValidate??!1)||(await this.validateField(n,"change"),await this.validateArrayFieldsStartingFrom(n,r,"change"))},this.removeFieldValue=async(n,r,s)=>{const a=this.getFieldValue(n),l=Array.isArray(a)?Math.max(a.length-1,0):null;if(this.setFieldValue(n,f=>f.filter((d,m)=>m!==r),Ln(s,{dontValidate:!0})),Df(this).handleArrayRemove(n,r),l!==null){const f=`${n}[${l}]`;this.deleteField(f)}(s?.dontValidate??!1)||(await this.validateField(n,"change"),await this.validateArrayFieldsStartingFrom(n,r,"change"))},this.swapFieldValues=(n,r,s,a)=>{this.setFieldValue(n,c=>{const f=c[r],d=c[s];return Of(Of(c,`${r}`,d),`${s}`,f)},Ln(a,{dontValidate:!0})),Df(this).handleArraySwap(n,r,s),(a?.dontValidate??!1)||(this.validateField(n,"change"),this.validateField(`${n}[${r}]`,"change"),this.validateField(`${n}[${s}]`,"change"))},this.moveFieldValues=(n,r,s,a)=>{this.setFieldValue(n,c=>{const f=[...c];return f.splice(s,0,f.splice(r,1)[0]),f},Ln(a,{dontValidate:!0})),Df(this).handleArrayMove(n,r,s),(a?.dontValidate??!1)||(this.validateField(n,"change"),this.validateField(`${n}[${r}]`,"change"),this.validateField(`${n}[${s}]`,"change"))},this.clearFieldValues=(n,r)=>{const s=this.getFieldValue(n),a=Array.isArray(s)?Math.max(s.length-1,0):null;if(this.setFieldValue(n,[],Ln(r,{dontValidate:!0})),a!==null)for(let c=0;c<=a;c++){const f=`${n}[${c}]`;this.deleteField(f)}(r?.dontValidate??!1)||this.validateField(n,"change")},this.resetField=n=>{this.baseStore.setState(r=>({...r,fieldMetaBase:{...r.fieldMetaBase,[n]:fo},values:this.options.defaultValues?Of(r.values,n,Mf(this.options.defaultValues,n)):r.values}))},this.setErrorMap=n=>{Br(()=>{Object.entries(n).forEach(([r,s])=>{const a=r;if(Zy(s)){const{formError:l,fieldErrors:c}=cd(s);for(const f of Object.keys(this.fieldInfo))this.getFieldMeta(f)&&this.setFieldMeta(f,m=>({...m,errorMap:{...m.errorMap,[a]:c?.[f]},errorSourceMap:{...m.errorSourceMap,[a]:"form"}}));this.baseStore.setState(f=>({...f,errorMap:{...f.errorMap,[a]:l}}))}else this.baseStore.setState(l=>({...l,errorMap:{...l.errorMap,[a]:s}}))})})},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((n,[r,s])=>(Object.keys(s).length&&s.errors.length&&(n[r]={errors:s.errors,errorMap:s.errorMap}),n),{})}),this.parseValuesWithSchema=n=>bo.validate({value:this.state.values,validationSource:"form"},n),this.parseValuesWithSchemaAsync=n=>bo.validateAsync({value:this.state.values,validationSource:"form"},n),this.timeoutIds={validations:{},listeners:{},formListeners:{}},this._formId=e?.formId??Wk(),this._devtoolsSubmissionOverride=!1,this.baseStore=new Hy(Mg({...e?.defaultState,values:e?.defaultValues??e?.defaultState?.values})),this.fieldMetaDerived=new xs({deps:[this.baseStore],fn:({prevDepVals:n,currDepVals:r,prevVal:s})=>{const a=s,l=n?.[0],c=r[0];let f=0;const d={};for(const m of Object.keys(c.fieldMetaBase)){const p=c.fieldMetaBase[m],g=l?.fieldMetaBase[m],y=a?.[m],S=Mf(c.values,m);let w=y?.errors;if(!g||p.errorMap!==g.errorMap){w=Object.values(p.errorMap??{}).filter(O=>O!==void 0);const R=this.getFieldInfo(m)?.instance;R&&!R.options.disableErrorFlat&&(w=w.flat(1))}const E=!FP(w),_=!p.isDirty,k=ri(S,Mf(this.options.defaultValues,m))||ri(S,this.getFieldInfo(m)?.instance?.options.defaultValue);if(y&&y.isPristine===_&&y.isValid===E&&y.isDefaultValue===k&&y.errors===w&&p===g){d[m]=y,f++;continue}d[m]={...p,errors:w??[],isPristine:_,isValid:E,isDefaultValue:k}}return Object.keys(c.fieldMetaBase).length&&a&&f===Object.keys(c.fieldMetaBase).length?a:d}}),this.store=new xs({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:n,currDepVals:r,prevVal:s})=>{const a=s,l=n?.[0],c=r[0],f=r[1],d=Object.values(f).filter(Boolean),m=d.some(J=>J.isValidating),p=d.every(J=>J.isValid),g=d.some(J=>J.isTouched),y=d.some(J=>J.isBlurred),S=d.every(J=>J.isDefaultValue),w=g&&c.errorMap?.onMount,E=d.some(J=>J.isDirty),_=!E,k=!!(c.errorMap?.onMount||d.some(J=>J?.errorMap?.onMount)),R=!!m;let O=a?.errors??[];(!l||c.errorMap!==l.errorMap)&&(O=Object.values(c.errorMap).reduce((J,te)=>te===void 0?J:te&&Zy(te)?(J.push(te.form),J):(J.push(te),J),[]));const L=O.length===0,A=p&&L,z=this.options.canSubmitWhenInvalid??!1,P=c.submissionAttempts===0&&!g&&!k||!R&&!c.isSubmitting&&A||z;let j=c.errorMap;if(w&&(O=O.filter(J=>J!==c.errorMap.onMount),j=Object.assign(j,{onMount:void 0})),a&&l&&a.errorMap===j&&a.fieldMeta===this.fieldMetaDerived.state&&a.errors===O&&a.isFieldsValidating===m&&a.isFieldsValid===p&&a.isFormValid===L&&a.isValid===A&&a.canSubmit===P&&a.isTouched===g&&a.isBlurred===y&&a.isPristine===_&&a.isDefaultValue===S&&a.isDirty===E&&ri(l,c))return a;let I={...c,errorMap:j,fieldMeta:this.fieldMetaDerived.state,errors:O,isFieldsValidating:m,isFieldsValid:p,isFormValid:L,isValid:A,canSubmit:P,isTouched:g,isBlurred:y,isPristine:_,isDefaultValue:S,isDirty:E};const F=this.options.transform?.deps??[];if(F.length!==this.prevTransformArray.length||F.some((J,te)=>J!==this.prevTransformArray[te])){const J=Object.assign({},this,{state:I});this.options.transform?.fn(J),I=J.state,this.prevTransformArray=F}return I}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(e||{})}get state(){return this.store.state}get formId(){return this._formId}runValidator(e){return Xk(e.validate)?bo[e.type](e.value,e.validate):e.validate(e.value)}handleSubmit(e){return this._handleSubmit(e)}}function cd(t){if(t){if(Zy(t)){const e=cd(t.form).formError,n=t.fields;return{formError:e,fieldErrors:n}}return{formError:t}}return{formError:void 0}}function Fl(t){switch(t){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}class P1{constructor(e){this.options={},this.mount=()=>{const n=this.store.mount();this.options.defaultValue!==void 0&&!this.getMeta().isTouched&&this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0});const r=this.getInfo();r.instance=this,this.update(this.options);const{onMount:s}=this.options.validators||{};if(s){const a=this.runValidator({validate:s,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});a&&this.setMeta(l=>({...l,errorMap:{...l?.errorMap,onMount:a},errorSourceMap:{...l?.errorSourceMap,onMount:"field"}}))}return this.options.listeners?.onMount?.({value:this.state.value,fieldApi:this}),n},this.update=n=>{if(this.options=n,this.name=n.name,!this.state.meta.isTouched&&this.options.defaultValue!==void 0){const r=this.form.getFieldValue(this.name);ri(r,n.defaultValue)||this.form.setFieldValue(this.name,n.defaultValue,{dontUpdateMeta:!0,dontValidate:!0,dontRunListeners:!0})}this.form.getFieldMeta(this.name)||this.form.setFieldMeta(this.name,this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(n,r)=>{this.form.setFieldValue(this.name,n,Ln(r,{dontRunListeners:!0,dontValidate:!0})),r?.dontRunListeners||this.triggerOnChangeListener(),r?.dontValidate||this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=n=>this.form.setFieldMeta(this.name,n),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(n,r)=>{this.form.pushFieldValue(this.name,n,Ln(r,{dontRunListeners:!0})),r?.dontRunListeners||this.triggerOnChangeListener()},this.insertValue=(n,r,s)=>{this.form.insertFieldValue(this.name,n,r,Ln(s,{dontRunListeners:!0})),s?.dontRunListeners||this.triggerOnChangeListener()},this.replaceValue=(n,r,s)=>{this.form.replaceFieldValue(this.name,n,r,Ln(s,{dontRunListeners:!0})),s?.dontRunListeners||this.triggerOnChangeListener()},this.removeValue=(n,r)=>{this.form.removeFieldValue(this.name,n,Ln(r,{dontRunListeners:!0})),r?.dontRunListeners||this.triggerOnChangeListener()},this.swapValues=(n,r,s)=>{this.form.swapFieldValues(this.name,n,r,Ln(s,{dontRunListeners:!0})),s?.dontRunListeners||this.triggerOnChangeListener()},this.moveValue=(n,r,s)=>{this.form.moveFieldValues(this.name,n,r,Ln(s,{dontRunListeners:!0})),s?.dontRunListeners||this.triggerOnChangeListener()},this.clearValues=n=>{this.form.clearFieldValues(this.name,Ln(n,{dontRunListeners:!0})),n?.dontRunListeners||this.triggerOnChangeListener()},this.getLinkedFields=n=>{const r=Object.values(this.form.fieldInfo),s=[];for(const a of r){if(!a.instance)continue;const{onChangeListenTo:l,onBlurListenTo:c}=a.instance.options.validators||{};n==="change"&&l?.includes(this.name)&&s.push(a.instance),n==="blur"&&c?.includes(this.name)&&s.push(a.instance)}return s},this.validateSync=(n,r)=>{const s=Gy(n,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||co}),l=this.getLinkedFields(n).reduce((d,m)=>{const p=Gy(n,{...m.options,form:m.form,validationLogic:m.form.options.validationLogic||co});return p.forEach(g=>{g.field=m}),d.concat(p)},[]);let c=!1;Br(()=>{const d=(m,p)=>{const g=zf(p.cause),y=p.validate?F1(m.runValidator({validate:p.validate,value:{value:m.store.state.value,validationSource:"field",fieldApi:m},type:"validate"})):void 0,S=r[g],{newErrorValue:w,newSource:E}=z1({formLevelError:S,fieldLevelError:y});m.state.meta.errorMap?.[g]!==w&&m.setMeta(_=>({..._,errorMap:{..._.errorMap,[g]:w},errorSourceMap:{..._.errorSourceMap,[g]:E}})),w&&(c=!0)};for(const m of s)d(this,m);for(const m of l)m.validate&&d(m.field,m)});const f=zf("submit");return this.state.meta.errorMap?.[f]&&n!=="submit"&&!c&&this.setMeta(d=>({...d,errorMap:{...d.errorMap,[f]:void 0},errorSourceMap:{...d.errorSourceMap,[f]:void 0}})),{hasErrored:c}},this.validateAsync=async(n,r)=>{const s=Qy(n,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||co}),a=await r,l=this.getLinkedFields(n),c=l.reduce((y,S)=>{const w=Qy(n,{...S.options,form:S.form,validationLogic:S.form.options.validationLogic||co});return w.forEach(E=>{E.field=S}),y.concat(w)},[]),f=[],d=[],m=s.some(y=>y.validate)||c.some(y=>y.validate);if(m){this.state.meta.isValidating||this.setMeta(y=>({...y,isValidating:!0}));for(const y of l)y.setMeta(S=>({...S,isValidating:!0}))}const p=(y,S,w)=>{const E=zf(S.cause);y.getInfo().validationMetaMap[E]?.lastAbortController.abort();const k=new AbortController;this.getInfo().validationMetaMap[E]={lastAbortController:k},w.push(new Promise(async R=>{let O;try{O=await new Promise((j,I)=>{this.timeoutIds.validations[S.cause]&&clearTimeout(this.timeoutIds.validations[S.cause]),this.timeoutIds.validations[S.cause]=setTimeout(async()=>{if(k.signal.aborted)return j(void 0);try{j(await this.runValidator({validate:S.validate,value:{value:y.store.state.value,fieldApi:y,signal:k.signal,validationSource:"field"},type:"validateAsync"}))}catch(F){I(F)}},S.debounceMs)})}catch(j){O=j}if(k.signal.aborted)return R(void 0);const L=F1(O),A=a[this.name]?.[E],{newErrorValue:z,newSource:P}=z1({formLevelError:A,fieldLevelError:L});y.setMeta(j=>({...j,errorMap:{...j?.errorMap,[E]:z},errorSourceMap:{...j.errorSourceMap,[E]:P}})),R(z)}))};for(const y of s)y.validate&&p(this,y,f);for(const y of c)y.validate&&p(y.field,y,d);let g=[];if((f.length||d.length)&&(g=await Promise.all(f),await Promise.all(d)),m){this.setMeta(y=>({...y,isValidating:!1}));for(const y of l)y.setMeta(S=>({...S,isValidating:!1}))}return g.filter(Boolean)},this.validate=(n,r)=>{if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:s}=r?.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(n),{hasErrored:a}=this.validateSync(n,s[this.name]??{});if(a&&!this.options.asyncAlways)return this.getInfo().validationMetaMap[zf(n)]?.lastAbortController.abort(),this.state.meta.errors;const l=r?.skipFormValidation?Promise.resolve({}):this.form.validateAsync(n);return this.validateAsync(n,l)},this.handleChange=n=>{this.setValue(n)},this.handleBlur=()=>{this.state.meta.isTouched||this.setMeta(r=>({...r,isTouched:!0})),this.state.meta.isBlurred||this.setMeta(r=>({...r,isBlurred:!0})),this.validate("blur"),this.triggerOnBlurListener()},this.setErrorMap=n=>{this.setMeta(r=>({...r,errorMap:{...r.errorMap,...n}}))},this.parseValueWithSchema=n=>bo.validate({value:this.state.value,validationSource:"field"},n),this.parseValueWithSchemaAsync=n=>bo.validateAsync({value:this.state.value,validationSource:"field"},n),this.triggerOnChangeListener=()=>{const n=this.form.options.listeners?.onChangeDebounceMs;n&&n>0?(this.timeoutIds.formListeners.change&&clearTimeout(this.timeoutIds.formListeners.change),this.timeoutIds.formListeners.change=setTimeout(()=>{this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this})},n)):this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this});const r=this.options.listeners?.onChangeDebounceMs;r&&r>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout(()=>{this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},r)):this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})},this.form=e.form,this.name=e.name,this.options=e,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new xs({deps:[this.form.store],fn:({prevVal:n})=>{const r=n,s=this.form.getFieldMeta(this.name)??{...fo,...e.defaultMeta};let a=this.form.getFieldValue(this.name);return!s.isTouched&&a===void 0&&this.options.defaultValue!==void 0&&!ri(a,this.options.defaultValue)&&(a=this.options.defaultValue),r&&r.value===a&&r.meta===s?r:{value:a,meta:s}}})}get state(){return this.store.state}runValidator(e){return Xk(e.validate)?bo[e.type](e.value,e.validate):e.validate(e.value)}triggerOnBlurListener(){const e=this.form.options.listeners?.onBlurDebounceMs;e&&e>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this})},e)):this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this});const n=this.options.listeners?.onBlurDebounceMs;n&&n>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout(()=>{this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})},n)):this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})}}function F1(t){if(t)return t}function zf(t){switch(t){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}const Ud=typeof window<"u"?U.useLayoutEffect:U.useEffect;function UP(t){const[e,n]=U.useState(()=>({form:t.form,name:t.name})),[r,s]=U.useState(()=>new P1({...t}));(e.form!==t.form||e.name!==t.name)&&(s(new P1({...t})),n({form:t.form,name:t.name}));const a=vs(r.store,t.mode==="array"?y=>Object.keys(y.value??[]).length:y=>y.value),l=vs(r.store,y=>y.meta.isTouched),c=vs(r.store,y=>y.meta.isBlurred),f=vs(r.store,y=>y.meta.isDirty),d=vs(r.store,y=>y.meta.errorMap),m=vs(r.store,y=>y.meta.errorSourceMap),p=vs(r.store,y=>y.meta.isValidating),g=U.useMemo(()=>{const S={...r,get state(){return{value:t.mode==="array"?r.state.value:a,get meta(){return{...r.state.meta,isTouched:l,isBlurred:c,isDirty:f,errorMap:d,errorSourceMap:m,isValidating:p}}}}};return S.Field=eR,S},[r,t.mode,a,l,c,f,d,m,p]);return Ud(r.mount,[r]),Ud(()=>{r.update(t)}),g}const eR=(({children:t,...e})=>{const n=UP(e),r=U.useMemo(()=>yh(t,n),[t,n]);return x.jsx(x.Fragment,{children:r})});function VP(){return U.useState(()=>Wk())[0]}const qP=U.version.split(".")[0]==="17"?VP:U.useId;function HP({form:t,selector:e,children:n}){const r=vs(t.store,e);return x.jsx(x.Fragment,{children:yh(n,r)})}function KP(t){const e=qP(),[n,r]=U.useState(t?.formId),[s,a]=U.useState(()=>new j1({...t,formId:t?.formId??e}));if(n!==t?.formId){const c=t?.formId??e;a(new j1({...t,formId:c})),r(c)}const l=U.useMemo(()=>{const c={...s,handleSubmit:((...f)=>s._handleSubmit(...f)),get formId(){return s._formId},get state(){return s.store.state}};return c.Field=function(d){return x.jsx(eR,{...d,form:s})},c.Subscribe=function(d){return x.jsx(HP,{form:s,selector:d.selector,children:d.children})},c},[s]);return Ud(s.mount,[]),Ud(()=>{s.update(t)}),l}function ue(t,e,n){function r(c,f){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:f,constr:l,traits:new Set},enumerable:!1}),c._zod.traits.has(t))return;c._zod.traits.add(t),e(c,f);const d=l.prototype,m=Object.keys(d);for(let p=0;p<m.length;p++){const g=m[p];g in c||(c[g]=d[g].bind(c))}}const s=n?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:t});function l(c){var f;const d=n?.Parent?new a:this;r(d,c),(f=d._zod).deferred??(f.deferred=[]);for(const m of d._zod.deferred)m();return d}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:c=>n?.Parent&&c instanceof n.Parent?!0:c?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class So extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class tR extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const nR={};function ra(t){return nR}function rR(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function Yy(t,e){return typeof e=="bigint"?e.toString():e}function vh(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function gv(t){return t==null}function yv(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}const $1=Symbol("evaluating");function mt(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==$1)return r===void 0&&(r=$1,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function ua(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function gi(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function B1(t){return JSON.stringify(t)}function GP(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const sR="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Lu(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const QP=vh(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function ju(t){if(Lu(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Lu(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function iR(t){return ju(t)?{...t}:Array.isArray(t)?[...t]:t}const ZP=new Set(["string","number","symbol"]);function ko(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function yi(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function Be(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function YP(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}function JP(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const a=gi(t._zod.def,{get shape(){const l={};for(const c in e){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&(l[c]=n.shape[c])}return ua(this,"shape",l),l},checks:[]});return yi(t,a)}function WP(t,e){const n=t._zod.def,r=n.checks;if(r&&r.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const a=gi(t._zod.def,{get shape(){const l={...t._zod.def.shape};for(const c in e){if(!(c in n.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&delete l[c]}return ua(this,"shape",l),l},checks:[]});return yi(t,a)}function XP(t,e){if(!ju(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const a=t._zod.def.shape;for(const l in e)if(Object.getOwnPropertyDescriptor(a,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=gi(t._zod.def,{get shape(){const a={...t._zod.def.shape,...e};return ua(this,"shape",a),a}});return yi(t,s)}function e5(t,e){if(!ju(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=gi(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e};return ua(this,"shape",r),r}});return yi(t,n)}function t5(t,e){const n=gi(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return ua(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return yi(t,n)}function n5(t,e,n){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=gi(e._zod.def,{get shape(){const c=e._zod.def.shape,f={...c};if(n)for(const d in n){if(!(d in c))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(f[d]=t?new t({type:"optional",innerType:c[d]}):c[d])}else for(const d in c)f[d]=t?new t({type:"optional",innerType:c[d]}):c[d];return ua(this,"shape",f),f},checks:[]});return yi(e,l)}function r5(t,e,n){const r=gi(e._zod.def,{get shape(){const s=e._zod.def.shape,a={...s};if(n)for(const l in n){if(!(l in a))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(a[l]=new t({type:"nonoptional",innerType:s[l]}))}else for(const l in s)a[l]=new t({type:"nonoptional",innerType:s[l]});return ua(this,"shape",a),a}});return yi(e,r)}function ho(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function aR(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Lf(t){return typeof t=="string"?t:t?.message}function sa(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const s=Lf(t.inst?._zod.def?.error?.(t))??Lf(e?.error?.(t))??Lf(n.customError?.(t))??Lf(n.localeError?.(t))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function vv(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Pu(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const oR=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Yy,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},lR=ue("$ZodError",oR),uR=ue("$ZodError",oR,{Parent:Error});function s5(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function i5(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(l=>r({issues:l}));else if(a.code==="invalid_key")r({issues:a.issues});else if(a.code==="invalid_element")r({issues:a.issues});else if(a.path.length===0)n._errors.push(e(a));else{let l=n,c=0;for(;c<a.path.length;){const f=a.path[c];c===a.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(a))):l[f]=l[f]||{_errors:[]},l=l[f],c++}}};return r(t),n}const bv=t=>(e,n,r,s)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise)throw new So;if(l.issues.length){const c=new(s?.Err??t)(l.issues.map(f=>sa(f,a,ra())));throw sR(c,s?.callee),c}return l.value},Sv=t=>async(e,n,r,s)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},a);if(l instanceof Promise&&(l=await l),l.issues.length){const c=new(s?.Err??t)(l.issues.map(f=>sa(f,a,ra())));throw sR(c,s?.callee),c}return l.value},bh=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},s);if(a instanceof Promise)throw new So;return a.issues.length?{success:!1,error:new(t??lR)(a.issues.map(l=>sa(l,s,ra())))}:{success:!0,data:a.value}},a5=bh(uR),Sh=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(l=>sa(l,s,ra())))}:{success:!0,data:a.value}},o5=Sh(uR),l5=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return bv(t)(e,n,s)},u5=t=>(e,n,r)=>bv(t)(e,n,r),c5=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Sv(t)(e,n,s)},f5=t=>async(e,n,r)=>Sv(t)(e,n,r),d5=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return bh(t)(e,n,s)},h5=t=>(e,n,r)=>bh(t)(e,n,r),p5=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Sh(t)(e,n,s)},m5=t=>async(e,n,r)=>Sh(t)(e,n,r),g5=/^[cC][^\s-]{8,}$/,y5=/^[0-9a-z]+$/,v5=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,b5=/^[0-9a-vA-V]{20}$/,S5=/^[A-Za-z0-9]{27}$/,w5=/^[a-zA-Z0-9_-]{21}$/,x5=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,_5=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,U1=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,C5=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,E5="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function k5(){return new RegExp(E5,"u")}const R5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,A5=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,T5=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,M5=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,O5=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,cR=/^[A-Za-z0-9_-]*$/,I5=/^\+[1-9]\d{6,14}$/,fR="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",N5=new RegExp(`^${fR}$`);function dR(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function D5(t){return new RegExp(`^${dR(t)}$`)}function z5(t){const e=dR({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${fR}T(?:${r})$`)}const L5=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},j5=/^[^A-Z]*$/,P5=/^[^a-z]*$/,Zr=ue("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),F5=ue("$ZodCheckMaxLength",(t,e)=>{var n;Zr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!gv(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const l=vv(s);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),$5=ue("$ZodCheckMinLength",(t,e)=>{var n;Zr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!gv(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const l=vv(s);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),B5=ue("$ZodCheckLengthEquals",(t,e)=>{var n;Zr.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!gv(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,a=s.length;if(a===e.length)return;const l=vv(s),c=a>e.length;r.issues.push({origin:l,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),wh=ue("$ZodCheckStringFormat",(t,e)=>{var n,r;Zr.init(t,e),t._zod.onattach.push(s=>{const a=s._zod.bag;a.format=e.format,e.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),U5=ue("$ZodCheckRegex",(t,e)=>{wh.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),V5=ue("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=j5),wh.init(t,e)}),q5=ue("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=P5),wh.init(t,e)}),H5=ue("$ZodCheckIncludes",(t,e)=>{Zr.init(t,e);const n=ko(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),K5=ue("$ZodCheckStartsWith",(t,e)=>{Zr.init(t,e);const n=new RegExp(`^${ko(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),G5=ue("$ZodCheckEndsWith",(t,e)=>{Zr.init(t,e);const n=new RegExp(`.*${ko(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),Q5=ue("$ZodCheckOverwrite",(t,e)=>{Zr.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class Z5{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),s=Math.min(...r.map(l=>l.length-l.trimStart().length)),a=r.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of a)this.content.push(l)}compile(){const e=Function,n=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new e(...n,s.join(`
`))}}const Y5={major:4,minor:3,patch:4},Ut=ue("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=Y5;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const s of r)for(const a of s._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const s=(l,c,f)=>{let d=ho(l),m;for(const p of c){if(p._zod.def.when){if(!p._zod.def.when(l))continue}else if(d)continue;const g=l.issues.length,y=p._zod.check(l);if(y instanceof Promise&&f?.async===!1)throw new So;if(m||y instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await y,l.issues.length!==g&&(d||(d=ho(l,g)))});else{if(l.issues.length===g)continue;d||(d=ho(l,g))}}return m?m.then(()=>l):l},a=(l,c,f)=>{if(ho(l))return l.aborted=!0,l;const d=s(c,r,f);if(d instanceof Promise){if(f.async===!1)throw new So;return d.then(m=>t._zod.parse(m,f))}return t._zod.parse(d,f)};t._zod.run=(l,c)=>{if(c.skipChecks)return t._zod.parse(l,c);if(c.direction==="backward"){const d=t._zod.parse({value:l.value,issues:[]},{...c,skipChecks:!0});return d instanceof Promise?d.then(m=>a(m,l,c)):a(d,l,c)}const f=t._zod.parse(l,c);if(f instanceof Promise){if(c.async===!1)throw new So;return f.then(d=>s(d,r,c))}return s(f,r,c)}}mt(t,"~standard",()=>({validate:s=>{try{const a=a5(t,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return o5(t,s).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),wv=ue("$ZodString",(t,e)=>{Ut.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??L5(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),Tt=ue("$ZodStringFormat",(t,e)=>{wh.init(t,e),wv.init(t,e)}),J5=ue("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=_5),Tt.init(t,e)}),W5=ue("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=U1(r))}else e.pattern??(e.pattern=U1());Tt.init(t,e)}),X5=ue("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=C5),Tt.init(t,e)}),eF=ue("$ZodURL",(t,e)=>{Tt.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),tF=ue("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=k5()),Tt.init(t,e)}),nF=ue("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=w5),Tt.init(t,e)}),rF=ue("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=g5),Tt.init(t,e)}),sF=ue("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=y5),Tt.init(t,e)}),iF=ue("$ZodULID",(t,e)=>{e.pattern??(e.pattern=v5),Tt.init(t,e)}),aF=ue("$ZodXID",(t,e)=>{e.pattern??(e.pattern=b5),Tt.init(t,e)}),oF=ue("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=S5),Tt.init(t,e)}),lF=ue("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=z5(e)),Tt.init(t,e)}),uF=ue("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=N5),Tt.init(t,e)}),cF=ue("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=D5(e)),Tt.init(t,e)}),fF=ue("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=x5),Tt.init(t,e)}),dF=ue("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=R5),Tt.init(t,e),t._zod.bag.format="ipv4"}),hF=ue("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=A5),Tt.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),pF=ue("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=T5),Tt.init(t,e)}),mF=ue("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=M5),Tt.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,a]=r;if(!a)throw new Error;const l=Number(a);if(`${l}`!==a)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function hR(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const gF=ue("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=O5),Tt.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{hR(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function yF(t){if(!cR.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return hR(n)}const vF=ue("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=cR),Tt.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{yF(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),bF=ue("$ZodE164",(t,e)=>{e.pattern??(e.pattern=I5),Tt.init(t,e)});function SF(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const wF=ue("$ZodJWT",(t,e)=>{Tt.init(t,e),t._zod.check=n=>{SF(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),xF=ue("$ZodUnknown",(t,e)=>{Ut.init(t,e),t._zod.parse=n=>n}),_F=ue("$ZodNever",(t,e)=>{Ut.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function V1(t,e,n){t.issues.length&&e.issues.push(...aR(n,t.issues)),e.value[n]=t.value}const CF=ue("$ZodArray",(t,e)=>{Ut.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const a=[];for(let l=0;l<s.length;l++){const c=s[l],f=e.element._zod.run({value:c,issues:[]},r);f instanceof Promise?a.push(f.then(d=>V1(d,n,l))):V1(f,n,l)}return a.length?Promise.all(a).then(()=>n):n}});function Vd(t,e,n,r,s){if(t.issues.length){if(s&&!(n in r))return;e.issues.push(...aR(n,t.issues))}t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function pR(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=YP(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function mR(t,e,n,r,s,a){const l=[],c=s.keySet,f=s.catchall._zod,d=f.def.type,m=f.optout==="optional";for(const p in e){if(c.has(p))continue;if(d==="never"){l.push(p);continue}const g=f.run({value:e[p],issues:[]},r);g instanceof Promise?t.push(g.then(y=>Vd(y,n,p,e,m))):Vd(g,n,p,e,m)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:a}),t.length?Promise.all(t).then(()=>n):n}const EF=ue("$ZodObject",(t,e)=>{if(Ut.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const c=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...c};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=vh(()=>pR(e));mt(t._zod,"propValues",()=>{const c=e.shape,f={};for(const d in c){const m=c[d]._zod;if(m.values){f[d]??(f[d]=new Set);for(const p of m.values)f[d].add(p)}}return f});const s=Lu,a=e.catchall;let l;t._zod.parse=(c,f)=>{l??(l=r.value);const d=c.value;if(!s(d))return c.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),c;c.value={};const m=[],p=l.shape;for(const g of l.keys){const y=p[g],S=y._zod.optout==="optional",w=y._zod.run({value:d[g],issues:[]},f);w instanceof Promise?m.push(w.then(E=>Vd(E,c,g,d,S))):Vd(w,c,g,d,S)}return a?mR(m,d,c,f,r.value,t):m.length?Promise.all(m).then(()=>c):c}}),kF=ue("$ZodObjectJIT",(t,e)=>{EF.init(t,e);const n=t._zod.parse,r=vh(()=>pR(e)),s=g=>{const y=new Z5(["shape","payload","ctx"]),S=r.value,w=R=>{const O=B1(R);return`shape[${O}]._zod.run({ value: input[${O}], issues: [] }, ctx)`};y.write("const input = payload.value;");const E=Object.create(null);let _=0;for(const R of S.keys)E[R]=`key_${_++}`;y.write("const newResult = {};");for(const R of S.keys){const O=E[R],L=B1(R),z=g[R]?._zod?.optout==="optional";y.write(`const ${O} = ${w(R)};`),z?y.write(`
        if (${O}.issues.length) {
          if (${L} in input) {
            payload.issues = payload.issues.concat(${O}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${L}, ...iss.path] : [${L}]
            })));
          }
        }
        
        if (${O}.value === undefined) {
          if (${L} in input) {
            newResult[${L}] = undefined;
          }
        } else {
          newResult[${L}] = ${O}.value;
        }
        
      `):y.write(`
        if (${O}.issues.length) {
          payload.issues = payload.issues.concat(${O}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${L}, ...iss.path] : [${L}]
          })));
        }
        
        if (${O}.value === undefined) {
          if (${L} in input) {
            newResult[${L}] = undefined;
          }
        } else {
          newResult[${L}] = ${O}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");const k=y.compile();return(R,O)=>k(g,R,O)};let a;const l=Lu,c=!nR.jitless,d=c&&QP.value,m=e.catchall;let p;t._zod.parse=(g,y)=>{p??(p=r.value);const S=g.value;return l(S)?c&&d&&y?.async===!1&&y.jitless!==!0?(a||(a=s(e.shape)),g=a(g,y),m?mR([],S,g,y,p,t):g):n(g,y):(g.issues.push({expected:"object",code:"invalid_type",input:S,inst:t}),g)}});function q1(t,e,n,r){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;const s=t.filter(a=>!ho(a));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(a=>a.issues.map(l=>sa(l,r,ra())))}),e)}const gR=ue("$ZodUnion",(t,e)=>{Ut.init(t,e),mt(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),mt(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),mt(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),mt(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(a=>a._zod.pattern);return new RegExp(`^(${s.map(a=>yv(a.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,a)=>{if(n)return r(s,a);let l=!1;const c=[];for(const f of e.options){const d=f._zod.run({value:s.value,issues:[]},a);if(d instanceof Promise)c.push(d),l=!0;else{if(d.issues.length===0)return d;c.push(d)}}return l?Promise.all(c).then(f=>q1(f,s,t,a)):q1(c,s,t,a)}}),RF=ue("$ZodDiscriminatedUnion",(t,e)=>{e.inclusive=!1,gR.init(t,e);const n=t._zod.parse;mt(t._zod,"propValues",()=>{const s={};for(const a of e.options){const l=a._zod.propValues;if(!l||Object.keys(l).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(a)}"`);for(const[c,f]of Object.entries(l)){s[c]||(s[c]=new Set);for(const d of f)s[c].add(d)}}return s});const r=vh(()=>{const s=e.options,a=new Map;for(const l of s){const c=l._zod.propValues?.[e.discriminator];if(!c||c.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(l)}"`);for(const f of c){if(a.has(f))throw new Error(`Duplicate discriminator value "${String(f)}"`);a.set(f,l)}}return a});t._zod.parse=(s,a)=>{const l=s.value;if(!Lu(l))return s.issues.push({code:"invalid_type",expected:"object",input:l,inst:t}),s;const c=r.value.get(l?.[e.discriminator]);return c?c._zod.run(s,a):e.unionFallback?n(s,a):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:e.discriminator,input:l,path:[e.discriminator],inst:t}),s)}}),AF=ue("$ZodIntersection",(t,e)=>{Ut.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,a=e.left._zod.run({value:s,issues:[]},r),l=e.right._zod.run({value:s,issues:[]},r);return a instanceof Promise||l instanceof Promise?Promise.all([a,l]).then(([f,d])=>H1(n,f,d)):H1(n,a,l)}});function Jy(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(ju(t)&&ju(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),s={...t,...e};for(const a of r){const l=Jy(t[a],e[a]);if(!l.valid)return{valid:!1,mergeErrorPath:[a,...l.mergeErrorPath]};s[a]=l.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],a=e[r],l=Jy(s,a);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function H1(t,e,n){const r=new Map;let s;for(const c of e.issues)if(c.code==="unrecognized_keys"){s??(s=c);for(const f of c.keys)r.has(f)||r.set(f,{}),r.get(f).l=!0}else t.issues.push(c);for(const c of n.issues)if(c.code==="unrecognized_keys")for(const f of c.keys)r.has(f)||r.set(f,{}),r.get(f).r=!0;else t.issues.push(c);const a=[...r].filter(([,c])=>c.l&&c.r).map(([c])=>c);if(a.length&&s&&t.issues.push({...s,keys:a}),ho(t))return t;const l=Jy(e.value,n.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return t.value=l.data,t}const TF=ue("$ZodEnum",(t,e)=>{Ut.init(t,e);const n=rR(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>ZP.has(typeof s)).map(s=>typeof s=="string"?ko(s):s.toString()).join("|")})$`),t._zod.parse=(s,a)=>{const l=s.value;return r.has(l)||s.issues.push({code:"invalid_value",values:n,input:l,inst:t}),s}}),MF=ue("$ZodLiteral",(t,e)=>{if(Ut.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");const n=new Set(e.values);t._zod.values=n,t._zod.pattern=new RegExp(`^(${e.values.map(r=>typeof r=="string"?ko(r):r?ko(r.toString()):String(r)).join("|")})$`),t._zod.parse=(r,s)=>{const a=r.value;return n.has(a)||r.issues.push({code:"invalid_value",values:e.values,input:a,inst:t}),r}}),OF=ue("$ZodTransform",(t,e)=>{Ut.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new tR(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(n.value=l,n));if(s instanceof Promise)throw new So;return n.value=s,n}});function K1(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const yR=ue("$ZodOptional",(t,e)=>{Ut.init(t,e),t._zod.optin="optional",t._zod.optout="optional",mt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),mt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${yv(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>K1(a,n.value)):K1(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),IF=ue("$ZodExactOptional",(t,e)=>{yR.init(t,e),mt(t._zod,"values",()=>e.innerType._zod.values),mt(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,r)=>e.innerType._zod.run(n,r)}),NF=ue("$ZodNullable",(t,e)=>{Ut.init(t,e),mt(t._zod,"optin",()=>e.innerType._zod.optin),mt(t._zod,"optout",()=>e.innerType._zod.optout),mt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${yv(n.source)}|null)$`):void 0}),mt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),DF=ue("$ZodDefault",(t,e)=>{Ut.init(t,e),t._zod.optin="optional",mt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>G1(a,e)):G1(s,e)}});function G1(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const zF=ue("$ZodPrefault",(t,e)=>{Ut.init(t,e),t._zod.optin="optional",mt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),LF=ue("$ZodNonOptional",(t,e)=>{Ut.init(t,e),mt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>Q1(a,t)):Q1(s,t)}});function Q1(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const jF=ue("$ZodCatch",(t,e)=>{Ut.init(t,e),mt(t._zod,"optin",()=>e.innerType._zod.optin),mt(t._zod,"optout",()=>e.innerType._zod.optout),mt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(l=>sa(l,r,ra()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(a=>sa(a,r,ra()))},input:n.value}),n.issues=[]),n)}}),PF=ue("$ZodPipe",(t,e)=>{Ut.init(t,e),mt(t._zod,"values",()=>e.in._zod.values),mt(t._zod,"optin",()=>e.in._zod.optin),mt(t._zod,"optout",()=>e.out._zod.optout),mt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const a=e.out._zod.run(n,r);return a instanceof Promise?a.then(l=>jf(l,e.in,r)):jf(a,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(a=>jf(a,e.out,r)):jf(s,e.out,r)}});function jf(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const FF=ue("$ZodReadonly",(t,e)=>{Ut.init(t,e),mt(t._zod,"propValues",()=>e.innerType._zod.propValues),mt(t._zod,"values",()=>e.innerType._zod.values),mt(t._zod,"optin",()=>e.innerType?._zod?.optin),mt(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(Z1):Z1(s)}});function Z1(t){return t.value=Object.freeze(t.value),t}const $F=ue("$ZodCustom",(t,e)=>{Zr.init(t,e),Ut.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(a=>Y1(a,n,r,t));Y1(s,n,r,t)}});function Y1(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Pu(s))}}var J1;class BF{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];return this._map.set(e,r),r&&typeof r=="object"&&"id"in r&&this._idmap.set(r.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function UF(){return new BF}(J1=globalThis).__zod_globalRegistry??(J1.__zod_globalRegistry=UF());const Wl=globalThis.__zod_globalRegistry;function VF(t,e){return new t({type:"string",...Be(e)})}function qF(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Be(e)})}function W1(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Be(e)})}function HF(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Be(e)})}function KF(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Be(e)})}function GF(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Be(e)})}function QF(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Be(e)})}function ZF(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Be(e)})}function YF(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Be(e)})}function JF(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Be(e)})}function WF(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Be(e)})}function XF(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Be(e)})}function e$(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Be(e)})}function t$(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Be(e)})}function n$(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Be(e)})}function r$(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Be(e)})}function s$(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Be(e)})}function i$(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Be(e)})}function a$(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Be(e)})}function o$(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Be(e)})}function l$(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Be(e)})}function u$(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Be(e)})}function c$(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Be(e)})}function f$(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Be(e)})}function d$(t,e){return new t({type:"string",format:"date",check:"string_format",...Be(e)})}function h$(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Be(e)})}function p$(t,e){return new t({type:"string",format:"duration",check:"string_format",...Be(e)})}function m$(t){return new t({type:"unknown"})}function g$(t,e){return new t({type:"never",...Be(e)})}function vR(t,e){return new F5({check:"max_length",...Be(e),maximum:t})}function qd(t,e){return new $5({check:"min_length",...Be(e),minimum:t})}function bR(t,e){return new B5({check:"length_equals",...Be(e),length:t})}function y$(t,e){return new U5({check:"string_format",format:"regex",...Be(e),pattern:t})}function v$(t){return new V5({check:"string_format",format:"lowercase",...Be(t)})}function b$(t){return new q5({check:"string_format",format:"uppercase",...Be(t)})}function S$(t,e){return new H5({check:"string_format",format:"includes",...Be(e),includes:t})}function w$(t,e){return new K5({check:"string_format",format:"starts_with",...Be(e),prefix:t})}function x$(t,e){return new G5({check:"string_format",format:"ends_with",...Be(e),suffix:t})}function Lo(t){return new Q5({check:"overwrite",tx:t})}function _$(t){return Lo(e=>e.normalize(t))}function C$(){return Lo(t=>t.trim())}function E$(){return Lo(t=>t.toLowerCase())}function k$(){return Lo(t=>t.toUpperCase())}function R$(){return Lo(t=>GP(t))}function A$(t,e,n){return new t({type:"array",element:e,...Be(n)})}function T$(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Be(n)})}function M$(t){const e=O$(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Pu(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Pu(s))}},t(n.value,n)));return e}function O$(t,e){const n=new Zr({check:"custom",...Be(e)});return n._zod.check=t,n}function SR(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??Wl,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function cn(t,e,n={path:[],schemaPath:[]}){var r;const s=t._zod.def,a=e.seen.get(t);if(a)return a.count++,n.schemaPath.includes(t)&&(a.cycle=n.path),a.schema;const l={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,l);const c=t._zod.toJSONSchema?.();if(c)l.schema=c;else{const m={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,l.schema,m);else{const g=l.schema,y=e.processors[s.type];if(!y)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);y(t,e,g,m)}const p=t._zod.parent;p&&(l.ref||(l.ref=p),cn(p,e,m),e.seen.get(p).isParent=!0)}const f=e.metadataRegistry.get(t);return f&&Object.assign(l.schema,f),e.io==="input"&&bn(t)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(t).schema}function wR(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=new Map;for(const l of t.seen.entries()){const c=t.metadataRegistry.get(l[0])?.id;if(c){const f=r.get(c);if(f&&f!==l[0])throw new Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);r.set(c,l[0])}}const s=l=>{const c=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(l[0])?.id,g=t.external.uri??(S=>S);if(p)return{ref:g(p)};const y=l[1].defId??l[1].schema.id??`schema${t.counter++}`;return l[1].defId=y,{defId:y,ref:`${g("__shared")}#/${c}/${y}`}}if(l[1]===n)return{ref:"#"};const d=`#/${c}/`,m=l[1].schema.id??`__schema${t.counter++}`;return{defId:m,ref:d+m}},a=l=>{if(l[1].schema.$ref)return;const c=l[1],{ref:f,defId:d}=s(l);c.def={...c.schema},d&&(c.defId=d);const m=c.schema;for(const p in m)delete m[p];m.$ref=f};if(t.cycles==="throw")for(const l of t.seen.entries()){const c=l[1];if(c.cycle)throw new Error(`Cycle detected: #/${c.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of t.seen.entries()){const c=l[1];if(e===l[0]){a(l);continue}if(t.external){const d=t.external.registry.get(l[0])?.id;if(e!==l[0]&&d){a(l);continue}}if(t.metadataRegistry.get(l[0])?.id){a(l);continue}if(c.cycle){a(l);continue}if(c.count>1&&t.reused==="ref"){a(l);continue}}}function xR(t,e){const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=l=>{const c=t.seen.get(l);if(c.ref===null)return;const f=c.def??c.schema,d={...f},m=c.ref;if(c.ref=null,m){r(m);const g=t.seen.get(m),y=g.schema;if(y.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(f.allOf=f.allOf??[],f.allOf.push(y)):Object.assign(f,y),Object.assign(f,d),l._zod.parent===m)for(const w in f)w==="$ref"||w==="allOf"||w in d||delete f[w];if(y.$ref)for(const w in f)w==="$ref"||w==="allOf"||w in g.def&&JSON.stringify(f[w])===JSON.stringify(g.def[w])&&delete f[w]}const p=l._zod.parent;if(p&&p!==m){r(p);const g=t.seen.get(p);if(g?.schema.$ref&&(f.$ref=g.schema.$ref,g.def))for(const y in f)y==="$ref"||y==="allOf"||y in g.def&&JSON.stringify(f[y])===JSON.stringify(g.def[y])&&delete f[y]}t.override({zodSchema:l,jsonSchema:f,path:c.path??[]})};for(const l of[...t.seen.entries()].reverse())r(l[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const l=t.external.registry.get(e)?.id;if(!l)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(l)}Object.assign(s,n.def??n.schema);const a=t.external?.defs??{};for(const l of t.seen.entries()){const c=l[1];c.def&&c.defId&&(a[c.defId]=c.def)}t.external||Object.keys(a).length>0&&(t.target==="draft-2020-12"?s.$defs=a:s.definitions=a);try{const l=JSON.parse(JSON.stringify(s));return Object.defineProperty(l,"~standard",{value:{...e["~standard"],jsonSchema:{input:Hd(e,"input",t.processors),output:Hd(e,"output",t.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function bn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return bn(r.element,n);if(r.type==="set")return bn(r.valueType,n);if(r.type==="lazy")return bn(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return bn(r.innerType,n);if(r.type==="intersection")return bn(r.left,n)||bn(r.right,n);if(r.type==="record"||r.type==="map")return bn(r.keyType,n)||bn(r.valueType,n);if(r.type==="pipe")return bn(r.in,n)||bn(r.out,n);if(r.type==="object"){for(const s in r.shape)if(bn(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(bn(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(bn(s,n))return!0;return!!(r.rest&&bn(r.rest,n))}return!1}const I$=(t,e={})=>n=>{const r=SR({...n,processors:e});return cn(t,r),wR(r,t),xR(r,t)},Hd=(t,e,n={})=>r=>{const{libraryOptions:s,target:a}=r??{},l=SR({...s??{},target:a,io:e,processors:n});return cn(t,l),wR(l,t),xR(l,t)},N$={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},D$=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:a,maximum:l,format:c,patterns:f,contentEncoding:d}=t._zod.bag;if(typeof a=="number"&&(s.minLength=a),typeof l=="number"&&(s.maxLength=l),c&&(s.format=N$[c]??c,s.format===""&&delete s.format,c==="time"&&delete s.format),d&&(s.contentEncoding=d),f&&f.size>0){const m=[...f];m.length===1?s.pattern=m[0].source:m.length>1&&(s.allOf=[...m.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},z$=(t,e,n,r)=>{n.not={}},L$=(t,e,n,r)=>{},j$=(t,e,n,r)=>{const s=t._zod.def,a=rR(s.entries);a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),n.enum=a},P$=(t,e,n,r)=>{const s=t._zod.def,a=[];for(const l of s.values)if(l===void 0){if(e.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof l=="bigint"){if(e.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");a.push(Number(l))}else a.push(l);if(a.length!==0)if(a.length===1){const l=a[0];n.type=l===null?"null":typeof l,e.target==="draft-04"||e.target==="openapi-3.0"?n.enum=[l]:n.const=l}else a.every(l=>typeof l=="number")&&(n.type="number"),a.every(l=>typeof l=="string")&&(n.type="string"),a.every(l=>typeof l=="boolean")&&(n.type="boolean"),a.every(l=>l===null)&&(n.type="null"),n.enum=a},F$=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},$$=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},B$=(t,e,n,r)=>{const s=n,a=t._zod.def,{minimum:l,maximum:c}=t._zod.bag;typeof l=="number"&&(s.minItems=l),typeof c=="number"&&(s.maxItems=c),s.type="array",s.items=cn(a.element,e,{...r,path:[...r.path,"items"]})},U$=(t,e,n,r)=>{const s=n,a=t._zod.def;s.type="object",s.properties={};const l=a.shape;for(const d in l)s.properties[d]=cn(l[d],e,{...r,path:[...r.path,"properties",d]});const c=new Set(Object.keys(l)),f=new Set([...c].filter(d=>{const m=a.shape[d]._zod;return e.io==="input"?m.optin===void 0:m.optout===void 0}));f.size>0&&(s.required=Array.from(f)),a.catchall?._zod.def.type==="never"?s.additionalProperties=!1:a.catchall?a.catchall&&(s.additionalProperties=cn(a.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},V$=(t,e,n,r)=>{const s=t._zod.def,a=s.inclusive===!1,l=s.options.map((c,f)=>cn(c,e,{...r,path:[...r.path,a?"oneOf":"anyOf",f]}));a?n.oneOf=l:n.anyOf=l},q$=(t,e,n,r)=>{const s=t._zod.def,a=cn(s.left,e,{...r,path:[...r.path,"allOf",0]}),l=cn(s.right,e,{...r,path:[...r.path,"allOf",1]}),c=d=>"allOf"in d&&Object.keys(d).length===1,f=[...c(a)?a.allOf:[a],...c(l)?l.allOf:[l]];n.allOf=f},H$=(t,e,n,r)=>{const s=t._zod.def,a=cn(s.innerType,e,r),l=e.seen.get(t);e.target==="openapi-3.0"?(l.ref=s.innerType,n.nullable=!0):n.anyOf=[a,{type:"null"}]},K$=(t,e,n,r)=>{const s=t._zod.def;cn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},G$=(t,e,n,r)=>{const s=t._zod.def;cn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},Q$=(t,e,n,r)=>{const s=t._zod.def;cn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},Z$=(t,e,n,r)=>{const s=t._zod.def;cn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=l},Y$=(t,e,n,r)=>{const s=t._zod.def,a=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;cn(a,e,r);const l=e.seen.get(t);l.ref=a},J$=(t,e,n,r)=>{const s=t._zod.def;cn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType,n.readOnly=!0},_R=(t,e,n,r)=>{const s=t._zod.def;cn(s.innerType,e,r);const a=e.seen.get(t);a.ref=s.innerType},W$=ue("ZodISODateTime",(t,e)=>{lF.init(t,e),Mt.init(t,e)});function X$(t){return f$(W$,t)}const e6=ue("ZodISODate",(t,e)=>{uF.init(t,e),Mt.init(t,e)});function t6(t){return d$(e6,t)}const n6=ue("ZodISOTime",(t,e)=>{cF.init(t,e),Mt.init(t,e)});function r6(t){return h$(n6,t)}const s6=ue("ZodISODuration",(t,e)=>{fF.init(t,e),Mt.init(t,e)});function i6(t){return p$(s6,t)}const a6=(t,e)=>{lR.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>i5(t,n)},flatten:{value:n=>s5(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,Yy,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,Yy,2)}},isEmpty:{get(){return t.issues.length===0}}})},Er=ue("ZodError",a6,{Parent:Error}),o6=bv(Er),l6=Sv(Er),u6=bh(Er),c6=Sh(Er),f6=l5(Er),d6=u5(Er),h6=c5(Er),p6=f5(Er),m6=d5(Er),g6=h5(Er),y6=p5(Er),v6=m5(Er),Vt=ue("ZodType",(t,e)=>(Ut.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:Hd(t,"input"),output:Hd(t,"output")}}),t.toJSONSchema=I$(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(gi(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),{parent:!0}),t.with=t.check,t.clone=(n,r)=>yi(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>o6(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>u6(t,n,r),t.parseAsync=async(n,r)=>l6(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>c6(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>f6(t,n,r),t.decode=(n,r)=>d6(t,n,r),t.encodeAsync=async(n,r)=>h6(t,n,r),t.decodeAsync=async(n,r)=>p6(t,n,r),t.safeEncode=(n,r)=>m6(t,n,r),t.safeDecode=(n,r)=>g6(t,n,r),t.safeEncodeAsync=async(n,r)=>y6(t,n,r),t.safeDecodeAsync=async(n,r)=>v6(t,n,r),t.refine=(n,r)=>t.check(cB(n,r)),t.superRefine=n=>t.check(fB(n)),t.overwrite=n=>t.check(Lo(n)),t.optional=()=>tC(t),t.exactOptional=()=>J6(t),t.nullable=()=>nC(t),t.nullish=()=>tC(nC(t)),t.nonoptional=n=>rB(t,n),t.array=()=>B6(t),t.or=n=>kR([t,n]),t.and=n=>K6(t,n),t.transform=n=>rC(t,Z6(n)),t.default=n=>eB(t,n),t.prefault=n=>nB(t,n),t.catch=n=>iB(t,n),t.pipe=n=>rC(t,n),t.readonly=()=>lB(t),t.describe=n=>{const r=t.clone();return Wl.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return Wl.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Wl.get(t);const r=t.clone();return Wl.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),CR=ue("_ZodString",(t,e)=>{wv.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>D$(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(y$(...r)),t.includes=(...r)=>t.check(S$(...r)),t.startsWith=(...r)=>t.check(w$(...r)),t.endsWith=(...r)=>t.check(x$(...r)),t.min=(...r)=>t.check(qd(...r)),t.max=(...r)=>t.check(vR(...r)),t.length=(...r)=>t.check(bR(...r)),t.nonempty=(...r)=>t.check(qd(1,...r)),t.lowercase=r=>t.check(v$(r)),t.uppercase=r=>t.check(b$(r)),t.trim=()=>t.check(C$()),t.normalize=(...r)=>t.check(_$(...r)),t.toLowerCase=()=>t.check(E$()),t.toUpperCase=()=>t.check(k$()),t.slugify=()=>t.check(R$())}),b6=ue("ZodString",(t,e)=>{wv.init(t,e),CR.init(t,e),t.email=n=>t.check(qF(S6,n)),t.url=n=>t.check(ZF(w6,n)),t.jwt=n=>t.check(c$(L6,n)),t.emoji=n=>t.check(YF(x6,n)),t.guid=n=>t.check(W1(X1,n)),t.uuid=n=>t.check(HF(Pf,n)),t.uuidv4=n=>t.check(KF(Pf,n)),t.uuidv6=n=>t.check(GF(Pf,n)),t.uuidv7=n=>t.check(QF(Pf,n)),t.nanoid=n=>t.check(JF(_6,n)),t.guid=n=>t.check(W1(X1,n)),t.cuid=n=>t.check(WF(C6,n)),t.cuid2=n=>t.check(XF(E6,n)),t.ulid=n=>t.check(e$(k6,n)),t.base64=n=>t.check(o$(N6,n)),t.base64url=n=>t.check(l$(D6,n)),t.xid=n=>t.check(t$(R6,n)),t.ksuid=n=>t.check(n$(A6,n)),t.ipv4=n=>t.check(r$(T6,n)),t.ipv6=n=>t.check(s$(M6,n)),t.cidrv4=n=>t.check(i$(O6,n)),t.cidrv6=n=>t.check(a$(I6,n)),t.e164=n=>t.check(u$(z6,n)),t.datetime=n=>t.check(X$(n)),t.date=n=>t.check(t6(n)),t.time=n=>t.check(r6(n)),t.duration=n=>t.check(i6(n))});function Cn(t){return VF(b6,t)}const Mt=ue("ZodStringFormat",(t,e)=>{Tt.init(t,e),CR.init(t,e)}),S6=ue("ZodEmail",(t,e)=>{X5.init(t,e),Mt.init(t,e)}),X1=ue("ZodGUID",(t,e)=>{J5.init(t,e),Mt.init(t,e)}),Pf=ue("ZodUUID",(t,e)=>{W5.init(t,e),Mt.init(t,e)}),w6=ue("ZodURL",(t,e)=>{eF.init(t,e),Mt.init(t,e)}),x6=ue("ZodEmoji",(t,e)=>{tF.init(t,e),Mt.init(t,e)}),_6=ue("ZodNanoID",(t,e)=>{nF.init(t,e),Mt.init(t,e)}),C6=ue("ZodCUID",(t,e)=>{rF.init(t,e),Mt.init(t,e)}),E6=ue("ZodCUID2",(t,e)=>{sF.init(t,e),Mt.init(t,e)}),k6=ue("ZodULID",(t,e)=>{iF.init(t,e),Mt.init(t,e)}),R6=ue("ZodXID",(t,e)=>{aF.init(t,e),Mt.init(t,e)}),A6=ue("ZodKSUID",(t,e)=>{oF.init(t,e),Mt.init(t,e)}),T6=ue("ZodIPv4",(t,e)=>{dF.init(t,e),Mt.init(t,e)}),M6=ue("ZodIPv6",(t,e)=>{hF.init(t,e),Mt.init(t,e)}),O6=ue("ZodCIDRv4",(t,e)=>{pF.init(t,e),Mt.init(t,e)}),I6=ue("ZodCIDRv6",(t,e)=>{mF.init(t,e),Mt.init(t,e)}),N6=ue("ZodBase64",(t,e)=>{gF.init(t,e),Mt.init(t,e)}),D6=ue("ZodBase64URL",(t,e)=>{vF.init(t,e),Mt.init(t,e)}),z6=ue("ZodE164",(t,e)=>{bF.init(t,e),Mt.init(t,e)}),L6=ue("ZodJWT",(t,e)=>{wF.init(t,e),Mt.init(t,e)}),j6=ue("ZodUnknown",(t,e)=>{xF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>L$()});function eC(){return m$(j6)}const P6=ue("ZodNever",(t,e)=>{_F.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>z$(t,n,r)});function F6(t){return g$(P6,t)}const $6=ue("ZodArray",(t,e)=>{CF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>B$(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(qd(n,r)),t.nonempty=n=>t.check(qd(1,n)),t.max=(n,r)=>t.check(vR(n,r)),t.length=(n,r)=>t.check(bR(n,r)),t.unwrap=()=>t.element});function B6(t,e){return A$($6,t,e)}const U6=ue("ZodObject",(t,e)=>{kF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>U$(t,n,r,s),mt(t,"shape",()=>e.shape),t.keyof=()=>RR(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:eC()}),t.loose=()=>t.clone({...t._zod.def,catchall:eC()}),t.strict=()=>t.clone({...t._zod.def,catchall:F6()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>XP(t,n),t.safeExtend=n=>e5(t,n),t.merge=n=>t5(t,n),t.pick=n=>JP(t,n),t.omit=n=>WP(t,n),t.partial=(...n)=>n5(AR,t,n[0]),t.required=(...n)=>r5(TR,t,n[0])});function Es(t,e){const n={type:"object",shape:t??{},...Be(e)};return new U6(n)}const ER=ue("ZodUnion",(t,e)=>{gR.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>V$(t,n,r,s),t.options=e.options});function kR(t,e){return new ER({type:"union",options:t,...Be(e)})}const V6=ue("ZodDiscriminatedUnion",(t,e)=>{ER.init(t,e),RF.init(t,e)});function q6(t,e,n){return new V6({type:"union",options:e,discriminator:t,...Be(n)})}const H6=ue("ZodIntersection",(t,e)=>{AF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>q$(t,n,r,s)});function K6(t,e){return new H6({type:"intersection",left:t,right:e})}const Wy=ue("ZodEnum",(t,e)=>{TF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(r,s,a)=>j$(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const a={};for(const l of r)if(n.has(l))a[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Wy({...e,checks:[],...Be(s),entries:a})},t.exclude=(r,s)=>{const a={...e.entries};for(const l of r)if(n.has(l))delete a[l];else throw new Error(`Key ${l} not found in enum`);return new Wy({...e,checks:[],...Be(s),entries:a})}});function RR(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Wy({type:"enum",entries:n,...Be(e)})}const G6=ue("ZodLiteral",(t,e)=>{MF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>P$(t,n,r),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function xh(t,e){return new G6({type:"literal",values:Array.isArray(t)?t:[t],...Be(e)})}const Q6=ue("ZodTransform",(t,e)=>{OF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>$$(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new tR(t.constructor.name);n.addIssue=a=>{if(typeof a=="string")n.issues.push(Pu(a,n.value,e));else{const l=a;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(Pu(l))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(a=>(n.value=a,n)):(n.value=s,n)}});function Z6(t){return new Q6({type:"transform",transform:t})}const AR=ue("ZodOptional",(t,e)=>{yR.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>_R(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function tC(t){return new AR({type:"optional",innerType:t})}const Y6=ue("ZodExactOptional",(t,e)=>{IF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>_R(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function J6(t){return new Y6({type:"optional",innerType:t})}const W6=ue("ZodNullable",(t,e)=>{NF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>H$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function nC(t){return new W6({type:"nullable",innerType:t})}const X6=ue("ZodDefault",(t,e)=>{DF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>G$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function eB(t,e){return new X6({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():iR(e)}})}const tB=ue("ZodPrefault",(t,e)=>{zF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Q$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function nB(t,e){return new tB({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():iR(e)}})}const TR=ue("ZodNonOptional",(t,e)=>{LF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>K$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function rB(t,e){return new TR({type:"nonoptional",innerType:t,...Be(e)})}const sB=ue("ZodCatch",(t,e)=>{jF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Z$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function iB(t,e){return new sB({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const aB=ue("ZodPipe",(t,e)=>{PF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Y$(t,n,r,s),t.in=e.in,t.out=e.out});function rC(t,e){return new aB({type:"pipe",in:t,out:e})}const oB=ue("ZodReadonly",(t,e)=>{FF.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>J$(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function lB(t){return new oB({type:"readonly",innerType:t})}const uB=ue("ZodCustom",(t,e)=>{$F.init(t,e),Vt.init(t,e),t._zod.processJSONSchema=(n,r,s)=>F$(t,n)});function cB(t,e={}){return T$(uB,t,e)}function fB(t){return M$(t)}const dB=Es({category:xh("database"),name:Cn().min(1,"Connection name is required"),driver:RR(["postgres","mysql","sqlite","sqlserver","oracle"]),dsn:Cn().min(1,"Connection string is required")}),hB=Es({storageProvider:xh("s3"),name:Cn().min(1,"Connection name is required"),s3Region:Cn(),s3AccessKeyId:Cn().min(1,"Access Key ID is required"),s3SecretAccessKey:Cn().min(1,"Secret Access Key is required"),s3Endpoint:Cn().optional()}),pB=Es({storageProvider:xh("azure-blob"),name:Cn().min(1,"Connection name is required"),azureAccountName:Cn().min(1,"Account Name is required"),azureAccountKey:Cn().optional(),azureConnectionString:Cn().optional()}).refine(t=>!!t.azureAccountKey||!!t.azureConnectionString,{message:"Either Account Key or Connection String is required",path:["azureAccountKey"]}),mB=Es({category:xh("storage")}).and(q6("storageProvider",[hB,pB])),gB=kR([dB,mB]),yB={postgres:{label:"PostgreSQL",placeholder:"postgres://user:password@localhost:5432/database"},mysql:{label:"MySQL",placeholder:"user:password@tcp(localhost:3306)/database"},sqlite:{label:"SQLite",placeholder:"/path/to/database.db"},sqlserver:{label:"SQL Server",placeholder:"sqlserver://user:password@localhost:1433?database=mydb"},oracle:{label:"Oracle",placeholder:"oracle://user:password@localhost:1521/service_name"}},sC={postgres:{active:"bg-blue-500/10 border-blue-500/50 text-blue-600 dark:text-blue-400",label:"PG"},mysql:{active:"bg-yellow-500/10 border-yellow-500/50 text-yellow-600 dark:text-yellow-400",label:"MySQL"},sqlite:{active:"bg-purple-500/10 border-purple-500/50 text-purple-600 dark:text-purple-400",label:"SQLite"},sqlserver:{active:"bg-red-500/10 border-red-500/50 text-red-600 dark:text-red-400",label:"MSSQL"},oracle:{active:"bg-orange-500/10 border-orange-500/50 text-orange-600 dark:text-orange-400",label:"Oracle"}},Og={s3:{label:"Amazon S3",color:"bg-orange-500/10 border-orange-500/50 text-orange-600 dark:text-orange-400"},"azure-blob":{label:"Azure Blob",color:"bg-blue-500/10 border-blue-500/50 text-blue-600 dark:text-blue-400"}},no="w-full px-3 py-2 text-sm text-neutral-800 dark:text-neutral-100 placeholder-neutral-400 dark:placeholder-neutral-500 bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-colors",$l=`${no} font-mono`,Xs="text-[10px] text-red-500 dark:text-red-400 mt-1";function vB(t){const e={category:"database",name:"",driver:"postgres",dsn:"",storageProvider:"s3",s3Region:"",s3AccessKeyId:"",s3SecretAccessKey:"",s3Endpoint:"",azureAccountName:"",azureAccountKey:"",azureConnectionString:""};return t?t.sql?{...e,category:"database",name:t.name,driver:t.sql.driver,dsn:t.sql.dsn}:t.amazonS3?{...e,category:"storage",name:t.name,storageProvider:"s3",s3Region:t.amazonS3.region,s3AccessKeyId:t.amazonS3.accessKeyId,s3SecretAccessKey:t.amazonS3.secretAccessKey,s3Endpoint:t.amazonS3.endpoint??""}:t.azureBlob?{...e,category:"storage",name:t.name,storageProvider:"azure-blob",azureAccountName:t.azureBlob.accountName,azureAccountKey:t.azureBlob.accountKey??"",azureConnectionString:t.azureBlob.connectionString??""}:{...e,name:t.name}:e}function iC(t){const e=gB.safeParse(t);if(e.success)return;const n={};for(const r of e.error.issues){const s=r.path.join(".");s&&!n[s]&&(n[s]=r.message)}return Object.keys(n).length>0?n:void 0}function bB({connection:t,onSave:e,onClose:n}){const[r,s]=U.useState("idle"),[a,l]=U.useState(null),[c,f]=U.useState({}),d=!!t,m=S=>S.category==="database"?{name:S.name,sql:{driver:S.driver,dsn:S.dsn}}:S.storageProvider==="s3"?{name:S.name,amazonS3:{region:S.s3Region||"us-east-1",accessKeyId:S.s3AccessKeyId,secretAccessKey:S.s3SecretAccessKey,...S.s3Endpoint&&{endpoint:S.s3Endpoint}}}:{name:S.name,azureBlob:{accountName:S.azureAccountName,...S.azureAccountKey&&{accountKey:S.azureAccountKey},...S.azureConnectionString&&{connectionString:S.azureConnectionString}}},p=KP({defaultValues:vB(t),onSubmit:async({value:S})=>{const w=iC(S);if(w){f(w);return}f({}),await e(m(S)),n()}}),g=()=>{s("idle"),l(null)},y=async()=>{const S=p.state.values,w=iC(S);if(w){f(w);return}f({}),s("testing"),l(null);let E=null;try{const _=m(S),k={..._,id:t?.id||crypto.randomUUID(),createdAt:t?.createdAt||new Date().toISOString()},R=t?.id?`/connections/${encodeURIComponent(t.id)}`:"/connections",O=t?.id?"PUT":"POST",L=await fetch(R,{method:O,headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(!L.ok){const A=await L.json();throw new Error(A.message||"Failed to save connection")}if(E=k,S.category==="database"){const z=await(await fetch(`/sql/${E.id}/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"SELECT 1",params:[]})})).json();if(z.message)throw new Error(z.message)}else{const A=await fetch(`/storage/${E.id}/containers`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!A.ok){const z=await A.json();throw new Error(z.message||"Connection failed")}}s("success"),await e(_),setTimeout(()=>n(),500)}catch(_){if(s("error"),l(_ instanceof Error?_.message:"Connection failed"),E&&!t?.id)try{await fetch(`/connections/${encodeURIComponent(E.id)}`,{method:"DELETE"})}catch{}}};return x.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[x.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:n}),x.jsx("div",{className:"relative w-full max-w-md bg-white dark:bg-[#1a1a1a] rounded-2xl shadow-2xl border border-neutral-200 dark:border-white/10 overflow-hidden",children:x.jsxs("form",{onSubmit:S=>{S.preventDefault(),S.stopPropagation(),p.handleSubmit()},className:"p-5 space-y-4",children:[x.jsx(p.Subscribe,{selector:S=>S.values,children:S=>x.jsxs(x.Fragment,{children:[!d&&x.jsxs("div",{className:"flex gap-2 p-1 bg-neutral-100 dark:bg-white/5 rounded-xl -mt-1",children:[x.jsxs("button",{type:"button",onClick:()=>{p.setFieldValue("category","database"),g()},className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${S.category==="database"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:[x.jsx(Mu,{className:"w-4 h-4"}),"Database"]}),x.jsxs("button",{type:"button",onClick:()=>{p.setFieldValue("category","storage"),g()},className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${S.category==="storage"?"bg-white dark:bg-white/10 text-neutral-800 dark:text-neutral-100 shadow-sm":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:[x.jsx(WD,{className:"w-4 h-4"}),"Storage"]})]}),S.category==="database"&&x.jsxs(x.Fragment,{children:[!d&&x.jsx(p.Field,{name:"driver",children:w=>x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Database Type"}),x.jsx("div",{className:"grid grid-cols-5 gap-1.5",children:Object.keys(yB).map(E=>x.jsx("button",{type:"button",onClick:()=>{w.handleChange(E),g()},className:`px-2 py-2 text-[10px] font-semibold rounded-lg border transition-all ${S.driver===E?sC[E].active:"bg-neutral-50 dark:bg-white/5 border-neutral-200 dark:border-white/10 text-neutral-500 hover:bg-neutral-100 dark:hover:bg-white/10"}`,children:sC[E].label},E))})]})}),x.jsx(p.Field,{name:"name",children:w=>x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Connection Name"}),x.jsx("input",{type:"text",placeholder:"My Database",value:w.state.value,onChange:E=>w.handleChange(E.target.value),onBlur:w.handleBlur,className:no,autoFocus:!0}),c.name&&x.jsx("p",{className:Xs,children:c.name})]})}),x.jsx(p.Field,{name:"dsn",children:w=>x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Connection String"}),x.jsx("input",{type:"text",value:w.state.value,onChange:E=>{w.handleChange(E.target.value),g()},onBlur:w.handleBlur,className:$l}),c.dsn&&x.jsx("p",{className:Xs,children:c.dsn})]})})]}),S.category==="storage"&&x.jsxs(x.Fragment,{children:[!d&&x.jsx(p.Field,{name:"storageProvider",children:w=>x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Storage Provider"}),x.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:Object.keys(Og).map(E=>x.jsx("button",{type:"button",onClick:()=>{w.handleChange(E),g()},className:`px-3 py-2 text-xs font-semibold rounded-lg border transition-all ${S.storageProvider===E?Og[E].color:"bg-neutral-50 dark:bg-white/5 border-neutral-200 dark:border-white/10 text-neutral-500 hover:bg-neutral-100 dark:hover:bg-white/10"}`,children:Og[E].label},E))})]})}),x.jsx(p.Field,{name:"name",children:w=>x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Connection Name"}),x.jsx("input",{type:"text",placeholder:"My Storage",value:w.state.value,onChange:E=>w.handleChange(E.target.value),onBlur:w.handleBlur,className:no,autoFocus:!0}),c.name&&x.jsx("p",{className:Xs,children:c.name})]})}),S.storageProvider==="s3"&&x.jsxs(x.Fragment,{children:[x.jsx(p.Field,{name:"s3Endpoint",children:w=>x.jsxs("div",{className:"space-y-1.5",children:[x.jsxs("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:["Custom Endpoint ",x.jsx("span",{className:"text-neutral-400",children:"(optional)"})]}),x.jsx("input",{type:"text",placeholder:"https://s3.example.com",value:w.state.value,onChange:E=>{w.handleChange(E.target.value),g()},onBlur:w.handleBlur,className:no})]})}),x.jsx(p.Field,{name:"s3Region",children:w=>x.jsxs("div",{className:"space-y-1.5",children:[x.jsxs("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:["Region ",x.jsx("span",{className:"text-neutral-400",children:"(optional)"})]}),x.jsx("input",{type:"text",placeholder:"us-east-1",value:w.state.value,onChange:E=>{w.handleChange(E.target.value),g()},onBlur:w.handleBlur,className:no}),c.s3Region&&x.jsx("p",{className:Xs,children:c.s3Region})]})}),x.jsx(p.Field,{name:"s3AccessKeyId",children:w=>x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Access Key ID"}),x.jsx("input",{type:"text",placeholder:"AKIAIOSFODNN7EXAMPLE",value:w.state.value,onChange:E=>{w.handleChange(E.target.value),g()},onBlur:w.handleBlur,className:$l}),c.s3AccessKeyId&&x.jsx("p",{className:Xs,children:c.s3AccessKeyId})]})}),x.jsx(p.Field,{name:"s3SecretAccessKey",children:w=>x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Secret Access Key"}),x.jsx("input",{type:"password",placeholder:"",value:w.state.value,onChange:E=>{w.handleChange(E.target.value),g()},onBlur:w.handleBlur,className:$l}),c.s3SecretAccessKey&&x.jsx("p",{className:Xs,children:c.s3SecretAccessKey})]})})]}),S.storageProvider==="azure-blob"&&x.jsxs(x.Fragment,{children:[x.jsx(p.Field,{name:"azureAccountName",children:w=>x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:"Storage Account Name"}),x.jsx("input",{type:"text",placeholder:"mystorageaccount",value:w.state.value,onChange:E=>{w.handleChange(E.target.value),g()},onBlur:w.handleBlur,className:no}),c.azureAccountName&&x.jsx("p",{className:Xs,children:c.azureAccountName})]})}),x.jsx(p.Field,{name:"azureAccountKey",children:w=>x.jsxs("div",{className:"space-y-1.5",children:[x.jsxs("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:["Account Key ",x.jsx("span",{className:"text-neutral-400",children:"(or use connection string)"})]}),x.jsx("input",{type:"password",placeholder:"",value:w.state.value,onChange:E=>{w.handleChange(E.target.value),g()},onBlur:w.handleBlur,className:$l}),c.azureAccountKey&&x.jsx("p",{className:Xs,children:c.azureAccountKey})]})}),x.jsx(p.Field,{name:"azureConnectionString",children:w=>x.jsxs("div",{className:"space-y-1.5",children:[x.jsxs("label",{className:"block text-xs font-medium text-neutral-600 dark:text-neutral-400",children:["Connection String ",x.jsx("span",{className:"text-neutral-400",children:"(alternative)"})]}),x.jsx("input",{type:"password",placeholder:"DefaultEndpointsProtocol=https;AccountName=...",value:w.state.value,onChange:E=>{w.handleChange(E.target.value),g()},onBlur:w.handleBlur,className:$l})]})})]})]})]})}),r==="success"&&x.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:" Connection successful"}),r==="error"&&a&&x.jsx("p",{className:"text-xs text-red-500 dark:text-red-400 break-all",children:a}),x.jsx(p.Subscribe,{selector:S=>S.values,children:S=>{const w=S.name?S.category==="database"?!!S.dsn:S.storageProvider==="s3"?!!S.s3AccessKeyId&&!!S.s3SecretAccessKey:!!S.azureAccountName&&(!!S.azureAccountKey||!!S.azureConnectionString):!1;return x.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[x.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors",children:"Cancel"}),x.jsxs("button",{type:"button",onClick:y,disabled:!w||r==="testing",className:"flex items-center gap-2 px-5 py-2 text-sm font-medium bg-neutral-800 dark:bg-neutral-200 text-white dark:text-neutral-900 rounded-lg hover:bg-neutral-700 dark:hover:bg-neutral-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r==="testing"&&x.jsx(na,{className:"w-4 h-4 animate-spin"}),r==="testing"?"Saving...":"Save"]})]})}})]})})]})}async function SB(t){const e=await fetch(`/storage/${encodeURIComponent(t)}/containers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!e.ok){const n=await e.json();throw new Error(n.message||"Failed to list containers")}return e.json()}async function wB(t,e){const n=await fetch(`/storage/${encodeURIComponent(t)}/containers/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to create container")}}async function _h(t,e,n={}){const r=await fetch(`/storage/${encodeURIComponent(t)}/objects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({container:e,prefix:n.prefix||"",delimiter:n.delimiter??"/",maxKeys:n.maxKeys||1e3,continuationToken:n.continuationToken})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to list objects")}return r.json()}async function xB(t,e,n){const r=await fetch(`/storage/${encodeURIComponent(t)}/object/details`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({container:e,key:n})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to get object details")}return r.json()}async function _B(t,e,n,r=3600){const s=await fetch(`/storage/${encodeURIComponent(t)}/object/presign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({container:e,key:n,expiresIn:r})});if(!s.ok){const l=await s.json();throw new Error(l.message||"Failed to generate presigned URL")}return(await s.json()).url}async function CB(t,e,n,r){const s=new FormData;s.append("file",r),s.append("container",e),s.append("key",n);const a=await fetch(`/storage/${encodeURIComponent(t)}/upload`,{method:"POST",body:s});if(!a.ok){const l=await a.json();throw new Error(l.message||"Failed to upload file")}}async function MR(t,e,n){const r=await fetch(`/storage/${encodeURIComponent(t)}/object/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({container:e,keys:n})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to delete objects")}}async function OR(t,e,n){const r=await _h(t,e,{prefix:n,delimiter:"",maxKeys:1e3});if(r.objects.length===0)return;const s=r.objects.map(a=>a.key);await MR(t,e,s),r.isTruncated&&await OR(t,e,n)}function EB(t){const e=t.split("/").filter(Boolean);return e.length<=1?"":e.slice(0,-1).join("/")}function Fu(t){const e=t.split("/").filter(Boolean);return e[e.length-1]||t}function IR(t){if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB","TB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(2))} ${n[r]}`}function kB(t){const e=Fu(t),n=e.lastIndexOf(".");return n>0?e.slice(n+1).toLowerCase():""}function NR(t){if(t.endsWith("/"))return"folder";const e=kB(t),n=["jpg","jpeg","png","gif","webp","svg","ico","bmp"],r=["pdf","doc","docx","xls","xlsx","ppt","pptx","txt","csv"],s=["js","ts","jsx","tsx","html","css","json","xml","yaml","yml","md","py","go","rs","java"],a=["zip","tar","gz","rar","7z","bz2"];return n.includes(e)?"image":r.includes(e)?"document":s.includes(e)?"code":a.includes(e)?"archive":"file"}function RB(t){return t?{"application/json":"JSON","application/xml":"XML","application/pdf":"PDF","application/zip":"ZIP Archive","application/gzip":"GZIP Archive","text/plain":"Plain Text","text/html":"HTML","text/css":"CSS","text/javascript":"JavaScript","image/jpeg":"JPEG Image","image/png":"PNG Image","image/gif":"GIF Image","image/webp":"WebP Image","image/svg+xml":"SVG Image"}[t]||t:"Unknown"}function AB(t){const e=tn.c(69),{connection:n,onClose:r}=t,s=Mo(),[a,l]=U.useState(""),c=n.amazonS3?"Bucket":"Container";let f;e[0]!==n.id?(f=q=>wB(n.id,q),e[0]=n.id,e[1]=f):f=e[1];let d;e[2]!==n.id||e[3]!==r||e[4]!==s?(d=()=>{s.invalidateQueries({queryKey:["storage-containers",n.id]}),r()},e[2]=n.id,e[3]=r,e[4]=s,e[5]=d):d=e[5];let m;e[6]!==f||e[7]!==d?(m={mutationFn:f,onSuccess:d},e[6]=f,e[7]=d,e[8]=m):m=e[8];const p=Au(m);let g;e[9]!==p||e[10]!==a?(g=q=>{q.preventDefault(),a.trim()&&p.mutate(a.trim())},e[9]=p,e[10]=a,e[11]=g):g=e[11];const y=g;let S;e[12]!==r?(S=x.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:r}),e[12]=r,e[13]=S):S=e[13];let w;e[14]===Symbol.for("react.memo_cache_sentinel")?(w=x.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:x.jsx(Sk,{className:"w-4 h-4 text-blue-500"})}),e[14]=w):w=e[14];let E;e[15]!==c?(E=x.jsxs("div",{className:"flex items-center gap-3",children:[w,x.jsxs("h2",{className:"text-base font-semibold text-neutral-900 dark:text-neutral-100",children:["Create ",c]})]}),e[15]=c,e[16]=E):E=e[16];let _;e[17]===Symbol.for("react.memo_cache_sentinel")?(_=x.jsx(hh,{className:"w-4 h-4 text-neutral-500"}),e[17]=_):_=e[17];let k;e[18]!==r?(k=x.jsx("button",{onClick:r,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:_}),e[18]=r,e[19]=k):k=e[19];let R;e[20]!==E||e[21]!==k?(R=x.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-neutral-200 dark:border-neutral-800",children:[E,k]}),e[20]=E,e[21]=k,e[22]=R):R=e[22];let O;e[23]!==n.name?(O=x.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Creating in ",x.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:n.name})]}),e[23]=n.name,e[24]=O):O=e[24];let L;e[25]!==c?(L=x.jsxs("label",{className:"text-xs font-medium text-neutral-600 dark:text-neutral-400",children:[c," Name"]}),e[25]=c,e[26]=L):L=e[26];let A;e[27]===Symbol.for("react.memo_cache_sentinel")?(A=q=>l(q.target.value),e[27]=A):A=e[27];let z;e[28]!==c?(z=c.toLowerCase(),e[28]=c,e[29]=z):z=e[29];const P=`my-${z}`;let j;e[30]!==p.isPending||e[31]!==a||e[32]!==P?(j=x.jsx("input",{type:"text",value:a,onChange:A,placeholder:P,className:"w-full px-3 py-2 text-sm border border-neutral-200 dark:border-neutral-700 rounded-lg bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500",autoFocus:!0,disabled:p.isPending}),e[30]=p.isPending,e[31]=a,e[32]=P,e[33]=j):j=e[33];const I=n.amazonS3?"Bucket names must be globally unique and follow S3 naming rules":"Container names must be lowercase and can contain letters, numbers, and hyphens";let F;e[34]!==I?(F=x.jsx("p",{className:"text-[11px] text-neutral-400 dark:text-neutral-500",children:I}),e[34]=I,e[35]=F):F=e[35];let G;e[36]!==L||e[37]!==j||e[38]!==F?(G=x.jsxs("div",{className:"space-y-1.5",children:[L,j,F]}),e[36]=L,e[37]=j,e[38]=F,e[39]=G):G=e[39];let J;e[40]!==p.error?(J=p.error&&x.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:x.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:p.error instanceof Error?p.error.message:"Failed to create container"})}),e[40]=p.error,e[41]=J):J=e[41];let te;e[42]!==p.isPending||e[43]!==r?(te=x.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-lg transition-colors",disabled:p.isPending,children:"Cancel"}),e[42]=p.isPending,e[43]=r,e[44]=te):te=e[44];let H;e[45]!==p.isPending||e[46]!==a?(H=!a.trim()||p.isPending,e[45]=p.isPending,e[46]=a,e[47]=H):H=e[47];let $;e[48]!==p.isPending?($=p.isPending&&x.jsx(na,{className:"w-3.5 h-3.5 animate-spin"}),e[48]=p.isPending,e[49]=$):$=e[49];let W;e[50]!==c||e[51]!==H||e[52]!==$?(W=x.jsxs("button",{type:"submit",disabled:H,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors flex items-center gap-2",children:[$,"Create ",c]}),e[50]=c,e[51]=H,e[52]=$,e[53]=W):W=e[53];let oe;e[54]!==te||e[55]!==W?(oe=x.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[te,W]}),e[54]=te,e[55]=W,e[56]=oe):oe=e[56];let Q;e[57]!==y||e[58]!==O||e[59]!==G||e[60]!==J||e[61]!==oe?(Q=x.jsxs("form",{onSubmit:y,className:"p-5 space-y-4",children:[O,G,J,oe]}),e[57]=y,e[58]=O,e[59]=G,e[60]=J,e[61]=oe,e[62]=Q):Q=e[62];let N;e[63]!==R||e[64]!==Q?(N=x.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-neutral-900 rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[R,Q]}),e[63]=R,e[64]=Q,e[65]=N):N=e[65];let D;return e[66]!==N||e[67]!==S?(D=x.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[S,N]}),e[66]=N,e[67]=S,e[68]=D):D=e[68],D}const TB={driver:"postgres",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT datname FROM pg_database WHERE datistemplate = false ORDER BY datname"},listTablesQuery(){return"SELECT tablename FROM pg_tables WHERE schemaname = 'public' ORDER BY tablename"},listColumnsQuery(t){return`
      SELECT 
        column_name as name,
        data_type as type,
        is_nullable = 'YES' as nullable,
        COALESCE(
          (SELECT true FROM information_schema.table_constraints tc
           JOIN information_schema.key_column_usage kcu ON tc.constraint_name = kcu.constraint_name
           WHERE tc.table_name = c.table_name AND kcu.column_name = c.column_name AND tc.constraint_type = 'PRIMARY KEY'),
          false
        ) as primary_key
      FROM information_schema.columns c
      WHERE table_name = '${t}' AND table_schema = 'public'
      ORDER BY ordinal_position
    `},selectAllQuery(t,e=100){return`SELECT * FROM ${t} LIMIT ${e}`},createDatabaseQuery(t){return`CREATE DATABASE "${t}"`},listConstraintsQuery(t){return`
      SELECT 
        tc.constraint_name,
        tc.constraint_type,
        kcu.column_name
      FROM information_schema.table_constraints tc
      LEFT JOIN information_schema.key_column_usage kcu 
        ON tc.constraint_name = kcu.constraint_name 
        AND tc.table_schema = kcu.table_schema
      WHERE tc.table_name = '${t}' 
        AND tc.table_schema = 'public'
      ORDER BY tc.constraint_name, kcu.ordinal_position
    `},listForeignKeysQuery(t){return`
      SELECT 
        tc.constraint_name,
        kcu.column_name,
        ccu.table_name AS foreign_table,
        ccu.column_name AS foreign_column
      FROM information_schema.table_constraints tc
      JOIN information_schema.key_column_usage kcu 
        ON tc.constraint_name = kcu.constraint_name
      JOIN information_schema.constraint_column_usage ccu 
        ON tc.constraint_name = ccu.constraint_name
      WHERE tc.table_name = '${t}' 
        AND tc.constraint_type = 'FOREIGN KEY'
        AND tc.table_schema = 'public'
      ORDER BY tc.constraint_name
    `},listIndexesQuery(t){return`
      SELECT 
        indexname AS index_name,
        indexdef AS definition
      FROM pg_indexes 
      WHERE tablename = '${t}'
        AND schemaname = 'public'
      ORDER BY indexname
    `},modifyDsnForDatabase(t,e){const n=new URL(t);return n.pathname=`/${e}`,n.toString()},parseDatabaseNames(t){return t.map(e=>String(e.datname))},parseTableNames(t){return t.map(e=>String(e.tablename))},parseColumns(t){return t.map(e=>({name:String(e.name),type:String(e.type),nullable:!!e.nullable,primaryKey:!!e.primary_key}))}},MB={driver:"mysql",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SHOW DATABASES"},listTablesQuery(){return"SHOW TABLES"},listColumnsQuery(t){return`DESCRIBE ${t}`},selectAllQuery(t,e=100){return`SELECT * FROM ${t} LIMIT ${e}`},createDatabaseQuery(t){return`CREATE DATABASE \`${t}\``},listConstraintsQuery(t){return`
      SELECT 
        tc.CONSTRAINT_NAME AS constraint_name,
        tc.CONSTRAINT_TYPE AS constraint_type,
        kcu.COLUMN_NAME AS column_name
      FROM information_schema.TABLE_CONSTRAINTS tc
      LEFT JOIN information_schema.KEY_COLUMN_USAGE kcu 
        ON tc.CONSTRAINT_NAME = kcu.CONSTRAINT_NAME 
        AND tc.TABLE_SCHEMA = kcu.TABLE_SCHEMA
        AND tc.TABLE_NAME = kcu.TABLE_NAME
      WHERE tc.TABLE_NAME = '${t}'
        AND tc.TABLE_SCHEMA = DATABASE()
      ORDER BY tc.CONSTRAINT_NAME, kcu.ORDINAL_POSITION
    `},listForeignKeysQuery(t){return`
      SELECT 
        kcu.CONSTRAINT_NAME AS constraint_name,
        kcu.COLUMN_NAME AS column_name,
        kcu.REFERENCED_TABLE_NAME AS foreign_table,
        kcu.REFERENCED_COLUMN_NAME AS foreign_column
      FROM information_schema.KEY_COLUMN_USAGE kcu
      WHERE kcu.TABLE_NAME = '${t}'
        AND kcu.TABLE_SCHEMA = DATABASE()
        AND kcu.REFERENCED_TABLE_NAME IS NOT NULL
      ORDER BY kcu.CONSTRAINT_NAME
    `},listIndexesQuery(t){return`SHOW INDEX FROM ${t}`},modifyDsnForDatabase(t,e){const n=t.split("/");return n.length>1?(n[n.length-1]=e,n.join("/")):`${t}/${e}`},parseDatabaseNames(t){return t.map(e=>String(e.Database||Object.values(e)[0]))},parseTableNames(t,e){return t.map(n=>{const r=n[`Tables_in_${e}`]||Object.values(n)[0];return String(r)})},parseColumns(t){return t.map(e=>({name:String(e.Field),type:String(e.Type),nullable:e.Null==="YES",primaryKey:e.Key==="PRI"}))}},OB={driver:"sqlite",supportedTableViews(){return["records","columns","indexes"]},listDatabasesQuery(){return"SELECT 'main' as name"},listTablesQuery(){return"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%' ORDER BY name"},listColumnsQuery(t){return`PRAGMA table_info(${t})`},selectAllQuery(t,e=100){return`SELECT * FROM ${t} LIMIT ${e}`},createDatabaseQuery(){return null},listIndexesQuery(t){return`PRAGMA index_list(${t})`},modifyDsnForDatabase(t){return t},parseDatabaseNames(t){return t.map(e=>String(e.name))},parseTableNames(t){return t.map(e=>String(e.name))},parseColumns(t){return t.map(e=>({name:String(e.name),type:String(e.type||"TEXT"),nullable:e.notnull===0,primaryKey:e.pk===1}))}},IB={driver:"sqlserver",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT name FROM sys.databases WHERE name NOT IN ('tempdb', 'model') ORDER BY name"},listTablesQuery(){return"SELECT TABLE_NAME as name FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' ORDER BY TABLE_NAME"},listColumnsQuery(t){return`
      SELECT 
        c.COLUMN_NAME as name,
        c.DATA_TYPE as type,
        CASE WHEN c.IS_NULLABLE = 'YES' THEN 1 ELSE 0 END as nullable,
        CASE WHEN pk.COLUMN_NAME IS NOT NULL THEN 1 ELSE 0 END as primary_key
      FROM INFORMATION_SCHEMA.COLUMNS c
      LEFT JOIN (
        SELECT ku.COLUMN_NAME
        FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc
        JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE ku ON tc.CONSTRAINT_NAME = ku.CONSTRAINT_NAME
        WHERE tc.TABLE_NAME = '${t}' AND tc.CONSTRAINT_TYPE = 'PRIMARY KEY'
      ) pk ON c.COLUMN_NAME = pk.COLUMN_NAME
      WHERE c.TABLE_NAME = '${t}'
      ORDER BY c.ORDINAL_POSITION
    `},selectAllQuery(t,e=100){return`SELECT TOP ${e} * FROM ${t}`},createDatabaseQuery(t){return`CREATE DATABASE [${t}]`},listConstraintsQuery(t){return`
      SELECT 
        tc.CONSTRAINT_NAME AS constraint_name,
        tc.CONSTRAINT_TYPE AS constraint_type,
        kcu.COLUMN_NAME AS column_name
      FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc
      LEFT JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE kcu 
        ON tc.CONSTRAINT_NAME = kcu.CONSTRAINT_NAME
      WHERE tc.TABLE_NAME = '${t}'
      ORDER BY tc.CONSTRAINT_NAME, kcu.ORDINAL_POSITION
    `},listForeignKeysQuery(t){return`
      SELECT 
        fk.name AS constraint_name,
        COL_NAME(fkc.parent_object_id, fkc.parent_column_id) AS column_name,
        OBJECT_NAME(fkc.referenced_object_id) AS foreign_table,
        COL_NAME(fkc.referenced_object_id, fkc.referenced_column_id) AS foreign_column
      FROM sys.foreign_keys fk
      JOIN sys.foreign_key_columns fkc ON fk.object_id = fkc.constraint_object_id
      WHERE OBJECT_NAME(fk.parent_object_id) = '${t}'
      ORDER BY fk.name
    `},listIndexesQuery(t){return`
      SELECT 
        i.name AS index_name,
        i.type_desc AS index_type,
        i.is_unique,
        i.is_primary_key,
        STRING_AGG(c.name, ', ') AS columns
      FROM sys.indexes i
      JOIN sys.index_columns ic ON i.object_id = ic.object_id AND i.index_id = ic.index_id
      JOIN sys.columns c ON ic.object_id = c.object_id AND ic.column_id = c.column_id
      WHERE OBJECT_NAME(i.object_id) = '${t}' AND i.name IS NOT NULL
      GROUP BY i.name, i.type_desc, i.is_unique, i.is_primary_key
      ORDER BY i.name
    `},modifyDsnForDatabase(t,e){const n=new URL(t);return n.searchParams.set("database",e),n.toString()},parseDatabaseNames(t){return t.map(e=>String(e.name))},parseTableNames(t){return t.map(e=>String(e.name))},parseColumns(t){return t.map(e=>({name:String(e.name),type:String(e.type),nullable:!!e.nullable,primaryKey:!!e.primary_key}))}},NB={driver:"oracle",supportedTableViews(){return["records","columns","constraints","foreignKeys","indexes"]},listDatabasesQuery(){return"SELECT SYS_CONTEXT('USERENV', 'CON_NAME') as name FROM DUAL"},listTablesQuery(){return`
      SELECT table_name as name 
      FROM user_tables 
      WHERE table_name NOT LIKE 'LOGMNR%' 
        AND table_name NOT LIKE 'AQ$%'
        AND table_name NOT LIKE 'MVIEW$%'
        AND table_name NOT LIKE 'LOGSTDBY$%'
        AND table_name NOT LIKE 'ROLLING$%'
        AND table_name NOT LIKE 'SCHEDULER_%'
        AND table_name NOT IN ('OL$', 'OL$HINTS', 'OL$NODES', 'REDO_DB', 'REDO_LOG', 'HELP', 
                                'REPL_SUPPORT_MATRIX', 'REPL_VALID_COMPAT', 'SQLPLUS_PRODUCT_PROFILE')
      ORDER BY table_name
    `},listColumnsQuery(t){return`
      SELECT 
        c.column_name as name,
        c.data_type as type,
        CASE WHEN c.nullable = 'Y' THEN 1 ELSE 0 END as nullable,
        CASE WHEN cc.column_name IS NOT NULL THEN 1 ELSE 0 END as primary_key
      FROM user_tab_columns c
      LEFT JOIN (
        SELECT cc.column_name
        FROM user_constraints con
        JOIN user_cons_columns cc ON con.constraint_name = cc.constraint_name
        WHERE con.table_name = UPPER('${t}') AND con.constraint_type = 'P'
      ) cc ON c.column_name = cc.column_name
      WHERE c.table_name = UPPER('${t}')
      ORDER BY c.column_id
    `},selectAllQuery(t,e=100){return`SELECT * FROM ${t} FETCH FIRST ${e} ROWS ONLY`},createDatabaseQuery(){return null},listConstraintsQuery(t){return`
      SELECT 
        con.constraint_name,
        con.constraint_type,
        col.column_name
      FROM user_constraints con
      LEFT JOIN user_cons_columns col 
        ON con.constraint_name = col.constraint_name
      WHERE con.table_name = UPPER('${t}')
      ORDER BY con.constraint_name, col.position
    `},listForeignKeysQuery(t){return`
      SELECT 
        a.constraint_name,
        a.column_name,
        c_pk.table_name AS foreign_table,
        b.column_name AS foreign_column
      FROM user_cons_columns a
      JOIN user_constraints c ON a.constraint_name = c.constraint_name
      JOIN user_constraints c_pk ON c.r_constraint_name = c_pk.constraint_name
      JOIN user_cons_columns b ON c_pk.constraint_name = b.constraint_name AND a.position = b.position
      WHERE c.constraint_type = 'R'
        AND c.table_name = UPPER('${t}')
      ORDER BY a.constraint_name
    `},listIndexesQuery(t){return`
      SELECT 
        index_name,
        uniqueness,
        index_type
      FROM user_indexes
      WHERE table_name = UPPER('${t}')
      ORDER BY index_name
    `},modifyDsnForDatabase(t){return t},parseDatabaseNames(t){return t.map(e=>{const n=e.name??e.NAME;return String(n??Object.values(e)[0])})},parseTableNames(t){return t.map(e=>{const n=e.name??e.NAME??e.TABLE_NAME;return String(n??Object.values(e)[0])})},parseColumns(t){return t.map(e=>({name:String(e.name??e.NAME),type:String(e.type??e.TYPE??e.DATA_TYPE),nullable:!!(e.nullable??e.NULLABLE),primaryKey:!!(e.primary_key??e.PRIMARY_KEY)}))}},DB={postgres:TB,mysql:MB,sqlite:OB,sqlserver:IB,oracle:NB};function vi(t){const e=DB[t];if(!e)throw new Error(`Unsupported driver: ${t}`);return e}async function Qu(t,e){const n=await fetch(`/sql/${encodeURIComponent(t)}/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,params:[]})});if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(r.message||`HTTP error: ${n.status}`)}return n.json()}async function gu(t,e){const n=await fetch(`/sql/${encodeURIComponent(t)}/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,params:[]})});if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(r.message||`HTTP error: ${n.status}`)}return n.json()}function zB(t){const e=t.trim().toUpperCase(),n=["SELECT","WITH","SHOW","DESCRIBE","EXPLAIN","PRAGMA"];for(const r of n)if(e.startsWith(r))return!0;return e.includes("RETURNING")}async function LB(t,e){return zB(e)?Qu(t,e):gu(t,e)}async function jB(t,e){const n=vi(e),r=n.listDatabasesQuery(),s=await Qu(t,r);return n.parseDatabaseNames(s.rows||[])}async function DR(t,e,n){const r=vi(e),s=r.listTablesQuery(),a=await Qu(t,s);return r.parseTableNames(a.rows||[],n)}async function PB(t,e,n){const r=vi(e),s=r.listColumnsQuery(n),a=await Qu(t,s);return r.parseColumns(a.rows||[])}function Xy(t,e,n=100){return vi(e).selectAllQuery(t,n)}async function FB(t,e,n){const s=vi(e).createDatabaseQuery(n);if(!s)throw new Error(`Creating databases is not supported for ${e}`);await gu(t,s)}function $B(t){return vi(t).createDatabaseQuery("test")!==null}function BB(t){return vi(t).supportedTableViews()}function UB(t,e,n){const r=vi(t);switch(n){case"records":return r.selectAllQuery(e);case"columns":return r.listColumnsQuery(e);case"constraints":return r.listConstraintsQuery?.(e)??null;case"foreignKeys":return r.listForeignKeysQuery?.(e)??null;case"indexes":return r.listIndexesQuery?.(e)??null;default:return null}}function VB({connection:t,expanded:e,onToggle:n,onSelectDatabase:r,onSelectTable:s}){const a=oa({strict:!1}),l=a.connectionId===t.id,c=l?a.database??null:null,f=l?a.table??null:null,d=Mo(),[m,p]=U.useState({open:!1}),[g,y]=U.useState(""),[S,w]=U.useState(null),[E,_]=U.useState(!1),{data:k}=_s({queryKey:["databases",t.id],queryFn:()=>jB(t.id,t.sql.driver),enabled:!!t&&!!t.sql}),{data:R}=_s({queryKey:["tables",t.id,c],queryFn:()=>c?DR(t.id,t.sql.driver,c):[],enabled:!!t&&!!t.sql&&!!c}),O=async()=>{if(g.trim()){_(!0),w(null);try{await FB(t.id,t.sql.driver,g.trim()),await d.invalidateQueries({queryKey:["databases",t.id]}),p({open:!1}),y("")}catch(L){w(L instanceof Error?L.message:"Failed to create database")}finally{_(!1)}}};return x.jsxs(x.Fragment,{children:[m.open&&x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:x.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] rounded-xl border border-neutral-200 dark:border-white/10 p-4 w-80 shadow-xl",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx(Mu,{className:"w-5 h-5 text-blue-500"}),x.jsx("h2",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200",children:"Create Database"})]}),x.jsx("input",{type:"text",value:g,onChange:L=>y(L.target.value),placeholder:"Database name",className:"w-full px-3 py-2 text-sm rounded-lg border border-neutral-200 dark:border-white/10 bg-neutral-50 dark:bg-white/5 text-neutral-700 dark:text-neutral-200 placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50",autoFocus:!0,onKeyDown:L=>{L.key==="Enter"&&g.trim()?O():L.key==="Escape"&&(p({open:!1}),y(""),w(null))}}),S&&x.jsx("p",{className:"mt-2 text-xs text-red-500",children:S}),x.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4",children:[x.jsx("button",{onClick:()=>{p({open:!1}),y(""),w(null)},className:"px-3 py-1.5 text-xs rounded-lg text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:"Cancel"}),x.jsx("button",{onClick:O,disabled:E||!g.trim(),className:"px-3 py-1.5 text-xs rounded-lg bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:E?"Creating...":"Create"})]})]})}),x.jsxs("div",{className:"space-y-0.5",children:[k?.map(L=>{const A=c===L,z=e.has(`${t.id}:${L}`);return x.jsxs("div",{children:[x.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>{n(`${t.id}:${L}`),r(L)},children:[x.jsx(Mu,{className:`w-3.5 h-3.5 shrink-0 ${A?"text-blue-500":"text-neutral-400 dark:text-neutral-500"}`}),x.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",children:L})]}),z&&A&&R&&x.jsxs("div",{className:"ml-4 space-y-0.5",children:[R.map(P=>x.jsxs("div",{className:`group flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-colors ${f===P?"bg-blue-500/10 dark:bg-blue-500/20":"hover:bg-neutral-100 dark:hover:bg-white/5"}`,onClick:()=>s(L,P),children:[x.jsx(Iz,{className:`w-3.5 h-3.5 shrink-0 ${f===P?"text-blue-500":"text-neutral-400 dark:text-neutral-500"}`}),x.jsx("span",{className:`text-xs truncate flex-1 ${f===P?"text-blue-600 dark:text-blue-400":"text-neutral-500 dark:text-neutral-400"}`,children:P})]},P)),R.length===0&&x.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"No tables"})]})]},L)}),(!k||k.length===0)&&x.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"No databases"}),t.sql&&$B(t.sql.driver)&&x.jsxs("button",{onClick:L=>{L.stopPropagation(),p({open:!0})},className:"flex items-center gap-2 px-3 py-1.5 w-full rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors text-left",children:[x.jsx(dh,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500"}),x.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"New database"})]})]})]})}function qB(t){const e=tn.c(41),{connection:n,expanded:r,onToggle:s,onSelectContainer:a,onSelectPath:l,onCreateContainer:c}=t;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={strict:!1},e[0]=f):f=e[0];const d=oa(f),m=d.connectionId===n.id,p=d.container??null,g=d._splat||"";let y,S;e[1]!==n.id?(y=["storage-containers",n.id],S=()=>SB(n.id),e[1]=n.id,e[2]=y,e[3]=S):(y=e[2],S=e[3]);const w=!!n;let E;e[4]!==y||e[5]!==S||e[6]!==w?(E={queryKey:y,queryFn:S,enabled:w},e[4]=y,e[5]=S,e[6]=w,e[7]=E):E=e[7];const{data:_,isLoading:k}=_s(E);let R;e[8]!==p||e[9]!==n.id||e[10]!==r?(R=p?r.has(`container:${n.id}:${p}`):!1,e[8]=p,e[9]=n.id,e[10]=r,e[11]=R):R=e[11];const O=R;let L,A;e[12]!==p||e[13]!==n.id?(L=["storage-objects",n.id,p,""],A=()=>_h(n.id,p,{prefix:"",delimiter:"/"}),e[12]=p,e[13]=n.id,e[14]=L,e[15]=A):(L=e[14],A=e[15]);const z=!!n&&!!p&&O;let P;e[16]!==L||e[17]!==A||e[18]!==z?(P={queryKey:L,queryFn:A,enabled:z},e[16]=L,e[17]=A,e[18]=z,e[19]=P):P=e[19];const{data:j}=_s(P);let I;e[20]!==p||e[21]!==g||e[22]!==n||e[23]!==_||e[24]!==k||e[25]!==r||e[26]!==m||e[27]!==a||e[28]!==l||e[29]!==s||e[30]!==j?(I=k?x.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"Loading containers..."}):_&&_.length>0?_.map($=>{const W=m&&p===$.name,oe=r.has(`container:${n.id}:${$.name}`);return x.jsxs("div",{children:[x.jsxs("div",{className:`group flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-colors ${W?"bg-blue-500/10 dark:bg-blue-500/20":"hover:bg-neutral-100 dark:hover:bg-white/5"}`,onClick:()=>{s(`container:${n.id}:${$.name}`),a($.name)},children:[oe?x.jsx(Ji,{className:"w-3 h-3 text-neutral-400 shrink-0"}):x.jsx(Z0,{className:"w-3 h-3 text-neutral-400 shrink-0"}),x.jsx(Sk,{className:`w-3.5 h-3.5 shrink-0 ${W?"text-blue-500":"text-neutral-400"}`}),x.jsx("span",{className:`text-xs truncate flex-1 ${W?"text-blue-600 dark:text-blue-400":"text-neutral-500 dark:text-neutral-400"}`,children:$.name})]}),oe&&W&&j&&x.jsx("div",{className:"ml-4",children:x.jsx(zR,{connection:n,container:$.name,prefixes:j.prefixes,activePath:g,expanded:r,onToggle:s,onSelectPath:l})})]},$.name)}):x.jsx("div",{className:"px-3 py-1.5 text-xs text-neutral-400 dark:text-neutral-600",children:"No containers found"}),e[20]=p,e[21]=g,e[22]=n,e[23]=_,e[24]=k,e[25]=r,e[26]=m,e[27]=a,e[28]=l,e[29]=s,e[30]=j,e[31]=I):I=e[31];let F;e[32]!==c?(F=$=>{$.stopPropagation(),c()},e[32]=c,e[33]=F):F=e[33];let G,J;e[34]===Symbol.for("react.memo_cache_sentinel")?(G=x.jsx(dh,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500"}),J=x.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"New container"}),e[34]=G,e[35]=J):(G=e[34],J=e[35]);let te;e[36]!==F?(te=x.jsxs("button",{onClick:F,className:"flex items-center gap-2 px-3 py-1.5 w-full rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors text-left",children:[G,J]}),e[36]=F,e[37]=te):te=e[37];let H;return e[38]!==I||e[39]!==te?(H=x.jsxs("div",{className:"space-y-0.5",children:[I,te]}),e[38]=I,e[39]=te,e[40]=H):H=e[40],H}function zR(t){const e=tn.c(17),{connection:n,container:r,prefixes:s,activePath:a,expanded:l,onToggle:c,onSelectPath:f}=t;if(s.length===0)return null;let d;if(e[0]!==a||e[1]!==n||e[2]!==r||e[3]!==l||e[4]!==f||e[5]!==c||e[6]!==s){let p;e[8]!==a||e[9]!==n||e[10]!==r||e[11]!==l||e[12]!==f||e[13]!==c?(p=g=>x.jsx(HB,{connection:n,container:r,prefix:g,activePath:a,expanded:l,onToggle:c,onSelectPath:f},g),e[8]=a,e[9]=n,e[10]=r,e[11]=l,e[12]=f,e[13]=c,e[14]=p):p=e[14],d=s.map(p),e[0]=a,e[1]=n,e[2]=r,e[3]=l,e[4]=f,e[5]=c,e[6]=s,e[7]=d}else d=e[7];let m;return e[15]!==d?(m=x.jsx("div",{className:"space-y-0.5",children:d}),e[15]=d,e[16]=m):m=e[16],m}function HB(t){const e=tn.c(45),{connection:n,container:r,prefix:s,activePath:a,expanded:l,onToggle:c,onSelectPath:f}=t,d=`folder:${n.id}:${r}:${s}`;let m;e[0]!==l||e[1]!==d?(m=l.has(d),e[0]=l,e[1]=d,e[2]=m):m=e[2];const p=m,g=s.replace(/^\/+/,""),S=a.replace(/^\/+/,"")===g;let w,E;e[3]!==n.id||e[4]!==r||e[5]!==s?(w=["storage-objects",n.id,r,s],E=()=>_h(n.id,r,{prefix:s,delimiter:"/"}),e[3]=n.id,e[4]=r,e[5]=s,e[6]=w,e[7]=E):(w=e[6],E=e[7]);let _;e[8]!==p||e[9]!==w||e[10]!==E?(_={queryKey:w,queryFn:E,enabled:p},e[8]=p,e[9]=w,e[10]=E,e[11]=_):_=e[11];const{data:k}=_s(_);let R;e[12]!==s?(R=Fu(s),e[12]=s,e[13]=R):R=e[13];const O=R,L=`group flex items-center gap-2 px-3 py-1.5 rounded-lg cursor-pointer transition-colors ${S?"bg-blue-500/10 dark:bg-blue-500/20":"hover:bg-neutral-100 dark:hover:bg-white/5"}`;let A;e[14]!==r||e[15]!==d||e[16]!==f||e[17]!==c||e[18]!==s?(A=()=>{c(d),f(r,s)},e[14]=r,e[15]=d,e[16]=f,e[17]=c,e[18]=s,e[19]=A):A=e[19];let z;e[20]!==p?(z=p?x.jsx(Ji,{className:"w-3 h-3 text-neutral-400 shrink-0"}):x.jsx(Z0,{className:"w-3 h-3 text-neutral-400 shrink-0"}),e[20]=p,e[21]=z):z=e[21];const P=`w-3.5 h-3.5 shrink-0 ${S?"text-blue-500":"text-neutral-400"}`;let j;e[22]!==P?(j=x.jsx(_k,{className:P}),e[22]=P,e[23]=j):j=e[23];const I=`text-xs truncate flex-1 ${S?"text-blue-600 dark:text-blue-400":"text-neutral-500 dark:text-neutral-400"}`;let F;e[24]!==O||e[25]!==I?(F=x.jsx("span",{className:I,children:O}),e[24]=O,e[25]=I,e[26]=F):F=e[26];let G;e[27]!==j||e[28]!==F||e[29]!==L||e[30]!==A||e[31]!==z?(G=x.jsxs("div",{className:L,onClick:A,children:[z,j,F]}),e[27]=j,e[28]=F,e[29]=L,e[30]=A,e[31]=z,e[32]=G):G=e[32];let J;e[33]!==a||e[34]!==n||e[35]!==r||e[36]!==l||e[37]!==p||e[38]!==f||e[39]!==c||e[40]!==k?(J=p&&k&&k.prefixes.length>0&&x.jsx("div",{className:"ml-4",children:x.jsx(zR,{connection:n,container:r,prefixes:k.prefixes,activePath:a,expanded:l,onToggle:c,onSelectPath:f})}),e[33]=a,e[34]=n,e[35]=r,e[36]=l,e[37]=p,e[38]=f,e[39]=c,e[40]=k,e[41]=J):J=e[41];let te;return e[42]!==G||e[43]!==J?(te=x.jsxs("div",{children:[G,J]}),e[42]=G,e[43]=J,e[44]=te):te=e[44],te}function Ch(t){return t.sql!=null}function LR(t){return t.amazonS3!=null||t.azureBlob!=null}const Ig={postgres:"text-blue-600 dark:text-blue-400",mysql:"text-yellow-600 dark:text-yellow-400",sqlite:"text-purple-600 dark:text-purple-400",sqlserver:"text-red-600 dark:text-red-400",oracle:"text-orange-600 dark:text-orange-400",s3:"text-orange-600 dark:text-orange-400","azure-blob":"text-blue-600 dark:text-blue-400"};function KB(t){const e=tn.c(54),{showAddModal:n,onAddModalClose:r}=t,s=n===void 0?!1:n;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={strict:!1},e[0]=a):a=e[0];const l=oa(a),c=qu();let f;e[1]!==c?(f=pe=>{c(pe?{to:`/${pe}`}:{to:"/"})},e[1]=c,e[2]=f):f=e[2];const d=f;let m;e[3]!==c?(m=(pe,Ee)=>{c({to:`/${pe}/${Ee}`})},e[3]=c,e[4]=m):m=e[4];const p=m;let g;e[5]!==c?(g=(pe,Ee,Me)=>{c({to:`/${pe}/${Ee}/${Me}`})},e[5]=c,e[6]=g):g=e[6];const y=g;let S;e[7]!==c?(S=(pe,Ee)=>{c({to:`/${pe}/container/${Ee}`})},e[7]=c,e[8]=S):S=e[8];const w=S;let E;e[9]!==c?(E=(pe,Ee,Me)=>{const Ze=Me.replace(/^\/+/,"");c({to:`/${pe}/container/${Ee}/${Ze}`})},e[9]=c,e[10]=E):E=e[10];const _=E,k=Kk(ZB);let R;e[11]===Symbol.for("react.memo_cache_sentinel")?(R={open:!1},e[11]=R):R=e[11];const[O,L]=U.useState(R),[A,z]=U.useState(null);let P;e[12]===Symbol.for("react.memo_cache_sentinel")?(P=new Set,e[12]=P):P=e[12];const[j,I]=U.useState(P);let F;if(e[13]!==l._splat||e[14]!==l.connectionId||e[15]!==l.container||e[16]!==l.database){e:{const pe=new Set,Ee=l.connectionId,Me=l.database,Ze=l.container,je=l._splat||"";if(!Ee){F=pe;break e}if(pe.add(Ee),Me&&pe.add(`${Ee}:${Me}`),Ze&&pe.add(`container:${Ee}:${Ze}`),Ze&&je){const Ye=je.split("/").filter(Boolean);let st="";for(const Je of Ye)st=st?`${st}/${Je}`:Je,st!==je.replace(/\/$/,"")&&pe.add(`folder:${Ee}:${Ze}:${st}/`)}F=pe}e[13]=l._splat,e[14]=l.connectionId,e[15]=l.container,e[16]=l.database,e[17]=F}else F=e[17];const G=F;let J;e[18]!==j||e[19]!==G?(J=new Set([...G,...j]),e[18]=j,e[19]=G,e[20]=J):J=e[20];const te=J;let H;e[21]!==G?(H=pe=>{I(Ee=>{const Me=new Set(Ee);if(Me.has(pe))Me.delete(pe);else{if(G.has(pe))return Ee;Me.add(pe)}return Me})},e[21]=G,e[22]=H):H=e[22];const $=H;let W;e[23]!==O.connection||e[24]!==d?(W=async pe=>{if(O.connection)return pu.update(O.connection.id,Ee=>{Object.assign(Ee,pe)}),{...O.connection,...pe};{const Ee=crypto.randomUUID(),Me={...pe,id:Ee,createdAt:new Date().toISOString()};return pu.insert(Me),d(Ee),I(Ze=>new Set(Ze).add(Ee)),Me}},e[23]=O.connection,e[24]=d,e[25]=W):W=e[25];const oe=W;let Q;e[26]!==d||e[27]!==l?(Q=async pe=>{pu.delete(pe),l.connectionId===pe&&d(null)},e[26]=d,e[27]=l,e[28]=Q):Q=e[28];const N=Q,D=QB,q=GB;let M;e[29]!==O.connection||e[30]!==O.open||e[31]!==r||e[32]!==oe||e[33]!==s?(M=(O.open||s)&&x.jsx(bB,{connection:O.connection,onSave:oe,onClose:()=>{L({open:!1}),r?.()}}),e[29]=O.connection,e[30]=O.open,e[31]=r,e[32]=oe,e[33]=s,e[34]=M):M=e[34];let se;e[35]!==A?(se=A&&x.jsx(AB,{connection:A,onClose:()=>z(null)}),e[35]=A,e[36]=se):se=e[36];let ce;e[37]===Symbol.for("react.memo_cache_sentinel")?(ce=x.jsx("h1",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 pl-0.5",children:"Granite"}),e[37]=ce):ce=e[37];let he;e[38]===Symbol.for("react.memo_cache_sentinel")?(he=()=>L({open:!0,connection:null}),e[38]=he):he=e[38];let ve;e[39]===Symbol.for("react.memo_cache_sentinel")?(ve=x.jsxs("div",{className:"px-3 py-2.5 flex items-center justify-between gap-2",children:[ce,x.jsx("div",{className:"flex items-center gap-1",children:x.jsx("button",{onClick:he,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Add connection",children:x.jsx(dh,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"})})})]}),e[39]=ve):ve=e[39];let Ae;e[40]!==k?.data||e[41]!==N||e[42]!==te||e[43]!==d||e[44]!==w||e[45]!==p||e[46]!==_||e[47]!==y||e[48]!==$?(Ae=x.jsxs("aside",{className:"w-64 bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl flex flex-col overflow-hidden dark:shadow-2xl",children:[ve,x.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:(k?.data??[]).length===0?x.jsx("div",{className:"px-2 py-8 text-center text-neutral-400 dark:text-neutral-600 text-xs",children:"No connections yet"}):x.jsx("div",{className:"space-y-0.5 pb-2",children:(k?.data??[]).map(pe=>{const Ee=te.has(pe.id),Me=Ch(pe),Ze=LR(pe);return x.jsxs("div",{children:[x.jsxs("div",{className:"group flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>{d(pe.id),$(pe.id)},children:[Me?x.jsx(Mu,{className:`w-3 h-3 shrink-0 ${q(pe)}`}):x.jsx(Ek,{className:`w-3 h-3 shrink-0 ${q(pe)}`}),x.jsx("span",{className:`text-[10px] font-semibold shrink-0 uppercase ${q(pe)}`,children:D(pe)}),x.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate flex-1",children:pe.name}),x.jsxs("div",{className:"flex items-center gap-0.5",children:[x.jsx("button",{onClick:je=>{je.stopPropagation(),L({open:!0,connection:pe})},className:"inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-colors",title:"Edit",children:x.jsx(vz,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-blue-500 dark:hover:text-blue-400"})}),x.jsx("button",{onClick:je=>{je.stopPropagation(),N(pe.id)},className:"inline-flex items-center justify-center w-5 h-5 hover:bg-neutral-200 dark:hover:bg-white/8 rounded transition-colors",title:"Delete",children:x.jsx(Ou,{className:"w-3 h-3 text-neutral-400 dark:text-neutral-500 hover:text-rose-500 dark:hover:text-rose-400"})})]})]}),Ee&&Me&&x.jsx("div",{className:"ml-4",children:x.jsx(VB,{connection:pe,expanded:te,onToggle:$,onSelectDatabase:je=>p(pe.id,je),onSelectTable:(je,Ye)=>y(pe.id,je,Ye)})}),Ee&&Ze&&x.jsx("div",{className:"ml-4",children:x.jsx(qB,{connection:pe,expanded:te,onToggle:$,onSelectContainer:je=>w(pe.id,je),onSelectPath:(je,Ye)=>_(pe.id,je,Ye),onCreateContainer:()=>z(pe)})})]},pe.id)})})})]}),e[40]=k?.data,e[41]=N,e[42]=te,e[43]=d,e[44]=w,e[45]=p,e[46]=_,e[47]=y,e[48]=$,e[49]=Ae):Ae=e[49];let _e;return e[50]!==M||e[51]!==se||e[52]!==Ae?(_e=x.jsxs(x.Fragment,{children:[M,se,Ae]}),e[50]=M,e[51]=se,e[52]=Ae,e[53]=_e):_e=e[53],_e}function GB(t){return Ch(t)&&t.sql?Ig[t.sql.driver]||"text-neutral-500":t.amazonS3?Ig.s3:t.azureBlob?Ig["azure-blob"]:"text-neutral-500"}function QB(t){if(Ch(t)&&t.sql)switch(t.sql.driver){case"postgres":return"PG";case"mysql":return"MY";case"sqlserver":return"MS";case"oracle":return"OR";case"sqlite":return"SQ";default:return"DB"}else{if(t.amazonS3)return"S3";if(t.azureBlob)return"AZ"}return"??"}function ZB(t){return t.from({conn:pu}).orderBy(YB,"desc")}function YB(t){const{conn:e}=t;return e.createdAt}function aC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function JB(t){if(Array.isArray(t))return t}function WB(t,e,n){return(e=iU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XB(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,l,c=[],f=!0,d=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(f=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);f=!0);}catch(m){d=!0,s=m}finally{try{if(!f&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}}function eU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function lC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oC(Object(n),!0).forEach(function(r){WB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tU(t,e){if(t==null)return{};var n,r,s=nU(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function nU(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function rU(t,e){return JB(t)||XB(t,e)||aU(t,e)||eU()}function sU(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iU(t){var e=sU(t,"string");return typeof e=="symbol"?e:e+""}function aU(t,e){if(t){if(typeof t=="string")return aC(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aC(t,e):void 0}}function oU(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uC(Object(n),!0).forEach(function(r){oU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lU(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(s,a){return a(s)},r)}}function Xl(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return s.length>=t.length?t.apply(this,s):function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return e.apply(n,[].concat(s,c))}}}function Kd(t){return{}.toString.call(t).includes("Object")}function uU(t){return!Object.keys(t).length}function $u(t){return typeof t=="function"}function cU(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fU(t,e){return Kd(e)||di("changeType"),Object.keys(e).some(function(n){return!cU(t,n)})&&di("changeField"),e}function dU(t){$u(t)||di("selectorType")}function hU(t){$u(t)||Kd(t)||di("handlerType"),Kd(t)&&Object.values(t).some(function(e){return!$u(e)})&&di("handlersType")}function pU(t){t||di("initialIsRequired"),Kd(t)||di("initialType"),uU(t)&&di("initialContent")}function mU(t,e){throw new Error(t[e]||t.default)}var gU={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},di=Xl(mU)(gU),Ff={changes:fU,selector:dU,handler:hU,initial:pU};function yU(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ff.initial(t),Ff.handler(e);var n={current:t},r=Xl(SU)(n,e),s=Xl(bU)(n),a=Xl(Ff.changes)(t),l=Xl(vU)(n);function c(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(m){return m};return Ff.selector(d),d(n.current)}function f(d){lU(r,s,a,l)(d)}return[c,f]}function vU(t,e){return $u(e)?e(t.current):e}function bU(t,e){return t.current=cC(cC({},t.current),e),e}function SU(t,e,n){return $u(e)?e(t.current):Object.keys(n).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,t.current[r])}),n}var wU={create:yU},xU={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function _U(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return s.length>=t.length?t.apply(this,s):function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return e.apply(n,[].concat(s,c))}}}function CU(t){return{}.toString.call(t).includes("Object")}function EU(t){return t||fC("configIsRequired"),CU(t)||fC("configType"),t.urls?(kU(),{paths:{vs:t.urls.monacoBase}}):t}function kU(){console.warn(jR.deprecation)}function RU(t,e){throw new Error(t[e]||t.default)}var jR={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},fC=_U(RU)(jR),AU={config:EU},TU=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(s){return n.reduceRight(function(a,l){return l(a)},s)}};function PR(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],PR(t[n],e[n]))}),lC(lC({},t),e)}var MU={type:"cancelation",msg:"operation is manually canceled"};function Ng(t){var e=!1,n=new Promise(function(r,s){t.then(function(a){return e?s(MU):r(a)}),t.catch(s)});return n.cancel=function(){return e=!0},n}var OU=["monaco"],IU=wU.create({config:xU,isInitialized:!1,resolve:null,reject:null,monaco:null}),FR=rU(IU,2),Zu=FR[0],Eh=FR[1];function NU(t){var e=AU.config(t),n=e.monaco,r=tU(e,OU);Eh(function(s){return{config:PR(s.config,r),monaco:n}})}function DU(){var t=Zu(function(e){var n=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:n,isInitialized:r,resolve:s}});if(!t.isInitialized){if(Eh({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),Ng(Dg);if(window.monaco&&window.monaco.editor)return $R(window.monaco),t.resolve(window.monaco),Ng(Dg);TU(zU,jU)(PU)}return Ng(Dg)}function zU(t){return document.body.appendChild(t)}function LU(t){var e=document.createElement("script");return t&&(e.src=t),e}function jU(t){var e=Zu(function(r){var s=r.config,a=r.reject;return{config:s,reject:a}}),n=LU("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function PU(){var t=Zu(function(n){var r=n.config,s=n.resolve,a=n.reject;return{config:r,resolve:s,reject:a}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){var r=n.m||n;$R(r),t.resolve(r)},function(n){t.reject(n)})}function $R(t){Zu().monaco||Eh({monaco:t})}function FU(){return Zu(function(t){var e=t.monaco;return e})}var Dg=new Promise(function(t,e){return Eh({resolve:t,reject:e})}),BR={config:NU,init:DU,__getMonacoInstance:FU},$U={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},zg=$U,BU={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},UU=BU;function VU({children:t}){return Nr.createElement("div",{style:UU.container},t)}var qU=VU,HU=qU;function KU({width:t,height:e,isEditorReady:n,loading:r,_ref:s,className:a,wrapperProps:l}){return Nr.createElement("section",{style:{...zg.wrapper,width:t,height:e},...l},!n&&Nr.createElement(HU,null,r),Nr.createElement("div",{ref:s,style:{...zg.fullWidth,...!n&&zg.hide},className:a}))}var GU=KU,UR=U.memo(GU);function QU(t){U.useEffect(t,[])}var VR=QU;function ZU(t,e,n=!0){let r=U.useRef(!0);U.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var er=ZU;function yu(){}function po(t,e,n,r){return YU(t,r)||JU(t,e,n,r)}function YU(t,e){return t.editor.getModel(qR(t,e))}function JU(t,e,n,r){return t.editor.createModel(e,n,r?qR(t,r):void 0)}function qR(t,e){return t.Uri.parse(e)}function WU({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:s,originalModelPath:a,modifiedModelPath:l,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:f=!1,theme:d="light",loading:m="Loading...",options:p={},height:g="100%",width:y="100%",className:S,wrapperProps:w={},beforeMount:E=yu,onMount:_=yu}){let[k,R]=U.useState(!1),[O,L]=U.useState(!0),A=U.useRef(null),z=U.useRef(null),P=U.useRef(null),j=U.useRef(_),I=U.useRef(E),F=U.useRef(!1);VR(()=>{let H=BR.init();return H.then($=>(z.current=$)&&L(!1)).catch($=>$?.type!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>A.current?te():H.cancel()}),er(()=>{if(A.current&&z.current){let H=A.current.getOriginalEditor(),$=po(z.current,t||"",r||n||"text",a||"");$!==H.getModel()&&H.setModel($)}},[a],k),er(()=>{if(A.current&&z.current){let H=A.current.getModifiedEditor(),$=po(z.current,e||"",s||n||"text",l||"");$!==H.getModel()&&H.setModel($)}},[l],k),er(()=>{let H=A.current.getModifiedEditor();H.getOption(z.current.editor.EditorOption.readOnly)?H.setValue(e||""):e!==H.getValue()&&(H.executeEdits("",[{range:H.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),H.pushUndoStop())},[e],k),er(()=>{A.current?.getModel()?.original.setValue(t||"")},[t],k),er(()=>{let{original:H,modified:$}=A.current.getModel();z.current.editor.setModelLanguage(H,r||n||"text"),z.current.editor.setModelLanguage($,s||n||"text")},[n,r,s],k),er(()=>{z.current?.editor.setTheme(d)},[d],k),er(()=>{A.current?.updateOptions(p)},[p],k);let G=U.useCallback(()=>{if(!z.current)return;I.current(z.current);let H=po(z.current,t||"",r||n||"text",a||""),$=po(z.current,e||"",s||n||"text",l||"");A.current?.setModel({original:H,modified:$})},[n,e,s,t,r,a,l]),J=U.useCallback(()=>{!F.current&&P.current&&(A.current=z.current.editor.createDiffEditor(P.current,{automaticLayout:!0,...p}),G(),z.current?.editor.setTheme(d),R(!0),F.current=!0)},[p,d,G]);U.useEffect(()=>{k&&j.current(A.current,z.current)},[k]),U.useEffect(()=>{!O&&!k&&J()},[O,k,J]);function te(){let H=A.current?.getModel();c||H?.original?.dispose(),f||H?.modified?.dispose(),A.current?.dispose()}return Nr.createElement(UR,{width:y,height:g,isEditorReady:k,loading:m,_ref:P,className:S,wrapperProps:w})}var XU=WU;U.memo(XU);function eV(t){let e=U.useRef();return U.useEffect(()=>{e.current=t},[t]),e.current}var tV=eV,$f=new Map;function nV({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:s,path:a,theme:l="light",line:c,loading:f="Loading...",options:d={},overrideServices:m={},saveViewState:p=!0,keepCurrentModel:g=!1,width:y="100%",height:S="100%",className:w,wrapperProps:E={},beforeMount:_=yu,onMount:k=yu,onChange:R,onValidate:O=yu}){let[L,A]=U.useState(!1),[z,P]=U.useState(!0),j=U.useRef(null),I=U.useRef(null),F=U.useRef(null),G=U.useRef(k),J=U.useRef(_),te=U.useRef(),H=U.useRef(r),$=tV(a),W=U.useRef(!1),oe=U.useRef(!1);VR(()=>{let D=BR.init();return D.then(q=>(j.current=q)&&P(!1)).catch(q=>q?.type!=="cancelation"&&console.error("Monaco initialization: error:",q)),()=>I.current?N():D.cancel()}),er(()=>{let D=po(j.current,t||r||"",e||s||"",a||n||"");D!==I.current?.getModel()&&(p&&$f.set($,I.current?.saveViewState()),I.current?.setModel(D),p&&I.current?.restoreViewState($f.get(a)))},[a],L),er(()=>{I.current?.updateOptions(d)},[d],L),er(()=>{!I.current||r===void 0||(I.current.getOption(j.current.editor.EditorOption.readOnly)?I.current.setValue(r):r!==I.current.getValue()&&(oe.current=!0,I.current.executeEdits("",[{range:I.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),I.current.pushUndoStop(),oe.current=!1))},[r],L),er(()=>{let D=I.current?.getModel();D&&s&&j.current?.editor.setModelLanguage(D,s)},[s],L),er(()=>{c!==void 0&&I.current?.revealLine(c)},[c],L),er(()=>{j.current?.editor.setTheme(l)},[l],L);let Q=U.useCallback(()=>{if(!(!F.current||!j.current)&&!W.current){J.current(j.current);let D=a||n,q=po(j.current,r||t||"",e||s||"",D||"");I.current=j.current?.editor.create(F.current,{model:q,automaticLayout:!0,...d},m),p&&I.current.restoreViewState($f.get(D)),j.current.editor.setTheme(l),c!==void 0&&I.current.revealLine(c),A(!0),W.current=!0}},[t,e,n,r,s,a,d,m,p,l,c]);U.useEffect(()=>{L&&G.current(I.current,j.current)},[L]),U.useEffect(()=>{!z&&!L&&Q()},[z,L,Q]),H.current=r,U.useEffect(()=>{L&&R&&(te.current?.dispose(),te.current=I.current?.onDidChangeModelContent(D=>{oe.current||R(I.current.getValue(),D)}))},[L,R]),U.useEffect(()=>{if(L){let D=j.current.editor.onDidChangeMarkers(q=>{let M=I.current.getModel()?.uri;if(M&&q.find(se=>se.path===M.path)){let se=j.current.editor.getModelMarkers({resource:M});O?.(se)}});return()=>{D?.dispose()}}return()=>{}},[L,O]);function N(){te.current?.dispose(),g?p&&$f.set(a,I.current.saveViewState()):I.current.getModel()?.dispose(),I.current.dispose()}return Nr.createElement(UR,{width:y,height:S,isEditorReady:L,loading:f,_ref:F,className:w,wrapperProps:E})}var rV=nV,sV=U.memo(rV),iV=sV;const aV={records:{icon:Mz,label:"Records"},columns:{icon:ez,label:"Columns"},constraints:{icon:Ez,label:"Constraints"},foreignKeys:{icon:dz,label:"Foreign Keys"},indexes:{icon:pz,label:"Indexes"}},oV=["SELECT","FROM","WHERE","AND","OR","NOT","IN","IS","NULL","LIKE","BETWEEN","ORDER BY","GROUP BY","HAVING","LIMIT","OFFSET","JOIN","LEFT JOIN","RIGHT JOIN","INNER JOIN","OUTER JOIN","ON","AS","DISTINCT","COUNT","SUM","AVG","MIN","MAX","INSERT INTO","VALUES","UPDATE","SET","DELETE FROM","CREATE TABLE","DROP TABLE","ALTER TABLE","ADD COLUMN","DROP COLUMN","INDEX","UNIQUE","PRIMARY KEY","FOREIGN KEY","REFERENCES","CASCADE","ASC","DESC","UNION","ALL","EXISTS","CASE","WHEN","THEN","ELSE","END","COALESCE","NULLIF","CAST","TRUE","FALSE"];function lV(t){const e=tn.c(59),{connection:n,selectedTable:r,onExecute:s,isLoading:a,schema:l,value:c,onChange:f,onToggleAI:d,aiPanelOpen:m,supportedViews:p,onSelectView:g,activeView:y,onExpandEditor:S}=t,[w,E]=U.useState(""),[_,k]=U.useState(!0),R=c!==void 0?c:w,O=f!==void 0?f:E,L=U.useRef(null),A=U.useRef(null),z=U.useRef(l),[P,j]=U.useState(uV);let I,F;e[0]===Symbol.for("react.memo_cache_sentinel")?(I=()=>{const Je=window.matchMedia("(prefers-color-scheme: dark)"),at=ht=>j(ht.matches);return Je.addEventListener("change",at),()=>Je.removeEventListener("change",at)},F=[],e[0]=I,e[1]=F):(I=e[0],F=e[1]),U.useEffect(I,F);let G,J;e[2]!==l?(G=()=>{z.current=l},J=[l],e[2]=l,e[3]=G,e[4]=J):(G=e[3],J=e[4]),U.useEffect(G,J);let te,H;e[5]!==n||e[6]!==r||e[7]!==O?(te=()=>{r&&n&&n.sql&&queueMicrotask(()=>O(Xy(r,n.sql.driver)))},H=[r,n,O],e[5]=n,e[6]=r,e[7]=O,e[8]=te,e[9]=H):(te=e[8],H=e[9]),U.useEffect(te,H);let $;e[10]===Symbol.for("react.memo_cache_sentinel")?($=(Je,at)=>{L.current=at,A.current?.dispose(),A.current=at.languages.registerCompletionItemProvider("sql",{triggerCharacters:[" ",".",",","("],provideCompletionItems:(ht,Oe)=>{const ge=z.current,Le=ht.getWordUntilPosition(Oe),be={startLineNumber:Oe.lineNumber,endLineNumber:Oe.lineNumber,startColumn:Le.startColumn,endColumn:Le.endColumn},ye=ht.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:Oe.lineNumber,endColumn:Oe.column}).toUpperCase(),Ve=[],Ce=ht.getLineContent(Oe.lineNumber).substring(0,Oe.column-1).match(/(\w+)\.$/);if(Ce&&ge?.columns){const Ue=Ce[1].toLowerCase(),vt=Object.entries(ge.columns).find(ut=>{const[ct]=ut;return ct.toLowerCase()===Ue})?.[1];return vt&&vt.forEach(ut=>{Ve.push({label:ut.name,kind:at.languages.CompletionItemKind.Field,detail:`${ut.type}${ut.primaryKey?" (PK)":""}${ut.nullable?"":" NOT NULL"}`,insertText:ut.name,range:be})}),{suggestions:Ve}}const ke=/\b(FROM|JOIN|INTO|UPDATE|TABLE)\s+$/i.test(ye)||/\b(FROM|JOIN|INTO|UPDATE|TABLE)\s+\w*$/i.test(ye),Se=/\bSELECT\s+(\w+\s*,\s*)*\w*$/i.test(ye)||/\bWHERE\s+.*$/i.test(ye)||/\bSET\s+.*$/i.test(ye)||/\bAND\s+\w*$/i.test(ye)||/\bOR\s+\w*$/i.test(ye)||/\bORDER BY\s+.*$/i.test(ye)||/\bGROUP BY\s+.*$/i.test(ye);return oV.forEach(Ue=>{Ue.toUpperCase().startsWith(Le.word.toUpperCase())&&Ve.push({label:Ue,kind:at.languages.CompletionItemKind.Keyword,detail:"SQL keyword",insertText:Ue,range:be})}),ge?.tables&&(ke||!Se)&&ge.tables.forEach(Ue=>{Ve.push({label:Ue,kind:at.languages.CompletionItemKind.Class,detail:"Table",insertText:Ue,range:be})}),ge?.columns&&Se&&Object.entries(ge.columns).forEach(Ue=>{const[vt,ut]=Ue;ut.forEach(ct=>{Ve.push({label:ct.name,kind:at.languages.CompletionItemKind.Field,detail:`${vt}.${ct.name} (${ct.type})`,insertText:ct.name,range:be}),Ve.push({label:`${vt}.${ct.name}`,kind:at.languages.CompletionItemKind.Field,detail:ct.type,insertText:`${vt}.${ct.name}`,range:be})})}),{suggestions:Ve}}})},e[10]=$):$=e[10];const W=$;let oe,Q;e[11]===Symbol.for("react.memo_cache_sentinel")?(oe=()=>()=>{A.current?.dispose()},Q=[],e[11]=oe,e[12]=Q):(oe=e[11],Q=e[12]),U.useEffect(oe,Q);let N;e[13]!==n||e[14]!==s||e[15]!==R?(N=()=>{!n||!R.trim()||s(R)},e[13]=n,e[14]=s,e[15]=R,e[16]=N):N=e[16];const D=N;let q;e[17]!==D?(q=Je=>{(Je.metaKey||Je.ctrlKey)&&Je.key==="Enter"&&(Je.preventDefault(),D())},e[17]=D,e[18]=q):q=e[18];const M=q,se=`flex flex-col bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden dark:shadow-2xl transition-all ${_?"":"h-80"}`;let ce;e[19]!==_||e[20]!==S?(ce=()=>{_&&S&&S(),k(!_)},e[19]=_,e[20]=S,e[21]=ce):ce=e[21];const he=_?"Expand editor":"Collapse editor";let ve;e[22]!==_?(ve=_?x.jsx(Ji,{className:"w-4 h-4"}):x.jsx(fu,{className:"w-4 h-4"}),e[22]=_,e[23]=ve):ve=e[23];let Ae;e[24]!==ce||e[25]!==he||e[26]!==ve?(Ae=x.jsx("button",{onClick:ce,className:"p-1.5 rounded-lg transition-colors text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-white/5",title:he,children:ve}),e[24]=ce,e[25]=he,e[26]=ve,e[27]=Ae):Ae=e[27];let _e;e[28]!==y||e[29]!==g||e[30]!==r||e[31]!==p?(_e=r&&p&&g&&x.jsx("div",{className:"flex gap-0.5 p-1 bg-neutral-100 dark:bg-white/5 rounded-lg",children:p.map(Je=>{const{icon:at,label:ht}=aV[Je],Oe=y===Je;return x.jsxs("button",{type:"button",onClick:()=>{g(Je),k(!0)},title:ht,className:`flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded-md transition-all whitespace-nowrap ${Oe?"bg-white dark:bg-neutral-700 text-neutral-900 dark:text-neutral-100 shadow-sm":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 hover:bg-white dark:hover:bg-neutral-700 hover:shadow-sm"}`,children:[x.jsx(at,{className:"w-3.5 h-3.5"}),x.jsx("span",{className:"hidden lg:inline",children:ht})]},Je)})}),e[28]=y,e[29]=g,e[30]=r,e[31]=p,e[32]=_e):_e=e[32];let pe;e[33]===Symbol.for("react.memo_cache_sentinel")?(pe=x.jsx("div",{className:"flex-1"}),e[33]=pe):pe=e[33];let Ee;e[34]!==n?(Ee=n?x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"font-medium text-neutral-600 dark:text-neutral-300",children:n.name}),x.jsx("span",{className:"mx-1.5",children:""}),x.jsx("span",{className:"uppercase",children:n.sql?.driver??"unknown"})]}):"No connection",e[34]=n,e[35]=Ee):Ee=e[35];let Me;e[36]!==Ee?(Me=x.jsx("span",{className:"text-[10px] text-neutral-400 dark:text-neutral-500",children:Ee}),e[36]=Ee,e[37]=Me):Me=e[37];let Ze;e[38]!==m||e[39]!==d?(Ze=d&&x.jsx("button",{onClick:d,className:`p-1.5 rounded-lg transition-colors ${m?"bg-amber-500/10 text-amber-500":"text-neutral-400 hover:text-amber-500 hover:bg-amber-500/10"}`,title:"Toggle AI Assistant",children:x.jsx(ky,{className:"w-4 h-4"})}),e[38]=m,e[39]=d,e[40]=Ze):Ze=e[40];let je;e[41]!==Ae||e[42]!==_e||e[43]!==Me||e[44]!==Ze?(je=x.jsxs("div",{className:"h-12 px-3 flex items-center gap-3 border-b border-neutral-200 dark:border-white/8",children:[Ae,_e,pe,Me,Ze]}),e[41]=Ae,e[42]=_e,e[43]=Me,e[44]=Ze,e[45]=je):je=e[45];let Ye;e[46]!==n||e[47]!==D||e[48]!==_||e[49]!==P||e[50]!==a||e[51]!==O||e[52]!==R?(Ye=!_&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"flex-1 min-h-0",children:x.jsx(iV,{height:"100%",defaultLanguage:"sql",value:R,onChange:Je=>O(Je||""),onMount:W,theme:P?"vs-dark":"vs",options:{quickSuggestions:!0,suggestOnTriggerCharacters:!0,minimap:{enabled:!1},fontSize:13,fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",padding:{top:12,bottom:12},renderLineHighlight:"none",overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,scrollbar:{vertical:"auto",horizontal:"auto",verticalScrollbarSize:8,horizontalScrollbarSize:8},lineNumbersMinChars:3,folding:!1}})}),x.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 border-t border-neutral-200 dark:border-white/8",children:[x.jsxs("button",{onClick:D,disabled:!n||!R.trim()||a,className:"flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-md disabled:opacity-50 transition-colors",children:[x.jsx(Sz,{className:"w-3 h-3"}),a?"Running...":"Run"]}),x.jsx("span",{className:"text-[10px] text-neutral-400 dark:text-neutral-600",children:""})]})]}),e[46]=n,e[47]=D,e[48]=_,e[49]=P,e[50]=a,e[51]=O,e[52]=R,e[53]=Ye):Ye=e[53];let st;return e[54]!==M||e[55]!==se||e[56]!==je||e[57]!==Ye?(st=x.jsxs("div",{className:se,onKeyDown:M,children:[je,Ye]}),e[54]=M,e[55]=se,e[56]=je,e[57]=Ye,e[58]=st):st=e[58],st}function uV(){return window.matchMedia("(prefers-color-scheme: dark)").matches}function li(t,e){return typeof t=="function"?t(e):t}function rr(t,e){return n=>{e.setState(r=>({...r,[t]:li(n,r[t])}))}}function kh(t){return t instanceof Function}function cV(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function fV(t,e){const n=[],r=s=>{s.forEach(a=>{n.push(a);const l=e(a);l!=null&&l.length&&r(l)})};return r(t),n}function Pe(t,e,n){let r=[],s;return a=>{let l;n.key&&n.debug&&(l=Date.now());const c=t(a);if(!(c.length!==r.length||c.some((m,p)=>r[p]!==m)))return s;r=c;let d;if(n.key&&n.debug&&(d=Date.now()),s=e(...c),n==null||n.onChange==null||n.onChange(s),n.key&&n.debug&&n!=null&&n.debug()){const m=Math.round((Date.now()-l)*100)/100,p=Math.round((Date.now()-d)*100)/100,g=p/16,y=(S,w)=>{for(S=String(S);S.length<w;)S=" "+S;return S};console.info(`%c ${y(p,5)} /${y(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,n?.key)}return s}}function Fe(t,e,n,r){return{debug:()=>{var s;return(s=t?.debugAll)!=null?s:t[e]},key:!1,onChange:r}}function dV(t,e,n,r){const s=()=>{var l;return(l=a.getValue())!=null?l:t.options.renderFallbackValue},a={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:s,getContext:Pe(()=>[t,n,e,a],(l,c,f,d)=>({table:l,column:c,row:f,cell:d,getValue:d.getValue,renderValue:d.renderValue}),Fe(t.options,"debugCells"))};return t._features.forEach(l=>{l.createCell==null||l.createCell(a,n,e,t)},{}),a}function hV(t,e,n,r){var s,a;const c={...t._getDefaultColumnDef(),...e},f=c.accessorKey;let d=(s=(a=c.id)!=null?a:f?typeof String.prototype.replaceAll=="function"?f.replaceAll(".","_"):f.replace(/\./g,"_"):void 0)!=null?s:typeof c.header=="string"?c.header:void 0,m;if(c.accessorFn?m=c.accessorFn:f&&(f.includes(".")?m=g=>{let y=g;for(const w of f.split(".")){var S;y=(S=y)==null?void 0:S[w]}return y}:m=g=>g[c.accessorKey]),!d)throw new Error;let p={id:`${String(d)}`,accessorFn:m,parent:r,depth:n,columnDef:c,columns:[],getFlatColumns:Pe(()=>[!0],()=>{var g;return[p,...(g=p.columns)==null?void 0:g.flatMap(y=>y.getFlatColumns())]},Fe(t.options,"debugColumns")),getLeafColumns:Pe(()=>[t._getOrderColumnsFn()],g=>{var y;if((y=p.columns)!=null&&y.length){let S=p.columns.flatMap(w=>w.getLeafColumns());return g(S)}return[p]},Fe(t.options,"debugColumns"))};for(const g of t._features)g.createColumn==null||g.createColumn(p,t);return p}const mn="debugHeaders";function dC(t,e,n){var r;let a={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const l=[],c=f=>{f.subHeaders&&f.subHeaders.length&&f.subHeaders.map(c),l.push(f)};return c(a),l},getContext:()=>({table:t,header:a,column:e})};return t._features.forEach(l=>{l.createHeader==null||l.createHeader(a,t)}),a}const pV={createTable:t=>{t.getHeaderGroups=Pe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>{var a,l;const c=(a=r?.map(p=>n.find(g=>g.id===p)).filter(Boolean))!=null?a:[],f=(l=s?.map(p=>n.find(g=>g.id===p)).filter(Boolean))!=null?l:[],d=n.filter(p=>!(r!=null&&r.includes(p.id))&&!(s!=null&&s.includes(p.id)));return Bf(e,[...c,...d,...f],t)},Fe(t.options,mn)),t.getCenterHeaderGroups=Pe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>(n=n.filter(a=>!(r!=null&&r.includes(a.id))&&!(s!=null&&s.includes(a.id))),Bf(e,n,t,"center")),Fe(t.options,mn)),t.getLeftHeaderGroups=Pe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var s;const a=(s=r?.map(l=>n.find(c=>c.id===l)).filter(Boolean))!=null?s:[];return Bf(e,a,t,"left")},Fe(t.options,mn)),t.getRightHeaderGroups=Pe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var s;const a=(s=r?.map(l=>n.find(c=>c.id===l)).filter(Boolean))!=null?s:[];return Bf(e,a,t,"right")},Fe(t.options,mn)),t.getFooterGroups=Pe(()=>[t.getHeaderGroups()],e=>[...e].reverse(),Fe(t.options,mn)),t.getLeftFooterGroups=Pe(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),Fe(t.options,mn)),t.getCenterFooterGroups=Pe(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),Fe(t.options,mn)),t.getRightFooterGroups=Pe(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),Fe(t.options,mn)),t.getFlatHeaders=Pe(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),Fe(t.options,mn)),t.getLeftFlatHeaders=Pe(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),Fe(t.options,mn)),t.getCenterFlatHeaders=Pe(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),Fe(t.options,mn)),t.getRightFlatHeaders=Pe(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),Fe(t.options,mn)),t.getCenterLeafHeaders=Pe(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Fe(t.options,mn)),t.getLeftLeafHeaders=Pe(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Fe(t.options,mn)),t.getRightLeafHeaders=Pe(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Fe(t.options,mn)),t.getLeafHeaders=Pe(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var s,a,l,c,f,d;return[...(s=(a=e[0])==null?void 0:a.headers)!=null?s:[],...(l=(c=n[0])==null?void 0:c.headers)!=null?l:[],...(f=(d=r[0])==null?void 0:d.headers)!=null?f:[]].map(m=>m.getLeafHeaders()).flat()},Fe(t.options,mn))}};function Bf(t,e,n,r){var s,a;let l=0;const c=function(g,y){y===void 0&&(y=1),l=Math.max(l,y),g.filter(S=>S.getIsVisible()).forEach(S=>{var w;(w=S.columns)!=null&&w.length&&c(S.columns,y+1)},0)};c(t);let f=[];const d=(g,y)=>{const S={depth:y,id:[r,`${y}`].filter(Boolean).join("_"),headers:[]},w=[];g.forEach(E=>{const _=[...w].reverse()[0],k=E.column.depth===S.depth;let R,O=!1;if(k&&E.column.parent?R=E.column.parent:(R=E.column,O=!0),_&&_?.column===R)_.subHeaders.push(E);else{const L=dC(n,R,{id:[r,y,R.id,E?.id].filter(Boolean).join("_"),isPlaceholder:O,placeholderId:O?`${w.filter(A=>A.column===R).length}`:void 0,depth:y,index:w.length});L.subHeaders.push(E),w.push(L)}S.headers.push(E),E.headerGroup=S}),f.push(S),y>0&&d(w,y-1)},m=e.map((g,y)=>dC(n,g,{depth:l,index:y}));d(m,l-1),f.reverse();const p=g=>g.filter(S=>S.column.getIsVisible()).map(S=>{let w=0,E=0,_=[0];S.subHeaders&&S.subHeaders.length?(_=[],p(S.subHeaders).forEach(R=>{let{colSpan:O,rowSpan:L}=R;w+=O,_.push(L)})):w=1;const k=Math.min(..._);return E=E+k,S.colSpan=w,S.rowSpan=E,{colSpan:w,rowSpan:E}});return p((s=(a=f[0])==null?void 0:a.headers)!=null?s:[]),f}const mV=(t,e,n,r,s,a,l)=>{let c={id:e,index:r,original:n,depth:s,parentId:l,_valuesCache:{},_uniqueValuesCache:{},getValue:f=>{if(c._valuesCache.hasOwnProperty(f))return c._valuesCache[f];const d=t.getColumn(f);if(d!=null&&d.accessorFn)return c._valuesCache[f]=d.accessorFn(c.original,r),c._valuesCache[f]},getUniqueValues:f=>{if(c._uniqueValuesCache.hasOwnProperty(f))return c._uniqueValuesCache[f];const d=t.getColumn(f);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(c._uniqueValuesCache[f]=d.columnDef.getUniqueValues(c.original,r),c._uniqueValuesCache[f]):(c._uniqueValuesCache[f]=[c.getValue(f)],c._uniqueValuesCache[f])},renderValue:f=>{var d;return(d=c.getValue(f))!=null?d:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>fV(c.subRows,f=>f.subRows),getParentRow:()=>c.parentId?t.getRow(c.parentId,!0):void 0,getParentRows:()=>{let f=[],d=c;for(;;){const m=d.getParentRow();if(!m)break;f.push(m),d=m}return f.reverse()},getAllCells:Pe(()=>[t.getAllLeafColumns()],f=>f.map(d=>dV(t,c,d,d.id)),Fe(t.options,"debugRows")),_getAllCellsByColumnId:Pe(()=>[c.getAllCells()],f=>f.reduce((d,m)=>(d[m.column.id]=m,d),{}),Fe(t.options,"debugRows"))};for(let f=0;f<t._features.length;f++){const d=t._features[f];d==null||d.createRow==null||d.createRow(c,t)}return c},gV={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},HR=(t,e,n)=>{var r,s;const a=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((s=t.getValue(e))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(a))};HR.autoRemove=t=>Dr(t);const KR=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};KR.autoRemove=t=>Dr(t);const GR=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===n?.toLowerCase()};GR.autoRemove=t=>Dr(t);const QR=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};QR.autoRemove=t=>Dr(t);const ZR=(t,e,n)=>!n.some(r=>{var s;return!((s=t.getValue(e))!=null&&s.includes(r))});ZR.autoRemove=t=>Dr(t)||!(t!=null&&t.length);const YR=(t,e,n)=>n.some(r=>{var s;return(s=t.getValue(e))==null?void 0:s.includes(r)});YR.autoRemove=t=>Dr(t)||!(t!=null&&t.length);const JR=(t,e,n)=>t.getValue(e)===n;JR.autoRemove=t=>Dr(t);const WR=(t,e,n)=>t.getValue(e)==n;WR.autoRemove=t=>Dr(t);const xv=(t,e,n)=>{let[r,s]=n;const a=t.getValue(e);return a>=r&&a<=s};xv.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,s=typeof n!="number"?parseFloat(n):n,a=e===null||Number.isNaN(r)?-1/0:r,l=n===null||Number.isNaN(s)?1/0:s;if(a>l){const c=a;a=l,l=c}return[a,l]};xv.autoRemove=t=>Dr(t)||Dr(t[0])&&Dr(t[1]);const Ss={includesString:HR,includesStringSensitive:KR,equalsString:GR,arrIncludes:QR,arrIncludesAll:ZR,arrIncludesSome:YR,equals:JR,weakEquals:WR,inNumberRange:xv};function Dr(t){return t==null||t===""}const yV={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:rr("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);return typeof r=="string"?Ss.includesString:typeof r=="number"?Ss.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Ss.equals:Array.isArray(r)?Ss.arrIncludes:Ss.weakEquals},t.getFilterFn=()=>{var n,r;return kh(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:Ss[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,s;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const s=t.getFilterFn(),a=r?.find(m=>m.id===t.id),l=li(n,a?a.value:void 0);if(hC(s,l,t)){var c;return(c=r?.filter(m=>m.id!==t.id))!=null?c:[]}const f={id:t.id,value:l};if(a){var d;return(d=r?.map(m=>m.id===t.id?f:m))!=null?d:[]}return r!=null&&r.length?[...r,f]:[f]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=s=>{var a;return(a=li(e,s))==null?void 0:a.filter(l=>{const c=n.find(f=>f.id===l.id);if(c){const f=c.getFilterFn();if(hC(f,l.value,c))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function hC(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const vV=(t,e,n)=>n.reduce((r,s)=>{const a=s.getValue(t);return r+(typeof a=="number"?a:0)},0),bV=(t,e,n)=>{let r;return n.forEach(s=>{const a=s.getValue(t);a!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}),r},SV=(t,e,n)=>{let r;return n.forEach(s=>{const a=s.getValue(t);a!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}),r},wV=(t,e,n)=>{let r,s;return n.forEach(a=>{const l=a.getValue(t);l!=null&&(r===void 0?l>=l&&(r=s=l):(r>l&&(r=l),s<l&&(s=l)))}),[r,s]},xV=(t,e)=>{let n=0,r=0;if(e.forEach(s=>{let a=s.getValue(t);a!=null&&(a=+a)>=a&&(++n,r+=a)}),n)return r/n},_V=(t,e)=>{if(!e.length)return;const n=e.map(a=>a.getValue(t));if(!cV(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),s=n.sort((a,l)=>a-l);return n.length%2!==0?s[r]:(s[r-1]+s[r])/2},CV=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),EV=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,kV=(t,e)=>e.length,Lg={sum:vV,min:bV,max:SV,extent:wV,mean:xV,median:_V,unique:CV,uniqueCount:EV,count:kV},RV={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:rr("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);if(typeof r=="number")return Lg.sum;if(Object.prototype.toString.call(r)==="[object Date]")return Lg.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return kh(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:Lg[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var s;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((s=n.subRows)!=null&&s.length)}}};function AV(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(a=>!e.includes(a.id));return n==="remove"?r:[...e.map(a=>t.find(l=>l.id===a)).filter(Boolean),...r]}const TV={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:rr("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=Pe(n=>[vu(e,n)],n=>n.findIndex(r=>r.id===t.id),Fe(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=vu(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const s=vu(e,n);return((r=s[s.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=Pe(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>s=>{let a=[];if(!(e!=null&&e.length))a=s;else{const l=[...e],c=[...s];for(;c.length&&l.length;){const f=l.shift(),d=c.findIndex(m=>m.id===f);d>-1&&a.push(c.splice(d,1)[0])}a=[...a,...c]}return AV(a,n,r)},Fe(t.options,"debugTable"))}},jg=()=>({left:[],right:[]}),MV={getInitialState:t=>({columnPinning:jg(),...t}),getDefaultOptions:t=>({onColumnPinningChange:rr("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(s=>s.id).filter(Boolean);e.setColumnPinning(s=>{var a,l;if(n==="right"){var c,f;return{left:((c=s?.left)!=null?c:[]).filter(p=>!(r!=null&&r.includes(p))),right:[...((f=s?.right)!=null?f:[]).filter(p=>!(r!=null&&r.includes(p))),...r]}}if(n==="left"){var d,m;return{left:[...((d=s?.left)!=null?d:[]).filter(p=>!(r!=null&&r.includes(p))),...r],right:((m=s?.right)!=null?m:[]).filter(p=>!(r!=null&&r.includes(p)))}}return{left:((a=s?.left)!=null?a:[]).filter(p=>!(r!=null&&r.includes(p))),right:((l=s?.right)!=null?l:[]).filter(p=>!(r!=null&&r.includes(p)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var s,a,l;return((s=r.columnDef.enablePinning)!=null?s:!0)&&((a=(l=e.options.enableColumnPinning)!=null?l:e.options.enablePinning)!=null?a:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(c=>c.id),{left:r,right:s}=e.getState().columnPinning,a=n.some(c=>r?.includes(c)),l=n.some(c=>s?.includes(c));return a?"left":l?"right":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();return s?(n=(r=e.getState().columnPinning)==null||(r=r[s])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=Pe(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,s)=>{const a=[...r??[],...s??[]];return n.filter(l=>!a.includes(l.column.id))},Fe(e.options,"debugRows")),t.getLeftVisibleCells=Pe(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(a=>n.find(l=>l.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),Fe(e.options,"debugRows")),t.getRightVisibleCells=Pe(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(a=>n.find(l=>l.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),Fe(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?jg():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:jg())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var s,a;return!!((s=r.left)!=null&&s.length||(a=r.right)!=null&&a.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=Pe(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),Fe(t.options,"debugColumns")),t.getRightLeafColumns=Pe(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),Fe(t.options,"debugColumns")),t.getCenterLeafColumns=Pe(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const s=[...n??[],...r??[]];return e.filter(a=>!s.includes(a.id))},Fe(t.options,"debugColumns"))}};function OV(t){return t||(typeof document<"u"?document:null)}const Uf={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Pg=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),IV={getDefaultColumnDef:()=>Uf,getInitialState:t=>({columnSizing:{},columnSizingInfo:Pg(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:rr("columnSizing",t),onColumnSizingInfoChange:rr("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,s;const a=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:Uf.minSize,(r=a??t.columnDef.size)!=null?r:Uf.size),(s=t.columnDef.maxSize)!=null?s:Uf.maxSize)},t.getStart=Pe(n=>[n,vu(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((s,a)=>s+a.getSize(),0),Fe(e.options,"debugColumns")),t.getAfter=Pe(n=>[n,vu(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((s,a)=>s+a.getSize(),0),Fe(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...s}=n;return s})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=s=>{if(s.subHeaders.length)s.subHeaders.forEach(r);else{var a;n+=(a=s.column.getSize())!=null?a:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),s=r?.getCanResize();return a=>{if(!r||!s||(a.persist==null||a.persist(),Fg(a)&&a.touches&&a.touches.length>1))return;const l=t.getSize(),c=t?t.getLeafHeaders().map(_=>[_.column.id,_.column.getSize()]):[[r.id,r.getSize()]],f=Fg(a)?Math.round(a.touches[0].clientX):a.clientX,d={},m=(_,k)=>{typeof k=="number"&&(e.setColumnSizingInfo(R=>{var O,L;const A=e.options.columnResizeDirection==="rtl"?-1:1,z=(k-((O=R?.startOffset)!=null?O:0))*A,P=Math.max(z/((L=R?.startSize)!=null?L:0),-.999999);return R.columnSizingStart.forEach(j=>{let[I,F]=j;d[I]=Math.round(Math.max(F+F*P,0)*100)/100}),{...R,deltaOffset:z,deltaPercentage:P}}),(e.options.columnResizeMode==="onChange"||_==="end")&&e.setColumnSizing(R=>({...R,...d})))},p=_=>m("move",_),g=_=>{m("end",_),e.setColumnSizingInfo(k=>({...k,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},y=OV(n),S={moveHandler:_=>p(_.clientX),upHandler:_=>{y?.removeEventListener("mousemove",S.moveHandler),y?.removeEventListener("mouseup",S.upHandler),g(_.clientX)}},w={moveHandler:_=>(_.cancelable&&(_.preventDefault(),_.stopPropagation()),p(_.touches[0].clientX),!1),upHandler:_=>{var k;y?.removeEventListener("touchmove",w.moveHandler),y?.removeEventListener("touchend",w.upHandler),_.cancelable&&(_.preventDefault(),_.stopPropagation()),g((k=_.touches[0])==null?void 0:k.clientX)}},E=NV()?{passive:!1}:!1;Fg(a)?(y?.addEventListener("touchmove",w.moveHandler,E),y?.addEventListener("touchend",w.upHandler,E)):(y?.addEventListener("mousemove",S.moveHandler,E),y?.addEventListener("mouseup",S.upHandler,E)),e.setColumnSizingInfo(_=>({..._,startOffset:f,startSize:l,deltaOffset:0,deltaPercentage:0,columnSizingStart:c,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?Pg():(n=t.initialState.columnSizingInfo)!=null?n:Pg())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0}}};let Vf=null;function NV(){if(typeof Vf=="boolean")return Vf;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return Vf=t,Vf}function Fg(t){return t.type==="touchstart"}const DV={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:rr("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const s=t.columns;return(n=s.length?s.some(a=>a.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=Pe(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),Fe(e.options,"debugRows")),t.getVisibleCells=Pe(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,s)=>[...n,...r,...s],Fe(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>Pe(()=>[r(),r().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(a=>a.getIsVisible==null?void 0:a.getIsVisible()),Fe(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((s,a)=>({...s,[a.id]:n||!(a.getCanHide!=null&&a.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function vu(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const zV={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},LV={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:rr("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,s,a;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&((a=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?a:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>Ss.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return kh(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:Ss[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},jV={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:rr("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var s,a;t.setExpanded(r?{}:(s=(a=t.initialState)==null?void 0:a.expanded)!=null?s:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(a=>{const l=a.split(".");r=Math.max(r,l.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var s;const a=r===!0?!0:!!(r!=null&&r[t.id]);let l={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(c=>{l[c]=!0}):l=r,n=(s=n)!=null?s:!a,!a&&n)return{...l,[t.id]:!0};if(a&&!n){const{[t.id]:c,...f}=l;return f}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r?.[t.id])},t.getCanExpand=()=>{var n,r,s;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((s=t.subRows)!=null&&s.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},e0=0,t0=10,$g=()=>({pageIndex:e0,pageSize:t0}),PV={getInitialState:t=>({...t,pagination:{...$g(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:rr("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const s=a=>li(r,a);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(s)},t.resetPagination=r=>{var s;t.setPagination(r?$g():(s=t.initialState.pagination)!=null?s:$g())},t.setPageIndex=r=>{t.setPagination(s=>{let a=li(r,s.pageIndex);const l=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return a=Math.max(0,Math.min(a,l)),{...s,pageIndex:a}})},t.resetPageIndex=r=>{var s,a;t.setPageIndex(r?e0:(s=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)!=null?s:e0)},t.resetPageSize=r=>{var s,a;t.setPageSize(r?t0:(s=(a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)!=null?s:t0)},t.setPageSize=r=>{t.setPagination(s=>{const a=Math.max(1,li(r,s.pageSize)),l=s.pageSize*s.pageIndex,c=Math.floor(l/a);return{...s,pageIndex:c,pageSize:a}})},t.setPageCount=r=>t.setPagination(s=>{var a;let l=li(r,(a=t.options.pageCount)!=null?a:-1);return typeof l=="number"&&(l=Math.max(-1,l)),{...s,pageCount:l}}),t.getPageOptions=Pe(()=>[t.getPageCount()],r=>{let s=[];return r&&r>0&&(s=[...new Array(r)].fill(null).map((a,l)=>l)),s},Fe(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,s=t.getPageCount();return s===-1?!0:s===0?!1:r<s-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},Bg=()=>({top:[],bottom:[]}),FV={getInitialState:t=>({rowPinning:Bg(),...t}),getDefaultOptions:t=>({onRowPinningChange:rr("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,s)=>{const a=r?t.getLeafRows().map(f=>{let{id:d}=f;return d}):[],l=s?t.getParentRows().map(f=>{let{id:d}=f;return d}):[],c=new Set([...l,t.id,...a]);e.setRowPinning(f=>{var d,m;if(n==="bottom"){var p,g;return{top:((p=f?.top)!=null?p:[]).filter(w=>!(c!=null&&c.has(w))),bottom:[...((g=f?.bottom)!=null?g:[]).filter(w=>!(c!=null&&c.has(w))),...Array.from(c)]}}if(n==="top"){var y,S;return{top:[...((y=f?.top)!=null?y:[]).filter(w=>!(c!=null&&c.has(w))),...Array.from(c)],bottom:((S=f?.bottom)!=null?S:[]).filter(w=>!(c!=null&&c.has(w)))}}return{top:((d=f?.top)!=null?d:[]).filter(w=>!(c!=null&&c.has(w))),bottom:((m=f?.bottom)!=null?m:[]).filter(w=>!(c!=null&&c.has(w)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:s}=e.options;return typeof r=="function"?r(t):(n=r??s)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:s}=e.getState().rowPinning,a=n.some(c=>r?.includes(c)),l=n.some(c=>s?.includes(c));return a?"top":l?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();if(!s)return-1;const a=(n=s==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(l=>{let{id:c}=l;return c});return(r=a?.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?Bg():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:Bg())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var s,a;return!!((s=r.top)!=null&&s.length||(a=r.bottom)!=null&&a.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var s;return((s=t.options.keepPinnedRows)==null||s?(n??[]).map(l=>{const c=t.getRow(l,!0);return c.getIsAllParentsExpanded()?c:null}):(n??[]).map(l=>e.find(c=>c.id===l))).filter(Boolean).map(l=>({...l,position:r}))},t.getTopRows=Pe(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),Fe(t.options,"debugRows")),t.getBottomRows=Pe(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),Fe(t.options,"debugRows")),t.getCenterRows=Pe(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const s=new Set([...n??[],...r??[]]);return e.filter(a=>!s.has(a.id))},Fe(t.options,"debugRows"))}},$V={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:rr("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},s=t.getPreGroupedRowModel().flatRows;return e?s.forEach(a=>{a.getCanSelect()&&(r[a.id]=!0)}):s.forEach(a=>{delete r[a.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),s={...n};return t.getRowModel().rows.forEach(a=>{n0(s,a.id,r,!0,t)}),s}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=Pe(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?Ug(t,n):{rows:[],flatRows:[],rowsById:{}},Fe(t.options,"debugTable")),t.getFilteredSelectedRowModel=Pe(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?Ug(t,n):{rows:[],flatRows:[],rowsById:{}},Fe(t.options,"debugTable")),t.getGroupedSelectedRowModel=Pe(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?Ug(t,n):{rows:[],flatRows:[],rowsById:{}},Fe(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(s=>s.getCanSelect()&&!n[s.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(s=>!n[s.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const s=t.getIsSelected();e.setRowSelection(a=>{var l;if(n=typeof n<"u"?n:!s,t.getCanSelect()&&s===n)return a;const c={...a};return n0(c,t.id,n,(l=r?.selectChildren)!=null?l:!0,e),c})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return _v(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return r0(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return r0(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var s;n&&t.toggleSelected((s=r.target)==null?void 0:s.checked)}}}},n0=(t,e,n,r,s)=>{var a;const l=s.getRow(e,!0);n?(l.getCanMultiSelect()||Object.keys(t).forEach(c=>delete t[c]),l.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(a=l.subRows)!=null&&a.length&&l.getCanSelectSubRows()&&l.subRows.forEach(c=>n0(t,c.id,n,r,s))};function Ug(t,e){const n=t.getState().rowSelection,r=[],s={},a=function(l,c){return l.map(f=>{var d;const m=_v(f,n);if(m&&(r.push(f),s[f.id]=f),(d=f.subRows)!=null&&d.length&&(f={...f,subRows:a(f.subRows)}),m)return f}).filter(Boolean)};return{rows:a(e.rows),flatRows:r,rowsById:s}}function _v(t,e){var n;return(n=e[t.id])!=null?n:!1}function r0(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let s=!0,a=!1;return t.subRows.forEach(l=>{if(!(a&&!s)&&(l.getCanSelect()&&(_v(l,e)?a=!0:s=!1),l.subRows&&l.subRows.length)){const c=r0(l,e);c==="all"?a=!0:(c==="some"&&(a=!0),s=!1)}}),s?"all":a?"some":!1}const s0=/([0-9]+)/gm,BV=(t,e,n)=>XR(hi(t.getValue(n)).toLowerCase(),hi(e.getValue(n)).toLowerCase()),UV=(t,e,n)=>XR(hi(t.getValue(n)),hi(e.getValue(n))),VV=(t,e,n)=>Cv(hi(t.getValue(n)).toLowerCase(),hi(e.getValue(n)).toLowerCase()),qV=(t,e,n)=>Cv(hi(t.getValue(n)),hi(e.getValue(n))),HV=(t,e,n)=>{const r=t.getValue(n),s=e.getValue(n);return r>s?1:r<s?-1:0},KV=(t,e,n)=>Cv(t.getValue(n),e.getValue(n));function Cv(t,e){return t===e?0:t>e?1:-1}function hi(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function XR(t,e){const n=t.split(s0).filter(Boolean),r=e.split(s0).filter(Boolean);for(;n.length&&r.length;){const s=n.shift(),a=r.shift(),l=parseInt(s,10),c=parseInt(a,10),f=[l,c].sort();if(isNaN(f[0])){if(s>a)return 1;if(a>s)return-1;continue}if(isNaN(f[1]))return isNaN(l)?-1:1;if(l>c)return 1;if(c>l)return-1}return n.length-r.length}const Bl={alphanumeric:BV,alphanumericCaseSensitive:UV,text:VV,textCaseSensitive:qV,datetime:HV,basic:KV},GV={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:rr("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const s of n){const a=s?.getValue(t.id);if(Object.prototype.toString.call(a)==="[object Date]")return Bl.datetime;if(typeof a=="string"&&(r=!0,a.split(s0).length>1))return Bl.alphanumeric}return r?Bl.text:Bl.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return kh(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:Bl[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const s=t.getNextSortingOrder(),a=typeof n<"u"&&n!==null;e.setSorting(l=>{const c=l?.find(y=>y.id===t.id),f=l?.findIndex(y=>y.id===t.id);let d=[],m,p=a?n:s==="desc";if(l!=null&&l.length&&t.getCanMultiSort()&&r?c?m="toggle":m="add":l!=null&&l.length&&f!==l.length-1?m="replace":c?m="toggle":m="replace",m==="toggle"&&(a||s||(m="remove")),m==="add"){var g;d=[...l,{id:t.id,desc:p}],d.splice(0,d.length-((g=e.options.maxMultiSortColCount)!=null?g:Number.MAX_SAFE_INTEGER))}else m==="toggle"?d=l.map(y=>y.id===t.id?{...y,desc:p}:y):m==="remove"?d=l.filter(y=>y.id!==t.id):d=[{id:t.id,desc:p}];return d})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,s;const a=t.getFirstSortDir(),l=t.getIsSorted();return l?l!==a&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(s=e.options.enableMultiRemove)!=null)||s)?!1:l==="desc"?"asc":"desc":a},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(s=>s.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},QV=[pV,DV,TV,MV,gV,yV,zV,LV,GV,RV,jV,PV,FV,$V,IV];function ZV(t){var e,n;const r=[...QV,...(e=t._features)!=null?e:[]];let s={_features:r};const a=s._features.reduce((g,y)=>Object.assign(g,y.getDefaultOptions==null?void 0:y.getDefaultOptions(s)),{}),l=g=>s.options.mergeOptions?s.options.mergeOptions(a,g):{...a,...g};let f={...{},...(n=t.initialState)!=null?n:{}};s._features.forEach(g=>{var y;f=(y=g.getInitialState==null?void 0:g.getInitialState(f))!=null?y:f});const d=[];let m=!1;const p={_features:r,options:{...a,...t},initialState:f,_queue:g=>{d.push(g),m||(m=!0,Promise.resolve().then(()=>{for(;d.length;)d.shift()();m=!1}).catch(y=>setTimeout(()=>{throw y})))},reset:()=>{s.setState(s.initialState)},setOptions:g=>{const y=li(g,s.options);s.options=l(y)},getState:()=>s.options.state,setState:g=>{s.options.onStateChange==null||s.options.onStateChange(g)},_getRowId:(g,y,S)=>{var w;return(w=s.options.getRowId==null?void 0:s.options.getRowId(g,y,S))!=null?w:`${S?[S.id,y].join("."):y}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(g,y)=>{let S=(y?s.getPrePaginationRowModel():s.getRowModel()).rowsById[g];if(!S&&(S=s.getCoreRowModel().rowsById[g],!S))throw new Error;return S},_getDefaultColumnDef:Pe(()=>[s.options.defaultColumn],g=>{var y;return g=(y=g)!=null?y:{},{header:S=>{const w=S.header.column.columnDef;return w.accessorKey?w.accessorKey:w.accessorFn?w.id:null},cell:S=>{var w,E;return(w=(E=S.renderValue())==null||E.toString==null?void 0:E.toString())!=null?w:null},...s._features.reduce((S,w)=>Object.assign(S,w.getDefaultColumnDef==null?void 0:w.getDefaultColumnDef()),{}),...g}},Fe(t,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:Pe(()=>[s._getColumnDefs()],g=>{const y=function(S,w,E){return E===void 0&&(E=0),S.map(_=>{const k=hV(s,_,E,w),R=_;return k.columns=R.columns?y(R.columns,k,E+1):[],k})};return y(g)},Fe(t,"debugColumns")),getAllFlatColumns:Pe(()=>[s.getAllColumns()],g=>g.flatMap(y=>y.getFlatColumns()),Fe(t,"debugColumns")),_getAllFlatColumnsById:Pe(()=>[s.getAllFlatColumns()],g=>g.reduce((y,S)=>(y[S.id]=S,y),{}),Fe(t,"debugColumns")),getAllLeafColumns:Pe(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(g,y)=>{let S=g.flatMap(w=>w.getLeafColumns());return y(S)},Fe(t,"debugColumns")),getColumn:g=>s._getAllFlatColumnsById()[g]};Object.assign(s,p);for(let g=0;g<s._features.length;g++){const y=s._features[g];y==null||y.createTable==null||y.createTable(s)}return s}function eA(){return t=>Pe(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(s,a,l){a===void 0&&(a=0);const c=[];for(let d=0;d<s.length;d++){const m=mV(t,t._getRowId(s[d],d,l),s[d],d,a,void 0,l?.id);if(n.flatRows.push(m),n.rowsById[m.id]=m,c.push(m),t.options.getSubRows){var f;m.originalSubRows=t.options.getSubRows(s[d],d),(f=m.originalSubRows)!=null&&f.length&&(m.subRows=r(m.originalSubRows,a+1,m))}}return c};return n.rows=r(e),n},Fe(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function tA(){return t=>Pe(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const r=t.getState().sorting,s=[],a=r.filter(f=>{var d;return(d=t.getColumn(f.id))==null?void 0:d.getCanSort()}),l={};a.forEach(f=>{const d=t.getColumn(f.id);d&&(l[f.id]={sortUndefined:d.columnDef.sortUndefined,invertSorting:d.columnDef.invertSorting,sortingFn:d.getSortingFn()})});const c=f=>{const d=f.map(m=>({...m}));return d.sort((m,p)=>{for(let y=0;y<a.length;y+=1){var g;const S=a[y],w=l[S.id],E=w.sortUndefined,_=(g=S?.desc)!=null?g:!1;let k=0;if(E){const R=m.getValue(S.id),O=p.getValue(S.id),L=R===void 0,A=O===void 0;if(L||A){if(E==="first")return L?-1:1;if(E==="last")return L?1:-1;k=L&&A?0:L?E:-E}}if(k===0&&(k=w.sortingFn(m,p,S.id)),k!==0)return _&&(k*=-1),w.invertSorting&&(k*=-1),k}return m.index-p.index}),d.forEach(m=>{var p;s.push(m),(p=m.subRows)!=null&&p.length&&(m.subRows=c(m.subRows))}),d};return{rows:c(n.rows),flatRows:s,rowsById:n.rowsById}},Fe(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}function Gd(t,e){return t?YV(t)?U.createElement(t,e):t:null}function YV(t){return JV(t)||typeof t=="function"||WV(t)}function JV(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function WV(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function nA(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=U.useState(()=>({current:ZV(e)})),[r,s]=U.useState(()=>n.current.initialState);return n.current.setOptions(a=>({...a,...t,state:{...r,...t.state},onStateChange:l=>{s(l),t.onStateChange==null||t.onStateChange(l)}})),n.current}function XV(t){const e=tn.c(29),{getValue:n,row:r,column:s,table:a}=t,{index:l}=r,{id:c}=s;let f;e[0]!==n?(f=n(),e[0]=n,e[1]=f):f=e[1];const d=f,[m,p]=U.useState(d),[g,y]=U.useState(!1);let S,w;e[2]!==d?(S=()=>{p(d)},w=[d],e[2]=d,e[3]=S,e[4]=w):(S=e[3],w=e[4]),U.useEffect(S,w);let E;e[5]!==c||e[6]!==l||e[7]!==d||e[8]!==a||e[9]!==m?(E=()=>{y(!1),m!==d&&a.options.meta?.updateData(l,c,m)},e[5]=c,e[6]=l,e[7]=d,e[8]=a,e[9]=m,e[10]=E):E=e[10];const _=E;let k;e[11]!==d?(k=z=>{z.key==="Enter"&&z.target.blur(),z.key==="Escape"&&(p(d),y(!1))},e[11]=d,e[12]=k):k=e[12];const R=k;if(d===null&&!g){let z;return e[13]===Symbol.for("react.memo_cache_sentinel")?(z=x.jsx("span",{className:"text-neutral-400 dark:text-neutral-600 italic cursor-pointer",onClick:()=>y(!0),children:"NULL"}),e[13]=z):z=e[13],z}if(typeof d=="boolean"&&!g){let z;e[14]===Symbol.for("react.memo_cache_sentinel")?(z=()=>y(!0),e[14]=z):z=e[14];const P=d?"true":"false";let j;return e[15]!==P?(j=x.jsx("span",{className:"text-neutral-500 dark:text-neutral-400 cursor-pointer",onClick:z,children:P}),e[15]=P,e[16]=j):j=e[16],j}if(typeof d=="object"&&d!==null){let z;e[17]!==d?(z=JSON.stringify(d),e[17]=d,e[18]=z):z=e[18];let P;return e[19]!==z?(P=x.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:z}),e[19]=z,e[20]=P):P=e[20],P}if(g){const z=m===null?"":String(m);let P;e[21]===Symbol.for("react.memo_cache_sentinel")?(P=I=>p(I.target.value),e[21]=P):P=e[21];let j;return e[22]!==R||e[23]!==_||e[24]!==z?(j=x.jsx("input",{value:z,onChange:P,onBlur:_,onKeyDown:R,autoFocus:!0,className:"w-full bg-white dark:bg-neutral-800 border border-blue-500 dark:border-blue-400 rounded px-1 py-0.5 text-[12px] font-mono text-neutral-700 dark:text-neutral-200 outline-none"}),e[22]=R,e[23]=_,e[24]=z,e[25]=j):j=e[25],j}let O;e[26]===Symbol.for("react.memo_cache_sentinel")?(O=()=>y(!0),e[26]=O):O=e[26];const L=String(m);let A;return e[27]!==L?(A=x.jsx("span",{className:"text-neutral-600 dark:text-neutral-400 cursor-pointer hover:text-neutral-900 dark:hover:text-neutral-200",onClick:O,children:L}),e[27]=L,e[28]=A):A=e[28],A}function e8(t){const e=tn.c(8),{getValue:n}=t;let r,s;if(e[0]!==n){r=Symbol.for("react.early_return_sentinel");e:{if(s=n(),s===null){let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=x.jsx("span",{className:"text-neutral-400 dark:text-neutral-600 italic",children:"NULL"}),e[3]=c):c=e[3],r=c;break e}if(typeof s=="boolean"){const c=s?"true":"false";let f;e[4]!==c?(f=x.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:c}),e[4]=c,e[5]=f):f=e[5],r=f;break e}if(typeof s=="object"){r=x.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:JSON.stringify(s)});break e}}e[0]=n,e[1]=r,e[2]=s}else r=e[1],s=e[2];if(r!==Symbol.for("react.early_return_sentinel"))return r;const a=String(s);let l;return e[6]!==a?(l=x.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:a}),e[6]=a,e[7]=l):l=e[7],l}function t8({response:t,duration:e,isLoading:n,tableName:r,onUpdateCell:s,onDeleteRow:a}){const[l,c]=U.useState([]),[f,d]=U.useState([]),[m,p]=U.useState(null),g=!!r&&!!s,y=!!r&&!!a;U.useEffect(()=>{d(t?.rows??[])},[t?.rows]);const S=U.useMemo(()=>{if(!t?.columns)return[];const E=t.columns.map(_=>({accessorKey:_,header:_,cell:g?XV:e8}));return y&&E.push({id:"actions",header:"",size:50,cell:({row:_})=>{const k=m===_.index;return x.jsx("div",{className:"flex items-center gap-1",children:k?x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:()=>{a?.(_.original),p(null)},className:"p-1 text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300",title:"Confirm delete",children:x.jsx(Ou,{size:14})}),x.jsx("button",{onClick:()=>p(null),className:"p-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 text-xs",title:"Cancel",children:""})]}):x.jsx("button",{onClick:()=>p(_.index),className:"p-1 text-neutral-400 hover:text-red-500 dark:hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete row",children:x.jsx(Ou,{size:14})})})}}),E},[t?.columns,g,y,m,a]),w=nA({data:f,columns:S,state:{sorting:l},onSortingChange:c,getCoreRowModel:eA(),getSortedRowModel:tA(),meta:{updateData:(E,_,k)=>{const R=f[E];d(O=>O.map((L,A)=>A===E?{...L,[_]:k}:L)),s?.(R,_,k)}}});return n?x.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:x.jsxs("div",{className:"flex flex-col items-center gap-3 text-neutral-400 dark:text-neutral-500",children:[x.jsx("div",{className:"w-6 h-6 border-2 border-neutral-200 border-t-neutral-400 dark:border-neutral-700 dark:border-t-neutral-500 rounded-full animate-spin"}),x.jsx("span",{className:"text-sm",children:"Running query..."})]})}):t?t.error?x.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:x.jsxs("div",{className:"flex items-center gap-3 text-red-500 dark:text-red-400",children:[x.jsx(zz,{size:18}),x.jsx("span",{className:"text-sm",children:t.error})]})}):t.rows_affected!==void 0&&!t.rows?x.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:x.jsxs("div",{className:"flex flex-col items-center gap-2",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-500/30",children:"OK"}),x.jsxs("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[x.jsx("span",{className:"font-medium",children:t.rows_affected})," row(s) affected"]})]}),x.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-600",children:[e.toFixed(0),"ms"]})]})}):x.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden dark:shadow-2xl",children:[x.jsx("div",{className:"flex-1 overflow-auto",children:x.jsxs("table",{className:"w-full text-[13px]",children:[x.jsx("thead",{className:"sticky top-0 z-10 bg-neutral-100 dark:bg-neutral-950",children:w.getHeaderGroups().map(E=>x.jsx("tr",{children:E.headers.map(_=>{const k=_.column.getIsSorted(),R=_.id==="actions";return x.jsx("th",{onClick:R?void 0:_.column.getToggleSortingHandler(),className:`text-left px-4 py-2 text-[11px] font-medium whitespace-nowrap transition-colors select-none group bg-neutral-100 dark:bg-neutral-950 ${R?"w-12":"cursor-pointer"} ${k?"text-neutral-900 dark:text-neutral-200":"text-neutral-500 dark:text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-400"}`,children:!R&&x.jsxs("div",{className:"flex items-center gap-1",children:[Gd(_.column.columnDef.header,_.getContext()),x.jsx("span",{className:`transition-opacity ${k?"opacity-100":"opacity-0 group-hover:opacity-40"}`,children:k==="asc"?x.jsx(fu,{size:12}):k==="desc"?x.jsx(Ji,{size:12}):x.jsx(sd,{size:12})})]})},_.id)})},E.id))}),x.jsx("tbody",{children:w.getRowModel().rows.map((E,_)=>{const k=_%2===1,R=E.getVisibleCells();return x.jsx("tr",{className:`group transition-colors ${k?"bg-neutral-200/40 dark:bg-neutral-800/30 hover:bg-neutral-200/70 dark:hover:bg-neutral-800/50":"hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30"}`,children:R.map((O,L)=>x.jsx("td",{className:`px-4 py-2 whitespace-nowrap font-mono text-[12px] ${L===0?"rounded-l-lg":""} ${L===R.length-1?"rounded-r-lg":""}`,children:Gd(O.column.columnDef.cell,O.getContext())},O.id))},E.id)})})]})}),x.jsxs("div",{className:"px-3 py-2 flex items-center gap-4 text-xs border-t border-neutral-200 dark:border-white/8 shrink-0",children:[x.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-500/30",children:"OK"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Time:"}),x.jsxs("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:[e.toFixed(0),"ms"]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-neutral-400 dark:text-neutral-500",children:"Rows:"}),x.jsx("span",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:f.length})]}),g&&x.jsx("div",{className:"ml-auto text-neutral-400 dark:text-neutral-600 text-[10px]",children:"Click a cell to edit"})]})]}):x.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#1a1a1a]/60 dark:backdrop-blur-xl border border-neutral-200 dark:border-white/8 rounded-xl",children:x.jsxs("div",{className:"flex flex-col items-center text-neutral-400 dark:text-neutral-500",children:[x.jsx("svg",{className:"w-8 h-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),x.jsx("span",{className:"text-sm",children:"Run a query to see results"})]})})}class n8 extends Jk{constructor(){super({pluginId:"tanstack-ai-devtools"})}}const Ft=new n8;async function r8(t){let e="";for await(const n of t)n.type==="content"&&n.delta&&(e+=n.delta);return e}function s8(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"].version===1&&typeof t["~standard"].jsonSchema=="object"&&typeof t["~standard"].jsonSchema.input=="function"}function Wi(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t!==null&&t["~standard"]!==null&&"version"in t["~standard"]&&t["~standard"].version===1&&"validate"in t["~standard"]&&typeof t["~standard"].validate=="function"}function bu(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],c=!e.includes(a);l.type==="object"&&l.properties?r[a]=bu(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:bu(l.items,l.items.required||[])}:c&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=bu(n.items,n.items.required||[])),n}function i0(t,e={}){if(!t)return;const{forStructuredOutput:n=!1}=e;if(s8(t)){let s=t["~standard"].jsonSchema.input({target:"draft-07"});if(typeof s=="object"&&"$schema"in s){const{$schema:a,...l}=s;s=l}return typeof s=="object"&&("properties"in s&&!s.type&&(s.type="object"),s.type==="object"&&!("properties"in s)&&(s.properties={}),s.type==="object"&&!("required"in s)&&(s.required=[]),n&&(s=bu(s,s.required||[]))),s}return n&&typeof t=="object"?bu(t,t.required||[]):t}function wo(t,e){if(!Wi(t))return e;const n=t["~standard"].validate(e);if(n instanceof Promise)throw new Error("Schema validation returned a Promise. Use validateWithStandardSchema for async validation.");if(!n.issues)return n.value;const r=n.issues.map(s=>s.message||"Validation failed").join(", ");throw new Error(`Validation failed: ${r}`)}class i8{constructor(e){this.toolCallsMap=new Map,this.tools=e}addToolCallChunk(e){const n=e.index,r=this.toolCallsMap.get(n);r?(e.toolCall.function.name&&!r.function.name&&(r.function.name=e.toolCall.function.name),e.toolCall.function.arguments&&(r.function.arguments+=e.toolCall.function.arguments)):e.toolCall.id&&e.toolCall.function.name&&this.toolCallsMap.set(n,{id:e.toolCall.id,type:"function",function:{name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||""}})}hasToolCalls(){return this.getToolCalls().length>0}getToolCalls(){return Array.from(this.toolCallsMap.values()).filter(e=>e.id&&e.function.name&&e.function.name.trim().length>0)}async*executeTools(e){const n=this.getToolCalls(),r=[];for(const s of n){const a=this.tools.find(c=>c.name===s.function.name);let l;if(a?.execute)try{let c;try{c=JSON.parse(s.function.arguments)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${s.function.arguments}`)}if(a.inputSchema&&Wi(a.inputSchema))try{c=wo(a.inputSchema,c)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Input validation failed for tool ${a.name}: ${m}`)}let f=await a.execute(c);if(a.outputSchema&&Wi(a.outputSchema)&&f!==void 0&&f!==null)try{f=wo(a.outputSchema,f)}catch(d){const m=d instanceof Error?d.message:"Validation failed";throw new Error(`Output validation failed for tool ${a.name}: ${m}`)}l=typeof f=="string"?f:JSON.stringify(f)}catch(c){l=`Error executing tool: ${c instanceof Error?c.message:"Unknown error"}`}else l=`Tool ${s.function.name} does not have an execute function`;yield{type:"tool_result",id:e.id,model:e.model,timestamp:Date.now(),toolCallId:s.id,content:l},r.push({role:"tool",content:l,toolCallId:s.id})}return r}clear(){this.toolCallsMap.clear()}}async function pC(t,e,n=new Map,r=new Map){const s=[],a=[],l=[],c=new Map;for(const f of e)c.set(f.name,f);for(const f of t){const d=c.get(f.function.name),m=f.function.name;if(!d){s.push({toolCallId:f.id,toolName:m,result:{error:`Unknown tool: ${m}`},state:"output-error"});continue}let p={};const g=f.function.arguments.trim()||"{}";try{p=JSON.parse(g)}catch{throw new Error(`Failed to parse tool arguments as JSON: ${g}`)}if(d.inputSchema&&Wi(d.inputSchema))try{p=wo(d.inputSchema,p)}catch(S){const w=S instanceof Error?S.message:"Validation failed";s.push({toolCallId:f.id,toolName:m,result:{error:`Input validation failed for tool ${d.name}: ${w}`},state:"output-error"});continue}if(!d.execute){if(d.needsApproval){const S=`approval_${f.id}`;n.has(S)?n.get(S)?r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p}):s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"}):a.push({toolCallId:f.id,toolName:f.function.name,input:p,approvalId:S})}else r.has(f.id)?s.push({toolCallId:f.id,toolName:m,result:r.get(f.id)}):l.push({toolCallId:f.id,toolName:m,input:p});continue}if(d.needsApproval){const S=`approval_${f.id}`;if(n.has(S))if(n.get(S)){const E=Date.now();try{let _=await d.execute(p);const k=Date.now()-E;d.outputSchema&&Wi(d.outputSchema)&&_!==void 0&&_!==null&&(_=wo(d.outputSchema,_)),s.push({toolCallId:f.id,toolName:m,result:typeof _=="string"?JSON.parse(_):_||null,duration:k})}catch(_){const k=Date.now()-E,R=_ instanceof Error?_.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:R},state:"output-error",duration:k})}}else s.push({toolCallId:f.id,toolName:m,result:{error:"User declined tool execution"},state:"output-error"});else a.push({toolCallId:f.id,toolName:m,input:p,approvalId:S});continue}const y=Date.now();try{let S=await d.execute(p);const w=Date.now()-y;d.outputSchema&&Wi(d.outputSchema)&&S!==void 0&&S!==null&&(S=wo(d.outputSchema,S)),s.push({toolCallId:f.id,toolName:m,result:typeof S=="string"?JSON.parse(S):S||null,duration:w})}catch(S){const w=Date.now()-y,E=S instanceof Error?S.message:"Unknown error";s.push({toolCallId:f.id,toolName:m,result:{error:E},state:"output-error",duration:w})}}return{results:s,needsApproval:a,needsClientExecution:l}}function rA(t){return({iterationCount:e})=>e<t}class sA{constructor(e){this.iterationCount=0,this.lastFinishReason=null,this.streamStartTime=0,this.totalChunkCount=0,this.currentMessageId=null,this.accumulatedContent="",this.doneChunk=null,this.shouldEmitStreamEnd=!0,this.earlyTermination=!1,this.toolPhase="continue",this.cyclePhase="processText",this.adapter=e.adapter,this.params=e.params,this.systemPrompts=e.params.systemPrompts||[],this.tools=e.params.tools||[],this.loopStrategy=e.params.agentLoopStrategy||rA(5),this.toolCallManager=new i8(this.tools),this.initialMessageCount=e.params.messages.length,this.messages=e.params.messages,this.requestId=this.createId("chat"),this.streamId=this.createId("stream"),this.effectiveRequest=e.params.abortController?{signal:e.params.abortController.signal}:void 0,this.effectiveSignal=e.params.abortController?.signal}getAccumulatedContent(){return this.accumulatedContent}getMessages(){return this.messages}async*run(){this.beforeRun();try{if((yield*this.checkForPendingToolCalls())==="wait")return;do{if(this.earlyTermination||this.isAborted())return;this.beginCycle(),this.cyclePhase==="processText"?yield*this.streamModelResponse():yield*this.processToolCalls(),this.endCycle()}while(this.shouldContinue())}finally{this.afterRun()}}beforeRun(){this.streamStartTime=Date.now();const{model:e,tools:n,temperature:r,topP:s,maxTokens:a,metadata:l,modelOptions:c,conversationId:f}=this.params,d={};r!==void 0&&(d.temperature=r),s!==void 0&&(d.topP=s),a!==void 0&&(d.maxTokens=a),l!==void 0&&(d.metadata=l),Ft.emit("text:started",{requestId:this.requestId,streamId:this.streamId,model:e,provider:this.adapter.name,messageCount:this.initialMessageCount,hasTools:!!n&&n.length>0,streaming:!0,timestamp:Date.now(),clientId:f,toolNames:n?.map(m=>m.name),options:Object.keys(d).length>0?d:void 0,modelOptions:c}),Ft.emit("stream:started",{streamId:this.streamId,model:e,provider:this.adapter.name,timestamp:Date.now()})}afterRun(){if(!this.shouldEmitStreamEnd)return;const e=Date.now();Ft.emit("text:completed",{requestId:this.requestId,streamId:this.streamId,model:this.params.model,content:this.accumulatedContent,messageId:this.currentMessageId||void 0,finishReason:this.lastFinishReason||void 0,usage:this.doneChunk?.usage,timestamp:e}),Ft.emit("stream:ended",{requestId:this.requestId,streamId:this.streamId,totalChunks:this.totalChunkCount,duration:e-this.streamStartTime,timestamp:e})}beginCycle(){this.cyclePhase==="processText"&&this.beginIteration()}endCycle(){if(this.cyclePhase==="processText"){this.cyclePhase="executeToolCalls";return}this.cyclePhase="processText",this.iterationCount++}beginIteration(){this.currentMessageId=this.createId("msg"),this.accumulatedContent="",this.doneChunk=null}async*streamModelResponse(){const{temperature:e,topP:n,maxTokens:r,metadata:s,modelOptions:a}=this.params,c=this.params.tools?.map(f=>({...f,inputSchema:f.inputSchema?i0(f.inputSchema):void 0,outputSchema:f.outputSchema?i0(f.outputSchema):void 0}));for await(const f of this.adapter.chatStream({model:this.params.model,messages:this.messages,tools:c,temperature:e,topP:n,maxTokens:r,metadata:s,request:this.effectiveRequest,modelOptions:a,systemPrompts:this.systemPrompts}))if(this.isAborted()||(this.totalChunkCount++,yield f,this.handleStreamChunk(f),this.earlyTermination))break}handleStreamChunk(e){switch(e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break}}handleContentChunk(e){this.accumulatedContent=e.content,Ft.emit("stream:chunk:content",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}handleToolCallChunk(e){this.toolCallManager.addToolCallChunk(e),Ft.emit("stream:chunk:tool-call",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCall.id,toolName:e.toolCall.function.name,index:e.index,arguments:e.toolCall.function.arguments,timestamp:Date.now()})}handleToolResultChunk(e){Ft.emit("stream:chunk:tool-result",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:e.toolCallId,result:e.content,timestamp:Date.now()})}handleDoneChunk(e){if(this.doneChunk?.finishReason==="tool_calls"&&e.finishReason==="stop"){this.lastFinishReason=e.finishReason,Ft.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Ft.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()});return}this.doneChunk=e,this.lastFinishReason=e.finishReason,Ft.emit("stream:chunk:done",{streamId:this.streamId,messageId:this.currentMessageId||void 0,finishReason:e.finishReason,usage:e.usage,timestamp:Date.now()}),e.usage&&Ft.emit("usage:tokens",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,model:this.params.model,usage:e.usage,timestamp:Date.now()})}handleErrorChunk(e){Ft.emit("stream:chunk:error",{streamId:this.streamId,messageId:this.currentMessageId||void 0,error:e.error.message,timestamp:Date.now()}),this.earlyTermination=!0,this.shouldEmitStreamEnd=!1}handleThinkingChunk(e){Ft.emit("stream:chunk:thinking",{streamId:this.streamId,messageId:this.currentMessageId||void 0,content:e.content,delta:e.delta,timestamp:Date.now()})}async*checkForPendingToolCalls(){const e=this.getPendingToolCallsFromMessages();if(e.length===0)return"continue";const n=this.createSyntheticDoneChunk();Ft.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()});const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await pC(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const c of this.emitApprovalRequests(a.needsApproval,n))yield c;for(const c of this.emitClientToolInputs(a.needsClientExecution,n))yield c;return this.shouldEmitStreamEnd=!1,"wait"}const l=this.emitToolResults(a.results,n);for(const c of l)yield c;return"continue"}async*processToolCalls(){if(!this.shouldExecuteToolPhase()){this.setToolPhase("stop");return}const e=this.toolCallManager.getToolCalls(),n=this.doneChunk;if(!n||e.length===0){this.setToolPhase("stop");return}Ft.emit("text:iteration",{requestId:this.requestId,streamId:this.streamId,iterationNumber:this.iterationCount+1,messageCount:this.messages.length,toolCallCount:e.length,timestamp:Date.now()}),this.addAssistantToolCallMessage(e);const{approvals:r,clientToolResults:s}=this.collectClientState(),a=await pC(e,this.tools,r,s);if(a.needsApproval.length>0||a.needsClientExecution.length>0){for(const c of this.emitApprovalRequests(a.needsApproval,n))yield c;for(const c of this.emitClientToolInputs(a.needsClientExecution,n))yield c;this.setToolPhase("wait");return}const l=this.emitToolResults(a.results,n);for(const c of l)yield c;this.toolCallManager.clear(),this.setToolPhase("continue")}shouldExecuteToolPhase(){return this.doneChunk?.finishReason==="tool_calls"&&this.tools.length>0&&this.toolCallManager.hasToolCalls()}addAssistantToolCallMessage(e){this.messages=[...this.messages,{role:"assistant",content:this.accumulatedContent||null,toolCalls:e}]}collectClientState(){const e=new Map,n=new Map;for(const r of this.messages)if(r.role==="assistant"&&r.parts){const s=r.parts;for(const a of s)a.type==="tool-call"&&a.state==="approval-responded"&&a.approval&&e.set(a.approval.id,a.approval.approved),a.type==="tool-call"&&a.output!==void 0&&!a.approval&&n.set(a.id,a.output)}return{approvals:e,clientToolResults:n}}emitApprovalRequests(e,n){const r=[];for(const s of e)Ft.emit("stream:approval-requested",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approvalId:s.approvalId,timestamp:Date.now()}),r.push({type:"approval-requested",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,approval:{id:s.approvalId,needsApproval:!0}});return r}emitClientToolInputs(e,n){const r=[];for(const s of e)Ft.emit("stream:tool-input-available",{streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,input:s.input,timestamp:Date.now()}),r.push({type:"tool-input-available",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,toolName:s.toolName,input:s.input});return r}emitToolResults(e,n){const r=[];for(const s of e){Ft.emit("tool:call-completed",{requestId:this.requestId,streamId:this.streamId,messageId:this.currentMessageId||void 0,toolCallId:s.toolCallId,toolName:s.toolName,result:s.result,duration:s.duration??0,timestamp:Date.now()});const a=JSON.stringify(s.result),l={type:"tool_result",id:n.id,model:n.model,timestamp:Date.now(),toolCallId:s.toolCallId,content:a};r.push(l),this.messages=[...this.messages,{role:"tool",content:a,toolCallId:s.toolCallId}]}return r}getPendingToolCallsFromMessages(){const e=new Set(this.messages.filter(r=>r.role==="tool"&&r.toolCallId).map(r=>r.toolCallId)),n=[];for(const r of this.messages)if(r.role==="assistant"&&r.toolCalls)for(const s of r.toolCalls)e.has(s.id)||n.push(s);return n}createSyntheticDoneChunk(){return{type:"done",id:this.createId("pending"),model:this.params.model,timestamp:Date.now(),finishReason:"tool_calls"}}shouldContinue(){return this.cyclePhase==="executeToolCalls"?!0:this.loopStrategy({iterationCount:this.iterationCount,messages:this.messages,finishReason:this.lastFinishReason})&&this.toolPhase==="continue"}isAborted(){return!!this.effectiveSignal?.aborted}setToolPhase(e){this.toolPhase=e,e==="wait"&&(this.shouldEmitStreamEnd=!1)}createId(e){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}}function a8(t){const{outputSchema:e,stream:n}=t;return e?l8(t):n===!1?o8(t):iA(t)}async function*iA(t){const{adapter:e,...n}=t,r=e.model,s=new sA({adapter:e,params:{...n,model:r}});for await(const a of s.run())yield a}function o8(t){const e=iA(t);return r8(e)}async function l8(t){const{adapter:e,outputSchema:n,...r}=t,s=e.model;if(!n)throw new Error("outputSchema is required for structured output");const a=new sA({adapter:e,params:{...r,model:s}});for await(const g of a.run());const l=a.getMessages(),{tools:c,agentLoopStrategy:f,...d}=r,m=i0(n);if(!m)throw new Error("Failed to convert output schema to JSON Schema");const p=await e.structuredOutput({chatOptions:{...d,model:s,messages:l},outputSchema:m});return Wi(n)?wo(n,p.data):p.data}function Yu(t){return{__toolSide:"definition",...t,server(n){return{__toolSide:"server",...t,execute:n}},client(n){return{__toolSide:"client",...t,execute:n}}}}function mC(t){return t===null?"":typeof t=="string"?t:t.filter(e=>e.type==="text").map(e=>e.content).join("")}function u8(t){const e=[];for(const n of t)"parts"in n?e.push(...aA(n)):e.push(n);return e}function aA(t){const e=[];if(t.role==="system")return e;const n=[],r=[],s=[];for(const c of t.parts)c.type==="text"?n.push(c):c.type==="tool-call"?r.push(c):c.type==="tool-result"&&s.push(c);const a=n.map(c=>c.content).join("")||null,l=r.length>0?r.filter(c=>c.state==="input-complete"||c.state==="approval-responded"||c.output!==void 0).map(c=>({id:c.id,type:"function",function:{name:c.name,arguments:c.arguments}})):void 0;t.role!=="assistant"||a||!l?e.push({role:t.role,content:a,...l&&l.length>0&&{toolCalls:l}}):l.length>0&&e.push({role:"assistant",content:a,toolCalls:l});for(const c of s)(c.state==="complete"||c.state==="error")&&e.push({role:"tool",content:c.content,toolCallId:c.toolCallId});return e}function c8(t,e){const n=[],r=mC(t.content);if(r&&n.push({type:"text",content:r}),t.toolCalls&&t.toolCalls.length>0)for(const s of t.toolCalls)n.push({type:"tool-call",id:s.id,name:s.function.name,arguments:s.function.arguments,state:"input-complete"});return t.role==="tool"&&t.toolCallId&&n.push({type:"tool-result",toolCallId:t.toolCallId,content:mC(t.content),state:"complete"}),{id:e||Qd(),role:t.role==="tool"?"assistant":t.role,parts:n}}function f8(t,e){return"parts"in t?{...t,id:t.id||e(),createdAt:t.createdAt||new Date}:{...c8(t,e()),createdAt:new Date}}function Qd(){return`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`}var Fi={},Vg={},gC;function yC(){return gC||(gC=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(Vg)),Vg}var vC;function d8(){return vC||(vC=1,(function(t){var e=Fi&&Fi.__createBinding||(Object.create?(function(d,m,p,g){g===void 0&&(g=p);var y=Object.getOwnPropertyDescriptor(m,p);(!y||("get"in y?!m.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(d,g,y)}):(function(d,m,p,g){g===void 0&&(g=p),d[g]=m[p]})),n=Fi&&Fi.__exportStar||function(d,m){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&e(m,d,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=yC();Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(yC(),t);class s extends Error{}t.PartialJSON=s;class a extends Error{}t.MalformedJSON=a;function l(d,m=r.Allow.ALL){if(typeof d!="string")throw new TypeError(`expecting str, got ${typeof d}`);if(!d.trim())throw new Error(`${d} is empty`);return c(d.trim(),m)}t.parseJSON=l;const c=(d,m)=>{const p=d.length;let g=0;const y=L=>{throw new s(`${L} at position ${g}`)},S=L=>{throw new a(`${L} at position ${g}`)},w=()=>(O(),g>=p&&y("Unexpected end of input"),d[g]==='"'?E():d[g]==="{"?_():d[g]==="["?k():d.substring(g,g+4)==="null"||r.Allow.NULL&m&&p-g<4&&"null".startsWith(d.substring(g))?(g+=4,null):d.substring(g,g+4)==="true"||r.Allow.BOOL&m&&p-g<4&&"true".startsWith(d.substring(g))?(g+=4,!0):d.substring(g,g+5)==="false"||r.Allow.BOOL&m&&p-g<5&&"false".startsWith(d.substring(g))?(g+=5,!1):d.substring(g,g+8)==="Infinity"||r.Allow.INFINITY&m&&p-g<8&&"Infinity".startsWith(d.substring(g))?(g+=8,1/0):d.substring(g,g+9)==="-Infinity"||r.Allow._INFINITY&m&&1<p-g&&p-g<9&&"-Infinity".startsWith(d.substring(g))?(g+=9,-1/0):d.substring(g,g+3)==="NaN"||r.Allow.NAN&m&&p-g<3&&"NaN".startsWith(d.substring(g))?(g+=3,NaN):R()),E=()=>{const L=g;let A=!1;for(g++;g<p&&(d[g]!=='"'||A&&d[g-1]==="\\");)A=d[g]==="\\"?!A:!1,g++;if(d.charAt(g)=='"')try{return JSON.parse(d.substring(L,++g-Number(A)))}catch(z){S(String(z))}else if(r.Allow.STR&m)try{return JSON.parse(d.substring(L,g-Number(A))+'"')}catch{return JSON.parse(d.substring(L,d.lastIndexOf("\\"))+'"')}y("Unterminated string literal")},_=()=>{g++,O();const L={};try{for(;d[g]!=="}";){if(O(),g>=p&&r.Allow.OBJ&m)return L;const A=E();O(),g++;try{const z=w();L[A]=z}catch(z){if(r.Allow.OBJ&m)return L;throw z}O(),d[g]===","&&g++}}catch{if(r.Allow.OBJ&m)return L;y("Expected '}' at end of object")}return g++,L},k=()=>{g++;const L=[];try{for(;d[g]!=="]";)L.push(w()),O(),d[g]===","&&g++}catch{if(r.Allow.ARR&m)return L;y("Expected ']' at end of array")}return g++,L},R=()=>{if(g===0){d==="-"&&S("Not sure what '-' is");try{return JSON.parse(d)}catch(A){if(r.Allow.NUM&m)try{return JSON.parse(d.substring(0,d.lastIndexOf("e")))}catch{}S(String(A))}}const L=g;for(d[g]==="-"&&g++;d[g]&&",]}".indexOf(d[g])===-1;)g++;g==p&&!(r.Allow.NUM&m)&&y("Unterminated number literal");try{return JSON.parse(d.substring(L,g))}catch{d.substring(L,g)==="-"&&y("Not sure what '-' is");try{return JSON.parse(d.substring(L,d.lastIndexOf("e")))}catch(z){S(String(z))}}},O=()=>{for(;g<p&&` 
\r	`.includes(d[g]);)g++};return w()},f=l;t.parse=f})(Fi)),Fi}var h8=d8();class p8{parse(e){if(!(!e||e.trim()===""))try{return h8.parse(e)}catch{return}}}const m8=new p8;function g8(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.length>0?s[s.length-1]:null;return a&&a.type==="text"?s[s.length-1]={type:"text",content:n}:s.push({type:"text",content:n}),{...r,parts:s}})}function qg(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(c=>c.type==="tool-call"&&c.id===n.id),l={type:"tool-call",id:n.id,name:n.name,arguments:n.arguments,state:n.state};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}function bC(t,e,n,r,s,a){return t.map(l=>{if(l.id!==e)return l;const c=[...l.parts],f=c.findIndex(m=>m.type==="tool-result"&&m.toolCallId===n),d={type:"tool-result",toolCallId:n,content:r,state:s,...a&&{error:a}};return f>=0?c[f]=d:c.push(d),{...l,parts:c}})}function y8(t,e,n,r){return t.map(s=>{if(s.id!==e)return s;const a=[...s.parts],l=a.find(c=>c.type==="tool-call"&&c.id===n);return l&&(l.state="approval-requested",l.approval={id:r,needsApproval:!0}),{...s,parts:a}})}function v8(t,e,n,r,s){return t.map(a=>{const l=[...a.parts],c=l.find(f=>f.type==="tool-call"&&f.id===e);return c&&(c.output=s?{error:s}:n,r?c.state=r:c.state="input-complete"),{...a,parts:l}})}function b8(t,e,n){return t.map(r=>{const s=[...r.parts],a=s.find(l=>l.type==="tool-call"&&l.approval?.id===e);return a&&a.approval&&(a.approval.approved=n,a.state="approval-responded"),{...r,parts:s}})}function S8(t,e,n){return t.map(r=>{if(r.id!==e)return r;const s=[...r.parts],a=s.findIndex(c=>c.type==="thinking"),l={type:"thinking",content:n};return a>=0?s[a]=l:s.push(l),{...r,parts:s}})}class w8{shouldEmit(e,n){return!0}}class Ev{constructor(e={}){this.messages=[],this.currentAssistantMessageId=null,this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls=new Map,this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.recording=null,this.recordingStartTime=0,this.chunkStrategy=e.chunkStrategy||new w8,this.events=e.events||{},this.handlers=e.handlers||{},this.jsonParser=e.jsonParser||m8,this.recordingEnabled=e.recording??!1,e.initialMessages&&(this.messages=[...e.initialMessages])}setMessages(e){this.messages=[...e],this.emitMessagesChange()}addUserMessage(e){const n={id:Qd(),role:"user",parts:[{type:"text",content:e}],createdAt:new Date};return this.messages=[...this.messages,n],this.emitMessagesChange(),n}startAssistantMessage(){this.resetStreamState();const e={id:Qd(),role:"assistant",parts:[],createdAt:new Date};return this.currentAssistantMessageId=e.id,this.messages=[...this.messages,e],this.events.onStreamStart?.(),this.emitMessagesChange(),e.id}addToolResult(e,n,r){const s=this.messages.find(f=>f.parts.some(d=>d.type==="tool-call"&&d.id===e));if(!s){console.warn(`[StreamProcessor] Could not find message with tool call ${e}`);return}let a=v8(this.messages,e,n,r?"input-complete":void 0,r);const l=typeof n=="string"?n:JSON.stringify(n),c=r?"error":"complete";a=bC(a,s.id,e,l,c,r),this.messages=a,this.emitMessagesChange()}addToolApprovalResponse(e,n){this.messages=b8(this.messages,e,n),this.emitMessagesChange()}toModelMessages(){const e=[];for(const n of this.messages)e.push(...aA(n));return e}getMessages(){return this.messages}areAllToolsComplete(){const e=this.messages.findLast(r=>r.role==="assistant");if(!e)return!0;const n=e.parts.filter(r=>r.type==="tool-call");return n.length===0?!0:n.every(r=>r.state==="approval-responded"||r.output!==void 0&&!r.approval)}removeMessagesAfter(e){this.messages=this.messages.slice(0,e+1),this.emitMessagesChange()}clearMessages(){this.messages=[],this.currentAssistantMessageId=null,this.emitMessagesChange()}async process(e){this.resetStreamState(),this.recordingEnabled&&this.startRecording();for await(const n of e)this.processChunk(n);return this.finalizeStream(),this.recording&&(this.recording.result=this.getResult()),this.getResult()}processChunk(e){switch(this.recording&&this.recording.chunks.push({chunk:e,timestamp:Date.now(),index:this.recording.chunks.length}),e.type){case"content":this.handleContentChunk(e);break;case"tool_call":this.handleToolCallChunk(e);break;case"tool_result":this.handleToolResultChunk(e);break;case"done":this.handleDoneChunk(e);break;case"error":this.handleErrorChunk(e);break;case"thinking":this.handleThinkingChunk(e);break;case"approval-requested":this.handleApprovalRequestedChunk(e);break;case"tool-input-available":this.handleToolInputAvailableChunk(e);break}}handleContentChunk(e){this.completeAllToolCalls();const n=this.currentSegmentText;this.hasToolCallsSinceTextStart&&n.length>0&&this.isNewTextSegment(e,n)&&(n!==this.lastEmittedText&&this.emitTextUpdate(),this.currentSegmentText="",this.lastEmittedText="",this.hasToolCallsSinceTextStart=!1);const s=this.currentSegmentText;let a=s;e.delta!==""?a=s+e.delta:e.content!==""&&(e.content.startsWith(s)?a=e.content:s.startsWith(e.content)?a=s:a=s+e.content);const l=a.slice(s.length);this.currentSegmentText=a,this.totalTextContent+=l;const c=e.delta??e.content??"";this.chunkStrategy.shouldEmit(c,this.currentSegmentText)&&this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate()}handleToolCallChunk(e){this.hasToolCallsSinceTextStart=!0;const n=e.toolCall.id,r=this.toolCalls.get(n);if(r){const s=r.state==="awaiting-input";r.arguments+=e.toolCall.function.arguments||"",s&&e.toolCall.function.arguments&&(r.state="input-streaming"),r.parsedArguments=this.jsonParser.parse(r.arguments);const a=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStateChange?.(a,r.id,r.name,r.state,r.arguments,r.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(a,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=qg(this.messages,this.currentAssistantMessageId,{id:r.id,name:r.name,arguments:r.arguments,state:r.state}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,r.id,r.state,r.arguments))}else{const s=e.toolCall.function.arguments?"input-streaming":"awaiting-input",a={id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s,parsedArguments:void 0,index:e.index};e.toolCall.function.arguments&&(a.parsedArguments=this.jsonParser.parse(e.toolCall.function.arguments)),this.toolCalls.set(n,a),this.toolCallOrder.push(n);const l=this.toolCallOrder.indexOf(n);this.handlers.onToolCallStart?.(l,e.toolCall.id,e.toolCall.function.name),this.handlers.onToolCallStateChange?.(l,e.toolCall.id,e.toolCall.function.name,s,e.toolCall.function.arguments||"",a.parsedArguments),e.toolCall.function.arguments&&this.handlers.onToolCallDelta?.(l,e.toolCall.function.arguments),this.currentAssistantMessageId&&(this.messages=qg(this.messages,this.currentAssistantMessageId,{id:e.toolCall.id,name:e.toolCall.function.name,arguments:e.toolCall.function.arguments||"",state:s}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,e.toolCall.id,s,e.toolCall.function.arguments||""))}}handleToolResultChunk(e){const n="complete";this.handlers.onToolResultStateChange?.(e.toolCallId,e.content,n),this.currentAssistantMessageId&&(this.messages=bC(this.messages,this.currentAssistantMessageId,e.toolCallId,e.content,n),this.emitMessagesChange())}handleDoneChunk(e){this.finishReason=e.finishReason,this.isDone=!0,this.completeAllToolCalls()}handleErrorChunk(e){this.handlers.onError?.(e.error),this.events.onError?.(new Error(e.error.message))}handleThinkingChunk(e){const n=this.thinkingContent;let r=n;e.delta!==""?r=n+e.delta:e.content!==""&&(e.content.startsWith(n)?r=e.content:n.startsWith(e.content)?r=n:r=n+e.content),this.thinkingContent=r,this.handlers.onThinkingUpdate?.(this.thinkingContent),this.currentAssistantMessageId&&(this.messages=S8(this.messages,this.currentAssistantMessageId,this.thinkingContent),this.emitMessagesChange(),this.events.onThinkingUpdate?.(this.currentAssistantMessageId,this.thinkingContent))}handleApprovalRequestedChunk(e){this.handlers.onApprovalRequested?.(e.toolCallId,e.toolName,e.input,e.approval.id),this.currentAssistantMessageId&&(this.messages=y8(this.messages,this.currentAssistantMessageId,e.toolCallId,e.approval.id),this.emitMessagesChange()),this.events.onApprovalRequest?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input,approvalId:e.approval.id})}handleToolInputAvailableChunk(e){this.handlers.onToolInputAvailable?.(e.toolCallId,e.toolName,e.input),this.events.onToolCall?.({toolCallId:e.toolCallId,toolName:e.toolName,input:e.input})}isNewTextSegment(e,n){return e.delta!==void 0&&e.content!==void 0&&(e.content.length<n.length||!e.content.startsWith(n)&&!n.startsWith(e.content))}completeAllToolCalls(){this.toolCalls.forEach((e,n)=>{if(e.state!=="input-complete"){const r=this.toolCallOrder.indexOf(n);this.completeToolCall(r,e)}})}completeToolCall(e,n){n.state="input-complete",n.parsedArguments=this.jsonParser.parse(n.arguments),this.handlers.onToolCallStateChange?.(e,n.id,n.name,"input-complete",n.arguments,n.parsedArguments),this.handlers.onToolCallComplete?.(e,n.id,n.name,n.arguments),this.currentAssistantMessageId&&(this.messages=qg(this.messages,this.currentAssistantMessageId,{id:n.id,name:n.name,arguments:n.arguments,state:"input-complete"}),this.emitMessagesChange(),this.events.onToolCallStateChange?.(this.currentAssistantMessageId,n.id,"input-complete",n.arguments))}emitTextUpdate(){this.lastEmittedText=this.currentSegmentText,this.handlers.onTextUpdate?.(this.currentSegmentText),this.currentAssistantMessageId&&(this.messages=g8(this.messages,this.currentAssistantMessageId,this.currentSegmentText),this.emitMessagesChange(),this.events.onTextUpdate?.(this.currentAssistantMessageId,this.currentSegmentText))}emitMessagesChange(){this.events.onMessagesChange?.([...this.messages])}finalizeStream(){this.completeAllToolCalls(),this.currentSegmentText!==this.lastEmittedText&&this.emitTextUpdate();const e=this.getCompletedToolCalls();if(this.handlers.onStreamEnd?.(this.totalTextContent,e.length>0?e:void 0),this.currentAssistantMessageId){const n=this.messages.find(r=>r.id===this.currentAssistantMessageId);n&&this.events.onStreamEnd?.(n)}}getCompletedToolCalls(){return Array.from(this.toolCalls.values()).filter(e=>e.state==="input-complete").map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:e.arguments}}))}getResult(){const e=this.getCompletedToolCalls();return{content:this.totalTextContent,thinking:this.thinkingContent||void 0,toolCalls:e.length>0?e:void 0,finishReason:this.finishReason}}getState(){return{content:this.totalTextContent,thinking:this.thinkingContent,toolCalls:new Map(this.toolCalls),toolCallOrder:[...this.toolCallOrder],finishReason:this.finishReason,done:this.isDone}}startRecording(){this.recordingEnabled=!0,this.recordingStartTime=Date.now(),this.recording={version:"1.0",timestamp:this.recordingStartTime,chunks:[]}}getRecording(){return this.recording}resetStreamState(){this.totalTextContent="",this.currentSegmentText="",this.lastEmittedText="",this.thinkingContent="",this.toolCalls.clear(),this.toolCallOrder=[],this.finishReason=null,this.isDone=!1,this.hasToolCallsSinceTextStart=!1,this.chunkStrategy.reset?.()}reset(){this.resetStreamState(),this.messages=[],this.currentAssistantMessageId=null}static async replay(e,n){return new Ev(n).process(x8(e))}}function x8(t){return{async*[Symbol.asyncIterator](){for(const{chunk:e}of t.chunks)yield e}}}class _8{constructor(e){this.clientId=e}clientCreated(e){this.emitEvent("client:created",{initialMessageCount:e})}loadingChanged(e){this.emitEvent("client:loading-changed",{isLoading:e})}errorChanged(e){this.emitEvent("client:error-changed",{error:e})}textUpdated(e,n,r){this.emitEvent("processor:text-updated",{streamId:e,content:r}),this.emitEvent("client:assistant-message-updated",{messageId:n,content:r})}toolCallStateChanged(e,n,r,s,a,l){this.emitEvent("processor:tool-call-state-changed",{streamId:e,toolCallId:r,toolName:s,state:a,arguments:l}),this.emitEvent("client:tool-call-updated",{messageId:n,toolCallId:r,toolName:s,state:a,arguments:l})}toolResultStateChanged(e,n,r,s,a){this.emitEvent("processor:tool-result-state-changed",{streamId:e,toolCallId:n,content:r,state:s,error:a})}thinkingUpdated(e,n,r,s){this.emitEvent("stream:chunk:thinking",{streamId:e,messageId:n,content:r,delta:s})}approvalRequested(e,n,r,s,a){this.emitEvent("client:approval-requested",{messageId:e,toolCallId:n,toolName:r,input:s,approvalId:a})}messageAppended(e){const n=e.parts.filter(r=>r.type==="text").map(r=>r.content).join(" ").substring(0,100);this.emitEvent("client:message-appended",{messageId:e.id,role:e.role,contentPreview:n})}messageSent(e,n){this.emitEvent("client:message-sent",{messageId:e,content:n})}reloaded(e){this.emitEvent("client:reloaded",{fromMessageIndex:e})}stopped(){this.emitEvent("client:stopped")}messagesCleared(){this.emitEvent("client:messages-cleared")}toolResultAdded(e,n,r,s){this.emitEvent("tool:result-added",{toolCallId:e,toolName:n,output:r,state:s})}toolApprovalResponded(e,n,r){this.emitEvent("tool:approval-responded",{approvalId:e,toolCallId:n,approved:r})}}class C8 extends _8{emitEvent(e,n){e.startsWith("client:")||e.startsWith("tool:")?Ft.emit(e,{...n,clientId:this.clientId,timestamp:Date.now()}):Ft.emit(e,{...n,timestamp:Date.now()})}}class E8{constructor(e){if(this.body={},this.isLoading=!1,this.error=void 0,this.abortController=null,this.currentStreamId=null,this.currentMessageId=null,this.postStreamActions=[],this.uniqueId=e.id||this.generateUniqueId("chat"),this.body=e.body||{},this.connection=e.connection,this.events=new C8(this.uniqueId),this.clientToolsRef={current:new Map},e.tools)for(const n of e.tools)this.clientToolsRef.current.set(n.name,n);this.callbacksRef={current:{onResponse:e.onResponse||(()=>{}),onChunk:e.onChunk||(()=>{}),onFinish:e.onFinish||(()=>{}),onError:e.onError||(()=>{}),onMessagesChange:e.onMessagesChange||(()=>{}),onLoadingChange:e.onLoadingChange||(()=>{}),onErrorChange:e.onErrorChange||(()=>{})}},this.processor=new Ev({chunkStrategy:e.streamProcessor?.chunkStrategy,initialMessages:e.initialMessages,events:{onMessagesChange:n=>{this.callbacksRef.current.onMessagesChange(n)},onStreamStart:()=>{},onStreamEnd:n=>{this.callbacksRef.current.onFinish(n)},onError:n=>{this.setError(n),this.callbacksRef.current.onError(n)},onTextUpdate:(n,r)=>{this.currentStreamId&&this.events.textUpdated(this.currentStreamId,n,r)},onThinkingUpdate:(n,r)=>{this.currentStreamId&&this.events.thinkingUpdated(this.currentStreamId,n,r)},onToolCallStateChange:(n,r,s,a)=>{const d=this.processor.getMessages().find(m=>m.id===n)?.parts.find(m=>m.type==="tool-call"&&m.id===r)?.name||"unknown";this.currentStreamId&&this.events.toolCallStateChanged(this.currentStreamId,n,r,d,s,a)},onToolCall:async n=>{const r=this.clientToolsRef.current.get(n.toolName);if(r?.execute)try{const s=await r.execute(n.input);await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:s,state:"output-available"})}catch(s){await this.addToolResult({toolCallId:n.toolCallId,tool:n.toolName,output:null,state:"output-error",errorText:s.message})}},onApprovalRequest:n=>{this.events.approvalRequested(this.currentMessageId||"",n.toolCallId,n.toolName,n.input,n.approvalId)}}}),this.events.clientCreated(this.processor.getMessages().length)}generateUniqueId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substring(7)}`}setIsLoading(e){this.isLoading=e,this.callbacksRef.current.onLoadingChange(e),this.events.loadingChanged(e)}setError(e){this.error=e,this.callbacksRef.current.onErrorChange(e),this.events.errorChanged(e?.message||null)}async processStream(e){this.currentStreamId=this.generateUniqueId("stream");const n=this.processor.startAssistantMessage();this.currentMessageId=n;const r={id:n,role:"assistant",parts:[],createdAt:new Date};this.events.messageAppended(r);for await(const l of e)this.callbacksRef.current.onChunk(l),this.processor.processChunk(l),await new Promise(c=>setTimeout(c,0));return this.processor.finalizeStream(),this.currentStreamId=null,this.currentMessageId=null,this.processor.getMessages().find(l=>l.id===n)||{id:n,role:"assistant",parts:[],createdAt:new Date}}async sendMessage(e){if(!e.trim()||this.isLoading)return;const n=this.processor.addUserMessage(e.trim());this.events.messageSent(n.id,e.trim()),await this.streamResponse()}async append(e){const n=f8(e,Qd);if(n.role==="system")return;const r=n;this.events.messageAppended(r);const s=this.processor.getMessages();this.processor.setMessages([...s,r]),await this.streamResponse()}async streamResponse(){this.setIsLoading(!0),this.setError(void 0),this.abortController=new AbortController;try{const e=this.processor.toModelMessages();await this.callbacksRef.current.onResponse();const n={...this.body,conversationId:this.uniqueId},r=this.connection.connect(e,n,this.abortController.signal);await this.processStream(r)}catch(e){if(e instanceof Error){if(e.name==="AbortError")return;this.setError(e),this.callbacksRef.current.onError(e)}}finally{this.abortController=null,this.setIsLoading(!1),await this.drainPostStreamActions()}}async reload(){const e=this.processor.getMessages();if(e.length===0)return;const n=e.findLastIndex(r=>r.role==="user");n!==-1&&(this.events.reloaded(n),this.processor.removeMessagesAfter(n),await this.streamResponse())}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.setIsLoading(!1),this.events.stopped()}clear(){this.processor.clearMessages(),this.setError(void 0),this.events.messagesCleared()}async addToolResult(e){if(this.events.toolResultAdded(e.toolCallId,e.tool,e.output,e.state||"output-available"),this.processor.addToolResult(e.toolCallId,e.output,e.errorText),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}async addToolApprovalResponse(e){const n=this.processor.getMessages();let r;for(const s of n){const a=s.parts.find(l=>l.type==="tool-call"&&l.approval?.id===e.id);if(a){r=a.id;break}}if(r&&this.events.toolApprovalResponded(e.id,r,e.approved),this.processor.addToolApprovalResponse(e.id,e.approved),this.isLoading){this.queuePostStreamAction(()=>this.checkForContinuation());return}await this.checkForContinuation()}queuePostStreamAction(e){this.postStreamActions.push(e)}async drainPostStreamActions(){for(;this.postStreamActions.length>0;)await this.postStreamActions.shift()()}async checkForContinuation(){this.shouldAutoSend()&&await this.streamResponse()}shouldAutoSend(){return this.processor.areAllToolsComplete()}getMessages(){return this.processor.getMessages()}getIsLoading(){return this.isLoading}getError(){return this.error}setMessagesManually(e){this.processor.setMessages(e)}updateOptions(e){if(e.connection!==void 0&&(this.connection=e.connection),e.body!==void 0&&(this.body=e.body),e.tools!==void 0){this.clientToolsRef.current=new Map;for(const n of e.tools)this.clientToolsRef.current.set(n.name,n)}e.onResponse!==void 0&&(this.callbacksRef.current.onResponse=e.onResponse),e.onChunk!==void 0&&(this.callbacksRef.current.onChunk=e.onChunk),e.onFinish!==void 0&&(this.callbacksRef.current.onFinish=e.onFinish),e.onError!==void 0&&(this.callbacksRef.current.onError=e.onError)}}function k8(...t){return t}function R8(t){return{async*connect(e,n){const r=u8(e);yield*t(r,n)}}}function A8(t){const e=U.useId(),n=t.id||e,[r,s]=U.useState(t.initialMessages||[]),[a,l]=U.useState(!1),[c,f]=U.useState(void 0),d=U.useRef(t.initialMessages||[]),m=U.useRef(!0);U.useEffect(()=>{d.current=r},[r]);const p=U.useRef(t);p.current=t;const g=U.useMemo(()=>{const L=m.current?t.initialMessages||[]:d.current;return m.current=!1,new E8({connection:p.current.connection,id:n,initialMessages:L,body:p.current.body,onResponse:p.current.onResponse,onChunk:p.current.onChunk,onFinish:p.current.onFinish,onError:p.current.onError,tools:p.current.tools,streamProcessor:t.streamProcessor,onMessagesChange:A=>{s(A)},onLoadingChange:A=>{l(A)},onErrorChange:A=>{f(A)}})},[n]);U.useEffect(()=>{t.initialMessages&&t.initialMessages.length>0&&r.length===0&&g.setMessagesManually(t.initialMessages)},[]),U.useEffect(()=>()=>{g.stop()},[g]);const y=U.useCallback(async L=>{await g.sendMessage(L)},[g]),S=U.useCallback(async L=>{await g.append(L)},[g]),w=U.useCallback(async()=>{await g.reload()},[g]),E=U.useCallback(()=>{g.stop()},[g]),_=U.useCallback(()=>{g.clear()},[g]),k=U.useCallback(L=>{g.setMessagesManually(L)},[g]),R=U.useCallback(async L=>{await g.addToolResult(L)},[g]),O=U.useCallback(async L=>{await g.addToolApprovalResponse(L)},[g]);return{messages:r,sendMessage:y,append:S,reload:w,stop:E,isLoading:a,error:c,setMessages:k,clear:_,addToolResult:R,addToolApprovalResponse:O}}class T8{constructor(e={},n){this.kind="text",this.config=e,this.model=n}generateId(){return`${this.name}-${Date.now()}-${Math.random().toString(36).substring(7)}`}}const M8=t=>{if(t.conversation&&t.previous_response_id)throw new Error("Cannot use both 'conversation' and 'previous_response_id' in the same request.")},O8=t=>{I8(t),M8(t)},I8=t=>{const e=t.metadata;if(e&&Object.keys(e).length>16)throw new Error("Metadata cannot have more than 16 key-value pairs.");if(e&&Object.keys(e).some(a=>a.length>64))throw new Error("Metadata keys cannot be longer than 64 characters.");if(e&&Object.values(e).some(a=>a.length>512))throw new Error("Metadata values cannot be longer than 512 characters.")};function a0(t){if(t!==null){if(Array.isArray(t))return t.map(e=>a0(e));if(typeof t=="object"){const e={};for(const[n,r]of Object.entries(t)){const s=a0(r);s!==void 0&&(e[n]=s)}return e}return t}}function Su(t,e=[]){const n={...t};if(n.type==="object"&&n.properties){const r={...n.properties},s=Object.keys(r);for(const a of s){const l=r[a],c=!e.includes(a);l.type==="object"&&l.properties?r[a]=Su(l,l.required||[]):l.type==="array"&&l.items?r[a]={...l,items:Su(l.items,l.items.required||[])}:c&&(l.type&&!Array.isArray(l.type)?r[a]={...l,type:[l.type,"null"]}:Array.isArray(l.type)&&!l.type.includes("null")&&(r[a]={...l,type:[...l.type,"null"]}))}n.properties=r,n.required=s,n.additionalProperties=!1}return n.type==="array"&&n.items&&(n.items=Su(n.items,n.items.required||[])),n}function N8(t){return{type:"apply_patch"}}function D8(t){return{type:"code_interpreter",container:t.metadata.container}}function z8(t){const e=t.metadata;return{type:"computer_use_preview",display_height:e.display_height,display_width:e.display_width,environment:e.environment}}function L8(t){const e=t.metadata;return{type:"custom",name:e.name,description:e.description,format:e.format}}function j8(t){const e=t.metadata;return{type:"file_search",vector_store_ids:e.vector_store_ids,max_num_results:e.max_num_results,ranking_options:e.ranking_options,filters:e.filters}}function P8(t){const e=t.inputSchema??{type:"object",properties:{},required:[]},n=Su(e,e.required||[]);return n.additionalProperties=!1,{type:"function",name:t.name,description:t.description,parameters:n,strict:!0}}function F8(t){return{type:"image_generation",...t.metadata}}function $8(t){return{type:"local_shell"}}function B8(t){if(!t.server_url&&!t.connector_id)throw new Error("Either server_url or connector_id must be provided.");if(t.connector_id&&t.server_url)throw new Error("Only one of server_url or connector_id can be provided.")}function U8(t){const n={type:"mcp",...t.metadata};return B8(n),n}function V8(t){return{type:"shell"}}function q8(t){const e=t.metadata;return{type:e.type,search_context_size:e.search_context_size,user_location:e.user_location}}function H8(t){return t.metadata}function K8(t){return t.map(e=>{const n=new Set(["apply_patch","code_interpreter","computer_use_preview","file_search","image_generation","local_shell","mcp","shell","web_search_preview","web_search","custom"]),r=e.name;if(n.has(r))switch(r){case"apply_patch":return N8();case"code_interpreter":return D8(e);case"computer_use_preview":return z8(e);case"file_search":return j8(e);case"image_generation":return F8(e);case"local_shell":return $8();case"mcp":return U8(e);case"shell":return V8();case"web_search_preview":return q8(e);case"web_search":return H8(e);case"custom":return L8(e)}return P8(e)})}function $e(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function X(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let oA=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return oA=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function o0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const l0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Ne extends Error{}class fn extends Ne{constructor(e,n,r,s){super(`${fn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const a=n;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new Rh({message:r,cause:l0(n)});const a=n?.error;return e===400?new lA(e,a,r,s):e===401?new uA(e,a,r,s):e===403?new cA(e,a,r,s):e===404?new fA(e,a,r,s):e===409?new dA(e,a,r,s):e===422?new hA(e,a,r,s):e===429?new pA(e,a,r,s):e>=500?new mA(e,a,r,s):new fn(e,a,r,s)}}class _r extends fn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Rh extends fn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class kv extends Rh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class lA extends fn{}class uA extends fn{}class cA extends fn{}class fA extends fn{}class dA extends fn{}class hA extends fn{}class pA extends fn{}class mA extends fn{}class gA extends Ne{constructor(){super("Could not parse response content as the length limit was reached")}}class yA extends Ne{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class eu extends Error{constructor(e){super(e)}}const G8=/^[a-z][a-z0-9+.-]*:/i,Q8=t=>G8.test(t);let jn=t=>(jn=Array.isArray,jn(t)),SC=jn;function vA(t){return typeof t!="object"?{}:t??{}}function Z8(t){if(!t)return!0;for(const e in t)return!1;return!0}function Y8(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Hg(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const J8=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ne(`${t} must be an integer`);if(e<0)throw new Ne(`${t} must be a positive integer`);return e},W8=t=>{try{return JSON.parse(t)}catch{return}},Ju=t=>new Promise(e=>setTimeout(e,t)),ro="6.15.0",X8=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function eq(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const tq=()=>{const t=eq();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ro,"X-Stainless-OS":xC(Deno.build.os),"X-Stainless-Arch":wC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ro,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ro,"X-Stainless-OS":xC(globalThis.process.platform??"unknown"),"X-Stainless-Arch":wC(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=nq();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ro,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ro,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function nq(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${s}.${a}.${l}`}}}return null}const wC=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",xC=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let _C;const rq=()=>_C??(_C=tq());function sq(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function bA(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function SA(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return bA({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){await e.return?.()}})}function wA(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function iq(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const aq=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),xA="RFC3986",_A=t=>String(t),CC={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:_A},oq="RFC1738";let u0=(t,e)=>(u0=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),u0(t,e));const $r=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Kg=1024,lq=(t,e,n,r,s)=>{if(t.length===0)return t;let a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let l="";for(let c=0;c<a.length;c+=Kg){const f=a.length>=Kg?a.slice(c,c+Kg):a,d=[];for(let m=0;m<f.length;++m){let p=f.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===oq&&(p===40||p===41)){d[d.length]=f.charAt(m);continue}if(p<128){d[d.length]=$r[p];continue}if(p<2048){d[d.length]=$r[192|p>>6]+$r[128|p&63];continue}if(p<55296||p>=57344){d[d.length]=$r[224|p>>12]+$r[128|p>>6&63]+$r[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|f.charCodeAt(m)&1023),d[d.length]=$r[240|p>>18]+$r[128|p>>12&63]+$r[128|p>>6&63]+$r[128|p&63]}l+=d.join("")}return l};function uq(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function EC(t,e){if(jn(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const CA={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},EA=function(t,e){Array.prototype.push.apply(t,jn(e)?e:[e])};let kC;const Kt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:lq,encodeValuesOnly:!1,format:xA,formatter:_A,indices:!1,serializeDate(t){return(kC??(kC=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function cq(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Gg={};function kA(t,e,n,r,s,a,l,c,f,d,m,p,g,y,S,w,E,_){let k=t,R=_,O=0,L=!1;for(;(R=R.get(Gg))!==void 0&&!L;){const I=R.get(t);if(O+=1,typeof I<"u"){if(I===O)throw new RangeError("Cyclic object value");L=!0}typeof R.get(Gg)>"u"&&(O=0)}if(typeof d=="function"?k=d(e,k):k instanceof Date?k=g?.(k):n==="comma"&&jn(k)&&(k=EC(k,function(I){return I instanceof Date?g?.(I):I})),k===null){if(a)return f&&!w?f(e,Kt.encoder,E,"key",y):e;k=""}if(cq(k)||uq(k)){if(f){const I=w?e:f(e,Kt.encoder,E,"key",y);return[S?.(I)+"="+S?.(f(k,Kt.encoder,E,"value",y))]}return[S?.(e)+"="+S?.(String(k))]}const A=[];if(typeof k>"u")return A;let z;if(n==="comma"&&jn(k))w&&f&&(k=EC(k,f)),z=[{value:k.length>0?k.join(",")||null:void 0}];else if(jn(d))z=d;else{const I=Object.keys(k);z=m?I.sort(m):I}const P=c?String(e).replace(/\./g,"%2E"):String(e),j=r&&jn(k)&&k.length===1?P+"[]":P;if(s&&jn(k)&&k.length===0)return j+"[]";for(let I=0;I<z.length;++I){const F=z[I],G=typeof F=="object"&&typeof F.value<"u"?F.value:k[F];if(l&&G===null)continue;const J=p&&c?F.replace(/\./g,"%2E"):F,te=jn(k)?typeof n=="function"?n(j,J):j:j+(p?"."+J:"["+J+"]");_.set(t,O);const H=new WeakMap;H.set(Gg,_),EA(A,kA(G,te,n,r,s,a,l,c,n==="comma"&&w&&jn(k)?null:f,d,m,p,g,y,S,w,E,H))}return A}function fq(t=Kt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Kt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=xA;if(typeof t.format<"u"){if(!u0(CC,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=CC[n];let s=Kt.filter;(typeof t.filter=="function"||jn(t.filter))&&(s=t.filter);let a;if(t.arrayFormat&&t.arrayFormat in CA?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Kt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Kt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Kt.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Kt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Kt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Kt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Kt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Kt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Kt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Kt.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Kt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Kt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Kt.strictNullHandling}}function dq(t,e={}){let n=t;const r=fq(e);let s,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):jn(r.filter)&&(a=r.filter,s=a);const l=[];if(typeof n!="object"||n===null)return"";const c=CA[r.arrayFormat],f=c==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const d=new WeakMap;for(let g=0;g<s.length;++g){const y=s[g];r.skipNulls&&n[y]===null||EA(l,kA(n[y],y,c,f,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}const m=l.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),m.length>0?p+m:""}function hq(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let RC;function Rv(t){let e;return(RC??(e=new globalThis.TextEncoder,RC=e.encode.bind(e)))(t)}let AC;function TC(t){let e;return(AC??(e=new globalThis.TextDecoder,AC=e.decode.bind(e)))(t)}var Zn,Yn;class Ah{constructor(){Zn.set(this,void 0),Yn.set(this,void 0),$e(this,Zn,new Uint8Array),$e(this,Yn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Rv(e):e;$e(this,Zn,hq([X(this,Zn,"f"),n]));const r=[];let s;for(;(s=pq(X(this,Zn,"f"),X(this,Yn,"f")))!=null;){if(s.carriage&&X(this,Yn,"f")==null){$e(this,Yn,s.index);continue}if(X(this,Yn,"f")!=null&&(s.index!==X(this,Yn,"f")+1||s.carriage)){r.push(TC(X(this,Zn,"f").subarray(0,X(this,Yn,"f")-1))),$e(this,Zn,X(this,Zn,"f").subarray(X(this,Yn,"f"))),$e(this,Yn,null);continue}const a=X(this,Yn,"f")!==null?s.preceding-1:s.preceding,l=TC(X(this,Zn,"f").subarray(0,a));r.push(l),$e(this,Zn,X(this,Zn,"f").subarray(s.index)),$e(this,Yn,null)}return r}flush(){return X(this,Zn,"f").length?this.decode(`
`):[]}}Zn=new WeakMap,Yn=new WeakMap;Ah.NEWLINE_CHARS=new Set([`
`,"\r"]);Ah.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function pq(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function mq(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Zd={off:0,error:200,warn:300,info:400,debug:500},MC=(t,e,n)=>{if(t){if(Y8(Zd,t))return t;ln(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Zd))}`)}};function tu(){}function qf(t,e,n){return!e||Zd[t]>Zd[n]?tu:e[t].bind(e)}const gq={error:tu,warn:tu,info:tu,debug:tu};let OC=new WeakMap;function ln(t){const e=t.logger,n=t.logLevel??"off";if(!e)return gq;const r=OC.get(e);if(r&&r[0]===n)return r[1];const s={error:qf("error",e,n),warn:qf("warn",e,n),info:qf("info",e,n),debug:qf("debug",e,n)};return OC.set(e,[n,s]),s}const Bi=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Ul;class qr{constructor(e,n,r){this.iterator=e,Ul.set(this,void 0),this.controller=n,$e(this,Ul,r)}static fromSSEResponse(e,n,r){let s=!1;const a=r?ln(r):console;async function*l(){if(s)throw new Ne("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let c=!1;try{for await(const f of yq(e,n))if(!c){if(f.data.startsWith("[DONE]")){c=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let d;try{d=JSON.parse(f.data)}catch(m){throw a.error("Could not parse message into JSON:",f.data),a.error("From chunk:",f.raw),m}if(d&&d.error)throw new fn(void 0,d.error,void 0,e.headers);yield d}else{let d;try{d=JSON.parse(f.data)}catch(m){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),m}if(f.event=="error")throw new fn(void 0,d.error,d.message,void 0);yield{event:f.event,data:d}}}c=!0}catch(f){if(o0(f))return;throw f}finally{c||n.abort()}}return new qr(l,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*a(){const c=new Ah,f=wA(e);for await(const d of f)for(const m of c.decode(d))yield m;for(const d of c.flush())yield d}async function*l(){if(s)throw new Ne("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let c=!1;try{for await(const f of a())c||f&&(yield JSON.parse(f));c=!0}catch(f){if(o0(f))return;throw f}finally{c||n.abort()}}return new qr(l,n,r)}[(Ul=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),n.push(l)}return a.shift()}});return[new qr(()=>s(e),this.controller,X(this,Ul,"f")),new qr(()=>s(n),this.controller,X(this,Ul,"f"))]}toReadableStream(){const e=this;let n;return bA({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:a}=await n.next();if(a)return r.close();const l=Rv(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}}async function*yq(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ne("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ne("Attempted to iterate over a response with no body");const n=new bq,r=new Ah,s=wA(t.body);for await(const a of vq(s))for(const l of r.decode(a)){const c=n.decode(l);c&&(yield c)}for(const a of r.flush()){const l=n.decode(a);l&&(yield l)}}async function*vq(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Rv(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let a;for(;(a=mq(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class bq{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=Sq(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function Sq(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function RA(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:a}=e,l=await(async()=>{if(e.options.stream)return ln(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):qr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const p=await n.json();return AA(p,n)}return await n.text()})();return ln(t).debug(`[${r}] response parsed`,Bi({retryOfRequestLogID:s,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}function AA(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var nu;class Th extends Promise{constructor(e,n,r=RA){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,nu.set(this,void 0),$e(this,nu,e)}_thenUnwrap(e){return new Th(X(this,nu,"f"),this.responsePromise,async(n,r)=>AA(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(X(this,nu,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}nu=new WeakMap;var Hf;class Av{constructor(e,n,r,s){Hf.set(this,void 0),$e(this,Hf,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Ne("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await X(this,Hf,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Hf=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class wq extends Th{constructor(e,n,r){super(e,n,async(s,a)=>new r(s,a.response,await RA(s,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Mh extends Av{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Bt extends Av{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...vA(this.options.query),after:n}}:null}}class Yd extends Av{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...vA(this.options.query),after:e}}:null}}const TA=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function wu(t,e,n){return TA(),new File(t,e??"unknown_file",n)}function fd(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Tv=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",IC=async(t,e)=>c0(t.body)?{...t,body:await MA(t.body,e)}:t,ia=async(t,e)=>({...t,body:await MA(t.body,e)}),NC=new WeakMap;function xq(t){const e=typeof t=="function"?t:t.fetch,n=NC.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new s(a).text()}catch{return!0}})();return NC.set(e,r),r}const MA=async(t,e)=>{if(!await xq(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>f0(n,r,s))),n},OA=t=>t instanceof Blob&&"name"in t,_q=t=>typeof t=="object"&&t!==null&&(t instanceof Response||Tv(t)||OA(t)),c0=t=>{if(_q(t))return!0;if(Array.isArray(t))return t.some(c0);if(t&&typeof t=="object"){for(const e in t)if(c0(t[e]))return!0}return!1},f0=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,wu([await n.blob()],fd(n)));else if(Tv(n))t.append(e,wu([await new Response(SA(n)).blob()],fd(n)));else if(OA(n))t.append(e,n,fd(n));else if(Array.isArray(n))await Promise.all(n.map(r=>f0(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>f0(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},IA=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Cq=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&IA(t),Eq=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function kq(t,e,n){if(TA(),t=await t,Cq(t))return t instanceof File?t:wu([await t.arrayBuffer()],t.name);if(Eq(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),wu(await d0(s),e,n)}const r=await d0(t);if(e||(e=fd(t)),!n?.type){const s=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(n={...n,type:s})}return wu(r,e,n)}async function d0(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(IA(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Tv(t))for await(const n of t)e.push(...await d0(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${Rq(t)}`)}return e}function Rq(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Te{constructor(e){this._client=e}}function NA(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const DC=Object.freeze(Object.create(null)),Aq=(t=NA)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const a=[],l=n.reduce((m,p,g)=>{/[?#]/.test(p)&&(s=!0);const y=r[g];let S=(s?encodeURIComponent:t)(""+y);return g!==r.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??DC)??DC)?.toString)&&(S=y+"",a.push({start:m.length+p.length,length:S.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),m+p+(g===r.length?"":S)},""),c=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=f.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((m,p)=>m.start-p.start),a.length>0){let m=0;const p=a.reduce((g,y)=>{const S=" ".repeat(y.start-m),w="^".repeat(y.length);return m=y.start+y.length,g+S+w},"");throw new Ne(`Path parameters result in path with invalid segments:
${a.map(g=>g.error).join(`
`)}
${l}
${p}`)}return l},de=Aq(NA);let DA=class extends Te{list(e,n={},r){return this._client.getAPIList(de`/chat/completions/${e}/messages`,Bt,{query:n,...r})}};function Jd(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Mv(t){return t?.$brand==="auto-parseable-response-format"}function Wu(t){return t?.$brand==="auto-parseable-tool"}function Tq(t,e){return!e||!zA(e)?{...t,choices:t.choices.map(n=>(LA(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Ov(t,e)}function Ov(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new gA;if(r.finish_reason==="content_filter")throw new yA;return LA(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(s=>Oq(e,s))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?Mq(e,r.message.content):null}}});return{...t,choices:n}}function Mq(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function Oq(t,e){const n=t.tools?.find(r=>Jd(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Wu(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function Iq(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>Jd(r)&&r.function?.name===e.function.name);return Jd(n)&&(Wu(n)||n?.function.strict||!1)}function zA(t){return Mv(t.response_format)?!0:t.tools?.some(e=>Wu(e)||e.type==="function"&&e.function.strict===!0)??!1}function LA(t){for(const e of t||[])if(e.type!=="function")throw new Ne(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Nq(t){for(const e of t??[]){if(e.type!=="function")throw new Ne(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ne(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Wd=t=>t?.role==="assistant",jA=t=>t?.role==="tool";var h0,dd,hd,ru,su,pd,iu,gs,au,Xd,eh,so,PA;class Iv{constructor(){h0.add(this),this.controller=new AbortController,dd.set(this,void 0),hd.set(this,()=>{}),ru.set(this,()=>{}),su.set(this,void 0),pd.set(this,()=>{}),iu.set(this,()=>{}),gs.set(this,{}),au.set(this,!1),Xd.set(this,!1),eh.set(this,!1),so.set(this,!1),$e(this,dd,new Promise((e,n)=>{$e(this,hd,e,"f"),$e(this,ru,n,"f")})),$e(this,su,new Promise((e,n)=>{$e(this,pd,e,"f"),$e(this,iu,n,"f")})),X(this,dd,"f").catch(()=>{}),X(this,su,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},X(this,h0,"m",PA).bind(this))},0)}_connected(){this.ended||(X(this,hd,"f").call(this),this._emit("connect"))}get ended(){return X(this,au,"f")}get errored(){return X(this,Xd,"f")}get aborted(){return X(this,eh,"f")}abort(){this.controller.abort()}on(e,n){return(X(this,gs,"f")[e]||(X(this,gs,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=X(this,gs,"f")[e];if(!r)return this;const s=r.findIndex(a=>a.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(X(this,gs,"f")[e]||(X(this,gs,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{$e(this,so,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){$e(this,so,!0),await X(this,su,"f")}_emit(e,...n){if(X(this,au,"f"))return;e==="end"&&($e(this,au,!0),X(this,pd,"f").call(this));const r=X(this,gs,"f")[e];if(r&&(X(this,gs,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!X(this,so,"f")&&!r?.length&&Promise.reject(s),X(this,ru,"f").call(this,s),X(this,iu,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!X(this,so,"f")&&!r?.length&&Promise.reject(s),X(this,ru,"f").call(this,s),X(this,iu,"f").call(this,s),this._emit("end")}}_emitFinal(){}}dd=new WeakMap,hd=new WeakMap,ru=new WeakMap,su=new WeakMap,pd=new WeakMap,iu=new WeakMap,gs=new WeakMap,au=new WeakMap,Xd=new WeakMap,eh=new WeakMap,so=new WeakMap,h0=new WeakSet,PA=function(e){if($e(this,Xd,!0),e instanceof Error&&e.name==="AbortError"&&(e=new _r),e instanceof _r)return $e(this,eh,!0),this._emit("abort",e);if(e instanceof Ne)return this._emit("error",e);if(e instanceof Error){const n=new Ne(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Ne(String(e)))};function Dq(t){return typeof t.parse=="function"}var Sn,p0,th,m0,g0,y0,FA,$A;const zq=10;class BA extends Iv{constructor(){super(...arguments),Sn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),jA(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Wd(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ne("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),X(this,Sn,"m",p0).call(this)}async finalMessage(){return await this.done(),X(this,Sn,"m",th).call(this)}async finalFunctionToolCall(){return await this.done(),X(this,Sn,"m",m0).call(this)}async finalFunctionToolCallResult(){return await this.done(),X(this,Sn,"m",g0).call(this)}async totalUsage(){return await this.done(),X(this,Sn,"m",y0).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=X(this,Sn,"m",th).call(this);n&&this._emit("finalMessage",n);const r=X(this,Sn,"m",p0).call(this);r&&this._emit("finalContent",r);const s=X(this,Sn,"m",m0).call(this);s&&this._emit("finalFunctionToolCall",s);const a=X(this,Sn,"m",g0).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",X(this,Sn,"m",y0).call(this))}async _createChatCompletion(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),X(this,Sn,"m",FA).call(this,n);const a=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Ov(a,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const s="tool",{tool_choice:a="auto",stream:l,...c}=n,f=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=zq}=r||{},m=n.tools.map(y=>{if(Wu(y)){if(!y.$callback)throw new Ne("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),p={};for(const y of m)y.type==="function"&&(p[y.function.name||y.function.function.name]=y.function);const g="tools"in n?m.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<d;++y){const w=(await this._createChatCompletion(e,{...c,tool_choice:a,tools:g,messages:[...this.messages]},r)).choices[0]?.message;if(!w)throw new Ne("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(const E of w.tool_calls){if(E.type!=="function")continue;const _=E.id,{name:k,arguments:R}=E.function,O=p[k];if(O){if(f&&f!==k){const P=`Invalid tool_call: ${JSON.stringify(k)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:s,tool_call_id:_,content:P});continue}}else{const P=`Invalid tool_call: ${JSON.stringify(k)}. Available options are: ${Object.keys(p).map(j=>JSON.stringify(j)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:_,content:P});continue}let L;try{L=Dq(O)?await O.parse(R):R}catch(P){const j=P instanceof Error?P.message:String(P);this._addMessage({role:s,tool_call_id:_,content:j});continue}const A=await O.function(L,this),z=X(this,Sn,"m",$A).call(this,A);if(this._addMessage({role:s,tool_call_id:_,content:z}),f)return}}}}Sn=new WeakSet,p0=function(){return X(this,Sn,"m",th).call(this).content??null},th=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Wd(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Ne("stream ended without producing a ChatCompletionMessage with role=assistant")},m0=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Wd(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},g0=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(jA(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},y0=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},FA=function(e){if(e.n!=null&&e.n>1)throw new Ne("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},$A=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Nv extends BA{static runTools(e,n,r){const s=new Nv,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}_addMessage(e,n=!0){super._addMessage(e,n),Wd(e)&&e.content&&this._emit("content",e.content)}}const UA=1,VA=2,qA=4,HA=8,KA=16,GA=32,QA=64,ZA=128,YA=256,JA=ZA|YA,WA=KA|GA|JA|QA,XA=UA|VA|WA,eT=qA|HA,Lq=XA|eT,Xt={STR:UA,NUM:VA,ARR:qA,OBJ:HA,NULL:KA,BOOL:GA,NAN:QA,INFINITY:ZA,MINUS_INFINITY:YA,INF:JA,SPECIAL:WA,ATOM:XA,COLLECTION:eT,ALL:Lq};class jq extends Error{}class Pq extends Error{}function Fq(t,e=Xt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return $q(t.trim(),e)}const $q=(t,e)=>{const n=t.length;let r=0;const s=g=>{throw new jq(`${g} at position ${r}`)},a=g=>{throw new Pq(`${g} at position ${r}`)},l=()=>(p(),r>=n&&s("Unexpected end of input"),t[r]==='"'?c():t[r]==="{"?f():t[r]==="["?d():t.substring(r,r+4)==="null"||Xt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Xt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Xt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Xt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Xt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Xt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):m()),c=()=>{const g=r;let y=!1;for(r++;r<n&&(t[r]!=='"'||y&&t[r-1]==="\\");)y=t[r]==="\\"?!y:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(g,++r-Number(y)))}catch(S){a(String(S))}else if(Xt.STR&e)try{return JSON.parse(t.substring(g,r-Number(y))+'"')}catch{return JSON.parse(t.substring(g,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},f=()=>{r++,p();const g={};try{for(;t[r]!=="}";){if(p(),r>=n&&Xt.OBJ&e)return g;const y=c();p(),r++;try{const S=l();Object.defineProperty(g,y,{value:S,writable:!0,enumerable:!0,configurable:!0})}catch(S){if(Xt.OBJ&e)return g;throw S}p(),t[r]===","&&r++}}catch{if(Xt.OBJ&e)return g;s("Expected '}' at end of object")}return r++,g},d=()=>{r++;const g=[];try{for(;t[r]!=="]";)g.push(l()),p(),t[r]===","&&r++}catch{if(Xt.ARR&e)return g;s("Expected ']' at end of array")}return r++,g},m=()=>{if(r===0){t==="-"&&Xt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(y){if(Xt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}a(String(y))}}const g=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Xt.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(g,r))}catch{t.substring(g,r)==="-"&&Xt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(g,t.lastIndexOf("e")))}catch(S){a(String(S))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return l()},zC=t=>Fq(t,Xt.ALL^Xt.NUM);var Ht,ms,Ya,ei,Qg,Kf,Zg,Yg,Jg,Gf,Wg,LC;class Bu extends BA{constructor(e){super(),Ht.add(this),ms.set(this,void 0),Ya.set(this,void 0),ei.set(this,void 0),$e(this,ms,e),$e(this,Ya,[])}get currentChatCompletionSnapshot(){return X(this,ei,"f")}static fromReadableStream(e){const n=new Bu(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new Bu(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){super._createChatCompletion;const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),X(this,Ht,"m",Qg).call(this);const a=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of a)X(this,Ht,"m",Zg).call(this,l);if(a.controller.signal?.aborted)throw new _r;return this._addChatCompletion(X(this,Ht,"m",Gf).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),X(this,Ht,"m",Qg).call(this),this._connected();const s=qr.fromReadableStream(e,this.controller);let a;for await(const l of s)a&&a!==l.id&&this._addChatCompletion(X(this,Ht,"m",Gf).call(this)),X(this,Ht,"m",Zg).call(this,l),a=l.id;if(s.controller.signal?.aborted)throw new _r;return this._addChatCompletion(X(this,Ht,"m",Gf).call(this))}[(ms=new WeakMap,Ya=new WeakMap,ei=new WeakMap,Ht=new WeakSet,Qg=function(){this.ended||$e(this,ei,void 0)},Kf=function(n){let r=X(this,Ya,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},X(this,Ya,"f")[n.index]=r,r)},Zg=function(n){if(this.ended)return;const r=X(this,Ht,"m",LC).call(this,n);this._emit("chunk",n,r);for(const s of n.choices){const a=r.choices[s.index];s.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",s.delta.content,a.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),s.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:a.message.refusal}),s.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:a.logprobs?.content??[]}),s.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const l=X(this,Ht,"m",Kf).call(this,a);a.finish_reason&&(X(this,Ht,"m",Jg).call(this,a),l.current_tool_call_index!=null&&X(this,Ht,"m",Yg).call(this,a,l.current_tool_call_index));for(const c of s.delta.tool_calls??[])l.current_tool_call_index!==c.index&&(X(this,Ht,"m",Jg).call(this,a),l.current_tool_call_index!=null&&X(this,Ht,"m",Yg).call(this,a,l.current_tool_call_index)),l.current_tool_call_index=c.index;for(const c of s.delta.tool_calls??[]){const f=a.message.tool_calls?.[c.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:c.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(f?.type,void 0))}}},Yg=function(n,r){if(X(this,Ht,"m",Kf).call(this,n).done_tool_calls.has(r))return;const a=n.message.tool_calls?.[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=X(this,ms,"f")?.tools?.find(c=>Jd(c)&&c.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:Wu(l)?l.$parseRaw(a.function.arguments):l?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Jg=function(n){const r=X(this,Ht,"m",Kf).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=X(this,Ht,"m",Wg).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Gf=function(){if(this.ended)throw new Ne("stream has ended, this shouldn't happen");const n=X(this,ei,"f");if(!n)throw new Ne("request ended without sending any chunks");return $e(this,ei,void 0),$e(this,Ya,[]),Bq(n,X(this,ms,"f"))},Wg=function(){const n=X(this,ms,"f")?.response_format;return Mv(n)?n:null},LC=function(n){var r,s,a,l;let c=X(this,ei,"f");const{choices:f,...d}=n;c?Object.assign(c,d):c=$e(this,ei,{...d,choices:[]});for(const{delta:m,finish_reason:p,index:g,logprobs:y=null,...S}of n.choices){let w=c.choices[g];if(w||(w=c.choices[g]={finish_reason:p,index:g,message:{},logprobs:y,...S}),y)if(!w.logprobs)w.logprobs=Object.assign({},y);else{const{content:A,refusal:z,...P}=y;Object.assign(w.logprobs,P),A&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...A)),z&&((s=w.logprobs).refusal??(s.refusal=[]),w.logprobs.refusal.push(...z))}if(p&&(w.finish_reason=p,X(this,ms,"f")&&zA(X(this,ms,"f")))){if(p==="length")throw new gA;if(p==="content_filter")throw new yA}if(Object.assign(w,S),!m)continue;const{content:E,refusal:_,function_call:k,role:R,tool_calls:O,...L}=m;if(Object.assign(w.message,L),_&&(w.message.refusal=(w.message.refusal||"")+_),R&&(w.message.role=R),k&&(w.message.function_call?(k.name&&(w.message.function_call.name=k.name),k.arguments&&((a=w.message.function_call).arguments??(a.arguments=""),w.message.function_call.arguments+=k.arguments)):w.message.function_call=k),E&&(w.message.content=(w.message.content||"")+E,!w.message.refusal&&X(this,Ht,"m",Wg).call(this)&&(w.message.parsed=zC(w.message.content))),O){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:A,id:z,type:P,function:j,...I}of O){const F=(l=w.message.tool_calls)[A]??(l[A]={});Object.assign(F,I),z&&(F.id=z),P&&(F.type=P),j&&(F.function??(F.function={name:j.name??"",arguments:""})),j?.name&&(F.function.name=j.name),j?.arguments&&(F.function.arguments+=j.arguments,Iq(X(this,ms,"f"),F)&&(F.function.parsed_arguments=zC(F.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new qr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Bq(t,e){const{id:n,choices:r,created:s,model:a,system_fingerprint:l,...c}=t,f={...c,id:n,choices:r.map(({message:d,finish_reason:m,index:p,logprobs:g,...y})=>{if(!m)throw new Ne(`missing finish_reason for choice ${p}`);const{content:S=null,function_call:w,tool_calls:E,..._}=d,k=d.role;if(!k)throw new Ne(`missing role for choice ${p}`);if(w){const{arguments:R,name:O}=w;if(R==null)throw new Ne(`missing function_call.arguments for choice ${p}`);if(!O)throw new Ne(`missing function_call.name for choice ${p}`);return{...y,message:{content:S,function_call:{arguments:R,name:O},role:k,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:g}}return E?{...y,index:p,finish_reason:m,logprobs:g,message:{..._,role:k,content:S,refusal:d.refusal??null,tool_calls:E.map((R,O)=>{const{function:L,type:A,id:z,...P}=R,{arguments:j,name:I,...F}=L||{};if(z==null)throw new Ne(`missing choices[${p}].tool_calls[${O}].id
${Qf(t)}`);if(A==null)throw new Ne(`missing choices[${p}].tool_calls[${O}].type
${Qf(t)}`);if(I==null)throw new Ne(`missing choices[${p}].tool_calls[${O}].function.name
${Qf(t)}`);if(j==null)throw new Ne(`missing choices[${p}].tool_calls[${O}].function.arguments
${Qf(t)}`);return{...P,id:z,type:A,function:{...F,name:I,arguments:j}}})}}:{...y,message:{..._,content:S,role:k,refusal:d.refusal??null},finish_reason:m,index:p,logprobs:g}}),created:s,model:a,object:"chat.completion",...l?{system_fingerprint:l}:{}};return Tq(f,e)}function Qf(t){return JSON.stringify(t)}class nh extends Bu{static fromReadableStream(e){const n=new nh(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new nh(n),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,a)),s}}let Dv=class extends Te{constructor(){super(...arguments),this.messages=new DA(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(de`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(de`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Bt,{query:e,...n})}delete(e,n){return this._client.delete(de`/chat/completions/${e}`,n)}parse(e,n){return Nq(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>Ov(r,e))}runTools(e,n){return e.stream?nh.runTools(this._client,e,n):Nv.runTools(this._client,e,n)}stream(e,n){return Bu.createChatCompletion(this._client,e,n)}};Dv.Messages=DA;class zv extends Te{constructor(){super(...arguments),this.completions=new Dv(this._client)}}zv.Completions=Dv;const tT=Symbol("brand.privateNullableHeaders");function*Uq(t){if(!t)return;if(tT in t){const{values:r,nulls:s}=t;yield*r.entries();for(const a of s)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():SC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=SC(r[1])?r[1]:[r[1]];let l=!1;for(const c of a)c!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,c])}}const xe=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[a,l]of Uq(r)){const c=a.toLowerCase();s.has(c)||(e.delete(a),s.add(c)),l===null?(e.delete(a),n.add(c)):(e.append(a,l),n.delete(c))}}return{[tT]:!0,values:e,nulls:n}};class nT extends Te{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:xe([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class rT extends Te{create(e,n){return this._client.post("/audio/transcriptions",ia({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class sT extends Te{create(e,n){return this._client.post("/audio/translations",ia({body:e,...n,__metadata:{model:e.model}},this._client))}}class Xu extends Te{constructor(){super(...arguments),this.transcriptions=new rT(this._client),this.translations=new sT(this._client),this.speech=new nT(this._client)}}Xu.Transcriptions=rT;Xu.Translations=sT;Xu.Speech=nT;class iT extends Te{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(de`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Bt,{query:e,...n})}cancel(e,n){return this._client.post(de`/batches/${e}/cancel`,n)}}class aT extends Te{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(de`/assistants/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(de`/assistants/${e}`,{body:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Bt,{query:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(de`/assistants/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let oT=class extends Te{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class lT extends Te{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Oh=class extends Te{constructor(){super(...arguments),this.sessions=new oT(this._client),this.transcriptionSessions=new lT(this._client)}};Oh.Sessions=oT;Oh.TranscriptionSessions=lT;class uT extends Te{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:xe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(de`/chatkit/sessions/${e}/cancel`,{...n,headers:xe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let cT=class extends Te{retrieve(e,n){return this._client.get(de`/chatkit/threads/${e}`,{...n,headers:xe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Yd,{query:e,...n,headers:xe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(de`/chatkit/threads/${e}`,{...n,headers:xe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},r){return this._client.getAPIList(de`/chatkit/threads/${e}/items`,Yd,{query:n,...r,headers:xe([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class Ih extends Te{constructor(){super(...arguments),this.sessions=new uT(this._client),this.threads=new cT(this._client)}}Ih.Sessions=uT;Ih.Threads=cT;class fT extends Te{create(e,n,r){return this._client.post(de`/threads/${e}/messages`,{body:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(de`/threads/${s}/messages/${e}`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(de`/threads/${s}/messages/${e}`,{body:a,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(de`/threads/${e}/messages`,Bt,{query:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(de`/threads/${s}/messages/${e}`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class dT extends Te{retrieve(e,n,r){const{thread_id:s,run_id:a,...l}=n;return this._client.get(de`/threads/${s}/runs/${a}/steps/${e}`,{query:l,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:s,...a}=n;return this._client.getAPIList(de`/threads/${s}/runs/${e}/steps`,Bt,{query:a,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const Vq=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var qq={};const Ja=t=>{if(typeof globalThis.process<"u")return qq?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var un,Ki,v0,Vr,md,Mr,Gi,mo,Vi,rh,Wn,gd,yd,xu,ou,lu,jC,PC,FC,$C,BC,UC,VC;class _u extends Iv{constructor(){super(...arguments),un.add(this),v0.set(this,[]),Vr.set(this,{}),md.set(this,{}),Mr.set(this,void 0),Gi.set(this,void 0),mo.set(this,void 0),Vi.set(this,void 0),rh.set(this,void 0),Wn.set(this,void 0),gd.set(this,void 0),yd.set(this,void 0),xu.set(this,void 0)}[(v0=new WeakMap,Vr=new WeakMap,md=new WeakMap,Mr=new WeakMap,Gi=new WeakMap,mo=new WeakMap,Vi=new WeakMap,rh=new WeakMap,Wn=new WeakMap,gd=new WeakMap,yd=new WeakMap,xu=new WeakMap,un=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Ki;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=qr.fromReadableStream(e,this.controller);for await(const a of s)X(this,un,"m",ou).call(this,a);if(s.controller.signal?.aborted)throw new _r;return this._addRun(X(this,un,"m",lu).call(this))}toReadableStream(){return new qr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const a=new Ki;return a._run(()=>a._runToolAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},c=await e.submitToolOutputs(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of c)X(this,un,"m",ou).call(this,f);if(c.controller.signal?.aborted)throw new _r;return this._addRun(X(this,un,"m",lu).call(this))}static createThreadAssistantStream(e,n,r){const s=new Ki;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const a=new Ki;return a._run(()=>a._runAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return X(this,gd,"f")}currentRun(){return X(this,yd,"f")}currentMessageSnapshot(){return X(this,Mr,"f")}currentRunStepSnapshot(){return X(this,xu,"f")}async finalRunSteps(){return await this.done(),Object.values(X(this,Vr,"f"))}async finalMessages(){return await this.done(),Object.values(X(this,md,"f"))}async finalRun(){if(await this.done(),!X(this,Gi,"f"))throw Error("Final run was not received.");return X(this,Gi,"f")}async _createThreadAssistantStream(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},l=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const c of l)X(this,un,"m",ou).call(this,c);if(l.controller.signal?.aborted)throw new _r;return this._addRun(X(this,un,"m",lu).call(this))}async _createAssistantStream(e,n,r,s){const a=s?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},c=await e.create(n,l,{...s,signal:this.controller.signal});this._connected();for await(const f of c)X(this,un,"m",ou).call(this,f);if(c.controller.signal?.aborted)throw new _r;return this._addRun(X(this,un,"m",lu).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let a=e[r];if(a==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(Hg(a)&&Hg(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(l=>typeof l=="string"||typeof l=="number")){a.push(...s);continue}for(const l of s){if(!Hg(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const c=l.index;if(c==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const f=a[c];f==null?a.push(l):a[c]=this.accumulateDelta(f,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}Ki=_u,ou=function(e){if(!this.ended)switch($e(this,gd,e),X(this,un,"m",FC).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":X(this,un,"m",VC).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":X(this,un,"m",PC).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":X(this,un,"m",jC).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},lu=function(){if(this.ended)throw new Ne("stream has ended, this shouldn't happen");if(!X(this,Gi,"f"))throw Error("Final run has not been received");return X(this,Gi,"f")},jC=function(e){const[n,r]=X(this,un,"m",BC).call(this,e,X(this,Mr,"f"));$e(this,Mr,n),X(this,md,"f")[n.id]=n;for(const s of r){const a=n.content[s.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,l=n.content[s.index];if(l&&l.type=="text")this._emit("textDelta",a,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=X(this,mo,"f")){if(X(this,Vi,"f"))switch(X(this,Vi,"f").type){case"text":this._emit("textDone",X(this,Vi,"f").text,X(this,Mr,"f"));break;case"image_file":this._emit("imageFileDone",X(this,Vi,"f").image_file,X(this,Mr,"f"));break}$e(this,mo,s.index)}$e(this,Vi,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(X(this,mo,"f")!==void 0){const s=e.data.content[X(this,mo,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,X(this,Mr,"f"));break;case"text":this._emit("textDone",s.text,X(this,Mr,"f"));break}}X(this,Mr,"f")&&this._emit("messageDone",e.data),$e(this,Mr,void 0)}},PC=function(e){const n=X(this,un,"m",$C).call(this,e);switch($e(this,xu,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==X(this,rh,"f")?this._emit("toolCallDelta",a,n.step_details.tool_calls[a.index]):(X(this,Wn,"f")&&this._emit("toolCallDone",X(this,Wn,"f")),$e(this,rh,a.index),$e(this,Wn,n.step_details.tool_calls[a.index]),X(this,Wn,"f")&&this._emit("toolCallCreated",X(this,Wn,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":$e(this,xu,void 0),e.data.step_details.type=="tool_calls"&&X(this,Wn,"f")&&(this._emit("toolCallDone",X(this,Wn,"f")),$e(this,Wn,void 0)),this._emit("runStepDone",e.data,n);break}},FC=function(e){X(this,v0,"f").push(e),this._emit("event",e)},$C=function(e){switch(e.event){case"thread.run.step.created":return X(this,Vr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=X(this,Vr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=Ki.accumulateDelta(n,r.delta);X(this,Vr,"f")[e.data.id]=s}return X(this,Vr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":X(this,Vr,"f")[e.data.id]=e.data;break}if(X(this,Vr,"f")[e.data.id])return X(this,Vr,"f")[e.data.id];throw new Error("No snapshot available")},BC=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in n.content){let l=n.content[a.index];n.content[a.index]=X(this,un,"m",UC).call(this,a,l)}else n.content[a.index]=a,r.push(a);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},UC=function(e,n){return Ki.accumulateDelta(n,e)},VC=function(e){switch($e(this,yd,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":$e(this,Gi,e.data),X(this,Wn,"f")&&(this._emit("toolCallDone",X(this,Wn,"f")),$e(this,Wn,void 0));break}};let Lv=class extends Te{constructor(){super(...arguments),this.steps=new dT(this._client)}create(e,n,r){const{include:s,...a}=n;return this._client.post(de`/threads/${e}/runs`,{query:{include:s},body:a,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(de`/threads/${s}/runs/${e}`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...a}=n;return this._client.post(de`/threads/${s}/runs/${e}`,{body:a,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(de`/threads/${e}/runs`,Bt,{query:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(de`/threads/${s}/runs/${e}/cancel`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return _u.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s=xe([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await Ju(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,r){return _u.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...a}=n;return this._client.post(de`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return _u.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};Lv.Steps=dT;class Nh extends Te{constructor(){super(...arguments),this.runs=new Lv(this._client),this.messages=new fT(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(de`/threads/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(de`/threads/${e}`,{body:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(de`/threads/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return _u.createThreadAssistantStream(e,this._client.beta.threads,n)}}Nh.Runs=Lv;Nh.Messages=fT;class jo extends Te{constructor(){super(...arguments),this.realtime=new Oh(this._client),this.chatkit=new Ih(this._client),this.assistants=new aT(this._client),this.threads=new Nh(this._client)}}jo.Realtime=Oh;jo.ChatKit=Ih;jo.Assistants=aT;jo.Threads=Nh;class hT extends Te{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class pT extends Te{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(de`/containers/${s}/files/${e}/content`,{...r,headers:xe([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let jv=class extends Te{constructor(){super(...arguments),this.content=new pT(this._client)}create(e,n,r){return this._client.post(de`/containers/${e}/files`,ia({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(de`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(de`/containers/${e}/files`,Bt,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(de`/containers/${s}/files/${e}`,{...r,headers:xe([{Accept:"*/*"},r?.headers])})}};jv.Content=pT;class Pv extends Te{constructor(){super(...arguments),this.files=new jv(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(de`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Bt,{query:e,...n})}delete(e,n){return this._client.delete(de`/containers/${e}`,{...n,headers:xe([{Accept:"*/*"},n?.headers])})}}Pv.Files=jv;class mT extends Te{create(e,n,r){const{include:s,...a}=n;return this._client.post(de`/conversations/${e}/items`,{query:{include:s},body:a,...r})}retrieve(e,n,r){const{conversation_id:s,...a}=n;return this._client.get(de`/conversations/${s}/items/${e}`,{query:a,...r})}list(e,n={},r){return this._client.getAPIList(de`/conversations/${e}/items`,Yd,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(de`/conversations/${s}/items/${e}`,r)}}class Fv extends Te{constructor(){super(...arguments),this.items=new mT(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(de`/conversations/${e}`,n)}update(e,n,r){return this._client.post(de`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(de`/conversations/${e}`,n)}}Fv.Items=mT;class gT extends Te{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&ln(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?a:(ln(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(l=>(l&&l.data&&l.data.forEach(c=>{const f=c.embedding;c.embedding=Vq(f)}),l)))}}class yT extends Te{retrieve(e,n,r){const{eval_id:s,run_id:a}=n;return this._client.get(de`/evals/${s}/runs/${a}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...a}=n;return this._client.getAPIList(de`/evals/${s}/runs/${e}/output_items`,Bt,{query:a,...r})}}class $v extends Te{constructor(){super(...arguments),this.outputItems=new yT(this._client)}create(e,n,r){return this._client.post(de`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(de`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(de`/evals/${e}/runs`,Bt,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(de`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(de`/evals/${s}/runs/${e}`,r)}}$v.OutputItems=yT;class Bv extends Te{constructor(){super(...arguments),this.runs=new $v(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(de`/evals/${e}`,n)}update(e,n,r){return this._client.post(de`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Bt,{query:e,...n})}delete(e,n){return this._client.delete(de`/evals/${e}`,n)}}Bv.Runs=$v;let vT=class extends Te{create(e,n){return this._client.post("/files",ia({body:e,...n},this._client))}retrieve(e,n){return this._client.get(de`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Bt,{query:e,...n})}delete(e,n){return this._client.delete(de`/files/${e}`,n)}content(e,n){return this._client.get(de`/files/${e}/content`,{...n,headers:xe([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let l=await this.retrieve(e);for(;!l.status||!s.has(l.status);)if(await Ju(n),l=await this.retrieve(e),Date.now()-a>r)throw new kv({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return l}};class bT extends Te{}let ST=class extends Te{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Uv extends Te{constructor(){super(...arguments),this.graders=new ST(this._client)}}Uv.Graders=ST;class wT extends Te{create(e,n,r){return this._client.getAPIList(de`/fine_tuning/checkpoints/${e}/permissions`,Mh,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(de`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(de`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let Vv=class extends Te{constructor(){super(...arguments),this.permissions=new wT(this._client)}};Vv.Permissions=wT;class xT extends Te{list(e,n={},r){return this._client.getAPIList(de`/fine_tuning/jobs/${e}/checkpoints`,Bt,{query:n,...r})}}class qv extends Te{constructor(){super(...arguments),this.checkpoints=new xT(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(de`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Bt,{query:e,...n})}cancel(e,n){return this._client.post(de`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(de`/fine_tuning/jobs/${e}/events`,Bt,{query:n,...r})}pause(e,n){return this._client.post(de`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(de`/fine_tuning/jobs/${e}/resume`,n)}}qv.Checkpoints=xT;class Po extends Te{constructor(){super(...arguments),this.methods=new bT(this._client),this.jobs=new qv(this._client),this.checkpoints=new Vv(this._client),this.alpha=new Uv(this._client)}}Po.Methods=bT;Po.Jobs=qv;Po.Checkpoints=Vv;Po.Alpha=Uv;class _T extends Te{}class Hv extends Te{constructor(){super(...arguments),this.graderModels=new _T(this._client)}}Hv.GraderModels=_T;class CT extends Te{createVariation(e,n){return this._client.post("/images/variations",ia({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",ia({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class ET extends Te{retrieve(e,n){return this._client.get(de`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Mh,e)}delete(e,n){return this._client.delete(de`/models/${e}`,n)}}class kT extends Te{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class RT extends Te{accept(e,n,r){return this._client.post(de`/realtime/calls/${e}/accept`,{body:n,...r,headers:xe([{Accept:"*/*"},r?.headers])})}hangup(e,n){return this._client.post(de`/realtime/calls/${e}/hangup`,{...n,headers:xe([{Accept:"*/*"},n?.headers])})}refer(e,n,r){return this._client.post(de`/realtime/calls/${e}/refer`,{body:n,...r,headers:xe([{Accept:"*/*"},r?.headers])})}reject(e,n={},r){return this._client.post(de`/realtime/calls/${e}/reject`,{body:n,...r,headers:xe([{Accept:"*/*"},r?.headers])})}}class AT extends Te{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Dh extends Te{constructor(){super(...arguments),this.clientSecrets=new AT(this._client),this.calls=new RT(this._client)}}Dh.ClientSecrets=AT;Dh.Calls=RT;function Hq(t,e){return!e||!Gq(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:TT(t,e)}function TT(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:Yq(e,s)};if(s.type==="message"){const a=s.content.map(l=>l.type==="output_text"?{...l,parsed:Kq(e,l.text)}:l);return{...s,content:a}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||b0(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function Kq(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function Gq(t){return!!Mv(t.text?.format)}function Qq(t){return t?.$brand==="auto-parseable-tool"}function Zq(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function Yq(t,e){const n=Zq(t.tools??[],e.name);return{...e,...e,parsed_arguments:Qq(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function b0(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Wa,Zf,ti,Yf,qC,HC,KC,GC;class Kv extends Iv{constructor(e){super(),Wa.add(this),Zf.set(this,void 0),ti.set(this,void 0),Yf.set(this,void 0),$e(this,Zf,e)}static createResponse(e,n,r){const s=new Kv(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),X(this,Wa,"m",qC).call(this);let a,l=null;"response_id"in n?(a=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),l=n.starting_after??null):a=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const c of a)X(this,Wa,"m",HC).call(this,c,l);if(a.controller.signal?.aborted)throw new _r;return X(this,Wa,"m",KC).call(this)}[(Zf=new WeakMap,ti=new WeakMap,Yf=new WeakMap,Wa=new WeakSet,qC=function(){this.ended||$e(this,ti,void 0)},HC=function(n,r){if(this.ended)return;const s=(l,c)=>{(r==null||c.sequence_number>r)&&this._emit(l,c)},a=X(this,Wa,"m",GC).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const l=a.output[n.output_index];if(!l)throw new Ne(`missing output at index ${n.output_index}`);if(l.type==="message"){const c=l.content[n.content_index];if(!c)throw new Ne(`missing content at index ${n.content_index}`);if(c.type!=="output_text")throw new Ne(`expected content to be 'output_text', got ${c.type}`);s("response.output_text.delta",{...n,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const l=a.output[n.output_index];if(!l)throw new Ne(`missing output at index ${n.output_index}`);l.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:l.arguments});break}default:s(n.type,n);break}},KC=function(){if(this.ended)throw new Ne("stream has ended, this shouldn't happen");const n=X(this,ti,"f");if(!n)throw new Ne("request ended without sending any events");$e(this,ti,void 0);const r=Jq(n,X(this,Zf,"f"));return $e(this,Yf,r),r},GC=function(n){let r=X(this,ti,"f");if(!r){if(n.type!=="response.created")throw new Ne(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=$e(this,ti,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new Ne(`missing output at index ${n.output_index}`);const a=s.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?s.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(l));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new Ne(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new Ne(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Ne(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new Ne(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new Ne(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const a=s.content?.[n.content_index];if(!a)throw new Ne(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Ne(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{$e(this,ti,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const a=n.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const a of n)a.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,l)=>n.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=X(this,Yf,"f");if(!e)throw new Ne("stream ended without producing a ChatCompletion");return e}}function Jq(t,e){return Hq(t,e)}class MT extends Te{list(e,n={},r){return this._client.getAPIList(de`/responses/${e}/input_items`,Bt,{query:n,...r})}}class OT extends Te{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class zh extends Te{constructor(){super(...arguments),this.inputItems=new MT(this._client),this.inputTokens=new OT(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&b0(r),r))}retrieve(e,n={},r){return this._client.get(de`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&b0(s),s))}delete(e,n){return this._client.delete(de`/responses/${e}`,{...n,headers:xe([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>TT(r,e))}stream(e,n){return Kv.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(de`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}zh.InputItems=MT;zh.InputTokens=OT;class IT extends Te{create(e,n,r){return this._client.post(de`/uploads/${e}/parts`,ia({body:n,...r},this._client))}}class Gv extends Te{constructor(){super(...arguments),this.parts=new IT(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(de`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(de`/uploads/${e}/complete`,{body:n,...r})}}Gv.Parts=IT;const Wq=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class NT extends Te{create(e,n,r){return this._client.post(de`/vector_stores/${e}/file_batches`,{body:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(de`/vector_stores/${s}/file_batches/${e}`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(de`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...a}=n;return this._client.getAPIList(de`/vector_stores/${s}/file_batches/${e}/files`,Bt,{query:a,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const s=xe([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await Ju(c);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=s?.maxConcurrency??5,l=Math.min(a,n.length),c=this._client,f=n.values(),d=[...r];async function m(g){for(let y of g){const S=await c.files.create({file:y,purpose:"assistants"},s);d.push(S.id)}}const p=Array(l).fill(f).map(m);return await Wq(p),await this.createAndPoll(e,{file_ids:d})}}class DT extends Te{create(e,n,r){return this._client.post(de`/vector_stores/${e}/files`,{body:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(de`/vector_stores/${s}/files/${e}`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:s,...a}=n;return this._client.post(de`/vector_stores/${s}/files/${e}`,{body:a,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(de`/vector_stores/${e}/files`,Bt,{query:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(de`/vector_stores/${s}/files/${e}`,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s=xe([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),l=a.data;switch(l.status){case"in_progress":let c=5e3;if(r?.pollIntervalMs)c=r.pollIntervalMs;else{const f=a.response.headers.get("openai-poll-after-ms");if(f){const d=parseInt(f);isNaN(d)||(c=d)}}await Ju(c);break;case"failed":case"completed":return l}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(de`/vector_stores/${s}/files/${e}/content`,Mh,{...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Lh extends Te{constructor(){super(...arguments),this.files=new DT(this._client),this.fileBatches=new NT(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(de`/vector_stores/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(de`/vector_stores/${e}`,{body:n,...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Bt,{query:e,...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(de`/vector_stores/${e}`,{...n,headers:xe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(de`/vector_stores/${e}/search`,Mh,{body:n,method:"post",...r,headers:xe([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}Lh.Files=DT;Lh.FileBatches=NT;class zT extends Te{create(e,n){return this._client.post("/videos",IC({body:e,...n},this._client))}retrieve(e,n){return this._client.get(de`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Yd,{query:e,...n})}delete(e,n){return this._client.delete(de`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(de`/videos/${e}/content`,{query:n,...r,headers:xe([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(de`/videos/${e}/remix`,IC({body:n,...r},this._client))}}var io,LT,vd;class jT extends Te{constructor(){super(...arguments),io.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");X(this,io,"m",LT).call(this,r);const a=xe([n]).values,l=X(this,io,"m",vd).call(this,a,"webhook-signature"),c=X(this,io,"m",vd).call(this,a,"webhook-timestamp"),f=X(this,io,"m",vd).call(this,a,"webhook-id"),d=parseInt(c,10);if(isNaN(d))throw new eu("Invalid webhook timestamp format");const m=Math.floor(Date.now()/1e3);if(m-d>s)throw new eu("Webhook timestamp is too old");if(d>m+s)throw new eu("Webhook timestamp is too new");const p=l.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),g=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),y=f?`${f}.${c}.${e}`:`${c}.${e}`,S=await crypto.subtle.importKey("raw",g,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of p)try{const E=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",S,E,new TextEncoder().encode(y)))return}catch{continue}throw new eu("The given webhook signature does not match the expected signature")}}io=new WeakSet,LT=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},vd=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var S0,Qv,bd,PT;class Qe{constructor({baseURL:e=Ja("OPENAI_BASE_URL"),apiKey:n=Ja("OPENAI_API_KEY"),organization:r=Ja("OPENAI_ORG_ID")??null,project:s=Ja("OPENAI_PROJECT_ID")??null,webhookSecret:a=Ja("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(S0.add(this),bd.set(this,void 0),this.completions=new hT(this),this.chat=new zv(this),this.embeddings=new gT(this),this.files=new vT(this),this.images=new CT(this),this.audio=new Xu(this),this.moderations=new kT(this),this.models=new ET(this),this.fineTuning=new Po(this),this.graders=new Hv(this),this.vectorStores=new Lh(this),this.webhooks=new jT(this),this.beta=new jo(this),this.batches=new iT(this),this.uploads=new Gv(this),this.responses=new zh(this),this.realtime=new Dh(this),this.conversations=new Fv(this),this.evals=new Bv(this),this.containers=new Pv(this),this.videos=new zT(this),n===void 0)throw new Ne("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:n,organization:r,project:s,webhookSecret:a,...l,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&X8())throw new Ne(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??Qv.DEFAULT_TIMEOUT,this.logger=c.logger??console;const f="warn";this.logLevel=f,this.logLevel=MC(c.logLevel,"ClientOptions.logLevel",this)??MC(Ja("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??sq(),$e(this,bd,aq),this._options=c,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return xe([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return dq(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${ro}`}defaultIdempotencyKey(){return`stainless-node-retry-${oA()}`}makeStatusError(e,n,r,s){return fn.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Ne?r:new Ne(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Ne(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!X(this,S0,"m",PT).call(this)&&r||this.baseURL,a=Q8(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return Z8(l)||(n={...l,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new Th(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const s=await e,a=s.maxRetries??this.maxRetries;n==null&&(n=a),await this.prepareOptions(s);const{req:l,url:c,timeout:f}=await this.buildRequest(s,{retryCount:a-n});await this.prepareRequest(l,{url:c,options:s});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,p=Date.now();if(ln(this).debug(`[${d}] sending request`,Bi({retryOfRequestLogID:r,method:s.method,url:c,options:s,headers:l.headers})),s.signal?.aborted)throw new _r;const g=new AbortController,y=await this.fetchWithTimeout(c,l,f,g).catch(l0),S=Date.now();if(y instanceof globalThis.Error){const _=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new _r;const k=o0(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return ln(this).info(`[${d}] connection ${k?"timed out":"failed"} - ${_}`),ln(this).debug(`[${d}] connection ${k?"timed out":"failed"} (${_})`,Bi({retryOfRequestLogID:r,url:c,durationMs:S-p,message:y.message})),this.retryRequest(s,n,r??d);throw ln(this).info(`[${d}] connection ${k?"timed out":"failed"} - error; no more retries left`),ln(this).debug(`[${d}] connection ${k?"timed out":"failed"} (error; no more retries left)`,Bi({retryOfRequestLogID:r,url:c,durationMs:S-p,message:y.message})),k?new kv:new Rh({cause:y})}const w=[...y.headers.entries()].filter(([_])=>_==="x-request-id").map(([_,k])=>", "+_+": "+JSON.stringify(k)).join(""),E=`[${d}${m}${w}] ${l.method} ${c} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${S-p}ms`;if(!y.ok){const _=await this.shouldRetry(y);if(n&&_){const z=`retrying, ${n} attempts remaining`;return await iq(y.body),ln(this).info(`${E} - ${z}`),ln(this).debug(`[${d}] response error (${z})`,Bi({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:S-p})),this.retryRequest(s,n,r??d,y.headers)}const k=_?"error; no more retries left":"error; not retryable";ln(this).info(`${E} - ${k}`);const R=await y.text().catch(z=>l0(z).message),O=W8(R),L=O?void 0:R;throw ln(this).debug(`[${d}] response error (${k})`,Bi({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,message:L,durationMs:Date.now()-p})),this.makeStatusError(y.status,O,L,y.headers)}return ln(this).info(E),ln(this).debug(`[${d}] response start`,Bi({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:S-p})),{response:y,options:s,controller:g,requestLogID:d,retryOfRequestLogID:r,startTime:p}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new wq(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:a,method:l,...c}=n||{};a&&a.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m={signal:s.signal,...d?{duplex:"half"}:{},method:"GET",...c};l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let a;const l=s?.get("retry-after-ms");if(l){const f=parseFloat(l);Number.isNaN(f)||(a=f)}const c=s?.get("retry-after");if(c&&!a){const f=parseFloat(c);Number.isNaN(f)?a=Date.parse(c)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){const f=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,f)}return await Ju(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,l=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:a,query:l,defaultBaseURL:c}=r,f=this.buildURL(a,l,c);"timeout"in r&&J8("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:d,body:m}=this.buildBody({options:r}),p=await this.buildHeaders({options:e,method:s,bodyHeaders:d,retryCount:n});return{req:{method:s,headers:p,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"},...m&&{body:m},...this.fetchOptions??{},...r.fetchOptions??{}},url:f,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=xe([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...rq(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=xe([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:SA(e)}:X(this,bd,"f").call(this,{body:e,headers:r})}}Qv=Qe,bd=new WeakMap,S0=new WeakSet,PT=function(){return this.baseURL!=="https://api.openai.com/v1"};Qe.OpenAI=Qv;Qe.DEFAULT_TIMEOUT=6e5;Qe.OpenAIError=Ne;Qe.APIError=fn;Qe.APIConnectionError=Rh;Qe.APIConnectionTimeoutError=kv;Qe.APIUserAbortError=_r;Qe.NotFoundError=fA;Qe.ConflictError=dA;Qe.RateLimitError=pA;Qe.BadRequestError=lA;Qe.AuthenticationError=uA;Qe.InternalServerError=mA;Qe.PermissionDeniedError=cA;Qe.UnprocessableEntityError=hA;Qe.InvalidWebhookSignatureError=eu;Qe.toFile=kq;Qe.Completions=hT;Qe.Chat=zv;Qe.Embeddings=gT;Qe.Files=vT;Qe.Images=CT;Qe.Audio=Xu;Qe.Moderations=kT;Qe.Models=ET;Qe.FineTuning=Po;Qe.Graders=Hv;Qe.VectorStores=Lh;Qe.Webhooks=jT;Qe.Beta=jo;Qe.Batches=iT;Qe.Uploads=Gv;Qe.Responses=zh;Qe.Realtime=Dh;Qe.Conversations=Fv;Qe.Evals=Bv;Qe.Containers=Pv;Qe.Videos=zT;class Xq extends Qe{constructor(e){super({...e,dangerouslyAllowBrowser:!0})}}function e9(t){return new Xq({apiKey:t.apiKey,organization:t.organization,baseURL:t.baseURL})}function t9(t){return`${t}-${Date.now()}-${Math.random().toString(36).substring(7)}`}class n9 extends T8{constructor(e,n){super({},n),this.kind="text",this.name="openai",this.client=e9(e)}async*chatStream(e){const n=new Map,r=this.mapTextOptionsToOpenAI(e);try{const s=await this.client.responses.create({...r,stream:!0},{headers:e.request?.headers,signal:e.request?.signal});yield*this.processOpenAIStreamChunks(s,n,e,()=>t9(this.name))}catch(s){const a=s;throw console.error(">>> chatStream: Fatal error during response creation <<<"),console.error(">>> Error message:",a.message),console.error(">>> Error stack:",a.stack),console.error(">>> Full error:",a),s}}async structuredOutput(e){const{chatOptions:n,outputSchema:r}=e,s=this.mapTextOptionsToOpenAI(n),a=Su(r,r.required||[]);try{const l=await this.client.responses.create({...s,stream:!1,text:{format:{type:"json_schema",name:"structured_output",schema:a,strict:!0}}},{headers:n.request?.headers,signal:n.request?.signal}),c=this.extractTextFromResponse(l);let f;try{f=JSON.parse(c)}catch{throw new Error(`Failed to parse structured output as JSON. Content: ${c.slice(0,200)}${c.length>200?"...":""}`)}return{data:a0(f),rawText:c}}catch(l){const c=l;throw console.error(">>> structuredOutput: Error during response creation <<<"),console.error(">>> Error message:",c.message),l}}extractTextFromResponse(e){let n="";for(const r of e.output)if(r.type==="message")for(const s of r.content)s.type==="output_text"&&(n+=s.text);return n}async*processOpenAIStreamChunks(e,n,r,s){let a="",l="";const c=Date.now();let f=0,d=!1,m=!1,p=null,g=r.model;try{for await(const y of e){f++;const S=w=>w.type==="output_text"?(a+=w.text,{type:"content",id:p||s(),model:g||r.model,timestamp:c,delta:w.text,content:a,role:"assistant"}):w.type==="reasoning_text"?(l+=w.text,{type:"thinking",id:p||s(),model:g||r.model,timestamp:c,delta:w.text,content:l}):{type:"error",id:p||s(),model:g||r.model,timestamp:c,error:{message:w.refusal}};if((y.type==="response.created"||y.type==="response.incomplete"||y.type==="response.failed")&&(p=y.response.id,g=y.response.model,d=!1,m=!1,a="",l="",y.response.error&&(yield{type:"error",id:y.response.id,model:y.response.model,timestamp:c,error:y.response.error}),y.response.incomplete_details&&(yield{type:"error",id:y.response.id,model:y.response.model,timestamp:c,error:{message:y.response.incomplete_details.reason??""}})),y.type==="response.output_text.delta"&&y.delta){const w=Array.isArray(y.delta)?y.delta.join(""):typeof y.delta=="string"?y.delta:"";w&&(a+=w,d=!0,yield{type:"content",id:p||s(),model:g||r.model,timestamp:c,delta:w,content:a,role:"assistant"})}if(y.type==="response.reasoning_text.delta"&&y.delta){const w=Array.isArray(y.delta)?y.delta.join(""):typeof y.delta=="string"?y.delta:"";w&&(l+=w,m=!0,yield{type:"thinking",id:p||s(),model:g||r.model,timestamp:c,delta:w,content:l})}if(y.type==="response.reasoning_summary_text.delta"&&y.delta){const w=typeof y.delta=="string"?y.delta:"";w&&(l+=w,m=!0,yield{type:"thinking",id:p||s(),model:g||r.model,timestamp:c,delta:w,content:l})}if(y.type==="response.content_part.added"){const w=y.part;yield S(w)}if(y.type==="response.content_part.done"){const w=y.part;if(w.type==="output_text"&&d||w.type==="reasoning_text"&&m)continue;yield S(w)}if(y.type==="response.output_item.added"){const w=y.item;w.type==="function_call"&&w.id&&(n.has(w.id)||n.set(w.id,{index:y.output_index,name:w.name||""}))}if(y.type==="response.function_call_arguments.done"){const{item_id:w,output_index:E}=y,k=n.get(w)?.name||"";yield{type:"tool_call",id:p||s(),model:g||r.model,timestamp:c,index:E,toolCall:{id:w,type:"function",function:{name:k,arguments:y.arguments}}}}if(y.type==="response.completed"){const w=y.response.output.some(E=>E.type==="function_call");yield{type:"done",id:p||s(),model:g||r.model,timestamp:c,usage:{promptTokens:y.response.usage?.input_tokens||0,completionTokens:y.response.usage?.output_tokens||0,totalTokens:y.response.usage?.total_tokens||0},finishReason:w?"tool_calls":"stop"}}y.type==="error"&&(yield{type:"error",id:p||s(),model:g||r.model,timestamp:c,error:{message:y.message,code:y.code??void 0}})}}catch(y){const S=y;console.log("[OpenAI Adapter] Stream ended with error. Event type summary:",{totalChunks:f,error:S.message}),yield{type:"error",id:s(),model:r.model,timestamp:c,error:{message:S.message||"Unknown error occurred",code:S.code}}}}mapTextOptionsToOpenAI(e){const n=e.modelOptions,r=this.convertMessagesToInput(e.messages);n&&O8({...n,model:e.model});const s=e.tools?K8(e.tools):void 0;return{model:e.model,temperature:e.temperature,max_output_tokens:e.maxTokens,top_p:e.topP,metadata:e.metadata,instructions:e.systemPrompts?.join(`
`),...n,input:r,tools:s}}convertMessagesToInput(e){const n=[];for(const r of e){if(r.role==="tool"){n.push({type:"function_call_output",call_id:r.toolCallId||"",output:typeof r.content=="string"?r.content:JSON.stringify(r.content)});continue}if(r.role==="assistant"){if(r.toolCalls&&r.toolCalls.length>0)for(const l of r.toolCalls){const c=typeof l.function.arguments=="string"?l.function.arguments:JSON.stringify(l.function.arguments);n.push({type:"function_call",call_id:l.id,name:l.function.name,arguments:c})}if(r.content){const l=this.extractTextContent(r.content);l&&n.push({type:"message",role:"assistant",content:l})}continue}const s=this.normalizeContent(r.content),a=[];for(const l of s)a.push(this.convertContentPartToOpenAI(l));a.length===0&&a.push({type:"input_text",text:""}),n.push({type:"message",role:"user",content:a})}return n}convertContentPartToOpenAI(e){switch(e.type){case"text":return{type:"input_text",text:e.content};case"image":{const n=e.metadata;return e.source.type==="url"?{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}:{type:"input_image",image_url:e.source.value,detail:n?.detail||"auto"}}case"audio":return e.source.type==="url"?{type:"input_file",file_url:e.source.value}:{type:"input_file",file_data:e.source.value};default:throw new Error(`Unsupported content part type: ${e.type}`)}}normalizeContent(e){return e===null?[]:typeof e=="string"?[{type:"text",content:e}]:e}extractTextContent(e){return e===null?"":typeof e=="string"?e:e.filter(n=>n.type==="text").map(n=>n.content).join("")}}const QC={ai:{model:"gpt-4o"}};function w0(){return typeof window<"u"&&window.__APP_CONFIG__?{...QC,...window.__APP_CONFIG__}:QC}function r9(t){const e=`${window.location.origin}/openai/v1`;return new n9({apiKey:"not-needed",baseURL:e},t)}function s9(){return w0().ai?.model||"gpt-5.1"}const x0=50;function i9(t){return t?t.length<=x0?t:t.slice(0,x0):[]}function Jf(t){return t.error?{error:t.error}:{columns:t.columns,rowCount:t.rows?.length??0,rows:i9(t.rows),rowsAffected:t.rows_affected,truncated:(t.rows?.length??0)>x0}}const a9=Es({}),o9=Es({query:Cn().describe("The SQL query to set in the editor")}),l9=Es({query:Cn().describe("The SQL query to execute")}),u9=Es({query:Cn().describe("The SQL SELECT query to run silently")}),c9=Es({query:Cn().describe("The SQL statement (INSERT/UPDATE/DELETE) to execute silently")}),f9=Yu({name:"get_query_result",description:"Get the result of the last executed query that was shown in the UI, including columns, rows, and any errors",inputSchema:a9}),d9=Yu({name:"set_query",description:"Set the SQL query in the editor without executing it. The user will see the query appear in their editor immediately.",inputSchema:o9}),h9=Yu({name:"execute_query",description:"Execute a SQL query and show results in the UI. The query will be set in the editor and executed, with results displayed to the user. Returns the query results directly.",inputSchema:l9}),p9=Yu({name:"run_query",description:"Run a SELECT query silently WITHOUT changing the UI or query editor. Use this for exploratory queries, checking data, or gathering information without disrupting what the user is currently working on. Results are returned but not shown in the UI. Only use for SELECT, WITH, SHOW, DESCRIBE, EXPLAIN, or PRAGMA queries.",inputSchema:u9}),m9=Yu({name:"run_statement",description:"Execute an INSERT, UPDATE, or DELETE statement silently WITHOUT changing the UI. Use this for modifying data without disrupting what the user is currently working on. Returns rows_affected count.",inputSchema:c9});function g9(t){const{queryResult:e,setters:n}=t,r=f9.client(async()=>e?Jf(e):{error:"No query has been executed yet."}),s=d9.client(async f=>{const d=f;return n.setQuery(d.query),{success:!0,query:d.query}}),a=h9.client(async f=>{const d=f;try{const m=await n.executeQuery(d.query);return Jf(m)}catch(m){return{error:m instanceof Error?m.message:"Query execution failed"}}}),l=p9.client(async f=>{const d=f;try{const m=await n.runQuerySilent(d.query);return Jf(m)}catch(m){return{error:m instanceof Error?m.message:"Query execution failed"}}}),c=m9.client(async f=>{const d=f;try{const m=await n.runStatementSilent(d.query);return Jf(m)}catch(m){return{error:m instanceof Error?m.message:"Statement execution failed"}}});return k8(r,s,a,l,c)}function y9(t){const{connection:e,database:n,table:r,currentQuery:s,schema:a}=t,l=[];e&&e.sql?(l.push(`- **Driver**: ${e.sql.driver}`),l.push(`- **Database**: ${n||"(none selected)"}`),l.push(`- **Table**: ${r||"(none selected)"}`)):l.push("- Not connected to a database");const c=l.join(`
`),f=s?.trim()?`\`\`\`sql
${s}
\`\`\``:"(empty)";let d="";return a?.tables?.length&&(d=`

## Schema

${a.tables.map(p=>{const g=a.columns[p];if(g?.length){const y=g.map(S=>`${S.name} (${S.type})`).join(", ");return`- **${p}**: ${y}`}return`- **${p}**`}).join(`
`)}`),`You are an AI assistant embedded in a database management tool. You help users write, understand, and debug SQL queries.

## Current Environment

${c}

## Current Query

${f}${d}

## Tools

- \`get_query_result\`: Get results of the last executed query
- \`set_query\`: Put a query in the editor (user sees it immediately)
- \`execute_query\`: Run a query and show results in UI
- \`run_query\`: Run a SELECT query silently without changing UI (for exploration)
- \`run_statement\`: Execute INSERT/UPDATE/DELETE silently without changing UI

## Guidelines

- **Writing queries**: Use \`set_query\` to show it in the editor for review
- **Running queries**: Use \`execute_query\` - results return directly
- **Exploring data**: Use \`run_query\` for SELECT queries without disrupting the UI
- **Modifying data**: Use \`run_statement\` for INSERT/UPDATE/DELETE operations silently
- **Query format**: One query at a time. For Oracle, omit trailing semicolon
- **Response format**: Use Markdown. Be concise.`}const ZC={name:"SQL Assistant",placeholder:"Ask about your query or data..."};function v9(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const b9=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,S9=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,w9={};function YC(t,e){return(w9.jsx?S9:b9).test(t)}const x9=/[ \t\n\f\r]/g;function _9(t){return typeof t=="object"?t.type==="text"?JC(t.value):!1:JC(t)}function JC(t){return t.replace(x9,"")===""}class ec{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}ec.prototype.normal={};ec.prototype.property={};ec.prototype.space=void 0;function FT(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new ec(n,r,e)}function _0(t){return t.toLowerCase()}class Bn{constructor(e,n){this.attribute=n,this.property=e}}Bn.prototype.attribute="";Bn.prototype.booleanish=!1;Bn.prototype.boolean=!1;Bn.prototype.commaOrSpaceSeparated=!1;Bn.prototype.commaSeparated=!1;Bn.prototype.defined=!1;Bn.prototype.mustUseProperty=!1;Bn.prototype.number=!1;Bn.prototype.overloadedBoolean=!1;Bn.prototype.property="";Bn.prototype.spaceSeparated=!1;Bn.prototype.space=void 0;let C9=0;const Ge=ca(),$t=ca(),C0=ca(),me=ca(),Et=ca(),xo=ca(),Jn=ca();function ca(){return 2**++C9}const E0=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ge,booleanish:$t,commaOrSpaceSeparated:Jn,commaSeparated:xo,number:me,overloadedBoolean:C0,spaceSeparated:Et},Symbol.toStringTag,{value:"Module"})),Xg=Object.keys(E0);class Zv extends Bn{constructor(e,n,r,s){let a=-1;if(super(e,n),WC(this,"space",s),typeof r=="number")for(;++a<Xg.length;){const l=Xg[a];WC(this,Xg[a],(r&E0[l])===E0[l])}}}Zv.prototype.defined=!0;function WC(t,e,n){n&&(t[e]=n)}function Fo(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const a=new Zv(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[_0(r)]=r,n[_0(a.attribute)]=r}return new ec(e,n,t.space)}const $T=Fo({properties:{ariaActiveDescendant:null,ariaAtomic:$t,ariaAutoComplete:null,ariaBusy:$t,ariaChecked:$t,ariaColCount:me,ariaColIndex:me,ariaColSpan:me,ariaControls:Et,ariaCurrent:null,ariaDescribedBy:Et,ariaDetails:null,ariaDisabled:$t,ariaDropEffect:Et,ariaErrorMessage:null,ariaExpanded:$t,ariaFlowTo:Et,ariaGrabbed:$t,ariaHasPopup:null,ariaHidden:$t,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Et,ariaLevel:me,ariaLive:null,ariaModal:$t,ariaMultiLine:$t,ariaMultiSelectable:$t,ariaOrientation:null,ariaOwns:Et,ariaPlaceholder:null,ariaPosInSet:me,ariaPressed:$t,ariaReadOnly:$t,ariaRelevant:null,ariaRequired:$t,ariaRoleDescription:Et,ariaRowCount:me,ariaRowIndex:me,ariaRowSpan:me,ariaSelected:$t,ariaSetSize:me,ariaSort:null,ariaValueMax:me,ariaValueMin:me,ariaValueNow:me,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function BT(t,e){return e in t?t[e]:e}function UT(t,e){return BT(t,e.toLowerCase())}const E9=Fo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:xo,acceptCharset:Et,accessKey:Et,action:null,allow:null,allowFullScreen:Ge,allowPaymentRequest:Ge,allowUserMedia:Ge,alt:null,as:null,async:Ge,autoCapitalize:null,autoComplete:Et,autoFocus:Ge,autoPlay:Ge,blocking:Et,capture:null,charSet:null,checked:Ge,cite:null,className:Et,cols:me,colSpan:null,content:null,contentEditable:$t,controls:Ge,controlsList:Et,coords:me|xo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ge,defer:Ge,dir:null,dirName:null,disabled:Ge,download:C0,draggable:$t,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ge,formTarget:null,headers:Et,height:me,hidden:C0,high:me,href:null,hrefLang:null,htmlFor:Et,httpEquiv:Et,id:null,imageSizes:null,imageSrcSet:null,inert:Ge,inputMode:null,integrity:null,is:null,isMap:Ge,itemId:null,itemProp:Et,itemRef:Et,itemScope:Ge,itemType:Et,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ge,low:me,manifest:null,max:null,maxLength:me,media:null,method:null,min:null,minLength:me,multiple:Ge,muted:Ge,name:null,nonce:null,noModule:Ge,noValidate:Ge,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ge,optimum:me,pattern:null,ping:Et,placeholder:null,playsInline:Ge,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ge,referrerPolicy:null,rel:Et,required:Ge,reversed:Ge,rows:me,rowSpan:me,sandbox:Et,scope:null,scoped:Ge,seamless:Ge,selected:Ge,shadowRootClonable:Ge,shadowRootDelegatesFocus:Ge,shadowRootMode:null,shape:null,size:me,sizes:null,slot:null,span:me,spellCheck:$t,src:null,srcDoc:null,srcLang:null,srcSet:null,start:me,step:null,style:null,tabIndex:me,target:null,title:null,translate:null,type:null,typeMustMatch:Ge,useMap:null,value:$t,width:me,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Et,axis:null,background:null,bgColor:null,border:me,borderColor:null,bottomMargin:me,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ge,declare:Ge,event:null,face:null,frame:null,frameBorder:null,hSpace:me,leftMargin:me,link:null,longDesc:null,lowSrc:null,marginHeight:me,marginWidth:me,noResize:Ge,noHref:Ge,noShade:Ge,noWrap:Ge,object:null,profile:null,prompt:null,rev:null,rightMargin:me,rules:null,scheme:null,scrolling:$t,standby:null,summary:null,text:null,topMargin:me,valueType:null,version:null,vAlign:null,vLink:null,vSpace:me,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ge,disableRemotePlayback:Ge,prefix:null,property:null,results:me,security:null,unselectable:null},space:"html",transform:UT}),k9=Fo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Jn,accentHeight:me,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:me,amplitude:me,arabicForm:null,ascent:me,attributeName:null,attributeType:null,azimuth:me,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:me,by:null,calcMode:null,capHeight:me,className:Et,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:me,diffuseConstant:me,direction:null,display:null,dur:null,divisor:me,dominantBaseline:null,download:Ge,dx:null,dy:null,edgeMode:null,editable:null,elevation:me,enableBackground:null,end:null,event:null,exponent:me,externalResourcesRequired:null,fill:null,fillOpacity:me,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:xo,g2:xo,glyphName:xo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:me,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:me,horizOriginX:me,horizOriginY:me,id:null,ideographic:me,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:me,k:me,k1:me,k2:me,k3:me,k4:me,kernelMatrix:Jn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:me,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:me,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:me,overlineThickness:me,paintOrder:null,panose1:null,path:null,pathLength:me,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Et,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:me,pointsAtY:me,pointsAtZ:me,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Jn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Jn,rev:Jn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Jn,requiredFeatures:Jn,requiredFonts:Jn,requiredFormats:Jn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:me,specularExponent:me,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:me,strikethroughThickness:me,string:null,stroke:null,strokeDashArray:Jn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:me,strokeOpacity:me,strokeWidth:null,style:null,surfaceScale:me,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Jn,tabIndex:me,tableValues:null,target:null,targetX:me,targetY:me,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Jn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:me,underlineThickness:me,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:me,values:null,vAlphabetic:me,vMathematical:me,vectorEffect:null,vHanging:me,vIdeographic:me,version:null,vertAdvY:me,vertOriginX:me,vertOriginY:me,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:me,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:BT}),VT=Fo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),qT=Fo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:UT}),HT=Fo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),R9={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},A9=/[A-Z]/g,XC=/-[a-z]/g,T9=/^data[-\w.:]+$/i;function M9(t,e){const n=_0(e);let r=e,s=Bn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&T9.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(XC,I9);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!XC.test(a)){let l=a.replace(A9,O9);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}s=Zv}return new s(r,e)}function O9(t){return"-"+t.toLowerCase()}function I9(t){return t.charAt(1).toUpperCase()}const N9=FT([$T,E9,VT,qT,HT],"html"),Yv=FT([$T,k9,VT,qT,HT],"svg");function D9(t){return t.join(" ").trim()}var Xa={},ey,eE;function z9(){if(eE)return ey;eE=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,c=/^\s+|\s+$/g,f=`
`,d="/",m="*",p="",g="comment",y="declaration";function S(E,_){if(typeof E!="string")throw new TypeError("First argument must be a string");if(!E)return[];_=_||{};var k=1,R=1;function O(te){var H=te.match(e);H&&(k+=H.length);var $=te.lastIndexOf(f);R=~$?te.length-$:R+te.length}function L(){var te={line:k,column:R};return function(H){return H.position=new A(te),j(),H}}function A(te){this.start=te,this.end={line:k,column:R},this.source=_.source}A.prototype.content=E;function z(te){var H=new Error(_.source+":"+k+":"+R+": "+te);if(H.reason=te,H.filename=_.source,H.line=k,H.column=R,H.source=E,!_.silent)throw H}function P(te){var H=te.exec(E);if(H){var $=H[0];return O($),E=E.slice($.length),H}}function j(){P(n)}function I(te){var H;for(te=te||[];H=F();)H!==!1&&te.push(H);return te}function F(){var te=L();if(!(d!=E.charAt(0)||m!=E.charAt(1))){for(var H=2;p!=E.charAt(H)&&(m!=E.charAt(H)||d!=E.charAt(H+1));)++H;if(H+=2,p===E.charAt(H-1))return z("End of comment missing");var $=E.slice(2,H-2);return R+=2,O($),E=E.slice(H),R+=2,te({type:g,comment:$})}}function G(){var te=L(),H=P(r);if(H){if(F(),!P(s))return z("property missing ':'");var $=P(a),W=te({type:y,property:w(H[0].replace(t,p)),value:$?w($[0].replace(t,p)):p});return P(l),W}}function J(){var te=[];I(te);for(var H;H=G();)H!==!1&&(te.push(H),I(te));return te}return j(),J()}function w(E){return E?E.replace(c,p):p}return ey=S,ey}var tE;function L9(){if(tE)return Xa;tE=1;var t=Xa&&Xa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.default=n;const e=t(z9());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),c=typeof s=="function";return l.forEach(f=>{if(f.type!=="declaration")return;const{property:d,value:m}=f;c?s(d,m,f):m&&(a=a||{},a[d]=m)}),a}return Xa}var Vl={},nE;function j9(){if(nE)return Vl;nE=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(d){return!d||n.test(d)||t.test(d)},l=function(d,m){return m.toUpperCase()},c=function(d,m){return"".concat(m,"-")},f=function(d,m){return m===void 0&&(m={}),a(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(s,c):d=d.replace(r,c),d.replace(e,l))};return Vl.camelCase=f,Vl}var ql,rE;function P9(){if(rE)return ql;rE=1;var t=ql&&ql.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(L9()),n=j9();function r(s,a){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(c,f){c&&f&&(l[(0,n.camelCase)(c,a)]=f)}),l}return r.default=r,ql=r,ql}var F9=P9();const $9=D0(F9),KT=GT("end"),Jv=GT("start");function GT(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function B9(t){const e=Jv(t),n=KT(t);if(e&&n)return{start:e,end:n}}function Cu(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?sE(t.position):"start"in t||"end"in t?sE(t):"line"in t||"column"in t?k0(t):""}function k0(t){return iE(t&&t.line)+":"+iE(t&&t.column)}function sE(t){return k0(t&&t.start)+"-"+k0(t&&t.end)}function iE(t){return t&&typeof t=="number"?t:1}class yn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?s=e:!a.cause&&e&&(l=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?a.ruleId=r:(a.source=r.slice(0,f),a.ruleId=r.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const c=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=c?c.line:void 0,this.name=Cu(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}yn.prototype.file="";yn.prototype.name="";yn.prototype.reason="";yn.prototype.message="";yn.prototype.stack="";yn.prototype.column=void 0;yn.prototype.line=void 0;yn.prototype.ancestors=void 0;yn.prototype.cause=void 0;yn.prototype.fatal=void 0;yn.prototype.place=void 0;yn.prototype.ruleId=void 0;yn.prototype.source=void 0;const Wv={}.hasOwnProperty,U9=new Map,V9=/[A-Z]/g,q9=new Set(["table","tbody","thead","tfoot","tr"]),H9=new Set(["td","th"]),QT="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function K9(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=e7(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=X9(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Yv:N9,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=ZT(s,t,void 0);return a&&typeof a!="string"?a:s.create(t,s.Fragment,{children:a||void 0},void 0)}function ZT(t,e,n){if(e.type==="element")return G9(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Q9(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Y9(t,e,n);if(e.type==="mdxjsEsm")return Z9(t,e);if(e.type==="root")return J9(t,e,n);if(e.type==="text")return W9(t,e)}function G9(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Yv,t.schema=s),t.ancestors.push(e);const a=JT(t,e.tagName,!1),l=t7(t,e);let c=eb(t,e);return q9.has(e.tagName)&&(c=c.filter(function(f){return typeof f=="string"?!_9(f):!0})),YT(t,l,a,e),Xv(l,c),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function Q9(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Uu(t,e.position)}function Z9(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Uu(t,e.position)}function Y9(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=Yv,t.schema=s),t.ancestors.push(e);const a=e.name===null?t.Fragment:JT(t,e.name,!0),l=n7(t,e),c=eb(t,e);return YT(t,l,a,e),Xv(l,c),t.ancestors.pop(),t.schema=r,t.create(e,a,l,n)}function J9(t,e,n){const r={};return Xv(r,eb(t,e)),t.create(e,t.Fragment,r,n)}function W9(t,e){return e.value}function YT(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function Xv(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function X9(t,e,n){return r;function r(s,a,l,c){const d=Array.isArray(l.children)?n:e;return c?d(a,l,c):d(a,l)}}function e7(t,e){return n;function n(r,s,a,l){const c=Array.isArray(a.children),f=Jv(r);return e(s,a,l,c,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function t7(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&Wv.call(e.properties,s)){const a=r7(t,s,e.properties[s]);if(a){const[l,c]=a;t.tableCellAlignToStyle&&l==="align"&&typeof c=="string"&&H9.has(e.tagName)?r=c:n[l]=c}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function n7(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const c=l.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else Uu(t,e.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const c=r.value.data.estree.body[0];c.type,a=t.evaluater.evaluateExpression(c.expression)}else Uu(t,e.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function eb(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:U9;for(;++r<e.children.length;){const a=e.children[r];let l;if(t.passKeys){const f=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(f){const d=s.get(f)||0;l=f+"-"+d,s.set(f,d+1)}}const c=ZT(t,a,l);c!==void 0&&n.push(c)}return n}function r7(t,e,n){const r=M9(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?v9(n):D9(n)),r.property==="style"){let s=typeof n=="object"?n:s7(t,String(n));return t.stylePropertyNameCase==="css"&&(s=i7(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?R9[r.property]||r.property:r.attribute,n]}}function s7(t,e){try{return $9(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new yn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=QT+"#cannot-parse-style-attribute",s}}function JT(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let a=-1,l;for(;++a<s.length;){const c=YC(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};l=l?{type:"MemberExpression",object:l,property:c,computed:!!(a&&c.type==="Literal"),optional:!1}:c}r=l}else r=YC(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return Wv.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);Uu(t)}function Uu(t,e){const n=new yn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=QT+"#cannot-handle-mdx-estrees-without-createevaluater",n}function i7(t){const e={};let n;for(n in t)Wv.call(t,n)&&(e[a7(n)]=t[n]);return e}function a7(t){let e=t.replace(V9,o7);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function o7(t){return"-"+t.toLowerCase()}const ty={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},l7={};function tb(t,e){const n=l7,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return WT(t,r,s)}function WT(t,e,n){if(u7(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return aE(t.children,e,n)}return Array.isArray(t)?aE(t,e,n):""}function aE(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=WT(t[s],e,n);return r.join("")}function u7(t){return!!(t&&typeof t=="object")}const oE=document.createElement("i");function nb(t){const e="&"+t+";";oE.innerHTML=e;const n=oE.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function nr(t,e,n,r){const s=t.length;let a=0,l;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(e,n),t.splice(...l);else for(n&&t.splice(e,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(e,0),t.splice(...l),a+=1e4,e+=1e4}function Sr(t,e){return t.length>0?(nr(t,t.length,0,e),t):e}const lE={}.hasOwnProperty;function XT(t){const e={};let n=-1;for(;++n<t.length;)c7(e,t[n]);return e}function c7(t,e){let n;for(n in e){const s=(lE.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let l;if(a)for(l in a){lE.call(s,l)||(s[l]=[]);const c=a[l];f7(s[l],Array.isArray(c)?c:c?[c]:[])}}}function f7(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);nr(t,0,0,r)}function eM(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function zr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const En=bi(/[A-Za-z]/),gn=bi(/[\dA-Za-z]/),d7=bi(/[#-'*+\--9=?A-Z^-~]/);function sh(t){return t!==null&&(t<32||t===127)}const R0=bi(/\d/),h7=bi(/[\dA-Fa-f]/),p7=bi(/[!-/:-@[-`{-~]/);function De(t){return t!==null&&t<-2}function Ct(t){return t!==null&&(t<0||t===32)}function et(t){return t===-2||t===-1||t===32}const jh=bi(new RegExp("\\p{P}|\\p{S}","u")),aa=bi(/\s/);function bi(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function $o(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const a=t.charCodeAt(n);let l="";if(a===37&&gn(t.charCodeAt(n+1))&&gn(t.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const c=t.charCodeAt(n+1);a<56320&&c>56319&&c<57344?(l=String.fromCharCode(a,c),s=1):l=""}else l=String.fromCharCode(a);l&&(e.push(t.slice(r,n),encodeURIComponent(l)),r=n+s+1,l=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function ot(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(f){return et(f)?(t.enter(n),c(f)):e(f)}function c(f){return et(f)&&a++<s?(t.consume(f),c):(t.exit(n),e(f))}}const m7={tokenize:g7};function g7(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),ot(t,e,"linePrefix")}function s(c){return t.enter("paragraph"),a(c)}function a(c){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,l(c)}function l(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return De(c)?(t.consume(c),t.exit("chunkText"),a):(t.consume(c),l)}}const y7={tokenize:v7},uE={tokenize:b7};function v7(t){const e=this,n=[];let r=0,s,a,l;return c;function c(R){if(r<n.length){const O=n[r];return e.containerState=O[1],t.attempt(O[0].continuation,f,d)(R)}return d(R)}function f(R){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&k();const O=e.events.length;let L=O,A;for(;L--;)if(e.events[L][0]==="exit"&&e.events[L][1].type==="chunkFlow"){A=e.events[L][1].end;break}_(r);let z=O;for(;z<e.events.length;)e.events[z][1].end={...A},z++;return nr(e.events,L+1,0,e.events.slice(O)),e.events.length=z,d(R)}return c(R)}function d(R){if(r===n.length){if(!s)return g(R);if(s.currentConstruct&&s.currentConstruct.concrete)return S(R);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(uE,m,p)(R)}function m(R){return s&&k(),_(r),g(R)}function p(R){return e.parser.lazy[e.now().line]=r!==n.length,l=e.now().offset,S(R)}function g(R){return e.containerState={},t.attempt(uE,y,S)(R)}function y(R){return r++,n.push([e.currentConstruct,e.containerState]),g(R)}function S(R){if(R===null){s&&k(),_(0),t.consume(R);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),w(R)}function w(R){if(R===null){E(t.exit("chunkFlow"),!0),_(0),t.consume(R);return}return De(R)?(t.consume(R),E(t.exit("chunkFlow")),r=0,e.interrupt=void 0,c):(t.consume(R),w)}function E(R,O){const L=e.sliceStream(R);if(O&&L.push(null),R.previous=a,a&&(a.next=R),a=R,s.defineSkip(R.start),s.write(L),e.parser.lazy[R.start.line]){let A=s.events.length;for(;A--;)if(s.events[A][1].start.offset<l&&(!s.events[A][1].end||s.events[A][1].end.offset>l))return;const z=e.events.length;let P=z,j,I;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type==="chunkFlow"){if(j){I=e.events[P][1].end;break}j=!0}for(_(r),A=z;A<e.events.length;)e.events[A][1].end={...I},A++;nr(e.events,P+1,0,e.events.slice(z)),e.events.length=A}}function _(R){let O=n.length;for(;O-- >R;){const L=n[O];e.containerState=L[1],L[0].exit.call(e,t)}n.length=R}function k(){s.write([null]),a=void 0,s=void 0,e.containerState._closeFlow=void 0}}function b7(t,e,n){return ot(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ro(t){if(t===null||Ct(t)||aa(t))return 1;if(jh(t))return 2}function Ph(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const a=t[s].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const A0={name:"attention",resolveAll:S7,tokenize:w7};function S7(t,e){let n=-1,r,s,a,l,c,f,d,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},g={...t[n][1].start};cE(p,-f),cE(g,f),l={type:f>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},a={type:f>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:f>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},t[r][1].end={...l.start},t[n][1].start={...c.end},d=[],t[r][1].end.offset-t[r][1].start.offset&&(d=Sr(d,[["enter",t[r][1],e],["exit",t[r][1],e]])),d=Sr(d,[["enter",s,e],["enter",l,e],["exit",l,e],["enter",a,e]]),d=Sr(d,Ph(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),d=Sr(d,[["exit",a,e],["enter",c,e],["exit",c,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,d=Sr(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,nr(t,r-1,n-r+3,d),n=r+d.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function w7(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Ro(r);let a;return l;function l(f){return a=f,t.enter("attentionSequence"),c(f)}function c(f){if(f===a)return t.consume(f),c;const d=t.exit("attentionSequence"),m=Ro(f),p=!m||m===2&&s||n.includes(f),g=!s||s===2&&m||n.includes(r);return d._open=!!(a===42?p:p&&(s||!g)),d._close=!!(a===42?g:g&&(m||!p)),e(f)}}function cE(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const x7={name:"autolink",tokenize:_7};function _7(t,e,n){let r=0;return s;function s(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(y){return En(y)?(t.consume(y),l):y===64?n(y):d(y)}function l(y){return y===43||y===45||y===46||gn(y)?(r=1,c(y)):d(y)}function c(y){return y===58?(t.consume(y),r=0,f):(y===43||y===45||y===46||gn(y))&&r++<32?(t.consume(y),c):(r=0,d(y))}function f(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||sh(y)?n(y):(t.consume(y),f)}function d(y){return y===64?(t.consume(y),m):d7(y)?(t.consume(y),d):n(y)}function m(y){return gn(y)?p(y):n(y)}function p(y){return y===46?(t.consume(y),r=0,m):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):g(y)}function g(y){if((y===45||gn(y))&&r++<63){const S=y===45?g:p;return t.consume(y),S}return n(y)}}const tc={partial:!0,tokenize:C7};function C7(t,e,n){return r;function r(a){return et(a)?ot(t,s,"linePrefix")(a):s(a)}function s(a){return a===null||De(a)?e(a):n(a)}}const tM={continuation:{tokenize:k7},exit:R7,name:"blockQuote",tokenize:E7};function E7(t,e,n){const r=this;return s;function s(l){if(l===62){const c=r.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return n(l)}function a(l){return et(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(l))}}function k7(t,e,n){const r=this;return s;function s(l){return et(l)?ot(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(tM,e,n)(l)}}function R7(t){t.exit("blockQuote")}const nM={name:"characterEscape",tokenize:A7};function A7(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),s}function s(a){return p7(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const rM={name:"characterReference",tokenize:T7};function T7(t,e,n){const r=this;let s=0,a,l;return c;function c(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),f}function f(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),a=31,l=gn,m(p))}function d(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=h7,m):(t.enter("characterReferenceValue"),a=7,l=R0,m(p))}function m(p){if(p===59&&s){const g=t.exit("characterReferenceValue");return l===gn&&!nb(r.sliceSerialize(g))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return l(p)&&s++<a?(t.consume(p),m):n(p)}}const fE={partial:!0,tokenize:O7},dE={concrete:!0,name:"codeFenced",tokenize:M7};function M7(t,e,n){const r=this,s={partial:!0,tokenize:L};let a=0,l=0,c;return f;function f(A){return d(A)}function d(A){const z=r.events[r.events.length-1];return a=z&&z[1].type==="linePrefix"?z[2].sliceSerialize(z[1],!0).length:0,c=A,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(A)}function m(A){return A===c?(l++,t.consume(A),m):l<3?n(A):(t.exit("codeFencedFenceSequence"),et(A)?ot(t,p,"whitespace")(A):p(A))}function p(A){return A===null||De(A)?(t.exit("codeFencedFence"),r.interrupt?e(A):t.check(fE,w,O)(A)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(A))}function g(A){return A===null||De(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(A)):et(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),ot(t,y,"whitespace")(A)):A===96&&A===c?n(A):(t.consume(A),g)}function y(A){return A===null||De(A)?p(A):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),S(A))}function S(A){return A===null||De(A)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(A)):A===96&&A===c?n(A):(t.consume(A),S)}function w(A){return t.attempt(s,O,E)(A)}function E(A){return t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),_}function _(A){return a>0&&et(A)?ot(t,k,"linePrefix",a+1)(A):k(A)}function k(A){return A===null||De(A)?t.check(fE,w,O)(A):(t.enter("codeFlowValue"),R(A))}function R(A){return A===null||De(A)?(t.exit("codeFlowValue"),k(A)):(t.consume(A),R)}function O(A){return t.exit("codeFenced"),e(A)}function L(A,z,P){let j=0;return I;function I(H){return A.enter("lineEnding"),A.consume(H),A.exit("lineEnding"),F}function F(H){return A.enter("codeFencedFence"),et(H)?ot(A,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):G(H)}function G(H){return H===c?(A.enter("codeFencedFenceSequence"),J(H)):P(H)}function J(H){return H===c?(j++,A.consume(H),J):j>=l?(A.exit("codeFencedFenceSequence"),et(H)?ot(A,te,"whitespace")(H):te(H)):P(H)}function te(H){return H===null||De(H)?(A.exit("codeFencedFence"),z(H)):P(H)}}}function O7(t,e,n){const r=this;return s;function s(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}const ny={name:"codeIndented",tokenize:N7},I7={partial:!0,tokenize:D7};function N7(t,e,n){const r=this;return s;function s(d){return t.enter("codeIndented"),ot(t,a,"linePrefix",5)(d)}function a(d){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?l(d):n(d)}function l(d){return d===null?f(d):De(d)?t.attempt(I7,l,f)(d):(t.enter("codeFlowValue"),c(d))}function c(d){return d===null||De(d)?(t.exit("codeFlowValue"),l(d)):(t.consume(d),c)}function f(d){return t.exit("codeIndented"),e(d)}}function D7(t,e,n){const r=this;return s;function s(l){return r.parser.lazy[r.now().line]?n(l):De(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),s):ot(t,a,"linePrefix",5)(l)}function a(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):De(l)?s(l):n(l)}}const z7={name:"codeText",previous:j7,resolve:L7,tokenize:P7};function L7(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function j7(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function P7(t,e,n){let r=0,s,a;return l;function l(p){return t.enter("codeText"),t.enter("codeTextSequence"),c(p)}function c(p){return p===96?(t.consume(p),r++,c):(t.exit("codeTextSequence"),f(p))}function f(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),f):p===96?(a=t.enter("codeTextSequence"),s=0,m(p)):De(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),f):(t.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||De(p)?(t.exit("codeTextData"),f(p)):(t.consume(p),d)}function m(p){return p===96?(t.consume(p),s++,m):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(a.type="codeTextData",d(p))}}class F7{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Hl(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Hl(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Hl(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Hl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Hl(this.left,n.reverse())}}}function Hl(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function sM(t){const e={};let n=-1,r,s,a,l,c,f,d;const m=new F7(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,$7(m,n)),n=e[n],d=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(l=m.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(r[1].end={...m.get(s)[1].start},c=m.slice(s,n),c.unshift(r),m.splice(s,n-s+1,c))}}return nr(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function $7(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,f=[],d={};let m,p,g=-1,y=n,S=0,w=0;const E=[w];for(;y;){for(;t.get(++s)[1]!==y;);a.push(s),y._tokenizer||(m=r.sliceStream(y),y.next||m.push(null),p&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(m),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++g<c.length;)c[g][0]==="exit"&&c[g-1][0]==="enter"&&c[g][1].type===c[g-1][1].type&&c[g][1].start.line!==c[g][1].end.line&&(w=g+1,E.push(w),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):E.pop(),g=E.length;g--;){const _=c.slice(E[g],E[g+1]),k=a.pop();f.push([k,k+_.length-1]),t.splice(k,2,_)}for(f.reverse(),g=-1;++g<f.length;)d[S+f[g][0]]=S+f[g][1],S+=f[g][1]-f[g][0]-1;return d}const B7={resolve:V7,tokenize:q7},U7={partial:!0,tokenize:H7};function V7(t){return sM(t),t}function q7(t,e){let n;return r;function r(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(c)}function s(c){return c===null?a(c):De(c)?t.check(U7,l,a)(c):(t.consume(c),s)}function a(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function l(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function H7(t,e,n){const r=this;return s;function s(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),ot(t,a,"linePrefix")}function a(l){if(l===null||De(l))return n(l);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(l):t.interrupt(r.parser.constructs.flow,n,e)(l)}}function iM(t,e,n,r,s,a,l,c,f){const d=f||Number.POSITIVE_INFINITY;let m=0;return p;function p(_){return _===60?(t.enter(r),t.enter(s),t.enter(a),t.consume(_),t.exit(a),g):_===null||_===32||_===41||sh(_)?n(_):(t.enter(r),t.enter(l),t.enter(c),t.enter("chunkString",{contentType:"string"}),w(_))}function g(_){return _===62?(t.enter(a),t.consume(_),t.exit(a),t.exit(s),t.exit(r),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),y(_))}function y(_){return _===62?(t.exit("chunkString"),t.exit(c),g(_)):_===null||_===60||De(_)?n(_):(t.consume(_),_===92?S:y)}function S(_){return _===60||_===62||_===92?(t.consume(_),y):y(_)}function w(_){return!m&&(_===null||_===41||Ct(_))?(t.exit("chunkString"),t.exit(c),t.exit(l),t.exit(r),e(_)):m<d&&_===40?(t.consume(_),m++,w):_===41?(t.consume(_),m--,w):_===null||_===32||_===40||sh(_)?n(_):(t.consume(_),_===92?E:w)}function E(_){return _===40||_===41||_===92?(t.consume(_),w):w(_)}}function aM(t,e,n,r,s,a){const l=this;let c=0,f;return d;function d(y){return t.enter(r),t.enter(s),t.consume(y),t.exit(s),t.enter(a),m}function m(y){return c>999||y===null||y===91||y===93&&!f||y===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?n(y):y===93?(t.exit(a),t.enter(s),t.consume(y),t.exit(s),t.exit(r),e):De(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||De(y)||c++>999?(t.exit("chunkString"),m(y)):(t.consume(y),f||(f=!et(y)),y===92?g:p)}function g(y){return y===91||y===92||y===93?(t.consume(y),c++,p):p(y)}}function oM(t,e,n,r,s,a){let l;return c;function c(g){return g===34||g===39||g===40?(t.enter(r),t.enter(s),t.consume(g),t.exit(s),l=g===40?41:g,f):n(g)}function f(g){return g===l?(t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):(t.enter(a),d(g))}function d(g){return g===l?(t.exit(a),f(l)):g===null?n(g):De(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),ot(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===l||g===null||De(g)?(t.exit("chunkString"),d(g)):(t.consume(g),g===92?p:m)}function p(g){return g===l||g===92?(t.consume(g),m):m(g)}}function Eu(t,e){let n;return r;function r(s){return De(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):et(s)?ot(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const K7={name:"definition",tokenize:Q7},G7={partial:!0,tokenize:Z7};function Q7(t,e,n){const r=this;let s;return a;function a(y){return t.enter("definition"),l(y)}function l(y){return aM.call(r,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function c(y){return s=zr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),f):n(y)}function f(y){return Ct(y)?Eu(t,d)(y):d(y)}function d(y){return iM(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function m(y){return t.attempt(G7,p,p)(y)}function p(y){return et(y)?ot(t,g,"whitespace")(y):g(y)}function g(y){return y===null||De(y)?(t.exit("definition"),r.parser.defined.push(s),e(y)):n(y)}}function Z7(t,e,n){return r;function r(c){return Ct(c)?Eu(t,s)(c):n(c)}function s(c){return oM(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function a(c){return et(c)?ot(t,l,"whitespace")(c):l(c)}function l(c){return c===null||De(c)?e(c):n(c)}}const Y7={name:"hardBreakEscape",tokenize:J7};function J7(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),s}function s(a){return De(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const W7={name:"headingAtx",resolve:X7,tokenize:eH};function X7(t,e){let n=t.length-2,r=3,s,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},nr(t,r,n-r+1,[["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e]])),t}function eH(t,e,n){let r=0;return s;function s(m){return t.enter("atxHeading"),a(m)}function a(m){return t.enter("atxHeadingSequence"),l(m)}function l(m){return m===35&&r++<6?(t.consume(m),l):m===null||Ct(m)?(t.exit("atxHeadingSequence"),c(m)):n(m)}function c(m){return m===35?(t.enter("atxHeadingSequence"),f(m)):m===null||De(m)?(t.exit("atxHeading"),e(m)):et(m)?ot(t,c,"whitespace")(m):(t.enter("atxHeadingText"),d(m))}function f(m){return m===35?(t.consume(m),f):(t.exit("atxHeadingSequence"),c(m))}function d(m){return m===null||m===35||Ct(m)?(t.exit("atxHeadingText"),c(m)):(t.consume(m),d)}}const tH=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],hE=["pre","script","style","textarea"],nH={concrete:!0,name:"htmlFlow",resolveTo:iH,tokenize:aH},rH={partial:!0,tokenize:lH},sH={partial:!0,tokenize:oH};function iH(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function aH(t,e,n){const r=this;let s,a,l,c,f;return d;function d(M){return m(M)}function m(M){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(M),p}function p(M){return M===33?(t.consume(M),g):M===47?(t.consume(M),a=!0,w):M===63?(t.consume(M),s=3,r.interrupt?e:N):En(M)?(t.consume(M),l=String.fromCharCode(M),E):n(M)}function g(M){return M===45?(t.consume(M),s=2,y):M===91?(t.consume(M),s=5,c=0,S):En(M)?(t.consume(M),s=4,r.interrupt?e:N):n(M)}function y(M){return M===45?(t.consume(M),r.interrupt?e:N):n(M)}function S(M){const se="CDATA[";return M===se.charCodeAt(c++)?(t.consume(M),c===se.length?r.interrupt?e:G:S):n(M)}function w(M){return En(M)?(t.consume(M),l=String.fromCharCode(M),E):n(M)}function E(M){if(M===null||M===47||M===62||Ct(M)){const se=M===47,ce=l.toLowerCase();return!se&&!a&&hE.includes(ce)?(s=1,r.interrupt?e(M):G(M)):tH.includes(l.toLowerCase())?(s=6,se?(t.consume(M),_):r.interrupt?e(M):G(M)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(M):a?k(M):R(M))}return M===45||gn(M)?(t.consume(M),l+=String.fromCharCode(M),E):n(M)}function _(M){return M===62?(t.consume(M),r.interrupt?e:G):n(M)}function k(M){return et(M)?(t.consume(M),k):I(M)}function R(M){return M===47?(t.consume(M),I):M===58||M===95||En(M)?(t.consume(M),O):et(M)?(t.consume(M),R):I(M)}function O(M){return M===45||M===46||M===58||M===95||gn(M)?(t.consume(M),O):L(M)}function L(M){return M===61?(t.consume(M),A):et(M)?(t.consume(M),L):R(M)}function A(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(t.consume(M),f=M,z):et(M)?(t.consume(M),A):P(M)}function z(M){return M===f?(t.consume(M),f=null,j):M===null||De(M)?n(M):(t.consume(M),z)}function P(M){return M===null||M===34||M===39||M===47||M===60||M===61||M===62||M===96||Ct(M)?L(M):(t.consume(M),P)}function j(M){return M===47||M===62||et(M)?R(M):n(M)}function I(M){return M===62?(t.consume(M),F):n(M)}function F(M){return M===null||De(M)?G(M):et(M)?(t.consume(M),F):n(M)}function G(M){return M===45&&s===2?(t.consume(M),$):M===60&&s===1?(t.consume(M),W):M===62&&s===4?(t.consume(M),D):M===63&&s===3?(t.consume(M),N):M===93&&s===5?(t.consume(M),Q):De(M)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(rH,q,J)(M)):M===null||De(M)?(t.exit("htmlFlowData"),J(M)):(t.consume(M),G)}function J(M){return t.check(sH,te,q)(M)}function te(M){return t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),H}function H(M){return M===null||De(M)?J(M):(t.enter("htmlFlowData"),G(M))}function $(M){return M===45?(t.consume(M),N):G(M)}function W(M){return M===47?(t.consume(M),l="",oe):G(M)}function oe(M){if(M===62){const se=l.toLowerCase();return hE.includes(se)?(t.consume(M),D):G(M)}return En(M)&&l.length<8?(t.consume(M),l+=String.fromCharCode(M),oe):G(M)}function Q(M){return M===93?(t.consume(M),N):G(M)}function N(M){return M===62?(t.consume(M),D):M===45&&s===2?(t.consume(M),N):G(M)}function D(M){return M===null||De(M)?(t.exit("htmlFlowData"),q(M)):(t.consume(M),D)}function q(M){return t.exit("htmlFlow"),e(M)}}function oH(t,e,n){const r=this;return s;function s(l){return De(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):e(l)}}function lH(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(tc,e,n)}}const uH={name:"htmlText",tokenize:cH};function cH(t,e,n){const r=this;let s,a,l;return c;function c(N){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(N),f}function f(N){return N===33?(t.consume(N),d):N===47?(t.consume(N),L):N===63?(t.consume(N),R):En(N)?(t.consume(N),P):n(N)}function d(N){return N===45?(t.consume(N),m):N===91?(t.consume(N),a=0,S):En(N)?(t.consume(N),k):n(N)}function m(N){return N===45?(t.consume(N),y):n(N)}function p(N){return N===null?n(N):N===45?(t.consume(N),g):De(N)?(l=p,W(N)):(t.consume(N),p)}function g(N){return N===45?(t.consume(N),y):p(N)}function y(N){return N===62?$(N):N===45?g(N):p(N)}function S(N){const D="CDATA[";return N===D.charCodeAt(a++)?(t.consume(N),a===D.length?w:S):n(N)}function w(N){return N===null?n(N):N===93?(t.consume(N),E):De(N)?(l=w,W(N)):(t.consume(N),w)}function E(N){return N===93?(t.consume(N),_):w(N)}function _(N){return N===62?$(N):N===93?(t.consume(N),_):w(N)}function k(N){return N===null||N===62?$(N):De(N)?(l=k,W(N)):(t.consume(N),k)}function R(N){return N===null?n(N):N===63?(t.consume(N),O):De(N)?(l=R,W(N)):(t.consume(N),R)}function O(N){return N===62?$(N):R(N)}function L(N){return En(N)?(t.consume(N),A):n(N)}function A(N){return N===45||gn(N)?(t.consume(N),A):z(N)}function z(N){return De(N)?(l=z,W(N)):et(N)?(t.consume(N),z):$(N)}function P(N){return N===45||gn(N)?(t.consume(N),P):N===47||N===62||Ct(N)?j(N):n(N)}function j(N){return N===47?(t.consume(N),$):N===58||N===95||En(N)?(t.consume(N),I):De(N)?(l=j,W(N)):et(N)?(t.consume(N),j):$(N)}function I(N){return N===45||N===46||N===58||N===95||gn(N)?(t.consume(N),I):F(N)}function F(N){return N===61?(t.consume(N),G):De(N)?(l=F,W(N)):et(N)?(t.consume(N),F):j(N)}function G(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(t.consume(N),s=N,J):De(N)?(l=G,W(N)):et(N)?(t.consume(N),G):(t.consume(N),te)}function J(N){return N===s?(t.consume(N),s=void 0,H):N===null?n(N):De(N)?(l=J,W(N)):(t.consume(N),J)}function te(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||Ct(N)?j(N):(t.consume(N),te)}function H(N){return N===47||N===62||Ct(N)?j(N):n(N)}function $(N){return N===62?(t.consume(N),t.exit("htmlTextData"),t.exit("htmlText"),e):n(N)}function W(N){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),oe}function oe(N){return et(N)?ot(t,Q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):Q(N)}function Q(N){return t.enter("htmlTextData"),l(N)}}const rb={name:"labelEnd",resolveAll:pH,resolveTo:mH,tokenize:gH},fH={tokenize:yH},dH={tokenize:vH},hH={tokenize:bH};function pH(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&nr(t,0,t.length,n),t}function mH(t,e){let n=t.length,r=0,s,a,l,c;for(;n--;)if(s=t[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(l=n);const f={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},m={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return c=[["enter",f,e],["enter",d,e]],c=Sr(c,t.slice(a+1,a+r+3)),c=Sr(c,[["enter",m,e]]),c=Sr(c,Ph(e.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),e)),c=Sr(c,[["exit",m,e],t[l-2],t[l-1],["exit",d,e]]),c=Sr(c,t.slice(l+1)),c=Sr(c,[["exit",f,e]]),nr(t,a,t.length,c),t}function gH(t,e,n){const r=this;let s=r.events.length,a,l;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return c;function c(g){return a?a._inactive?p(g):(l=r.parser.defined.includes(zr(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),f):n(g)}function f(g){return g===40?t.attempt(fH,m,l?m:p)(g):g===91?t.attempt(dH,m,l?d:p)(g):l?m(g):p(g)}function d(g){return t.attempt(hH,m,p)(g)}function m(g){return e(g)}function p(g){return a._balanced=!0,n(g)}}function yH(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),s}function s(p){return Ct(p)?Eu(t,a)(p):a(p)}function a(p){return p===41?m(p):iM(t,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return Ct(p)?Eu(t,f)(p):m(p)}function c(p){return n(p)}function f(p){return p===34||p===39||p===40?oM(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):m(p)}function d(p){return Ct(p)?Eu(t,m)(p):m(p)}function m(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function vH(t,e,n){const r=this;return s;function s(c){return aM.call(r,t,a,l,"reference","referenceMarker","referenceString")(c)}function a(c){return r.parser.defined.includes(zr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function l(c){return n(c)}}function bH(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),s}function s(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const SH={name:"labelStartImage",resolveAll:rb.resolveAll,tokenize:wH};function wH(t,e,n){const r=this;return s;function s(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),a}function a(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),l):n(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):e(c)}}const xH={name:"labelStartLink",resolveAll:rb.resolveAll,tokenize:_H};function _H(t,e,n){const r=this;return s;function s(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const ry={name:"lineEnding",tokenize:CH};function CH(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),ot(t,e,"linePrefix")}}const Sd={name:"thematicBreak",tokenize:EH};function EH(t,e,n){let r=0,s;return a;function a(d){return t.enter("thematicBreak"),l(d)}function l(d){return s=d,c(d)}function c(d){return d===s?(t.enter("thematicBreakSequence"),f(d)):r>=3&&(d===null||De(d))?(t.exit("thematicBreak"),e(d)):n(d)}function f(d){return d===s?(t.consume(d),r++,f):(t.exit("thematicBreakSequence"),et(d)?ot(t,c,"whitespace")(d):c(d))}}const zn={continuation:{tokenize:TH},exit:OH,name:"list",tokenize:AH},kH={partial:!0,tokenize:IH},RH={partial:!0,tokenize:MH};function AH(t,e,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return c;function c(y){const S=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:R0(y)){if(r.containerState.type||(r.containerState.type=S,t.enter(S,{_container:!0})),S==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(Sd,n,d)(y):d(y);if(!r.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(y)}return n(y)}function f(y){return R0(y)&&++l<10?(t.consume(y),f):(!r.interrupt||l<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),d(y)):n(y)}function d(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,t.check(tc,r.interrupt?n:m,t.attempt(kH,g,p))}function m(y){return r.containerState.initialBlankLine=!0,a++,g(y)}function p(y){return et(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),g):n(y)}function g(y){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function TH(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(tc,s,a);function s(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ot(t,e,"listItemIndent",r.containerState.size+1)(c)}function a(c){return r.containerState.furtherBlankLines||!et(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(RH,e,l)(c))}function l(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,ot(t,t.attempt(zn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function MH(t,e,n){const r=this;return ot(t,s,"listItemIndent",r.containerState.size+1);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?e(a):n(a)}}function OH(t){t.exit(this.containerState.type)}function IH(t,e,n){const r=this;return ot(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const l=r.events[r.events.length-1];return!et(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const pE={name:"setextUnderline",resolveTo:NH,tokenize:DH};function NH(t,e){let n=t.length,r,s,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",a?(t.splice(s,0,["enter",l,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,e]),t}function DH(t,e,n){const r=this;let s;return a;function a(d){let m=r.events.length,p;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){p=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),s=d,l(d)):n(d)}function l(d){return t.enter("setextHeadingLineSequence"),c(d)}function c(d){return d===s?(t.consume(d),c):(t.exit("setextHeadingLineSequence"),et(d)?ot(t,f,"lineSuffix")(d):f(d))}function f(d){return d===null||De(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const zH={tokenize:LH};function LH(t){const e=this,n=t.attempt(tc,r,t.attempt(this.parser.constructs.flowInitial,s,ot(t,t.attempt(this.parser.constructs.flow,s,t.attempt(B7,s)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const jH={resolveAll:uM()},PH=lM("string"),FH=lM("text");function lM(t){return{resolveAll:uM(t==="text"?$H:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],a=n.attempt(s,l,c);return l;function l(m){return d(m)?a(m):c(m)}function c(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),f}function f(m){return d(m)?(n.exit("data"),a(m)):(n.consume(m),f)}function d(m){if(m===null)return!0;const p=s[m];let g=-1;if(p)for(;++g<p.length;){const y=p[g];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function uM(t){return e;function e(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return t?t(n,r):n}}function $H(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let a=s.length,l=-1,c=0,f;for(;a--;){const d=s[a];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(d===-2)f=!0,c++;else if(d!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const d={type:n===t.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const BH={42:zn,43:zn,45:zn,48:zn,49:zn,50:zn,51:zn,52:zn,53:zn,54:zn,55:zn,56:zn,57:zn,62:tM},UH={91:K7},VH={[-2]:ny,[-1]:ny,32:ny},qH={35:W7,42:Sd,45:[pE,Sd],60:nH,61:pE,95:Sd,96:dE,126:dE},HH={38:rM,92:nM},KH={[-5]:ry,[-4]:ry,[-3]:ry,33:SH,38:rM,42:A0,60:[x7,uH],91:xH,92:[Y7,nM],93:rb,95:A0,96:z7},GH={null:[A0,jH]},QH={null:[42,95]},ZH={null:[]},YH=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:QH,contentInitial:UH,disable:ZH,document:BH,flow:qH,flowInitial:VH,insideSpan:GH,string:HH,text:KH},Symbol.toStringTag,{value:"Module"}));function JH(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let l=[],c=[];const f={attempt:z(L),check:z(A),consume:k,enter:R,exit:O,interrupt:z(A,{interrupt:!0})},d={code:null,containerState:{},defineSkip:w,events:[],now:S,parser:t,previous:null,sliceSerialize:g,sliceStream:y,write:p};let m=e.tokenize.call(d,f);return e.resolveAll&&a.push(e),d;function p(F){return l=Sr(l,F),E(),l[l.length-1]!==null?[]:(P(e,0),d.events=Ph(a,d.events,d),d.events)}function g(F,G){return XH(y(F),G)}function y(F){return WH(l,F)}function S(){const{_bufferIndex:F,_index:G,line:J,column:te,offset:H}=r;return{_bufferIndex:F,_index:G,line:J,column:te,offset:H}}function w(F){s[F.line]=F.column,I()}function E(){let F;for(;r._index<l.length;){const G=l[r._index];if(typeof G=="string")for(F=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===F&&r._bufferIndex<G.length;)_(G.charCodeAt(r._bufferIndex));else _(G)}}function _(F){m=m(F)}function k(F){De(F)?(r.line++,r.column=1,r.offset+=F===-3?2:1,I()):F!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=F}function R(F,G){const J=G||{};return J.type=F,J.start=S(),d.events.push(["enter",J,d]),c.push(J),J}function O(F){const G=c.pop();return G.end=S(),d.events.push(["exit",G,d]),G}function L(F,G){P(F,G.from)}function A(F,G){G.restore()}function z(F,G){return J;function J(te,H,$){let W,oe,Q,N;return Array.isArray(te)?q(te):"tokenize"in te?q([te]):D(te);function D(he){return ve;function ve(Ae){const _e=Ae!==null&&he[Ae],pe=Ae!==null&&he.null,Ee=[...Array.isArray(_e)?_e:_e?[_e]:[],...Array.isArray(pe)?pe:pe?[pe]:[]];return q(Ee)(Ae)}}function q(he){return W=he,oe=0,he.length===0?$:M(he[oe])}function M(he){return ve;function ve(Ae){return N=j(),Q=he,he.partial||(d.currentConstruct=he),he.name&&d.parser.constructs.disable.null.includes(he.name)?ce():he.tokenize.call(G?Object.assign(Object.create(d),G):d,f,se,ce)(Ae)}}function se(he){return F(Q,N),H}function ce(he){return N.restore(),++oe<W.length?M(W[oe]):$}}}function P(F,G){F.resolveAll&&!a.includes(F)&&a.push(F),F.resolve&&nr(d.events,G,d.events.length-G,F.resolve(d.events.slice(G),d)),F.resolveTo&&(d.events=F.resolveTo(d.events,d))}function j(){const F=S(),G=d.previous,J=d.currentConstruct,te=d.events.length,H=Array.from(c);return{from:te,restore:$};function $(){r=F,d.previous=G,d.currentConstruct=J,d.events.length=te,c=H,I()}}function I(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function WH(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,a=e.end._bufferIndex;let l;if(n===s)l=[t[n].slice(r,a)];else{if(l=t.slice(n,s),r>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(r):l.shift()}a>0&&l.push(t[s].slice(0,a))}return l}function XH(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const a=t[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&s)continue;l=" ";break}default:l=String.fromCharCode(a)}s=a===-2,r.push(l)}return r.join("")}function eK(t){const r={constructs:XT([YH,...(t||{}).extensions||[]]),content:s(m7),defined:[],document:s(y7),flow:s(zH),lazy:{},string:s(PH),text:s(FH)};return r;function s(a){return l;function l(c){return JH(r,a,c)}}}function tK(t){for(;!sM(t););return t}const mE=/[\0\t\n\r]/g;function nK(){let t=1,e="",n=!0,r;return s;function s(a,l,c){const f=[];let d,m,p,g,y;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),p=0,e="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(mE.lastIndex=p,d=mE.exec(a),g=d&&d.index!==void 0?d.index:a.length,y=a.charCodeAt(g),!d){e=a.slice(p);break}if(y===10&&p===g&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),p<g&&(f.push(a.slice(p,g)),t+=g-p),y){case 0:{f.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,f.push(-2);t++<m;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:r=!0,t=1}p=g+1}return c&&(r&&f.push(-5),e&&f.push(e),f.push(null)),f}}const rK=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function sK(t){return t.replace(rK,iK)}function iK(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return eM(n.slice(a?2:1),a?16:10)}return nb(n)||t}const cM={}.hasOwnProperty;function aK(t,e,n){return typeof e!="string"&&(n=e,e=void 0),oK(n)(tK(eK(n).document().write(nK()(t,e,!0))))}function oK(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(ht),autolinkProtocol:j,autolinkEmail:j,atxHeading:a(Ye),blockQuote:a(pe),characterEscape:j,characterReference:j,codeFenced:a(Ee),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(Ee,l),codeText:a(Me,l),codeTextData:j,data:j,codeFlowValue:j,definition:a(Ze),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(je),hardBreakEscape:a(st),hardBreakTrailing:a(st),htmlFlow:a(Je,l),htmlFlowData:j,htmlText:a(Je,l),htmlTextData:j,image:a(at),label:l,link:a(ht),listItem:a(ge),listItemValue:g,listOrdered:a(Oe,p),listUnordered:a(Oe),paragraph:a(Le),reference:M,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(Ye),strong:a(be),thematicBreak:a(Ve)},exit:{atxHeading:f(),atxHeadingSequence:L,autolink:f(),autolinkEmail:_e,autolinkProtocol:Ae,blockQuote:f(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:ce,characterReferenceMarkerNumeric:ce,characterReferenceValue:he,characterReference:ve,codeFenced:f(E),codeFencedFence:w,codeFencedFenceInfo:y,codeFencedFenceMeta:S,codeFlowValue:I,codeIndented:f(_),codeText:f(H),codeTextData:I,data:I,definition:f(),definitionDestinationString:O,definitionLabelString:k,definitionTitleString:R,emphasis:f(),hardBreakEscape:f(G),hardBreakTrailing:f(G),htmlFlow:f(J),htmlFlowData:I,htmlText:f(te),htmlTextData:I,image:f(W),label:Q,labelText:oe,lineEnding:F,link:f($),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:se,resourceDestinationString:N,resourceTitleString:D,resource:q,setextHeading:f(P),setextHeadingLineSequence:z,setextHeadingText:A,strong:f(),thematicBreak:f()}};fM(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ne){let fe={type:"root",children:[]};const Ce={stack:[fe],tokenStack:[],config:e,enter:c,exit:d,buffer:l,resume:m,data:n},ke=[];let Se=-1;for(;++Se<ne.length;)if(ne[Se][1].type==="listOrdered"||ne[Se][1].type==="listUnordered")if(ne[Se][0]==="enter")ke.push(Se);else{const Ue=ke.pop();Se=s(ne,Ue,Se)}for(Se=-1;++Se<ne.length;){const Ue=e[ne[Se][0]];cM.call(Ue,ne[Se][1].type)&&Ue[ne[Se][1].type].call(Object.assign({sliceSerialize:ne[Se][2].sliceSerialize},Ce),ne[Se][1])}if(Ce.tokenStack.length>0){const Ue=Ce.tokenStack[Ce.tokenStack.length-1];(Ue[1]||gE).call(Ce,void 0,Ue[0])}for(fe.position={start:ni(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:ni(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},Se=-1;++Se<e.transforms.length;)fe=e.transforms[Se](fe)||fe;return fe}function s(ne,fe,Ce){let ke=fe-1,Se=-1,Ue=!1,vt,ut,ct,Rn;for(;++ke<=Ce;){const xt=ne[ke];switch(xt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{xt[0]==="enter"?Se++:Se--,Rn=void 0;break}case"lineEndingBlank":{xt[0]==="enter"&&(vt&&!Rn&&!Se&&!ct&&(ct=ke),Rn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Rn=void 0}if(!Se&&xt[0]==="enter"&&xt[1].type==="listItemPrefix"||Se===-1&&xt[0]==="exit"&&(xt[1].type==="listUnordered"||xt[1].type==="listOrdered")){if(vt){let Rs=ke;for(ut=void 0;Rs--;){const kr=ne[Rs];if(kr[1].type==="lineEnding"||kr[1].type==="lineEndingBlank"){if(kr[0]==="exit")continue;ut&&(ne[ut][1].type="lineEndingBlank",Ue=!0),kr[1].type="lineEnding",ut=Rs}else if(!(kr[1].type==="linePrefix"||kr[1].type==="blockQuotePrefix"||kr[1].type==="blockQuotePrefixWhitespace"||kr[1].type==="blockQuoteMarker"||kr[1].type==="listItemIndent"))break}ct&&(!ut||ct<ut)&&(vt._spread=!0),vt.end=Object.assign({},ut?ne[ut][1].start:xt[1].end),ne.splice(ut||ke,0,["exit",vt,xt[2]]),ke++,Ce++}if(xt[1].type==="listItemPrefix"){const Rs={type:"listItem",_spread:!1,start:Object.assign({},xt[1].start),end:void 0};vt=Rs,ne.splice(ke,0,["enter",Rs,xt[2]]),ke++,Ce++,ct=void 0,Rn=!0}}}return ne[fe][1]._spread=Ue,Ce}function a(ne,fe){return Ce;function Ce(ke){c.call(this,ne(ke),ke),fe&&fe.call(this,ke)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(ne,fe,Ce){this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([fe,Ce||void 0]),ne.position={start:ni(fe.start),end:void 0}}function f(ne){return fe;function fe(Ce){ne&&ne.call(this,Ce),d.call(this,Ce)}}function d(ne,fe){const Ce=this.stack.pop(),ke=this.tokenStack.pop();if(ke)ke[0].type!==ne.type&&(fe?fe.call(this,ne,ke[0]):(ke[1]||gE).call(this,ne,ke[0]));else throw new Error("Cannot close `"+ne.type+"` ("+Cu({start:ne.start,end:ne.end})+"): its not open");Ce.position.end=ni(ne.end)}function m(){return tb(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function g(ne){if(this.data.expectingFirstListItemValue){const fe=this.stack[this.stack.length-2];fe.start=Number.parseInt(this.sliceSerialize(ne),10),this.data.expectingFirstListItemValue=void 0}}function y(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.lang=ne}function S(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.meta=ne}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne.replace(/(\r?\n|\r)$/g,"")}function k(ne){const fe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.label=fe,Ce.identifier=zr(this.sliceSerialize(ne)).toLowerCase()}function R(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.title=ne}function O(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.url=ne}function L(ne){const fe=this.stack[this.stack.length-1];if(!fe.depth){const Ce=this.sliceSerialize(ne).length;fe.depth=Ce}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function z(ne){const fe=this.stack[this.stack.length-1];fe.depth=this.sliceSerialize(ne).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function j(ne){const Ce=this.stack[this.stack.length-1].children;let ke=Ce[Ce.length-1];(!ke||ke.type!=="text")&&(ke=ye(),ke.position={start:ni(ne.start),end:void 0},Ce.push(ke)),this.stack.push(ke)}function I(ne){const fe=this.stack.pop();fe.value+=this.sliceSerialize(ne),fe.position.end=ni(ne.end)}function F(ne){const fe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ce=fe.children[fe.children.length-1];Ce.position.end=ni(ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(fe.type)&&(j.call(this,ne),I.call(this,ne))}function G(){this.data.atHardBreak=!0}function J(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne}function te(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne}function H(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne}function $(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const fe=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=fe,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function W(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const fe=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=fe,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function oe(ne){const fe=this.sliceSerialize(ne),Ce=this.stack[this.stack.length-2];Ce.label=sK(fe),Ce.identifier=zr(fe).toLowerCase()}function Q(){const ne=this.stack[this.stack.length-1],fe=this.resume(),Ce=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ce.type==="link"){const ke=ne.children;Ce.children=ke}else Ce.alt=fe}function N(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.url=ne}function D(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.title=ne}function q(){this.data.inReference=void 0}function M(){this.data.referenceType="collapsed"}function se(ne){const fe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.label=fe,Ce.identifier=zr(this.sliceSerialize(ne)).toLowerCase(),this.data.referenceType="full"}function ce(ne){this.data.characterReferenceType=ne.type}function he(ne){const fe=this.sliceSerialize(ne),Ce=this.data.characterReferenceType;let ke;Ce?(ke=eM(fe,Ce==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ke=nb(fe);const Se=this.stack[this.stack.length-1];Se.value+=ke}function ve(ne){const fe=this.stack.pop();fe.position.end=ni(ne.end)}function Ae(ne){I.call(this,ne);const fe=this.stack[this.stack.length-1];fe.url=this.sliceSerialize(ne)}function _e(ne){I.call(this,ne);const fe=this.stack[this.stack.length-1];fe.url="mailto:"+this.sliceSerialize(ne)}function pe(){return{type:"blockquote",children:[]}}function Ee(){return{type:"code",lang:null,meta:null,value:""}}function Me(){return{type:"inlineCode",value:""}}function Ze(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function je(){return{type:"emphasis",children:[]}}function Ye(){return{type:"heading",depth:0,children:[]}}function st(){return{type:"break"}}function Je(){return{type:"html",value:""}}function at(){return{type:"image",title:null,url:"",alt:null}}function ht(){return{type:"link",title:null,url:"",children:[]}}function Oe(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function ge(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function Le(){return{type:"paragraph",children:[]}}function be(){return{type:"strong",children:[]}}function ye(){return{type:"text",value:""}}function Ve(){return{type:"thematicBreak"}}}function ni(t){return{line:t.line,column:t.column,offset:t.offset}}function fM(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?fM(t,r):lK(t,r)}}function lK(t,e){let n;for(n in e)if(cM.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function gE(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Cu({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Cu({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Cu({start:e.start,end:e.end})+") is still open")}function uK(t){const e=this;e.parser=n;function n(r){return aK(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function cK(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function fK(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function dK(t,e){const n=e.value?e.value+`
`:"",r={},s=e.lang?e.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function hK(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pK(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function mK(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=$o(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,c=t.footnoteCounts.get(r);c===void 0?(c=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,c+=1,t.footnoteCounts.set(r,c);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(e,f);const d={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,d),t.applyData(e,d)}function gK(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function yK(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function dM(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=r:s.push({type:"text",value:r}),s}function vK(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return dM(t,e);const s={src:$o(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,a),t.applyData(e,a)}function bK(t,e){const n={src:$o(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function SK(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function wK(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return dM(t,e);const s={href:$o(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function xK(t,e){const n={href:$o(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function _K(t,e,n){const r=t.all(e),s=n?CK(n):hM(e),a={},l=[];if(typeof e.checked=="boolean"){const m=r[0];let p;m&&m.type==="element"&&m.tagName==="p"?p=m:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const m=r[c];(s||c!==0||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?l.push(...m.children):l.push(m)}const f=r[r.length-1];f&&(s||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:l};return t.patch(e,d),t.applyData(e,d)}function CK(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=hM(n[r])}return e}function hM(t){const e=t.spread;return e??t.children.length>1}function EK(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const l=r[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function kK(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function RK(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function AK(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function TK(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],l),s.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=Jv(e.children[1]),f=KT(e.children[e.children.length-1]);c&&f&&(l.position={start:c,end:f}),s.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,a),t.applyData(e,a)}function MK(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,c=l?l.length:e.children.length;let f=-1;const d=[];for(;++f<c;){const p=e.children[f],g={},y=l?l[f]:void 0;y&&(g.align=y);let S={type:"element",tagName:a,properties:g,children:[]};p&&(S.children=t.all(p),t.patch(p,S),S=t.applyData(p,S)),d.push(S)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,m),t.applyData(e,m)}function OK(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const yE=9,vE=32;function IK(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const a=[];for(;r;)a.push(bE(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return a.push(bE(e.slice(s),s>0,!1)),a.join("")}function bE(t,e,n){let r=0,s=t.length;if(e){let a=t.codePointAt(r);for(;a===yE||a===vE;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(s-1);for(;a===yE||a===vE;)s--,a=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function NK(t,e){const n={type:"text",value:IK(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function DK(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const zK={blockquote:cK,break:fK,code:dK,delete:hK,emphasis:pK,footnoteReference:mK,heading:gK,html:yK,imageReference:vK,image:bK,inlineCode:SK,linkReference:wK,link:xK,listItem:_K,list:EK,paragraph:kK,root:RK,strong:AK,table:TK,tableCell:OK,tableRow:MK,text:NK,thematicBreak:DK,toml:Wf,yaml:Wf,definition:Wf,footnoteDefinition:Wf};function Wf(){}const pM=-1,Fh=0,ku=1,ih=2,sb=3,ib=4,ab=5,ob=6,mM=7,gM=8,SE=typeof self=="object"?self:globalThis,LK=(t,e)=>{const n=(s,a)=>(t.set(a,s),s),r=s=>{if(t.has(s))return t.get(s);const[a,l]=e[s];switch(a){case Fh:case pM:return n(l,s);case ku:{const c=n([],s);for(const f of l)c.push(r(f));return c}case ih:{const c=n({},s);for(const[f,d]of l)c[r(f)]=r(d);return c}case sb:return n(new Date(l),s);case ib:{const{source:c,flags:f}=l;return n(new RegExp(c,f),s)}case ab:{const c=n(new Map,s);for(const[f,d]of l)c.set(r(f),r(d));return c}case ob:{const c=n(new Set,s);for(const f of l)c.add(r(f));return c}case mM:{const{name:c,message:f}=l;return n(new SE[c](f),s)}case gM:return n(BigInt(l),s);case"BigInt":return n(Object(BigInt(l)),s);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:c}=new Uint8Array(l);return n(new DataView(c),l)}}return n(new SE[a](l),s)};return r},wE=t=>LK(new Map,t)(0),eo="",{toString:jK}={},{keys:PK}=Object,Kl=t=>{const e=typeof t;if(e!=="object"||!t)return[Fh,e];const n=jK.call(t).slice(8,-1);switch(n){case"Array":return[ku,eo];case"Object":return[ih,eo];case"Date":return[sb,eo];case"RegExp":return[ib,eo];case"Map":return[ab,eo];case"Set":return[ob,eo];case"DataView":return[ku,n]}return n.includes("Array")?[ku,n]:n.includes("Error")?[mM,n]:[ih,n]},Xf=([t,e])=>t===Fh&&(e==="function"||e==="symbol"),FK=(t,e,n,r)=>{const s=(l,c)=>{const f=r.push(l)-1;return n.set(c,f),f},a=l=>{if(n.has(l))return n.get(l);let[c,f]=Kl(l);switch(c){case Fh:{let m=l;switch(f){case"bigint":c=gM,m=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);m=null;break;case"undefined":return s([pM],l)}return s([c,m],l)}case ku:{if(f){let g=l;return f==="DataView"?g=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(g=new Uint8Array(l)),s([f,[...g]],l)}const m=[],p=s([c,m],l);for(const g of l)m.push(a(g));return p}case ih:{if(f)switch(f){case"BigInt":return s([f,l.toString()],l);case"Boolean":case"Number":case"String":return s([f,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const m=[],p=s([c,m],l);for(const g of PK(l))(t||!Xf(Kl(l[g])))&&m.push([a(g),a(l[g])]);return p}case sb:return s([c,l.toISOString()],l);case ib:{const{source:m,flags:p}=l;return s([c,{source:m,flags:p}],l)}case ab:{const m=[],p=s([c,m],l);for(const[g,y]of l)(t||!(Xf(Kl(g))||Xf(Kl(y))))&&m.push([a(g),a(y)]);return p}case ob:{const m=[],p=s([c,m],l);for(const g of l)(t||!Xf(Kl(g)))&&m.push(a(g));return p}}const{message:d}=l;return s([c,{name:f,message:d}],l)};return a},xE=(t,{json:e,lossy:n}={})=>{const r=[];return FK(!(e||n),!!e,new Map,r)(t),r},ah=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?wE(xE(t,e)):structuredClone(t):(t,e)=>wE(xE(t,e));function $K(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function BK(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function UK(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||$K,r=t.options.footnoteBackLabel||BK,s=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let f=-1;for(;++f<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[f]);if(!d)continue;const m=t.all(d),p=String(d.identifier).toUpperCase(),g=$o(p.toLowerCase());let y=0;const S=[],w=t.footnoteCounts.get(p);for(;w!==void 0&&++y<=w;){S.length>0&&S.push({type:"text",value:" "});let k=typeof n=="string"?n:n(f,y);typeof k=="string"&&(k={type:"text",value:k}),S.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,y),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const E=m[m.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const k=E.children[E.children.length-1];k&&k.type==="text"?k.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...S)}else m.push(...S);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(m,!0)};t.patch(d,_),c.push(_)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...ah(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const $h=(function(t){if(t==null)return KK;if(typeof t=="function")return Bh(t);if(typeof t=="object")return Array.isArray(t)?VK(t):qK(t);if(typeof t=="string")return HK(t);throw new Error("Expected function, string, or object as test")});function VK(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=$h(t[n]);return Bh(r);function r(...s){let a=-1;for(;++a<e.length;)if(e[a].apply(this,s))return!0;return!1}}function qK(t){const e=t;return Bh(n);function n(r){const s=r;let a;for(a in t)if(s[a]!==e[a])return!1;return!0}}function HK(t){return Bh(e);function e(n){return n&&n.type===t}}function Bh(t){return e;function e(n,r,s){return!!(GK(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function KK(){return!0}function GK(t){return t!==null&&typeof t=="object"&&"type"in t}const yM=[],QK=!0,T0=!1,ZK="skip";function vM(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const a=$h(s),l=r?-1:1;c(t,void 0,[])();function c(f,d,m){const p=f&&typeof f=="object"?f:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(f.type+(y?"<"+y+">":""))+")"})}return g;function g(){let y=yM,S,w,E;if((!e||a(f,d,m[m.length-1]||void 0))&&(y=YK(n(f,m)),y[0]===T0))return y;if("children"in f&&f.children){const _=f;if(_.children&&y[0]!==ZK)for(w=(r?_.children.length:-1)+l,E=m.concat(_);w>-1&&w<_.children.length;){const k=_.children[w];if(S=c(k,w,E)(),S[0]===T0)return S;w=typeof S[1]=="number"?S[1]:w+l}}return y}}}function YK(t){return Array.isArray(t)?t:typeof t=="number"?[QK,t]:t==null?yM:[t]}function lb(t,e,n,r){let s,a,l;typeof e=="function"&&typeof n!="function"?(a=void 0,l=e,s=n):(a=e,l=n,s=r),vM(t,a,c,s);function c(f,d){const m=d[d.length-1],p=m?m.children.indexOf(f):void 0;return l(f,p,m)}}const M0={}.hasOwnProperty,JK={};function WK(t,e){const n=e||JK,r=new Map,s=new Map,a=new Map,l={...zK,...n.handlers},c={all:d,applyData:eG,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:l,one:f,options:n,patch:XK,wrap:nG};return lb(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const p=m.type==="definition"?r:s,g=String(m.identifier).toUpperCase();p.has(g)||p.set(g,m)}}),c;function f(m,p){const g=m.type,y=c.handlers[g];if(M0.call(c.handlers,g)&&y)return y(c,m,p);if(c.options.passThrough&&c.options.passThrough.includes(g)){if("children"in m){const{children:w,...E}=m,_=ah(E);return _.children=c.all(m),_}return ah(m)}return(c.options.unknownHandler||tG)(c,m,p)}function d(m){const p=[];if("children"in m){const g=m.children;let y=-1;for(;++y<g.length;){const S=c.one(g[y],m);if(S){if(y&&g[y-1].type==="break"&&(!Array.isArray(S)&&S.type==="text"&&(S.value=_E(S.value)),!Array.isArray(S)&&S.type==="element")){const w=S.children[0];w&&w.type==="text"&&(w.value=_E(w.value))}Array.isArray(S)?p.push(...S):p.push(S)}}}return p}}function XK(t,e){t.position&&(e.position=B9(t))}function eG(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,ah(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function tG(t,e){const n=e.data||{},r="value"in e&&!(M0.call(n,"hProperties")||M0.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function nG(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function _E(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function CE(t,e){const n=WK(t,e),r=n.one(t,void 0),s=UK(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function rG(t,e){return t&&"run"in t?async function(n,r){const s=CE(n,{file:r,...e});await t.run(s,r)}:function(n,r){return CE(n,{file:r,...t||e})}}function EE(t){if(t)throw t}var sy,kE;function sG(){if(kE)return sy;kE=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},a=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var m=t.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!p)return!1;var g;for(g in d);return typeof g>"u"||t.call(d,g)},l=function(d,m){n&&m.name==="__proto__"?n(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},c=function(d,m){if(m==="__proto__")if(t.call(d,m)){if(r)return r(d,m).value}else return;return d[m]};return sy=function f(){var d,m,p,g,y,S,w=arguments[0],E=1,_=arguments.length,k=!1;for(typeof w=="boolean"&&(k=w,w=arguments[1]||{},E=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});E<_;++E)if(d=arguments[E],d!=null)for(m in d)p=c(w,m),g=c(d,m),w!==g&&(k&&g&&(a(g)||(y=s(g)))?(y?(y=!1,S=p&&s(p)?p:[]):S=p&&a(p)?p:{},l(w,{name:m,newValue:f(k,S,g)})):typeof g<"u"&&l(w,{name:m,newValue:g}));return w},sy}var iG=sG();const iy=D0(iG);function O0(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function aG(){const t=[],e={run:n,use:r};return e;function n(...s){let a=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...s);function c(f,...d){const m=t[++a];let p=-1;if(f){l(f);return}for(;++p<s.length;)(d[p]===null||d[p]===void 0)&&(d[p]=s[p]);s=d,m?oG(m,c)(...d):l(null,...d)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function oG(t,e){let n;return r;function r(...l){const c=t.length>l.length;let f;c&&l.push(s);try{f=t.apply(this,l)}catch(d){const m=d;if(c&&n)throw m;return s(m)}c||(f&&f.then&&typeof f.then=="function"?f.then(a,s):f instanceof Error?s(f):a(f))}function s(l,...c){n||(n=!0,e(l,...c))}function a(l){s(null,l)}}const Ur={basename:lG,dirname:uG,extname:cG,join:fG,sep:"/"};function lG(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');nc(t);let n=0,r=-1,s=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let l=-1,c=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(a){n=s+1;break}}else l<0&&(a=!0,l=s+1),c>-1&&(t.codePointAt(s)===e.codePointAt(c--)?c<0&&(r=s):(c=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function uG(t){if(nc(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function cG(t){nc(t);let e=t.length,n=-1,r=0,s=-1,a=0,l;for(;e--;){const c=t.codePointAt(e);if(c===47){if(l){r=e+1;break}continue}n<0&&(l=!0,n=e+1),c===46?s<0?s=e:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function fG(...t){let e=-1,n;for(;++e<t.length;)nc(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":dG(n)}function dG(t){nc(t);const e=t.codePointAt(0)===47;let n=hG(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function hG(t,e){let n="",r=0,s=-1,a=0,l=-1,c,f;for(;++l<=t.length;){if(l<t.length)c=t.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(s===l-1||a===1))if(s!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),s=l,a=0;continue}}else if(n.length>0){n="",r=0,s=l,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,l):n=t.slice(s+1,l),r=l-s-1;s=l,a=0}else c===46&&a>-1?a++:a=-1}return n}function nc(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const pG={cwd:mG};function mG(){return"/"}function I0(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function gG(t){if(typeof t=="string")t=new URL(t);else if(!I0(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return yG(t)}function yG(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const ay=["history","path","basename","stem","extname","dirname"];class bM{constructor(e){let n;e?I0(e)?n={path:e}:typeof e=="string"||vG(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":pG.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<ay.length;){const a=ay[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)ay.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Ur.basename(this.path):void 0}set basename(e){ly(e,"basename"),oy(e,"basename"),this.path=Ur.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ur.dirname(this.path):void 0}set dirname(e){RE(this.basename,"dirname"),this.path=Ur.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ur.extname(this.path):void 0}set extname(e){if(oy(e,"extname"),RE(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ur.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){I0(e)&&(e=gG(e)),ly(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ur.basename(this.path,this.extname):void 0}set stem(e){ly(e,"stem"),oy(e,"stem"),this.path=Ur.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new yn(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function oy(t,e){if(t&&t.includes(Ur.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ur.sep+"`")}function ly(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function RE(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function vG(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const bG=(function(t){const r=this.constructor.prototype,s=r[t],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),SG={}.hasOwnProperty;class ub extends bG{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=aG()}copy(){const e=new ub;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(iy(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(fy("data",this.frozen),this.namespace[e]=n,this):SG.call(this.namespace,e)&&this.namespace[e]||void 0:e?(fy("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=ed(e),r=this.parser||this.Parser;return uy("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),uy("process",this.parser||this.Parser),cy("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,l){const c=ed(e),f=r.parse(c);r.run(f,c,function(m,p,g){if(m||!p||!g)return d(m);const y=p,S=r.stringify(y,g);_G(S)?g.value=S:g.result=S,d(m,g)});function d(m,p){m||!p?l(m):a?a(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),uy("processSync",this.parser||this.Parser),cy("processSync",this.compiler||this.Compiler),this.process(e,s),TE("processSync","process",n),r;function s(a,l){n=!0,EE(a),r=l}}run(e,n,r){AE(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,c){const f=ed(n);s.run(e,f,d);function d(m,p,g){const y=p||e;m?c(m):l?l(y):r(void 0,y,g)}}}runSync(e,n){let r=!1,s;return this.run(e,n,a),TE("runSync","run",r),s;function a(l,c){EE(l),s=c,r=!0}}stringify(e,n){this.freeze();const r=ed(n),s=this.compiler||this.Compiler;return cy("stringify",s),AE(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(fy("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...p]=d;f(m,p)}else l(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function l(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(d.plugins),d.settings&&(s.settings=iy(!0,s.settings,d.settings))}function c(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const p=d[m];a(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,m){let p=-1,g=-1;for(;++p<r.length;)if(r[p][0]===d){g=p;break}if(g===-1)r.push([d,...m]);else if(m.length>0){let[y,...S]=m;const w=r[g][1];O0(w)&&O0(y)&&(y=iy(!0,w,y)),r[g]=[d,y,...S]}}}}const wG=new ub().freeze();function uy(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function cy(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function fy(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function AE(t){if(!O0(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function TE(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function ed(t){return xG(t)?t:new bM(t)}function xG(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function _G(t){return typeof t=="string"||CG(t)}function CG(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const EG="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",ME=[],OE={allowDangerousHtml:!0},kG=/^(https?|ircs?|mailto|xmpp)$/i,RG=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function AG(t){const e=TG(t),n=MG(t);return OG(e.runSync(e.parse(n),n),t)}function TG(t){const e=t.rehypePlugins||ME,n=t.remarkPlugins||ME,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...OE}:OE;return wG().use(uK).use(n).use(rG,r).use(e)}function MG(t){const e=t.children||"",n=new bM;return typeof e=="string"&&(n.value=e),n}function OG(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,a=e.disallowedElements,l=e.skipHtml,c=e.unwrapDisallowed,f=e.urlTransform||IG;for(const m of RG)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+EG+m.id,void 0);return lb(t,d),K9(t,{Fragment:x.Fragment,components:s,ignoreInvalidStyle:!0,jsx:x.jsx,jsxs:x.jsxs,passKeys:!0,passNode:!0});function d(m,p,g){if(m.type==="raw"&&g&&typeof p=="number")return l?g.children.splice(p,1):g.children[p]={type:"text",value:m.value},p;if(m.type==="element"){let y;for(y in ty)if(Object.hasOwn(ty,y)&&Object.hasOwn(m.properties,y)){const S=m.properties[y],w=ty[y];(w===null||w.includes(m.tagName))&&(m.properties[y]=f(String(S||""),y,m))}}if(m.type==="element"){let y=n?!n.includes(m.tagName):a?a.includes(m.tagName):!1;if(!y&&r&&typeof p=="number"&&(y=!r(m,p,g)),y&&g&&typeof p=="number")return c&&m.children?g.children.splice(p,1,...m.children):g.children.splice(p,1),p}}}function IG(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||kG.test(t.slice(0,e))?t:""}function IE(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function NG(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function SM(t,e,n){const s=$h((n||{}).ignore||[]),a=DG(e);let l=-1;for(;++l<a.length;)vM(t,"text",c);function c(d,m){let p=-1,g;for(;++p<m.length;){const y=m[p],S=g?g.children:void 0;if(s(y,S?S.indexOf(y):void 0,g))return;g=y}if(g)return f(d,m)}function f(d,m){const p=m[m.length-1],g=a[l][0],y=a[l][1];let S=0;const E=p.children.indexOf(d);let _=!1,k=[];g.lastIndex=0;let R=g.exec(d.value);for(;R;){const O=R.index,L={index:R.index,input:R.input,stack:[...m,d]};let A=y(...R,L);if(typeof A=="string"&&(A=A.length>0?{type:"text",value:A}:void 0),A===!1?g.lastIndex=O+1:(S!==O&&k.push({type:"text",value:d.value.slice(S,O)}),Array.isArray(A)?k.push(...A):A&&k.push(A),S=O+R[0].length,_=!0),!g.global)break;R=g.exec(d.value)}return _?(S<d.value.length&&k.push({type:"text",value:d.value.slice(S)}),p.children.splice(E,1,...k)):k=[d],E+k.length}}function DG(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([zG(s[0]),LG(s[1])])}return e}function zG(t){return typeof t=="string"?new RegExp(NG(t),"g"):t}function LG(t){return typeof t=="function"?t:function(){return t}}const dy="phrasing",hy=["autolink","link","image","label"];function jG(){return{transforms:[qG],enter:{literalAutolink:FG,literalAutolinkEmail:py,literalAutolinkHttp:py,literalAutolinkWww:py},exit:{literalAutolink:VG,literalAutolinkEmail:UG,literalAutolinkHttp:$G,literalAutolinkWww:BG}}}function PG(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:dy,notInConstruct:hy},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:dy,notInConstruct:hy},{character:":",before:"[ps]",after:"\\/",inConstruct:dy,notInConstruct:hy}]}}function FG(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function py(t){this.config.enter.autolinkProtocol.call(this,t)}function $G(t){this.config.exit.autolinkProtocol.call(this,t)}function BG(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function UG(t){this.config.exit.autolinkEmail.call(this,t)}function VG(t){this.exit(t)}function qG(t){SM(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,HG],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),KG]],{ignore:["link","linkReference"]})}function HG(t,e,n,r,s){let a="";if(!wM(s)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!GG(n)))return!1;const l=QG(n+r);if(!l[0])return!1;const c={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[c,{type:"text",value:l[1]}]:c}function KG(t,e,n,r){return!wM(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function GG(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function QG(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=IE(t,"(");let a=IE(t,")");for(;r!==-1&&s>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function wM(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||aa(n)||jh(n))&&(!e||n!==47)}xM.peek=rQ;function ZG(){this.buffer()}function YG(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function JG(){this.buffer()}function WG(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function XG(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function eQ(t){this.exit(t)}function tQ(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function nQ(t){this.exit(t)}function rQ(){return"["}function xM(t,e,n,r){const s=n.createTracker(r);let a=s.move("[^");const l=n.enter("footnoteReference"),c=n.enter("reference");return a+=s.move(n.safe(n.associationId(t),{after:"]",before:a})),c(),l(),a+=s.move("]"),a}function sQ(){return{enter:{gfmFootnoteCallString:ZG,gfmFootnoteCall:YG,gfmFootnoteDefinitionLabelString:JG,gfmFootnoteDefinition:WG},exit:{gfmFootnoteCallString:XG,gfmFootnoteCall:eQ,gfmFootnoteDefinitionLabelString:tQ,gfmFootnoteDefinition:nQ}}}function iQ(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:xM},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,a,l){const c=a.createTracker(l);let f=c.move("[^");const d=a.enter("footnoteDefinition"),m=a.enter("label");return f+=c.move(a.safe(a.associationId(r),{before:f,after:"]"})),m(),f+=c.move("]:"),r.children&&r.children.length>0&&(c.shift(4),f+=c.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,c.current()),e?_M:aQ))),d(),f}}function aQ(t,e,n){return e===0?t:_M(t,e,n)}function _M(t,e,n){return(n?"":"    ")+t}const oQ=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];CM.peek=dQ;function lQ(){return{canContainEols:["delete"],enter:{strikethrough:cQ},exit:{strikethrough:fQ}}}function uQ(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:oQ}],handlers:{delete:CM}}}function cQ(t){this.enter({type:"delete",children:[]},t)}function fQ(t){this.exit(t)}function CM(t,e,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let l=s.move("~~");return l+=n.containerPhrasing(t,{...s.current(),before:l,after:"~"}),l+=s.move("~~"),a(),l}function dQ(){return"~"}function hQ(t){return t.length}function pQ(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||hQ,a=[],l=[],c=[],f=[];let d=0,m=-1;for(;++m<t.length;){const w=[],E=[];let _=-1;for(t[m].length>d&&(d=t[m].length);++_<t[m].length;){const k=mQ(t[m][_]);if(n.alignDelimiters!==!1){const R=s(k);E[_]=R,(f[_]===void 0||R>f[_])&&(f[_]=R)}w.push(k)}l[m]=w,c[m]=E}let p=-1;if(typeof r=="object"&&"length"in r)for(;++p<d;)a[p]=NE(r[p]);else{const w=NE(r);for(;++p<d;)a[p]=w}p=-1;const g=[],y=[];for(;++p<d;){const w=a[p];let E="",_="";w===99?(E=":",_=":"):w===108?E=":":w===114&&(_=":");let k=n.alignDelimiters===!1?1:Math.max(1,f[p]-E.length-_.length);const R=E+"-".repeat(k)+_;n.alignDelimiters!==!1&&(k=E.length+k+_.length,k>f[p]&&(f[p]=k),y[p]=k),g[p]=R}l.splice(1,0,g),c.splice(1,0,y),m=-1;const S=[];for(;++m<l.length;){const w=l[m],E=c[m];p=-1;const _=[];for(;++p<d;){const k=w[p]||"";let R="",O="";if(n.alignDelimiters!==!1){const L=f[p]-(E[p]||0),A=a[p];A===114?R=" ".repeat(L):A===99?L%2?(R=" ".repeat(L/2+.5),O=" ".repeat(L/2-.5)):(R=" ".repeat(L/2),O=R):O=" ".repeat(L)}n.delimiterStart!==!1&&!p&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&k==="")&&(n.delimiterStart!==!1||p)&&_.push(" "),n.alignDelimiters!==!1&&_.push(R),_.push(k),n.alignDelimiters!==!1&&_.push(O),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||p!==d-1)&&_.push("|")}S.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return S.join(`
`)}function mQ(t){return t==null?"":String(t)}function NE(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function gQ(t,e,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const l=n.indentLines(n.containerFlow(t,a.current()),yQ);return s(),l}function yQ(t,e,n){return">"+(n?"":" ")+t}function vQ(t,e){return DE(t,e.inConstruct,!0)&&!DE(t,e.notInConstruct,!1)}function DE(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function zE(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&vQ(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function bQ(t,e){const n=String(t);let r=n.indexOf(e),s=r,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>l&&(l=a):a=1,s=r+e.length,r=n.indexOf(e,s);return l}function SQ(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function wQ(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function xQ(t,e,n,r){const s=wQ(n),a=t.value||"",l=s==="`"?"GraveAccent":"Tilde";if(SQ(t,n)){const p=n.enter("codeIndented"),g=n.indentLines(a,_Q);return p(),g}const c=n.createTracker(r),f=s.repeat(Math.max(bQ(a,s)+1,3)),d=n.enter("codeFenced");let m=c.move(f);if(t.lang){const p=n.enter(`codeFencedLang${l}`);m+=c.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...c.current()})),p()}if(t.lang&&t.meta){const p=n.enter(`codeFencedMeta${l}`);m+=c.move(" "),m+=c.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...c.current()})),p()}return m+=c.move(`
`),a&&(m+=c.move(a+`
`)),m+=c.move(f),d(),m}function _Q(t,e,n){return(n?"":"    ")+t}function cb(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function CQ(t,e,n,r){const s=cb(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("definition");let c=n.enter("label");const f=n.createTracker(r);let d=f.move("[");return d+=f.move(n.safe(n.associationId(t),{before:d,after:"]",...f.current()})),d+=f.move("]: "),c(),!t.url||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...f.current()}))),c(),t.title&&(c=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),c()),l(),d}function EQ(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Vu(t){return"&#x"+t.toString(16).toUpperCase()+";"}function oh(t,e,n){const r=Ro(t),s=Ro(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}EM.peek=kQ;function EM(t,e,n,r){const s=EQ(n),a=n.enter("emphasis"),l=n.createTracker(r),c=l.move(s);let f=l.move(n.containerPhrasing(t,{after:s,before:c,...l.current()}));const d=f.charCodeAt(0),m=oh(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=Vu(d)+f.slice(1));const p=f.charCodeAt(f.length-1),g=oh(r.after.charCodeAt(0),p,s);g.inside&&(f=f.slice(0,-1)+Vu(p));const y=l.move(s);return a(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},c+f+y}function kQ(t,e,n){return n.options.emphasis||"*"}function RQ(t,e){let n=!1;return lb(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,T0}),!!((!t.depth||t.depth<3)&&tb(t)&&(e.options.setext||n))}function AQ(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(RQ(t,n)){const m=n.enter("headingSetext"),p=n.enter("phrasing"),g=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return p(),m(),g+`
`+(s===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const l="#".repeat(s),c=n.enter("headingAtx"),f=n.enter("phrasing");a.move(l+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=Vu(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,n.options.closeAtx&&(d+=" "+l),f(),c(),d}kM.peek=TQ;function kM(t){return t.value||""}function TQ(){return"<"}RM.peek=MQ;function RM(t,e,n,r){const s=cb(n),a=s==='"'?"Quote":"Apostrophe",l=n.enter("image");let c=n.enter("label");const f=n.createTracker(r);let d=f.move("![");return d+=f.move(n.safe(t.alt,{before:d,after:"]",...f.current()})),d+=f.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),d+=f.move("<"),d+=f.move(n.safe(t.url,{before:d,after:">",...f.current()})),d+=f.move(">")):(c=n.enter("destinationRaw"),d+=f.move(n.safe(t.url,{before:d,after:t.title?" ":")",...f.current()}))),c(),t.title&&(c=n.enter(`title${a}`),d+=f.move(" "+s),d+=f.move(n.safe(t.title,{before:d,after:s,...f.current()})),d+=f.move(s),c()),d+=f.move(")"),l(),d}function MQ(){return"!"}AM.peek=OQ;function AM(t,e,n,r){const s=t.referenceType,a=n.enter("imageReference");let l=n.enter("label");const c=n.createTracker(r);let f=c.move("![");const d=n.safe(t.alt,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=c.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function OQ(){return"!"}TM.peek=IQ;function TM(t,e,n){let r=t.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const l=n.unsafe[a],c=n.compilePattern(l);let f;if(l.atBreak)for(;f=c.exec(r);){let d=f.index;r.charCodeAt(d)===10&&r.charCodeAt(d-1)===13&&d--,r=r.slice(0,d)+" "+r.slice(f.index+1)}}return s+r+s}function IQ(){return"`"}function MM(t,e){const n=tb(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}OM.peek=NQ;function OM(t,e,n,r){const s=cb(n),a=s==='"'?"Quote":"Apostrophe",l=n.createTracker(r);let c,f;if(MM(t,n)){const m=n.stack;n.stack=[],c=n.enter("autolink");let p=l.move("<");return p+=l.move(n.containerPhrasing(t,{before:p,after:">",...l.current()})),p+=l.move(">"),c(),n.stack=m,p}c=n.enter("link"),f=n.enter("label");let d=l.move("[");return d+=l.move(n.containerPhrasing(t,{before:d,after:"](",...l.current()})),d+=l.move("]("),f(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(f=n.enter("destinationLiteral"),d+=l.move("<"),d+=l.move(n.safe(t.url,{before:d,after:">",...l.current()})),d+=l.move(">")):(f=n.enter("destinationRaw"),d+=l.move(n.safe(t.url,{before:d,after:t.title?" ":")",...l.current()}))),f(),t.title&&(f=n.enter(`title${a}`),d+=l.move(" "+s),d+=l.move(n.safe(t.title,{before:d,after:s,...l.current()})),d+=l.move(s),f()),d+=l.move(")"),c(),d}function NQ(t,e,n){return MM(t,n)?"<":"["}IM.peek=DQ;function IM(t,e,n,r){const s=t.referenceType,a=n.enter("linkReference");let l=n.enter("label");const c=n.createTracker(r);let f=c.move("[");const d=n.containerPhrasing(t,{before:f,after:"]",...c.current()});f+=c.move(d+"]["),l();const m=n.stack;n.stack=[],l=n.enter("reference");const p=n.safe(n.associationId(t),{before:f,after:"]",...c.current()});return l(),n.stack=m,a(),s==="full"||!d||d!==p?f+=c.move(p+"]"):s==="shortcut"?f=f.slice(0,-1):f+=c.move("]"),f}function DQ(){return"["}function fb(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function zQ(t){const e=fb(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function LQ(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function NM(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function jQ(t,e,n,r){const s=n.enter("list"),a=n.bulletCurrent;let l=t.ordered?LQ(n):fb(n);const c=t.ordered?l==="."?")":".":zQ(n);let f=e&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((l==="*"||l==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),NM(n)===l&&m){let p=-1;for(;++p<t.children.length;){const g=t.children[p];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(l=c),n.bulletCurrent=l;const d=n.containerFlow(t,r);return n.bulletLastUsed=l,n.bulletCurrent=a,s(),d}function PQ(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function FQ(t,e,n,r){const s=PQ(n);let a=n.bulletCurrent||fb(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let l=a.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(l=Math.ceil(l/4)*4);const c=n.createTracker(r);c.move(a+" ".repeat(l-a.length)),c.shift(l);const f=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,c.current()),m);return f(),d;function m(p,g,y){return g?(y?"":" ".repeat(l))+p:(y?a:a+" ".repeat(l-a.length))+p}}function $Q(t,e,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),l=n.containerPhrasing(t,r);return a(),s(),l}const BQ=$h(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function UQ(t,e,n,r){return(t.children.some(function(l){return BQ(l)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function VQ(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}DM.peek=qQ;function DM(t,e,n,r){const s=VQ(n),a=n.enter("strong"),l=n.createTracker(r),c=l.move(s+s);let f=l.move(n.containerPhrasing(t,{after:s,before:c,...l.current()}));const d=f.charCodeAt(0),m=oh(r.before.charCodeAt(r.before.length-1),d,s);m.inside&&(f=Vu(d)+f.slice(1));const p=f.charCodeAt(f.length-1),g=oh(r.after.charCodeAt(0),p,s);g.inside&&(f=f.slice(0,-1)+Vu(p));const y=l.move(s+s);return a(),n.attentionEncodeSurroundingInfo={after:g.outside,before:m.outside},c+f+y}function qQ(t,e,n){return n.options.strong||"*"}function HQ(t,e,n,r){return n.safe(t.value,r)}function KQ(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function GQ(t,e,n){const r=(NM(n)+(n.options.ruleSpaces?" ":"")).repeat(KQ(n));return n.options.ruleSpaces?r.slice(0,-1):r}const zM={blockquote:gQ,break:zE,code:xQ,definition:CQ,emphasis:EM,hardBreak:zE,heading:AQ,html:kM,image:RM,imageReference:AM,inlineCode:TM,link:OM,linkReference:IM,list:jQ,listItem:FQ,paragraph:$Q,root:UQ,strong:DM,text:HQ,thematicBreak:GQ};function QQ(){return{enter:{table:ZQ,tableData:LE,tableHeader:LE,tableRow:JQ},exit:{codeText:WQ,table:YQ,tableData:my,tableHeader:my,tableRow:my}}}function ZQ(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function YQ(t){this.exit(t),this.data.inTable=void 0}function JQ(t){this.enter({type:"tableRow",children:[]},t)}function my(t){this.exit(t)}function LE(t){this.enter({type:"tableCell",children:[]},t)}function WQ(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,XQ));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function XQ(t,e){return e==="|"?e:t}function eZ(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:l,tableCell:f,tableRow:c}};function l(y,S,w,E){return d(m(y,w,E),y.align)}function c(y,S,w,E){const _=p(y,w,E),k=d([_]);return k.slice(0,k.indexOf(`
`))}function f(y,S,w,E){const _=w.enter("tableCell"),k=w.enter("phrasing"),R=w.containerPhrasing(y,{...E,before:a,after:a});return k(),_(),R}function d(y,S){return pQ(y,{align:S,alignDelimiters:r,padding:n,stringLength:s})}function m(y,S,w){const E=y.children;let _=-1;const k=[],R=S.enter("table");for(;++_<E.length;)k[_]=p(E[_],S,w);return R(),k}function p(y,S,w){const E=y.children;let _=-1;const k=[],R=S.enter("tableRow");for(;++_<E.length;)k[_]=f(E[_],y,S,w);return R(),k}function g(y,S,w){let E=zM.inlineCode(y,S,w);return w.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function tZ(){return{exit:{taskListCheckValueChecked:jE,taskListCheckValueUnchecked:jE,paragraph:rZ}}}function nZ(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:sZ}}}function jE(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function rZ(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let a=-1,l;for(;++a<s.length;){const c=s[a];if(c.type==="paragraph"){l=c;break}}l===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function sZ(t,e,n,r){const s=t.children[0],a=typeof t.checked=="boolean"&&s&&s.type==="paragraph",l="["+(t.checked?"x":" ")+"] ",c=n.createTracker(r);a&&c.move(l);let f=zM.listItem(t,e,n,{...r,...c.current()});return a&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),f;function d(m){return m+l}}function iZ(){return[jG(),sQ(),lQ(),QQ(),tZ()]}function aZ(t){return{extensions:[PG(),iQ(t),uQ(),eZ(t),nZ()]}}const oZ={tokenize:hZ,partial:!0},LM={tokenize:pZ,partial:!0},jM={tokenize:mZ,partial:!0},PM={tokenize:gZ,partial:!0},lZ={tokenize:yZ,partial:!0},FM={name:"wwwAutolink",tokenize:fZ,previous:BM},$M={name:"protocolAutolink",tokenize:dZ,previous:UM},ks={name:"emailAutolink",tokenize:cZ,previous:VM},Yr={};function uZ(){return{text:Yr}}let $i=48;for(;$i<123;)Yr[$i]=ks,$i++,$i===58?$i=65:$i===91&&($i=97);Yr[43]=ks;Yr[45]=ks;Yr[46]=ks;Yr[95]=ks;Yr[72]=[ks,$M];Yr[104]=[ks,$M];Yr[87]=[ks,FM];Yr[119]=[ks,FM];function cZ(t,e,n){const r=this;let s,a;return l;function l(p){return!N0(p)||!VM.call(r,r.previous)||db(r.events)?n(p):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),c(p))}function c(p){return N0(p)?(t.consume(p),c):p===64?(t.consume(p),f):n(p)}function f(p){return p===46?t.check(lZ,m,d)(p):p===45||p===95||gn(p)?(a=!0,t.consume(p),f):m(p)}function d(p){return t.consume(p),s=!0,f}function m(p){return a&&s&&En(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(p)):n(p)}}function fZ(t,e,n){const r=this;return s;function s(l){return l!==87&&l!==119||!BM.call(r,r.previous)||db(r.events)?n(l):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(oZ,t.attempt(LM,t.attempt(jM,a),n),n)(l))}function a(l){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(l)}}function dZ(t,e,n){const r=this;let s="",a=!1;return l;function l(p){return(p===72||p===104)&&UM.call(r,r.previous)&&!db(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(p),t.consume(p),c):n(p)}function c(p){if(En(p)&&s.length<5)return s+=String.fromCodePoint(p),t.consume(p),c;if(p===58){const g=s.toLowerCase();if(g==="http"||g==="https")return t.consume(p),f}return n(p)}function f(p){return p===47?(t.consume(p),a?d:(a=!0,f)):n(p)}function d(p){return p===null||sh(p)||Ct(p)||aa(p)||jh(p)?n(p):t.attempt(LM,t.attempt(jM,m),n)(p)}function m(p){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(p)}}function hZ(t,e,n){let r=0;return s;function s(l){return(l===87||l===119)&&r<3?(r++,t.consume(l),s):l===46&&r===3?(t.consume(l),a):n(l)}function a(l){return l===null?n(l):e(l)}}function pZ(t,e,n){let r,s,a;return l;function l(d){return d===46||d===95?t.check(PM,f,c)(d):d===null||Ct(d)||aa(d)||d!==45&&jh(d)?f(d):(a=!0,t.consume(d),l)}function c(d){return d===95?r=!0:(s=r,r=void 0),t.consume(d),l}function f(d){return s||r||!a?n(d):e(d)}}function mZ(t,e){let n=0,r=0;return s;function s(l){return l===40?(n++,t.consume(l),s):l===41&&r<n?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?t.check(PM,e,a)(l):l===null||Ct(l)||aa(l)?e(l):(t.consume(l),s)}function a(l){return l===41&&r++,t.consume(l),s}}function gZ(t,e,n){return r;function r(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(t.consume(c),r):c===38?(t.consume(c),a):c===93?(t.consume(c),s):c===60||c===null||Ct(c)||aa(c)?e(c):n(c)}function s(c){return c===null||c===40||c===91||Ct(c)||aa(c)?e(c):r(c)}function a(c){return En(c)?l(c):n(c)}function l(c){return c===59?(t.consume(c),r):En(c)?(t.consume(c),l):n(c)}}function yZ(t,e,n){return r;function r(a){return t.consume(a),s}function s(a){return gn(a)?n(a):e(a)}}function BM(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Ct(t)}function UM(t){return!En(t)}function VM(t){return!(t===47||N0(t))}function N0(t){return t===43||t===45||t===46||t===95||gn(t)}function db(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const vZ={tokenize:kZ,partial:!0};function bZ(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:_Z,continuation:{tokenize:CZ},exit:EZ}},text:{91:{name:"gfmFootnoteCall",tokenize:xZ},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:SZ,resolveTo:wZ}}}}function SZ(t,e,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let l;for(;s--;){const f=r.events[s][1];if(f.type==="labelImage"){l=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return c;function c(f){if(!l||!l._balanced)return n(f);const d=zr(r.sliceSerialize({start:l.end,end:r.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?n(f):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),e(f))}}function wZ(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},c=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...c),t}function xZ(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,l;return c;function c(p){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),f}function f(p){return p!==94?n(p):(t.enter("gfmFootnoteCallMarker"),t.consume(p),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",d)}function d(p){if(a>999||p===93&&!l||p===null||p===91||Ct(p))return n(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteCallString");return s.includes(zr(r.sliceSerialize(g)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(p),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(p)}return Ct(p)||(l=!0),a++,t.consume(p),p===92?m:d}function m(p){return p===91||p===92||p===93?(t.consume(p),a++,d):d(p)}}function _Z(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,l=0,c;return f;function f(S){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(S),t.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(S){return S===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(S),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",m):n(S)}function m(S){if(l>999||S===93&&!c||S===null||S===91||Ct(S))return n(S);if(S===93){t.exit("chunkString");const w=t.exit("gfmFootnoteDefinitionLabelString");return a=zr(r.sliceSerialize(w)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(S),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),g}return Ct(S)||(c=!0),l++,t.consume(S),S===92?p:m}function p(S){return S===91||S===92||S===93?(t.consume(S),l++,m):m(S)}function g(S){return S===58?(t.enter("definitionMarker"),t.consume(S),t.exit("definitionMarker"),s.includes(a)||s.push(a),ot(t,y,"gfmFootnoteDefinitionWhitespace")):n(S)}function y(S){return e(S)}}function CZ(t,e,n){return t.check(tc,e,t.attempt(vZ,e,n))}function EZ(t){t.exit("gfmFootnoteDefinition")}function kZ(t,e,n){const r=this;return ot(t,s,"gfmFootnoteDefinitionIndent",5);function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):n(a)}}function RZ(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(l,c){let f=-1;for(;++f<l.length;)if(l[f][0]==="enter"&&l[f][1].type==="strikethroughSequenceTemporary"&&l[f][1]._close){let d=f;for(;d--;)if(l[d][0]==="exit"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._open&&l[f][1].end.offset-l[f][1].start.offset===l[d][1].end.offset-l[d][1].start.offset){l[f][1].type="strikethroughSequence",l[d][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},l[d][1].start),end:Object.assign({},l[f][1].end)},p={type:"strikethroughText",start:Object.assign({},l[d][1].end),end:Object.assign({},l[f][1].start)},g=[["enter",m,c],["enter",l[d][1],c],["exit",l[d][1],c],["enter",p,c]],y=c.parser.constructs.insideSpan.null;y&&nr(g,g.length,0,Ph(y,l.slice(d+1,f),c)),nr(g,g.length,0,[["exit",p,c],["enter",l[f][1],c],["exit",l[f][1],c],["exit",m,c]]),nr(l,d-1,f-d+3,g),f=d+g.length-2;break}}for(f=-1;++f<l.length;)l[f][1].type==="strikethroughSequenceTemporary"&&(l[f][1].type="data");return l}function a(l,c,f){const d=this.previous,m=this.events;let p=0;return g;function g(S){return d===126&&m[m.length-1][1].type!=="characterEscape"?f(S):(l.enter("strikethroughSequenceTemporary"),y(S))}function y(S){const w=Ro(d);if(S===126)return p>1?f(S):(l.consume(S),p++,y);if(p<2&&!n)return f(S);const E=l.exit("strikethroughSequenceTemporary"),_=Ro(S);return E._open=!_||_===2&&!!w,E._close=!w||w===2&&!!_,c(S)}}}class AZ{constructor(){this.map=[]}add(e,n,r){TZ(this,e,n,r)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const a of s)e.push(a);s=r.pop()}this.map.length=0}}function TZ(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function MZ(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function OZ(){return{flow:{null:{name:"table",tokenize:IZ,resolveAll:NZ}}}}function IZ(t,e,n){const r=this;let s=0,a=0,l;return c;function c(I){let F=r.events.length-1;for(;F>-1;){const te=r.events[F][1].type;if(te==="lineEnding"||te==="linePrefix")F--;else break}const G=F>-1?r.events[F][1].type:null,J=G==="tableHead"||G==="tableRow"?A:f;return J===A&&r.parser.lazy[r.now().line]?n(I):J(I)}function f(I){return t.enter("tableHead"),t.enter("tableRow"),d(I)}function d(I){return I===124||(l=!0,a+=1),m(I)}function m(I){return I===null?n(I):De(I)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),y):n(I):et(I)?ot(t,m,"whitespace")(I):(a+=1,l&&(l=!1,s+=1),I===124?(t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),l=!0,m):(t.enter("data"),p(I)))}function p(I){return I===null||I===124||Ct(I)?(t.exit("data"),m(I)):(t.consume(I),I===92?g:p)}function g(I){return I===92||I===124?(t.consume(I),p):p(I)}function y(I){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(I):(t.enter("tableDelimiterRow"),l=!1,et(I)?ot(t,S,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):S(I))}function S(I){return I===45||I===58?E(I):I===124?(l=!0,t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),w):L(I)}function w(I){return et(I)?ot(t,E,"whitespace")(I):E(I)}function E(I){return I===58?(a+=1,l=!0,t.enter("tableDelimiterMarker"),t.consume(I),t.exit("tableDelimiterMarker"),_):I===45?(a+=1,_(I)):I===null||De(I)?O(I):L(I)}function _(I){return I===45?(t.enter("tableDelimiterFiller"),k(I)):L(I)}function k(I){return I===45?(t.consume(I),k):I===58?(l=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(I),t.exit("tableDelimiterMarker"),R):(t.exit("tableDelimiterFiller"),R(I))}function R(I){return et(I)?ot(t,O,"whitespace")(I):O(I)}function O(I){return I===124?S(I):I===null||De(I)?!l||s!==a?L(I):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(I)):L(I)}function L(I){return n(I)}function A(I){return t.enter("tableRow"),z(I)}function z(I){return I===124?(t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),z):I===null||De(I)?(t.exit("tableRow"),e(I)):et(I)?ot(t,z,"whitespace")(I):(t.enter("data"),P(I))}function P(I){return I===null||I===124||Ct(I)?(t.exit("data"),z(I)):(t.consume(I),I===92?j:P)}function j(I){return I===92||I===124?(t.consume(I),P):P(I)}}function NZ(t,e){let n=-1,r=!0,s=0,a=[0,0,0,0],l=[0,0,0,0],c=!1,f=0,d,m,p;const g=new AZ;for(;++n<t.length;){const y=t[n],S=y[1];y[0]==="enter"?S.type==="tableHead"?(c=!1,f!==0&&(PE(g,e,f,d,m),m=void 0,f=0),d={type:"table",start:Object.assign({},S.start),end:Object.assign({},S.end)},g.add(n,0,[["enter",d,e]])):S.type==="tableRow"||S.type==="tableDelimiterRow"?(r=!0,p=void 0,a=[0,0,0,0],l=[0,n+1,0,0],c&&(c=!1,m={type:"tableBody",start:Object.assign({},S.start),end:Object.assign({},S.end)},g.add(n,0,[["enter",m,e]])),s=S.type==="tableDelimiterRow"?2:m?3:1):s&&(S.type==="data"||S.type==="tableDelimiterMarker"||S.type==="tableDelimiterFiller")?(r=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],p=td(g,e,a,s,void 0,p),a=[0,0,0,0]),l[2]=n)):S.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(l[0]=l[1],p=td(g,e,a,s,void 0,p)),a=l,l=[a[1],n,0,0])):S.type==="tableHead"?(c=!0,f=n):S.type==="tableRow"||S.type==="tableDelimiterRow"?(f=n,a[1]!==0?(l[0]=l[1],p=td(g,e,a,s,n,p)):l[1]!==0&&(p=td(g,e,l,s,n,p)),s=0):s&&(S.type==="data"||S.type==="tableDelimiterMarker"||S.type==="tableDelimiterFiller")&&(l[3]=n)}for(f!==0&&PE(g,e,f,d,m),g.consume(e.events),n=-1;++n<e.events.length;){const y=e.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=MZ(e.events,n))}return t}function td(t,e,n,r,s,a){const l=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(a.end=Object.assign({},ao(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const f=ao(e.events,n[1]);if(a={type:l,start:Object.assign({},f),end:Object.assign({},f)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const d=ao(e.events,n[2]),m=ao(e.events,n[3]),p={type:c,start:Object.assign({},d),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",p,e]]),r!==2){const g=e.events[n[2]],y=e.events[n[3]];if(g[1].end=Object.assign({},y[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const S=n[2]+1,w=n[3]-n[2]-1;t.add(S,w,[])}}t.add(n[3]+1,0,[["exit",p,e]])}return s!==void 0&&(a.end=Object.assign({},ao(e.events,s)),t.add(s,0,[["exit",a,e]]),a=void 0),a}function PE(t,e,n,r,s){const a=[],l=ao(e.events,n);s&&(s.end=Object.assign({},l),a.push(["exit",s,e])),r.end=Object.assign({},l),a.push(["exit",r,e]),t.add(n+1,0,a)}function ao(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const DZ={name:"tasklistCheck",tokenize:LZ};function zZ(){return{text:{91:DZ}}}function LZ(t,e,n){const r=this;return s;function s(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(f):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),a)}function a(f){return Ct(f)?(t.enter("taskListCheckValueUnchecked"),t.consume(f),t.exit("taskListCheckValueUnchecked"),l):f===88||f===120?(t.enter("taskListCheckValueChecked"),t.consume(f),t.exit("taskListCheckValueChecked"),l):n(f)}function l(f){return f===93?(t.enter("taskListCheckMarker"),t.consume(f),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),c):n(f)}function c(f){return De(f)?e(f):et(f)?t.check({tokenize:jZ},e,n)(f):n(f)}}function jZ(t,e,n){return ot(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function PZ(t){return XT([uZ(),bZ(),RZ(t),OZ(),zZ()])}const FZ={};function $Z(t){const e=this,n=t||FZ,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),l=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(PZ(n)),a.push(iZ()),l.push(aZ(n))}function BZ(t){SM(t,[/\r?\n|\r/g,UZ])}function UZ(){return{type:"break"}}function VZ(){return function(t){BZ(t)}}const qZ={pre:({children:t})=>x.jsx(x.Fragment,{children:t}),li:({children:t,...e})=>x.jsx("li",{className:"py-0.5 ml-0",...e,children:t}),ul:({children:t,...e})=>x.jsx("ul",{className:"list-disc list-outside ml-5 pl-0 my-2",...e,children:t}),ol:({children:t,...e})=>x.jsx("ol",{className:"list-decimal list-outside ml-5 pl-0 my-2",...e,children:t}),strong:({children:t,...e})=>x.jsx("span",{className:"font-semibold",...e,children:t}),a:({children:t,href:e,...n})=>{let r=e||"";return r&&!r.startsWith("http")&&!r.startsWith("#")&&(r=`https://${r}`),x.jsx("a",{className:"text-sky-400 hover:underline",href:r,target:"_blank",rel:"noreferrer noopener",...n,children:t})},h1:({children:t,...e})=>x.jsx("h1",{className:"text-xl font-semibold mt-4 mb-2",...e,children:t}),h2:({children:t,...e})=>x.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",...e,children:t}),h3:({children:t,...e})=>x.jsx("h3",{className:"text-base font-semibold mt-3 mb-1",...e,children:t}),h4:({children:t,...e})=>x.jsx("h4",{className:"text-sm font-semibold mt-3 mb-1",...e,children:t}),h5:({children:t,...e})=>x.jsx("h5",{className:"text-sm font-semibold mt-2 mb-1",...e,children:t}),h6:({children:t,...e})=>x.jsx("h6",{className:"text-xs font-semibold mt-2 mb-1",...e,children:t}),p:({children:t,...e})=>x.jsx("p",{className:"my-2 leading-relaxed",...e,children:t}),table:({children:t,...e})=>x.jsx("div",{className:"overflow-x-auto my-3",children:x.jsx("table",{className:"w-full border-collapse border border-neutral-600 text-xs",...e,children:t})}),thead:({children:t,...e})=>x.jsx("thead",{className:"bg-neutral-700",...e,children:t}),tbody:({children:t,...e})=>x.jsx("tbody",{...e,children:t}),tr:({children:t,...e})=>x.jsx("tr",{className:"border-b border-neutral-600",...e,children:t}),th:({children:t,...e})=>x.jsx("th",{className:"p-2 text-left font-semibold border-r last:border-r-0 border-neutral-600",...e,children:t}),td:({children:t,...e})=>x.jsx("td",{className:"p-2 border-r last:border-r-0 border-neutral-600",...e,children:t}),blockquote:({children:t,...e})=>x.jsx("blockquote",{className:"border-l-4 border-neutral-500 pl-3 py-1 my-2 italic text-neutral-300",...e,children:t}),hr:({...t})=>x.jsx("hr",{className:"my-4 border-neutral-600",...t}),code({children:t,className:e,...n}){const r=/language-(\w+)/.exec(e||""),s=String(t).replace(/\n$/,""),a=s.includes(`
`);if(!r&&!a)return x.jsx("code",{...n,className:`${e||""} bg-neutral-700 px-1.5 py-0.5 rounded text-xs font-mono text-sky-300`,children:t});const l=r?.[1]||"text";return x.jsxs("div",{className:"my-3",children:[x.jsx("div",{className:"flex items-center justify-between bg-neutral-700 px-3 py-1 rounded-t text-xs text-neutral-400",children:x.jsx("span",{children:l})}),x.jsx("pre",{className:"bg-neutral-800 p-3 rounded-b overflow-x-auto",children:x.jsx("code",{className:"text-xs font-mono text-neutral-200",children:s})})]})}},HZ=[$Z,VZ],KZ=t=>{const e=tn.c(6),{children:n}=t;if(!n)return null;let r=n,s;if(e[0]!==r){r=r.replace(/^(#{1,6}\s+.+)\n```/gm,"$1\n\n```");let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=/```\n(#{1,6}\s+)/gm,e[3]=l):l=e[3],s=r.replace(l,"```\n\n$1"),e[0]=r,e[1]=s,e[2]=r}else s=e[1],r=e[2];r=s;let a;return e[4]!==r?(a=x.jsx(AG,{remarkPlugins:HZ,components:qZ,children:r}),e[4]=r,e[5]=a):a=e[5],a},GZ=U.memo(KZ,(t,e)=>t.children===e.children);function QZ(t){const e=tn.c(90),{isOpen:n,onClose:r,connection:s,database:a,table:l,currentQuery:c,queryResult:f,schema:d,setters:m}=t,[p,g]=U.useState(""),y=U.useRef(null),S=U.useRef(null),w=U.useRef(s?.id);let E;e[0]!==s||e[1]!==c||e[2]!==a||e[3]!==f||e[4]!==d||e[5]!==m||e[6]!==l?(E={connection:s,database:a,table:l,currentQuery:c,queryResult:f,schema:d,setters:m},e[0]=s,e[1]=c,e[2]=a,e[3]=f,e[4]=d,e[5]=m,e[6]=l,e[7]=E):E=e[7];const _=E;let k;e[8]!==_?(k=g9(_),e[8]=_,e[9]=k):k=e[9];const R=k;let O;e[10]!==_?(O=y9(_),e[10]=_,e[11]=O):O=e[11];const L=O;let A;if(e[12]!==L||e[13]!==R){const Se=s9(),Ue=r9(Se);A=R8(vt=>a8({adapter:Ue,messages:vt,tools:R,systemPrompts:[L],agentLoopStrategy:rA(10)})),e[12]=L,e[13]=R,e[14]=A}else A=e[14];const z=A;let P;e[15]!==z||e[16]!==R?(P={connection:z,tools:R},e[15]=z,e[16]=R,e[17]=P):P=e[17];const{messages:j,sendMessage:I,isLoading:F,stop:G,clear:J}=A8(P);let te;e[18]!==J||e[19]!==s?.id?(te=()=>{w.current!==s?.id&&(J(),w.current=s?.id)},e[18]=J,e[19]=s?.id,e[20]=te):te=e[20];const H=s?.id;let $;e[21]!==J||e[22]!==H?($=[H,J],e[21]=J,e[22]=H,e[23]=$):$=e[23],U.useEffect(te,$);let W;e[24]===Symbol.for("react.memo_cache_sentinel")?(W=()=>{y.current?.scrollIntoView({behavior:"smooth"})},e[24]=W):W=e[24];let oe;e[25]!==j?(oe=[j],e[25]=j,e[26]=oe):oe=e[26],U.useEffect(W,oe);let Q,N;e[27]!==n?(Q=()=>{n&&S.current?.focus()},N=[n],e[27]=n,e[28]=Q,e[29]=N):(Q=e[28],N=e[29]),U.useEffect(Q,N);let D;e[30]!==p||e[31]!==F||e[32]!==I?(D=Se=>{Se.preventDefault(),!(!p.trim()||F)&&(I(p.trim()),g(""))},e[30]=p,e[31]=F,e[32]=I,e[33]=D):D=e[33];const q=D;let M;e[34]!==q?(M=Se=>{Se.key==="Enter"&&!Se.shiftKey&&(Se.preventDefault(),q(Se))},e[34]=q,e[35]=M):M=e[35];const se=M,ce=ZZ;let he;e[36]!==F||e[37]!==j?(he=(Se,Ue)=>F&&Se.role==="assistant"&&Ue===j.length-1,e[36]=F,e[37]=j,e[38]=he):he=e[38];const ve=he;if(!n)return null;let Ae;e[39]===Symbol.for("react.memo_cache_sentinel")?(Ae=x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(ky,{size:16,className:"text-amber-500"}),x.jsx("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:ZC.name})]}),e[39]=Ae):Ae=e[39];let _e;e[40]===Symbol.for("react.memo_cache_sentinel")?(_e=x.jsx(Ou,{size:16}),e[40]=_e):_e=e[40];let pe;e[41]!==J?(pe=x.jsx("button",{onClick:J,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",title:"Clear chat",children:_e}),e[41]=J,e[42]=pe):pe=e[42];let Ee;e[43]===Symbol.for("react.memo_cache_sentinel")?(Ee=x.jsx(hh,{size:16}),e[43]=Ee):Ee=e[43];let Me;e[44]!==r?(Me=x.jsx("button",{onClick:r,className:"p-1.5 text-neutral-500 hover:text-neutral-900 hover:bg-neutral-100 dark:hover:text-neutral-300 dark:hover:bg-neutral-800 rounded transition-colors",children:Ee}),e[44]=r,e[45]=Me):Me=e[45];let Ze;e[46]!==pe||e[47]!==Me?(Ze=x.jsxs("div",{className:"shrink-0 h-12 px-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800",children:[Ae,x.jsxs("div",{className:"flex items-center gap-1",children:[pe,Me]})]}),e[46]=pe,e[47]=Me,e[48]=Ze):Ze=e[48];let je;e[49]!==j.length?(je=j.length===0&&x.jsxs("div",{className:"text-center text-neutral-500 dark:text-neutral-400 text-sm py-8",children:[x.jsx(ky,{size:24,className:"mx-auto mb-3 text-amber-500/50"}),x.jsx("p",{className:"mb-2",children:"Ask me to help with your SQL queries"}),x.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:`Examples: "Write a query to find all users created this month" or "What's wrong with my query?"`})]}),e[49]=j.length,e[50]=je):je=e[50];let Ye;if(e[51]!==ve||e[52]!==j){let Se;e[54]!==ve?(Se=(Ue,vt)=>{const ut=ce(Ue);return x.jsx("div",{className:"space-y-3",children:(ut||ve(Ue,vt))&&x.jsx("div",{className:`text-sm ${Ue.role==="user"?"bg-neutral-100 dark:bg-neutral-800 rounded-lg px-3 py-2":""}`,children:x.jsx("div",{className:Ue.role==="user"?"text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300",children:Ue.role==="assistant"?ut?x.jsx(GZ,{children:ut}):ve(Ue,vt)?x.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[x.jsx(na,{size:14,className:"animate-spin"}),"Thinking..."]}):null:x.jsx("span",{className:"whitespace-pre-wrap",children:ut})})})},Ue.id)},e[54]=ve,e[55]=Se):Se=e[55],Ye=j.map(Se),e[51]=ve,e[52]=j,e[53]=Ye}else Ye=e[53];let st;e[56]!==F||e[57]!==j?(st=F&&(j.length===0||j[j.length-1]?.role==="user")&&x.jsx("div",{className:"text-sm",children:x.jsx("div",{className:"text-neutral-800 dark:text-neutral-200",children:x.jsxs("span",{className:"flex items-center gap-2 text-neutral-400",children:[x.jsx(na,{size:14,className:"animate-spin"}),"Thinking..."]})})}),e[56]=F,e[57]=j,e[58]=st):st=e[58];let Je;e[59]===Symbol.for("react.memo_cache_sentinel")?(Je=x.jsx("div",{ref:y}),e[59]=Je):Je=e[59];let at;e[60]!==je||e[61]!==Ye||e[62]!==st?(at=x.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[je,Ye,st,Je]}),e[60]=je,e[61]=Ye,e[62]=st,e[63]=at):at=e[63];let ht;e[64]===Symbol.for("react.memo_cache_sentinel")?(ht=Se=>g(Se.target.value),e[64]=ht):ht=e[64];let Oe;e[65]===Symbol.for("react.memo_cache_sentinel")?(Oe={maxHeight:"120px"},e[65]=Oe):Oe=e[65];let ge;e[66]!==se||e[67]!==p||e[68]!==F?(ge=x.jsx("textarea",{ref:S,value:p,onChange:ht,onKeyDown:se,placeholder:ZC.placeholder,rows:1,disabled:F,className:"flex-1 px-3 py-2 bg-neutral-50 border border-neutral-200 dark:bg-neutral-800 dark:border-neutral-700 rounded-lg text-neutral-900 dark:text-neutral-100 text-sm placeholder-neutral-400 resize-none focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500 disabled:opacity-50",style:Oe}),e[66]=se,e[67]=p,e[68]=F,e[69]=ge):ge=e[69];const Le=F?"button":"submit",be=F?G:void 0;let ye;e[70]!==p||e[71]!==F?(ye=!F&&!p.trim(),e[70]=p,e[71]=F,e[72]=ye):ye=e[72];let Ve;e[73]!==F?(Ve=F?x.jsx(Az,{size:16}):x.jsx(_z,{size:16}),e[73]=F,e[74]=Ve):Ve=e[74];let ne;e[75]!==Le||e[76]!==be||e[77]!==ye||e[78]!==Ve?(ne=x.jsx("button",{type:Le,onClick:be,disabled:ye,className:"p-2 bg-amber-500 hover:bg-amber-400 disabled:bg-neutral-300 dark:disabled:bg-neutral-700 disabled:text-neutral-500 text-white rounded-lg transition-colors",children:Ve}),e[75]=Le,e[76]=be,e[77]=ye,e[78]=Ve,e[79]=ne):ne=e[79];let fe;e[80]!==ge||e[81]!==ne?(fe=x.jsxs("div",{className:"flex items-end gap-2",children:[ge,ne]}),e[80]=ge,e[81]=ne,e[82]=fe):fe=e[82];let Ce;e[83]!==q||e[84]!==fe?(Ce=x.jsx("form",{onSubmit:q,className:"shrink-0 p-3 border-t border-neutral-200 dark:border-neutral-800",children:fe}),e[83]=q,e[84]=fe,e[85]=Ce):Ce=e[85];let ke;return e[86]!==Ze||e[87]!==at||e[88]!==Ce?(ke=x.jsxs("div",{className:"w-96 shrink-0 bg-white border border-neutral-200 dark:bg-neutral-900 dark:border-neutral-800 flex flex-col rounded-xl overflow-hidden",children:[Ze,at,Ce]}),e[86]=Ze,e[87]=at,e[88]=Ce,e[89]=ke):ke=e[89],ke}function ZZ(t){return t.parts.filter(JZ).map(YZ).join("").replace(/^undefined/,"")}function YZ(t){return t.content}function JZ(t){return t.type==="text"&&!!t.content}const WZ={folder:Id,image:Ck,document:xk,code:wk,archive:bk,file:Id};function XZ(t){const e=tn.c(72),{connection:n,container:r,objectKey:s,onClose:a}=t;let l,c;e[0]!==n.id||e[1]!==r||e[2]!==s?(l=["storage-object-details",n.id,r,s],c=()=>xB(n.id,r,s),e[0]=n.id,e[1]=r,e[2]=s,e[3]=l,e[4]=c):(l=e[3],c=e[4]);const f=!!n&&!!r&&!!s;let d;e[5]!==l||e[6]!==c||e[7]!==f?(d={queryKey:l,queryFn:c,enabled:f},e[5]=l,e[6]=c,e[7]=f,e[8]=d):d=e[8];const{data:m,isLoading:p,error:g}=_s(d);let y;e[9]!==n.id||e[10]!==r||e[11]!==s?(y=async()=>{try{const se=await _B(n.id,r,s),ce=document.createElement("a");ce.href=se,ce.download=Fu(s),ce.target="_blank",ce.style.display="none",document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)}catch(se){console.error("Failed to get download URL:",se)}},e[9]=n.id,e[10]=r,e[11]=s,e[12]=y):y=e[12];const S=y;if(p){let se;return e[13]===Symbol.for("react.memo_cache_sentinel")?(se=x.jsx("div",{className:"flex-1 flex items-center justify-center",children:x.jsx(na,{className:"w-6 h-6 text-neutral-400 animate-spin"})}),e[13]=se):se=e[13],se}if(g||!m){const se=g?"Failed to load object details":"Select an object to view details";let ce;return e[14]!==se?(ce=x.jsx("div",{className:"flex-1 flex items-center justify-center text-neutral-400 dark:text-neutral-600 text-sm",children:se}),e[14]=se,e[15]=ce):ce=e[15],ce}const w=NR(s),E=WZ[w];let _;e[16]!==s?(_=Fu(s),e[16]=s,e[17]=_):_=e[17];const k=_;let R;e[18]!==E?(R=x.jsx("div",{className:"w-10 h-10 rounded-lg bg-neutral-100 dark:bg-white/5 flex items-center justify-center",children:x.jsx(E,{className:"w-5 h-5 text-neutral-500 dark:text-neutral-400"})}),e[18]=E,e[19]=R):R=e[19];let O;e[20]!==k?(O=x.jsx("h2",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-200 truncate",children:k}),e[20]=k,e[21]=O):O=e[21];let L;e[22]!==r||e[23]!==s?(L=x.jsxs("p",{className:"text-xs text-neutral-400 dark:text-neutral-500 truncate",children:[r,"/",s]}),e[22]=r,e[23]=s,e[24]=L):L=e[24];let A;e[25]!==O||e[26]!==L?(A=x.jsxs("div",{className:"flex-1 min-w-0",children:[O,L]}),e[25]=O,e[26]=L,e[27]=A):A=e[27];let z;e[28]===Symbol.for("react.memo_cache_sentinel")?(z=x.jsx(rz,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),e[28]=z):z=e[28];let P;e[29]!==S?(P=x.jsx("button",{onClick:S,className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Download",children:z}),e[29]=S,e[30]=P):P=e[30];let j;e[31]===Symbol.for("react.memo_cache_sentinel")?(j=x.jsx(hh,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),e[31]=j):j=e[31];let I;e[32]!==a?(I=x.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",title:"Close",children:j}),e[32]=a,e[33]=I):I=e[33];let F;e[34]!==P||e[35]!==I?(F=x.jsxs("div",{className:"flex items-center gap-1",children:[P,I]}),e[34]=P,e[35]=I,e[36]=F):F=e[36];let G;e[37]!==A||e[38]!==F||e[39]!==R?(G=x.jsx("div",{className:"px-4 py-3 border-b border-neutral-200 dark:border-white/8",children:x.jsxs("div",{className:"flex items-center gap-3",children:[R,A,F]})}),e[37]=A,e[38]=F,e[39]=R,e[40]=G):G=e[40];let J;e[41]!==m.size?(J=IR(m.size),e[41]=m.size,e[42]=J):J=e[42];let te;e[43]!==J?(te=x.jsx(ys,{label:"Size",value:J}),e[43]=J,e[44]=te):te=e[44];let H;e[45]!==m.lastModified?(H=tY(m.lastModified),e[45]=m.lastModified,e[46]=H):H=e[46];let $;e[47]!==H?($=x.jsx(ys,{label:"Last Modified",value:H}),e[47]=H,e[48]=$):$=e[48];let W;e[49]!==m.contentType?(W=m.contentType&&x.jsx(ys,{label:"Content Type",value:RB(m.contentType)}),e[49]=m.contentType,e[50]=W):W=e[50];let oe;e[51]!==m.etag?(oe=m.etag&&x.jsx(ys,{label:"ETag",value:m.etag,mono:!0}),e[51]=m.etag,e[52]=oe):oe=e[52];let Q;e[53]!==te||e[54]!==$||e[55]!==W||e[56]!==oe?(Q=x.jsxs(gy,{title:"Basic Information",children:[te,$,W,oe]}),e[53]=te,e[54]=$,e[55]=W,e[56]=oe,e[57]=Q):Q=e[57];let N;e[58]!==m.accessTier||e[59]!==m.blobType||e[60]!==m.storageClass||e[61]!==m.versionId?(N=(m.storageClass||m.accessTier||m.blobType)&&x.jsxs(gy,{title:"Storage",children:[m.storageClass&&x.jsx(ys,{label:"Storage Class",value:m.storageClass}),m.accessTier&&x.jsx(ys,{label:"Access Tier",value:m.accessTier}),m.blobType&&x.jsx(ys,{label:"Blob Type",value:m.blobType}),m.versionId&&x.jsx(ys,{label:"Version ID",value:m.versionId,mono:!0})]}),e[58]=m.accessTier,e[59]=m.blobType,e[60]=m.storageClass,e[61]=m.versionId,e[62]=N):N=e[62];let D;e[63]!==m.metadata?(D=m.metadata&&Object.keys(m.metadata).length>0&&x.jsx(gy,{title:"Metadata",children:Object.entries(m.metadata).map(eY)}),e[63]=m.metadata,e[64]=D):D=e[64];let q;e[65]!==Q||e[66]!==N||e[67]!==D?(q=x.jsx("div",{className:"flex-1 overflow-auto p-4",children:x.jsxs("div",{className:"space-y-4",children:[Q,N,D]})}),e[65]=Q,e[66]=N,e[67]=D,e[68]=q):q=e[68];let M;return e[69]!==G||e[70]!==q?(M=x.jsxs("div",{className:"flex-1 bg-white dark:bg-[#1a1a1a]/60 border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden flex flex-col",children:[G,q]}),e[69]=G,e[70]=q,e[71]=M):M=e[71],M}function eY(t){const[e,n]=t;return x.jsx(ys,{label:e,value:n},e)}function gy(t){const e=tn.c(7),{title:n,children:r}=t;let s;e[0]!==n?(s=x.jsx("h3",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400 uppercase tracking-wider mb-2",children:n}),e[0]=n,e[1]=s):s=e[1];let a;e[2]!==r?(a=x.jsx("div",{className:"bg-neutral-50 dark:bg-white/5 rounded-lg divide-y divide-neutral-200 dark:divide-white/5",children:r}),e[2]=r,e[3]=a):a=e[3];let l;return e[4]!==s||e[5]!==a?(l=x.jsxs("div",{children:[s,a]}),e[4]=s,e[5]=a,e[6]=l):l=e[6],l}function ys(t){const e=tn.c(8),{label:n,value:r,mono:s}=t;let a;e[0]!==n?(a=x.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:n}),e[0]=n,e[1]=a):a=e[1];const l=`text-xs text-neutral-700 dark:text-neutral-200 ${s?"font-mono":""} truncate max-w-50`;let c;e[2]!==l||e[3]!==r?(c=x.jsx("span",{className:l,children:r}),e[2]=l,e[3]=r,e[4]=c):c=e[4];let f;return e[5]!==a||e[6]!==c?(f=x.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[a,c]}),e[5]=a,e[6]=c,e[7]=f):f=e[7],f}function tY(t){try{return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}}function nY(t){const e=tn.c(63),{connection:n,container:r,currentPath:s,onClose:a}=t,l=Mo(),c=U.useRef(null),[f,d]=U.useState(null),[m,p]=U.useState("");let g;e[0]!==n||e[1]!==r?(g=q=>{const{file:M,key:se}=q;return CB(n.id,r,se,M)},e[0]=n,e[1]=r,e[2]=g):g=e[2];let y;e[3]!==n||e[4]!==r||e[5]!==a||e[6]!==l?(y=()=>{l.invalidateQueries({queryKey:["storage-objects",n.id,r]}),a()},e[3]=n,e[4]=r,e[5]=a,e[6]=l,e[7]=y):y=e[7];let S;e[8]!==g||e[9]!==y?(S={mutationFn:g,onSuccess:y},e[8]=g,e[9]=y,e[10]=S):S=e[10];const w=Au(S);let E;e[11]!==s?(E=q=>{const M=q.target.files;if(!M||M.length===0)return;const se=M[0];d(se),p(s+se.name)},e[11]=s,e[12]=E):E=e[12];const _=E;let k;e[13]!==m||e[14]!==f||e[15]!==w?(k=q=>{if(q.preventDefault(),f&&m.trim()){const M=m.trim().replace(/^\/+/,"");w.mutate({file:f,key:M})}},e[13]=m,e[14]=f,e[15]=w,e[16]=k):k=e[16];const R=k,O=rY;let L;e[17]!==a?(L=x.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/70",onClick:a}),e[17]=a,e[18]=L):L=e[18];let A;e[19]===Symbol.for("react.memo_cache_sentinel")?(A=x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:x.jsx(kk,{className:"w-4 h-4 text-blue-500"})}),x.jsx("h2",{className:"text-base font-semibold text-neutral-900 dark:text-neutral-100",children:"Upload File"})]}),e[19]=A):A=e[19];let z;e[20]===Symbol.for("react.memo_cache_sentinel")?(z=x.jsx(hh,{className:"w-4 h-4 text-neutral-500"}),e[20]=z):z=e[20];let P;e[21]!==a?(P=x.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-neutral-200 dark:border-neutral-800",children:[A,x.jsx("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-white/5 transition-colors",children:z})]}),e[21]=a,e[22]=P):P=e[22];let j;e[23]!==_?(j=x.jsx("input",{ref:c,type:"file",onChange:_,className:"hidden"}),e[23]=_,e[24]=j):j=e[24];let I;e[25]!==m||e[26]!==f||e[27]!==w.isPending?(I=f&&x.jsxs("div",{className:"space-y-3",children:[x.jsx("input",{type:"text",value:m,onChange:q=>p(q.target.value),placeholder:"path/to/file.txt",className:"w-full px-3 py-2 text-sm font-mono border border-neutral-200 dark:border-neutral-700 rounded-lg bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500",disabled:w.isPending}),x.jsxs("div",{className:"flex items-center gap-3 p-3 border border-neutral-200 dark:border-neutral-700 rounded-lg bg-neutral-50 dark:bg-neutral-800/50",children:[x.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center",children:x.jsx(Id,{className:"w-5 h-5 text-blue-500"})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate",children:f.name}),x.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[O(f.size),"  ",f.type||"Unknown type"]})]}),x.jsx("button",{type:"button",onClick:()=>c.current?.click(),className:"px-3 py-1.5 text-xs font-medium text-blue-500 hover:bg-blue-500/10 rounded-lg transition-colors",children:"Change"})]})]}),e[25]=m,e[26]=f,e[27]=w.isPending,e[28]=I):I=e[28];let F;e[29]!==f?(F=!f&&x.jsx("button",{type:"button",onClick:()=>c.current?.click(),className:"w-full p-6 border-2 border-dashed border-neutral-200 dark:border-neutral-700 rounded-lg hover:border-blue-500/50 hover:bg-blue-500/5 transition-colors group",children:x.jsxs("div",{className:"flex flex-col items-center gap-2",children:[x.jsx(oz,{className:"w-8 h-8 text-neutral-400 group-hover:text-blue-500 transition-colors"}),x.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 group-hover:text-blue-500 transition-colors",children:"Click to select a file"})]})}),e[29]=f,e[30]=F):F=e[30];let G;e[31]!==j||e[32]!==I||e[33]!==F?(G=x.jsxs("div",{children:[j,I,F]}),e[31]=j,e[32]=I,e[33]=F,e[34]=G):G=e[34];let J;e[35]!==w.error?(J=w.error&&x.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:x.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:w.error instanceof Error?w.error.message:"Failed to upload file"})}),e[35]=w.error,e[36]=J):J=e[36];let te;e[37]!==a||e[38]!==w.isPending?(te=x.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-lg transition-colors",disabled:w.isPending,children:"Cancel"}),e[37]=a,e[38]=w.isPending,e[39]=te):te=e[39];let H;e[40]!==m||e[41]!==f||e[42]!==w.isPending?(H=!f||!m.trim()||w.isPending,e[40]=m,e[41]=f,e[42]=w.isPending,e[43]=H):H=e[43];let $;e[44]!==w.isPending?($=w.isPending&&x.jsx(na,{className:"w-3.5 h-3.5 animate-spin"}),e[44]=w.isPending,e[45]=$):$=e[45];let W;e[46]!==H||e[47]!==$?(W=x.jsxs("button",{type:"submit",disabled:H,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors flex items-center gap-2",children:[$,"Upload"]}),e[46]=H,e[47]=$,e[48]=W):W=e[48];let oe;e[49]!==te||e[50]!==W?(oe=x.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[te,W]}),e[49]=te,e[50]=W,e[51]=oe):oe=e[51];let Q;e[52]!==R||e[53]!==G||e[54]!==J||e[55]!==oe?(Q=x.jsxs("form",{onSubmit:R,className:"p-5 space-y-4",children:[G,J,oe]}),e[52]=R,e[53]=G,e[54]=J,e[55]=oe,e[56]=Q):Q=e[56];let N;e[57]!==Q||e[58]!==P?(N=x.jsxs("div",{className:"relative w-full max-w-lg bg-white dark:bg-neutral-900 rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-800 overflow-hidden",children:[P,Q]}),e[57]=Q,e[58]=P,e[59]=N):N=e[59];let D;return e[60]!==N||e[61]!==L?(D=x.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[L,N]}),e[60]=N,e[61]=L,e[62]=D):D=e[62],D}function rY(t){if(t===0)return"0 B";const e=["B","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,n)).toFixed(1))+" "+e[n]}const sY={folder:_k,image:Ck,document:xk,code:wk,archive:bk,file:Id};function iY(t){const e=tn.c(95),{connection:n,container:r,path:s,onNavigate:a}=t,l=Mo(),[c,f]=U.useState(null),[d,m]=U.useState(!1);let p;e[0]!==s?(p=s&&!s.endsWith("/")?s+"/":s,e[0]=s,e[1]=p):p=e[1];const g=p;let y,S;e[2]!==n.id||e[3]!==r||e[4]!==g?(y=["storage-objects",n.id,r,g],S=()=>_h(n.id,r,{prefix:g,delimiter:"/"}),e[2]=n.id,e[3]=r,e[4]=g,e[5]=y,e[6]=S):(y=e[5],S=e[6]);const w=!!n&&!!r;let E;e[7]!==y||e[8]!==S||e[9]!==w?(E={queryKey:y,queryFn:S,enabled:w},e[7]=y,e[8]=S,e[9]=w,e[10]=E):E=e[10];const{data:_,isLoading:k,error:R}=_s(E);let O;e[11]!==n.id||e[12]!==r?(O=Oe=>MR(n.id,r,[Oe]),e[11]=n.id,e[12]=r,e[13]=O):O=e[13];let L;e[14]!==n.id||e[15]!==r||e[16]!==l?(L=()=>{l.invalidateQueries({queryKey:["storage-objects",n.id,r]}),f(null)},e[14]=n.id,e[15]=r,e[16]=l,e[17]=L):L=e[17];let A;e[18]!==O||e[19]!==L?(A={mutationFn:O,onSuccess:L},e[18]=O,e[19]=L,e[20]=A):A=e[20];const z=Au(A);let P;e[21]!==n.id||e[22]!==r?(P=Oe=>OR(n.id,r,Oe),e[21]=n.id,e[22]=r,e[23]=P):P=e[23];let j;e[24]!==n.id||e[25]!==r||e[26]!==l?(j=()=>{l.invalidateQueries({queryKey:["storage-objects",n.id,r]})},e[24]=n.id,e[25]=r,e[26]=l,e[27]=j):j=e[27];let I;e[28]!==j||e[29]!==P?(I={mutationFn:P,onSuccess:j},e[28]=j,e[29]=P,e[30]=I):I=e[30];const F=Au(I);let G;e[31]!==z||e[32]!==F?(G=(Oe,ge)=>{ge.stopPropagation();const Le=Oe.name.replace(/\/$/,"")||"/",be=Oe.isFolder?`Delete folder "${Le}" and all its contents?`:`Delete "${Le}"?`;if(confirm(be))if(Oe.isFolder){const ye=Oe.key;ye==="/"||ye===""?z.mutate(ye||"/"):F.mutate(ye)}else z.mutate(Oe.key)},e[31]=z,e[32]=F,e[33]=G):G=e[33];const J=G,te=z.isPending||F.isPending;let H;e:{if(!_){let ge;e[34]===Symbol.for("react.memo_cache_sentinel")?(ge=[],e[34]=ge):ge=e[34],H=ge;break e}let Oe;if(e[35]!==_.objects||e[36]!==_.prefixes){const ge=_.prefixes.map(lY),Le=_.objects.filter(oY).map(aY);Oe=[...ge,...Le],e[35]=_.objects,e[36]=_.prefixes,e[37]=Oe}else Oe=e[37];H=Oe}const $=H;let W;e[38]!==r||e[39]!==a?(W=Oe=>{Oe.isFolder?(a(r,Oe.key),f(null)):f(Oe.key)},e[38]=r,e[39]=a,e[40]=W):W=e[40];const oe=W;let Q;e[41]!==r||e[42]!==a||e[43]!==s?(Q=()=>{const Oe=EB(s);a(r,Oe?Oe+"/":""),f(null)},e[41]=r,e[42]=a,e[43]=s,e[44]=Q):Q=e[44];const N=Q;let D;e[45]!==r?(D={label:r,path:""},e[45]=r,e[46]=D):D=e[46];let q;if(e[47]!==s||e[48]!==D){if(q=[D],s){const Oe=s.split("/").filter(Boolean);let ge="";for(const Le of Oe)ge=ge+(Le+"/"),q.push({label:Le,path:ge})}e[47]=s,e[48]=D,e[49]=q}else q=e[49];const M=q,se=n.amazonS3?"S3":"Azure Blob";let ce;e[50]!==se?(ce=x.jsxs("span",{className:"text-neutral-400 dark:text-neutral-500 shrink-0",children:[se,":"]}),e[50]=se,e[51]=ce):ce=e[51];let he;e[52]!==r||e[53]!==a||e[54]!==M?(he=M.map((Oe,ge)=>x.jsxs("span",{className:"flex items-center shrink-0",children:[ge>0&&x.jsx(Z0,{className:"w-4 h-4 text-neutral-400 mx-1"}),x.jsx("button",{onClick:()=>a(r,Oe.path),className:`hover:text-blue-500 transition-colors ${ge===M.length-1?"text-neutral-700 dark:text-neutral-200 font-medium":"text-neutral-500 dark:text-neutral-400"}`,children:Oe.label})]},Oe.path)),e[52]=r,e[53]=a,e[54]=M,e[55]=he):he=e[55];let ve;e[56]!==ce||e[57]!==he?(ve=x.jsxs("div",{className:"flex items-center gap-1 text-sm overflow-x-auto",children:[ce,he]}),e[56]=ce,e[57]=he,e[58]=ve):ve=e[58];let Ae;e[59]===Symbol.for("react.memo_cache_sentinel")?(Ae=()=>m(!0),e[59]=Ae):Ae=e[59];let _e;e[60]===Symbol.for("react.memo_cache_sentinel")?(_e=x.jsx("div",{className:"ml-4 shrink-0",children:x.jsxs("button",{onClick:Ae,className:"px-3 py-1.5 rounded-lg bg-blue-500 hover:bg-blue-600 text-white text-xs font-medium flex items-center gap-2 transition-colors",title:"Upload file",children:[x.jsx(kk,{className:"w-3.5 h-3.5"}),"Upload"]})}),e[60]=_e):_e=e[60];let pe;e[61]!==ve?(pe=x.jsx("div",{className:"px-4 py-3 border-b border-neutral-200 dark:border-white/8",children:x.jsxs("div",{className:"flex items-center justify-between",children:[ve,_e]})}),e[61]=ve,e[62]=pe):pe=e[62];let Ee;e[63]===Symbol.for("react.memo_cache_sentinel")?(Ee=()=>f(null),e[63]=Ee):Ee=e[63];let Me;e[64]!==R||e[65]!==J||e[66]!==oe||e[67]!==N||e[68]!==te||e[69]!==k||e[70]!==$||e[71]!==s||e[72]!==c?(Me=x.jsx("div",{className:"flex-1 overflow-auto",onClick:Ee,children:k?x.jsx("div",{className:"flex items-center justify-center h-full",children:x.jsx(na,{className:"w-6 h-6 text-neutral-400 animate-spin"})}):R?x.jsx("div",{className:"flex items-center justify-center h-full text-red-500 text-sm",children:"Failed to load objects"}):$.length===0?x.jsx("div",{className:"flex items-center justify-center h-full text-neutral-400 dark:text-neutral-600 text-sm",children:"This folder is empty"}):x.jsx(uY,{items:$,selectedKey:c,path:s,onItemClick:oe,onNavigateUp:N,onDeleteItem:J,isDeleting:te})}),e[64]=R,e[65]=J,e[66]=oe,e[67]=N,e[68]=te,e[69]=k,e[70]=$,e[71]=s,e[72]=c,e[73]=Me):Me=e[73];const Ze=$.length===1?"item":"items",je=_?.isTruncated&&" (truncated)";let Ye;e[74]!==$.length||e[75]!==Ze||e[76]!==je?(Ye=x.jsxs("div",{className:"px-4 py-2 border-t border-neutral-200 dark:border-white/8 text-xs text-neutral-400 dark:text-neutral-500",children:[$.length," ",Ze,je]}),e[74]=$.length,e[75]=Ze,e[76]=je,e[77]=Ye):Ye=e[77];let st;e[78]!==pe||e[79]!==Me||e[80]!==Ye?(st=x.jsxs("div",{className:"flex-1 bg-white dark:bg-[#1a1a1a]/60 border border-neutral-200 dark:border-white/8 rounded-xl overflow-hidden flex flex-col min-w-0",children:[pe,Me,Ye]}),e[78]=pe,e[79]=Me,e[80]=Ye,e[81]=st):st=e[81];let Je;e[82]!==n||e[83]!==r||e[84]!==c?(Je=c&&x.jsx("div",{className:"w-80 shrink-0",children:x.jsx(XZ,{connection:n,container:r,objectKey:c,onClose:()=>f(null)})}),e[82]=n,e[83]=r,e[84]=c,e[85]=Je):Je=e[85];let at;e[86]!==n||e[87]!==r||e[88]!==g||e[89]!==d?(at=d&&x.jsx(nY,{connection:n,container:r,currentPath:g,onClose:()=>m(!1)}),e[86]=n,e[87]=r,e[88]=g,e[89]=d,e[90]=at):at=e[90];let ht;return e[91]!==st||e[92]!==Je||e[93]!==at?(ht=x.jsxs("div",{className:"flex-1 flex gap-2 min-h-0",children:[st,Je,at]}),e[91]=st,e[92]=Je,e[93]=at,e[94]=ht):ht=e[94],ht}function aY(t){return{key:t.key,name:t.name,isFolder:!1,size:t.size,lastModified:t.lastModified,contentType:t.contentType}}function oY(t){return!t.isFolder}function lY(t){return{key:t,name:Fu(t),isFolder:!0,size:0,lastModified:""}}function uY({items:t,selectedKey:e,path:n,onItemClick:r,onNavigateUp:s,onDeleteItem:a,isDeleting:l}){const[c,f]=U.useState([]),d=U.useMemo(()=>[{accessorKey:"name",header:({column:p})=>x.jsxs("button",{className:"flex items-center gap-1 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors",onClick:()=>p.toggleSorting(p.getIsSorted()==="asc"),children:["Name",p.getIsSorted()==="asc"?x.jsx(fu,{className:"w-3.5 h-3.5"}):p.getIsSorted()==="desc"?x.jsx(Ji,{className:"w-3.5 h-3.5"}):x.jsx(sd,{className:"w-3.5 h-3.5 opacity-50"})]}),cell:({row:p})=>{const g=p.original,y=g.isFolder?"folder":NR(g.key),S=sY[y],w=e===g.key;return x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(S,{className:`w-4 h-4 ${g.isFolder?"text-yellow-500":"text-neutral-400"}`}),x.jsx("span",{className:`truncate ${w?"text-blue-600 dark:text-blue-400":"text-neutral-700 dark:text-neutral-200"}`,children:g.name})]})}},{accessorKey:"size",header:({column:p})=>x.jsxs("button",{className:"flex items-center gap-1 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors ml-auto",onClick:()=>p.toggleSorting(p.getIsSorted()==="asc"),children:["Size",p.getIsSorted()==="asc"?x.jsx(fu,{className:"w-3.5 h-3.5"}):p.getIsSorted()==="desc"?x.jsx(Ji,{className:"w-3.5 h-3.5"}):x.jsx(sd,{className:"w-3.5 h-3.5 opacity-50"})]}),cell:({row:p})=>{const g=p.original;return x.jsx("div",{className:"text-right text-neutral-500 dark:text-neutral-400",children:g.isFolder?"-":IR(g.size)})},size:100},{accessorKey:"lastModified",header:({column:p})=>x.jsxs("button",{className:"flex items-center gap-1 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors ml-auto",onClick:()=>p.toggleSorting(p.getIsSorted()==="asc"),children:["Modified",p.getIsSorted()==="asc"?x.jsx(fu,{className:"w-3.5 h-3.5"}):p.getIsSorted()==="desc"?x.jsx(Ji,{className:"w-3.5 h-3.5"}):x.jsx(sd,{className:"w-3.5 h-3.5 opacity-50"})]}),cell:({row:p})=>{const g=p.original;return x.jsx("div",{className:"text-right text-neutral-500 dark:text-neutral-400",children:g.lastModified?cY(g.lastModified):"-"})},size:160},{id:"actions",header:"",cell:({row:p})=>{const g=p.original;return x.jsx("button",{onClick:y=>a(g,y),disabled:l,className:"p-1 rounded opacity-0 group-hover:opacity-100 hover:bg-red-100 dark:hover:bg-red-500/10 transition-all disabled:opacity-50",title:"Delete",children:x.jsx(Ou,{className:"w-3.5 h-3.5 text-red-500"})})},size:40}],[e,a,l]),m=nA({data:t,columns:d,state:{sorting:c},onSortingChange:f,getCoreRowModel:eA(),getSortedRowModel:tA()});return x.jsxs("table",{className:"w-full text-sm",children:[x.jsx("thead",{className:"sticky top-0 bg-neutral-50 dark:bg-[#1a1a1a] z-10",children:m.getHeaderGroups().map(p=>x.jsx("tr",{className:"border-b border-neutral-200 dark:border-white/8",children:p.headers.map(g=>x.jsx("th",{className:"px-4 py-2 text-left font-medium text-neutral-500 dark:text-neutral-400",style:{width:g.getSize()},children:g.isPlaceholder?null:Gd(g.column.columnDef.header,g.getContext())},g.id))},p.id))}),x.jsxs("tbody",{children:[n&&x.jsx("tr",{className:"hover:bg-neutral-50 dark:hover:bg-white/5 cursor-pointer border-b border-neutral-100 dark:border-white/5",onClick:p=>{p.stopPropagation(),s()},children:x.jsx("td",{className:"px-4 py-2",colSpan:4,children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(HD,{className:"w-4 h-4 text-neutral-400"}),x.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:".."})]})})}),m.getRowModel().rows.map(p=>{const g=e===p.original.key;return x.jsx("tr",{className:`group cursor-pointer border-b border-neutral-100 dark:border-white/5 ${g?"bg-blue-50 dark:bg-blue-500/10":"hover:bg-neutral-50 dark:hover:bg-white/5"}`,onClick:y=>{y.stopPropagation(),r(p.original)},children:p.getVisibleCells().map(y=>x.jsx("td",{className:"px-4 py-2",children:Gd(y.column.columnDef.cell,y.getContext())},y.id))},p.id)})]})]})}function cY(t){try{return new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}catch{return t}}function fY(t){const e=tn.c(9),{onAddConnection:n}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=x.jsxs("div",{className:"mb-6",children:[x.jsx("h1",{className:"text-2xl font-semibold text-neutral-700 dark:text-neutral-300 mb-2",children:"Welcome to Granite"}),x.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-500",children:"A unified interface for databases and object storage"})]}),e[0]=r):r=e[0];let s;e[1]===Symbol.for("react.memo_cache_sentinel")?(s=x.jsxs("div",{className:"p-4 rounded-lg bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/8",children:[x.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/5 dark:bg-blue-500/10 flex items-center justify-center mx-auto mb-3",children:x.jsx(Mu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),x.jsx("h3",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300 mb-1",children:"Database Connections"}),x.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:"PostgreSQL, MySQL, SQLite, SQL Server, and Oracle"})]}),e[1]=s):s=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=x.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[s,x.jsxs("div",{className:"p-4 rounded-lg bg-neutral-50 dark:bg-white/5 border border-neutral-200 dark:border-white/8",children:[x.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/5 dark:bg-orange-500/10 flex items-center justify-center mx-auto mb-3",children:x.jsx(Ek,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),x.jsx("h3",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300 mb-1",children:"Object Storage"}),x.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:"Amazon S3 and Azure Blob Storage"})]})]}),e[2]=a):a=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=x.jsx(dh,{className:"w-4 h-4"}),e[3]=l):l=e[3];let c;e[4]!==n?(c=x.jsxs("button",{onClick:n,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-neutral-100 hover:bg-neutral-200 dark:bg-white/5 dark:hover:bg-white/10 text-neutral-700 dark:text-neutral-300 text-sm font-medium transition-colors",children:[l,"Add Connection"]}),e[4]=n,e[5]=c):c=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=x.jsx("p",{className:"mt-6 text-xs text-neutral-400 dark:text-neutral-600",children:"You can have multiple connections open simultaneously"}),e[6]=f):f=e[6];let d;return e[7]!==c?(d=x.jsx("main",{className:"flex-1 flex items-center justify-center",children:x.jsxs("div",{className:"max-w-2xl px-8 text-center",children:[r,a,c,f]})}),e[7]=c,e[8]=d):d=e[8],d}const dY=new ZE;function hY(){const t=oa({strict:!1}),e=qu(),n=t.connectionId,r=t.database,s=t.table,a=t.container,l=t._splat||"",f=(Kk(Q=>Q.from({connections:pu}).orderBy(({connections:N})=>N.createdAt,"desc"))?.data??[]).find(Q=>Q.id===n),d=f&&Ch(f)?f:void 0,m=f&&LR(f)?f:void 0,{data:p}=_s({queryKey:["tables",n,r],queryFn:()=>d&&d.sql&&r?DR(d.id,d.sql.driver,r):[],enabled:!!d&&!!d.sql&&!!r}),{data:g}=_s({queryKey:["columns",n,r,p],queryFn:async()=>{if(!d||!d.sql||!r||!p?.length)return{};const Q={},N=p.slice(0,50);return await Promise.all(N.map(async D=>{try{Q[D]=await PB(d.id,d.sql.driver,D)}catch{Q[D]=[]}})),Q},enabled:!!d&&!!d.sql&&!!r&&!!p?.length,staleTime:300*1e3}),y=U.useMemo(()=>{if(p)return{tables:p,columns:g??{}}},[p,g]),[S,w]=U.useState(""),[E,_]=U.useState("records"),k=U.useMemo(()=>d?.sql?BB(d.sql.driver):["records","columns"],[d?.sql]),R=U.useCallback(()=>{_(null)},[]),[O,L]=U.useState(!1),A=U.useCallback(()=>L(Q=>!Q),[]),[z,P]=U.useState(!1),[j,I]=U.useState(null),F=Au({mutationFn:async Q=>{if(!d?.sql)throw new Error("No database connection selected");const N=performance.now(),D=await LB(d.id,Q),q=performance.now()-N;return{response:D,duration:q}},onSuccess:Q=>{I(Q)},onError:Q=>{I({response:{error:Q instanceof Error?Q.message:"Unknown error"},duration:0})}});U.useEffect(()=>{if(d?.sql&&s){const Q=Xy(s,d.sql.driver);w(Q),F.mutate(Q),_("records")}else!s&&!a&&(w(""),I(null),_(null))},[d?.id,d?.sql,s,a]);const G=U.useCallback(async Q=>(w(Q),(await F.mutateAsync(Q)).response),[F]),J=U.useCallback((Q,N)=>{if(!n)return;const D=N.replace(/^\/+/,"");e(D?{to:`/${n}/container/${Q}/${D}`}:{to:`/${n}/container/${Q}`})},[e,n]),te=U.useCallback(Q=>{if(!d?.sql||!s)return;const N=UB(d.sql.driver,s,Q);N&&(w(N),F.mutate(N),_(Q))},[d,s,F]),H=Q=>Q===null?"NULL":typeof Q=="number"?String(Q):typeof Q=="boolean"?Q?"TRUE":"FALSE":`'${String(Q).replace(/'/g,"''")}'`,$=U.useCallback(async(Q,N,D)=>{if(!d||!s)return;const q=j?.response?.columns?.[0]??"id",M=Q[q];if(M===void 0){console.error("Cannot update: no primary key found");return}const se=`UPDATE ${s} SET ${N} = ${H(D)} WHERE ${q} = ${H(M)}`;try{await gu(d.id,se)}catch(ce){console.error("Update failed:",ce)}},[d,s,j?.response?.columns]),W=U.useCallback(async Q=>{if(!d?.sql||!s)return;const N=j?.response?.columns?.[0]??"id",D=Q[N];if(D===void 0){console.error("Cannot delete: no primary key found");return}const q=`DELETE FROM ${s} WHERE ${N} = ${H(D)}`;try{await gu(d.id,q),F.mutate(Xy(s,d.sql.driver))}catch(M){console.error("Delete failed:",M)}},[d,s,j?.response?.columns,F]),oe=U.useMemo(()=>({setQuery:w,executeQuery:G,runQuerySilent:async Q=>{if(!d)throw new Error("No database connection selected");return Qu(d.id,Q)},runStatementSilent:async Q=>{if(!d)throw new Error("No database connection selected");return gu(d.id,Q)}}),[G,d]);return x.jsxs("div",{className:"h-screen flex bg-neutral-50 dark:bg-[#0d0d0d] py-2 pr-2 pl-1 gap-2",children:[x.jsx(KB,{showAddModal:z,onAddModalClose:()=>P(!1)}),d&&x.jsxs(x.Fragment,{children:[x.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden gap-2 min-w-0",children:[x.jsx("div",{className:"shrink-0",children:x.jsx(lV,{connection:d??null,selectedTable:s??null,onExecute:G,isLoading:F.isPending,schema:y,value:S,onChange:w,onToggleAI:w0().ai?.model?A:void 0,aiPanelOpen:O,supportedViews:k,onSelectView:te,activeView:E,onExpandEditor:R})}),x.jsx("div",{className:"flex-1 min-h-0",children:x.jsx(t8,{response:j?.response??null,duration:j?.duration??0,isLoading:F.isPending,tableName:s,onUpdateCell:$,onDeleteRow:W})})]}),O&&w0().ai?.model&&x.jsx(QZ,{isOpen:O,onClose:A,connection:d??null,database:r??null,table:s??null,currentQuery:S,queryResult:j?.response??null,schema:y,setters:oe})]}),m&&a&&x.jsx(iY,{connection:m,container:a,path:l,onNavigate:J}),!f&&x.jsx(fY,{onAddConnection:()=>P(!0)})]})}function pY(){const t=tn.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=x.jsx(jI,{client:dY,children:x.jsx(hY,{})}),t[0]=e):e=t[0],e}yk.options.defaultComponent=pY;function mY(){const t=tn.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=x.jsx(OD,{router:yk}),t[0]=e):e=t[0],e}dI.createRoot(document.getElementById("root")).render(x.jsx(U.StrictMode,{children:x.jsx(mY,{})}));
